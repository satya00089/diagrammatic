function GH(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Vf=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function cd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ky={exports:{}},Zc={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wA;function KH(){if(wA)return Zc;wA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,s){var o=null;if(s!==void 0&&(o=""+s),i.key!==void 0&&(o=""+i.key),"key"in i){s={};for(var l in i)l!=="key"&&(s[l]=i[l])}else s=i;return i=s.ref,{$$typeof:e,type:r,key:o,ref:i!==void 0?i:null,props:s}}return Zc.Fragment=t,Zc.jsx=n,Zc.jsxs=n,Zc}var SA;function YH(){return SA||(SA=1,Ky.exports=KH()),Ky.exports}var v=YH(),Yy={exports:{}},Fe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CA;function WH(){if(CA)return Fe;CA=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;function g(P){return P===null||typeof P!="object"?null:(P=p&&P[p]||P["@@iterator"],typeof P=="function"?P:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,S={};function w(P,G,oe){this.props=P,this.context=G,this.refs=S,this.updater=oe||y}w.prototype.isReactComponent={},w.prototype.setState=function(P,G){if(typeof P!="object"&&typeof P!="function"&&P!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,P,G,"setState")},w.prototype.forceUpdate=function(P){this.updater.enqueueForceUpdate(this,P,"forceUpdate")};function E(){}E.prototype=w.prototype;function N(P,G,oe){this.props=P,this.context=G,this.refs=S,this.updater=oe||y}var k=N.prototype=new E;k.constructor=N,x(k,w.prototype),k.isPureReactComponent=!0;var T=Array.isArray,A={H:null,A:null,T:null,S:null,V:null},_=Object.prototype.hasOwnProperty;function R(P,G,oe,ce,H,X){return oe=X.ref,{$$typeof:e,type:P,key:G,ref:oe!==void 0?oe:null,props:X}}function D(P,G){return R(P.type,G,void 0,void 0,void 0,P.props)}function B(P){return typeof P=="object"&&P!==null&&P.$$typeof===e}function $(P){var G={"=":"=0",":":"=2"};return"$"+P.replace(/[=:]/g,function(oe){return G[oe]})}var z=/\/+/g;function V(P,G){return typeof P=="object"&&P!==null&&P.key!=null?$(""+P.key):G.toString(36)}function Y(){}function I(P){switch(P.status){case"fulfilled":return P.value;case"rejected":throw P.reason;default:switch(typeof P.status=="string"?P.then(Y,Y):(P.status="pending",P.then(function(G){P.status==="pending"&&(P.status="fulfilled",P.value=G)},function(G){P.status==="pending"&&(P.status="rejected",P.reason=G)})),P.status){case"fulfilled":return P.value;case"rejected":throw P.reason}}throw P}function F(P,G,oe,ce,H){var X=typeof P;(X==="undefined"||X==="boolean")&&(P=null);var Q=!1;if(P===null)Q=!0;else switch(X){case"bigint":case"string":case"number":Q=!0;break;case"object":switch(P.$$typeof){case e:case t:Q=!0;break;case h:return Q=P._init,F(Q(P._payload),G,oe,ce,H)}}if(Q)return H=H(P),Q=ce===""?"."+V(P,0):ce,T(H)?(oe="",Q!=null&&(oe=Q.replace(z,"$&/")+"/"),F(H,G,oe,"",function(ge){return ge})):H!=null&&(B(H)&&(H=D(H,oe+(H.key==null||P&&P.key===H.key?"":(""+H.key).replace(z,"$&/")+"/")+Q)),G.push(H)),1;Q=0;var ie=ce===""?".":ce+":";if(T(P))for(var te=0;te<P.length;te++)ce=P[te],X=ie+V(ce,te),Q+=F(ce,G,oe,X,H);else if(te=g(P),typeof te=="function")for(P=te.call(P),te=0;!(ce=P.next()).done;)ce=ce.value,X=ie+V(ce,te++),Q+=F(ce,G,oe,X,H);else if(X==="object"){if(typeof P.then=="function")return F(I(P),G,oe,ce,H);throw G=String(P),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(P).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return Q}function L(P,G,oe){if(P==null)return P;var ce=[],H=0;return F(P,ce,"","",function(X){return G.call(oe,X,H++)}),ce}function q(P){if(P._status===-1){var G=P._result;G=G(),G.then(function(oe){(P._status===0||P._status===-1)&&(P._status=1,P._result=oe)},function(oe){(P._status===0||P._status===-1)&&(P._status=2,P._result=oe)}),P._status===-1&&(P._status=0,P._result=G)}if(P._status===1)return P._result.default;throw P._result}var W=typeof reportError=="function"?reportError:function(P){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof P=="object"&&P!==null&&typeof P.message=="string"?String(P.message):String(P),error:P});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",P);return}console.error(P)};function J(){}return Fe.Children={map:L,forEach:function(P,G,oe){L(P,function(){G.apply(this,arguments)},oe)},count:function(P){var G=0;return L(P,function(){G++}),G},toArray:function(P){return L(P,function(G){return G})||[]},only:function(P){if(!B(P))throw Error("React.Children.only expected to receive a single React element child.");return P}},Fe.Component=w,Fe.Fragment=n,Fe.Profiler=i,Fe.PureComponent=N,Fe.StrictMode=r,Fe.Suspense=u,Fe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,Fe.__COMPILER_RUNTIME={__proto__:null,c:function(P){return A.H.useMemoCache(P)}},Fe.cache=function(P){return function(){return P.apply(null,arguments)}},Fe.cloneElement=function(P,G,oe){if(P==null)throw Error("The argument must be a React element, but you passed "+P+".");var ce=x({},P.props),H=P.key,X=void 0;if(G!=null)for(Q in G.ref!==void 0&&(X=void 0),G.key!==void 0&&(H=""+G.key),G)!_.call(G,Q)||Q==="key"||Q==="__self"||Q==="__source"||Q==="ref"&&G.ref===void 0||(ce[Q]=G[Q]);var Q=arguments.length-2;if(Q===1)ce.children=oe;else if(1<Q){for(var ie=Array(Q),te=0;te<Q;te++)ie[te]=arguments[te+2];ce.children=ie}return R(P.type,H,void 0,void 0,X,ce)},Fe.createContext=function(P){return P={$$typeof:o,_currentValue:P,_currentValue2:P,_threadCount:0,Provider:null,Consumer:null},P.Provider=P,P.Consumer={$$typeof:s,_context:P},P},Fe.createElement=function(P,G,oe){var ce,H={},X=null;if(G!=null)for(ce in G.key!==void 0&&(X=""+G.key),G)_.call(G,ce)&&ce!=="key"&&ce!=="__self"&&ce!=="__source"&&(H[ce]=G[ce]);var Q=arguments.length-2;if(Q===1)H.children=oe;else if(1<Q){for(var ie=Array(Q),te=0;te<Q;te++)ie[te]=arguments[te+2];H.children=ie}if(P&&P.defaultProps)for(ce in Q=P.defaultProps,Q)H[ce]===void 0&&(H[ce]=Q[ce]);return R(P,X,void 0,void 0,null,H)},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(P){return{$$typeof:l,render:P}},Fe.isValidElement=B,Fe.lazy=function(P){return{$$typeof:h,_payload:{_status:-1,_result:P},_init:q}},Fe.memo=function(P,G){return{$$typeof:d,type:P,compare:G===void 0?null:G}},Fe.startTransition=function(P){var G=A.T,oe={};A.T=oe;try{var ce=P(),H=A.S;H!==null&&H(oe,ce),typeof ce=="object"&&ce!==null&&typeof ce.then=="function"&&ce.then(J,W)}catch(X){W(X)}finally{A.T=G}},Fe.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},Fe.use=function(P){return A.H.use(P)},Fe.useActionState=function(P,G,oe){return A.H.useActionState(P,G,oe)},Fe.useCallback=function(P,G){return A.H.useCallback(P,G)},Fe.useContext=function(P){return A.H.useContext(P)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(P,G){return A.H.useDeferredValue(P,G)},Fe.useEffect=function(P,G,oe){var ce=A.H;if(typeof oe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ce.useEffect(P,G)},Fe.useId=function(){return A.H.useId()},Fe.useImperativeHandle=function(P,G,oe){return A.H.useImperativeHandle(P,G,oe)},Fe.useInsertionEffect=function(P,G){return A.H.useInsertionEffect(P,G)},Fe.useLayoutEffect=function(P,G){return A.H.useLayoutEffect(P,G)},Fe.useMemo=function(P,G){return A.H.useMemo(P,G)},Fe.useOptimistic=function(P,G){return A.H.useOptimistic(P,G)},Fe.useReducer=function(P,G,oe){return A.H.useReducer(P,G,oe)},Fe.useRef=function(P){return A.H.useRef(P)},Fe.useState=function(P){return A.H.useState(P)},Fe.useSyncExternalStore=function(P,G,oe){return A.H.useSyncExternalStore(P,G,oe)},Fe.useTransition=function(){return A.H.useTransition()},Fe.version="19.1.1",Fe}var EA;function ud(){return EA||(EA=1,Yy.exports=WH()),Yy.exports}var O=ud();const Pe=cd(O),XH=GH({__proto__:null,default:Pe},[O]);var Wy={exports:{}},Qc={},Xy={exports:{}},Zy={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kA;function ZH(){return kA||(kA=1,(function(e){function t(L,q){var W=L.length;L.push(q);e:for(;0<W;){var J=W-1>>>1,P=L[J];if(0<i(P,q))L[J]=q,L[W]=P,W=J;else break e}}function n(L){return L.length===0?null:L[0]}function r(L){if(L.length===0)return null;var q=L[0],W=L.pop();if(W!==q){L[0]=W;e:for(var J=0,P=L.length,G=P>>>1;J<G;){var oe=2*(J+1)-1,ce=L[oe],H=oe+1,X=L[H];if(0>i(ce,W))H<P&&0>i(X,ce)?(L[J]=X,L[H]=W,J=H):(L[J]=ce,L[oe]=W,J=oe);else if(H<P&&0>i(X,W))L[J]=X,L[H]=W,J=H;else break e}}return q}function i(L,q){var W=L.sortIndex-q.sortIndex;return W!==0?W:L.id-q.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var u=[],d=[],h=1,p=null,g=3,y=!1,x=!1,S=!1,w=!1,E=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function T(L){for(var q=n(d);q!==null;){if(q.callback===null)r(d);else if(q.startTime<=L)r(d),q.sortIndex=q.expirationTime,t(u,q);else break;q=n(d)}}function A(L){if(S=!1,T(L),!x)if(n(u)!==null)x=!0,_||(_=!0,V());else{var q=n(d);q!==null&&F(A,q.startTime-L)}}var _=!1,R=-1,D=5,B=-1;function $(){return w?!0:!(e.unstable_now()-B<D)}function z(){if(w=!1,_){var L=e.unstable_now();B=L;var q=!0;try{e:{x=!1,S&&(S=!1,N(R),R=-1),y=!0;var W=g;try{t:{for(T(L),p=n(u);p!==null&&!(p.expirationTime>L&&$());){var J=p.callback;if(typeof J=="function"){p.callback=null,g=p.priorityLevel;var P=J(p.expirationTime<=L);if(L=e.unstable_now(),typeof P=="function"){p.callback=P,T(L),q=!0;break t}p===n(u)&&r(u),T(L)}else r(u);p=n(u)}if(p!==null)q=!0;else{var G=n(d);G!==null&&F(A,G.startTime-L),q=!1}}break e}finally{p=null,g=W,y=!1}q=void 0}}finally{q?V():_=!1}}}var V;if(typeof k=="function")V=function(){k(z)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,I=Y.port2;Y.port1.onmessage=z,V=function(){I.postMessage(null)}}else V=function(){E(z,0)};function F(L,q){R=E(function(){L(e.unstable_now())},q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(L){L.callback=null},e.unstable_forceFrameRate=function(L){0>L||125<L?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):D=0<L?Math.floor(1e3/L):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_next=function(L){switch(g){case 1:case 2:case 3:var q=3;break;default:q=g}var W=g;g=q;try{return L()}finally{g=W}},e.unstable_requestPaint=function(){w=!0},e.unstable_runWithPriority=function(L,q){switch(L){case 1:case 2:case 3:case 4:case 5:break;default:L=3}var W=g;g=L;try{return q()}finally{g=W}},e.unstable_scheduleCallback=function(L,q,W){var J=e.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?J+W:J):W=J,L){case 1:var P=-1;break;case 2:P=250;break;case 5:P=1073741823;break;case 4:P=1e4;break;default:P=5e3}return P=W+P,L={id:h++,callback:q,priorityLevel:L,startTime:W,expirationTime:P,sortIndex:-1},W>J?(L.sortIndex=W,t(d,L),n(u)===null&&L===n(d)&&(S?(N(R),R=-1):S=!0,F(A,W-J))):(L.sortIndex=P,t(u,L),x||y||(x=!0,_||(_=!0,V()))),L},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(L){var q=g;return function(){var W=g;g=q;try{return L.apply(this,arguments)}finally{g=W}}}})(Zy)),Zy}var TA;function QH(){return TA||(TA=1,Xy.exports=ZH()),Xy.exports}var Qy={exports:{}},Sn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var NA;function JH(){if(NA)return Sn;NA=1;var e=ud();function t(u){var d="https://react.dev/errors/"+u;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)d+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(u,d,h){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:u,containerInfo:d,implementation:h}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(u,d){if(u==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return Sn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,Sn.createPortal=function(u,d){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return s(u,d,null,h)},Sn.flushSync=function(u){var d=o.T,h=r.p;try{if(o.T=null,r.p=2,u)return u()}finally{o.T=d,r.p=h,r.d.f()}},Sn.preconnect=function(u,d){typeof u=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(u,d))},Sn.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},Sn.preinit=function(u,d){if(typeof u=="string"&&d&&typeof d.as=="string"){var h=d.as,p=l(h,d.crossOrigin),g=typeof d.integrity=="string"?d.integrity:void 0,y=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;h==="style"?r.d.S(u,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:p,integrity:g,fetchPriority:y}):h==="script"&&r.d.X(u,{crossOrigin:p,integrity:g,fetchPriority:y,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},Sn.preinitModule=function(u,d){if(typeof u=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var h=l(d.as,d.crossOrigin);r.d.M(u,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(u)},Sn.preload=function(u,d){if(typeof u=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var h=d.as,p=l(h,d.crossOrigin);r.d.L(u,h,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},Sn.preloadModule=function(u,d){if(typeof u=="string")if(d){var h=l(d.as,d.crossOrigin);r.d.m(u,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(u)},Sn.requestFormReset=function(u){r.d.r(u)},Sn.unstable_batchedUpdates=function(u,d){return u(d)},Sn.useFormState=function(u,d,h){return o.H.useFormState(u,d,h)},Sn.useFormStatus=function(){return o.H.useHostTransitionStatus()},Sn.version="19.1.1",Sn}var AA;function l5(){if(AA)return Qy.exports;AA=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Qy.exports=JH(),Qy.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var MA;function eF(){if(MA)return Qc;MA=1;var e=QH(),t=ud(),n=l5();function r(a){var c="https://react.dev/errors/"+a;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function s(a){var c=a,f=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,(c.flags&4098)!==0&&(f=c.return),a=c.return;while(a)}return c.tag===3?f:null}function o(a){if(a.tag===13){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function l(a){if(s(a)!==a)throw Error(r(188))}function u(a){var c=a.alternate;if(!c){if(c=s(a),c===null)throw Error(r(188));return c!==a?null:a}for(var f=a,m=c;;){var b=f.return;if(b===null)break;var C=b.alternate;if(C===null){if(m=b.return,m!==null){f=m;continue}break}if(b.child===C.child){for(C=b.child;C;){if(C===f)return l(b),a;if(C===m)return l(b),c;C=C.sibling}throw Error(r(188))}if(f.return!==m.return)f=b,m=C;else{for(var M=!1,j=b.child;j;){if(j===f){M=!0,f=b,m=C;break}if(j===m){M=!0,m=b,f=C;break}j=j.sibling}if(!M){for(j=C.child;j;){if(j===f){M=!0,f=C,m=b;break}if(j===m){M=!0,m=C,f=b;break}j=j.sibling}if(!M)throw Error(r(189))}}if(f.alternate!==m)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?a:c}function d(a){var c=a.tag;if(c===5||c===26||c===27||c===6)return a;for(a=a.child;a!==null;){if(c=d(a),c!==null)return c;a=a.sibling}return null}var h=Object.assign,p=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),E=Symbol.for("react.provider"),N=Symbol.for("react.consumer"),k=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),D=Symbol.for("react.lazy"),B=Symbol.for("react.activity"),$=Symbol.for("react.memo_cache_sentinel"),z=Symbol.iterator;function V(a){return a===null||typeof a!="object"?null:(a=z&&a[z]||a["@@iterator"],typeof a=="function"?a:null)}var Y=Symbol.for("react.client.reference");function I(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===Y?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case x:return"Fragment";case w:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case _:return"SuspenseList";case B:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case y:return"Portal";case k:return(a.displayName||"Context")+".Provider";case N:return(a._context.displayName||"Context")+".Consumer";case T:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case R:return c=a.displayName||null,c!==null?c:I(a.type)||"Memo";case D:c=a._payload,a=a._init;try{return I(a(c))}catch{}}return null}var F=Array.isArray,L=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},J=[],P=-1;function G(a){return{current:a}}function oe(a){0>P||(a.current=J[P],J[P]=null,P--)}function ce(a,c){P++,J[P]=a.current,a.current=c}var H=G(null),X=G(null),Q=G(null),ie=G(null);function te(a,c){switch(ce(Q,c),ce(X,a),ce(H,null),c.nodeType){case 9:case 11:a=(a=c.documentElement)&&(a=a.namespaceURI)?WN(a):0;break;default:if(a=c.tagName,c=c.namespaceURI)c=WN(c),a=XN(c,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}oe(H),ce(H,a)}function ge(){oe(H),oe(X),oe(Q)}function xe(a){a.memoizedState!==null&&ce(ie,a);var c=H.current,f=XN(c,a.type);c!==f&&(ce(X,a),ce(H,f))}function Me(a){X.current===a&&(oe(H),oe(X)),ie.current===a&&(oe(ie),Gc._currentValue=W)}var Ae=Object.prototype.hasOwnProperty,Te=e.unstable_scheduleCallback,we=e.unstable_cancelCallback,Se=e.unstable_shouldYield,Je=e.unstable_requestPaint,ke=e.unstable_now,Pt=e.unstable_getCurrentPriorityLevel,bn=e.unstable_ImmediatePriority,jr=e.unstable_UserBlockingPriority,Wt=e.unstable_NormalPriority,Bt=e.unstable_LowPriority,ut=e.unstable_IdlePriority,dr=e.log,On=e.unstable_setDisableYieldValue,xn=null,pt=null;function It(a){if(typeof dr=="function"&&On(a),pt&&typeof pt.setStrictMode=="function")try{pt.setStrictMode(xn,a)}catch{}}var zt=Math.clz32?Math.clz32:Xr,qe=Math.log,Wr=Math.LN2;function Xr(a){return a>>>=0,a===0?32:31-(qe(a)/Wr|0)|0}var en=256,tn=4194304;function jn(a){var c=a&42;if(c!==0)return c;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function is(a,c,f){var m=a.pendingLanes;if(m===0)return 0;var b=0,C=a.suspendedLanes,M=a.pingedLanes;a=a.warmLanes;var j=m&134217727;return j!==0?(m=j&~C,m!==0?b=jn(m):(M&=j,M!==0?b=jn(M):f||(f=j&~a,f!==0&&(b=jn(f))))):(j=m&~C,j!==0?b=jn(j):M!==0?b=jn(M):f||(f=m&~a,f!==0&&(b=jn(f)))),b===0?0:c!==0&&c!==b&&(c&C)===0&&(C=b&-b,f=c&-c,C>=f||C===32&&(f&4194048)!==0)?c:b}function Gn(a,c){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&c)===0}function Ql(a,c){switch(a){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ss(){var a=en;return en<<=1,(en&4194048)===0&&(en=256),a}function as(){var a=tn;return tn<<=1,(tn&62914560)===0&&(tn=4194304),a}function ls(a){for(var c=[],f=0;31>f;f++)c.push(a);return c}function Zr(a,c){a.pendingLanes|=c,c!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function Jl(a,c,f,m,b,C){var M=a.pendingLanes;a.pendingLanes=f,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=f,a.entangledLanes&=f,a.errorRecoveryDisabledLanes&=f,a.shellSuspendCounter=0;var j=a.entanglements,U=a.expirationTimes,re=a.hiddenUpdates;for(f=M&~f;0<f;){var ue=31-zt(f),he=1<<ue;j[ue]=0,U[ue]=-1;var se=re[ue];if(se!==null)for(re[ue]=null,ue=0;ue<se.length;ue++){var le=se[ue];le!==null&&(le.lane&=-536870913)}f&=~he}m!==0&&co(a,m,0),C!==0&&b===0&&a.tag!==0&&(a.suspendedLanes|=C&~(M&~c))}function co(a,c,f){a.pendingLanes|=c,a.suspendedLanes&=~c;var m=31-zt(c);a.entangledLanes|=c,a.entanglements[m]=a.entanglements[m]|1073741824|f&4194090}function Qr(a,c){var f=a.entangledLanes|=c;for(a=a.entanglements;f;){var m=31-zt(f),b=1<<m;b&c|a[m]&c&&(a[m]|=c),f&=~b}}function uo(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function fo(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function ho(){var a=q.p;return a!==0?a:(a=window.event,a===void 0?32:mA(a.type))}function ec(a,c){var f=q.p;try{return q.p=a,c()}finally{q.p=f}}var fr=Math.random().toString(36).slice(2),qt="__reactFiber$"+fr,nn="__reactProps$"+fr,Jr="__reactContainer$"+fr,ei="__reactEvents$"+fr,po="__reactListeners$"+fr,tc="__reactHandles$"+fr,ka="__reactResources$"+fr,Ci="__reactMarker$"+fr;function mo(a){delete a[qt],delete a[nn],delete a[ei],delete a[po],delete a[tc]}function ti(a){var c=a[qt];if(c)return c;for(var f=a.parentNode;f;){if(c=f[Jr]||f[qt]){if(f=c.alternate,c.child!==null||f!==null&&f.child!==null)for(a=eA(a);a!==null;){if(f=a[qt])return f;a=eA(a)}return c}a=f,f=a.parentNode}return null}function Kn(a){if(a=a[qt]||a[Jr]){var c=a.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return a}return null}function ni(a){var c=a.tag;if(c===5||c===26||c===27||c===6)return a.stateNode;throw Error(r(33))}function Lr(a){var c=a[ka];return c||(c=a[ka]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Et(a){a[Ci]=!0}var Ta=new Set,go={};function Pr(a,c){ri(a,c),ri(a+"Capture",c)}function ri(a,c){for(go[a]=c,a=0;a<c.length;a++)Ta.add(c[a])}var nc=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),yo={},Na={};function ae(a){return Ae.call(Na,a)?!0:Ae.call(yo,a)?!1:nc.test(a)?Na[a]=!0:(yo[a]=!0,!1)}function ne(a,c,f){if(ae(c))if(f===null)a.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":a.removeAttribute(c);return;case"boolean":var m=c.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){a.removeAttribute(c);return}}a.setAttribute(c,""+f)}}function fe(a,c,f){if(f===null)a.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(c);return}a.setAttribute(c,""+f)}}function ye(a,c,f,m){if(m===null)a.removeAttribute(f);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(f);return}a.setAttributeNS(c,f,""+m)}}var ve,Ce;function Oe(a){if(ve===void 0)try{throw Error()}catch(f){var c=f.stack.trim().match(/\n( *(at )?)/);ve=c&&c[1]||"",Ce=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ve+a+Ce}var He=!1;function Dt(a,c){if(!a||He)return"";He=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(c){var he=function(){throw Error()};if(Object.defineProperty(he.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(he,[])}catch(le){var se=le}Reflect.construct(a,[],he)}else{try{he.call()}catch(le){se=le}a.call(he.prototype)}}else{try{throw Error()}catch(le){se=le}(he=a())&&typeof he.catch=="function"&&he.catch(function(){})}}catch(le){if(le&&se&&typeof le.stack=="string")return[le.stack,se.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var b=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");b&&b.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=m.DetermineComponentFrameRoot(),M=C[0],j=C[1];if(M&&j){var U=M.split(`
`),re=j.split(`
`);for(b=m=0;m<U.length&&!U[m].includes("DetermineComponentFrameRoot");)m++;for(;b<re.length&&!re[b].includes("DetermineComponentFrameRoot");)b++;if(m===U.length||b===re.length)for(m=U.length-1,b=re.length-1;1<=m&&0<=b&&U[m]!==re[b];)b--;for(;1<=m&&0<=b;m--,b--)if(U[m]!==re[b]){if(m!==1||b!==1)do if(m--,b--,0>b||U[m]!==re[b]){var ue=`
`+U[m].replace(" at new "," at ");return a.displayName&&ue.includes("<anonymous>")&&(ue=ue.replace("<anonymous>",a.displayName)),ue}while(1<=m&&0<=b);break}}}finally{He=!1,Error.prepareStackTrace=f}return(f=a?a.displayName||a.name:"")?Oe(f):""}function Yn(a){switch(a.tag){case 26:case 27:case 5:return Oe(a.type);case 16:return Oe("Lazy");case 13:return Oe("Suspense");case 19:return Oe("SuspenseList");case 0:case 15:return Dt(a.type,!1);case 11:return Dt(a.type.render,!1);case 1:return Dt(a.type,!0);case 31:return Oe("Activity");default:return""}}function hr(a){try{var c="";do c+=Yn(a),a=a.return;while(a);return c}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}function bt(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Ze(a){var c=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Xt(a){var c=Ze(a)?"checked":"value",f=Object.getOwnPropertyDescriptor(a.constructor.prototype,c),m=""+a[c];if(!a.hasOwnProperty(c)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var b=f.get,C=f.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return b.call(this)},set:function(M){m=""+M,C.call(this,M)}}),Object.defineProperty(a,c,{enumerable:f.enumerable}),{getValue:function(){return m},setValue:function(M){m=""+M},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function cs(a){a._valueTracker||(a._valueTracker=Xt(a))}function rc(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var f=c.getValue(),m="";return a&&(m=Ze(a)?a.checked?"true":"false":a.value),a=m,a!==f?(c.setValue(a),!0):!1}function Aa(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var $m=/[\n"\\]/g;function Ln(a){return a.replace($m,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function vo(a,c,f,m,b,C,M,j){a.name="",M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"?a.type=M:a.removeAttribute("type"),c!=null?M==="number"?(c===0&&a.value===""||a.value!=c)&&(a.value=""+bt(c)):a.value!==""+bt(c)&&(a.value=""+bt(c)):M!=="submit"&&M!=="reset"||a.removeAttribute("value"),c!=null?ic(a,M,bt(c)):f!=null?ic(a,M,bt(f)):m!=null&&a.removeAttribute("value"),b==null&&C!=null&&(a.defaultChecked=!!C),b!=null&&(a.checked=b&&typeof b!="function"&&typeof b!="symbol"),j!=null&&typeof j!="function"&&typeof j!="symbol"&&typeof j!="boolean"?a.name=""+bt(j):a.removeAttribute("name")}function Od(a,c,f,m,b,C,M,j){if(C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(a.type=C),c!=null||f!=null){if(!(C!=="submit"&&C!=="reset"||c!=null))return;f=f!=null?""+bt(f):"",c=c!=null?""+bt(c):f,j||c===a.value||(a.value=c),a.defaultValue=c}m=m??b,m=typeof m!="function"&&typeof m!="symbol"&&!!m,a.checked=j?a.checked:!!m,a.defaultChecked=!!m,M!=null&&typeof M!="function"&&typeof M!="symbol"&&typeof M!="boolean"&&(a.name=M)}function ic(a,c,f){c==="number"&&Aa(a.ownerDocument)===a||a.defaultValue===""+f||(a.defaultValue=""+f)}function Ei(a,c,f,m){if(a=a.options,c){c={};for(var b=0;b<f.length;b++)c["$"+f[b]]=!0;for(f=0;f<a.length;f++)b=c.hasOwnProperty("$"+a[f].value),a[f].selected!==b&&(a[f].selected=b),b&&m&&(a[f].defaultSelected=!0)}else{for(f=""+bt(f),c=null,b=0;b<a.length;b++){if(a[b].value===f){a[b].selected=!0,m&&(a[b].defaultSelected=!0);return}c!==null||a[b].disabled||(c=a[b])}c!==null&&(c.selected=!0)}}function Kk(a,c,f){if(c!=null&&(c=""+bt(c),c!==a.value&&(a.value=c),f==null)){a.defaultValue!==c&&(a.defaultValue=c);return}a.defaultValue=f!=null?""+bt(f):""}function Yk(a,c,f,m){if(c==null){if(m!=null){if(f!=null)throw Error(r(92));if(F(m)){if(1<m.length)throw Error(r(93));m=m[0]}f=m}f==null&&(f=""),c=f}f=bt(c),a.defaultValue=f,m=a.textContent,m===f&&m!==""&&m!==null&&(a.value=m)}function Ma(a,c){if(c){var f=a.firstChild;if(f&&f===a.lastChild&&f.nodeType===3){f.nodeValue=c;return}}a.textContent=c}var FV=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Wk(a,c,f){var m=c.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?m?a.setProperty(c,""):c==="float"?a.cssFloat="":a[c]="":m?a.setProperty(c,f):typeof f!="number"||f===0||FV.has(c)?c==="float"?a.cssFloat=f:a[c]=(""+f).trim():a[c]=f+"px"}function Xk(a,c,f){if(c!=null&&typeof c!="object")throw Error(r(62));if(a=a.style,f!=null){for(var m in f)!f.hasOwnProperty(m)||c!=null&&c.hasOwnProperty(m)||(m.indexOf("--")===0?a.setProperty(m,""):m==="float"?a.cssFloat="":a[m]="");for(var b in c)m=c[b],c.hasOwnProperty(b)&&f[b]!==m&&Wk(a,b,m)}else for(var C in c)c.hasOwnProperty(C)&&Wk(a,C,c[C])}function Gm(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var UV=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),$V=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function jd(a){return $V.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var Km=null;function Ym(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var _a=null,Da=null;function Zk(a){var c=Kn(a);if(c&&(a=c.stateNode)){var f=a[nn]||null;e:switch(a=c.stateNode,c.type){case"input":if(vo(a,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),c=f.name,f.type==="radio"&&c!=null){for(f=a;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+Ln(""+c)+'"][type="radio"]'),c=0;c<f.length;c++){var m=f[c];if(m!==a&&m.form===a.form){var b=m[nn]||null;if(!b)throw Error(r(90));vo(m,b.value,b.defaultValue,b.defaultValue,b.checked,b.defaultChecked,b.type,b.name)}}for(c=0;c<f.length;c++)m=f[c],m.form===a.form&&rc(m)}break e;case"textarea":Kk(a,f.value,f.defaultValue);break e;case"select":c=f.value,c!=null&&Ei(a,!!f.multiple,c,!1)}}}var Wm=!1;function Qk(a,c,f){if(Wm)return a(c,f);Wm=!0;try{var m=a(c);return m}finally{if(Wm=!1,(_a!==null||Da!==null)&&(xf(),_a&&(c=_a,a=Da,Da=_a=null,Zk(c),a)))for(c=0;c<a.length;c++)Zk(a[c])}}function sc(a,c){var f=a.stateNode;if(f===null)return null;var m=f[nn]||null;if(m===null)return null;f=m[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(a=a.type,m=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!m;break e;default:a=!1}if(a)return null;if(f&&typeof f!="function")throw Error(r(231,c,typeof f));return f}var ki=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Xm=!1;if(ki)try{var oc={};Object.defineProperty(oc,"passive",{get:function(){Xm=!0}}),window.addEventListener("test",oc,oc),window.removeEventListener("test",oc,oc)}catch{Xm=!1}var us=null,Zm=null,Ld=null;function Jk(){if(Ld)return Ld;var a,c=Zm,f=c.length,m,b="value"in us?us.value:us.textContent,C=b.length;for(a=0;a<f&&c[a]===b[a];a++);var M=f-a;for(m=1;m<=M&&c[f-m]===b[C-m];m++);return Ld=b.slice(a,1<m?1-m:void 0)}function Pd(a){var c=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&c===13&&(a=13)):a=c,a===10&&(a=13),32<=a||a===13?a:0}function Bd(){return!0}function e2(){return!1}function Pn(a){function c(f,m,b,C,M){this._reactName=f,this._targetInst=b,this.type=m,this.nativeEvent=C,this.target=M,this.currentTarget=null;for(var j in a)a.hasOwnProperty(j)&&(f=a[j],this[j]=f?f(C):C[j]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?Bd:e2,this.isPropagationStopped=e2,this}return h(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=Bd)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=Bd)},persist:function(){},isPersistent:Bd}),c}var bo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Id=Pn(bo),ac=h({},bo,{view:0,detail:0}),GV=Pn(ac),Qm,Jm,lc,zd=h({},ac,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:tg,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==lc&&(lc&&a.type==="mousemove"?(Qm=a.screenX-lc.screenX,Jm=a.screenY-lc.screenY):Jm=Qm=0,lc=a),Qm)},movementY:function(a){return"movementY"in a?a.movementY:Jm}}),t2=Pn(zd),KV=h({},zd,{dataTransfer:0}),YV=Pn(KV),WV=h({},ac,{relatedTarget:0}),eg=Pn(WV),XV=h({},bo,{animationName:0,elapsedTime:0,pseudoElement:0}),ZV=Pn(XV),QV=h({},bo,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),JV=Pn(QV),e8=h({},bo,{data:0}),n2=Pn(e8),t8={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},n8={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},r8={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function i8(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=r8[a])?!!c[a]:!1}function tg(){return i8}var s8=h({},ac,{key:function(a){if(a.key){var c=t8[a.key]||a.key;if(c!=="Unidentified")return c}return a.type==="keypress"?(a=Pd(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?n8[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:tg,charCode:function(a){return a.type==="keypress"?Pd(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Pd(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),o8=Pn(s8),a8=h({},zd,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),r2=Pn(a8),l8=h({},ac,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:tg}),c8=Pn(l8),u8=h({},bo,{propertyName:0,elapsedTime:0,pseudoElement:0}),d8=Pn(u8),f8=h({},zd,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),h8=Pn(f8),p8=h({},bo,{newState:0,oldState:0}),m8=Pn(p8),g8=[9,13,27,32],ng=ki&&"CompositionEvent"in window,cc=null;ki&&"documentMode"in document&&(cc=document.documentMode);var y8=ki&&"TextEvent"in window&&!cc,i2=ki&&(!ng||cc&&8<cc&&11>=cc),s2=" ",o2=!1;function a2(a,c){switch(a){case"keyup":return g8.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function l2(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var Ra=!1;function v8(a,c){switch(a){case"compositionend":return l2(c);case"keypress":return c.which!==32?null:(o2=!0,s2);case"textInput":return a=c.data,a===s2&&o2?null:a;default:return null}}function b8(a,c){if(Ra)return a==="compositionend"||!ng&&a2(a,c)?(a=Jk(),Ld=Zm=us=null,Ra=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return i2&&c.locale!=="ko"?null:c.data;default:return null}}var x8={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function c2(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c==="input"?!!x8[a.type]:c==="textarea"}function u2(a,c,f,m){_a?Da?Da.push(m):Da=[m]:_a=m,c=Tf(c,"onChange"),0<c.length&&(f=new Id("onChange","change",null,f,m),a.push({event:f,listeners:c}))}var uc=null,dc=null;function w8(a){UN(a,0)}function qd(a){var c=ni(a);if(rc(c))return a}function d2(a,c){if(a==="change")return c}var f2=!1;if(ki){var rg;if(ki){var ig="oninput"in document;if(!ig){var h2=document.createElement("div");h2.setAttribute("oninput","return;"),ig=typeof h2.oninput=="function"}rg=ig}else rg=!1;f2=rg&&(!document.documentMode||9<document.documentMode)}function p2(){uc&&(uc.detachEvent("onpropertychange",m2),dc=uc=null)}function m2(a){if(a.propertyName==="value"&&qd(dc)){var c=[];u2(c,dc,a,Ym(a)),Qk(w8,c)}}function S8(a,c,f){a==="focusin"?(p2(),uc=c,dc=f,uc.attachEvent("onpropertychange",m2)):a==="focusout"&&p2()}function C8(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return qd(dc)}function E8(a,c){if(a==="click")return qd(c)}function k8(a,c){if(a==="input"||a==="change")return qd(c)}function T8(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var Wn=typeof Object.is=="function"?Object.is:T8;function fc(a,c){if(Wn(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var f=Object.keys(a),m=Object.keys(c);if(f.length!==m.length)return!1;for(m=0;m<f.length;m++){var b=f[m];if(!Ae.call(c,b)||!Wn(a[b],c[b]))return!1}return!0}function g2(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function y2(a,c){var f=g2(a);a=0;for(var m;f;){if(f.nodeType===3){if(m=a+f.textContent.length,a<=c&&m>=c)return{node:f,offset:c-a};a=m}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=g2(f)}}function v2(a,c){return a&&c?a===c?!0:a&&a.nodeType===3?!1:c&&c.nodeType===3?v2(a,c.parentNode):"contains"in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&16):!1:!1}function b2(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var c=Aa(a.document);c instanceof a.HTMLIFrameElement;){try{var f=typeof c.contentWindow.location.href=="string"}catch{f=!1}if(f)a=c.contentWindow;else break;c=Aa(a.document)}return c}function sg(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c&&(c==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||c==="textarea"||a.contentEditable==="true")}var N8=ki&&"documentMode"in document&&11>=document.documentMode,Oa=null,og=null,hc=null,ag=!1;function x2(a,c,f){var m=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;ag||Oa==null||Oa!==Aa(m)||(m=Oa,"selectionStart"in m&&sg(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),hc&&fc(hc,m)||(hc=m,m=Tf(og,"onSelect"),0<m.length&&(c=new Id("onSelect","select",null,c,f),a.push({event:c,listeners:m}),c.target=Oa)))}function xo(a,c){var f={};return f[a.toLowerCase()]=c.toLowerCase(),f["Webkit"+a]="webkit"+c,f["Moz"+a]="moz"+c,f}var ja={animationend:xo("Animation","AnimationEnd"),animationiteration:xo("Animation","AnimationIteration"),animationstart:xo("Animation","AnimationStart"),transitionrun:xo("Transition","TransitionRun"),transitionstart:xo("Transition","TransitionStart"),transitioncancel:xo("Transition","TransitionCancel"),transitionend:xo("Transition","TransitionEnd")},lg={},w2={};ki&&(w2=document.createElement("div").style,"AnimationEvent"in window||(delete ja.animationend.animation,delete ja.animationiteration.animation,delete ja.animationstart.animation),"TransitionEvent"in window||delete ja.transitionend.transition);function wo(a){if(lg[a])return lg[a];if(!ja[a])return a;var c=ja[a],f;for(f in c)if(c.hasOwnProperty(f)&&f in w2)return lg[a]=c[f];return a}var S2=wo("animationend"),C2=wo("animationiteration"),E2=wo("animationstart"),A8=wo("transitionrun"),M8=wo("transitionstart"),_8=wo("transitioncancel"),k2=wo("transitionend"),T2=new Map,cg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");cg.push("scrollEnd");function Br(a,c){T2.set(a,c),Pr(c,[a])}var N2=new WeakMap;function pr(a,c){if(typeof a=="object"&&a!==null){var f=N2.get(a);return f!==void 0?f:(c={value:a,source:c,stack:hr(c)},N2.set(a,c),c)}return{value:a,source:c,stack:hr(c)}}var mr=[],La=0,ug=0;function Vd(){for(var a=La,c=ug=La=0;c<a;){var f=mr[c];mr[c++]=null;var m=mr[c];mr[c++]=null;var b=mr[c];mr[c++]=null;var C=mr[c];if(mr[c++]=null,m!==null&&b!==null){var M=m.pending;M===null?b.next=b:(b.next=M.next,M.next=b),m.pending=b}C!==0&&A2(f,b,C)}}function Hd(a,c,f,m){mr[La++]=a,mr[La++]=c,mr[La++]=f,mr[La++]=m,ug|=m,a.lanes|=m,a=a.alternate,a!==null&&(a.lanes|=m)}function dg(a,c,f,m){return Hd(a,c,f,m),Fd(a)}function Pa(a,c){return Hd(a,null,null,c),Fd(a)}function A2(a,c,f){a.lanes|=f;var m=a.alternate;m!==null&&(m.lanes|=f);for(var b=!1,C=a.return;C!==null;)C.childLanes|=f,m=C.alternate,m!==null&&(m.childLanes|=f),C.tag===22&&(a=C.stateNode,a===null||a._visibility&1||(b=!0)),a=C,C=C.return;return a.tag===3?(C=a.stateNode,b&&c!==null&&(b=31-zt(f),a=C.hiddenUpdates,m=a[b],m===null?a[b]=[c]:m.push(c),c.lane=f|536870912),C):null}function Fd(a){if(50<Ic)throw Ic=0,yy=null,Error(r(185));for(var c=a.return;c!==null;)a=c,c=a.return;return a.tag===3?a.stateNode:null}var Ba={};function D8(a,c,f,m){this.tag=a,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xn(a,c,f,m){return new D8(a,c,f,m)}function fg(a){return a=a.prototype,!(!a||!a.isReactComponent)}function Ti(a,c){var f=a.alternate;return f===null?(f=Xn(a.tag,c,a.key,a.mode),f.elementType=a.elementType,f.type=a.type,f.stateNode=a.stateNode,f.alternate=a,a.alternate=f):(f.pendingProps=c,f.type=a.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=a.flags&65011712,f.childLanes=a.childLanes,f.lanes=a.lanes,f.child=a.child,f.memoizedProps=a.memoizedProps,f.memoizedState=a.memoizedState,f.updateQueue=a.updateQueue,c=a.dependencies,f.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},f.sibling=a.sibling,f.index=a.index,f.ref=a.ref,f.refCleanup=a.refCleanup,f}function M2(a,c){a.flags&=65011714;var f=a.alternate;return f===null?(a.childLanes=0,a.lanes=c,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=f.childLanes,a.lanes=f.lanes,a.child=f.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=f.memoizedProps,a.memoizedState=f.memoizedState,a.updateQueue=f.updateQueue,a.type=f.type,c=f.dependencies,a.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),a}function Ud(a,c,f,m,b,C){var M=0;if(m=a,typeof a=="function")fg(a)&&(M=1);else if(typeof a=="string")M=OH(a,f,H.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case B:return a=Xn(31,f,c,b),a.elementType=B,a.lanes=C,a;case x:return So(f.children,b,C,c);case S:M=8,b|=24;break;case w:return a=Xn(12,f,c,b|2),a.elementType=w,a.lanes=C,a;case A:return a=Xn(13,f,c,b),a.elementType=A,a.lanes=C,a;case _:return a=Xn(19,f,c,b),a.elementType=_,a.lanes=C,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case E:case k:M=10;break e;case N:M=9;break e;case T:M=11;break e;case R:M=14;break e;case D:M=16,m=null;break e}M=29,f=Error(r(130,a===null?"null":typeof a,"")),m=null}return c=Xn(M,f,c,b),c.elementType=a,c.type=m,c.lanes=C,c}function So(a,c,f,m){return a=Xn(7,a,m,c),a.lanes=f,a}function hg(a,c,f){return a=Xn(6,a,null,c),a.lanes=f,a}function pg(a,c,f){return c=Xn(4,a.children!==null?a.children:[],a.key,c),c.lanes=f,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}var Ia=[],za=0,$d=null,Gd=0,gr=[],yr=0,Co=null,Ni=1,Ai="";function Eo(a,c){Ia[za++]=Gd,Ia[za++]=$d,$d=a,Gd=c}function _2(a,c,f){gr[yr++]=Ni,gr[yr++]=Ai,gr[yr++]=Co,Co=a;var m=Ni;a=Ai;var b=32-zt(m)-1;m&=~(1<<b),f+=1;var C=32-zt(c)+b;if(30<C){var M=b-b%5;C=(m&(1<<M)-1).toString(32),m>>=M,b-=M,Ni=1<<32-zt(c)+b|f<<b|m,Ai=C+a}else Ni=1<<C|f<<b|m,Ai=a}function mg(a){a.return!==null&&(Eo(a,1),_2(a,1,0))}function gg(a){for(;a===$d;)$d=Ia[--za],Ia[za]=null,Gd=Ia[--za],Ia[za]=null;for(;a===Co;)Co=gr[--yr],gr[yr]=null,Ai=gr[--yr],gr[yr]=null,Ni=gr[--yr],gr[yr]=null}var Nn=null,kt=null,tt=!1,ko=null,ii=!1,yg=Error(r(519));function To(a){var c=Error(r(418,""));throw gc(pr(c,a)),yg}function D2(a){var c=a.stateNode,f=a.type,m=a.memoizedProps;switch(c[qt]=a,c[nn]=m,f){case"dialog":We("cancel",c),We("close",c);break;case"iframe":case"object":case"embed":We("load",c);break;case"video":case"audio":for(f=0;f<qc.length;f++)We(qc[f],c);break;case"source":We("error",c);break;case"img":case"image":case"link":We("error",c),We("load",c);break;case"details":We("toggle",c);break;case"input":We("invalid",c),Od(c,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),cs(c);break;case"select":We("invalid",c);break;case"textarea":We("invalid",c),Yk(c,m.value,m.defaultValue,m.children),cs(c)}f=m.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||c.textContent===""+f||m.suppressHydrationWarning===!0||YN(c.textContent,f)?(m.popover!=null&&(We("beforetoggle",c),We("toggle",c)),m.onScroll!=null&&We("scroll",c),m.onScrollEnd!=null&&We("scrollend",c),m.onClick!=null&&(c.onclick=Nf),c=!0):c=!1,c||To(a)}function R2(a){for(Nn=a.return;Nn;)switch(Nn.tag){case 5:case 13:ii=!1;return;case 27:case 3:ii=!0;return;default:Nn=Nn.return}}function pc(a){if(a!==Nn)return!1;if(!tt)return R2(a),tt=!0,!1;var c=a.tag,f;if((f=c!==3&&c!==27)&&((f=c===5)&&(f=a.type,f=!(f!=="form"&&f!=="button")||Oy(a.type,a.memoizedProps)),f=!f),f&&kt&&To(a),R2(a),c===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));e:{for(a=a.nextSibling,c=0;a;){if(a.nodeType===8)if(f=a.data,f==="/$"){if(c===0){kt=zr(a.nextSibling);break e}c--}else f!=="$"&&f!=="$!"&&f!=="$?"||c++;a=a.nextSibling}kt=null}}else c===27?(c=kt,Ts(a.type)?(a=By,By=null,kt=a):kt=c):kt=Nn?zr(a.stateNode.nextSibling):null;return!0}function mc(){kt=Nn=null,tt=!1}function O2(){var a=ko;return a!==null&&(zn===null?zn=a:zn.push.apply(zn,a),ko=null),a}function gc(a){ko===null?ko=[a]:ko.push(a)}var vg=G(null),No=null,Mi=null;function ds(a,c,f){ce(vg,c._currentValue),c._currentValue=f}function _i(a){a._currentValue=vg.current,oe(vg)}function bg(a,c,f){for(;a!==null;){var m=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,m!==null&&(m.childLanes|=c)):m!==null&&(m.childLanes&c)!==c&&(m.childLanes|=c),a===f)break;a=a.return}}function xg(a,c,f,m){var b=a.child;for(b!==null&&(b.return=a);b!==null;){var C=b.dependencies;if(C!==null){var M=b.child;C=C.firstContext;e:for(;C!==null;){var j=C;C=b;for(var U=0;U<c.length;U++)if(j.context===c[U]){C.lanes|=f,j=C.alternate,j!==null&&(j.lanes|=f),bg(C.return,f,a),m||(M=null);break e}C=j.next}}else if(b.tag===18){if(M=b.return,M===null)throw Error(r(341));M.lanes|=f,C=M.alternate,C!==null&&(C.lanes|=f),bg(M,f,a),M=null}else M=b.child;if(M!==null)M.return=b;else for(M=b;M!==null;){if(M===a){M=null;break}if(b=M.sibling,b!==null){b.return=M.return,M=b;break}M=M.return}b=M}}function yc(a,c,f,m){a=null;for(var b=c,C=!1;b!==null;){if(!C){if((b.flags&524288)!==0)C=!0;else if((b.flags&262144)!==0)break}if(b.tag===10){var M=b.alternate;if(M===null)throw Error(r(387));if(M=M.memoizedProps,M!==null){var j=b.type;Wn(b.pendingProps.value,M.value)||(a!==null?a.push(j):a=[j])}}else if(b===ie.current){if(M=b.alternate,M===null)throw Error(r(387));M.memoizedState.memoizedState!==b.memoizedState.memoizedState&&(a!==null?a.push(Gc):a=[Gc])}b=b.return}a!==null&&xg(c,a,f,m),c.flags|=262144}function Kd(a){for(a=a.firstContext;a!==null;){if(!Wn(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function Ao(a){No=a,Mi=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function wn(a){return j2(No,a)}function Yd(a,c){return No===null&&Ao(a),j2(a,c)}function j2(a,c){var f=c._currentValue;if(c={context:c,memoizedValue:f,next:null},Mi===null){if(a===null)throw Error(r(308));Mi=c,a.dependencies={lanes:0,firstContext:c},a.flags|=524288}else Mi=Mi.next=c;return f}var R8=typeof AbortController<"u"?AbortController:function(){var a=[],c=this.signal={aborted:!1,addEventListener:function(f,m){a.push(m)}};this.abort=function(){c.aborted=!0,a.forEach(function(f){return f()})}},O8=e.unstable_scheduleCallback,j8=e.unstable_NormalPriority,Zt={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function wg(){return{controller:new R8,data:new Map,refCount:0}}function vc(a){a.refCount--,a.refCount===0&&O8(j8,function(){a.controller.abort()})}var bc=null,Sg=0,qa=0,Va=null;function L8(a,c){if(bc===null){var f=bc=[];Sg=0,qa=Ey(),Va={status:"pending",value:void 0,then:function(m){f.push(m)}}}return Sg++,c.then(L2,L2),c}function L2(){if(--Sg===0&&bc!==null){Va!==null&&(Va.status="fulfilled");var a=bc;bc=null,qa=0,Va=null;for(var c=0;c<a.length;c++)(0,a[c])()}}function P8(a,c){var f=[],m={status:"pending",value:null,reason:null,then:function(b){f.push(b)}};return a.then(function(){m.status="fulfilled",m.value=c;for(var b=0;b<f.length;b++)(0,f[b])(c)},function(b){for(m.status="rejected",m.reason=b,b=0;b<f.length;b++)(0,f[b])(void 0)}),m}var P2=L.S;L.S=function(a,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&L8(a,c),P2!==null&&P2(a,c)};var Mo=G(null);function Cg(){var a=Mo.current;return a!==null?a:dt.pooledCache}function Wd(a,c){c===null?ce(Mo,Mo.current):ce(Mo,c.pool)}function B2(){var a=Cg();return a===null?null:{parent:Zt._currentValue,pool:a}}var xc=Error(r(460)),I2=Error(r(474)),Xd=Error(r(542)),Eg={then:function(){}};function z2(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Zd(){}function q2(a,c,f){switch(f=a[f],f===void 0?a.push(c):f!==c&&(c.then(Zd,Zd),c=f),c.status){case"fulfilled":return c.value;case"rejected":throw a=c.reason,H2(a),a;default:if(typeof c.status=="string")c.then(Zd,Zd);else{if(a=dt,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=c,a.status="pending",a.then(function(m){if(c.status==="pending"){var b=c;b.status="fulfilled",b.value=m}},function(m){if(c.status==="pending"){var b=c;b.status="rejected",b.reason=m}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw a=c.reason,H2(a),a}throw wc=c,xc}}var wc=null;function V2(){if(wc===null)throw Error(r(459));var a=wc;return wc=null,a}function H2(a){if(a===xc||a===Xd)throw Error(r(483))}var fs=!1;function kg(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function Tg(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function hs(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function ps(a,c,f){var m=a.updateQueue;if(m===null)return null;if(m=m.shared,(nt&2)!==0){var b=m.pending;return b===null?c.next=c:(c.next=b.next,b.next=c),m.pending=c,c=Fd(a),A2(a,null,f),c}return Hd(a,m,c,f),Fd(a)}function Sc(a,c,f){if(c=c.updateQueue,c!==null&&(c=c.shared,(f&4194048)!==0)){var m=c.lanes;m&=a.pendingLanes,f|=m,c.lanes=f,Qr(a,f)}}function Ng(a,c){var f=a.updateQueue,m=a.alternate;if(m!==null&&(m=m.updateQueue,f===m)){var b=null,C=null;if(f=f.firstBaseUpdate,f!==null){do{var M={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};C===null?b=C=M:C=C.next=M,f=f.next}while(f!==null);C===null?b=C=c:C=C.next=c}else b=C=c;f={baseState:m.baseState,firstBaseUpdate:b,lastBaseUpdate:C,shared:m.shared,callbacks:m.callbacks},a.updateQueue=f;return}a=f.lastBaseUpdate,a===null?f.firstBaseUpdate=c:a.next=c,f.lastBaseUpdate=c}var Ag=!1;function Cc(){if(Ag){var a=Va;if(a!==null)throw a}}function Ec(a,c,f,m){Ag=!1;var b=a.updateQueue;fs=!1;var C=b.firstBaseUpdate,M=b.lastBaseUpdate,j=b.shared.pending;if(j!==null){b.shared.pending=null;var U=j,re=U.next;U.next=null,M===null?C=re:M.next=re,M=U;var ue=a.alternate;ue!==null&&(ue=ue.updateQueue,j=ue.lastBaseUpdate,j!==M&&(j===null?ue.firstBaseUpdate=re:j.next=re,ue.lastBaseUpdate=U))}if(C!==null){var he=b.baseState;M=0,ue=re=U=null,j=C;do{var se=j.lane&-536870913,le=se!==j.lane;if(le?(Qe&se)===se:(m&se)===se){se!==0&&se===qa&&(Ag=!0),ue!==null&&(ue=ue.next={lane:0,tag:j.tag,payload:j.payload,callback:null,next:null});e:{var Be=a,je=j;se=c;var at=f;switch(je.tag){case 1:if(Be=je.payload,typeof Be=="function"){he=Be.call(at,he,se);break e}he=Be;break e;case 3:Be.flags=Be.flags&-65537|128;case 0:if(Be=je.payload,se=typeof Be=="function"?Be.call(at,he,se):Be,se==null)break e;he=h({},he,se);break e;case 2:fs=!0}}se=j.callback,se!==null&&(a.flags|=64,le&&(a.flags|=8192),le=b.callbacks,le===null?b.callbacks=[se]:le.push(se))}else le={lane:se,tag:j.tag,payload:j.payload,callback:j.callback,next:null},ue===null?(re=ue=le,U=he):ue=ue.next=le,M|=se;if(j=j.next,j===null){if(j=b.shared.pending,j===null)break;le=j,j=le.next,le.next=null,b.lastBaseUpdate=le,b.shared.pending=null}}while(!0);ue===null&&(U=he),b.baseState=U,b.firstBaseUpdate=re,b.lastBaseUpdate=ue,C===null&&(b.shared.lanes=0),Ss|=M,a.lanes=M,a.memoizedState=he}}function F2(a,c){if(typeof a!="function")throw Error(r(191,a));a.call(c)}function U2(a,c){var f=a.callbacks;if(f!==null)for(a.callbacks=null,a=0;a<f.length;a++)F2(f[a],c)}var Ha=G(null),Qd=G(0);function $2(a,c){a=Bi,ce(Qd,a),ce(Ha,c),Bi=a|c.baseLanes}function Mg(){ce(Qd,Bi),ce(Ha,Ha.current)}function _g(){Bi=Qd.current,oe(Ha),oe(Qd)}var ms=0,Ge=null,st=null,Vt=null,Jd=!1,Fa=!1,_o=!1,ef=0,kc=0,Ua=null,B8=0;function Rt(){throw Error(r(321))}function Dg(a,c){if(c===null)return!1;for(var f=0;f<c.length&&f<a.length;f++)if(!Wn(a[f],c[f]))return!1;return!0}function Rg(a,c,f,m,b,C){return ms=C,Ge=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,L.H=a===null||a.memoizedState===null?AT:MT,_o=!1,C=f(m,b),_o=!1,Fa&&(C=K2(c,f,m,b)),G2(a),C}function G2(a){L.H=af;var c=st!==null&&st.next!==null;if(ms=0,Vt=st=Ge=null,Jd=!1,kc=0,Ua=null,c)throw Error(r(300));a===null||rn||(a=a.dependencies,a!==null&&Kd(a)&&(rn=!0))}function K2(a,c,f,m){Ge=a;var b=0;do{if(Fa&&(Ua=null),kc=0,Fa=!1,25<=b)throw Error(r(301));if(b+=1,Vt=st=null,a.updateQueue!=null){var C=a.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}L.H=U8,C=c(f,m)}while(Fa);return C}function I8(){var a=L.H,c=a.useState()[0];return c=typeof c.then=="function"?Tc(c):c,a=a.useState()[0],(st!==null?st.memoizedState:null)!==a&&(Ge.flags|=1024),c}function Og(){var a=ef!==0;return ef=0,a}function jg(a,c,f){c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~f}function Lg(a){if(Jd){for(a=a.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}Jd=!1}ms=0,Vt=st=Ge=null,Fa=!1,kc=ef=0,Ua=null}function Bn(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Vt===null?Ge.memoizedState=Vt=a:Vt=Vt.next=a,Vt}function Ht(){if(st===null){var a=Ge.alternate;a=a!==null?a.memoizedState:null}else a=st.next;var c=Vt===null?Ge.memoizedState:Vt.next;if(c!==null)Vt=c,st=a;else{if(a===null)throw Ge.alternate===null?Error(r(467)):Error(r(310));st=a,a={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},Vt===null?Ge.memoizedState=Vt=a:Vt=Vt.next=a}return Vt}function Pg(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Tc(a){var c=kc;return kc+=1,Ua===null&&(Ua=[]),a=q2(Ua,a,c),c=Ge,(Vt===null?c.memoizedState:Vt.next)===null&&(c=c.alternate,L.H=c===null||c.memoizedState===null?AT:MT),a}function tf(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Tc(a);if(a.$$typeof===k)return wn(a)}throw Error(r(438,String(a)))}function Bg(a){var c=null,f=Ge.updateQueue;if(f!==null&&(c=f.memoCache),c==null){var m=Ge.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(c={data:m.data.map(function(b){return b.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),f===null&&(f=Pg(),Ge.updateQueue=f),f.memoCache=c,f=c.data[c.index],f===void 0)for(f=c.data[c.index]=Array(a),m=0;m<a;m++)f[m]=$;return c.index++,f}function Di(a,c){return typeof c=="function"?c(a):c}function nf(a){var c=Ht();return Ig(c,st,a)}function Ig(a,c,f){var m=a.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=f;var b=a.baseQueue,C=m.pending;if(C!==null){if(b!==null){var M=b.next;b.next=C.next,C.next=M}c.baseQueue=b=C,m.pending=null}if(C=a.baseState,b===null)a.memoizedState=C;else{c=b.next;var j=M=null,U=null,re=c,ue=!1;do{var he=re.lane&-536870913;if(he!==re.lane?(Qe&he)===he:(ms&he)===he){var se=re.revertLane;if(se===0)U!==null&&(U=U.next={lane:0,revertLane:0,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null}),he===qa&&(ue=!0);else if((ms&se)===se){re=re.next,se===qa&&(ue=!0);continue}else he={lane:0,revertLane:re.revertLane,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},U===null?(j=U=he,M=C):U=U.next=he,Ge.lanes|=se,Ss|=se;he=re.action,_o&&f(C,he),C=re.hasEagerState?re.eagerState:f(C,he)}else se={lane:he,revertLane:re.revertLane,action:re.action,hasEagerState:re.hasEagerState,eagerState:re.eagerState,next:null},U===null?(j=U=se,M=C):U=U.next=se,Ge.lanes|=he,Ss|=he;re=re.next}while(re!==null&&re!==c);if(U===null?M=C:U.next=j,!Wn(C,a.memoizedState)&&(rn=!0,ue&&(f=Va,f!==null)))throw f;a.memoizedState=C,a.baseState=M,a.baseQueue=U,m.lastRenderedState=C}return b===null&&(m.lanes=0),[a.memoizedState,m.dispatch]}function zg(a){var c=Ht(),f=c.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=a;var m=f.dispatch,b=f.pending,C=c.memoizedState;if(b!==null){f.pending=null;var M=b=b.next;do C=a(C,M.action),M=M.next;while(M!==b);Wn(C,c.memoizedState)||(rn=!0),c.memoizedState=C,c.baseQueue===null&&(c.baseState=C),f.lastRenderedState=C}return[C,m]}function Y2(a,c,f){var m=Ge,b=Ht(),C=tt;if(C){if(f===void 0)throw Error(r(407));f=f()}else f=c();var M=!Wn((st||b).memoizedState,f);M&&(b.memoizedState=f,rn=!0),b=b.queue;var j=Z2.bind(null,m,b,a);if(Nc(2048,8,j,[a]),b.getSnapshot!==c||M||Vt!==null&&Vt.memoizedState.tag&1){if(m.flags|=2048,$a(9,rf(),X2.bind(null,m,b,f,c),null),dt===null)throw Error(r(349));C||(ms&124)!==0||W2(m,c,f)}return f}function W2(a,c,f){a.flags|=16384,a={getSnapshot:c,value:f},c=Ge.updateQueue,c===null?(c=Pg(),Ge.updateQueue=c,c.stores=[a]):(f=c.stores,f===null?c.stores=[a]:f.push(a))}function X2(a,c,f,m){c.value=f,c.getSnapshot=m,Q2(c)&&J2(a)}function Z2(a,c,f){return f(function(){Q2(c)&&J2(a)})}function Q2(a){var c=a.getSnapshot;a=a.value;try{var f=c();return!Wn(a,f)}catch{return!0}}function J2(a){var c=Pa(a,2);c!==null&&tr(c,a,2)}function qg(a){var c=Bn();if(typeof a=="function"){var f=a;if(a=f(),_o){It(!0);try{f()}finally{It(!1)}}}return c.memoizedState=c.baseState=a,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:Di,lastRenderedState:a},c}function eT(a,c,f,m){return a.baseState=f,Ig(a,st,typeof m=="function"?m:Di)}function z8(a,c,f,m,b){if(of(a))throw Error(r(485));if(a=c.action,a!==null){var C={payload:b,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(M){C.listeners.push(M)}};L.T!==null?f(!0):C.isTransition=!1,m(C),f=c.pending,f===null?(C.next=c.pending=C,tT(c,C)):(C.next=f.next,c.pending=f.next=C)}}function tT(a,c){var f=c.action,m=c.payload,b=a.state;if(c.isTransition){var C=L.T,M={};L.T=M;try{var j=f(b,m),U=L.S;U!==null&&U(M,j),nT(a,c,j)}catch(re){Vg(a,c,re)}finally{L.T=C}}else try{C=f(b,m),nT(a,c,C)}catch(re){Vg(a,c,re)}}function nT(a,c,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(m){rT(a,c,m)},function(m){return Vg(a,c,m)}):rT(a,c,f)}function rT(a,c,f){c.status="fulfilled",c.value=f,iT(c),a.state=f,c=a.pending,c!==null&&(f=c.next,f===c?a.pending=null:(f=f.next,c.next=f,tT(a,f)))}function Vg(a,c,f){var m=a.pending;if(a.pending=null,m!==null){m=m.next;do c.status="rejected",c.reason=f,iT(c),c=c.next;while(c!==m)}a.action=null}function iT(a){a=a.listeners;for(var c=0;c<a.length;c++)(0,a[c])()}function sT(a,c){return c}function oT(a,c){if(tt){var f=dt.formState;if(f!==null){e:{var m=Ge;if(tt){if(kt){t:{for(var b=kt,C=ii;b.nodeType!==8;){if(!C){b=null;break t}if(b=zr(b.nextSibling),b===null){b=null;break t}}C=b.data,b=C==="F!"||C==="F"?b:null}if(b){kt=zr(b.nextSibling),m=b.data==="F!";break e}}To(m)}m=!1}m&&(c=f[0])}}return f=Bn(),f.memoizedState=f.baseState=c,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:sT,lastRenderedState:c},f.queue=m,f=kT.bind(null,Ge,m),m.dispatch=f,m=qg(!1),C=Gg.bind(null,Ge,!1,m.queue),m=Bn(),b={state:c,dispatch:null,action:a,pending:null},m.queue=b,f=z8.bind(null,Ge,b,C,f),b.dispatch=f,m.memoizedState=a,[c,f,!1]}function aT(a){var c=Ht();return lT(c,st,a)}function lT(a,c,f){if(c=Ig(a,c,sT)[0],a=nf(Di)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var m=Tc(c)}catch(M){throw M===xc?Xd:M}else m=c;c=Ht();var b=c.queue,C=b.dispatch;return f!==c.memoizedState&&(Ge.flags|=2048,$a(9,rf(),q8.bind(null,b,f),null)),[m,C,a]}function q8(a,c){a.action=c}function cT(a){var c=Ht(),f=st;if(f!==null)return lT(c,f,a);Ht(),c=c.memoizedState,f=Ht();var m=f.queue.dispatch;return f.memoizedState=a,[c,m,!1]}function $a(a,c,f,m){return a={tag:a,create:f,deps:m,inst:c,next:null},c=Ge.updateQueue,c===null&&(c=Pg(),Ge.updateQueue=c),f=c.lastEffect,f===null?c.lastEffect=a.next=a:(m=f.next,f.next=a,a.next=m,c.lastEffect=a),a}function rf(){return{destroy:void 0,resource:void 0}}function uT(){return Ht().memoizedState}function sf(a,c,f,m){var b=Bn();m=m===void 0?null:m,Ge.flags|=a,b.memoizedState=$a(1|c,rf(),f,m)}function Nc(a,c,f,m){var b=Ht();m=m===void 0?null:m;var C=b.memoizedState.inst;st!==null&&m!==null&&Dg(m,st.memoizedState.deps)?b.memoizedState=$a(c,C,f,m):(Ge.flags|=a,b.memoizedState=$a(1|c,C,f,m))}function dT(a,c){sf(8390656,8,a,c)}function fT(a,c){Nc(2048,8,a,c)}function hT(a,c){return Nc(4,2,a,c)}function pT(a,c){return Nc(4,4,a,c)}function mT(a,c){if(typeof c=="function"){a=a();var f=c(a);return function(){typeof f=="function"?f():c(null)}}if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function gT(a,c,f){f=f!=null?f.concat([a]):null,Nc(4,4,mT.bind(null,c,a),f)}function Hg(){}function yT(a,c){var f=Ht();c=c===void 0?null:c;var m=f.memoizedState;return c!==null&&Dg(c,m[1])?m[0]:(f.memoizedState=[a,c],a)}function vT(a,c){var f=Ht();c=c===void 0?null:c;var m=f.memoizedState;if(c!==null&&Dg(c,m[1]))return m[0];if(m=a(),_o){It(!0);try{a()}finally{It(!1)}}return f.memoizedState=[m,c],m}function Fg(a,c,f){return f===void 0||(ms&1073741824)!==0?a.memoizedState=c:(a.memoizedState=f,a=wN(),Ge.lanes|=a,Ss|=a,f)}function bT(a,c,f,m){return Wn(f,c)?f:Ha.current!==null?(a=Fg(a,f,m),Wn(a,c)||(rn=!0),a):(ms&42)===0?(rn=!0,a.memoizedState=f):(a=wN(),Ge.lanes|=a,Ss|=a,c)}function xT(a,c,f,m,b){var C=q.p;q.p=C!==0&&8>C?C:8;var M=L.T,j={};L.T=j,Gg(a,!1,c,f);try{var U=b(),re=L.S;if(re!==null&&re(j,U),U!==null&&typeof U=="object"&&typeof U.then=="function"){var ue=P8(U,m);Ac(a,c,ue,er(a))}else Ac(a,c,m,er(a))}catch(he){Ac(a,c,{then:function(){},status:"rejected",reason:he},er())}finally{q.p=C,L.T=M}}function V8(){}function Ug(a,c,f,m){if(a.tag!==5)throw Error(r(476));var b=wT(a).queue;xT(a,b,c,W,f===null?V8:function(){return ST(a),f(m)})}function wT(a){var c=a.memoizedState;if(c!==null)return c;c={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Di,lastRenderedState:W},next:null};var f={};return c.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:Di,lastRenderedState:f},next:null},a.memoizedState=c,a=a.alternate,a!==null&&(a.memoizedState=c),c}function ST(a){var c=wT(a).next.queue;Ac(a,c,{},er())}function $g(){return wn(Gc)}function CT(){return Ht().memoizedState}function ET(){return Ht().memoizedState}function H8(a){for(var c=a.return;c!==null;){switch(c.tag){case 24:case 3:var f=er();a=hs(f);var m=ps(c,a,f);m!==null&&(tr(m,c,f),Sc(m,c,f)),c={cache:wg()},a.payload=c;return}c=c.return}}function F8(a,c,f){var m=er();f={lane:m,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},of(a)?TT(c,f):(f=dg(a,c,f,m),f!==null&&(tr(f,a,m),NT(f,c,m)))}function kT(a,c,f){var m=er();Ac(a,c,f,m)}function Ac(a,c,f,m){var b={lane:m,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if(of(a))TT(c,b);else{var C=a.alternate;if(a.lanes===0&&(C===null||C.lanes===0)&&(C=c.lastRenderedReducer,C!==null))try{var M=c.lastRenderedState,j=C(M,f);if(b.hasEagerState=!0,b.eagerState=j,Wn(j,M))return Hd(a,c,b,0),dt===null&&Vd(),!1}catch{}finally{}if(f=dg(a,c,b,m),f!==null)return tr(f,a,m),NT(f,c,m),!0}return!1}function Gg(a,c,f,m){if(m={lane:2,revertLane:Ey(),action:m,hasEagerState:!1,eagerState:null,next:null},of(a)){if(c)throw Error(r(479))}else c=dg(a,f,m,2),c!==null&&tr(c,a,2)}function of(a){var c=a.alternate;return a===Ge||c!==null&&c===Ge}function TT(a,c){Fa=Jd=!0;var f=a.pending;f===null?c.next=c:(c.next=f.next,f.next=c),a.pending=c}function NT(a,c,f){if((f&4194048)!==0){var m=c.lanes;m&=a.pendingLanes,f|=m,c.lanes=f,Qr(a,f)}}var af={readContext:wn,use:tf,useCallback:Rt,useContext:Rt,useEffect:Rt,useImperativeHandle:Rt,useLayoutEffect:Rt,useInsertionEffect:Rt,useMemo:Rt,useReducer:Rt,useRef:Rt,useState:Rt,useDebugValue:Rt,useDeferredValue:Rt,useTransition:Rt,useSyncExternalStore:Rt,useId:Rt,useHostTransitionStatus:Rt,useFormState:Rt,useActionState:Rt,useOptimistic:Rt,useMemoCache:Rt,useCacheRefresh:Rt},AT={readContext:wn,use:tf,useCallback:function(a,c){return Bn().memoizedState=[a,c===void 0?null:c],a},useContext:wn,useEffect:dT,useImperativeHandle:function(a,c,f){f=f!=null?f.concat([a]):null,sf(4194308,4,mT.bind(null,c,a),f)},useLayoutEffect:function(a,c){return sf(4194308,4,a,c)},useInsertionEffect:function(a,c){sf(4,2,a,c)},useMemo:function(a,c){var f=Bn();c=c===void 0?null:c;var m=a();if(_o){It(!0);try{a()}finally{It(!1)}}return f.memoizedState=[m,c],m},useReducer:function(a,c,f){var m=Bn();if(f!==void 0){var b=f(c);if(_o){It(!0);try{f(c)}finally{It(!1)}}}else b=c;return m.memoizedState=m.baseState=b,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:b},m.queue=a,a=a.dispatch=F8.bind(null,Ge,a),[m.memoizedState,a]},useRef:function(a){var c=Bn();return a={current:a},c.memoizedState=a},useState:function(a){a=qg(a);var c=a.queue,f=kT.bind(null,Ge,c);return c.dispatch=f,[a.memoizedState,f]},useDebugValue:Hg,useDeferredValue:function(a,c){var f=Bn();return Fg(f,a,c)},useTransition:function(){var a=qg(!1);return a=xT.bind(null,Ge,a.queue,!0,!1),Bn().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,c,f){var m=Ge,b=Bn();if(tt){if(f===void 0)throw Error(r(407));f=f()}else{if(f=c(),dt===null)throw Error(r(349));(Qe&124)!==0||W2(m,c,f)}b.memoizedState=f;var C={value:f,getSnapshot:c};return b.queue=C,dT(Z2.bind(null,m,C,a),[a]),m.flags|=2048,$a(9,rf(),X2.bind(null,m,C,f,c),null),f},useId:function(){var a=Bn(),c=dt.identifierPrefix;if(tt){var f=Ai,m=Ni;f=(m&~(1<<32-zt(m)-1)).toString(32)+f,c=""+c+"R"+f,f=ef++,0<f&&(c+="H"+f.toString(32)),c+=""}else f=B8++,c=""+c+"r"+f.toString(32)+"";return a.memoizedState=c},useHostTransitionStatus:$g,useFormState:oT,useActionState:oT,useOptimistic:function(a){var c=Bn();c.memoizedState=c.baseState=a;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=f,c=Gg.bind(null,Ge,!0,f),f.dispatch=c,[a,c]},useMemoCache:Bg,useCacheRefresh:function(){return Bn().memoizedState=H8.bind(null,Ge)}},MT={readContext:wn,use:tf,useCallback:yT,useContext:wn,useEffect:fT,useImperativeHandle:gT,useInsertionEffect:hT,useLayoutEffect:pT,useMemo:vT,useReducer:nf,useRef:uT,useState:function(){return nf(Di)},useDebugValue:Hg,useDeferredValue:function(a,c){var f=Ht();return bT(f,st.memoizedState,a,c)},useTransition:function(){var a=nf(Di)[0],c=Ht().memoizedState;return[typeof a=="boolean"?a:Tc(a),c]},useSyncExternalStore:Y2,useId:CT,useHostTransitionStatus:$g,useFormState:aT,useActionState:aT,useOptimistic:function(a,c){var f=Ht();return eT(f,st,a,c)},useMemoCache:Bg,useCacheRefresh:ET},U8={readContext:wn,use:tf,useCallback:yT,useContext:wn,useEffect:fT,useImperativeHandle:gT,useInsertionEffect:hT,useLayoutEffect:pT,useMemo:vT,useReducer:zg,useRef:uT,useState:function(){return zg(Di)},useDebugValue:Hg,useDeferredValue:function(a,c){var f=Ht();return st===null?Fg(f,a,c):bT(f,st.memoizedState,a,c)},useTransition:function(){var a=zg(Di)[0],c=Ht().memoizedState;return[typeof a=="boolean"?a:Tc(a),c]},useSyncExternalStore:Y2,useId:CT,useHostTransitionStatus:$g,useFormState:cT,useActionState:cT,useOptimistic:function(a,c){var f=Ht();return st!==null?eT(f,st,a,c):(f.baseState=a,[a,f.queue.dispatch])},useMemoCache:Bg,useCacheRefresh:ET},Ga=null,Mc=0;function lf(a){var c=Mc;return Mc+=1,Ga===null&&(Ga=[]),q2(Ga,a,c)}function _c(a,c){c=c.props.ref,a.ref=c!==void 0?c:null}function cf(a,c){throw c.$$typeof===p?Error(r(525)):(a=Object.prototype.toString.call(c),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a)))}function _T(a){var c=a._init;return c(a._payload)}function DT(a){function c(Z,K){if(a){var ee=Z.deletions;ee===null?(Z.deletions=[K],Z.flags|=16):ee.push(K)}}function f(Z,K){if(!a)return null;for(;K!==null;)c(Z,K),K=K.sibling;return null}function m(Z){for(var K=new Map;Z!==null;)Z.key!==null?K.set(Z.key,Z):K.set(Z.index,Z),Z=Z.sibling;return K}function b(Z,K){return Z=Ti(Z,K),Z.index=0,Z.sibling=null,Z}function C(Z,K,ee){return Z.index=ee,a?(ee=Z.alternate,ee!==null?(ee=ee.index,ee<K?(Z.flags|=67108866,K):ee):(Z.flags|=67108866,K)):(Z.flags|=1048576,K)}function M(Z){return a&&Z.alternate===null&&(Z.flags|=67108866),Z}function j(Z,K,ee,de){return K===null||K.tag!==6?(K=hg(ee,Z.mode,de),K.return=Z,K):(K=b(K,ee),K.return=Z,K)}function U(Z,K,ee,de){var Ee=ee.type;return Ee===x?ue(Z,K,ee.props.children,de,ee.key):K!==null&&(K.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===D&&_T(Ee)===K.type)?(K=b(K,ee.props),_c(K,ee),K.return=Z,K):(K=Ud(ee.type,ee.key,ee.props,null,Z.mode,de),_c(K,ee),K.return=Z,K)}function re(Z,K,ee,de){return K===null||K.tag!==4||K.stateNode.containerInfo!==ee.containerInfo||K.stateNode.implementation!==ee.implementation?(K=pg(ee,Z.mode,de),K.return=Z,K):(K=b(K,ee.children||[]),K.return=Z,K)}function ue(Z,K,ee,de,Ee){return K===null||K.tag!==7?(K=So(ee,Z.mode,de,Ee),K.return=Z,K):(K=b(K,ee),K.return=Z,K)}function he(Z,K,ee){if(typeof K=="string"&&K!==""||typeof K=="number"||typeof K=="bigint")return K=hg(""+K,Z.mode,ee),K.return=Z,K;if(typeof K=="object"&&K!==null){switch(K.$$typeof){case g:return ee=Ud(K.type,K.key,K.props,null,Z.mode,ee),_c(ee,K),ee.return=Z,ee;case y:return K=pg(K,Z.mode,ee),K.return=Z,K;case D:var de=K._init;return K=de(K._payload),he(Z,K,ee)}if(F(K)||V(K))return K=So(K,Z.mode,ee,null),K.return=Z,K;if(typeof K.then=="function")return he(Z,lf(K),ee);if(K.$$typeof===k)return he(Z,Yd(Z,K),ee);cf(Z,K)}return null}function se(Z,K,ee,de){var Ee=K!==null?K.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return Ee!==null?null:j(Z,K,""+ee,de);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case g:return ee.key===Ee?U(Z,K,ee,de):null;case y:return ee.key===Ee?re(Z,K,ee,de):null;case D:return Ee=ee._init,ee=Ee(ee._payload),se(Z,K,ee,de)}if(F(ee)||V(ee))return Ee!==null?null:ue(Z,K,ee,de,null);if(typeof ee.then=="function")return se(Z,K,lf(ee),de);if(ee.$$typeof===k)return se(Z,K,Yd(Z,ee),de);cf(Z,ee)}return null}function le(Z,K,ee,de,Ee){if(typeof de=="string"&&de!==""||typeof de=="number"||typeof de=="bigint")return Z=Z.get(ee)||null,j(K,Z,""+de,Ee);if(typeof de=="object"&&de!==null){switch(de.$$typeof){case g:return Z=Z.get(de.key===null?ee:de.key)||null,U(K,Z,de,Ee);case y:return Z=Z.get(de.key===null?ee:de.key)||null,re(K,Z,de,Ee);case D:var Ke=de._init;return de=Ke(de._payload),le(Z,K,ee,de,Ee)}if(F(de)||V(de))return Z=Z.get(ee)||null,ue(K,Z,de,Ee,null);if(typeof de.then=="function")return le(Z,K,ee,lf(de),Ee);if(de.$$typeof===k)return le(Z,K,ee,Yd(K,de),Ee);cf(K,de)}return null}function Be(Z,K,ee,de){for(var Ee=null,Ke=null,_e=K,Le=K=0,on=null;_e!==null&&Le<ee.length;Le++){_e.index>Le?(on=_e,_e=null):on=_e.sibling;var et=se(Z,_e,ee[Le],de);if(et===null){_e===null&&(_e=on);break}a&&_e&&et.alternate===null&&c(Z,_e),K=C(et,K,Le),Ke===null?Ee=et:Ke.sibling=et,Ke=et,_e=on}if(Le===ee.length)return f(Z,_e),tt&&Eo(Z,Le),Ee;if(_e===null){for(;Le<ee.length;Le++)_e=he(Z,ee[Le],de),_e!==null&&(K=C(_e,K,Le),Ke===null?Ee=_e:Ke.sibling=_e,Ke=_e);return tt&&Eo(Z,Le),Ee}for(_e=m(_e);Le<ee.length;Le++)on=le(_e,Z,Le,ee[Le],de),on!==null&&(a&&on.alternate!==null&&_e.delete(on.key===null?Le:on.key),K=C(on,K,Le),Ke===null?Ee=on:Ke.sibling=on,Ke=on);return a&&_e.forEach(function(Ds){return c(Z,Ds)}),tt&&Eo(Z,Le),Ee}function je(Z,K,ee,de){if(ee==null)throw Error(r(151));for(var Ee=null,Ke=null,_e=K,Le=K=0,on=null,et=ee.next();_e!==null&&!et.done;Le++,et=ee.next()){_e.index>Le?(on=_e,_e=null):on=_e.sibling;var Ds=se(Z,_e,et.value,de);if(Ds===null){_e===null&&(_e=on);break}a&&_e&&Ds.alternate===null&&c(Z,_e),K=C(Ds,K,Le),Ke===null?Ee=Ds:Ke.sibling=Ds,Ke=Ds,_e=on}if(et.done)return f(Z,_e),tt&&Eo(Z,Le),Ee;if(_e===null){for(;!et.done;Le++,et=ee.next())et=he(Z,et.value,de),et!==null&&(K=C(et,K,Le),Ke===null?Ee=et:Ke.sibling=et,Ke=et);return tt&&Eo(Z,Le),Ee}for(_e=m(_e);!et.done;Le++,et=ee.next())et=le(_e,Z,Le,et.value,de),et!==null&&(a&&et.alternate!==null&&_e.delete(et.key===null?Le:et.key),K=C(et,K,Le),Ke===null?Ee=et:Ke.sibling=et,Ke=et);return a&&_e.forEach(function($H){return c(Z,$H)}),tt&&Eo(Z,Le),Ee}function at(Z,K,ee,de){if(typeof ee=="object"&&ee!==null&&ee.type===x&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case g:e:{for(var Ee=ee.key;K!==null;){if(K.key===Ee){if(Ee=ee.type,Ee===x){if(K.tag===7){f(Z,K.sibling),de=b(K,ee.props.children),de.return=Z,Z=de;break e}}else if(K.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===D&&_T(Ee)===K.type){f(Z,K.sibling),de=b(K,ee.props),_c(de,ee),de.return=Z,Z=de;break e}f(Z,K);break}else c(Z,K);K=K.sibling}ee.type===x?(de=So(ee.props.children,Z.mode,de,ee.key),de.return=Z,Z=de):(de=Ud(ee.type,ee.key,ee.props,null,Z.mode,de),_c(de,ee),de.return=Z,Z=de)}return M(Z);case y:e:{for(Ee=ee.key;K!==null;){if(K.key===Ee)if(K.tag===4&&K.stateNode.containerInfo===ee.containerInfo&&K.stateNode.implementation===ee.implementation){f(Z,K.sibling),de=b(K,ee.children||[]),de.return=Z,Z=de;break e}else{f(Z,K);break}else c(Z,K);K=K.sibling}de=pg(ee,Z.mode,de),de.return=Z,Z=de}return M(Z);case D:return Ee=ee._init,ee=Ee(ee._payload),at(Z,K,ee,de)}if(F(ee))return Be(Z,K,ee,de);if(V(ee)){if(Ee=V(ee),typeof Ee!="function")throw Error(r(150));return ee=Ee.call(ee),je(Z,K,ee,de)}if(typeof ee.then=="function")return at(Z,K,lf(ee),de);if(ee.$$typeof===k)return at(Z,K,Yd(Z,ee),de);cf(Z,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint"?(ee=""+ee,K!==null&&K.tag===6?(f(Z,K.sibling),de=b(K,ee),de.return=Z,Z=de):(f(Z,K),de=hg(ee,Z.mode,de),de.return=Z,Z=de),M(Z)):f(Z,K)}return function(Z,K,ee,de){try{Mc=0;var Ee=at(Z,K,ee,de);return Ga=null,Ee}catch(_e){if(_e===xc||_e===Xd)throw _e;var Ke=Xn(29,_e,null,Z.mode);return Ke.lanes=de,Ke.return=Z,Ke}finally{}}}var Ka=DT(!0),RT=DT(!1),vr=G(null),si=null;function gs(a){var c=a.alternate;ce(Qt,Qt.current&1),ce(vr,a),si===null&&(c===null||Ha.current!==null||c.memoizedState!==null)&&(si=a)}function OT(a){if(a.tag===22){if(ce(Qt,Qt.current),ce(vr,a),si===null){var c=a.alternate;c!==null&&c.memoizedState!==null&&(si=a)}}else ys()}function ys(){ce(Qt,Qt.current),ce(vr,vr.current)}function Ri(a){oe(vr),si===a&&(si=null),oe(Qt)}var Qt=G(0);function uf(a){for(var c=a;c!==null;){if(c.tag===13){var f=c.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||Py(f)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function Kg(a,c,f,m){c=a.memoizedState,f=f(m,c),f=f==null?c:h({},c,f),a.memoizedState=f,a.lanes===0&&(a.updateQueue.baseState=f)}var Yg={enqueueSetState:function(a,c,f){a=a._reactInternals;var m=er(),b=hs(m);b.payload=c,f!=null&&(b.callback=f),c=ps(a,b,m),c!==null&&(tr(c,a,m),Sc(c,a,m))},enqueueReplaceState:function(a,c,f){a=a._reactInternals;var m=er(),b=hs(m);b.tag=1,b.payload=c,f!=null&&(b.callback=f),c=ps(a,b,m),c!==null&&(tr(c,a,m),Sc(c,a,m))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var f=er(),m=hs(f);m.tag=2,c!=null&&(m.callback=c),c=ps(a,m,f),c!==null&&(tr(c,a,f),Sc(c,a,f))}};function jT(a,c,f,m,b,C,M){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(m,C,M):c.prototype&&c.prototype.isPureReactComponent?!fc(f,m)||!fc(b,C):!0}function LT(a,c,f,m){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(f,m),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(f,m),c.state!==a&&Yg.enqueueReplaceState(c,c.state,null)}function Do(a,c){var f=c;if("ref"in c){f={};for(var m in c)m!=="ref"&&(f[m]=c[m])}if(a=a.defaultProps){f===c&&(f=h({},f));for(var b in a)f[b]===void 0&&(f[b]=a[b])}return f}var df=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function PT(a){df(a)}function BT(a){console.error(a)}function IT(a){df(a)}function ff(a,c){try{var f=a.onUncaughtError;f(c.value,{componentStack:c.stack})}catch(m){setTimeout(function(){throw m})}}function zT(a,c,f){try{var m=a.onCaughtError;m(f.value,{componentStack:f.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(b){setTimeout(function(){throw b})}}function Wg(a,c,f){return f=hs(f),f.tag=3,f.payload={element:null},f.callback=function(){ff(a,c)},f}function qT(a){return a=hs(a),a.tag=3,a}function VT(a,c,f,m){var b=f.type.getDerivedStateFromError;if(typeof b=="function"){var C=m.value;a.payload=function(){return b(C)},a.callback=function(){zT(c,f,m)}}var M=f.stateNode;M!==null&&typeof M.componentDidCatch=="function"&&(a.callback=function(){zT(c,f,m),typeof b!="function"&&(Cs===null?Cs=new Set([this]):Cs.add(this));var j=m.stack;this.componentDidCatch(m.value,{componentStack:j!==null?j:""})})}function $8(a,c,f,m,b){if(f.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(c=f.alternate,c!==null&&yc(c,f,b,!0),f=vr.current,f!==null){switch(f.tag){case 13:return si===null?by():f.alternate===null&&Tt===0&&(Tt=3),f.flags&=-257,f.flags|=65536,f.lanes=b,m===Eg?f.flags|=16384:(c=f.updateQueue,c===null?f.updateQueue=new Set([m]):c.add(m),wy(a,m,b)),!1;case 22:return f.flags|=65536,m===Eg?f.flags|=16384:(c=f.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([m])},f.updateQueue=c):(f=c.retryQueue,f===null?c.retryQueue=new Set([m]):f.add(m)),wy(a,m,b)),!1}throw Error(r(435,f.tag))}return wy(a,m,b),by(),!1}if(tt)return c=vr.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=b,m!==yg&&(a=Error(r(422),{cause:m}),gc(pr(a,f)))):(m!==yg&&(c=Error(r(423),{cause:m}),gc(pr(c,f))),a=a.current.alternate,a.flags|=65536,b&=-b,a.lanes|=b,m=pr(m,f),b=Wg(a.stateNode,m,b),Ng(a,b),Tt!==4&&(Tt=2)),!1;var C=Error(r(520),{cause:m});if(C=pr(C,f),Bc===null?Bc=[C]:Bc.push(C),Tt!==4&&(Tt=2),c===null)return!0;m=pr(m,f),f=c;do{switch(f.tag){case 3:return f.flags|=65536,a=b&-b,f.lanes|=a,a=Wg(f.stateNode,m,a),Ng(f,a),!1;case 1:if(c=f.type,C=f.stateNode,(f.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(Cs===null||!Cs.has(C))))return f.flags|=65536,b&=-b,f.lanes|=b,b=qT(b),VT(b,a,f,m),Ng(f,b),!1}f=f.return}while(f!==null);return!1}var HT=Error(r(461)),rn=!1;function fn(a,c,f,m){c.child=a===null?RT(c,null,f,m):Ka(c,a.child,f,m)}function FT(a,c,f,m,b){f=f.render;var C=c.ref;if("ref"in m){var M={};for(var j in m)j!=="ref"&&(M[j]=m[j])}else M=m;return Ao(c),m=Rg(a,c,f,M,C,b),j=Og(),a!==null&&!rn?(jg(a,c,b),Oi(a,c,b)):(tt&&j&&mg(c),c.flags|=1,fn(a,c,m,b),c.child)}function UT(a,c,f,m,b){if(a===null){var C=f.type;return typeof C=="function"&&!fg(C)&&C.defaultProps===void 0&&f.compare===null?(c.tag=15,c.type=C,$T(a,c,C,m,b)):(a=Ud(f.type,null,m,c,c.mode,b),a.ref=c.ref,a.return=c,c.child=a)}if(C=a.child,!ry(a,b)){var M=C.memoizedProps;if(f=f.compare,f=f!==null?f:fc,f(M,m)&&a.ref===c.ref)return Oi(a,c,b)}return c.flags|=1,a=Ti(C,m),a.ref=c.ref,a.return=c,c.child=a}function $T(a,c,f,m,b){if(a!==null){var C=a.memoizedProps;if(fc(C,m)&&a.ref===c.ref)if(rn=!1,c.pendingProps=m=C,ry(a,b))(a.flags&131072)!==0&&(rn=!0);else return c.lanes=a.lanes,Oi(a,c,b)}return Xg(a,c,f,m,b)}function GT(a,c,f){var m=c.pendingProps,b=m.children,C=a!==null?a.memoizedState:null;if(m.mode==="hidden"){if((c.flags&128)!==0){if(m=C!==null?C.baseLanes|f:f,a!==null){for(b=c.child=a.child,C=0;b!==null;)C=C|b.lanes|b.childLanes,b=b.sibling;c.childLanes=C&~m}else c.childLanes=0,c.child=null;return KT(a,c,m,f)}if((f&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},a!==null&&Wd(c,C!==null?C.cachePool:null),C!==null?$2(c,C):Mg(),OT(c);else return c.lanes=c.childLanes=536870912,KT(a,c,C!==null?C.baseLanes|f:f,f)}else C!==null?(Wd(c,C.cachePool),$2(c,C),ys(),c.memoizedState=null):(a!==null&&Wd(c,null),Mg(),ys());return fn(a,c,b,f),c.child}function KT(a,c,f,m){var b=Cg();return b=b===null?null:{parent:Zt._currentValue,pool:b},c.memoizedState={baseLanes:f,cachePool:b},a!==null&&Wd(c,null),Mg(),OT(c),a!==null&&yc(a,c,m,!0),null}function hf(a,c){var f=c.ref;if(f===null)a!==null&&a.ref!==null&&(c.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(a===null||a.ref!==f)&&(c.flags|=4194816)}}function Xg(a,c,f,m,b){return Ao(c),f=Rg(a,c,f,m,void 0,b),m=Og(),a!==null&&!rn?(jg(a,c,b),Oi(a,c,b)):(tt&&m&&mg(c),c.flags|=1,fn(a,c,f,b),c.child)}function YT(a,c,f,m,b,C){return Ao(c),c.updateQueue=null,f=K2(c,m,f,b),G2(a),m=Og(),a!==null&&!rn?(jg(a,c,C),Oi(a,c,C)):(tt&&m&&mg(c),c.flags|=1,fn(a,c,f,C),c.child)}function WT(a,c,f,m,b){if(Ao(c),c.stateNode===null){var C=Ba,M=f.contextType;typeof M=="object"&&M!==null&&(C=wn(M)),C=new f(m,C),c.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=Yg,c.stateNode=C,C._reactInternals=c,C=c.stateNode,C.props=m,C.state=c.memoizedState,C.refs={},kg(c),M=f.contextType,C.context=typeof M=="object"&&M!==null?wn(M):Ba,C.state=c.memoizedState,M=f.getDerivedStateFromProps,typeof M=="function"&&(Kg(c,f,M,m),C.state=c.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(M=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),M!==C.state&&Yg.enqueueReplaceState(C,C.state,null),Ec(c,m,C,b),Cc(),C.state=c.memoizedState),typeof C.componentDidMount=="function"&&(c.flags|=4194308),m=!0}else if(a===null){C=c.stateNode;var j=c.memoizedProps,U=Do(f,j);C.props=U;var re=C.context,ue=f.contextType;M=Ba,typeof ue=="object"&&ue!==null&&(M=wn(ue));var he=f.getDerivedStateFromProps;ue=typeof he=="function"||typeof C.getSnapshotBeforeUpdate=="function",j=c.pendingProps!==j,ue||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(j||re!==M)&&LT(c,C,m,M),fs=!1;var se=c.memoizedState;C.state=se,Ec(c,m,C,b),Cc(),re=c.memoizedState,j||se!==re||fs?(typeof he=="function"&&(Kg(c,f,he,m),re=c.memoizedState),(U=fs||jT(c,f,U,m,se,re,M))?(ue||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(c.flags|=4194308)):(typeof C.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=m,c.memoizedState=re),C.props=m,C.state=re,C.context=M,m=U):(typeof C.componentDidMount=="function"&&(c.flags|=4194308),m=!1)}else{C=c.stateNode,Tg(a,c),M=c.memoizedProps,ue=Do(f,M),C.props=ue,he=c.pendingProps,se=C.context,re=f.contextType,U=Ba,typeof re=="object"&&re!==null&&(U=wn(re)),j=f.getDerivedStateFromProps,(re=typeof j=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(M!==he||se!==U)&&LT(c,C,m,U),fs=!1,se=c.memoizedState,C.state=se,Ec(c,m,C,b),Cc();var le=c.memoizedState;M!==he||se!==le||fs||a!==null&&a.dependencies!==null&&Kd(a.dependencies)?(typeof j=="function"&&(Kg(c,f,j,m),le=c.memoizedState),(ue=fs||jT(c,f,ue,m,se,le,U)||a!==null&&a.dependencies!==null&&Kd(a.dependencies))?(re||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(m,le,U),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(m,le,U)),typeof C.componentDidUpdate=="function"&&(c.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof C.componentDidUpdate!="function"||M===a.memoizedProps&&se===a.memoizedState||(c.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||M===a.memoizedProps&&se===a.memoizedState||(c.flags|=1024),c.memoizedProps=m,c.memoizedState=le),C.props=m,C.state=le,C.context=U,m=ue):(typeof C.componentDidUpdate!="function"||M===a.memoizedProps&&se===a.memoizedState||(c.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||M===a.memoizedProps&&se===a.memoizedState||(c.flags|=1024),m=!1)}return C=m,hf(a,c),m=(c.flags&128)!==0,C||m?(C=c.stateNode,f=m&&typeof f.getDerivedStateFromError!="function"?null:C.render(),c.flags|=1,a!==null&&m?(c.child=Ka(c,a.child,null,b),c.child=Ka(c,null,f,b)):fn(a,c,f,b),c.memoizedState=C.state,a=c.child):a=Oi(a,c,b),a}function XT(a,c,f,m){return mc(),c.flags|=256,fn(a,c,f,m),c.child}var Zg={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Qg(a){return{baseLanes:a,cachePool:B2()}}function Jg(a,c,f){return a=a!==null?a.childLanes&~f:0,c&&(a|=br),a}function ZT(a,c,f){var m=c.pendingProps,b=!1,C=(c.flags&128)!==0,M;if((M=C)||(M=a!==null&&a.memoizedState===null?!1:(Qt.current&2)!==0),M&&(b=!0,c.flags&=-129),M=(c.flags&32)!==0,c.flags&=-33,a===null){if(tt){if(b?gs(c):ys(),tt){var j=kt,U;if(U=j){e:{for(U=j,j=ii;U.nodeType!==8;){if(!j){j=null;break e}if(U=zr(U.nextSibling),U===null){j=null;break e}}j=U}j!==null?(c.memoizedState={dehydrated:j,treeContext:Co!==null?{id:Ni,overflow:Ai}:null,retryLane:536870912,hydrationErrors:null},U=Xn(18,null,null,0),U.stateNode=j,U.return=c,c.child=U,Nn=c,kt=null,U=!0):U=!1}U||To(c)}if(j=c.memoizedState,j!==null&&(j=j.dehydrated,j!==null))return Py(j)?c.lanes=32:c.lanes=536870912,null;Ri(c)}return j=m.children,m=m.fallback,b?(ys(),b=c.mode,j=pf({mode:"hidden",children:j},b),m=So(m,b,f,null),j.return=c,m.return=c,j.sibling=m,c.child=j,b=c.child,b.memoizedState=Qg(f),b.childLanes=Jg(a,M,f),c.memoizedState=Zg,m):(gs(c),ey(c,j))}if(U=a.memoizedState,U!==null&&(j=U.dehydrated,j!==null)){if(C)c.flags&256?(gs(c),c.flags&=-257,c=ty(a,c,f)):c.memoizedState!==null?(ys(),c.child=a.child,c.flags|=128,c=null):(ys(),b=m.fallback,j=c.mode,m=pf({mode:"visible",children:m.children},j),b=So(b,j,f,null),b.flags|=2,m.return=c,b.return=c,m.sibling=b,c.child=m,Ka(c,a.child,null,f),m=c.child,m.memoizedState=Qg(f),m.childLanes=Jg(a,M,f),c.memoizedState=Zg,c=b);else if(gs(c),Py(j)){if(M=j.nextSibling&&j.nextSibling.dataset,M)var re=M.dgst;M=re,m=Error(r(419)),m.stack="",m.digest=M,gc({value:m,source:null,stack:null}),c=ty(a,c,f)}else if(rn||yc(a,c,f,!1),M=(f&a.childLanes)!==0,rn||M){if(M=dt,M!==null&&(m=f&-f,m=(m&42)!==0?1:uo(m),m=(m&(M.suspendedLanes|f))!==0?0:m,m!==0&&m!==U.retryLane))throw U.retryLane=m,Pa(a,m),tr(M,a,m),HT;j.data==="$?"||by(),c=ty(a,c,f)}else j.data==="$?"?(c.flags|=192,c.child=a.child,c=null):(a=U.treeContext,kt=zr(j.nextSibling),Nn=c,tt=!0,ko=null,ii=!1,a!==null&&(gr[yr++]=Ni,gr[yr++]=Ai,gr[yr++]=Co,Ni=a.id,Ai=a.overflow,Co=c),c=ey(c,m.children),c.flags|=4096);return c}return b?(ys(),b=m.fallback,j=c.mode,U=a.child,re=U.sibling,m=Ti(U,{mode:"hidden",children:m.children}),m.subtreeFlags=U.subtreeFlags&65011712,re!==null?b=Ti(re,b):(b=So(b,j,f,null),b.flags|=2),b.return=c,m.return=c,m.sibling=b,c.child=m,m=b,b=c.child,j=a.child.memoizedState,j===null?j=Qg(f):(U=j.cachePool,U!==null?(re=Zt._currentValue,U=U.parent!==re?{parent:re,pool:re}:U):U=B2(),j={baseLanes:j.baseLanes|f,cachePool:U}),b.memoizedState=j,b.childLanes=Jg(a,M,f),c.memoizedState=Zg,m):(gs(c),f=a.child,a=f.sibling,f=Ti(f,{mode:"visible",children:m.children}),f.return=c,f.sibling=null,a!==null&&(M=c.deletions,M===null?(c.deletions=[a],c.flags|=16):M.push(a)),c.child=f,c.memoizedState=null,f)}function ey(a,c){return c=pf({mode:"visible",children:c},a.mode),c.return=a,a.child=c}function pf(a,c){return a=Xn(22,a,null,c),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function ty(a,c,f){return Ka(c,a.child,null,f),a=ey(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function QT(a,c,f){a.lanes|=c;var m=a.alternate;m!==null&&(m.lanes|=c),bg(a.return,c,f)}function ny(a,c,f,m,b){var C=a.memoizedState;C===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:m,tail:f,tailMode:b}:(C.isBackwards=c,C.rendering=null,C.renderingStartTime=0,C.last=m,C.tail=f,C.tailMode=b)}function JT(a,c,f){var m=c.pendingProps,b=m.revealOrder,C=m.tail;if(fn(a,c,m.children,f),m=Qt.current,(m&2)!==0)m=m&1|2,c.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&QT(a,f,c);else if(a.tag===19)QT(a,f,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}m&=1}switch(ce(Qt,m),b){case"forwards":for(f=c.child,b=null;f!==null;)a=f.alternate,a!==null&&uf(a)===null&&(b=f),f=f.sibling;f=b,f===null?(b=c.child,c.child=null):(b=f.sibling,f.sibling=null),ny(c,!1,b,f,C);break;case"backwards":for(f=null,b=c.child,c.child=null;b!==null;){if(a=b.alternate,a!==null&&uf(a)===null){c.child=b;break}a=b.sibling,b.sibling=f,f=b,b=a}ny(c,!0,f,null,C);break;case"together":ny(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function Oi(a,c,f){if(a!==null&&(c.dependencies=a.dependencies),Ss|=c.lanes,(f&c.childLanes)===0)if(a!==null){if(yc(a,c,f,!1),(f&c.childLanes)===0)return null}else return null;if(a!==null&&c.child!==a.child)throw Error(r(153));if(c.child!==null){for(a=c.child,f=Ti(a,a.pendingProps),c.child=f,f.return=c;a.sibling!==null;)a=a.sibling,f=f.sibling=Ti(a,a.pendingProps),f.return=c;f.sibling=null}return c.child}function ry(a,c){return(a.lanes&c)!==0?!0:(a=a.dependencies,!!(a!==null&&Kd(a)))}function G8(a,c,f){switch(c.tag){case 3:te(c,c.stateNode.containerInfo),ds(c,Zt,a.memoizedState.cache),mc();break;case 27:case 5:xe(c);break;case 4:te(c,c.stateNode.containerInfo);break;case 10:ds(c,c.type,c.memoizedProps.value);break;case 13:var m=c.memoizedState;if(m!==null)return m.dehydrated!==null?(gs(c),c.flags|=128,null):(f&c.child.childLanes)!==0?ZT(a,c,f):(gs(c),a=Oi(a,c,f),a!==null?a.sibling:null);gs(c);break;case 19:var b=(a.flags&128)!==0;if(m=(f&c.childLanes)!==0,m||(yc(a,c,f,!1),m=(f&c.childLanes)!==0),b){if(m)return JT(a,c,f);c.flags|=128}if(b=c.memoizedState,b!==null&&(b.rendering=null,b.tail=null,b.lastEffect=null),ce(Qt,Qt.current),m)break;return null;case 22:case 23:return c.lanes=0,GT(a,c,f);case 24:ds(c,Zt,a.memoizedState.cache)}return Oi(a,c,f)}function eN(a,c,f){if(a!==null)if(a.memoizedProps!==c.pendingProps)rn=!0;else{if(!ry(a,f)&&(c.flags&128)===0)return rn=!1,G8(a,c,f);rn=(a.flags&131072)!==0}else rn=!1,tt&&(c.flags&1048576)!==0&&_2(c,Gd,c.index);switch(c.lanes=0,c.tag){case 16:e:{a=c.pendingProps;var m=c.elementType,b=m._init;if(m=b(m._payload),c.type=m,typeof m=="function")fg(m)?(a=Do(m,a),c.tag=1,c=WT(null,c,m,a,f)):(c.tag=0,c=Xg(null,c,m,a,f));else{if(m!=null){if(b=m.$$typeof,b===T){c.tag=11,c=FT(null,c,m,a,f);break e}else if(b===R){c.tag=14,c=UT(null,c,m,a,f);break e}}throw c=I(m)||m,Error(r(306,c,""))}}return c;case 0:return Xg(a,c,c.type,c.pendingProps,f);case 1:return m=c.type,b=Do(m,c.pendingProps),WT(a,c,m,b,f);case 3:e:{if(te(c,c.stateNode.containerInfo),a===null)throw Error(r(387));m=c.pendingProps;var C=c.memoizedState;b=C.element,Tg(a,c),Ec(c,m,null,f);var M=c.memoizedState;if(m=M.cache,ds(c,Zt,m),m!==C.cache&&xg(c,[Zt],f,!0),Cc(),m=M.element,C.isDehydrated)if(C={element:m,isDehydrated:!1,cache:M.cache},c.updateQueue.baseState=C,c.memoizedState=C,c.flags&256){c=XT(a,c,m,f);break e}else if(m!==b){b=pr(Error(r(424)),c),gc(b),c=XT(a,c,m,f);break e}else{switch(a=c.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(kt=zr(a.firstChild),Nn=c,tt=!0,ko=null,ii=!0,f=RT(c,null,m,f),c.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(mc(),m===b){c=Oi(a,c,f);break e}fn(a,c,m,f)}c=c.child}return c;case 26:return hf(a,c),a===null?(f=iA(c.type,null,c.pendingProps,null))?c.memoizedState=f:tt||(f=c.type,a=c.pendingProps,m=Af(Q.current).createElement(f),m[qt]=c,m[nn]=a,pn(m,f,a),Et(m),c.stateNode=m):c.memoizedState=iA(c.type,a.memoizedProps,c.pendingProps,a.memoizedState),null;case 27:return xe(c),a===null&&tt&&(m=c.stateNode=tA(c.type,c.pendingProps,Q.current),Nn=c,ii=!0,b=kt,Ts(c.type)?(By=b,kt=zr(m.firstChild)):kt=b),fn(a,c,c.pendingProps.children,f),hf(a,c),a===null&&(c.flags|=4194304),c.child;case 5:return a===null&&tt&&((b=m=kt)&&(m=xH(m,c.type,c.pendingProps,ii),m!==null?(c.stateNode=m,Nn=c,kt=zr(m.firstChild),ii=!1,b=!0):b=!1),b||To(c)),xe(c),b=c.type,C=c.pendingProps,M=a!==null?a.memoizedProps:null,m=C.children,Oy(b,C)?m=null:M!==null&&Oy(b,M)&&(c.flags|=32),c.memoizedState!==null&&(b=Rg(a,c,I8,null,null,f),Gc._currentValue=b),hf(a,c),fn(a,c,m,f),c.child;case 6:return a===null&&tt&&((a=f=kt)&&(f=wH(f,c.pendingProps,ii),f!==null?(c.stateNode=f,Nn=c,kt=null,a=!0):a=!1),a||To(c)),null;case 13:return ZT(a,c,f);case 4:return te(c,c.stateNode.containerInfo),m=c.pendingProps,a===null?c.child=Ka(c,null,m,f):fn(a,c,m,f),c.child;case 11:return FT(a,c,c.type,c.pendingProps,f);case 7:return fn(a,c,c.pendingProps,f),c.child;case 8:return fn(a,c,c.pendingProps.children,f),c.child;case 12:return fn(a,c,c.pendingProps.children,f),c.child;case 10:return m=c.pendingProps,ds(c,c.type,m.value),fn(a,c,m.children,f),c.child;case 9:return b=c.type._context,m=c.pendingProps.children,Ao(c),b=wn(b),m=m(b),c.flags|=1,fn(a,c,m,f),c.child;case 14:return UT(a,c,c.type,c.pendingProps,f);case 15:return $T(a,c,c.type,c.pendingProps,f);case 19:return JT(a,c,f);case 31:return m=c.pendingProps,f=c.mode,m={mode:m.mode,children:m.children},a===null?(f=pf(m,f),f.ref=c.ref,c.child=f,f.return=c,c=f):(f=Ti(a.child,m),f.ref=c.ref,c.child=f,f.return=c,c=f),c;case 22:return GT(a,c,f);case 24:return Ao(c),m=wn(Zt),a===null?(b=Cg(),b===null&&(b=dt,C=wg(),b.pooledCache=C,C.refCount++,C!==null&&(b.pooledCacheLanes|=f),b=C),c.memoizedState={parent:m,cache:b},kg(c),ds(c,Zt,b)):((a.lanes&f)!==0&&(Tg(a,c),Ec(c,null,null,f),Cc()),b=a.memoizedState,C=c.memoizedState,b.parent!==m?(b={parent:m,cache:m},c.memoizedState=b,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=b),ds(c,Zt,m)):(m=C.cache,ds(c,Zt,m),m!==b.cache&&xg(c,[Zt],f,!0))),fn(a,c,c.pendingProps.children,f),c.child;case 29:throw c.pendingProps}throw Error(r(156,c.tag))}function ji(a){a.flags|=4}function tN(a,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!cA(c)){if(c=vr.current,c!==null&&((Qe&4194048)===Qe?si!==null:(Qe&62914560)!==Qe&&(Qe&536870912)===0||c!==si))throw wc=Eg,I2;a.flags|=8192}}function mf(a,c){c!==null&&(a.flags|=4),a.flags&16384&&(c=a.tag!==22?as():536870912,a.lanes|=c,Za|=c)}function Dc(a,c){if(!tt)switch(a.tailMode){case"hidden":c=a.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?a.tail=null:f.sibling=null;break;case"collapsed":f=a.tail;for(var m=null;f!==null;)f.alternate!==null&&(m=f),f=f.sibling;m===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:m.sibling=null}}function xt(a){var c=a.alternate!==null&&a.alternate.child===a.child,f=0,m=0;if(c)for(var b=a.child;b!==null;)f|=b.lanes|b.childLanes,m|=b.subtreeFlags&65011712,m|=b.flags&65011712,b.return=a,b=b.sibling;else for(b=a.child;b!==null;)f|=b.lanes|b.childLanes,m|=b.subtreeFlags,m|=b.flags,b.return=a,b=b.sibling;return a.subtreeFlags|=m,a.childLanes=f,c}function K8(a,c,f){var m=c.pendingProps;switch(gg(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(c),null;case 1:return xt(c),null;case 3:return f=c.stateNode,m=null,a!==null&&(m=a.memoizedState.cache),c.memoizedState.cache!==m&&(c.flags|=2048),_i(Zt),ge(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(a===null||a.child===null)&&(pc(c)?ji(c):a===null||a.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,O2())),xt(c),null;case 26:return f=c.memoizedState,a===null?(ji(c),f!==null?(xt(c),tN(c,f)):(xt(c),c.flags&=-16777217)):f?f!==a.memoizedState?(ji(c),xt(c),tN(c,f)):(xt(c),c.flags&=-16777217):(a.memoizedProps!==m&&ji(c),xt(c),c.flags&=-16777217),null;case 27:Me(c),f=Q.current;var b=c.type;if(a!==null&&c.stateNode!=null)a.memoizedProps!==m&&ji(c);else{if(!m){if(c.stateNode===null)throw Error(r(166));return xt(c),null}a=H.current,pc(c)?D2(c):(a=tA(b,m,f),c.stateNode=a,ji(c))}return xt(c),null;case 5:if(Me(c),f=c.type,a!==null&&c.stateNode!=null)a.memoizedProps!==m&&ji(c);else{if(!m){if(c.stateNode===null)throw Error(r(166));return xt(c),null}if(a=H.current,pc(c))D2(c);else{switch(b=Af(Q.current),a){case 1:a=b.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:a=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":a=b.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":a=b.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":a=b.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof m.is=="string"?b.createElement("select",{is:m.is}):b.createElement("select"),m.multiple?a.multiple=!0:m.size&&(a.size=m.size);break;default:a=typeof m.is=="string"?b.createElement(f,{is:m.is}):b.createElement(f)}}a[qt]=c,a[nn]=m;e:for(b=c.child;b!==null;){if(b.tag===5||b.tag===6)a.appendChild(b.stateNode);else if(b.tag!==4&&b.tag!==27&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===c)break e;for(;b.sibling===null;){if(b.return===null||b.return===c)break e;b=b.return}b.sibling.return=b.return,b=b.sibling}c.stateNode=a;e:switch(pn(a,f,m),f){case"button":case"input":case"select":case"textarea":a=!!m.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&ji(c)}}return xt(c),c.flags&=-16777217,null;case 6:if(a&&c.stateNode!=null)a.memoizedProps!==m&&ji(c);else{if(typeof m!="string"&&c.stateNode===null)throw Error(r(166));if(a=Q.current,pc(c)){if(a=c.stateNode,f=c.memoizedProps,m=null,b=Nn,b!==null)switch(b.tag){case 27:case 5:m=b.memoizedProps}a[qt]=c,a=!!(a.nodeValue===f||m!==null&&m.suppressHydrationWarning===!0||YN(a.nodeValue,f)),a||To(c)}else a=Af(a).createTextNode(m),a[qt]=c,c.stateNode=a}return xt(c),null;case 13:if(m=c.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(b=pc(c),m!==null&&m.dehydrated!==null){if(a===null){if(!b)throw Error(r(318));if(b=c.memoizedState,b=b!==null?b.dehydrated:null,!b)throw Error(r(317));b[qt]=c}else mc(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;xt(c),b=!1}else b=O2(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=b),b=!0;if(!b)return c.flags&256?(Ri(c),c):(Ri(c),null)}if(Ri(c),(c.flags&128)!==0)return c.lanes=f,c;if(f=m!==null,a=a!==null&&a.memoizedState!==null,f){m=c.child,b=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(b=m.alternate.memoizedState.cachePool.pool);var C=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(C=m.memoizedState.cachePool.pool),C!==b&&(m.flags|=2048)}return f!==a&&f&&(c.child.flags|=8192),mf(c,c.updateQueue),xt(c),null;case 4:return ge(),a===null&&Ay(c.stateNode.containerInfo),xt(c),null;case 10:return _i(c.type),xt(c),null;case 19:if(oe(Qt),b=c.memoizedState,b===null)return xt(c),null;if(m=(c.flags&128)!==0,C=b.rendering,C===null)if(m)Dc(b,!1);else{if(Tt!==0||a!==null&&(a.flags&128)!==0)for(a=c.child;a!==null;){if(C=uf(a),C!==null){for(c.flags|=128,Dc(b,!1),a=C.updateQueue,c.updateQueue=a,mf(c,a),c.subtreeFlags=0,a=f,f=c.child;f!==null;)M2(f,a),f=f.sibling;return ce(Qt,Qt.current&1|2),c.child}a=a.sibling}b.tail!==null&&ke()>vf&&(c.flags|=128,m=!0,Dc(b,!1),c.lanes=4194304)}else{if(!m)if(a=uf(C),a!==null){if(c.flags|=128,m=!0,a=a.updateQueue,c.updateQueue=a,mf(c,a),Dc(b,!0),b.tail===null&&b.tailMode==="hidden"&&!C.alternate&&!tt)return xt(c),null}else 2*ke()-b.renderingStartTime>vf&&f!==536870912&&(c.flags|=128,m=!0,Dc(b,!1),c.lanes=4194304);b.isBackwards?(C.sibling=c.child,c.child=C):(a=b.last,a!==null?a.sibling=C:c.child=C,b.last=C)}return b.tail!==null?(c=b.tail,b.rendering=c,b.tail=c.sibling,b.renderingStartTime=ke(),c.sibling=null,a=Qt.current,ce(Qt,m?a&1|2:a&1),c):(xt(c),null);case 22:case 23:return Ri(c),_g(),m=c.memoizedState!==null,a!==null?a.memoizedState!==null!==m&&(c.flags|=8192):m&&(c.flags|=8192),m?(f&536870912)!==0&&(c.flags&128)===0&&(xt(c),c.subtreeFlags&6&&(c.flags|=8192)):xt(c),f=c.updateQueue,f!==null&&mf(c,f.retryQueue),f=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),m=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(m=c.memoizedState.cachePool.pool),m!==f&&(c.flags|=2048),a!==null&&oe(Mo),null;case 24:return f=null,a!==null&&(f=a.memoizedState.cache),c.memoizedState.cache!==f&&(c.flags|=2048),_i(Zt),xt(c),null;case 25:return null;case 30:return null}throw Error(r(156,c.tag))}function Y8(a,c){switch(gg(c),c.tag){case 1:return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return _i(Zt),ge(),a=c.flags,(a&65536)!==0&&(a&128)===0?(c.flags=a&-65537|128,c):null;case 26:case 27:case 5:return Me(c),null;case 13:if(Ri(c),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(r(340));mc()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return oe(Qt),null;case 4:return ge(),null;case 10:return _i(c.type),null;case 22:case 23:return Ri(c),_g(),a!==null&&oe(Mo),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 24:return _i(Zt),null;case 25:return null;default:return null}}function nN(a,c){switch(gg(c),c.tag){case 3:_i(Zt),ge();break;case 26:case 27:case 5:Me(c);break;case 4:ge();break;case 13:Ri(c);break;case 19:oe(Qt);break;case 10:_i(c.type);break;case 22:case 23:Ri(c),_g(),a!==null&&oe(Mo);break;case 24:_i(Zt)}}function Rc(a,c){try{var f=c.updateQueue,m=f!==null?f.lastEffect:null;if(m!==null){var b=m.next;f=b;do{if((f.tag&a)===a){m=void 0;var C=f.create,M=f.inst;m=C(),M.destroy=m}f=f.next}while(f!==b)}}catch(j){lt(c,c.return,j)}}function vs(a,c,f){try{var m=c.updateQueue,b=m!==null?m.lastEffect:null;if(b!==null){var C=b.next;m=C;do{if((m.tag&a)===a){var M=m.inst,j=M.destroy;if(j!==void 0){M.destroy=void 0,b=c;var U=f,re=j;try{re()}catch(ue){lt(b,U,ue)}}}m=m.next}while(m!==C)}}catch(ue){lt(c,c.return,ue)}}function rN(a){var c=a.updateQueue;if(c!==null){var f=a.stateNode;try{U2(c,f)}catch(m){lt(a,a.return,m)}}}function iN(a,c,f){f.props=Do(a.type,a.memoizedProps),f.state=a.memoizedState;try{f.componentWillUnmount()}catch(m){lt(a,c,m)}}function Oc(a,c){try{var f=a.ref;if(f!==null){switch(a.tag){case 26:case 27:case 5:var m=a.stateNode;break;case 30:m=a.stateNode;break;default:m=a.stateNode}typeof f=="function"?a.refCleanup=f(m):f.current=m}}catch(b){lt(a,c,b)}}function oi(a,c){var f=a.ref,m=a.refCleanup;if(f!==null)if(typeof m=="function")try{m()}catch(b){lt(a,c,b)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(b){lt(a,c,b)}else f.current=null}function sN(a){var c=a.type,f=a.memoizedProps,m=a.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":f.autoFocus&&m.focus();break e;case"img":f.src?m.src=f.src:f.srcSet&&(m.srcset=f.srcSet)}}catch(b){lt(a,a.return,b)}}function iy(a,c,f){try{var m=a.stateNode;mH(m,a.type,f,c),m[nn]=c}catch(b){lt(a,a.return,b)}}function oN(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&Ts(a.type)||a.tag===4}function sy(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||oN(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&Ts(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function oy(a,c,f){var m=a.tag;if(m===5||m===6)a=a.stateNode,c?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(a,c):(c=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,c.appendChild(a),f=f._reactRootContainer,f!=null||c.onclick!==null||(c.onclick=Nf));else if(m!==4&&(m===27&&Ts(a.type)&&(f=a.stateNode,c=null),a=a.child,a!==null))for(oy(a,c,f),a=a.sibling;a!==null;)oy(a,c,f),a=a.sibling}function gf(a,c,f){var m=a.tag;if(m===5||m===6)a=a.stateNode,c?f.insertBefore(a,c):f.appendChild(a);else if(m!==4&&(m===27&&Ts(a.type)&&(f=a.stateNode),a=a.child,a!==null))for(gf(a,c,f),a=a.sibling;a!==null;)gf(a,c,f),a=a.sibling}function aN(a){var c=a.stateNode,f=a.memoizedProps;try{for(var m=a.type,b=c.attributes;b.length;)c.removeAttributeNode(b[0]);pn(c,m,f),c[qt]=a,c[nn]=f}catch(C){lt(a,a.return,C)}}var Li=!1,Ot=!1,ay=!1,lN=typeof WeakSet=="function"?WeakSet:Set,sn=null;function W8(a,c){if(a=a.containerInfo,Dy=jf,a=b2(a),sg(a)){if("selectionStart"in a)var f={start:a.selectionStart,end:a.selectionEnd};else e:{f=(f=a.ownerDocument)&&f.defaultView||window;var m=f.getSelection&&f.getSelection();if(m&&m.rangeCount!==0){f=m.anchorNode;var b=m.anchorOffset,C=m.focusNode;m=m.focusOffset;try{f.nodeType,C.nodeType}catch{f=null;break e}var M=0,j=-1,U=-1,re=0,ue=0,he=a,se=null;t:for(;;){for(var le;he!==f||b!==0&&he.nodeType!==3||(j=M+b),he!==C||m!==0&&he.nodeType!==3||(U=M+m),he.nodeType===3&&(M+=he.nodeValue.length),(le=he.firstChild)!==null;)se=he,he=le;for(;;){if(he===a)break t;if(se===f&&++re===b&&(j=M),se===C&&++ue===m&&(U=M),(le=he.nextSibling)!==null)break;he=se,se=he.parentNode}he=le}f=j===-1||U===-1?null:{start:j,end:U}}else f=null}f=f||{start:0,end:0}}else f=null;for(Ry={focusedElem:a,selectionRange:f},jf=!1,sn=c;sn!==null;)if(c=sn,a=c.child,(c.subtreeFlags&1024)!==0&&a!==null)a.return=c,sn=a;else for(;sn!==null;){switch(c=sn,C=c.alternate,a=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&C!==null){a=void 0,f=c,b=C.memoizedProps,C=C.memoizedState,m=f.stateNode;try{var Be=Do(f.type,b,f.elementType===f.type);a=m.getSnapshotBeforeUpdate(Be,C),m.__reactInternalSnapshotBeforeUpdate=a}catch(je){lt(f,f.return,je)}}break;case 3:if((a&1024)!==0){if(a=c.stateNode.containerInfo,f=a.nodeType,f===9)Ly(a);else if(f===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":Ly(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=c.sibling,a!==null){a.return=c.return,sn=a;break}sn=c.return}}function cN(a,c,f){var m=f.flags;switch(f.tag){case 0:case 11:case 15:bs(a,f),m&4&&Rc(5,f);break;case 1:if(bs(a,f),m&4)if(a=f.stateNode,c===null)try{a.componentDidMount()}catch(M){lt(f,f.return,M)}else{var b=Do(f.type,c.memoizedProps);c=c.memoizedState;try{a.componentDidUpdate(b,c,a.__reactInternalSnapshotBeforeUpdate)}catch(M){lt(f,f.return,M)}}m&64&&rN(f),m&512&&Oc(f,f.return);break;case 3:if(bs(a,f),m&64&&(a=f.updateQueue,a!==null)){if(c=null,f.child!==null)switch(f.child.tag){case 27:case 5:c=f.child.stateNode;break;case 1:c=f.child.stateNode}try{U2(a,c)}catch(M){lt(f,f.return,M)}}break;case 27:c===null&&m&4&&aN(f);case 26:case 5:bs(a,f),c===null&&m&4&&sN(f),m&512&&Oc(f,f.return);break;case 12:bs(a,f);break;case 13:bs(a,f),m&4&&fN(a,f),m&64&&(a=f.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(f=iH.bind(null,f),SH(a,f))));break;case 22:if(m=f.memoizedState!==null||Li,!m){c=c!==null&&c.memoizedState!==null||Ot,b=Li;var C=Ot;Li=m,(Ot=c)&&!C?xs(a,f,(f.subtreeFlags&8772)!==0):bs(a,f),Li=b,Ot=C}break;case 30:break;default:bs(a,f)}}function uN(a){var c=a.alternate;c!==null&&(a.alternate=null,uN(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&mo(c)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var mt=null,In=!1;function Pi(a,c,f){for(f=f.child;f!==null;)dN(a,c,f),f=f.sibling}function dN(a,c,f){if(pt&&typeof pt.onCommitFiberUnmount=="function")try{pt.onCommitFiberUnmount(xn,f)}catch{}switch(f.tag){case 26:Ot||oi(f,c),Pi(a,c,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:Ot||oi(f,c);var m=mt,b=In;Ts(f.type)&&(mt=f.stateNode,In=!1),Pi(a,c,f),Hc(f.stateNode),mt=m,In=b;break;case 5:Ot||oi(f,c);case 6:if(m=mt,b=In,mt=null,Pi(a,c,f),mt=m,In=b,mt!==null)if(In)try{(mt.nodeType===9?mt.body:mt.nodeName==="HTML"?mt.ownerDocument.body:mt).removeChild(f.stateNode)}catch(C){lt(f,c,C)}else try{mt.removeChild(f.stateNode)}catch(C){lt(f,c,C)}break;case 18:mt!==null&&(In?(a=mt,JN(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,f.stateNode),Xc(a)):JN(mt,f.stateNode));break;case 4:m=mt,b=In,mt=f.stateNode.containerInfo,In=!0,Pi(a,c,f),mt=m,In=b;break;case 0:case 11:case 14:case 15:Ot||vs(2,f,c),Ot||vs(4,f,c),Pi(a,c,f);break;case 1:Ot||(oi(f,c),m=f.stateNode,typeof m.componentWillUnmount=="function"&&iN(f,c,m)),Pi(a,c,f);break;case 21:Pi(a,c,f);break;case 22:Ot=(m=Ot)||f.memoizedState!==null,Pi(a,c,f),Ot=m;break;default:Pi(a,c,f)}}function fN(a,c){if(c.memoizedState===null&&(a=c.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Xc(a)}catch(f){lt(c,c.return,f)}}function X8(a){switch(a.tag){case 13:case 19:var c=a.stateNode;return c===null&&(c=a.stateNode=new lN),c;case 22:return a=a.stateNode,c=a._retryCache,c===null&&(c=a._retryCache=new lN),c;default:throw Error(r(435,a.tag))}}function ly(a,c){var f=X8(a);c.forEach(function(m){var b=sH.bind(null,a,m);f.has(m)||(f.add(m),m.then(b,b))})}function Zn(a,c){var f=c.deletions;if(f!==null)for(var m=0;m<f.length;m++){var b=f[m],C=a,M=c,j=M;e:for(;j!==null;){switch(j.tag){case 27:if(Ts(j.type)){mt=j.stateNode,In=!1;break e}break;case 5:mt=j.stateNode,In=!1;break e;case 3:case 4:mt=j.stateNode.containerInfo,In=!0;break e}j=j.return}if(mt===null)throw Error(r(160));dN(C,M,b),mt=null,In=!1,C=b.alternate,C!==null&&(C.return=null),b.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)hN(c,a),c=c.sibling}var Ir=null;function hN(a,c){var f=a.alternate,m=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Zn(c,a),Qn(a),m&4&&(vs(3,a,a.return),Rc(3,a),vs(5,a,a.return));break;case 1:Zn(c,a),Qn(a),m&512&&(Ot||f===null||oi(f,f.return)),m&64&&Li&&(a=a.updateQueue,a!==null&&(m=a.callbacks,m!==null&&(f=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=f===null?m:f.concat(m))));break;case 26:var b=Ir;if(Zn(c,a),Qn(a),m&512&&(Ot||f===null||oi(f,f.return)),m&4){var C=f!==null?f.memoizedState:null;if(m=a.memoizedState,f===null)if(m===null)if(a.stateNode===null){e:{m=a.type,f=a.memoizedProps,b=b.ownerDocument||b;t:switch(m){case"title":C=b.getElementsByTagName("title")[0],(!C||C[Ci]||C[qt]||C.namespaceURI==="http://www.w3.org/2000/svg"||C.hasAttribute("itemprop"))&&(C=b.createElement(m),b.head.insertBefore(C,b.querySelector("head > title"))),pn(C,m,f),C[qt]=a,Et(C),m=C;break e;case"link":var M=aA("link","href",b).get(m+(f.href||""));if(M){for(var j=0;j<M.length;j++)if(C=M[j],C.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&C.getAttribute("rel")===(f.rel==null?null:f.rel)&&C.getAttribute("title")===(f.title==null?null:f.title)&&C.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){M.splice(j,1);break t}}C=b.createElement(m),pn(C,m,f),b.head.appendChild(C);break;case"meta":if(M=aA("meta","content",b).get(m+(f.content||""))){for(j=0;j<M.length;j++)if(C=M[j],C.getAttribute("content")===(f.content==null?null:""+f.content)&&C.getAttribute("name")===(f.name==null?null:f.name)&&C.getAttribute("property")===(f.property==null?null:f.property)&&C.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&C.getAttribute("charset")===(f.charSet==null?null:f.charSet)){M.splice(j,1);break t}}C=b.createElement(m),pn(C,m,f),b.head.appendChild(C);break;default:throw Error(r(468,m))}C[qt]=a,Et(C),m=C}a.stateNode=m}else lA(b,a.type,a.stateNode);else a.stateNode=oA(b,m,a.memoizedProps);else C!==m?(C===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):C.count--,m===null?lA(b,a.type,a.stateNode):oA(b,m,a.memoizedProps)):m===null&&a.stateNode!==null&&iy(a,a.memoizedProps,f.memoizedProps)}break;case 27:Zn(c,a),Qn(a),m&512&&(Ot||f===null||oi(f,f.return)),f!==null&&m&4&&iy(a,a.memoizedProps,f.memoizedProps);break;case 5:if(Zn(c,a),Qn(a),m&512&&(Ot||f===null||oi(f,f.return)),a.flags&32){b=a.stateNode;try{Ma(b,"")}catch(le){lt(a,a.return,le)}}m&4&&a.stateNode!=null&&(b=a.memoizedProps,iy(a,b,f!==null?f.memoizedProps:b)),m&1024&&(ay=!0);break;case 6:if(Zn(c,a),Qn(a),m&4){if(a.stateNode===null)throw Error(r(162));m=a.memoizedProps,f=a.stateNode;try{f.nodeValue=m}catch(le){lt(a,a.return,le)}}break;case 3:if(Df=null,b=Ir,Ir=Mf(c.containerInfo),Zn(c,a),Ir=b,Qn(a),m&4&&f!==null&&f.memoizedState.isDehydrated)try{Xc(c.containerInfo)}catch(le){lt(a,a.return,le)}ay&&(ay=!1,pN(a));break;case 4:m=Ir,Ir=Mf(a.stateNode.containerInfo),Zn(c,a),Qn(a),Ir=m;break;case 12:Zn(c,a),Qn(a);break;case 13:Zn(c,a),Qn(a),a.child.flags&8192&&a.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(py=ke()),m&4&&(m=a.updateQueue,m!==null&&(a.updateQueue=null,ly(a,m)));break;case 22:b=a.memoizedState!==null;var U=f!==null&&f.memoizedState!==null,re=Li,ue=Ot;if(Li=re||b,Ot=ue||U,Zn(c,a),Ot=ue,Li=re,Qn(a),m&8192)e:for(c=a.stateNode,c._visibility=b?c._visibility&-2:c._visibility|1,b&&(f===null||U||Li||Ot||Ro(a)),f=null,c=a;;){if(c.tag===5||c.tag===26){if(f===null){U=f=c;try{if(C=U.stateNode,b)M=C.style,typeof M.setProperty=="function"?M.setProperty("display","none","important"):M.display="none";else{j=U.stateNode;var he=U.memoizedProps.style,se=he!=null&&he.hasOwnProperty("display")?he.display:null;j.style.display=se==null||typeof se=="boolean"?"":(""+se).trim()}}catch(le){lt(U,U.return,le)}}}else if(c.tag===6){if(f===null){U=c;try{U.stateNode.nodeValue=b?"":U.memoizedProps}catch(le){lt(U,U.return,le)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===a)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break e;for(;c.sibling===null;){if(c.return===null||c.return===a)break e;f===c&&(f=null),c=c.return}f===c&&(f=null),c.sibling.return=c.return,c=c.sibling}m&4&&(m=a.updateQueue,m!==null&&(f=m.retryQueue,f!==null&&(m.retryQueue=null,ly(a,f))));break;case 19:Zn(c,a),Qn(a),m&4&&(m=a.updateQueue,m!==null&&(a.updateQueue=null,ly(a,m)));break;case 30:break;case 21:break;default:Zn(c,a),Qn(a)}}function Qn(a){var c=a.flags;if(c&2){try{for(var f,m=a.return;m!==null;){if(oN(m)){f=m;break}m=m.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var b=f.stateNode,C=sy(a);gf(a,C,b);break;case 5:var M=f.stateNode;f.flags&32&&(Ma(M,""),f.flags&=-33);var j=sy(a);gf(a,j,M);break;case 3:case 4:var U=f.stateNode.containerInfo,re=sy(a);oy(a,re,U);break;default:throw Error(r(161))}}catch(ue){lt(a,a.return,ue)}a.flags&=-3}c&4096&&(a.flags&=-4097)}function pN(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var c=a;pN(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),a=a.sibling}}function bs(a,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)cN(a,c.alternate,c),c=c.sibling}function Ro(a){for(a=a.child;a!==null;){var c=a;switch(c.tag){case 0:case 11:case 14:case 15:vs(4,c,c.return),Ro(c);break;case 1:oi(c,c.return);var f=c.stateNode;typeof f.componentWillUnmount=="function"&&iN(c,c.return,f),Ro(c);break;case 27:Hc(c.stateNode);case 26:case 5:oi(c,c.return),Ro(c);break;case 22:c.memoizedState===null&&Ro(c);break;case 30:Ro(c);break;default:Ro(c)}a=a.sibling}}function xs(a,c,f){for(f=f&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var m=c.alternate,b=a,C=c,M=C.flags;switch(C.tag){case 0:case 11:case 15:xs(b,C,f),Rc(4,C);break;case 1:if(xs(b,C,f),m=C,b=m.stateNode,typeof b.componentDidMount=="function")try{b.componentDidMount()}catch(re){lt(m,m.return,re)}if(m=C,b=m.updateQueue,b!==null){var j=m.stateNode;try{var U=b.shared.hiddenCallbacks;if(U!==null)for(b.shared.hiddenCallbacks=null,b=0;b<U.length;b++)F2(U[b],j)}catch(re){lt(m,m.return,re)}}f&&M&64&&rN(C),Oc(C,C.return);break;case 27:aN(C);case 26:case 5:xs(b,C,f),f&&m===null&&M&4&&sN(C),Oc(C,C.return);break;case 12:xs(b,C,f);break;case 13:xs(b,C,f),f&&M&4&&fN(b,C);break;case 22:C.memoizedState===null&&xs(b,C,f),Oc(C,C.return);break;case 30:break;default:xs(b,C,f)}c=c.sibling}}function cy(a,c){var f=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),a=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(a=c.memoizedState.cachePool.pool),a!==f&&(a!=null&&a.refCount++,f!=null&&vc(f))}function uy(a,c){a=null,c.alternate!==null&&(a=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==a&&(c.refCount++,a!=null&&vc(a))}function ai(a,c,f,m){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)mN(a,c,f,m),c=c.sibling}function mN(a,c,f,m){var b=c.flags;switch(c.tag){case 0:case 11:case 15:ai(a,c,f,m),b&2048&&Rc(9,c);break;case 1:ai(a,c,f,m);break;case 3:ai(a,c,f,m),b&2048&&(a=null,c.alternate!==null&&(a=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==a&&(c.refCount++,a!=null&&vc(a)));break;case 12:if(b&2048){ai(a,c,f,m),a=c.stateNode;try{var C=c.memoizedProps,M=C.id,j=C.onPostCommit;typeof j=="function"&&j(M,c.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(U){lt(c,c.return,U)}}else ai(a,c,f,m);break;case 13:ai(a,c,f,m);break;case 23:break;case 22:C=c.stateNode,M=c.alternate,c.memoizedState!==null?C._visibility&2?ai(a,c,f,m):jc(a,c):C._visibility&2?ai(a,c,f,m):(C._visibility|=2,Ya(a,c,f,m,(c.subtreeFlags&10256)!==0)),b&2048&&cy(M,c);break;case 24:ai(a,c,f,m),b&2048&&uy(c.alternate,c);break;default:ai(a,c,f,m)}}function Ya(a,c,f,m,b){for(b=b&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var C=a,M=c,j=f,U=m,re=M.flags;switch(M.tag){case 0:case 11:case 15:Ya(C,M,j,U,b),Rc(8,M);break;case 23:break;case 22:var ue=M.stateNode;M.memoizedState!==null?ue._visibility&2?Ya(C,M,j,U,b):jc(C,M):(ue._visibility|=2,Ya(C,M,j,U,b)),b&&re&2048&&cy(M.alternate,M);break;case 24:Ya(C,M,j,U,b),b&&re&2048&&uy(M.alternate,M);break;default:Ya(C,M,j,U,b)}c=c.sibling}}function jc(a,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var f=a,m=c,b=m.flags;switch(m.tag){case 22:jc(f,m),b&2048&&cy(m.alternate,m);break;case 24:jc(f,m),b&2048&&uy(m.alternate,m);break;default:jc(f,m)}c=c.sibling}}var Lc=8192;function Wa(a){if(a.subtreeFlags&Lc)for(a=a.child;a!==null;)gN(a),a=a.sibling}function gN(a){switch(a.tag){case 26:Wa(a),a.flags&Lc&&a.memoizedState!==null&&LH(Ir,a.memoizedState,a.memoizedProps);break;case 5:Wa(a);break;case 3:case 4:var c=Ir;Ir=Mf(a.stateNode.containerInfo),Wa(a),Ir=c;break;case 22:a.memoizedState===null&&(c=a.alternate,c!==null&&c.memoizedState!==null?(c=Lc,Lc=16777216,Wa(a),Lc=c):Wa(a));break;default:Wa(a)}}function yN(a){var c=a.alternate;if(c!==null&&(a=c.child,a!==null)){c.child=null;do c=a.sibling,a.sibling=null,a=c;while(a!==null)}}function Pc(a){var c=a.deletions;if((a.flags&16)!==0){if(c!==null)for(var f=0;f<c.length;f++){var m=c[f];sn=m,bN(m,a)}yN(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)vN(a),a=a.sibling}function vN(a){switch(a.tag){case 0:case 11:case 15:Pc(a),a.flags&2048&&vs(9,a,a.return);break;case 3:Pc(a);break;case 12:Pc(a);break;case 22:var c=a.stateNode;a.memoizedState!==null&&c._visibility&2&&(a.return===null||a.return.tag!==13)?(c._visibility&=-3,yf(a)):Pc(a);break;default:Pc(a)}}function yf(a){var c=a.deletions;if((a.flags&16)!==0){if(c!==null)for(var f=0;f<c.length;f++){var m=c[f];sn=m,bN(m,a)}yN(a)}for(a=a.child;a!==null;){switch(c=a,c.tag){case 0:case 11:case 15:vs(8,c,c.return),yf(c);break;case 22:f=c.stateNode,f._visibility&2&&(f._visibility&=-3,yf(c));break;default:yf(c)}a=a.sibling}}function bN(a,c){for(;sn!==null;){var f=sn;switch(f.tag){case 0:case 11:case 15:vs(8,f,c);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var m=f.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:vc(f.memoizedState.cache)}if(m=f.child,m!==null)m.return=f,sn=m;else e:for(f=a;sn!==null;){m=sn;var b=m.sibling,C=m.return;if(uN(m),m===f){sn=null;break e}if(b!==null){b.return=C,sn=b;break e}sn=C}}}var Z8={getCacheForType:function(a){var c=wn(Zt),f=c.data.get(a);return f===void 0&&(f=a(),c.data.set(a,f)),f}},Q8=typeof WeakMap=="function"?WeakMap:Map,nt=0,dt=null,Ye=null,Qe=0,rt=0,Jn=null,ws=!1,Xa=!1,dy=!1,Bi=0,Tt=0,Ss=0,Oo=0,fy=0,br=0,Za=0,Bc=null,zn=null,hy=!1,py=0,vf=1/0,bf=null,Cs=null,hn=0,Es=null,Qa=null,Ja=0,my=0,gy=null,xN=null,Ic=0,yy=null;function er(){if((nt&2)!==0&&Qe!==0)return Qe&-Qe;if(L.T!==null){var a=qa;return a!==0?a:Ey()}return ho()}function wN(){br===0&&(br=(Qe&536870912)===0||tt?ss():536870912);var a=vr.current;return a!==null&&(a.flags|=32),br}function tr(a,c,f){(a===dt&&(rt===2||rt===9)||a.cancelPendingCommit!==null)&&(el(a,0),ks(a,Qe,br,!1)),Zr(a,f),((nt&2)===0||a!==dt)&&(a===dt&&((nt&2)===0&&(Oo|=f),Tt===4&&ks(a,Qe,br,!1)),li(a))}function SN(a,c,f){if((nt&6)!==0)throw Error(r(327));var m=!f&&(c&124)===0&&(c&a.expiredLanes)===0||Gn(a,c),b=m?tH(a,c):xy(a,c,!0),C=m;do{if(b===0){Xa&&!m&&ks(a,c,0,!1);break}else{if(f=a.current.alternate,C&&!J8(f)){b=xy(a,c,!1),C=!1;continue}if(b===2){if(C=c,a.errorRecoveryDisabledLanes&C)var M=0;else M=a.pendingLanes&-536870913,M=M!==0?M:M&536870912?536870912:0;if(M!==0){c=M;e:{var j=a;b=Bc;var U=j.current.memoizedState.isDehydrated;if(U&&(el(j,M).flags|=256),M=xy(j,M,!1),M!==2){if(dy&&!U){j.errorRecoveryDisabledLanes|=C,Oo|=C,b=4;break e}C=zn,zn=b,C!==null&&(zn===null?zn=C:zn.push.apply(zn,C))}b=M}if(C=!1,b!==2)continue}}if(b===1){el(a,0),ks(a,c,0,!0);break}e:{switch(m=a,C=b,C){case 0:case 1:throw Error(r(345));case 4:if((c&4194048)!==c)break;case 6:ks(m,c,br,!ws);break e;case 2:zn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((c&62914560)===c&&(b=py+300-ke(),10<b)){if(ks(m,c,br,!ws),is(m,0,!0)!==0)break e;m.timeoutHandle=ZN(CN.bind(null,m,f,zn,bf,hy,c,br,Oo,Za,ws,C,2,-0,0),b);break e}CN(m,f,zn,bf,hy,c,br,Oo,Za,ws,C,0,-0,0)}}break}while(!0);li(a)}function CN(a,c,f,m,b,C,M,j,U,re,ue,he,se,le){if(a.timeoutHandle=-1,he=c.subtreeFlags,(he&8192||(he&16785408)===16785408)&&($c={stylesheets:null,count:0,unsuspend:jH},gN(c),he=PH(),he!==null)){a.cancelPendingCommit=he(_N.bind(null,a,c,C,f,m,b,M,j,U,ue,1,se,le)),ks(a,C,M,!re);return}_N(a,c,C,f,m,b,M,j,U)}function J8(a){for(var c=a;;){var f=c.tag;if((f===0||f===11||f===15)&&c.flags&16384&&(f=c.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var m=0;m<f.length;m++){var b=f[m],C=b.getSnapshot;b=b.value;try{if(!Wn(C(),b))return!1}catch{return!1}}if(f=c.child,c.subtreeFlags&16384&&f!==null)f.return=c,c=f;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function ks(a,c,f,m){c&=~fy,c&=~Oo,a.suspendedLanes|=c,a.pingedLanes&=~c,m&&(a.warmLanes|=c),m=a.expirationTimes;for(var b=c;0<b;){var C=31-zt(b),M=1<<C;m[C]=-1,b&=~M}f!==0&&co(a,f,c)}function xf(){return(nt&6)===0?(zc(0),!1):!0}function vy(){if(Ye!==null){if(rt===0)var a=Ye.return;else a=Ye,Mi=No=null,Lg(a),Ga=null,Mc=0,a=Ye;for(;a!==null;)nN(a.alternate,a),a=a.return;Ye=null}}function el(a,c){var f=a.timeoutHandle;f!==-1&&(a.timeoutHandle=-1,yH(f)),f=a.cancelPendingCommit,f!==null&&(a.cancelPendingCommit=null,f()),vy(),dt=a,Ye=f=Ti(a.current,null),Qe=c,rt=0,Jn=null,ws=!1,Xa=Gn(a,c),dy=!1,Za=br=fy=Oo=Ss=Tt=0,zn=Bc=null,hy=!1,(c&8)!==0&&(c|=c&32);var m=a.entangledLanes;if(m!==0)for(a=a.entanglements,m&=c;0<m;){var b=31-zt(m),C=1<<b;c|=a[b],m&=~C}return Bi=c,Vd(),f}function EN(a,c){Ge=null,L.H=af,c===xc||c===Xd?(c=V2(),rt=3):c===I2?(c=V2(),rt=4):rt=c===HT?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Jn=c,Ye===null&&(Tt=1,ff(a,pr(c,a.current)))}function kN(){var a=L.H;return L.H=af,a===null?af:a}function TN(){var a=L.A;return L.A=Z8,a}function by(){Tt=4,ws||(Qe&4194048)!==Qe&&vr.current!==null||(Xa=!0),(Ss&134217727)===0&&(Oo&134217727)===0||dt===null||ks(dt,Qe,br,!1)}function xy(a,c,f){var m=nt;nt|=2;var b=kN(),C=TN();(dt!==a||Qe!==c)&&(bf=null,el(a,c)),c=!1;var M=Tt;e:do try{if(rt!==0&&Ye!==null){var j=Ye,U=Jn;switch(rt){case 8:vy(),M=6;break e;case 3:case 2:case 9:case 6:vr.current===null&&(c=!0);var re=rt;if(rt=0,Jn=null,tl(a,j,U,re),f&&Xa){M=0;break e}break;default:re=rt,rt=0,Jn=null,tl(a,j,U,re)}}eH(),M=Tt;break}catch(ue){EN(a,ue)}while(!0);return c&&a.shellSuspendCounter++,Mi=No=null,nt=m,L.H=b,L.A=C,Ye===null&&(dt=null,Qe=0,Vd()),M}function eH(){for(;Ye!==null;)NN(Ye)}function tH(a,c){var f=nt;nt|=2;var m=kN(),b=TN();dt!==a||Qe!==c?(bf=null,vf=ke()+500,el(a,c)):Xa=Gn(a,c);e:do try{if(rt!==0&&Ye!==null){c=Ye;var C=Jn;t:switch(rt){case 1:rt=0,Jn=null,tl(a,c,C,1);break;case 2:case 9:if(z2(C)){rt=0,Jn=null,AN(c);break}c=function(){rt!==2&&rt!==9||dt!==a||(rt=7),li(a)},C.then(c,c);break e;case 3:rt=7;break e;case 4:rt=5;break e;case 7:z2(C)?(rt=0,Jn=null,AN(c)):(rt=0,Jn=null,tl(a,c,C,7));break;case 5:var M=null;switch(Ye.tag){case 26:M=Ye.memoizedState;case 5:case 27:var j=Ye;if(!M||cA(M)){rt=0,Jn=null;var U=j.sibling;if(U!==null)Ye=U;else{var re=j.return;re!==null?(Ye=re,wf(re)):Ye=null}break t}}rt=0,Jn=null,tl(a,c,C,5);break;case 6:rt=0,Jn=null,tl(a,c,C,6);break;case 8:vy(),Tt=6;break e;default:throw Error(r(462))}}nH();break}catch(ue){EN(a,ue)}while(!0);return Mi=No=null,L.H=m,L.A=b,nt=f,Ye!==null?0:(dt=null,Qe=0,Vd(),Tt)}function nH(){for(;Ye!==null&&!Se();)NN(Ye)}function NN(a){var c=eN(a.alternate,a,Bi);a.memoizedProps=a.pendingProps,c===null?wf(a):Ye=c}function AN(a){var c=a,f=c.alternate;switch(c.tag){case 15:case 0:c=YT(f,c,c.pendingProps,c.type,void 0,Qe);break;case 11:c=YT(f,c,c.pendingProps,c.type.render,c.ref,Qe);break;case 5:Lg(c);default:nN(f,c),c=Ye=M2(c,Bi),c=eN(f,c,Bi)}a.memoizedProps=a.pendingProps,c===null?wf(a):Ye=c}function tl(a,c,f,m){Mi=No=null,Lg(c),Ga=null,Mc=0;var b=c.return;try{if($8(a,b,c,f,Qe)){Tt=1,ff(a,pr(f,a.current)),Ye=null;return}}catch(C){if(b!==null)throw Ye=b,C;Tt=1,ff(a,pr(f,a.current)),Ye=null;return}c.flags&32768?(tt||m===1?a=!0:Xa||(Qe&536870912)!==0?a=!1:(ws=a=!0,(m===2||m===9||m===3||m===6)&&(m=vr.current,m!==null&&m.tag===13&&(m.flags|=16384))),MN(c,a)):wf(c)}function wf(a){var c=a;do{if((c.flags&32768)!==0){MN(c,ws);return}a=c.return;var f=K8(c.alternate,c,Bi);if(f!==null){Ye=f;return}if(c=c.sibling,c!==null){Ye=c;return}Ye=c=a}while(c!==null);Tt===0&&(Tt=5)}function MN(a,c){do{var f=Y8(a.alternate,a);if(f!==null){f.flags&=32767,Ye=f;return}if(f=a.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!c&&(a=a.sibling,a!==null)){Ye=a;return}Ye=a=f}while(a!==null);Tt=6,Ye=null}function _N(a,c,f,m,b,C,M,j,U){a.cancelPendingCommit=null;do Sf();while(hn!==0);if((nt&6)!==0)throw Error(r(327));if(c!==null){if(c===a.current)throw Error(r(177));if(C=c.lanes|c.childLanes,C|=ug,Jl(a,f,C,M,j,U),a===dt&&(Ye=dt=null,Qe=0),Qa=c,Es=a,Ja=f,my=C,gy=b,xN=m,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,oH(Wt,function(){return LN(),null})):(a.callbackNode=null,a.callbackPriority=0),m=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||m){m=L.T,L.T=null,b=q.p,q.p=2,M=nt,nt|=4;try{W8(a,c,f)}finally{nt=M,q.p=b,L.T=m}}hn=1,DN(),RN(),ON()}}function DN(){if(hn===1){hn=0;var a=Es,c=Qa,f=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||f){f=L.T,L.T=null;var m=q.p;q.p=2;var b=nt;nt|=4;try{hN(c,a);var C=Ry,M=b2(a.containerInfo),j=C.focusedElem,U=C.selectionRange;if(M!==j&&j&&j.ownerDocument&&v2(j.ownerDocument.documentElement,j)){if(U!==null&&sg(j)){var re=U.start,ue=U.end;if(ue===void 0&&(ue=re),"selectionStart"in j)j.selectionStart=re,j.selectionEnd=Math.min(ue,j.value.length);else{var he=j.ownerDocument||document,se=he&&he.defaultView||window;if(se.getSelection){var le=se.getSelection(),Be=j.textContent.length,je=Math.min(U.start,Be),at=U.end===void 0?je:Math.min(U.end,Be);!le.extend&&je>at&&(M=at,at=je,je=M);var Z=y2(j,je),K=y2(j,at);if(Z&&K&&(le.rangeCount!==1||le.anchorNode!==Z.node||le.anchorOffset!==Z.offset||le.focusNode!==K.node||le.focusOffset!==K.offset)){var ee=he.createRange();ee.setStart(Z.node,Z.offset),le.removeAllRanges(),je>at?(le.addRange(ee),le.extend(K.node,K.offset)):(ee.setEnd(K.node,K.offset),le.addRange(ee))}}}}for(he=[],le=j;le=le.parentNode;)le.nodeType===1&&he.push({element:le,left:le.scrollLeft,top:le.scrollTop});for(typeof j.focus=="function"&&j.focus(),j=0;j<he.length;j++){var de=he[j];de.element.scrollLeft=de.left,de.element.scrollTop=de.top}}jf=!!Dy,Ry=Dy=null}finally{nt=b,q.p=m,L.T=f}}a.current=c,hn=2}}function RN(){if(hn===2){hn=0;var a=Es,c=Qa,f=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||f){f=L.T,L.T=null;var m=q.p;q.p=2;var b=nt;nt|=4;try{cN(a,c.alternate,c)}finally{nt=b,q.p=m,L.T=f}}hn=3}}function ON(){if(hn===4||hn===3){hn=0,Je();var a=Es,c=Qa,f=Ja,m=xN;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?hn=5:(hn=0,Qa=Es=null,jN(a,a.pendingLanes));var b=a.pendingLanes;if(b===0&&(Cs=null),fo(f),c=c.stateNode,pt&&typeof pt.onCommitFiberRoot=="function")try{pt.onCommitFiberRoot(xn,c,void 0,(c.current.flags&128)===128)}catch{}if(m!==null){c=L.T,b=q.p,q.p=2,L.T=null;try{for(var C=a.onRecoverableError,M=0;M<m.length;M++){var j=m[M];C(j.value,{componentStack:j.stack})}}finally{L.T=c,q.p=b}}(Ja&3)!==0&&Sf(),li(a),b=a.pendingLanes,(f&4194090)!==0&&(b&42)!==0?a===yy?Ic++:(Ic=0,yy=a):Ic=0,zc(0)}}function jN(a,c){(a.pooledCacheLanes&=c)===0&&(c=a.pooledCache,c!=null&&(a.pooledCache=null,vc(c)))}function Sf(a){return DN(),RN(),ON(),LN()}function LN(){if(hn!==5)return!1;var a=Es,c=my;my=0;var f=fo(Ja),m=L.T,b=q.p;try{q.p=32>f?32:f,L.T=null,f=gy,gy=null;var C=Es,M=Ja;if(hn=0,Qa=Es=null,Ja=0,(nt&6)!==0)throw Error(r(331));var j=nt;if(nt|=4,vN(C.current),mN(C,C.current,M,f),nt=j,zc(0,!1),pt&&typeof pt.onPostCommitFiberRoot=="function")try{pt.onPostCommitFiberRoot(xn,C)}catch{}return!0}finally{q.p=b,L.T=m,jN(a,c)}}function PN(a,c,f){c=pr(f,c),c=Wg(a.stateNode,c,2),a=ps(a,c,2),a!==null&&(Zr(a,2),li(a))}function lt(a,c,f){if(a.tag===3)PN(a,a,f);else for(;c!==null;){if(c.tag===3){PN(c,a,f);break}else if(c.tag===1){var m=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(Cs===null||!Cs.has(m))){a=pr(f,a),f=qT(2),m=ps(c,f,2),m!==null&&(VT(f,m,c,a),Zr(m,2),li(m));break}}c=c.return}}function wy(a,c,f){var m=a.pingCache;if(m===null){m=a.pingCache=new Q8;var b=new Set;m.set(c,b)}else b=m.get(c),b===void 0&&(b=new Set,m.set(c,b));b.has(f)||(dy=!0,b.add(f),a=rH.bind(null,a,c,f),c.then(a,a))}function rH(a,c,f){var m=a.pingCache;m!==null&&m.delete(c),a.pingedLanes|=a.suspendedLanes&f,a.warmLanes&=~f,dt===a&&(Qe&f)===f&&(Tt===4||Tt===3&&(Qe&62914560)===Qe&&300>ke()-py?(nt&2)===0&&el(a,0):fy|=f,Za===Qe&&(Za=0)),li(a)}function BN(a,c){c===0&&(c=as()),a=Pa(a,c),a!==null&&(Zr(a,c),li(a))}function iH(a){var c=a.memoizedState,f=0;c!==null&&(f=c.retryLane),BN(a,f)}function sH(a,c){var f=0;switch(a.tag){case 13:var m=a.stateNode,b=a.memoizedState;b!==null&&(f=b.retryLane);break;case 19:m=a.stateNode;break;case 22:m=a.stateNode._retryCache;break;default:throw Error(r(314))}m!==null&&m.delete(c),BN(a,f)}function oH(a,c){return Te(a,c)}var Cf=null,nl=null,Sy=!1,Ef=!1,Cy=!1,jo=0;function li(a){a!==nl&&a.next===null&&(nl===null?Cf=nl=a:nl=nl.next=a),Ef=!0,Sy||(Sy=!0,lH())}function zc(a,c){if(!Cy&&Ef){Cy=!0;do for(var f=!1,m=Cf;m!==null;){if(a!==0){var b=m.pendingLanes;if(b===0)var C=0;else{var M=m.suspendedLanes,j=m.pingedLanes;C=(1<<31-zt(42|a)+1)-1,C&=b&~(M&~j),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(f=!0,VN(m,C))}else C=Qe,C=is(m,m===dt?C:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(C&3)===0||Gn(m,C)||(f=!0,VN(m,C));m=m.next}while(f);Cy=!1}}function aH(){IN()}function IN(){Ef=Sy=!1;var a=0;jo!==0&&(gH()&&(a=jo),jo=0);for(var c=ke(),f=null,m=Cf;m!==null;){var b=m.next,C=zN(m,c);C===0?(m.next=null,f===null?Cf=b:f.next=b,b===null&&(nl=f)):(f=m,(a!==0||(C&3)!==0)&&(Ef=!0)),m=b}zc(a)}function zN(a,c){for(var f=a.suspendedLanes,m=a.pingedLanes,b=a.expirationTimes,C=a.pendingLanes&-62914561;0<C;){var M=31-zt(C),j=1<<M,U=b[M];U===-1?((j&f)===0||(j&m)!==0)&&(b[M]=Ql(j,c)):U<=c&&(a.expiredLanes|=j),C&=~j}if(c=dt,f=Qe,f=is(a,a===c?f:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),m=a.callbackNode,f===0||a===c&&(rt===2||rt===9)||a.cancelPendingCommit!==null)return m!==null&&m!==null&&we(m),a.callbackNode=null,a.callbackPriority=0;if((f&3)===0||Gn(a,f)){if(c=f&-f,c===a.callbackPriority)return c;switch(m!==null&&we(m),fo(f)){case 2:case 8:f=jr;break;case 32:f=Wt;break;case 268435456:f=ut;break;default:f=Wt}return m=qN.bind(null,a),f=Te(f,m),a.callbackPriority=c,a.callbackNode=f,c}return m!==null&&m!==null&&we(m),a.callbackPriority=2,a.callbackNode=null,2}function qN(a,c){if(hn!==0&&hn!==5)return a.callbackNode=null,a.callbackPriority=0,null;var f=a.callbackNode;if(Sf()&&a.callbackNode!==f)return null;var m=Qe;return m=is(a,a===dt?m:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),m===0?null:(SN(a,m,c),zN(a,ke()),a.callbackNode!=null&&a.callbackNode===f?qN.bind(null,a):null)}function VN(a,c){if(Sf())return null;SN(a,c,!0)}function lH(){vH(function(){(nt&6)!==0?Te(bn,aH):IN()})}function Ey(){return jo===0&&(jo=ss()),jo}function HN(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:jd(""+a)}function FN(a,c){var f=c.ownerDocument.createElement("input");return f.name=c.name,f.value=c.value,a.id&&f.setAttribute("form",a.id),c.parentNode.insertBefore(f,c),a=new FormData(a),f.parentNode.removeChild(f),a}function cH(a,c,f,m,b){if(c==="submit"&&f&&f.stateNode===b){var C=HN((b[nn]||null).action),M=m.submitter;M&&(c=(c=M[nn]||null)?HN(c.formAction):M.getAttribute("formAction"),c!==null&&(C=c,M=null));var j=new Id("action","action",null,m,b);a.push({event:j,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(jo!==0){var U=M?FN(b,M):new FormData(b);Ug(f,{pending:!0,data:U,method:b.method,action:C},null,U)}}else typeof C=="function"&&(j.preventDefault(),U=M?FN(b,M):new FormData(b),Ug(f,{pending:!0,data:U,method:b.method,action:C},C,U))},currentTarget:b}]})}}for(var ky=0;ky<cg.length;ky++){var Ty=cg[ky],uH=Ty.toLowerCase(),dH=Ty[0].toUpperCase()+Ty.slice(1);Br(uH,"on"+dH)}Br(S2,"onAnimationEnd"),Br(C2,"onAnimationIteration"),Br(E2,"onAnimationStart"),Br("dblclick","onDoubleClick"),Br("focusin","onFocus"),Br("focusout","onBlur"),Br(A8,"onTransitionRun"),Br(M8,"onTransitionStart"),Br(_8,"onTransitionCancel"),Br(k2,"onTransitionEnd"),ri("onMouseEnter",["mouseout","mouseover"]),ri("onMouseLeave",["mouseout","mouseover"]),ri("onPointerEnter",["pointerout","pointerover"]),ri("onPointerLeave",["pointerout","pointerover"]),Pr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Pr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Pr("onBeforeInput",["compositionend","keypress","textInput","paste"]),Pr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Pr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Pr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var qc="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fH=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(qc));function UN(a,c){c=(c&4)!==0;for(var f=0;f<a.length;f++){var m=a[f],b=m.event;m=m.listeners;e:{var C=void 0;if(c)for(var M=m.length-1;0<=M;M--){var j=m[M],U=j.instance,re=j.currentTarget;if(j=j.listener,U!==C&&b.isPropagationStopped())break e;C=j,b.currentTarget=re;try{C(b)}catch(ue){df(ue)}b.currentTarget=null,C=U}else for(M=0;M<m.length;M++){if(j=m[M],U=j.instance,re=j.currentTarget,j=j.listener,U!==C&&b.isPropagationStopped())break e;C=j,b.currentTarget=re;try{C(b)}catch(ue){df(ue)}b.currentTarget=null,C=U}}}}function We(a,c){var f=c[ei];f===void 0&&(f=c[ei]=new Set);var m=a+"__bubble";f.has(m)||($N(c,a,2,!1),f.add(m))}function Ny(a,c,f){var m=0;c&&(m|=4),$N(f,a,m,c)}var kf="_reactListening"+Math.random().toString(36).slice(2);function Ay(a){if(!a[kf]){a[kf]=!0,Ta.forEach(function(f){f!=="selectionchange"&&(fH.has(f)||Ny(f,!1,a),Ny(f,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[kf]||(c[kf]=!0,Ny("selectionchange",!1,c))}}function $N(a,c,f,m){switch(mA(c)){case 2:var b=zH;break;case 8:b=qH;break;default:b=Hy}f=b.bind(null,c,f,a),b=void 0,!Xm||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(b=!0),m?b!==void 0?a.addEventListener(c,f,{capture:!0,passive:b}):a.addEventListener(c,f,!0):b!==void 0?a.addEventListener(c,f,{passive:b}):a.addEventListener(c,f,!1)}function My(a,c,f,m,b){var C=m;if((c&1)===0&&(c&2)===0&&m!==null)e:for(;;){if(m===null)return;var M=m.tag;if(M===3||M===4){var j=m.stateNode.containerInfo;if(j===b)break;if(M===4)for(M=m.return;M!==null;){var U=M.tag;if((U===3||U===4)&&M.stateNode.containerInfo===b)return;M=M.return}for(;j!==null;){if(M=ti(j),M===null)return;if(U=M.tag,U===5||U===6||U===26||U===27){m=C=M;continue e}j=j.parentNode}}m=m.return}Qk(function(){var re=C,ue=Ym(f),he=[];e:{var se=T2.get(a);if(se!==void 0){var le=Id,Be=a;switch(a){case"keypress":if(Pd(f)===0)break e;case"keydown":case"keyup":le=o8;break;case"focusin":Be="focus",le=eg;break;case"focusout":Be="blur",le=eg;break;case"beforeblur":case"afterblur":le=eg;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":le=t2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":le=YV;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":le=c8;break;case S2:case C2:case E2:le=ZV;break;case k2:le=d8;break;case"scroll":case"scrollend":le=GV;break;case"wheel":le=h8;break;case"copy":case"cut":case"paste":le=JV;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":le=r2;break;case"toggle":case"beforetoggle":le=m8}var je=(c&4)!==0,at=!je&&(a==="scroll"||a==="scrollend"),Z=je?se!==null?se+"Capture":null:se;je=[];for(var K=re,ee;K!==null;){var de=K;if(ee=de.stateNode,de=de.tag,de!==5&&de!==26&&de!==27||ee===null||Z===null||(de=sc(K,Z),de!=null&&je.push(Vc(K,de,ee))),at)break;K=K.return}0<je.length&&(se=new le(se,Be,null,f,ue),he.push({event:se,listeners:je}))}}if((c&7)===0){e:{if(se=a==="mouseover"||a==="pointerover",le=a==="mouseout"||a==="pointerout",se&&f!==Km&&(Be=f.relatedTarget||f.fromElement)&&(ti(Be)||Be[Jr]))break e;if((le||se)&&(se=ue.window===ue?ue:(se=ue.ownerDocument)?se.defaultView||se.parentWindow:window,le?(Be=f.relatedTarget||f.toElement,le=re,Be=Be?ti(Be):null,Be!==null&&(at=s(Be),je=Be.tag,Be!==at||je!==5&&je!==27&&je!==6)&&(Be=null)):(le=null,Be=re),le!==Be)){if(je=t2,de="onMouseLeave",Z="onMouseEnter",K="mouse",(a==="pointerout"||a==="pointerover")&&(je=r2,de="onPointerLeave",Z="onPointerEnter",K="pointer"),at=le==null?se:ni(le),ee=Be==null?se:ni(Be),se=new je(de,K+"leave",le,f,ue),se.target=at,se.relatedTarget=ee,de=null,ti(ue)===re&&(je=new je(Z,K+"enter",Be,f,ue),je.target=ee,je.relatedTarget=at,de=je),at=de,le&&Be)t:{for(je=le,Z=Be,K=0,ee=je;ee;ee=rl(ee))K++;for(ee=0,de=Z;de;de=rl(de))ee++;for(;0<K-ee;)je=rl(je),K--;for(;0<ee-K;)Z=rl(Z),ee--;for(;K--;){if(je===Z||Z!==null&&je===Z.alternate)break t;je=rl(je),Z=rl(Z)}je=null}else je=null;le!==null&&GN(he,se,le,je,!1),Be!==null&&at!==null&&GN(he,at,Be,je,!0)}}e:{if(se=re?ni(re):window,le=se.nodeName&&se.nodeName.toLowerCase(),le==="select"||le==="input"&&se.type==="file")var Ee=d2;else if(c2(se))if(f2)Ee=k8;else{Ee=C8;var Ke=S8}else le=se.nodeName,!le||le.toLowerCase()!=="input"||se.type!=="checkbox"&&se.type!=="radio"?re&&Gm(re.elementType)&&(Ee=d2):Ee=E8;if(Ee&&(Ee=Ee(a,re))){u2(he,Ee,f,ue);break e}Ke&&Ke(a,se,re),a==="focusout"&&re&&se.type==="number"&&re.memoizedProps.value!=null&&ic(se,"number",se.value)}switch(Ke=re?ni(re):window,a){case"focusin":(c2(Ke)||Ke.contentEditable==="true")&&(Oa=Ke,og=re,hc=null);break;case"focusout":hc=og=Oa=null;break;case"mousedown":ag=!0;break;case"contextmenu":case"mouseup":case"dragend":ag=!1,x2(he,f,ue);break;case"selectionchange":if(N8)break;case"keydown":case"keyup":x2(he,f,ue)}var _e;if(ng)e:{switch(a){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else Ra?a2(a,f)&&(Le="onCompositionEnd"):a==="keydown"&&f.keyCode===229&&(Le="onCompositionStart");Le&&(i2&&f.locale!=="ko"&&(Ra||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&Ra&&(_e=Jk()):(us=ue,Zm="value"in us?us.value:us.textContent,Ra=!0)),Ke=Tf(re,Le),0<Ke.length&&(Le=new n2(Le,a,null,f,ue),he.push({event:Le,listeners:Ke}),_e?Le.data=_e:(_e=l2(f),_e!==null&&(Le.data=_e)))),(_e=y8?v8(a,f):b8(a,f))&&(Le=Tf(re,"onBeforeInput"),0<Le.length&&(Ke=new n2("onBeforeInput","beforeinput",null,f,ue),he.push({event:Ke,listeners:Le}),Ke.data=_e)),cH(he,a,re,f,ue)}UN(he,c)})}function Vc(a,c,f){return{instance:a,listener:c,currentTarget:f}}function Tf(a,c){for(var f=c+"Capture",m=[];a!==null;){var b=a,C=b.stateNode;if(b=b.tag,b!==5&&b!==26&&b!==27||C===null||(b=sc(a,f),b!=null&&m.unshift(Vc(a,b,C)),b=sc(a,c),b!=null&&m.push(Vc(a,b,C))),a.tag===3)return m;a=a.return}return[]}function rl(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function GN(a,c,f,m,b){for(var C=c._reactName,M=[];f!==null&&f!==m;){var j=f,U=j.alternate,re=j.stateNode;if(j=j.tag,U!==null&&U===m)break;j!==5&&j!==26&&j!==27||re===null||(U=re,b?(re=sc(f,C),re!=null&&M.unshift(Vc(f,re,U))):b||(re=sc(f,C),re!=null&&M.push(Vc(f,re,U)))),f=f.return}M.length!==0&&a.push({event:c,listeners:M})}var hH=/\r\n?/g,pH=/\u0000|\uFFFD/g;function KN(a){return(typeof a=="string"?a:""+a).replace(hH,`
`).replace(pH,"")}function YN(a,c){return c=KN(c),KN(a)===c}function Nf(){}function ot(a,c,f,m,b,C){switch(f){case"children":typeof m=="string"?c==="body"||c==="textarea"&&m===""||Ma(a,m):(typeof m=="number"||typeof m=="bigint")&&c!=="body"&&Ma(a,""+m);break;case"className":fe(a,"class",m);break;case"tabIndex":fe(a,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":fe(a,f,m);break;case"style":Xk(a,m,C);break;case"data":if(c!=="object"){fe(a,"data",m);break}case"src":case"href":if(m===""&&(c!=="a"||f!=="href")){a.removeAttribute(f);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){a.removeAttribute(f);break}m=jd(""+m),a.setAttribute(f,m);break;case"action":case"formAction":if(typeof m=="function"){a.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof C=="function"&&(f==="formAction"?(c!=="input"&&ot(a,c,"name",b.name,b,null),ot(a,c,"formEncType",b.formEncType,b,null),ot(a,c,"formMethod",b.formMethod,b,null),ot(a,c,"formTarget",b.formTarget,b,null)):(ot(a,c,"encType",b.encType,b,null),ot(a,c,"method",b.method,b,null),ot(a,c,"target",b.target,b,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){a.removeAttribute(f);break}m=jd(""+m),a.setAttribute(f,m);break;case"onClick":m!=null&&(a.onclick=Nf);break;case"onScroll":m!=null&&We("scroll",a);break;case"onScrollEnd":m!=null&&We("scrollend",a);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(f=m.__html,f!=null){if(b.children!=null)throw Error(r(60));a.innerHTML=f}}break;case"multiple":a.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":a.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){a.removeAttribute("xlink:href");break}f=jd(""+m),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?a.setAttribute(f,""+m):a.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?a.setAttribute(f,""):a.removeAttribute(f);break;case"capture":case"download":m===!0?a.setAttribute(f,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?a.setAttribute(f,m):a.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?a.setAttribute(f,m):a.removeAttribute(f);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?a.removeAttribute(f):a.setAttribute(f,m);break;case"popover":We("beforetoggle",a),We("toggle",a),ne(a,"popover",m);break;case"xlinkActuate":ye(a,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":ye(a,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":ye(a,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":ye(a,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":ye(a,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":ye(a,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":ye(a,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":ye(a,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":ye(a,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":ne(a,"is",m);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=UV.get(f)||f,ne(a,f,m))}}function _y(a,c,f,m,b,C){switch(f){case"style":Xk(a,m,C);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(f=m.__html,f!=null){if(b.children!=null)throw Error(r(60));a.innerHTML=f}}break;case"children":typeof m=="string"?Ma(a,m):(typeof m=="number"||typeof m=="bigint")&&Ma(a,""+m);break;case"onScroll":m!=null&&We("scroll",a);break;case"onScrollEnd":m!=null&&We("scrollend",a);break;case"onClick":m!=null&&(a.onclick=Nf);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!go.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(b=f.endsWith("Capture"),c=f.slice(2,b?f.length-7:void 0),C=a[nn]||null,C=C!=null?C[f]:null,typeof C=="function"&&a.removeEventListener(c,C,b),typeof m=="function")){typeof C!="function"&&C!==null&&(f in a?a[f]=null:a.hasAttribute(f)&&a.removeAttribute(f)),a.addEventListener(c,m,b);break e}f in a?a[f]=m:m===!0?a.setAttribute(f,""):ne(a,f,m)}}}function pn(a,c,f){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":We("error",a),We("load",a);var m=!1,b=!1,C;for(C in f)if(f.hasOwnProperty(C)){var M=f[C];if(M!=null)switch(C){case"src":m=!0;break;case"srcSet":b=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:ot(a,c,C,M,f,null)}}b&&ot(a,c,"srcSet",f.srcSet,f,null),m&&ot(a,c,"src",f.src,f,null);return;case"input":We("invalid",a);var j=C=M=b=null,U=null,re=null;for(m in f)if(f.hasOwnProperty(m)){var ue=f[m];if(ue!=null)switch(m){case"name":b=ue;break;case"type":M=ue;break;case"checked":U=ue;break;case"defaultChecked":re=ue;break;case"value":C=ue;break;case"defaultValue":j=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(r(137,c));break;default:ot(a,c,m,ue,f,null)}}Od(a,C,j,U,re,M,b,!1),cs(a);return;case"select":We("invalid",a),m=M=C=null;for(b in f)if(f.hasOwnProperty(b)&&(j=f[b],j!=null))switch(b){case"value":C=j;break;case"defaultValue":M=j;break;case"multiple":m=j;default:ot(a,c,b,j,f,null)}c=C,f=M,a.multiple=!!m,c!=null?Ei(a,!!m,c,!1):f!=null&&Ei(a,!!m,f,!0);return;case"textarea":We("invalid",a),C=b=m=null;for(M in f)if(f.hasOwnProperty(M)&&(j=f[M],j!=null))switch(M){case"value":m=j;break;case"defaultValue":b=j;break;case"children":C=j;break;case"dangerouslySetInnerHTML":if(j!=null)throw Error(r(91));break;default:ot(a,c,M,j,f,null)}Yk(a,m,b,C),cs(a);return;case"option":for(U in f)if(f.hasOwnProperty(U)&&(m=f[U],m!=null))switch(U){case"selected":a.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:ot(a,c,U,m,f,null)}return;case"dialog":We("beforetoggle",a),We("toggle",a),We("cancel",a),We("close",a);break;case"iframe":case"object":We("load",a);break;case"video":case"audio":for(m=0;m<qc.length;m++)We(qc[m],a);break;case"image":We("error",a),We("load",a);break;case"details":We("toggle",a);break;case"embed":case"source":case"link":We("error",a),We("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(re in f)if(f.hasOwnProperty(re)&&(m=f[re],m!=null))switch(re){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:ot(a,c,re,m,f,null)}return;default:if(Gm(c)){for(ue in f)f.hasOwnProperty(ue)&&(m=f[ue],m!==void 0&&_y(a,c,ue,m,f,void 0));return}}for(j in f)f.hasOwnProperty(j)&&(m=f[j],m!=null&&ot(a,c,j,m,f,null))}function mH(a,c,f,m){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var b=null,C=null,M=null,j=null,U=null,re=null,ue=null;for(le in f){var he=f[le];if(f.hasOwnProperty(le)&&he!=null)switch(le){case"checked":break;case"value":break;case"defaultValue":U=he;default:m.hasOwnProperty(le)||ot(a,c,le,null,m,he)}}for(var se in m){var le=m[se];if(he=f[se],m.hasOwnProperty(se)&&(le!=null||he!=null))switch(se){case"type":C=le;break;case"name":b=le;break;case"checked":re=le;break;case"defaultChecked":ue=le;break;case"value":M=le;break;case"defaultValue":j=le;break;case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(r(137,c));break;default:le!==he&&ot(a,c,se,le,m,he)}}vo(a,M,j,U,re,ue,C,b);return;case"select":le=M=j=se=null;for(C in f)if(U=f[C],f.hasOwnProperty(C)&&U!=null)switch(C){case"value":break;case"multiple":le=U;default:m.hasOwnProperty(C)||ot(a,c,C,null,m,U)}for(b in m)if(C=m[b],U=f[b],m.hasOwnProperty(b)&&(C!=null||U!=null))switch(b){case"value":se=C;break;case"defaultValue":j=C;break;case"multiple":M=C;default:C!==U&&ot(a,c,b,C,m,U)}c=j,f=M,m=le,se!=null?Ei(a,!!f,se,!1):!!m!=!!f&&(c!=null?Ei(a,!!f,c,!0):Ei(a,!!f,f?[]:"",!1));return;case"textarea":le=se=null;for(j in f)if(b=f[j],f.hasOwnProperty(j)&&b!=null&&!m.hasOwnProperty(j))switch(j){case"value":break;case"children":break;default:ot(a,c,j,null,m,b)}for(M in m)if(b=m[M],C=f[M],m.hasOwnProperty(M)&&(b!=null||C!=null))switch(M){case"value":se=b;break;case"defaultValue":le=b;break;case"children":break;case"dangerouslySetInnerHTML":if(b!=null)throw Error(r(91));break;default:b!==C&&ot(a,c,M,b,m,C)}Kk(a,se,le);return;case"option":for(var Be in f)if(se=f[Be],f.hasOwnProperty(Be)&&se!=null&&!m.hasOwnProperty(Be))switch(Be){case"selected":a.selected=!1;break;default:ot(a,c,Be,null,m,se)}for(U in m)if(se=m[U],le=f[U],m.hasOwnProperty(U)&&se!==le&&(se!=null||le!=null))switch(U){case"selected":a.selected=se&&typeof se!="function"&&typeof se!="symbol";break;default:ot(a,c,U,se,m,le)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var je in f)se=f[je],f.hasOwnProperty(je)&&se!=null&&!m.hasOwnProperty(je)&&ot(a,c,je,null,m,se);for(re in m)if(se=m[re],le=f[re],m.hasOwnProperty(re)&&se!==le&&(se!=null||le!=null))switch(re){case"children":case"dangerouslySetInnerHTML":if(se!=null)throw Error(r(137,c));break;default:ot(a,c,re,se,m,le)}return;default:if(Gm(c)){for(var at in f)se=f[at],f.hasOwnProperty(at)&&se!==void 0&&!m.hasOwnProperty(at)&&_y(a,c,at,void 0,m,se);for(ue in m)se=m[ue],le=f[ue],!m.hasOwnProperty(ue)||se===le||se===void 0&&le===void 0||_y(a,c,ue,se,m,le);return}}for(var Z in f)se=f[Z],f.hasOwnProperty(Z)&&se!=null&&!m.hasOwnProperty(Z)&&ot(a,c,Z,null,m,se);for(he in m)se=m[he],le=f[he],!m.hasOwnProperty(he)||se===le||se==null&&le==null||ot(a,c,he,se,m,le)}var Dy=null,Ry=null;function Af(a){return a.nodeType===9?a:a.ownerDocument}function WN(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function XN(a,c){if(a===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&c==="foreignObject"?0:a}function Oy(a,c){return a==="textarea"||a==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var jy=null;function gH(){var a=window.event;return a&&a.type==="popstate"?a===jy?!1:(jy=a,!0):(jy=null,!1)}var ZN=typeof setTimeout=="function"?setTimeout:void 0,yH=typeof clearTimeout=="function"?clearTimeout:void 0,QN=typeof Promise=="function"?Promise:void 0,vH=typeof queueMicrotask=="function"?queueMicrotask:typeof QN<"u"?function(a){return QN.resolve(null).then(a).catch(bH)}:ZN;function bH(a){setTimeout(function(){throw a})}function Ts(a){return a==="head"}function JN(a,c){var f=c,m=0,b=0;do{var C=f.nextSibling;if(a.removeChild(f),C&&C.nodeType===8)if(f=C.data,f==="/$"){if(0<m&&8>m){f=m;var M=a.ownerDocument;if(f&1&&Hc(M.documentElement),f&2&&Hc(M.body),f&4)for(f=M.head,Hc(f),M=f.firstChild;M;){var j=M.nextSibling,U=M.nodeName;M[Ci]||U==="SCRIPT"||U==="STYLE"||U==="LINK"&&M.rel.toLowerCase()==="stylesheet"||f.removeChild(M),M=j}}if(b===0){a.removeChild(C),Xc(c);return}b--}else f==="$"||f==="$?"||f==="$!"?b++:m=f.charCodeAt(0)-48;else m=0;f=C}while(f);Xc(c)}function Ly(a){var c=a.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var f=c;switch(c=c.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":Ly(f),mo(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}a.removeChild(f)}}function xH(a,c,f,m){for(;a.nodeType===1;){var b=f;if(a.nodeName.toLowerCase()!==c.toLowerCase()){if(!m&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(m){if(!a[Ci])switch(c){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(C=a.getAttribute("rel"),C==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(C!==b.rel||a.getAttribute("href")!==(b.href==null||b.href===""?null:b.href)||a.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin)||a.getAttribute("title")!==(b.title==null?null:b.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(C=a.getAttribute("src"),(C!==(b.src==null?null:b.src)||a.getAttribute("type")!==(b.type==null?null:b.type)||a.getAttribute("crossorigin")!==(b.crossOrigin==null?null:b.crossOrigin))&&C&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(c==="input"&&a.type==="hidden"){var C=b.name==null?null:""+b.name;if(b.type==="hidden"&&a.getAttribute("name")===C)return a}else return a;if(a=zr(a.nextSibling),a===null)break}return null}function wH(a,c,f){if(c==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!f||(a=zr(a.nextSibling),a===null))return null;return a}function Py(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function SH(a,c){var f=a.ownerDocument;if(a.data!=="$?"||f.readyState==="complete")c();else{var m=function(){c(),f.removeEventListener("DOMContentLoaded",m)};f.addEventListener("DOMContentLoaded",m),a._reactRetry=m}}function zr(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return a}var By=null;function eA(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var f=a.data;if(f==="$"||f==="$!"||f==="$?"){if(c===0)return a;c--}else f==="/$"&&c++}a=a.previousSibling}return null}function tA(a,c,f){switch(c=Af(f),a){case"html":if(a=c.documentElement,!a)throw Error(r(452));return a;case"head":if(a=c.head,!a)throw Error(r(453));return a;case"body":if(a=c.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function Hc(a){for(var c=a.attributes;c.length;)a.removeAttributeNode(c[0]);mo(a)}var xr=new Map,nA=new Set;function Mf(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Ii=q.d;q.d={f:CH,r:EH,D:kH,C:TH,L:NH,m:AH,X:_H,S:MH,M:DH};function CH(){var a=Ii.f(),c=xf();return a||c}function EH(a){var c=Kn(a);c!==null&&c.tag===5&&c.type==="form"?ST(c):Ii.r(a)}var il=typeof document>"u"?null:document;function rA(a,c,f){var m=il;if(m&&typeof c=="string"&&c){var b=Ln(c);b='link[rel="'+a+'"][href="'+b+'"]',typeof f=="string"&&(b+='[crossorigin="'+f+'"]'),nA.has(b)||(nA.add(b),a={rel:a,crossOrigin:f,href:c},m.querySelector(b)===null&&(c=m.createElement("link"),pn(c,"link",a),Et(c),m.head.appendChild(c)))}}function kH(a){Ii.D(a),rA("dns-prefetch",a,null)}function TH(a,c){Ii.C(a,c),rA("preconnect",a,c)}function NH(a,c,f){Ii.L(a,c,f);var m=il;if(m&&a&&c){var b='link[rel="preload"][as="'+Ln(c)+'"]';c==="image"&&f&&f.imageSrcSet?(b+='[imagesrcset="'+Ln(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(b+='[imagesizes="'+Ln(f.imageSizes)+'"]')):b+='[href="'+Ln(a)+'"]';var C=b;switch(c){case"style":C=sl(a);break;case"script":C=ol(a)}xr.has(C)||(a=h({rel:"preload",href:c==="image"&&f&&f.imageSrcSet?void 0:a,as:c},f),xr.set(C,a),m.querySelector(b)!==null||c==="style"&&m.querySelector(Fc(C))||c==="script"&&m.querySelector(Uc(C))||(c=m.createElement("link"),pn(c,"link",a),Et(c),m.head.appendChild(c)))}}function AH(a,c){Ii.m(a,c);var f=il;if(f&&a){var m=c&&typeof c.as=="string"?c.as:"script",b='link[rel="modulepreload"][as="'+Ln(m)+'"][href="'+Ln(a)+'"]',C=b;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":C=ol(a)}if(!xr.has(C)&&(a=h({rel:"modulepreload",href:a},c),xr.set(C,a),f.querySelector(b)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(Uc(C)))return}m=f.createElement("link"),pn(m,"link",a),Et(m),f.head.appendChild(m)}}}function MH(a,c,f){Ii.S(a,c,f);var m=il;if(m&&a){var b=Lr(m).hoistableStyles,C=sl(a);c=c||"default";var M=b.get(C);if(!M){var j={loading:0,preload:null};if(M=m.querySelector(Fc(C)))j.loading=5;else{a=h({rel:"stylesheet",href:a,"data-precedence":c},f),(f=xr.get(C))&&Iy(a,f);var U=M=m.createElement("link");Et(U),pn(U,"link",a),U._p=new Promise(function(re,ue){U.onload=re,U.onerror=ue}),U.addEventListener("load",function(){j.loading|=1}),U.addEventListener("error",function(){j.loading|=2}),j.loading|=4,_f(M,c,m)}M={type:"stylesheet",instance:M,count:1,state:j},b.set(C,M)}}}function _H(a,c){Ii.X(a,c);var f=il;if(f&&a){var m=Lr(f).hoistableScripts,b=ol(a),C=m.get(b);C||(C=f.querySelector(Uc(b)),C||(a=h({src:a,async:!0},c),(c=xr.get(b))&&zy(a,c),C=f.createElement("script"),Et(C),pn(C,"link",a),f.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},m.set(b,C))}}function DH(a,c){Ii.M(a,c);var f=il;if(f&&a){var m=Lr(f).hoistableScripts,b=ol(a),C=m.get(b);C||(C=f.querySelector(Uc(b)),C||(a=h({src:a,async:!0,type:"module"},c),(c=xr.get(b))&&zy(a,c),C=f.createElement("script"),Et(C),pn(C,"link",a),f.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},m.set(b,C))}}function iA(a,c,f,m){var b=(b=Q.current)?Mf(b):null;if(!b)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(c=sl(f.href),f=Lr(b).hoistableStyles,m=f.get(c),m||(m={type:"style",instance:null,count:0,state:null},f.set(c,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){a=sl(f.href);var C=Lr(b).hoistableStyles,M=C.get(a);if(M||(b=b.ownerDocument||b,M={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},C.set(a,M),(C=b.querySelector(Fc(a)))&&!C._p&&(M.instance=C,M.state.loading=5),xr.has(a)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},xr.set(a,f),C||RH(b,a,f,M.state))),c&&m===null)throw Error(r(528,""));return M}if(c&&m!==null)throw Error(r(529,""));return null;case"script":return c=f.async,f=f.src,typeof f=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=ol(f),f=Lr(b).hoistableScripts,m=f.get(c),m||(m={type:"script",instance:null,count:0,state:null},f.set(c,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function sl(a){return'href="'+Ln(a)+'"'}function Fc(a){return'link[rel="stylesheet"]['+a+"]"}function sA(a){return h({},a,{"data-precedence":a.precedence,precedence:null})}function RH(a,c,f,m){a.querySelector('link[rel="preload"][as="style"]['+c+"]")?m.loading=1:(c=a.createElement("link"),m.preload=c,c.addEventListener("load",function(){return m.loading|=1}),c.addEventListener("error",function(){return m.loading|=2}),pn(c,"link",f),Et(c),a.head.appendChild(c))}function ol(a){return'[src="'+Ln(a)+'"]'}function Uc(a){return"script[async]"+a}function oA(a,c,f){if(c.count++,c.instance===null)switch(c.type){case"style":var m=a.querySelector('style[data-href~="'+Ln(f.href)+'"]');if(m)return c.instance=m,Et(m),m;var b=h({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return m=(a.ownerDocument||a).createElement("style"),Et(m),pn(m,"style",b),_f(m,f.precedence,a),c.instance=m;case"stylesheet":b=sl(f.href);var C=a.querySelector(Fc(b));if(C)return c.state.loading|=4,c.instance=C,Et(C),C;m=sA(f),(b=xr.get(b))&&Iy(m,b),C=(a.ownerDocument||a).createElement("link"),Et(C);var M=C;return M._p=new Promise(function(j,U){M.onload=j,M.onerror=U}),pn(C,"link",m),c.state.loading|=4,_f(C,f.precedence,a),c.instance=C;case"script":return C=ol(f.src),(b=a.querySelector(Uc(C)))?(c.instance=b,Et(b),b):(m=f,(b=xr.get(C))&&(m=h({},f),zy(m,b)),a=a.ownerDocument||a,b=a.createElement("script"),Et(b),pn(b,"link",m),a.head.appendChild(b),c.instance=b);case"void":return null;default:throw Error(r(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(m=c.instance,c.state.loading|=4,_f(m,f.precedence,a));return c.instance}function _f(a,c,f){for(var m=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),b=m.length?m[m.length-1]:null,C=b,M=0;M<m.length;M++){var j=m[M];if(j.dataset.precedence===c)C=j;else if(C!==b)break}C?C.parentNode.insertBefore(a,C.nextSibling):(c=f.nodeType===9?f.head:f,c.insertBefore(a,c.firstChild))}function Iy(a,c){a.crossOrigin==null&&(a.crossOrigin=c.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=c.referrerPolicy),a.title==null&&(a.title=c.title)}function zy(a,c){a.crossOrigin==null&&(a.crossOrigin=c.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=c.referrerPolicy),a.integrity==null&&(a.integrity=c.integrity)}var Df=null;function aA(a,c,f){if(Df===null){var m=new Map,b=Df=new Map;b.set(f,m)}else b=Df,m=b.get(f),m||(m=new Map,b.set(f,m));if(m.has(a))return m;for(m.set(a,null),f=f.getElementsByTagName(a),b=0;b<f.length;b++){var C=f[b];if(!(C[Ci]||C[qt]||a==="link"&&C.getAttribute("rel")==="stylesheet")&&C.namespaceURI!=="http://www.w3.org/2000/svg"){var M=C.getAttribute(c)||"";M=a+M;var j=m.get(M);j?j.push(C):m.set(M,[C])}}return m}function lA(a,c,f){a=a.ownerDocument||a,a.head.insertBefore(f,c==="title"?a.querySelector("head > title"):null)}function OH(a,c,f){if(f===1||c.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return a=c.disabled,typeof c.precedence=="string"&&a==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function cA(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var $c=null;function jH(){}function LH(a,c,f){if($c===null)throw Error(r(475));var m=$c;if(c.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var b=sl(f.href),C=a.querySelector(Fc(b));if(C){a=C._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(m.count++,m=Rf.bind(m),a.then(m,m)),c.state.loading|=4,c.instance=C,Et(C);return}C=a.ownerDocument||a,f=sA(f),(b=xr.get(b))&&Iy(f,b),C=C.createElement("link"),Et(C);var M=C;M._p=new Promise(function(j,U){M.onload=j,M.onerror=U}),pn(C,"link",f),c.instance=C}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(c,a),(a=c.state.preload)&&(c.state.loading&3)===0&&(m.count++,c=Rf.bind(m),a.addEventListener("load",c),a.addEventListener("error",c))}}function PH(){if($c===null)throw Error(r(475));var a=$c;return a.stylesheets&&a.count===0&&qy(a,a.stylesheets),0<a.count?function(c){var f=setTimeout(function(){if(a.stylesheets&&qy(a,a.stylesheets),a.unsuspend){var m=a.unsuspend;a.unsuspend=null,m()}},6e4);return a.unsuspend=c,function(){a.unsuspend=null,clearTimeout(f)}}:null}function Rf(){if(this.count--,this.count===0){if(this.stylesheets)qy(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Of=null;function qy(a,c){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Of=new Map,c.forEach(BH,a),Of=null,Rf.call(a))}function BH(a,c){if(!(c.state.loading&4)){var f=Of.get(a);if(f)var m=f.get(null);else{f=new Map,Of.set(a,f);for(var b=a.querySelectorAll("link[data-precedence],style[data-precedence]"),C=0;C<b.length;C++){var M=b[C];(M.nodeName==="LINK"||M.getAttribute("media")!=="not all")&&(f.set(M.dataset.precedence,M),m=M)}m&&f.set(null,m)}b=c.instance,M=b.getAttribute("data-precedence"),C=f.get(M)||m,C===m&&f.set(null,b),f.set(M,b),this.count++,m=Rf.bind(this),b.addEventListener("load",m),b.addEventListener("error",m),C?C.parentNode.insertBefore(b,C.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(b,a.firstChild)),c.state.loading|=4}}var Gc={$$typeof:k,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function IH(a,c,f,m,b,C,M,j){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=ls(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ls(0),this.hiddenUpdates=ls(null),this.identifierPrefix=m,this.onUncaughtError=b,this.onCaughtError=C,this.onRecoverableError=M,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=j,this.incompleteTransitions=new Map}function uA(a,c,f,m,b,C,M,j,U,re,ue,he){return a=new IH(a,c,f,M,j,U,re,he),c=1,C===!0&&(c|=24),C=Xn(3,null,null,c),a.current=C,C.stateNode=a,c=wg(),c.refCount++,a.pooledCache=c,c.refCount++,C.memoizedState={element:m,isDehydrated:f,cache:c},kg(C),a}function dA(a){return a?(a=Ba,a):Ba}function fA(a,c,f,m,b,C){b=dA(b),m.context===null?m.context=b:m.pendingContext=b,m=hs(c),m.payload={element:f},C=C===void 0?null:C,C!==null&&(m.callback=C),f=ps(a,m,c),f!==null&&(tr(f,a,c),Sc(f,a,c))}function hA(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var f=a.retryLane;a.retryLane=f!==0&&f<c?f:c}}function Vy(a,c){hA(a,c),(a=a.alternate)&&hA(a,c)}function pA(a){if(a.tag===13){var c=Pa(a,67108864);c!==null&&tr(c,a,67108864),Vy(a,67108864)}}var jf=!0;function zH(a,c,f,m){var b=L.T;L.T=null;var C=q.p;try{q.p=2,Hy(a,c,f,m)}finally{q.p=C,L.T=b}}function qH(a,c,f,m){var b=L.T;L.T=null;var C=q.p;try{q.p=8,Hy(a,c,f,m)}finally{q.p=C,L.T=b}}function Hy(a,c,f,m){if(jf){var b=Fy(m);if(b===null)My(a,c,m,Lf,f),gA(a,m);else if(HH(b,a,c,f,m))m.stopPropagation();else if(gA(a,m),c&4&&-1<VH.indexOf(a)){for(;b!==null;){var C=Kn(b);if(C!==null)switch(C.tag){case 3:if(C=C.stateNode,C.current.memoizedState.isDehydrated){var M=jn(C.pendingLanes);if(M!==0){var j=C;for(j.pendingLanes|=2,j.entangledLanes|=2;M;){var U=1<<31-zt(M);j.entanglements[1]|=U,M&=~U}li(C),(nt&6)===0&&(vf=ke()+500,zc(0))}}break;case 13:j=Pa(C,2),j!==null&&tr(j,C,2),xf(),Vy(C,2)}if(C=Fy(m),C===null&&My(a,c,m,Lf,f),C===b)break;b=C}b!==null&&m.stopPropagation()}else My(a,c,m,null,f)}}function Fy(a){return a=Ym(a),Uy(a)}var Lf=null;function Uy(a){if(Lf=null,a=ti(a),a!==null){var c=s(a);if(c===null)a=null;else{var f=c.tag;if(f===13){if(a=o(c),a!==null)return a;a=null}else if(f===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&&(a=null)}}return Lf=a,null}function mA(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Pt()){case bn:return 2;case jr:return 8;case Wt:case Bt:return 32;case ut:return 268435456;default:return 32}default:return 32}}var $y=!1,Ns=null,As=null,Ms=null,Kc=new Map,Yc=new Map,_s=[],VH="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function gA(a,c){switch(a){case"focusin":case"focusout":Ns=null;break;case"dragenter":case"dragleave":As=null;break;case"mouseover":case"mouseout":Ms=null;break;case"pointerover":case"pointerout":Kc.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Yc.delete(c.pointerId)}}function Wc(a,c,f,m,b,C){return a===null||a.nativeEvent!==C?(a={blockedOn:c,domEventName:f,eventSystemFlags:m,nativeEvent:C,targetContainers:[b]},c!==null&&(c=Kn(c),c!==null&&pA(c)),a):(a.eventSystemFlags|=m,c=a.targetContainers,b!==null&&c.indexOf(b)===-1&&c.push(b),a)}function HH(a,c,f,m,b){switch(c){case"focusin":return Ns=Wc(Ns,a,c,f,m,b),!0;case"dragenter":return As=Wc(As,a,c,f,m,b),!0;case"mouseover":return Ms=Wc(Ms,a,c,f,m,b),!0;case"pointerover":var C=b.pointerId;return Kc.set(C,Wc(Kc.get(C)||null,a,c,f,m,b)),!0;case"gotpointercapture":return C=b.pointerId,Yc.set(C,Wc(Yc.get(C)||null,a,c,f,m,b)),!0}return!1}function yA(a){var c=ti(a.target);if(c!==null){var f=s(c);if(f!==null){if(c=f.tag,c===13){if(c=o(f),c!==null){a.blockedOn=c,ec(a.priority,function(){if(f.tag===13){var m=er();m=uo(m);var b=Pa(f,m);b!==null&&tr(b,f,m),Vy(f,m)}});return}}else if(c===3&&f.stateNode.current.memoizedState.isDehydrated){a.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}a.blockedOn=null}function Pf(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0<c.length;){var f=Fy(a.nativeEvent);if(f===null){f=a.nativeEvent;var m=new f.constructor(f.type,f);Km=m,f.target.dispatchEvent(m),Km=null}else return c=Kn(f),c!==null&&pA(c),a.blockedOn=f,!1;c.shift()}return!0}function vA(a,c,f){Pf(a)&&f.delete(c)}function FH(){$y=!1,Ns!==null&&Pf(Ns)&&(Ns=null),As!==null&&Pf(As)&&(As=null),Ms!==null&&Pf(Ms)&&(Ms=null),Kc.forEach(vA),Yc.forEach(vA)}function Bf(a,c){a.blockedOn===c&&(a.blockedOn=null,$y||($y=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,FH)))}var If=null;function bA(a){If!==a&&(If=a,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){If===a&&(If=null);for(var c=0;c<a.length;c+=3){var f=a[c],m=a[c+1],b=a[c+2];if(typeof m!="function"){if(Uy(m||f)===null)continue;break}var C=Kn(f);C!==null&&(a.splice(c,3),c-=3,Ug(C,{pending:!0,data:b,method:f.method,action:m},m,b))}}))}function Xc(a){function c(U){return Bf(U,a)}Ns!==null&&Bf(Ns,a),As!==null&&Bf(As,a),Ms!==null&&Bf(Ms,a),Kc.forEach(c),Yc.forEach(c);for(var f=0;f<_s.length;f++){var m=_s[f];m.blockedOn===a&&(m.blockedOn=null)}for(;0<_s.length&&(f=_s[0],f.blockedOn===null);)yA(f),f.blockedOn===null&&_s.shift();if(f=(a.ownerDocument||a).$$reactFormReplay,f!=null)for(m=0;m<f.length;m+=3){var b=f[m],C=f[m+1],M=b[nn]||null;if(typeof C=="function")M||bA(f);else if(M){var j=null;if(C&&C.hasAttribute("formAction")){if(b=C,M=C[nn]||null)j=M.formAction;else if(Uy(b)!==null)continue}else j=M.action;typeof j=="function"?f[m+1]=j:(f.splice(m,3),m-=3),bA(f)}}}function Gy(a){this._internalRoot=a}zf.prototype.render=Gy.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(r(409));var f=c.current,m=er();fA(f,m,a,c,null,null)},zf.prototype.unmount=Gy.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;fA(a.current,2,null,a,null,null),xf(),c[Jr]=null}};function zf(a){this._internalRoot=a}zf.prototype.unstable_scheduleHydration=function(a){if(a){var c=ho();a={blockedOn:null,target:a,priority:c};for(var f=0;f<_s.length&&c!==0&&c<_s[f].priority;f++);_s.splice(f,0,a),f===0&&yA(a)}};var xA=t.version;if(xA!=="19.1.1")throw Error(r(527,xA,"19.1.1"));q.findDOMNode=function(a){var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=u(c),a=a!==null?d(a):null,a=a===null?null:a.stateNode,a};var UH={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:L,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var qf=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!qf.isDisabled&&qf.supportsFiber)try{xn=qf.inject(UH),pt=qf}catch{}}return Qc.createRoot=function(a,c){if(!i(a))throw Error(r(299));var f=!1,m="",b=PT,C=BT,M=IT,j=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(m=c.identifierPrefix),c.onUncaughtError!==void 0&&(b=c.onUncaughtError),c.onCaughtError!==void 0&&(C=c.onCaughtError),c.onRecoverableError!==void 0&&(M=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(j=c.unstable_transitionCallbacks)),c=uA(a,1,!1,null,null,f,m,b,C,M,j,null),a[Jr]=c.current,Ay(a),new Gy(c)},Qc.hydrateRoot=function(a,c,f){if(!i(a))throw Error(r(299));var m=!1,b="",C=PT,M=BT,j=IT,U=null,re=null;return f!=null&&(f.unstable_strictMode===!0&&(m=!0),f.identifierPrefix!==void 0&&(b=f.identifierPrefix),f.onUncaughtError!==void 0&&(C=f.onUncaughtError),f.onCaughtError!==void 0&&(M=f.onCaughtError),f.onRecoverableError!==void 0&&(j=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(U=f.unstable_transitionCallbacks),f.formState!==void 0&&(re=f.formState)),c=uA(a,1,!0,c,f??null,m,b,C,M,j,U,re),c.context=dA(null),f=c.current,m=er(),m=uo(m),b=hs(m),b.callback=null,ps(f,b,m),f=m,c.current.lanes=f,Zr(c,f),li(c),a[Jr]=c.current,Ay(a),new zf(c)},Qc.version="19.1.1",Qc}var _A;function tF(){if(_A)return Wy.exports;_A=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Wy.exports=eF(),Wy.exports}var nF=tF(),rF=l5();const c5=cd(rF);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Ou(){return Ou=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ou.apply(this,arguments)}var Fs;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Fs||(Fs={}));const DA="popstate";function iF(e){e===void 0&&(e={});function t(i,s){let{pathname:o="/",search:l="",hash:u=""}=ma(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),xS("",{pathname:o,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let u=i.location.href,d=u.indexOf("#");l=d===-1?u:u.slice(0,d)}return l+"#"+(typeof s=="string"?s:u5(s))}function r(i,s){qC(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return oF(t,n,r,e)}function Jt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function qC(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function sF(){return Math.random().toString(36).substr(2,8)}function RA(e,t){return{usr:e.state,key:e.key,idx:t}}function xS(e,t,n,r){return n===void 0&&(n=null),Ou({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?ma(t):t,{state:n,key:t&&t.key||r||sF()})}function u5(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function ma(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function oF(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l=Fs.Pop,u=null,d=h();d==null&&(d=0,o.replaceState(Ou({},o.state,{idx:d}),""));function h(){return(o.state||{idx:null}).idx}function p(){l=Fs.Pop;let w=h(),E=w==null?null:w-d;d=w,u&&u({action:l,location:S.location,delta:E})}function g(w,E){l=Fs.Push;let N=xS(S.location,w,E);n&&n(N,w),d=h()+1;let k=RA(N,d),T=S.createHref(N);try{o.pushState(k,"",T)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;i.location.assign(T)}s&&u&&u({action:l,location:S.location,delta:1})}function y(w,E){l=Fs.Replace;let N=xS(S.location,w,E);n&&n(N,w),d=h();let k=RA(N,d),T=S.createHref(N);o.replaceState(k,"",T),s&&u&&u({action:l,location:S.location,delta:0})}function x(w){let E=i.location.origin!=="null"?i.location.origin:i.location.href,N=typeof w=="string"?w:u5(w);return N=N.replace(/ $/,"%20"),Jt(E,"No window.location.(origin|href) available to create URL for href: "+N),new URL(N,E)}let S={get action(){return l},get location(){return e(i,o)},listen(w){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(DA,p),u=w,()=>{i.removeEventListener(DA,p),u=null}},createHref(w){return t(i,w)},createURL:x,encodeLocation(w){let E=x(w);return{pathname:E.pathname,search:E.search,hash:E.hash}},push:g,replace:y,go(w){return o.go(w)}};return S}var OA;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(OA||(OA={}));function aF(e,t,n){return n===void 0&&(n="/"),lF(e,t,n)}function lF(e,t,n,r){let i=typeof t=="string"?ma(t):t,s=h5(i.pathname||"/",n);if(s==null)return null;let o=d5(e);cF(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let d=wF(s);l=vF(o[u],d)}return l}function d5(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,l)=>{let u={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(Jt(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=Wo([r,u.relativePath]),h=n.concat(u);s.children&&s.children.length>0&&(Jt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),d5(s.children,t,h,d)),!(s.path==null&&!s.index)&&t.push({path:d,score:gF(d,s.index),routesMeta:h})};return e.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let u of f5(s.path))i(s,o,u)}),t}function f5(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=f5(r.join("/")),l=[];return l.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&l.push(...o),l.map(u=>e.startsWith("/")&&u===""?"/":u)}function cF(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:yF(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const uF=/^:[\w-]+$/,dF=3,fF=2,hF=1,pF=10,mF=-2,jA=e=>e==="*";function gF(e,t){let n=e.split("/"),r=n.length;return n.some(jA)&&(r+=mF),t&&(r+=fF),n.filter(i=>!jA(i)).reduce((i,s)=>i+(uF.test(s)?dF:s===""?hF:pF),r)}function yF(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function vF(e,t,n){let{routesMeta:r}=e,i={},s="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],d=l===r.length-1,h=s==="/"?t:t.slice(s.length)||"/",p=bF({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),g=u.route;if(!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:Wo([s,p.pathname]),pathnameBase:NF(Wo([s,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(s=Wo([s,p.pathnameBase]))}return o}function bF(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=xF(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((d,h,p)=>{let{paramName:g,isOptional:y}=h;if(g==="*"){let S=l[p]||"";o=s.slice(0,s.length-S.length).replace(/(.)\/+$/,"$1")}const x=l[p];return y&&!x?d[g]=void 0:d[g]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:o,pattern:e}}function xF(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),qC(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function wF(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return qC(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function h5(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function SF(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?ma(e):e;return{pathname:n?n.startsWith("/")?n:CF(n,t):t,search:AF(r),hash:MF(i)}}function CF(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Jy(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function EF(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function kF(e,t){let n=EF(e);return t?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function TF(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=ma(e):(i=Ou({},e),Jt(!i.pathname||!i.pathname.includes("?"),Jy("?","pathname","search",i)),Jt(!i.pathname||!i.pathname.includes("#"),Jy("#","pathname","hash",i)),Jt(!i.search||!i.search.includes("#"),Jy("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=n;else{let p=t.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}l=p>=0?t[p]:"/"}let u=SF(i,l),d=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}const Wo=e=>e.join("/").replace(/\/\/+/g,"/"),NF=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),AF=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,MF=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function _F(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const p5=["post","put","patch","delete"];new Set(p5);const DF=["get",...p5];new Set(DF);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ju(){return ju=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ju.apply(this,arguments)}const VC=O.createContext(null),RF=O.createContext(null),Vp=O.createContext(null),Hp=O.createContext(null),ga=O.createContext({outlet:null,matches:[],isDataRoute:!1}),m5=O.createContext(null);function Fp(){return O.useContext(Hp)!=null}function g5(){return Fp()||Jt(!1),O.useContext(Hp).location}function y5(e){O.useContext(Vp).static||O.useLayoutEffect(e)}function dd(){let{isDataRoute:e}=O.useContext(ga);return e?GF():OF()}function OF(){Fp()||Jt(!1);let e=O.useContext(VC),{basename:t,future:n,navigator:r}=O.useContext(Vp),{matches:i}=O.useContext(ga),{pathname:s}=g5(),o=JSON.stringify(kF(i,n.v7_relativeSplatPath)),l=O.useRef(!1);return y5(()=>{l.current=!0}),O.useCallback(function(d,h){if(h===void 0&&(h={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let p=TF(d,JSON.parse(o),s,h.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:Wo([t,p.pathname])),(h.replace?r.replace:r.push)(p,h.state,h)},[t,r,o,s,e])}function jF(){let{matches:e}=O.useContext(ga),t=e[e.length-1];return t?t.params:{}}function LF(e,t){return PF(e,t)}function PF(e,t,n,r){Fp()||Jt(!1);let{navigator:i}=O.useContext(Vp),{matches:s}=O.useContext(ga),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=g5(),h;if(t){var p;let w=typeof t=="string"?ma(t):t;u==="/"||(p=w.pathname)!=null&&p.startsWith(u)||Jt(!1),h=w}else h=d;let g=h.pathname||"/",y=g;if(u!=="/"){let w=u.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(w.length).join("/")}let x=aF(e,{pathname:y}),S=VF(x&&x.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:Wo([u,i.encodeLocation?i.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?u:Wo([u,i.encodeLocation?i.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),s,n,r);return t&&S?O.createElement(Hp.Provider,{value:{location:ju({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Fs.Pop}},S):S}function BF(){let e=$F(),t=_F(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return O.createElement(O.Fragment,null,O.createElement("h2",null,"Unexpected Application Error!"),O.createElement("h3",{style:{fontStyle:"italic"}},t),n?O.createElement("pre",{style:i},n):null,null)}const IF=O.createElement(BF,null);class zF extends O.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?O.createElement(ga.Provider,{value:this.props.routeContext},O.createElement(m5.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function qF(e){let{routeContext:t,match:n,children:r}=e,i=O.useContext(VC);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),O.createElement(ga.Provider,{value:t},r)}function VF(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if(!n)return null;if(n.errors)e=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,l=(i=n)==null?void 0:i.errors;if(l!=null){let h=o.findIndex(p=>p.route.id&&l?.[p.route.id]!==void 0);h>=0||Jt(!1),o=o.slice(0,Math.min(o.length,h+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let p=o[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=h),p.route.id){let{loaderData:g,errors:y}=n,x=p.route.loader&&g[p.route.id]===void 0&&(!y||y[p.route.id]===void 0);if(p.route.lazy||x){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((h,p,g)=>{let y,x=!1,S=null,w=null;n&&(y=l&&p.route.id?l[p.route.id]:void 0,S=p.route.errorElement||IF,u&&(d<0&&g===0?(KF("route-fallback"),x=!0,w=null):d===g&&(x=!0,w=p.route.hydrateFallbackElement||null)));let E=t.concat(o.slice(0,g+1)),N=()=>{let k;return y?k=S:x?k=w:p.route.Component?k=O.createElement(p.route.Component,null):p.route.element?k=p.route.element:k=h,O.createElement(qF,{match:p,routeContext:{outlet:h,matches:E,isDataRoute:n!=null},children:k})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?O.createElement(zF,{location:n.location,revalidation:n.revalidation,component:S,error:y,children:N(),routeContext:{outlet:null,matches:E,isDataRoute:!0}}):N()},null)}var v5=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(v5||{}),b5=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(b5||{});function HF(e){let t=O.useContext(VC);return t||Jt(!1),t}function FF(e){let t=O.useContext(RF);return t||Jt(!1),t}function UF(e){let t=O.useContext(ga);return t||Jt(!1),t}function x5(e){let t=UF(),n=t.matches[t.matches.length-1];return n.route.id||Jt(!1),n.route.id}function $F(){var e;let t=O.useContext(m5),n=FF(),r=x5();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function GF(){let{router:e}=HF(v5.UseNavigateStable),t=x5(b5.UseNavigateStable),n=O.useRef(!1);return y5(()=>{n.current=!0}),O.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,ju({fromRouteId:t},s)))},[e,t])}const LA={};function KF(e,t,n){LA[e]||(LA[e]=!0)}function YF(e,t){e?.v7_startTransition,e?.v7_relativeSplatPath}function Bo(e){Jt(!1)}function WF(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Fs.Pop,navigator:s,static:o=!1,future:l}=e;Fp()&&Jt(!1);let u=t.replace(/^\/*/,"/"),d=O.useMemo(()=>({basename:u,navigator:s,static:o,future:ju({v7_relativeSplatPath:!1},l)}),[u,l,s,o]);typeof r=="string"&&(r=ma(r));let{pathname:h="/",search:p="",hash:g="",state:y=null,key:x="default"}=r,S=O.useMemo(()=>{let w=h5(h,u);return w==null?null:{location:{pathname:w,search:p,hash:g,state:y,key:x},navigationType:i}},[u,h,p,g,y,x,i]);return S==null?null:O.createElement(Vp.Provider,{value:d},O.createElement(Hp.Provider,{children:n,value:S}))}function XF(e){let{children:t,location:n}=e;return LF(wS(t),n)}new Promise(()=>{});function wS(e,t){t===void 0&&(t=[]);let n=[];return O.Children.forEach(e,(r,i)=>{if(!O.isValidElement(r))return;let s=[...t,i];if(r.type===O.Fragment){n.push.apply(n,wS(r.props.children,s));return}r.type!==Bo&&Jt(!1),!r.props.index||!r.props.children||Jt(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=wS(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const ZF="6";try{window.__reactRouterVersion=ZF}catch{}const QF="startTransition",PA=XH[QF];function JF(e){let{basename:t,children:n,future:r,window:i}=e,s=O.useRef();s.current==null&&(s.current=iF({window:i,v5Compat:!0}));let o=s.current,[l,u]=O.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},h=O.useCallback(p=>{d&&PA?PA(()=>u(p)):u(p)},[u,d]);return O.useLayoutEffect(()=>o.listen(h),[o,h]),O.useEffect(()=>YF(r),[r]),O.createElement(WF,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}var BA;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(BA||(BA={}));var IA;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(IA||(IA={}));var w5={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},zA=Pe.createContext&&Pe.createContext(w5),eU=["attr","size","title"];function tU(e,t){if(e==null)return{};var n=nU(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function nU(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function Mh(){return Mh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Mh.apply(this,arguments)}function qA(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function _h(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?qA(Object(n),!0).forEach(function(r){rU(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):qA(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function rU(e,t,n){return t=iU(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function iU(e){var t=sU(e,"string");return typeof t=="symbol"?t:t+""}function sU(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function S5(e){return e&&e.map((t,n)=>Pe.createElement(t.tag,_h({key:n},t.attr),S5(t.child)))}function ht(e){return t=>Pe.createElement(oU,Mh({attr:_h({},e.attr)},t),S5(e.child))}function oU(e){var t=n=>{var{attr:r,size:i,title:s}=e,o=tU(e,eU),l=i||n.size||"1em",u;return n.className&&(u=n.className),e.className&&(u=(u?u+" ":"")+e.className),Pe.createElement("svg",Mh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:u,style:_h(_h({color:e.color||n.color},n.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&Pe.createElement("title",null,s),e.children)};return zA!==void 0?Pe.createElement(zA.Consumer,null,n=>t(n)):t(w5)}function aU(e){return ht({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},child:[]}]})(e)}function lU(e){return ht({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"5"},child:[]},{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"3"},child:[]},{tag:"line",attr:{x1:"12",y1:"21",x2:"12",y2:"23"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"},child:[]},{tag:"line",attr:{x1:"1",y1:"12",x2:"3",y2:"12"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"23",y2:"12"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"},child:[]}]})(e)}function cU(e){return ht({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 9.9-1"},child:[]}]})(e)}const uU=e=>e==="system"||e==="light"||e==="dark";function ya(){const[e,t]=O.useState(()=>{if(typeof window>"u")return"light";const s=localStorage.getItem("theme");return uU(s)?s:"light"}),[n,r]=O.useState(()=>typeof window>"u"?!1:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches);return O.useLayoutEffect(()=>{const s=document.documentElement;(l=>{l==="system"?s.classList.toggle("dark",n):s.classList.toggle("dark",l==="dark")})(e);try{localStorage.setItem("theme",e)}catch{}},[e,n]),O.useEffect(()=>{if(typeof window>"u")return;const s=window.matchMedia("(prefers-color-scheme: dark)"),o=l=>{r(l.matches)};return s.addEventListener("change",o),()=>s.removeEventListener("change",o)},[]),{theme:e,setTheme:t,flowColorMode:e==="system"?n?"dark":"light":e}}const fd=()=>{const{theme:e,setTheme:t}=ya();return v.jsx("button",{onClick:()=>t(e==="light"?"dark":"light"),className:"p-2 rounded-full bg-[var(--bg)] text-[var(--text)] cursor-pointer",children:e==="light"?v.jsx(aU,{size:18}):v.jsx(lU,{size:18})})},nr={title:"Diagrammatic  Interactive System Design Playground | Learn Architecture Design",description:"Master system design with Diagrammatic - an interactive playground featuring 45+ components, AI assessment, and real-world practice problems. Free system architecture tool for students, professionals, and educators.",keywords:"system design, architecture diagram, system design interview, software architecture, distributed systems, scalable architecture",image:"https://satya00089.github.io/diagrammatic/logo.png",url:"https://satya00089.github.io/diagrammatic/"},hd=({title:e,description:t,keywords:n,image:r,url:i,type:s="website"})=>(O.useEffect(()=>{document.title=e||nr.title;const o=(u,d,h=!1)=>{const p=h?"property":"name";let g=document.querySelector(`meta[${p}="${u}"]`);g?g.content=d:(g=document.createElement("meta"),g.setAttribute(p,u),g.content=d,document.head.appendChild(g))};o("description",t||nr.description),o("keywords",n||nr.keywords),o("og:title",e||nr.title,!0),o("og:description",t||nr.description,!0),o("og:image",r||nr.image,!0),o("og:url",i||nr.url,!0),o("og:type",s,!0),o("twitter:title",e||nr.title),o("twitter:description",t||nr.description),o("twitter:image",r||nr.image),o("twitter:url",i||nr.url);let l=document.querySelector('link[rel="canonical"]');l?l.href=i||nr.url:(l=document.createElement("link"),l.rel="canonical",l.href=i||nr.url,document.head.appendChild(l))},[e,t,n,r,i,s]),null);class su extends Error{}su.prototype.name="InvalidTokenError";function dU(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,n)=>{let r=n.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function fU(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return dU(t)}catch{return atob(t)}}function hU(e,t){if(typeof e!="string")throw new su("Invalid token specified: must be a string");t||(t={});const n=t.header===!0?0:1,r=e.split(".")[n];if(typeof r!="string")throw new su(`Invalid token specified: missing part #${n+1}`);let i;try{i=fU(r)}catch(s){throw new su(`Invalid token specified: invalid base64 for part #${n+1} (${s.message})`)}try{return JSON.parse(i)}catch(s){throw new su(`Invalid token specified: invalid json for part #${n+1} (${s.message})`)}}const zi="https://diagrammatic-api.vercel.app";class pU{getAuthHeaders(){const t=localStorage.getItem("auth_token");return{"Content-Type":"application/json",...t?{Authorization:`Bearer ${t}`}:{}}}async login(t){const n=await fetch(`${zi}/api/v1/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const r=await n.json().catch(()=>({message:"Login failed"}));throw new Error(r.message||"Login failed")}return n.json()}async signup(t){const n=await fetch(`${zi}/api/v1/auth/signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const r=await n.json().catch(()=>({message:"Signup failed"}));throw new Error(r.message||"Signup failed")}return n.json()}async googleLogin(t){const n=await fetch(`${zi}/api/v1/auth/google`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({credential:t})});if(!n.ok){const r=await n.json().catch(()=>({message:"Google login failed"}));throw new Error(r.message||"Google login failed")}return n.json()}async getCurrentUser(){const t=await fetch(`${zi}/api/v1/auth/me`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch user");return t.json()}async saveDiagram(t){const n=await fetch(`${zi}/api/v1/diagrams`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!n.ok){const r=await n.json().catch(()=>({message:"Failed to Save Design"}));throw new Error(r.message||"Failed to Save Design")}return n.json()}async updateDiagram(t,n){const r=await fetch(`${zi}/api/v1/diagrams/${t}`,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify(n)});if(!r.ok){const i=await r.json().catch(()=>({message:"Failed to update diagram"}));throw new Error(i.message||"Failed to update diagram")}return r.json()}async getUserDiagrams(){const t=await fetch(`${zi}/api/v1/diagrams`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch diagrams");return t.json()}async getDiagram(t){const n=await fetch(`${zi}/api/v1/diagrams/${t}`,{headers:this.getAuthHeaders()});if(!n.ok)throw new Error("Failed to fetch diagram");return n.json()}async deleteDiagram(t){if(!(await fetch(`${zi}/api/v1/diagrams/${t}`,{method:"DELETE",headers:this.getAuthHeaders()})).ok)throw new Error("Failed to delete diagram")}}const sr=new pU,C5=O.createContext(void 0),mU=({children:e})=>{const[t,n]=O.useState({user:null,token:null,isAuthenticated:!1,isLoading:!0}),r=O.useCallback(h=>{try{const p=hU(h);return p.exp?p.exp*1e3<Date.now():!1}catch{return!0}},[]),i=O.useCallback(()=>{localStorage.removeItem("auth_token"),n({user:null,token:null,isAuthenticated:!1,isLoading:!1})},[]);O.useEffect(()=>{(async()=>{const p=localStorage.getItem("auth_token");if(!p){n(g=>({...g,isLoading:!1}));return}if(r(p)){localStorage.removeItem("auth_token"),n(g=>({...g,isLoading:!1}));return}try{const g=await sr.getCurrentUser();n({user:g,token:p,isAuthenticated:!0,isLoading:!1})}catch(g){console.error("Failed to fetch user:",g),localStorage.removeItem("auth_token"),n(y=>({...y,isLoading:!1}))}})()},[r]);const s=O.useCallback(async h=>{const{user:p,token:g}=await sr.login(h);localStorage.setItem("auth_token",g),n({user:p,token:g,isAuthenticated:!0,isLoading:!1})},[]),o=O.useCallback(async h=>{const{user:p,token:g}=await sr.signup(h);localStorage.setItem("auth_token",g),n({user:p,token:g,isAuthenticated:!0,isLoading:!1})},[]),l=O.useCallback(async h=>{const{user:p,token:g}=await sr.googleLogin(h);localStorage.setItem("auth_token",g),n({user:p,token:g,isAuthenticated:!0,isLoading:!1})},[]),u=O.useCallback(async()=>{if(t.token)try{const h=await sr.getCurrentUser();n(p=>({...p,user:h}))}catch(h){console.error("Failed to refresh user:",h),i()}},[t.token,i]),d=O.useMemo(()=>({...t,login:s,signup:o,googleLogin:l,logout:i,refreshUser:u}),[t,s,o,l,i,u]);return v.jsx(C5.Provider,{value:d,children:e})},Up=()=>{const e=O.useContext(C5);if(!e)throw new Error("useAuth must be used within AuthProvider");return e},HC=O.createContext({});function FC(e){const t=O.useRef(null);return t.current===null&&(t.current=e()),t.current}const UC=typeof window<"u",E5=UC?O.useLayoutEffect:O.useEffect,$p=O.createContext(null);function $C(e,t){e.indexOf(t)===-1&&e.push(t)}function GC(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const Xi=(e,t,n)=>n>t?t:n<e?e:n;let KC=()=>{};const Zi={},k5=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function T5(e){return typeof e=="object"&&e!==null}const N5=e=>/^0[^.\s]+$/u.test(e);function YC(e){let t;return()=>(t===void 0&&(t=e()),t)}const Mr=e=>e,gU=(e,t)=>n=>t(e(n)),pd=(...e)=>e.reduce(gU),Lu=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class WC{constructor(){this.subscriptions=[]}add(t){return $C(this.subscriptions,t),()=>GC(this.subscriptions,t)}notify(t,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const mi=e=>e*1e3,Nr=e=>e/1e3;function A5(e,t){return t?e*(1e3/t):0}const M5=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,yU=1e-7,vU=12;function bU(e,t,n,r,i){let s,o,l=0;do o=t+(n-t)/2,s=M5(o,r,i)-e,s>0?n=o:t=o;while(Math.abs(s)>yU&&++l<vU);return o}function md(e,t,n,r){if(e===t&&n===r)return Mr;const i=s=>bU(s,0,1,e,n);return s=>s===0||s===1?s:M5(i(s),t,r)}const _5=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,D5=e=>t=>1-e(1-t),R5=md(.33,1.53,.69,.99),XC=D5(R5),O5=_5(XC),j5=e=>(e*=2)<1?.5*XC(e):.5*(2-Math.pow(2,-10*(e-1))),ZC=e=>1-Math.sin(Math.acos(e)),L5=D5(ZC),P5=_5(ZC),xU=md(.42,0,1,1),wU=md(0,0,.58,1),B5=md(.42,0,.58,1),SU=e=>Array.isArray(e)&&typeof e[0]!="number",I5=e=>Array.isArray(e)&&typeof e[0]=="number",CU={linear:Mr,easeIn:xU,easeInOut:B5,easeOut:wU,circIn:ZC,circInOut:P5,circOut:L5,backIn:XC,backInOut:O5,backOut:R5,anticipate:j5},EU=e=>typeof e=="string",VA=e=>{if(I5(e)){KC(e.length===4);const[t,n,r,i]=e;return md(t,n,r,i)}else if(EU(e))return CU[e];return e},Hf=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function kU(e,t){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function u(h){o.has(h)&&(d.schedule(h),e()),h(l)}const d={schedule:(h,p=!1,g=!1)=>{const x=g&&i?n:r;return p&&o.add(h),x.has(h)||x.add(h),h},cancel:h=>{r.delete(h),o.delete(h)},process:h=>{if(l=h,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(u),n.clear(),i=!1,s&&(s=!1,d.process(h))}};return d}const TU=40;function z5(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=Hf.reduce((k,T)=>(k[T]=kU(s),k),{}),{setup:l,read:u,resolveKeyframes:d,preUpdate:h,update:p,preRender:g,render:y,postRender:x}=o,S=()=>{const k=Zi.useManualTiming?i.timestamp:performance.now();n=!1,Zi.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(k-i.timestamp,TU),1)),i.timestamp=k,i.isProcessing=!0,l.process(i),u.process(i),d.process(i),h.process(i),p.process(i),g.process(i),y.process(i),x.process(i),i.isProcessing=!1,n&&t&&(r=!1,e(S))},w=()=>{n=!0,r=!0,i.isProcessing||e(S)};return{schedule:Hf.reduce((k,T)=>{const A=o[T];return k[T]=(_,R=!1,D=!1)=>(n||w(),A.schedule(_,R,D)),k},{}),cancel:k=>{for(let T=0;T<Hf.length;T++)o[Hf[T]].cancel(k)},state:i,steps:o}}const{schedule:gt,cancel:eo,state:gn,steps:e0}=z5(typeof requestAnimationFrame<"u"?requestAnimationFrame:Mr,!0);let ph;function NU(){ph=void 0}const Vn={now:()=>(ph===void 0&&Vn.set(gn.isProcessing||Zi.useManualTiming?gn.timestamp:performance.now()),ph),set:e=>{ph=e,queueMicrotask(NU)}},q5=e=>t=>typeof t=="string"&&t.startsWith(e),QC=q5("--"),AU=q5("var(--"),JC=e=>AU(e)?MU.test(e.split("/*")[0].trim()):!1,MU=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Fl={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},Pu={...Fl,transform:e=>Xi(0,1,e)},Ff={...Fl,default:1},gu=e=>Math.round(e*1e5)/1e5,eE=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function _U(e){return e==null}const DU=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,tE=(e,t)=>n=>!!(typeof n=="string"&&DU.test(n)&&n.startsWith(e)||t&&!_U(n)&&Object.prototype.hasOwnProperty.call(n,t)),V5=(e,t,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,l]=r.match(eE);return{[e]:parseFloat(i),[t]:parseFloat(s),[n]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},RU=e=>Xi(0,255,e),t0={...Fl,transform:e=>Math.round(RU(e))},Ho={test:tE("rgb","red"),parse:V5("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+t0.transform(e)+", "+t0.transform(t)+", "+t0.transform(n)+", "+gu(Pu.transform(r))+")"};function OU(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const SS={test:tE("#"),parse:OU,transform:Ho.transform},gd=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Ls=gd("deg"),gi=gd("%"),Ie=gd("px"),jU=gd("vh"),LU=gd("vw"),HA={...gi,parse:e=>gi.parse(e)/100,transform:e=>gi.transform(e*100)},yl={test:tE("hsl","hue"),parse:V5("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+gi.transform(gu(t))+", "+gi.transform(gu(n))+", "+gu(Pu.transform(r))+")"},Ft={test:e=>Ho.test(e)||SS.test(e)||yl.test(e),parse:e=>Ho.test(e)?Ho.parse(e):yl.test(e)?yl.parse(e):SS.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Ho.transform(e):yl.transform(e),getAnimatableNone:e=>{const t=Ft.parse(e);return t.alpha=0,Ft.transform(t)}},PU=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function BU(e){return isNaN(e)&&typeof e=="string"&&(e.match(eE)?.length||0)+(e.match(PU)?.length||0)>0}const H5="number",F5="color",IU="var",zU="var(",FA="${}",qU=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Bu(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const l=t.replace(qU,u=>(Ft.test(u)?(r.color.push(s),i.push(F5),n.push(Ft.parse(u))):u.startsWith(zU)?(r.var.push(s),i.push(IU),n.push(u)):(r.number.push(s),i.push(H5),n.push(parseFloat(u))),++s,FA)).split(FA);return{values:n,split:l,indexes:r,types:i}}function U5(e){return Bu(e).values}function $5(e){const{split:t,types:n}=Bu(e),r=t.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=t[o],i[o]!==void 0){const l=n[o];l===H5?s+=gu(i[o]):l===F5?s+=Ft.transform(i[o]):s+=i[o]}return s}}const VU=e=>typeof e=="number"?0:Ft.test(e)?Ft.getAnimatableNone(e):e;function HU(e){const t=U5(e);return $5(e)(t.map(VU))}const to={test:BU,parse:U5,createTransformer:$5,getAnimatableNone:HU};function n0(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function FU({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let i=0,s=0,o=0;if(!t)i=s=o=n;else{const l=n<.5?n*(1+t):n+t-n*t,u=2*n-l;i=n0(u,l,e+1/3),s=n0(u,l,e),o=n0(u,l,e-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Dh(e,t){return n=>n>0?t:e}const St=(e,t,n)=>e+(t-e)*n,r0=(e,t,n)=>{const r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},UU=[SS,Ho,yl],$U=e=>UU.find(t=>t.test(e));function UA(e){const t=$U(e);if(!t)return!1;let n=t.parse(e);return t===yl&&(n=FU(n)),n}const $A=(e,t)=>{const n=UA(e),r=UA(t);if(!n||!r)return Dh(e,t);const i={...n};return s=>(i.red=r0(n.red,r.red,s),i.green=r0(n.green,r.green,s),i.blue=r0(n.blue,r.blue,s),i.alpha=St(n.alpha,r.alpha,s),Ho.transform(i))},CS=new Set(["none","hidden"]);function GU(e,t){return CS.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function KU(e,t){return n=>St(e,t,n)}function nE(e){return typeof e=="number"?KU:typeof e=="string"?JC(e)?Dh:Ft.test(e)?$A:XU:Array.isArray(e)?G5:typeof e=="object"?Ft.test(e)?$A:YU:Dh}function G5(e,t){const n=[...e],r=n.length,i=e.map((s,o)=>nE(s)(s,t[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function YU(e,t){const n={...e,...t},r={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(r[i]=nE(e[i])(e[i],t[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function WU(e,t){const n=[],r={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const s=t.types[i],o=e.indexes[s][r[s]],l=e.values[o]??0;n[i]=l,r[s]++}return n}const XU=(e,t)=>{const n=to.createTransformer(t),r=Bu(e),i=Bu(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?CS.has(e)&&!i.values.length||CS.has(t)&&!r.values.length?GU(e,t):pd(G5(WU(r,i),i.values),n):Dh(e,t)};function K5(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?St(e,t,n):nE(e)(e,t)}const ZU=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>gt.update(t,n),stop:()=>eo(t),now:()=>gn.isProcessing?gn.timestamp:Vn.now()}},Y5=(e,t,n=10)=>{let r="";const i=Math.max(Math.round(t/n),2);for(let s=0;s<i;s++)r+=Math.round(e(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Rh=2e4;function rE(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Rh;)t+=n,r=e.next(t);return t>=Rh?1/0:t}function QU(e,t=100,n){const r=n({...e,keyframes:[0,t]}),i=Math.min(rE(r),Rh);return{type:"keyframes",ease:s=>r.next(i*s).value/t,duration:Nr(i)}}const JU=5;function W5(e,t,n){const r=Math.max(t-JU,0);return A5(n-e(r),t-r)}const At={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},i0=.001;function e9({duration:e=At.duration,bounce:t=At.bounce,velocity:n=At.velocity,mass:r=At.mass}){let i,s,o=1-t;o=Xi(At.minDamping,At.maxDamping,o),e=Xi(At.minDuration,At.maxDuration,Nr(e)),o<1?(i=d=>{const h=d*o,p=h*e,g=h-n,y=ES(d,o),x=Math.exp(-p);return i0-g/y*x},s=d=>{const p=d*o*e,g=p*n+n,y=Math.pow(o,2)*Math.pow(d,2)*e,x=Math.exp(-p),S=ES(Math.pow(d,2),o);return(-i(d)+i0>0?-1:1)*((g-y)*x)/S}):(i=d=>{const h=Math.exp(-d*e),p=(d-n)*e+1;return-i0+h*p},s=d=>{const h=Math.exp(-d*e),p=(n-d)*(e*e);return h*p});const l=5/e,u=n9(i,s,l);if(e=mi(e),isNaN(u))return{stiffness:At.stiffness,damping:At.damping,duration:e};{const d=Math.pow(u,2)*r;return{stiffness:d,damping:o*2*Math.sqrt(r*d),duration:e}}}const t9=12;function n9(e,t,n){let r=n;for(let i=1;i<t9;i++)r=r-e(r)/t(r);return r}function ES(e,t){return e*Math.sqrt(1-t*t)}const r9=["duration","bounce"],i9=["stiffness","damping","mass"];function GA(e,t){return t.some(n=>e[n]!==void 0)}function s9(e){let t={velocity:At.velocity,stiffness:At.stiffness,damping:At.damping,mass:At.mass,isResolvedFromDuration:!1,...e};if(!GA(e,i9)&&GA(e,r9))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*Xi(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:At.mass,stiffness:i,damping:s}}else{const n=e9(e);t={...t,...n,mass:At.mass},t.isResolvedFromDuration=!0}return t}function Oh(e=At.visualDuration,t=At.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],l={done:!1,value:s},{stiffness:u,damping:d,mass:h,duration:p,velocity:g,isResolvedFromDuration:y}=s9({...n,velocity:-Nr(n.velocity||0)}),x=g||0,S=d/(2*Math.sqrt(u*h)),w=o-s,E=Nr(Math.sqrt(u/h)),N=Math.abs(w)<5;r||(r=N?At.restSpeed.granular:At.restSpeed.default),i||(i=N?At.restDelta.granular:At.restDelta.default);let k;if(S<1){const A=ES(E,S);k=_=>{const R=Math.exp(-S*E*_);return o-R*((x+S*E*w)/A*Math.sin(A*_)+w*Math.cos(A*_))}}else if(S===1)k=A=>o-Math.exp(-E*A)*(w+(x+E*w)*A);else{const A=E*Math.sqrt(S*S-1);k=_=>{const R=Math.exp(-S*E*_),D=Math.min(A*_,300);return o-R*((x+S*E*w)*Math.sinh(D)+A*w*Math.cosh(D))/A}}const T={calculatedDuration:y&&p||null,next:A=>{const _=k(A);if(y)l.done=A>=p;else{let R=A===0?x:0;S<1&&(R=A===0?mi(x):W5(k,A,_));const D=Math.abs(R)<=r,B=Math.abs(o-_)<=i;l.done=D&&B}return l.value=l.done?o:_,l},toString:()=>{const A=Math.min(rE(T),Rh),_=Y5(R=>T.next(A*R).value,A,30);return A+"ms "+_},toTransition:()=>{}};return T}Oh.applyToOptions=e=>{const t=QU(e,100,Oh);return e.ease=t.ease,e.duration=mi(t.duration),e.type="keyframes",e};function kS({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:l,max:u,restDelta:d=.5,restSpeed:h}){const p=e[0],g={done:!1,value:p},y=D=>l!==void 0&&D<l||u!==void 0&&D>u,x=D=>l===void 0?u:u===void 0||Math.abs(l-D)<Math.abs(u-D)?l:u;let S=n*t;const w=p+S,E=o===void 0?w:o(w);E!==w&&(S=E-p);const N=D=>-S*Math.exp(-D/r),k=D=>E+N(D),T=D=>{const B=N(D),$=k(D);g.done=Math.abs(B)<=d,g.value=g.done?E:$};let A,_;const R=D=>{y(g.value)&&(A=D,_=Oh({keyframes:[g.value,x(g.value)],velocity:W5(k,D,g.value),damping:i,stiffness:s,restDelta:d,restSpeed:h}))};return R(0),{calculatedDuration:null,next:D=>{let B=!1;return!_&&A===void 0&&(B=!0,T(D),R(D)),A!==void 0&&D>=A?_.next(D-A):(!B&&T(D),g)}}}function o9(e,t,n){const r=[],i=n||Zi.mix||K5,s=e.length-1;for(let o=0;o<s;o++){let l=i(e[o],e[o+1]);if(t){const u=Array.isArray(t)?t[o]||Mr:t;l=pd(u,l)}r.push(l)}return r}function a9(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const s=e.length;if(KC(s===t.length),s===1)return()=>t[0];if(s===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=o9(t,r,i),u=l.length,d=h=>{if(o&&h<e[0])return t[0];let p=0;if(u>1)for(;p<e.length-2&&!(h<e[p+1]);p++);const g=Lu(e[p],e[p+1],h);return l[p](g)};return n?h=>d(Xi(e[0],e[s-1],h)):d}function l9(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=Lu(0,t,r);e.push(St(n,1,i))}}function c9(e){const t=[0];return l9(t,e.length-1),t}function u9(e,t){return e.map(n=>n*t)}function d9(e,t){return e.map(()=>t||B5).splice(0,e.length-1)}function yu({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=SU(r)?r.map(VA):VA(r),s={done:!1,value:t[0]},o=u9(n&&n.length===t.length?n:c9(t),e),l=a9(o,t,{ease:Array.isArray(i)?i:d9(t,i)});return{calculatedDuration:e,next:u=>(s.value=l(u),s.done=u>=e,s)}}const f9=e=>e!==null;function iE(e,{repeat:t,repeatType:n="loop"},r,i=1){const s=e.filter(f9),l=i<0||t&&n!=="loop"&&t%2===1?0:s.length-1;return!l||r===void 0?s[l]:r}const h9={decay:kS,inertia:kS,tween:yu,keyframes:yu,spring:Oh};function X5(e){typeof e.type=="string"&&(e.type=h9[e.type])}class sE{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const p9=e=>e/100;class oE extends sE{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Vn.now()&&this.tick(Vn.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;X5(t);const{type:n=yu,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=t;let{keyframes:l}=t;const u=n||yu;u!==yu&&typeof l[0]!="number"&&(this.mixKeyframes=pd(p9,K5(l[0],l[1])),l=[0,100]);const d=u({...t,keyframes:l});s==="mirror"&&(this.mirroredGenerator=u({...t,keyframes:[...l].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=rE(d));const{calculatedDuration:h}=d;this.calculatedDuration=h,this.resolvedDuration=h+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=d}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:u}=this;if(this.startTime===null)return r.next(0);const{delay:d=0,keyframes:h,repeat:p,repeatType:g,repeatDelay:y,type:x,onUpdate:S,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-i/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const E=this.currentTime-d*(this.playbackSpeed>=0?1:-1),N=this.playbackSpeed>=0?E<0:E>i;this.currentTime=Math.max(E,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let k=this.currentTime,T=r;if(p){const D=Math.min(this.currentTime,i)/l;let B=Math.floor(D),$=D%1;!$&&D>=1&&($=1),$===1&&B--,B=Math.min(B,p+1),!!(B%2)&&(g==="reverse"?($=1-$,y&&($-=y/l)):g==="mirror"&&(T=o)),k=Xi(0,1,$)*l}const A=N?{done:!1,value:h[0]}:T.next(k);s&&(A.value=s(A.value));let{done:_}=A;!N&&u!==null&&(_=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&_);return R&&x!==kS&&(A.value=iE(h,this.options,w,this.speed)),S&&S(A.value),R&&this.finish(),A}then(t,n){return this.finished.then(t,n)}get duration(){return Nr(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Nr(t)}get time(){return Nr(this.currentTime)}set time(t){t=mi(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Vn.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=Nr(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=ZU,startTime:n}=this.options;this.driver||(this.driver=t(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Vn.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function m9(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Fo=e=>e*180/Math.PI,TS=e=>{const t=Fo(Math.atan2(e[1],e[0]));return NS(t)},g9={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:TS,rotateZ:TS,skewX:e=>Fo(Math.atan(e[1])),skewY:e=>Fo(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},NS=e=>(e=e%360,e<0&&(e+=360),e),KA=TS,YA=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),WA=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),y9={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:YA,scaleY:WA,scale:e=>(YA(e)+WA(e))/2,rotateX:e=>NS(Fo(Math.atan2(e[6],e[5]))),rotateY:e=>NS(Fo(Math.atan2(-e[2],e[0]))),rotateZ:KA,rotate:KA,skewX:e=>Fo(Math.atan(e[4])),skewY:e=>Fo(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function AS(e){return e.includes("scale")?1:0}function MS(e,t){if(!e||e==="none")return AS(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=y9,i=n;else{const l=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=g9,i=l}if(!i)return AS(t);const s=r[t],o=i[1].split(",").map(b9);return typeof s=="function"?s(o):o[s]}const v9=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return MS(n,t)};function b9(e){return parseFloat(e.trim())}const Ul=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],$l=new Set(Ul),XA=e=>e===Fl||e===Ie,x9=new Set(["x","y","z"]),w9=Ul.filter(e=>!x9.has(e));function S9(e){const t=[];return w9.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const Xo={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>MS(t,"x"),y:(e,{transform:t})=>MS(t,"y")};Xo.translateX=Xo.x;Xo.translateY=Xo.y;const Zo=new Set;let _S=!1,DS=!1,RS=!1;function Z5(){if(DS){const e=Array.from(Zo).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const i=S9(r);i.length&&(n.set(r,i),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{r.getValue(s)?.set(o)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}DS=!1,_S=!1,Zo.forEach(e=>e.complete(RS)),Zo.clear()}function Q5(){Zo.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(DS=!0)})}function C9(){RS=!0,Q5(),Z5(),RS=!1}class aE{constructor(t,n,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Zo.add(this),_S||(_S=!0,gt.read(Q5),gt.resolveKeyframes(Z5))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:i}=this;if(t[0]===null){const s=i?.get(),o=t[t.length-1];if(s!==void 0)t[0]=s;else if(r&&n){const l=r.readValue(n,o);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=o),i&&s===void 0&&i.set(t[0])}m9(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Zo.delete(this)}cancel(){this.state==="scheduled"&&(Zo.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const E9=e=>e.startsWith("--");function k9(e,t,n){E9(t)?e.style.setProperty(t,n):e.style[t]=n}const T9=YC(()=>window.ScrollTimeline!==void 0),N9={};function A9(e,t){const n=YC(e);return()=>N9[t]??n()}const J5=A9(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),ou=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,ZA={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:ou([0,.65,.55,1]),circOut:ou([.55,0,1,.45]),backIn:ou([.31,.01,.66,-.59]),backOut:ou([.33,1.53,.69,.99])};function eP(e,t){if(e)return typeof e=="function"?J5()?Y5(e,t):"ease-out":I5(e)?ou(e):Array.isArray(e)?e.map(n=>eP(n,t)||ZA.easeOut):ZA[e]}function M9(e,t,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:l="easeOut",times:u}={},d=void 0){const h={[t]:n};u&&(h.offset=u);const p=eP(l,i);Array.isArray(p)&&(h.easing=p);const g={delay:r,duration:i,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return d&&(g.pseudoElement=d),e.animate(h,g)}function tP(e){return typeof e=="function"&&"applyToOptions"in e}function _9({type:e,...t}){return tP(e)&&J5()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class D9 extends sE{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:l,onComplete:u}=t;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=t,KC(typeof t.type!="string");const d=_9(t);this.animation=M9(n,r,i,d,s),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const h=iE(i,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(h):k9(n,r,h),this.animation.cancel()}u?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return Nr(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+Nr(t)}get time(){return Nr(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=mi(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&T9()?(this.animation.timeline=t,Mr):n(this)}}const nP={anticipate:j5,backInOut:O5,circInOut:P5};function R9(e){return e in nP}function O9(e){typeof e.ease=="string"&&R9(e.ease)&&(e.ease=nP[e.ease])}const QA=10;class j9 extends D9{constructor(t){O9(t),X5(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const l=new oE({...o,autoplay:!1}),u=mi(this.finishedTime??this.time);n.setWithVelocity(l.sample(u-QA).value,l.sample(u).value,QA),l.stop()}}const JA=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(to.test(e)||e==="0")&&!e.startsWith("url("));function L9(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function P9(e,t,n,r){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const s=e[e.length-1],o=JA(i,t),l=JA(s,t);return!o||!l?!1:L9(e)||(n==="spring"||tP(n))&&r}function OS(e){e.duration=0,e.type="keyframes"}const B9=new Set(["opacity","clipPath","filter","transform"]),I9=YC(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function z9(e){const{motionValue:t,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:d}=t.owner.getProps();return I9()&&n&&B9.has(n)&&(n!=="transform"||!d)&&!u&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const q9=40;class V9 extends sE{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:l,name:u,motionValue:d,element:h,...p}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Vn.now();const g={autoplay:t,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:u,motionValue:d,element:h,...p},y=h?.KeyframeResolver||aE;this.keyframeResolver=new y(l,(x,S,w)=>this.onKeyframesResolved(x,S,g,!w),u,d,h),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,n,r,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:l,delay:u,isHandoff:d,onUpdate:h}=r;this.resolvedAt=Vn.now(),P9(t,s,o,l)||((Zi.instantAnimations||!u)&&h?.(iE(t,r,n)),t[0]=t[t.length-1],OS(r),r.repeat=0);const g={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>q9?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},y=!d&&z9(g)?new j9({...g,element:g.motionValue.owner.current}):new oE(g);y.finished.then(()=>this.notifyFinished()).catch(Mr),this.pendingTimeline&&(this.stopTimeline=y.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=y}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),C9()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const H9=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function F9(e){const t=H9.exec(e);if(!t)return[,];const[,n,r,i]=t;return[`--${n??r}`,i]}function rP(e,t,n=1){const[r,i]=F9(e);if(!r)return;const s=window.getComputedStyle(t).getPropertyValue(r);if(s){const o=s.trim();return k5(o)?parseFloat(o):o}return JC(i)?rP(i,t,n+1):i}function lE(e,t){return e?.[t]??e?.default??e}const iP=new Set(["width","height","top","left","right","bottom",...Ul]),U9={test:e=>e==="auto",parse:e=>e},sP=e=>t=>t.test(e),oP=[Fl,Ie,gi,Ls,LU,jU,U9],eM=e=>oP.find(sP(e));function $9(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||N5(e):!0}const G9=new Set(["brightness","contrast","saturate","opacity"]);function K9(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(eE)||[];if(!r)return e;const i=n.replace(r,"");let s=G9.has(t)?1:0;return r!==n&&(s*=100),t+"("+s+i+")"}const Y9=/\b([a-z-]*)\(.*?\)/gu,jS={...to,getAnimatableNone:e=>{const t=e.match(Y9);return t?t.map(K9).join(" "):e}},tM={...Fl,transform:Math.round},W9={rotate:Ls,rotateX:Ls,rotateY:Ls,rotateZ:Ls,scale:Ff,scaleX:Ff,scaleY:Ff,scaleZ:Ff,skew:Ls,skewX:Ls,skewY:Ls,distance:Ie,translateX:Ie,translateY:Ie,translateZ:Ie,x:Ie,y:Ie,z:Ie,perspective:Ie,transformPerspective:Ie,opacity:Pu,originX:HA,originY:HA,originZ:Ie},cE={borderWidth:Ie,borderTopWidth:Ie,borderRightWidth:Ie,borderBottomWidth:Ie,borderLeftWidth:Ie,borderRadius:Ie,radius:Ie,borderTopLeftRadius:Ie,borderTopRightRadius:Ie,borderBottomRightRadius:Ie,borderBottomLeftRadius:Ie,width:Ie,maxWidth:Ie,height:Ie,maxHeight:Ie,top:Ie,right:Ie,bottom:Ie,left:Ie,padding:Ie,paddingTop:Ie,paddingRight:Ie,paddingBottom:Ie,paddingLeft:Ie,margin:Ie,marginTop:Ie,marginRight:Ie,marginBottom:Ie,marginLeft:Ie,backgroundPositionX:Ie,backgroundPositionY:Ie,...W9,zIndex:tM,fillOpacity:Pu,strokeOpacity:Pu,numOctaves:tM},X9={...cE,color:Ft,backgroundColor:Ft,outlineColor:Ft,fill:Ft,stroke:Ft,borderColor:Ft,borderTopColor:Ft,borderRightColor:Ft,borderBottomColor:Ft,borderLeftColor:Ft,filter:jS,WebkitFilter:jS},aP=e=>X9[e];function lP(e,t){let n=aP(e);return n!==jS&&(n=to),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const Z9=new Set(["auto","none","0"]);function Q9(e,t,n){let r=0,i;for(;r<e.length&&!i;){const s=e[r];typeof s=="string"&&!Z9.has(s)&&Bu(s).values.length&&(i=e[r]),r++}if(i&&n)for(const s of t)e[s]=lP(n,i)}class J9 extends aE{constructor(t,n,r,i,s){super(t,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<t.length;u++){let d=t[u];if(typeof d=="string"&&(d=d.trim(),JC(d))){const h=rP(d,n.current);h!==void 0&&(t[u]=h),u===t.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!iP.has(r)||t.length!==2)return;const[i,s]=t,o=eM(i),l=eM(s);if(o!==l)if(XA(o)&&XA(l))for(let u=0;u<t.length;u++){const d=t[u];typeof d=="string"&&(t[u]=parseFloat(d))}else Xo[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let i=0;i<t.length;i++)(t[i]===null||$9(t[i]))&&r.push(i);r.length&&Q9(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Xo[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&t.getValue(r,i).jump(i,!1)}measureEndState(){const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const i=t.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=Xo[n](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([l,u])=>{t.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function e7(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const i=n?.[e]??r.querySelectorAll(e);return i?Array.from(i):[]}return Array.from(e)}const cP=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function uP(e){return T5(e)&&"offsetHeight"in e}const nM=30,t7=e=>!isNaN(parseFloat(e));class n7{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=Vn.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const s of this.dependents)s.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Vn.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=t7(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new WC);const r=this.events[t].add(n);return t==="change"?()=>{r(),gt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Vn.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>nM)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,nM);return A5(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function _l(e,t){return new n7(e,t)}const{schedule:uE}=z5(queueMicrotask,!1),qr={x:!1,y:!1};function dP(){return qr.x||qr.y}function r7(e){return e==="x"||e==="y"?qr[e]?null:(qr[e]=!0,()=>{qr[e]=!1}):qr.x||qr.y?null:(qr.x=qr.y=!0,()=>{qr.x=qr.y=!1})}function fP(e,t){const n=e7(e),r=new AbortController,i={passive:!0,...t,signal:r.signal};return[n,i,()=>r.abort()]}function rM(e){return!(e.pointerType==="touch"||dP())}function i7(e,t,n={}){const[r,i,s]=fP(e,n),o=l=>{if(!rM(l))return;const{target:u}=l,d=t(u,l);if(typeof d!="function"||!u)return;const h=p=>{rM(p)&&(d(p),u.removeEventListener("pointerleave",h))};u.addEventListener("pointerleave",h,i)};return r.forEach(l=>{l.addEventListener("pointerenter",o,i)}),s}const hP=(e,t)=>t?e===t?!0:hP(e,t.parentElement):!1,dE=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,s7=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function o7(e){return s7.has(e.tagName)||e.tabIndex!==-1}const mh=new WeakSet;function iM(e){return t=>{t.key==="Enter"&&e(t)}}function s0(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const a7=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=iM(()=>{if(mh.has(n))return;s0(n,"down");const i=iM(()=>{s0(n,"up")}),s=()=>s0(n,"cancel");n.addEventListener("keyup",i,t),n.addEventListener("blur",s,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function sM(e){return dE(e)&&!dP()}function l7(e,t,n={}){const[r,i,s]=fP(e,n),o=l=>{const u=l.currentTarget;if(!sM(l))return;mh.add(u);const d=t(u,l),h=(y,x)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",g),mh.has(u)&&mh.delete(u),sM(y)&&typeof d=="function"&&d(y,{success:x})},p=y=>{h(y,u===window||u===document||n.useGlobalTarget||hP(u,y.target))},g=y=>{h(y,!1)};window.addEventListener("pointerup",p,i),window.addEventListener("pointercancel",g,i)};return r.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",o,i),uP(l)&&(l.addEventListener("focus",d=>a7(d,i)),!o7(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),s}function pP(e){return T5(e)&&"ownerSVGElement"in e}function c7(e){return pP(e)&&e.tagName==="svg"}const En=e=>!!(e&&e.getVelocity),u7=[...oP,Ft,to],d7=e=>u7.find(sP(e)),fE=O.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function oM(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function f7(...e){return t=>{let n=!1;const r=e.map(i=>{const s=oM(i,t);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():oM(e[i],null)}}}}function h7(...e){return O.useCallback(f7(...e),e)}class p7 extends O.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=uP(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function m7({children:e,isPresent:t,anchorX:n,root:r}){const i=O.useId(),s=O.useRef(null),o=O.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=O.useContext(fE),u=h7(s,e?.ref);return O.useInsertionEffect(()=>{const{width:d,height:h,top:p,left:g,right:y}=o.current;if(t||!s.current||!d||!h)return;const x=n==="left"?`left: ${g}`:`right: ${y}`;s.current.dataset.motionPopId=i;const S=document.createElement("style");l&&(S.nonce=l);const w=r??document.head;return w.appendChild(S),S.sheet&&S.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${h}px !important;
            ${x}px !important;
            top: ${p}px !important;
          }
        `),()=>{w.contains(S)&&w.removeChild(S)}},[t]),v.jsx(p7,{isPresent:t,childRef:s,sizeRef:o,children:O.cloneElement(e,{ref:u})})}const g7=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o,anchorX:l,root:u})=>{const d=FC(y7),h=O.useId();let p=!0,g=O.useMemo(()=>(p=!1,{id:h,initial:t,isPresent:n,custom:i,onExitComplete:y=>{d.set(y,!0);for(const x of d.values())if(!x)return;r&&r()},register:y=>(d.set(y,!1),()=>d.delete(y))}),[n,d,r]);return s&&p&&(g={...g}),O.useMemo(()=>{d.forEach((y,x)=>d.set(x,!1))},[n]),O.useEffect(()=>{!n&&!d.size&&r&&r()},[n]),o==="popLayout"&&(e=v.jsx(m7,{isPresent:n,anchorX:l,root:u,children:e})),v.jsx($p.Provider,{value:g,children:e})};function y7(){return new Map}function mP(e=!0){const t=O.useContext($p);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=t,s=O.useId();O.useEffect(()=>{if(e)return i(s)},[e]);const o=O.useCallback(()=>e&&r&&r(s),[s,r,e]);return!n&&r?[!1,o]:[!0]}const Uf=e=>e.key||"";function aM(e){const t=[];return O.Children.forEach(e,n=>{O.isValidElement(n)&&t.push(n)}),t}const Gp=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1,anchorX:l="left",root:u})=>{const[d,h]=mP(o),p=O.useMemo(()=>aM(e),[e]),g=o&&!d?[]:p.map(Uf),y=O.useRef(!0),x=O.useRef(p),S=FC(()=>new Map),[w,E]=O.useState(p),[N,k]=O.useState(p);E5(()=>{y.current=!1,x.current=p;for(let _=0;_<N.length;_++){const R=Uf(N[_]);g.includes(R)?S.delete(R):S.get(R)!==!0&&S.set(R,!1)}},[N,g.length,g.join("-")]);const T=[];if(p!==w){let _=[...p];for(let R=0;R<N.length;R++){const D=N[R],B=Uf(D);g.includes(B)||(_.splice(R,0,D),T.push(D))}return s==="wait"&&T.length&&(_=T),k(aM(_)),E(p),null}const{forceRender:A}=O.useContext(HC);return v.jsx(v.Fragment,{children:N.map(_=>{const R=Uf(_),D=o&&!d?!1:p===N||g.includes(R),B=()=>{if(S.has(R))S.set(R,!0);else return;let $=!0;S.forEach(z=>{z||($=!1)}),$&&(A?.(),k(x.current),o&&h?.(),r&&r())};return v.jsx(g7,{isPresent:D,initial:!y.current||n?void 0:!1,custom:t,presenceAffectsLayout:i,mode:s,root:u,onExitComplete:D?void 0:B,anchorX:l,children:_},R)})})},gP=O.createContext({strict:!1}),lM={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},Dl={};for(const e in lM)Dl[e]={isEnabled:t=>lM[e].some(n=>!!t[n])};function v7(e){for(const t in e)Dl[t]={...Dl[t],...e[t]}}const b7=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function jh(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||b7.has(e)}let yP=e=>!jh(e);function x7(e){typeof e=="function"&&(yP=t=>t.startsWith("on")?!jh(t):e(t))}try{x7(require("@emotion/is-prop-valid").default)}catch{}function w7(e,t,n){const r={};for(const i in e)i==="values"&&typeof e.values=="object"||(yP(i)||n===!0&&jh(i)||!t&&!jh(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}const Kp=O.createContext({});function Yp(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Iu(e){return typeof e=="string"||Array.isArray(e)}const hE=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],pE=["initial",...hE];function Wp(e){return Yp(e.animate)||pE.some(t=>Iu(e[t]))}function vP(e){return!!(Wp(e)||e.variants)}function S7(e,t){if(Wp(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Iu(n)?n:void 0,animate:Iu(r)?r:void 0}}return e.inherit!==!1?t:{}}function C7(e){const{initial:t,animate:n}=S7(e,O.useContext(Kp));return O.useMemo(()=>({initial:t,animate:n}),[cM(t),cM(n)])}function cM(e){return Array.isArray(e)?e.join(" "):e}const zu={};function E7(e){for(const t in e)zu[t]=e[t],QC(t)&&(zu[t].isCSSVariable=!0)}function bP(e,{layout:t,layoutId:n}){return $l.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!zu[e]||e==="opacity")}const k7={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},T7=Ul.length;function N7(e,t,n){let r="",i=!0;for(let s=0;s<T7;s++){const o=Ul[s],l=e[o];if(l===void 0)continue;let u=!0;if(typeof l=="number"?u=l===(o.startsWith("scale")?1:0):u=parseFloat(l)===0,!u||n){const d=cP(l,cE[o]);if(!u){i=!1;const h=k7[o]||o;r+=`${h}(${d}) `}n&&(t[o]=d)}}return r=r.trim(),n?r=n(t,i?"":r):i&&(r="none"),r}function mE(e,t,n){const{style:r,vars:i,transformOrigin:s}=e;let o=!1,l=!1;for(const u in t){const d=t[u];if($l.has(u)){o=!0;continue}else if(QC(u)){i[u]=d;continue}else{const h=cP(d,cE[u]);u.startsWith("origin")?(l=!0,s[u]=h):r[u]=h}}if(t.transform||(o||n?r.transform=N7(t,e.transform,n):r.transform&&(r.transform="none")),l){const{originX:u="50%",originY:d="50%",originZ:h=0}=s;r.transformOrigin=`${u} ${d} ${h}`}}const gE=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function xP(e,t,n){for(const r in t)!En(t[r])&&!bP(r,n)&&(e[r]=t[r])}function A7({transformTemplate:e},t){return O.useMemo(()=>{const n=gE();return mE(n,t,e),Object.assign({},n.vars,n.style)},[t])}function M7(e,t){const n=e.style||{},r={};return xP(r,n,e),Object.assign(r,A7(e,t)),r}function _7(e,t){const n={},r=M7(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const D7={offset:"stroke-dashoffset",array:"stroke-dasharray"},R7={offset:"strokeDashoffset",array:"strokeDasharray"};function O7(e,t,n=1,r=0,i=!0){e.pathLength=1;const s=i?D7:R7;e[s.offset]=Ie.transform(-r);const o=Ie.transform(t),l=Ie.transform(n);e[s.array]=`${o} ${l}`}function wP(e,{attrX:t,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...l},u,d,h){if(mE(e,l,d),u){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:p,style:g}=e;p.transform&&(g.transform=p.transform,delete p.transform),(g.transform||p.transformOrigin)&&(g.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),g.transform&&(g.transformBox=h?.transformBox??"fill-box",delete p.transformBox),t!==void 0&&(p.x=t),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),i!==void 0&&O7(p,i,s,o,!1)}const SP=()=>({...gE(),attrs:{}}),CP=e=>typeof e=="string"&&e.toLowerCase()==="svg";function j7(e,t,n,r){const i=O.useMemo(()=>{const s=SP();return wP(s,t,CP(r),e.transformTemplate,e.style),{...s.attrs,style:{...s.style}}},[t]);if(e.style){const s={};xP(s,e.style,e),i.style={...s,...i.style}}return i}const L7=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function yE(e){return typeof e!="string"||e.includes("-")?!1:!!(L7.indexOf(e)>-1||/[A-Z]/u.test(e))}function P7(e,t,n,{latestValues:r},i,s=!1){const l=(yE(e)?j7:_7)(t,r,i,e),u=w7(t,typeof e=="string",s),d=e!==O.Fragment?{...u,...l,ref:n}:{},{children:h}=t,p=O.useMemo(()=>En(h)?h.get():h,[h]);return O.createElement(e,{...d,children:p})}function uM(e){const t=[{},{}];return e?.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function vE(e,t,n,r){if(typeof t=="function"){const[i,s]=uM(r);t=t(n!==void 0?n:e.custom,i,s)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,s]=uM(r);t=t(n!==void 0?n:e.custom,i,s)}return t}function gh(e){return En(e)?e.get():e}function B7({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,i){return{latestValues:I7(n,r,i,e),renderState:t()}}function I7(e,t,n,r){const i={},s=r(e,{});for(const g in s)i[g]=gh(s[g]);let{initial:o,animate:l}=e;const u=Wp(e),d=vP(e);t&&d&&!u&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const p=h?l:o;if(p&&typeof p!="boolean"&&!Yp(p)){const g=Array.isArray(p)?p:[p];for(let y=0;y<g.length;y++){const x=vE(e,g[y]);if(x){const{transitionEnd:S,transition:w,...E}=x;for(const N in E){let k=E[N];if(Array.isArray(k)){const T=h?k.length-1:0;k=k[T]}k!==null&&(i[N]=k)}for(const N in S)i[N]=S[N]}}}return i}const EP=e=>(t,n)=>{const r=O.useContext(Kp),i=O.useContext($p),s=()=>B7(e,t,r,i);return n?s():FC(s)};function bE(e,t,n){const{style:r}=e,i={};for(const s in r)(En(r[s])||t.style&&En(t.style[s])||bP(s,e)||n?.getValue(s)?.liveStyle!==void 0)&&(i[s]=r[s]);return i}const z7=EP({scrapeMotionValuesFromProps:bE,createRenderState:gE});function kP(e,t,n){const r=bE(e,t,n);for(const i in e)if(En(e[i])||En(t[i])){const s=Ul.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=e[i]}return r}const q7=EP({scrapeMotionValuesFromProps:kP,createRenderState:SP}),V7=Symbol.for("motionComponentSymbol");function vl(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function H7(e,t,n){return O.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):vl(n)&&(n.current=r))},[t])}const xE=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),F7="framerAppearId",TP="data-"+xE(F7),NP=O.createContext({});function U7(e,t,n,r,i){const{visualElement:s}=O.useContext(Kp),o=O.useContext(gP),l=O.useContext($p),u=O.useContext(fE).reducedMotion,d=O.useRef(null);r=r||o.renderer,!d.current&&r&&(d.current=r(e,{visualState:t,parent:s,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:u}));const h=d.current,p=O.useContext(NP);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&$7(d.current,n,i,p);const g=O.useRef(!1);O.useInsertionEffect(()=>{h&&g.current&&h.update(n,l)});const y=n[TP],x=O.useRef(!!y&&!window.MotionHandoffIsComplete?.(y)&&window.MotionHasOptimisedAnimation?.(y));return E5(()=>{h&&(g.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),x.current&&h.animationState&&h.animationState.animateChanges())}),O.useEffect(()=>{h&&(!x.current&&h.animationState&&h.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(y)}),x.current=!1),h.enteringChildren=void 0)}),h}function $7(e,t,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:l,layoutScroll:u,layoutRoot:d,layoutCrossfade:h}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:AP(e.parent)),e.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||l&&vl(l),visualElement:e,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:h,layoutScroll:u,layoutRoot:d})}function AP(e){if(e)return e.options.allowProjection!==!1?e.projection:AP(e.parent)}function o0(e,{forwardMotionProps:t=!1}={},n,r){n&&v7(n);const i=yE(e)?q7:z7;function s(l,u){let d;const h={...O.useContext(fE),...l,layoutId:G7(l)},{isStatic:p}=h,g=C7(l),y=i(l,p);if(!p&&UC){K7();const x=Y7(h);d=x.MeasureLayout,g.visualElement=U7(e,y,h,r,x.ProjectionNode)}return v.jsxs(Kp.Provider,{value:g,children:[d&&g.visualElement?v.jsx(d,{visualElement:g.visualElement,...h}):null,P7(e,l,H7(y,g.visualElement,u),y,p,t)]})}s.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const o=O.forwardRef(s);return o[V7]=e,o}function G7({layoutId:e}){const t=O.useContext(HC).id;return t&&e!==void 0?t+"-"+e:e}function K7(e,t){O.useContext(gP).strict}function Y7(e){const{drag:t,layout:n}=Dl;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t?.isEnabled(e)||n?.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function W7(e,t){if(typeof Proxy>"u")return o0;const n=new Map,r=(s,o)=>o0(s,o,e,t),i=(s,o)=>r(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?r:(n.has(o)||n.set(o,o0(o,void 0,e,t)),n.get(o))})}function MP({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function X7({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function Z7(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function a0(e){return e===void 0||e===1}function LS({scale:e,scaleX:t,scaleY:n}){return!a0(e)||!a0(t)||!a0(n)}function Io(e){return LS(e)||_P(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function _P(e){return dM(e.x)||dM(e.y)}function dM(e){return e&&e!=="0%"}function Lh(e,t,n){const r=e-n,i=t*r;return n+i}function fM(e,t,n,r,i){return i!==void 0&&(e=Lh(e,i,r)),Lh(e,n,r)+t}function PS(e,t=0,n=1,r,i){e.min=fM(e.min,t,n,r,i),e.max=fM(e.max,t,n,r,i)}function DP(e,{x:t,y:n}){PS(e.x,t.translate,t.scale,t.originPoint),PS(e.y,n.translate,n.scale,n.originPoint)}const hM=.999999999999,pM=1.0000000000001;function Q7(e,t,n,r=!1){const i=n.length;if(!i)return;t.x=t.y=1;let s,o;for(let l=0;l<i;l++){s=n[l],o=s.projectionDelta;const{visualElement:u}=s.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&xl(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,DP(e,o)),r&&Io(s.latestValues)&&xl(e,s.latestValues))}t.x<pM&&t.x>hM&&(t.x=1),t.y<pM&&t.y>hM&&(t.y=1)}function bl(e,t){e.min=e.min+t,e.max=e.max+t}function mM(e,t,n,r,i=.5){const s=St(e.min,e.max,i);PS(e,t,n,s,r)}function xl(e,t){mM(e.x,t.x,t.scaleX,t.scale,t.originX),mM(e.y,t.y,t.scaleY,t.scale,t.originY)}function RP(e,t){return MP(Z7(e.getBoundingClientRect(),t))}function J7(e,t,n){const r=RP(e,n),{scroll:i}=t;return i&&(bl(r.x,i.offset.x),bl(r.y,i.offset.y)),r}const gM=()=>({translate:0,scale:1,origin:0,originPoint:0}),wl=()=>({x:gM(),y:gM()}),yM=()=>({min:0,max:0}),jt=()=>({x:yM(),y:yM()}),BS={current:null},OP={current:!1};function e$(){if(OP.current=!0,!!UC)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>BS.current=e.matches;e.addEventListener("change",t),t()}else BS.current=!1}const t$=new WeakMap;function n$(e,t,n){for(const r in t){const i=t[r],s=n[r];if(En(i))e.addValue(r,i);else if(En(s))e.addValue(r,_l(i,{owner:e}));else if(s!==i)if(e.hasValue(r)){const o=e.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=e.getStaticValue(r);e.addValue(r,_l(o!==void 0?o:i,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const vM=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class r${scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=aE,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=Vn.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,gt.render(this.render,!1,!0))};const{latestValues:u,renderState:d}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=d,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.blockInitialAnimation=!!s,this.isControllingVariants=Wp(n),this.isVariantNode=vP(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:h,...p}=this.scrapeMotionValuesFromProps(n,{},this);for(const g in p){const y=p[g];u[g]!==void 0&&En(y)&&y.set(u[g])}}mount(t){this.current=t,t$.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),OP.current||e$(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:BS.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),eo(this.notifyUpdate),eo(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=$l.has(t);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&gt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in Dl){const n=Dl[t];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[t]&&i&&r(this.props)&&(this.features[t]=new i(this)),this.features[t]){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):jt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<vM.length;r++){const i=vM[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=t[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=n$(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=_l(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(k5(r)||N5(r))?r=parseFloat(r):!d7(r)&&to.test(n)&&(r=lP(t,n)),this.setBaseTarget(t,En(r)?r.get():r)),En(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const s=vE(this.props,n,this.presenceContext?.custom);s&&(r=s[t])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!En(i)?i:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new WC),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){uE.render(this.render)}}class jP extends r${constructor(){super(...arguments),this.KeyframeResolver=J9}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;En(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function LP(e,{style:t,vars:n},r,i){const s=e.style;let o;for(o in t)s[o]=t[o];i?.applyProjectionStyles(s,r);for(o in n)s.setProperty(o,n[o])}function i$(e){return window.getComputedStyle(e)}class s$ extends jP{constructor(){super(...arguments),this.type="html",this.renderInstance=LP}readValueFromInstance(t,n){if($l.has(n))return this.projection?.isProjecting?AS(n):v9(t,n);{const r=i$(t),i=(QC(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return RP(t,n)}build(t,n,r){mE(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return bE(t,n,r)}}const PP=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function o$(e,t,n,r){LP(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(PP.has(i)?i:xE(i),t.attrs[i])}class a$ extends jP{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=jt}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if($l.has(n)){const r=aP(n);return r&&r.default||0}return n=PP.has(n)?n:xE(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return kP(t,n,r)}build(t,n,r){wP(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,i){o$(t,n,r,i)}mount(t){this.isSVGTag=CP(t.tagName),super.mount(t)}}const l$=(e,t)=>yE(e)?new a$(t):new s$(t,{allowProjection:e!==O.Fragment});function kl(e,t,n){const r=e.getProps();return vE(r,t,n!==void 0?n:r.custom,e)}const IS=e=>Array.isArray(e);function c$(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,_l(n))}function u$(e){return IS(e)?e[e.length-1]||0:e}function d$(e,t){const n=kl(e,t);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const l=u$(s[o]);c$(e,o,l)}}function f$(e){return!!(En(e)&&e.add)}function zS(e,t){const n=e.getValue("willChange");if(f$(n))return n.add(t);if(!n&&Zi.WillChange){const r=new Zi.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function BP(e){return e.props[TP]}const h$=e=>e!==null;function p$(e,{repeat:t,repeatType:n="loop"},r){const i=e.filter(h$),s=t&&n!=="loop"&&t%2===1?0:i.length-1;return i[s]}const m$={type:"spring",stiffness:500,damping:25,restSpeed:10},g$=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),y$={type:"keyframes",duration:.8},v$={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},b$=(e,{keyframes:t})=>t.length>2?y$:$l.has(e)?e.startsWith("scale")?g$(t[1]):m$:v$;function x$({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:l,from:u,elapsed:d,...h}){return!!Object.keys(h).length}const wE=(e,t,n,r={},i,s)=>o=>{const l=lE(r,e)||{},u=l.delay||r.delay||0;let{elapsed:d=0}=r;d=d-mi(u);const h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-d,onUpdate:g=>{t.set(g),l.onUpdate&&l.onUpdate(g)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:s?void 0:i};x$(l)||Object.assign(h,b$(e,h)),h.duration&&(h.duration=mi(h.duration)),h.repeatDelay&&(h.repeatDelay=mi(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let p=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(OS(h),h.delay===0&&(p=!0)),(Zi.instantAnimations||Zi.skipAnimations)&&(p=!0,OS(h),h.delay=0),h.allowFlatten=!l.type&&!l.ease,p&&!s&&t.get()!==void 0){const g=p$(h.keyframes,l);if(g!==void 0){gt.update(()=>{h.onUpdate(g),h.onComplete()});return}}return l.isSync?new oE(h):new V9(h)};function w$({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function IP(e,t,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=e.getDefaultTransition(),transitionEnd:o,...l}=t;r&&(s=r);const u=[],d=i&&e.animationState&&e.animationState.getState()[i];for(const h in l){const p=e.getValue(h,e.latestValues[h]??null),g=l[h];if(g===void 0||d&&w$(d,h))continue;const y={delay:n,...lE(s||{},h)},x=p.get();if(x!==void 0&&!p.isAnimating&&!Array.isArray(g)&&g===x&&!y.velocity)continue;let S=!1;if(window.MotionHandoffAnimation){const E=BP(e);if(E){const N=window.MotionHandoffAnimation(E,h,gt);N!==null&&(y.startTime=N,S=!0)}}zS(e,h),p.start(wE(h,p,g,e.shouldReduceMotion&&iP.has(h)?{type:!1}:y,e,S));const w=p.animation;w&&u.push(w)}return o&&Promise.all(u).then(()=>{gt.update(()=>{o&&d$(e,o)})}),u}function zP(e,t,n,r=0,i=1){const s=Array.from(e).sort((d,h)=>d.sortNodePosition(h)).indexOf(t),o=e.size,l=(o-1)*r;return typeof n=="function"?n(s,o):i===1?s*r:l-s*r}function qS(e,t,n={}){const r=kl(e,t,n.type==="exit"?e.presenceContext?.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(IP(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:p}=i;return S$(e,t,u,d,h,p,n)}:()=>Promise.resolve(),{when:l}=i;if(l){const[u,d]=l==="beforeChildren"?[s,o]:[o,s];return u().then(()=>d())}else return Promise.all([s(),o(n.delay)])}function S$(e,t,n=0,r=0,i=0,s=1,o){const l=[];for(const u of e.variantChildren)u.notify("AnimationStart",t),l.push(qS(u,t,{...o,delay:n+(typeof r=="function"?0:r)+zP(e.variantChildren,u,r,i,s)}).then(()=>u.notify("AnimationComplete",t)));return Promise.all(l)}function C$(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(s=>qS(e,s,n));r=Promise.all(i)}else if(typeof t=="string")r=qS(e,t,n);else{const i=typeof t=="function"?kl(e,t,n.custom):t;r=Promise.all(IP(e,i,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function qP(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const E$=pE.length;function VP(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?VP(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<E$;n++){const r=pE[n],i=e.props[r];(Iu(i)||i===!1)&&(t[r]=i)}return t}const k$=[...hE].reverse(),T$=hE.length;function N$(e){return t=>Promise.all(t.map(({animation:n,options:r})=>C$(e,n,r)))}function A$(e){let t=N$(e),n=bM(),r=!0;const i=u=>(d,h)=>{const p=kl(e,h,u==="exit"?e.presenceContext?.custom:void 0);if(p){const{transition:g,transitionEnd:y,...x}=p;d={...d,...x,...y}}return d};function s(u){t=u(e)}function o(u){const{props:d}=e,h=VP(e.parent)||{},p=[],g=new Set;let y={},x=1/0;for(let w=0;w<T$;w++){const E=k$[w],N=n[E],k=d[E]!==void 0?d[E]:h[E],T=Iu(k),A=E===u?N.isActive:null;A===!1&&(x=w);let _=k===h[E]&&k!==d[E]&&T;if(_&&r&&e.manuallyAnimateOnMount&&(_=!1),N.protectedKeys={...y},!N.isActive&&A===null||!k&&!N.prevProp||Yp(k)||typeof k=="boolean")continue;const R=M$(N.prevProp,k);let D=R||E===u&&N.isActive&&!_&&T||w>x&&T,B=!1;const $=Array.isArray(k)?k:[k];let z=$.reduce(i(E),{});A===!1&&(z={});const{prevResolvedValues:V={}}=N,Y={...V,...z},I=q=>{D=!0,g.has(q)&&(B=!0,g.delete(q)),N.needsAnimating[q]=!0;const W=e.getValue(q);W&&(W.liveStyle=!1)};for(const q in Y){const W=z[q],J=V[q];if(y.hasOwnProperty(q))continue;let P=!1;IS(W)&&IS(J)?P=!qP(W,J):P=W!==J,P?W!=null?I(q):g.add(q):W!==void 0&&g.has(q)?I(q):N.protectedKeys[q]=!0}N.prevProp=k,N.prevResolvedValues=z,N.isActive&&(y={...y,...z}),r&&e.blockInitialAnimation&&(D=!1);const F=_&&R;D&&(!F||B)&&p.push(...$.map(q=>{const W={type:E};if(typeof q=="string"&&r&&!F&&e.manuallyAnimateOnMount&&e.parent){const{parent:J}=e,P=kl(J,q);if(J.enteringChildren&&P){const{delayChildren:G}=P.transition||{};W.delay=zP(J.enteringChildren,e,G)}}return{animation:q,options:W}}))}if(g.size){const w={};if(typeof d.initial!="boolean"){const E=kl(e,Array.isArray(d.initial)?d.initial[0]:d.initial);E&&E.transition&&(w.transition=E.transition)}g.forEach(E=>{const N=e.getBaseTarget(E),k=e.getValue(E);k&&(k.liveStyle=!0),w[E]=N??null}),p.push({animation:w})}let S=!!p.length;return r&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(S=!1),r=!1,S?t(p):Promise.resolve()}function l(u,d){if(n[u].isActive===d)return Promise.resolve();e.variantChildren?.forEach(p=>p.animationState?.setActive(u,d)),n[u].isActive=d;const h=o(u);for(const p in n)n[p].protectedKeys={};return h}return{animateChanges:o,setActive:l,setAnimateFunction:s,getState:()=>n,reset:()=>{n=bM(),r=!0}}}function M$(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!qP(t,e):!1}function Lo(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function bM(){return{animate:Lo(!0),whileInView:Lo(),whileHover:Lo(),whileTap:Lo(),whileDrag:Lo(),whileFocus:Lo(),exit:Lo()}}class io{constructor(t){this.isMounted=!1,this.node=t}update(){}}class _$ extends io{constructor(t){super(t),t.animationState||(t.animationState=A$(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Yp(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let D$=0;class R$ extends io{constructor(){super(...arguments),this.id=D$++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t);n&&!t&&i.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const O$={animation:{Feature:_$},exit:{Feature:R$}};function qu(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function yd(e){return{point:{x:e.pageX,y:e.pageY}}}const j$=e=>t=>dE(t)&&e(t,yd(t));function vu(e,t,n,r){return qu(e,t,j$(n),r)}const HP=1e-4,L$=1-HP,P$=1+HP,FP=.01,B$=0-FP,I$=0+FP;function An(e){return e.max-e.min}function z$(e,t,n){return Math.abs(e-t)<=n}function xM(e,t,n,r=.5){e.origin=r,e.originPoint=St(t.min,t.max,e.origin),e.scale=An(n)/An(t),e.translate=St(n.min,n.max,e.origin)-e.originPoint,(e.scale>=L$&&e.scale<=P$||isNaN(e.scale))&&(e.scale=1),(e.translate>=B$&&e.translate<=I$||isNaN(e.translate))&&(e.translate=0)}function bu(e,t,n,r){xM(e.x,t.x,n.x,r?r.originX:void 0),xM(e.y,t.y,n.y,r?r.originY:void 0)}function wM(e,t,n){e.min=n.min+t.min,e.max=e.min+An(t)}function q$(e,t,n){wM(e.x,t.x,n.x),wM(e.y,t.y,n.y)}function SM(e,t,n){e.min=t.min-n.min,e.max=e.min+An(t)}function xu(e,t,n){SM(e.x,t.x,n.x),SM(e.y,t.y,n.y)}function Cr(e){return[e("x"),e("y")]}const UP=({current:e})=>e?e.ownerDocument.defaultView:null,CM=(e,t)=>Math.abs(e-t);function V$(e,t){const n=CM(e.x,t.x),r=CM(e.y,t.y);return Math.sqrt(n**2+r**2)}class $P{constructor(t,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=c0(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,x=V$(g.offset,{x:0,y:0})>=this.distanceThreshold;if(!y&&!x)return;const{point:S}=g,{timestamp:w}=gn;this.history.push({...S,timestamp:w});const{onStart:E,onMove:N}=this.handlers;y||(E&&E(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),N&&N(this.lastMoveEvent,g)},this.handlePointerMove=(g,y)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=l0(y,this.transformPagePoint),gt.update(this.updatePoint,!0)},this.handlePointerUp=(g,y)=>{this.end();const{onEnd:x,onSessionEnd:S,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const E=c0(g.type==="pointercancel"?this.lastMoveEventInfo:l0(y,this.transformPagePoint),this.history);this.startEvent&&x&&x(g,E),S&&S(g,E)},!dE(t))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const l=yd(t),u=l0(l,this.transformPagePoint),{point:d}=u,{timestamp:h}=gn;this.history=[{...d,timestamp:h}];const{onSessionStart:p}=n;p&&p(t,c0(u,this.history)),this.removeListeners=pd(vu(this.contextWindow,"pointermove",this.handlePointerMove),vu(this.contextWindow,"pointerup",this.handlePointerUp),vu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),eo(this.updatePoint)}}function l0(e,t){return t?{point:t(e.point)}:e}function EM(e,t){return{x:e.x-t.x,y:e.y-t.y}}function c0({point:e},t){return{point:e,delta:EM(e,GP(t)),offset:EM(e,H$(t)),velocity:F$(t,.1)}}function H$(e){return e[0]}function GP(e){return e[e.length-1]}function F$(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=GP(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>mi(t)));)n--;if(!r)return{x:0,y:0};const s=Nr(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function U$(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?St(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?St(n,e,r.max):Math.min(e,n)),e}function kM(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function $$(e,{top:t,left:n,bottom:r,right:i}){return{x:kM(e.x,n,i),y:kM(e.y,t,r)}}function TM(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function G$(e,t){return{x:TM(e.x,t.x),y:TM(e.y,t.y)}}function K$(e,t){let n=.5;const r=An(e),i=An(t);return i>r?n=Lu(t.min,t.max-r,e.min):r>i&&(n=Lu(e.min,e.max-i,t.min)),Xi(0,1,n)}function Y$(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const VS=.35;function W$(e=VS){return e===!1?e=0:e===!0&&(e=VS),{x:NM(e,"left","right"),y:NM(e,"top","bottom")}}function NM(e,t,n){return{min:AM(e,t),max:AM(e,n)}}function AM(e,t){return typeof e=="number"?e:e[t]||0}const X$=new WeakMap;class Z${constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=jt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=p=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(yd(p).point)},o=(p,g)=>{const{drag:y,dragPropagation:x,onDragStart:S}=this.getProps();if(y&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=r7(y),!this.openDragLock))return;this.latestPointerEvent=p,this.latestPanInfo=g,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),Cr(E=>{let N=this.getAxisMotionValue(E).get()||0;if(gi.test(N)){const{projection:k}=this.visualElement;if(k&&k.layout){const T=k.layout.layoutBox[E];T&&(N=An(T)*(parseFloat(N)/100))}}this.originPoint[E]=N}),S&&gt.postRender(()=>S(p,g)),zS(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},l=(p,g)=>{this.latestPointerEvent=p,this.latestPanInfo=g;const{dragPropagation:y,dragDirectionLock:x,onDirectionLock:S,onDrag:w}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:E}=g;if(x&&this.currentDirection===null){this.currentDirection=Q$(E),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",g.point,E),this.updateAxis("y",g.point,E),this.visualElement.render(),w&&w(p,g)},u=(p,g)=>{this.latestPointerEvent=p,this.latestPanInfo=g,this.stop(p,g),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>Cr(p=>this.getAnimationState(p)==="paused"&&this.getAxisMotionValue(p).animation?.play()),{dragSnapToOrigin:h}=this.getProps();this.panSession=new $P(t,{onSessionStart:s,onStart:o,onMove:l,onSessionEnd:u,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:r,contextWindow:UP(this.visualElement)})}stop(t,n){const r=t||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&gt.postRender(()=>l(r,i))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:i}=this.getProps();if(!r||!$f(t,i,this.currentDirection))return;const s=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=U$(o,this.constraints[t],this.elastic[t])),s.set(o)}resolveConstraints(){const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;t&&vl(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=$$(r.layoutBox,t):this.constraints=!1,this.elastic=W$(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&Cr(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=Y$(r.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!vl(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=J7(r,i.root,this.visualElement.getTransformPagePoint());let o=G$(i.layout.layoutBox,s);if(n){const l=n(X7(o));this.hasMutatedConstraints=!!l,l&&(o=MP(l))}return o}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),u=this.constraints||{},d=Cr(h=>{if(!$f(h,n,this.currentDirection))return;let p=u&&u[h]||{};o&&(p={min:0,max:0});const g=i?200:1e6,y=i?40:1e7,x={type:"inertia",velocity:r?t[h]:0,bounceStiffness:g,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...s,...p};return this.startAxisValueAnimation(h,x)});return Promise.all(d).then(l)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return zS(this.visualElement,t),r.start(wE(t,r,0,n,this.visualElement,!1))}stopAnimation(){Cr(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){Cr(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){Cr(n=>{const{drag:r}=this.getProps();if(!$f(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:l}=i.layout.layoutBox[n];s.set(t[n]-St(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!vl(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};Cr(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const u=l.get();i[o]=K$({min:u,max:u},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),Cr(o=>{if(!$f(o,t,null))return;const l=this.getAxisMotionValue(o),{min:u,max:d}=this.constraints[o];l.set(St(u,d,i[o]))})}addListeners(){if(!this.visualElement.current)return;X$.set(this.visualElement,this);const t=this.visualElement.current,n=vu(t,"pointerdown",u=>{const{drag:d,dragListener:h=!0}=this.getProps();d&&h&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();vl(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),gt.read(r);const o=qu(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:d})=>{this.isDragging&&d&&(Cr(h=>{const p=this.getAxisMotionValue(h);p&&(this.originPoint[h]+=u[h].translate,p.set(p.get()+u[h].translate))}),this.visualElement.render())}));return()=>{o(),n(),s(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=VS,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:l}}}function $f(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function Q$(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class J$ extends io{constructor(t){super(t),this.removeGroupControls=Mr,this.removeListeners=Mr,this.controls=new Z$(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Mr}unmount(){this.removeGroupControls(),this.removeListeners()}}const MM=e=>(t,n)=>{e&&gt.postRender(()=>e(t,n))};class eG extends io{constructor(){super(...arguments),this.removePointerDownListener=Mr}onPointerDown(t){this.session=new $P(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:UP(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:MM(t),onStart:MM(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&gt.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=vu(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const yh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function _M(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Jc={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Ie.test(e))e=parseFloat(e);else return e;const n=_M(e,t.target.x),r=_M(e,t.target.y);return`${n}% ${r}%`}},tG={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,i=to.parse(e);if(i.length>5)return r;const s=to.createTransformer(e),o=typeof i[0]!="number"?1:0,l=n.x.scale*t.x,u=n.y.scale*t.y;i[0+o]/=l,i[1+o]/=u;const d=St(l,u,.5);return typeof i[2+o]=="number"&&(i[2+o]/=d),typeof i[3+o]=="number"&&(i[3+o]/=d),s(i)}};let u0=!1;class nG extends O.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=t;E7(rG),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),u0&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),yh.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,u0=!0,i||t.layoutDependency!==n||n===void 0||t.isPresent!==s?o.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?o.promote():o.relegate()||gt.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),uE.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=t;u0=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function KP(e){const[t,n]=mP(),r=O.useContext(HC);return v.jsx(nG,{...e,layoutGroup:r,switchLayoutGroup:O.useContext(NP),isPresent:t,safeToRemove:n})}const rG={borderRadius:{...Jc,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Jc,borderTopRightRadius:Jc,borderBottomLeftRadius:Jc,borderBottomRightRadius:Jc,boxShadow:tG};function iG(e,t,n){const r=En(e)?e:_l(e);return r.start(wE("",r,t,n)),r.animation}const sG=(e,t)=>e.depth-t.depth;class oG{constructor(){this.children=[],this.isDirty=!1}add(t){$C(this.children,t),this.isDirty=!0}remove(t){GC(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(sG),this.isDirty=!1,this.children.forEach(t)}}function aG(e,t){const n=Vn.now(),r=({timestamp:i})=>{const s=i-n;s>=t&&(eo(r),e(s-t))};return gt.setup(r,!0),()=>eo(r)}const YP=["TopLeft","TopRight","BottomLeft","BottomRight"],lG=YP.length,DM=e=>typeof e=="string"?parseFloat(e):e,RM=e=>typeof e=="number"||Ie.test(e);function cG(e,t,n,r,i,s){i?(e.opacity=St(0,n.opacity??1,uG(r)),e.opacityExit=St(t.opacity??1,0,dG(r))):s&&(e.opacity=St(t.opacity??1,n.opacity??1,r));for(let o=0;o<lG;o++){const l=`border${YP[o]}Radius`;let u=OM(t,l),d=OM(n,l);if(u===void 0&&d===void 0)continue;u||(u=0),d||(d=0),u===0||d===0||RM(u)===RM(d)?(e[l]=Math.max(St(DM(u),DM(d),r),0),(gi.test(d)||gi.test(u))&&(e[l]+="%")):e[l]=d}(t.rotate||n.rotate)&&(e.rotate=St(t.rotate||0,n.rotate||0,r))}function OM(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const uG=WP(0,.5,L5),dG=WP(.5,.95,Mr);function WP(e,t,n){return r=>r<e?0:r>t?1:n(Lu(e,t,r))}function jM(e,t){e.min=t.min,e.max=t.max}function wr(e,t){jM(e.x,t.x),jM(e.y,t.y)}function LM(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function PM(e,t,n,r,i){return e-=t,e=Lh(e,1/n,r),i!==void 0&&(e=Lh(e,1/i,r)),e}function fG(e,t=0,n=1,r=.5,i,s=e,o=e){if(gi.test(t)&&(t=parseFloat(t),t=St(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=St(s.min,s.max,r);e===s&&(l-=t),e.min=PM(e.min,t,n,l,i),e.max=PM(e.max,t,n,l,i)}function BM(e,t,[n,r,i],s,o){fG(e,t[n],t[r],t[i],t.scale,s,o)}const hG=["x","scaleX","originX"],pG=["y","scaleY","originY"];function IM(e,t,n,r){BM(e.x,t,hG,n?n.x:void 0,r?r.x:void 0),BM(e.y,t,pG,n?n.y:void 0,r?r.y:void 0)}function zM(e){return e.translate===0&&e.scale===1}function XP(e){return zM(e.x)&&zM(e.y)}function qM(e,t){return e.min===t.min&&e.max===t.max}function mG(e,t){return qM(e.x,t.x)&&qM(e.y,t.y)}function VM(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function ZP(e,t){return VM(e.x,t.x)&&VM(e.y,t.y)}function HM(e){return An(e.x)/An(e.y)}function FM(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class gG{constructor(){this.members=[]}add(t){$C(this.members,t),t.scheduleRender()}remove(t){if(GC(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function yG(e,t,n){let r="";const i=e.x.translate/t.x,s=e.y.translate/t.y,o=n?.z||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:d,rotate:h,rotateX:p,rotateY:g,skewX:y,skewY:x}=n;d&&(r=`perspective(${d}px) ${r}`),h&&(r+=`rotate(${h}deg) `),p&&(r+=`rotateX(${p}deg) `),g&&(r+=`rotateY(${g}deg) `),y&&(r+=`skewX(${y}deg) `),x&&(r+=`skewY(${x}deg) `)}const l=e.x.scale*t.x,u=e.y.scale*t.y;return(l!==1||u!==1)&&(r+=`scale(${l}, ${u})`),r||"none"}const d0=["","X","Y","Z"],vG=1e3;let bG=0;function f0(e,t,n,r){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function QP(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=BP(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",gt,!(i||s))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&QP(r)}function JP({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},l=t?.()){this.id=bG++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(SG),this.nodes.forEach(TG),this.nodes.forEach(NG),this.nodes.forEach(CG)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new oG)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new WC),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const u=this.eventHandlers.get(o);u&&u.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=pP(o)&&!c7(o),this.instance=o;const{layoutId:l,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||l)&&(this.isLayoutDirty=!0),e){let h,p=0;const g=()=>this.root.updateBlockedByResize=!1;gt.read(()=>{p=window.innerWidth}),e(o,()=>{const y=window.innerWidth;y!==p&&(p=y,this.root.updateBlockedByResize=!0,h&&h(),h=aG(g,250),yh.hasAnimatedSinceResize&&(yh.hasAnimatedSinceResize=!1,this.nodes.forEach(GM)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:p,hasRelativeLayoutChanged:g,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||d.getDefaultTransition()||RG,{onLayoutAnimationStart:S,onLayoutAnimationComplete:w}=d.getProps(),E=!this.targetLayout||!ZP(this.targetLayout,y),N=!p&&g;if(this.options.layoutRoot||this.resumeFrom||N||p&&(E||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const k={...lE(x,"layout"),onPlay:S,onComplete:w};(d.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k),this.setAnimationOrigin(h,N)}else p||GM(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),eo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(AG),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&QP(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const p=this.path[h];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:l,layout:u}=this.options;if(l===void 0&&!u)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(UM);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach($M);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(kG),this.nodes.forEach(xG),this.nodes.forEach(wG)):this.nodes.forEach($M),this.clearAllSnapshots();const l=Vn.now();gn.delta=Xi(0,1e3/60,l-gn.timestamp),gn.timestamp=l,gn.isProcessing=!0,e0.update.process(gn),e0.preRender.process(gn),e0.render.process(gn),gn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,uE.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(EG),this.sharedNodes.forEach(MG)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,gt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){gt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!An(this.snapshot.measuredBox.x)&&!An(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=jt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!XP(this.projectionDelta),u=this.getTransformTemplate(),d=u?u(this.latestValues,""):void 0,h=d!==this.prevTransformTemplateValue;o&&this.instance&&(l||Io(this.latestValues)||h)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let u=this.removeElementScroll(l);return o&&(u=this.removeTransform(u)),OG(u),{animationId:this.root.animationId,measuredBox:l,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return jt();const l=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(jG))){const{scroll:d}=this.root;d&&(bl(l.x,d.offset.x),bl(l.y,d.offset.y))}return l}removeElementScroll(o){const l=jt();if(wr(l,o),this.scroll?.wasRoot)return l;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:p}=d;d!==this.root&&h&&p.layoutScroll&&(h.wasRoot&&wr(l,o),bl(l.x,h.offset.x),bl(l.y,h.offset.y))}return l}applyTransform(o,l=!1){const u=jt();wr(u,o);for(let d=0;d<this.path.length;d++){const h=this.path[d];!l&&h.options.layoutScroll&&h.scroll&&h!==h.root&&xl(u,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),Io(h.latestValues)&&xl(u,h.latestValues)}return Io(this.latestValues)&&xl(u,this.latestValues),u}removeTransform(o){const l=jt();wr(l,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];if(!d.instance||!Io(d.latestValues))continue;LS(d.latestValues)&&d.updateSnapshot();const h=jt(),p=d.measurePageBox();wr(h,p),IM(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,h)}return Io(this.latestValues)&&IM(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==gn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:p}=this.options;if(!(!this.layout||!(h||p))){if(this.resolvedRelativeTargetAt=gn.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=jt(),this.relativeTargetOrigin=jt(),xu(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),wr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=jt(),this.targetWithTransforms=jt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),q$(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):wr(this.target,this.layout.layoutBox),DP(this.target,this.targetDelta)):wr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=jt(),this.relativeTargetOrigin=jt(),xu(this.relativeTargetOrigin,this.target,g.target),wr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||LS(this.parent.latestValues)||_P(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const o=this.getLead(),l=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===gn.timestamp&&(u=!1),u)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;wr(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,g=this.treeScale.y;Q7(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=jt());const{target:y}=o;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(LM(this.prevProjectionDelta.x,this.projectionDelta.x),LM(this.prevProjectionDelta.y,this.projectionDelta.y)),bu(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==g||!FM(this.projectionDelta.x,this.prevProjectionDelta.x)||!FM(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=wl(),this.projectionDelta=wl(),this.projectionDeltaWithTransform=wl()}setAnimationOrigin(o,l=!1){const u=this.snapshot,d=u?u.latestValues:{},h={...this.latestValues},p=wl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const g=jt(),y=u?u.source:void 0,x=this.layout?this.layout.source:void 0,S=y!==x,w=this.getStack(),E=!w||w.members.length<=1,N=!!(S&&!E&&this.options.crossfade===!0&&!this.path.some(DG));this.animationProgress=0;let k;this.mixTargetDelta=T=>{const A=T/1e3;KM(p.x,o.x,A),KM(p.y,o.y,A),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(xu(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),_G(this.relativeTarget,this.relativeTargetOrigin,g,A),k&&mG(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=jt()),wr(k,this.relativeTarget)),S&&(this.animationValues=h,cG(h,d,this.latestValues,A,N,E)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=A},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(eo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=gt.update(()=>{yh.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=_l(0)),this.currentAnimation=iG(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(vG),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:u,layout:d,latestValues:h}=o;if(!(!l||!u||!d)){if(this!==o&&this.layout&&d&&eB(this.options.animationType,this.layout.layoutBox,d.layoutBox)){u=this.target||jt();const p=An(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+p;const g=An(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+g}wr(l,u),xl(l,h),bu(this.projectionDeltaWithTransform,this.layoutCorrected,l,h)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new gG),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:u}={}){const d=this.getStack();d&&d.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(l=!0),!l)return;const d={};u.z&&f0("z",o,d,this.animationValues);for(let h=0;h<d0.length;h++)f0(`rotate${d0[h]}`,o,d,this.animationValues),f0(`skew${d0[h]}`,o,d,this.animationValues);o.render();for(const h in d)o.setStaticValue(h,d[h]),this.animationValues&&(this.animationValues[h]=d[h]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=gh(l?.pointerEvents)||"",o.transform=u?u(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=gh(l?.pointerEvents)||""),this.hasProjected&&!Io(this.latestValues)&&(o.transform=u?u({},""):"none",this.hasProjected=!1);return}o.visibility="";const h=d.animationValues||d.latestValues;this.applyTransformsToTarget();let p=yG(this.projectionDeltaWithTransform,this.treeScale,h);u&&(p=u(h,p)),o.transform=p;const{x:g,y}=this.projectionDelta;o.transformOrigin=`${g.origin*100}% ${y.origin*100}% 0`,d.animationValues?o.opacity=d===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:o.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const x in zu){if(h[x]===void 0)continue;const{correct:S,applyTo:w,isCSSVariable:E}=zu[x],N=p==="none"?h[x]:S(h[x],d);if(w){const k=w.length;for(let T=0;T<k;T++)o[w[T]]=N}else E?this.options.visualElement.renderState.vars[x]=N:o[x]=N}this.options.layoutId&&(o.pointerEvents=d===this?gh(l?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(UM),this.root.sharedNodes.clear()}}}function xG(e){e.updateLayout()}function wG(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=e.layout,{animationType:i}=e.options,s=t.source!==e.layout.source;i==="size"?Cr(h=>{const p=s?t.measuredBox[h]:t.layoutBox[h],g=An(p);p.min=n[h].min,p.max=p.min+g}):eB(i,t.layoutBox,n)&&Cr(h=>{const p=s?t.measuredBox[h]:t.layoutBox[h],g=An(n[h]);p.max=p.min+g,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+g)});const o=wl();bu(o,n,t.layoutBox);const l=wl();s?bu(l,e.applyTransform(r,!0),t.measuredBox):bu(l,n,t.layoutBox);const u=!XP(o);let d=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:g}=h;if(p&&g){const y=jt();xu(y,t.layoutBox,p.layoutBox);const x=jt();xu(x,n,g.layoutBox),ZP(y,x)||(d=!0),h.options.layoutRoot&&(e.relativeTarget=x,e.relativeTargetOrigin=y,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function SG(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function CG(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function EG(e){e.clearSnapshot()}function UM(e){e.clearMeasurements()}function $M(e){e.isLayoutDirty=!1}function kG(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function GM(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function TG(e){e.resolveTargetDelta()}function NG(e){e.calcProjection()}function AG(e){e.resetSkewAndRotation()}function MG(e){e.removeLeadSnapshot()}function KM(e,t,n){e.translate=St(t.translate,0,n),e.scale=St(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function YM(e,t,n,r){e.min=St(t.min,n.min,r),e.max=St(t.max,n.max,r)}function _G(e,t,n,r){YM(e.x,t.x,n.x,r),YM(e.y,t.y,n.y,r)}function DG(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const RG={duration:.45,ease:[.4,0,.1,1]},WM=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),XM=WM("applewebkit/")&&!WM("chrome/")?Math.round:Mr;function ZM(e){e.min=XM(e.min),e.max=XM(e.max)}function OG(e){ZM(e.x),ZM(e.y)}function eB(e,t,n){return e==="position"||e==="preserve-aspect"&&!z$(HM(t),HM(n),.2)}function jG(e){return e!==e.root&&e.scroll?.wasRoot}const LG=JP({attachResizeListener:(e,t)=>qu(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),h0={current:void 0},tB=JP({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!h0.current){const e=new LG({});e.mount(window),e.setOptions({layoutScroll:!0}),h0.current=e}return h0.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),PG={pan:{Feature:eG},drag:{Feature:J$,ProjectionNode:tB,MeasureLayout:KP}};function QM(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&gt.postRender(()=>s(t,yd(t)))}class BG extends io{mount(){const{current:t}=this.node;t&&(this.unmount=i7(t,(n,r)=>(QM(this.node,r,"Start"),i=>QM(this.node,i,"End"))))}unmount(){}}class IG extends io{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=pd(qu(this.node.current,"focus",()=>this.onFocus()),qu(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function JM(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&gt.postRender(()=>s(t,yd(t)))}class zG extends io{mount(){const{current:t}=this.node;t&&(this.unmount=l7(t,(n,r)=>(JM(this.node,r,"Start"),(i,{success:s})=>JM(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const HS=new WeakMap,p0=new WeakMap,qG=e=>{const t=HS.get(e.target);t&&t(e)},VG=e=>{e.forEach(qG)};function HG({root:e,...t}){const n=e||document;p0.has(n)||p0.set(n,{});const r=p0.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(VG,{root:e,...t})),r[i]}function FG(e,t,n){const r=HG(t);return HS.set(e,n),r.observe(e),()=>{HS.delete(e),r.unobserve(e)}}const UG={some:0,all:1};class $G extends io{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=t,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:UG[i]},l=u=>{const{isIntersecting:d}=u;if(this.isInView===d||(this.isInView=d,s&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:h,onViewportLeave:p}=this.node.getProps(),g=d?h:p;g&&g(u)};return FG(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(GG(t,n))&&this.startObserver()}unmount(){}}function GG({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const KG={inView:{Feature:$G},tap:{Feature:zG},focus:{Feature:IG},hover:{Feature:BG}},YG={layout:{ProjectionNode:tB,MeasureLayout:KP}},WG={...O$,...KG,...PG,...YG},ln=W7(WG,l$),Xp=({isOpen:e,onClose:t,onLogin:n,onSignup:r,onGoogleLogin:i})=>{const[s,o]=O.useState("login"),[l,u]=O.useState(""),[d,h]=O.useState(""),[p,g]=O.useState(""),[y,x]=O.useState(""),[S,w]=O.useState(!1),E=O.useCallback(async T=>{if(i){w(!0),x("");try{await i(T.credential),t()}catch(A){x(A instanceof Error?A.message:"Google authentication failed")}finally{w(!1)}}},[i,t]);O.useEffect(()=>{if(!e||!i)return;const T=document.createElement("script");return T.src="https://accounts.google.com/gsi/client",T.async=!0,T.defer=!0,document.body.appendChild(T),T.onload=()=>{window.google&&(window.google.accounts.id.initialize({client_id:"298068869246-l775qmuuledbg8fnlmli423kks90a62g.apps.googleusercontent.com",callback:E}),window.google.accounts.id.renderButton(document.getElementById("google-signin-button"),{theme:"outline",size:"large",width:400,text:s==="login"?"signin_with":"signup_with"}))},()=>{document.body.contains(T)&&document.body.removeChild(T)}},[e,s,i,E]);const N=async T=>{T.preventDefault(),x(""),w(!0);try{s==="login"?await n(l,d):await r(l,d,p||void 0),t(),u(""),h(""),g("")}catch(A){x(A instanceof Error?A.message:"Authentication failed")}finally{w(!1)}},k=()=>{o(T=>T==="login"?"signup":"login"),x("")};return e?v.jsx(Gp,{children:e&&v.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:v.jsxs(ln.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"bg-surface rounded-2xl shadow-2xl p-8 max-w-md w-full border border-theme/10",onClick:T=>T.stopPropagation(),children:[v.jsxs("div",{className:"flex items-center justify-between mb-6",children:[v.jsx("h2",{className:"text-2xl font-bold text-theme",children:s==="login"?"Welcome Back":"Create Account"}),v.jsx("button",{type:"button",onClick:t,className:"p-2 text-muted hover:text-theme hover:bg-[var(--bg-hover)] rounded-md transition-colors","aria-label":"Close",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),v.jsx("p",{className:"text-muted mb-6",children:s==="login"?"Sign in to save and manage your diagrams":"Create an account to start saving your work"}),y&&v.jsx("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/20 border border-red-300 dark:border-red-700 rounded-lg text-red-800 dark:text-red-200 text-sm",children:y}),i&&v.jsxs(v.Fragment,{children:[v.jsx("div",{id:"google-signin-button",className:"flex justify-center mb-4"}),v.jsxs("div",{className:"relative my-6",children:[v.jsx("div",{className:"absolute inset-0 flex items-center",children:v.jsx("div",{className:"w-full border-t border-theme/20"})}),v.jsx("div",{className:"relative flex justify-center text-sm",children:v.jsx("span",{className:"px-2 bg-surface text-muted",children:"Or continue with email"})})]})]}),v.jsxs("form",{onSubmit:N,className:"space-y-4",children:[s==="signup"&&v.jsxs("div",{children:[v.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-theme mb-2",children:"Name (optional)"}),v.jsx("input",{id:"name",type:"text",value:p,onChange:T=>g(T.target.value),className:"w-full px-4 py-2 bg-theme/5 border border-theme/20 rounded-lg text-theme placeholder-muted focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent",placeholder:"John Doe"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-theme mb-2",children:"Email"}),v.jsx("input",{id:"email",type:"email",value:l,onChange:T=>u(T.target.value),required:!0,className:"w-full px-4 py-2 bg-theme/5 border border-theme/20 rounded-lg text-theme placeholder-muted focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent",placeholder:"you@example.com"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-theme mb-2",children:"Password"}),v.jsx("input",{id:"password",type:"password",value:d,onChange:T=>h(T.target.value),required:!0,minLength:6,className:"w-full px-4 py-2 bg-theme/5 border border-theme/20 rounded-lg text-theme placeholder-muted focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent",placeholder:""}),s==="signup"&&v.jsx("p",{className:"mt-1 text-xs text-muted",children:"Minimum 6 characters"})]}),v.jsx("button",{type:"submit",disabled:S,className:"w-full px-6 py-3 bg-[var(--brand)] text-white font-bold rounded-lg hover:brightness-95 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:S?"Please wait...":s==="login"?"Sign In":"Create Account"})]}),v.jsx("div",{className:"mt-6 text-center",children:v.jsxs("p",{className:"text-muted text-sm",children:[s==="login"?"Don't have an account?":"Already have an account?"," ",v.jsx("button",{type:"button",onClick:k,className:"text-[var(--brand)] font-medium hover:underline",children:s==="login"?"Sign up":"Sign in"})]})}),v.jsx("div",{className:"mt-6 p-3 bg-theme/5 rounded-lg",children:v.jsx("p",{className:"text-xs text-muted text-center",children:" Your diagrams are securely stored and only accessible to you"})})]})})}):null},e_=()=>{ya();const e=dd(),[t,n]=O.useState(!1),[r,i]=O.useState(!1),{user:s,isAuthenticated:o,login:l,signup:u,googleLogin:d,logout:h}=Up(),[p,g]=O.useState(!1),[y,x]=O.useState(!1),[S,w]=O.useState([]),[E,N]=O.useState(!1);O.useEffect(()=>{n(!0)},[]),O.useEffect(()=>{const D=()=>{i(window.scrollY>100)};return window.addEventListener("scroll",D),()=>window.removeEventListener("scroll",D)},[]),O.useEffect(()=>{(async()=>{if(!o){w([]);return}N(!0);try{const B=await sr.getUserDiagrams();w(B)}catch(B){console.error("Failed to load diagrams:",B)}finally{N(!1)}})()},[o]);const k=D=>{e(`/playground/free?diagramId=${D}`)},T=[{icon:"",title:"Practice Problems",description:"Master system design through curated problems with real-world scenarios",action:"Browse Problems",route:"/problems",gradient:"from-blue-500 to-cyan-500"},{icon:"",title:"Design Studio",description:"Create your own system designs from scratch. Perfect for planning your next project",action:"Start Designing",route:"/playground/free",gradient:"from-purple-500 to-pink-500"},{icon:"",title:"Custom Problems",description:"Bring your own problem statements and design solutions in an interactive environment",action:"Create Problem",route:"/create-problem",gradient:"from-orange-500 to-red-500"}],A=[{icon:"",title:"55+ Components",description:"Databases, APIs, caches, queues, and more"},{icon:"",title:"Smart Connections",description:"Define data flow and relationships visually"},{icon:"",title:"Custom Properties",description:"Add metadata to any component"},{icon:"",title:"AI Assessment",description:"Get feedback on your designs"},{icon:"",title:"Dark Mode",description:"Beautiful themes for any preference"},{icon:"",title:"Export & Share",description:"Save and share your designs"}],_=[{value:"55+",label:"Components",icon:""},{value:"1000+",label:"Users",icon:""},{value:"",label:"Possibilities",icon:""}],R=[{quote:"This tool transformed how I prepare for system design interviews.",author:"Software Engineer",role:"FAANG Company"},{quote:"Perfect for teaching distributed systems to my students.",author:"Professor",role:"University CS Dept"},{quote:"I use it daily to plan architecture for client projects.",author:"Solutions Architect",role:"Tech Consulting"}];return v.jsxs(v.Fragment,{children:[v.jsx(hd,{title:"Diagrammatic  Interactive System Design Playground | Learn Architecture Design",description:"Master system design with Diagrammatic - an interactive playground featuring 55+ components, AI assessment, and real-world practice problems. Free system architecture tool for students, professionals, and educators.",keywords:"system design, architecture diagram, system design interview, software architecture, distributed systems, scalable architecture, system design tool, architecture playground, cloud architecture, microservices design",url:"https://satya00089.github.io/diagrammatic/"}),v.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[var(--surface)] via-[var(--bg)] to-[var(--surface)] text-theme relative grid-pattern-overlay",children:[v.jsxs("div",{className:"absolute inset-0 pointer-events-none opacity-[0.16] z-0 min-h-full",children:[v.jsxs("svg",{className:"absolute inset-0 w-full h-full",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",children:[v.jsx("line",{x1:"10%",y1:"15%",x2:"25%",y2:"15%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme",opacity:"0.6"}),v.jsx("line",{x1:"25%",y1:"15%",x2:"40%",y2:"25%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-200",opacity:"0.6"}),v.jsx("line",{x1:"40%",y1:"25%",x2:"60%",y2:"20%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-400",opacity:"0.6"}),v.jsx("line",{x1:"60%",y1:"20%",x2:"75%",y2:"25%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-600",opacity:"0.6"}),v.jsx("line",{x1:"75%",y1:"25%",x2:"90%",y2:"15%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-800",opacity:"0.6"}),v.jsx("line",{x1:"15%",y1:"40%",x2:"30%",y2:"45%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-300",opacity:"0.6"}),v.jsx("line",{x1:"30%",y1:"45%",x2:"50%",y2:"50%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-500",opacity:"0.6"}),v.jsx("line",{x1:"50%",y1:"50%",x2:"70%",y2:"45%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-700",opacity:"0.6"}),v.jsx("line",{x1:"70%",y1:"45%",x2:"85%",y2:"40%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-900",opacity:"0.6"}),v.jsx("line",{x1:"20%",y1:"70%",x2:"35%",y2:"75%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-400",opacity:"0.6"}),v.jsx("line",{x1:"35%",y1:"75%",x2:"50%",y2:"80%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-600",opacity:"0.6"}),v.jsx("line",{x1:"50%",y1:"80%",x2:"65%",y2:"75%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-800",opacity:"0.6"}),v.jsx("line",{x1:"65%",y1:"75%",x2:"80%",y2:"70%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-1000",opacity:"0.6"}),v.jsx("line",{x1:"25%",y1:"15%",x2:"30%",y2:"45%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-500",opacity:"0.6"}),v.jsx("line",{x1:"50%",y1:"20%",x2:"50%",y2:"50%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-700",opacity:"0.6"}),v.jsx("line",{x1:"75%",y1:"25%",x2:"70%",y2:"45%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-900",opacity:"0.6"}),v.jsx("line",{x1:"50%",y1:"50%",x2:"50%",y2:"80%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-1100",opacity:"0.6"})]}),v.jsx("div",{className:"absolute top-[15%] left-[10%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[15%] left-[25%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[25%] left-[40%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-300",children:""}),v.jsx("div",{className:"absolute top-[20%] left-[60%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[25%] left-[75%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-600",children:""}),v.jsx("div",{className:"absolute top-[15%] left-[90%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[40%] left-[15%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-400",children:""}),v.jsx("div",{className:"absolute top-[45%] left-[30%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[50%] left-[50%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float shadow-lg delay-500",children:""}),v.jsx("div",{className:"absolute top-[45%] left-[70%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[40%] left-[85%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-700",children:""}),v.jsx("div",{className:"absolute top-[69%] left-[17%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[75%] left-[35%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[80%] left-[48%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[74%] left-[65%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[70%] left-[79%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-1000",children:""})]}),v.jsx("header",{className:`fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-[var(--brand)] to-[var(--header-gradient-end)] transition-all duration-300 ${r?"shadow-lg":""}`,children:v.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:v.jsxs("div",{className:"flex items-center justify-between h-16",children:[v.jsxs("button",{type:"button",onClick:()=>e("/"),className:"flex items-center space-x-3 group cursor-pointer",children:[v.jsx("img",{src:"./logo.png",alt:"Logo",className:"h-10 transition-transform group-hover:scale-110 duration-300"}),v.jsx("span",{className:"text-xl font-bold text-white",children:"Diagrammatic"})]}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("button",{type:"button",onClick:()=>e("/problems"),className:"hidden md:block px-4 py-2 text-sm font-medium text-white hover:text-white/80 transition-colors cursor-pointer",children:"Problems"}),o&&v.jsx("button",{type:"button",onClick:()=>e("/diagrams"),className:"hidden md:block px-4 py-2 text-sm font-medium text-white hover:text-white/80 transition-colors cursor-pointer",children:"My Designs"}),v.jsx(fd,{}),v.jsx("div",{className:"relative",children:o?v.jsxs(v.Fragment,{children:[v.jsxs("button",{type:"button",onClick:()=>x(!y),className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-white hover:bg-white/20 rounded-md transition-colors",children:[s?.picture?v.jsx("img",{src:s.picture,alt:s.name||"User",className:"w-8 h-8 rounded-full object-cover border-2 border-white/30"}):v.jsx("div",{className:"w-8 h-8 rounded-full bg-white/30 flex items-center justify-center font-bold",children:s?.name?.[0]?.toUpperCase()||s?.email?.[0]?.toUpperCase()||"U"}),v.jsx("span",{className:"hidden sm:inline",children:s?.name||s?.email}),v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),y&&v.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-[var(--surface)] shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[180px]",children:[v.jsxs("div",{className:"px-4 py-2 border-b border-theme/10",children:[v.jsx("p",{className:"text-sm font-medium text-theme",children:s?.name||"User"}),v.jsx("p",{className:"text-xs text-muted truncate",children:s?.email})]}),v.jsx("button",{type:"button",onClick:()=>{h(),x(!1)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:"Sign Out"})]})]}):v.jsx("button",{type:"button",onClick:()=>g(!0),className:"px-4 py-2 text-sm font-medium bg-white/20 text-white rounded-md hover:bg-white/30 transition-colors",children:"Sign In"})})]})]})})}),v.jsx("section",{className:"relative pt-16 pb-20",children:v.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-[var(--brand)] to-[var(--accent)]",children:[v.jsxs("div",{className:"absolute inset-0 opacity-10 pointer-events-none",children:[v.jsxs("svg",{className:"absolute inset-0 w-full h-full",xmlns:"http://www.w3.org/2000/svg",children:[v.jsx("line",{x1:"10%",y1:"20%",x2:"30%",y2:"40%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse",opacity:"0.6"}),v.jsx("line",{x1:"30%",y1:"40%",x2:"50%",y2:"30%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-500",opacity:"0.6"}),v.jsx("line",{x1:"50%",y1:"30%",x2:"70%",y2:"45%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-1000",opacity:"0.6"}),v.jsx("line",{x1:"70%",y1:"45%",x2:"90%",y2:"25%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-1500",opacity:"0.6"}),v.jsx("line",{x1:"30%",y1:"40%",x2:"50%",y2:"70%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-700",opacity:"0.6"}),v.jsx("line",{x1:"50%",y1:"70%",x2:"70%",y2:"45%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-1200",opacity:"0.6"})]}),v.jsx("div",{className:"absolute top-[20%] left-[10%] w-16 h-16 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[40%] left-[30%] w-20 h-20 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[30%] left-[50%] w-16 h-16 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-500",children:""}),v.jsx("div",{className:"absolute top-[45%] left-[70%] w-20 h-20 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),v.jsx("div",{className:"absolute top-[25%] left-[90%] w-16 h-16 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-1000",children:""}),v.jsx("div",{className:"absolute top-[70%] left-[50%] w-16 h-16 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float-delayed shadow-lg delay-300",children:""})]}),v.jsx("div",{className:"absolute inset-0 opacity-[0.03] hero-grid-overlay"}),v.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 md:py-24",children:v.jsxs("div",{className:`relative z-10 text-center transition-all duration-1000 ${t?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:[v.jsx("div",{className:"inline-block mb-6",children:v.jsx("span",{className:"px-4 py-2 bg-white/20 backdrop-blur-sm text-white text-sm font-semibold rounded-full shadow-lg",children:" Now with 55+ Components & AI Assessment"})}),v.jsxs("h1",{className:"text-5xl md:text-7xl font-bold mb-6 leading-tight text-white",children:[v.jsx("span",{className:"inline-block animate-gradient bg-gradient-to-r from-white via-white/90 to-white bg-clip-text",children:"System Design"}),v.jsx("br",{}),v.jsx("span",{className:"text-white/95",children:"Visually, Intuitively"})]}),v.jsx("p",{className:"text-xl md:text-2xl text-white/90 max-w-3xl mx-auto mb-8 leading-relaxed",children:"The interactive playground for system design  practice, learn, and create architecture diagrams with ease"}),v.jsx("div",{className:"flex flex-wrap justify-center gap-8 mb-12",children:_.map((D,B)=>v.jsxs("div",{className:`text-center transition-all duration-500 bg-white/10 backdrop-blur-sm rounded-2xl px-6 py-4 hover:bg-white/20 hover:scale-105 ${t?"fade-in-up":"opacity-0 translate-y-5"} ${B===0?"fade-in-up-delay-100":B===1?"fade-in-up-delay-200":"fade-in-up-delay-300"}`,children:[v.jsx("div",{className:"text-3xl mb-1",children:D.icon}),v.jsx("div",{className:"text-3xl font-bold text-white",children:D.value}),v.jsx("div",{className:"text-sm text-white/80",children:D.label})]},D.label))}),v.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[v.jsxs("button",{type:"button",onClick:()=>e("/playground/free"),className:"group relative px-8 py-4 bg-white text-[var(--brand)] text-lg font-bold rounded-xl hover:shadow-2xl hover:scale-105 transition-all duration-300 cursor-pointer overflow-hidden",children:[v.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:["Get Started Free"," ",v.jsx("span",{className:"group-hover:translate-x-1 transition-transform",children:""})]}),v.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white to-white/90 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),v.jsxs("button",{type:"button",onClick:()=>e("/problems"),className:"group px-8 py-4 bg-white/10 backdrop-blur-sm border-2 border-white/30 text-white text-lg font-semibold rounded-xl hover:bg-white/20 hover:border-white/50 hover:scale-105 transition-all duration-300 cursor-pointer",children:["Explore Problems"," ",v.jsx("span",{className:"inline-block group-hover:translate-x-1 transition-transform",children:""})]})]}),v.jsx("p",{className:"mt-6 text-sm text-white/80",children:"No signup required  Free forever  55+ components"})]})})]})}),o&&v.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-transparent via-surface/20 to-transparent relative",children:v.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[v.jsxs("div",{className:"flex items-center justify-between mb-8",children:[v.jsxs("div",{children:[v.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-2",children:"My Designs"}),v.jsx("p",{className:"text-muted text-lg",children:"Your saved system design projects"})]}),v.jsxs("div",{className:"flex items-center gap-3",children:[S.length>0&&v.jsx("button",{type:"button",onClick:()=>e("/diagrams"),className:"px-5 py-2.5 text-sm font-medium text-theme hover:text-[var(--brand)] transition-colors",children:"View All"}),v.jsxs("button",{type:"button",onClick:()=>e("/playground/free"),className:"px-6 py-3 bg-[var(--brand)] text-white font-semibold rounded-lg hover:brightness-95 transition-all flex items-center gap-2",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Design"]})]})]}),E?v.jsx("div",{className:"flex items-center justify-center py-20",children:v.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[var(--brand)]"})}):S.length===0?v.jsxs("div",{className:"text-center py-20 backdrop-blur-md rounded-3xl shadow-[0_8px_30px_rgba(0,0,0,0.12)] p-12 elevated-card-bg",children:[v.jsx("div",{className:"text-6xl mb-4",children:""}),v.jsx("h3",{className:"text-xl font-semibold text-theme mb-2",children:"No designs yet"}),v.jsx("p",{className:"text-muted mb-6",children:"Start creating your first system design project"}),v.jsx("button",{type:"button",onClick:()=>e("/playground/free"),className:"px-6 py-3 bg-[var(--brand)] text-white font-semibold rounded-lg hover:brightness-95 transition-all",children:"Create Your First Design"})]}):v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:S.slice(0,6).map(D=>v.jsxs("div",{onClick:()=>k(D.id),className:"group backdrop-blur-md rounded-2xl shadow-[0_4px_20px_rgba(0,0,0,0.08)] p-6 hover:shadow-[0_12px_40px_rgba(0,0,0,0.15)] transition-all duration-300 hover:-translate-y-1 cursor-pointer elevated-card-bg",children:[v.jsxs("div",{className:"flex items-start justify-between mb-4",children:[v.jsxs("div",{className:"flex-1",children:[v.jsx("h3",{className:"text-lg font-semibold text-theme group-hover:text-[var(--brand)] transition-colors mb-1 line-clamp-1",children:D.title}),D.description&&v.jsx("p",{className:"text-sm text-muted line-clamp-2",children:D.description})]}),v.jsx("div",{className:"text-3xl ml-2",children:""})]}),v.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted mb-4",children:[v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})}),D.nodes.length," node",D.nodes.length!==1?"s":""]}),v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),D.edges.length," connection",D.edges.length!==1?"s":""]})]}),v.jsxs("div",{className:"text-xs text-muted",children:["Updated"," ",new Date(D.updatedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]},D.id))})]})}),v.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 relative",children:v.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[v.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-4",children:"Choose Your Path"}),v.jsx("p",{className:"text-muted text-center mb-16 text-lg max-w-2xl mx-auto",children:"Whether you're learning, building, or teaching  we've got you covered"}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:T.map((D,B)=>v.jsxs("div",{className:`group relative backdrop-blur-md rounded-3xl shadow-[0_8px_30px_rgba(0,0,0,0.12)] p-8 hover:shadow-[0_20px_60px_rgba(0,0,0,0.25)] hover:scale-[1.02] cursor-pointer overflow-hidden transition-all duration-500 elevated-card-bg ${B===0?"delay-0":B===1?"delay-100":"delay-200"}`,onClick:()=>e(D.route),onKeyDown:$=>$.key==="Enter"&&e(D.route),role:"button",tabIndex:0,children:[v.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${D.gradient} opacity-0 group-hover:opacity-[0.03] transition-opacity duration-500`}),v.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-3xl opacity-0 group-hover:opacity-20 blur-xl transition-opacity duration-500"}),v.jsxs("div",{className:"relative z-10",children:[v.jsx("div",{className:"text-6xl mb-6 transform group-hover:scale-110 transition-transform duration-300",children:D.icon}),v.jsx("h3",{className:"text-2xl font-bold mb-4 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:D.title}),v.jsx("p",{className:"text-muted mb-8 leading-relaxed text-[15px]",children:D.description}),v.jsxs("div",{className:"inline-flex items-center gap-2 text-[var(--brand)] font-semibold text-sm group-hover:gap-3 transition-all duration-300",children:[D.action,v.jsx("span",{className:"text-lg group-hover:translate-x-1 transition-transform duration-300",children:""})]})]})]},D.title))})]})}),v.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-transparent via-surface/30 to-transparent relative",children:v.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[v.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-4",children:"Powerful Features"}),v.jsx("p",{className:"text-muted text-center mb-16 text-lg max-w-2xl mx-auto",children:"Everything you need to design, document, and share system architectures"}),v.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:A.map((D,B)=>v.jsxs("div",{className:`group backdrop-blur-md rounded-2xl shadow-[0_4px_20px_rgba(0,0,0,0.08)] p-6 hover:shadow-[0_12px_40px_rgba(0,0,0,0.15)] transition-all duration-300 hover:-translate-y-1 elevated-card-bg ${B===0?"delay-0":B===1?"delay-[50ms]":B===2?"delay-[100ms]":B===3?"delay-[150ms]":B===4?"delay-[200ms]":"delay-[250ms]"}`,children:[v.jsx("div",{className:"text-4xl mb-4 transform group-hover:scale-110 group-hover:rotate-6 transition-all duration-300",children:D.icon}),v.jsx("h3",{className:"text-lg font-semibold mb-2 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:D.title}),v.jsx("p",{className:"text-muted text-sm leading-relaxed",children:D.description})]},D.title))})]})}),v.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 relative",children:v.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[v.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-4",children:"Loved by Designers Worldwide"}),v.jsx("p",{className:"text-muted text-center mb-16 text-lg max-w-2xl mx-auto",children:"Join thousands who trust Diagrammatic for their system design needs"}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:R.map((D,B)=>v.jsxs("div",{className:"group relative backdrop-blur-md rounded-3xl shadow-[0_8px_30px_rgba(0,0,0,0.12)] p-8 hover:shadow-[0_20px_60px_rgba(0,0,0,0.2)] transition-all duration-500 hover:-translate-y-2 elevated-card-bg",children:[v.jsx("div",{className:"absolute top-6 right-6 text-7xl text-[var(--brand)]/5 font-serif leading-none",children:'"'}),v.jsxs("div",{className:"relative z-10",children:[v.jsx("div",{className:"text-5xl mb-6 text-[var(--brand)]/20 font-serif",children:'"'}),v.jsx("p",{className:"text-theme mb-8 leading-relaxed text-[15px] italic",children:D.quote}),v.jsxs("div",{className:"flex items-center gap-4",children:[v.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-[var(--brand)] to-[var(--accent)] flex items-center justify-center text-white font-bold text-lg shadow-lg group-hover:scale-110 transition-transform duration-300",children:D.author.charAt(0)}),v.jsxs("div",{children:[v.jsx("div",{className:"font-semibold text-theme",children:D.author}),v.jsx("div",{className:"text-muted text-sm",children:D.role})]})]})]})]},`testimonial-${B}`))})]})}),v.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-transparent via-surface/20 to-transparent relative",children:v.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[v.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-16",children:"Perfect For Every Role"}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-10",children:[v.jsxs("div",{className:"group text-center p-8 rounded-3xl hover:elevated-card-bg hover:backdrop-blur-md hover:shadow-[0_20px_60px_rgba(0,0,0,0.15)] transition-all duration-500 hover:-translate-y-2",role:"button",tabIndex:0,children:[v.jsxs("div",{className:"relative inline-block mb-6",children:[v.jsx("div",{className:"absolute inset-0 gradient-icon-blue-cyan rounded-full blur-xl opacity-50 group-hover:opacity-70 transition-opacity duration-500"}),v.jsx("div",{className:"relative w-20 h-20 mx-auto gradient-icon-blue-cyan rounded-full flex items-center justify-center text-4xl shadow-lg group-hover:scale-110 group-hover:rotate-12 transition-all duration-500",children:""})]}),v.jsx("h3",{className:"text-2xl font-bold mb-4 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:"Students"}),v.jsx("p",{className:"text-muted leading-relaxed mb-6",children:"Learn system design concepts through hands-on practice with real-world problems"}),v.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-[var(--brand)] font-semibold opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-2 group-hover:translate-y-0",children:["Start practicing"," ",v.jsx("span",{className:"group-hover:translate-x-1 transition-transform duration-300",children:""})]})]}),v.jsxs("div",{className:"group text-center p-8 rounded-3xl hover:elevated-card-bg hover:backdrop-blur-md hover:shadow-[0_20px_60px_rgba(0,0,0,0.15)] transition-all duration-500 hover:-translate-y-2",role:"button",tabIndex:0,children:[v.jsxs("div",{className:"relative inline-block mb-6",children:[v.jsx("div",{className:"absolute inset-0 gradient-icon-purple-pink rounded-full blur-xl opacity-50 group-hover:opacity-70 transition-opacity duration-500"}),v.jsx("div",{className:"relative w-20 h-20 mx-auto gradient-icon-purple-pink rounded-full flex items-center justify-center text-4xl shadow-lg group-hover:scale-110 group-hover:rotate-12 transition-all duration-500",children:""})]}),v.jsx("h3",{className:"text-2xl font-bold mb-4 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:"Professionals"}),v.jsx("p",{className:"text-muted leading-relaxed mb-6",children:"Plan and document architecture for your projects with a visual approach"}),v.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-[var(--brand)] font-semibold opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-2 group-hover:translate-y-0",children:["Start designing"," ",v.jsx("span",{className:"group-hover:translate-x-1 transition-transform duration-300",children:""})]})]}),v.jsxs("div",{className:"group text-center p-8 rounded-3xl hover:elevated-card-bg hover:backdrop-blur-md hover:shadow-[0_20px_60px_rgba(0,0,0,0.15)] transition-all duration-500 hover:-translate-y-2",role:"button",tabIndex:0,children:[v.jsxs("div",{className:"relative inline-block mb-6",children:[v.jsx("div",{className:"absolute inset-0 gradient-icon-orange-red rounded-full blur-xl opacity-50 group-hover:opacity-70 transition-opacity duration-500"}),v.jsx("div",{className:"relative w-20 h-20 mx-auto gradient-icon-orange-red rounded-full flex items-center justify-center text-4xl shadow-lg group-hover:scale-110 group-hover:rotate-12 transition-all duration-500",children:""})]}),v.jsx("h3",{className:"text-2xl font-bold mb-4 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:"Educators"}),v.jsx("p",{className:"text-muted leading-relaxed mb-6",children:"Create custom problems and assignments for your students to solve"}),v.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-[var(--brand)] font-semibold opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-2 group-hover:translate-y-0",children:["Create problem"," ",v.jsx("span",{className:"group-hover:translate-x-1 transition-transform duration-300",children:""})]})]})]})]})}),v.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 relative",children:v.jsxs("div",{className:"max-w-4xl mx-auto text-center bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-3xl p-12 relative overflow-hidden",children:[v.jsx("div",{className:"absolute top-0 left-0 w-40 h-40 bg-white/10 rounded-full -translate-x-1/2 -translate-y-1/2"}),v.jsx("div",{className:"absolute bottom-0 right-0 w-60 h-60 bg-white/10 rounded-full translate-x-1/3 translate-y-1/3"}),v.jsxs("div",{className:"relative z-10",children:[v.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-4",children:"Ready to Start Designing?"}),v.jsx("p",{className:"text-white/90 text-lg mb-8 max-w-2xl mx-auto",children:"Join thousands of developers and architects who trust Diagrammatic for their system design needs"}),v.jsx("button",{type:"button",onClick:()=>e("/playground/free"),className:"px-8 py-4 bg-white text-[var(--brand)] text-lg font-bold rounded-xl hover:shadow-2xl hover:scale-105 transition-all duration-300 cursor-pointer",children:"Launch Free Canvas"})]})]})}),v.jsx("footer",{className:"py-12 px-4 sm:px-6 lg:px-8 shadow-[0_-4px_20px_rgba(0,0,0,0.08)]",children:v.jsx("div",{className:"max-w-7xl mx-auto",children:v.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[v.jsxs("div",{className:"flex items-center space-x-3",children:[v.jsx("img",{src:"./logo.png",alt:"Logo",className:"h-8"}),v.jsx("span",{className:"font-semibold text-theme",children:"Diagrammatic"})]}),v.jsx("p",{className:"text-muted text-sm",children:" 2025 Diagrammatic. Built with  for system designers"})]})})}),v.jsx("style",{children:`
        @keyframes gradient {
          0%, 100% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
        }
        .animate-gradient {
          background-size: 200% auto;
          animation: gradient 3s ease infinite;
        }
        @keyframes float {
          0%, 100% { transform: translateY(0px) rotate(0deg); }
          50% { transform: translateY(-20px) rotate(5deg); }
        }
        .animate-float {
          animation: float 6s ease-in-out infinite;
        }
        .animate-float-delayed {
          animation: float 8s ease-in-out infinite;
          animation-delay: 1s;
        }
      `}),p&&v.jsx(Xp,{isOpen:p,onClose:()=>g(!1),onLogin:async(D,B)=>{await l({email:D,password:B})},onSignup:async(D,B,$)=>{await u({email:D,password:B,name:$})},onGoogleLogin:async D=>{await d(D)}})]})]})};function Qi(e){return Array.isArray?Array.isArray(e):iB(e)==="[object Array]"}function XG(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function ZG(e){return e==null?"":XG(e)}function hi(e){return typeof e=="string"}function nB(e){return typeof e=="number"}function QG(e){return e===!0||e===!1||JG(e)&&iB(e)=="[object Boolean]"}function rB(e){return typeof e=="object"}function JG(e){return rB(e)&&e!==null}function ir(e){return e!=null}function m0(e){return!e.trim().length}function iB(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const eK="Incorrect 'index' type",tK=e=>`Invalid value for key ${e}`,nK=e=>`Pattern length exceeds max of ${e}.`,rK=e=>`Missing ${e} property in key`,iK=e=>`Property 'weight' in key '${e}' must be a positive integer`,t_=Object.prototype.hasOwnProperty;class sK{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(r=>{let i=sB(r);this._keys.push(i),this._keyMap[i.id]=i,n+=i.weight}),this._keys.forEach(r=>{r.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function sB(e){let t=null,n=null,r=null,i=1,s=null;if(hi(e)||Qi(e))r=e,t=n_(e),n=FS(e);else{if(!t_.call(e,"name"))throw new Error(rK("name"));const o=e.name;if(r=o,t_.call(e,"weight")&&(i=e.weight,i<=0))throw new Error(iK(o));t=n_(o),n=FS(o),s=e.getFn}return{path:t,id:n,weight:i,src:r,getFn:s}}function n_(e){return Qi(e)?e:e.split(".")}function FS(e){return Qi(e)?e.join("."):e}function oK(e,t){let n=[],r=!1;const i=(s,o,l)=>{if(ir(s))if(!o[l])n.push(s);else{let u=o[l];const d=s[u];if(!ir(d))return;if(l===o.length-1&&(hi(d)||nB(d)||QG(d)))n.push(ZG(d));else if(Qi(d)){r=!0;for(let h=0,p=d.length;h<p;h+=1)i(d[h],o,l+1)}else o.length&&i(d,o,l+1)}};return i(e,hi(t)?t.split("."):t,0),r?n:n[0]}const aK={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},lK={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},cK={location:0,threshold:.6,distance:100},uK={useExtendedSearch:!1,getFn:oK,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var ze={...lK,...aK,...cK,...uK};const dK=/[^ ]+/g;function fK(e=1,t=3){const n=new Map,r=Math.pow(10,t);return{get(i){const s=i.match(dK).length;if(n.has(s))return n.get(s);const o=1/Math.pow(s,.5*e),l=parseFloat(Math.round(o*r)/r);return n.set(s,l),l},clear(){n.clear()}}}class SE{constructor({getFn:t=ze.getFn,fieldNormWeight:n=ze.fieldNormWeight}={}){this.norm=fK(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,hi(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();hi(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!ir(t)||m0(t))return;let r={v:t,i:n,n:this.norm.get(t)};this.records.push(r)}_addObject(t,n){let r={i:n,$:{}};this.keys.forEach((i,s)=>{let o=i.getFn?i.getFn(t):this.getFn(t,i.path);if(ir(o)){if(Qi(o)){let l=[];const u=[{nestedArrIndex:-1,value:o}];for(;u.length;){const{nestedArrIndex:d,value:h}=u.pop();if(ir(h))if(hi(h)&&!m0(h)){let p={v:h,i:d,n:this.norm.get(h)};l.push(p)}else Qi(h)&&h.forEach((p,g)=>{u.push({nestedArrIndex:g,value:p})})}r.$[s]=l}else if(hi(o)&&!m0(o)){let l={v:o,n:this.norm.get(o)};r.$[s]=l}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function oB(e,t,{getFn:n=ze.getFn,fieldNormWeight:r=ze.fieldNormWeight}={}){const i=new SE({getFn:n,fieldNormWeight:r});return i.setKeys(e.map(sB)),i.setSources(t),i.create(),i}function hK(e,{getFn:t=ze.getFn,fieldNormWeight:n=ze.fieldNormWeight}={}){const{keys:r,records:i}=e,s=new SE({getFn:t,fieldNormWeight:n});return s.setKeys(r),s.setIndexRecords(i),s}function Gf(e,{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:i=ze.distance,ignoreLocation:s=ze.ignoreLocation}={}){const o=t/e.length;if(s)return o;const l=Math.abs(r-n);return i?o+l/i:l?1:o}function pK(e=[],t=ze.minMatchCharLength){let n=[],r=-1,i=-1,s=0;for(let o=e.length;s<o;s+=1){let l=e[s];l&&r===-1?r=s:!l&&r!==-1&&(i=s-1,i-r+1>=t&&n.push([r,i]),r=-1)}return e[s-1]&&s-r>=t&&n.push([r,s-1]),n}const qo=32;function mK(e,t,n,{location:r=ze.location,distance:i=ze.distance,threshold:s=ze.threshold,findAllMatches:o=ze.findAllMatches,minMatchCharLength:l=ze.minMatchCharLength,includeMatches:u=ze.includeMatches,ignoreLocation:d=ze.ignoreLocation}={}){if(t.length>qo)throw new Error(nK(qo));const h=t.length,p=e.length,g=Math.max(0,Math.min(r,p));let y=s,x=g;const S=l>1||u,w=S?Array(p):[];let E;for(;(E=e.indexOf(t,x))>-1;){let R=Gf(t,{currentLocation:E,expectedLocation:g,distance:i,ignoreLocation:d});if(y=Math.min(R,y),x=E+h,S){let D=0;for(;D<h;)w[E+D]=1,D+=1}}x=-1;let N=[],k=1,T=h+p;const A=1<<h-1;for(let R=0;R<h;R+=1){let D=0,B=T;for(;D<B;)Gf(t,{errors:R,currentLocation:g+B,expectedLocation:g,distance:i,ignoreLocation:d})<=y?D=B:T=B,B=Math.floor((T-D)/2+D);T=B;let $=Math.max(1,g-B+1),z=o?p:Math.min(g+B,p)+h,V=Array(z+2);V[z+1]=(1<<R)-1;for(let I=z;I>=$;I-=1){let F=I-1,L=n[e.charAt(F)];if(S&&(w[F]=+!!L),V[I]=(V[I+1]<<1|1)&L,R&&(V[I]|=(N[I+1]|N[I])<<1|1|N[I+1]),V[I]&A&&(k=Gf(t,{errors:R,currentLocation:F,expectedLocation:g,distance:i,ignoreLocation:d}),k<=y)){if(y=k,x=F,x<=g)break;$=Math.max(1,2*g-x)}}if(Gf(t,{errors:R+1,currentLocation:g,expectedLocation:g,distance:i,ignoreLocation:d})>y)break;N=V}const _={isMatch:x>=0,score:Math.max(.001,k)};if(S){const R=pK(w,l);R.length?u&&(_.indices=R):_.isMatch=!1}return _}function gK(e){let t={};for(let n=0,r=e.length;n<r;n+=1){const i=e.charAt(n);t[i]=(t[i]||0)|1<<r-n-1}return t}const Ph=String.prototype.normalize?(e=>e.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,"")):(e=>e);class aB{constructor(t,{location:n=ze.location,threshold:r=ze.threshold,distance:i=ze.distance,includeMatches:s=ze.includeMatches,findAllMatches:o=ze.findAllMatches,minMatchCharLength:l=ze.minMatchCharLength,isCaseSensitive:u=ze.isCaseSensitive,ignoreDiacritics:d=ze.ignoreDiacritics,ignoreLocation:h=ze.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:u,ignoreDiacritics:d,ignoreLocation:h},t=u?t:t.toLowerCase(),t=d?Ph(t):t,this.pattern=t,this.chunks=[],!this.pattern.length)return;const p=(y,x)=>{this.chunks.push({pattern:y,alphabet:gK(y),startIndex:x})},g=this.pattern.length;if(g>qo){let y=0;const x=g%qo,S=g-x;for(;y<S;)p(this.pattern.substr(y,qo),y),y+=qo;if(x){const w=g-qo;p(this.pattern.substr(w),w)}}else p(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,ignoreDiacritics:r,includeMatches:i}=this.options;if(t=n?t:t.toLowerCase(),t=r?Ph(t):t,this.pattern===t){let S={isMatch:!0,score:0};return i&&(S.indices=[[0,t.length-1]]),S}const{location:s,distance:o,threshold:l,findAllMatches:u,minMatchCharLength:d,ignoreLocation:h}=this.options;let p=[],g=0,y=!1;this.chunks.forEach(({pattern:S,alphabet:w,startIndex:E})=>{const{isMatch:N,score:k,indices:T}=mK(t,S,w,{location:s+E,distance:o,threshold:l,findAllMatches:u,minMatchCharLength:d,includeMatches:i,ignoreLocation:h});N&&(y=!0),g+=k,N&&T&&(p=[...p,...T])});let x={isMatch:y,score:y?g/this.chunks.length:1};return y&&i&&(x.indices=p),x}}class so{constructor(t){this.pattern=t}static isMultiMatch(t){return r_(t,this.multiRegex)}static isSingleMatch(t){return r_(t,this.singleRegex)}search(){}}function r_(e,t){const n=e.match(t);return n?n[1]:null}class yK extends so{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class vK extends so{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const r=t.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class bK extends so{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class xK extends so{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class wK extends so{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class SK extends so{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class lB extends so{constructor(t,{location:n=ze.location,threshold:r=ze.threshold,distance:i=ze.distance,includeMatches:s=ze.includeMatches,findAllMatches:o=ze.findAllMatches,minMatchCharLength:l=ze.minMatchCharLength,isCaseSensitive:u=ze.isCaseSensitive,ignoreDiacritics:d=ze.ignoreDiacritics,ignoreLocation:h=ze.ignoreLocation}={}){super(t),this._bitapSearch=new aB(t,{location:n,threshold:r,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:u,ignoreDiacritics:d,ignoreLocation:h})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class cB extends so{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,r;const i=[],s=this.pattern.length;for(;(r=t.indexOf(this.pattern,n))>-1;)n=r+s,i.push([r,n-1]);const o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}const US=[yK,cB,bK,xK,SK,wK,vK,lB],i_=US.length,CK=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,EK="|";function kK(e,t={}){return e.split(EK).map(n=>{let r=n.trim().split(CK).filter(s=>s&&!!s.trim()),i=[];for(let s=0,o=r.length;s<o;s+=1){const l=r[s];let u=!1,d=-1;for(;!u&&++d<i_;){const h=US[d];let p=h.isMultiMatch(l);p&&(i.push(new h(p,t)),u=!0)}if(!u)for(d=-1;++d<i_;){const h=US[d];let p=h.isSingleMatch(l);if(p){i.push(new h(p,t));break}}}return i})}const TK=new Set([lB.type,cB.type]);class NK{constructor(t,{isCaseSensitive:n=ze.isCaseSensitive,ignoreDiacritics:r=ze.ignoreDiacritics,includeMatches:i=ze.includeMatches,minMatchCharLength:s=ze.minMatchCharLength,ignoreLocation:o=ze.ignoreLocation,findAllMatches:l=ze.findAllMatches,location:u=ze.location,threshold:d=ze.threshold,distance:h=ze.distance}={}){this.query=null,this.options={isCaseSensitive:n,ignoreDiacritics:r,includeMatches:i,minMatchCharLength:s,findAllMatches:l,ignoreLocation:o,location:u,threshold:d,distance:h},t=n?t:t.toLowerCase(),t=r?Ph(t):t,this.pattern=t,this.query=kK(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:i,ignoreDiacritics:s}=this.options;t=i?t:t.toLowerCase(),t=s?Ph(t):t;let o=0,l=[],u=0;for(let d=0,h=n.length;d<h;d+=1){const p=n[d];l.length=0,o=0;for(let g=0,y=p.length;g<y;g+=1){const x=p[g],{isMatch:S,indices:w,score:E}=x.search(t);if(S){if(o+=1,u+=E,r){const N=x.constructor.type;TK.has(N)?l=[...l,...w]:l.push(w)}}else{u=0,o=0,l.length=0;break}}if(o){let g={isMatch:!0,score:u/o};return r&&(g.indices=l),g}}return{isMatch:!1,score:1}}}const $S=[];function AK(...e){$S.push(...e)}function GS(e,t){for(let n=0,r=$S.length;n<r;n+=1){let i=$S[n];if(i.condition(e,t))return new i(e,t)}return new aB(e,t)}const Bh={AND:"$and",OR:"$or"},KS={PATH:"$path",PATTERN:"$val"},YS=e=>!!(e[Bh.AND]||e[Bh.OR]),MK=e=>!!e[KS.PATH],_K=e=>!Qi(e)&&rB(e)&&!YS(e),s_=e=>({[Bh.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function uB(e,t,{auto:n=!0}={}){const r=i=>{let s=Object.keys(i);const o=MK(i);if(!o&&s.length>1&&!YS(i))return r(s_(i));if(_K(i)){const u=o?i[KS.PATH]:s[0],d=o?i[KS.PATTERN]:i[u];if(!hi(d))throw new Error(tK(u));const h={keyId:FS(u),pattern:d};return n&&(h.searcher=GS(d,t)),h}let l={children:[],operator:s[0]};return s.forEach(u=>{const d=i[u];Qi(d)&&d.forEach(h=>{l.children.push(r(h))})}),l};return YS(e)||(e=s_(e)),r(e)}function DK(e,{ignoreFieldNorm:t=ze.ignoreFieldNorm}){e.forEach(n=>{let r=1;n.matches.forEach(({key:i,norm:s,score:o})=>{const l=i?i.weight:null;r*=Math.pow(o===0&&l?Number.EPSILON:o,(l||1)*(t?1:s))}),n.score=r})}function RK(e,t){const n=e.matches;t.matches=[],ir(n)&&n.forEach(r=>{if(!ir(r.indices)||!r.indices.length)return;const{indices:i,value:s}=r;let o={indices:i,value:s};r.key&&(o.key=r.key.src),r.idx>-1&&(o.refIndex=r.idx),t.matches.push(o)})}function OK(e,t){t.score=e.score}function jK(e,t,{includeMatches:n=ze.includeMatches,includeScore:r=ze.includeScore}={}){const i=[];return n&&i.push(RK),r&&i.push(OK),e.map(s=>{const{idx:o}=s,l={item:t[o],refIndex:o};return i.length&&i.forEach(u=>{u(s,l)}),l})}class va{constructor(t,n={},r){this.options={...ze,...n},this.options.useExtendedSearch,this._keyStore=new sK(this.options.keys),this.setCollection(t,r)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof SE))throw new Error(eK);this._myIndex=n||oB(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){ir(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let r=0,i=this._docs.length;r<i;r+=1){const s=this._docs[r];t(s,r)&&(this.removeAt(r),r-=1,i-=1,n.push(s))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:r,includeScore:i,shouldSort:s,sortFn:o,ignoreFieldNorm:l}=this.options;let u=hi(t)?hi(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return DK(u,{ignoreFieldNorm:l}),s&&u.sort(o),nB(n)&&n>-1&&(u=u.slice(0,n)),jK(u,this._docs,{includeMatches:r,includeScore:i})}_searchStringList(t){const n=GS(t,this.options),{records:r}=this._myIndex,i=[];return r.forEach(({v:s,i:o,n:l})=>{if(!ir(s))return;const{isMatch:u,score:d,indices:h}=n.searchIn(s);u&&i.push({item:s,idx:o,matches:[{score:d,value:s,norm:l,indices:h}]})}),i}_searchLogical(t){const n=uB(t,this.options),r=(l,u,d)=>{if(!l.children){const{keyId:p,searcher:g}=l,y=this._findMatches({key:this._keyStore.get(p),value:this._myIndex.getValueForItemAtKeyId(u,p),searcher:g});return y&&y.length?[{idx:d,item:u,matches:y}]:[]}const h=[];for(let p=0,g=l.children.length;p<g;p+=1){const y=l.children[p],x=r(y,u,d);if(x.length)h.push(...x);else if(l.operator===Bh.AND)return[]}return h},i=this._myIndex.records,s={},o=[];return i.forEach(({$:l,i:u})=>{if(ir(l)){let d=r(n,l,u);d.length&&(s[u]||(s[u]={idx:u,item:l,matches:[]},o.push(s[u])),d.forEach(({matches:h})=>{s[u].matches.push(...h)}))}}),o}_searchObjectList(t){const n=GS(t,this.options),{keys:r,records:i}=this._myIndex,s=[];return i.forEach(({$:o,i:l})=>{if(!ir(o))return;let u=[];r.forEach((d,h)=>{u.push(...this._findMatches({key:d,value:o[h],searcher:n}))}),u.length&&s.push({idx:l,item:o,matches:u})}),s}_findMatches({key:t,value:n,searcher:r}){if(!ir(n))return[];let i=[];if(Qi(n))n.forEach(({v:s,i:o,n:l})=>{if(!ir(s))return;const{isMatch:u,score:d,indices:h}=r.searchIn(s);u&&i.push({score:d,key:t,value:s,idx:o,norm:l,indices:h})});else{const{v:s,n:o}=n,{isMatch:l,score:u,indices:d}=r.searchIn(s);l&&i.push({score:u,key:t,value:s,norm:o,indices:d})}return i}}va.version="7.1.0";va.createIndex=oB;va.parseIndex=hK;va.config=ze;va.parseQuery=uB;AK(NK);const LK=()=>{ya();const e=dd(),[t,n]=O.useState("All"),[r,i]=O.useState("All"),[s,o]=O.useState(""),[l,u]=O.useState([]),[d,h]=O.useState(!0),[p,g]=O.useState(null),[y,x]=O.useState(!1),[S,w]=O.useState(!1),{user:E,isAuthenticated:N,login:k,signup:T,googleLogin:A,logout:_}=Up();O.useEffect(()=>{(async()=>{try{h(!0),g(null);const Y=await fetch("https://diagrammatic-api.vercel.app/api/v1/all-problems");if(!Y.ok)throw new Error(`Failed to fetch problems: ${Y.status} ${Y.statusText}`);const I=await Y.json();u(I)}catch(V){g(V instanceof Error?V.message:"An error occurred while fetching problems"),console.error("Error fetching problems:",V)}finally{h(!1)}})()},[]);const R=O.useMemo(()=>{const z=s?.trim()??"";let V=l;return z.length>0&&(V=new va(l,{keys:[{name:"title",weight:.6},{name:"description",weight:.25},{name:"tags",weight:.15}],includeScore:!0,threshold:.45}).search(z).map(I=>I.item)),V.filter(Y=>{const I=t==="All"||Y.difficulty===t,F=r==="All"||Y.category===r;return I&&F})},[t,r,s,l]),D=["All",...Array.from(new Set(l.map(z=>z.category)))],B=["All","Easy","Medium","Hard"],$=z=>{switch(z){case"Easy":return"bg-green-100 text-green-800";case"Medium":return"bg-yellow-100 text-yellow-800";case"Hard":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return v.jsxs(v.Fragment,{children:[v.jsx(hd,{title:"System Design Practice Problems | Diagrammatic",description:"Browse and solve curated system design problems with real-world scenarios. Master distributed systems, scalable architectures, and ace your tech interviews with hands-on practice.",keywords:"system design problems, architecture challenges, distributed systems practice, system design interview prep, scalable architecture exercises",url:"https://satya00089.github.io/diagrammatic/#/problems"}),v.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[var(--surface)] via-[var(--bg)] to-[var(--surface)] text-theme relative grid-pattern-overlay",children:[v.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] transition-all duration-300",children:v.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:v.jsxs("div",{className:"flex items-center justify-between h-16",children:[v.jsxs("button",{type:"button",onClick:()=>e("/"),className:"flex items-center space-x-3 group cursor-pointer",children:[v.jsx("img",{src:"./logo.png",alt:"Logo",className:"h-10 transition-transform group-hover:scale-110 duration-300"}),v.jsx("span",{className:"text-xl font-bold text-white",children:"Diagrammatic"})]}),v.jsxs("div",{className:"flex items-center gap-4",children:[N&&v.jsx("button",{type:"button",onClick:()=>e("/diagrams"),className:"hidden md:block px-4 py-2 text-sm font-medium text-white hover:text-white/80 transition-colors cursor-pointer",children:"My Designs"}),v.jsx("div",{className:"hidden md:block text-sm text-white/90",children:d?"Loading...":`${R.length} problems available`}),v.jsx(fd,{}),v.jsx("div",{className:"relative",children:N?v.jsxs(v.Fragment,{children:[v.jsxs("button",{type:"button",onClick:()=>x(!y),className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-white hover:bg-white/20 rounded-md transition-colors",children:[E?.picture?v.jsx("img",{src:E.picture,alt:E.name||"User",className:"w-8 h-8 rounded-full object-cover border-2 border-white/30"}):v.jsx("div",{className:"w-8 h-8 rounded-full bg-white/30 flex items-center justify-center font-bold",children:E?.name?.[0]?.toUpperCase()||E?.email?.[0]?.toUpperCase()||"U"}),v.jsx("span",{className:"hidden sm:inline",children:E?.name||E?.email}),v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),y&&v.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-[var(--surface)] shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[180px]",children:[v.jsxs("div",{className:"px-4 py-2 border-b border-theme/10",children:[v.jsx("p",{className:"text-sm font-medium text-theme",children:E?.name||"User"}),v.jsx("p",{className:"text-xs text-muted truncate",children:E?.email})]}),v.jsx("button",{type:"button",onClick:()=>{_(),x(!1)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:"Sign Out"})]})]}):v.jsx("button",{type:"button",onClick:()=>w(!0),className:"px-4 py-2 text-sm font-medium bg-white/20 text-white rounded-md hover:bg-white/30 transition-colors",children:"Sign In"})})]})]})})}),v.jsx("div",{className:"pt-16 relative z-10",children:v.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[v.jsxs("div",{className:"text-center mb-12",children:[v.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"System Design Problems"}),v.jsx("p",{className:"text-muted text-lg max-w-2xl mx-auto",children:"Master system design through interactive problem solving"})]}),d&&v.jsxs("div",{className:"text-center py-20",children:[v.jsx("div",{className:"inline-block w-16 h-16 border-4 border-[var(--brand)] border-t-transparent rounded-full animate-spin mb-4"}),v.jsx("div",{className:"text-theme text-xl mb-2",children:"Loading problems..."}),v.jsx("div",{className:"text-muted text-sm",children:"Please wait while we fetch the latest problems"})]}),p&&v.jsx("div",{className:"elevated-card-bg backdrop-blur-md rounded-2xl p-8 mb-6 border-2 border-red-500/20 shadow-lg max-w-2xl mx-auto",children:v.jsxs("div",{className:"text-center",children:[v.jsx("div",{className:"text-6xl mb-4",children:""}),v.jsx("div",{className:"text-theme text-xl font-semibold mb-2",children:"Error Loading Problems"}),v.jsx("div",{className:"text-muted text-sm mb-6",children:p}),v.jsx("button",{type:"button",onClick:()=>globalThis.location.reload(),className:"px-6 py-3 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white font-semibold rounded-xl hover:shadow-lg hover:scale-105 transition-all duration-300 cursor-pointer",children:"Retry"})]})}),!d&&!p&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"elevated-card-bg backdrop-blur-md rounded-2xl shadow-lg p-6 mb-8",children:v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"search-input",className:"block text-sm font-semibold text-theme mb-2",children:" Search"}),v.jsx("input",{id:"search-input",type:"text",placeholder:"Search problems...",value:s,onChange:z=>o(z.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"difficulty-select",className:"block text-sm font-semibold text-theme mb-2",children:" Difficulty"}),v.jsx("select",{id:"difficulty-select",value:t,onChange:z=>n(z.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme appearance-none cursor-pointer transition-all duration-300 hover:border-[var(--brand)]/30",children:B.map(z=>v.jsx("option",{value:z,children:z},z))})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"category-select",className:"block text-sm font-semibold text-theme mb-2",children:" Category"}),v.jsx("select",{id:"category-select",value:r,onChange:z=>i(z.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme appearance-none cursor-pointer transition-all duration-300 hover:border-[var(--brand)]/30",children:D.map(z=>v.jsx("option",{value:z,children:z},z))})]})]})}),v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 pb-12",children:R.map((z,V)=>v.jsxs("div",{className:`group elevated-card-bg backdrop-blur-md rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-500 hover:-translate-y-2 overflow-hidden ${V===0?"delay-0":V===1?"delay-100":V===2?"delay-200":""}`,children:[v.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] rounded-2xl opacity-0 group-hover:opacity-20 blur-xl transition-opacity duration-500"}),v.jsxs("div",{className:"relative p-6",children:[v.jsxs("div",{className:"flex items-start justify-between mb-4",children:[v.jsx("h3",{className:"text-lg font-bold text-theme group-hover:text-[var(--brand)] transition-colors duration-300 line-clamp-2 flex-1",children:z.title}),v.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ml-2 ${$(z.difficulty)}`,children:z.difficulty})]}),v.jsx("p",{className:"text-muted text-sm mb-4 line-clamp-3 leading-relaxed",children:z.description}),v.jsxs("div",{className:"flex items-center justify-between text-sm text-muted mb-4 pb-4 border-b border-[var(--theme)]/10",children:[v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx("span",{children:""})," ",z.category]}),v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx("span",{children:""})," ",z.estimated_time]})]}),v.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[z.tags.slice(0,3).map(Y=>v.jsx("span",{className:"px-3 py-1 bg-[var(--brand)]/10 text-[var(--brand)] text-xs font-semibold rounded-full",children:Y},Y)),z.tags.length>3&&v.jsxs("span",{className:"px-3 py-1 bg-[var(--theme)]/5 text-muted text-xs font-medium rounded-full",children:["+",z.tags.length-3," more"]})]}),v.jsx("button",{type:"button",onClick:Y=>{Y.stopPropagation(),e(`/playground/${z.id}`)},"aria-label":`Start ${z.title}`,className:"w-full px-6 py-3 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white font-semibold rounded-xl hover:shadow-lg hover:scale-105 transition-all duration-300 cursor-pointer group-hover:shadow-xl",children:"Start Problem "})]})]},z.id))}),R.length===0&&!d&&v.jsxs("div",{className:"text-center py-20",children:[v.jsx("div",{className:"text-7xl mb-6",children:""}),v.jsx("div",{className:"text-theme text-2xl font-bold mb-2",children:"No problems found"}),v.jsx("div",{className:"text-muted text-lg",children:"Try adjusting your filters or search terms"})]})]})]})})]}),S&&v.jsx(Xp,{isOpen:S,onClose:()=>w(!1),onLogin:async(z,V)=>{await k({email:z,password:V})},onSignup:async(z,V,Y)=>{await T({email:z,password:V,name:Y})},onGoogleLogin:async z=>{await A(z)}})]})};var g0={exports:{}},y0={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o_;function PK(){if(o_)return y0;o_=1;var e=ud();function t(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,i=e.useEffect,s=e.useLayoutEffect,o=e.useDebugValue;function l(p,g){var y=g(),x=r({inst:{value:y,getSnapshot:g}}),S=x[0].inst,w=x[1];return s(function(){S.value=y,S.getSnapshot=g,u(S)&&w({inst:S})},[p,y,g]),i(function(){return u(S)&&w({inst:S}),p(function(){u(S)&&w({inst:S})})},[p]),o(y),y}function u(p){var g=p.getSnapshot;p=p.value;try{var y=g();return!n(p,y)}catch{return!0}}function d(p,g){return g()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return y0.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:h,y0}var a_;function dB(){return a_||(a_=1,g0.exports=PK()),g0.exports}var fB=dB();function mn(e){this.content=e}mn.prototype={constructor:mn,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return t==-1?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,i=r.find(e),s=r.content.slice();return i==-1?s.push(n||e,t):(s[i+1]=t,n&&(s[i]=n)),new mn(s)},remove:function(e){var t=this.find(e);if(t==-1)return this;var n=this.content.slice();return n.splice(t,2),new mn(n)},addToStart:function(e,t){return new mn([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new mn(n)},addBefore:function(e,t,n){var r=this.remove(t),i=r.content.slice(),s=r.find(e);return i.splice(s==-1?i.length:s,0,t,n),new mn(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return e=mn.from(e),e.size?new mn(e.content.concat(this.subtract(e).content)):this},append:function(e){return e=mn.from(e),e.size?new mn(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=mn.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach(function(t,n){e[t]=n}),e},get size(){return this.content.length>>1}};mn.from=function(e){if(e instanceof mn)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new mn(t)};function hB(e,t,n){for(let r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;let i=e.child(r),s=t.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=hB(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function pB(e,t,n,r){for(let i=e.childCount,s=t.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=e.child(--i),l=t.child(--s),u=o.nodeSize;if(o==l){n-=u,r-=u;continue}if(!o.sameMarkup(l))return{a:n,b:r};if(o.isText&&o.text!=l.text){let d=0,h=Math.min(o.text.length,l.text.length);for(;d<h&&o.text[o.text.length-d-1]==l.text[l.text.length-d-1];)d++,n--,r--;return{a:n,b:r}}if(o.content.size||l.content.size){let d=pB(o.content,l.content,n-1,r-1);if(d)return d}n-=u,r-=u}}class pe{constructor(t,n){if(this.content=t,this.size=n||0,n==null)for(let r=0;r<t.length;r++)this.size+=t[r].nodeSize}nodesBetween(t,n,r,i=0,s){for(let o=0,l=0;l<n;o++){let u=this.content[o],d=l+u.nodeSize;if(d>t&&r(u,i+l,s||null,o)!==!1&&u.content.size){let h=l+1;u.nodesBetween(Math.max(0,t-h),Math.min(u.content.size,n-h),r,i+h)}l=d}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,n,r,i){let s="",o=!0;return this.nodesBetween(t,n,(l,u)=>{let d=l.isText?l.text.slice(Math.max(t,u)-u,n-u):l.isLeaf?i?typeof i=="function"?i(l):i:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&d||l.isTextblock)&&r&&(o?o=!1:s+=r),s+=d},0),s}append(t){if(!t.size)return this;if(!this.size)return t;let n=this.lastChild,r=t.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<t.content.length;s++)i.push(t.content[s]);return new pe(i,this.size+t.size)}cut(t,n=this.size){if(t==0&&n==this.size)return this;let r=[],i=0;if(n>t)for(let s=0,o=0;o<n;s++){let l=this.content[s],u=o+l.nodeSize;u>t&&((o<t||u>n)&&(l.isText?l=l.cut(Math.max(0,t-o),Math.min(l.text.length,n-o)):l=l.cut(Math.max(0,t-o-1),Math.min(l.content.size,n-o-1))),r.push(l),i+=l.nodeSize),o=u}return new pe(r,i)}cutByIndex(t,n){return t==n?pe.empty:t==0&&n==this.content.length?this:new pe(this.content.slice(t,n))}replaceChild(t,n){let r=this.content[t];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[t]=n,new pe(i,s)}addToStart(t){return new pe([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new pe(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(t.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let n=this.content[t];if(!n)throw new RangeError("Index "+t+" out of range for "+this);return n}maybeChild(t){return this.content[t]||null}forEach(t){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];t(i,r,n),r+=i.nodeSize}}findDiffStart(t,n=0){return hB(this,t,n)}findDiffEnd(t,n=this.size,r=t.size){return pB(this,t,n,r)}findIndex(t){if(t==0)return Kf(0,t);if(t==this.size)return Kf(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),s=r+i.nodeSize;if(s>=t)return s==t?Kf(n+1,s):Kf(n,r);r=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,n){if(!n)return pe.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new pe(n.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return pe.empty;let n,r=0;for(let i=0;i<t.length;i++){let s=t[i];r+=s.nodeSize,i&&s.isText&&t[i-1].sameMarkup(s)?(n||(n=t.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new pe(n||t,r)}static from(t){if(!t)return pe.empty;if(t instanceof pe)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new pe([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}pe.empty=new pe([],0);const v0={index:0,offset:0};function Kf(e,t){return v0.index=e,v0.offset=t,v0}function Ih(e,t){if(e===t)return!0;if(!(e&&typeof e=="object")||!(t&&typeof t=="object"))return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!Ih(e[r],t[r]))return!1}else{for(let r in e)if(!(r in t)||!Ih(e[r],t[r]))return!1;for(let r in t)if(!(r in e))return!1}return!0}let ct=class WS{constructor(t,n){this.type=t,this.attrs=n}addToSet(t){let n,r=!1;for(let i=0;i<t.length;i++){let s=t[i];if(this.eq(s))return t;if(this.type.excludes(s.type))n||(n=t.slice(0,i));else{if(s.type.excludes(this.type))return t;!r&&s.type.rank>this.type.rank&&(n||(n=t.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=t.slice()),r||n.push(this),n}removeFromSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return t.slice(0,n).concat(t.slice(n+1));return t}isInSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return!0;return!1}eq(t){return this==t||this.type==t.type&&Ih(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=t.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(t,n){if(t==n)return!0;if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].eq(n[r]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&t.length==0)return WS.none;if(t instanceof WS)return[t];let n=t.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};ct.none=[];class zh extends Error{}class be{constructor(t,n,r){this.content=t,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,n){let r=gB(this.content,t+this.openStart,n);return r&&new be(r,this.openStart,this.openEnd)}removeBetween(t,n){return new be(mB(this.content,t+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,n){if(!n)return be.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new be(pe.fromJSON(t,n.content),r,i)}static maxOpen(t,n=!0){let r=0,i=0;for(let s=t.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=t.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new be(t,r,i)}}be.empty=new be(pe.empty,0,0);function mB(e,t,n){let{index:r,offset:i}=e.findIndex(t),s=e.maybeChild(r),{index:o,offset:l}=e.findIndex(n);if(i==t||s.isText){if(l!=n&&!e.child(o).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return e.replaceChild(r,s.copy(mB(s.content,t-i-1,n-i-1)))}function gB(e,t,n,r){let{index:i,offset:s}=e.findIndex(t),o=e.maybeChild(i);if(s==t||o.isText)return r&&!r.canReplace(i,i,n)?null:e.cut(0,t).append(n).append(e.cut(t));let l=gB(o.content,t-s-1,n,o);return l&&e.replaceChild(i,o.copy(l))}function BK(e,t,n){if(n.openStart>e.depth)throw new zh("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new zh("Inconsistent open depths");return yB(e,t,n,0)}function yB(e,t,n,r){let i=e.index(r),s=e.node(r);if(i==t.index(r)&&r<e.depth-n.openStart){let o=yB(e,t,n,r+1);return s.copy(s.content.replaceChild(i,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&e.depth==r&&t.depth==r){let o=e.parent,l=o.content;return Jo(o,l.cut(0,e.parentOffset).append(n.content).append(l.cut(t.parentOffset)))}else{let{start:o,end:l}=IK(n,e);return Jo(s,bB(e,o,l,t,r))}else return Jo(s,qh(e,t,r))}function vB(e,t){if(!t.type.compatibleContent(e.type))throw new zh("Cannot join "+t.type.name+" onto "+e.type.name)}function XS(e,t,n){let r=e.node(n);return vB(r,t.node(n)),r}function Qo(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function wu(e,t,n,r){let i=(t||e).node(n),s=0,o=t?t.index(n):i.childCount;e&&(s=e.index(n),e.depth>n?s++:e.textOffset&&(Qo(e.nodeAfter,r),s++));for(let l=s;l<o;l++)Qo(i.child(l),r);t&&t.depth==n&&t.textOffset&&Qo(t.nodeBefore,r)}function Jo(e,t){return e.type.checkContent(t),e.copy(t)}function bB(e,t,n,r,i){let s=e.depth>i&&XS(e,t,i+1),o=r.depth>i&&XS(n,r,i+1),l=[];return wu(null,e,i,l),s&&o&&t.index(i)==n.index(i)?(vB(s,o),Qo(Jo(s,bB(e,t,n,r,i+1)),l)):(s&&Qo(Jo(s,qh(e,t,i+1)),l),wu(t,n,i,l),o&&Qo(Jo(o,qh(n,r,i+1)),l)),wu(r,null,i,l),new pe(l)}function qh(e,t,n){let r=[];if(wu(null,e,n,r),e.depth>n){let i=XS(e,t,n+1);Qo(Jo(i,qh(e,t,n+1)),r)}return wu(t,null,n,r),new pe(r)}function IK(e,t){let n=t.depth-e.openStart,i=t.node(n).copy(e.content);for(let s=n-1;s>=0;s--)i=t.node(s).copy(pe.from(i));return{start:i.resolveNoCache(e.openStart+n),end:i.resolveNoCache(i.content.size-e.openEnd-n)}}class Vu{constructor(t,n,r){this.pos=t,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(t){return t==null?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[this.resolveDepth(t)*3]}index(t){return this.path[this.resolveDepth(t)*3+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}start(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,n=this.index(this.depth);if(n==t.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=t.child(n);return r?t.child(n).cut(r):i}get nodeBefore(){let t=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(t).cut(0,n):t==0?null:this.parent.child(t-1)}posAtIndex(t,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<t;s++)i+=r.child(s).nodeSize;return i}marks(){let t=this.parent,n=this.index();if(t.content.size==0)return ct.none;if(this.textOffset)return t.child(n).marks;let r=t.maybeChild(n-1),i=t.maybeChild(n);if(!r){let l=r;r=i,i=l}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(t){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=t.parent.maybeChild(t.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(t){for(let n=this.depth;n>0;n--)if(this.start(n)<=t&&this.end(n)>=t)return n;return 0}blockRange(t=this,n){if(t.pos<this.pos)return t.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);r>=0;r--)if(t.pos<=this.end(r)&&(!n||n(this.node(r))))return new Vh(this,t,r);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let n=1;n<=this.depth;n++)t+=(t?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return t+":"+this.parentOffset}static resolve(t,n){if(!(n>=0&&n<=t.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let o=t;;){let{index:l,offset:u}=o.content.findIndex(s),d=s-u;if(r.push(o,l,i+u),!d||(o=o.child(l),o.isText))break;s=d-1,i+=u+1}return new Vu(n,r,s)}static resolveCached(t,n){let r=l_.get(t);if(r)for(let s=0;s<r.elts.length;s++){let o=r.elts[s];if(o.pos==n)return o}else l_.set(t,r=new zK);let i=r.elts[r.i]=Vu.resolve(t,n);return r.i=(r.i+1)%qK,i}}class zK{constructor(){this.elts=[],this.i=0}}const qK=12,l_=new WeakMap;class Vh{constructor(t,n,r){this.$from=t,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const VK=Object.create(null);let Ks=class ZS{constructor(t,n,r,i=ct.none){this.type=t,this.attrs=n,this.marks=i,this.content=r||pe.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,n,r,i=0){this.content.nodesBetween(t,n,r,i,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,n,r,i){return this.content.textBetween(t,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,n,r){return this.type==t&&Ih(this.attrs,n||t.defaultAttrs||VK)&&ct.sameSet(this.marks,r||ct.none)}copy(t=null){return t==this.content?this:new ZS(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new ZS(this.type,this.attrs,this.content,t)}cut(t,n=this.content.size){return t==0&&n==this.content.size?this:this.copy(this.content.cut(t,n))}slice(t,n=this.content.size,r=!1){if(t==n)return be.empty;let i=this.resolve(t),s=this.resolve(n),o=r?0:i.sharedDepth(n),l=i.start(o),d=i.node(o).content.cut(i.pos-l,s.pos-l);return new be(d,i.depth-o,s.depth-o)}replace(t,n,r){return BK(this.resolve(t),this.resolve(n),r)}nodeAt(t){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(t);if(n=n.maybeChild(r),!n)return null;if(i==t||n.isText)return n;t-=i+1}}childAfter(t){let{index:n,offset:r}=this.content.findIndex(t);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(t){if(t==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(t);if(r<t)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(t){return Vu.resolveCached(this,t)}resolveNoCache(t){return Vu.resolve(this,t)}rangeHasMark(t,n,r){let i=!1;return n>t&&this.nodesBetween(t,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),xB(this.marks,t)}contentMatchAt(t){let n=this.type.contentMatch.matchFragment(this.content,0,t);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(t,n,r=pe.empty,i=0,s=r.childCount){let o=this.contentMatchAt(t).matchFragment(r,i,s),l=o&&o.matchFragment(this.content,n);if(!l||!l.validEnd)return!1;for(let u=i;u<s;u++)if(!this.type.allowsMarks(r.child(u).marks))return!1;return!0}canReplaceWith(t,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(t).matchType(r),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=ct.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),t=r.addToSet(t)}if(!ct.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(n=>n.toJSON())),t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(t.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(n.text,r)}let i=pe.fromJSON(t,n.content),s=t.nodeType(n.type).create(n.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};Ks.prototype.text=void 0;class Hh extends Ks{constructor(t,n,r,i){if(super(t,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):xB(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,n){return this.text.slice(t,n)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new Hh(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new Hh(this.type,this.attrs,t,this.marks)}cut(t=0,n=this.text.length){return t==0&&n==this.text.length?this:this.withText(this.text.slice(t,n))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function xB(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class sa{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,n){let r=new HK(t,n);if(r.next==null)return sa.empty;let i=wB(r);r.next&&r.err("Unexpected trailing text");let s=WK(YK(i));return XK(s,r),s}matchType(t){for(let n=0;n<this.next.length;n++)if(this.next[n].type==t)return this.next[n].next;return null}matchFragment(t,n=0,r=t.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(t.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:n}=this.next[t];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(t){for(let n=0;n<this.next.length;n++)for(let r=0;r<t.next.length;r++)if(this.next[n].type==t.next[r].type)return!0;return!1}fillBefore(t,n=!1,r=0){let i=[this];function s(o,l){let u=o.matchFragment(t,r);if(u&&(!n||u.validEnd))return pe.from(l.map(d=>d.createAndFill()));for(let d=0;d<o.next.length;d++){let{type:h,next:p}=o.next[d];if(!(h.isText||h.hasRequiredAttrs())&&i.indexOf(p)==-1){i.push(p);let g=s(p,l.concat(h));if(g)return g}}return null}return s(this,[])}findWrapping(t){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==t)return this.wrapCache[r+1];let n=this.computeWrapping(t);return this.wrapCache.push(t,n),n}computeWrapping(t){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(t)){let o=[];for(let l=i;l.type;l=l.via)o.push(l.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:l,next:u}=s.next[o];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in n)&&(!i.type||u.validEnd)&&(r.push({match:l.contentMatch,type:l,via:i}),n[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function n(r){t.push(r);for(let i=0;i<r.next.length;i++)t.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),t.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+t.indexOf(r.next[o].next);return s}).join(`
`)}}sa.empty=new sa(!0);class HK{constructor(t,n){this.string=t,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function wB(e){let t=[];do t.push(FK(e));while(e.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function FK(e){let t=[];do t.push(UK(e));while(e.next&&e.next!=")"&&e.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function UK(e){let t=KK(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else if(e.eat("{"))t=$K(e,t);else break;return t}function c_(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function $K(e,t){let n=c_(e),r=n;return e.eat(",")&&(e.next!="}"?r=c_(e):r=-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function GK(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let i=[];for(let s in n){let o=n[s];o.isInGroup(t)&&i.push(o)}return i.length==0&&e.err("No node type or group '"+t+"' found"),i}function KK(e){if(e.eat("(")){let t=wB(e);return e.eat(")")||e.err("Missing closing paren"),t}else if(/\W/.test(e.next))e.err("Unexpected token '"+e.next+"'");else{let t=GK(e,e.next).map(n=>(e.inline==null?e.inline=n.isInline:e.inline!=n.isInline&&e.err("Mixing inline and block content"),{type:"name",value:n}));return e.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function YK(e){let t=[[]];return i(s(e,0),n()),t;function n(){return t.push([])-1}function r(o,l,u){let d={term:u,to:l};return t[o].push(d),d}function i(o,l){o.forEach(u=>u.to=l)}function s(o,l){if(o.type=="choice")return o.exprs.reduce((u,d)=>u.concat(s(d,l)),[]);if(o.type=="seq")for(let u=0;;u++){let d=s(o.exprs[u],l);if(u==o.exprs.length-1)return d;i(d,l=n())}else if(o.type=="star"){let u=n();return r(l,u),i(s(o.expr,u),u),[r(u)]}else if(o.type=="plus"){let u=n();return i(s(o.expr,l),u),i(s(o.expr,u),u),[r(u)]}else{if(o.type=="opt")return[r(l)].concat(s(o.expr,l));if(o.type=="range"){let u=l;for(let d=0;d<o.min;d++){let h=n();i(s(o.expr,u),h),u=h}if(o.max==-1)i(s(o.expr,u),u);else for(let d=o.min;d<o.max;d++){let h=n();r(u,h),i(s(o.expr,u),h),u=h}return[r(u)]}else{if(o.type=="name")return[r(l,void 0,o.value)];throw new Error("Unknown expr type")}}}}function SB(e,t){return t-e}function u_(e,t){let n=[];return r(t),n.sort(SB);function r(i){let s=e[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let o=0;o<s.length;o++){let{term:l,to:u}=s[o];!l&&n.indexOf(u)==-1&&r(u)}}}function WK(e){let t=Object.create(null);return n(u_(e,0));function n(r){let i=[];r.forEach(o=>{e[o].forEach(({term:l,to:u})=>{if(!l)return;let d;for(let h=0;h<i.length;h++)i[h][0]==l&&(d=i[h][1]);u_(e,u).forEach(h=>{d||i.push([l,d=[]]),d.indexOf(h)==-1&&d.push(h)})})});let s=t[r.join(",")]=new sa(r.indexOf(e.length-1)>-1);for(let o=0;o<i.length;o++){let l=i[o][1].sort(SB);s.next.push({type:i[o][0],next:t[l.join(",")]||n(l)})}return s}}function XK(e,t){for(let n=0,r=[e];n<r.length;n++){let i=r[n],s=!i.validEnd,o=[];for(let l=0;l<i.next.length;l++){let{type:u,next:d}=i.next[l];o.push(u.name),s&&!(u.isText||u.hasRequiredAttrs())&&(s=!1),r.indexOf(d)==-1&&r.push(d)}s&&t.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function CB(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function EB(e,t){let n=Object.create(null);for(let r in e){let i=t&&t[r];if(i===void 0){let s=e[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function kB(e,t,n,r){for(let i in t)if(!(i in e))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in e){let s=e[i];s.validate&&s.validate(t[i])}}function TB(e,t){let n=Object.create(null);if(t)for(let r in t)n[r]=new QK(e,r,t[r]);return n}let d_=class NB{constructor(t,n,r){this.name=t,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=TB(t,r.attrs),this.defaultAttrs=CB(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||t=="text"),this.isText=t=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==sa.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(t){return this.groups.indexOf(t)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:EB(this.attrs,t)}create(t=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new Ks(this,this.computeAttrs(t),pe.from(n),ct.setFrom(r))}createChecked(t=null,n,r){return n=pe.from(n),this.checkContent(n),new Ks(this,this.computeAttrs(t),n,ct.setFrom(r))}createAndFill(t=null,n,r){if(t=this.computeAttrs(t),n=pe.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(pe.empty,!0);return s?new Ks(this,t,n.append(s),ct.setFrom(r)):null}validContent(t){let n=this.contentMatch.matchFragment(t);if(!n||!n.validEnd)return!1;for(let r=0;r<t.childCount;r++)if(!this.allowsMarks(t.child(r).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}checkAttrs(t){kB(this.attrs,t,"node",this.name)}allowsMarkType(t){return this.markSet==null||this.markSet.indexOf(t)>-1}allowsMarks(t){if(this.markSet==null)return!0;for(let n=0;n<t.length;n++)if(!this.allowsMarkType(t[n].type))return!1;return!0}allowedMarks(t){if(this.markSet==null)return t;let n;for(let r=0;r<t.length;r++)this.allowsMarkType(t[r].type)?n&&n.push(t[r]):n||(n=t.slice(0,r));return n?n.length?n:ct.none:t}static compile(t,n){let r=Object.create(null);t.forEach((s,o)=>r[s]=new NB(s,n,o));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function ZK(e,t,n){let r=n.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${t} on type ${e}, got ${s}`)}}class QK{constructor(t,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?ZK(t,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Zp{constructor(t,n,r,i){this.name=t,this.rank=n,this.schema=r,this.spec=i,this.attrs=TB(t,i.attrs),this.excluded=null;let s=CB(this.attrs);this.instance=s?new ct(this,s):null}create(t=null){return!t&&this.instance?this.instance:new ct(this,EB(this.attrs,t))}static compile(t,n){let r=Object.create(null),i=0;return t.forEach((s,o)=>r[s]=new Zp(s,i++,n,o)),r}removeFromSet(t){for(var n=0;n<t.length;n++)t[n].type==this&&(t=t.slice(0,n).concat(t.slice(n+1)),n--);return t}isInSet(t){for(let n=0;n<t.length;n++)if(t[n].type==this)return t[n]}checkAttrs(t){kB(this.attrs,t,"mark",this.name)}excludes(t){return this.excluded.indexOf(t)>-1}}class AB{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in t)n[i]=t[i];n.nodes=mn.from(t.nodes),n.marks=mn.from(t.marks||{}),this.nodes=d_.compile(this.spec.nodes,this),this.marks=Zp.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",l=s.spec.marks;if(s.contentMatch=r[o]||(r[o]=sa.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=l=="_"?null:l?f_(this,l.split(" ")):l==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:f_(this,o.split(" "))}this.nodeFromJSON=i=>Ks.fromJSON(this,i),this.markFromJSON=i=>ct.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,n=null,r,i){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof d_){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(n,r,i)}text(t,n){let r=this.nodes.text;return new Hh(r,r.defaultAttrs,t,ct.setFrom(n))}mark(t,n){return typeof t=="string"&&(t=this.marks[t]),t.create(n)}nodeType(t){let n=this.nodes[t];if(!n)throw new RangeError("Unknown node type: "+t);return n}}function f_(e,t){let n=[];for(let r=0;r<t.length;r++){let i=t[r],s=e.marks[i],o=s;if(s)n.push(s);else for(let l in e.marks){let u=e.marks[l];(i=="_"||u.spec.group&&u.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=u)}if(!o)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}function JK(e){return e.tag!=null}function eY(e){return e.style!=null}class Ys{constructor(t,n){this.schema=t,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(JK(i))this.tags.push(i);else if(eY(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=t.nodes[i.node];return s.contentMatch.matchType(s)})}parse(t,n={}){let r=new p_(this,n,!1);return r.addAll(t,ct.none,n.from,n.to),r.finish()}parseSlice(t,n={}){let r=new p_(this,n,!0);return r.addAll(t,ct.none,n.from,n.to),be.maxOpen(r.finish())}matchTag(t,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(rY(t,s.tag)&&(s.namespace===void 0||t.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(t);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(t,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],l=o.style;if(!(l.indexOf(t)!=0||o.context&&!r.matchesContext(o.context)||l.length>t.length&&(l.charCodeAt(t.length)!=61||l.slice(t.length+1)!=n))){if(o.getAttrs){let u=o.getAttrs(n);if(u===!1)continue;o.attrs=u||void 0}return o}}}static schemaRules(t){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let l=n[o];if((l.priority==null?50:l.priority)<s)break}n.splice(o,0,i)}for(let i in t.marks){let s=t.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=m_(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in t.nodes){let s=t.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=m_(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new Ys(t,Ys.schemaRules(t)))}}const MB={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},tY={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},_B={ol:!0,ul:!0},Hu=1,QS=2,Su=4;function h_(e,t,n){return t!=null?(t?Hu:0)|(t==="full"?QS:0):e&&e.whitespace=="pre"?Hu|QS:n&~Su}class Yf{constructor(t,n,r,i,s,o){this.type=t,this.attrs=n,this.marks=r,this.solid=i,this.options=o,this.content=[],this.activeMarks=ct.none,this.match=s||(o&Su?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(pe.from(t));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(t.type))?(this.match=r,i):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&Hu)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=pe.from(this.content);return!t&&this.match&&(n=n.append(this.match.fillBefore(pe.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!MB.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class p_{constructor(t,n,r){this.parser=t,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,s,o=h_(null,n.preserveWhitespace,0)|(r?Su:0);i?s=new Yf(i.type,i.attrs,ct.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new Yf(null,null,ct.none,!0,null,o):s=new Yf(t.schema.topNodeType,null,ct.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t,n){t.nodeType==3?this.addTextNode(t,n):t.nodeType==1&&this.addElement(t,n)}addTextNode(t,n){let r=t.nodeValue,i=this.top,s=i.options&QS?"full":this.localPreserveWS||(i.options&Hu)>0;if(s==="full"||i.inlineContext(t)||/[^ \t\r\n\u000c]/.test(r)){if(s)s!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let o=i.content[i.content.length-1],l=t.previousSibling;(!o||l&&l.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n,!/\S/.test(r)),this.findInText(t)}else this.findInside(t)}addElement(t,n,r){let i=this.localPreserveWS,s=this.top;(t.tagName=="PRE"||/pre/.test(t.style&&t.style.whiteSpace))&&(this.localPreserveWS=!0);let o=t.nodeName.toLowerCase(),l;_B.hasOwnProperty(o)&&this.parser.normalizeLists&&nY(t);let u=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(l=this.parser.matchTag(t,this,r));e:if(u?u.ignore:tY.hasOwnProperty(o))this.findInside(t),this.ignoreFallback(t,n);else if(!u||u.skip||u.closeParent){u&&u.closeParent?this.open=Math.max(0,this.open-1):u&&u.skip.nodeType&&(t=u.skip);let d,h=this.needsBlock;if(MB.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),d=!0,s.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t,n);break e}let p=u&&u.skip?n:this.readStyles(t,n);p&&this.addAll(t,p),d&&this.sync(s),this.needsBlock=h}else{let d=this.readStyles(t,n);d&&this.addElementByRule(t,u,d,u.consuming===!1?l:void 0)}this.localPreserveWS=i}leafFallback(t,n){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`),n)}ignoreFallback(t,n){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(t,n){let r=t.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=r.getPropertyValue(s);if(o)for(let l=void 0;;){let u=this.parser.matchStyle(s,o,this,l);if(!u)break;if(u.ignore)return null;if(u.clearMark?n=n.filter(d=>!u.clearMark(d)):n=n.concat(this.parser.schema.marks[u.mark].create(u.attrs)),u.consuming===!1)l=u;else break}}return n}addElementByRule(t,n,r,i){let s,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r,t.nodeName=="BR")||this.leafFallback(t,r);else{let u=this.enter(o,n.attrs||null,r,n.preserveWhitespace);u&&(s=!0,r=u)}else{let u=this.parser.schema.marks[n.mark];r=r.concat(u.create(n.attrs))}let l=this.top;if(o&&o.isLeaf)this.findInside(t);else if(i)this.addElement(t,r,i);else if(n.getContent)this.findInside(t),n.getContent(t,this.parser.schema).forEach(u=>this.insertNode(u,r,!1));else{let u=t;typeof n.contentElement=="string"?u=t.querySelector(n.contentElement):typeof n.contentElement=="function"?u=n.contentElement(t):n.contentElement&&(u=n.contentElement),this.findAround(t,u,!0),this.addAll(u,r),this.findAround(t,u,!1)}s&&this.sync(l)&&this.open--}addAll(t,n,r,i){let s=r||0;for(let o=r?t.childNodes[r]:t.firstChild,l=i==null?null:t.childNodes[i];o!=l;o=o.nextSibling,++s)this.findAtPoint(t,s),this.addDOM(o,n);this.findAtPoint(t,s)}findPlace(t,n,r){let i,s;for(let o=this.open,l=0;o>=0;o--){let u=this.nodes[o],d=u.findWrapping(t);if(d&&(!i||i.length>d.length+l)&&(i=d,s=u,!d.length))break;if(u.solid){if(r)break;l+=2}}if(!i)return null;this.sync(s);for(let o=0;o<i.length;o++)n=this.enterInner(i[o],null,n,!1);return n}insertNode(t,n,r){if(t.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let i=this.findPlace(t,n,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(t.type));let o=ct.none;for(let l of i.concat(t.marks))(s.type?s.type.allowsMarkType(l.type):g_(l.type,t.type))&&(o=l.addToSet(o));return s.content.push(t.mark(o)),!0}return!1}enter(t,n,r,i){let s=this.findPlace(t.create(n),r,!1);return s&&(s=this.enterInner(t,n,r,!0,i)),s}enterInner(t,n,r,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(t);let l=h_(t,s,o.options);o.options&Su&&o.content.length==0&&(l|=Su);let u=ct.none;return r=r.filter(d=>(o.type?o.type.allowsMarkType(d.type):g_(d.type,t))?(u=d.addToSet(u),!1):!0),this.nodes.push(new Yf(t,n,u,i,null,l)),this.open++,r}closeExtra(t=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(t){for(let n=this.open;n>=0;n--){if(this.nodes[n]==t)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Hu)}return!1}get currentPos(){this.closeExtra();let t=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)t+=r[i].nodeSize;n&&t++}return t}findAtPoint(t,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==t&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&t.nodeType==1&&t.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(t,n,r){if(t!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&t.nodeType==1&&t.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&(this.find[n].pos=this.currentPos-(t.nodeValue.length-this.find[n].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let n=t.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(l,u)=>{for(;l>=0;l--){let d=n[l];if(d==""){if(l==n.length-1||l==0)continue;for(;u>=s;u--)if(o(l-1,u))return!0;return!1}else{let h=u>0||u==0&&i?this.nodes[u].type:r&&u>=s?r.node(u-s).type:null;if(!h||h.name!=d&&!h.isInGroup(d))return!1;u--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let n=t.depth;n>=0;n--){let r=t.node(n).contentMatchAt(t.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function nY(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let r=t.nodeType==1?t.nodeName.toLowerCase():null;r&&_B.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):r=="li"?n=t:r&&(n=null)}}function rY(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function m_(e){let t={};for(let n in e)t[n]=e[n];return t}function g_(e,t){let n=t.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(e))continue;let s=[],o=l=>{s.push(l);for(let u=0;u<l.edgeCount;u++){let{type:d,next:h}=l.edge(u);if(d==t||s.indexOf(h)<0&&o(h))return!0}};if(o(i.contentMatch))return!0}}class ba{constructor(t,n){this.nodes=t,this.marks=n}serializeFragment(t,n={},r){r||(r=b0(n).createDocumentFragment());let i=r,s=[];return t.forEach(o=>{if(s.length||o.marks.length){let l=0,u=0;for(;l<s.length&&u<o.marks.length;){let d=o.marks[u];if(!this.marks[d.type.name]){u++;continue}if(!d.eq(s[l][0])||d.type.spec.spanning===!1)break;l++,u++}for(;l<s.length;)i=s.pop()[1];for(;u<o.marks.length;){let d=o.marks[u++],h=this.serializeMark(d,o.isInline,n);h&&(s.push([d,i]),i.appendChild(h.dom),i=h.contentDOM||h.dom)}}i.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(t,n){let{dom:r,contentDOM:i}=vh(b0(n),this.nodes[t.type.name](t),null,t.attrs);if(i){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,n,i)}return r}serializeNode(t,n={}){let r=this.serializeNodeInner(t,n);for(let i=t.marks.length-1;i>=0;i--){let s=this.serializeMark(t.marks[i],t.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(t,n,r={}){let i=this.marks[t.type.name];return i&&vh(b0(r),i(t,n),null,t.attrs)}static renderSpec(t,n,r=null,i){return vh(t,n,r,i)}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new ba(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let n=y_(t.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(t){return y_(t.marks)}}function y_(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function b0(e){return e.document||window.document}const v_=new WeakMap;function iY(e){let t=v_.get(e);return t===void 0&&v_.set(e,t=sY(e)),t}function sY(e){let t=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")t||(t=[]),t.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(e),t}function vh(e,t,n,r){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let i=t[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=iY(r))&&s.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(n=i.slice(0,o),i=i.slice(o+1));let l,u=n?e.createElementNS(n,i):e.createElement(i),d=t[1],h=1;if(d&&typeof d=="object"&&d.nodeType==null&&!Array.isArray(d)){h=2;for(let p in d)if(d[p]!=null){let g=p.indexOf(" ");g>0?u.setAttributeNS(p.slice(0,g),p.slice(g+1),d[p]):p=="style"&&u.style?u.style.cssText=d[p]:u.setAttribute(p,d[p])}}for(let p=h;p<t.length;p++){let g=t[p];if(g===0){if(p<t.length-1||p>h)throw new RangeError("Content hole must be the only child of its parent node");return{dom:u,contentDOM:u}}else{let{dom:y,contentDOM:x}=vh(e,g,n,r);if(u.appendChild(y),x){if(l)throw new RangeError("Multiple content holes");l=x}}}return{dom:u,contentDOM:l}}const DB=65535,RB=Math.pow(2,16);function oY(e,t){return e+t*RB}function b_(e){return e&DB}function aY(e){return(e-(e&DB))/RB}const OB=1,jB=2,bh=4,LB=8;class JS{constructor(t,n,r){this.pos=t,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&LB)>0}get deletedBefore(){return(this.delInfo&(OB|bh))>0}get deletedAfter(){return(this.delInfo&(jB|bh))>0}get deletedAcross(){return(this.delInfo&bh)>0}}class or{constructor(t,n=!1){if(this.ranges=t,this.inverted=n,!t.length&&or.empty)return or.empty}recover(t){let n=0,r=b_(t);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+aY(t)}mapResult(t,n=1){return this._map(t,n,!1)}map(t,n=1){return this._map(t,n,!0)}_map(t,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let u=this.ranges[l]-(this.inverted?i:0);if(u>t)break;let d=this.ranges[l+s],h=this.ranges[l+o],p=u+d;if(t<=p){let g=d?t==u?-1:t==p?1:n:n,y=u+i+(g<0?0:h);if(r)return y;let x=t==(n<0?u:p)?null:oY(l/3,t-u),S=t==u?jB:t==p?OB:bh;return(n<0?t!=u:t!=p)&&(S|=LB),new JS(y,S,x)}i+=h-d}return r?t+i:new JS(t+i,0,null)}touches(t,n){let r=0,i=b_(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let u=this.ranges[l]-(this.inverted?r:0);if(u>t)break;let d=this.ranges[l+s],h=u+d;if(t<=h&&l==i*3)return!0;r+=this.ranges[l+o]-d}return!1}forEach(t){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],l=o-(this.inverted?s:0),u=o+(this.inverted?0:s),d=this.ranges[i+n],h=this.ranges[i+r];t(l,l+d,u,u+h),s+=h-d}}invert(){return new or(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?or.empty:new or(t<0?[0,-t,0]:[0,0,t])}}or.empty=new or([]);class Fu{constructor(t,n,r=0,i=t?t.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=t||[],this.ownData=!(t||n)}get maps(){return this._maps}slice(t=0,n=this.maps.length){return new Fu(this._maps,this.mirror,t,n)}appendMap(t,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(t),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(t){for(let n=0,r=this._maps.length;n<t._maps.length;n++){let i=t.getMirror(n);this.appendMap(t._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(t){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==t)return this.mirror[n+(n%2?-1:1)]}}setMirror(t,n){this.mirror||(this.mirror=[]),this.mirror.push(t,n)}appendMappingInverted(t){for(let n=t.maps.length-1,r=this._maps.length+t._maps.length;n>=0;n--){let i=t.getMirror(n);this.appendMap(t._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let t=new Fu;return t.appendMappingInverted(this),t}map(t,n=1){if(this.mirror)return this._map(t,n,!0);for(let r=this.from;r<this.to;r++)t=this._maps[r].map(t,n);return t}mapResult(t,n=1){return this._map(t,n,!1)}_map(t,n,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],l=o.mapResult(t,n);if(l.recover!=null){let u=this.getMirror(s);if(u!=null&&u>s&&u<this.to){s=u,t=this._maps[u].recover(l.recover);continue}}i|=l.delInfo,t=l.pos}return r?t:new JS(t,i,null)}}const x0=Object.create(null);class Tn{getMap(){return or.empty}merge(t){return null}static fromJSON(t,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=x0[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in x0)throw new RangeError("Duplicate use of step JSON ID "+t);return x0[t]=n,n.prototype.jsonID=t,n}}class Ut{constructor(t,n){this.doc=t,this.failed=n}static ok(t){return new Ut(t,null)}static fail(t){return new Ut(null,t)}static fromReplace(t,n,r,i){try{return Ut.ok(t.replace(n,r,i))}catch(s){if(s instanceof zh)return Ut.fail(s.message);throw s}}}function CE(e,t,n){let r=[];for(let i=0;i<e.childCount;i++){let s=e.child(i);s.content.size&&(s=s.copy(CE(s.content,t,s))),s.isInline&&(s=t(s,n,i)),r.push(s)}return pe.fromArray(r)}class Us extends Tn{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=t.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new be(CE(n.content,(o,l)=>!o.isAtom||!l.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return Ut.fromReplace(t,this.from,this.to,s)}invert(){return new Ur(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Us(n.pos,r.pos,this.mark)}merge(t){return t instanceof Us&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Us(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Us(n.from,n.to,t.markFromJSON(n.mark))}}Tn.jsonID("addMark",Us);class Ur extends Tn{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=new be(CE(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),t),n.openStart,n.openEnd);return Ut.fromReplace(t,this.from,this.to,r)}invert(){return new Us(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Ur(n.pos,r.pos,this.mark)}merge(t){return t instanceof Ur&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Ur(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Ur(n.from,n.to,t.markFromJSON(n.mark))}}Tn.jsonID("removeMark",Ur);class $s extends Tn{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return Ut.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Ut.fromReplace(t,this.pos,this.pos+1,new be(pe.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new $s(this.pos,n.marks[i]);return new $s(this.pos,this.mark)}}return new oa(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new $s(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new $s(n.pos,t.markFromJSON(n.mark))}}Tn.jsonID("addNodeMark",$s);class oa extends Tn{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return Ut.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Ut.fromReplace(t,this.pos,this.pos+1,new be(pe.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new $s(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new oa(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new oa(n.pos,t.markFromJSON(n.mark))}}Tn.jsonID("removeNodeMark",oa);class an extends Tn{constructor(t,n,r,i=!1){super(),this.from=t,this.to=n,this.slice=r,this.structure=i}apply(t){return this.structure&&eC(t,this.from,this.to)?Ut.fail("Structure replace would overwrite content"):Ut.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new or([this.from,this.to-this.from,this.slice.size])}invert(t){return new an(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new an(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(t){if(!(t instanceof an)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let n=this.slice.size+t.slice.size==0?be.empty:new be(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new an(this.from,this.to+(t.to-t.from),n,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let n=this.slice.size+t.slice.size==0?be.empty:new be(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new an(t.from,this.to,n,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new an(n.from,n.to,be.fromJSON(t,n.slice),!!n.structure)}}Tn.jsonID("replace",an);class cn extends Tn{constructor(t,n,r,i,s,o,l=!1){super(),this.from=t,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=l}apply(t){if(this.structure&&(eC(t,this.from,this.gapFrom)||eC(t,this.gapTo,this.to)))return Ut.fail("Structure gap-replace would overwrite content");let n=t.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Ut.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Ut.fromReplace(t,this.from,this.to,r):Ut.fail("Content does not fit in gap")}getMap(){return new or([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let n=this.gapTo-this.gapFrom;return new cn(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:t.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:t.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new cn(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new cn(n.from,n.to,n.gapFrom,n.gapTo,be.fromJSON(t,n.slice),n.insert,!!n.structure)}}Tn.jsonID("replaceAround",cn);function eC(e,t,n){let r=e.resolve(t),i=n-t,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function lY(e,t,n,r){let i=[],s=[],o,l;e.doc.nodesBetween(t,n,(u,d,h)=>{if(!u.isInline)return;let p=u.marks;if(!r.isInSet(p)&&h.type.allowsMarkType(r.type)){let g=Math.max(d,t),y=Math.min(d+u.nodeSize,n),x=r.addToSet(p);for(let S=0;S<p.length;S++)p[S].isInSet(x)||(o&&o.to==g&&o.mark.eq(p[S])?o.to=y:i.push(o=new Ur(g,y,p[S])));l&&l.to==g?l.to=y:s.push(l=new Us(g,y,r))}}),i.forEach(u=>e.step(u)),s.forEach(u=>e.step(u))}function cY(e,t,n,r){let i=[],s=0;e.doc.nodesBetween(t,n,(o,l)=>{if(!o.isInline)return;s++;let u=null;if(r instanceof Zp){let d=o.marks,h;for(;h=r.isInSet(d);)(u||(u=[])).push(h),d=h.removeFromSet(d)}else r?r.isInSet(o.marks)&&(u=[r]):u=o.marks;if(u&&u.length){let d=Math.min(l+o.nodeSize,n);for(let h=0;h<u.length;h++){let p=u[h],g;for(let y=0;y<i.length;y++){let x=i[y];x.step==s-1&&p.eq(i[y].style)&&(g=x)}g?(g.to=d,g.step=s):i.push({style:p,from:Math.max(l,t),to:d,step:s})}}}),i.forEach(o=>e.step(new Ur(o.from,o.to,o.style)))}function EE(e,t,n,r=n.contentMatch,i=!0){let s=e.doc.nodeAt(t),o=[],l=t+1;for(let u=0;u<s.childCount;u++){let d=s.child(u),h=l+d.nodeSize,p=r.matchType(d.type);if(!p)o.push(new an(l,h,be.empty));else{r=p;for(let g=0;g<d.marks.length;g++)n.allowsMarkType(d.marks[g].type)||e.step(new Ur(l,h,d.marks[g]));if(i&&d.isText&&n.whitespace!="pre"){let g,y=/\r?\n|\r/g,x;for(;g=y.exec(d.text);)x||(x=new be(pe.from(n.schema.text(" ",n.allowedMarks(d.marks))),0,0)),o.push(new an(l+g.index,l+g.index+g[0].length,x))}}l=h}if(!r.validEnd){let u=r.fillBefore(pe.empty,!0);e.replace(l,l,new be(u,0,0))}for(let u=o.length-1;u>=0;u--)e.step(o[u])}function uY(e,t,n){return(t==0||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function Gl(e){let n=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let r=e.depth;;--r){let i=e.$from.node(r),s=e.$from.index(r),o=e.$to.indexAfter(r);if(r<e.depth&&i.canReplace(s,o,n))return r;if(r==0||i.type.spec.isolating||!uY(i,s,o))break}return null}function dY(e,t,n){let{$from:r,$to:i,depth:s}=t,o=r.before(s+1),l=i.after(s+1),u=o,d=l,h=pe.empty,p=0;for(let x=s,S=!1;x>n;x--)S||r.index(x)>0?(S=!0,h=pe.from(r.node(x).copy(h)),p++):u--;let g=pe.empty,y=0;for(let x=s,S=!1;x>n;x--)S||i.after(x+1)<i.end(x)?(S=!0,g=pe.from(i.node(x).copy(g)),y++):d++;e.step(new cn(u,d,o,l,new be(h.append(g),p,y),h.size-p,!0))}function kE(e,t,n=null,r=e){let i=fY(e,t),s=i&&hY(r,t);return s?i.map(x_).concat({type:t,attrs:n}).concat(s.map(x_)):null}function x_(e){return{type:e,attrs:null}}function fY(e,t){let{parent:n,startIndex:r,endIndex:i}=e,s=n.contentMatchAt(r).findWrapping(t);if(!s)return null;let o=s.length?s[0]:t;return n.canReplaceWith(r,i,o)?s:null}function hY(e,t){let{parent:n,startIndex:r,endIndex:i}=e,s=n.child(r),o=t.contentMatch.findWrapping(s.type);if(!o)return null;let u=(o.length?o[o.length-1]:t).contentMatch;for(let d=r;u&&d<i;d++)u=u.matchType(n.child(d).type);return!u||!u.validEnd?null:o}function pY(e,t,n){let r=pe.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let l=n[o].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=pe.from(n[o].type.create(n[o].attrs,r))}let i=t.start,s=t.end;e.step(new cn(i,s,i,s,new be(r,0,0),n.length,!0))}function mY(e,t,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=e.steps.length;e.doc.nodesBetween(t,n,(o,l)=>{let u=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(r,u)&&gY(e.doc,e.mapping.slice(s).map(l),r)){let d=null;if(r.schema.linebreakReplacement){let y=r.whitespace=="pre",x=!!r.contentMatch.matchType(r.schema.linebreakReplacement);y&&!x?d=!1:!y&&x&&(d=!0)}d===!1&&BB(e,o,l,s),EE(e,e.mapping.slice(s).map(l,1),r,void 0,d===null);let h=e.mapping.slice(s),p=h.map(l,1),g=h.map(l+o.nodeSize,1);return e.step(new cn(p,g,p+1,g-1,new be(pe.from(r.create(u,null,o.marks)),0,0),1,!0)),d===!0&&PB(e,o,l,s),!1}})}function PB(e,t,n,r){t.forEach((i,s)=>{if(i.isText){let o,l=/\r?\n|\r/g;for(;o=l.exec(i.text);){let u=e.mapping.slice(r).map(n+1+s+o.index);e.replaceWith(u,u+1,t.type.schema.linebreakReplacement.create())}}})}function BB(e,t,n,r){t.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=e.mapping.slice(r).map(n+1+s);e.replaceWith(o,o+1,t.type.schema.text(`
`))}})}function gY(e,t,n){let r=e.resolve(t),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function yY(e,t,n,r,i){let s=e.doc.nodeAt(t);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return e.replaceWith(t,t+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new cn(t,t+s.nodeSize,t+1,t+s.nodeSize-1,new be(pe.from(o),0,0),1,!0))}function Yi(e,t,n=1,r){let i=e.resolve(t),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let d=i.depth-1,h=n-2;d>s;d--,h--){let p=i.node(d),g=i.index(d);if(p.type.spec.isolating)return!1;let y=p.content.cutByIndex(g,p.childCount),x=r&&r[h+1];x&&(y=y.replaceChild(0,x.type.create(x.attrs)));let S=r&&r[h]||p;if(!p.canReplace(g+1,p.childCount)||!S.type.validContent(y))return!1}let l=i.indexAfter(s),u=r&&r[0];return i.node(s).canReplaceWith(l,l,u?u.type:i.node(s+1).type)}function vY(e,t,n=1,r){let i=e.doc.resolve(t),s=pe.empty,o=pe.empty;for(let l=i.depth,u=i.depth-n,d=n-1;l>u;l--,d--){s=pe.from(i.node(l).copy(s));let h=r&&r[d];o=pe.from(h?h.type.create(h.attrs,o):i.node(l).copy(o))}e.step(new an(t,t,new be(s.append(o),n,n),!0))}function oo(e,t){let n=e.resolve(t),r=n.index();return IB(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function bY(e,t){t.content.size||e.type.compatibleContent(t.type);let n=e.contentMatchAt(e.childCount),{linebreakReplacement:r}=e.type.schema;for(let i=0;i<t.childCount;i++){let s=t.child(i),o=s.type==r?e.type.schema.nodes.text:s.type;if(n=n.matchType(o),!n||!e.type.allowsMarks(s.marks))return!1}return n.validEnd}function IB(e,t){return!!(e&&t&&!e.isLeaf&&bY(e,t))}function Qp(e,t,n=-1){let r=e.resolve(t);for(let i=r.depth;;i--){let s,o,l=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):n>0?(s=r.node(i+1),l++,o=r.node(i).maybeChild(l)):(s=r.node(i).maybeChild(l-1),o=r.node(i+1)),s&&!s.isTextblock&&IB(s,o)&&r.node(i).canReplace(l,l+1))return t;if(i==0)break;t=n<0?r.before(i):r.after(i)}}function xY(e,t,n){let r=null,{linebreakReplacement:i}=e.doc.type.schema,s=e.doc.resolve(t-n),o=s.node().type;if(i&&o.inlineContent){let h=o.whitespace=="pre",p=!!o.contentMatch.matchType(i);h&&!p?r=!1:!h&&p&&(r=!0)}let l=e.steps.length;if(r===!1){let h=e.doc.resolve(t+n);BB(e,h.node(),h.before(),l)}o.inlineContent&&EE(e,t+n-1,o,s.node().contentMatchAt(s.index()),r==null);let u=e.mapping.slice(l),d=u.map(t-n);if(e.step(new an(d,u.map(t+n,-1),be.empty,!0)),r===!0){let h=e.doc.resolve(d);PB(e,h.node(),h.before(),e.steps.length)}return e}function wY(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function zB(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=r.depth;o>=0;o--){let l=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,u=r.index(o)+(l>0?1:0),d=r.node(o),h=!1;if(s==1)h=d.canReplace(u,u,i);else{let p=d.contentMatchAt(u).findWrapping(i.firstChild.type);h=p&&d.canReplaceWith(u,u,p[0])}if(h)return l==0?r.pos:l<0?r.before(o+1):r.after(o+1)}return null}function Jp(e,t,n=t,r=be.empty){if(t==n&&!r.size)return null;let i=e.resolve(t),s=e.resolve(n);return qB(i,s,r)?new an(t,n,r):new SY(i,s,r).fit()}function qB(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}class SY{constructor(t,n,r){this.$from=t,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=pe.empty;for(let i=0;i<=t.depth;i++){let s=t.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(t.indexAfter(i))})}for(let i=t.depth;i>0;i--)this.placed=pe.from(t.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let d=this.findFittable();d?this.placeNodes(d):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(t<0?this.$to:r.doc.resolve(t));if(!i)return null;let s=this.placed,o=r.depth,l=i.depth;for(;o&&l&&s.childCount==1;)s=s.firstChild.content,o--,l--;let u=new be(s,o,l);return t>-1?new cn(r.pos,t,this.$to.pos,this.$to.end(),u,n):u.size||r.pos!=this.$to.pos?new an(r.pos,i.pos,u):null}findFittable(){let t=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<t;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){t=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?t:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=w0(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let l=this.depth;l>=0;l--){let{type:u,match:d}=this.frontier[l],h,p=null;if(n==1&&(o?d.matchType(o.type)||(p=d.fillBefore(pe.from(o),!1)):s&&u.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:l,parent:s,inject:p};if(n==2&&o&&(h=d.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:l,parent:s,wrap:h};if(s&&d.matchType(s.type))break}}}openMore(){let{content:t,openStart:n,openEnd:r}=this.unplaced,i=w0(t,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new be(t,n+1,Math.max(r,i.size+n>=t.size-r?n+1:0)),!0)}dropNode(){let{content:t,openStart:n,openEnd:r}=this.unplaced,i=w0(t,n);if(i.childCount<=1&&n>0){let s=t.size-n<=n+i.size;this.unplaced=new be(au(t,n-1,1),n-1,s?n-1:r)}else this.unplaced=new be(au(t,n,1),n,r)}placeNodes({sliceDepth:t,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let S=0;S<s.length;S++)this.openFrontierNode(s[S]);let o=this.unplaced,l=r?r.content:o.content,u=o.openStart-t,d=0,h=[],{match:p,type:g}=this.frontier[n];if(i){for(let S=0;S<i.childCount;S++)h.push(i.child(S));p=p.matchFragment(i)}let y=l.size+t-(o.content.size-o.openEnd);for(;d<l.childCount;){let S=l.child(d),w=p.matchType(S.type);if(!w)break;d++,(d>1||u==0||S.content.size)&&(p=w,h.push(VB(S.mark(g.allowedMarks(S.marks)),d==1?u:0,d==l.childCount?y:-1)))}let x=d==l.childCount;x||(y=-1),this.placed=lu(this.placed,n,pe.from(h)),this.frontier[n].match=p,x&&y<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let S=0,w=l;S<y;S++){let E=w.lastChild;this.frontier.push({type:E.type,match:E.contentMatchAt(E.childCount)}),w=E.content}this.unplaced=x?t==0?be.empty:new be(au(o.content,t-1,1),t-1,y<0?o.openEnd:t-1):new be(au(o.content,t,d),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],n;if(!t.type.isTextblock||!S0(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(t){e:for(let n=Math.min(this.depth,t.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<t.depth&&t.end(n+1)==t.pos+(t.depth-(n+1)),o=S0(t,n,i,r,s);if(o){for(let l=n-1;l>=0;l--){let{match:u,type:d}=this.frontier[l],h=S0(t,l,d,u,!0);if(!h||h.childCount)continue e}return{depth:n,fit:o,move:s?t.doc.resolve(t.after(n+1)):t}}}}close(t){let n=this.findCloseLevel(t);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=lu(this.placed,n.depth,n.fit)),t=n.move;for(let r=n.depth+1;r<=t.depth;r++){let i=t.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,t.index(r));this.openFrontierNode(i.type,i.attrs,s)}return t}openFrontierNode(t,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(t),this.placed=lu(this.placed,this.depth,pe.from(t.create(n,r))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(pe.empty,!0);n.childCount&&(this.placed=lu(this.placed,this.frontier.length,n))}}function au(e,t,n){return t==0?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(au(e.firstChild.content,t-1,n)))}function lu(e,t,n){return t==0?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(lu(e.lastChild.content,t-1,n)))}function w0(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function VB(e,t,n){if(t<=0)return e;let r=e.content;return t>1&&(r=r.replaceChild(0,VB(r.firstChild,t-1,r.childCount==1?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(pe.empty,!0)))),e.copy(r)}function S0(e,t,n,r,i){let s=e.node(t),o=i?e.indexAfter(t):e.index(t);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let l=r.fillBefore(s.content,!0,o);return l&&!CY(n,s.content,o)?l:null}function CY(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}function EY(e){return e.spec.defining||e.spec.definingForContent}function kY(e,t,n,r){if(!r.size)return e.deleteRange(t,n);let i=e.doc.resolve(t),s=e.doc.resolve(n);if(qB(i,s,r))return e.step(new an(t,n,r));let o=FB(i,e.doc.resolve(n));o[o.length-1]==0&&o.pop();let l=-(i.depth+1);o.unshift(l);for(let g=i.depth,y=i.pos-1;g>0;g--,y--){let x=i.node(g).type.spec;if(x.defining||x.definingAsContext||x.isolating)break;o.indexOf(g)>-1?l=g:i.before(g)==y&&o.splice(1,0,-g)}let u=o.indexOf(l),d=[],h=r.openStart;for(let g=r.content,y=0;;y++){let x=g.firstChild;if(d.push(x),y==r.openStart)break;g=x.content}for(let g=h-1;g>=0;g--){let y=d[g],x=EY(y.type);if(x&&!y.sameMarkup(i.node(Math.abs(l)-1)))h=g;else if(x||!y.type.isTextblock)break}for(let g=r.openStart;g>=0;g--){let y=(g+h+1)%(r.openStart+1),x=d[y];if(x)for(let S=0;S<o.length;S++){let w=o[(S+u)%o.length],E=!0;w<0&&(E=!1,w=-w);let N=i.node(w-1),k=i.index(w-1);if(N.canReplaceWith(k,k,x.type,x.marks))return e.replace(i.before(w),E?s.after(w):n,new be(HB(r.content,0,r.openStart,y),y,r.openEnd))}}let p=e.steps.length;for(let g=o.length-1;g>=0&&(e.replace(t,n,r),!(e.steps.length>p));g--){let y=o[g];y<0||(t=i.before(y),n=s.after(y))}}function HB(e,t,n,r,i){if(t<n){let s=e.firstChild;e=e.replaceChild(0,s.copy(HB(s.content,t+1,n,r,s)))}if(t>r){let s=i.contentMatchAt(0),o=s.fillBefore(e).append(e);e=o.append(s.matchFragment(o).fillBefore(pe.empty,!0))}return e}function TY(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let i=wY(e.doc,t,r.type);i!=null&&(t=n=i)}e.replaceRange(t,n,new be(pe.from(r),0,0))}function NY(e,t,n){let r=e.doc.resolve(t),i=e.doc.resolve(n),s=FB(r,i);for(let o=0;o<s.length;o++){let l=s[o],u=o==s.length-1;if(u&&l==0||r.node(l).type.contentMatch.validEnd)return e.delete(r.start(l),i.end(l));if(l>0&&(u||r.node(l-1).canReplace(r.index(l-1),i.indexAfter(l-1))))return e.delete(r.before(l),i.after(l))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(t-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o&&r.start(o-1)==i.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),i.index(o-1)))return e.delete(r.before(o),n);e.delete(t,n)}function FB(e,t){let n=[],r=Math.min(e.depth,t.depth);for(let i=r;i>=0;i--){let s=e.start(i);if(s<e.pos-(e.depth-i)||t.end(i)>t.pos+(t.depth-i)||e.node(i).type.spec.isolating||t.node(i).type.spec.isolating)break;(s==t.start(i)||i==e.depth&&i==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&i&&t.start(i-1)==s-1)&&n.push(i)}return n}class Tl extends Tn{constructor(t,n,r){super(),this.pos=t,this.attr=n,this.value=r}apply(t){let n=t.nodeAt(this.pos);if(!n)return Ut.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return Ut.fromReplace(t,this.pos,this.pos+1,new be(pe.from(i),0,n.isLeaf?0:1))}getMap(){return or.empty}invert(t){return new Tl(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new Tl(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Tl(n.pos,n.attr,n.value)}}Tn.jsonID("attr",Tl);class Uu extends Tn{constructor(t,n){super(),this.attr=t,this.value=n}apply(t){let n=Object.create(null);for(let i in t.attrs)n[i]=t.attrs[i];n[this.attr]=this.value;let r=t.type.create(n,t.content,t.marks);return Ut.ok(r)}getMap(){return or.empty}invert(t){return new Uu(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Uu(n.attr,n.value)}}Tn.jsonID("docAttr",Uu);let Rl=class extends Error{};Rl=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n};Rl.prototype=Object.create(Error.prototype);Rl.prototype.constructor=Rl;Rl.prototype.name="TransformError";let UB=class{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new Fu}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let n=this.maybeStep(t);if(n.failed)throw new Rl(n.failed);return this}maybeStep(t){let n=t.apply(this.doc);return n.failed||this.addStep(t,n.doc),n}get docChanged(){return this.steps.length>0}addStep(t,n){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=n}replace(t,n=t,r=be.empty){let i=Jp(this.doc,t,n,r);return i&&this.step(i),this}replaceWith(t,n,r){return this.replace(t,n,new be(pe.from(r),0,0))}delete(t,n){return this.replace(t,n,be.empty)}insert(t,n){return this.replaceWith(t,t,n)}replaceRange(t,n,r){return kY(this,t,n,r),this}replaceRangeWith(t,n,r){return TY(this,t,n,r),this}deleteRange(t,n){return NY(this,t,n),this}lift(t,n){return dY(this,t,n),this}join(t,n=1){return xY(this,t,n),this}wrap(t,n){return pY(this,t,n),this}setBlockType(t,n=t,r,i=null){return mY(this,t,n,r,i),this}setNodeMarkup(t,n,r=null,i){return yY(this,t,n,r,i),this}setNodeAttribute(t,n,r){return this.step(new Tl(t,n,r)),this}setDocAttribute(t,n){return this.step(new Uu(t,n)),this}addNodeMark(t,n){return this.step(new $s(t,n)),this}removeNodeMark(t,n){let r=this.doc.nodeAt(t);if(!r)throw new RangeError("No node at position "+t);if(n instanceof ct)n.isInSet(r.marks)&&this.step(new oa(t,n));else{let i=r.marks,s,o=[];for(;s=n.isInSet(i);)o.push(new oa(t,s)),i=s.removeFromSet(i);for(let l=o.length-1;l>=0;l--)this.step(o[l])}return this}split(t,n=1,r){return vY(this,t,n,r),this}addMark(t,n,r){return lY(this,t,n,r),this}removeMark(t,n,r){return cY(this,t,n,r),this}clearIncompatible(t,n,r){return EE(this,t,n,r),this}};const C0=Object.create(null);let Ue=class{constructor(t,n,r){this.$anchor=t,this.$head=n,this.ranges=r||[new AY(t.min(n),t.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let n=0;n<t.length;n++)if(t[n].$from.pos!=t[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,n=be.empty){let r=n.content.lastChild,i=null;for(let l=0;l<n.openEnd;l++)i=r,r=r.lastChild;let s=t.steps.length,o=this.ranges;for(let l=0;l<o.length;l++){let{$from:u,$to:d}=o[l],h=t.mapping.slice(s);t.replaceRange(h.map(u.pos),h.map(d.pos),l?be.empty:n),l==0&&C_(t,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(t,n){let r=t.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:l}=i[s],u=t.mapping.slice(r),d=u.map(o.pos),h=u.map(l.pos);s?t.deleteRange(d,h):(t.replaceRangeWith(d,h,n),C_(t,r,n.isInline?-1:1))}}static findFrom(t,n,r=!1){let i=t.parent.inlineContent?new Ve(t):hl(t.node(0),t.parent,t.pos,t.index(),n,r);if(i)return i;for(let s=t.depth-1;s>=0;s--){let o=n<0?hl(t.node(0),t.node(s),t.before(s+1),t.index(s),n,r):hl(t.node(0),t.node(s),t.after(s+1),t.index(s)+1,n,r);if(o)return o}return null}static near(t,n=1){return this.findFrom(t,n)||this.findFrom(t,-n)||new lr(t.node(0))}static atStart(t){return hl(t,t,0,0,1)||new lr(t)}static atEnd(t){return hl(t,t,t.content.size,t.childCount,-1)||new lr(t)}static fromJSON(t,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=C0[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in C0)throw new RangeError("Duplicate use of selection JSON ID "+t);return C0[t]=n,n.prototype.jsonID=t,n}getBookmark(){return Ve.between(this.$anchor,this.$head).getBookmark()}};Ue.prototype.visible=!0;class AY{constructor(t,n){this.$from=t,this.$to=n}}let w_=!1;function S_(e){!w_&&!e.parent.inlineContent&&(w_=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class Ve extends Ue{constructor(t,n=t){S_(t),S_(n),super(t,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,n){let r=t.resolve(n.map(this.head));if(!r.parent.inlineContent)return Ue.near(r);let i=t.resolve(n.map(this.anchor));return new Ve(i.parent.inlineContent?i:r,r)}replace(t,n=be.empty){if(super.replace(t,n),n==be.empty){let r=this.$from.marksAcross(this.$to);r&&t.ensureMarks(r)}}eq(t){return t instanceof Ve&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new em(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Ve(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,r=n){let i=t.resolve(n);return new this(i,r==n?i:t.resolve(r))}static between(t,n,r){let i=t.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=Ue.findFrom(n,r,!0)||Ue.findFrom(n,-r,!0);if(s)n=s.$head;else return Ue.near(n,r)}return t.parent.inlineContent||(i==0?t=n:(t=(Ue.findFrom(t,-r,!0)||Ue.findFrom(t,r,!0)).$anchor,t.pos<n.pos!=i<0&&(t=n))),new Ve(t,n)}}Ue.jsonID("text",Ve);class em{constructor(t,n){this.anchor=t,this.head=n}map(t){return new em(t.map(this.anchor),t.map(this.head))}resolve(t){return Ve.between(t.resolve(this.anchor),t.resolve(this.head))}}class Re extends Ue{constructor(t){let n=t.nodeAfter,r=t.node(0).resolve(t.pos+n.nodeSize);super(t,r),this.node=n}map(t,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=t.resolve(i);return r?Ue.near(s):new Re(s)}content(){return new be(pe.from(this.node),0,0)}eq(t){return t instanceof Re&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new TE(this.anchor)}static fromJSON(t,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Re(t.resolve(n.anchor))}static create(t,n){return new Re(t.resolve(n))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}}Re.prototype.visible=!1;Ue.jsonID("node",Re);class TE{constructor(t){this.anchor=t}map(t){let{deleted:n,pos:r}=t.mapResult(this.anchor);return n?new em(r,r):new TE(r)}resolve(t){let n=t.resolve(this.anchor),r=n.nodeAfter;return r&&Re.isSelectable(r)?new Re(n):Ue.near(n)}}class lr extends Ue{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,n=be.empty){if(n==be.empty){t.delete(0,t.doc.content.size);let r=Ue.atStart(t.doc);r.eq(t.selection)||t.setSelection(r)}else super.replace(t,n)}toJSON(){return{type:"all"}}static fromJSON(t){return new lr(t)}map(t){return new lr(t)}eq(t){return t instanceof lr}getBookmark(){return MY}}Ue.jsonID("all",lr);const MY={map(){return this},resolve(e){return new lr(e)}};function hl(e,t,n,r,i,s=!1){if(t.inlineContent)return Ve.create(e,n);for(let o=r-(i>0?0:1);i>0?o<t.childCount:o>=0;o+=i){let l=t.child(o);if(l.isAtom){if(!s&&Re.isSelectable(l))return Re.create(e,n-(i<0?l.nodeSize:0))}else{let u=hl(e,l,n+i,i<0?l.childCount:0,i,s);if(u)return u}n+=l.nodeSize*i}return null}function C_(e,t,n){let r=e.steps.length-1;if(r<t)return;let i=e.steps[r];if(!(i instanceof an||i instanceof cn))return;let s=e.mapping.maps[r],o;s.forEach((l,u,d,h)=>{o==null&&(o=h)}),e.setSelection(Ue.near(e.doc.resolve(o),n))}const E_=1,Wf=2,k_=4;class _Y extends UB{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|E_)&~Wf,this.storedMarks=null,this}get selectionSet(){return(this.updated&E_)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=Wf,this}ensureMarks(t){return ct.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Wf)>0}addStep(t,n){super.addStep(t,n),this.updated=this.updated&~Wf,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,n=!0){let r=this.selection;return n&&(t=t.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||ct.none))),r.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,n,r){let i=this.doc.type.schema;if(n==null)return t?this.replaceSelectionWith(i.text(t),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!t)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(t,s)),this.selection.empty||this.setSelection(Ue.near(this.selection.$to)),this}}setMeta(t,n){return this.meta[typeof t=="string"?t:t.key]=n,this}getMeta(t){return this.meta[typeof t=="string"?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=k_,this}get scrolledIntoView(){return(this.updated&k_)>0}}function T_(e,t){return!t||!e?e:e.bind(t)}class cu{constructor(t,n,r){this.name=t,this.init=T_(n.init,r),this.apply=T_(n.apply,r)}}const DY=[new cu("doc",{init(e){return e.doc||e.schema.topNodeType.createAndFill()},apply(e){return e.doc}}),new cu("selection",{init(e,t){return e.selection||Ue.atStart(t.doc)},apply(e){return e.selection}}),new cu("storedMarks",{init(e){return e.storedMarks||null},apply(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new cu("scrollToSelection",{init(){return 0},apply(e,t){return e.scrolledIntoView?t+1:t}})];class E0{constructor(t,n){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=DY.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new cu(r.key,r.spec.state,r))})}}class Sl{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let n=[t],r=this.applyInner(t),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let l=this.config.plugins[o];if(l.spec.appendTransaction){let u=i?i[o].n:0,d=i?i[o].state:this,h=u<n.length&&l.spec.appendTransaction.call(l,u?n.slice(u):n,d,r);if(h&&r.filterTransaction(h,o)){if(h.setMeta("appendedTransaction",t),!i){i=[];for(let p=0;p<this.config.plugins.length;p++)i.push(p<o?{state:r,n:n.length}:{state:this,n:0})}n.push(h),r=r.applyInner(h),s=!0}i&&(i[o]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Sl(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(t,this[s.name],this,n)}return n}get tr(){return new _Y(this)}static create(t){let n=new E0(t.doc?t.doc.type.schema:t.schema,t.plugins),r=new Sl(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(t,r);return r}reconfigure(t){let n=new E0(this.schema,t.plugins),r=n.fields,i=new Sl(n);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(t,i)}return i}toJSON(t){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),t&&typeof t=="object")for(let r in t){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=t[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(t,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let i=new E0(t.schema,t.plugins),s=new Sl(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=Ks.fromJSON(t.schema,n.doc);else if(o.name=="selection")s.selection=Ue.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(t.schema.markFromJSON));else{if(r)for(let l in r){let u=r[l],d=u.spec.state;if(u.key==o.name&&d&&d.fromJSON&&Object.prototype.hasOwnProperty.call(n,l)){s[o.name]=d.fromJSON.call(u,t,n[l],s);return}}s[o.name]=o.init(t,s)}}),s}}function $B(e,t,n){for(let r in e){let i=e[r];i instanceof Function?i=i.bind(t):r=="handleDOMEvents"&&(i=$B(i,t,{})),n[r]=i}return n}class _t{constructor(t){this.spec=t,this.props={},t.props&&$B(t.props,this,this.props),this.key=t.key?t.key.key:GB("plugin")}getState(t){return t[this.key]}}const k0=Object.create(null);function GB(e){return e in k0?e+"$"+ ++k0[e]:(k0[e]=0,e+"$")}class dn{constructor(t="key"){this.key=GB(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}const yn=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},Ol=function(e){let t=e.assignedSlot||e.parentNode;return t&&t.nodeType==11?t.host:t};let tC=null;const $i=function(e,t,n){let r=tC||(tC=document.createRange());return r.setEnd(e,n??e.nodeValue.length),r.setStart(e,t||0),r},RY=function(){tC=null},aa=function(e,t,n,r){return n&&(N_(e,t,n,r,-1)||N_(e,t,n,r,1))},OY=/^(img|br|input|textarea|hr)$/i;function N_(e,t,n,r,i){for(var s;;){if(e==n&&t==r)return!0;if(t==(i<0?0:Tr(e))){let o=e.parentNode;if(!o||o.nodeType!=1||vd(e)||OY.test(e.nodeName)||e.contentEditable=="false")return!1;t=yn(e)+(i<0?0:1),e=o}else if(e.nodeType==1){let o=e.childNodes[t+(i<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)t+=i;else return!1;else e=o,t=i<0?Tr(e):0}else return!1}}function Tr(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function jY(e,t){for(;;){if(e.nodeType==3&&t)return e;if(e.nodeType==1&&t>0){if(e.contentEditable=="false")return null;e=e.childNodes[t-1],t=Tr(e)}else if(e.parentNode&&!vd(e))t=yn(e),e=e.parentNode;else return null}}function LY(e,t){for(;;){if(e.nodeType==3&&t<e.nodeValue.length)return e;if(e.nodeType==1&&t<e.childNodes.length){if(e.contentEditable=="false")return null;e=e.childNodes[t],t=0}else if(e.parentNode&&!vd(e))t=yn(e)+1,e=e.parentNode;else return null}}function PY(e,t,n){for(let r=t==0,i=t==Tr(e);r||i;){if(e==n)return!0;let s=yn(e);if(e=e.parentNode,!e)return!1;r=r&&s==0,i=i&&s==Tr(e)}}function vd(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const tm=function(e){return e.focusNode&&aa(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function Vo(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function BY(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function IY(e,t,n){if(e.caretPositionFromPoint)try{let r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:Math.min(Tr(r.offsetNode),r.offset)}}catch{}if(e.caretRangeFromPoint){let r=e.caretRangeFromPoint(t,n);if(r)return{node:r.startContainer,offset:Math.min(Tr(r.startContainer),r.startOffset)}}}const vi=typeof navigator<"u"?navigator:null,A_=typeof document<"u"?document:null,ao=vi&&vi.userAgent||"",nC=/Edge\/(\d+)/.exec(ao),KB=/MSIE \d/.exec(ao),rC=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(ao),Fn=!!(KB||rC||nC),Ws=KB?document.documentMode:rC?+rC[1]:nC?+nC[1]:0,_r=!Fn&&/gecko\/(\d+)/i.test(ao);_r&&+(/Firefox\/(\d+)/.exec(ao)||[0,0])[1];const iC=!Fn&&/Chrome\/(\d+)/.exec(ao),kn=!!iC,YB=iC?+iC[1]:0,_n=!Fn&&!!vi&&/Apple Computer/.test(vi.vendor),jl=_n&&(/Mobile\/\w+/.test(ao)||!!vi&&vi.maxTouchPoints>2),kr=jl||(vi?/Mac/.test(vi.platform):!1),zY=vi?/Win/.test(vi.platform):!1,Gi=/Android \d/.test(ao),bd=!!A_&&"webkitFontSmoothing"in A_.documentElement.style,qY=bd?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function VY(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function qi(e,t){return typeof e=="number"?e:e[t]}function HY(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function M_(e,t,n){let r=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,s=e.dom.ownerDocument;for(let o=n||e.dom;o;){if(o.nodeType!=1){o=Ol(o);continue}let l=o,u=l==s.body,d=u?VY(s):HY(l),h=0,p=0;if(t.top<d.top+qi(r,"top")?p=-(d.top-t.top+qi(i,"top")):t.bottom>d.bottom-qi(r,"bottom")&&(p=t.bottom-t.top>d.bottom-d.top?t.top+qi(i,"top")-d.top:t.bottom-d.bottom+qi(i,"bottom")),t.left<d.left+qi(r,"left")?h=-(d.left-t.left+qi(i,"left")):t.right>d.right-qi(r,"right")&&(h=t.right-d.right+qi(i,"right")),h||p)if(u)s.defaultView.scrollBy(h,p);else{let y=l.scrollLeft,x=l.scrollTop;p&&(l.scrollTop+=p),h&&(l.scrollLeft+=h);let S=l.scrollLeft-y,w=l.scrollTop-x;t={left:t.left-S,top:t.top-w,right:t.right-S,bottom:t.bottom-w}}let g=u?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(g))break;o=g=="absolute"?o.offsetParent:Ol(o)}}function FY(e){let t=e.dom.getBoundingClientRect(),n=Math.max(0,t.top),r,i;for(let s=(t.left+t.right)/2,o=n+1;o<Math.min(innerHeight,t.bottom);o+=5){let l=e.root.elementFromPoint(s,o);if(!l||l==e.dom||!e.dom.contains(l))continue;let u=l.getBoundingClientRect();if(u.top>=n-20){r=l,i=u.top;break}}return{refDOM:r,refTop:i,stack:WB(e.dom)}}function WB(e){let t=[],n=e.ownerDocument;for(let r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=Ol(r));return t}function UY({refDOM:e,refTop:t,stack:n}){let r=e?e.getBoundingClientRect().top:0;XB(n,r==0?0:r-t)}function XB(e,t){for(let n=0;n<e.length;n++){let{dom:r,top:i,left:s}=e[n];r.scrollTop!=i+t&&(r.scrollTop=i+t),r.scrollLeft!=s&&(r.scrollLeft=s)}}let al=null;function $Y(e){if(e.setActive)return e.setActive();if(al)return e.focus(al);let t=WB(e);e.focus(al==null?{get preventScroll(){return al={preventScroll:!0},!0}}:void 0),al||(al=!1,XB(t,0))}function ZB(e,t){let n,r=2e8,i,s=0,o=t.top,l=t.top,u,d;for(let h=e.firstChild,p=0;h;h=h.nextSibling,p++){let g;if(h.nodeType==1)g=h.getClientRects();else if(h.nodeType==3)g=$i(h).getClientRects();else continue;for(let y=0;y<g.length;y++){let x=g[y];if(x.top<=o&&x.bottom>=l){o=Math.max(x.bottom,o),l=Math.min(x.top,l);let S=x.left>t.left?x.left-t.left:x.right<t.left?t.left-x.right:0;if(S<r){n=h,r=S,i=S&&n.nodeType==3?{left:x.right<t.left?x.right:x.left,top:t.top}:t,h.nodeType==1&&S&&(s=p+(t.left>=(x.left+x.right)/2?1:0));continue}}else x.top>t.top&&!u&&x.left<=t.left&&x.right>=t.left&&(u=h,d={left:Math.max(x.left,Math.min(x.right,t.left)),top:x.top});!n&&(t.left>=x.right&&t.top>=x.top||t.left>=x.left&&t.top>=x.bottom)&&(s=p+1)}}return!n&&u&&(n=u,i=d,r=0),n&&n.nodeType==3?GY(n,i):!n||r&&n.nodeType==1?{node:e,offset:s}:ZB(n,i)}function GY(e,t){let n=e.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(e,i+1),r.setStart(e,i);let s=Ps(r,1);if(s.top!=s.bottom&&NE(t,s))return{node:e,offset:i+(t.left>=(s.left+s.right)/2?1:0)}}return{node:e,offset:0}}function NE(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function KY(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}function YY(e,t,n){let{node:r,offset:i}=ZB(t,n),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return e.docView.posFromDOM(r,i,s)}function WY(e,t,n,r){let i=-1;for(let s=t,o=!1;s!=e.dom;){let l=e.docView.nearestDesc(s,!0),u;if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)&&((u=l.dom.getBoundingClientRect()).width||u.height)&&(l.node.isBlock&&l.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(l.dom.nodeName)&&(!o&&u.left>r.left||u.top>r.top?i=l.posBefore:(!o&&u.right<r.left||u.bottom<r.top)&&(i=l.posAfter),o=!0),!l.contentDOM&&i<0&&!l.node.isText))return(l.node.isBlock?r.top<(u.top+u.bottom)/2:r.left<(u.left+u.right)/2)?l.posBefore:l.posAfter;s=l.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,n,-1)}function QB(e,t,n){let r=e.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let o=e.childNodes[s];if(o.nodeType==1){let l=o.getClientRects();for(let u=0;u<l.length;u++){let d=l[u];if(NE(t,d))return QB(o,t,d)}}if((s=(s+1)%r)==i)break}return e}function XY(e,t){let n=e.dom.ownerDocument,r,i=0,s=IY(n,t.left,t.top);s&&({node:r,offset:i}=s);let o=(e.root.elementFromPoint?e.root:n).elementFromPoint(t.left,t.top),l;if(!o||!e.dom.contains(o.nodeType!=1?o.parentNode:o)){let d=e.dom.getBoundingClientRect();if(!NE(t,d)||(o=QB(e.dom,t,d),!o))return null}if(_n)for(let d=o;r&&d;d=Ol(d))d.draggable&&(r=void 0);if(o=KY(o,t),r){if(_r&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let h=r.childNodes[i],p;h.nodeName=="IMG"&&(p=h.getBoundingClientRect()).right<=t.left&&p.bottom>t.top&&i++}let d;bd&&i&&r.nodeType==1&&(d=r.childNodes[i-1]).nodeType==1&&d.contentEditable=="false"&&d.getBoundingClientRect().top>=t.top&&i--,r==e.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&t.top>r.lastChild.getBoundingClientRect().bottom?l=e.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(l=WY(e,r,i,t))}l==null&&(l=YY(e,o,t));let u=e.docView.nearestDesc(o,!0);return{pos:l,inside:u?u.posAtStart-u.border:-1}}function __(e){return e.top<e.bottom||e.left<e.right}function Ps(e,t){let n=e.getClientRects();if(n.length){let r=n[t<0?0:n.length-1];if(__(r))return r}return Array.prototype.find.call(n,__)||e.getBoundingClientRect()}const ZY=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function JB(e,t,n){let{node:r,offset:i,atom:s}=e.docView.domFromPos(t,n<0?-1:1),o=bd||_r;if(r.nodeType==3)if(o&&(ZY.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let u=Ps($i(r,i,i),n);if(_r&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let d=Ps($i(r,i-1,i-1),-1);if(d.top==u.top){let h=Ps($i(r,i,i+1),-1);if(h.top!=u.top)return eu(h,h.left<d.left)}}return u}else{let u=i,d=i,h=n<0?1:-1;return n<0&&!i?(d++,h=-1):n>=0&&i==r.nodeValue.length?(u--,h=1):n<0?u--:d++,eu(Ps($i(r,u,d),h),h<0)}if(!e.state.doc.resolve(t-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==Tr(r))){let u=r.childNodes[i-1];if(u.nodeType==1)return T0(u.getBoundingClientRect(),!1)}if(s==null&&i<Tr(r)){let u=r.childNodes[i];if(u.nodeType==1)return T0(u.getBoundingClientRect(),!0)}return T0(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==Tr(r))){let u=r.childNodes[i-1],d=u.nodeType==3?$i(u,Tr(u)-(o?0:1)):u.nodeType==1&&(u.nodeName!="BR"||!u.nextSibling)?u:null;if(d)return eu(Ps(d,1),!1)}if(s==null&&i<Tr(r)){let u=r.childNodes[i];for(;u.pmViewDesc&&u.pmViewDesc.ignoreForCoords;)u=u.nextSibling;let d=u?u.nodeType==3?$i(u,0,o?0:1):u.nodeType==1?u:null:null;if(d)return eu(Ps(d,-1),!0)}return eu(Ps(r.nodeType==3?$i(r):r,-n),n>=0)}function eu(e,t){if(e.width==0)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function T0(e,t){if(e.height==0)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function eI(e,t,n){let r=e.state,i=e.root.activeElement;r!=t&&e.updateState(t),i!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),i!=e.dom&&i&&i.focus()}}function QY(e,t,n){let r=t.selection,i=n=="up"?r.$from:r.$to;return eI(e,t,()=>{let{node:s}=e.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let l=e.docView.nearestDesc(s,!0);if(!l)break;if(l.node.isBlock){s=l.contentDOM||l.dom;break}s=l.dom.parentNode}let o=JB(e,i.pos,1);for(let l=s.firstChild;l;l=l.nextSibling){let u;if(l.nodeType==1)u=l.getClientRects();else if(l.nodeType==3)u=$i(l,0,l.nodeValue.length).getClientRects();else continue;for(let d=0;d<u.length;d++){let h=u[d];if(h.bottom>h.top+1&&(n=="up"?o.top-h.top>(h.bottom-o.top)*2:h.bottom-o.bottom>(o.bottom-h.top)*2))return!1}}return!0})}const JY=/[\u0590-\u08ac]/;function eW(e,t,n){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,l=e.domSelection();return l?!JY.test(r.parent.textContent)||!l.modify?n=="left"||n=="backward"?s:o:eI(e,t,()=>{let{focusNode:u,focusOffset:d,anchorNode:h,anchorOffset:p}=e.domSelectionRange(),g=l.caretBidiLevel;l.modify("move",n,"character");let y=r.depth?e.docView.domAfterPos(r.before()):e.dom,{focusNode:x,focusOffset:S}=e.domSelectionRange(),w=x&&!y.contains(x.nodeType==1?x:x.parentNode)||u==x&&d==S;try{l.collapse(h,p),u&&(u!=h||d!=p)&&l.extend&&l.extend(u,d)}catch{}return g!=null&&(l.caretBidiLevel=g),w}):r.pos==r.start()||r.pos==r.end()}let D_=null,R_=null,O_=!1;function tW(e,t,n){return D_==t&&R_==n?O_:(D_=t,R_=n,O_=n=="up"||n=="down"?QY(e,t,n):eW(e,t,n))}const Dr=0,j_=1,Uo=2,bi=3;class xd{constructor(t,n,r,i){this.parent=t,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=Dr,r.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,n,r){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let n=0;n<this.children.length;n++)t+=this.children[n].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==t)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,n,r){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(r<0){let s,o;if(t==this.contentDOM)s=t.childNodes[n-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(t==this.contentDOM)s=t.childNodes[n];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(t==this.dom&&this.contentDOM)i=n>yn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=t;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==t.childNodes.length)for(let s=t;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(t,n=!1){for(let r=!0,i=t;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!n||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(t.nodeType==1?t:t.parentNode):o==t))r=!1;else return s}}getDesc(t){let n=t.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(t,n,r){for(let i=t;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(t,n,r)}return-1}descAt(t){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==t&&s!=r){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let l=i.children[o];if(l.size){i=l;break}}return i}if(t<s)return i.descAt(t-r-i.border);r=s}}domFromPos(t,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],l=s+o.size;if(l>t||o instanceof nI){i=t-s;break}s=l}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof tI&&s.side>=0;r--);if(n<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?yn(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?yn(s.dom):this.contentDOM.childNodes.length}}}parseRange(t,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:t,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,l=0;;l++){let u=this.children[l],d=o+u.size;if(i==-1&&t<=d){let h=o+u.border;if(t>=h&&n<=d-u.border&&u.node&&u.contentDOM&&this.contentDOM.contains(u.contentDOM))return u.parseRange(t,n,h);t=o;for(let p=l;p>0;p--){let g=this.children[p-1];if(g.size&&g.dom.parentNode==this.contentDOM&&!g.emptyChildAt(1)){i=yn(g.dom)+1;break}t-=g.size}i==-1&&(i=0)}if(i>-1&&(d>n||l==this.children.length-1)){n=d;for(let h=l+1;h<this.children.length;h++){let p=this.children[h];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(-1)){s=yn(p.dom);break}n+=p.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=d}return{node:this.contentDOM,from:t,to:n,fromOffset:i,toOffset:s}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[t<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(t)}domAfterPos(t){let{node:n,offset:r}=this.domFromPos(t,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[r]}setSelection(t,n,r,i=!1){let s=Math.min(t,n),o=Math.max(t,n);for(let y=0,x=0;y<this.children.length;y++){let S=this.children[y],w=x+S.size;if(s>x&&o<w)return S.setSelection(t-x-S.border,n-x-S.border,r,i);x=w}let l=this.domFromPos(t,t?-1:1),u=n==t?l:this.domFromPos(n,n?-1:1),d=r.root.getSelection(),h=r.domSelectionRange(),p=!1;if((_r||_n)&&t==n){let{node:y,offset:x}=l;if(y.nodeType==3){if(p=!!(x&&y.nodeValue[x-1]==`
`),p&&x==y.nodeValue.length)for(let S=y,w;S;S=S.parentNode){if(w=S.nextSibling){w.nodeName=="BR"&&(l=u={node:w.parentNode,offset:yn(w)+1});break}let E=S.pmViewDesc;if(E&&E.node&&E.node.isBlock)break}}else{let S=y.childNodes[x-1];p=S&&(S.nodeName=="BR"||S.contentEditable=="false")}}if(_r&&h.focusNode&&h.focusNode!=u.node&&h.focusNode.nodeType==1){let y=h.focusNode.childNodes[h.focusOffset];y&&y.contentEditable=="false"&&(i=!0)}if(!(i||p&&_n)&&aa(l.node,l.offset,h.anchorNode,h.anchorOffset)&&aa(u.node,u.offset,h.focusNode,h.focusOffset))return;let g=!1;if((d.extend||t==n)&&!(p&&_r)){d.collapse(l.node,l.offset);try{t!=n&&d.extend(u.node,u.offset),g=!0}catch{}}if(!g){if(t>n){let x=l;l=u,u=x}let y=document.createRange();y.setEnd(u.node,u.offset),y.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(y)}}ignoreMutation(t){return!this.contentDOM&&t.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?t<=o&&n>=r:t<o&&n>r){let l=r+s.border,u=o-s.border;if(t>=l&&n<=u){this.dirty=t==r||n==o?Uo:j_,t==l&&n==u&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=bi:s.markDirty(t-l,n-l);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?Uo:bi}r=o}this.dirty=Uo}markParentsDirty(){let t=1;for(let n=this.parent;n;n=n.parent,t++){let r=t==1?Uo:j_;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(t){return!1}}class tI extends xd{constructor(t,n,r,i){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let l=document.createElement("span");l.appendChild(o),o=l}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(t,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(t){return this.dirty==Dr&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let n=this.widget.spec.stopEvent;return n?n(t):!1}ignoreMutation(t){return t.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class nW extends xd{constructor(t,n,r,i){super(t,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(t,n){return t!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return t.type==="characterData"&&t.target.nodeValue==t.oldValue}}class la extends xd{constructor(t,n,r,i,s){super(t,[],r,i),this.mark=n,this.spec=s}static create(t,n,r,i){let s=i.nodeViews[n.type.name],o=s&&s(n,i,r);return(!o||!o.dom)&&(o=ba.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new la(t,n,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&bi||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(t){return this.dirty!=bi&&this.mark.eq(t)}markDirty(t,n){if(super.markDirty(t,n),this.dirty!=Dr){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Dr}}slice(t,n,r){let i=la.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;n<o&&(s=oC(s,n,o,r)),t>0&&(s=oC(s,0,t,r));for(let l=0;l<s.length;l++)s[l].parent=i;return i.children=s,i}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Xs extends xd{constructor(t,n,r,i,s,o,l,u,d){super(t,[],s,o),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=l}static create(t,n,r,i,s,o){let l=s.nodeViews[n.type.name],u,d=l&&l(n,s,()=>{if(!u)return o;if(u.parent)return u.parent.posBeforeChild(u)},r,i),h=d&&d.dom,p=d&&d.contentDOM;if(n.isText){if(!h)h=document.createTextNode(n.text);else if(h.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else h||({dom:h,contentDOM:p}=ba.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!p&&!n.isText&&h.nodeName!="BR"&&(h.hasAttribute("contenteditable")||(h.contentEditable="false"),n.type.spec.draggable&&(h.draggable=!0));let g=h;return h=sI(h,r,n),d?u=new rW(t,n,r,i,h,p||null,g,d,s,o+1):n.isText?new nm(t,n,r,i,h,g,s):new Xs(t,n,r,i,h,p||null,g,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(t.preserveWhitespace="full"),!this.contentDOM)t.getContent=()=>this.node.content;else if(!this.contentLost)t.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){t.contentElement=r.dom.parentNode;break}}t.contentElement||(t.getContent=()=>pe.empty)}return t}matchesNode(t,n,r){return this.dirty==Dr&&t.eq(this.node)&&Fh(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,n){let r=this.node.inlineContent,i=n,s=t.composing?this.localCompositionInfo(t,n):null,o=s&&s.pos>-1?s:null,l=s&&s.pos<0,u=new sW(this,o&&o.node,t);lW(this.node,this.innerDeco,(d,h,p)=>{d.spec.marks?u.syncToMarks(d.spec.marks,r,t):d.type.side>=0&&!p&&u.syncToMarks(h==this.node.childCount?ct.none:this.node.child(h).marks,r,t),u.placeWidget(d,t,i)},(d,h,p,g)=>{u.syncToMarks(d.marks,r,t);let y;u.findNodeMatch(d,h,p,g)||l&&t.state.selection.from>i&&t.state.selection.to<i+d.nodeSize&&(y=u.findIndexWithChild(s.node))>-1&&u.updateNodeAt(d,h,p,y,t)||u.updateNextNode(d,h,p,t,g,i)||u.addNode(d,h,p,t,i),i+=d.nodeSize}),u.syncToMarks([],r,t),this.node.isTextblock&&u.addTextblockHacks(),u.destroyRest(),(u.changed||this.dirty==Uo)&&(o&&this.protectLocalComposition(t,o),rI(this.contentDOM,this.children,t),jl&&cW(this.dom))}localCompositionInfo(t,n){let{from:r,to:i}=t.state.selection;if(!(t.state.selection instanceof Ve)||r<n||i>n+this.node.content.size)return null;let s=t.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,l=uW(this.node.content,o,r-n,i-n);return l<0?null:{node:s,pos:l,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(t,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new nW(this,s,n,i);t.input.compositionNodes.push(o),this.children=oC(this.children,r,r+i.length,t,o)}update(t,n,r,i){return this.dirty==bi||!t.sameMarkup(this.node)?!1:(this.updateInner(t,n,r,i),!0)}updateInner(t,n,r,i){this.updateOuterDeco(n),this.node=t,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Dr}updateOuterDeco(t){if(Fh(t,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=iI(this.dom,this.nodeDOM,sC(this.outerDeco,this.node,n),sC(t,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function L_(e,t,n,r,i){sI(r,t,e);let s=new Xs(void 0,e,t,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class nm extends Xs{constructor(t,n,r,i,s,o,l){super(t,n,r,i,s,null,o,l,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,n,r,i){return this.dirty==bi||this.dirty!=Dr&&!this.inParent()||!t.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Dr||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=t,this.dirty=Dr,!0)}inParent(){let t=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,n,r){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(t,n,r)}ignoreMutation(t){return t.type!="characterData"&&t.type!="selection"}slice(t,n,r){let i=this.node.cut(t,n),s=document.createTextNode(i.text);return new nm(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(t,n){super.markDirty(t,n),this.dom!=this.nodeDOM&&(t==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=bi)}get domAtom(){return!1}isText(t){return this.node.text==t}}class nI extends xd{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==Dr&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class rW extends Xs{constructor(t,n,r,i,s,o,l,u,d,h){super(t,n,r,i,s,o,l,d,h),this.spec=u}update(t,n,r,i){if(this.dirty==bi)return!1;if(this.spec.update&&(this.node.type==t.type||this.spec.multiType)){let s=this.spec.update(t,n,r);return s&&this.updateInner(t,n,r,i),s}else return!this.contentDOM&&!t.isLeaf?!1:super.update(t,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,n,r,i){this.spec.setSelection?this.spec.setSelection(t,n,r.root):super.setSelection(t,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return this.spec.stopEvent?this.spec.stopEvent(t):!1}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function rI(e,t,n){let r=e.firstChild,i=!1;for(let s=0;s<t.length;s++){let o=t[s],l=o.dom;if(l.parentNode==e){for(;l!=r;)r=P_(r),i=!0;r=r.nextSibling}else i=!0,e.insertBefore(l,r);if(o instanceof la){let u=r?r.previousSibling:e.lastChild;rI(o.contentDOM,o.children,n),r=u?u.nextSibling:e.firstChild}}for(;r;)r=P_(r),i=!0;i&&n.trackWrites==e&&(n.trackWrites=null)}const Cu=function(e){e&&(this.nodeName=e)};Cu.prototype=Object.create(null);const $o=[new Cu];function sC(e,t,n){if(e.length==0)return $o;let r=n?$o[0]:new Cu,i=[r];for(let s=0;s<e.length;s++){let o=e[s].type.attrs;if(o){o.nodeName&&i.push(r=new Cu(o.nodeName));for(let l in o){let u=o[l];u!=null&&(n&&i.length==1&&i.push(r=new Cu(t.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+u:l=="style"?r.style=(r.style?r.style+";":"")+u:l!="nodeName"&&(r[l]=u))}}}return i}function iI(e,t,n,r){if(n==$o&&r==$o)return t;let i=t;for(let s=0;s<r.length;s++){let o=r[s],l=n[s];if(s){let u;l&&l.nodeName==o.nodeName&&i!=e&&(u=i.parentNode)&&u.nodeName.toLowerCase()==o.nodeName||(u=document.createElement(o.nodeName),u.pmIsDeco=!0,u.appendChild(i),l=$o[0]),i=u}iW(i,l||$o[0],o)}return i}function iW(e,t,n){for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&e.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){let r=t.class?t.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&e.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&e.classList.add(i[s]);e.classList.length==0&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(t.style);)e.style.removeProperty(i[1])}n.style&&(e.style.cssText+=n.style)}}function sI(e,t,n){return iI(e,e,$o,sC(t,n,e.nodeType!=1))}function Fh(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function P_(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class sW{constructor(t,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=oW(t.node.content,t)}destroyBetween(t,n){if(t!=n){for(let r=t;r<n;r++)this.top.children[r].destroy();this.top.children.splice(t,n-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,n,r){let i=0,s=this.stack.length>>1,o=Math.min(s,t.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(t[i])&&t[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=Dr,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<t.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let u=this.index;u<Math.min(this.index+3,this.top.children.length);u++){let d=this.top.children[u];if(d.matchesMark(t[s])&&!this.isLocked(d.dom)){l=u;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let u=la.create(this.top,t[s],n,r);this.top.children.splice(this.index,0,u),this.top=u,this.changed=!0}this.index=0,s++}}findNodeMatch(t,n,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(t,n,r))s=this.top.children.indexOf(o,this.index);else for(let l=this.index,u=Math.min(this.top.children.length,l+5);l<u;l++){let d=this.top.children[l];if(d.matchesNode(t,n,r)&&!this.preMatch.matched.has(d)){s=l;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(t,n,r,i,s){let o=this.top.children[i];return o.dirty==bi&&o.dom==o.contentDOM&&(o.dirty=Uo),o.update(t,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(t){for(;;){let n=t.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=t.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}t=n}}updateNextNode(t,n,r,i,s,o){for(let l=this.index;l<this.top.children.length;l++){let u=this.top.children[l];if(u instanceof Xs){let d=this.preMatch.matched.get(u);if(d!=null&&d!=s)return!1;let h=u.dom,p,g=this.isLocked(h)&&!(t.isText&&u.node&&u.node.isText&&u.nodeDOM.nodeValue==t.text&&u.dirty!=bi&&Fh(n,u.outerDeco));if(!g&&u.update(t,n,r,i))return this.destroyBetween(this.index,l),u.dom!=h&&(this.changed=!0),this.index++,!0;if(!g&&(p=this.recreateWrapper(u,t,n,r,i,o)))return this.destroyBetween(this.index,l),this.top.children[this.index]=p,p.contentDOM&&(p.dirty=Uo,p.updateChildren(i,o+1),p.dirty=Dr),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,n,r,i,s,o){if(t.dirty||n.isAtom||!t.children.length||!t.node.content.eq(n.content)||!Fh(r,t.outerDeco)||!i.eq(t.innerDeco))return null;let l=Xs.create(this.top,n,r,i,s,o);if(l.contentDOM){l.children=t.children,t.children=[];for(let u of l.children)u.parent=l}return t.destroy(),l}addNode(t,n,r,i,s){let o=Xs.create(this.top,t,n,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(t,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(t)&&(t==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new tI(this.top,t,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let t=this.top.children[this.index-1],n=this.top;for(;t instanceof la;)n=t,t=n.children[n.children.length-1];(!t||!(t instanceof nm)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((_n||kn)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(t,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(t))this.index++;else{let r=document.createElement(t);t=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),t=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new nI(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||t.nodeType==1&&t.contains(this.lock.parentNode))}}function oW(e,t){let n=t,r=n.children.length,i=e.childCount,s=new Map,o=[];e:for(;i>0;){let l;for(;;)if(r){let d=n.children[r-1];if(d instanceof la)n=d,r=d.children.length;else{l=d,r--;break}}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}let u=l.node;if(u){if(u!=e.child(i-1))break;--i,s.set(l,i),o.push(l)}}return{index:i,matched:s,matches:o.reverse()}}function aW(e,t){return e.type.side-t.type.side}function lW(e,t,n,r){let i=t.locals(e),s=0;if(i.length==0){for(let d=0;d<e.childCount;d++){let h=e.child(d);r(h,i,t.forChild(s,h),d),s+=h.nodeSize}return}let o=0,l=[],u=null;for(let d=0;;){let h,p;for(;o<i.length&&i[o].to==s;){let w=i[o++];w.widget&&(h?(p||(p=[h])).push(w):h=w)}if(h)if(p){p.sort(aW);for(let w=0;w<p.length;w++)n(p[w],d,!!u)}else n(h,d,!!u);let g,y;if(u)y=-1,g=u,u=null;else if(d<e.childCount)y=d,g=e.child(d++);else break;for(let w=0;w<l.length;w++)l[w].to<=s&&l.splice(w--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)l.push(i[o++]);let x=s+g.nodeSize;if(g.isText){let w=x;o<i.length&&i[o].from<w&&(w=i[o].from);for(let E=0;E<l.length;E++)l[E].to<w&&(w=l[E].to);w<x&&(u=g.cut(w-s),g=g.cut(0,w-s),x=w,y=-1)}else for(;o<i.length&&i[o].to<x;)o++;let S=g.isInline&&!g.isLeaf?l.filter(w=>!w.inline):l.slice();r(g,S,t.forChild(s,g),y),s=x}}function cW(e){if(e.nodeName=="UL"||e.nodeName=="OL"){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function uW(e,t,n,r){for(let i=0,s=0;i<e.childCount&&s<=r;){let o=e.child(i++),l=s;if(s+=o.nodeSize,!o.isText)continue;let u=o.text;for(;i<e.childCount;){let d=e.child(i++);if(s+=d.nodeSize,!d.isText)break;u+=d.text}if(s>=n){if(s>=r&&u.slice(r-t.length-l,r-l)==t)return r-t.length;let d=l<r?u.lastIndexOf(t,r-l-1):-1;if(d>=0&&d+t.length+l>=n)return l+d;if(n==r&&u.length>=r+t.length-l&&u.slice(r-l,r-l+t.length)==t)return r}}return-1}function oC(e,t,n,r,i){let s=[];for(let o=0,l=0;o<e.length;o++){let u=e[o],d=l,h=l+=u.size;d>=n||h<=t?s.push(u):(d<t&&s.push(u.slice(0,t-d,r)),i&&(s.push(i),i=void 0),h>n&&s.push(u.slice(n-d,u.size,r)))}return s}function AE(e,t=null){let n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;let i=e.docView.nearestDesc(n.focusNode),s=i&&i.size==0,o=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let l=r.resolve(o),u,d;if(tm(n)){for(u=o;i&&!i.node;)i=i.parent;let p=i.node;if(i&&p.isAtom&&Re.isSelectable(p)&&i.parent&&!(p.isInline&&PY(n.focusNode,n.focusOffset,i.dom))){let g=i.posBefore;d=new Re(o==g?l:r.resolve(g))}}else{if(n instanceof e.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let p=o,g=o;for(let y=0;y<n.rangeCount;y++){let x=n.getRangeAt(y);p=Math.min(p,e.docView.posFromDOM(x.startContainer,x.startOffset,1)),g=Math.max(g,e.docView.posFromDOM(x.endContainer,x.endOffset,-1))}if(p<0)return null;[u,o]=g==e.state.selection.anchor?[g,p]:[p,g],l=r.resolve(o)}else u=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(u<0)return null}let h=r.resolve(u);if(!d){let p=t=="pointer"||e.state.selection.head<l.pos&&!s?1:-1;d=ME(e,h,l,p)}return d}function oI(e){return e.editable?e.hasFocus():lI(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function Wi(e,t=!1){let n=e.state.selection;if(aI(e,n),!!oI(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&kn){let r=e.domSelectionRange(),i=e.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&aa(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){e.input.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)fW(e);else{let{anchor:r,head:i}=n,s,o;B_&&!(n instanceof Ve)&&(n.$from.parent.inlineContent||(s=I_(e,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=I_(e,n.to))),e.docView.setSelection(r,i,e,t),B_&&(s&&z_(s),o&&z_(o)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&dW(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const B_=_n||kn&&YB<63;function I_(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(_n&&i&&i.contentEditable=="false")return N0(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return N0(i);if(s)return N0(s)}}function N0(e){return e.contentEditable="true",_n&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function z_(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function dW(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{(!oI(e)||e.state.selection.visible)&&e.dom.classList.remove("ProseMirror-hideselection")},20))})}function fW(e){let t=e.domSelection();if(!t)return;let n=e.cursorWrapper.dom,r=n.nodeName=="IMG";r?t.collapse(n.parentNode,yn(n)+1):t.collapse(n,0),!r&&!e.state.selection.visible&&Fn&&Ws<=11&&(n.disabled=!0,n.disabled=!1)}function aI(e,t){if(t instanceof Re){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(q_(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else q_(e)}function q_(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function ME(e,t,n,r){return e.someProp("createSelectionBetween",i=>i(e,t,n))||Ve.between(t,n,r)}function V_(e){return e.editable&&!e.hasFocus()?!1:lI(e)}function lI(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function hW(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return aa(t.node,t.offset,n.anchorNode,n.anchorOffset)}function aC(e,t){let{$anchor:n,$head:r}=e.selection,i=t>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return s&&Ue.findFrom(s,t)}function Bs(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function H_(e,t,n){let r=e.state.selection;if(r instanceof Ve)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=e.state.doc.resolve(i.pos+s.nodeSize*(t<0?-1:1));return Bs(e,new Ve(r.$anchor,o))}else if(r.empty){if(e.endOfTextblock(t>0?"forward":"backward")){let i=aC(e.state,t);return i&&i instanceof Re?Bs(e,i):!1}else if(!(kr&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let l=t<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=e.docView.descAt(l))&&!o.contentDOM?Re.isSelectable(s)?Bs(e,new Re(t<0?e.state.doc.resolve(i.pos-s.nodeSize):i)):bd?Bs(e,new Ve(e.state.doc.resolve(t<0?l:l+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Re&&r.node.isInline)return Bs(e,new Ve(t>0?r.$to:r.$from));{let i=aC(e.state,t);return i?Bs(e,i):!1}}}function Uh(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function Eu(e,t){let n=e.pmViewDesc;return n&&n.size==0&&(t<0||e.nextSibling||e.nodeName!="BR")}function ll(e,t){return t<0?pW(e):mW(e)}function pW(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i,s,o=!1;for(_r&&n.nodeType==1&&r<Uh(n)&&Eu(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let l=n.childNodes[r-1];if(Eu(l,-1))i=n,s=--r;else if(l.nodeType==3)n=l,r=n.nodeValue.length;else break}}else{if(cI(n))break;{let l=n.previousSibling;for(;l&&Eu(l,-1);)i=n.parentNode,s=yn(l),l=l.previousSibling;if(l)n=l,r=Uh(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}}o?lC(e,n,r):i&&lC(e,i,s)}function mW(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i=Uh(n),s,o;for(;;)if(r<i){if(n.nodeType!=1)break;let l=n.childNodes[r];if(Eu(l,1))s=n,o=++r;else break}else{if(cI(n))break;{let l=n.nextSibling;for(;l&&Eu(l,1);)s=l.parentNode,o=yn(l)+1,l=l.nextSibling;if(l)n=l,r=0,i=Uh(n);else{if(n=n.parentNode,n==e.dom)break;r=i=0}}}s&&lC(e,s,o)}function cI(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function gW(e,t){for(;e&&t==e.childNodes.length&&!vd(e);)t=yn(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=0}}function yW(e,t){for(;e&&!t&&!vd(e);)t=yn(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=e.childNodes.length}}function lC(e,t,n){if(t.nodeType!=3){let s,o;(o=gW(t,n))?(t=o,n=0):(s=yW(t,n))&&(t=s,n=s.nodeValue.length)}let r=e.domSelection();if(!r)return;if(tm(r)){let s=document.createRange();s.setEnd(t,n),s.setStart(t,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(t,n);e.domObserver.setCurSelection();let{state:i}=e;setTimeout(()=>{e.state==i&&Wi(e)},50)}function F_(e,t){let n=e.state.doc.resolve(t);if(!(kn||zY)&&n.parent.inlineContent){let i=e.coordsAtPos(t);if(t>n.start()){let s=e.coordsAtPos(t-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(t<n.end()){let s=e.coordsAtPos(t+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(e.dom).direction=="rtl"?"rtl":"ltr"}function U_(e,t,n){let r=e.state.selection;if(r instanceof Ve&&!r.empty||n.indexOf("s")>-1||kr&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let o=aC(e.state,t);if(o&&o instanceof Re)return Bs(e,o)}if(!i.parent.inlineContent){let o=t<0?i:s,l=r instanceof lr?Ue.near(o,t):Ue.findFrom(o,t);return l?Bs(e,l):!1}return!1}function $_(e,t){if(!(e.state.selection instanceof Ve))return!0;let{$head:n,$anchor:r,empty:i}=e.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let s=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=e.state.tr;return t<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),e.dispatch(o),!0}return!1}function G_(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function vW(e){if(!_n||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&t.nodeType==1&&n==0&&t.firstChild&&t.firstChild.contentEditable=="false"){let r=t.firstChild;G_(e,r,"true"),setTimeout(()=>G_(e,r,"false"),20)}return!1}function bW(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function xW(e,t){let n=t.keyCode,r=bW(t);if(n==8||kr&&n==72&&r=="c")return $_(e,-1)||ll(e,-1);if(n==46&&!t.shiftKey||kr&&n==68&&r=="c")return $_(e,1)||ll(e,1);if(n==13||n==27)return!0;if(n==37||kr&&n==66&&r=="c"){let i=n==37?F_(e,e.state.selection.from)=="ltr"?-1:1:-1;return H_(e,i,r)||ll(e,i)}else if(n==39||kr&&n==70&&r=="c"){let i=n==39?F_(e,e.state.selection.from)=="ltr"?1:-1:1;return H_(e,i,r)||ll(e,i)}else{if(n==38||kr&&n==80&&r=="c")return U_(e,-1,r)||ll(e,-1);if(n==40||kr&&n==78&&r=="c")return vW(e)||U_(e,1,r)||ll(e,1);if(r==(kr?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function _E(e,t){e.someProp("transformCopied",y=>{t=y(t,e)});let n=[],{content:r,openStart:i,openEnd:s}=t;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let y=r.firstChild;n.push(y.type.name,y.attrs!=y.type.defaultAttrs?y.attrs:null),r=y.content}let o=e.someProp("clipboardSerializer")||ba.fromSchema(e.state.schema),l=mI(),u=l.createElement("div");u.appendChild(o.serializeFragment(r,{document:l}));let d=u.firstChild,h,p=0;for(;d&&d.nodeType==1&&(h=pI[d.nodeName.toLowerCase()]);){for(let y=h.length-1;y>=0;y--){let x=l.createElement(h[y]);for(;u.firstChild;)x.appendChild(u.firstChild);u.appendChild(x),p++}d=u.firstChild}d&&d.nodeType==1&&d.setAttribute("data-pm-slice",`${i} ${s}${p?` -${p}`:""} ${JSON.stringify(n)}`);let g=e.someProp("clipboardTextSerializer",y=>y(t,e))||t.content.textBetween(0,t.content.size,`

`);return{dom:u,text:g,slice:t}}function uI(e,t,n,r,i){let s=i.parent.type.spec.code,o,l;if(!n&&!t)return null;let u=!!t&&(r||s||!n);if(u){if(e.someProp("transformPastedText",g=>{t=g(t,s||r,e)}),s)return l=new be(pe.from(e.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0),e.someProp("transformPasted",g=>{l=g(l,e,!0)}),l;let p=e.someProp("clipboardTextParser",g=>g(t,i,r,e));if(p)l=p;else{let g=i.marks(),{schema:y}=e.state,x=ba.fromSchema(y);o=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(S=>{let w=o.appendChild(document.createElement("p"));S&&w.appendChild(x.serializeNode(y.text(S,g)))})}}else e.someProp("transformPastedHTML",p=>{n=p(n,e)}),o=EW(n),bd&&kW(o);let d=o&&o.querySelector("[data-pm-slice]"),h=d&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(d.getAttribute("data-pm-slice")||"");if(h&&h[3])for(let p=+h[3];p>0;p--){let g=o.firstChild;for(;g&&g.nodeType!=1;)g=g.nextSibling;if(!g)break;o=g}if(l||(l=(e.someProp("clipboardParser")||e.someProp("domParser")||Ys.fromSchema(e.state.schema)).parseSlice(o,{preserveWhitespace:!!(u||h),context:i,ruleFromNode(g){return g.nodeName=="BR"&&!g.nextSibling&&g.parentNode&&!wW.test(g.parentNode.nodeName)?{ignore:!0}:null}})),h)l=TW(K_(l,+h[1],+h[2]),h[4]);else if(l=be.maxOpen(SW(l.content,i),!0),l.openStart||l.openEnd){let p=0,g=0;for(let y=l.content.firstChild;p<l.openStart&&!y.type.spec.isolating;p++,y=y.firstChild);for(let y=l.content.lastChild;g<l.openEnd&&!y.type.spec.isolating;g++,y=y.lastChild);l=K_(l,p,g)}return e.someProp("transformPasted",p=>{l=p(l,e,u)}),l}const wW=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function SW(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let i=t.node(n).contentMatchAt(t.index(n)),s,o=[];if(e.forEach(l=>{if(!o)return;let u=i.findWrapping(l.type),d;if(!u)return o=null;if(d=o.length&&s.length&&fI(u,s,l,o[o.length-1],0))o[o.length-1]=d;else{o.length&&(o[o.length-1]=hI(o[o.length-1],s.length));let h=dI(l,u);o.push(h),i=i.matchType(h.type),s=u}}),o)return pe.from(o)}return e}function dI(e,t,n=0){for(let r=t.length-1;r>=n;r--)e=t[r].create(null,pe.from(e));return e}function fI(e,t,n,r,i){if(i<e.length&&i<t.length&&e[i]==t[i]){let s=fI(e,t,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==e.length-1?n.type:e[i+1]))return r.copy(r.content.append(pe.from(dI(n,e,i+1))))}}function hI(e,t){if(t==0)return e;let n=e.content.replaceChild(e.childCount-1,hI(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(pe.empty,!0);return e.copy(n.append(r))}function cC(e,t,n,r,i,s){let o=t<0?e.firstChild:e.lastChild,l=o.content;return e.childCount>1&&(s=0),i<r-1&&(l=cC(l,t,n,r,i+1,s)),i>=n&&(l=t<0?o.contentMatchAt(0).fillBefore(l,s<=i).append(l):l.append(o.contentMatchAt(o.childCount).fillBefore(pe.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,o.copy(l))}function K_(e,t,n){return t<e.openStart&&(e=new be(cC(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new be(cC(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const pI={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let Y_=null;function mI(){return Y_||(Y_=document.implementation.createHTMLDocument("title"))}let A0=null;function CW(e){let t=window.trustedTypes;return t?(A0||(A0=t.defaultPolicy||t.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),A0.createHTML(e)):e}function EW(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n=mI().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(e),i;if((i=r&&pI[r[1].toLowerCase()])&&(e=i.map(s=>"<"+s+">").join("")+e+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=CW(e),i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function kW(e){let t=e.querySelectorAll(kn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}function TW(e,t){if(!e.size)return e;let n=e.content.firstChild.type.schema,r;try{r=JSON.parse(t)}catch{return e}let{content:i,openStart:s,openEnd:o}=e;for(let l=r.length-2;l>=0;l-=2){let u=n.nodes[r[l]];if(!u||u.hasRequiredAttrs())break;i=pe.from(u.create(r[l+1],i)),s++,o++}return new be(i,s,o)}const Dn={},Rn={},NW={touchstart:!0,touchmove:!0};class AW{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function MW(e){for(let t in Dn){let n=Dn[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=r=>{DW(e,r)&&!DE(e,r)&&(e.editable||!(r.type in Rn))&&n(e,r)},NW[t]?{passive:!0}:void 0)}_n&&e.dom.addEventListener("input",()=>null),uC(e)}function Gs(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function _W(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}function uC(e){e.someProp("handleDOMEvents",t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=r=>DE(e,r))})}function DE(e,t){return e.someProp("handleDOMEvents",n=>{let r=n[t.type];return r?r(e,t)||t.defaultPrevented:!1})}function DW(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function RW(e,t){!DE(e,t)&&Dn[t.type]&&(e.editable||!(t.type in Rn))&&Dn[t.type](e,t)}Rn.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=n.keyCode==16||n.shiftKey,!yI(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!(Gi&&kn&&n.keyCode==13)))if(n.keyCode!=229&&e.domObserver.forceFlush(),jl&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();e.input.lastIOSEnter=r,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==r&&(e.someProp("handleKeyDown",i=>i(e,Vo(13,"Enter"))),e.input.lastIOSEnter=0)},200)}else e.someProp("handleKeyDown",r=>r(e,n))||xW(e,n)?n.preventDefault():Gs(e,"key")};Rn.keyup=(e,t)=>{t.keyCode==16&&(e.input.shiftKey=!1)};Rn.keypress=(e,t)=>{let n=t;if(yI(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||kr&&n.metaKey)return;if(e.someProp("handleKeyPress",i=>i(e,n))){n.preventDefault();return}let r=e.state.selection;if(!(r instanceof Ve)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),s=()=>e.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!e.someProp("handleTextInput",o=>o(e,r.$from.pos,r.$to.pos,i,s))&&e.dispatch(s()),n.preventDefault()}};function rm(e){return{left:e.clientX,top:e.clientY}}function OW(e,t){let n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}function RE(e,t,n,r,i){if(r==-1)return!1;let s=e.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(e.someProp(t,l=>o>s.depth?l(e,n,s.nodeAfter,s.before(o),i,!0):l(e,n,s.node(o),s.before(o),i,!1)))return!0;return!1}function Nl(e,t,n){if(e.focused||e.focus(),e.state.selection.eq(t))return;let r=e.state.tr.setSelection(t);r.setMeta("pointer",!0),e.dispatch(r)}function jW(e,t){if(t==-1)return!1;let n=e.state.doc.resolve(t),r=n.nodeAfter;return r&&r.isAtom&&Re.isSelectable(r)?(Nl(e,new Re(n)),!0):!1}function LW(e,t){if(t==-1)return!1;let n=e.state.selection,r,i;n instanceof Re&&(r=n.node);let s=e.state.doc.resolve(t);for(let o=s.depth+1;o>0;o--){let l=o>s.depth?s.nodeAfter:s.node(o);if(Re.isSelectable(l)){r&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(o);break}}return i!=null?(Nl(e,Re.create(e.state.doc,i)),!0):!1}function PW(e,t,n,r,i){return RE(e,"handleClickOn",t,n,r)||e.someProp("handleClick",s=>s(e,t,r))||(i?LW(e,n):jW(e,n))}function BW(e,t,n,r){return RE(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",i=>i(e,t,r))}function IW(e,t,n,r){return RE(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",i=>i(e,t,r))||zW(e,n,r)}function zW(e,t,n){if(n.button!=0)return!1;let r=e.state.doc;if(t==-1)return r.inlineContent?(Nl(e,Ve.create(r,0,r.content.size)),!0):!1;let i=r.resolve(t);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),l=i.before(s);if(o.inlineContent)Nl(e,Ve.create(r,l+1,l+1+o.content.size));else if(Re.isSelectable(o))Nl(e,Re.create(r,l));else continue;return!0}}function OE(e){return $h(e)}const gI=kr?"metaKey":"ctrlKey";Dn.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let r=OE(e),i=Date.now(),s="singleClick";i-e.input.lastClick.time<500&&OW(n,e.input.lastClick)&&!n[gI]&&e.input.lastClick.button==n.button&&(e.input.lastClick.type=="singleClick"?s="doubleClick":e.input.lastClick.type=="doubleClick"&&(s="tripleClick")),e.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s,button:n.button};let o=e.posAtCoords(rm(n));o&&(s=="singleClick"?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new qW(e,o,n,!!r)):(s=="doubleClick"?BW:IW)(e,o.pos,o.inside,n)?n.preventDefault():Gs(e,"pointer"))};class qW{constructor(t,n,r,i){this.view=t,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!r[gI],this.allowDefault=r.shiftKey;let s,o;if(n.inside>-1)s=t.state.doc.nodeAt(n.inside),o=n.inside;else{let h=t.state.doc.resolve(n.pos);s=h.parent,o=h.depth?h.before():0}const l=i?null:r.target,u=l?t.docView.nearestDesc(l,!0):null;this.target=u&&u.nodeDOM.nodeType==1?u.nodeDOM:null;let{selection:d}=t.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||d instanceof Re&&d.from<=o&&d.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&_r&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),Gs(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Wi(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(rm(t))),this.updateAllowDefault(t),this.allowDefault||!n?Gs(this.view,"pointer"):PW(this.view,n.pos,n.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||_n&&this.mightDrag&&!this.mightDrag.node.isAtom||kn&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Nl(this.view,Ue.near(this.view.state.doc.resolve(n.pos))),t.preventDefault()):Gs(this.view,"pointer")}move(t){this.updateAllowDefault(t),Gs(this.view,"pointer"),t.buttons==0&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}Dn.touchstart=e=>{e.input.lastTouch=Date.now(),OE(e),Gs(e,"pointer")};Dn.touchmove=e=>{e.input.lastTouch=Date.now(),Gs(e,"pointer")};Dn.contextmenu=e=>OE(e);function yI(e,t){return e.composing?!0:_n&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500?(e.input.compositionEndedAt=-2e8,!0):!1}const VW=Gi?5e3:-1;Rn.compositionstart=Rn.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$to;if(t.selection instanceof Ve&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))e.markCursor=e.state.storedMarks||n.marks(),$h(e,!0),e.markCursor=null;else if($h(e,!t.selection.empty),_r&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=e.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let l=e.domSelection();l&&l.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}e.input.composing=!0}vI(e,VW)};Rn.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,vI(e,20))};function vI(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>$h(e),t))}function bI(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=FW());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function HW(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let n=jY(t.focusNode,t.focusOffset),r=LY(t.focusNode,t.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,s=e.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(e.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function FW(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function $h(e,t=!1){if(!(Gi&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),bI(e),t||e.docView&&e.docView.dirty){let n=AE(e),r=e.state.selection;return n&&!n.eq(r)?e.dispatch(e.state.tr.setSelection(n)):(e.markCursor||t)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?e.dispatch(e.state.tr.deleteSelection()):e.updateState(e.state),!0}return!1}}function UW(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}const $u=Fn&&Ws<15||jl&&qY<604;Dn.copy=Rn.cut=(e,t)=>{let n=t,r=e.state.selection,i=n.type=="cut";if(r.empty)return;let s=$u?null:n.clipboardData,o=r.content(),{dom:l,text:u}=_E(e,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",l.innerHTML),s.setData("text/plain",u)):UW(e,l),i&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function $W(e){return e.openStart==0&&e.openEnd==0&&e.content.childCount==1?e.content.firstChild:null}function GW(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=e.input.shiftKey&&e.input.lastKeyCode!=45;setTimeout(()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Gu(e,r.value,null,i,t):Gu(e,r.textContent,r.innerHTML,i,t)},50)}function Gu(e,t,n,r,i){let s=uI(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",u=>u(e,i,s||be.empty)))return!0;if(!s)return!1;let o=$W(s),l=o?e.state.tr.replaceSelectionWith(o,r):e.state.tr.replaceSelection(s);return e.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function xI(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Rn.paste=(e,t)=>{let n=t;if(e.composing&&!Gi)return;let r=$u?null:n.clipboardData,i=e.input.shiftKey&&e.input.lastKeyCode!=45;r&&Gu(e,xI(r),r.getData("text/html"),i,n)?n.preventDefault():GW(e,n)};class wI{constructor(t,n,r){this.slice=t,this.move=n,this.node=r}}const KW=kr?"altKey":"ctrlKey";function SI(e,t){let n=e.someProp("dragCopies",r=>!r(t));return n??!t[KW]}Dn.dragstart=(e,t)=>{let n=t,r=e.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=e.state.selection,s=i.empty?null:e.posAtCoords(rm(n)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof Re?i.to-1:i.to))){if(r&&r.mightDrag)o=Re.create(e.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let p=e.docView.nearestDesc(n.target,!0);p&&p.node.type.spec.draggable&&p!=e.docView&&(o=Re.create(e.state.doc,p.posBefore))}}let l=(o||e.state.selection).content(),{dom:u,text:d,slice:h}=_E(e,l);(!n.dataTransfer.files.length||!kn||YB>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData($u?"Text":"text/html",u.innerHTML),n.dataTransfer.effectAllowed="copyMove",$u||n.dataTransfer.setData("text/plain",d),e.dragging=new wI(h,SI(e,n),o)};Dn.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)};Rn.dragover=Rn.dragenter=(e,t)=>t.preventDefault();Rn.drop=(e,t)=>{let n=t,r=e.dragging;if(e.dragging=null,!n.dataTransfer)return;let i=e.posAtCoords(rm(n));if(!i)return;let s=e.state.doc.resolve(i.pos),o=r&&r.slice;o?e.someProp("transformPasted",x=>{o=x(o,e,!1)}):o=uI(e,xI(n.dataTransfer),$u?null:n.dataTransfer.getData("text/html"),!1,s);let l=!!(r&&SI(e,n));if(e.someProp("handleDrop",x=>x(e,n,o||be.empty,l))){n.preventDefault();return}if(!o)return;n.preventDefault();let u=o?zB(e.state.doc,s.pos,o):s.pos;u==null&&(u=s.pos);let d=e.state.tr;if(l){let{node:x}=r;x?x.replace(d):d.deleteSelection()}let h=d.mapping.map(u),p=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,g=d.doc;if(p?d.replaceRangeWith(h,h,o.content.firstChild):d.replaceRange(h,h,o),d.doc.eq(g))return;let y=d.doc.resolve(h);if(p&&Re.isSelectable(o.content.firstChild)&&y.nodeAfter&&y.nodeAfter.sameMarkup(o.content.firstChild))d.setSelection(new Re(y));else{let x=d.mapping.map(u);d.mapping.maps[d.mapping.maps.length-1].forEach((S,w,E,N)=>x=N),d.setSelection(ME(e,y,d.doc.resolve(x)))}e.focus(),e.dispatch(d.setMeta("uiEvent","drop"))};Dn.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&Wi(e)},20))};Dn.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)};Dn.beforeinput=(e,t)=>{if(kn&&Gi&&t.inputType=="deleteContentBackward"){e.domObserver.flushSoon();let{domChangeCount:r}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=r||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",s=>s(e,Vo(8,"Backspace")))))return;let{$cursor:i}=e.state.selection;i&&i.pos>0&&e.dispatch(e.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let e in Rn)Dn[e]=Rn[e];function Ku(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class Gh{constructor(t,n){this.toDOM=t,this.spec=n||ea,this.side=this.spec.side||0}map(t,n,r,i){let{pos:s,deleted:o}=t.mapResult(n.from+i,this.side<0?-1:1);return o?null:new Mn(s-r,s-r,this)}valid(){return!0}eq(t){return this==t||t instanceof Gh&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&Ku(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class Zs{constructor(t,n){this.attrs=t,this.spec=n||ea}map(t,n,r,i){let s=t.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,o=t.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new Mn(s,o,this)}valid(t,n){return n.from<n.to}eq(t){return this==t||t instanceof Zs&&Ku(this.attrs,t.attrs)&&Ku(this.spec,t.spec)}static is(t){return t.type instanceof Zs}destroy(){}}class jE{constructor(t,n){this.attrs=t,this.spec=n||ea}map(t,n,r,i){let s=t.mapResult(n.from+i,1);if(s.deleted)return null;let o=t.mapResult(n.to+i,-1);return o.deleted||o.pos<=s.pos?null:new Mn(s.pos-r,o.pos-r,this)}valid(t,n){let{index:r,offset:i}=t.content.findIndex(n.from),s;return i==n.from&&!(s=t.child(r)).isText&&i+s.nodeSize==n.to}eq(t){return this==t||t instanceof jE&&Ku(this.attrs,t.attrs)&&Ku(this.spec,t.spec)}destroy(){}}class Mn{constructor(t,n,r){this.from=t,this.to=n,this.type=r}copy(t,n){return new Mn(t,n,this.type)}eq(t,n=0){return this.type.eq(t.type)&&this.from+n==t.from&&this.to+n==t.to}map(t,n,r){return this.type.map(t,this,n,r)}static widget(t,n,r){return new Mn(t,t,new Gh(n,r))}static inline(t,n,r,i){return new Mn(t,n,new Zs(r,i))}static node(t,n,r,i){return new Mn(t,n,new jE(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Zs}get widget(){return this.type instanceof Gh}}const pl=[],ea={};class wt{constructor(t,n){this.local=t.length?t:pl,this.children=n.length?n:pl}static create(t,n){return n.length?Kh(n,t,0,ea):Cn}find(t,n,r){let i=[];return this.findInner(t??0,n??1e9,i,0,r),i}findInner(t,n,r,i,s){for(let o=0;o<this.local.length;o++){let l=this.local[o];l.from<=n&&l.to>=t&&(!s||s(l.spec))&&r.push(l.copy(l.from+i,l.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>t){let l=this.children[o]+1;this.children[o+2].findInner(t-l,n-l,r,i+l,s)}}map(t,n,r){return this==Cn||t.maps.length==0?this:this.mapInner(t,n,0,0,r||ea)}mapInner(t,n,r,i,s){let o;for(let l=0;l<this.local.length;l++){let u=this.local[l].map(t,r,i);u&&u.type.valid(n,u)?(o||(o=[])).push(u):s.onRemove&&s.onRemove(this.local[l].spec)}return this.children.length?YW(this.children,o||[],t,n,r,i,s):o?new wt(o.sort(ta),pl):Cn}add(t,n){return n.length?this==Cn?wt.create(t,n):this.addInner(t,n,0):this}addInner(t,n,r){let i,s=0;t.forEach((l,u)=>{let d=u+r,h;if(h=EI(n,l,d)){for(i||(i=this.children.slice());s<i.length&&i[s]<u;)s+=3;i[s]==u?i[s+2]=i[s+2].addInner(l,h,d+1):i.splice(s,0,u,u+l.nodeSize,Kh(h,l,d+1,ea)),s+=3}});let o=CI(s?kI(n):n,-r);for(let l=0;l<o.length;l++)o[l].type.valid(t,o[l])||o.splice(l--,1);return new wt(o.length?this.local.concat(o).sort(ta):this.local,i||this.children)}remove(t){return t.length==0||this==Cn?this:this.removeInner(t,0)}removeInner(t,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,l=r[s]+n,u=r[s+1]+n;for(let h=0,p;h<t.length;h++)(p=t[h])&&p.from>l&&p.to<u&&(t[h]=null,(o||(o=[])).push(p));if(!o)continue;r==this.children&&(r=this.children.slice());let d=r[s+2].removeInner(o,l+1);d!=Cn?r[s+2]=d:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<t.length;s++)if(o=t[s])for(let l=0;l<i.length;l++)i[l].eq(o,n)&&(i==this.local&&(i=this.local.slice()),i.splice(l--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new wt(i,r):Cn}forChild(t,n){if(this==Cn)return this;if(n.isLeaf)return wt.empty;let r,i;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=t){this.children[l]==t&&(r=this.children[l+2]);break}let s=t+1,o=s+n.content.size;for(let l=0;l<this.local.length;l++){let u=this.local[l];if(u.from<o&&u.to>s&&u.type instanceof Zs){let d=Math.max(s,u.from)-s,h=Math.min(o,u.to)-s;d<h&&(i||(i=[])).push(u.copy(d,h))}}if(i){let l=new wt(i.sort(ta),pl);return r?new qs([l,r]):l}return r||Cn}eq(t){if(this==t)return!0;if(!(t instanceof wt)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(t.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!0}locals(t){return LE(this.localsInner(t))}localsInner(t){if(this==Cn)return pl;if(t.inlineContent||!this.local.some(Zs.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Zs||n.push(this.local[r]);return n}forEachSet(t){t(this)}}wt.empty=new wt([],[]);wt.removeOverlap=LE;const Cn=wt.empty;class qs{constructor(t){this.members=t}map(t,n){const r=this.members.map(i=>i.map(t,n,ea));return qs.from(r)}forChild(t,n){if(n.isLeaf)return wt.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(t,n);s!=Cn&&(s instanceof qs?r=r.concat(s.members):r.push(s))}return qs.from(r)}eq(t){if(!(t instanceof qs)||t.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(t.members[n]))return!1;return!0}locals(t){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(t);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?LE(r?n:n.sort(ta)):pl}static from(t){switch(t.length){case 0:return Cn;case 1:return t[0];default:return new qs(t.every(n=>n instanceof wt)?t:t.reduce((n,r)=>n.concat(r instanceof wt?r:r.members),[]))}}forEachSet(t){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(t)}}function YW(e,t,n,r,i,s,o){let l=e.slice();for(let d=0,h=s;d<n.maps.length;d++){let p=0;n.maps[d].forEach((g,y,x,S)=>{let w=S-x-(y-g);for(let E=0;E<l.length;E+=3){let N=l[E+1];if(N<0||g>N+h-p)continue;let k=l[E]+h-p;y>=k?l[E+1]=g<=k?-2:-1:g>=h&&w&&(l[E]+=w,l[E+1]+=w)}p+=w}),h=n.maps[d].map(h,-1)}let u=!1;for(let d=0;d<l.length;d+=3)if(l[d+1]<0){if(l[d+1]==-2){u=!0,l[d+1]=-1;continue}let h=n.map(e[d]+s),p=h-i;if(p<0||p>=r.content.size){u=!0;continue}let g=n.map(e[d+1]+s,-1),y=g-i,{index:x,offset:S}=r.content.findIndex(p),w=r.maybeChild(x);if(w&&S==p&&S+w.nodeSize==y){let E=l[d+2].mapInner(n,w,h+1,e[d]+s+1,o);E!=Cn?(l[d]=p,l[d+1]=y,l[d+2]=E):(l[d+1]=-2,u=!0)}else u=!0}if(u){let d=WW(l,e,t,n,i,s,o),h=Kh(d,r,0,o);t=h.local;for(let p=0;p<l.length;p+=3)l[p+1]<0&&(l.splice(p,3),p-=3);for(let p=0,g=0;p<h.children.length;p+=3){let y=h.children[p];for(;g<l.length&&l[g]<y;)g+=3;l.splice(g,0,h.children[p],h.children[p+1],h.children[p+2])}}return new wt(t.sort(ta),l)}function CI(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let i=e[r];n.push(new Mn(i.from+t,i.to+t,i.type))}return n}function WW(e,t,n,r,i,s,o){function l(u,d){for(let h=0;h<u.local.length;h++){let p=u.local[h].map(r,i,d);p?n.push(p):o.onRemove&&o.onRemove(u.local[h].spec)}for(let h=0;h<u.children.length;h+=3)l(u.children[h+2],u.children[h]+d+1)}for(let u=0;u<e.length;u+=3)e[u+1]==-1&&l(e[u+2],t[u]+s+1);return n}function EI(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,i=null;for(let s=0,o;s<e.length;s++)(o=e[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),e[s]=null);return i}function kI(e){let t=[];for(let n=0;n<e.length;n++)e[n]!=null&&t.push(e[n]);return t}function Kh(e,t,n,r){let i=[],s=!1;t.forEach((l,u)=>{let d=EI(e,l,u+n);if(d){s=!0;let h=Kh(d,l,n+u+1,r);h!=Cn&&i.push(u,u+l.nodeSize,h)}});let o=CI(s?kI(e):e,-n).sort(ta);for(let l=0;l<o.length;l++)o[l].type.valid(t,o[l])||(r.onRemove&&r.onRemove(o[l].spec),o.splice(l--,1));return o.length||i.length?new wt(o,i):Cn}function ta(e,t){return e.from-t.from||e.to-t.to}function LE(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let i=n+1;i<t.length;i++){let s=t[i];if(s.from==r.from){s.to!=r.to&&(t==e&&(t=e.slice()),t[i]=s.copy(s.from,r.to),W_(t,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,s.from),W_(t,i,r.copy(s.from,r.to)));break}}}return t}function W_(e,t,n){for(;t<e.length&&ta(n,e[t])>0;)t++;e.splice(t,0,n)}function M0(e){let t=[];return e.someProp("decorations",n=>{let r=n(e.state);r&&r!=Cn&&t.push(r)}),e.cursorWrapper&&t.push(wt.create(e.state.doc,[e.cursorWrapper.deco])),qs.from(t)}const XW={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},ZW=Fn&&Ws<=11;class QW{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class JW{constructor(t,n){this.view=t,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new QW,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Fn&&Ws<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),ZW&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,XW)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(V_(this.view)){if(this.suppressingSelectionUpdates)return Wi(this.view);if(Fn&&Ws<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&aa(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let n=new Set,r;for(let s=t.focusNode;s;s=Ol(s))n.add(s);for(let s=t.anchorNode;s;s=Ol(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=t.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&V_(t)&&!this.ignoreSelectionChange(r),s=-1,o=-1,l=!1,u=[];if(t.editable)for(let h=0;h<n.length;h++){let p=this.registerMutation(n[h],u);p&&(s=s<0?p.from:Math.min(p.from,s),o=o<0?p.to:Math.max(p.to,o),p.typeOver&&(l=!0))}if(_r&&u.length){let h=u.filter(p=>p.nodeName=="BR");if(h.length==2){let[p,g]=h;p.parentNode&&p.parentNode.parentNode==g.parentNode?g.remove():p.remove()}else{let{focusNode:p}=this.currentSelection;for(let g of h){let y=g.parentNode;y&&y.nodeName=="LI"&&(!p||nX(t,p)!=y)&&g.remove()}}}let d=null;s<0&&i&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&tm(r)&&(d=AE(t))&&d.eq(Ue.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,Wi(t),this.currentSelection.set(r),t.scrollToSelection()):(s>-1||i)&&(s>-1&&(t.docView.markDirty(s,o),eX(t)),this.handleDOMChange(s,o,l,u),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(r)||Wi(t),this.currentSelection.set(r))}registerMutation(t,n){if(n.indexOf(t.target)>-1)return null;let r=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(r==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!r||r.ignoreMutation(t))return null;if(t.type=="childList"){for(let h=0;h<t.addedNodes.length;h++){let p=t.addedNodes[h];n.push(p),p.nodeType==3&&(this.lastChangedTextNode=p)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(t.target))return{from:r.posBefore,to:r.posAfter};let i=t.previousSibling,s=t.nextSibling;if(Fn&&Ws<=11&&t.addedNodes.length)for(let h=0;h<t.addedNodes.length;h++){let{previousSibling:p,nextSibling:g}=t.addedNodes[h];(!p||Array.prototype.indexOf.call(t.addedNodes,p)<0)&&(i=p),(!g||Array.prototype.indexOf.call(t.addedNodes,g)<0)&&(s=g)}let o=i&&i.parentNode==t.target?yn(i)+1:0,l=r.localPosFromDOM(t.target,o,-1),u=s&&s.parentNode==t.target?yn(s):t.target.childNodes.length,d=r.localPosFromDOM(t.target,u,1);return{from:l,to:d}}else return t.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=t.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:t.target.nodeValue==t.oldValue})}}let X_=new WeakMap,Z_=!1;function eX(e){if(!X_.has(e)&&(X_.set(e,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)!==-1)){if(e.requiresGeckoHackNode=_r,Z_)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),Z_=!0}}function Q_(e,t){let n=t.startContainer,r=t.startOffset,i=t.endContainer,s=t.endOffset,o=e.domAtPos(e.state.selection.anchor);return aa(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function tX(e,t){if(t.getComposedRanges){let i=t.getComposedRanges(e.root)[0];if(i)return Q_(e,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",r,!0),n?Q_(e,n):null}function nX(e,t){for(let n=t.parentNode;n&&n!=e.dom;n=n.parentNode){let r=e.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function rX(e,t,n){let{node:r,fromOffset:i,toOffset:s,from:o,to:l}=e.docView.parseRange(t,n),u=e.domSelectionRange(),d,h=u.anchorNode;if(h&&e.dom.contains(h.nodeType==1?h:h.parentNode)&&(d=[{node:h,offset:u.anchorOffset}],tm(u)||d.push({node:u.focusNode,offset:u.focusOffset})),kn&&e.input.lastKeyCode===8)for(let w=s;w>i;w--){let E=r.childNodes[w-1],N=E.pmViewDesc;if(E.nodeName=="BR"&&!N){s=w;break}if(!N||N.size)break}let p=e.state.doc,g=e.someProp("domParser")||Ys.fromSchema(e.state.schema),y=p.resolve(o),x=null,S=g.parse(r,{topNode:y.parent,topMatch:y.parent.contentMatchAt(y.index()),topOpen:!0,from:i,to:s,preserveWhitespace:y.parent.type.whitespace=="pre"?"full":!0,findPositions:d,ruleFromNode:iX,context:y});if(d&&d[0].pos!=null){let w=d[0].pos,E=d[1]&&d[1].pos;E==null&&(E=w),x={anchor:w+o,head:E+o}}return{doc:S,sel:x,from:o,to:l}}function iX(e){let t=e.pmViewDesc;if(t)return t.parseRule();if(e.nodeName=="BR"&&e.parentNode){if(_n&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(e.parentNode.lastChild==e||_n&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if(e.nodeName=="IMG"&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const sX=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function oX(e,t,n,r,i){let s=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let D=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,B=AE(e,D);if(B&&!e.state.selection.eq(B)){if(kn&&Gi&&e.input.lastKeyCode===13&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",z=>z(e,Vo(13,"Enter"))))return;let $=e.state.tr.setSelection(B);D=="pointer"?$.setMeta("pointer",!0):D=="key"&&$.scrollIntoView(),s&&$.setMeta("composition",s),e.dispatch($)}return}let o=e.state.doc.resolve(t),l=o.sharedDepth(n);t=o.before(l+1),n=e.state.doc.resolve(n).after(l+1);let u=e.state.selection,d=rX(e,t,n),h=e.state.doc,p=h.slice(d.from,d.to),g,y;e.input.lastKeyCode===8&&Date.now()-100<e.input.lastKeyCodeTime?(g=e.state.selection.to,y="end"):(g=e.state.selection.from,y="start"),e.input.lastKeyCode=null;let x=cX(p.content,d.doc.content,d.from,g,y);if(x&&e.input.domChangeCount++,(jl&&e.input.lastIOSEnter>Date.now()-225||Gi)&&i.some(D=>D.nodeType==1&&!sX.test(D.nodeName))&&(!x||x.endA>=x.endB)&&e.someProp("handleKeyDown",D=>D(e,Vo(13,"Enter")))){e.input.lastIOSEnter=0;return}if(!x)if(r&&u instanceof Ve&&!u.empty&&u.$head.sameParent(u.$anchor)&&!e.composing&&!(d.sel&&d.sel.anchor!=d.sel.head))x={start:u.from,endA:u.to,endB:u.to};else{if(d.sel){let D=J_(e,e.state.doc,d.sel);if(D&&!D.eq(e.state.selection)){let B=e.state.tr.setSelection(D);s&&B.setMeta("composition",s),e.dispatch(B)}}return}e.state.selection.from<e.state.selection.to&&x.start==x.endB&&e.state.selection instanceof Ve&&(x.start>e.state.selection.from&&x.start<=e.state.selection.from+2&&e.state.selection.from>=d.from?x.start=e.state.selection.from:x.endA<e.state.selection.to&&x.endA>=e.state.selection.to-2&&e.state.selection.to<=d.to&&(x.endB+=e.state.selection.to-x.endA,x.endA=e.state.selection.to)),Fn&&Ws<=11&&x.endB==x.start+1&&x.endA==x.start&&x.start>d.from&&d.doc.textBetween(x.start-d.from-1,x.start-d.from+1)==" "&&(x.start--,x.endA--,x.endB--);let S=d.doc.resolveNoCache(x.start-d.from),w=d.doc.resolveNoCache(x.endB-d.from),E=h.resolve(x.start),N=S.sameParent(w)&&S.parent.inlineContent&&E.end()>=x.endA,k;if((jl&&e.input.lastIOSEnter>Date.now()-225&&(!N||i.some(D=>D.nodeName=="DIV"||D.nodeName=="P"))||!N&&S.pos<d.doc.content.size&&(!S.sameParent(w)||!S.parent.inlineContent)&&!/\S/.test(d.doc.textBetween(S.pos,w.pos,"",""))&&(k=Ue.findFrom(d.doc.resolve(S.pos+1),1,!0))&&k.head>S.pos)&&e.someProp("handleKeyDown",D=>D(e,Vo(13,"Enter")))){e.input.lastIOSEnter=0;return}if(e.state.selection.anchor>x.start&&lX(h,x.start,x.endA,S,w)&&e.someProp("handleKeyDown",D=>D(e,Vo(8,"Backspace")))){Gi&&kn&&e.domObserver.suppressSelectionUpdates();return}kn&&x.endB==x.start&&(e.input.lastChromeDelete=Date.now()),Gi&&!N&&S.start()!=w.start()&&w.parentOffset==0&&S.depth==w.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==x.endA&&(x.endB-=2,w=d.doc.resolveNoCache(x.endB-d.from),setTimeout(()=>{e.someProp("handleKeyDown",function(D){return D(e,Vo(13,"Enter"))})},20));let T=x.start,A=x.endA,_=D=>{let B=D||e.state.tr.replace(T,A,d.doc.slice(x.start-d.from,x.endB-d.from));if(d.sel){let $=J_(e,B.doc,d.sel);$&&!(kn&&e.composing&&$.empty&&(x.start!=x.endB||e.input.lastChromeDelete<Date.now()-100)&&($.head==T||$.head==B.mapping.map(A)-1)||Fn&&$.empty&&$.head==T)&&B.setSelection($)}return s&&B.setMeta("composition",s),B.scrollIntoView()},R;if(N){if(S.pos==w.pos){Fn&&Ws<=11&&S.parentOffset==0&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>Wi(e),20));let D=_(e.state.tr.delete(T,A)),B=h.resolve(x.start).marksAcross(h.resolve(x.endA));B&&D.ensureMarks(B),e.dispatch(D)}else if(x.endA==x.endB&&(R=aX(S.parent.content.cut(S.parentOffset,w.parentOffset),E.parent.content.cut(E.parentOffset,x.endA-E.start())))){let D=_(e.state.tr);R.type=="add"?D.addMark(T,A,R.mark):D.removeMark(T,A,R.mark),e.dispatch(D)}else if(S.parent.child(S.index()).isText&&S.index()==w.index()-(w.textOffset?0:1)){let D=S.parent.textBetween(S.parentOffset,w.parentOffset),B=()=>_(e.state.tr.insertText(D,T,A));e.someProp("handleTextInput",$=>$(e,T,A,D,B))||e.dispatch(B())}}else e.dispatch(_())}function J_(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:ME(e,t.resolve(n.anchor),t.resolve(n.head))}function aX(e,t){let n=e.firstChild.marks,r=t.firstChild.marks,i=n,s=r,o,l,u;for(let h=0;h<r.length;h++)i=r[h].removeFromSet(i);for(let h=0;h<n.length;h++)s=n[h].removeFromSet(s);if(i.length==1&&s.length==0)l=i[0],o="add",u=h=>h.mark(l.addToSet(h.marks));else if(i.length==0&&s.length==1)l=s[0],o="remove",u=h=>h.mark(l.removeFromSet(h.marks));else return null;let d=[];for(let h=0;h<t.childCount;h++)d.push(u(t.child(h)));if(pe.from(d).eq(e))return{mark:l,type:o}}function lX(e,t,n,r,i){if(n-t<=i.pos-r.pos||_0(r,!0,!1)<i.pos)return!1;let s=e.resolve(t);if(!r.parent.isTextblock){let l=s.nodeAfter;return l!=null&&n==t+l.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=e.resolve(_0(s,!0,!0));return!o.parent.isTextblock||o.pos>n||_0(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function _0(e,t,n){let r=e.depth,i=t?e.end():e.pos;for(;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,i++,t=!1;if(n){let s=e.node(r).maybeChild(e.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function cX(e,t,n,r,i){let s=e.findDiffStart(t,n);if(s==null)return null;let{a:o,b:l}=e.findDiffEnd(t,n+e.size,n+t.size);if(i=="end"){let u=Math.max(0,s-Math.min(o,l));r-=o+u-s}if(o<s&&e.size<t.size){let u=r<=s&&r>=o?s-r:0;s-=u,s&&s<t.size&&eD(t.textBetween(s-1,s+1))&&(s+=u?1:-1),l=s+(l-o),o=s}else if(l<s){let u=r<=s&&r>=l?s-r:0;s-=u,s&&s<e.size&&eD(e.textBetween(s-1,s+1))&&(s+=u?1:-1),o=s+(o-l),l=s}return{start:s,endA:o,endB:l}}function eD(e){if(e.length!=2)return!1;let t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}class TI{constructor(t,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new AW,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(sD),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):typeof t=="function"?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=rD(this),nD(this),this.nodeViews=iD(this),this.docView=L_(this.state.doc,tD(this),M0(this),this.dom,this),this.domObserver=new JW(this,(r,i,s,o)=>oX(this,r,i,s,o)),this.domObserver.start(),MW(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let n in t)this._props[n]=t[n];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&uC(this);let n=this._props;this._props=t,t.plugins&&(t.plugins.forEach(sD),this.directPlugins=t.plugins),this.updateStateInner(t.state,n)}setProps(t){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in t)n[r]=t[r];this.update(n)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,n){var r;let i=this.state,s=!1,o=!1;t.storedMarks&&this.composing&&(bI(this),o=!0),this.state=t;let l=i.plugins!=t.plugins||this._props.plugins!=n.plugins;if(l||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let y=iD(this);dX(y,this.nodeViews)&&(this.nodeViews=y,s=!0)}(l||n.handleDOMEvents!=this._props.handleDOMEvents)&&uC(this),this.editable=rD(this),nD(this);let u=M0(this),d=tD(this),h=i.plugins!=t.plugins&&!i.doc.eq(t.doc)?"reset":t.scrollToSelection>i.scrollToSelection?"to selection":"preserve",p=s||!this.docView.matchesNode(t.doc,d,u);(p||!t.selection.eq(i.selection))&&(o=!0);let g=h=="preserve"&&o&&this.dom.style.overflowAnchor==null&&FY(this);if(o){this.domObserver.stop();let y=p&&(Fn||kn)&&!this.composing&&!i.selection.empty&&!t.selection.empty&&uX(i.selection,t.selection);if(p){let x=kn?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=HW(this)),(s||!this.docView.update(t.doc,d,u,this))&&(this.docView.updateOuterDeco(d),this.docView.destroy(),this.docView=L_(t.doc,d,u,this.dom,this)),x&&!this.trackWrites&&(y=!0)}y||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&hW(this))?Wi(this,y):(aI(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,i),h=="reset"?this.dom.scrollTop=0:h=="to selection"?this.scrollToSelection():g&&UY(g)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(!(!t||!this.dom.contains(t.nodeType==1?t:t.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof Re){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&M_(this,n.getBoundingClientRect(),t)}else M_(this,this.coordsAtPos(this.state.selection.head,1),t)}}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,t)}}updateDraggedNode(t,n){let r=t.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new wI(t.slice,t.move,i<0?void 0:Re.create(this.state.doc,i))}someProp(t,n){let r=this._props&&this._props[t],i;if(r!=null&&(i=n?n(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let l=this.directPlugins[o].props[t];if(l!=null&&(i=n?n(l):l))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let l=s[o].props[t];if(l!=null&&(i=n?n(l):l))return i}}hasFocus(){if(Fn){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if(t.contentEditable=="false")return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&$Y(this.dom),Wi(this),this.domObserver.start()}get root(){let t=this._root;if(t==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return t||document}updateRoot(){this._root=null}posAtCoords(t){return XY(this,t)}coordsAtPos(t,n=1){return JB(this,t,n)}domAtPos(t,n=0){return this.docView.domFromPos(t,n)}nodeDOM(t){let n=this.docView.descAt(t);return n?n.nodeDOM:null}posAtDOM(t,n,r=-1){let i=this.docView.posFromDOM(t,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(t,n){return tW(this,n||this.state,t)}pasteHTML(t,n){return Gu(this,"",t,!1,n||new ClipboardEvent("paste"))}pasteText(t,n){return Gu(this,t,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(t){return _E(this,t)}destroy(){this.docView&&(_W(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],M0(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,RY())}get isDestroyed(){return this.docView==null}dispatchEvent(t){return RW(this,t)}domSelectionRange(){let t=this.domSelection();return t?_n&&this.root.nodeType===11&&BY(this.dom.ownerDocument)==this.dom&&tX(this,t)||t:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}TI.prototype.dispatch=function(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))};function tD(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(e.state)),n)for(let r in n)r=="class"?t.class+=" "+n[r]:r=="style"?t.style=(t.style?t.style+";":"")+n[r]:!t[r]&&r!="contenteditable"&&r!="nodeName"&&(t[r]=String(n[r]))}),t.translate||(t.translate="no"),[Mn.node(0,e.state.doc.content.size,t)]}function nD(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:Mn.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function rD(e){return!e.someProp("editable",t=>t(e.state)===!1)}function uX(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}function iD(e){let t=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(t,i)||(t[i]=r[i])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function dX(e,t){let n=0,r=0;for(let i in e){if(e[i]!=t[i])return!0;n++}for(let i in t)r++;return n!=r}function sD(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var no={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Yh={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},fX=typeof navigator<"u"&&/Mac/.test(navigator.platform),hX=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var vn=0;vn<10;vn++)no[48+vn]=no[96+vn]=String(vn);for(var vn=1;vn<=24;vn++)no[vn+111]="F"+vn;for(var vn=65;vn<=90;vn++)no[vn]=String.fromCharCode(vn+32),Yh[vn]=String.fromCharCode(vn);for(var D0 in no)Yh.hasOwnProperty(D0)||(Yh[D0]=no[D0]);function pX(e){var t=fX&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||hX&&e.shiftKey&&e.key&&e.key.length==1||e.key=="Unidentified",n=!t&&e.key||(e.shiftKey?Yh:no)[e.keyCode]||e.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const mX=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),gX=typeof navigator<"u"&&/Win/.test(navigator.platform);function yX(e){let t=e.split(/-(?!$)/),n=t[t.length-1];n=="Space"&&(n=" ");let r,i,s,o;for(let l=0;l<t.length-1;l++){let u=t[l];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))i=!0;else if(/^s(hift)?$/i.test(u))s=!0;else if(/^mod$/i.test(u))mX?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+u)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function vX(e){let t=Object.create(null);for(let n in e)t[yX(n)]=e[n];return t}function R0(e,t,n=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function bX(e){return new _t({props:{handleKeyDown:NI(e)}})}function NI(e){let t=vX(e);return function(n,r){let i=pX(r),s,o=t[R0(i,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let l=t[R0(i,r,!1)];if(l&&l(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(gX&&r.ctrlKey&&r.altKey)&&(s=no[r.keyCode])&&s!=i){let l=t[R0(s,r)];if(l&&l(n.state,n.dispatch,n))return!0}}return!1}}const PE=(e,t)=>e.selection.empty?!1:(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function AI(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}const MI=(e,t,n)=>{let r=AI(e,n);if(!r)return!1;let i=BE(r);if(!i){let o=r.blockRange(),l=o&&Gl(o);return l==null?!1:(t&&t(e.tr.lift(o,l).scrollIntoView()),!0)}let s=i.nodeBefore;if(II(e,i,t,-1))return!0;if(r.parent.content.size==0&&(Ll(s,"end")||Re.isSelectable(s)))for(let o=r.depth;;o--){let l=Jp(e.doc,r.before(o),r.after(o),be.empty);if(l&&l.slice.size<l.to-l.from){if(t){let u=e.tr.step(l);u.setSelection(Ll(s,"end")?Ue.findFrom(u.doc.resolve(u.mapping.map(i.pos,-1)),-1):Re.create(u.doc,i.pos-s.nodeSize)),t(u.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(t&&t(e.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},xX=(e,t,n)=>{let r=AI(e,n);if(!r)return!1;let i=BE(r);return i?_I(e,i,t):!1},wX=(e,t,n)=>{let r=RI(e,n);if(!r)return!1;let i=IE(r);return i?_I(e,i,t):!1};function _I(e,t,n){let r=t.nodeBefore,i=r,s=t.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let h=i.lastChild;if(!h)return!1;i=h}let o=t.nodeAfter,l=o,u=t.pos+1;for(;!l.isTextblock;u++){if(l.type.spec.isolating)return!1;let h=l.firstChild;if(!h)return!1;l=h}let d=Jp(e.doc,s,u,be.empty);if(!d||d.from!=s||d instanceof an&&d.slice.size>=u-s)return!1;if(n){let h=e.tr.step(d);h.setSelection(Ve.create(h.doc,s)),n(h.scrollIntoView())}return!0}function Ll(e,t,n=!1){for(let r=e;r;r=t=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const DI=(e,t,n)=>{let{$head:r,empty:i}=e.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;s=BE(r)}let o=s&&s.nodeBefore;return!o||!Re.isSelectable(o)?!1:(t&&t(e.tr.setSelection(Re.create(e.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function BE(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function RI(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}const OI=(e,t,n)=>{let r=RI(e,n);if(!r)return!1;let i=IE(r);if(!i)return!1;let s=i.nodeAfter;if(II(e,i,t,1))return!0;if(r.parent.content.size==0&&(Ll(s,"start")||Re.isSelectable(s))){let o=Jp(e.doc,r.before(),r.after(),be.empty);if(o&&o.slice.size<o.to-o.from){if(t){let l=e.tr.step(o);l.setSelection(Ll(s,"start")?Ue.findFrom(l.doc.resolve(l.mapping.map(i.pos)),1):Re.create(l.doc,l.mapping.map(i.pos))),t(l.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(t&&t(e.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},jI=(e,t,n)=>{let{$head:r,empty:i}=e.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;s=IE(r)}let o=s&&s.nodeAfter;return!o||!Re.isSelectable(o)?!1:(t&&t(e.tr.setSelection(Re.create(e.doc,s.pos)).scrollIntoView()),!0)};function IE(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const SX=(e,t)=>{let n=e.selection,r=n instanceof Re,i;if(r){if(n.node.isTextblock||!oo(e.doc,n.from))return!1;i=n.from}else if(i=Qp(e.doc,n.from,-1),i==null)return!1;if(t){let s=e.tr.join(i);r&&s.setSelection(Re.create(s.doc,i-e.doc.resolve(i).nodeBefore.nodeSize)),t(s.scrollIntoView())}return!0},CX=(e,t)=>{let n=e.selection,r;if(n instanceof Re){if(n.node.isTextblock||!oo(e.doc,n.to))return!1;r=n.to}else if(r=Qp(e.doc,n.to,1),r==null)return!1;return t&&t(e.tr.join(r).scrollIntoView()),!0},EX=(e,t)=>{let{$from:n,$to:r}=e.selection,i=n.blockRange(r),s=i&&Gl(i);return s==null?!1:(t&&t(e.tr.lift(i,s).scrollIntoView()),!0)},LI=(e,t)=>{let{$head:n,$anchor:r}=e.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(t&&t(e.tr.insertText(`
`).scrollIntoView()),!0)};function zE(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const kX=(e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=zE(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(t){let l=n.after(),u=e.tr.replaceWith(l,l,o.createAndFill());u.setSelection(Ue.near(u.doc.resolve(l),1)),t(u.scrollIntoView())}return!0},PI=(e,t)=>{let n=e.selection,{$from:r,$to:i}=n;if(n instanceof lr||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=zE(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(t){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,l=e.tr.insert(o,s.createAndFill());l.setSelection(Ve.create(l.doc,o+1)),t(l.scrollIntoView())}return!0},BI=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(Yi(e.doc,s))return t&&t(e.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&Gl(r);return i==null?!1:(t&&t(e.tr.lift(r,i).scrollIntoView()),!0)};function TX(e){return(t,n)=>{let{$from:r,$to:i}=t.selection;if(t.selection instanceof Re&&t.selection.node.isBlock)return!r.parentOffset||!Yi(t.doc,r.pos)?!1:(n&&n(t.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],o,l,u=!1,d=!1;for(let y=r.depth;;y--)if(r.node(y).isBlock){u=r.end(y)==r.pos+(r.depth-y),d=r.start(y)==r.pos-(r.depth-y),l=zE(r.node(y-1).contentMatchAt(r.indexAfter(y-1))),s.unshift(u&&l?{type:l}:null),o=y;break}else{if(y==1)return!1;s.unshift(null)}let h=t.tr;(t.selection instanceof Ve||t.selection instanceof lr)&&h.deleteSelection();let p=h.mapping.map(r.pos),g=Yi(h.doc,p,s.length,s);if(g||(s[0]=l?{type:l}:null,g=Yi(h.doc,p,s.length,s)),!g)return!1;if(h.split(p,s.length,s),!u&&d&&r.node(o).type!=l){let y=h.mapping.map(r.before(o)),x=h.doc.resolve(y);l&&r.node(o-1).canReplaceWith(x.index(),x.index()+1,l)&&h.setNodeMarkup(h.mapping.map(r.before(o)),l)}return n&&n(h.scrollIntoView()),!0}}const NX=TX(),AX=(e,t)=>{let{$from:n,to:r}=e.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),t&&t(e.tr.setSelection(Re.create(e.doc,i))),!0)};function MX(e,t,n){let r=t.nodeBefore,i=t.nodeAfter,s=t.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&t.parent.canReplace(s-1,s)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(s,s+1)||!(i.isTextblock||oo(e.doc,t.pos))?!1:(n&&n(e.tr.join(t.pos).scrollIntoView()),!0)}function II(e,t,n,r){let i=t.nodeBefore,s=t.nodeAfter,o,l,u=i.type.spec.isolating||s.type.spec.isolating;if(!u&&MX(e,t,n))return!0;let d=!u&&t.parent.canReplace(t.index(),t.index()+1);if(d&&(o=(l=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&l.matchType(o[0]||s.type).validEnd){if(n){let y=t.pos+s.nodeSize,x=pe.empty;for(let E=o.length-1;E>=0;E--)x=pe.from(o[E].create(null,x));x=pe.from(i.copy(x));let S=e.tr.step(new cn(t.pos-1,y,t.pos,y,new be(x,1,0),o.length,!0)),w=S.doc.resolve(y+2*o.length);w.nodeAfter&&w.nodeAfter.type==i.type&&oo(S.doc,w.pos)&&S.join(w.pos),n(S.scrollIntoView())}return!0}let h=s.type.spec.isolating||r>0&&u?null:Ue.findFrom(t,1),p=h&&h.$from.blockRange(h.$to),g=p&&Gl(p);if(g!=null&&g>=t.depth)return n&&n(e.tr.lift(p,g).scrollIntoView()),!0;if(d&&Ll(s,"start",!0)&&Ll(i,"end")){let y=i,x=[];for(;x.push(y),!y.isTextblock;)y=y.lastChild;let S=s,w=1;for(;!S.isTextblock;S=S.firstChild)w++;if(y.canReplace(y.childCount,y.childCount,S.content)){if(n){let E=pe.empty;for(let k=x.length-1;k>=0;k--)E=pe.from(x[k].copy(E));let N=e.tr.step(new cn(t.pos-x.length,t.pos+s.nodeSize,t.pos+w,t.pos+s.nodeSize-w,new be(E,x.length,0),0,!0));n(N.scrollIntoView())}return!0}}return!1}function zI(e){return function(t,n){let r=t.selection,i=e<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(t.tr.setSelection(Ve.create(t.doc,e<0?i.start(s):i.end(s)))),!0):!1}}const _X=zI(-1),DX=zI(1);function RX(e,t=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),l=o&&kE(o,e,t);return l?(r&&r(n.tr.wrap(o,l).scrollIntoView()),!0):!1}}function oD(e,t=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:l}}=n.selection.ranges[s];n.doc.nodesBetween(o,l,(u,d)=>{if(i)return!1;if(!(!u.isTextblock||u.hasMarkup(e,t)))if(u.type==e)i=!0;else{let h=n.doc.resolve(d),p=h.index();i=h.parent.canReplaceWith(p,p+1,e)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:l},$to:{pos:u}}=n.selection.ranges[o];s.setBlockType(l,u,e,t)}r(s.scrollIntoView())}return!0}}function qE(...e){return function(t,n,r){for(let i=0;i<e.length;i++)if(e[i](t,n,r))return!0;return!1}}qE(PE,MI,DI);qE(PE,OI,jI);qE(LI,PI,BI,NX);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function OX(e,t=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s);if(!o)return!1;let l=r?n.tr:null;return jX(l,o,e,t)?(r&&r(l.scrollIntoView()),!0):!1}}function jX(e,t,n,r=null){let i=!1,s=t,o=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(n)&&t.startIndex==0){if(t.$from.index(t.depth-1)==0)return!1;let u=o.resolve(t.start-2);s=new Vh(u,u,t.depth),t.endIndex<t.parent.childCount&&(t=new Vh(t.$from,o.resolve(t.$to.end(t.depth)),t.depth)),i=!0}let l=kE(s,n,r,t);return l?(e&&LX(e,t,l,i,n),!0):!1}function LX(e,t,n,r,i){let s=pe.empty;for(let h=n.length-1;h>=0;h--)s=pe.from(n[h].type.create(n[h].attrs,s));e.step(new cn(t.start-(r?2:0),t.end,t.start,t.end,new be(s,0,0),n.length,!0));let o=0;for(let h=0;h<n.length;h++)n[h].type==i&&(o=h+1);let l=n.length-o,u=t.start+n.length-(r?2:0),d=t.parent;for(let h=t.startIndex,p=t.endIndex,g=!0;h<p;h++,g=!1)!g&&Yi(e.doc,u,l)&&(e.split(u,l),u+=2*l),u+=d.child(h).nodeSize;return e}function PX(e){return function(t,n){let{$from:r,$to:i}=t.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==e);return s?n?r.node(s.depth-1).type==e?BX(t,n,e,s):IX(t,n,s):!0:!1}}function BX(e,t,n,r){let i=e.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new cn(s-1,o,s,o,new be(pe.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Vh(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const l=Gl(r);if(l==null)return!1;i.lift(r,l);let u=i.doc.resolve(i.mapping.map(s,-1)-1);return oo(i.doc,u.pos)&&u.nodeBefore.type==u.nodeAfter.type&&i.join(u.pos),t(i.scrollIntoView()),!0}function IX(e,t,n){let r=e.tr,i=n.parent;for(let y=n.end,x=n.endIndex-1,S=n.startIndex;x>S;x--)y-=i.child(x).nodeSize,r.delete(y-1,y+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let l=n.startIndex==0,u=n.endIndex==i.childCount,d=s.node(-1),h=s.index(-1);if(!d.canReplace(h+(l?0:1),h+1,o.content.append(u?pe.empty:pe.from(i))))return!1;let p=s.pos,g=p+o.nodeSize;return r.step(new cn(p-(l?1:0),g+(u?1:0),p+1,g-1,new be((l?pe.empty:pe.from(i.copy(pe.empty))).append(u?pe.empty:pe.from(i.copy(pe.empty))),l?0:1,u?0:1),l?0:1)),t(r.scrollIntoView()),!0}function zX(e){return function(t,n){let{$from:r,$to:i}=t.selection,s=r.blockRange(i,d=>d.childCount>0&&d.firstChild.type==e);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let l=s.parent,u=l.child(o-1);if(u.type!=e)return!1;if(n){let d=u.lastChild&&u.lastChild.type==l.type,h=pe.from(d?e.create():null),p=new be(pe.from(e.create(null,pe.from(l.type.create(null,h)))),d?3:1,0),g=s.start,y=s.end;n(t.tr.step(new cn(g-(d?3:1),y,g,y,p,1,!0)).scrollIntoView())}return!0}}var qX=Object.defineProperty,qI=(e,t)=>{for(var n in t)qX(e,n,{get:t[n],enumerable:!0})};function im(e){const{state:t,transaction:n}=e;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}var sm=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:n}=this,{view:r}=t,{tr:i}=n,s=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(([o,l])=>[o,(...d)=>{const h=l(...d)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),h}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,o=[],l=!!e,u=e||i.tr,d=()=>(!l&&t&&!u.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(u),o.every(p=>p===!0)),h={...Object.fromEntries(Object.entries(n).map(([p,g])=>[p,(...x)=>{const S=this.buildProps(u,t),w=g(...x)(S);return o.push(w),h}])),run:d};return h}createCan(e){const{rawCommands:t,state:n}=this,r=!1,i=e||n.tr,s=this.buildProps(i,r);return{...Object.fromEntries(Object.entries(t).map(([l,u])=>[l,(...d)=>u(...d)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,r)}}buildProps(e,t=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,o={tr:e,editor:r,view:s,state:im({state:i,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map(([l,u])=>[l,(...d)=>u(...d)(o)]))}};return o}},VX=class{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const n=this.callbacks[e];return n&&n.forEach(r=>r.apply(this,t)),this}off(e,t){const n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter(r=>r!==t):delete this.callbacks[e]),this}once(e,t){const n=(...r)=>{this.off(e,n),t.apply(this,r)};return this.on(e,n)}removeAllListeners(){this.callbacks={}}};function VI(e,t){const n=new UB(e);return t.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}var HI=e=>{const t=e.childNodes;for(let n=t.length-1;n>=0;n-=1){const r=t[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?e.removeChild(r):r.nodeType===1&&HI(r)}return e};function Xf(e){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const t=`<body>${e}</body>`,n=new window.DOMParser().parseFromString(t,"text/html").body;return HI(n)}function Yu(e,t,n){if(e instanceof Ks||e instanceof pe)return e;n={slice:!0,parseOptions:{},...n};const r=typeof e=="object"&&e!==null,i=typeof e=="string";if(r)try{if(Array.isArray(e)&&e.length>0)return pe.fromArray(e.map(l=>t.nodeFromJSON(l)));const o=t.nodeFromJSON(e);return n.errorOnInvalidContent&&o.check(),o}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",s),Yu("",t,n)}if(i){if(n.errorOnInvalidContent){let o=!1,l="";const u=new AB({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:d=>(o=!0,l=typeof d=="string"?d:d.outerHTML,null)}]}})});if(n.slice?Ys.fromSchema(u).parseSlice(Xf(e),n.parseOptions):Ys.fromSchema(u).parse(Xf(e),n.parseOptions),n.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${l}`)})}const s=Ys.fromSchema(t);return n.slice?s.parseSlice(Xf(e),n.parseOptions).content:s.parse(Xf(e),n.parseOptions)}return Yu("",t,n)}function dC(e,t,n={},r={}){return Yu(e,t,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}function HX(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function FX(e,t,n){const r=[];return e.nodesBetween(t.from,t.to,(i,s)=>{n(i)&&r.push({node:i,pos:s})}),r}function UX(e,t){for(let n=e.depth;n>0;n-=1){const r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}function om(e){return t=>UX(t.$from,e)}function De(e,t,n){return e.config[t]===void 0&&e.parent?De(e.parent,t,n):typeof e.config[t]=="function"?e.config[t].bind({...n,parent:e.parent?De(e.parent,t,n):null}):e.config[t]}function VE(e){return e.map(t=>{const n={name:t.name,options:t.options,storage:t.storage},r=De(t,"addExtensions",n);return r?[t,...VE(r())]:t}).flat(10)}function HE(e,t){const n=ba.fromSchema(t).serializeFragment(e),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function FI(e){return typeof e=="function"}function it(e,t=void 0,...n){return FI(e)?t?e.bind(t)(...n):e(...n):e}function $X(e={}){return Object.keys(e).length===0&&e.constructor===Object}function Wu(e){const t=e.filter(i=>i.type==="extension"),n=e.filter(i=>i.type==="node"),r=e.filter(i=>i.type==="mark");return{baseExtensions:t,nodeExtensions:n,markExtensions:r}}function UI(e){const t=[],{nodeExtensions:n,markExtensions:r}=Wu(e),i=[...n,...r],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage,extensions:i},u=De(o,"addGlobalAttributes",l);if(!u)return;u().forEach(h=>{h.types.forEach(p=>{Object.entries(h.attributes).forEach(([g,y])=>{t.push({type:p,name:g,attribute:{...s,...y}})})})})}),i.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage},u=De(o,"addAttributes",l);if(!u)return;const d=u();Object.entries(d).forEach(([h,p])=>{const g={...s,...p};typeof g?.default=="function"&&(g.default=g.default()),g?.isRequired&&g?.default===void 0&&delete g.default,t.push({type:o.name,name:h,attribute:g})})}),t}function $t(...e){return e.filter(t=>!!t).reduce((t,n)=>{const r={...t};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const l=s?String(s).split(" "):[],u=r[i]?r[i].split(" "):[],d=l.filter(h=>!u.includes(h));r[i]=[...u,...d].join(" ")}else if(i==="style"){const l=s?s.split(";").map(h=>h.trim()).filter(Boolean):[],u=r[i]?r[i].split(";").map(h=>h.trim()).filter(Boolean):[],d=new Map;u.forEach(h=>{const[p,g]=h.split(":").map(y=>y.trim());d.set(p,g)}),l.forEach(h=>{const[p,g]=h.split(":").map(y=>y.trim());d.set(p,g)}),r[i]=Array.from(d.entries()).map(([h,p])=>`${h}: ${p}`).join("; ")}else r[i]=s}),r},{})}function Wh(e,t){return t.filter(n=>n.type===e.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(e.attrs)||{}:{[n.name]:e.attrs[n.name]}).reduce((n,r)=>$t(n,r),{})}function GX(e){return typeof e!="string"?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):e==="true"?!0:e==="false"?!1:e}function aD(e,t){return"style"in e?e:{...e,getAttrs:n=>{const r=e.getAttrs?e.getAttrs(n):e.attrs;if(r===!1)return!1;const i=t.reduce((s,o)=>{const l=o.attribute.parseHTML?o.attribute.parseHTML(n):GX(n.getAttribute(o.name));return l==null?s:{...s,[o.name]:l}},{});return{...r,...i}}}}function lD(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>t==="attrs"&&$X(n)?!1:n!=null))}function KX(e,t){var n;const r=UI(e),{nodeExtensions:i,markExtensions:s}=Wu(e),o=(n=i.find(d=>De(d,"topNode")))==null?void 0:n.name,l=Object.fromEntries(i.map(d=>{const h=r.filter(E=>E.type===d.name),p={name:d.name,options:d.options,storage:d.storage,editor:t},g=e.reduce((E,N)=>{const k=De(N,"extendNodeSchema",p);return{...E,...k?k(d):{}}},{}),y=lD({...g,content:it(De(d,"content",p)),marks:it(De(d,"marks",p)),group:it(De(d,"group",p)),inline:it(De(d,"inline",p)),atom:it(De(d,"atom",p)),selectable:it(De(d,"selectable",p)),draggable:it(De(d,"draggable",p)),code:it(De(d,"code",p)),whitespace:it(De(d,"whitespace",p)),linebreakReplacement:it(De(d,"linebreakReplacement",p)),defining:it(De(d,"defining",p)),isolating:it(De(d,"isolating",p)),attrs:Object.fromEntries(h.map(E=>{var N,k;return[E.name,{default:(N=E?.attribute)==null?void 0:N.default,validate:(k=E?.attribute)==null?void 0:k.validate}]}))}),x=it(De(d,"parseHTML",p));x&&(y.parseDOM=x.map(E=>aD(E,h)));const S=De(d,"renderHTML",p);S&&(y.toDOM=E=>S({node:E,HTMLAttributes:Wh(E,h)}));const w=De(d,"renderText",p);return w&&(y.toText=w),[d.name,y]})),u=Object.fromEntries(s.map(d=>{const h=r.filter(w=>w.type===d.name),p={name:d.name,options:d.options,storage:d.storage,editor:t},g=e.reduce((w,E)=>{const N=De(E,"extendMarkSchema",p);return{...w,...N?N(d):{}}},{}),y=lD({...g,inclusive:it(De(d,"inclusive",p)),excludes:it(De(d,"excludes",p)),group:it(De(d,"group",p)),spanning:it(De(d,"spanning",p)),code:it(De(d,"code",p)),attrs:Object.fromEntries(h.map(w=>{var E,N;return[w.name,{default:(E=w?.attribute)==null?void 0:E.default,validate:(N=w?.attribute)==null?void 0:N.validate}]}))}),x=it(De(d,"parseHTML",p));x&&(y.parseDOM=x.map(w=>aD(w,h)));const S=De(d,"renderHTML",p);return S&&(y.toDOM=w=>S({mark:w,HTMLAttributes:Wh(w,h)})),[d.name,y]}));return new AB({topNode:o,nodes:l,marks:u})}function YX(e){const t=e.filter((n,r)=>e.indexOf(n)!==r);return Array.from(new Set(t))}function FE(e){return e.sort((n,r)=>{const i=De(n,"priority")||100,s=De(r,"priority")||100;return i>s?-1:i<s?1:0})}function $I(e){const t=FE(VE(e)),n=YX(t.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),t}function GI(e,t,n){const{from:r,to:i}=t,{blockSeparator:s=`

`,textSerializers:o={}}=n||{};let l="";return e.nodesBetween(r,i,(u,d,h,p)=>{var g;u.isBlock&&d>r&&(l+=s);const y=o?.[u.type.name];if(y)return h&&(l+=y({node:u,pos:d,parent:h,index:p,range:t})),!1;u.isText&&(l+=(g=u?.text)==null?void 0:g.slice(Math.max(r,d)-d,i-d))}),l}function WX(e,t){const n={from:0,to:e.content.size};return GI(e,n,t)}function KI(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,t])=>t.spec.toText).map(([t,n])=>[t,n.spec.toText]))}function es(e,t){if(typeof e=="string"){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}function YI(e,t){const n=es(t,e.schema),{from:r,to:i,empty:s}=e.selection,o=[];s?(e.storedMarks&&o.push(...e.storedMarks),o.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,i,u=>{o.push(...u.marks)});const l=o.find(u=>u.type.name===n.name);return l?{...l.attrs}:{}}function Gt(e,t){if(typeof e=="string"){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}function XX(e,t){const n=Gt(t,e.schema),{from:r,to:i}=e.selection,s=[];e.doc.nodesBetween(r,i,l=>{s.push(l)});const o=s.reverse().find(l=>l.type.name===n.name);return o?{...o.attrs}:{}}function am(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function WI(e,t){const n=am(typeof t=="string"?t:t.name,e.schema);return n==="node"?XX(e,t):n==="mark"?YI(e,t):{}}function ZX(e,t=JSON.stringify){const n={};return e.filter(r=>{const i=t(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function QX(e){const t=ZX(e);return t.length===1?t:t.filter((n,r)=>!t.filter((s,o)=>o!==r).some(s=>n.oldRange.from>=s.oldRange.from&&n.oldRange.to<=s.oldRange.to&&n.newRange.from>=s.newRange.from&&n.newRange.to<=s.newRange.to))}function XI(e){const{mapping:t,steps:n}=e,r=[];return t.maps.forEach((i,s)=>{const o=[];if(i.ranges.length)i.forEach((l,u)=>{o.push({from:l,to:u})});else{const{from:l,to:u}=n[s];if(l===void 0||u===void 0)return;o.push({from:l,to:u})}o.forEach(({from:l,to:u})=>{const d=t.slice(s).map(l,-1),h=t.slice(s).map(u),p=t.invert().map(d,-1),g=t.invert().map(h);r.push({oldRange:{from:p,to:g},newRange:{from:d,to:h}})})}),QX(r)}function UE(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function Xh(e,t,n={strict:!0}){const r=Object.keys(t);return r.length?r.every(i=>n.strict?t[i]===e[i]:UE(t[i])?t[i].test(e[i]):t[i]===e[i]):!0}function ZI(e,t,n={}){return e.find(r=>r.type===t&&Xh(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function cD(e,t,n={}){return!!ZI(e,t,n)}function $E(e,t,n){var r;if(!e||!t)return;let i=e.parent.childAfter(e.parentOffset);if((!i.node||!i.node.marks.some(h=>h.type===t))&&(i=e.parent.childBefore(e.parentOffset)),!i.node||!i.node.marks.some(h=>h.type===t)||(n=n||((r=i.node.marks[0])==null?void 0:r.attrs),!ZI([...i.node.marks],t,n)))return;let o=i.index,l=e.start()+i.offset,u=o+1,d=l+i.node.nodeSize;for(;o>0&&cD([...e.parent.child(o-1).marks],t,n);)o-=1,l-=e.parent.child(o).nodeSize;for(;u<e.parent.childCount&&cD([...e.parent.child(u).marks],t,n);)d+=e.parent.child(u).nodeSize,u+=1;return{from:l,to:d}}function GE(e,t,n){const r=[];return e===t?n.resolve(e).marks().forEach(i=>{const s=n.resolve(e),o=$E(s,i.type);o&&r.push({mark:i,...o})}):n.nodesBetween(e,t,(i,s)=>{!i||i?.nodeSize===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}var JX=(e,t,n,r=20)=>{const i=e.doc.resolve(n);let s=r,o=null;for(;s>0&&o===null;){const l=i.node(s);l?.type.name===t?o=l:s-=1}return[o,s]};function O0(e,t){return t.nodes[e]||t.marks[e]||null}function xh(e,t,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=e.find(s=>s.type===t&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}var eZ=(e,t=500)=>{let n="";const r=e.parentOffset;return e.parent.nodesBetween(Math.max(0,r-t),r,(i,s,o,l)=>{var u,d;const h=((d=(u=i.type.spec).toText)==null?void 0:d.call(u,{node:i,pos:s,parent:o,index:l}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?h:h.slice(0,Math.max(0,r-s))}),n};function fC(e,t,n={}){const{empty:r,ranges:i}=e.selection,s=t?es(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter(p=>s?s.name===p.type.name:!0).find(p=>Xh(p.attrs,n,{strict:!1}));let o=0;const l=[];if(i.forEach(({$from:p,$to:g})=>{const y=p.pos,x=g.pos;e.doc.nodesBetween(y,x,(S,w)=>{if(!S.isText&&!S.marks.length)return;const E=Math.max(y,w),N=Math.min(x,w+S.nodeSize),k=N-E;o+=k,l.push(...S.marks.map(T=>({mark:T,from:E,to:N})))})}),o===0)return!1;const u=l.filter(p=>s?s.name===p.mark.type.name:!0).filter(p=>Xh(p.mark.attrs,n,{strict:!1})).reduce((p,g)=>p+g.to-g.from,0),d=l.filter(p=>s?p.mark.type!==s&&p.mark.type.excludes(s):!0).reduce((p,g)=>p+g.to-g.from,0);return(u>0?u+d:u)>=o}function ro(e,t,n={}){const{from:r,to:i,empty:s}=e.selection,o=t?Gt(t,e.schema):null,l=[];e.doc.nodesBetween(r,i,(p,g)=>{if(p.isText)return;const y=Math.max(r,g),x=Math.min(i,g+p.nodeSize);l.push({node:p,from:y,to:x})});const u=i-r,d=l.filter(p=>o?o.name===p.node.type.name:!0).filter(p=>Xh(p.node.attrs,n,{strict:!1}));return s?!!d.length:d.reduce((p,g)=>p+g.to-g.from,0)>=u}function tZ(e,t,n={}){if(!t)return ro(e,null,n)||fC(e,null,n);const r=am(t,e.schema);return r==="node"?ro(e,t,n):r==="mark"?fC(e,t,n):!1}var nZ=(e,t)=>{const{$from:n,$to:r,$anchor:i}=e.selection;if(t){const s=om(l=>l.type.name===t)(e.selection);if(!s)return!1;const o=e.doc.resolve(s.pos+1);return i.pos+1===o.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},rZ=e=>{const{$from:t,$to:n}=e.selection;return!(t.parentOffset>0||t.pos!==n.pos)};function uD(e,t){return Array.isArray(t)?t.some(n=>(typeof n=="string"?n:n.name)===e.name):t}function dD(e,t){const{nodeExtensions:n}=Wu(t),r=n.find(o=>o.name===e);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=it(De(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function lm(e,{checkChildren:t=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(e.type.name==="hardBreak")return!0;if(e.isText)return/^\s*$/m.test((r=e.text)!=null?r:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(e.content.childCount===0)return!0;if(t){let i=!0;return e.content.forEach(s=>{i!==!1&&(lm(s,{ignoreWhitespace:n,checkChildren:t})||(i=!1))}),i}return!1}function QI(e){return e instanceof Re}function JI(e){return e instanceof Ve}function Go(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function e6(e,t=null){if(!t)return null;const n=Ue.atStart(e),r=Ue.atEnd(e);if(t==="start"||t===!0)return n;if(t==="end")return r;const i=n.from,s=r.to;return t==="all"?Ve.create(e,Go(0,i,s),Go(e.content.size,i,s)):Ve.create(e,Go(t,i,s),Go(t,i,s))}function iZ(e,t,n){const r=e.steps.length-1;if(r<t)return;const i=e.steps[r];if(!(i instanceof an||i instanceof cn))return;const s=e.mapping.maps[r];let o=0;s.forEach((l,u,d,h)=>{o===0&&(o=h)}),e.setSelection(Ue.near(e.doc.resolve(o),n))}var cm=class{constructor(e){var t;this.find=e.find,this.handler=e.handler,this.undoable=(t=e.undoable)!=null?t:!0}},sZ=(e,t)=>{if(UE(t))return t.exec(e);const n=t(e);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=e,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function Zf(e){var t;const{editor:n,from:r,to:i,text:s,rules:o,plugin:l}=e,{view:u}=n;if(u.composing)return!1;const d=u.state.doc.resolve(r);if(d.parent.type.spec.code||(t=d.nodeBefore||d.nodeAfter)!=null&&t.marks.find(g=>g.type.spec.code))return!1;let h=!1;const p=eZ(d)+s;return o.forEach(g=>{if(h)return;const y=sZ(p,g.find);if(!y)return;const x=u.state.tr,S=im({state:u.state,transaction:x}),w={from:r-(y[0].length-s.length),to:i},{commands:E,chain:N,can:k}=new sm({editor:n,state:S});g.handler({state:S,range:w,match:y,commands:E,chain:N,can:k})===null||!x.steps.length||(g.undoable&&x.setMeta(l,{transform:x,from:r,to:i,text:s}),u.dispatch(x),h=!0)}),h}function oZ(e){const{editor:t,rules:n}=e,r=new _t({state:{init(){return null},apply(i,s,o){const l=i.getMeta(r);if(l)return l;const u=i.getMeta("applyInputRules");return!!u&&setTimeout(()=>{let{text:h}=u;typeof h=="string"?h=h:h=HE(pe.from(h),o.schema);const{from:p}=u,g=p+h.length;Zf({editor:t,from:p,to:g,text:h,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,l){return Zf({editor:t,from:s,to:o,text:l,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&Zf({editor:t,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?Zf({editor:t,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function aZ(e){return Object.prototype.toString.call(e).slice(8,-1)}function Qf(e){return aZ(e)!=="Object"?!1:e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function t6(e,t){const n={...e};return Qf(e)&&Qf(t)&&Object.keys(t).forEach(r=>{Qf(t[r])&&Qf(e[r])?n[r]=t6(e[r],t[r]):n[r]=t[r]}),n}var KE=class{constructor(e={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...e},this.name=this.config.name}get options(){return{...it(De(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...it(De(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(e={}){const t=this.extend({...this.config,addOptions:()=>t6(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new this.constructor({...this.config,...e});return t.parent=this,this.child=t,t.name="name"in e?e.name:t.parent.name,t}},xa=class n6 extends KE{constructor(){super(...arguments),this.type="mark"}static create(t={}){const n=typeof t=="function"?t():t;return new n6(n)}static handleExit({editor:t,mark:n}){const{tr:r}=t.state,i=t.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(d=>d?.type.name===n.name))return!1;const u=o.find(d=>d?.type.name===n.name);return u&&r.removeStoredMark(u),r.insertText(" ",i.pos),t.view.dispatch(r),!0}return!1}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}};function lZ(e){return typeof e=="number"}var cZ=class{constructor(e){this.find=e.find,this.handler=e.handler}},uZ=(e,t,n)=>{if(UE(t))return[...e.matchAll(t)];const r=t(e,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=e,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function dZ(e){const{editor:t,state:n,from:r,to:i,rule:s,pasteEvent:o,dropEvent:l}=e,{commands:u,chain:d,can:h}=new sm({editor:t,state:n}),p=[];return n.doc.nodesBetween(r,i,(y,x)=>{var S,w,E,N,k;if((w=(S=y.type)==null?void 0:S.spec)!=null&&w.code||!(y.isText||y.isTextblock||y.isInline))return;const T=(k=(N=(E=y.content)==null?void 0:E.size)!=null?N:y.nodeSize)!=null?k:0,A=Math.max(r,x),_=Math.min(i,x+T);if(A>=_)return;const R=y.isText?y.text||"":y.textBetween(A-x,_-x,void 0,"");uZ(R,s.find,o).forEach(B=>{if(B.index===void 0)return;const $=A+B.index+1,z=$+B[0].length,V={from:n.tr.mapping.map($),to:n.tr.mapping.map(z)},Y=s.handler({state:n,range:V,match:B,commands:u,chain:d,can:h,pasteEvent:o,dropEvent:l});p.push(Y)})}),p.every(y=>y!==null)}var Jf=null,fZ=e=>{var t;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(t=n.clipboardData)==null||t.setData("text/html",e),n};function hZ(e){const{editor:t,rules:n}=e;let r=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,l;try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}const u=({state:h,from:p,to:g,rule:y,pasteEvt:x})=>{const S=h.tr,w=im({state:h,transaction:S});if(!(!dZ({editor:t,state:w,from:Math.max(p-1,0),to:g.b-1,rule:y,pasteEvent:x,dropEvent:l})||!S.steps.length)){try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,S}};return n.map(h=>new _t({view(p){const g=x=>{var S;r=(S=p.dom.parentElement)!=null&&S.contains(x.target)?p.dom.parentElement:null,r&&(Jf=t)},y=()=>{Jf&&(Jf=null)};return window.addEventListener("dragstart",g),window.addEventListener("dragend",y),{destroy(){window.removeEventListener("dragstart",g),window.removeEventListener("dragend",y)}}},props:{handleDOMEvents:{drop:(p,g)=>{if(s=r===p.dom.parentElement,l=g,!s){const y=Jf;y?.isEditable&&setTimeout(()=>{const x=y.state.selection;x&&y.commands.deleteRange({from:x.from,to:x.to})},10)}return!1},paste:(p,g)=>{var y;const x=(y=g.clipboardData)==null?void 0:y.getData("text/html");return o=g,i=!!x?.includes("data-pm-slice"),!1}}},appendTransaction:(p,g,y)=>{const x=p[0],S=x.getMeta("uiEvent")==="paste"&&!i,w=x.getMeta("uiEvent")==="drop"&&!s,E=x.getMeta("applyPasteRules"),N=!!E;if(!S&&!w&&!N)return;if(N){let{text:A}=E;typeof A=="string"?A=A:A=HE(pe.from(A),y.schema);const{from:_}=E,R=_+A.length,D=fZ(A);return u({rule:h,state:y,from:_,to:{b:R},pasteEvt:D})}const k=g.doc.content.findDiffStart(y.doc.content),T=g.doc.content.findDiffEnd(y.doc.content);if(!(!lZ(k)||!T||k===T.b))return u({rule:h,state:y,from:k,to:T,pasteEvt:o})}}))}var um=class{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=$I(e),this.schema=KX(this.extensions,t),this.setupExtensions()}get commands(){return this.extensions.reduce((e,t)=>{const n={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:O0(t.name,this.schema)},r=De(t,"addCommands",n);return r?{...e,...r()}:e},{})}get plugins(){const{editor:e}=this;return FE([...this.extensions].reverse()).flatMap(r=>{const i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:e,type:O0(r.name,this.schema)},s=[],o=De(r,"addKeyboardShortcuts",i);let l={};if(r.type==="mark"&&De(r,"exitable",i)&&(l.ArrowRight=()=>xa.handleExit({editor:e,mark:r})),o){const g=Object.fromEntries(Object.entries(o()).map(([y,x])=>[y,()=>x({editor:e})]));l={...l,...g}}const u=bX(l);s.push(u);const d=De(r,"addInputRules",i);if(uD(r,e.options.enableInputRules)&&d){const g=d();if(g&&g.length){const y=oZ({editor:e,rules:g}),x=Array.isArray(y)?y:[y];s.push(...x)}}const h=De(r,"addPasteRules",i);if(uD(r,e.options.enablePasteRules)&&h){const g=h();if(g&&g.length){const y=hZ({editor:e,rules:g});s.push(...y)}}const p=De(r,"addProseMirrorPlugins",i);if(p){const g=p();s.push(...g)}return s})}get attributes(){return UI(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=Wu(this.extensions);return Object.fromEntries(t.filter(n=>!!De(n,"addNodeView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:Gt(n.name,this.schema)},s=De(n,"addNodeView",i);if(!s)return[];const o=(l,u,d,h,p)=>{const g=Wh(l,r);return s()({node:l,view:u,getPos:d,decorations:h,innerDecorations:p,editor:e,extension:n,HTMLAttributes:g})};return[n.name,o]}))}get markViews(){const{editor:e}=this,{markExtensions:t}=Wu(this.extensions);return Object.fromEntries(t.filter(n=>!!De(n,"addMarkView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:es(n.name,this.schema)},s=De(n,"addMarkView",i);if(!s)return[];const o=(l,u,d)=>{const h=Wh(l,r);return s()({mark:l,view:u,inline:d,editor:e,extension:n,HTMLAttributes:h,updateAttributes:p=>{MQ(l,e,p)}})};return[n.name,o]}))}setupExtensions(){const e=this.extensions;this.editor.extensionStorage=Object.fromEntries(e.map(t=>[t.name,t.storage])),e.forEach(t=>{var n;const r={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:O0(t.name,this.schema)};t.type==="mark"&&((n=it(De(t,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(t.name);const i=De(t,"onBeforeCreate",r),s=De(t,"onCreate",r),o=De(t,"onUpdate",r),l=De(t,"onSelectionUpdate",r),u=De(t,"onTransaction",r),d=De(t,"onFocus",r),h=De(t,"onBlur",r),p=De(t,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),l&&this.editor.on("selectionUpdate",l),u&&this.editor.on("transaction",u),d&&this.editor.on("focus",d),h&&this.editor.on("blur",h),p&&this.editor.on("destroy",p)})}};um.resolve=$I;um.sort=FE;um.flatten=VE;var pZ={};qI(pZ,{ClipboardTextSerializer:()=>i6,Commands:()=>a6,Delete:()=>l6,Drop:()=>c6,Editable:()=>u6,FocusEvents:()=>f6,Keymap:()=>h6,Paste:()=>p6,Tabindex:()=>m6,focusEventsPluginKey:()=>d6});var Lt=class r6 extends KE{constructor(){super(...arguments),this.type="extension"}static create(t={}){const n=typeof t=="function"?t():t;return new r6(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}},i6=Lt.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new _t({key:new dn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:i}=t,{ranges:s}=i,o=Math.min(...s.map(h=>h.$from.pos)),l=Math.max(...s.map(h=>h.$to.pos)),u=KI(n);return GI(r,{from:o,to:l},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:u})}}})]}}),s6={};qI(s6,{blur:()=>mZ,clearContent:()=>gZ,clearNodes:()=>yZ,command:()=>vZ,createParagraphNear:()=>bZ,cut:()=>xZ,deleteCurrentNode:()=>wZ,deleteNode:()=>SZ,deleteRange:()=>CZ,deleteSelection:()=>EZ,enter:()=>kZ,exitCode:()=>TZ,extendMarkRange:()=>NZ,first:()=>AZ,focus:()=>_Z,forEach:()=>DZ,insertContent:()=>RZ,insertContentAt:()=>jZ,joinBackward:()=>BZ,joinDown:()=>PZ,joinForward:()=>IZ,joinItemBackward:()=>zZ,joinItemForward:()=>qZ,joinTextblockBackward:()=>VZ,joinTextblockForward:()=>HZ,joinUp:()=>LZ,keyboardShortcut:()=>UZ,lift:()=>$Z,liftEmptyBlock:()=>GZ,liftListItem:()=>KZ,newlineInCode:()=>YZ,resetAttributes:()=>WZ,scrollIntoView:()=>XZ,selectAll:()=>ZZ,selectNodeBackward:()=>QZ,selectNodeForward:()=>JZ,selectParentNode:()=>eQ,selectTextblockEnd:()=>tQ,selectTextblockStart:()=>nQ,setContent:()=>rQ,setMark:()=>sQ,setMeta:()=>oQ,setNode:()=>aQ,setNodeSelection:()=>lQ,setTextSelection:()=>cQ,sinkListItem:()=>uQ,splitBlock:()=>dQ,splitListItem:()=>fQ,toggleList:()=>hQ,toggleMark:()=>pQ,toggleNode:()=>mQ,toggleWrap:()=>gQ,undoInputRule:()=>yQ,unsetAllMarks:()=>vQ,unsetMark:()=>bQ,updateAttributes:()=>xQ,wrapIn:()=>wQ,wrapInList:()=>SQ});var mZ=()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var n;e.isDestroyed||(t.dom.blur(),(n=window?.getSelection())==null||n.removeAllRanges())}),!0),gZ=(e=!0)=>({commands:t})=>t.setContent("",{emitUpdate:e}),yZ=()=>({state:e,tr:t,dispatch:n})=>{const{selection:r}=t,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:o})=>{e.doc.nodesBetween(s.pos,o.pos,(l,u)=>{if(l.type.isText)return;const{doc:d,mapping:h}=t,p=d.resolve(h.map(u)),g=d.resolve(h.map(u+l.nodeSize)),y=p.blockRange(g);if(!y)return;const x=Gl(y);if(l.type.isTextblock){const{defaultType:S}=p.parent.contentMatchAt(p.index());t.setNodeMarkup(y.start,S)}(x||x===0)&&t.lift(y,x)})}),!0},vZ=e=>t=>e(t),bZ=()=>({state:e,dispatch:t})=>PI(e,t),xZ=(e,t)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(e.from,e.to);r.deleteRange(e.from,e.to);const o=r.mapping.map(t);return r.insert(o,s.content),r.setSelection(new Ve(r.doc.resolve(Math.max(o-1,0)))),!0},wZ=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,r=n.$anchor.node();if(r.content.size>0)return!1;const i=e.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(t){const l=i.before(s),u=i.after(s);e.delete(l,u).scrollIntoView()}return!0}return!1},SZ=e=>({tr:t,state:n,dispatch:r})=>{const i=Gt(e,n.schema),s=t.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const u=s.before(o),d=s.after(o);t.delete(u,d).scrollIntoView()}return!0}return!1},CZ=e=>({tr:t,dispatch:n})=>{const{from:r,to:i}=e;return n&&t.delete(r,i),!0},EZ=()=>({state:e,dispatch:t})=>PE(e,t),kZ=()=>({commands:e})=>e.keyboardShortcut("Enter"),TZ=()=>({state:e,dispatch:t})=>kX(e,t),NZ=(e,t={})=>({tr:n,state:r,dispatch:i})=>{const s=es(e,r.schema),{doc:o,selection:l}=n,{$from:u,from:d,to:h}=l;if(i){const p=$E(u,s,t);if(p&&p.from<=d&&p.to>=h){const g=Ve.create(o,p.from,p.to);n.setSelection(g)}}return!0},AZ=e=>t=>{const n=typeof e=="function"?e(t):e;for(let r=0;r<n.length;r+=1)if(n[r](t))return!0;return!1};function MZ(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function YE(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var _Z=(e=null,t={})=>({editor:n,view:r,tr:i,dispatch:s})=>{t={scrollIntoView:!0,...t};const o=()=>{(YE()||MZ())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),t?.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&e===null||e===!1)return!0;if(s&&e===null&&!JI(n.state.selection))return o(),!0;const l=e6(i.doc,e)||n.state.selection,u=n.state.selection.eq(l);return s&&(u||i.setSelection(l),u&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},DZ=(e,t)=>n=>e.every((r,i)=>t(r,{...n,index:i})),RZ=(e,t)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},e,t),OZ=e=>!("type"in e),jZ=(e,t,n)=>({tr:r,dispatch:i,editor:s})=>{var o;if(i){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let l;const u=w=>{s.emit("contentError",{editor:s,error:w,disableCollaboration:()=>{"collaboration"in s.storage&&typeof s.storage.collaboration=="object"&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},d={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{Yu(t,s.schema,{parseOptions:d,errorOnInvalidContent:!0})}catch(w){u(w)}try{l=Yu(t,s.schema,{parseOptions:d,errorOnInvalidContent:(o=n.errorOnInvalidContent)!=null?o:s.options.enableContentCheck})}catch(w){return u(w),!1}let{from:h,to:p}=typeof e=="number"?{from:e,to:e}:{from:e.from,to:e.to},g=!0,y=!0;if((OZ(l)?l:[l]).forEach(w=>{w.check(),g=g?w.isText&&w.marks.length===0:!1,y=y?w.isBlock:!1}),h===p&&y){const{parent:w}=r.doc.resolve(h);w.isTextblock&&!w.type.spec.code&&!w.childCount&&(h-=1,p+=1)}let S;if(g){if(Array.isArray(t))S=t.map(w=>w.text||"").join("");else if(t instanceof pe){let w="";t.forEach(E=>{E.text&&(w+=E.text)}),S=w}else typeof t=="object"&&t&&t.text?S=t.text:S=t;r.insertText(S,h,p)}else{S=l;const w=r.doc.resolve(h),E=w.node(),N=w.parentOffset===0,k=E.isText||E.isTextblock,T=E.content.size>0;N&&k&&T&&(h=Math.max(0,h-1)),r.replaceWith(h,p,S)}n.updateSelection&&iZ(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:h,text:S}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:h,text:S})}return!0},LZ=()=>({state:e,dispatch:t})=>SX(e,t),PZ=()=>({state:e,dispatch:t})=>CX(e,t),BZ=()=>({state:e,dispatch:t})=>MI(e,t),IZ=()=>({state:e,dispatch:t})=>OI(e,t),zZ=()=>({state:e,dispatch:t,tr:n})=>{try{const r=Qp(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},qZ=()=>({state:e,dispatch:t,tr:n})=>{try{const r=Qp(e.doc,e.selection.$from.pos,1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},VZ=()=>({state:e,dispatch:t})=>xX(e,t),HZ=()=>({state:e,dispatch:t})=>wX(e,t);function o6(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function FZ(e){const t=e.split(/-(?!$)/);let n=t[t.length-1];n==="Space"&&(n=" ");let r,i,s,o;for(let l=0;l<t.length-1;l+=1){const u=t[l];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))i=!0;else if(/^s(hift)?$/i.test(u))s=!0;else if(/^mod$/i.test(u))YE()||o6()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${u}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}var UZ=e=>({editor:t,view:n,tr:r,dispatch:i})=>{const s=FZ(e).split(/-(?!$)/),o=s.find(d=>!["Alt","Ctrl","Meta","Shift"].includes(d)),l=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),u=t.captureTransaction(()=>{n.someProp("handleKeyDown",d=>d(n,l))});return u?.steps.forEach(d=>{const h=d.map(r.mapping);h&&i&&r.maybeStep(h)}),!0},$Z=(e,t={})=>({state:n,dispatch:r})=>{const i=Gt(e,n.schema);return ro(n,i,t)?EX(n,r):!1},GZ=()=>({state:e,dispatch:t})=>BI(e,t),KZ=e=>({state:t,dispatch:n})=>{const r=Gt(e,t.schema);return PX(r)(t,n)},YZ=()=>({state:e,dispatch:t})=>LI(e,t);function fD(e,t){const n=typeof t=="string"?[t]:t;return Object.keys(e).reduce((r,i)=>(n.includes(i)||(r[i]=e[i]),r),{})}var WZ=(e,t)=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const l=am(typeof e=="string"?e:e.name,r.schema);return l?(l==="node"&&(s=Gt(e,r.schema)),l==="mark"&&(o=es(e,r.schema)),i&&n.selection.ranges.forEach(u=>{r.doc.nodesBetween(u.$from.pos,u.$to.pos,(d,h)=>{s&&s===d.type&&n.setNodeMarkup(h,void 0,fD(d.attrs,t)),o&&d.marks.length&&d.marks.forEach(p=>{o===p.type&&n.addMark(h,h+d.nodeSize,o.create(fD(p.attrs,t)))})})}),!0):!1},XZ=()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),ZZ=()=>({tr:e,dispatch:t})=>{if(t){const n=new lr(e.doc);e.setSelection(n)}return!0},QZ=()=>({state:e,dispatch:t})=>DI(e,t),JZ=()=>({state:e,dispatch:t})=>jI(e,t),eQ=()=>({state:e,dispatch:t})=>AX(e,t),tQ=()=>({state:e,dispatch:t})=>DX(e,t),nQ=()=>({state:e,dispatch:t})=>_X(e,t),rQ=(e,{errorOnInvalidContent:t,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:i,tr:s,dispatch:o,commands:l})=>{const{doc:u}=s;if(r.preserveWhitespace!=="full"){const d=dC(e,i.schema,r,{errorOnInvalidContent:t??i.options.enableContentCheck});return o&&s.replaceWith(0,u.content.size,d).setMeta("preventUpdate",!n),!0}return o&&s.setMeta("preventUpdate",!n),l.insertContentAt({from:0,to:u.content.size},e,{parseOptions:r,errorOnInvalidContent:t??i.options.enableContentCheck})};function iQ(e,t,n){var r;const{selection:i}=t;let s=null;if(JI(i)&&(s=i.$cursor),s){const l=(r=e.storedMarks)!=null?r:s.marks();return s.parent.type.allowsMarkType(n)&&(!!n.isInSet(l)||!l.some(d=>d.type.excludes(n)))}const{ranges:o}=i;return o.some(({$from:l,$to:u})=>{let d=l.depth===0?e.doc.inlineContent&&e.doc.type.allowsMarkType(n):!1;return e.doc.nodesBetween(l.pos,u.pos,(h,p,g)=>{if(d)return!1;if(h.isInline){const y=!g||g.type.allowsMarkType(n),x=!!n.isInSet(h.marks)||!h.marks.some(S=>S.type.excludes(n));d=y&&x}return!d}),d})}var sQ=(e,t={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:o,ranges:l}=s,u=es(e,r.schema);if(i)if(o){const d=YI(r,u);n.addStoredMark(u.create({...d,...t}))}else l.forEach(d=>{const h=d.$from.pos,p=d.$to.pos;r.doc.nodesBetween(h,p,(g,y)=>{const x=Math.max(y,h),S=Math.min(y+g.nodeSize,p);g.marks.find(E=>E.type===u)?g.marks.forEach(E=>{u===E.type&&n.addMark(x,S,u.create({...E.attrs,...t}))}):n.addMark(x,S,u.create(t))})});return iQ(r,n,u)},oQ=(e,t)=>({tr:n})=>(n.setMeta(e,t),!0),aQ=(e,t={})=>({state:n,dispatch:r,chain:i})=>{const s=Gt(e,n.schema);let o;return n.selection.$anchor.sameParent(n.selection.$head)&&(o=n.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:l})=>oD(s,{...o,...t})(n)?!0:l.clearNodes()).command(({state:l})=>oD(s,{...o,...t})(l,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},lQ=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,i=Go(e,0,r.content.size),s=Re.create(r,i);t.setSelection(s)}return!0},cQ=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,{from:i,to:s}=typeof e=="number"?{from:e,to:e}:e,o=Ve.atStart(r).from,l=Ve.atEnd(r).to,u=Go(i,o,l),d=Go(s,o,l),h=Ve.create(r,u,d);t.setSelection(h)}return!0},uQ=e=>({state:t,dispatch:n})=>{const r=Gt(e,t.schema);return zX(r)(t,n)};function hD(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const r=n.filter(i=>t?.includes(i.type.name));e.tr.ensureMarks(r)}}var dQ=({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:o}=t,{$from:l,$to:u}=s,d=i.extensionManager.attributes,h=xh(d,l.node().type.name,l.node().attrs);if(s instanceof Re&&s.node.isBlock)return!l.parentOffset||!Yi(o,l.pos)?!1:(r&&(e&&hD(n,i.extensionManager.splittableMarks),t.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;const p=u.parentOffset===u.parent.content.size,g=l.depth===0?void 0:HX(l.node(-1).contentMatchAt(l.indexAfter(-1)));let y=p&&g?[{type:g,attrs:h}]:void 0,x=Yi(t.doc,t.mapping.map(l.pos),1,y);if(!y&&!x&&Yi(t.doc,t.mapping.map(l.pos),1,g?[{type:g}]:void 0)&&(x=!0,y=g?[{type:g,attrs:h}]:void 0),r){if(x&&(s instanceof Ve&&t.deleteSelection(),t.split(t.mapping.map(l.pos),1,y),g&&!p&&!l.parentOffset&&l.parent.type!==g)){const S=t.mapping.map(l.before()),w=t.doc.resolve(S);l.node(-1).canReplaceWith(w.index(),w.index()+1,g)&&t.setNodeMarkup(t.mapping.map(l.before()),g)}e&&hD(n,i.extensionManager.splittableMarks),t.scrollIntoView()}return x},fQ=(e,t={})=>({tr:n,state:r,dispatch:i,editor:s})=>{var o;const l=Gt(e,r.schema),{$from:u,$to:d}=r.selection,h=r.selection.node;if(h&&h.isBlock||u.depth<2||!u.sameParent(d))return!1;const p=u.node(-1);if(p.type!==l)return!1;const g=s.extensionManager.attributes;if(u.parent.content.size===0&&u.node(-1).childCount===u.indexAfter(-1)){if(u.depth===2||u.node(-3).type!==l||u.index(-2)!==u.node(-2).childCount-1)return!1;if(i){let E=pe.empty;const N=u.index(-1)?1:u.index(-2)?2:3;for(let D=u.depth-N;D>=u.depth-3;D-=1)E=pe.from(u.node(D).copy(E));const k=u.indexAfter(-1)<u.node(-2).childCount?1:u.indexAfter(-2)<u.node(-3).childCount?2:3,T={...xh(g,u.node().type.name,u.node().attrs),...t},A=((o=l.contentMatch.defaultType)==null?void 0:o.createAndFill(T))||void 0;E=E.append(pe.from(l.createAndFill(null,A)||void 0));const _=u.before(u.depth-(N-1));n.replace(_,u.after(-k),new be(E,4-N,0));let R=-1;n.doc.nodesBetween(_,n.doc.content.size,(D,B)=>{if(R>-1)return!1;D.isTextblock&&D.content.size===0&&(R=B+1)}),R>-1&&n.setSelection(Ve.near(n.doc.resolve(R))),n.scrollIntoView()}return!0}const y=d.pos===u.end()?p.contentMatchAt(0).defaultType:null,x={...xh(g,p.type.name,p.attrs),...t},S={...xh(g,u.node().type.name,u.node().attrs),...t};n.delete(u.pos,d.pos);const w=y?[{type:l,attrs:x},{type:y,attrs:S}]:[{type:l,attrs:x}];if(!Yi(n.doc,u.pos,2))return!1;if(i){const{selection:E,storedMarks:N}=r,{splittableMarks:k}=s.extensionManager,T=N||E.$to.parentOffset&&E.$from.marks();if(n.split(u.pos,2,w).scrollIntoView(),!T||!i)return!0;const A=T.filter(_=>k.includes(_.type.name));n.ensureMarks(A)}return!0},j0=(e,t)=>{const n=om(o=>o.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=e.doc.nodeAt(r);return n.node.type===i?.type&&oo(e.doc,n.pos)&&e.join(n.pos),!0},L0=(e,t)=>{const n=om(o=>o.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=e.doc.nodeAt(r);return n.node.type===i?.type&&oo(e.doc,r)&&e.join(r),!0},hQ=(e,t,n,r={})=>({editor:i,tr:s,state:o,dispatch:l,chain:u,commands:d,can:h})=>{const{extensions:p,splittableMarks:g}=i.extensionManager,y=Gt(e,o.schema),x=Gt(t,o.schema),{selection:S,storedMarks:w}=o,{$from:E,$to:N}=S,k=E.blockRange(N),T=w||S.$to.parentOffset&&S.$from.marks();if(!k)return!1;const A=om(_=>dD(_.type.name,p))(S);if(k.depth>=1&&A&&k.depth-A.depth<=1){if(A.node.type===y)return d.liftListItem(x);if(dD(A.node.type.name,p)&&y.validContent(A.node.content)&&l)return u().command(()=>(s.setNodeMarkup(A.pos,y),!0)).command(()=>j0(s,y)).command(()=>L0(s,y)).run()}return!n||!T||!l?u().command(()=>h().wrapInList(y,r)?!0:d.clearNodes()).wrapInList(y,r).command(()=>j0(s,y)).command(()=>L0(s,y)).run():u().command(()=>{const _=h().wrapInList(y,r),R=T.filter(D=>g.includes(D.type.name));return s.ensureMarks(R),_?!0:d.clearNodes()}).wrapInList(y,r).command(()=>j0(s,y)).command(()=>L0(s,y)).run()},pQ=(e,t={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,o=es(e,r.schema);return fC(r,o,t)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,t)},mQ=(e,t,n={})=>({state:r,commands:i})=>{const s=Gt(e,r.schema),o=Gt(t,r.schema),l=ro(r,s,n);let u;return r.selection.$anchor.sameParent(r.selection.$head)&&(u=r.selection.$anchor.parent.attrs),l?i.setNode(o,u):i.setNode(s,{...u,...n})},gQ=(e,t={})=>({state:n,commands:r})=>{const i=Gt(e,n.schema);return ro(n,i,t)?r.lift(i):r.wrapIn(i,t)},yQ=()=>({state:e,dispatch:t})=>{const n=e.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(e))){if(t){const o=e.tr,l=s.transform;for(let u=l.steps.length-1;u>=0;u-=1)o.step(l.steps[u].invert(l.docs[u]));if(s.text){const u=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,e.schema.text(s.text,u))}else o.delete(s.from,s.to)}return!0}}return!1},vQ=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,{empty:r,ranges:i}=n;return r||t&&i.forEach(s=>{e.removeMark(s.$from.pos,s.$to.pos)}),!0},bQ=(e,t={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=t,{selection:l}=n,u=es(e,r.schema),{$from:d,empty:h,ranges:p}=l;if(!i)return!0;if(h&&o){let{from:g,to:y}=l;const x=(s=d.marks().find(w=>w.type===u))==null?void 0:s.attrs,S=$E(d,u,x);S&&(g=S.from,y=S.to),n.removeMark(g,y,u)}else p.forEach(g=>{n.removeMark(g.$from.pos,g.$to.pos,u)});return n.removeStoredMark(u),!0},xQ=(e,t={})=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const l=am(typeof e=="string"?e:e.name,r.schema);return l?(l==="node"&&(s=Gt(e,r.schema)),l==="mark"&&(o=es(e,r.schema)),i&&n.selection.ranges.forEach(u=>{const d=u.$from.pos,h=u.$to.pos;let p,g,y,x;n.selection.empty?r.doc.nodesBetween(d,h,(S,w)=>{s&&s===S.type&&(y=Math.max(w,d),x=Math.min(w+S.nodeSize,h),p=w,g=S)}):r.doc.nodesBetween(d,h,(S,w)=>{w<d&&s&&s===S.type&&(y=Math.max(w,d),x=Math.min(w+S.nodeSize,h),p=w,g=S),w>=d&&w<=h&&(s&&s===S.type&&n.setNodeMarkup(w,void 0,{...S.attrs,...t}),o&&S.marks.length&&S.marks.forEach(E=>{if(o===E.type){const N=Math.max(w,d),k=Math.min(w+S.nodeSize,h);n.addMark(N,k,o.create({...E.attrs,...t}))}}))}),g&&(p!==void 0&&n.setNodeMarkup(p,void 0,{...g.attrs,...t}),o&&g.marks.length&&g.marks.forEach(S=>{o===S.type&&n.addMark(y,x,o.create({...S.attrs,...t}))}))}),!0):!1},wQ=(e,t={})=>({state:n,dispatch:r})=>{const i=Gt(e,n.schema);return RX(i,t)(n,r)},SQ=(e,t={})=>({state:n,dispatch:r})=>{const i=Gt(e,n.schema);return OX(i,t)(n,r)},a6=Lt.create({name:"commands",addCommands(){return{...s6}}}),l6=Lt.create({name:"delete",onUpdate({transaction:e,appendedTransactions:t}){var n,r,i;const s=()=>{var o,l,u,d;if((d=(u=(l=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:l.filterTransaction)==null?void 0:u.call(l,e))!=null?d:e.getMeta("y-sync$"))return;const h=VI(e.before,[e,...t]);XI(h).forEach(y=>{h.mapping.mapResult(y.oldRange.from).deletedAfter&&h.mapping.mapResult(y.oldRange.to).deletedBefore&&h.before.nodesBetween(y.oldRange.from,y.oldRange.to,(x,S)=>{const w=S+x.nodeSize-2,E=y.oldRange.from<=S&&w<=y.oldRange.to;this.editor.emit("delete",{type:"node",node:x,from:S,to:w,newFrom:h.mapping.map(S),newTo:h.mapping.map(w),deletedRange:y.oldRange,newRange:y.newRange,partial:!E,editor:this.editor,transaction:e,combinedTransform:h})})});const g=h.mapping;h.steps.forEach((y,x)=>{var S,w;if(y instanceof Ur){const E=g.slice(x).map(y.from,-1),N=g.slice(x).map(y.to),k=g.invert().map(E,-1),T=g.invert().map(N),A=(S=h.doc.nodeAt(E-1))==null?void 0:S.marks.some(R=>R.eq(y.mark)),_=(w=h.doc.nodeAt(N))==null?void 0:w.marks.some(R=>R.eq(y.mark));this.editor.emit("delete",{type:"mark",mark:y.mark,from:y.from,to:y.to,deletedRange:{from:k,to:T},newRange:{from:E,to:N},partial:!!(_||A),editor:this.editor,transaction:e,combinedTransform:h})}})};(i=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||i?setTimeout(s,0):s()}}),c6=Lt.create({name:"drop",addProseMirrorPlugins(){return[new _t({key:new dn("tiptapDrop"),props:{handleDrop:(e,t,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:n,moved:r})}}})]}}),u6=Lt.create({name:"editable",addProseMirrorPlugins(){return[new _t({key:new dn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),d6=new dn("focusEvents"),f6=Lt.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new _t({key:d6,props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;const r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),h6=Lt.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:l})=>{const{selection:u,doc:d}=l,{empty:h,$anchor:p}=u,{pos:g,parent:y}=p,x=p.parent.isTextblock&&g>0?l.doc.resolve(g-1):p,S=x.parent.type.spec.isolating,w=p.pos-p.parentOffset,E=S&&x.parent.childCount===1?w===p.pos:Ue.atStart(d).from===g;return!h||!y.type.isTextblock||y.textContent.length||!E||E&&p.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return YE()||o6()?s:i},addProseMirrorPlugins(){return[new _t({key:new dn("clearDocument"),appendTransaction:(e,t,n)=>{if(e.some(S=>S.getMeta("composition")))return;const r=e.some(S=>S.docChanged)&&!t.doc.eq(n.doc),i=e.some(S=>S.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:o,to:l}=t.selection,u=Ue.atStart(t.doc).from,d=Ue.atEnd(t.doc).to;if(s||!(o===u&&l===d)||!lm(n.doc))return;const g=n.tr,y=im({state:n,transaction:g}),{commands:x}=new sm({editor:this.editor,state:y});if(x.clearNodes(),!!g.steps.length)return g}})]}}),p6=Lt.create({name:"paste",addProseMirrorPlugins(){return[new _t({key:new dn("tiptapPaste"),props:{handlePaste:(e,t,n)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:n})}}})]}}),m6=Lt.create({name:"tabindex",addProseMirrorPlugins(){return[new _t({key:new dn("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),CQ=class ml{constructor(t,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=t,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var t;return(t=this.actualDepth)!=null?t:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(t){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},t)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const t=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(t);return new ml(n,this.editor)}get before(){let t=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.from-3)),new ml(t,this.editor)}get after(){let t=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.to+3)),new ml(t,this.editor)}get children(){const t=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,o=this.pos+r+(s?0:1);if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;const l=this.resolvedPos.doc.resolve(o);if(!i&&l.depth<=this.depth)return;const u=new ml(l,this.editor,i,i?n:null);i&&(u.actualDepth=this.depth+1),t.push(new ml(l,this.editor,i,i?n:null))}),t}get firstChild(){return this.children[0]||null}get lastChild(){const t=this.children;return t[t.length-1]||null}closest(t,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===t)if(Object.keys(n).length>0){const s=i.node.attrs,o=Object.keys(n);for(let l=0;l<o.length;l+=1){const u=o[l];if(s[u]!==n[u])break}}else r=i;i=i.parent}return r}querySelector(t,n={}){return this.querySelectorAll(t,n,!0)[0]||null}querySelectorAll(t,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(n);return this.children.forEach(o=>{r&&i.length>0||(o.node.type.name===t&&s.every(u=>n[u]===o.node.attrs[u])&&i.push(o),!(r&&i.length>0)&&(i=i.concat(o.querySelectorAll(t,n,r))))}),i}setAttribute(t){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...t}),this.editor.view.dispatch(n)}},EQ=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function kQ(e,t,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return t&&i.setAttribute("nonce",t),i.setAttribute("data-tiptap-style",""),i.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(i),i}var TQ=class extends VX{constructor(e={}){super(),this.css=null,this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:i,moved:s})=>this.options.onDrop(r,i,s)),this.on("paste",({event:r,slice:i})=>this.options.onPaste(r,i)),this.on("delete",this.options.onDelete);const t=this.createDoc(),n=e6(t,this.options.autofocus);this.editorState=Sl.create({doc:t,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(e){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(e),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const e=this.editorView.dom;e?.editor&&delete e.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(e){console.warn("Failed to remove CSS element:",e)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=kQ(EQ,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:e=>{this.editorState=e},dispatch:e=>{this.dispatchTransaction(e)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(e,t)=>{if(t==="state")return this.editorState;if(t in e)return Reflect.get(e,t);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${t}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(e,t){const n=FI(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let n=t;if([].concat(e).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;n=n.filter(o=>!o.key.startsWith(s))}),t.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var e,t;const r=[...this.options.enableCoreExtensions?[u6,i6.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)==null?void 0:e.clipboardTextSerializer)==null?void 0:t.blockSeparator}),a6,f6,h6,m6,c6,p6,l6].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i?.type));this.extensionManager=new um(r,this)}createCommandManager(){this.commandManager=new sm({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let e;try{e=dC(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(t){if(!(t instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(t.message))throw t;this.emit("contentError",{editor:this,error:t,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),e=dC(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return e}createView(e){var t;this.editorView=new TI(e,{...this.options.editorProps,attributes:{role:"textbox",...(t=this.options.editorProps)==null?void 0:t.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.prependClass(),this.injectCSS();const r=this.view.dom;r.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(d=>{var h;return(h=this.capturedTransaction)==null?void 0:h.step(d)});return}const{state:t,transactions:n}=this.state.applyTransaction(e),r=!this.state.selection.eq(t.selection),i=n.includes(e),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),!i)return;this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const o=n.findLast(d=>d.getMeta("focus")||d.getMeta("blur")),l=o?.getMeta("focus"),u=o?.getMeta("blur");l&&this.emit("focus",{editor:this,event:l.event,transaction:o}),u&&this.emit("blur",{editor:this,event:u.event,transaction:o}),!(e.getMeta("preventUpdate")||!n.some(d=>d.docChanged)||s.doc.eq(t.doc))&&this.emit("update",{editor:this,transaction:e,appendedTransactions:n.slice(1)})}getAttributes(e){return WI(this.state,e)}isActive(e,t){const n=typeof e=="string"?e:null,r=typeof e=="string"?t:e;return tZ(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return HE(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:n={}}=e||{};return WX(this.state.doc,{blockSeparator:t,textSerializers:{...KI(this.schema),...n}})}get isEmpty(){return lm(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var e,t;return(t=(e=this.editorView)==null?void 0:e.isDestroyed)!=null?t:!0}$node(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelector(e,t))||null}$nodes(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new CQ(t,this)}get $doc(){return this.$pos(0)}};function Pl(e){return new cm({find:e.find,handler:({state:t,range:n,match:r})=>{const i=it(e.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=t,o=r[r.length-1],l=r[0];if(o){const u=l.search(/\S/),d=n.from+l.indexOf(o),h=d+o.length;if(GE(n.from,n.to,t.doc).filter(y=>y.mark.type.excluded.find(S=>S===e.type&&S!==y.mark.type)).filter(y=>y.to>d).length)return null;h<n.to&&s.delete(h,n.to),d>n.from&&s.delete(n.from+u,d);const g=n.from+u+o.length;s.addMark(n.from+u,g,e.type.create(i||{})),s.removeStoredMark(e.type)}},undoable:e.undoable})}function NQ(e){return new cm({find:e.find,handler:({state:t,range:n,match:r})=>{const i=it(e.getAttributes,void 0,r)||{},{tr:s}=t,o=n.from;let l=n.to;const u=e.type.create(i);if(r[1]){const d=r[0].lastIndexOf(r[1]);let h=o+d;h>l?h=l:l=h+r[1].length;const p=r[0][r[0].length-1];s.insertText(p,o+r[0].length-1),s.replaceWith(h,l,u)}else if(r[0]){const d=e.type.isInline?o:o-1;s.insert(d,e.type.create(i)).delete(s.mapping.map(o),s.mapping.map(l))}s.scrollIntoView()},undoable:e.undoable})}function hC(e){return new cm({find:e.find,handler:({state:t,range:n,match:r})=>{const i=t.doc.resolve(n.from),s=it(e.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),e.type))return null;t.tr.delete(n.from,n.to).setBlockType(n.from,n.from,e.type,s)},undoable:e.undoable})}function Bl(e){return new cm({find:e.find,handler:({state:t,range:n,match:r,chain:i})=>{const s=it(e.getAttributes,void 0,r)||{},o=t.tr.delete(n.from,n.to),u=o.doc.resolve(n.from).blockRange(),d=u&&kE(u,e.type,s);if(!d)return null;if(o.wrap(u,d),e.keepMarks&&e.editor){const{selection:p,storedMarks:g}=t,{splittableMarks:y}=e.editor.extensionManager,x=g||p.$to.parentOffset&&p.$from.marks();if(x){const S=x.filter(w=>y.includes(w.type.name));o.ensureMarks(S)}}if(e.keepAttributes){const p=e.type.name==="bulletList"||e.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(p,s).run()}const h=o.doc.resolve(n.from-1).nodeBefore;h&&h.type===e.type&&oo(o.doc,n.from-1)&&(!e.joinPredicate||e.joinPredicate(r,h))&&o.join(n.from-1)},undoable:e.undoable})}function AQ(e,t){const{selection:n}=e,{$from:r}=n;if(n instanceof Re){const s=r.index();return r.parent.canReplaceWith(s,s+1,t)}let i=r.depth;for(;i>=0;){const s=r.index(i);if(r.node(i).contentMatchAt(s).matchType(t))return!0;i-=1}return!1}function MQ(e,t,n={}){const{state:r}=t,{doc:i,tr:s}=r,o=e;i.descendants((l,u)=>{const d=s.mapping.map(u),h=s.mapping.map(u)+l.nodeSize;let p=null;if(l.marks.forEach(y=>{if(y!==o)return!1;p=y}),!p)return;let g=!1;if(Object.keys(n).forEach(y=>{n[y]!==p.attrs[y]&&(g=!0)}),g){const y=e.type.create({...e.attrs,...n});s.removeMark(d,h,e.type),s.addMark(d,h,y)}}),s.docChanged&&t.view.dispatch(s)}var ur=class g6 extends KE{constructor(){super(...arguments),this.type="node"}static create(t={}){const n=typeof t=="function"?t():t;return new g6(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}};function ca(e){return new cZ({find:e.find,handler:({state:t,range:n,match:r,pasteEvent:i})=>{const s=it(e.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=t,l=r[r.length-1],u=r[0];let d=n.to;if(l){const h=u.search(/\S/),p=n.from+u.indexOf(l),g=p+l.length;if(GE(n.from,n.to,t.doc).filter(x=>x.mark.type.excluded.find(w=>w===e.type&&w!==x.mark.type)).filter(x=>x.to>p).length)return null;g<n.to&&o.delete(g,n.to),p>n.from&&o.delete(n.from+h,p),d=n.from+h+l.length,o.addMark(n.from+h,d,e.type.create(s||{})),o.removeStoredMark(e.type)}}})}var P0,pD;function _Q(){return pD||(pD=1,P0=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t instanceof Map&&n instanceof Map){if(t.size!==n.size)return!1;for(i of t.entries())if(!n.has(i[0]))return!1;for(i of t.entries())if(!e(i[1],n.get(i[0])))return!1;return!0}if(t instanceof Set&&n instanceof Set){if(t.size!==n.size)return!1;for(i of t.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(n)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(t[i]!==n[i])return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!(o==="_owner"&&t.$$typeof)&&!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n}),P0}var DQ=_Q();const RQ=cd(DQ);var B0={exports:{}},I0={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mD;function OQ(){if(mD)return I0;mD=1;var e=ud(),t=dB();function n(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var r=typeof Object.is=="function"?Object.is:n,i=t.useSyncExternalStore,s=e.useRef,o=e.useEffect,l=e.useMemo,u=e.useDebugValue;return I0.useSyncExternalStoreWithSelector=function(d,h,p,g,y){var x=s(null);if(x.current===null){var S={hasValue:!1,value:null};x.current=S}else S=x.current;x=l(function(){function E(_){if(!N){if(N=!0,k=_,_=g(_),y!==void 0&&S.hasValue){var R=S.value;if(y(R,_))return T=R}return T=_}if(R=T,r(k,_))return R;var D=g(_);return y!==void 0&&y(R,D)?(k=_,R):(k=_,T=D)}var N=!1,k,T,A=p===void 0?null:p;return[function(){return E(h())},A===null?void 0:function(){return E(A())}]},[h,p,g,y]);var w=i(d,x[0],x[1]);return o(function(){S.hasValue=!0,S.value=w},[w]),u(w),w},I0}var gD;function jQ(){return gD||(gD=1,B0.exports=OQ()),B0.exports}var y6=jQ();const LQ=cd(y6);var PQ=(...e)=>t=>{e.forEach(n=>{typeof n=="function"?n(t):n&&(n.current=t)})},BQ=({contentComponent:e})=>{const t=fB.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getServerSnapshot);return v.jsx(v.Fragment,{children:Object.values(t)})};function IQ(){const e=new Set;let t={};return{subscribe(n){return e.add(n),()=>{e.delete(n)}},getSnapshot(){return t},getServerSnapshot(){return t},setRenderer(n,r){t={...t,[n]:c5.createPortal(r.reactElement,r.element,n)},e.forEach(i=>i())},removeRenderer(n){const r={...t};delete r[n],t=r,e.forEach(i=>i())}}}var zQ=class extends Pe.Component{constructor(e){var t;super(e),this.editorContentRef=Pe.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((t=e.editor)!=null&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(e.view.dom),e.setOptions({element:t}),e.contentComponent=IQ(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var e;const t=this.props.editor;if(t){this.initialized=!1,t.isDestroyed||t.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),t.contentComponent=null;try{if(!((e=t.view.dom)!=null&&e.firstChild))return;const n=document.createElement("div");n.append(t.view.dom),t.setOptions({element:n})}catch{}}}render(){const{editor:e,innerRef:t,...n}=this.props;return v.jsxs(v.Fragment,{children:[v.jsx("div",{ref:PQ(t,this.editorContentRef),...n}),e?.contentComponent&&v.jsx(BQ,{contentComponent:e.contentComponent})]})}},qQ=O.forwardRef((e,t)=>{const n=Pe.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[e.editor]);return Pe.createElement(zQ,{key:n,innerRef:t,...e})}),yD=Pe.memo(qQ),VQ=typeof window<"u"?O.useLayoutEffect:O.useEffect,HQ=class{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",t),()=>{n.off("transaction",t)}}}};function FQ(e){var t;const[n]=O.useState(()=>new HQ(e.editor)),r=y6.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,e.selector,(t=e.equalityFn)!=null?t:RQ);return VQ(()=>n.watch(e.editor),[e.editor,n]),O.useDebugValue(r),r}var UQ=!1,pC=typeof window>"u",$Q=pC||!!(typeof window<"u"&&window.next),GQ=class v6{constructor(t){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=t,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(t){this.editor=t,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?pC||$Q?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const t={...this.options.current,onBeforeCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)==null?void 0:s.call(i,...r)},onBlur:(...r)=>{var i,s;return(s=(i=this.options.current).onBlur)==null?void 0:s.call(i,...r)},onCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onCreate)==null?void 0:s.call(i,...r)},onDestroy:(...r)=>{var i,s;return(s=(i=this.options.current).onDestroy)==null?void 0:s.call(i,...r)},onFocus:(...r)=>{var i,s;return(s=(i=this.options.current).onFocus)==null?void 0:s.call(i,...r)},onSelectionUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)==null?void 0:s.call(i,...r)},onTransaction:(...r)=>{var i,s;return(s=(i=this.options.current).onTransaction)==null?void 0:s.call(i,...r)},onUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onUpdate)==null?void 0:s.call(i,...r)},onContentError:(...r)=>{var i,s;return(s=(i=this.options.current).onContentError)==null?void 0:s.call(i,...r)},onDrop:(...r)=>{var i,s;return(s=(i=this.options.current).onDrop)==null?void 0:s.call(i,...r)},onPaste:(...r)=>{var i,s;return(s=(i=this.options.current).onPaste)==null?void 0:s.call(i,...r)},onDelete:(...r)=>{var i,s;return(s=(i=this.options.current).onDelete)==null?void 0:s.call(i,...r)}};return new TQ(t)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(t){return this.subscriptions.add(t),()=>{this.subscriptions.delete(t)}}static compareOptions(t,n){return Object.keys(t).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&t.extensions&&n.extensions?t.extensions.length!==n.extensions.length?!1:t.extensions.every((i,s)=>{var o;return i===((o=n.extensions)==null?void 0:o[s])}):t[r]===n[r])}onRender(t){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&t.length===0?v6.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(t),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(t){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=t;return}if(this.previousDeps.length===t.length&&this.previousDeps.every((r,i)=>r===t[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=t}scheduleDestroy(){const t=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===t){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===t&&this.setEditor(null))},1)}};function KQ(e={},t=[]){const n=O.useRef(e);n.current=e;const[r]=O.useState(()=>new GQ(n)),i=fB.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return O.useDebugValue(i),O.useEffect(r.onRender(t)),FQ({editor:i,selector:({transactionNumber:s})=>e.shouldRerenderOnTransaction===!1||e.shouldRerenderOnTransaction===void 0?null:e.immediatelyRender&&s===0?0:s+1}),i}var YQ=O.createContext({editor:null});YQ.Consumer;var WQ=O.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),XQ=()=>O.useContext(WQ);Pe.forwardRef((e,t)=>{const{onDragStart:n}=XQ(),r=e.as||"div";return v.jsx(r,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...e.style}})});Pe.createContext({markViewContentRef:()=>{}});var Zh=(e,t)=>{if(e==="slot")return 0;if(e instanceof Function)return e(t);const{children:n,...r}=t??{};if(e==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[e,r,n]},ZQ=/^\s*>\s$/,QQ=ur.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:e}){return Zh("blockquote",{...$t(this.options.HTMLAttributes,e),children:Zh("slot",{})})},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[Bl({find:ZQ,type:this.type})]}}),JQ=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,eJ=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,tJ=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,nJ=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,rJ=xa.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return Zh("strong",{...$t(this.options.HTMLAttributes,e),children:Zh("slot",{})})},addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[Pl({find:JQ,type:this.type}),Pl({find:tJ,type:this.type})]},addPasteRules(){return[ca({find:eJ,type:this.type}),ca({find:nJ,type:this.type})]}}),iJ=/(^|[^`])`([^`]+)`(?!`)$/,sJ=/(^|[^`])`([^`]+)`(?!`)/g,oJ=xa.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:e}){return["code",$t(this.options.HTMLAttributes,e),0]},addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[Pl({find:iJ,type:this.type})]},addPasteRules(){return[ca({find:sJ,type:this.type})]}}),aJ=/^```([a-z]+)?[\s\n]$/,lJ=/^~~~([a-z]+)?[\s\n]$/,cJ=ur.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:4,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var t;const{languageClassPrefix:n}=this.options,s=[...((t=e.firstElementChild)==null?void 0:t.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:e,HTMLAttributes:t}){return["pre",$t(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,n=t.pos===1;return!e||t.parent.type.name!==this.name?!1:n||!t.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:e})=>{if(!this.options.enableTabIndentation)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:i}=n;if(r.parent.type!==this.type)return!1;const s=" ".repeat(this.options.tabSize);return i?e.commands.insertContent(s):e.commands.command(({tr:o})=>{const{from:l,to:u}=n,p=t.doc.textBetween(l,u,`
`,`
`).split(`
`).map(g=>s+g).join(`
`);return o.replaceWith(l,u,t.schema.text(p)),!0})},"Shift-Tab":({editor:e})=>{if(!this.options.enableTabIndentation)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:i}=n;return r.parent.type!==this.type?!1:i?e.commands.command(({tr:s})=>{var o;const{pos:l}=r,u=r.start(),d=r.end(),p=t.doc.textBetween(u,d,`
`,`
`).split(`
`);let g=0,y=0;const x=l-u;for(let T=0;T<p.length;T+=1){if(y+p[T].length>=x){g=T;break}y+=p[T].length+1}const w=((o=p[g].match(/^ */))==null?void 0:o[0])||"",E=Math.min(w.length,this.options.tabSize);if(E===0)return!0;let N=u;for(let T=0;T<g;T+=1)N+=p[T].length+1;return s.delete(N,N+E),l-N<=E&&s.setSelection(Ve.create(s.doc,N)),!0}):e.commands.command(({tr:s})=>{const{from:o,to:l}=n,h=t.doc.textBetween(o,l,`
`,`
`).split(`
`).map(p=>{var g;const y=((g=p.match(/^ */))==null?void 0:g[0])||"",x=Math.min(y.length,this.options.tabSize);return p.slice(x)}).join(`
`);return s.replaceWith(o,l,t.schema.text(h)),!0})},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:e.chain().command(({tr:l})=>(l.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:n,doc:r}=t,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const l=i.after();return l===void 0?!1:r.nodeAt(l)?e.commands.command(({tr:d})=>(d.setSelection(Ue.near(r.resolve(l))),!0)):e.commands.exitCode()}}},addInputRules(){return[hC({find:aJ,type:this.type,getAttributes:e=>({language:e[1]})}),hC({find:lJ,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new _t({key:new dn("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;const n=t.clipboardData.getData("text/plain"),r=t.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i?.mode;if(!n||!s)return!1;const{tr:o,schema:l}=e.state,u=l.text(n.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},u)),o.selection.$from.parent.type!==this.type&&o.setSelection(Ve.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),e.dispatch(o),!0}}})]}}),uJ=ur.create({name:"doc",topNode:!0,content:"block+"}),dJ=ur.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",$t(this.options.HTMLAttributes,e)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:r})=>e.first([()=>e.exitCode(),()=>e.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:l}=r.extensionManager,u=s||i.$to.parentOffset&&i.$from.marks();return t().insertContent({type:this.name}).command(({tr:d,dispatch:h})=>{if(h&&u&&o){const p=u.filter(g=>l.includes(g.type.name));d.ensureMarks(p)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),b6=ur.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,$t(this.options.HTMLAttributes,t),0]},addCommands(){return{setHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.setNode(this.name,e):!1,toggleHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.toggleNode(this.name,"paragraph",e):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>hC({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}}),fJ=b6,hJ=ur.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:e}){return["hr",$t(this.options.HTMLAttributes,e)]},addCommands(){return{setHorizontalRule:()=>({chain:e,state:t})=>{if(!AQ(t,t.schema.nodes[this.name]))return!1;const{selection:n}=t,{$to:r}=n,i=e();return QI(n)?i.insertContentAt(r.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({tr:s,dispatch:o})=>{var l;if(o){const{$to:u}=s.selection,d=u.end();if(u.nodeAfter)u.nodeAfter.isTextblock?s.setSelection(Ve.create(s.doc,u.pos+1)):u.nodeAfter.isBlock?s.setSelection(Re.create(s.doc,u.pos)):s.setSelection(Ve.create(s.doc,u.pos));else{const h=(l=u.parent.type.contentMatch.defaultType)==null?void 0:l.create();h&&(s.insert(d,h),s.setSelection(Ve.create(s.doc,d+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[NQ({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),pJ=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,mJ=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,gJ=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,yJ=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,vJ=xa.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>e.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",$t(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[Pl({find:pJ,type:this.type}),Pl({find:gJ,type:this.type})]},addPasteRules(){return[ca({find:mJ,type:this.type}),ca({find:yJ,type:this.type})]}});const bJ="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",xJ="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",mC="numeric",gC="ascii",yC="alpha",ku="asciinumeric",uu="alphanumeric",vC="domain",x6="emoji",wJ="scheme",SJ="slashscheme",z0="whitespace";function CJ(e,t){return e in t||(t[e]=[]),t[e]}function Ko(e,t,n){t[mC]&&(t[ku]=!0,t[uu]=!0),t[gC]&&(t[ku]=!0,t[yC]=!0),t[ku]&&(t[uu]=!0),t[yC]&&(t[uu]=!0),t[uu]&&(t[vC]=!0),t[x6]&&(t[vC]=!0);for(const r in t){const i=CJ(r,n);i.indexOf(e)<0&&i.push(e)}}function EJ(e,t){const n={};for(const r in t)t[r].indexOf(e)>=0&&(n[r]=!0);return n}function qn(e=null){this.j={},this.jr=[],this.jd=null,this.t=e}qn.groups={};qn.prototype={accepts(){return!!this.t},go(e){const t=this,n=t.j[e];if(n)return n;for(let r=0;r<t.jr.length;r++){const i=t.jr[r][0],s=t.jr[r][1];if(s&&i.test(e))return s}return t.jd},has(e,t=!1){return t?e in this.j:!!this.go(e)},ta(e,t,n,r){for(let i=0;i<e.length;i++)this.tt(e[i],t,n,r)},tr(e,t,n,r){r=r||qn.groups;let i;return t&&t.j?i=t:(i=new qn(t),n&&r&&Ko(t,n,r)),this.jr.push([e,i]),i},ts(e,t,n,r){let i=this;const s=e.length;if(!s)return i;for(let o=0;o<s-1;o++)i=i.tt(e[o]);return i.tt(e[s-1],t,n,r)},tt(e,t,n,r){r=r||qn.groups;const i=this;if(t&&t.j)return i.j[e]=t,t;const s=t;let o,l=i.go(e);if(l?(o=new qn,Object.assign(o.j,l.j),o.jr.push.apply(o.jr,l.jr),o.jd=l.jd,o.t=l.t):o=new qn,s){if(r)if(o.t&&typeof o.t=="string"){const u=Object.assign(EJ(o.t,r),n);Ko(s,u,r)}else n&&Ko(s,n,r);o.t=s}return i.j[e]=o,o}};const $e=(e,t,n,r,i)=>e.ta(t,n,r,i),Nt=(e,t,n,r,i)=>e.tr(t,n,r,i),vD=(e,t,n,r,i)=>e.ts(t,n,r,i),me=(e,t,n,r,i)=>e.tt(t,n,r,i),Ui="WORD",bC="UWORD",w6="ASCIINUMERICAL",S6="ALPHANUMERICAL",Xu="LOCALHOST",xC="TLD",wC="UTLD",wh="SCHEME",gl="SLASH_SCHEME",WE="NUM",SC="WS",XE="NL",Tu="OPENBRACE",Nu="CLOSEBRACE",Qh="OPENBRACKET",Jh="CLOSEBRACKET",ep="OPENPAREN",tp="CLOSEPAREN",np="OPENANGLEBRACKET",rp="CLOSEANGLEBRACKET",ip="FULLWIDTHLEFTPAREN",sp="FULLWIDTHRIGHTPAREN",op="LEFTCORNERBRACKET",ap="RIGHTCORNERBRACKET",lp="LEFTWHITECORNERBRACKET",cp="RIGHTWHITECORNERBRACKET",up="FULLWIDTHLESSTHAN",dp="FULLWIDTHGREATERTHAN",fp="AMPERSAND",hp="APOSTROPHE",pp="ASTERISK",Is="AT",mp="BACKSLASH",gp="BACKTICK",yp="CARET",Vs="COLON",ZE="COMMA",vp="DOLLAR",ci="DOT",bp="EQUALS",QE="EXCLAMATION",Er="HYPHEN",Au="PERCENT",xp="PIPE",wp="PLUS",Sp="POUND",Mu="QUERY",JE="QUOTE",C6="FULLWIDTHMIDDLEDOT",ek="SEMI",ui="SLASH",_u="TILDE",Cp="UNDERSCORE",E6="EMOJI",Ep="SYM";var k6=Object.freeze({__proto__:null,ALPHANUMERICAL:S6,AMPERSAND:fp,APOSTROPHE:hp,ASCIINUMERICAL:w6,ASTERISK:pp,AT:Is,BACKSLASH:mp,BACKTICK:gp,CARET:yp,CLOSEANGLEBRACKET:rp,CLOSEBRACE:Nu,CLOSEBRACKET:Jh,CLOSEPAREN:tp,COLON:Vs,COMMA:ZE,DOLLAR:vp,DOT:ci,EMOJI:E6,EQUALS:bp,EXCLAMATION:QE,FULLWIDTHGREATERTHAN:dp,FULLWIDTHLEFTPAREN:ip,FULLWIDTHLESSTHAN:up,FULLWIDTHMIDDLEDOT:C6,FULLWIDTHRIGHTPAREN:sp,HYPHEN:Er,LEFTCORNERBRACKET:op,LEFTWHITECORNERBRACKET:lp,LOCALHOST:Xu,NL:XE,NUM:WE,OPENANGLEBRACKET:np,OPENBRACE:Tu,OPENBRACKET:Qh,OPENPAREN:ep,PERCENT:Au,PIPE:xp,PLUS:wp,POUND:Sp,QUERY:Mu,QUOTE:JE,RIGHTCORNERBRACKET:ap,RIGHTWHITECORNERBRACKET:cp,SCHEME:wh,SEMI:ek,SLASH:ui,SLASH_SCHEME:gl,SYM:Ep,TILDE:_u,TLD:xC,UNDERSCORE:Cp,UTLD:wC,UWORD:bC,WORD:Ui,WS:SC});const Vi=/[a-z]/,tu=new RegExp("\\p{L}","u"),q0=new RegExp("\\p{Emoji}","u"),Hi=/\d/,V0=/\s/,bD="\r",H0=`
`,kJ="",TJ="",F0="";let eh=null,th=null;function NJ(e=[]){const t={};qn.groups=t;const n=new qn;eh==null&&(eh=xD(bJ)),th==null&&(th=xD(xJ)),me(n,"'",hp),me(n,"{",Tu),me(n,"}",Nu),me(n,"[",Qh),me(n,"]",Jh),me(n,"(",ep),me(n,")",tp),me(n,"<",np),me(n,">",rp),me(n,"",ip),me(n,"",sp),me(n,"",op),me(n,"",ap),me(n,"",lp),me(n,"",cp),me(n,"",up),me(n,"",dp),me(n,"&",fp),me(n,"*",pp),me(n,"@",Is),me(n,"`",gp),me(n,"^",yp),me(n,":",Vs),me(n,",",ZE),me(n,"$",vp),me(n,".",ci),me(n,"=",bp),me(n,"!",QE),me(n,"-",Er),me(n,"%",Au),me(n,"|",xp),me(n,"+",wp),me(n,"#",Sp),me(n,"?",Mu),me(n,'"',JE),me(n,"/",ui),me(n,";",ek),me(n,"~",_u),me(n,"_",Cp),me(n,"\\",mp),me(n,"",C6);const r=Nt(n,Hi,WE,{[mC]:!0});Nt(r,Hi,r);const i=Nt(r,Vi,w6,{[ku]:!0}),s=Nt(r,tu,S6,{[uu]:!0}),o=Nt(n,Vi,Ui,{[gC]:!0});Nt(o,Hi,i),Nt(o,Vi,o),Nt(i,Hi,i),Nt(i,Vi,i);const l=Nt(n,tu,bC,{[yC]:!0});Nt(l,Vi),Nt(l,Hi,s),Nt(l,tu,l),Nt(s,Hi,s),Nt(s,Vi),Nt(s,tu,s);const u=me(n,H0,XE,{[z0]:!0}),d=me(n,bD,SC,{[z0]:!0}),h=Nt(n,V0,SC,{[z0]:!0});me(n,F0,h),me(d,H0,u),me(d,F0,h),Nt(d,V0,h),me(h,bD),me(h,H0),Nt(h,V0,h),me(h,F0,h);const p=Nt(n,q0,E6,{[x6]:!0});me(p,"#"),Nt(p,q0,p),me(p,kJ,p);const g=me(p,TJ);me(g,"#"),Nt(g,q0,p);const y=[[Vi,o],[Hi,i]],x=[[Vi,null],[tu,l],[Hi,s]];for(let S=0;S<eh.length;S++)Rs(n,eh[S],xC,Ui,y);for(let S=0;S<th.length;S++)Rs(n,th[S],wC,bC,x);Ko(xC,{tld:!0,ascii:!0},t),Ko(wC,{utld:!0,alpha:!0},t),Rs(n,"file",wh,Ui,y),Rs(n,"mailto",wh,Ui,y),Rs(n,"http",gl,Ui,y),Rs(n,"https",gl,Ui,y),Rs(n,"ftp",gl,Ui,y),Rs(n,"ftps",gl,Ui,y),Ko(wh,{scheme:!0,ascii:!0},t),Ko(gl,{slashscheme:!0,ascii:!0},t),e=e.sort((S,w)=>S[0]>w[0]?1:-1);for(let S=0;S<e.length;S++){const w=e[S][0],N=e[S][1]?{[wJ]:!0}:{[SJ]:!0};w.indexOf("-")>=0?N[vC]=!0:Vi.test(w)?Hi.test(w)?N[ku]=!0:N[gC]=!0:N[mC]=!0,vD(n,w,w,N)}return vD(n,"localhost",Xu,{ascii:!0}),n.jd=new qn(Ep),{start:n,tokens:Object.assign({groups:t},k6)}}function T6(e,t){const n=AJ(t.replace(/[A-Z]/g,l=>l.toLowerCase())),r=n.length,i=[];let s=0,o=0;for(;o<r;){let l=e,u=null,d=0,h=null,p=-1,g=-1;for(;o<r&&(u=l.go(n[o]));)l=u,l.accepts()?(p=0,g=0,h=l):p>=0&&(p+=n[o].length,g++),d+=n[o].length,s+=n[o].length,o++;s-=p,o-=g,d-=p,i.push({t:h.t,v:t.slice(s-d,s),s:s-d,e:s})}return i}function AJ(e){const t=[],n=e.length;let r=0;for(;r<n;){let i=e.charCodeAt(r),s,o=i<55296||i>56319||r+1===n||(s=e.charCodeAt(r+1))<56320||s>57343?e[r]:e.slice(r,r+2);t.push(o),r+=o.length}return t}function Rs(e,t,n,r,i){let s;const o=t.length;for(let l=0;l<o-1;l++){const u=t[l];e.j[u]?s=e.j[u]:(s=new qn(r),s.jr=i.slice(),e.j[u]=s),e=s}return s=new qn(n),s.jr=i.slice(),e.j[t[o-1]]=s,s}function xD(e){const t=[],n=[];let r=0,i="0123456789";for(;r<e.length;){let s=0;for(;i.indexOf(e[r+s])>=0;)s++;if(s>0){t.push(n.join(""));for(let o=parseInt(e.substring(r,r+s),10);o>0;o--)n.pop();r+=s}else n.push(e[r]),r++}return t}const Zu={defaultProtocol:"http",events:null,format:wD,formatHref:wD,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function tk(e,t=null){let n=Object.assign({},Zu);e&&(n=Object.assign(n,e instanceof tk?e.o:e));const r=n.ignoreTags,i=[];for(let s=0;s<r.length;s++)i.push(r[s].toUpperCase());this.o=n,t&&(this.defaultRender=t),this.ignoreTags=i}tk.prototype={o:Zu,ignoreTags:[],defaultRender(e){return e},check(e){return this.get("validate",e.toString(),e)},get(e,t,n){const r=t!=null;let i=this.o[e];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:Zu[e],typeof i=="function"&&r&&(i=i(t,n))):typeof i=="function"&&r&&(i=i(t,n.t,n)),i)},getObj(e,t,n){let r=this.o[e];return typeof r=="function"&&t!=null&&(r=r(t,n.t,n)),r},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}};function wD(e){return e}function N6(e,t){this.t="token",this.v=e,this.tk=t}N6.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),n=e.get("truncate",t,this),r=e.get("format",t,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e=Zu.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,n=this.toHref(e.get("defaultProtocol")),r=e.get("formatHref",n,this),i=e.get("tagName",n,t),s=this.toFormattedString(e),o={},l=e.get("className",n,t),u=e.get("target",n,t),d=e.get("rel",n,t),h=e.getObj("attributes",n,t),p=e.getObj("events",n,t);return o.href=r,l&&(o.class=l),u&&(o.target=u),d&&(o.rel=d),h&&Object.assign(o,h),{tagName:i,attributes:o,content:s,eventListeners:p}}};function dm(e,t){class n extends N6{constructor(i,s){super(i,s),this.t=e}}for(const r in t)n.prototype[r]=t[r];return n.t=e,n}const SD=dm("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),CD=dm("text"),MJ=dm("nl"),nh=dm("url",{isLink:!0,toHref(e=Zu.defaultProtocol){return this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==Xu&&e[1].t===Vs}}),Sr=e=>new qn(e);function _J({groups:e}){const t=e.domain.concat([fp,pp,Is,mp,gp,yp,vp,bp,Er,WE,Au,xp,wp,Sp,ui,Ep,_u,Cp]),n=[hp,Vs,ZE,ci,QE,Au,Mu,JE,ek,np,rp,Tu,Nu,Jh,Qh,ep,tp,ip,sp,op,ap,lp,cp,up,dp],r=[fp,hp,pp,mp,gp,yp,vp,bp,Er,Tu,Nu,Au,xp,wp,Sp,Mu,ui,Ep,_u,Cp],i=Sr(),s=me(i,_u);$e(s,r,s),$e(s,e.domain,s);const o=Sr(),l=Sr(),u=Sr();$e(i,e.domain,o),$e(i,e.scheme,l),$e(i,e.slashscheme,u),$e(o,r,s),$e(o,e.domain,o);const d=me(o,Is);me(s,Is,d),me(l,Is,d),me(u,Is,d);const h=me(s,ci);$e(h,r,s),$e(h,e.domain,s);const p=Sr();$e(d,e.domain,p),$e(p,e.domain,p);const g=me(p,ci);$e(g,e.domain,p);const y=Sr(SD);$e(g,e.tld,y),$e(g,e.utld,y),me(d,Xu,y);const x=me(p,Er);me(x,Er,x),$e(x,e.domain,p),$e(y,e.domain,p),me(y,ci,g),me(y,Er,x);const S=me(y,Vs);$e(S,e.numeric,SD);const w=me(o,Er),E=me(o,ci);me(w,Er,w),$e(w,e.domain,o),$e(E,r,s),$e(E,e.domain,o);const N=Sr(nh);$e(E,e.tld,N),$e(E,e.utld,N),$e(N,e.domain,o),$e(N,r,s),me(N,ci,E),me(N,Er,w),me(N,Is,d);const k=me(N,Vs),T=Sr(nh);$e(k,e.numeric,T);const A=Sr(nh),_=Sr();$e(A,t,A),$e(A,n,_),$e(_,t,A),$e(_,n,_),me(N,ui,A),me(T,ui,A);const R=me(l,Vs),D=me(u,Vs),B=me(D,ui),$=me(B,ui);$e(l,e.domain,o),me(l,ci,E),me(l,Er,w),$e(u,e.domain,o),me(u,ci,E),me(u,Er,w),$e(R,e.domain,A),me(R,ui,A),me(R,Mu,A),$e($,e.domain,A),$e($,t,A),me($,ui,A);const z=[[Tu,Nu],[Qh,Jh],[ep,tp],[np,rp],[ip,sp],[op,ap],[lp,cp],[up,dp]];for(let V=0;V<z.length;V++){const[Y,I]=z[V],F=me(A,Y);me(_,Y,F),me(F,I,A);const L=Sr(nh);$e(F,t,L);const q=Sr();$e(F,n),$e(L,t,L),$e(L,n,q),$e(q,t,L),$e(q,n,q),me(L,I,A),me(q,I,A)}return me(i,Xu,N),me(i,XE,MJ),{start:i,tokens:k6}}function DJ(e,t,n){let r=n.length,i=0,s=[],o=[];for(;i<r;){let l=e,u=null,d=null,h=0,p=null,g=-1;for(;i<r&&!(u=l.go(n[i].t));)o.push(n[i++]);for(;i<r&&(d=u||l.go(n[i].t));)u=null,l=d,l.accepts()?(g=0,p=l):g>=0&&g++,i++,h++;if(g<0)i-=h,i<r&&(o.push(n[i]),i++);else{o.length>0&&(s.push(U0(CD,t,o)),o=[]),i-=g,h-=g;const y=p.t,x=n.slice(i-h,i);s.push(U0(y,t,x))}}return o.length>0&&s.push(U0(CD,t,o)),s}function U0(e,t,n){const r=n[0].s,i=n[n.length-1].e,s=t.slice(r,i);return new e(s,n)}const RJ=typeof console<"u"&&console&&console.warn||(()=>{}),OJ="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",ft={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function jJ(){return qn.groups={},ft.scanner=null,ft.parser=null,ft.tokenQueue=[],ft.pluginQueue=[],ft.customSchemes=[],ft.initialized=!1,ft}function ED(e,t=!1){if(ft.initialized&&RJ(`linkifyjs: already initialized - will not register custom scheme "${e}" ${OJ}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);ft.customSchemes.push([e,t])}function LJ(){ft.scanner=NJ(ft.customSchemes);for(let e=0;e<ft.tokenQueue.length;e++)ft.tokenQueue[e][1]({scanner:ft.scanner});ft.parser=_J(ft.scanner.tokens);for(let e=0;e<ft.pluginQueue.length;e++)ft.pluginQueue[e][1]({scanner:ft.scanner,parser:ft.parser});return ft.initialized=!0,ft}function nk(e){return ft.initialized||LJ(),DJ(ft.parser.start,e,T6(ft.scanner.start,e))}nk.scan=T6;function A6(e,t=null,n=null){if(t&&typeof t=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);n=t,t=null}const r=new tk(n),i=nk(e),s=[];for(let o=0;o<i.length;o++){const l=i[o];l.isLink&&(!t||l.t===t)&&r.check(l)&&s.push(l.toFormattedObject(r))}return s}var rk="[\0- -\u2029]",PJ=new RegExp(rk),BJ=new RegExp(`${rk}$`),IJ=new RegExp(rk,"g");function zJ(e){return e.length===1?e[0].isLink:e.length===3&&e[1].isLink?["()","[]"].includes(e[0].value+e[2].value):!1}function qJ(e){return new _t({key:new dn("autolink"),appendTransaction:(t,n,r)=>{const i=t.some(d=>d.docChanged)&&!n.doc.eq(r.doc),s=t.some(d=>d.getMeta("preventAutolink"));if(!i||s)return;const{tr:o}=r,l=VI(n.doc,[...t]);if(XI(l).forEach(({newRange:d})=>{const h=FX(r.doc,d,y=>y.isTextblock);let p,g;if(h.length>1)p=h[0],g=r.doc.textBetween(p.pos,p.pos+p.node.nodeSize,void 0," ");else if(h.length){const y=r.doc.textBetween(d.from,d.to," "," ");if(!BJ.test(y))return;p=h[0],g=r.doc.textBetween(p.pos,d.to,void 0," ")}if(p&&g){const y=g.split(PJ).filter(Boolean);if(y.length<=0)return!1;const x=y[y.length-1],S=p.pos+g.lastIndexOf(x);if(!x)return!1;const w=nk(x).map(E=>E.toObject(e.defaultProtocol));if(!zJ(w))return!1;w.filter(E=>E.isLink).map(E=>({...E,from:S+E.start+1,to:S+E.end+1})).filter(E=>r.schema.marks.code?!r.doc.rangeHasMark(E.from,E.to,r.schema.marks.code):!0).filter(E=>e.validate(E.value)).filter(E=>e.shouldAutoLink(E.value)).forEach(E=>{GE(E.from,E.to,r.doc).some(N=>N.mark.type===e.type)||o.addMark(E.from,E.to,e.type.create({href:E.href}))})}}),!!o.steps.length)return o}})}function VJ(e){return new _t({key:new dn("handleClickLink"),props:{handleClick:(t,n,r)=>{var i,s;if(r.button!==0||!t.editable)return!1;let o=null;if(r.target instanceof HTMLAnchorElement)o=r.target;else{let h=r.target;const p=[];for(;h.nodeName!=="DIV";)p.push(h),h=h.parentNode;o=p.find(g=>g.nodeName==="A")}if(!o)return!1;const l=WI(t.state,e.type.name),u=(i=o?.href)!=null?i:l.href,d=(s=o?.target)!=null?s:l.target;return e.enableClickSelection&&e.editor.commands.extendMarkRange(e.type.name),o&&u?(window.open(u,d),!0):!1}}})}function HJ(e){return new _t({key:new dn("handlePasteLink"),props:{handlePaste:(t,n,r)=>{const{state:i}=t,{selection:s}=i,{empty:o}=s;if(o)return!1;let l="";r.content.forEach(d=>{l+=d.textContent});const u=A6(l,{defaultProtocol:e.defaultProtocol}).find(d=>d.isLink&&d.value===l);return!l||!u?!1:e.editor.commands.setMark(e.type,{href:u.href})}}})}function Po(e,t){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return t&&t.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&n.push(i)}),!e||e.replace(IJ,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var M6=xa.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(e=>{if(typeof e=="string"){ED(e);return}ED(e.scheme,e.optionalSlashes)})},onDestroy(){jJ()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(e,t)=>!!Po(e,t.protocols),validate:e=>!!e,shouldAutoLink:e=>!!e}},addAttributes(){return{href:{default:null,parseHTML(e){return e.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:e=>{const t=e.getAttribute("href");return!t||!this.options.isAllowedUri(t,{defaultValidate:n=>!!Po(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:e}){return this.options.isAllowedUri(e.href,{defaultValidate:t=>!!Po(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",$t(this.options.HTMLAttributes,e),0]:["a",$t(this.options.HTMLAttributes,{...e,href:""}),0]},addCommands(){return{setLink:e=>({chain:t})=>{const{href:n}=e;return this.options.isAllowedUri(n,{defaultValidate:r=>!!Po(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?t().setMark(this.name,e).setMeta("preventAutolink",!0).run():!1},toggleLink:e=>({chain:t})=>{const{href:n}=e||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!Po(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:t().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[ca({find:e=>{const t=[];if(e){const{protocols:n,defaultProtocol:r}=this.options,i=A6(e).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:o=>!!Po(o,n),protocols:n,defaultProtocol:r}));i.length&&i.forEach(s=>t.push({text:s.value,data:{href:s.href},index:s.start}))}return t},type:this.type,getAttributes:e=>{var t;return{href:(t=e.data)==null?void 0:t.href}}})]},addProseMirrorPlugins(){const e=[],{protocols:t,defaultProtocol:n}=this.options;return this.options.autolink&&e.push(qJ({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!Po(i,t),protocols:t,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&e.push(VJ({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&e.push(HJ({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),e}}),FJ=M6,UJ=Object.defineProperty,$J=(e,t)=>{for(var n in t)UJ(e,n,{get:t[n],enumerable:!0})},GJ="listItem",kD="textStyle",TD=/^\s*([-+*])\s$/,ik=ur.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:e}){return["ul",$t(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(GJ,this.editor.getAttributes(kD)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=Bl({find:TD,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=Bl({find:TD,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(kD),editor:this.editor})),[e]}}),sk=ur.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",$t(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),KJ={};$J(KJ,{findListItemPos:()=>wd,getNextListDepth:()=>ok,handleBackspace:()=>CC,handleDelete:()=>EC,hasListBefore:()=>_6,hasListItemAfter:()=>YJ,hasListItemBefore:()=>D6,listItemHasSubList:()=>R6,nextListIsDeeper:()=>O6,nextListIsHigher:()=>j6});var wd=(e,t)=>{const{$from:n}=t.selection,r=Gt(e,t.schema);let i=null,s=n.depth,o=n.pos,l=null;for(;s>0&&l===null;)i=n.node(s),i.type===r?l=s:(s-=1,o-=1);return l===null?null:{$pos:t.doc.resolve(o),depth:l}},ok=(e,t)=>{const n=wd(e,t);if(!n)return!1;const[,r]=JX(t,e,n.$pos.pos+4);return r},_6=(e,t,n)=>{const{$anchor:r}=e.selection,i=Math.max(0,r.pos-2),s=e.doc.resolve(i).node();return!(!s||!n.includes(s.type.name))},D6=(e,t)=>{var n;const{$anchor:r}=t.selection,i=t.doc.resolve(r.pos-2);return!(i.index()===0||((n=i.nodeBefore)==null?void 0:n.type.name)!==e)},R6=(e,t,n)=>{if(!n)return!1;const r=Gt(e,t.schema);let i=!1;return n.descendants(s=>{s.type===r&&(i=!0)}),i},CC=(e,t,n)=>{if(e.commands.undoInputRule())return!0;if(e.state.selection.from!==e.state.selection.to)return!1;if(!ro(e.state,t)&&_6(e.state,t,n)){const{$anchor:l}=e.state.selection,u=e.state.doc.resolve(l.before()-1),d=[];u.node().descendants((g,y)=>{g.type.name===t&&d.push({node:g,pos:y})});const h=d.at(-1);if(!h)return!1;const p=e.state.doc.resolve(u.start()+h.pos+1);return e.chain().cut({from:l.start()-1,to:l.end()+1},p.end()).joinForward().run()}if(!ro(e.state,t)||!rZ(e.state))return!1;const r=wd(t,e.state);if(!r)return!1;const s=e.state.doc.resolve(r.$pos.pos-2).node(r.depth),o=R6(t,e.state,s);return D6(t,e.state)&&!o?e.commands.joinItemBackward():e.chain().liftListItem(t).run()},O6=(e,t)=>{const n=ok(e,t),r=wd(e,t);return!r||!n?!1:n>r.depth},j6=(e,t)=>{const n=ok(e,t),r=wd(e,t);return!r||!n?!1:n<r.depth},EC=(e,t)=>{if(!ro(e.state,t)||!nZ(e.state,t))return!1;const{selection:n}=e.state,{$from:r,$to:i}=n;return!n.empty&&r.sameParent(i)?!1:O6(t,e.state)?e.chain().focus(e.state.selection.from+4).lift(t).joinBackward().run():j6(t,e.state)?e.chain().joinForward().joinBackward().run():e.commands.joinItemForward()},YJ=(e,t)=>{var n;const{$anchor:r}=t.selection,i=t.doc.resolve(r.pos-r.parentOffset-2);return!(i.index()===i.parent.childCount-1||((n=i.nodeAfter)==null?void 0:n.type.name)!==e)},L6=Lt.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&EC(e,n)&&(t=!0)}),t},"Mod-Delete":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&EC(e,n)&&(t=!0)}),t},Backspace:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{e.state.schema.nodes[n]!==void 0&&CC(e,n,r)&&(t=!0)}),t},"Mod-Backspace":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{e.state.schema.nodes[n]!==void 0&&CC(e,n,r)&&(t=!0)}),t}}}}),WJ="listItem",ND="textStyle",AD=/^(\d+)\.\s$/,ak=ur.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1},type:{default:null,parseHTML:e=>e.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:e}){const{start:t,...n}=e;return t===1?["ol",$t(this.options.HTMLAttributes,n),0]:["ol",$t(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(WJ,this.editor.getAttributes(ND)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=Bl({find:AD,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=Bl({find:AD,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:t=>({start:+t[1],...this.editor.getAttributes(ND)}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1],editor:this.editor})),[e]}}),XJ=/^\s*(\[([( |x])?\])\s$/,ZJ=ur.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:e=>{const t=e.getAttribute("data-checked");return t===""||t==="true"},renderHTML:e=>({"data-checked":e.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:e,HTMLAttributes:t}){return["li",$t(this.options.HTMLAttributes,t,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:e.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const e={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...e,Tab:()=>this.editor.commands.sinkListItem(this.name)}:e},addNodeView(){return({node:e,HTMLAttributes:t,getPos:n,editor:r})=>{const i=document.createElement("li"),s=document.createElement("label"),o=document.createElement("span"),l=document.createElement("input"),u=document.createElement("div"),d=h=>{var p,g;l.ariaLabel=((g=(p=this.options.a11y)==null?void 0:p.checkboxLabel)==null?void 0:g.call(p,h,l.checked))||`Task item checkbox for ${h.textContent||"empty task item"}`};return d(e),s.contentEditable="false",l.type="checkbox",l.addEventListener("mousedown",h=>h.preventDefault()),l.addEventListener("change",h=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){l.checked=!l.checked;return}const{checked:p}=h.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:g})=>{const y=n();if(typeof y!="number")return!1;const x=g.doc.nodeAt(y);return g.setNodeMarkup(y,void 0,{...x?.attrs,checked:p}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(e,p)||(l.checked=!l.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([h,p])=>{i.setAttribute(h,p)}),i.dataset.checked=e.attrs.checked,l.checked=e.attrs.checked,s.append(l,o),i.append(s,u),Object.entries(t).forEach(([h,p])=>{i.setAttribute(h,p)}),{dom:i,contentDOM:u,update:h=>h.type!==this.type?!1:(i.dataset.checked=h.attrs.checked,l.checked=h.attrs.checked,d(h),!0)}}},addInputRules(){return[Bl({find:XJ,type:this.type,getAttributes:e=>({checked:e[e.length-1]==="x"})})]}}),QJ=ur.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:e}){return["ul",$t(this.options.HTMLAttributes,e,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});Lt.create({name:"listKit",addExtensions(){const e=[];return this.options.bulletList!==!1&&e.push(ik.configure(this.options.bulletList)),this.options.listItem!==!1&&e.push(sk.configure(this.options.listItem)),this.options.listKeymap!==!1&&e.push(L6.configure(this.options.listKeymap)),this.options.orderedList!==!1&&e.push(ak.configure(this.options.orderedList)),this.options.taskItem!==!1&&e.push(ZJ.configure(this.options.taskItem)),this.options.taskList!==!1&&e.push(QJ.configure(this.options.taskList)),e}});var JJ=ur.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:e}){return["p",$t(this.options.HTMLAttributes,e),0]},addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),eee=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,tee=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,nee=xa.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["s",$t(this.options.HTMLAttributes,e),0]},addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[Pl({find:eee,type:this.type})]},addPasteRules(){return[ca({find:tee,type:this.type})]}}),ree=ur.create({name:"text",group:"inline"}),P6=xa.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["u",$t(this.options.HTMLAttributes,e),0]},addCommands(){return{setUnderline:()=>({commands:e})=>e.setMark(this.name),toggleUnderline:()=>({commands:e})=>e.toggleMark(this.name),unsetUnderline:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),iee=P6;function see(e={}){return new _t({view(t){return new oee(t,e)}})}class oee{constructor(t,n){var r;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return t.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:t,handler:n})=>this.editorView.dom.removeEventListener(t,n))}update(t,n){this.cursorPos!=null&&n.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent,r,i=this.editorView.dom,s=i.getBoundingClientRect(),o=s.width/i.offsetWidth,l=s.height/i.offsetHeight;if(n){let p=t.nodeBefore,g=t.nodeAfter;if(p||g){let y=this.editorView.nodeDOM(this.cursorPos-(p?p.nodeSize:0));if(y){let x=y.getBoundingClientRect(),S=p?x.bottom:x.top;p&&g&&(S=(S+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let w=this.width/2*l;r={left:x.left,right:x.right,top:S-w,bottom:S+w}}}}if(!r){let p=this.editorView.coordsAtPos(this.cursorPos),g=this.width/2*o;r={left:p.left-g,right:p.left+g,top:p.top,bottom:p.bottom}}let u=this.editorView.dom.offsetParent;this.element||(this.element=u.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let d,h;if(!u||u==document.body&&getComputedStyle(u).position=="static")d=-pageXOffset,h=-pageYOffset;else{let p=u.getBoundingClientRect(),g=p.width/u.offsetWidth,y=p.height/u.offsetHeight;d=p.left-u.scrollLeft*g,h=p.top-u.scrollTop*y}this.element.style.left=(r.left-d)/o+"px",this.element.style.top=(r.top-h)/l+"px",this.element.style.width=(r.right-r.left)/o+"px",this.element.style.height=(r.bottom-r.top)/l+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,t):i;if(n&&!s){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=zB(this.editorView.state.doc,o,this.editorView.dragging.slice);l!=null&&(o=l)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}}class Mt extends Ue{constructor(t){super(t,t)}map(t,n){let r=t.resolve(n.map(this.head));return Mt.valid(r)?new Mt(r):Ue.near(r)}content(){return be.empty}eq(t){return t instanceof Mt&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new Mt(t.resolve(n.pos))}getBookmark(){return new lk(this.anchor)}static valid(t){let n=t.parent;if(n.isTextblock||!aee(t)||!lee(t))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(t.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(t,n,r=!1){e:for(;;){if(!r&&Mt.valid(t))return t;let i=t.pos,s=null;for(let o=t.depth;;o--){let l=t.node(o);if(n>0?t.indexAfter(o)<l.childCount:t.index(o)>0){s=l.child(n>0?t.indexAfter(o):t.index(o)-1);break}else if(o==0)return null;i+=n;let u=t.doc.resolve(i);if(Mt.valid(u))return u}for(;;){let o=n>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!Re.isSelectable(s)){t=t.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=o,i+=n;let l=t.doc.resolve(i);if(Mt.valid(l))return l}return null}}}Mt.prototype.visible=!1;Mt.findFrom=Mt.findGapCursorFrom;Ue.jsonID("gapcursor",Mt);class lk{constructor(t){this.pos=t}map(t){return new lk(t.map(this.pos))}resolve(t){let n=t.resolve(this.pos);return Mt.valid(n)?new Mt(n):Ue.near(n)}}function aee(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function lee(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function cee(){return new _t({props:{decorations:hee,createSelectionBetween(e,t,n){return t.pos==n.pos&&Mt.valid(n)?new Mt(n):null},handleClick:dee,handleKeyDown:uee,handleDOMEvents:{beforeinput:fee}}})}const uee=NI({ArrowLeft:rh("horiz",-1),ArrowRight:rh("horiz",1),ArrowUp:rh("vert",-1),ArrowDown:rh("vert",1)});function rh(e,t){const n=e=="vert"?t>0?"down":"up":t>0?"right":"left";return function(r,i,s){let o=r.selection,l=t>0?o.$to:o.$from,u=o.empty;if(o instanceof Ve){if(!s.endOfTextblock(n)||l.depth==0)return!1;u=!1,l=r.doc.resolve(t>0?l.after():l.before())}let d=Mt.findGapCursorFrom(l,t,u);return d?(i&&i(r.tr.setSelection(new Mt(d))),!0):!1}}function dee(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!Mt.valid(r))return!1;let i=e.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&Re.isSelectable(e.state.doc.nodeAt(i.inside))?!1:(e.dispatch(e.state.tr.setSelection(new Mt(r))),!0)}function fee(e,t){if(t.inputType!="insertCompositionText"||!(e.state.selection instanceof Mt))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let i=pe.empty;for(let o=r.length-1;o>=0;o--)i=pe.from(r[o].createAndFill(null,i));let s=e.state.tr.replace(n.pos,n.pos,new be(i,0,0));return s.setSelection(Ve.near(s.doc.resolve(n.pos+1))),e.dispatch(s),!1}function hee(e){if(!(e.selection instanceof Mt))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",wt.create(e.doc,[Mn.widget(e.selection.head,t,{key:"gapcursor"})])}var kp=200,un=function(){};un.prototype.append=function(t){return t.length?(t=un.from(t),!this.length&&t||t.length<kp&&this.leafAppend(t)||this.length<kp&&t.leafPrepend(this)||this.appendInner(t)):this};un.prototype.prepend=function(t){return t.length?un.from(t).append(this):this};un.prototype.appendInner=function(t){return new pee(this,t)};un.prototype.slice=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=this.length),t>=n?un.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,n))};un.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};un.prototype.forEach=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(t,n,r,0):this.forEachInvertedInner(t,n,r,0)};un.prototype.map=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(t(s,o))},n,r),i};un.from=function(t){return t instanceof un?t:t&&t.length?new B6(t):un.empty};var B6=(function(e){function t(r){e.call(this),this.values=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new t(this.values.slice(i,s))},t.prototype.getInner=function(i){return this.values[i]},t.prototype.forEachInner=function(i,s,o,l){for(var u=s;u<o;u++)if(i(this.values[u],l+u)===!1)return!1},t.prototype.forEachInvertedInner=function(i,s,o,l){for(var u=s-1;u>=o;u--)if(i(this.values[u],l+u)===!1)return!1},t.prototype.leafAppend=function(i){if(this.length+i.length<=kp)return new t(this.values.concat(i.flatten()))},t.prototype.leafPrepend=function(i){if(this.length+i.length<=kp)return new t(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t})(un);un.empty=new B6([]);var pee=(function(e){function t(n,r){e.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},t.prototype.forEachInner=function(r,i,s,o){var l=this.left.length;if(i<l&&this.left.forEachInner(r,i,Math.min(s,l),o)===!1||s>l&&this.right.forEachInner(r,Math.max(i-l,0),Math.min(this.length,s)-l,o+l)===!1)return!1},t.prototype.forEachInvertedInner=function(r,i,s,o){var l=this.left.length;if(i>l&&this.right.forEachInvertedInner(r,i-l,Math.max(s,l)-l,o+l)===!1||s<l&&this.left.forEachInvertedInner(r,Math.min(i,l),s,o)===!1)return!1},t.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},t.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new t(this.left,i)},t.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new t(i,this.right)},t.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new t(this.left,new t(this.right,r)):new t(this,r)},t})(un);const mee=500;class Hr{constructor(t,n){this.items=t,this.eventCount=n}popEvent(t,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=t.tr,l,u,d=[],h=[];return this.items.forEach((p,g)=>{if(!p.step){i||(i=this.remapping(r,g+1),s=i.maps.length),s--,h.push(p);return}if(i){h.push(new di(p.map));let y=p.step.map(i.slice(s)),x;y&&o.maybeStep(y).doc&&(x=o.mapping.maps[o.mapping.maps.length-1],d.push(new di(x,void 0,void 0,d.length+h.length))),s--,x&&i.appendMap(x,s)}else o.maybeStep(p.step);if(p.selection)return l=i?p.selection.map(i.slice(s)):p.selection,u=new Hr(this.items.slice(0,r).append(h.reverse().concat(d)),this.eventCount-1),!1},this.items.length,0),{remaining:u,transform:o,selection:l}}addTransform(t,n,r,i){let s=[],o=this.eventCount,l=this.items,u=!i&&l.length?l.get(l.length-1):null;for(let h=0;h<t.steps.length;h++){let p=t.steps[h].invert(t.docs[h]),g=new di(t.mapping.maps[h],p,n),y;(y=u&&u.merge(g))&&(g=y,h?s.pop():l=l.slice(0,l.length-1)),s.push(g),n&&(o++,n=void 0),i||(u=g)}let d=o-r.depth;return d>yee&&(l=gee(l,d),o-=d),new Hr(l.append(s),o)}remapping(t,n){let r=new Fu;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=t?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},t,n),r}addMaps(t){return this.eventCount==0?this:new Hr(this.items.append(t.map(n=>new di(n))),this.eventCount)}rebased(t,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=t.mapping,o=t.steps.length,l=this.eventCount;this.items.forEach(g=>{g.selection&&l--},i);let u=n;this.items.forEach(g=>{let y=s.getMirror(--u);if(y==null)return;o=Math.min(o,y);let x=s.maps[y];if(g.step){let S=t.steps[y].invert(t.docs[y]),w=g.selection&&g.selection.map(s.slice(u+1,y));w&&l++,r.push(new di(x,S,w))}else r.push(new di(x))},i);let d=[];for(let g=n;g<o;g++)d.push(new di(s.maps[g]));let h=this.items.slice(0,i).append(d).append(r),p=new Hr(h,l);return p.emptyItemCount()>mee&&(p=p.compress(this.items.length-r.length)),p}emptyItemCount(){let t=0;return this.items.forEach(n=>{n.step||t++}),t}compress(t=this.items.length){let n=this.remapping(0,t),r=n.maps.length,i=[],s=0;return this.items.forEach((o,l)=>{if(l>=t)i.push(o),o.selection&&s++;else if(o.step){let u=o.step.map(n.slice(r)),d=u&&u.getMap();if(r--,d&&n.appendMap(d,r),u){let h=o.selection&&o.selection.map(n.slice(r));h&&s++;let p=new di(d.invert(),u,h),g,y=i.length-1;(g=i.length&&i[y].merge(p))?i[y]=g:i.push(p)}}else o.map&&r--},this.items.length,0),new Hr(un.from(i.reverse()),s)}}Hr.empty=new Hr(un.empty,0);function gee(e,t){let n;return e.forEach((r,i)=>{if(r.selection&&t--==0)return n=i,!1}),e.slice(n)}class di{constructor(t,n,r,i){this.map=t,this.step=n,this.selection=r,this.mirrorOffset=i}merge(t){if(this.step&&t.step&&!t.selection){let n=t.step.merge(this.step);if(n)return new di(n.getMap().invert(),n,this.selection)}}}class zs{constructor(t,n,r,i,s){this.done=t,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const yee=20;function vee(e,t,n,r){let i=n.getMeta(na),s;if(i)return i.historyState;n.getMeta(wee)&&(e=new zs(e.done,e.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return e;if(o&&o.getMeta(na))return o.getMeta(na).redo?new zs(e.done.addTransform(n,void 0,r,Sh(t)),e.undone,MD(n.mapping.maps),e.prevTime,e.prevComposition):new zs(e.done,e.undone.addTransform(n,void 0,r,Sh(t)),null,e.prevTime,e.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let l=n.getMeta("composition"),u=e.prevTime==0||!o&&e.prevComposition!=l&&(e.prevTime<(n.time||0)-r.newGroupDelay||!bee(n,e.prevRanges)),d=o?$0(e.prevRanges,n.mapping):MD(n.mapping.maps);return new zs(e.done.addTransform(n,u?t.selection.getBookmark():void 0,r,Sh(t)),Hr.empty,d,n.time,l??e.prevComposition)}else return(s=n.getMeta("rebased"))?new zs(e.done.rebased(n,s),e.undone.rebased(n,s),$0(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new zs(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),$0(e.prevRanges,n.mapping),e.prevTime,e.prevComposition)}function bee(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<t.length;s+=2)r<=t[s+1]&&i>=t[s]&&(n=!0)}),n}function MD(e){let t=[];for(let n=e.length-1;n>=0&&t.length==0;n--)e[n].forEach((r,i,s,o)=>t.push(s,o));return t}function $0(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let i=t.map(e[r],1),s=t.map(e[r+1],-1);i<=s&&n.push(i,s)}return n}function xee(e,t,n){let r=Sh(t),i=na.get(t).spec.config,s=(n?e.undone:e.done).popEvent(t,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),l=(n?e.done:e.undone).addTransform(s.transform,t.selection.getBookmark(),i,r),u=new zs(n?l:s.remaining,n?s.remaining:l,null,0,-1);return s.transform.setSelection(o).setMeta(na,{redo:n,historyState:u})}let G0=!1,_D=null;function Sh(e){let t=e.plugins;if(_D!=t){G0=!1,_D=t;for(let n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){G0=!0;break}}return G0}const na=new dn("history"),wee=new dn("closeHistory");function See(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new _t({key:na,state:{init(){return new zs(Hr.empty,Hr.empty,null,0,-1)},apply(t,n,r){return vee(n,r,t,e)}},config:e,props:{handleDOMEvents:{beforeinput(t,n){let r=n.inputType,i=r=="historyUndo"?z6:r=="historyRedo"?q6:null;return i?(n.preventDefault(),i(t.state,t.dispatch)):!1}}}})}function I6(e,t){return(n,r)=>{let i=na.getState(n);if(!i||(e?i.undone:i.done).eventCount==0)return!1;if(r){let s=xee(i,n,e);s&&r(t?s.scrollIntoView():s)}return!0}}const z6=I6(!1,!0),q6=I6(!0,!0);Lt.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:e=>e.length,wordCounter:e=>e.split(" ").filter(t=>t!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=e=>{const t=e?.node||this.editor.state.doc;if((e?.mode||this.options.mode)==="textSize"){const r=t.textBetween(0,t.content.size,void 0," ");return this.options.textCounter(r)}return t.nodeSize},this.storage.words=e=>{const t=e?.node||this.editor.state.doc,n=t.textBetween(0,t.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let e=!1;return[new _t({key:new dn("characterCount"),appendTransaction:(t,n,r)=>{if(e)return;const i=this.options.limit;if(i==null||i===0){e=!0;return}const s=this.storage.characters({node:r.doc});if(s>i){const o=s-i,l=0,u=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const d=r.tr.deleteRange(l,u);return e=!0,d}e=!0},filterTransaction:(t,n)=>{const r=this.options.limit;if(!t.docChanged||r===0||r===null||r===void 0)return!0;const i=this.storage.characters({node:n.doc}),s=this.storage.characters({node:t.doc});if(s<=r||i>r&&s>r&&s<=i)return!0;if(i>r&&s>r&&s>i||!t.getMeta("paste"))return!1;const l=t.selection.$head.pos,u=s-r,d=l-u,h=l;return t.deleteRange(d,h),!(this.storage.characters({node:t.doc})>r)}})]}});var Cee=Lt.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[see(this.options)]}});Lt.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new _t({key:new dn("focus"),props:{decorations:({doc:e,selection:t})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:i}=t,s=[];if(!n||!r)return wt.create(e,[]);let o=0;this.options.mode==="deepest"&&e.descendants((u,d)=>{if(u.isText)return;if(!(i>=d&&i<=d+u.nodeSize-1))return!1;o+=1});let l=0;return e.descendants((u,d)=>{if(u.isText||!(i>=d&&i<=d+u.nodeSize-1))return!1;if(l+=1,this.options.mode==="deepest"&&o-l>0||this.options.mode==="shallowest"&&l>1)return this.options.mode==="deepest";s.push(Mn.node(d,d+u.nodeSize,{class:this.options.className}))}),wt.create(e,s)}}})]}});var Eee=Lt.create({name:"gapCursor",addProseMirrorPlugins(){return[cee()]},extendNodeSchema(e){var t;const n={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:(t=it(De(e,"allowGapCursor",n)))!=null?t:null}}}),kee=Lt.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new _t({key:new dn("placeholder"),props:{decorations:({doc:e,selection:t})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=t,i=[];if(!n)return null;const s=this.editor.isEmpty;return e.descendants((o,l)=>{const u=r>=l&&r<=l+o.nodeSize,d=!o.isLeaf&&lm(o);if((u||!this.options.showOnlyCurrent)&&d){const h=[this.options.emptyNodeClass];s&&h.push(this.options.emptyEditorClass);const p=Mn.node(l,l+o.nodeSize,{class:h.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:l,hasAnchor:u}):this.options.placeholder});i.push(p)}return this.options.includeChildren}),wt.create(e,i)}}})]}});Lt.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:e,options:t}=this;return[new _t({key:new dn("selection"),props:{decorations(n){return n.selection.empty||e.isFocused||!e.isEditable||QI(n.selection)||e.view.dragging?null:wt.create(n.doc,[Mn.inline(n.selection.from,n.selection.to,{class:t.className})])}}})]}});function DD({types:e,node:t}){return t&&Array.isArray(e)&&e.includes(t.type)||t?.type===e}var Tee=Lt.create({name:"trailingNode",addOptions(){return{node:"paragraph",notAfter:[]}},addProseMirrorPlugins(){const e=new dn(this.name),t=Object.entries(this.editor.schema.nodes).map(([,n])=>n).filter(n=>(this.options.notAfter||[]).concat(this.options.node).includes(n.name));return[new _t({key:e,appendTransaction:(n,r,i)=>{const{doc:s,tr:o,schema:l}=i,u=e.getState(i),d=s.content.size,h=l.nodes[this.options.node];if(u)return o.insert(d,h.create())},state:{init:(n,r)=>{const i=r.tr.doc.lastChild;return!DD({node:i,types:t})},apply:(n,r)=>{if(!n.docChanged)return r;const i=n.doc.lastChild;return!DD({node:i,types:t})}}})]}}),Nee=Lt.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:e,dispatch:t})=>z6(e,t),redo:()=>({state:e,dispatch:t})=>q6(e,t)}},addProseMirrorPlugins(){return[See(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),Aee=Lt.create({name:"starterKit",addExtensions(){var e,t,n,r;const i=[];return this.options.bold!==!1&&i.push(rJ.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(QQ.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(ik.configure(this.options.bulletList)),this.options.code!==!1&&i.push(oJ.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(cJ.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(uJ.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(Cee.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(Eee.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(dJ.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(b6.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(Nee.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(hJ.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(vJ.configure(this.options.italic)),this.options.listItem!==!1&&i.push(sk.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(L6.configure((e=this.options)==null?void 0:e.listKeymap)),this.options.link!==!1&&i.push(M6.configure((t=this.options)==null?void 0:t.link)),this.options.orderedList!==!1&&i.push(ak.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(JJ.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(nee.configure(this.options.strike)),this.options.text!==!1&&i.push(ree.configure(this.options.text)),this.options.underline!==!1&&i.push(P6.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&i.push(Tee.configure((r=this.options)==null?void 0:r.trailingNode)),i}}),Mee=Aee,_ee=Lt.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:e=>{const t=e.style.textAlign;return this.options.alignments.includes(t)?t:this.options.defaultAlignment},renderHTML:e=>e.textAlign?{style:`text-align: ${e.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:e=>({commands:t})=>this.options.alignments.includes(e)?this.options.types.map(n=>t.updateAttributes(n,{textAlign:e})).every(n=>n):!1,unsetTextAlign:()=>({commands:e})=>this.options.types.map(t=>e.resetAttributes(t,"textAlign")).every(t=>t),toggleTextAlign:e=>({editor:t,commands:n})=>this.options.alignments.includes(e)?t.isActive({textAlign:e})?n.unsetTextAlign():n.setTextAlign(e):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),Dee=_ee,Ree=kee,Oee=ik,jee=ak,Lee=sk;const fm=({label:e,id:t,children:n,focused:r,containerClassName:i})=>{const s=`${t}-label`;return v.jsxs(ln.div,{initial:{opacity:0,y:-4,scale:.98},animate:{opacity:1,y:0,scale:1},transition:{type:"spring",stiffness:260,damping:24},className:`flex flex-col gap-1 ${i||""}`,children:[e&&v.jsx(ln.label,{id:s,htmlFor:t,className:"text-xs text-muted",animate:{color:r?"var(--brand)":"var(--muted)"},transition:{duration:.25},children:e}),n]})},hm=()=>{const[e,t]=Pe.useState(!1);return{focused:e,onFocus:()=>t(!0),onBlur:()=>t(!1)}};function Pee(e){return ht({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"},child:[]}]})(e)}function ck(e){return ht({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(e)}function V6(e){return ht({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"},child:[]}]})(e)}function Bee(e){return ht({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"},child:[]}]})(e)}function Iee(e){return ht({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 2H9c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h9c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H9V4h9v12zM3 15v-2h2v2H3zm0-5.5h2v2H3v-2zM10 20h2v2h-2v-2zm-7-1.5v-2h2v2H3zM5 22c-1.1 0-2-.9-2-2h2v2zm3.5 0h-2v-2h2v2zm5 0v-2h2c0 1.1-.9 2-2 2zM5 6v2H3c0-1.1.9-2 2-2z"},child:[]}]})(e)}function zee(e){return ht({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z"},child:[]}]})(e)}function qee(e){return ht({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z"},child:[]}]})(e)}function Vee(e){return ht({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z"},child:[]}]})(e)}function Hee(e){return ht({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z"},child:[]}]})(e)}function Fee(e){return ht({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z"},child:[]}]})(e)}function Uee(e){return ht({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"},child:[]}]})(e)}function $ee(e){return ht({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"},child:[]}]})(e)}function Gee(e){return ht({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"},child:[]}]})(e)}function Kee(e){return ht({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"},child:[]}]})(e)}function Yee(e){return ht({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"},child:[]}]})(e)}function Wee(e){return ht({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"},child:[]}]})(e)}function Xee(e){return ht({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"},child:[]}]})(e)}function Zee(e){return ht({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"},child:[]}]})(e)}const cl=({onClick:e,disabled:t,active:n,title:r,children:i})=>v.jsx("button",{onClick:e,disabled:t,title:r,className:`px-2 py-1 rounded transition-colors ${n?"bg-[var(--brand)] text-white":"hover:bg-[var(--bg-hover)] text-theme"} ${t?"opacity-50 cursor-not-allowed":""}`,children:i}),RD=({editor:e,disabled:t})=>{let n="0";return e.isActive("heading",{level:1})?n="1":e.isActive("heading",{level:2})?n="2":e.isActive("heading",{level:3})&&(n="3"),v.jsxs("select",{title:"Heading level",value:n,onChange:r=>{const i=parseInt(r.target.value,10);i===0?e.chain().focus().setParagraph().run():e.chain().focus().toggleHeading({level:i}).run()},className:"rounded border px-1 py-0.5 bg-[var(--surface)] text-theme",disabled:t,children:[v.jsx("option",{value:"0",children:"P"}),v.jsx("option",{value:"1",children:"H1"}),v.jsx("option",{value:"2",children:"H2"}),v.jsx("option",{value:"3",children:"H3"})]})},Tp=({id:e,label:t,value:n,onChange:r,placeholder:i="Start typing",disabled:s=!1,className:o="",containerClassName:l})=>{const[,u]=O.useState(0),[d,h]=O.useState(!1),{focused:p,onFocus:g,onBlur:y}=hm(),x=()=>u(Date.now()),S=()=>{h(!d)},w=KQ({extensions:[Mee.configure({bulletList:!1,orderedList:!1,listItem:!1}),Oee.configure({HTMLAttributes:{class:"bullet-list"}}),jee.configure({HTMLAttributes:{class:"ordered-list"}}),Lee.configure({HTMLAttributes:{class:"list-item"}}),iee,FJ.configure({openOnClick:!1}),Dee.configure({types:["heading","paragraph"]}),fJ.configure({levels:[1,2,3]}),Ree.configure({placeholder:i})],content:n,editable:!s,onUpdate:({editor:T})=>{r(T.getHTML())},onFocus:g,onBlur:y,onSelectionUpdate:()=>{x()},onTransaction:()=>{x()}});if(O.useEffect(()=>{w&&(n!==w.getHTML()&&w.commands.setContent(n,{emitUpdate:!1}),w.setEditable(!s))},[n,s,w]),O.useEffect(()=>{const T=A=>{A.key==="Escape"&&d&&h(!1)};return d?(document.addEventListener("keydown",T),document.body.style.overflow="hidden"):document.body.style.overflow="",()=>{document.removeEventListener("keydown",T),document.body.style.overflow=""}},[d]),!w)return null;const E=[{key:"bold",title:"Bold",onClick:()=>w.chain().focus().toggleBold().run(),active:w.isActive("bold"),node:v.jsx(Hee,{size:16})},{key:"italic",title:"Italic",onClick:()=>w.chain().focus().toggleItalic().run(),active:w.isActive("italic"),node:v.jsx(Fee,{size:16})},{key:"underline",title:"Underline",onClick:()=>w.chain().focus().toggleUnderline().run(),active:w.isActive("underline"),node:v.jsx(Kee,{size:16})},{key:"strike",title:"Strikethrough",onClick:()=>w.chain().focus().toggleStrike().run(),active:w.isActive("strike"),node:v.jsx(v.Fragment,{children:"S"})},{key:"bulletList",title:"Bullet List",onClick:()=>w.chain().focus().toggleBulletList().run(),active:w.isActive("bulletList"),node:v.jsx(Uee,{size:16})},{key:"orderedList",title:"Numbered List",onClick:()=>w.chain().focus().toggleOrderedList().run(),active:w.isActive("orderedList"),node:v.jsx($ee,{size:16})},{key:"blockquote",title:"Quote",onClick:()=>w.chain().focus().toggleBlockquote().run(),active:w.isActive("blockquote"),node:v.jsx(Gee,{size:16})},{key:"codeBlock",title:"Code Block",onClick:()=>w.chain().focus().toggleCodeBlock().run(),active:w.isActive("codeBlock"),node:v.jsx(Pee,{size:16})}],N=[{key:"align-left",title:"Align Left",onClick:()=>w.chain().focus().setTextAlign("left").run(),active:w.isActive({textAlign:"left"}),node:v.jsx(qee,{size:16})},{key:"align-center",title:"Align Center",onClick:()=>w.chain().focus().setTextAlign("center").run(),active:w.isActive({textAlign:"center"}),node:v.jsx(zee,{size:16})},{key:"align-right",title:"Align Right",onClick:()=>w.chain().focus().setTextAlign("right").run(),active:w.isActive({textAlign:"right"}),node:v.jsx(Vee,{size:16})}],k=[{key:"fullscreen",title:d?"Exit Fullscreen":"Enter Fullscreen",onClick:S,active:d,node:d?v.jsx(Xee,{size:16}):v.jsx(Zee,{size:16})}];return v.jsx("div",{className:d?"fixed inset-0 z-50 bg-[var(--bg)] flex flex-col":"",children:d?v.jsxs(ln.div,{className:"h-full flex flex-col rounded-lg border border-[var(--border)] bg-[var(--surface)] text-theme m-4",animate:{boxShadow:p?"0 0 0 2px var(--brand)":"0 0 0 1px var(--border)"},transition:{type:"spring",stiffness:300,damping:30},children:[v.jsxs("div",{className:"flex flex-wrap items-center gap-1 border-b border-[var(--border)] p-2 text-sm shrink-0",children:[v.jsx("div",{className:"flex items-center gap-2 mr-4",children:t&&v.jsx("span",{className:"font-medium text-theme",children:t})}),v.jsx(RD,{editor:w,disabled:s}),E.map(T=>v.jsx(cl,{onClick:T.onClick,disabled:s,active:T.active,title:T.title,children:T.node},T.key)),N.map(T=>v.jsx(cl,{onClick:T.onClick,disabled:s,active:T.active,title:T.title,children:T.node},T.key)),v.jsx("div",{className:"w-px h-6 bg-[var(--border)] mx-1"}),k.map(T=>v.jsx(cl,{onClick:T.onClick,disabled:s,active:T.active,title:T.title,children:T.node},T.key))]}),v.jsx("div",{className:"flex-1 overflow-hidden",children:v.jsx("div",{className:"h-full overflow-y-auto p-4",children:v.jsx("div",{className:"prose prose-invert max-w-none min-h-full",children:v.jsx(yD,{editor:w,className:"focus:outline-none h-full"})})})})]}):v.jsx(fm,{id:e,label:t,focused:p,containerClassName:l,children:v.jsxs(ln.div,{className:`rounded-lg border border-[var(--border)] bg-[var(--surface)] text-theme ${o} ${s?"opacity-60 cursor-not-allowed":""}`,animate:{boxShadow:p?"0 0 0 2px var(--brand)":"0 0 0 1px var(--border)"},transition:{type:"spring",stiffness:300,damping:30},children:[v.jsxs("div",{className:"flex flex-wrap items-center gap-1 border-b border-[var(--border)] p-1 text-sm",children:[v.jsx(RD,{editor:w,disabled:s}),E.map(T=>v.jsx(cl,{onClick:T.onClick,disabled:s,active:T.active,title:T.title,children:T.node},T.key)),N.map(T=>v.jsx(cl,{onClick:T.onClick,disabled:s,active:T.active,title:T.title,children:T.node},T.key)),v.jsx("div",{className:"w-px h-6 bg-[var(--border)] mx-1"}),k.map(T=>v.jsx(cl,{onClick:T.onClick,disabled:s,active:T.active,title:T.title,children:T.node},T.key))]}),v.jsx("div",{className:"p-3 min-h-[8rem] prose prose-invert max-w-none",children:v.jsx(yD,{editor:w,className:"focus:outline-none"})})]})})})},Qee=()=>{ya();const e=dd(),[t,n]=O.useState(!1),r=O.useRef(0),i=()=>(r.current+=1,`item-${Date.now()}-${r.current}`),[s,o]=O.useState({title:"",description:"",difficulty:"Medium",category:"Web Application",estimatedTime:"30 minutes",requirements:[{id:i(),value:""}],constraints:[{id:i(),value:""}],hints:[{id:i(),value:""}],tags:[{id:i(),value:""}]}),l=(g,y)=>{o(x=>({...x,[g]:y}))},u=(g,y,x)=>{const S=s[g].map(w=>w.id===y?{...w,value:x}:w);o(w=>({...w,[g]:S}))},d=g=>{o(y=>({...y,[g]:[...y[g],{id:i(),value:""}]}))},h=(g,y)=>{const x=s[g].filter(S=>S.id!==y);o(S=>({...S,[g]:x.length>0?x:[{id:i(),value:""}]}))},p=()=>{n(!0);const g={id:`custom-${Date.now()}`,title:s.title,description:s.description,difficulty:s.difficulty,category:s.category,estimated_time:s.estimatedTime,requirements:s.requirements.map(y=>y.value).filter(y=>y.trim()!==""),constraints:s.constraints.map(y=>y.value).filter(y=>y.trim()!==""),hints:s.hints.map(y=>y.value).filter(y=>y.trim()!==""),tags:s.tags.map(y=>y.value).filter(y=>y.trim()!=="")};localStorage.setItem(`custom-problem-${g.id}`,JSON.stringify(g)),setTimeout(()=>{e(`/playground/${g.id}`)},300)};return v.jsxs(v.Fragment,{children:[v.jsx(hd,{title:"Create Custom System Design Problem | Diagrammatic",description:"Create and share custom system design problems with your students or team. Define requirements, constraints, and evaluation criteria for personalized learning experiences.",keywords:"create system design problem, custom architecture challenge, teaching system design, system design assignment creator",url:"https://satya00089.github.io/diagrammatic/#/create-problem"}),v.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[var(--surface)] via-[var(--bg)] to-[var(--surface)] text-theme relative grid-pattern-overlay",children:[v.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] transition-all duration-300 shadow-lg",children:v.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:v.jsxs("div",{className:"flex items-center justify-between h-16",children:[v.jsxs("button",{type:"button",onClick:()=>e("/"),className:"flex items-center space-x-3 group cursor-pointer",children:[v.jsx("img",{src:"./logo.png",alt:"Logo",className:"h-10 transition-transform group-hover:scale-110 duration-300"}),v.jsx("span",{className:"text-xl font-bold text-white",children:"Diagrammatic"})]}),v.jsx("div",{className:"flex items-center gap-4",children:v.jsx(fd,{})})]})})}),v.jsx("div",{className:"pt-16 relative z-10",children:v.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[v.jsxs("div",{className:"text-center mb-12",children:[v.jsx("div",{className:"inline-block mb-4",children:v.jsx("span",{className:"px-4 py-2 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] text-white text-sm font-semibold rounded-full shadow-lg",children:" Custom Problem Creator"})}),v.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Create Custom Problem"}),v.jsx("p",{className:"text-muted text-lg max-w-2xl mx-auto",children:"Define your own system design challenge and start solving"})]}),v.jsx("div",{className:"elevated-card-bg backdrop-blur-md rounded-3xl shadow-2xl p-8 md:p-12",children:v.jsxs("div",{className:"space-y-8",children:[v.jsxs("div",{children:[v.jsxs("label",{htmlFor:"title",className:"text-sm font-bold text-theme mb-3 flex items-center gap-2",children:[v.jsx("span",{className:"text-xl",children:""})," Problem Title *"]}),v.jsx("input",{id:"title",type:"text",value:s.title,onChange:g=>l("title",g.target.value),placeholder:"e.g., Design a URL Shortener",className:"w-full px-5 py-4 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme text-lg transition-all duration-300 hover:border-[var(--brand)]/30"})]}),v.jsx("div",{children:v.jsx(Tp,{id:"description",label:" Description *",value:s.description,onChange:g=>l("description",g),placeholder:"Describe the problem in detail..."})}),v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[v.jsxs("div",{children:[v.jsxs("label",{htmlFor:"difficulty",className:"text-sm font-bold text-theme mb-3 flex items-center gap-2",children:[v.jsx("span",{className:"text-xl",children:""})," Difficulty"]}),v.jsxs("select",{id:"difficulty",value:s.difficulty,onChange:g=>l("difficulty",g.target.value),className:"w-full px-5 py-4 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme cursor-pointer transition-all duration-300 hover:border-[var(--brand)]/30",children:[v.jsx("option",{value:"Easy",children:"Easy"}),v.jsx("option",{value:"Medium",children:"Medium"}),v.jsx("option",{value:"Hard",children:"Hard"})]})]}),v.jsxs("div",{children:[v.jsxs("label",{htmlFor:"category",className:"text-sm font-bold text-theme mb-3 flex items-center gap-2",children:[v.jsx("span",{className:"text-xl",children:""})," Category"]}),v.jsx("input",{id:"category",type:"text",value:s.category,onChange:g=>l("category",g.target.value),placeholder:"e.g., Web Application",className:"w-full px-5 py-4 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"})]}),v.jsxs("div",{children:[v.jsxs("label",{htmlFor:"estimatedTime",className:"text-sm font-bold text-theme mb-3 flex items-center gap-2",children:[v.jsx("span",{className:"text-xl",children:""})," Estimated Time"]}),v.jsx("input",{id:"estimatedTime",type:"text",value:s.estimatedTime,onChange:g=>l("estimatedTime",g.target.value),placeholder:"e.g., 30 minutes",className:"w-full px-5 py-4 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"})]})]}),v.jsxs("div",{className:"rounded-2xl bg-[var(--surface)]/50",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsxs("div",{className:"text-sm font-bold text-theme flex items-center gap-2",children:[v.jsx("span",{className:"text-xl",children:""})," Requirements"]}),v.jsx("button",{type:"button",onClick:()=>d("requirements"),className:"px-4 py-2 text-sm text-white bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-lg hover:shadow-lg transition-all duration-300 cursor-pointer font-semibold",children:"+ Add"})]}),s.requirements.map((g,y)=>v.jsx("div",{className:"mb-4",children:v.jsxs("div",{className:"flex gap-3 items-start",children:[v.jsx("div",{className:"flex-1",children:v.jsx(Tp,{id:`requirement-${g.id}`,label:`Requirement ${y+1}`,value:g.value,onChange:x=>u("requirements",g.id,x),placeholder:"Enter a requirement (supports rich text formatting)"})}),s.requirements.length>1&&v.jsx("button",{type:"button",onClick:()=>h("requirements",g.id),className:"px-4 py-3 text-red-500 hover:bg-red-500/10 rounded-xl transition-colors cursor-pointer font-bold text-lg mt-8",children:""})]})},g.id))]}),v.jsxs("div",{className:"rounded-2xl bg-[var(--surface)]/50",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsxs("div",{className:"text-sm font-bold text-theme flex items-center gap-2",children:[v.jsx("span",{className:"text-xl",children:""})," Constraints"]}),v.jsx("button",{type:"button",onClick:()=>d("constraints"),className:"px-4 py-2 text-sm text-white bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-lg hover:shadow-lg transition-all duration-300 cursor-pointer font-semibold",children:"+ Add"})]}),s.constraints.map(g=>v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsx("input",{type:"text",value:g.value,onChange:y=>u("constraints",g.id,y.target.value),placeholder:"Enter a constraint",className:"flex-1 px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300"}),s.constraints.length>1&&v.jsx("button",{type:"button",onClick:()=>h("constraints",g.id),className:"px-4 py-3 text-red-500 hover:bg-red-500/10 rounded-xl transition-colors cursor-pointer font-bold text-lg",children:""})]},g.id))]}),v.jsxs("div",{className:"rounded-2xl bg-[var(--surface)]/50",children:[v.jsxs("div",{className:"flex items-center justify-between mb-4",children:[v.jsxs("div",{className:"text-sm font-bold text-theme flex items-center gap-2",children:[v.jsx("span",{className:"text-xl",children:""})," Hints (Optional)"]}),v.jsx("button",{type:"button",onClick:()=>d("hints"),className:"px-4 py-2 text-sm text-white bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-lg hover:shadow-lg transition-all duration-300 cursor-pointer font-semibold",children:"+ Add"})]}),s.hints.map(g=>v.jsxs("div",{className:"flex gap-3 mb-3",children:[v.jsx("input",{type:"text",value:g.value,onChange:y=>u("hints",g.id,y.target.value),placeholder:"Enter a helpful hint",className:"flex-1 px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300"}),s.hints.length>1&&v.jsx("button",{type:"button",onClick:()=>h("hints",g.id),className:"px-4 py-3 text-red-500 hover:bg-red-500/10 rounded-xl transition-colors cursor-pointer font-bold text-lg",children:""})]},g.id))]}),v.jsxs("div",{className:"rounded-2xl bg-[var(--surface)]/50",children:[v.jsx("div",{className:"flex items-center justify-between mb-4",children:v.jsxs("div",{className:"text-sm font-bold text-theme flex items-center gap-2",children:[v.jsx("span",{className:"text-xl",children:""})," Tags"]})}),s.tags.some(g=>g.value.trim())&&v.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:s.tags.filter(g=>g.value.trim()).map(g=>v.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] text-white rounded-full text-sm font-semibold shadow-md hover:shadow-lg transition-all duration-300 group",children:[v.jsx("span",{children:g.value}),v.jsx("button",{type:"button",onClick:()=>h("tags",g.id),className:"hover:bg-white/20 rounded-full p-1 transition-colors","aria-label":"Remove tag",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:v.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]},g.id))}),v.jsxs("div",{className:"flex gap-3",children:[v.jsx("input",{type:"text",value:s.tags.at(-1)?.value||"",onChange:g=>u("tags",s.tags.at(-1)?.id||"",g.target.value),onKeyDown:g=>{g.key==="Enter"&&g.currentTarget.value.trim()&&(g.preventDefault(),d("tags"))},placeholder:"Type a tag and press Enter (e.g., caching, scalability)",className:"flex-1 px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"}),v.jsx("button",{type:"button",onClick:()=>{s.tags.at(-1)?.value.trim()&&d("tags")},className:"px-6 py-3 text-white bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-xl hover:shadow-lg transition-all duration-300 cursor-pointer font-semibold",children:"Add"})]})]}),v.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-8 border-t-2 border-[var(--theme)]/10",children:[v.jsx("button",{type:"button",onClick:p,disabled:!s.title||!s.description||t,className:"flex-1 px-8 py-4 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] text-white font-bold rounded-xl hover:shadow-2xl disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 cursor-pointer flex items-center justify-center gap-3 text-lg hover:scale-105",children:t?v.jsxs(v.Fragment,{children:[v.jsx("span",{className:"inline-block w-5 h-5 border-3 border-white border-t-transparent rounded-full animate-spin"})," ","Creating..."]}):v.jsx(v.Fragment,{children:" Create & Start Designing"})}),v.jsx("button",{type:"button",onClick:()=>e("/"),disabled:t,className:"px-8 py-4 elevated-card-bg border-2 border-[var(--theme)]/10 text-theme font-bold rounded-xl hover:border-[var(--brand)]/30 transition-all duration-300 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed hover:scale-105",children:"Cancel"})]})]})})]})})]})]})},Jee=()=>{ya();const e=dd(),[t,n]=O.useState([]),[r,i]=O.useState(!1),[s,o]=O.useState(""),[l,u]=O.useState("updated"),[d,h]=O.useState(!1),[p,g]=O.useState(!1),{user:y,isAuthenticated:x,login:S,signup:w,googleLogin:E,logout:N}=Up();O.useEffect(()=>{x||e("/")},[x,e]),O.useEffect(()=>{(async()=>{if(!x){n([]);return}i(!0);try{const R=await sr.getUserDiagrams();n(R)}catch(R){console.error("Failed to load diagrams:",R)}finally{i(!1)}})()},[x]);const k=_=>{e(`/playground/free?diagramId=${_}`)},T=async(_,R)=>{if(R.stopPropagation(),!!globalThis.confirm("Are you sure you want to delete this diagram?"))try{await sr.deleteDiagram(_),n(D=>D.filter(B=>B.id!==_))}catch(D){console.error("Failed to delete diagram:",D),alert("Failed to delete diagram. Please try again.")}},A=t.filter(_=>{const R=s.toLowerCase();return _.title.toLowerCase().includes(R)||_.description?.toLowerCase().includes(R)||!1}).sort((_,R)=>{switch(l){case"title":return _.title.localeCompare(R.title);case"created":return new Date(R.createdAt).getTime()-new Date(_.createdAt).getTime();case"updated":default:return new Date(R.updatedAt).getTime()-new Date(_.updatedAt).getTime()}});return v.jsxs(v.Fragment,{children:[v.jsx(hd,{title:"My Designs | Diagrammatic",description:"View and manage your saved system design projects",url:"https://satya00089.github.io/diagrammatic/#/diagrams"}),v.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[var(--surface)] via-[var(--bg)] to-[var(--surface)] text-theme relative grid-pattern-overlay",children:[v.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] transition-all duration-300",children:v.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:v.jsxs("div",{className:"flex items-center justify-between h-16",children:[v.jsxs("button",{type:"button",onClick:()=>e("/"),className:"flex items-center space-x-3 group cursor-pointer",children:[v.jsx("img",{src:"./logo.png",alt:"Logo",className:"h-10 transition-transform group-hover:scale-110 duration-300"}),v.jsx("span",{className:"text-xl font-bold text-white",children:"Diagrammatic"})]}),v.jsxs("div",{className:"flex items-center gap-4",children:[x&&v.jsx("button",{type:"button",onClick:()=>e("/problems"),className:"hidden md:block px-4 py-2 text-sm font-medium text-white hover:text-white/80 transition-colors cursor-pointer",children:"Problems"}),v.jsx("div",{className:"hidden md:block text-sm text-white/90",children:r?"Loading...":`${A.length} design${A.length===1?"":"s"}`}),v.jsx("button",{type:"button",onClick:()=>e("/playground/free"),className:"px-4 py-2 bg-white/20 text-white text-sm font-semibold rounded-lg hover:bg-white/30 transition-all cursor-pointer",children:"New Design"}),v.jsx(fd,{}),v.jsx("div",{className:"relative",children:x?v.jsxs(v.Fragment,{children:[v.jsxs("button",{type:"button",onClick:()=>h(!d),className:"flex items-center gap-2 px-3 py-2 rounded-md text-white hover:bg-white/10 transition-colors cursor-pointer",children:[y?.picture?v.jsx("img",{src:y.picture,alt:y.name||"User",className:"w-8 h-8 rounded-full object-cover border-2 border-white/30"}):v.jsx("div",{className:"h-8 w-8 rounded-full bg-white/20 flex items-center justify-center text-sm font-medium",children:y?.name?.[0]?.toUpperCase()||"U"}),v.jsx("span",{className:"hidden sm:inline text-sm",children:y?.name||y?.email}),v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),d&&v.jsx("div",{className:"absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-[var(--elevated)] backdrop-blur-sm ring-1 ring-black/5 border border-[var(--border)]",children:v.jsxs("div",{className:"py-1",children:[v.jsxs("div",{className:"px-4 py-3 border-b border-[var(--border)]",children:[v.jsx("p",{className:"text-sm font-medium text-theme",children:y?.name}),v.jsx("p",{className:"text-sm text-muted truncate",children:y?.email})]}),v.jsx("button",{type:"button",onClick:()=>{h(!1),N()},className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors cursor-pointer",children:"Sign Out"})]})})]}):v.jsx("button",{type:"button",onClick:()=>g(!0),className:"px-4 py-2 bg-white/20 text-white text-sm font-medium rounded-md hover:bg-white/30 transition-all cursor-pointer",children:"Sign In"})})]})]})})}),v.jsx("div",{className:"pt-16 relative z-10",children:v.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[v.jsxs("div",{className:"text-center mb-12",children:[v.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"My Designs"}),v.jsx("p",{className:"text-muted text-lg max-w-2xl mx-auto",children:"View and manage your saved system design projects"})]}),!r&&v.jsxs(v.Fragment,{children:[v.jsx("div",{className:"elevated-card-bg backdrop-blur-md rounded-2xl shadow-lg p-6 mb-8",children:v.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[v.jsxs("div",{children:[v.jsx("label",{htmlFor:"search-input",className:"block text-sm font-semibold text-theme mb-2",children:" Search"}),v.jsx("input",{id:"search-input",type:"text",placeholder:"Search designs...",value:s,onChange:_=>o(_.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"})]}),v.jsxs("div",{children:[v.jsx("label",{htmlFor:"sort-select",className:"block text-sm font-semibold text-theme mb-2",children:" Sort By"}),v.jsxs("select",{id:"sort-select",value:l,onChange:_=>u(_.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme appearance-none cursor-pointer transition-all duration-300 hover:border-[var(--brand)]/30",children:[v.jsx("option",{value:"updated",children:"Last Updated"}),v.jsx("option",{value:"created",children:"Date Created"}),v.jsx("option",{value:"title",children:"Title (A-Z)"})]})]})]})}),r&&v.jsxs("div",{className:"text-center py-20",children:[v.jsx("div",{className:"inline-block w-16 h-16 border-4 border-[var(--brand)] border-t-transparent rounded-full animate-spin mb-4"}),v.jsx("div",{className:"text-theme text-xl mb-2",children:"Loading designs..."}),v.jsx("div",{className:"text-muted text-sm",children:"Please wait while we fetch your designs"})]}),!r&&A.length===0&&v.jsxs("div",{className:"text-center py-20",children:[v.jsx("div",{className:"text-7xl mb-6",children:s?"":""}),v.jsx("div",{className:"text-theme text-2xl font-bold mb-2",children:s?"No designs found":"No designs yet"}),v.jsx("div",{className:"text-muted text-lg mb-6",children:s?"Try adjusting your search terms":"Start creating your first system design project"}),!s&&v.jsx("button",{type:"button",onClick:()=>e("/playground/free"),className:"px-6 py-3 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white font-semibold rounded-xl hover:shadow-lg hover:scale-105 transition-all duration-300 cursor-pointer",children:"Create Your First Design "})]}),!r&&A.length>0&&v.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 pb-12",children:A.map((_,R)=>v.jsxs("div",{className:`group elevated-card-bg backdrop-blur-md rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-500 hover:-translate-y-2 overflow-hidden ${R===0?"delay-0":R===1?"delay-100":R===2?"delay-200":""}`,children:[v.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] rounded-2xl opacity-0 group-hover:opacity-20 blur-xl transition-opacity duration-500"}),v.jsxs("div",{className:"relative p-6",children:[v.jsx("button",{type:"button",onClick:D=>T(_.id,D),className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity p-2 hover:bg-red-500/10 rounded-lg z-10",title:"Delete diagram",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),v.jsxs("div",{className:"cursor-pointer",onClick:()=>k(_.id),children:[v.jsxs("div",{className:"flex items-start justify-between mb-4",children:[v.jsxs("div",{className:"flex-1 pr-8",children:[v.jsx("h3",{className:"text-lg font-bold text-theme group-hover:text-[var(--brand)] transition-colors duration-300 line-clamp-2 mb-1",children:_.title}),_.description&&v.jsx("p",{className:"text-muted text-sm line-clamp-2 leading-relaxed",children:_.description})]}),v.jsx("div",{className:"text-3xl",children:""})]}),v.jsxs("div",{className:"flex items-center justify-between text-sm text-muted mb-4 pb-4 border-b border-[var(--theme)]/10",children:[v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})}),_.nodes.length," node",_.nodes.length===1?"":"s"]}),v.jsxs("span",{className:"flex items-center gap-1",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),_.edges.length," connection",_.edges.length===1?"":"s"]})]}),v.jsxs("div",{className:"flex items-center justify-between text-xs text-muted mb-6",children:[v.jsxs("span",{children:["Updated"," ",new Date(_.updatedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]}),v.jsxs("span",{children:["Created"," ",new Date(_.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]}),v.jsx("button",{type:"button",onClick:D=>{D.stopPropagation(),k(_.id)},className:"w-full px-6 py-3 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white font-semibold rounded-xl hover:shadow-lg hover:scale-105 transition-all duration-300 cursor-pointer group-hover:shadow-xl",children:"Open Design "})]})]})]},_.id))})]})]})})]}),p&&v.jsx(Xp,{isOpen:p,onClose:()=>g(!1),onLogin:async(_,R)=>{await S({email:_,password:R})},onSignup:async(_,R,D)=>{await w({email:_,password:R,name:D})},onGoogleLogin:async _=>{await E(_)}})]})},H6=({id:e,checked:t,onChange:n,label:r,disabled:i=!1,className:s=""})=>v.jsxs("label",{htmlFor:e,className:`inline-flex items-center gap-2 text-sm cursor-pointer select-none ${i?"opacity-60 cursor-not-allowed":""} ${s}`,children:[v.jsxs("span",{className:"relative inline-flex items-center justify-center",children:[v.jsx("input",{id:e,type:"checkbox",checked:t,disabled:i,onChange:o=>n(o.target.checked),className:"peer w-4 h-4 cursor-pointer appearance-none rounded border border-theme bg-[var(--surface)] focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:ring-offset-1 transition-colors disabled:cursor-not-allowed"}),v.jsx(Gp,{children:t&&v.jsx(ln.span,{initial:{scale:0,opacity:0,rotate:-45},animate:{scale:1,opacity:1,rotate:0},exit:{scale:.4,opacity:0,rotate:45},transition:{type:"spring",stiffness:400,damping:30},className:"pointer-events-none absolute w-3 h-3 flex items-center justify-center text-[10px] font-semibold text-white bg-[var(--brand)] rounded-sm shadow-sm",children:""},"check")})]}),r&&v.jsx("span",{className:"text-sm text-theme",children:r})]}),F6=({id:e,label:t,value:n,onChange:r,min:i,max:s,step:o,disabled:l,className:u="",containerClassName:d})=>{const{focused:h,onFocus:p,onBlur:g}=hm();return v.jsx(fm,{id:e,label:t,focused:h,containerClassName:d,children:v.jsx(ln.input,{id:e,type:"number",value:n??"",onChange:y=>r(Number(y.target.value)),onFocus:p,onBlur:g,disabled:l,min:i,max:s,step:o,className:`w-full border p-1 px-2 rounded bg-[var(--surface)] text-theme outline-none ${l?"opacity-60 cursor-not-allowed":""} ${u}`,animate:{boxShadow:h?"0 0 0 2px var(--brand)":"0 0 0 1px var(--border)"},transition:{type:"spring",stiffness:300,damping:30}})})},Ch=({id:e,label:t,value:n,onChange:r,placeholder:i,disabled:s,className:o="",containerClassName:l})=>{const{focused:u,onFocus:d,onBlur:h}=hm();return v.jsx(fm,{id:e,label:t,focused:u,containerClassName:l,children:v.jsx(ln.input,{id:e,type:"text",value:n,placeholder:i,onChange:p=>r(p.target.value),onFocus:d,onBlur:h,disabled:s,className:`w-full border p-1 px-2 rounded bg-[var(--surface)] text-theme outline-none ${s?"opacity-60 cursor-not-allowed":""} ${o}`,animate:{boxShadow:u?"0 0 0 2px var(--brand)":"0 0 0 1px var(--border)"},transition:{type:"spring",stiffness:300,damping:30}})})},U6=({id:e,label:t,value:n,onChange:r,options:i,disabled:s,className:o="",containerClassName:l})=>{const{focused:u,onFocus:d,onBlur:h}=hm(),p=`${e}-label`;return v.jsxs(fm,{id:e,label:t,focused:u,containerClassName:l,children:[!t&&v.jsx("label",{id:p,htmlFor:e,className:"sr-only",children:e}),v.jsx(ln.div,{initial:{opacity:0,y:-4,scale:.98},animate:{opacity:1,y:0,scale:1},transition:{type:"spring",stiffness:260,damping:24},className:"w-full",children:v.jsx("select",{id:e,value:n??"",onChange:g=>r(g.target.value),onFocus:d,onBlur:h,disabled:s,"aria-labelledby":t?p:void 0,"aria-label":t||e,title:t||e,className:`w-full border p-1 px-2 rounded bg-[var(--surface)] text-theme outline-none ${s?"opacity-60 cursor-not-allowed":""} ${o}`,children:i.map(g=>v.jsx("option",{value:g,children:g},g))})})]})};function ete(e,t=50){const[n,r]=O.useState({past:[],present:e,future:[]}),i=O.useRef(!1),s=O.useCallback(d=>{r(h=>{const p=typeof d=="function"?d(h.present):d;if(i.current)return i.current=!1,{...h,present:p};if(JSON.stringify(p)===JSON.stringify(h.present))return h;const g=[...h.past,h.present];return g.length>t&&g.shift(),{past:g,present:p,future:[]}})},[t]),o=O.useCallback(()=>{r(d=>{if(d.past.length===0)return d;const h=d.past[d.past.length-1],p=d.past.slice(0,-1);return i.current=!0,{past:p,present:h,future:[d.present,...d.future]}})},[]),l=O.useCallback(()=>{r(d=>{if(d.future.length===0)return d;const h=d.future[0],p=d.future.slice(1);return i.current=!0,{past:[...d.past,d.present],present:h,future:p}})},[]),u=O.useCallback(()=>{r({past:[],present:n.present,future:[]})},[n.present]);return{state:n.present,setState:s,undo:o,redo:l,canUndo:n.past.length>0,canRedo:n.future.length>0,clearHistory:u}}function Kt(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=Kt(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var tte={value:()=>{}};function pm(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new Eh(n)}function Eh(e){this._=e}function nte(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}Eh.prototype=pm.prototype={constructor:Eh,on:function(e,t){var n=this._,r=nte(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=rte(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=OD(n[i],e.name,t);else if(t==null)for(i in n)n[i]=OD(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new Eh(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function rte(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function OD(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=tte,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var kC="http://www.w3.org/1999/xhtml";const jD={svg:"http://www.w3.org/2000/svg",xhtml:kC,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function mm(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),jD.hasOwnProperty(t)?{space:jD[t],local:e}:e}function ite(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===kC&&t.documentElement.namespaceURI===kC?t.createElement(e):t.createElementNS(n,e)}}function ste(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function $6(e){var t=mm(e);return(t.local?ste:ite)(t)}function ote(){}function uk(e){return e==null?ote:function(){return this.querySelector(e)}}function ate(e){typeof e!="function"&&(e=uk(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,l=r[i]=new Array(o),u,d,h=0;h<o;++h)(u=s[h])&&(d=e.call(u,u.__data__,h,s))&&("__data__"in u&&(d.__data__=u.__data__),l[h]=d);return new cr(r,this._parents)}function lte(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function cte(){return[]}function G6(e){return e==null?cte:function(){return this.querySelectorAll(e)}}function ute(e){return function(){return lte(e.apply(this,arguments))}}function dte(e){typeof e=="function"?e=ute(e):e=G6(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],l=o.length,u,d=0;d<l;++d)(u=o[d])&&(r.push(e.call(u,u.__data__,d,o)),i.push(u));return new cr(r,i)}function K6(e){return function(){return this.matches(e)}}function Y6(e){return function(t){return t.matches(e)}}var fte=Array.prototype.find;function hte(e){return function(){return fte.call(this.children,e)}}function pte(){return this.firstElementChild}function mte(e){return this.select(e==null?pte:hte(typeof e=="function"?e:Y6(e)))}var gte=Array.prototype.filter;function yte(){return Array.from(this.children)}function vte(e){return function(){return gte.call(this.children,e)}}function bte(e){return this.selectAll(e==null?yte:vte(typeof e=="function"?e:Y6(e)))}function xte(e){typeof e!="function"&&(e=K6(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,l=r[i]=[],u,d=0;d<o;++d)(u=s[d])&&e.call(u,u.__data__,d,s)&&l.push(u);return new cr(r,this._parents)}function W6(e){return new Array(e.length)}function wte(){return new cr(this._enter||this._groups.map(W6),this._parents)}function Np(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}Np.prototype={constructor:Np,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Ste(e){return function(){return e}}function Cte(e,t,n,r,i,s){for(var o=0,l,u=t.length,d=s.length;o<d;++o)(l=t[o])?(l.__data__=s[o],r[o]=l):n[o]=new Np(e,s[o]);for(;o<u;++o)(l=t[o])&&(i[o]=l)}function Ete(e,t,n,r,i,s,o){var l,u,d=new Map,h=t.length,p=s.length,g=new Array(h),y;for(l=0;l<h;++l)(u=t[l])&&(g[l]=y=o.call(u,u.__data__,l,t)+"",d.has(y)?i[l]=u:d.set(y,u));for(l=0;l<p;++l)y=o.call(e,s[l],l,s)+"",(u=d.get(y))?(r[l]=u,u.__data__=s[l],d.delete(y)):n[l]=new Np(e,s[l]);for(l=0;l<h;++l)(u=t[l])&&d.get(g[l])===u&&(i[l]=u)}function kte(e){return e.__data__}function Tte(e,t){if(!arguments.length)return Array.from(this,kte);var n=t?Ete:Cte,r=this._parents,i=this._groups;typeof e!="function"&&(e=Ste(e));for(var s=i.length,o=new Array(s),l=new Array(s),u=new Array(s),d=0;d<s;++d){var h=r[d],p=i[d],g=p.length,y=Nte(e.call(h,h&&h.__data__,d,r)),x=y.length,S=l[d]=new Array(x),w=o[d]=new Array(x),E=u[d]=new Array(g);n(h,p,S,w,E,y,t);for(var N=0,k=0,T,A;N<x;++N)if(T=S[N]){for(N>=k&&(k=N+1);!(A=w[k])&&++k<x;);T._next=A||null}}return o=new cr(o,r),o._enter=l,o._exit=u,o}function Nte(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function Ate(){return new cr(this._exit||this._groups.map(W6),this._parents)}function Mte(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function _te(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),l=new Array(i),u=0;u<o;++u)for(var d=n[u],h=r[u],p=d.length,g=l[u]=new Array(p),y,x=0;x<p;++x)(y=d[x]||h[x])&&(g[x]=y);for(;u<i;++u)l[u]=n[u];return new cr(l,this._parents)}function Dte(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function Rte(e){e||(e=Ote);function t(p,g){return p&&g?e(p.__data__,g.__data__):!p-!g}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],l=o.length,u=i[s]=new Array(l),d,h=0;h<l;++h)(d=o[h])&&(u[h]=d);u.sort(t)}return new cr(i,this._parents).order()}function Ote(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function jte(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Lte(){return Array.from(this)}function Pte(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function Bte(){let e=0;for(const t of this)++e;return e}function Ite(){return!this.node()}function zte(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,l;s<o;++s)(l=i[s])&&e.call(l,l.__data__,s,i);return this}function qte(e){return function(){this.removeAttribute(e)}}function Vte(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Hte(e,t){return function(){this.setAttribute(e,t)}}function Fte(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Ute(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function $te(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Gte(e,t){var n=mm(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Vte:qte:typeof t=="function"?n.local?$te:Ute:n.local?Fte:Hte)(n,t))}function X6(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Kte(e){return function(){this.style.removeProperty(e)}}function Yte(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Wte(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Xte(e,t,n){return arguments.length>1?this.each((t==null?Kte:typeof t=="function"?Wte:Yte)(e,t,n??"")):Il(this.node(),e)}function Il(e,t){return e.style.getPropertyValue(t)||X6(e).getComputedStyle(e,null).getPropertyValue(t)}function Zte(e){return function(){delete this[e]}}function Qte(e,t){return function(){this[e]=t}}function Jte(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function ene(e,t){return arguments.length>1?this.each((t==null?Zte:typeof t=="function"?Jte:Qte)(e,t)):this.node()[e]}function Z6(e){return e.trim().split(/^|\s+/)}function dk(e){return e.classList||new Q6(e)}function Q6(e){this._node=e,this._names=Z6(e.getAttribute("class")||"")}Q6.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function J6(e,t){for(var n=dk(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function ez(e,t){for(var n=dk(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function tne(e){return function(){J6(this,e)}}function nne(e){return function(){ez(this,e)}}function rne(e,t){return function(){(t.apply(this,arguments)?J6:ez)(this,e)}}function ine(e,t){var n=Z6(e+"");if(arguments.length<2){for(var r=dk(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?rne:t?tne:nne)(n,t))}function sne(){this.textContent=""}function one(e){return function(){this.textContent=e}}function ane(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function lne(e){return arguments.length?this.each(e==null?sne:(typeof e=="function"?ane:one)(e)):this.node().textContent}function cne(){this.innerHTML=""}function une(e){return function(){this.innerHTML=e}}function dne(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function fne(e){return arguments.length?this.each(e==null?cne:(typeof e=="function"?dne:une)(e)):this.node().innerHTML}function hne(){this.nextSibling&&this.parentNode.appendChild(this)}function pne(){return this.each(hne)}function mne(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function gne(){return this.each(mne)}function yne(e){var t=typeof e=="function"?e:$6(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function vne(){return null}function bne(e,t){var n=typeof e=="function"?e:$6(e),r=t==null?vne:typeof t=="function"?t:uk(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function xne(){var e=this.parentNode;e&&e.removeChild(this)}function wne(){return this.each(xne)}function Sne(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Cne(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Ene(e){return this.select(e?Cne:Sne)}function kne(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Tne(e){return function(t){e.call(this,t,this.__data__)}}function Nne(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Ane(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function Mne(e,t,n){return function(){var r=this.__on,i,s=Tne(t);if(r){for(var o=0,l=r.length;o<l;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function _ne(e,t,n){var r=Nne(e+""),i,s=r.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,d=l.length,h;u<d;++u)for(i=0,h=l[u];i<s;++i)if((o=r[i]).type===h.type&&o.name===h.name)return h.value}return}for(l=t?Mne:Ane,i=0;i<s;++i)this.each(l(r[i],t,n));return this}function tz(e,t,n){var r=X6(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Dne(e,t){return function(){return tz(this,e,t)}}function Rne(e,t){return function(){return tz(this,e,t.apply(this,arguments))}}function One(e,t){return this.each((typeof t=="function"?Rne:Dne)(e,t))}function*jne(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var nz=[null];function cr(e,t){this._groups=e,this._parents=t}function Sd(){return new cr([[document.documentElement]],nz)}function Lne(){return this}cr.prototype=Sd.prototype={constructor:cr,select:ate,selectAll:dte,selectChild:mte,selectChildren:bte,filter:xte,data:Tte,enter:wte,exit:Ate,join:Mte,merge:_te,selection:Lne,order:Dte,sort:Rte,call:jte,nodes:Lte,node:Pte,size:Bte,empty:Ite,each:zte,attr:Gte,style:Xte,property:ene,classed:ine,text:lne,html:fne,raise:pne,lower:gne,append:yne,insert:bne,remove:wne,clone:Ene,datum:kne,on:_ne,dispatch:One,[Symbol.iterator]:jne};function ar(e){return typeof e=="string"?new cr([[document.querySelector(e)]],[document.documentElement]):new cr([[e]],nz)}function Pne(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Vr(e,t){if(e=Pne(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Bne={passive:!1},Qu={capture:!0,passive:!1};function K0(e){e.stopImmediatePropagation()}function Al(e){e.preventDefault(),e.stopImmediatePropagation()}function rz(e){var t=e.document.documentElement,n=ar(e).on("dragstart.drag",Al,Qu);"onselectstart"in t?n.on("selectstart.drag",Al,Qu):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function iz(e,t){var n=e.document.documentElement,r=ar(e).on("dragstart.drag",null);t&&(r.on("click.drag",Al,Qu),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const ih=e=>()=>e;function TC(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:s,x:o,y:l,dx:u,dy:d,dispatch:h}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:h}})}TC.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Ine(e){return!e.ctrlKey&&!e.button}function zne(){return this.parentNode}function qne(e,t){return t??{x:e.x,y:e.y}}function Vne(){return navigator.maxTouchPoints||"ontouchstart"in this}function sz(){var e=Ine,t=zne,n=qne,r=Vne,i={},s=pm("start","drag","end"),o=0,l,u,d,h,p=0;function g(T){T.on("mousedown.drag",y).filter(r).on("touchstart.drag",w).on("touchmove.drag",E,Bne).on("touchend.drag touchcancel.drag",N).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(T,A){if(!(h||!e.call(this,T,A))){var _=k(this,t.call(this,T,A),T,A,"mouse");_&&(ar(T.view).on("mousemove.drag",x,Qu).on("mouseup.drag",S,Qu),rz(T.view),K0(T),d=!1,l=T.clientX,u=T.clientY,_("start",T))}}function x(T){if(Al(T),!d){var A=T.clientX-l,_=T.clientY-u;d=A*A+_*_>p}i.mouse("drag",T)}function S(T){ar(T.view).on("mousemove.drag mouseup.drag",null),iz(T.view,d),Al(T),i.mouse("end",T)}function w(T,A){if(e.call(this,T,A)){var _=T.changedTouches,R=t.call(this,T,A),D=_.length,B,$;for(B=0;B<D;++B)($=k(this,R,T,A,_[B].identifier,_[B]))&&(K0(T),$("start",T,_[B]))}}function E(T){var A=T.changedTouches,_=A.length,R,D;for(R=0;R<_;++R)(D=i[A[R].identifier])&&(Al(T),D("drag",T,A[R]))}function N(T){var A=T.changedTouches,_=A.length,R,D;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),R=0;R<_;++R)(D=i[A[R].identifier])&&(K0(T),D("end",T,A[R]))}function k(T,A,_,R,D,B){var $=s.copy(),z=Vr(B||_,A),V,Y,I;if((I=n.call(T,new TC("beforestart",{sourceEvent:_,target:g,identifier:D,active:o,x:z[0],y:z[1],dx:0,dy:0,dispatch:$}),R))!=null)return V=I.x-z[0]||0,Y=I.y-z[1]||0,function F(L,q,W){var J=z,P;switch(L){case"start":i[D]=F,P=o++;break;case"end":delete i[D],--o;case"drag":z=Vr(W||q,A),P=o;break}$.call(L,T,new TC(L,{sourceEvent:q,subject:I,target:g,identifier:D,active:P,x:z[0]+V,y:z[1]+Y,dx:z[0]-J[0],dy:z[1]-J[1],dispatch:$}),R)}}return g.filter=function(T){return arguments.length?(e=typeof T=="function"?T:ih(!!T),g):e},g.container=function(T){return arguments.length?(t=typeof T=="function"?T:ih(T),g):t},g.subject=function(T){return arguments.length?(n=typeof T=="function"?T:ih(T),g):n},g.touchable=function(T){return arguments.length?(r=typeof T=="function"?T:ih(!!T),g):r},g.on=function(){var T=s.on.apply(s,arguments);return T===s?g:T},g.clickDistance=function(T){return arguments.length?(p=(T=+T)*T,g):Math.sqrt(p)},g}function fk(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function oz(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Cd(){}var Ju=.7,Ap=1/Ju,Ml="\\s*([+-]?\\d+)\\s*",ed="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",yi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Hne=/^#([0-9a-f]{3,8})$/,Fne=new RegExp(`^rgb\\(${Ml},${Ml},${Ml}\\)$`),Une=new RegExp(`^rgb\\(${yi},${yi},${yi}\\)$`),$ne=new RegExp(`^rgba\\(${Ml},${Ml},${Ml},${ed}\\)$`),Gne=new RegExp(`^rgba\\(${yi},${yi},${yi},${ed}\\)$`),Kne=new RegExp(`^hsl\\(${ed},${yi},${yi}\\)$`),Yne=new RegExp(`^hsla\\(${ed},${yi},${yi},${ed}\\)$`),LD={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};fk(Cd,ua,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:PD,formatHex:PD,formatHex8:Wne,formatHsl:Xne,formatRgb:BD,toString:BD});function PD(){return this.rgb().formatHex()}function Wne(){return this.rgb().formatHex8()}function Xne(){return az(this).formatHsl()}function BD(){return this.rgb().formatRgb()}function ua(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Hne.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?ID(t):n===3?new Hn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?sh(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?sh(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Fne.exec(e))?new Hn(t[1],t[2],t[3],1):(t=Une.exec(e))?new Hn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=$ne.exec(e))?sh(t[1],t[2],t[3],t[4]):(t=Gne.exec(e))?sh(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Kne.exec(e))?VD(t[1],t[2]/100,t[3]/100,1):(t=Yne.exec(e))?VD(t[1],t[2]/100,t[3]/100,t[4]):LD.hasOwnProperty(e)?ID(LD[e]):e==="transparent"?new Hn(NaN,NaN,NaN,0):null}function ID(e){return new Hn(e>>16&255,e>>8&255,e&255,1)}function sh(e,t,n,r){return r<=0&&(e=t=n=NaN),new Hn(e,t,n,r)}function Zne(e){return e instanceof Cd||(e=ua(e)),e?(e=e.rgb(),new Hn(e.r,e.g,e.b,e.opacity)):new Hn}function NC(e,t,n,r){return arguments.length===1?Zne(e):new Hn(e,t,n,r??1)}function Hn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}fk(Hn,NC,oz(Cd,{brighter(e){return e=e==null?Ap:Math.pow(Ap,e),new Hn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ju:Math.pow(Ju,e),new Hn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Hn(ra(this.r),ra(this.g),ra(this.b),Mp(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:zD,formatHex:zD,formatHex8:Qne,formatRgb:qD,toString:qD}));function zD(){return`#${Yo(this.r)}${Yo(this.g)}${Yo(this.b)}`}function Qne(){return`#${Yo(this.r)}${Yo(this.g)}${Yo(this.b)}${Yo((isNaN(this.opacity)?1:this.opacity)*255)}`}function qD(){const e=Mp(this.opacity);return`${e===1?"rgb(":"rgba("}${ra(this.r)}, ${ra(this.g)}, ${ra(this.b)}${e===1?")":`, ${e})`}`}function Mp(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ra(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Yo(e){return e=ra(e),(e<16?"0":"")+e.toString(16)}function VD(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Fr(e,t,n,r)}function az(e){if(e instanceof Fr)return new Fr(e.h,e.s,e.l,e.opacity);if(e instanceof Cd||(e=ua(e)),!e)return new Fr;if(e instanceof Fr)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,l=s-i,u=(s+i)/2;return l?(t===s?o=(n-r)/l+(n<r)*6:n===s?o=(r-t)/l+2:o=(t-n)/l+4,l/=u<.5?s+i:2-s-i,o*=60):l=u>0&&u<1?0:o,new Fr(o,l,u,e.opacity)}function Jne(e,t,n,r){return arguments.length===1?az(e):new Fr(e,t,n,r??1)}function Fr(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}fk(Fr,Jne,oz(Cd,{brighter(e){return e=e==null?Ap:Math.pow(Ap,e),new Fr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ju:Math.pow(Ju,e),new Fr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new Hn(Y0(e>=240?e-240:e+120,i,r),Y0(e,i,r),Y0(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Fr(HD(this.h),oh(this.s),oh(this.l),Mp(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Mp(this.opacity);return`${e===1?"hsl(":"hsla("}${HD(this.h)}, ${oh(this.s)*100}%, ${oh(this.l)*100}%${e===1?")":`, ${e})`}`}}));function HD(e){return e=(e||0)%360,e<0?e+360:e}function oh(e){return Math.max(0,Math.min(1,e||0))}function Y0(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const hk=e=>()=>e;function ere(e,t){return function(n){return e+n*t}}function tre(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function nre(e){return(e=+e)==1?lz:function(t,n){return n-t?tre(t,n,e):hk(isNaN(t)?n:t)}}function lz(e,t){var n=t-e;return n?ere(e,n):hk(isNaN(e)?t:e)}const _p=(function e(t){var n=nre(t);function r(i,s){var o=n((i=NC(i)).r,(s=NC(s)).r),l=n(i.g,s.g),u=n(i.b,s.b),d=lz(i.opacity,s.opacity);return function(h){return i.r=o(h),i.g=l(h),i.b=u(h),i.opacity=d(h),i+""}}return r.gamma=e,r})(1);function rre(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function ire(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function sre(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=Du(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(l){for(o=0;o<r;++o)s[o]=i[o](l);return s}}function ore(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function fi(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function are(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=Du(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var AC=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,W0=new RegExp(AC.source,"g");function lre(e){return function(){return e}}function cre(e){return function(t){return e(t)+""}}function cz(e,t){var n=AC.lastIndex=W0.lastIndex=0,r,i,s,o=-1,l=[],u=[];for(e=e+"",t=t+"";(r=AC.exec(e))&&(i=W0.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),l[o]?l[o]+=s:l[++o]=s),(r=r[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,u.push({i:o,x:fi(r,i)})),n=W0.lastIndex;return n<t.length&&(s=t.slice(n),l[o]?l[o]+=s:l[++o]=s),l.length<2?u[0]?cre(u[0].x):lre(t):(t=u.length,function(d){for(var h=0,p;h<t;++h)l[(p=u[h]).i]=p.x(d);return l.join("")})}function Du(e,t){var n=typeof t,r;return t==null||n==="boolean"?hk(t):(n==="number"?fi:n==="string"?(r=ua(t))?(t=r,_p):cz:t instanceof ua?_p:t instanceof Date?ore:ire(t)?rre:Array.isArray(t)?sre:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?are:fi)(e,t)}var FD=180/Math.PI,MC={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function uz(e,t,n,r,i,s){var o,l,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,u/=l),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*FD,skewX:Math.atan(u)*FD,scaleX:o,scaleY:l}}var ah;function ure(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?MC:uz(t.a,t.b,t.c,t.d,t.e,t.f)}function dre(e){return e==null||(ah||(ah=document.createElementNS("http://www.w3.org/2000/svg","g")),ah.setAttribute("transform",e),!(e=ah.transform.baseVal.consolidate()))?MC:(e=e.matrix,uz(e.a,e.b,e.c,e.d,e.e,e.f))}function dz(e,t,n,r){function i(d){return d.length?d.pop()+" ":""}function s(d,h,p,g,y,x){if(d!==p||h!==g){var S=y.push("translate(",null,t,null,n);x.push({i:S-4,x:fi(d,p)},{i:S-2,x:fi(h,g)})}else(p||g)&&y.push("translate("+p+t+g+n)}function o(d,h,p,g){d!==h?(d-h>180?h+=360:h-d>180&&(d+=360),g.push({i:p.push(i(p)+"rotate(",null,r)-2,x:fi(d,h)})):h&&p.push(i(p)+"rotate("+h+r)}function l(d,h,p,g){d!==h?g.push({i:p.push(i(p)+"skewX(",null,r)-2,x:fi(d,h)}):h&&p.push(i(p)+"skewX("+h+r)}function u(d,h,p,g,y,x){if(d!==p||h!==g){var S=y.push(i(y)+"scale(",null,",",null,")");x.push({i:S-4,x:fi(d,p)},{i:S-2,x:fi(h,g)})}else(p!==1||g!==1)&&y.push(i(y)+"scale("+p+","+g+")")}return function(d,h){var p=[],g=[];return d=e(d),h=e(h),s(d.translateX,d.translateY,h.translateX,h.translateY,p,g),o(d.rotate,h.rotate,p,g),l(d.skewX,h.skewX,p,g),u(d.scaleX,d.scaleY,h.scaleX,h.scaleY,p,g),d=h=null,function(y){for(var x=-1,S=g.length,w;++x<S;)p[(w=g[x]).i]=w.x(y);return p.join("")}}}var fre=dz(ure,"px, ","px)","deg)"),hre=dz(dre,", ",")",")"),pre=1e-12;function UD(e){return((e=Math.exp(e))+1/e)/2}function mre(e){return((e=Math.exp(e))-1/e)/2}function gre(e){return((e=Math.exp(2*e))-1)/(e+1)}const kh=(function e(t,n,r){function i(s,o){var l=s[0],u=s[1],d=s[2],h=o[0],p=o[1],g=o[2],y=h-l,x=p-u,S=y*y+x*x,w,E;if(S<pre)E=Math.log(g/d)/t,w=function(R){return[l+R*y,u+R*x,d*Math.exp(t*R*E)]};else{var N=Math.sqrt(S),k=(g*g-d*d+r*S)/(2*d*n*N),T=(g*g-d*d-r*S)/(2*g*n*N),A=Math.log(Math.sqrt(k*k+1)-k),_=Math.log(Math.sqrt(T*T+1)-T);E=(_-A)/t,w=function(R){var D=R*E,B=UD(A),$=d/(n*N)*(B*gre(t*D+A)-mre(A));return[l+$*y,u+$*x,d*B/UD(t*D+A)]}}return w.duration=E*1e3*t/Math.SQRT2,w}return i.rho=function(s){var o=Math.max(.001,+s),l=o*o,u=l*l;return e(o,l,u)},i})(Math.SQRT2,2,4);var zl=0,du=0,nu=0,fz=1e3,Dp,fu,Rp=0,da=0,gm=0,td=typeof performance=="object"&&performance.now?performance:Date,hz=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function pk(){return da||(hz(yre),da=td.now()+gm)}function yre(){da=0}function Op(){this._call=this._time=this._next=null}Op.prototype=pz.prototype={constructor:Op,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?pk():+n)+(t==null?0:+t),!this._next&&fu!==this&&(fu?fu._next=this:Dp=this,fu=this),this._call=e,this._time=n,_C()},stop:function(){this._call&&(this._call=null,this._time=1/0,_C())}};function pz(e,t,n){var r=new Op;return r.restart(e,t,n),r}function vre(){pk(),++zl;for(var e=Dp,t;e;)(t=da-e._time)>=0&&e._call.call(void 0,t),e=e._next;--zl}function $D(){da=(Rp=td.now())+gm,zl=du=0;try{vre()}finally{zl=0,xre(),da=0}}function bre(){var e=td.now(),t=e-Rp;t>fz&&(gm-=t,Rp=e)}function xre(){for(var e,t=Dp,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Dp=n);fu=e,_C(r)}function _C(e){if(!zl){du&&(du=clearTimeout(du));var t=e-da;t>24?(e<1/0&&(du=setTimeout($D,e-td.now()-gm)),nu&&(nu=clearInterval(nu))):(nu||(Rp=td.now(),nu=setInterval(bre,fz)),zl=1,hz($D))}}function GD(e,t,n){var r=new Op;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var wre=pm("start","end","cancel","interrupt"),Sre=[],mz=0,KD=1,DC=2,Th=3,YD=4,RC=5,Nh=6;function ym(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;Cre(e,n,{name:t,index:r,group:i,on:wre,tween:Sre,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:mz})}function mk(e,t){var n=Kr(e,t);if(n.state>mz)throw new Error("too late; already scheduled");return n}function wi(e,t){var n=Kr(e,t);if(n.state>Th)throw new Error("too late; already running");return n}function Kr(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Cre(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=pz(s,0,n.time);function s(d){n.state=KD,n.timer.restart(o,n.delay,n.time),n.delay<=d&&o(d-n.delay)}function o(d){var h,p,g,y;if(n.state!==KD)return u();for(h in r)if(y=r[h],y.name===n.name){if(y.state===Th)return GD(o);y.state===YD?(y.state=Nh,y.timer.stop(),y.on.call("interrupt",e,e.__data__,y.index,y.group),delete r[h]):+h<t&&(y.state=Nh,y.timer.stop(),y.on.call("cancel",e,e.__data__,y.index,y.group),delete r[h])}if(GD(function(){n.state===Th&&(n.state=YD,n.timer.restart(l,n.delay,n.time),l(d))}),n.state=DC,n.on.call("start",e,e.__data__,n.index,n.group),n.state===DC){for(n.state=Th,i=new Array(g=n.tween.length),h=0,p=-1;h<g;++h)(y=n.tween[h].value.call(e,e.__data__,n.index,n.group))&&(i[++p]=y);i.length=p+1}}function l(d){for(var h=d<n.duration?n.ease.call(null,d/n.duration):(n.timer.restart(u),n.state=RC,1),p=-1,g=i.length;++p<g;)i[p].call(e,h);n.state===RC&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=Nh,n.timer.stop(),delete r[t];for(var d in r)return;delete e.__transition}}function Ah(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>DC&&r.state<RC,r.state=Nh,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function Ere(e){return this.each(function(){Ah(this,e)})}function kre(e,t){var n,r;return function(){var i=wi(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,l=r.length;o<l;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Tre(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=wi(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var l={name:t,value:n},u=0,d=i.length;u<d;++u)if(i[u].name===t){i[u]=l;break}u===d&&i.push(l)}s.tween=i}}function Nre(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Kr(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?kre:Tre)(n,e,t))}function gk(e,t,n){var r=e._id;return e.each(function(){var i=wi(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Kr(i,r).value[t]}}function gz(e,t){var n;return(typeof t=="number"?fi:t instanceof ua?_p:(n=ua(t))?(t=n,_p):cz)(e,t)}function Are(e){return function(){this.removeAttribute(e)}}function Mre(e){return function(){this.removeAttributeNS(e.space,e.local)}}function _re(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function Dre(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function Rre(e,t,n){var r,i,s;return function(){var o,l=n(this),u;return l==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=l+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,l)))}}function Ore(e,t,n){var r,i,s;return function(){var o,l=n(this),u;return l==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=l+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,l)))}}function jre(e,t){var n=mm(e),r=n==="transform"?hre:gz;return this.attrTween(e,typeof t=="function"?(n.local?Ore:Rre)(n,r,gk(this,"attr."+e,t)):t==null?(n.local?Mre:Are)(n):(n.local?Dre:_re)(n,r,t))}function Lre(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Pre(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Bre(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Pre(e,s)),n}return i._value=t,i}function Ire(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Lre(e,s)),n}return i._value=t,i}function zre(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=mm(e);return this.tween(n,(r.local?Bre:Ire)(r,t))}function qre(e,t){return function(){mk(this,e).delay=+t.apply(this,arguments)}}function Vre(e,t){return t=+t,function(){mk(this,e).delay=t}}function Hre(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?qre:Vre)(t,e)):Kr(this.node(),t).delay}function Fre(e,t){return function(){wi(this,e).duration=+t.apply(this,arguments)}}function Ure(e,t){return t=+t,function(){wi(this,e).duration=t}}function $re(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Fre:Ure)(t,e)):Kr(this.node(),t).duration}function Gre(e,t){if(typeof t!="function")throw new Error;return function(){wi(this,e).ease=t}}function Kre(e){var t=this._id;return arguments.length?this.each(Gre(t,e)):Kr(this.node(),t).ease}function Yre(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;wi(this,e).ease=n}}function Wre(e){if(typeof e!="function")throw new Error;return this.each(Yre(this._id,e))}function Xre(e){typeof e!="function"&&(e=K6(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,l=r[i]=[],u,d=0;d<o;++d)(u=s[d])&&e.call(u,u.__data__,d,s)&&l.push(u);return new Ji(r,this._parents,this._name,this._id)}function Zre(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),l=0;l<s;++l)for(var u=t[l],d=n[l],h=u.length,p=o[l]=new Array(h),g,y=0;y<h;++y)(g=u[y]||d[y])&&(p[y]=g);for(;l<r;++l)o[l]=t[l];return new Ji(o,this._parents,this._name,this._id)}function Qre(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Jre(e,t,n){var r,i,s=Qre(t)?mk:wi;return function(){var o=s(this,e),l=o.on;l!==r&&(i=(r=l).copy()).on(t,n),o.on=i}}function eie(e,t){var n=this._id;return arguments.length<2?Kr(this.node(),n).on.on(e):this.each(Jre(n,e,t))}function tie(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function nie(){return this.on("end.remove",tie(this._id))}function rie(e){var t=this._name,n=this._id;typeof e!="function"&&(e=uk(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var l=r[o],u=l.length,d=s[o]=new Array(u),h,p,g=0;g<u;++g)(h=l[g])&&(p=e.call(h,h.__data__,g,l))&&("__data__"in h&&(p.__data__=h.__data__),d[g]=p,ym(d[g],t,n,g,d,Kr(h,n)));return new Ji(s,this._parents,t,n)}function iie(e){var t=this._name,n=this._id;typeof e!="function"&&(e=G6(e));for(var r=this._groups,i=r.length,s=[],o=[],l=0;l<i;++l)for(var u=r[l],d=u.length,h,p=0;p<d;++p)if(h=u[p]){for(var g=e.call(h,h.__data__,p,u),y,x=Kr(h,n),S=0,w=g.length;S<w;++S)(y=g[S])&&ym(y,t,n,S,g,x);s.push(g),o.push(h)}return new Ji(s,o,t,n)}var sie=Sd.prototype.constructor;function oie(){return new sie(this._groups,this._parents)}function aie(e,t){var n,r,i;return function(){var s=Il(this,e),o=(this.style.removeProperty(e),Il(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function yz(e){return function(){this.style.removeProperty(e)}}function lie(e,t,n){var r,i=n+"",s;return function(){var o=Il(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function cie(e,t,n){var r,i,s;return function(){var o=Il(this,e),l=n(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(e),Il(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,l))}}function uie(e,t){var n,r,i,s="style."+t,o="end."+s,l;return function(){var u=wi(this,e),d=u.on,h=u.value[s]==null?l||(l=yz(t)):void 0;(d!==n||i!==h)&&(r=(n=d).copy()).on(o,i=h),u.on=r}}function die(e,t,n){var r=(e+="")=="transform"?fre:gz;return t==null?this.styleTween(e,aie(e,r)).on("end.style."+e,yz(e)):typeof t=="function"?this.styleTween(e,cie(e,r,gk(this,"style."+e,t))).each(uie(this._id,e)):this.styleTween(e,lie(e,r,t),n).on("end.style."+e,null)}function fie(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function hie(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&fie(e,o,n)),r}return s._value=t,s}function pie(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,hie(e,t,n??""))}function mie(e){return function(){this.textContent=e}}function gie(e){return function(){var t=e(this);this.textContent=t??""}}function yie(e){return this.tween("text",typeof e=="function"?gie(gk(this,"text",e)):mie(e==null?"":e+""))}function vie(e){return function(t){this.textContent=e.call(this,t)}}function bie(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&vie(i)),t}return r._value=e,r}function xie(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,bie(e))}function wie(){for(var e=this._name,t=this._id,n=vz(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],l=o.length,u,d=0;d<l;++d)if(u=o[d]){var h=Kr(u,t);ym(u,e,n,d,o,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new Ji(r,this._parents,e,n)}function Sie(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var l={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var d=wi(this,r),h=d.on;h!==e&&(t=(e=h).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(u)),d.on=t}),i===0&&s()})}var Cie=0;function Ji(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function vz(){return++Cie}var Fi=Sd.prototype;Ji.prototype={constructor:Ji,select:rie,selectAll:iie,selectChild:Fi.selectChild,selectChildren:Fi.selectChildren,filter:Xre,merge:Zre,selection:oie,transition:wie,call:Fi.call,nodes:Fi.nodes,node:Fi.node,size:Fi.size,empty:Fi.empty,each:Fi.each,on:eie,attr:jre,attrTween:zre,style:die,styleTween:pie,text:yie,textTween:xie,remove:nie,tween:Nre,delay:Hre,duration:$re,ease:Kre,easeVarying:Wre,end:Sie,[Symbol.iterator]:Fi[Symbol.iterator]};function Eie(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var kie={time:null,delay:0,duration:250,ease:Eie};function Tie(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Nie(e){var t,n;e instanceof Ji?(t=e._id,e=e._name):(t=vz(),(n=kie).time=pk(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],l=o.length,u,d=0;d<l;++d)(u=o[d])&&ym(u,e,t,d,o,n||Tie(u,t));return new Ji(r,this._parents,e,t)}Sd.prototype.interrupt=Ere;Sd.prototype.transition=Nie;const lh=e=>()=>e;function Aie(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Ki(e,t,n){this.k=e,this.x=t,this.y=n}Ki.prototype={constructor:Ki,scale:function(e){return e===1?this:new Ki(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Ki(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var vm=new Ki(1,0,0);bz.prototype=Ki.prototype;function bz(e){for(;!e.__zoom;)if(!(e=e.parentNode))return vm;return e.__zoom}function X0(e){e.stopImmediatePropagation()}function ru(e){e.preventDefault(),e.stopImmediatePropagation()}function Mie(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function _ie(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function WD(){return this.__zoom||vm}function Die(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Rie(){return navigator.maxTouchPoints||"ontouchstart"in this}function Oie(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function xz(){var e=Mie,t=_ie,n=Oie,r=Die,i=Rie,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,u=kh,d=pm("start","zoom","end"),h,p,g,y=500,x=150,S=0,w=10;function E(I){I.property("__zoom",WD).on("wheel.zoom",D,{passive:!1}).on("mousedown.zoom",B).on("dblclick.zoom",$).filter(i).on("touchstart.zoom",z).on("touchmove.zoom",V).on("touchend.zoom touchcancel.zoom",Y).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}E.transform=function(I,F,L,q){var W=I.selection?I.selection():I;W.property("__zoom",WD),I!==W?A(I,F,L,q):W.interrupt().each(function(){_(this,arguments).event(q).start().zoom(null,typeof F=="function"?F.apply(this,arguments):F).end()})},E.scaleBy=function(I,F,L,q){E.scaleTo(I,function(){var W=this.__zoom.k,J=typeof F=="function"?F.apply(this,arguments):F;return W*J},L,q)},E.scaleTo=function(I,F,L,q){E.transform(I,function(){var W=t.apply(this,arguments),J=this.__zoom,P=L==null?T(W):typeof L=="function"?L.apply(this,arguments):L,G=J.invert(P),oe=typeof F=="function"?F.apply(this,arguments):F;return n(k(N(J,oe),P,G),W,o)},L,q)},E.translateBy=function(I,F,L,q){E.transform(I,function(){return n(this.__zoom.translate(typeof F=="function"?F.apply(this,arguments):F,typeof L=="function"?L.apply(this,arguments):L),t.apply(this,arguments),o)},null,q)},E.translateTo=function(I,F,L,q,W){E.transform(I,function(){var J=t.apply(this,arguments),P=this.__zoom,G=q==null?T(J):typeof q=="function"?q.apply(this,arguments):q;return n(vm.translate(G[0],G[1]).scale(P.k).translate(typeof F=="function"?-F.apply(this,arguments):-F,typeof L=="function"?-L.apply(this,arguments):-L),J,o)},q,W)};function N(I,F){return F=Math.max(s[0],Math.min(s[1],F)),F===I.k?I:new Ki(F,I.x,I.y)}function k(I,F,L){var q=F[0]-L[0]*I.k,W=F[1]-L[1]*I.k;return q===I.x&&W===I.y?I:new Ki(I.k,q,W)}function T(I){return[(+I[0][0]+ +I[1][0])/2,(+I[0][1]+ +I[1][1])/2]}function A(I,F,L,q){I.on("start.zoom",function(){_(this,arguments).event(q).start()}).on("interrupt.zoom end.zoom",function(){_(this,arguments).event(q).end()}).tween("zoom",function(){var W=this,J=arguments,P=_(W,J).event(q),G=t.apply(W,J),oe=L==null?T(G):typeof L=="function"?L.apply(W,J):L,ce=Math.max(G[1][0]-G[0][0],G[1][1]-G[0][1]),H=W.__zoom,X=typeof F=="function"?F.apply(W,J):F,Q=u(H.invert(oe).concat(ce/H.k),X.invert(oe).concat(ce/X.k));return function(ie){if(ie===1)ie=X;else{var te=Q(ie),ge=ce/te[2];ie=new Ki(ge,oe[0]-te[0]*ge,oe[1]-te[1]*ge)}P.zoom(null,ie)}})}function _(I,F,L){return!L&&I.__zooming||new R(I,F)}function R(I,F){this.that=I,this.args=F,this.active=0,this.sourceEvent=null,this.extent=t.apply(I,F),this.taps=0}R.prototype={event:function(I){return I&&(this.sourceEvent=I),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(I,F){return this.mouse&&I!=="mouse"&&(this.mouse[1]=F.invert(this.mouse[0])),this.touch0&&I!=="touch"&&(this.touch0[1]=F.invert(this.touch0[0])),this.touch1&&I!=="touch"&&(this.touch1[1]=F.invert(this.touch1[0])),this.that.__zoom=F,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(I){var F=ar(this.that).datum();d.call(I,this.that,new Aie(I,{sourceEvent:this.sourceEvent,target:E,transform:this.that.__zoom,dispatch:d}),F)}};function D(I,...F){if(!e.apply(this,arguments))return;var L=_(this,F).event(I),q=this.__zoom,W=Math.max(s[0],Math.min(s[1],q.k*Math.pow(2,r.apply(this,arguments)))),J=Vr(I);if(L.wheel)(L.mouse[0][0]!==J[0]||L.mouse[0][1]!==J[1])&&(L.mouse[1]=q.invert(L.mouse[0]=J)),clearTimeout(L.wheel);else{if(q.k===W)return;L.mouse=[J,q.invert(J)],Ah(this),L.start()}ru(I),L.wheel=setTimeout(P,x),L.zoom("mouse",n(k(N(q,W),L.mouse[0],L.mouse[1]),L.extent,o));function P(){L.wheel=null,L.end()}}function B(I,...F){if(g||!e.apply(this,arguments))return;var L=I.currentTarget,q=_(this,F,!0).event(I),W=ar(I.view).on("mousemove.zoom",oe,!0).on("mouseup.zoom",ce,!0),J=Vr(I,L),P=I.clientX,G=I.clientY;rz(I.view),X0(I),q.mouse=[J,this.__zoom.invert(J)],Ah(this),q.start();function oe(H){if(ru(H),!q.moved){var X=H.clientX-P,Q=H.clientY-G;q.moved=X*X+Q*Q>S}q.event(H).zoom("mouse",n(k(q.that.__zoom,q.mouse[0]=Vr(H,L),q.mouse[1]),q.extent,o))}function ce(H){W.on("mousemove.zoom mouseup.zoom",null),iz(H.view,q.moved),ru(H),q.event(H).end()}}function $(I,...F){if(e.apply(this,arguments)){var L=this.__zoom,q=Vr(I.changedTouches?I.changedTouches[0]:I,this),W=L.invert(q),J=L.k*(I.shiftKey?.5:2),P=n(k(N(L,J),q,W),t.apply(this,F),o);ru(I),l>0?ar(this).transition().duration(l).call(A,P,q,I):ar(this).call(E.transform,P,q,I)}}function z(I,...F){if(e.apply(this,arguments)){var L=I.touches,q=L.length,W=_(this,F,I.changedTouches.length===q).event(I),J,P,G,oe;for(X0(I),P=0;P<q;++P)G=L[P],oe=Vr(G,this),oe=[oe,this.__zoom.invert(oe),G.identifier],W.touch0?!W.touch1&&W.touch0[2]!==oe[2]&&(W.touch1=oe,W.taps=0):(W.touch0=oe,J=!0,W.taps=1+!!h);h&&(h=clearTimeout(h)),J&&(W.taps<2&&(p=oe[0],h=setTimeout(function(){h=null},y)),Ah(this),W.start())}}function V(I,...F){if(this.__zooming){var L=_(this,F).event(I),q=I.changedTouches,W=q.length,J,P,G,oe;for(ru(I),J=0;J<W;++J)P=q[J],G=Vr(P,this),L.touch0&&L.touch0[2]===P.identifier?L.touch0[0]=G:L.touch1&&L.touch1[2]===P.identifier&&(L.touch1[0]=G);if(P=L.that.__zoom,L.touch1){var ce=L.touch0[0],H=L.touch0[1],X=L.touch1[0],Q=L.touch1[1],ie=(ie=X[0]-ce[0])*ie+(ie=X[1]-ce[1])*ie,te=(te=Q[0]-H[0])*te+(te=Q[1]-H[1])*te;P=N(P,Math.sqrt(ie/te)),G=[(ce[0]+X[0])/2,(ce[1]+X[1])/2],oe=[(H[0]+Q[0])/2,(H[1]+Q[1])/2]}else if(L.touch0)G=L.touch0[0],oe=L.touch0[1];else return;L.zoom("touch",n(k(P,G,oe),L.extent,o))}}function Y(I,...F){if(this.__zooming){var L=_(this,F).event(I),q=I.changedTouches,W=q.length,J,P;for(X0(I),g&&clearTimeout(g),g=setTimeout(function(){g=null},y),J=0;J<W;++J)P=q[J],L.touch0&&L.touch0[2]===P.identifier?delete L.touch0:L.touch1&&L.touch1[2]===P.identifier&&delete L.touch1;if(L.touch1&&!L.touch0&&(L.touch0=L.touch1,delete L.touch1),L.touch0)L.touch0[1]=this.__zoom.invert(L.touch0[0]);else if(L.end(),L.taps===2&&(P=Vr(P,this),Math.hypot(p[0]-P[0],p[1]-P[1])<w)){var G=ar(this).on("dblclick.zoom");G&&G.apply(this,arguments)}}}return E.wheelDelta=function(I){return arguments.length?(r=typeof I=="function"?I:lh(+I),E):r},E.filter=function(I){return arguments.length?(e=typeof I=="function"?I:lh(!!I),E):e},E.touchable=function(I){return arguments.length?(i=typeof I=="function"?I:lh(!!I),E):i},E.extent=function(I){return arguments.length?(t=typeof I=="function"?I:lh([[+I[0][0],+I[0][1]],[+I[1][0],+I[1][1]]]),E):t},E.scaleExtent=function(I){return arguments.length?(s[0]=+I[0],s[1]=+I[1],E):[s[0],s[1]]},E.translateExtent=function(I){return arguments.length?(o[0][0]=+I[0][0],o[1][0]=+I[1][0],o[0][1]=+I[0][1],o[1][1]=+I[1][1],E):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},E.constrain=function(I){return arguments.length?(n=I,E):n},E.duration=function(I){return arguments.length?(l=+I,E):l},E.interpolate=function(I){return arguments.length?(u=I,E):u},E.on=function(){var I=d.on.apply(d,arguments);return I===d?E:I},E.clickDistance=function(I){return arguments.length?(S=(I=+I)*I,E):Math.sqrt(S)},E.tapDistance=function(I){return arguments.length?(w=+I,E):w},E}const xi={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},nd=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],wz=["Enter"," ","Escape"],Sz={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var fa;(function(e){e.Strict="strict",e.Loose="loose"})(fa||(fa={}));var ia;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(ia||(ia={}));var rd;(function(e){e.Partial="partial",e.Full="full"})(rd||(rd={}));const Cz={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Hs;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Hs||(Hs={}));var jp;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(jp||(jp={}));var Ne;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Ne||(Ne={}));const XD={[Ne.Left]:Ne.Right,[Ne.Right]:Ne.Left,[Ne.Top]:Ne.Bottom,[Ne.Bottom]:Ne.Top};function Ez(e){return e===null?null:e?"valid":"invalid"}const kz=e=>"id"in e&&"source"in e&&"target"in e,jie=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),yk=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),Ed=(e,t=[0,0])=>{const{width:n,height:r}=ts(e),i=e.origin??t,s=n*i[0],o=r*i[1];return{x:e.position.x-s,y:e.position.y-o}},Tz=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const s=typeof i=="string";let o=!t.nodeLookup&&!s?i:void 0;t.nodeLookup&&(o=s?t.nodeLookup.get(i):yk(i)?i:t.nodeLookup.get(i.id));const l=o?Lp(o,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return bm(r,l)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return xm(n)},kd=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(r=>{if(t.filter===void 0||t.filter(r)){const i=Lp(r);n=bm(n,i)}}),xm(n)},vk=(e,t,[n,r,i]=[0,0,1],s=!1,o=!1)=>{const l={...Nd(t,[n,r,i]),width:t.width/i,height:t.height/i},u=[];for(const d of e.values()){const{measured:h,selectable:p=!0,hidden:g=!1}=d;if(o&&!p||g)continue;const y=h.width??d.width??d.initialWidth??null,x=h.height??d.height??d.initialHeight??null,S=id(l,Vl(d)),w=(y??0)*(x??0),E=s&&S>0;(!d.internals.handleBounds||E||S>=w||d.dragging)&&u.push(d)}return u},Lie=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function Pie(e,t){const n=new Map,r=t?.nodes?new Set(t.nodes.map(i=>i.id)):null;return e.forEach(i=>{i.measured.width&&i.measured.height&&(t?.includeHiddenNodes||!i.hidden)&&(!r||r.has(i.id))&&n.set(i.id,i)}),n}async function Bie({nodes:e,width:t,height:n,panZoom:r,minZoom:i,maxZoom:s},o){if(e.size===0)return Promise.resolve(!0);const l=Pie(e,o),u=kd(l),d=wm(u,t,n,o?.minZoom??i,o?.maxZoom??s,o?.padding??.1);return await r.setViewport(d,{duration:o?.duration,ease:o?.ease,interpolate:o?.interpolate}),Promise.resolve(!0)}function Nz({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:s}){const o=n.get(e),l=o.parentId?n.get(o.parentId):void 0,{x:u,y:d}=l?l.internals.positionAbsolute:{x:0,y:0},h=o.origin??r;let p=o.extent||i;if(o.extent==="parent"&&!o.expandParent)if(!l)s?.("005",xi.error005());else{const y=l.measured.width,x=l.measured.height;y&&x&&(p=[[u,d],[u+y,d+x]])}else l&&Hl(o.extent)&&(p=[[o.extent[0][0]+u,o.extent[0][1]+d],[o.extent[1][0]+u,o.extent[1][1]+d]]);const g=Hl(p)?ha(t,p,o.measured):t;return(o.measured.width===void 0||o.measured.height===void 0)&&s?.("015",xi.error015()),{position:{x:g.x-u+(o.measured.width??0)*h[0],y:g.y-d+(o.measured.height??0)*h[1]},positionAbsolute:g}}async function Iie({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:i}){const s=new Set(e.map(g=>g.id)),o=[];for(const g of n){if(g.deletable===!1)continue;const y=s.has(g.id),x=!y&&g.parentId&&o.find(S=>S.id===g.parentId);(y||x)&&o.push(g)}const l=new Set(t.map(g=>g.id)),u=r.filter(g=>g.deletable!==!1),h=Lie(o,u);for(const g of u)l.has(g.id)&&!h.find(x=>x.id===g.id)&&h.push(g);if(!i)return{edges:h,nodes:o};const p=await i({nodes:o,edges:h});return typeof p=="boolean"?p?{edges:h,nodes:o}:{edges:[],nodes:[]}:p}const ql=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),ha=(e={x:0,y:0},t,n)=>({x:ql(e.x,t[0][0],t[1][0]-(n?.width??0)),y:ql(e.y,t[0][1],t[1][1]-(n?.height??0))});function Az(e,t,n){const{width:r,height:i}=ts(n),{x:s,y:o}=n.internals.positionAbsolute;return ha(e,[[s,o],[s+r,o+i]],t)}const ZD=(e,t,n)=>e<t?ql(Math.abs(e-t),1,t)/t:e>n?-ql(Math.abs(e-n),1,t)/t:0,Mz=(e,t,n=15,r=40)=>{const i=ZD(e.x,r,t.width-r)*n,s=ZD(e.y,r,t.height-r)*n;return[i,s]},bm=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),OC=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),xm=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Vl=(e,t=[0,0])=>{const{x:n,y:r}=yk(e)?e.internals.positionAbsolute:Ed(e,t);return{x:n,y:r,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},Lp=(e,t=[0,0])=>{const{x:n,y:r}=yk(e)?e.internals.positionAbsolute:Ed(e,t);return{x:n,y:r,x2:n+(e.measured?.width??e.width??e.initialWidth??0),y2:r+(e.measured?.height??e.height??e.initialHeight??0)}},_z=(e,t)=>xm(bm(OC(e),OC(t))),id=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},QD=e=>$r(e.width)&&$r(e.height)&&$r(e.x)&&$r(e.y),$r=e=>!isNaN(e)&&isFinite(e),zie=(e,t)=>{},Td=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),Nd=({x:e,y:t},[n,r,i],s=!1,o=[1,1])=>{const l={x:(e-n)/i,y:(t-r)/i};return s?Td(l,o):l},Pp=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r});function ul(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function qie(e,t,n){if(typeof e=="string"||typeof e=="number"){const r=ul(e,n),i=ul(e,t);return{top:r,right:i,bottom:r,left:i,x:i*2,y:r*2}}if(typeof e=="object"){const r=ul(e.top??e.y??0,n),i=ul(e.bottom??e.y??0,n),s=ul(e.left??e.x??0,t),o=ul(e.right??e.x??0,t);return{top:r,right:o,bottom:i,left:s,x:s+o,y:r+i}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function Vie(e,t,n,r,i,s){const{x:o,y:l}=Pp(e,[t,n,r]),{x:u,y:d}=Pp({x:e.x+e.width,y:e.y+e.height},[t,n,r]),h=i-u,p=s-d;return{left:Math.floor(o),top:Math.floor(l),right:Math.floor(h),bottom:Math.floor(p)}}const wm=(e,t,n,r,i,s)=>{const o=qie(s,t,n),l=(t-o.x)/e.width,u=(n-o.y)/e.height,d=Math.min(l,u),h=ql(d,r,i),p=e.x+e.width/2,g=e.y+e.height/2,y=t/2-p*h,x=n/2-g*h,S=Vie(e,y,x,h,t,n),w={left:Math.min(S.left-o.left,0),top:Math.min(S.top-o.top,0),right:Math.min(S.right-o.right,0),bottom:Math.min(S.bottom-o.bottom,0)};return{x:y-w.left+w.right,y:x-w.top+w.bottom,zoom:h}},sd=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function Hl(e){return e!=null&&e!=="parent"}function ts(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function Dz(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function Rz(e,t={width:0,height:0},n,r,i){const s={...e},o=r.get(n);if(o){const l=o.origin||i;s.x+=o.internals.positionAbsolute.x-(t.width??0)*l[0],s.y+=o.internals.positionAbsolute.y-(t.height??0)*l[1]}return s}function JD(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function Hie(){let e,t;return{promise:new Promise((r,i)=>{e=r,t=i}),resolve:e,reject:t}}function Fie(e){return{...Sz,...e||{}}}function Ru(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){const{x:s,y:o}=pi(e),l=Nd({x:s-(i?.left??0),y:o-(i?.top??0)},r),{x:u,y:d}=n?Td(l,t):l;return{xSnapped:u,ySnapped:d,...l}}const bk=e=>({width:e.offsetWidth,height:e.offsetHeight}),Oz=e=>e?.getRootNode?.()||window?.document,Uie=["INPUT","SELECT","TEXTAREA"];function jz(e){const t=e.composedPath?.()?.[0]||e.target;return t?.nodeType!==1?!1:Uie.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const Lz=e=>"clientX"in e,pi=(e,t)=>{const n=Lz(e),r=n?e.clientX:e.touches?.[0].clientX,i=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:i-(t?.top??0)}},eR=(e,t,n,r,i)=>{const s=t.querySelectorAll(`.${e}`);return!s||!s.length?null:Array.from(s).map(o=>{const l=o.getBoundingClientRect();return{id:o.getAttribute("data-handleid"),type:e,nodeId:i,position:o.getAttribute("data-handlepos"),x:(l.left-n.left)/r,y:(l.top-n.top)/r,...bk(o)}})};function Pz({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:s,targetControlX:o,targetControlY:l}){const u=e*.125+i*.375+o*.375+n*.125,d=t*.125+s*.375+l*.375+r*.125,h=Math.abs(u-e),p=Math.abs(d-t);return[u,d,h,p]}function ch(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function tR({pos:e,x1:t,y1:n,x2:r,y2:i,c:s}){switch(e){case Ne.Left:return[t-ch(t-r,s),n];case Ne.Right:return[t+ch(r-t,s),n];case Ne.Top:return[t,n-ch(n-i,s)];case Ne.Bottom:return[t,n+ch(i-n,s)]}}function xk({sourceX:e,sourceY:t,sourcePosition:n=Ne.Bottom,targetX:r,targetY:i,targetPosition:s=Ne.Top,curvature:o=.25}){const[l,u]=tR({pos:n,x1:e,y1:t,x2:r,y2:i,c:o}),[d,h]=tR({pos:s,x1:r,y1:i,x2:e,y2:t,c:o}),[p,g,y,x]=Pz({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:l,sourceControlY:u,targetControlX:d,targetControlY:h});return[`M${e},${t} C${l},${u} ${d},${h} ${r},${i}`,p,g,y,x]}function wk({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,s=n<e?n+i:n-i,o=Math.abs(r-t)/2,l=r<t?r+o:r-o;return[s,l,i,o]}function $ie({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r,elevateOnSelect:i=!1}){if(r!==void 0)return r;const s=i&&n?1e3:0,o=Math.max(e.parentId?e.internals.z:0,t.parentId?t.internals.z:0);return s+o}function Gie({sourceNode:e,targetNode:t,width:n,height:r,transform:i}){const s=bm(Lp(e),Lp(t));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const o={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return id(o,xm(s))>0}const Kie=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,Yie=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),Bz=(e,t)=>{if(!e.source||!e.target)return t;let n;return kz(e)?n={...e}:n={...e,id:Kie(e)},Yie(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function Iz({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,s,o,l]=wk({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,s,o,l]}const nR={[Ne.Left]:{x:-1,y:0},[Ne.Right]:{x:1,y:0},[Ne.Top]:{x:0,y:-1},[Ne.Bottom]:{x:0,y:1}},Wie=({source:e,sourcePosition:t=Ne.Bottom,target:n})=>t===Ne.Left||t===Ne.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},rR=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Xie({source:e,sourcePosition:t=Ne.Bottom,target:n,targetPosition:r=Ne.Top,center:i,offset:s,stepPosition:o}){const l=nR[t],u=nR[r],d={x:e.x+l.x*s,y:e.y+l.y*s},h={x:n.x+u.x*s,y:n.y+u.y*s},p=Wie({source:d,sourcePosition:t,target:h}),g=p.x!==0?"x":"y",y=p[g];let x=[],S,w;const E={x:0,y:0},N={x:0,y:0},[,,k,T]=wk({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(l[g]*u[g]===-1){g==="x"?(S=i.x??d.x+(h.x-d.x)*o,w=i.y??(d.y+h.y)/2):(S=i.x??(d.x+h.x)/2,w=i.y??d.y+(h.y-d.y)*o);const _=[{x:S,y:d.y},{x:S,y:h.y}],R=[{x:d.x,y:w},{x:h.x,y:w}];l[g]===y?x=g==="x"?_:R:x=g==="x"?R:_}else{const _=[{x:d.x,y:h.y}],R=[{x:h.x,y:d.y}];if(g==="x"?x=l.x===y?R:_:x=l.y===y?_:R,t===r){const V=Math.abs(e[g]-n[g]);if(V<=s){const Y=Math.min(s-1,s-V);l[g]===y?E[g]=(d[g]>e[g]?-1:1)*Y:N[g]=(h[g]>n[g]?-1:1)*Y}}if(t!==r){const V=g==="x"?"y":"x",Y=l[g]===u[V],I=d[V]>h[V],F=d[V]<h[V];(l[g]===1&&(!Y&&I||Y&&F)||l[g]!==1&&(!Y&&F||Y&&I))&&(x=g==="x"?_:R)}const D={x:d.x+E.x,y:d.y+E.y},B={x:h.x+N.x,y:h.y+N.y},$=Math.max(Math.abs(D.x-x[0].x),Math.abs(B.x-x[0].x)),z=Math.max(Math.abs(D.y-x[0].y),Math.abs(B.y-x[0].y));$>=z?(S=(D.x+B.x)/2,w=x[0].y):(S=x[0].x,w=(D.y+B.y)/2)}return[[e,{x:d.x+E.x,y:d.y+E.y},...x,{x:h.x+N.x,y:h.y+N.y},n],S,w,k,T]}function Zie(e,t,n,r){const i=Math.min(rR(e,t)/2,rR(t,n)/2,r),{x:s,y:o}=t;if(e.x===s&&s===n.x||e.y===o&&o===n.y)return`L${s} ${o}`;if(e.y===o){const d=e.x<n.x?-1:1,h=e.y<n.y?1:-1;return`L ${s+i*d},${o}Q ${s},${o} ${s},${o+i*h}`}const l=e.x<n.x?1:-1,u=e.y<n.y?-1:1;return`L ${s},${o+i*u}Q ${s},${o} ${s+i*l},${o}`}function jC({sourceX:e,sourceY:t,sourcePosition:n=Ne.Bottom,targetX:r,targetY:i,targetPosition:s=Ne.Top,borderRadius:o=5,centerX:l,centerY:u,offset:d=20,stepPosition:h=.5}){const[p,g,y,x,S]=Xie({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:s,center:{x:l,y:u},offset:d,stepPosition:h});return[p.reduce((E,N,k)=>{let T="";return k>0&&k<p.length-1?T=Zie(p[k-1],N,p[k+1],o):T=`${k===0?"M":"L"}${N.x} ${N.y}`,E+=T,E},""),g,y,x,S]}function iR(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function Qie(e){const{sourceNode:t,targetNode:n}=e;if(!iR(t)||!iR(n))return null;const r=t.internals.handleBounds||sR(t.handles),i=n.internals.handleBounds||sR(n.handles),s=oR(r?.source??[],e.sourceHandle),o=oR(e.connectionMode===fa.Strict?i?.target??[]:(i?.target??[]).concat(i?.source??[]),e.targetHandle);if(!s||!o)return e.onError?.("008",xi.error008(s?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const l=s?.position||Ne.Bottom,u=o?.position||Ne.Top,d=od(t,s,l),h=od(n,o,u);return{sourceX:d.x,sourceY:d.y,targetX:h.x,targetY:h.y,sourcePosition:l,targetPosition:u}}function sR(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function od(e,t,n=Ne.Left,r=!1){const i=(t?.x??0)+e.internals.positionAbsolute.x,s=(t?.y??0)+e.internals.positionAbsolute.y,{width:o,height:l}=t??ts(e);if(r)return{x:i+o/2,y:s+l/2};switch(t?.position??n){case Ne.Top:return{x:i+o/2,y:s};case Ne.Right:return{x:i+o,y:s+l/2};case Ne.Bottom:return{x:i+o/2,y:s+l};case Ne.Left:return{x:i,y:s+l/2}}}function oR(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function LC(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function Jie(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const s=new Set;return e.reduce((o,l)=>([l.markerStart||r,l.markerEnd||i].forEach(u=>{if(u&&typeof u=="object"){const d=LC(u,t);s.has(d)||(o.push({id:d,color:u.color||n,...u}),s.add(d))}}),o),[]).sort((o,l)=>o.id.localeCompare(l.id))}const Sk={nodeOrigin:[0,0],nodeExtent:nd,elevateNodesOnSelect:!0,defaults:{}},ese={...Sk,checkEquality:!0};function Ck(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function tse(e,t,n){const r=Ck(Sk,n);for(const i of e.values())if(i.parentId)Ek(i,e,t,r);else{const s=Ed(i,r.nodeOrigin),o=Hl(i.extent)?i.extent:r.nodeExtent,l=ha(s,o,ts(i));i.internals.positionAbsolute=l}}function PC(e,t,n,r){const i=Ck(ese,r);let s=e.length>0;const o=new Map(t),l=i?.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const u of e){let d=o.get(u.id);if(i.checkEquality&&u===d?.internals.userNode)t.set(u.id,d);else{const h=Ed(u,i.nodeOrigin),p=Hl(u.extent)?u.extent:i.nodeExtent,g=ha(h,p,ts(u));d={...i.defaults,...u,measured:{width:u.measured?.width,height:u.measured?.height},internals:{positionAbsolute:g,handleBounds:u.measured?d?.internals.handleBounds:void 0,z:zz(u,l),userNode:u}},t.set(u.id,d)}(d.measured===void 0||d.measured.width===void 0||d.measured.height===void 0)&&!d.hidden&&(s=!1),u.parentId&&Ek(d,t,n,r)}return s}function nse(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function Ek(e,t,n,r){const{elevateNodesOnSelect:i,nodeOrigin:s,nodeExtent:o}=Ck(Sk,r),l=e.parentId,u=t.get(l);if(!u){console.warn(`Parent node ${l} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}nse(e,n);const d=i?1e3:0,{x:h,y:p,z:g}=rse(e,u,s,o,d),{positionAbsolute:y}=e.internals,x=h!==y.x||p!==y.y;(x||g!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:x?{x:h,y:p}:y,z:g}})}function zz(e,t){return($r(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function rse(e,t,n,r,i){const{x:s,y:o}=t.internals.positionAbsolute,l=ts(e),u=Ed(e,n),d=Hl(e.extent)?ha(u,e.extent,l):u;let h=ha({x:s+d.x,y:o+d.y},r,l);e.extent==="parent"&&(h=Az(h,l,t));const p=zz(e,i),g=t.internals.z??0;return{x:h.x,y:h.y,z:g>=p?g+1:p}}function kk(e,t,n,r=[0,0]){const i=[],s=new Map;for(const o of e){const l=t.get(o.parentId);if(!l)continue;const u=s.get(o.parentId)?.expandedRect??Vl(l),d=_z(u,o.rect);s.set(o.parentId,{expandedRect:d,parent:l})}return s.size>0&&s.forEach(({expandedRect:o,parent:l},u)=>{const d=l.internals.positionAbsolute,h=ts(l),p=l.origin??r,g=o.x<d.x?Math.round(Math.abs(d.x-o.x)):0,y=o.y<d.y?Math.round(Math.abs(d.y-o.y)):0,x=Math.max(h.width,Math.round(o.width)),S=Math.max(h.height,Math.round(o.height)),w=(x-h.width)*p[0],E=(S-h.height)*p[1];(g>0||y>0||w||E)&&(i.push({id:u,type:"position",position:{x:l.position.x-g+w,y:l.position.y-y+E}}),n.get(u)?.forEach(N=>{e.some(k=>k.id===N.id)||i.push({id:N.id,type:"position",position:{x:N.position.x+g,y:N.position.y+y}})})),(h.width<o.width||h.height<o.height||g||y)&&i.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:x+(g?p[0]*g-w:0),height:S+(y?p[1]*y-E:0)}})}),i}function ise(e,t,n,r,i,s){const o=r?.querySelector(".xyflow__viewport");let l=!1;if(!o)return{changes:[],updatedInternals:l};const u=[],d=window.getComputedStyle(o),{m22:h}=new window.DOMMatrixReadOnly(d.transform),p=[];for(const g of e.values()){const y=t.get(g.id);if(!y)continue;if(y.hidden){t.set(y.id,{...y,internals:{...y.internals,handleBounds:void 0}}),l=!0;continue}const x=bk(g.nodeElement),S=y.measured.width!==x.width||y.measured.height!==x.height;if(!!(x.width&&x.height&&(S||!y.internals.handleBounds||g.force))){const E=g.nodeElement.getBoundingClientRect(),N=Hl(y.extent)?y.extent:s;let{positionAbsolute:k}=y.internals;y.parentId&&y.extent==="parent"?k=Az(k,x,t.get(y.parentId)):N&&(k=ha(k,N,x));const T={...y,measured:x,internals:{...y.internals,positionAbsolute:k,handleBounds:{source:eR("source",g.nodeElement,E,h,y.id),target:eR("target",g.nodeElement,E,h,y.id)}}};t.set(y.id,T),y.parentId&&Ek(T,t,n,{nodeOrigin:i}),l=!0,S&&(u.push({id:y.id,type:"dimensions",dimensions:x}),y.expandParent&&y.parentId&&p.push({id:y.id,parentId:y.parentId,rect:Vl(T,i)}))}}if(p.length>0){const g=kk(p,t,n,i);u.push(...g)}return{changes:u,updatedInternals:l}}async function sse({delta:e,panZoom:t,transform:n,translateExtent:r,width:i,height:s}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const o=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[i,s]],r),l=!!o&&(o.x!==n[0]||o.y!==n[1]||o.k!==n[2]);return Promise.resolve(l)}function aR(e,t,n,r,i,s){let o=i;const l=r.get(o)||new Map;r.set(o,l.set(n,t)),o=`${i}-${e}`;const u=r.get(o)||new Map;if(r.set(o,u.set(n,t)),s){o=`${i}-${e}-${s}`;const d=r.get(o)||new Map;r.set(o,d.set(n,t))}}function qz(e,t,n){e.clear(),t.clear();for(const r of n){const{source:i,target:s,sourceHandle:o=null,targetHandle:l=null}=r,u={edgeId:r.id,source:i,target:s,sourceHandle:o,targetHandle:l},d=`${i}-${o}--${s}-${l}`,h=`${s}-${l}--${i}-${o}`;aR("source",u,h,e,i,o),aR("target",u,d,e,s,l),t.set(r.id,r)}}function Vz(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:Vz(n,t):!1}function lR(e,t,n){let r=e;do{if(r?.matches?.(t))return!0;if(r===n)return!1;r=r?.parentElement}while(r);return!1}function ose(e,t,n,r){const i=new Map;for(const[s,o]of e)if((o.selected||o.id===r)&&(!o.parentId||!Vz(o,e))&&(o.draggable||t&&typeof o.draggable>"u")){const l=e.get(s);l&&i.set(s,{id:s,position:l.position||{x:0,y:0},distance:{x:n.x-l.internals.positionAbsolute.x,y:n.y-l.internals.positionAbsolute.y},extent:l.extent,parentId:l.parentId,origin:l.origin,expandParent:l.expandParent,internals:{positionAbsolute:l.internals.positionAbsolute||{x:0,y:0}},measured:{width:l.measured.width??0,height:l.measured.height??0}})}return i}function Z0({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){const i=[];for(const[o,l]of t){const u=n.get(o)?.internals.userNode;u&&i.push({...u,position:l.position,dragging:r})}if(!e)return[i[0],i];const s=n.get(e)?.internals.userNode;return[s?{...s,position:t.get(e)?.position||s.position,dragging:r}:i[0],i]}function ase({dragItems:e,snapGrid:t,x:n,y:r}){const i=e.values().next().value;if(!i)return null;const s={x:n-i.distance.x,y:r-i.distance.y},o=Td(s,t);return{x:o.x-s.x,y:o.y-s.y}}function lse({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:i}){let s={x:null,y:null},o=0,l=new Map,u=!1,d={x:0,y:0},h=null,p=!1,g=null,y=!1,x=!1,S=null;function w({noDragClassName:N,handleSelector:k,domNode:T,isSelectable:A,nodeId:_,nodeClickDistance:R=0}){g=ar(T);function D({x:V,y:Y}){const{nodeLookup:I,nodeExtent:F,snapGrid:L,snapToGrid:q,nodeOrigin:W,onNodeDrag:J,onSelectionDrag:P,onError:G,updateNodePositions:oe}=t();s={x:V,y:Y};let ce=!1;const H=l.size>1,X=H&&F?OC(kd(l)):null,Q=H&&q?ase({dragItems:l,snapGrid:L,x:V,y:Y}):null;for(const[ie,te]of l){if(!I.has(ie))continue;let ge={x:V-te.distance.x,y:Y-te.distance.y};q&&(ge=Q?{x:Math.round(ge.x+Q.x),y:Math.round(ge.y+Q.y)}:Td(ge,L));let xe=null;if(H&&F&&!te.extent&&X){const{positionAbsolute:Te}=te.internals,we=Te.x-X.x+F[0][0],Se=Te.x+te.measured.width-X.x2+F[1][0],Je=Te.y-X.y+F[0][1],ke=Te.y+te.measured.height-X.y2+F[1][1];xe=[[we,Je],[Se,ke]]}const{position:Me,positionAbsolute:Ae}=Nz({nodeId:ie,nextPosition:ge,nodeLookup:I,nodeExtent:xe||F,nodeOrigin:W,onError:G});ce=ce||te.position.x!==Me.x||te.position.y!==Me.y,te.position=Me,te.internals.positionAbsolute=Ae}if(x=x||ce,!!ce&&(oe(l,!0),S&&(r||J||!_&&P))){const[ie,te]=Z0({nodeId:_,dragItems:l,nodeLookup:I});r?.(S,l,ie,te),J?.(S,ie,te),_||P?.(S,te)}}async function B(){if(!h)return;const{transform:V,panBy:Y,autoPanSpeed:I,autoPanOnNodeDrag:F}=t();if(!F){u=!1,cancelAnimationFrame(o);return}const[L,q]=Mz(d,h,I);(L!==0||q!==0)&&(s.x=(s.x??0)-L/V[2],s.y=(s.y??0)-q/V[2],await Y({x:L,y:q})&&D(s)),o=requestAnimationFrame(B)}function $(V){const{nodeLookup:Y,multiSelectionActive:I,nodesDraggable:F,transform:L,snapGrid:q,snapToGrid:W,selectNodesOnDrag:J,onNodeDragStart:P,onSelectionDragStart:G,unselectNodesAndEdges:oe}=t();p=!0,(!J||!A)&&!I&&_&&(Y.get(_)?.selected||oe()),A&&J&&_&&e?.(_);const ce=Ru(V.sourceEvent,{transform:L,snapGrid:q,snapToGrid:W,containerBounds:h});if(s=ce,l=ose(Y,F,ce,_),l.size>0&&(n||P||!_&&G)){const[H,X]=Z0({nodeId:_,dragItems:l,nodeLookup:Y});n?.(V.sourceEvent,l,H,X),P?.(V.sourceEvent,H,X),_||G?.(V.sourceEvent,X)}}const z=sz().clickDistance(R).on("start",V=>{const{domNode:Y,nodeDragThreshold:I,transform:F,snapGrid:L,snapToGrid:q}=t();h=Y?.getBoundingClientRect()||null,y=!1,x=!1,S=V.sourceEvent,I===0&&$(V),s=Ru(V.sourceEvent,{transform:F,snapGrid:L,snapToGrid:q,containerBounds:h}),d=pi(V.sourceEvent,h)}).on("drag",V=>{const{autoPanOnNodeDrag:Y,transform:I,snapGrid:F,snapToGrid:L,nodeDragThreshold:q,nodeLookup:W}=t(),J=Ru(V.sourceEvent,{transform:I,snapGrid:F,snapToGrid:L,containerBounds:h});if(S=V.sourceEvent,(V.sourceEvent.type==="touchmove"&&V.sourceEvent.touches.length>1||_&&!W.has(_))&&(y=!0),!y){if(!u&&Y&&p&&(u=!0,B()),!p){const P=J.xSnapped-(s.x??0),G=J.ySnapped-(s.y??0);Math.sqrt(P*P+G*G)>q&&$(V)}(s.x!==J.xSnapped||s.y!==J.ySnapped)&&l&&p&&(d=pi(V.sourceEvent,h),D(J))}}).on("end",V=>{if(!(!p||y)&&(u=!1,p=!1,cancelAnimationFrame(o),l.size>0)){const{nodeLookup:Y,updateNodePositions:I,onNodeDragStop:F,onSelectionDragStop:L}=t();if(x&&(I(l,!1),x=!1),i||F||!_&&L){const[q,W]=Z0({nodeId:_,dragItems:l,nodeLookup:Y,dragging:!1});i?.(V.sourceEvent,l,q,W),F?.(V.sourceEvent,q,W),_||L?.(V.sourceEvent,W)}}}).filter(V=>{const Y=V.target;return!V.button&&(!N||!lR(Y,`.${N}`,T))&&(!k||lR(Y,k,T))});g.call(z)}function E(){g?.on(".drag",null)}return{update:w,destroy:E}}function cse(e,t,n){const r=[],i={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const s of t.values())id(i,Vl(s))>0&&r.push(s);return r}const use=250;function dse(e,t,n,r){let i=[],s=1/0;const o=cse(e,n,t+use);for(const l of o){const u=[...l.internals.handleBounds?.source??[],...l.internals.handleBounds?.target??[]];for(const d of u){if(r.nodeId===d.nodeId&&r.type===d.type&&r.id===d.id)continue;const{x:h,y:p}=od(l,d,d.position,!0),g=Math.sqrt(Math.pow(h-e.x,2)+Math.pow(p-e.y,2));g>t||(g<s?(i=[{...d,x:h,y:p}],s=g):g===s&&i.push({...d,x:h,y:p}))}}if(!i.length)return null;if(i.length>1){const l=r.type==="source"?"target":"source";return i.find(u=>u.type===l)??i[0]}return i[0]}function Hz(e,t,n,r,i,s=!1){const o=r.get(e);if(!o)return null;const l=i==="strict"?o.internals.handleBounds?.[t]:[...o.internals.handleBounds?.source??[],...o.internals.handleBounds?.target??[]],u=(n?l?.find(d=>d.id===n):l?.[0])??null;return u&&s?{...u,...od(o,u,u.position,!0)}:u}function Fz(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function fse(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const Uz=()=>!0;function hse(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:s,isTarget:o,domNode:l,nodeLookup:u,lib:d,autoPanOnConnect:h,flowId:p,panBy:g,cancelConnection:y,onConnectStart:x,onConnect:S,onConnectEnd:w,isValidConnection:E=Uz,onReconnectEnd:N,updateConnection:k,getTransform:T,getFromHandle:A,autoPanSpeed:_,dragThreshold:R=1,handleDomNode:D}){const B=Oz(e.target);let $=0,z;const{x:V,y:Y}=pi(e),I=Fz(s,D),F=l?.getBoundingClientRect();let L=!1;if(!F||!I)return;const q=Hz(i,I,r,u,t);if(!q)return;let W=pi(e,F),J=!1,P=null,G=!1,oe=null;function ce(){if(!h||!F)return;const[Me,Ae]=Mz(W,F,_);g({x:Me,y:Ae}),$=requestAnimationFrame(ce)}const H={...q,nodeId:i,type:I,position:q.position},X=u.get(i);let ie={inProgress:!0,isValid:null,from:od(X,H,Ne.Left,!0),fromHandle:H,fromPosition:H.position,fromNode:X,to:W,toHandle:null,toPosition:XD[H.position],toNode:null};function te(){L=!0,k(ie),x?.(e,{nodeId:i,handleId:r,handleType:I})}R===0&&te();function ge(Me){if(!L){const{x:Se,y:Je}=pi(Me),ke=Se-V,Pt=Je-Y;if(!(ke*ke+Pt*Pt>R*R))return;te()}if(!A()||!H){xe(Me);return}const Ae=T();W=pi(Me,F),z=dse(Nd(W,Ae,!1,[1,1]),n,u,H),J||(ce(),J=!0);const Te=$z(Me,{handle:z,connectionMode:t,fromNodeId:i,fromHandleId:r,fromType:o?"target":"source",isValidConnection:E,doc:B,lib:d,flowId:p,nodeLookup:u});oe=Te.handleDomNode,P=Te.connection,G=fse(!!z,Te.isValid);const we={...ie,isValid:G,to:Te.toHandle&&G?Pp({x:Te.toHandle.x,y:Te.toHandle.y},Ae):W,toHandle:Te.toHandle,toPosition:G&&Te.toHandle?Te.toHandle.position:XD[H.position],toNode:Te.toHandle?u.get(Te.toHandle.nodeId):null};G&&z&&ie.toHandle&&we.toHandle&&ie.toHandle.type===we.toHandle.type&&ie.toHandle.nodeId===we.toHandle.nodeId&&ie.toHandle.id===we.toHandle.id&&ie.to.x===we.to.x&&ie.to.y===we.to.y||(k(we),ie=we)}function xe(Me){if(L){(z||oe)&&P&&G&&S?.(P);const{inProgress:Ae,...Te}=ie,we={...Te,toPosition:ie.toHandle?ie.toPosition:null};w?.(Me,we),s&&N?.(Me,we)}y(),cancelAnimationFrame($),J=!1,G=!1,P=null,oe=null,B.removeEventListener("mousemove",ge),B.removeEventListener("mouseup",xe),B.removeEventListener("touchmove",ge),B.removeEventListener("touchend",xe)}B.addEventListener("mousemove",ge),B.addEventListener("mouseup",xe),B.addEventListener("touchmove",ge),B.addEventListener("touchend",xe)}function $z(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:s,doc:o,lib:l,flowId:u,isValidConnection:d=Uz,nodeLookup:h}){const p=s==="target",g=t?o.querySelector(`.${l}-flow__handle[data-id="${u}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:y,y:x}=pi(e),S=o.elementFromPoint(y,x),w=S?.classList.contains(`${l}-flow__handle`)?S:g,E={handleDomNode:w,isValid:!1,connection:null,toHandle:null};if(w){const N=Fz(void 0,w),k=w.getAttribute("data-nodeid"),T=w.getAttribute("data-handleid"),A=w.classList.contains("connectable"),_=w.classList.contains("connectableend");if(!k||!N)return E;const R={source:p?k:r,sourceHandle:p?T:i,target:p?r:k,targetHandle:p?i:T};E.connection=R;const B=A&&_&&(n===fa.Strict?p&&N==="source"||!p&&N==="target":k!==r||T!==i);E.isValid=B&&d(R),E.toHandle=Hz(k,N,T,h,n,!0)}return E}const BC={onPointerDown:hse,isValid:$z};function pse({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const i=ar(e);function s({translateExtent:l,width:u,height:d,zoomStep:h=1,pannable:p=!0,zoomable:g=!0,inversePan:y=!1}){const x=k=>{if(k.sourceEvent.type!=="wheel"||!t)return;const T=n(),A=k.sourceEvent.ctrlKey&&sd()?10:1,_=-k.sourceEvent.deltaY*(k.sourceEvent.deltaMode===1?.05:k.sourceEvent.deltaMode?1:.002)*h,R=T[2]*Math.pow(2,_*A);t.scaleTo(R)};let S=[0,0];const w=k=>{(k.sourceEvent.type==="mousedown"||k.sourceEvent.type==="touchstart")&&(S=[k.sourceEvent.clientX??k.sourceEvent.touches[0].clientX,k.sourceEvent.clientY??k.sourceEvent.touches[0].clientY])},E=k=>{const T=n();if(k.sourceEvent.type!=="mousemove"&&k.sourceEvent.type!=="touchmove"||!t)return;const A=[k.sourceEvent.clientX??k.sourceEvent.touches[0].clientX,k.sourceEvent.clientY??k.sourceEvent.touches[0].clientY],_=[A[0]-S[0],A[1]-S[1]];S=A;const R=r()*Math.max(T[2],Math.log(T[2]))*(y?-1:1),D={x:T[0]-_[0]*R,y:T[1]-_[1]*R},B=[[0,0],[u,d]];t.setViewportConstrained({x:D.x,y:D.y,zoom:T[2]},B,l)},N=xz().on("start",w).on("zoom",p?E:null).on("zoom.wheel",g?x:null);i.call(N,{})}function o(){i.on("zoom",null)}return{update:s,destroy:o,pointer:Vr}}const mse=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,Sm=e=>({x:e.x,y:e.y,zoom:e.k}),Q0=({x:e,y:t,zoom:n})=>vm.translate(e,t).scale(n),Cl=(e,t)=>e.target.closest(`.${t}`),Gz=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),gse=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,J0=(e,t=0,n=gse,r=()=>{})=>{const i=typeof t=="number"&&t>0;return i||r(),i?e.transition().duration(t).ease(n).on("end",r):e},Kz=e=>{const t=e.ctrlKey&&sd()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function yse({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:s,zoomOnPinch:o,onPanZoomStart:l,onPanZoom:u,onPanZoomEnd:d}){return h=>{if(Cl(h,t))return!1;h.preventDefault(),h.stopImmediatePropagation();const p=n.property("__zoom").k||1;if(h.ctrlKey&&o){const w=Vr(h),E=Kz(h),N=p*Math.pow(2,E);r.scaleTo(n,N,w,h);return}const g=h.deltaMode===1?20:1;let y=i===ia.Vertical?0:h.deltaX*g,x=i===ia.Horizontal?0:h.deltaY*g;!sd()&&h.shiftKey&&i!==ia.Vertical&&(y=h.deltaY*g,x=0),r.translateBy(n,-(y/p)*s,-(x/p)*s,{internal:!0});const S=Sm(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,l?.(h,S)),e.isPanScrolling&&(u?.(h,S),e.panScrollTimeout=setTimeout(()=>{d?.(h,S),e.isPanScrolling=!1},150))}}function vse({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,i){const s=r.type==="wheel",o=!t&&s&&!r.ctrlKey,l=Cl(r,e);if(r.ctrlKey&&s&&l&&r.preventDefault(),o||l)return null;r.preventDefault(),n.call(this,r,i)}}function bse({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{if(r.sourceEvent?.internal)return;const i=Sm(r.transform);e.mouseButton=r.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=i,r.sourceEvent?.type==="mousedown"&&t(!0),n&&n?.(r.sourceEvent,i)}}function xse({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return s=>{e.usedRightMouseButton=!!(n&&Gz(t,e.mouseButton??0)),s.sourceEvent?.sync||r([s.transform.x,s.transform.y,s.transform.k]),i&&!s.sourceEvent?.internal&&i?.(s.sourceEvent,Sm(s.transform))}}function wse({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:s}){return o=>{if(!o.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,s&&Gz(t,e.mouseButton??0)&&!e.usedRightMouseButton&&o.sourceEvent&&s(o.sourceEvent),e.usedRightMouseButton=!1,r(!1),i&&mse(e.prevViewport,o.transform))){const l=Sm(o.transform);e.prevViewport=l,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{i?.(o.sourceEvent,l)},n?150:0)}}}function Sse({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:s,userSelectionActive:o,noWheelClassName:l,noPanClassName:u,lib:d}){return h=>{const p=e||t,g=n&&h.ctrlKey;if(h.button===1&&h.type==="mousedown"&&(Cl(h,`${d}-flow__node`)||Cl(h,`${d}-flow__edge`)))return!0;if(!r&&!p&&!i&&!s&&!n||o||Cl(h,l)&&h.type==="wheel"||Cl(h,u)&&(h.type!=="wheel"||i&&h.type==="wheel"&&!e)||!n&&h.ctrlKey&&h.type==="wheel")return!1;if(!n&&h.type==="touchstart"&&h.touches?.length>1)return h.preventDefault(),!1;if(!p&&!i&&!g&&h.type==="wheel"||!r&&(h.type==="mousedown"||h.type==="touchstart")||Array.isArray(r)&&!r.includes(h.button)&&h.type==="mousedown")return!1;const y=Array.isArray(r)&&r.includes(h.button)||!h.button||h.button<=1;return(!h.ctrlKey||h.type==="wheel")&&y}}function Cse({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:r,translateExtent:i,viewport:s,onPanZoom:o,onPanZoomStart:l,onPanZoomEnd:u,onDraggingChange:d}){const h={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},p=e.getBoundingClientRect(),g=xz().clickDistance(!$r(r)||r<0?0:r).scaleExtent([t,n]).translateExtent(i),y=ar(e).call(g);k({x:s.x,y:s.y,zoom:ql(s.zoom,t,n)},[[0,0],[p.width,p.height]],i);const x=y.on("wheel.zoom"),S=y.on("dblclick.zoom");g.wheelDelta(Kz);function w(V,Y){return y?new Promise(I=>{g?.interpolate(Y?.interpolate==="linear"?Du:kh).transform(J0(y,Y?.duration,Y?.ease,()=>I(!0)),V)}):Promise.resolve(!1)}function E({noWheelClassName:V,noPanClassName:Y,onPaneContextMenu:I,userSelectionActive:F,panOnScroll:L,panOnDrag:q,panOnScrollMode:W,panOnScrollSpeed:J,preventScrolling:P,zoomOnPinch:G,zoomOnScroll:oe,zoomOnDoubleClick:ce,zoomActivationKeyPressed:H,lib:X,onTransformChange:Q}){F&&!h.isZoomingOrPanning&&N();const te=L&&!H&&!F?yse({zoomPanValues:h,noWheelClassName:V,d3Selection:y,d3Zoom:g,panOnScrollMode:W,panOnScrollSpeed:J,zoomOnPinch:G,onPanZoomStart:l,onPanZoom:o,onPanZoomEnd:u}):vse({noWheelClassName:V,preventScrolling:P,d3ZoomHandler:x});if(y.on("wheel.zoom",te,{passive:!1}),!F){const xe=bse({zoomPanValues:h,onDraggingChange:d,onPanZoomStart:l});g.on("start",xe);const Me=xse({zoomPanValues:h,panOnDrag:q,onPaneContextMenu:!!I,onPanZoom:o,onTransformChange:Q});g.on("zoom",Me);const Ae=wse({zoomPanValues:h,panOnDrag:q,panOnScroll:L,onPaneContextMenu:I,onPanZoomEnd:u,onDraggingChange:d});g.on("end",Ae)}const ge=Sse({zoomActivationKeyPressed:H,panOnDrag:q,zoomOnScroll:oe,panOnScroll:L,zoomOnDoubleClick:ce,zoomOnPinch:G,userSelectionActive:F,noPanClassName:Y,noWheelClassName:V,lib:X});g.filter(ge),ce?y.on("dblclick.zoom",S):y.on("dblclick.zoom",null)}function N(){g.on("zoom",null)}async function k(V,Y,I){const F=Q0(V),L=g?.constrain()(F,Y,I);return L&&await w(L),new Promise(q=>q(L))}async function T(V,Y){const I=Q0(V);return await w(I,Y),new Promise(F=>F(I))}function A(V){if(y){const Y=Q0(V),I=y.property("__zoom");(I.k!==V.zoom||I.x!==V.x||I.y!==V.y)&&g?.transform(y,Y,null,{sync:!0})}}function _(){const V=y?bz(y.node()):{x:0,y:0,k:1};return{x:V.x,y:V.y,zoom:V.k}}function R(V,Y){return y?new Promise(I=>{g?.interpolate(Y?.interpolate==="linear"?Du:kh).scaleTo(J0(y,Y?.duration,Y?.ease,()=>I(!0)),V)}):Promise.resolve(!1)}function D(V,Y){return y?new Promise(I=>{g?.interpolate(Y?.interpolate==="linear"?Du:kh).scaleBy(J0(y,Y?.duration,Y?.ease,()=>I(!0)),V)}):Promise.resolve(!1)}function B(V){g?.scaleExtent(V)}function $(V){g?.translateExtent(V)}function z(V){const Y=!$r(V)||V<0?0:V;g?.clickDistance(Y)}return{update:E,destroy:N,setViewport:T,setViewportConstrained:k,getViewport:_,scaleTo:R,scaleBy:D,setScaleExtent:B,setTranslateExtent:$,syncViewport:A,setClickDistance:z}}var pa;(function(e){e.Line="line",e.Handle="handle"})(pa||(pa={}));const Ese=["top-left","top-right","bottom-left","bottom-right"],kse=["top","right","bottom","left"];function Tse({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:i,affectsY:s}){const o=e-t,l=n-r,u=[o>0?1:o<0?-1:0,l>0?1:l<0?-1:0];return o&&i&&(u[0]=u[0]*-1),l&&s&&(u[1]=u[1]*-1),u}function Nse(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),i=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:i}}function Os(e,t){return Math.max(0,t-e)}function js(e,t){return Math.max(0,e-t)}function uh(e,t,n){return Math.max(0,t-e,e-n)}function cR(e,t){return e?!t:t}function Ase(e,t,n,r,i,s,o,l){let{affectsX:u,affectsY:d}=t;const{isHorizontal:h,isVertical:p}=t,g=h&&p,{xSnapped:y,ySnapped:x}=n,{minWidth:S,maxWidth:w,minHeight:E,maxHeight:N}=r,{x:k,y:T,width:A,height:_,aspectRatio:R}=e;let D=Math.floor(h?y-e.pointerX:0),B=Math.floor(p?x-e.pointerY:0);const $=A+(u?-D:D),z=_+(d?-B:B),V=-s[0]*A,Y=-s[1]*_;let I=uh($,S,w),F=uh(z,E,N);if(o){let W=0,J=0;u&&D<0?W=Os(k+D+V,o[0][0]):!u&&D>0&&(W=js(k+$+V,o[1][0])),d&&B<0?J=Os(T+B+Y,o[0][1]):!d&&B>0&&(J=js(T+z+Y,o[1][1])),I=Math.max(I,W),F=Math.max(F,J)}if(l){let W=0,J=0;u&&D>0?W=js(k+D,l[0][0]):!u&&D<0&&(W=Os(k+$,l[1][0])),d&&B>0?J=js(T+B,l[0][1]):!d&&B<0&&(J=Os(T+z,l[1][1])),I=Math.max(I,W),F=Math.max(F,J)}if(i){if(h){const W=uh($/R,E,N)*R;if(I=Math.max(I,W),o){let J=0;!u&&!d||u&&!d&&g?J=js(T+Y+$/R,o[1][1])*R:J=Os(T+Y+(u?D:-D)/R,o[0][1])*R,I=Math.max(I,J)}if(l){let J=0;!u&&!d||u&&!d&&g?J=Os(T+$/R,l[1][1])*R:J=js(T+(u?D:-D)/R,l[0][1])*R,I=Math.max(I,J)}}if(p){const W=uh(z*R,S,w)/R;if(F=Math.max(F,W),o){let J=0;!u&&!d||d&&!u&&g?J=js(k+z*R+V,o[1][0])/R:J=Os(k+(d?B:-B)*R+V,o[0][0])/R,F=Math.max(F,J)}if(l){let J=0;!u&&!d||d&&!u&&g?J=Os(k+z*R,l[1][0])/R:J=js(k+(d?B:-B)*R,l[0][0])/R,F=Math.max(F,J)}}}B=B+(B<0?F:-F),D=D+(D<0?I:-I),i&&(g?$>z*R?B=(cR(u,d)?-D:D)/R:D=(cR(u,d)?-B:B)*R:h?(B=D/R,d=u):(D=B*R,u=d));const L=u?k+D:k,q=d?T+B:T;return{width:A+(u?-D:D),height:_+(d?-B:B),x:s[0]*D*(u?-1:1)+L,y:s[1]*B*(d?-1:1)+q}}const Yz={width:0,height:0,x:0,y:0},Mse={...Yz,pointerX:0,pointerY:0,aspectRatio:1};function _se(e){return[[0,0],[e.measured.width,e.measured.height]]}function Dse(e,t,n){const r=t.position.x+e.position.x,i=t.position.y+e.position.y,s=e.measured.width??0,o=e.measured.height??0,l=n[0]*s,u=n[1]*o;return[[r-l,i-u],[r+s-l,i+o-u]]}function Rse({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:i}){const s=ar(e);function o({controlPosition:u,boundaries:d,keepAspectRatio:h,resizeDirection:p,onResizeStart:g,onResize:y,onResizeEnd:x,shouldResize:S}){let w={...Yz},E={...Mse};const N=Nse(u);let k,T=null,A=[],_,R,D;const B=sz().on("start",$=>{const{nodeLookup:z,transform:V,snapGrid:Y,snapToGrid:I,nodeOrigin:F,paneDomNode:L}=n();if(k=z.get(t),!k)return;T=L?.getBoundingClientRect()??null;const{xSnapped:q,ySnapped:W}=Ru($.sourceEvent,{transform:V,snapGrid:Y,snapToGrid:I,containerBounds:T});w={width:k.measured.width??0,height:k.measured.height??0,x:k.position.x??0,y:k.position.y??0},E={...w,pointerX:q,pointerY:W,aspectRatio:w.width/w.height},_=void 0,k.parentId&&(k.extent==="parent"||k.expandParent)&&(_=z.get(k.parentId),R=_&&k.extent==="parent"?_se(_):void 0),A=[],D=void 0;for(const[J,P]of z)if(P.parentId===t&&(A.push({id:J,position:{...P.position},extent:P.extent}),P.extent==="parent"||P.expandParent)){const G=Dse(P,k,P.origin??F);D?D=[[Math.min(G[0][0],D[0][0]),Math.min(G[0][1],D[0][1])],[Math.max(G[1][0],D[1][0]),Math.max(G[1][1],D[1][1])]]:D=G}g?.($,{...w})}).on("drag",$=>{const{transform:z,snapGrid:V,snapToGrid:Y,nodeOrigin:I}=n(),F=Ru($.sourceEvent,{transform:z,snapGrid:V,snapToGrid:Y,containerBounds:T}),L=[];if(!k)return;const{x:q,y:W,width:J,height:P}=w,G={},oe=k.origin??I,{width:ce,height:H,x:X,y:Q}=Ase(E,N,F,d,h,oe,R,D),ie=ce!==J,te=H!==P,ge=X!==q&&ie,xe=Q!==W&&te;if(!ge&&!xe&&!ie&&!te)return;if((ge||xe||oe[0]===1||oe[1]===1)&&(G.x=ge?X:w.x,G.y=xe?Q:w.y,w.x=G.x,w.y=G.y,A.length>0)){const we=X-q,Se=Q-W;for(const Je of A)Je.position={x:Je.position.x-we+oe[0]*(ce-J),y:Je.position.y-Se+oe[1]*(H-P)},L.push(Je)}if((ie||te)&&(G.width=ie&&(!p||p==="horizontal")?ce:w.width,G.height=te&&(!p||p==="vertical")?H:w.height,w.width=G.width,w.height=G.height),_&&k.expandParent){const we=oe[0]*(G.width??0);G.x&&G.x<we&&(w.x=we,E.x=E.x-(G.x-we));const Se=oe[1]*(G.height??0);G.y&&G.y<Se&&(w.y=Se,E.y=E.y-(G.y-Se))}const Me=Tse({width:w.width,prevWidth:J,height:w.height,prevHeight:P,affectsX:N.affectsX,affectsY:N.affectsY}),Ae={...w,direction:Me};S?.($,Ae)!==!1&&(y?.($,Ae),r(G,L))}).on("end",$=>{x?.($,{...w}),i?.({...w})});s.call(B)}function l(){s.on(".drag",null)}return{update:o,destroy:l}}const Ose={},uR=e=>{let t;const n=new Set,r=(h,p)=>{const g=typeof h=="function"?h(t):h;if(!Object.is(g,t)){const y=t;t=p??(typeof g!="object"||g===null)?g:Object.assign({},t,g),n.forEach(x=>x(t,y))}},i=()=>t,u={setState:r,getState:i,getInitialState:()=>d,subscribe:h=>(n.add(h),()=>n.delete(h)),destroy:()=>{(Ose?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},d=t=e(r,i,u);return u},jse=e=>e?uR(e):uR,{useDebugValue:Lse}=Pe,{useSyncExternalStoreWithSelector:Pse}=LQ,Bse=e=>e;function Wz(e,t=Bse,n){const r=Pse(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Lse(r),r}const dR=(e,t)=>{const n=jse(e),r=(i,s=t)=>Wz(n,i,s);return Object.assign(r,n),r},Ise=(e,t)=>e?dR(e,t):dR;function Ct(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,i]of e)if(!Object.is(i,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const Cm=O.createContext(null),zse=Cm.Provider,Xz=xi.error001();function Xe(e,t){const n=O.useContext(Cm);if(n===null)throw new Error(Xz);return Wz(n,e,t)}function yt(){const e=O.useContext(Cm);if(e===null)throw new Error(Xz);return O.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const fR={display:"none"},qse={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},Zz="react-flow__node-desc",Qz="react-flow__edge-desc",Vse="react-flow__aria-live",Hse=e=>e.ariaLiveMessage,Fse=e=>e.ariaLabelConfig;function Use({rfId:e}){const t=Xe(Hse);return v.jsx("div",{id:`${Vse}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:qse,children:t})}function $se({rfId:e,disableKeyboardA11y:t}){const n=Xe(Fse);return v.jsxs(v.Fragment,{children:[v.jsx("div",{id:`${Zz}-${e}`,style:fR,children:t?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),v.jsx("div",{id:`${Qz}-${e}`,style:fR,children:n["edge.a11yDescription.default"]}),!t&&v.jsx(Use,{rfId:e})]})}const Em=O.forwardRef(({position:e="top-left",children:t,className:n,style:r,...i},s)=>{const o=`${e}`.split("-");return v.jsx("div",{className:Kt(["react-flow__panel",n,...o]),style:r,ref:s,...i,children:t})});Em.displayName="Panel";function Gse({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:v.jsx(Em,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:v.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const Kse=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},dh=e=>e.id;function Yse(e,t){return Ct(e.selectedNodes.map(dh),t.selectedNodes.map(dh))&&Ct(e.selectedEdges.map(dh),t.selectedEdges.map(dh))}function Wse({onSelectionChange:e}){const t=yt(),{selectedNodes:n,selectedEdges:r}=Xe(Kse,Yse);return O.useEffect(()=>{const i={nodes:n,edges:r};e?.(i),t.getState().onSelectionChangeHandlers.forEach(s=>s(i))},[n,r,e]),null}const Xse=e=>!!e.onSelectionChangeHandlers;function Zse({onSelectionChange:e}){const t=Xe(Xse);return e||t?v.jsx(Wse,{onSelectionChange:e}):null}const Jz=[0,0],Qse={x:0,y:0,zoom:1},Jse=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance","ariaLabelConfig"],hR=[...Jse,"rfId"],eoe=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),pR={translateExtent:nd,nodeOrigin:Jz,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function toe(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:i,setTranslateExtent:s,setNodeExtent:o,reset:l,setDefaultNodesAndEdges:u,setPaneClickDistance:d}=Xe(eoe,Ct),h=yt();O.useEffect(()=>(u(e.defaultNodes,e.defaultEdges),()=>{p.current=pR,l()}),[]);const p=O.useRef(pR);return O.useEffect(()=>{for(const g of hR){const y=e[g],x=p.current[g];y!==x&&(typeof e[g]>"u"||(g==="nodes"?t(y):g==="edges"?n(y):g==="minZoom"?r(y):g==="maxZoom"?i(y):g==="translateExtent"?s(y):g==="nodeExtent"?o(y):g==="paneClickDistance"?d(y):g==="ariaLabelConfig"?h.setState({ariaLabelConfig:Fie(y)}):g==="fitView"?h.setState({fitViewQueued:y}):g==="fitViewOptions"?h.setState({fitViewOptions:y}):h.setState({[g]:y})))}p.current=e},hR.map(g=>e[g])),null}function mR(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function noe(e){const[t,n]=O.useState(e==="system"?null:e);return O.useEffect(()=>{if(e!=="system"){n(e);return}const r=mR(),i=()=>n(r?.matches?"dark":"light");return i(),r?.addEventListener("change",i),()=>{r?.removeEventListener("change",i)}},[e]),t!==null?t:mR()?.matches?"dark":"light"}const gR=typeof document<"u"?document:null;function ad(e=null,t={target:gR,actInsideInputWithModifier:!0}){const[n,r]=O.useState(!1),i=O.useRef(!1),s=O.useRef(new Set([])),[o,l]=O.useMemo(()=>{if(e!==null){const d=(Array.isArray(e)?e:[e]).filter(p=>typeof p=="string").map(p=>p.replace("+",`
`).replace(`

`,`
+`).split(`
`)),h=d.reduce((p,g)=>p.concat(...g),[]);return[d,h]}return[[],[]]},[e]);return O.useEffect(()=>{const u=t?.target??gR,d=t?.actInsideInputWithModifier??!0;if(e!==null){const h=y=>{if(i.current=y.ctrlKey||y.metaKey||y.shiftKey||y.altKey,(!i.current||i.current&&!d)&&jz(y))return!1;const S=vR(y.code,l);if(s.current.add(y[S]),yR(o,s.current,!1)){const w=y.composedPath?.()?.[0]||y.target,E=w?.nodeName==="BUTTON"||w?.nodeName==="A";t.preventDefault!==!1&&(i.current||!E)&&y.preventDefault(),r(!0)}},p=y=>{const x=vR(y.code,l);yR(o,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(y[x]),y.key==="Meta"&&s.current.clear(),i.current=!1},g=()=>{s.current.clear(),r(!1)};return u?.addEventListener("keydown",h),u?.addEventListener("keyup",p),window.addEventListener("blur",g),window.addEventListener("contextmenu",g),()=>{u?.removeEventListener("keydown",h),u?.removeEventListener("keyup",p),window.removeEventListener("blur",g),window.removeEventListener("contextmenu",g)}}},[e,r]),n}function yR(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(i=>t.has(i)))}function vR(e,t){return t.includes(e)?"code":"key"}const roe=()=>{const e=yt();return O.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[r,i,s],panZoom:o}=e.getState();return o?(await o.setViewport({x:t.x??r,y:t.y??i,zoom:t.zoom??s},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},setCenter:async(t,n,r)=>e.getState().setCenter(t,n,r),fitBounds:async(t,n)=>{const{width:r,height:i,minZoom:s,maxZoom:o,panZoom:l}=e.getState(),u=wm(t,r,i,s,o,n?.padding??.1);return l?(await l.setViewport(u,{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{const{transform:r,snapGrid:i,snapToGrid:s,domNode:o}=e.getState();if(!o)return t;const{x:l,y:u}=o.getBoundingClientRect(),d={x:t.x-l,y:t.y-u},h=n.snapGrid??i,p=n.snapToGrid??s;return Nd(d,r,p,h)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:i,y:s}=r.getBoundingClientRect(),o=Pp(t,n);return{x:o.x+i,y:o.y+s}}}),[])};function eq(e,t){const n=[],r=new Map,i=[];for(const s of e)if(s.type==="add"){i.push(s);continue}else if(s.type==="remove"||s.type==="replace")r.set(s.id,[s]);else{const o=r.get(s.id);o?o.push(s):r.set(s.id,[s])}for(const s of t){const o=r.get(s.id);if(!o){n.push(s);continue}if(o[0].type==="remove")continue;if(o[0].type==="replace"){n.push({...o[0].item});continue}const l={...s};for(const u of o)ioe(u,l);n.push(l)}return i.length&&i.forEach(s=>{s.index!==void 0?n.splice(s.index,0,{...s.item}):n.push({...s.item})}),n}function ioe(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured??={},t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function tq(e,t){return eq(e,t)}function nq(e,t){return eq(e,t)}function zo(e,t){return{id:e,type:"select",selected:t}}function El(e,t=new Set,n=!1){const r=[];for(const[i,s]of e){const o=t.has(i);!(s.selected===void 0&&!o)&&s.selected!==o&&(n&&(s.selected=o),r.push(zo(s.id,o)))}return r}function bR({items:e=[],lookup:t}){const n=[],r=new Map(e.map(i=>[i.id,i]));for(const[i,s]of e.entries()){const o=t.get(s.id),l=o?.internals?.userNode??o;l!==void 0&&l!==s&&n.push({id:s.id,item:s,type:"replace"}),l===void 0&&n.push({item:s,type:"add",index:i})}for(const[i]of t)r.get(i)===void 0&&n.push({id:i,type:"remove"});return n}function xR(e){return{id:e.id,type:"remove"}}const wR=e=>jie(e),soe=e=>kz(e);function rq(e){return O.forwardRef(e)}const ooe=typeof window<"u"?O.useLayoutEffect:O.useEffect;function SR(e){const[t,n]=O.useState(BigInt(0)),[r]=O.useState(()=>aoe(()=>n(i=>i+BigInt(1))));return ooe(()=>{const i=r.get();i.length&&(e(i),r.reset())},[t]),r}function aoe(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const iq=O.createContext(null);function loe({children:e}){const t=yt(),n=O.useCallback(l=>{const{nodes:u=[],setNodes:d,hasDefaultNodes:h,onNodesChange:p,nodeLookup:g,fitViewQueued:y}=t.getState();let x=u;for(const w of l)x=typeof w=="function"?w(x):w;const S=bR({items:x,lookup:g});h&&d(x),S.length>0?p?.(S):y&&window.requestAnimationFrame(()=>{const{fitViewQueued:w,nodes:E,setNodes:N}=t.getState();w&&N(E)})},[]),r=SR(n),i=O.useCallback(l=>{const{edges:u=[],setEdges:d,hasDefaultEdges:h,onEdgesChange:p,edgeLookup:g}=t.getState();let y=u;for(const x of l)y=typeof x=="function"?x(y):x;h?d(y):p&&p(bR({items:y,lookup:g}))},[]),s=SR(i),o=O.useMemo(()=>({nodeQueue:r,edgeQueue:s}),[]);return v.jsx(iq.Provider,{value:o,children:e})}function coe(){const e=O.useContext(iq);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const uoe=e=>!!e.panZoom;function ld(){const e=roe(),t=yt(),n=coe(),r=Xe(uoe),i=O.useMemo(()=>{const s=p=>t.getState().nodeLookup.get(p),o=p=>{n.nodeQueue.push(p)},l=p=>{n.edgeQueue.push(p)},u=p=>{const{nodeLookup:g,nodeOrigin:y}=t.getState(),x=wR(p)?p:g.get(p.id),S=x.parentId?Rz(x.position,x.measured,x.parentId,g,y):x.position,w={...x,position:S,width:x.measured?.width??x.width,height:x.measured?.height??x.height};return Vl(w)},d=(p,g,y={replace:!1})=>{o(x=>x.map(S=>{if(S.id===p){const w=typeof g=="function"?g(S):g;return y.replace&&wR(w)?w:{...S,...w}}return S}))},h=(p,g,y={replace:!1})=>{l(x=>x.map(S=>{if(S.id===p){const w=typeof g=="function"?g(S):g;return y.replace&&soe(w)?w:{...S,...w}}return S}))};return{getNodes:()=>t.getState().nodes.map(p=>({...p})),getNode:p=>s(p)?.internals.userNode,getInternalNode:s,getEdges:()=>{const{edges:p=[]}=t.getState();return p.map(g=>({...g}))},getEdge:p=>t.getState().edgeLookup.get(p),setNodes:o,setEdges:l,addNodes:p=>{const g=Array.isArray(p)?p:[p];n.nodeQueue.push(y=>[...y,...g])},addEdges:p=>{const g=Array.isArray(p)?p:[p];n.edgeQueue.push(y=>[...y,...g])},toObject:()=>{const{nodes:p=[],edges:g=[],transform:y}=t.getState(),[x,S,w]=y;return{nodes:p.map(E=>({...E})),edges:g.map(E=>({...E})),viewport:{x,y:S,zoom:w}}},deleteElements:async({nodes:p=[],edges:g=[]})=>{const{nodes:y,edges:x,onNodesDelete:S,onEdgesDelete:w,triggerNodeChanges:E,triggerEdgeChanges:N,onDelete:k,onBeforeDelete:T}=t.getState(),{nodes:A,edges:_}=await Iie({nodesToRemove:p,edgesToRemove:g,nodes:y,edges:x,onBeforeDelete:T}),R=_.length>0,D=A.length>0;if(R){const B=_.map(xR);w?.(_),N(B)}if(D){const B=A.map(xR);S?.(A),E(B)}return(D||R)&&k?.({nodes:A,edges:_}),{deletedNodes:A,deletedEdges:_}},getIntersectingNodes:(p,g=!0,y)=>{const x=QD(p),S=x?p:u(p),w=y!==void 0;return S?(y||t.getState().nodes).filter(E=>{const N=t.getState().nodeLookup.get(E.id);if(N&&!x&&(E.id===p.id||!N.internals.positionAbsolute))return!1;const k=Vl(w?E:N),T=id(k,S);return g&&T>0||T>=k.width*k.height||T>=S.width*S.height}):[]},isNodeIntersecting:(p,g,y=!0)=>{const S=QD(p)?p:u(p);if(!S)return!1;const w=id(S,g);return y&&w>0||w>=S.width*S.height},updateNode:d,updateNodeData:(p,g,y={replace:!1})=>{d(p,x=>{const S=typeof g=="function"?g(x):g;return y.replace?{...x,data:S}:{...x,data:{...x.data,...S}}},y)},updateEdge:h,updateEdgeData:(p,g,y={replace:!1})=>{h(p,x=>{const S=typeof g=="function"?g(x):g;return y.replace?{...x,data:S}:{...x,data:{...x.data,...S}}},y)},getNodesBounds:p=>{const{nodeLookup:g,nodeOrigin:y}=t.getState();return Tz(p,{nodeLookup:g,nodeOrigin:y})},getHandleConnections:({type:p,id:g,nodeId:y})=>Array.from(t.getState().connectionLookup.get(`${y}-${p}${g?`-${g}`:""}`)?.values()??[]),getNodeConnections:({type:p,handleId:g,nodeId:y})=>Array.from(t.getState().connectionLookup.get(`${y}${p?g?`-${p}-${g}`:`-${p}`:""}`)?.values()??[]),fitView:async p=>{const g=t.getState().fitViewResolver??Hie();return t.setState({fitViewQueued:!0,fitViewOptions:p,fitViewResolver:g}),n.nodeQueue.push(y=>[...y]),g.promise}}},[]);return O.useMemo(()=>({...i,...e,viewportInitialized:r}),[r])}const CR=e=>e.selected,doe=typeof window<"u"?window:void 0;function foe({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=yt(),{deleteElements:r}=ld(),i=ad(e,{actInsideInputWithModifier:!1}),s=ad(t,{target:doe});O.useEffect(()=>{if(i){const{edges:o,nodes:l}=n.getState();r({nodes:l.filter(CR),edges:o.filter(CR)}),n.setState({nodesSelectionActive:!1})}},[i]),O.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])}function hoe(e){const t=yt();O.useEffect(()=>{const n=()=>{if(!e.current)return!1;const r=bk(e.current);(r.height===0||r.width===0)&&t.getState().onError?.("004",xi.error004()),t.setState({width:r.width||500,height:r.height||500})};if(e.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(e.current),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}}},[])}const km={position:"absolute",width:"100%",height:"100%",top:0,left:0},poe=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function moe({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:i=.5,panOnScrollMode:s=ia.Free,zoomOnDoubleClick:o=!0,panOnDrag:l=!0,defaultViewport:u,translateExtent:d,minZoom:h,maxZoom:p,zoomActivationKeyCode:g,preventScrolling:y=!0,children:x,noWheelClassName:S,noPanClassName:w,onViewportChange:E,isControlledViewport:N,paneClickDistance:k}){const T=yt(),A=O.useRef(null),{userSelectionActive:_,lib:R}=Xe(poe,Ct),D=ad(g),B=O.useRef();hoe(A);const $=O.useCallback(z=>{E?.({x:z[0],y:z[1],zoom:z[2]}),N||T.setState({transform:z})},[E,N]);return O.useEffect(()=>{if(A.current){B.current=Cse({domNode:A.current,minZoom:h,maxZoom:p,translateExtent:d,viewport:u,paneClickDistance:k,onDraggingChange:I=>T.setState({paneDragging:I}),onPanZoomStart:(I,F)=>{const{onViewportChangeStart:L,onMoveStart:q}=T.getState();q?.(I,F),L?.(F)},onPanZoom:(I,F)=>{const{onViewportChange:L,onMove:q}=T.getState();q?.(I,F),L?.(F)},onPanZoomEnd:(I,F)=>{const{onViewportChangeEnd:L,onMoveEnd:q}=T.getState();q?.(I,F),L?.(F)}});const{x:z,y:V,zoom:Y}=B.current.getViewport();return T.setState({panZoom:B.current,transform:[z,V,Y],domNode:A.current.closest(".react-flow")}),()=>{B.current?.destroy()}}},[]),O.useEffect(()=>{B.current?.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:i,panOnScrollMode:s,zoomOnDoubleClick:o,panOnDrag:l,zoomActivationKeyPressed:D,preventScrolling:y,noPanClassName:w,userSelectionActive:_,noWheelClassName:S,lib:R,onTransformChange:$})},[e,t,n,r,i,s,o,l,D,y,w,_,S,R,$]),v.jsx("div",{className:"react-flow__renderer",ref:A,style:km,children:x})}const goe=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function yoe(){const{userSelectionActive:e,userSelectionRect:t}=Xe(goe,Ct);return e&&t?v.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const ev=(e,t)=>n=>{n.target===t.current&&e?.(n)},voe=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function boe({isSelecting:e,selectionKeyPressed:t,selectionMode:n=rd.Full,panOnDrag:r,selectionOnDrag:i,onSelectionStart:s,onSelectionEnd:o,onPaneClick:l,onPaneContextMenu:u,onPaneScroll:d,onPaneMouseEnter:h,onPaneMouseMove:p,onPaneMouseLeave:g,children:y}){const x=yt(),{userSelectionActive:S,elementsSelectable:w,dragging:E,connectionInProgress:N}=Xe(voe,Ct),k=w&&(e||S),T=O.useRef(null),A=O.useRef(),_=O.useRef(new Set),R=O.useRef(new Set),D=O.useRef(!1),B=O.useRef(!1),$=q=>{if(D.current||N){D.current=!1;return}l?.(q),x.getState().resetSelectedElements(),x.setState({nodesSelectionActive:!1})},z=q=>{if(Array.isArray(r)&&r?.includes(2)){q.preventDefault();return}u?.(q)},V=d?q=>d(q):void 0,Y=q=>{const{resetSelectedElements:W,domNode:J}=x.getState();if(A.current=J?.getBoundingClientRect(),!w||!e||q.button!==0||q.target!==T.current||!A.current)return;q.target?.setPointerCapture?.(q.pointerId),B.current=!0,D.current=!1;const{x:P,y:G}=pi(q.nativeEvent,A.current);W(),x.setState({userSelectionRect:{width:0,height:0,startX:P,startY:G,x:P,y:G}}),s?.(q)},I=q=>{const{userSelectionRect:W,transform:J,nodeLookup:P,edgeLookup:G,connectionLookup:oe,triggerNodeChanges:ce,triggerEdgeChanges:H,defaultEdgeOptions:X}=x.getState();if(!A.current||!W)return;D.current=!0;const{x:Q,y:ie}=pi(q.nativeEvent,A.current),{startX:te,startY:ge}=W,xe={startX:te,startY:ge,x:Q<te?Q:te,y:ie<ge?ie:ge,width:Math.abs(Q-te),height:Math.abs(ie-ge)},Me=_.current,Ae=R.current;_.current=new Set(vk(P,xe,J,n===rd.Partial,!0).map(we=>we.id)),R.current=new Set;const Te=X?.selectable??!0;for(const we of _.current){const Se=oe.get(we);if(Se)for(const{edgeId:Je}of Se.values()){const ke=G.get(Je);ke&&(ke.selectable??Te)&&R.current.add(Je)}}if(!JD(Me,_.current)){const we=El(P,_.current,!0);ce(we)}if(!JD(Ae,R.current)){const we=El(G,R.current);H(we)}x.setState({userSelectionRect:xe,userSelectionActive:!0,nodesSelectionActive:!1})},F=q=>{if(q.button!==0||!B.current)return;q.target?.releasePointerCapture?.(q.pointerId);const{userSelectionRect:W}=x.getState();!S&&W&&q.target===T.current&&$?.(q),x.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:_.current.size>0}),o?.(q),(t||i)&&(D.current=!1),B.current=!1},L=r===!0||Array.isArray(r)&&r.includes(0);return v.jsxs("div",{className:Kt(["react-flow__pane",{draggable:L,dragging:E,selection:e}]),onClick:k?void 0:ev($,T),onContextMenu:ev(z,T),onWheel:ev(V,T),onPointerEnter:k?void 0:h,onPointerDown:k?Y:p,onPointerMove:k?I:p,onPointerUp:k?F:void 0,onPointerLeave:g,ref:T,style:km,children:[y,v.jsx(yoe,{})]})}function IC({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:s,multiSelectionActive:o,nodeLookup:l,onError:u}=t.getState(),d=l.get(e);if(!d){u?.("012",xi.error012(e));return}t.setState({nodesSelectionActive:!1}),d.selected?(n||d.selected&&o)&&(s({nodes:[d],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):i([e])}function sq({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:s,nodeClickDistance:o}){const l=yt(),[u,d]=O.useState(!1),h=O.useRef();return O.useEffect(()=>{h.current=lse({getStoreItems:()=>l.getState(),onNodeMouseDown:p=>{IC({id:p,store:l,nodeRef:e})},onDragStart:()=>{d(!0)},onDragStop:()=>{d(!1)}})},[]),O.useEffect(()=>{if(t)h.current?.destroy();else if(e.current)return h.current?.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:s,nodeId:i,nodeClickDistance:o}),()=>{h.current?.destroy()}},[n,r,t,s,e,i]),u}const xoe=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function oq(){const e=yt();return O.useCallback(n=>{const{nodeExtent:r,snapToGrid:i,snapGrid:s,nodesDraggable:o,onError:l,updateNodePositions:u,nodeLookup:d,nodeOrigin:h}=e.getState(),p=new Map,g=xoe(o),y=i?s[0]:5,x=i?s[1]:5,S=n.direction.x*y*n.factor,w=n.direction.y*x*n.factor;for(const[,E]of d){if(!g(E))continue;let N={x:E.internals.positionAbsolute.x+S,y:E.internals.positionAbsolute.y+w};i&&(N=Td(N,s));const{position:k,positionAbsolute:T}=Nz({nodeId:E.id,nextPosition:N,nodeLookup:d,nodeExtent:r,nodeOrigin:h,onError:l});E.position=k,E.internals.positionAbsolute=T,p.set(E.id,E)}u(p)},[])}const Tk=O.createContext(null),woe=Tk.Provider;Tk.Consumer;const aq=()=>O.useContext(Tk),Soe=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),Coe=(e,t,n)=>r=>{const{connectionClickStartHandle:i,connectionMode:s,connection:o}=r,{fromHandle:l,toHandle:u,isValid:d}=o,h=u?.nodeId===e&&u?.id===t&&u?.type===n;return{connectingFrom:l?.nodeId===e&&l?.id===t&&l?.type===n,connectingTo:h,clickConnecting:i?.nodeId===e&&i?.id===t&&i?.type===n,isPossibleEndHandle:s===fa.Strict?l?.type!==n:e!==l?.nodeId||t!==l?.id,connectionInProcess:!!l,clickConnectionInProcess:!!i,valid:h&&d}};function Eoe({type:e="source",position:t=Ne.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:s=!0,id:o,onConnect:l,children:u,className:d,onMouseDown:h,onTouchStart:p,...g},y){const x=o||null,S=e==="target",w=yt(),E=aq(),{connectOnClick:N,noPanClassName:k,rfId:T}=Xe(Soe,Ct),{connectingFrom:A,connectingTo:_,clickConnecting:R,isPossibleEndHandle:D,connectionInProcess:B,clickConnectionInProcess:$,valid:z}=Xe(Coe(E,x,e),Ct);E||w.getState().onError?.("010",xi.error010());const V=F=>{const{defaultEdgeOptions:L,onConnect:q,hasDefaultEdges:W}=w.getState(),J={...L,...F};if(W){const{edges:P,setEdges:G}=w.getState();G(Bz(J,P))}q?.(J),l?.(J)},Y=F=>{if(!E)return;const L=Lz(F.nativeEvent);if(i&&(L&&F.button===0||!L)){const q=w.getState();BC.onPointerDown(F.nativeEvent,{handleDomNode:F.currentTarget,autoPanOnConnect:q.autoPanOnConnect,connectionMode:q.connectionMode,connectionRadius:q.connectionRadius,domNode:q.domNode,nodeLookup:q.nodeLookup,lib:q.lib,isTarget:S,handleId:x,nodeId:E,flowId:q.rfId,panBy:q.panBy,cancelConnection:q.cancelConnection,onConnectStart:q.onConnectStart,onConnectEnd:q.onConnectEnd,updateConnection:q.updateConnection,onConnect:V,isValidConnection:n||q.isValidConnection,getTransform:()=>w.getState().transform,getFromHandle:()=>w.getState().connection.fromHandle,autoPanSpeed:q.autoPanSpeed,dragThreshold:q.connectionDragThreshold})}L?h?.(F):p?.(F)},I=F=>{const{onClickConnectStart:L,onClickConnectEnd:q,connectionClickStartHandle:W,connectionMode:J,isValidConnection:P,lib:G,rfId:oe,nodeLookup:ce,connection:H}=w.getState();if(!E||!W&&!i)return;if(!W){L?.(F.nativeEvent,{nodeId:E,handleId:x,handleType:e}),w.setState({connectionClickStartHandle:{nodeId:E,type:e,id:x}});return}const X=Oz(F.target),Q=n||P,{connection:ie,isValid:te}=BC.isValid(F.nativeEvent,{handle:{nodeId:E,id:x,type:e},connectionMode:J,fromNodeId:W.nodeId,fromHandleId:W.id||null,fromType:W.type,isValidConnection:Q,flowId:oe,doc:X,lib:G,nodeLookup:ce});te&&ie&&V(ie);const ge=structuredClone(H);delete ge.inProgress,ge.toPosition=ge.toHandle?ge.toHandle.position:null,q?.(F,ge),w.setState({connectionClickStartHandle:null})};return v.jsx("div",{"data-handleid":x,"data-nodeid":E,"data-handlepos":t,"data-id":`${T}-${E}-${x}-${e}`,className:Kt(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",k,d,{source:!S,target:S,connectable:r,connectablestart:i,connectableend:s,clickconnecting:R,connectingfrom:A,connectingto:_,valid:z,connectionindicator:r&&(!B||D)&&(B||$?s:i)}]),onMouseDown:Y,onTouchStart:Y,onClick:N?I:void 0,ref:y,...g,children:u})}const Ar=O.memo(rq(Eoe));function koe({data:e,isConnectable:t,sourcePosition:n=Ne.Bottom}){return v.jsxs(v.Fragment,{children:[e?.label,v.jsx(Ar,{type:"source",position:n,isConnectable:t})]})}function Toe({data:e,isConnectable:t,targetPosition:n=Ne.Top,sourcePosition:r=Ne.Bottom}){return v.jsxs(v.Fragment,{children:[v.jsx(Ar,{type:"target",position:n,isConnectable:t}),e?.label,v.jsx(Ar,{type:"source",position:r,isConnectable:t})]})}function Noe(){return null}function Aoe({data:e,isConnectable:t,targetPosition:n=Ne.Top}){return v.jsxs(v.Fragment,{children:[v.jsx(Ar,{type:"target",position:n,isConnectable:t}),e?.label]})}const Bp={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},ER={input:koe,default:Toe,output:Aoe,group:Noe};function Moe(e){return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??e.style?.width,height:e.height??e.initialHeight??e.style?.height}:{width:e.width??e.style?.width,height:e.height??e.style?.height}}const _oe=e=>{const{width:t,height:n,x:r,y:i}=kd(e.nodeLookup,{filter:s=>!!s.selected});return{width:$r(t)?t:null,height:$r(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${i}px)`}};function Doe({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=yt(),{width:i,height:s,transformString:o,userSelectionActive:l}=Xe(_oe,Ct),u=oq(),d=O.useRef(null);if(O.useEffect(()=>{n||d.current?.focus({preventScroll:!0})},[n]),sq({nodeRef:d}),l||!i||!s)return null;const h=e?g=>{const y=r.getState().nodes.filter(x=>x.selected);e(g,y)}:void 0,p=g=>{Object.prototype.hasOwnProperty.call(Bp,g.key)&&(g.preventDefault(),u({direction:Bp[g.key],factor:g.shiftKey?4:1}))};return v.jsx("div",{className:Kt(["react-flow__nodesselection","react-flow__container",t]),style:{transform:o},children:v.jsx("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:n?void 0:-1,onKeyDown:n?void 0:p,style:{width:i,height:s}})})}const kR=typeof window<"u"?window:void 0,Roe=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function lq({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,paneClickDistance:l,deleteKeyCode:u,selectionKeyCode:d,selectionOnDrag:h,selectionMode:p,onSelectionStart:g,onSelectionEnd:y,multiSelectionKeyCode:x,panActivationKeyCode:S,zoomActivationKeyCode:w,elementsSelectable:E,zoomOnScroll:N,zoomOnPinch:k,panOnScroll:T,panOnScrollSpeed:A,panOnScrollMode:_,zoomOnDoubleClick:R,panOnDrag:D,defaultViewport:B,translateExtent:$,minZoom:z,maxZoom:V,preventScrolling:Y,onSelectionContextMenu:I,noWheelClassName:F,noPanClassName:L,disableKeyboardA11y:q,onViewportChange:W,isControlledViewport:J}){const{nodesSelectionActive:P,userSelectionActive:G}=Xe(Roe),oe=ad(d,{target:kR}),ce=ad(S,{target:kR}),H=ce||D,X=ce||T,Q=h&&H!==!0,ie=oe||G||Q;return foe({deleteKeyCode:u,multiSelectionKeyCode:x}),v.jsx(moe,{onPaneContextMenu:s,elementsSelectable:E,zoomOnScroll:N,zoomOnPinch:k,panOnScroll:X,panOnScrollSpeed:A,panOnScrollMode:_,zoomOnDoubleClick:R,panOnDrag:!oe&&H,defaultViewport:B,translateExtent:$,minZoom:z,maxZoom:V,zoomActivationKeyCode:w,preventScrolling:Y,noWheelClassName:F,noPanClassName:L,onViewportChange:W,isControlledViewport:J,paneClickDistance:l,children:v.jsxs(boe,{onSelectionStart:g,onSelectionEnd:y,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,panOnDrag:H,isSelecting:!!ie,selectionMode:p,selectionKeyPressed:oe,selectionOnDrag:Q,children:[e,P&&v.jsx(Doe,{onSelectionContextMenu:I,noPanClassName:L,disableKeyboardA11y:q})]})})}lq.displayName="FlowRenderer";const Ooe=O.memo(lq),joe=e=>t=>e?vk(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function Loe(e){return Xe(O.useCallback(joe(e),[e]),Ct)}const Poe=e=>e.updateNodeInternals;function Boe(){const e=Xe(Poe),[t]=O.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(i=>{const s=i.target.getAttribute("data-id");r.set(s,{id:s,nodeElement:i.target,force:!0})}),e(r)}));return O.useEffect(()=>()=>{t?.disconnect()},[t]),t}function Ioe({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const i=yt(),s=O.useRef(null),o=O.useRef(null),l=O.useRef(e.sourcePosition),u=O.useRef(e.targetPosition),d=O.useRef(t),h=n&&!!e.internals.handleBounds;return O.useEffect(()=>{s.current&&!e.hidden&&(!h||o.current!==s.current)&&(o.current&&r?.unobserve(o.current),r?.observe(s.current),o.current=s.current)},[h,e.hidden]),O.useEffect(()=>()=>{o.current&&(r?.unobserve(o.current),o.current=null)},[]),O.useEffect(()=>{if(s.current){const p=d.current!==t,g=l.current!==e.sourcePosition,y=u.current!==e.targetPosition;(p||g||y)&&(d.current=t,l.current=e.sourcePosition,u.current=e.targetPosition,i.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:s.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),s}function zoe({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:i,onContextMenu:s,onDoubleClick:o,nodesDraggable:l,elementsSelectable:u,nodesConnectable:d,nodesFocusable:h,resizeObserver:p,noDragClassName:g,noPanClassName:y,disableKeyboardA11y:x,rfId:S,nodeTypes:w,nodeClickDistance:E,onError:N}){const{node:k,internals:T,isParent:A}=Xe(te=>{const ge=te.nodeLookup.get(e),xe=te.parentLookup.has(e);return{node:ge,internals:ge.internals,isParent:xe}},Ct);let _=k.type||"default",R=w?.[_]||ER[_];R===void 0&&(N?.("003",xi.error003(_)),_="default",R=w?.default||ER.default);const D=!!(k.draggable||l&&typeof k.draggable>"u"),B=!!(k.selectable||u&&typeof k.selectable>"u"),$=!!(k.connectable||d&&typeof k.connectable>"u"),z=!!(k.focusable||h&&typeof k.focusable>"u"),V=yt(),Y=Dz(k),I=Ioe({node:k,nodeType:_,hasDimensions:Y,resizeObserver:p}),F=sq({nodeRef:I,disabled:k.hidden||!D,noDragClassName:g,handleSelector:k.dragHandle,nodeId:e,isSelectable:B,nodeClickDistance:E}),L=oq();if(k.hidden)return null;const q=ts(k),W=Moe(k),J=B||D||t||n||r||i,P=n?te=>n(te,{...T.userNode}):void 0,G=r?te=>r(te,{...T.userNode}):void 0,oe=i?te=>i(te,{...T.userNode}):void 0,ce=s?te=>s(te,{...T.userNode}):void 0,H=o?te=>o(te,{...T.userNode}):void 0,X=te=>{const{selectNodesOnDrag:ge,nodeDragThreshold:xe}=V.getState();B&&(!ge||!D||xe>0)&&IC({id:e,store:V,nodeRef:I}),t&&t(te,{...T.userNode})},Q=te=>{if(!(jz(te.nativeEvent)||x)){if(wz.includes(te.key)&&B){const ge=te.key==="Escape";IC({id:e,store:V,unselect:ge,nodeRef:I})}else if(D&&k.selected&&Object.prototype.hasOwnProperty.call(Bp,te.key)){te.preventDefault();const{ariaLabelConfig:ge}=V.getState();V.setState({ariaLiveMessage:ge["node.a11yDescription.ariaLiveMessage"]({direction:te.key.replace("Arrow","").toLowerCase(),x:~~T.positionAbsolute.x,y:~~T.positionAbsolute.y})}),L({direction:Bp[te.key],factor:te.shiftKey?4:1})}}},ie=()=>{if(x||!I.current?.matches(":focus-visible"))return;const{transform:te,width:ge,height:xe,autoPanOnNodeFocus:Me,setCenter:Ae}=V.getState();if(!Me)return;vk(new Map([[e,k]]),{x:0,y:0,width:ge,height:xe},te,!0).length>0||Ae(k.position.x+q.width/2,k.position.y+q.height/2,{zoom:te[2]})};return v.jsx("div",{className:Kt(["react-flow__node",`react-flow__node-${_}`,{[y]:D},k.className,{selected:k.selected,selectable:B,parent:A,draggable:D,dragging:F}]),ref:I,style:{zIndex:T.z,transform:`translate(${T.positionAbsolute.x}px,${T.positionAbsolute.y}px)`,pointerEvents:J?"all":"none",visibility:Y?"visible":"hidden",...k.style,...W},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:P,onMouseMove:G,onMouseLeave:oe,onContextMenu:ce,onClick:X,onDoubleClick:H,onKeyDown:z?Q:void 0,tabIndex:z?0:void 0,onFocus:z?ie:void 0,role:k.ariaRole??(z?"group":void 0),"aria-roledescription":"node","aria-describedby":x?void 0:`${Zz}-${S}`,"aria-label":k.ariaLabel,...k.domAttributes,children:v.jsx(woe,{value:e,children:v.jsx(R,{id:e,data:k.data,type:_,positionAbsoluteX:T.positionAbsolute.x,positionAbsoluteY:T.positionAbsolute.y,selected:k.selected??!1,selectable:B,draggable:D,deletable:k.deletable??!0,isConnectable:$,sourcePosition:k.sourcePosition,targetPosition:k.targetPosition,dragging:F,dragHandle:k.dragHandle,zIndex:T.z,parentId:k.parentId,...q})})})}const qoe=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function cq(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,onError:s}=Xe(qoe,Ct),o=Loe(e.onlyRenderVisibleElements),l=Boe();return v.jsx("div",{className:"react-flow__nodes",style:km,children:o.map(u=>v.jsx(zoe,{id:u,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:l,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,nodeClickDistance:e.nodeClickDistance,onError:s},u))})}cq.displayName="NodeRenderer";const Voe=O.memo(cq);function Hoe(e){return Xe(O.useCallback(n=>{if(!e)return n.edges.map(i=>i.id);const r=[];if(n.width&&n.height)for(const i of n.edges){const s=n.nodeLookup.get(i.source),o=n.nodeLookup.get(i.target);s&&o&&Gie({sourceNode:s,targetNode:o,width:n.width,height:n.height,transform:n.transform})&&r.push(i.id)}return r},[e]),Ct)}const Foe=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e}};return v.jsx("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},Uoe=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e,fill:e}};return v.jsx("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},TR={[jp.Arrow]:Foe,[jp.ArrowClosed]:Uoe};function $oe(e){const t=yt();return O.useMemo(()=>Object.prototype.hasOwnProperty.call(TR,e)?TR[e]:(t.getState().onError?.("009",xi.error009(e)),null),[e])}const Goe=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:s="strokeWidth",strokeWidth:o,orient:l="auto-start-reverse"})=>{const u=$oe(t);return u?v.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:l,refX:"0",refY:"0",children:v.jsx(u,{color:n,strokeWidth:o})}):null},uq=({defaultColor:e,rfId:t})=>{const n=Xe(s=>s.edges),r=Xe(s=>s.defaultEdgeOptions),i=O.useMemo(()=>Jie(n,{id:t,defaultColor:e,defaultMarkerStart:r?.markerStart,defaultMarkerEnd:r?.markerEnd}),[n,r,t,e]);return i.length?v.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:v.jsx("defs",{children:i.map(s=>v.jsx(Goe,{id:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient},s.id))})}):null};uq.displayName="MarkerDefinitions";var Koe=O.memo(uq);function dq({x:e,y:t,label:n,labelStyle:r,labelShowBg:i=!0,labelBgStyle:s,labelBgPadding:o=[2,4],labelBgBorderRadius:l=2,children:u,className:d,...h}){const[p,g]=O.useState({x:1,y:0,width:0,height:0}),y=Kt(["react-flow__edge-textwrapper",d]),x=O.useRef(null);return O.useEffect(()=>{if(x.current){const S=x.current.getBBox();g({x:S.x,y:S.y,width:S.width,height:S.height})}},[n]),n?v.jsxs("g",{transform:`translate(${e-p.width/2} ${t-p.height/2})`,className:y,visibility:p.width?"visible":"hidden",...h,children:[i&&v.jsx("rect",{width:p.width+2*o[0],x:-o[0],y:-o[1],height:p.height+2*o[1],className:"react-flow__edge-textbg",style:s,rx:l,ry:l}),v.jsx("text",{className:"react-flow__edge-text",y:p.height/2,dy:"0.3em",ref:x,style:r,children:n}),u]}):null}dq.displayName="EdgeText";const Yoe=O.memo(dq);function Tm({path:e,labelX:t,labelY:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,interactionWidth:d=20,...h}){return v.jsxs(v.Fragment,{children:[v.jsx("path",{...h,d:e,fill:"none",className:Kt(["react-flow__edge-path",h.className])}),d?v.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:d,className:"react-flow__edge-interaction"}):null,r&&$r(t)&&$r(n)?v.jsx(Yoe,{x:t,y:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u}):null]})}function NR({pos:e,x1:t,y1:n,x2:r,y2:i}){return e===Ne.Left||e===Ne.Right?[.5*(t+r),n]:[t,.5*(n+i)]}function fq({sourceX:e,sourceY:t,sourcePosition:n=Ne.Bottom,targetX:r,targetY:i,targetPosition:s=Ne.Top}){const[o,l]=NR({pos:n,x1:e,y1:t,x2:r,y2:i}),[u,d]=NR({pos:s,x1:r,y1:i,x2:e,y2:t}),[h,p,g,y]=Pz({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:o,sourceControlY:l,targetControlX:u,targetControlY:d});return[`M${e},${t} C${o},${l} ${u},${d} ${r},${i}`,h,p,g,y]}function hq(e){return O.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o,targetPosition:l,label:u,labelStyle:d,labelShowBg:h,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:y,style:x,markerEnd:S,markerStart:w,interactionWidth:E})=>{const[N,k,T]=fq({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:l}),A=e.isInternal?void 0:t;return v.jsx(Tm,{id:A,path:N,labelX:k,labelY:T,label:u,labelStyle:d,labelShowBg:h,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:y,style:x,markerEnd:S,markerStart:w,interactionWidth:E})})}const Woe=hq({isInternal:!1}),pq=hq({isInternal:!0});Woe.displayName="SimpleBezierEdge";pq.displayName="SimpleBezierEdgeInternal";function mq(e){return O.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p,style:g,sourcePosition:y=Ne.Bottom,targetPosition:x=Ne.Top,markerEnd:S,markerStart:w,pathOptions:E,interactionWidth:N})=>{const[k,T,A]=jC({sourceX:n,sourceY:r,sourcePosition:y,targetX:i,targetY:s,targetPosition:x,borderRadius:E?.borderRadius,offset:E?.offset,stepPosition:E?.stepPosition}),_=e.isInternal?void 0:t;return v.jsx(Tm,{id:_,path:k,labelX:T,labelY:A,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p,style:g,markerEnd:S,markerStart:w,interactionWidth:N})})}const gq=mq({isInternal:!1}),yq=mq({isInternal:!0});gq.displayName="SmoothStepEdge";yq.displayName="SmoothStepEdgeInternal";function vq(e){return O.memo(({id:t,...n})=>{const r=e.isInternal?void 0:t;return v.jsx(gq,{...n,id:r,pathOptions:O.useMemo(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}const Xoe=vq({isInternal:!1}),bq=vq({isInternal:!0});Xoe.displayName="StepEdge";bq.displayName="StepEdgeInternal";function xq(e){return O.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p,style:g,markerEnd:y,markerStart:x,interactionWidth:S})=>{const[w,E,N]=Iz({sourceX:n,sourceY:r,targetX:i,targetY:s}),k=e.isInternal?void 0:t;return v.jsx(Tm,{id:k,path:w,labelX:E,labelY:N,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p,style:g,markerEnd:y,markerStart:x,interactionWidth:S})})}const Zoe=xq({isInternal:!1}),wq=xq({isInternal:!0});Zoe.displayName="StraightEdge";wq.displayName="StraightEdgeInternal";function Sq(e){return O.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o=Ne.Bottom,targetPosition:l=Ne.Top,label:u,labelStyle:d,labelShowBg:h,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:y,style:x,markerEnd:S,markerStart:w,pathOptions:E,interactionWidth:N})=>{const[k,T,A]=xk({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:l,curvature:E?.curvature}),_=e.isInternal?void 0:t;return v.jsx(Tm,{id:_,path:k,labelX:T,labelY:A,label:u,labelStyle:d,labelShowBg:h,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:y,style:x,markerEnd:S,markerStart:w,interactionWidth:N})})}const Qoe=Sq({isInternal:!1}),Cq=Sq({isInternal:!0});Qoe.displayName="BezierEdge";Cq.displayName="BezierEdgeInternal";const AR={default:Cq,straight:wq,step:bq,smoothstep:yq,simplebezier:pq},MR={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},Joe=(e,t,n)=>n===Ne.Left?e-t:n===Ne.Right?e+t:e,eae=(e,t,n)=>n===Ne.Top?e-t:n===Ne.Bottom?e+t:e,_R="react-flow__edgeupdater";function DR({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:s,onMouseOut:o,type:l}){return v.jsx("circle",{onMouseDown:i,onMouseEnter:s,onMouseOut:o,className:Kt([_R,`${_R}-${l}`]),cx:Joe(t,r,e),cy:eae(n,r,e),r,stroke:"transparent",fill:"transparent"})}function tae({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:i,targetX:s,targetY:o,sourcePosition:l,targetPosition:u,onReconnect:d,onReconnectStart:h,onReconnectEnd:p,setReconnecting:g,setUpdateHover:y}){const x=yt(),S=(T,A)=>{if(T.button!==0)return;const{autoPanOnConnect:_,domNode:R,isValidConnection:D,connectionMode:B,connectionRadius:$,lib:z,onConnectStart:V,onConnectEnd:Y,cancelConnection:I,nodeLookup:F,rfId:L,panBy:q,updateConnection:W}=x.getState(),J=A.type==="target",P=(ce,H)=>{g(!1),p?.(ce,n,A.type,H)},G=ce=>d?.(n,ce),oe=(ce,H)=>{g(!0),h?.(T,n,A.type),V?.(ce,H)};BC.onPointerDown(T.nativeEvent,{autoPanOnConnect:_,connectionMode:B,connectionRadius:$,domNode:R,handleId:A.id,nodeId:A.nodeId,nodeLookup:F,isTarget:J,edgeUpdaterType:A.type,lib:z,flowId:L,cancelConnection:I,panBy:q,isValidConnection:D,onConnect:G,onConnectStart:oe,onConnectEnd:Y,onReconnectEnd:P,updateConnection:W,getTransform:()=>x.getState().transform,getFromHandle:()=>x.getState().connection.fromHandle,dragThreshold:x.getState().connectionDragThreshold,handleDomNode:T.currentTarget})},w=T=>S(T,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),E=T=>S(T,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),N=()=>y(!0),k=()=>y(!1);return v.jsxs(v.Fragment,{children:[(e===!0||e==="source")&&v.jsx(DR,{position:l,centerX:r,centerY:i,radius:t,onMouseDown:w,onMouseEnter:N,onMouseOut:k,type:"source"}),(e===!0||e==="target")&&v.jsx(DR,{position:u,centerX:s,centerY:o,radius:t,onMouseDown:E,onMouseEnter:N,onMouseOut:k,type:"target"})]})}function nae({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:i,onDoubleClick:s,onContextMenu:o,onMouseEnter:l,onMouseMove:u,onMouseLeave:d,reconnectRadius:h,onReconnect:p,onReconnectStart:g,onReconnectEnd:y,rfId:x,edgeTypes:S,noPanClassName:w,onError:E,disableKeyboardA11y:N}){let k=Xe(Ae=>Ae.edgeLookup.get(e));const T=Xe(Ae=>Ae.defaultEdgeOptions);k=T?{...T,...k}:k;let A=k.type||"default",_=S?.[A]||AR[A];_===void 0&&(E?.("011",xi.error011(A)),A="default",_=S?.default||AR.default);const R=!!(k.focusable||t&&typeof k.focusable>"u"),D=typeof p<"u"&&(k.reconnectable||n&&typeof k.reconnectable>"u"),B=!!(k.selectable||r&&typeof k.selectable>"u"),$=O.useRef(null),[z,V]=O.useState(!1),[Y,I]=O.useState(!1),F=yt(),{zIndex:L,sourceX:q,sourceY:W,targetX:J,targetY:P,sourcePosition:G,targetPosition:oe}=Xe(O.useCallback(Ae=>{const Te=Ae.nodeLookup.get(k.source),we=Ae.nodeLookup.get(k.target);if(!Te||!we)return{zIndex:k.zIndex,...MR};const Se=Qie({id:e,sourceNode:Te,targetNode:we,sourceHandle:k.sourceHandle||null,targetHandle:k.targetHandle||null,connectionMode:Ae.connectionMode,onError:E});return{zIndex:$ie({selected:k.selected,zIndex:k.zIndex,sourceNode:Te,targetNode:we,elevateOnSelect:Ae.elevateEdgesOnSelect}),...Se||MR}},[k.source,k.target,k.sourceHandle,k.targetHandle,k.selected,k.zIndex]),Ct),ce=O.useMemo(()=>k.markerStart?`url('#${LC(k.markerStart,x)}')`:void 0,[k.markerStart,x]),H=O.useMemo(()=>k.markerEnd?`url('#${LC(k.markerEnd,x)}')`:void 0,[k.markerEnd,x]);if(k.hidden||q===null||W===null||J===null||P===null)return null;const X=Ae=>{const{addSelectedEdges:Te,unselectNodesAndEdges:we,multiSelectionActive:Se}=F.getState();B&&(F.setState({nodesSelectionActive:!1}),k.selected&&Se?(we({nodes:[],edges:[k]}),$.current?.blur()):Te([e])),i&&i(Ae,k)},Q=s?Ae=>{s(Ae,{...k})}:void 0,ie=o?Ae=>{o(Ae,{...k})}:void 0,te=l?Ae=>{l(Ae,{...k})}:void 0,ge=u?Ae=>{u(Ae,{...k})}:void 0,xe=d?Ae=>{d(Ae,{...k})}:void 0,Me=Ae=>{if(!N&&wz.includes(Ae.key)&&B){const{unselectNodesAndEdges:Te,addSelectedEdges:we}=F.getState();Ae.key==="Escape"?($.current?.blur(),Te({edges:[k]})):we([e])}};return v.jsx("svg",{style:{zIndex:L},children:v.jsxs("g",{className:Kt(["react-flow__edge",`react-flow__edge-${A}`,k.className,w,{selected:k.selected,animated:k.animated,inactive:!B&&!i,updating:z,selectable:B}]),onClick:X,onDoubleClick:Q,onContextMenu:ie,onMouseEnter:te,onMouseMove:ge,onMouseLeave:xe,onKeyDown:R?Me:void 0,tabIndex:R?0:void 0,role:k.ariaRole??(R?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":k.ariaLabel===null?void 0:k.ariaLabel||`Edge from ${k.source} to ${k.target}`,"aria-describedby":R?`${Qz}-${x}`:void 0,ref:$,...k.domAttributes,children:[!Y&&v.jsx(_,{id:e,source:k.source,target:k.target,type:k.type,selected:k.selected,animated:k.animated,selectable:B,deletable:k.deletable??!0,label:k.label,labelStyle:k.labelStyle,labelShowBg:k.labelShowBg,labelBgStyle:k.labelBgStyle,labelBgPadding:k.labelBgPadding,labelBgBorderRadius:k.labelBgBorderRadius,sourceX:q,sourceY:W,targetX:J,targetY:P,sourcePosition:G,targetPosition:oe,data:k.data,style:k.style,sourceHandleId:k.sourceHandle,targetHandleId:k.targetHandle,markerStart:ce,markerEnd:H,pathOptions:"pathOptions"in k?k.pathOptions:void 0,interactionWidth:k.interactionWidth}),D&&v.jsx(tae,{edge:k,isReconnectable:D,reconnectRadius:h,onReconnect:p,onReconnectStart:g,onReconnectEnd:y,sourceX:q,sourceY:W,targetX:J,targetY:P,sourcePosition:G,targetPosition:oe,setUpdateHover:V,setReconnecting:I})]})})}const rae=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function Eq({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:i,onReconnect:s,onEdgeContextMenu:o,onEdgeMouseEnter:l,onEdgeMouseMove:u,onEdgeMouseLeave:d,onEdgeClick:h,reconnectRadius:p,onEdgeDoubleClick:g,onReconnectStart:y,onReconnectEnd:x,disableKeyboardA11y:S}){const{edgesFocusable:w,edgesReconnectable:E,elementsSelectable:N,onError:k}=Xe(rae,Ct),T=Hoe(t);return v.jsxs("div",{className:"react-flow__edges",children:[v.jsx(Koe,{defaultColor:e,rfId:n}),T.map(A=>v.jsx(nae,{id:A,edgesFocusable:w,edgesReconnectable:E,elementsSelectable:N,noPanClassName:i,onReconnect:s,onContextMenu:o,onMouseEnter:l,onMouseMove:u,onMouseLeave:d,onClick:h,reconnectRadius:p,onDoubleClick:g,onReconnectStart:y,onReconnectEnd:x,rfId:n,onError:k,edgeTypes:r,disableKeyboardA11y:S},A))]})}Eq.displayName="EdgeRenderer";const iae=O.memo(Eq),sae=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function oae({children:e}){const t=Xe(sae);return v.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function aae(e){const t=ld(),n=O.useRef(!1);O.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const lae=e=>e.panZoom?.syncViewport;function cae(e){const t=Xe(lae),n=yt();return O.useEffect(()=>{e&&(t?.(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function uae(e){return e.connection.inProgress?{...e.connection,to:Nd(e.connection.to,e.transform)}:{...e.connection}}function dae(e){return uae}function fae(e){const t=dae();return Xe(t,Ct)}const hae=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function pae({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:i,width:s,height:o,isValid:l,inProgress:u}=Xe(hae,Ct);return!(s&&i&&u)?null:v.jsx("svg",{style:e,width:s,height:o,className:"react-flow__connectionline react-flow__container",children:v.jsx("g",{className:Kt(["react-flow__connection",Ez(l)]),children:v.jsx(kq,{style:t,type:n,CustomComponent:r,isValid:l})})})}const kq=({style:e,type:t=Hs.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:i,from:s,fromNode:o,fromHandle:l,fromPosition:u,to:d,toNode:h,toHandle:p,toPosition:g}=fae();if(!i)return;if(n)return v.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:o,fromHandle:l,fromX:s.x,fromY:s.y,toX:d.x,toY:d.y,fromPosition:u,toPosition:g,connectionStatus:Ez(r),toNode:h,toHandle:p});let y="";const x={sourceX:s.x,sourceY:s.y,sourcePosition:u,targetX:d.x,targetY:d.y,targetPosition:g};switch(t){case Hs.Bezier:[y]=xk(x);break;case Hs.SimpleBezier:[y]=fq(x);break;case Hs.Step:[y]=jC({...x,borderRadius:0});break;case Hs.SmoothStep:[y]=jC(x);break;default:[y]=Iz(x)}return v.jsx("path",{d:y,fill:"none",className:"react-flow__connection-path",style:e})};kq.displayName="ConnectionLine";const mae={};function RR(e=mae){O.useRef(e),yt(),O.useEffect(()=>{},[e])}function gae(){yt(),O.useRef(!1),O.useEffect(()=>{},[])}function Tq({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:i,onNodeDoubleClick:s,onEdgeDoubleClick:o,onNodeMouseEnter:l,onNodeMouseMove:u,onNodeMouseLeave:d,onNodeContextMenu:h,onSelectionContextMenu:p,onSelectionStart:g,onSelectionEnd:y,connectionLineType:x,connectionLineStyle:S,connectionLineComponent:w,connectionLineContainerStyle:E,selectionKeyCode:N,selectionOnDrag:k,selectionMode:T,multiSelectionKeyCode:A,panActivationKeyCode:_,zoomActivationKeyCode:R,deleteKeyCode:D,onlyRenderVisibleElements:B,elementsSelectable:$,defaultViewport:z,translateExtent:V,minZoom:Y,maxZoom:I,preventScrolling:F,defaultMarkerColor:L,zoomOnScroll:q,zoomOnPinch:W,panOnScroll:J,panOnScrollSpeed:P,panOnScrollMode:G,zoomOnDoubleClick:oe,panOnDrag:ce,onPaneClick:H,onPaneMouseEnter:X,onPaneMouseMove:Q,onPaneMouseLeave:ie,onPaneScroll:te,onPaneContextMenu:ge,paneClickDistance:xe,nodeClickDistance:Me,onEdgeContextMenu:Ae,onEdgeMouseEnter:Te,onEdgeMouseMove:we,onEdgeMouseLeave:Se,reconnectRadius:Je,onReconnect:ke,onReconnectStart:Pt,onReconnectEnd:bn,noDragClassName:jr,noWheelClassName:Wt,noPanClassName:Bt,disableKeyboardA11y:ut,nodeExtent:dr,rfId:On,viewport:xn,onViewportChange:pt}){return RR(e),RR(t),gae(),aae(n),cae(xn),v.jsx(Ooe,{onPaneClick:H,onPaneMouseEnter:X,onPaneMouseMove:Q,onPaneMouseLeave:ie,onPaneContextMenu:ge,onPaneScroll:te,paneClickDistance:xe,deleteKeyCode:D,selectionKeyCode:N,selectionOnDrag:k,selectionMode:T,onSelectionStart:g,onSelectionEnd:y,multiSelectionKeyCode:A,panActivationKeyCode:_,zoomActivationKeyCode:R,elementsSelectable:$,zoomOnScroll:q,zoomOnPinch:W,zoomOnDoubleClick:oe,panOnScroll:J,panOnScrollSpeed:P,panOnScrollMode:G,panOnDrag:ce,defaultViewport:z,translateExtent:V,minZoom:Y,maxZoom:I,onSelectionContextMenu:p,preventScrolling:F,noDragClassName:jr,noWheelClassName:Wt,noPanClassName:Bt,disableKeyboardA11y:ut,onViewportChange:pt,isControlledViewport:!!xn,children:v.jsxs(oae,{children:[v.jsx(iae,{edgeTypes:t,onEdgeClick:i,onEdgeDoubleClick:o,onReconnect:ke,onReconnectStart:Pt,onReconnectEnd:bn,onlyRenderVisibleElements:B,onEdgeContextMenu:Ae,onEdgeMouseEnter:Te,onEdgeMouseMove:we,onEdgeMouseLeave:Se,reconnectRadius:Je,defaultMarkerColor:L,noPanClassName:Bt,disableKeyboardA11y:ut,rfId:On}),v.jsx(pae,{style:S,type:x,component:w,containerStyle:E}),v.jsx("div",{className:"react-flow__edgelabel-renderer"}),v.jsx(Voe,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:s,onNodeMouseEnter:l,onNodeMouseMove:u,onNodeMouseLeave:d,onNodeContextMenu:h,nodeClickDistance:Me,onlyRenderVisibleElements:B,noPanClassName:Bt,noDragClassName:jr,disableKeyboardA11y:ut,nodeExtent:dr,rfId:On}),v.jsx("div",{className:"react-flow__viewport-portal"})]})})}Tq.displayName="GraphView";const yae=O.memo(Tq),OR=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,fitViewOptions:l,minZoom:u=.5,maxZoom:d=2,nodeOrigin:h,nodeExtent:p}={})=>{const g=new Map,y=new Map,x=new Map,S=new Map,w=r??t??[],E=n??e??[],N=h??[0,0],k=p??nd;qz(x,S,w);const T=PC(E,g,y,{nodeOrigin:N,nodeExtent:k,elevateNodesOnSelect:!1});let A=[0,0,1];if(o&&i&&s){const _=kd(g,{filter:$=>!!(($.width||$.initialWidth)&&($.height||$.initialHeight))}),{x:R,y:D,zoom:B}=wm(_,i,s,u,d,l?.padding??.1);A=[R,D,B]}return{rfId:"1",width:0,height:0,transform:A,nodes:E,nodesInitialized:T,nodeLookup:g,parentLookup:y,edges:w,edgeLookup:S,connectionLookup:x,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:u,maxZoom:d,translateExtent:nd,nodeExtent:k,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:fa.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:N,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:o??!1,fitViewOptions:l,fitViewResolver:null,connection:{...Cz},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:zie,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:Sz}},vae=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,fitViewOptions:l,minZoom:u,maxZoom:d,nodeOrigin:h,nodeExtent:p})=>Ise((g,y)=>{async function x(){const{nodeLookup:S,panZoom:w,fitViewOptions:E,fitViewResolver:N,width:k,height:T,minZoom:A,maxZoom:_}=y();w&&(await Bie({nodes:S,width:k,height:T,panZoom:w,minZoom:A,maxZoom:_},E),N?.resolve(!0),g({fitViewResolver:null}))}return{...OR({nodes:e,edges:t,width:i,height:s,fitView:o,fitViewOptions:l,minZoom:u,maxZoom:d,nodeOrigin:h,nodeExtent:p,defaultNodes:n,defaultEdges:r}),setNodes:S=>{const{nodeLookup:w,parentLookup:E,nodeOrigin:N,elevateNodesOnSelect:k,fitViewQueued:T}=y(),A=PC(S,w,E,{nodeOrigin:N,nodeExtent:p,elevateNodesOnSelect:k,checkEquality:!0});T&&A?(x(),g({nodes:S,nodesInitialized:A,fitViewQueued:!1,fitViewOptions:void 0})):g({nodes:S,nodesInitialized:A})},setEdges:S=>{const{connectionLookup:w,edgeLookup:E}=y();qz(w,E,S),g({edges:S})},setDefaultNodesAndEdges:(S,w)=>{if(S){const{setNodes:E}=y();E(S),g({hasDefaultNodes:!0})}if(w){const{setEdges:E}=y();E(w),g({hasDefaultEdges:!0})}},updateNodeInternals:S=>{const{triggerNodeChanges:w,nodeLookup:E,parentLookup:N,domNode:k,nodeOrigin:T,nodeExtent:A,debug:_,fitViewQueued:R}=y(),{changes:D,updatedInternals:B}=ise(S,E,N,k,T,A);B&&(tse(E,N,{nodeOrigin:T,nodeExtent:A}),R?(x(),g({fitViewQueued:!1,fitViewOptions:void 0})):g({}),D?.length>0&&(_&&console.log("React Flow: trigger node changes",D),w?.(D)))},updateNodePositions:(S,w=!1)=>{const E=[],N=[],{nodeLookup:k,triggerNodeChanges:T}=y();for(const[A,_]of S){const R=k.get(A),D=!!(R?.expandParent&&R?.parentId&&_?.position),B={id:A,type:"position",position:D?{x:Math.max(0,_.position.x),y:Math.max(0,_.position.y)}:_.position,dragging:w};D&&R.parentId&&E.push({id:A,parentId:R.parentId,rect:{..._.internals.positionAbsolute,width:_.measured.width??0,height:_.measured.height??0}}),N.push(B)}if(E.length>0){const{parentLookup:A,nodeOrigin:_}=y(),R=kk(E,k,A,_);N.push(...R)}T(N)},triggerNodeChanges:S=>{const{onNodesChange:w,setNodes:E,nodes:N,hasDefaultNodes:k,debug:T}=y();if(S?.length){if(k){const A=tq(S,N);E(A)}T&&console.log("React Flow: trigger node changes",S),w?.(S)}},triggerEdgeChanges:S=>{const{onEdgesChange:w,setEdges:E,edges:N,hasDefaultEdges:k,debug:T}=y();if(S?.length){if(k){const A=nq(S,N);E(A)}T&&console.log("React Flow: trigger edge changes",S),w?.(S)}},addSelectedNodes:S=>{const{multiSelectionActive:w,edgeLookup:E,nodeLookup:N,triggerNodeChanges:k,triggerEdgeChanges:T}=y();if(w){const A=S.map(_=>zo(_,!0));k(A);return}k(El(N,new Set([...S]),!0)),T(El(E))},addSelectedEdges:S=>{const{multiSelectionActive:w,edgeLookup:E,nodeLookup:N,triggerNodeChanges:k,triggerEdgeChanges:T}=y();if(w){const A=S.map(_=>zo(_,!0));T(A);return}T(El(E,new Set([...S]))),k(El(N,new Set,!0))},unselectNodesAndEdges:({nodes:S,edges:w}={})=>{const{edges:E,nodes:N,nodeLookup:k,triggerNodeChanges:T,triggerEdgeChanges:A}=y(),_=S||N,R=w||E,D=_.map($=>{const z=k.get($.id);return z&&(z.selected=!1),zo($.id,!1)}),B=R.map($=>zo($.id,!1));T(D),A(B)},setMinZoom:S=>{const{panZoom:w,maxZoom:E}=y();w?.setScaleExtent([S,E]),g({minZoom:S})},setMaxZoom:S=>{const{panZoom:w,minZoom:E}=y();w?.setScaleExtent([E,S]),g({maxZoom:S})},setTranslateExtent:S=>{y().panZoom?.setTranslateExtent(S),g({translateExtent:S})},setPaneClickDistance:S=>{y().panZoom?.setClickDistance(S)},resetSelectedElements:()=>{const{edges:S,nodes:w,triggerNodeChanges:E,triggerEdgeChanges:N,elementsSelectable:k}=y();if(!k)return;const T=w.reduce((_,R)=>R.selected?[..._,zo(R.id,!1)]:_,[]),A=S.reduce((_,R)=>R.selected?[..._,zo(R.id,!1)]:_,[]);E(T),N(A)},setNodeExtent:S=>{const{nodes:w,nodeLookup:E,parentLookup:N,nodeOrigin:k,elevateNodesOnSelect:T,nodeExtent:A}=y();S[0][0]===A[0][0]&&S[0][1]===A[0][1]&&S[1][0]===A[1][0]&&S[1][1]===A[1][1]||(PC(w,E,N,{nodeOrigin:k,nodeExtent:S,elevateNodesOnSelect:T,checkEquality:!1}),g({nodeExtent:S}))},panBy:S=>{const{transform:w,width:E,height:N,panZoom:k,translateExtent:T}=y();return sse({delta:S,panZoom:k,transform:w,translateExtent:T,width:E,height:N})},setCenter:async(S,w,E)=>{const{width:N,height:k,maxZoom:T,panZoom:A}=y();if(!A)return Promise.resolve(!1);const _=typeof E?.zoom<"u"?E.zoom:T;return await A.setViewport({x:N/2-S*_,y:k/2-w*_,zoom:_},{duration:E?.duration,ease:E?.ease,interpolate:E?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{g({connection:{...Cz}})},updateConnection:S=>{g({connection:S})},reset:()=>g({...OR()})}},Object.is);function Nq({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:i,initialHeight:s,initialMinZoom:o,initialMaxZoom:l,initialFitViewOptions:u,fitView:d,nodeOrigin:h,nodeExtent:p,children:g}){const[y]=O.useState(()=>vae({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:d,minZoom:o,maxZoom:l,fitViewOptions:u,nodeOrigin:h,nodeExtent:p}));return v.jsx(zse,{value:y,children:v.jsx(loe,{children:g})})}function bae({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:i,width:s,height:o,fitView:l,fitViewOptions:u,minZoom:d,maxZoom:h,nodeOrigin:p,nodeExtent:g}){return O.useContext(Cm)?v.jsx(v.Fragment,{children:e}):v.jsx(Nq,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:i,initialWidth:s,initialHeight:o,fitView:l,initialFitViewOptions:u,initialMinZoom:d,initialMaxZoom:h,nodeOrigin:p,nodeExtent:g,children:e})}const xae={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function wae({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:s,edgeTypes:o,onNodeClick:l,onEdgeClick:u,onInit:d,onMove:h,onMoveStart:p,onMoveEnd:g,onConnect:y,onConnectStart:x,onConnectEnd:S,onClickConnectStart:w,onClickConnectEnd:E,onNodeMouseEnter:N,onNodeMouseMove:k,onNodeMouseLeave:T,onNodeContextMenu:A,onNodeDoubleClick:_,onNodeDragStart:R,onNodeDrag:D,onNodeDragStop:B,onNodesDelete:$,onEdgesDelete:z,onDelete:V,onSelectionChange:Y,onSelectionDragStart:I,onSelectionDrag:F,onSelectionDragStop:L,onSelectionContextMenu:q,onSelectionStart:W,onSelectionEnd:J,onBeforeDelete:P,connectionMode:G,connectionLineType:oe=Hs.Bezier,connectionLineStyle:ce,connectionLineComponent:H,connectionLineContainerStyle:X,deleteKeyCode:Q="Backspace",selectionKeyCode:ie="Shift",selectionOnDrag:te=!1,selectionMode:ge=rd.Full,panActivationKeyCode:xe="Space",multiSelectionKeyCode:Me=sd()?"Meta":"Control",zoomActivationKeyCode:Ae=sd()?"Meta":"Control",snapToGrid:Te,snapGrid:we,onlyRenderVisibleElements:Se=!1,selectNodesOnDrag:Je,nodesDraggable:ke,autoPanOnNodeFocus:Pt,nodesConnectable:bn,nodesFocusable:jr,nodeOrigin:Wt=Jz,edgesFocusable:Bt,edgesReconnectable:ut,elementsSelectable:dr=!0,defaultViewport:On=Qse,minZoom:xn=.5,maxZoom:pt=2,translateExtent:It=nd,preventScrolling:zt=!0,nodeExtent:qe,defaultMarkerColor:Wr="#b1b1b7",zoomOnScroll:Xr=!0,zoomOnPinch:en=!0,panOnScroll:tn=!1,panOnScrollSpeed:jn=.5,panOnScrollMode:is=ia.Free,zoomOnDoubleClick:Gn=!0,panOnDrag:Ql=!0,onPaneClick:ss,onPaneMouseEnter:as,onPaneMouseMove:ls,onPaneMouseLeave:Zr,onPaneScroll:Jl,onPaneContextMenu:co,paneClickDistance:Qr=0,nodeClickDistance:uo=0,children:fo,onReconnect:ho,onReconnectStart:ec,onReconnectEnd:fr,onEdgeContextMenu:qt,onEdgeDoubleClick:nn,onEdgeMouseEnter:Jr,onEdgeMouseMove:ei,onEdgeMouseLeave:po,reconnectRadius:tc=10,onNodesChange:ka,onEdgesChange:Ci,noDragClassName:mo="nodrag",noWheelClassName:ti="nowheel",noPanClassName:Kn="nopan",fitView:ni,fitViewOptions:Lr,connectOnClick:Et,attributionPosition:Ta,proOptions:go,defaultEdgeOptions:Pr,elevateNodesOnSelect:ri,elevateEdgesOnSelect:nc,disableKeyboardA11y:yo=!1,autoPanOnConnect:Na,autoPanOnNodeDrag:ae,autoPanSpeed:ne,connectionRadius:fe,isValidConnection:ye,onError:ve,style:Ce,id:Oe,nodeDragThreshold:He,connectionDragThreshold:Dt,viewport:Yn,onViewportChange:hr,width:bt,height:Ze,colorMode:Xt="light",debug:cs,onScroll:rc,ariaLabelConfig:Aa,...$m},Ln){const vo=Oe||"1",Od=noe(Xt),ic=O.useCallback(Ei=>{Ei.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),rc?.(Ei)},[rc]);return v.jsx("div",{"data-testid":"rf__wrapper",...$m,onScroll:ic,style:{...Ce,...xae},ref:Ln,className:Kt(["react-flow",i,Od]),id:Oe,role:"application",children:v.jsxs(bae,{nodes:e,edges:t,width:bt,height:Ze,fitView:ni,fitViewOptions:Lr,minZoom:xn,maxZoom:pt,nodeOrigin:Wt,nodeExtent:qe,children:[v.jsx(yae,{onInit:d,onNodeClick:l,onEdgeClick:u,onNodeMouseEnter:N,onNodeMouseMove:k,onNodeMouseLeave:T,onNodeContextMenu:A,onNodeDoubleClick:_,nodeTypes:s,edgeTypes:o,connectionLineType:oe,connectionLineStyle:ce,connectionLineComponent:H,connectionLineContainerStyle:X,selectionKeyCode:ie,selectionOnDrag:te,selectionMode:ge,deleteKeyCode:Q,multiSelectionKeyCode:Me,panActivationKeyCode:xe,zoomActivationKeyCode:Ae,onlyRenderVisibleElements:Se,defaultViewport:On,translateExtent:It,minZoom:xn,maxZoom:pt,preventScrolling:zt,zoomOnScroll:Xr,zoomOnPinch:en,zoomOnDoubleClick:Gn,panOnScroll:tn,panOnScrollSpeed:jn,panOnScrollMode:is,panOnDrag:Ql,onPaneClick:ss,onPaneMouseEnter:as,onPaneMouseMove:ls,onPaneMouseLeave:Zr,onPaneScroll:Jl,onPaneContextMenu:co,paneClickDistance:Qr,nodeClickDistance:uo,onSelectionContextMenu:q,onSelectionStart:W,onSelectionEnd:J,onReconnect:ho,onReconnectStart:ec,onReconnectEnd:fr,onEdgeContextMenu:qt,onEdgeDoubleClick:nn,onEdgeMouseEnter:Jr,onEdgeMouseMove:ei,onEdgeMouseLeave:po,reconnectRadius:tc,defaultMarkerColor:Wr,noDragClassName:mo,noWheelClassName:ti,noPanClassName:Kn,rfId:vo,disableKeyboardA11y:yo,nodeExtent:qe,viewport:Yn,onViewportChange:hr}),v.jsx(toe,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:y,onConnectStart:x,onConnectEnd:S,onClickConnectStart:w,onClickConnectEnd:E,nodesDraggable:ke,autoPanOnNodeFocus:Pt,nodesConnectable:bn,nodesFocusable:jr,edgesFocusable:Bt,edgesReconnectable:ut,elementsSelectable:dr,elevateNodesOnSelect:ri,elevateEdgesOnSelect:nc,minZoom:xn,maxZoom:pt,nodeExtent:qe,onNodesChange:ka,onEdgesChange:Ci,snapToGrid:Te,snapGrid:we,connectionMode:G,translateExtent:It,connectOnClick:Et,defaultEdgeOptions:Pr,fitView:ni,fitViewOptions:Lr,onNodesDelete:$,onEdgesDelete:z,onDelete:V,onNodeDragStart:R,onNodeDrag:D,onNodeDragStop:B,onSelectionDrag:F,onSelectionDragStart:I,onSelectionDragStop:L,onMove:h,onMoveStart:p,onMoveEnd:g,noPanClassName:Kn,nodeOrigin:Wt,rfId:vo,autoPanOnConnect:Na,autoPanOnNodeDrag:ae,autoPanSpeed:ne,onError:ve,connectionRadius:fe,isValidConnection:ye,selectNodesOnDrag:Je,nodeDragThreshold:He,connectionDragThreshold:Dt,onBeforeDelete:P,paneClickDistance:Qr,debug:cs,ariaLabelConfig:Aa}),v.jsx(Zse,{onSelectionChange:Y}),fo,v.jsx(Gse,{proOptions:go,position:Ta}),v.jsx($se,{rfId:vo,disableKeyboardA11y:yo})]})})}var Sae=rq(wae);function Cae(e){const[t,n]=O.useState(e),r=O.useCallback(i=>n(s=>tq(i,s)),[]);return[t,n,r]}function Eae(e){const[t,n]=O.useState(e),r=O.useCallback(i=>n(s=>nq(i,s)),[]);return[t,n,r]}function kae({dimensions:e,lineWidth:t,variant:n,className:r}){return v.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:Kt(["react-flow__background-pattern",n,r])})}function Tae({radius:e,className:t}){return v.jsx("circle",{cx:e,cy:e,r:e,className:Kt(["react-flow__background-pattern","dots",t])})}var Qs;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Qs||(Qs={}));const Nae={[Qs.Dots]:1,[Qs.Lines]:1,[Qs.Cross]:6},Aae=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function Aq({id:e,variant:t=Qs.Dots,gap:n=20,size:r,lineWidth:i=1,offset:s=0,color:o,bgColor:l,style:u,className:d,patternClassName:h}){const p=O.useRef(null),{transform:g,patternId:y}=Xe(Aae,Ct),x=r||Nae[t],S=t===Qs.Dots,w=t===Qs.Cross,E=Array.isArray(n)?n:[n,n],N=[E[0]*g[2]||1,E[1]*g[2]||1],k=x*g[2],T=Array.isArray(s)?s:[s,s],A=w?[k,k]:N,_=[T[0]*g[2]||1+A[0]/2,T[1]*g[2]||1+A[1]/2],R=`${y}${e||""}`;return v.jsxs("svg",{className:Kt(["react-flow__background",d]),style:{...u,...km,"--xy-background-color-props":l,"--xy-background-pattern-color-props":o},ref:p,"data-testid":"rf__background",children:[v.jsx("pattern",{id:R,x:g[0]%N[0],y:g[1]%N[1],width:N[0],height:N[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${_[0]},-${_[1]})`,children:S?v.jsx(Tae,{radius:k/2,className:h}):v.jsx(kae,{dimensions:A,lineWidth:i,variant:t,className:h})}),v.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${R})`})]})}Aq.displayName="Background";const Mae=O.memo(Aq);function _ae(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:v.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function Dae(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:v.jsx("path",{d:"M0 0h32v4.2H0z"})})}function Rae(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:v.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function Oae(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:v.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function jae(){return v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:v.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function fh({children:e,className:t,...n}){return v.jsx("button",{type:"button",className:Kt(["react-flow__controls-button",t]),...n,children:e})}const Lae=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function Mq({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:s,onZoomOut:o,onFitView:l,onInteractiveChange:u,className:d,children:h,position:p="bottom-left",orientation:g="vertical","aria-label":y}){const x=yt(),{isInteractive:S,minZoomReached:w,maxZoomReached:E,ariaLabelConfig:N}=Xe(Lae,Ct),{zoomIn:k,zoomOut:T,fitView:A}=ld(),_=()=>{k(),s?.()},R=()=>{T(),o?.()},D=()=>{A(i),l?.()},B=()=>{x.setState({nodesDraggable:!S,nodesConnectable:!S,elementsSelectable:!S}),u?.(!S)},$=g==="horizontal"?"horizontal":"vertical";return v.jsxs(Em,{className:Kt(["react-flow__controls",$,d]),position:p,style:e,"data-testid":"rf__controls","aria-label":y??N["controls.ariaLabel"],children:[t&&v.jsxs(v.Fragment,{children:[v.jsx(fh,{onClick:_,className:"react-flow__controls-zoomin",title:N["controls.zoomIn.ariaLabel"],"aria-label":N["controls.zoomIn.ariaLabel"],disabled:E,children:v.jsx(_ae,{})}),v.jsx(fh,{onClick:R,className:"react-flow__controls-zoomout",title:N["controls.zoomOut.ariaLabel"],"aria-label":N["controls.zoomOut.ariaLabel"],disabled:w,children:v.jsx(Dae,{})})]}),n&&v.jsx(fh,{className:"react-flow__controls-fitview",onClick:D,title:N["controls.fitView.ariaLabel"],"aria-label":N["controls.fitView.ariaLabel"],children:v.jsx(Rae,{})}),r&&v.jsx(fh,{className:"react-flow__controls-interactive",onClick:B,title:N["controls.interactive.ariaLabel"],"aria-label":N["controls.interactive.ariaLabel"],children:S?v.jsx(jae,{}):v.jsx(Oae,{})}),h]})}Mq.displayName="Controls";const Pae=O.memo(Mq);function Bae({id:e,x:t,y:n,width:r,height:i,style:s,color:o,strokeColor:l,strokeWidth:u,className:d,borderRadius:h,shapeRendering:p,selected:g,onClick:y}){const{background:x,backgroundColor:S}=s||{},w=o||x||S;return v.jsx("rect",{className:Kt(["react-flow__minimap-node",{selected:g},d]),x:t,y:n,rx:h,ry:h,width:r,height:i,style:{fill:w,stroke:l,strokeWidth:u},shapeRendering:p,onClick:y?E=>y(E,e):void 0})}const Iae=O.memo(Bae),zae=e=>e.nodes.map(t=>t.id),tv=e=>e instanceof Function?e:()=>e;function qae({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:s=Iae,onClick:o}){const l=Xe(zae,Ct),u=tv(t),d=tv(e),h=tv(n),p=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return v.jsx(v.Fragment,{children:l.map(g=>v.jsx(Hae,{id:g,nodeColorFunc:u,nodeStrokeColorFunc:d,nodeClassNameFunc:h,nodeBorderRadius:r,nodeStrokeWidth:i,NodeComponent:s,onClick:o,shapeRendering:p},g))})}function Vae({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:i,nodeStrokeWidth:s,shapeRendering:o,NodeComponent:l,onClick:u}){const{node:d,x:h,y:p,width:g,height:y}=Xe(x=>{const{internals:S}=x.nodeLookup.get(e),w=S.userNode,{x:E,y:N}=S.positionAbsolute,{width:k,height:T}=ts(w);return{node:w,x:E,y:N,width:k,height:T}},Ct);return!d||d.hidden||!Dz(d)?null:v.jsx(l,{x:h,y:p,width:g,height:y,style:d.style,selected:!!d.selected,className:r(d),color:t(d),borderRadius:i,strokeColor:n(d),strokeWidth:s,shapeRendering:o,onClick:u,id:d.id})}const Hae=O.memo(Vae);var Fae=O.memo(qae);const Uae=200,$ae=150,Gae=e=>!e.hidden,Kae=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?_z(kd(e.nodeLookup,{filter:Gae}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},Yae="react-flow__minimap-desc";function _q({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:i="",nodeBorderRadius:s=5,nodeStrokeWidth:o,nodeComponent:l,bgColor:u,maskColor:d,maskStrokeColor:h,maskStrokeWidth:p,position:g="bottom-right",onClick:y,onNodeClick:x,pannable:S=!1,zoomable:w=!1,ariaLabel:E,inversePan:N,zoomStep:k=1,offsetScale:T=5}){const A=yt(),_=O.useRef(null),{boundingRect:R,viewBB:D,rfId:B,panZoom:$,translateExtent:z,flowWidth:V,flowHeight:Y,ariaLabelConfig:I}=Xe(Kae,Ct),F=e?.width??Uae,L=e?.height??$ae,q=R.width/F,W=R.height/L,J=Math.max(q,W),P=J*F,G=J*L,oe=T*J,ce=R.x-(P-R.width)/2-oe,H=R.y-(G-R.height)/2-oe,X=P+oe*2,Q=G+oe*2,ie=`${Yae}-${B}`,te=O.useRef(0),ge=O.useRef();te.current=J,O.useEffect(()=>{if(_.current&&$)return ge.current=pse({domNode:_.current,panZoom:$,getTransform:()=>A.getState().transform,getViewScale:()=>te.current}),()=>{ge.current?.destroy()}},[$]),O.useEffect(()=>{ge.current?.update({translateExtent:z,width:V,height:Y,inversePan:N,pannable:S,zoomStep:k,zoomable:w})},[S,w,N,k,z,V,Y]);const xe=y?Te=>{const[we,Se]=ge.current?.pointer(Te)||[0,0];y(Te,{x:we,y:Se})}:void 0,Me=x?O.useCallback((Te,we)=>{const Se=A.getState().nodeLookup.get(we).internals.userNode;x(Te,Se)},[]):void 0,Ae=E??I["minimap.ariaLabel"];return v.jsx(Em,{position:g,style:{...e,"--xy-minimap-background-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-background-color-props":typeof d=="string"?d:void 0,"--xy-minimap-mask-stroke-color-props":typeof h=="string"?h:void 0,"--xy-minimap-mask-stroke-width-props":typeof p=="number"?p*J:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof o=="number"?o:void 0},className:Kt(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:v.jsxs("svg",{width:F,height:L,viewBox:`${ce} ${H} ${X} ${Q}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":ie,ref:_,onClick:xe,children:[Ae&&v.jsx("title",{id:ie,children:Ae}),v.jsx(Fae,{onClick:Me,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:i,nodeStrokeWidth:o,nodeComponent:l}),v.jsx("path",{className:"react-flow__minimap-mask",d:`M${ce-oe},${H-oe}h${X+oe*2}v${Q+oe*2}h${-X-oe*2}z
        M${D.x},${D.y}h${D.width}v${D.height}h${-D.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}_q.displayName="MiniMap";const Wae=O.memo(_q),Xae=e=>t=>e?`${Math.max(1/t.transform[2],1)}`:void 0,Zae={[pa.Line]:"right",[pa.Handle]:"bottom-right"};function Qae({nodeId:e,position:t,variant:n=pa.Handle,className:r,style:i=void 0,children:s,color:o,minWidth:l=10,minHeight:u=10,maxWidth:d=Number.MAX_VALUE,maxHeight:h=Number.MAX_VALUE,keepAspectRatio:p=!1,resizeDirection:g,autoScale:y=!0,shouldResize:x,onResizeStart:S,onResize:w,onResizeEnd:E}){const N=aq(),k=typeof e=="string"?e:N,T=yt(),A=O.useRef(null),_=n===pa.Handle,R=Xe(O.useCallback(Xae(_&&y),[_,y]),Ct),D=O.useRef(null),B=t??Zae[n];O.useEffect(()=>{if(!(!A.current||!k))return D.current||(D.current=Rse({domNode:A.current,nodeId:k,getStoreItems:()=>{const{nodeLookup:z,transform:V,snapGrid:Y,snapToGrid:I,nodeOrigin:F,domNode:L}=T.getState();return{nodeLookup:z,transform:V,snapGrid:Y,snapToGrid:I,nodeOrigin:F,paneDomNode:L}},onChange:(z,V)=>{const{triggerNodeChanges:Y,nodeLookup:I,parentLookup:F,nodeOrigin:L}=T.getState(),q=[],W={x:z.x,y:z.y},J=I.get(k);if(J&&J.expandParent&&J.parentId){const P=J.origin??L,G=z.width??J.measured.width??0,oe=z.height??J.measured.height??0,ce={id:J.id,parentId:J.parentId,rect:{width:G,height:oe,...Rz({x:z.x??J.position.x,y:z.y??J.position.y},{width:G,height:oe},J.parentId,I,P)}},H=kk([ce],I,F,L);q.push(...H),W.x=z.x?Math.max(P[0]*G,z.x):void 0,W.y=z.y?Math.max(P[1]*oe,z.y):void 0}if(W.x!==void 0&&W.y!==void 0){const P={id:k,type:"position",position:{...W}};q.push(P)}if(z.width!==void 0&&z.height!==void 0){const G={id:k,type:"dimensions",resizing:!0,setAttributes:g?g==="horizontal"?"width":"height":!0,dimensions:{width:z.width,height:z.height}};q.push(G)}for(const P of V){const G={...P,type:"position"};q.push(G)}Y(q)},onEnd:({width:z,height:V})=>{const Y={id:k,type:"dimensions",resizing:!1,dimensions:{width:z,height:V}};T.getState().triggerNodeChanges([Y])}})),D.current.update({controlPosition:B,boundaries:{minWidth:l,minHeight:u,maxWidth:d,maxHeight:h},keepAspectRatio:p,resizeDirection:g,onResizeStart:S,onResize:w,onResizeEnd:E,shouldResize:x}),()=>{D.current?.destroy()}},[B,l,u,d,h,p,S,w,E,x]);const $=B.split("-");return v.jsx("div",{className:Kt(["react-flow__resize-control","nodrag",...$,n,r]),ref:A,style:{...i,scale:R,...o&&{[_?"backgroundColor":"borderColor"]:o}},children:s})}const jR=O.memo(Qae);function Jae({nodeId:e,isVisible:t=!0,handleClassName:n,handleStyle:r,lineClassName:i,lineStyle:s,color:o,minWidth:l=10,minHeight:u=10,maxWidth:d=Number.MAX_VALUE,maxHeight:h=Number.MAX_VALUE,keepAspectRatio:p=!1,autoScale:g=!0,shouldResize:y,onResizeStart:x,onResize:S,onResizeEnd:w}){return t?v.jsxs(v.Fragment,{children:[kse.map(E=>v.jsx(jR,{className:i,style:s,nodeId:e,position:E,variant:pa.Line,color:o,minWidth:l,minHeight:u,maxWidth:d,maxHeight:h,onResizeStart:x,keepAspectRatio:p,autoScale:g,shouldResize:y,onResize:S,onResizeEnd:w},E)),Ese.map(E=>v.jsx(jR,{className:n,style:r,nodeId:e,position:E,color:o,minWidth:l,minHeight:u,maxWidth:d,maxHeight:h,onResizeStart:x,keepAspectRatio:p,autoScale:g,shouldResize:y,onResize:S,onResizeEnd:w},E))]}):null}function ele(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(i),t&&(r.href=t),i.href=e,i.href}const tle=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function Js(e){const t=[];for(let n=0,r=e.length;n<r;n++)t.push(e[n]);return t}let dl=null;function Dq(e={}){return dl||(e.includeStyleProperties?(dl=e.includeStyleProperties,dl):(dl=Js(window.getComputedStyle(document.documentElement)),dl))}function Ip(e,t){const r=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return r?parseFloat(r.replace("px","")):0}function nle(e){const t=Ip(e,"border-left-width"),n=Ip(e,"border-right-width");return e.clientWidth+t+n}function rle(e){const t=Ip(e,"border-top-width"),n=Ip(e,"border-bottom-width");return e.clientHeight+t+n}function Rq(e,t={}){const n=t.width||nle(e),r=t.height||rle(e);return{width:n,height:r}}function ile(){let e,t;try{t=process}catch{}const n=t&&t.env?t.env.devicePixelRatio:null;return n&&(e=parseInt(n,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const rr=16384;function sle(e){(e.width>rr||e.height>rr)&&(e.width>rr&&e.height>rr?e.width>e.height?(e.height*=rr/e.width,e.width=rr):(e.width*=rr/e.height,e.height=rr):e.width>rr?(e.height*=rr/e.width,e.width=rr):(e.width*=rr/e.height,e.height=rr))}function zp(e){return new Promise((t,n)=>{const r=new Image;r.onload=()=>{r.decode().then(()=>{requestAnimationFrame(()=>t(r))})},r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=e})}async function ole(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function ale(e,t,n){const r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg"),s=document.createElementNS(r,"foreignObject");return i.setAttribute("width",`${t}`),i.setAttribute("height",`${n}`),i.setAttribute("viewBox",`0 0 ${t} ${n}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),i.appendChild(s),s.appendChild(e),ole(i)}const Un=(e,t)=>{if(e instanceof t)return!0;const n=Object.getPrototypeOf(e);return n===null?!1:n.constructor.name===t.name||Un(n,t)};function lle(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function cle(e,t){return Dq(t).map(n=>{const r=e.getPropertyValue(n),i=e.getPropertyPriority(n);return`${n}: ${r}${i?" !important":""};`}).join(" ")}function ule(e,t,n,r){const i=`.${e}:${t}`,s=n.cssText?lle(n):cle(n,r);return document.createTextNode(`${i}{${s}}`)}function LR(e,t,n,r){const i=window.getComputedStyle(e,n),s=i.getPropertyValue("content");if(s===""||s==="none")return;const o=tle();try{t.className=`${t.className} ${o}`}catch{return}const l=document.createElement("style");l.appendChild(ule(o,n,i,r)),t.appendChild(l)}function dle(e,t,n){LR(e,t,":before",n),LR(e,t,":after",n)}const PR="application/font-woff",BR="image/jpeg",fle={woff:PR,woff2:PR,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:BR,jpeg:BR,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function hle(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function Nk(e){const t=hle(e).toLowerCase();return fle[t]||""}function ple(e){return e.split(/,/)[1]}function zC(e){return e.search(/^(data:)/)!==-1}function mle(e,t){return`data:${t};base64,${e}`}async function Oq(e,t,n){const r=await fetch(e,t);if(r.status===404)throw new Error(`Resource "${r.url}" not found`);const i=await r.blob();return new Promise((s,o)=>{const l=new FileReader;l.onerror=o,l.onloadend=()=>{try{s(n({res:r,result:l.result}))}catch(u){o(u)}},l.readAsDataURL(i)})}const nv={};function gle(e,t,n){let r=e.replace(/\?.*/,"");return n&&(r=e),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),t?`[${t}]${r}`:r}async function Ak(e,t,n){const r=gle(e,t,n.includeQueryParams);if(nv[r]!=null)return nv[r];n.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let i;try{const s=await Oq(e,n.fetchRequestInit,({res:o,result:l})=>(t||(t=o.headers.get("Content-Type")||""),ple(l)));i=mle(s,t)}catch(s){i=n.imagePlaceholder||"";let o=`Failed to fetch resource: ${e}`;s&&(o=typeof s=="string"?s:s.message),o&&console.warn(o)}return nv[r]=i,i}async function yle(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):zp(t)}async function vle(e,t){if(e.currentSrc){const s=document.createElement("canvas"),o=s.getContext("2d");s.width=e.clientWidth,s.height=e.clientHeight,o?.drawImage(e,0,0,s.width,s.height);const l=s.toDataURL();return zp(l)}const n=e.poster,r=Nk(n),i=await Ak(n,r,t);return zp(i)}async function ble(e,t){var n;try{if(!((n=e?.contentDocument)===null||n===void 0)&&n.body)return await Nm(e.contentDocument.body,t,!0)}catch{}return e.cloneNode(!1)}async function xle(e,t){return Un(e,HTMLCanvasElement)?yle(e):Un(e,HTMLVideoElement)?vle(e,t):Un(e,HTMLIFrameElement)?ble(e,t):e.cloneNode(jq(e))}const wle=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",jq=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function Sle(e,t,n){var r,i;if(jq(t))return t;let s=[];return wle(e)&&e.assignedNodes?s=Js(e.assignedNodes()):Un(e,HTMLIFrameElement)&&(!((r=e.contentDocument)===null||r===void 0)&&r.body)?s=Js(e.contentDocument.body.childNodes):s=Js(((i=e.shadowRoot)!==null&&i!==void 0?i:e).childNodes),s.length===0||Un(e,HTMLVideoElement)||await s.reduce((o,l)=>o.then(()=>Nm(l,n)).then(u=>{u&&t.appendChild(u)}),Promise.resolve()),t}function Cle(e,t,n){const r=t.style;if(!r)return;const i=window.getComputedStyle(e);i.cssText?(r.cssText=i.cssText,r.transformOrigin=i.transformOrigin):Dq(n).forEach(s=>{let o=i.getPropertyValue(s);s==="font-size"&&o.endsWith("px")&&(o=`${Math.floor(parseFloat(o.substring(0,o.length-2)))-.1}px`),Un(e,HTMLIFrameElement)&&s==="display"&&o==="inline"&&(o="block"),s==="d"&&t.getAttribute("d")&&(o=`path(${t.getAttribute("d")})`),r.setProperty(s,o,i.getPropertyPriority(s))})}function Ele(e,t){Un(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),Un(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function kle(e,t){if(Un(e,HTMLSelectElement)){const n=t,r=Array.from(n.children).find(i=>e.value===i.getAttribute("value"));r&&r.setAttribute("selected","")}}function Tle(e,t,n){return Un(t,Element)&&(Cle(e,t,n),dle(e,t,n),Ele(e,t),kle(e,t)),t}async function Nle(e,t){const n=e.querySelectorAll?e.querySelectorAll("use"):[];if(n.length===0)return e;const r={};for(let s=0;s<n.length;s++){const l=n[s].getAttribute("xlink:href");if(l){const u=e.querySelector(l),d=document.querySelector(l);!u&&d&&!r[l]&&(r[l]=await Nm(d,t,!0))}}const i=Object.values(r);if(i.length){const s="http://www.w3.org/1999/xhtml",o=document.createElementNS(s,"svg");o.setAttribute("xmlns",s),o.style.position="absolute",o.style.width="0",o.style.height="0",o.style.overflow="hidden",o.style.display="none";const l=document.createElementNS(s,"defs");o.appendChild(l);for(let u=0;u<i.length;u++)l.appendChild(i[u]);e.appendChild(o)}return e}async function Nm(e,t,n){return!n&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(r=>xle(r,t)).then(r=>Sle(e,r,t)).then(r=>Tle(e,r,t)).then(r=>Nle(r,t))}const Lq=/url\((['"]?)([^'"]+?)\1\)/g,Ale=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Mle=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function _le(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function Dle(e){const t=[];return e.replace(Lq,(n,r,i)=>(t.push(i),n)),t.filter(n=>!zC(n))}async function Rle(e,t,n,r,i){try{const s=n?ele(t,n):t,o=Nk(t);let l;return i||(l=await Ak(s,o,r)),e.replace(_le(t),`$1${l}$3`)}catch{}return e}function Ole(e,{preferredFontFormat:t}){return t?e.replace(Mle,n=>{for(;;){const[r,,i]=Ale.exec(n)||[];if(!i)return"";if(i===t)return`src: ${r};`}}):e}function Pq(e){return e.search(Lq)!==-1}async function Bq(e,t,n){if(!Pq(e))return e;const r=Ole(e,n);return Dle(r).reduce((s,o)=>s.then(l=>Rle(l,o,t,n)),Promise.resolve(r))}async function fl(e,t,n){var r;const i=(r=t.style)===null||r===void 0?void 0:r.getPropertyValue(e);if(i){const s=await Bq(i,null,n);return t.style.setProperty(e,s,t.style.getPropertyPriority(e)),!0}return!1}async function jle(e,t){await fl("background",e,t)||await fl("background-image",e,t),await fl("mask",e,t)||await fl("-webkit-mask",e,t)||await fl("mask-image",e,t)||await fl("-webkit-mask-image",e,t)}async function Lle(e,t){const n=Un(e,HTMLImageElement);if(!(n&&!zC(e.src))&&!(Un(e,SVGImageElement)&&!zC(e.href.baseVal)))return;const r=n?e.src:e.href.baseVal,i=await Ak(r,Nk(r),t);await new Promise((s,o)=>{e.onload=s,e.onerror=t.onImageErrorHandler?(...u)=>{try{s(t.onImageErrorHandler(...u))}catch(d){o(d)}}:o;const l=e;l.decode&&(l.decode=s),l.loading==="lazy"&&(l.loading="eager"),n?(e.srcset="",e.src=i):e.href.baseVal=i})}async function Ple(e,t){const r=Js(e.childNodes).map(i=>Iq(i,t));await Promise.all(r).then(()=>e)}async function Iq(e,t){Un(e,Element)&&(await jle(e,t),await Lle(e,t),await Ple(e,t))}function Ble(e,t){const{style:n}=e;t.backgroundColor&&(n.backgroundColor=t.backgroundColor),t.width&&(n.width=`${t.width}px`),t.height&&(n.height=`${t.height}px`);const r=t.style;return r!=null&&Object.keys(r).forEach(i=>{n[i]=r[i]}),e}const IR={};async function zR(e){let t=IR[e];if(t!=null)return t;const r=await(await fetch(e)).text();return t={url:e,cssText:r},IR[e]=t,t}async function qR(e,t){let n=e.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,s=(n.match(/url\([^)]+\)/g)||[]).map(async o=>{let l=o.replace(r,"$1");return l.startsWith("https://")||(l=new URL(l,e.url).href),Oq(l,t.fetchRequestInit,({result:u})=>(n=n.replace(o,`url(${u})`),[o,u]))});return Promise.all(s).then(()=>n)}function VR(e){if(e==null)return[];const t=[],n=/(\/\*[\s\S]*?\*\/)/gi;let r=e.replace(n,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const u=i.exec(r);if(u===null)break;t.push(u[0])}r=r.replace(i,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,o="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",l=new RegExp(o,"gi");for(;;){let u=s.exec(r);if(u===null){if(u=l.exec(r),u===null)break;s.lastIndex=l.lastIndex}else l.lastIndex=s.lastIndex;t.push(u[0])}return t}async function Ile(e,t){const n=[],r=[];return e.forEach(i=>{if("cssRules"in i)try{Js(i.cssRules||[]).forEach((s,o)=>{if(s.type===CSSRule.IMPORT_RULE){let l=o+1;const u=s.href,d=zR(u).then(h=>qR(h,t)).then(h=>VR(h).forEach(p=>{try{i.insertRule(p,p.startsWith("@import")?l+=1:i.cssRules.length)}catch(g){console.error("Error inserting rule from remote css",{rule:p,error:g})}})).catch(h=>{console.error("Error loading remote css",h.toString())});r.push(d)}})}catch(s){const o=e.find(l=>l.href==null)||document.styleSheets[0];i.href!=null&&r.push(zR(i.href).then(l=>qR(l,t)).then(l=>VR(l).forEach(u=>{o.insertRule(u,o.cssRules.length)})).catch(l=>{console.error("Error loading remote stylesheet",l)})),console.error("Error inlining remote css file",s)}}),Promise.all(r).then(()=>(e.forEach(i=>{if("cssRules"in i)try{Js(i.cssRules||[]).forEach(s=>{n.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${i.href}`,s)}}),n))}function zle(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>Pq(t.style.getPropertyValue("src")))}async function qle(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const n=Js(e.ownerDocument.styleSheets),r=await Ile(n,t);return zle(r)}function zq(e){return e.trim().replace(/["']/g,"")}function Vle(e){const t=new Set;function n(r){(r.style.fontFamily||getComputedStyle(r).fontFamily).split(",").forEach(s=>{t.add(zq(s))}),Array.from(r.children).forEach(s=>{s instanceof HTMLElement&&n(s)})}return n(e),t}async function Hle(e,t){const n=await qle(e,t),r=Vle(e);return(await Promise.all(n.filter(s=>r.has(zq(s.style.fontFamily))).map(s=>{const o=s.parentStyleSheet?s.parentStyleSheet.href:null;return Bq(s.cssText,o,t)}))).join(`
`)}async function Fle(e,t){const n=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await Hle(e,t);if(n){const r=document.createElement("style"),i=document.createTextNode(n);r.appendChild(i),e.firstChild?e.insertBefore(r,e.firstChild):e.appendChild(r)}}async function qq(e,t={}){const{width:n,height:r}=Rq(e,t),i=await Nm(e,t,!0);return await Fle(i,t),await Iq(i,t),Ble(i,t),await ale(i,n,r)}async function Vq(e,t={}){const{width:n,height:r}=Rq(e,t),i=await qq(e,t),s=await zp(i),o=document.createElement("canvas"),l=o.getContext("2d"),u=t.pixelRatio||ile(),d=t.canvasWidth||n,h=t.canvasHeight||r;return o.width=d*u,o.height=h*u,t.skipAutoScale||sle(o),o.style.width=`${d}`,o.style.height=`${h}`,t.backgroundColor&&(l.fillStyle=t.backgroundColor,l.fillRect(0,0,o.width,o.height)),l.drawImage(s,0,0,o.width,o.height),o}async function Ule(e,t={}){return(await Vq(e,t)).toDataURL()}async function $le(e,t={}){return(await Vq(e,t)).toDataURL("image/jpeg",t.quality||1)}function Mk(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var rv,HR;function Gle(){if(HR)return rv;HR=1;function e(){this.__data__=[],this.size=0}return rv=e,rv}var iv,FR;function Kl(){if(FR)return iv;FR=1;function e(t,n){return t===n||t!==t&&n!==n}return iv=e,iv}var sv,UR;function Am(){if(UR)return sv;UR=1;var e=Kl();function t(n,r){for(var i=n.length;i--;)if(e(n[i][0],r))return i;return-1}return sv=t,sv}var ov,$R;function Kle(){if($R)return ov;$R=1;var e=Am(),t=Array.prototype,n=t.splice;function r(i){var s=this.__data__,o=e(s,i);if(o<0)return!1;var l=s.length-1;return o==l?s.pop():n.call(s,o,1),--this.size,!0}return ov=r,ov}var av,GR;function Yle(){if(GR)return av;GR=1;var e=Am();function t(n){var r=this.__data__,i=e(r,n);return i<0?void 0:r[i][1]}return av=t,av}var lv,KR;function Wle(){if(KR)return lv;KR=1;var e=Am();function t(n){return e(this.__data__,n)>-1}return lv=t,lv}var cv,YR;function Xle(){if(YR)return cv;YR=1;var e=Am();function t(n,r){var i=this.__data__,s=e(i,n);return s<0?(++this.size,i.push([n,r])):i[s][1]=r,this}return cv=t,cv}var uv,WR;function Mm(){if(WR)return uv;WR=1;var e=Gle(),t=Kle(),n=Yle(),r=Wle(),i=Xle();function s(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var d=o[l];this.set(d[0],d[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,uv=s,uv}var dv,XR;function Zle(){if(XR)return dv;XR=1;var e=Mm();function t(){this.__data__=new e,this.size=0}return dv=t,dv}var fv,ZR;function Qle(){if(ZR)return fv;ZR=1;function e(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}return fv=e,fv}var hv,QR;function Jle(){if(QR)return hv;QR=1;function e(t){return this.__data__.get(t)}return hv=e,hv}var pv,JR;function ece(){if(JR)return pv;JR=1;function e(t){return this.__data__.has(t)}return pv=e,pv}var mv,eO;function Hq(){if(eO)return mv;eO=1;var e=typeof Vf=="object"&&Vf&&Vf.Object===Object&&Vf;return mv=e,mv}var gv,tO;function Yr(){if(tO)return gv;tO=1;var e=Hq(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return gv=n,gv}var yv,nO;function Yl(){if(nO)return yv;nO=1;var e=Yr(),t=e.Symbol;return yv=t,yv}var vv,rO;function tce(){if(rO)return vv;rO=1;var e=Yl(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,i=e?e.toStringTag:void 0;function s(o){var l=n.call(o,i),u=o[i];try{o[i]=void 0;var d=!0}catch{}var h=r.call(o);return d&&(l?o[i]=u:delete o[i]),h}return vv=s,vv}var bv,iO;function nce(){if(iO)return bv;iO=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return bv=n,bv}var xv,sO;function wa(){if(sO)return xv;sO=1;var e=Yl(),t=tce(),n=nce(),r="[object Null]",i="[object Undefined]",s=e?e.toStringTag:void 0;function o(l){return l==null?l===void 0?i:r:s&&s in Object(l)?t(l):n(l)}return xv=o,xv}var wv,oO;function Rr(){if(oO)return wv;oO=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return wv=e,wv}var Sv,aO;function Ad(){if(aO)return Sv;aO=1;var e=wa(),t=Rr(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function o(l){if(!t(l))return!1;var u=e(l);return u==r||u==i||u==n||u==s}return Sv=o,Sv}var Cv,lO;function rce(){if(lO)return Cv;lO=1;var e=Yr(),t=e["__core-js_shared__"];return Cv=t,Cv}var Ev,cO;function ice(){if(cO)return Ev;cO=1;var e=rce(),t=(function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""})();function n(r){return!!t&&t in r}return Ev=n,Ev}var kv,uO;function Fq(){if(uO)return kv;uO=1;var e=Function.prototype,t=e.toString;function n(r){if(r!=null){try{return t.call(r)}catch{}try{return r+""}catch{}}return""}return kv=n,kv}var Tv,dO;function sce(){if(dO)return Tv;dO=1;var e=Ad(),t=ice(),n=Rr(),r=Fq(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,u=o.toString,d=l.hasOwnProperty,h=RegExp("^"+u.call(d).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(g){if(!n(g)||t(g))return!1;var y=e(g)?h:s;return y.test(r(g))}return Tv=p,Tv}var Nv,fO;function oce(){if(fO)return Nv;fO=1;function e(t,n){return t?.[n]}return Nv=e,Nv}var Av,hO;function Sa(){if(hO)return Av;hO=1;var e=sce(),t=oce();function n(r,i){var s=t(r,i);return e(s)?s:void 0}return Av=n,Av}var Mv,pO;function _k(){if(pO)return Mv;pO=1;var e=Sa(),t=Yr(),n=e(t,"Map");return Mv=n,Mv}var _v,mO;function _m(){if(mO)return _v;mO=1;var e=Sa(),t=e(Object,"create");return _v=t,_v}var Dv,gO;function ace(){if(gO)return Dv;gO=1;var e=_m();function t(){this.__data__=e?e(null):{},this.size=0}return Dv=t,Dv}var Rv,yO;function lce(){if(yO)return Rv;yO=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return Rv=e,Rv}var Ov,vO;function cce(){if(vO)return Ov;vO=1;var e=_m(),t="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(s){var o=this.__data__;if(e){var l=o[s];return l===t?void 0:l}return r.call(o,s)?o[s]:void 0}return Ov=i,Ov}var jv,bO;function uce(){if(bO)return jv;bO=1;var e=_m(),t=Object.prototype,n=t.hasOwnProperty;function r(i){var s=this.__data__;return e?s[i]!==void 0:n.call(s,i)}return jv=r,jv}var Lv,xO;function dce(){if(xO)return Lv;xO=1;var e=_m(),t="__lodash_hash_undefined__";function n(r,i){var s=this.__data__;return this.size+=this.has(r)?0:1,s[r]=e&&i===void 0?t:i,this}return Lv=n,Lv}var Pv,wO;function fce(){if(wO)return Pv;wO=1;var e=ace(),t=lce(),n=cce(),r=uce(),i=dce();function s(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var d=o[l];this.set(d[0],d[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,Pv=s,Pv}var Bv,SO;function hce(){if(SO)return Bv;SO=1;var e=fce(),t=Mm(),n=_k();function r(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return Bv=r,Bv}var Iv,CO;function pce(){if(CO)return Iv;CO=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return Iv=e,Iv}var zv,EO;function Dm(){if(EO)return zv;EO=1;var e=pce();function t(n,r){var i=n.__data__;return e(r)?i[typeof r=="string"?"string":"hash"]:i.map}return zv=t,zv}var qv,kO;function mce(){if(kO)return qv;kO=1;var e=Dm();function t(n){var r=e(this,n).delete(n);return this.size-=r?1:0,r}return qv=t,qv}var Vv,TO;function gce(){if(TO)return Vv;TO=1;var e=Dm();function t(n){return e(this,n).get(n)}return Vv=t,Vv}var Hv,NO;function yce(){if(NO)return Hv;NO=1;var e=Dm();function t(n){return e(this,n).has(n)}return Hv=t,Hv}var Fv,AO;function vce(){if(AO)return Fv;AO=1;var e=Dm();function t(n,r){var i=e(this,n),s=i.size;return i.set(n,r),this.size+=i.size==s?0:1,this}return Fv=t,Fv}var Uv,MO;function Dk(){if(MO)return Uv;MO=1;var e=hce(),t=mce(),n=gce(),r=yce(),i=vce();function s(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var d=o[l];this.set(d[0],d[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,Uv=s,Uv}var $v,_O;function bce(){if(_O)return $v;_O=1;var e=Mm(),t=_k(),n=Dk(),r=200;function i(s,o){var l=this.__data__;if(l instanceof e){var u=l.__data__;if(!t||u.length<r-1)return u.push([s,o]),this.size=++l.size,this;l=this.__data__=new n(u)}return l.set(s,o),this.size=l.size,this}return $v=i,$v}var Gv,DO;function Rm(){if(DO)return Gv;DO=1;var e=Mm(),t=Zle(),n=Qle(),r=Jle(),i=ece(),s=bce();function o(l){var u=this.__data__=new e(l);this.size=u.size}return o.prototype.clear=t,o.prototype.delete=n,o.prototype.get=r,o.prototype.has=i,o.prototype.set=s,Gv=o,Gv}var Kv,RO;function Rk(){if(RO)return Kv;RO=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i&&n(t[r],r,t)!==!1;);return t}return Kv=e,Kv}var Yv,OO;function Uq(){if(OO)return Yv;OO=1;var e=Sa(),t=(function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}})();return Yv=t,Yv}var Wv,jO;function Om(){if(jO)return Wv;jO=1;var e=Uq();function t(n,r,i){r=="__proto__"&&e?e(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return Wv=t,Wv}var Xv,LO;function jm(){if(LO)return Xv;LO=1;var e=Om(),t=Kl(),n=Object.prototype,r=n.hasOwnProperty;function i(s,o,l){var u=s[o];(!(r.call(s,o)&&t(u,l))||l===void 0&&!(o in s))&&e(s,o,l)}return Xv=i,Xv}var Zv,PO;function Md(){if(PO)return Zv;PO=1;var e=jm(),t=Om();function n(r,i,s,o){var l=!s;s||(s={});for(var u=-1,d=i.length;++u<d;){var h=i[u],p=o?o(s[h],r[h],h,s,r):void 0;p===void 0&&(p=r[h]),l?t(s,h,p):e(s,h,p)}return s}return Zv=n,Zv}var Qv,BO;function xce(){if(BO)return Qv;BO=1;function e(t,n){for(var r=-1,i=Array(t);++r<t;)i[r]=n(r);return i}return Qv=e,Qv}var Jv,IO;function Si(){if(IO)return Jv;IO=1;function e(t){return t!=null&&typeof t=="object"}return Jv=e,Jv}var eb,zO;function wce(){if(zO)return eb;zO=1;var e=wa(),t=Si(),n="[object Arguments]";function r(i){return t(i)&&e(i)==n}return eb=r,eb}var tb,qO;function _d(){if(qO)return tb;qO=1;var e=wce(),t=Si(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,s=e((function(){return arguments})())?e:function(o){return t(o)&&r.call(o,"callee")&&!i.call(o,"callee")};return tb=s,tb}var nb,VO;function Yt(){if(VO)return nb;VO=1;var e=Array.isArray;return nb=e,nb}var hu={exports:{}},rb,HO;function Sce(){if(HO)return rb;HO=1;function e(){return!1}return rb=e,rb}hu.exports;var FO;function Wl(){return FO||(FO=1,(function(e,t){var n=Yr(),r=Sce(),i=t&&!t.nodeType&&t,s=i&&!0&&e&&!e.nodeType&&e,o=s&&s.exports===i,l=o?n.Buffer:void 0,u=l?l.isBuffer:void 0,d=u||r;e.exports=d})(hu,hu.exports)),hu.exports}var ib,UO;function Lm(){if(UO)return ib;UO=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(r,i){var s=typeof r;return i=i??e,!!i&&(s=="number"||s!="symbol"&&t.test(r))&&r>-1&&r%1==0&&r<i}return ib=n,ib}var sb,$O;function Ok(){if($O)return sb;$O=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return sb=t,sb}var ob,GO;function Cce(){if(GO)return ob;GO=1;var e=wa(),t=Ok(),n=Si(),r="[object Arguments]",i="[object Array]",s="[object Boolean]",o="[object Date]",l="[object Error]",u="[object Function]",d="[object Map]",h="[object Number]",p="[object Object]",g="[object RegExp]",y="[object Set]",x="[object String]",S="[object WeakMap]",w="[object ArrayBuffer]",E="[object DataView]",N="[object Float32Array]",k="[object Float64Array]",T="[object Int8Array]",A="[object Int16Array]",_="[object Int32Array]",R="[object Uint8Array]",D="[object Uint8ClampedArray]",B="[object Uint16Array]",$="[object Uint32Array]",z={};z[N]=z[k]=z[T]=z[A]=z[_]=z[R]=z[D]=z[B]=z[$]=!0,z[r]=z[i]=z[w]=z[s]=z[E]=z[o]=z[l]=z[u]=z[d]=z[h]=z[p]=z[g]=z[y]=z[x]=z[S]=!1;function V(Y){return n(Y)&&t(Y.length)&&!!z[e(Y)]}return ob=V,ob}var ab,KO;function Pm(){if(KO)return ab;KO=1;function e(t){return function(n){return t(n)}}return ab=e,ab}var pu={exports:{}};pu.exports;var YO;function jk(){return YO||(YO=1,(function(e,t){var n=Hq(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===r,o=s&&n.process,l=(function(){try{var u=i&&i.require&&i.require("util").types;return u||o&&o.binding&&o.binding("util")}catch{}})();e.exports=l})(pu,pu.exports)),pu.exports}var lb,WO;function Dd(){if(WO)return lb;WO=1;var e=Cce(),t=Pm(),n=jk(),r=n&&n.isTypedArray,i=r?t(r):e;return lb=i,lb}var cb,XO;function $q(){if(XO)return cb;XO=1;var e=xce(),t=_d(),n=Yt(),r=Wl(),i=Lm(),s=Dd(),o=Object.prototype,l=o.hasOwnProperty;function u(d,h){var p=n(d),g=!p&&t(d),y=!p&&!g&&r(d),x=!p&&!g&&!y&&s(d),S=p||g||y||x,w=S?e(d.length,String):[],E=w.length;for(var N in d)(h||l.call(d,N))&&!(S&&(N=="length"||y&&(N=="offset"||N=="parent")||x&&(N=="buffer"||N=="byteLength"||N=="byteOffset")||i(N,E)))&&w.push(N);return w}return cb=u,cb}var ub,ZO;function Bm(){if(ZO)return ub;ZO=1;var e=Object.prototype;function t(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||e;return n===i}return ub=t,ub}var db,QO;function Gq(){if(QO)return db;QO=1;function e(t,n){return function(r){return t(n(r))}}return db=e,db}var fb,JO;function Ece(){if(JO)return fb;JO=1;var e=Gq(),t=e(Object.keys,Object);return fb=t,fb}var hb,ej;function Lk(){if(ej)return hb;ej=1;var e=Bm(),t=Ece(),n=Object.prototype,r=n.hasOwnProperty;function i(s){if(!e(s))return t(s);var o=[];for(var l in Object(s))r.call(s,l)&&l!="constructor"&&o.push(l);return o}return hb=i,hb}var pb,tj;function ns(){if(tj)return pb;tj=1;var e=Ad(),t=Ok();function n(r){return r!=null&&t(r.length)&&!e(r)}return pb=n,pb}var mb,nj;function lo(){if(nj)return mb;nj=1;var e=$q(),t=Lk(),n=ns();function r(i){return n(i)?e(i):t(i)}return mb=r,mb}var gb,rj;function kce(){if(rj)return gb;rj=1;var e=Md(),t=lo();function n(r,i){return r&&e(i,t(i),r)}return gb=n,gb}var yb,ij;function Tce(){if(ij)return yb;ij=1;function e(t){var n=[];if(t!=null)for(var r in Object(t))n.push(r);return n}return yb=e,yb}var vb,sj;function Nce(){if(sj)return vb;sj=1;var e=Rr(),t=Bm(),n=Tce(),r=Object.prototype,i=r.hasOwnProperty;function s(o){if(!e(o))return n(o);var l=t(o),u=[];for(var d in o)d=="constructor"&&(l||!i.call(o,d))||u.push(d);return u}return vb=s,vb}var bb,oj;function Ca(){if(oj)return bb;oj=1;var e=$q(),t=Nce(),n=ns();function r(i){return n(i)?e(i,!0):t(i)}return bb=r,bb}var xb,aj;function Ace(){if(aj)return xb;aj=1;var e=Md(),t=Ca();function n(r,i){return r&&e(i,t(i),r)}return xb=n,xb}var mu={exports:{}};mu.exports;var lj;function Kq(){return lj||(lj=1,(function(e,t){var n=Yr(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===r,o=s?n.Buffer:void 0,l=o?o.allocUnsafe:void 0;function u(d,h){if(h)return d.slice();var p=d.length,g=l?l(p):new d.constructor(p);return d.copy(g),g}e.exports=u})(mu,mu.exports)),mu.exports}var wb,cj;function Yq(){if(cj)return wb;cj=1;function e(t,n){var r=-1,i=t.length;for(n||(n=Array(i));++r<i;)n[r]=t[r];return n}return wb=e,wb}var Sb,uj;function Wq(){if(uj)return Sb;uj=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,s=0,o=[];++r<i;){var l=t[r];n(l,r,t)&&(o[s++]=l)}return o}return Sb=e,Sb}var Cb,dj;function Xq(){if(dj)return Cb;dj=1;function e(){return[]}return Cb=e,Cb}var Eb,fj;function Pk(){if(fj)return Eb;fj=1;var e=Wq(),t=Xq(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(o){return o==null?[]:(o=Object(o),e(i(o),function(l){return r.call(o,l)}))}:t;return Eb=s,Eb}var kb,hj;function Mce(){if(hj)return kb;hj=1;var e=Md(),t=Pk();function n(r,i){return e(r,t(r),i)}return kb=n,kb}var Tb,pj;function Bk(){if(pj)return Tb;pj=1;function e(t,n){for(var r=-1,i=n.length,s=t.length;++r<i;)t[s+r]=n[r];return t}return Tb=e,Tb}var Nb,mj;function Im(){if(mj)return Nb;mj=1;var e=Gq(),t=e(Object.getPrototypeOf,Object);return Nb=t,Nb}var Ab,gj;function Zq(){if(gj)return Ab;gj=1;var e=Bk(),t=Im(),n=Pk(),r=Xq(),i=Object.getOwnPropertySymbols,s=i?function(o){for(var l=[];o;)e(l,n(o)),o=t(o);return l}:r;return Ab=s,Ab}var Mb,yj;function _ce(){if(yj)return Mb;yj=1;var e=Md(),t=Zq();function n(r,i){return e(r,t(r),i)}return Mb=n,Mb}var _b,vj;function Qq(){if(vj)return _b;vj=1;var e=Bk(),t=Yt();function n(r,i,s){var o=i(r);return t(r)?o:e(o,s(r))}return _b=n,_b}var Db,bj;function Jq(){if(bj)return Db;bj=1;var e=Qq(),t=Pk(),n=lo();function r(i){return e(i,n,t)}return Db=r,Db}var Rb,xj;function Dce(){if(xj)return Rb;xj=1;var e=Qq(),t=Zq(),n=Ca();function r(i){return e(i,n,t)}return Rb=r,Rb}var Ob,wj;function Rce(){if(wj)return Ob;wj=1;var e=Sa(),t=Yr(),n=e(t,"DataView");return Ob=n,Ob}var jb,Sj;function Oce(){if(Sj)return jb;Sj=1;var e=Sa(),t=Yr(),n=e(t,"Promise");return jb=n,jb}var Lb,Cj;function eV(){if(Cj)return Lb;Cj=1;var e=Sa(),t=Yr(),n=e(t,"Set");return Lb=n,Lb}var Pb,Ej;function jce(){if(Ej)return Pb;Ej=1;var e=Sa(),t=Yr(),n=e(t,"WeakMap");return Pb=n,Pb}var Bb,kj;function Xl(){if(kj)return Bb;kj=1;var e=Rce(),t=_k(),n=Oce(),r=eV(),i=jce(),s=wa(),o=Fq(),l="[object Map]",u="[object Object]",d="[object Promise]",h="[object Set]",p="[object WeakMap]",g="[object DataView]",y=o(e),x=o(t),S=o(n),w=o(r),E=o(i),N=s;return(e&&N(new e(new ArrayBuffer(1)))!=g||t&&N(new t)!=l||n&&N(n.resolve())!=d||r&&N(new r)!=h||i&&N(new i)!=p)&&(N=function(k){var T=s(k),A=T==u?k.constructor:void 0,_=A?o(A):"";if(_)switch(_){case y:return g;case x:return l;case S:return d;case w:return h;case E:return p}return T}),Bb=N,Bb}var Ib,Tj;function Lce(){if(Tj)return Ib;Tj=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r){var i=r.length,s=new r.constructor(i);return i&&typeof r[0]=="string"&&t.call(r,"index")&&(s.index=r.index,s.input=r.input),s}return Ib=n,Ib}var zb,Nj;function tV(){if(Nj)return zb;Nj=1;var e=Yr(),t=e.Uint8Array;return zb=t,zb}var qb,Aj;function Ik(){if(Aj)return qb;Aj=1;var e=tV();function t(n){var r=new n.constructor(n.byteLength);return new e(r).set(new e(n)),r}return qb=t,qb}var Vb,Mj;function Pce(){if(Mj)return Vb;Mj=1;var e=Ik();function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.byteLength)}return Vb=t,Vb}var Hb,_j;function Bce(){if(_j)return Hb;_j=1;var e=/\w*$/;function t(n){var r=new n.constructor(n.source,e.exec(n));return r.lastIndex=n.lastIndex,r}return Hb=t,Hb}var Fb,Dj;function Ice(){if(Dj)return Fb;Dj=1;var e=Yl(),t=e?e.prototype:void 0,n=t?t.valueOf:void 0;function r(i){return n?Object(n.call(i)):{}}return Fb=r,Fb}var Ub,Rj;function nV(){if(Rj)return Ub;Rj=1;var e=Ik();function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.length)}return Ub=t,Ub}var $b,Oj;function zce(){if(Oj)return $b;Oj=1;var e=Ik(),t=Pce(),n=Bce(),r=Ice(),i=nV(),s="[object Boolean]",o="[object Date]",l="[object Map]",u="[object Number]",d="[object RegExp]",h="[object Set]",p="[object String]",g="[object Symbol]",y="[object ArrayBuffer]",x="[object DataView]",S="[object Float32Array]",w="[object Float64Array]",E="[object Int8Array]",N="[object Int16Array]",k="[object Int32Array]",T="[object Uint8Array]",A="[object Uint8ClampedArray]",_="[object Uint16Array]",R="[object Uint32Array]";function D(B,$,z){var V=B.constructor;switch($){case y:return e(B);case s:case o:return new V(+B);case x:return t(B,z);case S:case w:case E:case N:case k:case T:case A:case _:case R:return i(B,z);case l:return new V;case u:case p:return new V(B);case d:return n(B);case h:return new V;case g:return r(B)}}return $b=D,$b}var Gb,jj;function rV(){if(jj)return Gb;jj=1;var e=Rr(),t=Object.create,n=(function(){function r(){}return function(i){if(!e(i))return{};if(t)return t(i);r.prototype=i;var s=new r;return r.prototype=void 0,s}})();return Gb=n,Gb}var Kb,Lj;function iV(){if(Lj)return Kb;Lj=1;var e=rV(),t=Im(),n=Bm();function r(i){return typeof i.constructor=="function"&&!n(i)?e(t(i)):{}}return Kb=r,Kb}var Yb,Pj;function qce(){if(Pj)return Yb;Pj=1;var e=Xl(),t=Si(),n="[object Map]";function r(i){return t(i)&&e(i)==n}return Yb=r,Yb}var Wb,Bj;function Vce(){if(Bj)return Wb;Bj=1;var e=qce(),t=Pm(),n=jk(),r=n&&n.isMap,i=r?t(r):e;return Wb=i,Wb}var Xb,Ij;function Hce(){if(Ij)return Xb;Ij=1;var e=Xl(),t=Si(),n="[object Set]";function r(i){return t(i)&&e(i)==n}return Xb=r,Xb}var Zb,zj;function Fce(){if(zj)return Zb;zj=1;var e=Hce(),t=Pm(),n=jk(),r=n&&n.isSet,i=r?t(r):e;return Zb=i,Zb}var Qb,qj;function sV(){if(qj)return Qb;qj=1;var e=Rm(),t=Rk(),n=jm(),r=kce(),i=Ace(),s=Kq(),o=Yq(),l=Mce(),u=_ce(),d=Jq(),h=Dce(),p=Xl(),g=Lce(),y=zce(),x=iV(),S=Yt(),w=Wl(),E=Vce(),N=Rr(),k=Fce(),T=lo(),A=Ca(),_=1,R=2,D=4,B="[object Arguments]",$="[object Array]",z="[object Boolean]",V="[object Date]",Y="[object Error]",I="[object Function]",F="[object GeneratorFunction]",L="[object Map]",q="[object Number]",W="[object Object]",J="[object RegExp]",P="[object Set]",G="[object String]",oe="[object Symbol]",ce="[object WeakMap]",H="[object ArrayBuffer]",X="[object DataView]",Q="[object Float32Array]",ie="[object Float64Array]",te="[object Int8Array]",ge="[object Int16Array]",xe="[object Int32Array]",Me="[object Uint8Array]",Ae="[object Uint8ClampedArray]",Te="[object Uint16Array]",we="[object Uint32Array]",Se={};Se[B]=Se[$]=Se[H]=Se[X]=Se[z]=Se[V]=Se[Q]=Se[ie]=Se[te]=Se[ge]=Se[xe]=Se[L]=Se[q]=Se[W]=Se[J]=Se[P]=Se[G]=Se[oe]=Se[Me]=Se[Ae]=Se[Te]=Se[we]=!0,Se[Y]=Se[I]=Se[ce]=!1;function Je(ke,Pt,bn,jr,Wt,Bt){var ut,dr=Pt&_,On=Pt&R,xn=Pt&D;if(bn&&(ut=Wt?bn(ke,jr,Wt,Bt):bn(ke)),ut!==void 0)return ut;if(!N(ke))return ke;var pt=S(ke);if(pt){if(ut=g(ke),!dr)return o(ke,ut)}else{var It=p(ke),zt=It==I||It==F;if(w(ke))return s(ke,dr);if(It==W||It==B||zt&&!Wt){if(ut=On||zt?{}:x(ke),!dr)return On?u(ke,i(ut,ke)):l(ke,r(ut,ke))}else{if(!Se[It])return Wt?ke:{};ut=y(ke,It,dr)}}Bt||(Bt=new e);var qe=Bt.get(ke);if(qe)return qe;Bt.set(ke,ut),k(ke)?ke.forEach(function(en){ut.add(Je(en,Pt,bn,en,ke,Bt))}):E(ke)&&ke.forEach(function(en,tn){ut.set(tn,Je(en,Pt,bn,tn,ke,Bt))});var Wr=xn?On?h:d:On?A:T,Xr=pt?void 0:Wr(ke);return t(Xr||ke,function(en,tn){Xr&&(tn=en,en=ke[tn]),n(ut,tn,Je(en,Pt,bn,tn,ke,Bt))}),ut}return Qb=Je,Qb}var Jb,Vj;function Uce(){if(Vj)return Jb;Vj=1;var e=sV(),t=4;function n(r){return e(r,t)}return Jb=n,Jb}var ex,Hj;function zk(){if(Hj)return ex;Hj=1;function e(t){return function(){return t}}return ex=e,ex}var tx,Fj;function $ce(){if(Fj)return tx;Fj=1;function e(t){return function(n,r,i){for(var s=-1,o=Object(n),l=i(n),u=l.length;u--;){var d=l[t?u:++s];if(r(o[d],d,o)===!1)break}return n}}return tx=e,tx}var nx,Uj;function qk(){if(Uj)return nx;Uj=1;var e=$ce(),t=e();return nx=t,nx}var rx,$j;function Vk(){if($j)return rx;$j=1;var e=qk(),t=lo();function n(r,i){return r&&e(r,i,t)}return rx=n,rx}var ix,Gj;function Gce(){if(Gj)return ix;Gj=1;var e=ns();function t(n,r){return function(i,s){if(i==null)return i;if(!e(i))return n(i,s);for(var o=i.length,l=r?o:-1,u=Object(i);(r?l--:++l<o)&&s(u[l],l,u)!==!1;);return i}}return ix=t,ix}var sx,Kj;function zm(){if(Kj)return sx;Kj=1;var e=Vk(),t=Gce(),n=t(e);return sx=n,sx}var ox,Yj;function Ea(){if(Yj)return ox;Yj=1;function e(t){return t}return ox=e,ox}var ax,Wj;function oV(){if(Wj)return ax;Wj=1;var e=Ea();function t(n){return typeof n=="function"?n:e}return ax=t,ax}var lx,Xj;function aV(){if(Xj)return lx;Xj=1;var e=Rk(),t=zm(),n=oV(),r=Yt();function i(s,o){var l=r(s)?e:t;return l(s,n(o))}return lx=i,lx}var cx,Zj;function lV(){return Zj||(Zj=1,cx=aV()),cx}var ux,Qj;function Kce(){if(Qj)return ux;Qj=1;var e=zm();function t(n,r){var i=[];return e(n,function(s,o,l){r(s,o,l)&&i.push(s)}),i}return ux=t,ux}var dx,Jj;function Yce(){if(Jj)return dx;Jj=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return dx=t,dx}var fx,e3;function Wce(){if(e3)return fx;e3=1;function e(t){return this.__data__.has(t)}return fx=e,fx}var hx,t3;function cV(){if(t3)return hx;t3=1;var e=Dk(),t=Yce(),n=Wce();function r(i){var s=-1,o=i==null?0:i.length;for(this.__data__=new e;++s<o;)this.add(i[s])}return r.prototype.add=r.prototype.push=t,r.prototype.has=n,hx=r,hx}var px,n3;function Xce(){if(n3)return px;n3=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(t[r],r,t))return!0;return!1}return px=e,px}var mx,r3;function uV(){if(r3)return mx;r3=1;function e(t,n){return t.has(n)}return mx=e,mx}var gx,i3;function dV(){if(i3)return gx;i3=1;var e=cV(),t=Xce(),n=uV(),r=1,i=2;function s(o,l,u,d,h,p){var g=u&r,y=o.length,x=l.length;if(y!=x&&!(g&&x>y))return!1;var S=p.get(o),w=p.get(l);if(S&&w)return S==l&&w==o;var E=-1,N=!0,k=u&i?new e:void 0;for(p.set(o,l),p.set(l,o);++E<y;){var T=o[E],A=l[E];if(d)var _=g?d(A,T,E,l,o,p):d(T,A,E,o,l,p);if(_!==void 0){if(_)continue;N=!1;break}if(k){if(!t(l,function(R,D){if(!n(k,D)&&(T===R||h(T,R,u,d,p)))return k.push(D)})){N=!1;break}}else if(!(T===A||h(T,A,u,d,p))){N=!1;break}}return p.delete(o),p.delete(l),N}return gx=s,gx}var yx,s3;function Zce(){if(s3)return yx;s3=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i,s){r[++n]=[s,i]}),r}return yx=e,yx}var vx,o3;function Hk(){if(o3)return vx;o3=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i){r[++n]=i}),r}return vx=e,vx}var bx,a3;function Qce(){if(a3)return bx;a3=1;var e=Yl(),t=tV(),n=Kl(),r=dV(),i=Zce(),s=Hk(),o=1,l=2,u="[object Boolean]",d="[object Date]",h="[object Error]",p="[object Map]",g="[object Number]",y="[object RegExp]",x="[object Set]",S="[object String]",w="[object Symbol]",E="[object ArrayBuffer]",N="[object DataView]",k=e?e.prototype:void 0,T=k?k.valueOf:void 0;function A(_,R,D,B,$,z,V){switch(D){case N:if(_.byteLength!=R.byteLength||_.byteOffset!=R.byteOffset)return!1;_=_.buffer,R=R.buffer;case E:return!(_.byteLength!=R.byteLength||!z(new t(_),new t(R)));case u:case d:case g:return n(+_,+R);case h:return _.name==R.name&&_.message==R.message;case y:case S:return _==R+"";case p:var Y=i;case x:var I=B&o;if(Y||(Y=s),_.size!=R.size&&!I)return!1;var F=V.get(_);if(F)return F==R;B|=l,V.set(_,R);var L=r(Y(_),Y(R),B,$,z,V);return V.delete(_),L;case w:if(T)return T.call(_)==T.call(R)}return!1}return bx=A,bx}var xx,l3;function Jce(){if(l3)return xx;l3=1;var e=Jq(),t=1,n=Object.prototype,r=n.hasOwnProperty;function i(s,o,l,u,d,h){var p=l&t,g=e(s),y=g.length,x=e(o),S=x.length;if(y!=S&&!p)return!1;for(var w=y;w--;){var E=g[w];if(!(p?E in o:r.call(o,E)))return!1}var N=h.get(s),k=h.get(o);if(N&&k)return N==o&&k==s;var T=!0;h.set(s,o),h.set(o,s);for(var A=p;++w<y;){E=g[w];var _=s[E],R=o[E];if(u)var D=p?u(R,_,E,o,s,h):u(_,R,E,s,o,h);if(!(D===void 0?_===R||d(_,R,l,u,h):D)){T=!1;break}A||(A=E=="constructor")}if(T&&!A){var B=s.constructor,$=o.constructor;B!=$&&"constructor"in s&&"constructor"in o&&!(typeof B=="function"&&B instanceof B&&typeof $=="function"&&$ instanceof $)&&(T=!1)}return h.delete(s),h.delete(o),T}return xx=i,xx}var wx,c3;function eue(){if(c3)return wx;c3=1;var e=Rm(),t=dV(),n=Qce(),r=Jce(),i=Xl(),s=Yt(),o=Wl(),l=Dd(),u=1,d="[object Arguments]",h="[object Array]",p="[object Object]",g=Object.prototype,y=g.hasOwnProperty;function x(S,w,E,N,k,T){var A=s(S),_=s(w),R=A?h:i(S),D=_?h:i(w);R=R==d?p:R,D=D==d?p:D;var B=R==p,$=D==p,z=R==D;if(z&&o(S)){if(!o(w))return!1;A=!0,B=!1}if(z&&!B)return T||(T=new e),A||l(S)?t(S,w,E,N,k,T):n(S,w,R,E,N,k,T);if(!(E&u)){var V=B&&y.call(S,"__wrapped__"),Y=$&&y.call(w,"__wrapped__");if(V||Y){var I=V?S.value():S,F=Y?w.value():w;return T||(T=new e),k(I,F,E,N,T)}}return z?(T||(T=new e),r(S,w,E,N,k,T)):!1}return wx=x,wx}var Sx,u3;function fV(){if(u3)return Sx;u3=1;var e=eue(),t=Si();function n(r,i,s,o,l){return r===i?!0:r==null||i==null||!t(r)&&!t(i)?r!==r&&i!==i:e(r,i,s,o,n,l)}return Sx=n,Sx}var Cx,d3;function tue(){if(d3)return Cx;d3=1;var e=Rm(),t=fV(),n=1,r=2;function i(s,o,l,u){var d=l.length,h=d,p=!u;if(s==null)return!h;for(s=Object(s);d--;){var g=l[d];if(p&&g[2]?g[1]!==s[g[0]]:!(g[0]in s))return!1}for(;++d<h;){g=l[d];var y=g[0],x=s[y],S=g[1];if(p&&g[2]){if(x===void 0&&!(y in s))return!1}else{var w=new e;if(u)var E=u(x,S,y,s,o,w);if(!(E===void 0?t(S,x,n|r,u,w):E))return!1}}return!0}return Cx=i,Cx}var Ex,f3;function hV(){if(f3)return Ex;f3=1;var e=Rr();function t(n){return n===n&&!e(n)}return Ex=t,Ex}var kx,h3;function nue(){if(h3)return kx;h3=1;var e=hV(),t=lo();function n(r){for(var i=t(r),s=i.length;s--;){var o=i[s],l=r[o];i[s]=[o,l,e(l)]}return i}return kx=n,kx}var Tx,p3;function pV(){if(p3)return Tx;p3=1;function e(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}return Tx=e,Tx}var Nx,m3;function rue(){if(m3)return Nx;m3=1;var e=tue(),t=nue(),n=pV();function r(i){var s=t(i);return s.length==1&&s[0][2]?n(s[0][0],s[0][1]):function(o){return o===i||e(o,i,s)}}return Nx=r,Nx}var Ax,g3;function Zl(){if(g3)return Ax;g3=1;var e=wa(),t=Si(),n="[object Symbol]";function r(i){return typeof i=="symbol"||t(i)&&e(i)==n}return Ax=r,Ax}var Mx,y3;function Fk(){if(y3)return Mx;y3=1;var e=Yt(),t=Zl(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,o){if(e(s))return!1;var l=typeof s;return l=="number"||l=="symbol"||l=="boolean"||s==null||t(s)?!0:r.test(s)||!n.test(s)||o!=null&&s in Object(o)}return Mx=i,Mx}var _x,v3;function iue(){if(v3)return _x;v3=1;var e=Dk(),t="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var s=function(){var o=arguments,l=i?i.apply(this,o):o[0],u=s.cache;if(u.has(l))return u.get(l);var d=r.apply(this,o);return s.cache=u.set(l,d)||u,d};return s.cache=new(n.Cache||e),s}return n.Cache=e,_x=n,_x}var Dx,b3;function sue(){if(b3)return Dx;b3=1;var e=iue(),t=500;function n(r){var i=e(r,function(o){return s.size===t&&s.clear(),o}),s=i.cache;return i}return Dx=n,Dx}var Rx,x3;function oue(){if(x3)return Rx;x3=1;var e=sue(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(t,function(o,l,u,d){s.push(u?d.replace(n,"$1"):l||o)}),s});return Rx=r,Rx}var Ox,w3;function qm(){if(w3)return Ox;w3=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,s=Array(i);++r<i;)s[r]=n(t[r],r,t);return s}return Ox=e,Ox}var jx,S3;function aue(){if(S3)return jx;S3=1;var e=Yl(),t=qm(),n=Yt(),r=Zl(),i=e?e.prototype:void 0,s=i?i.toString:void 0;function o(l){if(typeof l=="string")return l;if(n(l))return t(l,o)+"";if(r(l))return s?s.call(l):"";var u=l+"";return u=="0"&&1/l==-1/0?"-0":u}return jx=o,jx}var Lx,C3;function mV(){if(C3)return Lx;C3=1;var e=aue();function t(n){return n==null?"":e(n)}return Lx=t,Lx}var Px,E3;function Vm(){if(E3)return Px;E3=1;var e=Yt(),t=Fk(),n=oue(),r=mV();function i(s,o){return e(s)?s:t(s,o)?[s]:n(r(s))}return Px=i,Px}var Bx,k3;function Rd(){if(k3)return Bx;k3=1;var e=Zl();function t(n){if(typeof n=="string"||e(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return Bx=t,Bx}var Ix,T3;function Hm(){if(T3)return Ix;T3=1;var e=Vm(),t=Rd();function n(r,i){i=e(i,r);for(var s=0,o=i.length;r!=null&&s<o;)r=r[t(i[s++])];return s&&s==o?r:void 0}return Ix=n,Ix}var zx,N3;function lue(){if(N3)return zx;N3=1;var e=Hm();function t(n,r,i){var s=n==null?void 0:e(n,r);return s===void 0?i:s}return zx=t,zx}var qx,A3;function cue(){if(A3)return qx;A3=1;function e(t,n){return t!=null&&n in Object(t)}return qx=e,qx}var Vx,M3;function gV(){if(M3)return Vx;M3=1;var e=Vm(),t=_d(),n=Yt(),r=Lm(),i=Ok(),s=Rd();function o(l,u,d){u=e(u,l);for(var h=-1,p=u.length,g=!1;++h<p;){var y=s(u[h]);if(!(g=l!=null&&d(l,y)))break;l=l[y]}return g||++h!=p?g:(p=l==null?0:l.length,!!p&&i(p)&&r(y,p)&&(n(l)||t(l)))}return Vx=o,Vx}var Hx,_3;function yV(){if(_3)return Hx;_3=1;var e=cue(),t=gV();function n(r,i){return r!=null&&t(r,i,e)}return Hx=n,Hx}var Fx,D3;function uue(){if(D3)return Fx;D3=1;var e=fV(),t=lue(),n=yV(),r=Fk(),i=hV(),s=pV(),o=Rd(),l=1,u=2;function d(h,p){return r(h)&&i(p)?s(o(h),p):function(g){var y=t(g,h);return y===void 0&&y===p?n(g,h):e(p,y,l|u)}}return Fx=d,Fx}var Ux,R3;function vV(){if(R3)return Ux;R3=1;function e(t){return function(n){return n?.[t]}}return Ux=e,Ux}var $x,O3;function due(){if(O3)return $x;O3=1;var e=Hm();function t(n){return function(r){return e(r,n)}}return $x=t,$x}var Gx,j3;function fue(){if(j3)return Gx;j3=1;var e=vV(),t=due(),n=Fk(),r=Rd();function i(s){return n(s)?e(r(s)):t(s)}return Gx=i,Gx}var Kx,L3;function rs(){if(L3)return Kx;L3=1;var e=rue(),t=uue(),n=Ea(),r=Yt(),i=fue();function s(o){return typeof o=="function"?o:o==null?n:typeof o=="object"?r(o)?t(o[0],o[1]):e(o):i(o)}return Kx=s,Kx}var Yx,P3;function bV(){if(P3)return Yx;P3=1;var e=Wq(),t=Kce(),n=rs(),r=Yt();function i(s,o){var l=r(s)?e:t;return l(s,n(o,3))}return Yx=i,Yx}var Wx,B3;function hue(){if(B3)return Wx;B3=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r,i){return r!=null&&t.call(r,i)}return Wx=n,Wx}var Xx,I3;function xV(){if(I3)return Xx;I3=1;var e=hue(),t=gV();function n(r,i){return r!=null&&t(r,i,e)}return Xx=n,Xx}var Zx,z3;function pue(){if(z3)return Zx;z3=1;var e=Lk(),t=Xl(),n=_d(),r=Yt(),i=ns(),s=Wl(),o=Bm(),l=Dd(),u="[object Map]",d="[object Set]",h=Object.prototype,p=h.hasOwnProperty;function g(y){if(y==null)return!0;if(i(y)&&(r(y)||typeof y=="string"||typeof y.splice=="function"||s(y)||l(y)||n(y)))return!y.length;var x=t(y);if(x==u||x==d)return!y.size;if(o(y))return!e(y).length;for(var S in y)if(p.call(y,S))return!1;return!0}return Zx=g,Zx}var Qx,q3;function wV(){if(q3)return Qx;q3=1;function e(t){return t===void 0}return Qx=e,Qx}var Jx,V3;function SV(){if(V3)return Jx;V3=1;var e=zm(),t=ns();function n(r,i){var s=-1,o=t(r)?Array(r.length):[];return e(r,function(l,u,d){o[++s]=i(l,u,d)}),o}return Jx=n,Jx}var e1,H3;function CV(){if(H3)return e1;H3=1;var e=qm(),t=rs(),n=SV(),r=Yt();function i(s,o){var l=r(s)?e:n;return l(s,t(o,3))}return e1=i,e1}var t1,F3;function mue(){if(F3)return t1;F3=1;function e(t,n,r,i){var s=-1,o=t==null?0:t.length;for(i&&o&&(r=t[++s]);++s<o;)r=n(r,t[s],s,t);return r}return t1=e,t1}var n1,U3;function gue(){if(U3)return n1;U3=1;function e(t,n,r,i,s){return s(t,function(o,l,u){r=i?(i=!1,o):n(r,o,l,u)}),r}return n1=e,n1}var r1,$3;function EV(){if($3)return r1;$3=1;var e=mue(),t=zm(),n=rs(),r=gue(),i=Yt();function s(o,l,u){var d=i(o)?e:r,h=arguments.length<3;return d(o,n(l,4),u,h,t)}return r1=s,r1}var i1,G3;function yue(){if(G3)return i1;G3=1;var e=wa(),t=Yt(),n=Si(),r="[object String]";function i(s){return typeof s=="string"||!t(s)&&n(s)&&e(s)==r}return i1=i,i1}var s1,K3;function vue(){if(K3)return s1;K3=1;var e=vV(),t=e("length");return s1=t,s1}var o1,Y3;function bue(){if(Y3)return o1;Y3=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,s="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+e+i+s+"]");function u(d){return l.test(d)}return o1=u,o1}var a1,W3;function xue(){if(W3)return a1;W3=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,s="\\ufe0e\\ufe0f",o="["+e+"]",l="["+i+"]",u="\\ud83c[\\udffb-\\udfff]",d="(?:"+l+"|"+u+")",h="[^"+e+"]",p="(?:\\ud83c[\\udde6-\\uddff]){2}",g="[\\ud800-\\udbff][\\udc00-\\udfff]",y="\\u200d",x=d+"?",S="["+s+"]?",w="(?:"+y+"(?:"+[h,p,g].join("|")+")"+S+x+")*",E=S+x+w,N="(?:"+[h+l+"?",l,p,g,o].join("|")+")",k=RegExp(u+"(?="+u+")|"+N+E,"g");function T(A){for(var _=k.lastIndex=0;k.test(A);)++_;return _}return a1=T,a1}var l1,X3;function wue(){if(X3)return l1;X3=1;var e=vue(),t=bue(),n=xue();function r(i){return t(i)?n(i):e(i)}return l1=r,l1}var c1,Z3;function Sue(){if(Z3)return c1;Z3=1;var e=Lk(),t=Xl(),n=ns(),r=yue(),i=wue(),s="[object Map]",o="[object Set]";function l(u){if(u==null)return 0;if(n(u))return r(u)?i(u):u.length;var d=t(u);return d==s||d==o?u.size:e(u).length}return c1=l,c1}var u1,Q3;function Cue(){if(Q3)return u1;Q3=1;var e=Rk(),t=rV(),n=Vk(),r=rs(),i=Im(),s=Yt(),o=Wl(),l=Ad(),u=Rr(),d=Dd();function h(p,g,y){var x=s(p),S=x||o(p)||d(p);if(g=r(g,4),y==null){var w=p&&p.constructor;S?y=x?new w:[]:u(p)?y=l(w)?t(i(p)):{}:y={}}return(S?e:n)(p,function(E,N,k){return g(y,E,N,k)}),y}return u1=h,u1}var d1,J3;function Eue(){if(J3)return d1;J3=1;var e=Yl(),t=_d(),n=Yt(),r=e?e.isConcatSpreadable:void 0;function i(s){return n(s)||t(s)||!!(r&&s&&s[r])}return d1=i,d1}var f1,e4;function Uk(){if(e4)return f1;e4=1;var e=Bk(),t=Eue();function n(r,i,s,o,l){var u=-1,d=r.length;for(s||(s=t),l||(l=[]);++u<d;){var h=r[u];i>0&&s(h)?i>1?n(h,i-1,s,o,l):e(l,h):o||(l[l.length]=h)}return l}return f1=n,f1}var h1,t4;function kue(){if(t4)return h1;t4=1;function e(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}return h1=e,h1}var p1,n4;function kV(){if(n4)return p1;n4=1;var e=kue(),t=Math.max;function n(r,i,s){return i=t(i===void 0?r.length-1:i,0),function(){for(var o=arguments,l=-1,u=t(o.length-i,0),d=Array(u);++l<u;)d[l]=o[i+l];l=-1;for(var h=Array(i+1);++l<i;)h[l]=o[l];return h[i]=s(d),e(r,this,h)}}return p1=n,p1}var m1,r4;function Tue(){if(r4)return m1;r4=1;var e=zk(),t=Uq(),n=Ea(),r=t?function(i,s){return t(i,"toString",{configurable:!0,enumerable:!1,value:e(s),writable:!0})}:n;return m1=r,m1}var g1,i4;function Nue(){if(i4)return g1;i4=1;var e=800,t=16,n=Date.now;function r(i){var s=0,o=0;return function(){var l=n(),u=t-(l-o);if(o=l,u>0){if(++s>=e)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return g1=r,g1}var y1,s4;function TV(){if(s4)return y1;s4=1;var e=Tue(),t=Nue(),n=t(e);return y1=n,y1}var v1,o4;function Fm(){if(o4)return v1;o4=1;var e=Ea(),t=kV(),n=TV();function r(i,s){return n(t(i,s,e),i+"")}return v1=r,v1}var b1,a4;function NV(){if(a4)return b1;a4=1;function e(t,n,r,i){for(var s=t.length,o=r+(i?1:-1);i?o--:++o<s;)if(n(t[o],o,t))return o;return-1}return b1=e,b1}var x1,l4;function Aue(){if(l4)return x1;l4=1;function e(t){return t!==t}return x1=e,x1}var w1,c4;function Mue(){if(c4)return w1;c4=1;function e(t,n,r){for(var i=r-1,s=t.length;++i<s;)if(t[i]===n)return i;return-1}return w1=e,w1}var S1,u4;function _ue(){if(u4)return S1;u4=1;var e=NV(),t=Aue(),n=Mue();function r(i,s,o){return s===s?n(i,s,o):e(i,t,o)}return S1=r,S1}var C1,d4;function Due(){if(d4)return C1;d4=1;var e=_ue();function t(n,r){var i=n==null?0:n.length;return!!i&&e(n,r,0)>-1}return C1=t,C1}var E1,f4;function Rue(){if(f4)return E1;f4=1;function e(t,n,r){for(var i=-1,s=t==null?0:t.length;++i<s;)if(r(n,t[i]))return!0;return!1}return E1=e,E1}var k1,h4;function Oue(){if(h4)return k1;h4=1;function e(){}return k1=e,k1}var T1,p4;function jue(){if(p4)return T1;p4=1;var e=eV(),t=Oue(),n=Hk(),r=1/0,i=e&&1/n(new e([,-0]))[1]==r?function(s){return new e(s)}:t;return T1=i,T1}var N1,m4;function Lue(){if(m4)return N1;m4=1;var e=cV(),t=Due(),n=Rue(),r=uV(),i=jue(),s=Hk(),o=200;function l(u,d,h){var p=-1,g=t,y=u.length,x=!0,S=[],w=S;if(h)x=!1,g=n;else if(y>=o){var E=d?null:i(u);if(E)return s(E);x=!1,g=r,w=new e}else w=d?[]:S;e:for(;++p<y;){var N=u[p],k=d?d(N):N;if(N=h||N!==0?N:0,x&&k===k){for(var T=w.length;T--;)if(w[T]===k)continue e;d&&w.push(k),S.push(N)}else g(w,k,h)||(w!==S&&w.push(k),S.push(N))}return S}return N1=l,N1}var A1,g4;function AV(){if(g4)return A1;g4=1;var e=ns(),t=Si();function n(r){return t(r)&&e(r)}return A1=n,A1}var M1,y4;function Pue(){if(y4)return M1;y4=1;var e=Uk(),t=Fm(),n=Lue(),r=AV(),i=t(function(s){return n(e(s,1,r,!0))});return M1=i,M1}var _1,v4;function Bue(){if(v4)return _1;v4=1;var e=qm();function t(n,r){return e(r,function(i){return n[i]})}return _1=t,_1}var D1,b4;function MV(){if(b4)return D1;b4=1;var e=Bue(),t=lo();function n(r){return r==null?[]:e(r,t(r))}return D1=n,D1}var R1,x4;function Or(){if(x4)return R1;x4=1;var e;if(typeof Mk=="function")try{e={clone:Uce(),constant:zk(),each:lV(),filter:bV(),has:xV(),isArray:Yt(),isEmpty:pue(),isFunction:Ad(),isUndefined:wV(),keys:lo(),map:CV(),reduce:EV(),size:Sue(),transform:Cue(),union:Pue(),values:MV()}}catch{}return e||(e=window._),R1=e,R1}var O1,w4;function $k(){if(w4)return O1;w4=1;var e=Or();O1=i;var t="\0",n="\0",r="";function i(h){this._isDirected=e.has(h,"directed")?h.directed:!0,this._isMultigraph=e.has(h,"multigraph")?h.multigraph:!1,this._isCompound=e.has(h,"compound")?h.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(h){return this._label=h,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(h){return e.isFunction(h)||(h=e.constant(h)),this._defaultNodeLabelFn=h,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return e.keys(this._nodes)},i.prototype.sources=function(){var h=this;return e.filter(this.nodes(),function(p){return e.isEmpty(h._in[p])})},i.prototype.sinks=function(){var h=this;return e.filter(this.nodes(),function(p){return e.isEmpty(h._out[p])})},i.prototype.setNodes=function(h,p){var g=arguments,y=this;return e.each(h,function(x){g.length>1?y.setNode(x,p):y.setNode(x)}),this},i.prototype.setNode=function(h,p){return e.has(this._nodes,h)?(arguments.length>1&&(this._nodes[h]=p),this):(this._nodes[h]=arguments.length>1?p:this._defaultNodeLabelFn(h),this._isCompound&&(this._parent[h]=n,this._children[h]={},this._children[n][h]=!0),this._in[h]={},this._preds[h]={},this._out[h]={},this._sucs[h]={},++this._nodeCount,this)},i.prototype.node=function(h){return this._nodes[h]},i.prototype.hasNode=function(h){return e.has(this._nodes,h)},i.prototype.removeNode=function(h){var p=this;if(e.has(this._nodes,h)){var g=function(y){p.removeEdge(p._edgeObjs[y])};delete this._nodes[h],this._isCompound&&(this._removeFromParentsChildList(h),delete this._parent[h],e.each(this.children(h),function(y){p.setParent(y)}),delete this._children[h]),e.each(e.keys(this._in[h]),g),delete this._in[h],delete this._preds[h],e.each(e.keys(this._out[h]),g),delete this._out[h],delete this._sucs[h],--this._nodeCount}return this},i.prototype.setParent=function(h,p){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(p))p=n;else{p+="";for(var g=p;!e.isUndefined(g);g=this.parent(g))if(g===h)throw new Error("Setting "+p+" as parent of "+h+" would create a cycle");this.setNode(p)}return this.setNode(h),this._removeFromParentsChildList(h),this._parent[h]=p,this._children[p][h]=!0,this},i.prototype._removeFromParentsChildList=function(h){delete this._children[this._parent[h]][h]},i.prototype.parent=function(h){if(this._isCompound){var p=this._parent[h];if(p!==n)return p}},i.prototype.children=function(h){if(e.isUndefined(h)&&(h=n),this._isCompound){var p=this._children[h];if(p)return e.keys(p)}else{if(h===n)return this.nodes();if(this.hasNode(h))return[]}},i.prototype.predecessors=function(h){var p=this._preds[h];if(p)return e.keys(p)},i.prototype.successors=function(h){var p=this._sucs[h];if(p)return e.keys(p)},i.prototype.neighbors=function(h){var p=this.predecessors(h);if(p)return e.union(p,this.successors(h))},i.prototype.isLeaf=function(h){var p;return this.isDirected()?p=this.successors(h):p=this.neighbors(h),p.length===0},i.prototype.filterNodes=function(h){var p=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});p.setGraph(this.graph());var g=this;e.each(this._nodes,function(S,w){h(w)&&p.setNode(w,S)}),e.each(this._edgeObjs,function(S){p.hasNode(S.v)&&p.hasNode(S.w)&&p.setEdge(S,g.edge(S))});var y={};function x(S){var w=g.parent(S);return w===void 0||p.hasNode(w)?(y[S]=w,w):w in y?y[w]:x(w)}return this._isCompound&&e.each(p.nodes(),function(S){p.setParent(S,x(S))}),p},i.prototype.setDefaultEdgeLabel=function(h){return e.isFunction(h)||(h=e.constant(h)),this._defaultEdgeLabelFn=h,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return e.values(this._edgeObjs)},i.prototype.setPath=function(h,p){var g=this,y=arguments;return e.reduce(h,function(x,S){return y.length>1?g.setEdge(x,S,p):g.setEdge(x,S),S}),this},i.prototype.setEdge=function(){var h,p,g,y,x=!1,S=arguments[0];typeof S=="object"&&S!==null&&"v"in S?(h=S.v,p=S.w,g=S.name,arguments.length===2&&(y=arguments[1],x=!0)):(h=S,p=arguments[1],g=arguments[3],arguments.length>2&&(y=arguments[2],x=!0)),h=""+h,p=""+p,e.isUndefined(g)||(g=""+g);var w=l(this._isDirected,h,p,g);if(e.has(this._edgeLabels,w))return x&&(this._edgeLabels[w]=y),this;if(!e.isUndefined(g)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(h),this.setNode(p),this._edgeLabels[w]=x?y:this._defaultEdgeLabelFn(h,p,g);var E=u(this._isDirected,h,p,g);return h=E.v,p=E.w,Object.freeze(E),this._edgeObjs[w]=E,s(this._preds[p],h),s(this._sucs[h],p),this._in[p][w]=E,this._out[h][w]=E,this._edgeCount++,this},i.prototype.edge=function(h,p,g){var y=arguments.length===1?d(this._isDirected,arguments[0]):l(this._isDirected,h,p,g);return this._edgeLabels[y]},i.prototype.hasEdge=function(h,p,g){var y=arguments.length===1?d(this._isDirected,arguments[0]):l(this._isDirected,h,p,g);return e.has(this._edgeLabels,y)},i.prototype.removeEdge=function(h,p,g){var y=arguments.length===1?d(this._isDirected,arguments[0]):l(this._isDirected,h,p,g),x=this._edgeObjs[y];return x&&(h=x.v,p=x.w,delete this._edgeLabels[y],delete this._edgeObjs[y],o(this._preds[p],h),o(this._sucs[h],p),delete this._in[p][y],delete this._out[h][y],this._edgeCount--),this},i.prototype.inEdges=function(h,p){var g=this._in[h];if(g){var y=e.values(g);return p?e.filter(y,function(x){return x.v===p}):y}},i.prototype.outEdges=function(h,p){var g=this._out[h];if(g){var y=e.values(g);return p?e.filter(y,function(x){return x.w===p}):y}},i.prototype.nodeEdges=function(h,p){var g=this.inEdges(h,p);if(g)return g.concat(this.outEdges(h,p))};function s(h,p){h[p]?h[p]++:h[p]=1}function o(h,p){--h[p]||delete h[p]}function l(h,p,g,y){var x=""+p,S=""+g;if(!h&&x>S){var w=x;x=S,S=w}return x+r+S+r+(e.isUndefined(y)?t:y)}function u(h,p,g,y){var x=""+p,S=""+g;if(!h&&x>S){var w=x;x=S,S=w}var E={v:x,w:S};return y&&(E.name=y),E}function d(h,p){return l(h,p.v,p.w,p.name)}return O1}var j1,S4;function Iue(){return S4||(S4=1,j1="2.1.8"),j1}var L1,C4;function zue(){return C4||(C4=1,L1={Graph:$k(),version:Iue()}),L1}var P1,E4;function que(){if(E4)return P1;E4=1;var e=Or(),t=$k();P1={write:n,read:s};function n(o){var l={options:{directed:o.isDirected(),multigraph:o.isMultigraph(),compound:o.isCompound()},nodes:r(o),edges:i(o)};return e.isUndefined(o.graph())||(l.value=e.clone(o.graph())),l}function r(o){return e.map(o.nodes(),function(l){var u=o.node(l),d=o.parent(l),h={v:l};return e.isUndefined(u)||(h.value=u),e.isUndefined(d)||(h.parent=d),h})}function i(o){return e.map(o.edges(),function(l){var u=o.edge(l),d={v:l.v,w:l.w};return e.isUndefined(l.name)||(d.name=l.name),e.isUndefined(u)||(d.value=u),d})}function s(o){var l=new t(o.options).setGraph(o.value);return e.each(o.nodes,function(u){l.setNode(u.v,u.value),u.parent&&l.setParent(u.v,u.parent)}),e.each(o.edges,function(u){l.setEdge({v:u.v,w:u.w,name:u.name},u.value)}),l}return P1}var B1,k4;function Vue(){if(k4)return B1;k4=1;var e=Or();B1=t;function t(n){var r={},i=[],s;function o(l){e.has(r,l)||(r[l]=!0,s.push(l),e.each(n.successors(l),o),e.each(n.predecessors(l),o))}return e.each(n.nodes(),function(l){s=[],o(l),s.length&&i.push(s)}),i}return B1}var I1,T4;function _V(){if(T4)return I1;T4=1;var e=Or();I1=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,r){var i=this._keyIndices;if(n=String(n),!e.has(i,n)){var s=this._arr,o=s.length;return i[n]=o,s.push({key:n,priority:r}),this._decrease(o),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)},t.prototype._heapify=function(n){var r=this._arr,i=2*n,s=i+1,o=n;i<r.length&&(o=r[i].priority<r[o].priority?i:o,s<r.length&&(o=r[s].priority<r[o].priority?s:o),o!==n&&(this._swap(n,o),this._heapify(o)))},t.prototype._decrease=function(n){for(var r=this._arr,i=r[n].priority,s;n!==0&&(s=n>>1,!(r[s].priority<i));)this._swap(n,s),n=s},t.prototype._swap=function(n,r){var i=this._arr,s=this._keyIndices,o=i[n],l=i[r];i[n]=l,i[r]=o,s[l.key]=n,s[o.key]=r},I1}var z1,N4;function DV(){if(N4)return z1;N4=1;var e=Or(),t=_V();z1=r;var n=e.constant(1);function r(s,o,l,u){return i(s,String(o),l||n,u||function(d){return s.outEdges(d)})}function i(s,o,l,u){var d={},h=new t,p,g,y=function(x){var S=x.v!==p?x.v:x.w,w=d[S],E=l(x),N=g.distance+E;if(E<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+x+" Weight: "+E);N<w.distance&&(w.distance=N,w.predecessor=p,h.decrease(S,N))};for(s.nodes().forEach(function(x){var S=x===o?0:Number.POSITIVE_INFINITY;d[x]={distance:S},h.add(x,S)});h.size()>0&&(p=h.removeMin(),g=d[p],g.distance!==Number.POSITIVE_INFINITY);)u(p).forEach(y);return d}return z1}var q1,A4;function Hue(){if(A4)return q1;A4=1;var e=DV(),t=Or();q1=n;function n(r,i,s){return t.transform(r.nodes(),function(o,l){o[l]=e(r,l,i,s)},{})}return q1}var V1,M4;function RV(){if(M4)return V1;M4=1;var e=Or();V1=t;function t(n){var r=0,i=[],s={},o=[];function l(u){var d=s[u]={onStack:!0,lowlink:r,index:r++};if(i.push(u),n.successors(u).forEach(function(g){e.has(s,g)?s[g].onStack&&(d.lowlink=Math.min(d.lowlink,s[g].index)):(l(g),d.lowlink=Math.min(d.lowlink,s[g].lowlink))}),d.lowlink===d.index){var h=[],p;do p=i.pop(),s[p].onStack=!1,h.push(p);while(u!==p);o.push(h)}}return n.nodes().forEach(function(u){e.has(s,u)||l(u)}),o}return V1}var H1,_4;function Fue(){if(_4)return H1;_4=1;var e=Or(),t=RV();H1=n;function n(r){return e.filter(t(r),function(i){return i.length>1||i.length===1&&r.hasEdge(i[0],i[0])})}return H1}var F1,D4;function Uue(){if(D4)return F1;D4=1;var e=Or();F1=n;var t=e.constant(1);function n(i,s,o){return r(i,s||t,o||function(l){return i.outEdges(l)})}function r(i,s,o){var l={},u=i.nodes();return u.forEach(function(d){l[d]={},l[d][d]={distance:0},u.forEach(function(h){d!==h&&(l[d][h]={distance:Number.POSITIVE_INFINITY})}),o(d).forEach(function(h){var p=h.v===d?h.w:h.v,g=s(h);l[d][p]={distance:g,predecessor:d}})}),u.forEach(function(d){var h=l[d];u.forEach(function(p){var g=l[p];u.forEach(function(y){var x=g[d],S=h[y],w=g[y],E=x.distance+S.distance;E<w.distance&&(w.distance=E,w.predecessor=S.predecessor)})})}),l}return F1}var U1,R4;function OV(){if(R4)return U1;R4=1;var e=Or();U1=t,t.CycleException=n;function t(r){var i={},s={},o=[];function l(u){if(e.has(s,u))throw new n;e.has(i,u)||(s[u]=!0,i[u]=!0,e.each(r.predecessors(u),l),delete s[u],o.push(u))}if(e.each(r.sinks(),l),e.size(i)!==r.nodeCount())throw new n;return o}function n(){}return n.prototype=new Error,U1}var $1,O4;function $ue(){if(O4)return $1;O4=1;var e=OV();$1=t;function t(n){try{e(n)}catch(r){if(r instanceof e.CycleException)return!1;throw r}return!0}return $1}var G1,j4;function jV(){if(j4)return G1;j4=1;var e=Or();G1=t;function t(r,i,s){e.isArray(i)||(i=[i]);var o=(r.isDirected()?r.successors:r.neighbors).bind(r),l=[],u={};return e.each(i,function(d){if(!r.hasNode(d))throw new Error("Graph does not have node: "+d);n(r,d,s==="post",u,o,l)}),l}function n(r,i,s,o,l,u){e.has(o,i)||(o[i]=!0,s||u.push(i),e.each(l(i),function(d){n(r,d,s,o,l,u)}),s&&u.push(i))}return G1}var K1,L4;function Gue(){if(L4)return K1;L4=1;var e=jV();K1=t;function t(n,r){return e(n,r,"post")}return K1}var Y1,P4;function Kue(){if(P4)return Y1;P4=1;var e=jV();Y1=t;function t(n,r){return e(n,r,"pre")}return Y1}var W1,B4;function Yue(){if(B4)return W1;B4=1;var e=Or(),t=$k(),n=_V();W1=r;function r(i,s){var o=new t,l={},u=new n,d;function h(g){var y=g.v===d?g.w:g.v,x=u.priority(y);if(x!==void 0){var S=s(g);S<x&&(l[y]=d,u.decrease(y,S))}}if(i.nodeCount()===0)return o;e.each(i.nodes(),function(g){u.add(g,Number.POSITIVE_INFINITY),o.setNode(g)}),u.decrease(i.nodes()[0],0);for(var p=!1;u.size()>0;){if(d=u.removeMin(),e.has(l,d))o.setEdge(d,l[d]);else{if(p)throw new Error("Input graph is not connected: "+i);p=!0}i.nodeEdges(d).forEach(h)}return o}return W1}var X1,I4;function Wue(){return I4||(I4=1,X1={components:Vue(),dijkstra:DV(),dijkstraAll:Hue(),findCycles:Fue(),floydWarshall:Uue(),isAcyclic:$ue(),postorder:Gue(),preorder:Kue(),prim:Yue(),tarjan:RV(),topsort:OV()}),X1}var Z1,z4;function Xue(){if(z4)return Z1;z4=1;var e=zue();return Z1={Graph:e.Graph,json:que(),alg:Wue(),version:e.version},Z1}var Q1,q4;function Gr(){if(q4)return Q1;q4=1;var e;if(typeof Mk=="function")try{e=Xue()}catch{}return e||(e=window.graphlib),Q1=e,Q1}var J1,V4;function Zue(){if(V4)return J1;V4=1;var e=sV(),t=1,n=4;function r(i){return e(i,t|n)}return J1=r,J1}var ew,H4;function Um(){if(H4)return ew;H4=1;var e=Kl(),t=ns(),n=Lm(),r=Rr();function i(s,o,l){if(!r(l))return!1;var u=typeof o;return(u=="number"?t(l)&&n(o,l.length):u=="string"&&o in l)?e(l[o],s):!1}return ew=i,ew}var tw,F4;function Que(){if(F4)return tw;F4=1;var e=Fm(),t=Kl(),n=Um(),r=Ca(),i=Object.prototype,s=i.hasOwnProperty,o=e(function(l,u){l=Object(l);var d=-1,h=u.length,p=h>2?u[2]:void 0;for(p&&n(u[0],u[1],p)&&(h=1);++d<h;)for(var g=u[d],y=r(g),x=-1,S=y.length;++x<S;){var w=y[x],E=l[w];(E===void 0||t(E,i[w])&&!s.call(l,w))&&(l[w]=g[w])}return l});return tw=o,tw}var nw,U4;function Jue(){if(U4)return nw;U4=1;var e=rs(),t=ns(),n=lo();function r(i){return function(s,o,l){var u=Object(s);if(!t(s)){var d=e(o,3);s=n(s),o=function(p){return d(u[p],p,u)}}var h=i(s,o,l);return h>-1?u[d?s[h]:h]:void 0}}return nw=r,nw}var rw,$4;function ede(){if($4)return rw;$4=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return rw=t,rw}var iw,G4;function tde(){if(G4)return iw;G4=1;var e=ede(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return iw=n,iw}var sw,K4;function nde(){if(K4)return sw;K4=1;var e=tde(),t=Rr(),n=Zl(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function u(d){if(typeof d=="number")return d;if(n(d))return r;if(t(d)){var h=typeof d.valueOf=="function"?d.valueOf():d;d=t(h)?h+"":h}if(typeof d!="string")return d===0?d:+d;d=e(d);var p=s.test(d);return p||o.test(d)?l(d.slice(2),p?2:8):i.test(d)?r:+d}return sw=u,sw}var ow,Y4;function LV(){if(Y4)return ow;Y4=1;var e=nde(),t=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=e(i),i===t||i===-t){var s=i<0?-1:1;return s*n}return i===i?i:0}return ow=r,ow}var aw,W4;function rde(){if(W4)return aw;W4=1;var e=LV();function t(n){var r=e(n),i=r%1;return r===r?i?r-i:r:0}return aw=t,aw}var lw,X4;function ide(){if(X4)return lw;X4=1;var e=NV(),t=rs(),n=rde(),r=Math.max;function i(s,o,l){var u=s==null?0:s.length;if(!u)return-1;var d=l==null?0:n(l);return d<0&&(d=r(u+d,0)),e(s,t(o,3),d)}return lw=i,lw}var cw,Z4;function sde(){if(Z4)return cw;Z4=1;var e=Jue(),t=ide(),n=e(t);return cw=n,cw}var uw,Q4;function PV(){if(Q4)return uw;Q4=1;var e=Uk();function t(n){var r=n==null?0:n.length;return r?e(n,1):[]}return uw=t,uw}var dw,J4;function ode(){if(J4)return dw;J4=1;var e=qk(),t=oV(),n=Ca();function r(i,s){return i==null?i:e(i,t(s),n)}return dw=r,dw}var fw,eL;function ade(){if(eL)return fw;eL=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return fw=e,fw}var hw,tL;function lde(){if(tL)return hw;tL=1;var e=Om(),t=Vk(),n=rs();function r(i,s){var o={};return s=n(s,3),t(i,function(l,u,d){e(o,u,s(l,u,d))}),o}return hw=r,hw}var pw,nL;function Gk(){if(nL)return pw;nL=1;var e=Zl();function t(n,r,i){for(var s=-1,o=n.length;++s<o;){var l=n[s],u=r(l);if(u!=null&&(d===void 0?u===u&&!e(u):i(u,d)))var d=u,h=l}return h}return pw=t,pw}var mw,rL;function cde(){if(rL)return mw;rL=1;function e(t,n){return t>n}return mw=e,mw}var gw,iL;function ude(){if(iL)return gw;iL=1;var e=Gk(),t=cde(),n=Ea();function r(i){return i&&i.length?e(i,n,t):void 0}return gw=r,gw}var yw,sL;function BV(){if(sL)return yw;sL=1;var e=Om(),t=Kl();function n(r,i,s){(s!==void 0&&!t(r[i],s)||s===void 0&&!(i in r))&&e(r,i,s)}return yw=n,yw}var vw,oL;function dde(){if(oL)return vw;oL=1;var e=wa(),t=Im(),n=Si(),r="[object Object]",i=Function.prototype,s=Object.prototype,o=i.toString,l=s.hasOwnProperty,u=o.call(Object);function d(h){if(!n(h)||e(h)!=r)return!1;var p=t(h);if(p===null)return!0;var g=l.call(p,"constructor")&&p.constructor;return typeof g=="function"&&g instanceof g&&o.call(g)==u}return vw=d,vw}var bw,aL;function IV(){if(aL)return bw;aL=1;function e(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}return bw=e,bw}var xw,lL;function fde(){if(lL)return xw;lL=1;var e=Md(),t=Ca();function n(r){return e(r,t(r))}return xw=n,xw}var ww,cL;function hde(){if(cL)return ww;cL=1;var e=BV(),t=Kq(),n=nV(),r=Yq(),i=iV(),s=_d(),o=Yt(),l=AV(),u=Wl(),d=Ad(),h=Rr(),p=dde(),g=Dd(),y=IV(),x=fde();function S(w,E,N,k,T,A,_){var R=y(w,N),D=y(E,N),B=_.get(D);if(B){e(w,N,B);return}var $=A?A(R,D,N+"",w,E,_):void 0,z=$===void 0;if(z){var V=o(D),Y=!V&&u(D),I=!V&&!Y&&g(D);$=D,V||Y||I?o(R)?$=R:l(R)?$=r(R):Y?(z=!1,$=t(D,!0)):I?(z=!1,$=n(D,!0)):$=[]:p(D)||s(D)?($=R,s(R)?$=x(R):(!h(R)||d(R))&&($=i(D))):z=!1}z&&(_.set(D,$),T($,D,k,A,_),_.delete(D)),e(w,N,$)}return ww=S,ww}var Sw,uL;function pde(){if(uL)return Sw;uL=1;var e=Rm(),t=BV(),n=qk(),r=hde(),i=Rr(),s=Ca(),o=IV();function l(u,d,h,p,g){u!==d&&n(d,function(y,x){if(g||(g=new e),i(y))r(u,d,x,h,l,p,g);else{var S=p?p(o(u,x),y,x+"",u,d,g):void 0;S===void 0&&(S=y),t(u,x,S)}},s)}return Sw=l,Sw}var Cw,dL;function mde(){if(dL)return Cw;dL=1;var e=Fm(),t=Um();function n(r){return e(function(i,s){var o=-1,l=s.length,u=l>1?s[l-1]:void 0,d=l>2?s[2]:void 0;for(u=r.length>3&&typeof u=="function"?(l--,u):void 0,d&&t(s[0],s[1],d)&&(u=l<3?void 0:u,l=1),i=Object(i);++o<l;){var h=s[o];h&&r(i,h,o,u)}return i})}return Cw=n,Cw}var Ew,fL;function gde(){if(fL)return Ew;fL=1;var e=pde(),t=mde(),n=t(function(r,i,s){e(r,i,s)});return Ew=n,Ew}var kw,hL;function zV(){if(hL)return kw;hL=1;function e(t,n){return t<n}return kw=e,kw}var Tw,pL;function yde(){if(pL)return Tw;pL=1;var e=Gk(),t=zV(),n=Ea();function r(i){return i&&i.length?e(i,n,t):void 0}return Tw=r,Tw}var Nw,mL;function vde(){if(mL)return Nw;mL=1;var e=Gk(),t=rs(),n=zV();function r(i,s){return i&&i.length?e(i,t(s,2),n):void 0}return Nw=r,Nw}var Aw,gL;function bde(){if(gL)return Aw;gL=1;var e=Yr(),t=function(){return e.Date.now()};return Aw=t,Aw}var Mw,yL;function xde(){if(yL)return Mw;yL=1;var e=jm(),t=Vm(),n=Lm(),r=Rr(),i=Rd();function s(o,l,u,d){if(!r(o))return o;l=t(l,o);for(var h=-1,p=l.length,g=p-1,y=o;y!=null&&++h<p;){var x=i(l[h]),S=u;if(x==="__proto__"||x==="constructor"||x==="prototype")return o;if(h!=g){var w=y[x];S=d?d(w,x,y):void 0,S===void 0&&(S=r(w)?w:n(l[h+1])?[]:{})}e(y,x,S),y=y[x]}return o}return Mw=s,Mw}var _w,vL;function wde(){if(vL)return _w;vL=1;var e=Hm(),t=xde(),n=Vm();function r(i,s,o){for(var l=-1,u=s.length,d={};++l<u;){var h=s[l],p=e(i,h);o(p,h)&&t(d,n(h,i),p)}return d}return _w=r,_w}var Dw,bL;function Sde(){if(bL)return Dw;bL=1;var e=wde(),t=yV();function n(r,i){return e(r,i,function(s,o){return t(r,o)})}return Dw=n,Dw}var Rw,xL;function Cde(){if(xL)return Rw;xL=1;var e=PV(),t=kV(),n=TV();function r(i){return n(t(i,void 0,e),i+"")}return Rw=r,Rw}var Ow,wL;function Ede(){if(wL)return Ow;wL=1;var e=Sde(),t=Cde(),n=t(function(r,i){return r==null?{}:e(r,i)});return Ow=n,Ow}var jw,SL;function kde(){if(SL)return jw;SL=1;var e=Math.ceil,t=Math.max;function n(r,i,s,o){for(var l=-1,u=t(e((i-r)/(s||1)),0),d=Array(u);u--;)d[o?u:++l]=r,r+=s;return d}return jw=n,jw}var Lw,CL;function Tde(){if(CL)return Lw;CL=1;var e=kde(),t=Um(),n=LV();function r(i){return function(s,o,l){return l&&typeof l!="number"&&t(s,o,l)&&(o=l=void 0),s=n(s),o===void 0?(o=s,s=0):o=n(o),l=l===void 0?s<o?1:-1:n(l),e(s,o,l,i)}}return Lw=r,Lw}var Pw,EL;function Nde(){if(EL)return Pw;EL=1;var e=Tde(),t=e();return Pw=t,Pw}var Bw,kL;function Ade(){if(kL)return Bw;kL=1;function e(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}return Bw=e,Bw}var Iw,TL;function Mde(){if(TL)return Iw;TL=1;var e=Zl();function t(n,r){if(n!==r){var i=n!==void 0,s=n===null,o=n===n,l=e(n),u=r!==void 0,d=r===null,h=r===r,p=e(r);if(!d&&!p&&!l&&n>r||l&&u&&h&&!d&&!p||s&&u&&h||!i&&h||!o)return 1;if(!s&&!l&&!p&&n<r||p&&i&&o&&!s&&!l||d&&i&&o||!u&&o||!h)return-1}return 0}return Iw=t,Iw}var zw,NL;function _de(){if(NL)return zw;NL=1;var e=Mde();function t(n,r,i){for(var s=-1,o=n.criteria,l=r.criteria,u=o.length,d=i.length;++s<u;){var h=e(o[s],l[s]);if(h){if(s>=d)return h;var p=i[s];return h*(p=="desc"?-1:1)}}return n.index-r.index}return zw=t,zw}var qw,AL;function Dde(){if(AL)return qw;AL=1;var e=qm(),t=Hm(),n=rs(),r=SV(),i=Ade(),s=Pm(),o=_de(),l=Ea(),u=Yt();function d(h,p,g){p.length?p=e(p,function(S){return u(S)?function(w){return t(w,S.length===1?S[0]:S)}:S}):p=[l];var y=-1;p=e(p,s(n));var x=r(h,function(S,w,E){var N=e(p,function(k){return k(S)});return{criteria:N,index:++y,value:S}});return i(x,function(S,w){return o(S,w,g)})}return qw=d,qw}var Vw,ML;function Rde(){if(ML)return Vw;ML=1;var e=Uk(),t=Dde(),n=Fm(),r=Um(),i=n(function(s,o){if(s==null)return[];var l=o.length;return l>1&&r(s,o[0],o[1])?o=[]:l>2&&r(o[0],o[1],o[2])&&(o=[o[0]]),t(s,e(o,1),[])});return Vw=i,Vw}var Hw,_L;function Ode(){if(_L)return Hw;_L=1;var e=mV(),t=0;function n(r){var i=++t;return e(r)+i}return Hw=n,Hw}var Fw,DL;function jde(){if(DL)return Fw;DL=1;function e(t,n,r){for(var i=-1,s=t.length,o=n.length,l={};++i<s;){var u=i<o?n[i]:void 0;r(l,t[i],u)}return l}return Fw=e,Fw}var Uw,RL;function Lde(){if(RL)return Uw;RL=1;var e=jm(),t=jde();function n(r,i){return t(r||[],i||[],e)}return Uw=n,Uw}var $w,OL;function vt(){if(OL)return $w;OL=1;var e;if(typeof Mk=="function")try{e={cloneDeep:Zue(),constant:zk(),defaults:Que(),each:lV(),filter:bV(),find:sde(),flatten:PV(),forEach:aV(),forIn:ode(),has:xV(),isUndefined:wV(),last:ade(),map:CV(),mapValues:lde(),max:ude(),merge:gde(),min:yde(),minBy:vde(),now:bde(),pick:Ede(),range:Nde(),reduce:EV(),sortBy:Rde(),uniqueId:Ode(),values:MV(),zipObject:Lde()}}catch{}return e||(e=window._),$w=e,$w}var Gw,jL;function Pde(){if(jL)return Gw;jL=1,Gw=e;function e(){var r={};r._next=r._prev=r,this._sentinel=r}e.prototype.dequeue=function(){var r=this._sentinel,i=r._prev;if(i!==r)return t(i),i},e.prototype.enqueue=function(r){var i=this._sentinel;r._prev&&r._next&&t(r),r._next=i._next,i._next._prev=r,i._next=r,r._prev=i},e.prototype.toString=function(){for(var r=[],i=this._sentinel,s=i._prev;s!==i;)r.push(JSON.stringify(s,n)),s=s._prev;return"["+r.join(", ")+"]"};function t(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function n(r,i){if(r!=="_next"&&r!=="_prev")return i}return Gw}var Kw,LL;function Bde(){if(LL)return Kw;LL=1;var e=vt(),t=Gr().Graph,n=Pde();Kw=i;var r=e.constant(1);function i(d,h){if(d.nodeCount()<=1)return[];var p=l(d,h||r),g=s(p.graph,p.buckets,p.zeroIdx);return e.flatten(e.map(g,function(y){return d.outEdges(y.v,y.w)}),!0)}function s(d,h,p){for(var g=[],y=h[h.length-1],x=h[0],S;d.nodeCount();){for(;S=x.dequeue();)o(d,h,p,S);for(;S=y.dequeue();)o(d,h,p,S);if(d.nodeCount()){for(var w=h.length-2;w>0;--w)if(S=h[w].dequeue(),S){g=g.concat(o(d,h,p,S,!0));break}}}return g}function o(d,h,p,g,y){var x=y?[]:void 0;return e.forEach(d.inEdges(g.v),function(S){var w=d.edge(S),E=d.node(S.v);y&&x.push({v:S.v,w:S.w}),E.out-=w,u(h,p,E)}),e.forEach(d.outEdges(g.v),function(S){var w=d.edge(S),E=S.w,N=d.node(E);N.in-=w,u(h,p,N)}),d.removeNode(g.v),x}function l(d,h){var p=new t,g=0,y=0;e.forEach(d.nodes(),function(w){p.setNode(w,{v:w,in:0,out:0})}),e.forEach(d.edges(),function(w){var E=p.edge(w.v,w.w)||0,N=h(w),k=E+N;p.setEdge(w.v,w.w,k),y=Math.max(y,p.node(w.v).out+=N),g=Math.max(g,p.node(w.w).in+=N)});var x=e.range(y+g+3).map(function(){return new n}),S=g+1;return e.forEach(p.nodes(),function(w){u(x,S,p.node(w))}),{graph:p,buckets:x,zeroIdx:S}}function u(d,h,p){p.out?p.in?d[p.out-p.in+h].enqueue(p):d[d.length-1].enqueue(p):d[0].enqueue(p)}return Kw}var Yw,PL;function Ide(){if(PL)return Yw;PL=1;var e=vt(),t=Bde();Yw={run:n,undo:i};function n(s){var o=s.graph().acyclicer==="greedy"?t(s,l(s)):r(s);e.forEach(o,function(u){var d=s.edge(u);s.removeEdge(u),d.forwardName=u.name,d.reversed=!0,s.setEdge(u.w,u.v,d,e.uniqueId("rev"))});function l(u){return function(d){return u.edge(d).weight}}}function r(s){var o=[],l={},u={};function d(h){e.has(u,h)||(u[h]=!0,l[h]=!0,e.forEach(s.outEdges(h),function(p){e.has(l,p.w)?o.push(p):d(p.w)}),delete l[h])}return e.forEach(s.nodes(),d),o}function i(s){e.forEach(s.edges(),function(o){var l=s.edge(o);if(l.reversed){s.removeEdge(o);var u=l.forwardName;delete l.reversed,delete l.forwardName,s.setEdge(o.w,o.v,l,u)}})}return Yw}var Ww,BL;function $n(){if(BL)return Ww;BL=1;var e=vt(),t=Gr().Graph;Ww={addDummyNode:n,simplify:r,asNonCompoundGraph:i,successorWeights:s,predecessorWeights:o,intersectRect:l,buildLayerMatrix:u,normalizeRanks:d,removeEmptyRanks:h,addBorderNode:p,maxRank:g,partition:y,time:x,notime:S};function n(w,E,N,k){var T;do T=e.uniqueId(k);while(w.hasNode(T));return N.dummy=E,w.setNode(T,N),T}function r(w){var E=new t().setGraph(w.graph());return e.forEach(w.nodes(),function(N){E.setNode(N,w.node(N))}),e.forEach(w.edges(),function(N){var k=E.edge(N.v,N.w)||{weight:0,minlen:1},T=w.edge(N);E.setEdge(N.v,N.w,{weight:k.weight+T.weight,minlen:Math.max(k.minlen,T.minlen)})}),E}function i(w){var E=new t({multigraph:w.isMultigraph()}).setGraph(w.graph());return e.forEach(w.nodes(),function(N){w.children(N).length||E.setNode(N,w.node(N))}),e.forEach(w.edges(),function(N){E.setEdge(N,w.edge(N))}),E}function s(w){var E=e.map(w.nodes(),function(N){var k={};return e.forEach(w.outEdges(N),function(T){k[T.w]=(k[T.w]||0)+w.edge(T).weight}),k});return e.zipObject(w.nodes(),E)}function o(w){var E=e.map(w.nodes(),function(N){var k={};return e.forEach(w.inEdges(N),function(T){k[T.v]=(k[T.v]||0)+w.edge(T).weight}),k});return e.zipObject(w.nodes(),E)}function l(w,E){var N=w.x,k=w.y,T=E.x-N,A=E.y-k,_=w.width/2,R=w.height/2;if(!T&&!A)throw new Error("Not possible to find intersection inside of the rectangle");var D,B;return Math.abs(A)*_>Math.abs(T)*R?(A<0&&(R=-R),D=R*T/A,B=R):(T<0&&(_=-_),D=_,B=_*A/T),{x:N+D,y:k+B}}function u(w){var E=e.map(e.range(g(w)+1),function(){return[]});return e.forEach(w.nodes(),function(N){var k=w.node(N),T=k.rank;e.isUndefined(T)||(E[T][k.order]=N)}),E}function d(w){var E=e.min(e.map(w.nodes(),function(N){return w.node(N).rank}));e.forEach(w.nodes(),function(N){var k=w.node(N);e.has(k,"rank")&&(k.rank-=E)})}function h(w){var E=e.min(e.map(w.nodes(),function(A){return w.node(A).rank})),N=[];e.forEach(w.nodes(),function(A){var _=w.node(A).rank-E;N[_]||(N[_]=[]),N[_].push(A)});var k=0,T=w.graph().nodeRankFactor;e.forEach(N,function(A,_){e.isUndefined(A)&&_%T!==0?--k:k&&e.forEach(A,function(R){w.node(R).rank+=k})})}function p(w,E,N,k){var T={width:0,height:0};return arguments.length>=4&&(T.rank=N,T.order=k),n(w,"border",T,E)}function g(w){return e.max(e.map(w.nodes(),function(E){var N=w.node(E).rank;if(!e.isUndefined(N))return N}))}function y(w,E){var N={lhs:[],rhs:[]};return e.forEach(w,function(k){E(k)?N.lhs.push(k):N.rhs.push(k)}),N}function x(w,E){var N=e.now();try{return E()}finally{console.log(w+" time: "+(e.now()-N)+"ms")}}function S(w,E){return E()}return Ww}var Xw,IL;function zde(){if(IL)return Xw;IL=1;var e=vt(),t=$n();Xw={run:n,undo:i};function n(s){s.graph().dummyChains=[],e.forEach(s.edges(),function(o){r(s,o)})}function r(s,o){var l=o.v,u=s.node(l).rank,d=o.w,h=s.node(d).rank,p=o.name,g=s.edge(o),y=g.labelRank;if(h!==u+1){s.removeEdge(o);var x,S,w;for(w=0,++u;u<h;++w,++u)g.points=[],S={width:0,height:0,edgeLabel:g,edgeObj:o,rank:u},x=t.addDummyNode(s,"edge",S,"_d"),u===y&&(S.width=g.width,S.height=g.height,S.dummy="edge-label",S.labelpos=g.labelpos),s.setEdge(l,x,{weight:g.weight},p),w===0&&s.graph().dummyChains.push(x),l=x;s.setEdge(l,d,{weight:g.weight},p)}}function i(s){e.forEach(s.graph().dummyChains,function(o){var l=s.node(o),u=l.edgeLabel,d;for(s.setEdge(l.edgeObj,u);l.dummy;)d=s.successors(o)[0],s.removeNode(o),u.points.push({x:l.x,y:l.y}),l.dummy==="edge-label"&&(u.x=l.x,u.y=l.y,u.width=l.width,u.height=l.height),o=d,l=s.node(o)})}return Xw}var Zw,zL;function qp(){if(zL)return Zw;zL=1;var e=vt();Zw={longestPath:t,slack:n};function t(r){var i={};function s(o){var l=r.node(o);if(e.has(i,o))return l.rank;i[o]=!0;var u=e.min(e.map(r.outEdges(o),function(d){return s(d.w)-r.edge(d).minlen}));return(u===Number.POSITIVE_INFINITY||u===void 0||u===null)&&(u=0),l.rank=u}e.forEach(r.sources(),s)}function n(r,i){return r.node(i.w).rank-r.node(i.v).rank-r.edge(i).minlen}return Zw}var Qw,qL;function qV(){if(qL)return Qw;qL=1;var e=vt(),t=Gr().Graph,n=qp().slack;Qw=r;function r(l){var u=new t({directed:!1}),d=l.nodes()[0],h=l.nodeCount();u.setNode(d,{});for(var p,g;i(u,l)<h;)p=s(u,l),g=u.hasNode(p.v)?n(l,p):-n(l,p),o(u,l,g);return u}function i(l,u){function d(h){e.forEach(u.nodeEdges(h),function(p){var g=p.v,y=h===g?p.w:g;!l.hasNode(y)&&!n(u,p)&&(l.setNode(y,{}),l.setEdge(h,y,{}),d(y))})}return e.forEach(l.nodes(),d),l.nodeCount()}function s(l,u){return e.minBy(u.edges(),function(d){if(l.hasNode(d.v)!==l.hasNode(d.w))return n(u,d)})}function o(l,u,d){e.forEach(l.nodes(),function(h){u.node(h).rank+=d})}return Qw}var Jw,VL;function qde(){if(VL)return Jw;VL=1;var e=vt(),t=qV(),n=qp().slack,r=qp().longestPath,i=Gr().alg.preorder,s=Gr().alg.postorder,o=$n().simplify;Jw=l,l.initLowLimValues=p,l.initCutValues=u,l.calcCutValue=h,l.leaveEdge=y,l.enterEdge=x,l.exchangeEdges=S;function l(k){k=o(k),r(k);var T=t(k);p(T),u(T,k);for(var A,_;A=y(T);)_=x(T,k,A),S(T,k,A,_)}function u(k,T){var A=s(k,k.nodes());A=A.slice(0,A.length-1),e.forEach(A,function(_){d(k,T,_)})}function d(k,T,A){var _=k.node(A),R=_.parent;k.edge(A,R).cutvalue=h(k,T,A)}function h(k,T,A){var _=k.node(A),R=_.parent,D=!0,B=T.edge(A,R),$=0;return B||(D=!1,B=T.edge(R,A)),$=B.weight,e.forEach(T.nodeEdges(A),function(z){var V=z.v===A,Y=V?z.w:z.v;if(Y!==R){var I=V===D,F=T.edge(z).weight;if($+=I?F:-F,E(k,A,Y)){var L=k.edge(A,Y).cutvalue;$+=I?-L:L}}}),$}function p(k,T){arguments.length<2&&(T=k.nodes()[0]),g(k,{},1,T)}function g(k,T,A,_,R){var D=A,B=k.node(_);return T[_]=!0,e.forEach(k.neighbors(_),function($){e.has(T,$)||(A=g(k,T,A,$,_))}),B.low=D,B.lim=A++,R?B.parent=R:delete B.parent,A}function y(k){return e.find(k.edges(),function(T){return k.edge(T).cutvalue<0})}function x(k,T,A){var _=A.v,R=A.w;T.hasEdge(_,R)||(_=A.w,R=A.v);var D=k.node(_),B=k.node(R),$=D,z=!1;D.lim>B.lim&&($=B,z=!0);var V=e.filter(T.edges(),function(Y){return z===N(k,k.node(Y.v),$)&&z!==N(k,k.node(Y.w),$)});return e.minBy(V,function(Y){return n(T,Y)})}function S(k,T,A,_){var R=A.v,D=A.w;k.removeEdge(R,D),k.setEdge(_.v,_.w,{}),p(k),u(k,T),w(k,T)}function w(k,T){var A=e.find(k.nodes(),function(R){return!T.node(R).parent}),_=i(k,A);_=_.slice(1),e.forEach(_,function(R){var D=k.node(R).parent,B=T.edge(R,D),$=!1;B||(B=T.edge(D,R),$=!0),T.node(R).rank=T.node(D).rank+($?B.minlen:-B.minlen)})}function E(k,T,A){return k.hasEdge(T,A)}function N(k,T,A){return A.low<=T.lim&&T.lim<=A.lim}return Jw}var eS,HL;function Vde(){if(HL)return eS;HL=1;var e=qp(),t=e.longestPath,n=qV(),r=qde();eS=i;function i(u){switch(u.graph().ranker){case"network-simplex":l(u);break;case"tight-tree":o(u);break;case"longest-path":s(u);break;default:l(u)}}var s=t;function o(u){t(u),n(u)}function l(u){r(u)}return eS}var tS,FL;function Hde(){if(FL)return tS;FL=1;var e=vt();tS=t;function t(i){var s=r(i);e.forEach(i.graph().dummyChains,function(o){for(var l=i.node(o),u=l.edgeObj,d=n(i,s,u.v,u.w),h=d.path,p=d.lca,g=0,y=h[g],x=!0;o!==u.w;){if(l=i.node(o),x){for(;(y=h[g])!==p&&i.node(y).maxRank<l.rank;)g++;y===p&&(x=!1)}if(!x){for(;g<h.length-1&&i.node(y=h[g+1]).minRank<=l.rank;)g++;y=h[g]}i.setParent(o,y),o=i.successors(o)[0]}})}function n(i,s,o,l){var u=[],d=[],h=Math.min(s[o].low,s[l].low),p=Math.max(s[o].lim,s[l].lim),g,y;g=o;do g=i.parent(g),u.push(g);while(g&&(s[g].low>h||p>s[g].lim));for(y=g,g=l;(g=i.parent(g))!==y;)d.push(g);return{path:u.concat(d.reverse()),lca:y}}function r(i){var s={},o=0;function l(u){var d=o;e.forEach(i.children(u),l),s[u]={low:d,lim:o++}}return e.forEach(i.children(),l),s}return tS}var nS,UL;function Fde(){if(UL)return nS;UL=1;var e=vt(),t=$n();nS={run:n,cleanup:o};function n(l){var u=t.addDummyNode(l,"root",{},"_root"),d=i(l),h=e.max(e.values(d))-1,p=2*h+1;l.graph().nestingRoot=u,e.forEach(l.edges(),function(y){l.edge(y).minlen*=p});var g=s(l)+1;e.forEach(l.children(),function(y){r(l,u,p,g,h,d,y)}),l.graph().nodeRankFactor=p}function r(l,u,d,h,p,g,y){var x=l.children(y);if(!x.length){y!==u&&l.setEdge(u,y,{weight:0,minlen:d});return}var S=t.addBorderNode(l,"_bt"),w=t.addBorderNode(l,"_bb"),E=l.node(y);l.setParent(S,y),E.borderTop=S,l.setParent(w,y),E.borderBottom=w,e.forEach(x,function(N){r(l,u,d,h,p,g,N);var k=l.node(N),T=k.borderTop?k.borderTop:N,A=k.borderBottom?k.borderBottom:N,_=k.borderTop?h:2*h,R=T!==A?1:p-g[y]+1;l.setEdge(S,T,{weight:_,minlen:R,nestingEdge:!0}),l.setEdge(A,w,{weight:_,minlen:R,nestingEdge:!0})}),l.parent(y)||l.setEdge(u,S,{weight:0,minlen:p+g[y]})}function i(l){var u={};function d(h,p){var g=l.children(h);g&&g.length&&e.forEach(g,function(y){d(y,p+1)}),u[h]=p}return e.forEach(l.children(),function(h){d(h,1)}),u}function s(l){return e.reduce(l.edges(),function(u,d){return u+l.edge(d).weight},0)}function o(l){var u=l.graph();l.removeNode(u.nestingRoot),delete u.nestingRoot,e.forEach(l.edges(),function(d){var h=l.edge(d);h.nestingEdge&&l.removeEdge(d)})}return nS}var rS,$L;function Ude(){if($L)return rS;$L=1;var e=vt(),t=$n();rS=n;function n(i){function s(o){var l=i.children(o),u=i.node(o);if(l.length&&e.forEach(l,s),e.has(u,"minRank")){u.borderLeft=[],u.borderRight=[];for(var d=u.minRank,h=u.maxRank+1;d<h;++d)r(i,"borderLeft","_bl",o,u,d),r(i,"borderRight","_br",o,u,d)}}e.forEach(i.children(),s)}function r(i,s,o,l,u,d){var h={width:0,height:0,rank:d,borderType:s},p=u[s][d-1],g=t.addDummyNode(i,"border",h,o);u[s][d]=g,i.setParent(g,l),p&&i.setEdge(p,g,{weight:1})}return rS}var iS,GL;function $de(){if(GL)return iS;GL=1;var e=vt();iS={adjust:t,undo:n};function t(d){var h=d.graph().rankdir.toLowerCase();(h==="lr"||h==="rl")&&r(d)}function n(d){var h=d.graph().rankdir.toLowerCase();(h==="bt"||h==="rl")&&s(d),(h==="lr"||h==="rl")&&(l(d),r(d))}function r(d){e.forEach(d.nodes(),function(h){i(d.node(h))}),e.forEach(d.edges(),function(h){i(d.edge(h))})}function i(d){var h=d.width;d.width=d.height,d.height=h}function s(d){e.forEach(d.nodes(),function(h){o(d.node(h))}),e.forEach(d.edges(),function(h){var p=d.edge(h);e.forEach(p.points,o),e.has(p,"y")&&o(p)})}function o(d){d.y=-d.y}function l(d){e.forEach(d.nodes(),function(h){u(d.node(h))}),e.forEach(d.edges(),function(h){var p=d.edge(h);e.forEach(p.points,u),e.has(p,"x")&&u(p)})}function u(d){var h=d.x;d.x=d.y,d.y=h}return iS}var sS,KL;function Gde(){if(KL)return sS;KL=1;var e=vt();sS=t;function t(n){var r={},i=e.filter(n.nodes(),function(d){return!n.children(d).length}),s=e.max(e.map(i,function(d){return n.node(d).rank})),o=e.map(e.range(s+1),function(){return[]});function l(d){if(!e.has(r,d)){r[d]=!0;var h=n.node(d);o[h.rank].push(d),e.forEach(n.successors(d),l)}}var u=e.sortBy(i,function(d){return n.node(d).rank});return e.forEach(u,l),o}return sS}var oS,YL;function Kde(){if(YL)return oS;YL=1;var e=vt();oS=t;function t(r,i){for(var s=0,o=1;o<i.length;++o)s+=n(r,i[o-1],i[o]);return s}function n(r,i,s){for(var o=e.zipObject(s,e.map(s,function(g,y){return y})),l=e.flatten(e.map(i,function(g){return e.sortBy(e.map(r.outEdges(g),function(y){return{pos:o[y.w],weight:r.edge(y).weight}}),"pos")}),!0),u=1;u<s.length;)u<<=1;var d=2*u-1;u-=1;var h=e.map(new Array(d),function(){return 0}),p=0;return e.forEach(l.forEach(function(g){var y=g.pos+u;h[y]+=g.weight;for(var x=0;y>0;)y%2&&(x+=h[y+1]),y=y-1>>1,h[y]+=g.weight;p+=g.weight*x})),p}return oS}var aS,WL;function Yde(){if(WL)return aS;WL=1;var e=vt();aS=t;function t(n,r){return e.map(r,function(i){var s=n.inEdges(i);if(s.length){var o=e.reduce(s,function(l,u){var d=n.edge(u),h=n.node(u.v);return{sum:l.sum+d.weight*h.order,weight:l.weight+d.weight}},{sum:0,weight:0});return{v:i,barycenter:o.sum/o.weight,weight:o.weight}}else return{v:i}})}return aS}var lS,XL;function Wde(){if(XL)return lS;XL=1;var e=vt();lS=t;function t(i,s){var o={};e.forEach(i,function(u,d){var h=o[u.v]={indegree:0,in:[],out:[],vs:[u.v],i:d};e.isUndefined(u.barycenter)||(h.barycenter=u.barycenter,h.weight=u.weight)}),e.forEach(s.edges(),function(u){var d=o[u.v],h=o[u.w];!e.isUndefined(d)&&!e.isUndefined(h)&&(h.indegree++,d.out.push(o[u.w]))});var l=e.filter(o,function(u){return!u.indegree});return n(l)}function n(i){var s=[];function o(d){return function(h){h.merged||(e.isUndefined(h.barycenter)||e.isUndefined(d.barycenter)||h.barycenter>=d.barycenter)&&r(d,h)}}function l(d){return function(h){h.in.push(d),--h.indegree===0&&i.push(h)}}for(;i.length;){var u=i.pop();s.push(u),e.forEach(u.in.reverse(),o(u)),e.forEach(u.out,l(u))}return e.map(e.filter(s,function(d){return!d.merged}),function(d){return e.pick(d,["vs","i","barycenter","weight"])})}function r(i,s){var o=0,l=0;i.weight&&(o+=i.barycenter*i.weight,l+=i.weight),s.weight&&(o+=s.barycenter*s.weight,l+=s.weight),i.vs=s.vs.concat(i.vs),i.barycenter=o/l,i.weight=l,i.i=Math.min(s.i,i.i),s.merged=!0}return lS}var cS,ZL;function Xde(){if(ZL)return cS;ZL=1;var e=vt(),t=$n();cS=n;function n(s,o){var l=t.partition(s,function(S){return e.has(S,"barycenter")}),u=l.lhs,d=e.sortBy(l.rhs,function(S){return-S.i}),h=[],p=0,g=0,y=0;u.sort(i(!!o)),y=r(h,d,y),e.forEach(u,function(S){y+=S.vs.length,h.push(S.vs),p+=S.barycenter*S.weight,g+=S.weight,y=r(h,d,y)});var x={vs:e.flatten(h,!0)};return g&&(x.barycenter=p/g,x.weight=g),x}function r(s,o,l){for(var u;o.length&&(u=e.last(o)).i<=l;)o.pop(),s.push(u.vs),l++;return l}function i(s){return function(o,l){return o.barycenter<l.barycenter?-1:o.barycenter>l.barycenter?1:s?l.i-o.i:o.i-l.i}}return cS}var uS,QL;function Zde(){if(QL)return uS;QL=1;var e=vt(),t=Yde(),n=Wde(),r=Xde();uS=i;function i(l,u,d,h){var p=l.children(u),g=l.node(u),y=g?g.borderLeft:void 0,x=g?g.borderRight:void 0,S={};y&&(p=e.filter(p,function(A){return A!==y&&A!==x}));var w=t(l,p);e.forEach(w,function(A){if(l.children(A.v).length){var _=i(l,A.v,d,h);S[A.v]=_,e.has(_,"barycenter")&&o(A,_)}});var E=n(w,d);s(E,S);var N=r(E,h);if(y&&(N.vs=e.flatten([y,N.vs,x],!0),l.predecessors(y).length)){var k=l.node(l.predecessors(y)[0]),T=l.node(l.predecessors(x)[0]);e.has(N,"barycenter")||(N.barycenter=0,N.weight=0),N.barycenter=(N.barycenter*N.weight+k.order+T.order)/(N.weight+2),N.weight+=2}return N}function s(l,u){e.forEach(l,function(d){d.vs=e.flatten(d.vs.map(function(h){return u[h]?u[h].vs:h}),!0)})}function o(l,u){e.isUndefined(l.barycenter)?(l.barycenter=u.barycenter,l.weight=u.weight):(l.barycenter=(l.barycenter*l.weight+u.barycenter*u.weight)/(l.weight+u.weight),l.weight+=u.weight)}return uS}var dS,JL;function Qde(){if(JL)return dS;JL=1;var e=vt(),t=Gr().Graph;dS=n;function n(i,s,o){var l=r(i),u=new t({compound:!0}).setGraph({root:l}).setDefaultNodeLabel(function(d){return i.node(d)});return e.forEach(i.nodes(),function(d){var h=i.node(d),p=i.parent(d);(h.rank===s||h.minRank<=s&&s<=h.maxRank)&&(u.setNode(d),u.setParent(d,p||l),e.forEach(i[o](d),function(g){var y=g.v===d?g.w:g.v,x=u.edge(y,d),S=e.isUndefined(x)?0:x.weight;u.setEdge(y,d,{weight:i.edge(g).weight+S})}),e.has(h,"minRank")&&u.setNode(d,{borderLeft:h.borderLeft[s],borderRight:h.borderRight[s]}))}),u}function r(i){for(var s;i.hasNode(s=e.uniqueId("_root")););return s}return dS}var fS,e5;function Jde(){if(e5)return fS;e5=1;var e=vt();fS=t;function t(n,r,i){var s={},o;e.forEach(i,function(l){for(var u=n.parent(l),d,h;u;){if(d=n.parent(u),d?(h=s[d],s[d]=u):(h=o,o=u),h&&h!==u){r.setEdge(h,u);return}u=d}})}return fS}var hS,t5;function efe(){if(t5)return hS;t5=1;var e=vt(),t=Gde(),n=Kde(),r=Zde(),i=Qde(),s=Jde(),o=Gr().Graph,l=$n();hS=u;function u(g){var y=l.maxRank(g),x=d(g,e.range(1,y+1),"inEdges"),S=d(g,e.range(y-1,-1,-1),"outEdges"),w=t(g);p(g,w);for(var E=Number.POSITIVE_INFINITY,N,k=0,T=0;T<4;++k,++T){h(k%2?x:S,k%4>=2),w=l.buildLayerMatrix(g);var A=n(g,w);A<E&&(T=0,N=e.cloneDeep(w),E=A)}p(g,N)}function d(g,y,x){return e.map(y,function(S){return i(g,S,x)})}function h(g,y){var x=new o;e.forEach(g,function(S){var w=S.graph().root,E=r(S,w,x,y);e.forEach(E.vs,function(N,k){S.node(N).order=k}),s(S,x,E.vs)})}function p(g,y){e.forEach(y,function(x){e.forEach(x,function(S,w){g.node(S).order=w})})}return hS}var pS,n5;function tfe(){if(n5)return pS;n5=1;var e=vt(),t=Gr().Graph,n=$n();pS={positionX:x,findType1Conflicts:r,findType2Conflicts:i,addConflict:o,hasConflict:l,verticalAlignment:u,horizontalCompaction:d,alignCoordinates:g,findSmallestWidthAlignment:p,balance:y};function r(E,N){var k={};function T(A,_){var R=0,D=0,B=A.length,$=e.last(_);return e.forEach(_,function(z,V){var Y=s(E,z),I=Y?E.node(Y).order:B;(Y||z===$)&&(e.forEach(_.slice(D,V+1),function(F){e.forEach(E.predecessors(F),function(L){var q=E.node(L),W=q.order;(W<R||I<W)&&!(q.dummy&&E.node(F).dummy)&&o(k,L,F)})}),D=V+1,R=I)}),_}return e.reduce(N,T),k}function i(E,N){var k={};function T(_,R,D,B,$){var z;e.forEach(e.range(R,D),function(V){z=_[V],E.node(z).dummy&&e.forEach(E.predecessors(z),function(Y){var I=E.node(Y);I.dummy&&(I.order<B||I.order>$)&&o(k,Y,z)})})}function A(_,R){var D=-1,B,$=0;return e.forEach(R,function(z,V){if(E.node(z).dummy==="border"){var Y=E.predecessors(z);Y.length&&(B=E.node(Y[0]).order,T(R,$,V,D,B),$=V,D=B)}T(R,$,R.length,B,_.length)}),R}return e.reduce(N,A),k}function s(E,N){if(E.node(N).dummy)return e.find(E.predecessors(N),function(k){return E.node(k).dummy})}function o(E,N,k){if(N>k){var T=N;N=k,k=T}var A=E[N];A||(E[N]=A={}),A[k]=!0}function l(E,N,k){if(N>k){var T=N;N=k,k=T}return e.has(E[N],k)}function u(E,N,k,T){var A={},_={},R={};return e.forEach(N,function(D){e.forEach(D,function(B,$){A[B]=B,_[B]=B,R[B]=$})}),e.forEach(N,function(D){var B=-1;e.forEach(D,function($){var z=T($);if(z.length){z=e.sortBy(z,function(L){return R[L]});for(var V=(z.length-1)/2,Y=Math.floor(V),I=Math.ceil(V);Y<=I;++Y){var F=z[Y];_[$]===$&&B<R[F]&&!l(k,$,F)&&(_[F]=$,_[$]=A[$]=A[F],B=R[F])}}})}),{root:A,align:_}}function d(E,N,k,T,A){var _={},R=h(E,N,k,A),D=A?"borderLeft":"borderRight";function B(V,Y){for(var I=R.nodes(),F=I.pop(),L={};F;)L[F]?V(F):(L[F]=!0,I.push(F),I=I.concat(Y(F))),F=I.pop()}function $(V){_[V]=R.inEdges(V).reduce(function(Y,I){return Math.max(Y,_[I.v]+R.edge(I))},0)}function z(V){var Y=R.outEdges(V).reduce(function(F,L){return Math.min(F,_[L.w]-R.edge(L))},Number.POSITIVE_INFINITY),I=E.node(V);Y!==Number.POSITIVE_INFINITY&&I.borderType!==D&&(_[V]=Math.max(_[V],Y))}return B($,R.predecessors.bind(R)),B(z,R.successors.bind(R)),e.forEach(T,function(V){_[V]=_[k[V]]}),_}function h(E,N,k,T){var A=new t,_=E.graph(),R=S(_.nodesep,_.edgesep,T);return e.forEach(N,function(D){var B;e.forEach(D,function($){var z=k[$];if(A.setNode(z),B){var V=k[B],Y=A.edge(V,z);A.setEdge(V,z,Math.max(R(E,$,B),Y||0))}B=$})}),A}function p(E,N){return e.minBy(e.values(N),function(k){var T=Number.NEGATIVE_INFINITY,A=Number.POSITIVE_INFINITY;return e.forIn(k,function(_,R){var D=w(E,R)/2;T=Math.max(_+D,T),A=Math.min(_-D,A)}),T-A})}function g(E,N){var k=e.values(N),T=e.min(k),A=e.max(k);e.forEach(["u","d"],function(_){e.forEach(["l","r"],function(R){var D=_+R,B=E[D],$;if(B!==N){var z=e.values(B);$=R==="l"?T-e.min(z):A-e.max(z),$&&(E[D]=e.mapValues(B,function(V){return V+$}))}})})}function y(E,N){return e.mapValues(E.ul,function(k,T){if(N)return E[N.toLowerCase()][T];var A=e.sortBy(e.map(E,T));return(A[1]+A[2])/2})}function x(E){var N=n.buildLayerMatrix(E),k=e.merge(r(E,N),i(E,N)),T={},A;e.forEach(["u","d"],function(R){A=R==="u"?N:e.values(N).reverse(),e.forEach(["l","r"],function(D){D==="r"&&(A=e.map(A,function(V){return e.values(V).reverse()}));var B=(R==="u"?E.predecessors:E.successors).bind(E),$=u(E,A,k,B),z=d(E,A,$.root,$.align,D==="r");D==="r"&&(z=e.mapValues(z,function(V){return-V})),T[R+D]=z})});var _=p(E,T);return g(T,_),y(T,E.graph().align)}function S(E,N,k){return function(T,A,_){var R=T.node(A),D=T.node(_),B=0,$;if(B+=R.width/2,e.has(R,"labelpos"))switch(R.labelpos.toLowerCase()){case"l":$=-R.width/2;break;case"r":$=R.width/2;break}if($&&(B+=k?$:-$),$=0,B+=(R.dummy?N:E)/2,B+=(D.dummy?N:E)/2,B+=D.width/2,e.has(D,"labelpos"))switch(D.labelpos.toLowerCase()){case"l":$=D.width/2;break;case"r":$=-D.width/2;break}return $&&(B+=k?$:-$),$=0,B}}function w(E,N){return E.node(N).width}return pS}var mS,r5;function nfe(){if(r5)return mS;r5=1;var e=vt(),t=$n(),n=tfe().positionX;mS=r;function r(s){s=t.asNonCompoundGraph(s),i(s),e.forEach(n(s),function(o,l){s.node(l).x=o})}function i(s){var o=t.buildLayerMatrix(s),l=s.graph().ranksep,u=0;e.forEach(o,function(d){var h=e.max(e.map(d,function(p){return s.node(p).height}));e.forEach(d,function(p){s.node(p).y=u+h/2}),u+=h+l})}return mS}var gS,i5;function rfe(){if(i5)return gS;i5=1;var e=vt(),t=Ide(),n=zde(),r=Vde(),i=$n().normalizeRanks,s=Hde(),o=$n().removeEmptyRanks,l=Fde(),u=Ude(),d=$de(),h=efe(),p=nfe(),g=$n(),y=Gr().Graph;gS=x;function x(H,X){var Q=X&&X.debugTiming?g.time:g.notime;Q("layout",function(){var ie=Q("  buildLayoutGraph",function(){return B(H)});Q("  runLayout",function(){S(ie,Q)}),Q("  updateInputGraph",function(){w(H,ie)})})}function S(H,X){X("    makeSpaceForEdgeLabels",function(){$(H)}),X("    removeSelfEdges",function(){J(H)}),X("    acyclic",function(){t.run(H)}),X("    nestingGraph.run",function(){l.run(H)}),X("    rank",function(){r(g.asNonCompoundGraph(H))}),X("    injectEdgeLabelProxies",function(){z(H)}),X("    removeEmptyRanks",function(){o(H)}),X("    nestingGraph.cleanup",function(){l.cleanup(H)}),X("    normalizeRanks",function(){i(H)}),X("    assignRankMinMax",function(){V(H)}),X("    removeEdgeLabelProxies",function(){Y(H)}),X("    normalize.run",function(){n.run(H)}),X("    parentDummyChains",function(){s(H)}),X("    addBorderSegments",function(){u(H)}),X("    order",function(){h(H)}),X("    insertSelfEdges",function(){P(H)}),X("    adjustCoordinateSystem",function(){d.adjust(H)}),X("    position",function(){p(H)}),X("    positionSelfEdges",function(){G(H)}),X("    removeBorderNodes",function(){W(H)}),X("    normalize.undo",function(){n.undo(H)}),X("    fixupEdgeLabelCoords",function(){L(H)}),X("    undoCoordinateSystem",function(){d.undo(H)}),X("    translateGraph",function(){I(H)}),X("    assignNodeIntersects",function(){F(H)}),X("    reversePoints",function(){q(H)}),X("    acyclic.undo",function(){t.undo(H)})}function w(H,X){e.forEach(H.nodes(),function(Q){var ie=H.node(Q),te=X.node(Q);ie&&(ie.x=te.x,ie.y=te.y,X.children(Q).length&&(ie.width=te.width,ie.height=te.height))}),e.forEach(H.edges(),function(Q){var ie=H.edge(Q),te=X.edge(Q);ie.points=te.points,e.has(te,"x")&&(ie.x=te.x,ie.y=te.y)}),H.graph().width=X.graph().width,H.graph().height=X.graph().height}var E=["nodesep","edgesep","ranksep","marginx","marginy"],N={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},k=["acyclicer","ranker","rankdir","align"],T=["width","height"],A={width:0,height:0},_=["minlen","weight","width","height","labeloffset"],R={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},D=["labelpos"];function B(H){var X=new y({multigraph:!0,compound:!0}),Q=ce(H.graph());return X.setGraph(e.merge({},N,oe(Q,E),e.pick(Q,k))),e.forEach(H.nodes(),function(ie){var te=ce(H.node(ie));X.setNode(ie,e.defaults(oe(te,T),A)),X.setParent(ie,H.parent(ie))}),e.forEach(H.edges(),function(ie){var te=ce(H.edge(ie));X.setEdge(ie,e.merge({},R,oe(te,_),e.pick(te,D)))}),X}function $(H){var X=H.graph();X.ranksep/=2,e.forEach(H.edges(),function(Q){var ie=H.edge(Q);ie.minlen*=2,ie.labelpos.toLowerCase()!=="c"&&(X.rankdir==="TB"||X.rankdir==="BT"?ie.width+=ie.labeloffset:ie.height+=ie.labeloffset)})}function z(H){e.forEach(H.edges(),function(X){var Q=H.edge(X);if(Q.width&&Q.height){var ie=H.node(X.v),te=H.node(X.w),ge={rank:(te.rank-ie.rank)/2+ie.rank,e:X};g.addDummyNode(H,"edge-proxy",ge,"_ep")}})}function V(H){var X=0;e.forEach(H.nodes(),function(Q){var ie=H.node(Q);ie.borderTop&&(ie.minRank=H.node(ie.borderTop).rank,ie.maxRank=H.node(ie.borderBottom).rank,X=e.max(X,ie.maxRank))}),H.graph().maxRank=X}function Y(H){e.forEach(H.nodes(),function(X){var Q=H.node(X);Q.dummy==="edge-proxy"&&(H.edge(Q.e).labelRank=Q.rank,H.removeNode(X))})}function I(H){var X=Number.POSITIVE_INFINITY,Q=0,ie=Number.POSITIVE_INFINITY,te=0,ge=H.graph(),xe=ge.marginx||0,Me=ge.marginy||0;function Ae(Te){var we=Te.x,Se=Te.y,Je=Te.width,ke=Te.height;X=Math.min(X,we-Je/2),Q=Math.max(Q,we+Je/2),ie=Math.min(ie,Se-ke/2),te=Math.max(te,Se+ke/2)}e.forEach(H.nodes(),function(Te){Ae(H.node(Te))}),e.forEach(H.edges(),function(Te){var we=H.edge(Te);e.has(we,"x")&&Ae(we)}),X-=xe,ie-=Me,e.forEach(H.nodes(),function(Te){var we=H.node(Te);we.x-=X,we.y-=ie}),e.forEach(H.edges(),function(Te){var we=H.edge(Te);e.forEach(we.points,function(Se){Se.x-=X,Se.y-=ie}),e.has(we,"x")&&(we.x-=X),e.has(we,"y")&&(we.y-=ie)}),ge.width=Q-X+xe,ge.height=te-ie+Me}function F(H){e.forEach(H.edges(),function(X){var Q=H.edge(X),ie=H.node(X.v),te=H.node(X.w),ge,xe;Q.points?(ge=Q.points[0],xe=Q.points[Q.points.length-1]):(Q.points=[],ge=te,xe=ie),Q.points.unshift(g.intersectRect(ie,ge)),Q.points.push(g.intersectRect(te,xe))})}function L(H){e.forEach(H.edges(),function(X){var Q=H.edge(X);if(e.has(Q,"x"))switch((Q.labelpos==="l"||Q.labelpos==="r")&&(Q.width-=Q.labeloffset),Q.labelpos){case"l":Q.x-=Q.width/2+Q.labeloffset;break;case"r":Q.x+=Q.width/2+Q.labeloffset;break}})}function q(H){e.forEach(H.edges(),function(X){var Q=H.edge(X);Q.reversed&&Q.points.reverse()})}function W(H){e.forEach(H.nodes(),function(X){if(H.children(X).length){var Q=H.node(X),ie=H.node(Q.borderTop),te=H.node(Q.borderBottom),ge=H.node(e.last(Q.borderLeft)),xe=H.node(e.last(Q.borderRight));Q.width=Math.abs(xe.x-ge.x),Q.height=Math.abs(te.y-ie.y),Q.x=ge.x+Q.width/2,Q.y=ie.y+Q.height/2}}),e.forEach(H.nodes(),function(X){H.node(X).dummy==="border"&&H.removeNode(X)})}function J(H){e.forEach(H.edges(),function(X){if(X.v===X.w){var Q=H.node(X.v);Q.selfEdges||(Q.selfEdges=[]),Q.selfEdges.push({e:X,label:H.edge(X)}),H.removeEdge(X)}})}function P(H){var X=g.buildLayerMatrix(H);e.forEach(X,function(Q){var ie=0;e.forEach(Q,function(te,ge){var xe=H.node(te);xe.order=ge+ie,e.forEach(xe.selfEdges,function(Me){g.addDummyNode(H,"selfedge",{width:Me.label.width,height:Me.label.height,rank:xe.rank,order:ge+ ++ie,e:Me.e,label:Me.label},"_se")}),delete xe.selfEdges})})}function G(H){e.forEach(H.nodes(),function(X){var Q=H.node(X);if(Q.dummy==="selfedge"){var ie=H.node(Q.e.v),te=ie.x+ie.width/2,ge=ie.y,xe=Q.x-te,Me=ie.height/2;H.setEdge(Q.e,Q.label),H.removeNode(X),Q.label.points=[{x:te+2*xe/3,y:ge-Me},{x:te+5*xe/6,y:ge-Me},{x:te+xe,y:ge},{x:te+5*xe/6,y:ge+Me},{x:te+2*xe/3,y:ge+Me}],Q.label.x=Q.x,Q.label.y=Q.y}})}function oe(H,X){return e.mapValues(e.pick(H,X),Number)}function ce(H){var X={};return e.forEach(H,function(Q,ie){X[ie.toLowerCase()]=Q}),X}return gS}var yS,s5;function ife(){if(s5)return yS;s5=1;var e=vt(),t=$n(),n=Gr().Graph;yS={debugOrdering:r};function r(i){var s=t.buildLayerMatrix(i),o=new n({compound:!0,multigraph:!0}).setGraph({});return e.forEach(i.nodes(),function(l){o.setNode(l,{label:l}),o.setParent(l,"layer"+i.node(l).rank)}),e.forEach(i.edges(),function(l){o.setEdge(l.v,l.w,{},l.name)}),e.forEach(s,function(l,u){var d="layer"+u;o.setNode(d,{rank:"same"}),e.reduce(l,function(h,p){return o.setEdge(h,p,{style:"invis"}),p})}),o}return yS}var vS,o5;function sfe(){return o5||(o5=1,vS="0.8.5"),vS}var bS,a5;function ofe(){return a5||(a5=1,bS={graphlib:Gr(),layout:rfe(),debug:ife(),util:{time:$n().time,notime:$n().notime},version:sfe()}),bS}var afe=ofe();const hh=cd(afe),iu=[{id:"web-app",group:"Frontend",icon:"",label:"Web App",description:"Browser-based client",tags:["browser","client","frontend","spa","pwa","web application"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Web App",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"framework",label:"Framework",type:"select",default:"React",options:["React","Vue","Angular","Svelte"]},{key:"instances",label:"Instances",type:"number",default:3},{key:"cdn",label:"CDN Enabled",type:"boolean",default:!0},{key:"ssl",label:"SSL Enabled",type:"boolean",default:!0},{key:"staticAssets",label:"Static Assets (GB)",type:"number",default:50},{key:"logic",label:"Component Logic (Pseudo Code)",type:"textarea",placeholder:"submit -> validate -> call API -> show response",default:""}]},{id:"mobile-app",group:"Frontend",icon:"",label:"Mobile App",description:"iOS/Android client",tags:["ios","android","mobile","app","native","react native","flutter"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Mobile App",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",default:"",placeholder:"A brief description"},{key:"stack",label:"Tech Stack",type:"select",default:"React Native",options:["React Native","Flutter","Swift/Kotlin"]},{key:"pushNotifications",label:"Push Notifications",type:"boolean",default:!0},{key:"offlineSupport",label:"Offline Support",type:"boolean",default:!0},{key:"sessions",label:"Active Sessions (k)",type:"number",default:10}]},{id:"desktop-app",group:"Frontend",icon:"",label:"Desktop App",description:"Native / Electron client",tags:["desktop","electron","tauri","native","windows","mac","linux"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Desktop App",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",default:"",placeholder:"A brief description"},{key:"runtime",label:"Runtime",type:"select",default:"Electron",options:["Electron","Tauri","Native"]},{key:"autoUpdate",label:"Auto Update",type:"boolean",default:!0},{key:"bundledSizeMB",label:"Bundle Size (MB)",type:"number",default:120}]},{id:"database",group:"Data Layer",icon:"",label:"Database",description:"Relational/NoSQL data storage",tags:["db","rdbms","nosql","sql","postgres","mysql","mongodb","data","storage","persistence"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Database"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"type",label:"Database Type",type:"select",default:"RDBMS",options:["RDBMS","NoSQL","NewSQL","Time-Series","Graph"]},{key:"engine",label:"Engine",type:"select",default:"postgresql",options:["postgresql","mysql","mongodb","cassandra","dynamodb","cockroachdb"]},{key:"workload",label:"Workload Type",type:"select",default:"OLTP",options:["OLTP","OLAP","Hybrid"]},{key:"storageGB",label:"Storage (GB)",type:"number",default:100},{key:"sharding",label:"Sharding Strategy",type:"select",default:"None",options:["None","Hash-based","Range-based","Geographic"]},{key:"shards",label:"Number of Shards",type:"number",default:1},{key:"replication",label:"Replication Factor",type:"number",default:3},{key:"replicationMode",label:"Replication Mode",type:"select",default:"Async",options:["Sync","Async","Semi-Sync"]},{key:"multiAZ",label:"Multi-AZ",type:"boolean",default:!0},{key:"crossRegion",label:"Cross-Region Replication",type:"boolean",default:!1},{key:"backups",label:"Automatic Backups",type:"boolean",default:!0},{key:"pitr",label:"Point-in-Time Recovery",type:"boolean",default:!0},{key:"encryption",label:"Encryption at Rest",type:"boolean",default:!0},{key:"connectionPooling",label:"Connection Pooling",type:"boolean",default:!0},{key:"queryCache",label:"Query Cache Enabled",type:"boolean",default:!0},{key:"wal",label:"Write-Ahead Logging",type:"boolean",default:!0},{key:"rbac",label:"RBAC Enabled",type:"boolean",default:!0},{key:"auditLog",label:"Audit Trail",type:"boolean",default:!0}]},{id:"loadbalancer",group:"Networking",icon:"",label:"Load Balancer",description:"Traffic distribution & high availability",tags:["lb","alb","nlb","elb","traffic","distribution","nginx","haproxy","layer 4","layer 7"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Load Balancer"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"type",label:"Type",type:"select",default:"Layer 7 (Application)",options:["Layer 4 (Network)","Layer 7 (Application)","Global"]},{key:"algorithm",label:"Algorithm",type:"select",default:"round-robin",options:["round-robin","least-connections","ip-hash","weighted-round-robin","least-response-time"]},{key:"sslTermination",label:"SSL/TLS Termination",type:"boolean",default:!0},{key:"stickiness",label:"Session Stickiness",type:"boolean",default:!1},{key:"healthCheck",label:"Health Check",type:"boolean",default:!0},{key:"healthCheckInterval",label:"Health Check Interval (s)",type:"number",default:30},{key:"multiAZ",label:"Multi-AZ",type:"boolean",default:!0},{key:"accessLogs",label:"Access Logs",type:"boolean",default:!0},{key:"connectionDraining",label:"Connection Draining",type:"boolean",default:!0},{key:"ddosProtection",label:"DDoS Protection",type:"boolean",default:!0},{key:"waf",label:"WAF Enabled",type:"boolean",default:!1}]},{id:"cache",group:"Data Layer",icon:"",label:"Cache",description:"In-memory fast data access",tags:["redis","memcached","in-memory","caching","performance","speed"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Cache"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"engine",label:"Engine",type:"select",default:"redis",options:["redis","memcached","hazelcast","aerospike"]},{key:"cacheStrategy",label:"Cache Strategy",type:"select",default:"write-through",options:["write-through","write-around","write-back","cache-aside"]},{key:"ttl",label:"TTL (seconds)",type:"number",default:3600},{key:"inMemory",label:"In Memory",type:"boolean",default:!0},{key:"eviction",label:"Eviction Policy",type:"select",default:"lru",options:["lru","lfu","fifo","mru","random","ttl-based","volatile-lru"]},{key:"replication",label:"Replication",type:"boolean",default:!0},{key:"clusterMode",label:"Cluster Mode",type:"boolean",default:!1},{key:"persistence",label:"Persistence (AOF/RDB)",type:"boolean",default:!1},{key:"encryption",label:"Encryption in Transit",type:"boolean",default:!0},{key:"maxMemoryGB",label:"Max Memory (GB)",type:"number",default:16}]},{id:"webserver",group:"Compute",icon:"",label:"Web Server",description:"HTTP requests",tags:["http","server","nginx","apache","web","requests"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Web Server"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"instances",label:"Instances",type:"number",default:2},{key:"autoscale",label:"Autoscale",type:"boolean",default:!0},{key:"instanceType",label:"Instance Type",type:"select",default:"t3.medium",options:["t3.small","t3.medium","t3.large"]},{key:"gzip",label:"Gzip",type:"boolean",default:!0},{key:"connectionTimeout",label:"Connection Timeout (s)",type:"number",default:30}]},{id:"message-broker",group:"Messaging",icon:"",label:"Message Broker",description:"Pub/Sub message broker",tags:["kafka","rabbitmq","pubsub","messaging","broker","queue","mq"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Message Broker"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"partitions",label:"Partitions",type:"number",default:6},{key:"replication",label:"Replication Factor",type:"number",default:3},{key:"durable",label:"Durable (persist messages)",type:"boolean",default:!0},{key:"retention",label:"Retention (hours)",type:"number",default:168}]},{id:"auth-service",group:"Services",icon:"",label:"Auth Service",description:"Authentication & session management",tags:["authentication","authorization","auth","oauth","jwt","sso","login","security"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Auth Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"oauth",label:"OAuth Enabled",type:"boolean",default:!0},{key:"sessions",label:"Session Store",type:"select",default:"redis",options:["redis","database","none"]},{key:"tokenTTL",label:"Token TTL (minutes)",type:"number",default:60},{key:"mfa",label:"MFA Required",type:"boolean",default:!1}]},{id:"cdn",group:"Delivery",icon:"",label:"CDN",description:"Content delivery network",tags:["content delivery","cloudflare","akamai","fastly","edge","caching","cdn"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"CDN"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"Cloudflare",options:["Cloudflare","Akamai","Fastly","AWS CloudFront"]},{key:"ttl",label:"Edge TTL (seconds)",type:"number",default:3600},{key:"cacheInvalidation",label:"Cache Invalidation (manual)",type:"boolean",default:!0}]},{id:"search",group:"Services",icon:"",label:"Search",description:"Search engine & indexing",tags:["elasticsearch","opensearch","search engine","indexing","full-text","lucene"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Search"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"engine",label:"Engine",type:"select",default:"elasticsearch",options:["elasticsearch","opensearch","meilisearch"]},{key:"replicas",label:"Replicas",type:"number",default:2},{key:"indexing",label:"Real-time indexing",type:"boolean",default:!0},{key:"shards",label:"Shards",type:"number",default:5}]},{id:"queue",group:"Messaging",icon:"",label:"Queue",description:"Task queue",tags:["task queue","job queue","sqs","celery","worker queue","async"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Queue"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"visibilityTimeout",label:"Visibility Timeout (seconds)",type:"number",default:30},{key:"maxRetries",label:"Max Retries",type:"number",default:5},{key:"durable",label:"Durable (persist tasks)",type:"boolean",default:!0},{key:"backoff",label:"Backoff Strategy",type:"select",default:"exponential",options:["fixed","linear","exponential"]}]},{id:"analytics",group:"Data Layer",icon:"",label:"Analytics",description:"Event analytics pipeline",tags:["data analytics","metrics","events","tracking","bi","business intelligence"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Analytics"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"retentionDays",label:"Retention (days)",type:"number",default:90},{key:"samplingRate",label:"Sampling Rate (%)",type:"number",default:100},{key:"realTime",label:"Real-time processing",type:"boolean",default:!0},{key:"storage",label:"Storage",type:"select",default:"s3",options:["s3","gcs","azure_blob"]}]},{id:"root-nameserver",group:"DNS & Network",icon:"",label:"Root Nameserver",description:"Top-level DNS resolver",tags:["dns","nameserver","root","resolver","domain"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Root Nameserver"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"ttl",label:"TTL (seconds)",type:"number",default:172800},{key:"dnssec",label:"DNSSEC Enabled",type:"boolean",default:!0}]},{id:"tld-nameserver",group:"DNS & Network",icon:"",label:"TLD Nameserver",description:"Top-level domain nameserver",tags:["dns","tld","top-level domain","nameserver",".com",".org"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"TLD Nameserver"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"tld",label:"TLD",type:"select",default:".com",options:[".com",".org",".net",".io",".dev"]},{key:"ttl",label:"TTL (seconds)",type:"number",default:86400}]},{id:"authoritative-nameserver",group:"DNS & Network",icon:"",label:"Authoritative Nameserver",description:"Domain-specific DNS server",tags:["dns","authoritative","nameserver","domain","records"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Authoritative Nameserver"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"records",label:"DNS Records",type:"number",default:100},{key:"ttl",label:"TTL (seconds)",type:"number",default:3600},{key:"anycast",label:"Anycast Enabled",type:"boolean",default:!0}]},{id:"isp",group:"DNS & Network",icon:"",label:"ISP",description:"Internet Service Provider",tags:["internet","isp","network","provider","connectivity"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"ISP"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"dnsCache",label:"DNS Cache Enabled",type:"boolean",default:!0},{key:"bandwidth",label:"Bandwidth (Gbps)",type:"number",default:10}]},{id:"api-gateway",group:"Networking",icon:"",label:"API Gateway",description:"Central API entry point",tags:["api","gateway","rest","graphql","entry point","routing","kong","apigee"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"API Gateway"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"inputValidation",label:"Input Validation",type:"boolean",default:!0},{key:"authentication",label:"Authentication",type:"select",default:"OAuth 2.0",options:["OAuth 2.0","JWT","API Key","Basic Auth"]},{key:"rateLimiting",label:"Rate Limiting",type:"boolean",default:!0},{key:"requestsPerSecond",label:"Max Requests/Second",type:"number",default:1e3},{key:"tlsTermination",label:"TLS Termination",type:"boolean",default:!0},{key:"deduplication",label:"Request Deduplication",type:"boolean",default:!0},{key:"throttling",label:"Throttling Enabled",type:"boolean",default:!0}]},{id:"message-dispatcher",group:"Messaging",icon:"",label:"Message Dispatcher",description:"Message routing & distribution",tags:["message","dispatcher","routing","distribution","pub/sub"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Message Dispatcher"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"topics",label:"Topics",type:"number",default:10},{key:"loadBalancing",label:"Load Balancing",type:"select",default:"round-robin",options:["round-robin","least-load","hash-based"]},{key:"partitioning",label:"Partitioning Enabled",type:"boolean",default:!0}]},{id:"id-generator",group:"Services",icon:"",label:"ID Generator",description:"Distributed unique ID generation",tags:["id","uuid","snowflake","ulid","unique","generator","distributed"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"ID Generator"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"algorithm",label:"Algorithm",type:"select",default:"Snowflake",options:["Snowflake","UUID","ULID","Auto-Increment"]},{key:"shardId",label:"Shard ID",type:"number",default:1},{key:"distributed",label:"Distributed",type:"boolean",default:!0}]},{id:"distributed-lock",group:"Services",icon:"",label:"Distributed Lock",description:"Resource locking & coordination",tags:["lock","distributed","coordination","mutex","redis","etcd","zookeeper"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Distributed Lock"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"backend",label:"Backend",type:"select",default:"Redis",options:["Redis","Etcd","Zookeeper","Chubby"]},{key:"ttl",label:"Lock TTL (seconds)",type:"number",default:30},{key:"fairness",label:"Fair Locking",type:"boolean",default:!0}]},{id:"cold-storage",group:"Data Layer",icon:"",label:"Cold Storage",description:"Archive & backup storage",tags:["archive","backup","glacier","cold storage","long-term","s3 glacier"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Cold Storage"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"AWS Glacier",options:["AWS Glacier","Azure Archive","GCP Coldline"]},{key:"retentionDays",label:"Retention (days)",type:"number",default:2555},{key:"encryption",label:"Encryption at Rest",type:"boolean",default:!0}]},{id:"object-storage",group:"Data Layer",icon:"",label:"Object Storage",description:"S3-compatible object store",tags:["s3","blob","object storage","aws s3","azure blob","gcs","minio"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Object Storage"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"S3",options:["S3","Azure Blob","GCS","MinIO"]},{key:"versioning",label:"Versioning",type:"boolean",default:!0},{key:"checksumValidation",label:"Checksum Validation",type:"boolean",default:!0},{key:"storageGB",label:"Storage (GB)",type:"number",default:1e3}]},{id:"processing-worker",group:"Compute",icon:"",label:"Processing Worker",description:"Background job processor",tags:["worker","background job","async","task processor","celery","sidekiq"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Processing Worker"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"tasks",label:"Task Types",type:"select",default:"Media Encoding",options:["Media Encoding","Thumbnail Generation","Data Processing","ML Inference"]},{key:"concurrency",label:"Concurrent Jobs",type:"number",default:10},{key:"autoscale",label:"Auto-scale",type:"boolean",default:!0}]},{id:"notification-service",group:"Services",icon:"",label:"Notification Service",description:"Push notifications & alerts",tags:["notification","push","email","sms","alerts","fcm","apns"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Notification Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"channels",label:"Channels",type:"select",default:"Push + Email",options:["Push","Email","SMS","Push + Email","All"]},{key:"fanout",label:"Fan-out Support",type:"boolean",default:!0},{key:"batching",label:"Batch Notifications",type:"boolean",default:!0}]},{id:"recommendation-service",group:"Services",icon:"",label:"Recommendation",description:"ML-based recommendations",tags:["recommendation","ml","machine learning","collaborative filtering","personalization"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Recommendation"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"algorithm",label:"Algorithm",type:"select",default:"Collaborative Filtering",options:["Collaborative Filtering","Content-based","Hybrid"]},{key:"realTime",label:"Real-time",type:"boolean",default:!0},{key:"cacheResults",label:"Cache Results",type:"boolean",default:!0}]},{id:"payment-service",group:"Services",icon:"",label:"Payment Service",description:"Payment processing & gateway",tags:["payment","stripe","paypal","transaction","billing","checkout","pci"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Payment Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"gateway",label:"Gateway",type:"select",default:"Stripe",options:["Stripe","PayPal","Braintree","Square"]},{key:"pciDss",label:"PCI DSS Compliant",type:"boolean",default:!0},{key:"tokenization",label:"Card Tokenization",type:"boolean",default:!0},{key:"retry",label:"Auto-retry Failed",type:"boolean",default:!0}]},{id:"log-processing",group:"Services",icon:"",label:"Log Processing",description:"Log aggregation & analysis",tags:["logging","logs","elk","splunk","aggregation","analysis","kibana"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Log Processing"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"pipeline",label:"Pipeline",type:"select",default:"ELK Stack",options:["ELK Stack","Splunk","Datadog","CloudWatch"]},{key:"retentionDays",label:"Retention (days)",type:"number",default:30},{key:"indexing",label:"Real-time Indexing",type:"boolean",default:!0}]},{id:"pubsub",group:"Messaging",icon:"",label:"Pub/Sub",description:"Publish-subscribe messaging",tags:["pubsub","publish","subscribe","messaging","event","google pubsub","sns"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Pub/Sub"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"topics",label:"Topics",type:"number",default:20},{key:"fanout",label:"Fan-out Support",type:"boolean",default:!0},{key:"ordering",label:"Message Ordering",type:"boolean",default:!1},{key:"durable",label:"Durable Messages",type:"boolean",default:!0}]},{id:"frontend-server",group:"Compute",icon:"",label:"Frontend Server",description:"Client-facing server",tags:["frontend","server","websocket","connection","client-facing"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Frontend Server"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"inMemoryConnections",label:"In-Memory Connections",type:"boolean",default:!0},{key:"activeConnections",label:"Active Connections",type:"number",default:1e4},{key:"websockets",label:"WebSocket Support",type:"boolean",default:!0},{key:"instances",label:"Instances",type:"number",default:3}]},{id:"backend-server",group:"Compute",icon:"",label:"Backend Server",description:"Application logic & microservices",tags:["backend","server","microservices","api","business logic","application"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Backend Server"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"architecture",label:"Architecture",type:"select",default:"Microservices",options:["Monolith","Microservices","Serverless"]},{key:"instances",label:"Instances",type:"number",default:5},{key:"caching",label:"Caching Enabled",type:"boolean",default:!0},{key:"retry",label:"Retry Logic",type:"boolean",default:!0},{key:"bulkOps",label:"Bulk Operations",type:"boolean",default:!0}]},{id:"edge-server",group:"Delivery",icon:"",label:"Edge Server",description:"Edge computing & caching",tags:["edge","edge computing","edge network","cdn","streaming"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Edge Server"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"scope",label:"Scope",type:"select",default:"Regional",options:["Global","Regional","Local"]},{key:"streaming",label:"Streaming Support",type:"boolean",default:!0},{key:"abr",label:"ABR (Adaptive Bitrate)",type:"boolean",default:!0},{key:"staticCache",label:"Static Cache",type:"boolean",default:!0}]},{id:"service-mesh",group:"Networking",icon:"",label:"Service Mesh",description:"Microservices communication layer",tags:["service mesh","istio","linkerd","consul","mtls","traffic management"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Service Mesh"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"Istio",options:["Istio","Linkerd","Consul","AWS App Mesh"]},{key:"mtls",label:"Mutual TLS",type:"boolean",default:!0},{key:"tracing",label:"Distributed Tracing",type:"boolean",default:!0},{key:"circuitBreaker",label:"Circuit Breaker",type:"boolean",default:!0},{key:"retryPolicy",label:"Retry Policy",type:"boolean",default:!0},{key:"trafficSplitting",label:"Traffic Splitting",type:"boolean",default:!0}]},{id:"container-orchestrator",group:"Compute",icon:"",label:"Container Orchestrator",description:"Container management & orchestration",tags:["kubernetes","k8s","docker","container","orchestration","ecs","pods"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"K8s Cluster"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"platform",label:"Platform",type:"select",default:"Kubernetes",options:["Kubernetes","ECS","Docker Swarm","Nomad"]},{key:"nodes",label:"Worker Nodes",type:"number",default:3},{key:"autoscaling",label:"Auto-scaling (HPA)",type:"boolean",default:!0},{key:"ingress",label:"Ingress Controller",type:"boolean",default:!0},{key:"monitoring",label:"Monitoring (Prometheus)",type:"boolean",default:!0}]},{id:"serverless-function",group:"Compute",icon:"",label:"Serverless Function",description:"Event-driven compute",tags:["lambda","serverless","function app","cloud function","faas","azure functions","event-driven"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Lambda Function"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"runtime",label:"Runtime",type:"select",default:"Node.js",options:["Node.js","Python","Java","Go",".NET","Ruby"]},{key:"memoryMB",label:"Memory (MB)",type:"number",default:512},{key:"timeout",label:"Timeout (seconds)",type:"number",default:30},{key:"concurrency",label:"Concurrent Executions",type:"number",default:100},{key:"coldStart",label:"Cold Start Optimization",type:"boolean",default:!0}]},{id:"reverse-proxy",group:"Networking",icon:"",label:"Reverse Proxy",description:"Request routing & caching",tags:["reverse proxy","nginx","haproxy","envoy","traefik","proxy"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Reverse Proxy"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"server",label:"Server",type:"select",default:"Nginx",options:["Nginx","HAProxy","Envoy","Traefik"]},{key:"caching",label:"Response Caching",type:"boolean",default:!0},{key:"compression",label:"Compression (gzip/brotli)",type:"boolean",default:!0},{key:"ssl",label:"SSL/TLS",type:"boolean",default:!0},{key:"rateLimiting",label:"Rate Limiting",type:"boolean",default:!0}]},{id:"stream-processor",group:"Data Layer",icon:"",label:"Stream Processor",description:"Real-time data processing",tags:["stream","kafka streams","flink","spark streaming","kinesis","real-time"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Stream Processor"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"engine",label:"Engine",type:"select",default:"Kafka Streams",options:["Kafka Streams","Apache Flink","Spark Streaming","AWS Kinesis"]},{key:"throughput",label:"Throughput (events/sec)",type:"number",default:1e4},{key:"windowing",label:"Windowing Support",type:"boolean",default:!0},{key:"stateful",label:"Stateful Processing",type:"boolean",default:!0}]},{id:"data-warehouse",group:"Data Layer",icon:"",label:"Data Warehouse",description:"OLAP & analytics storage",tags:["data warehouse","snowflake","redshift","bigquery","olap","analytics"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Data Warehouse"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"platform",label:"Platform",type:"select",default:"Snowflake",options:["Snowflake","Redshift","BigQuery","Synapse"]},{key:"storageTB",label:"Storage (TB)",type:"number",default:10},{key:"compression",label:"Column Compression",type:"boolean",default:!0},{key:"partitioning",label:"Data Partitioning",type:"boolean",default:!0}]},{id:"monitoring",group:"Observability",icon:"",label:"Monitoring",description:"Metrics & alerting",tags:["monitoring","prometheus","grafana","datadog","metrics","alerts","observability"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Monitoring"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"stack",label:"Stack",type:"select",default:"Prometheus + Grafana",options:["Prometheus + Grafana","Datadog","New Relic","CloudWatch"]},{key:"metrics",label:"Metrics Collection",type:"boolean",default:!0},{key:"alerts",label:"Alerting",type:"boolean",default:!0},{key:"retention",label:"Retention (days)",type:"number",default:30}]},{id:"tracing",group:"Observability",icon:"",label:"Distributed Tracing",description:"Request flow tracking",tags:["tracing","jaeger","zipkin","distributed tracing","apm","x-ray"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Tracing"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"platform",label:"Platform",type:"select",default:"Jaeger",options:["Jaeger","Zipkin","AWS X-Ray","Datadog APM"]},{key:"sampling",label:"Sampling Rate (%)",type:"number",default:10},{key:"retention",label:"Retention (days)",type:"number",default:7}]},{id:"rate-limiter",group:"Services",icon:"",label:"Rate Limiter",description:"Request throttling service",tags:["rate limit","throttling","rate limiter","token bucket","quota"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Rate Limiter"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"algorithm",label:"Algorithm",type:"select",default:"Token Bucket",options:["Token Bucket","Leaky Bucket","Fixed Window","Sliding Window"]},{key:"requestsPerMinute",label:"Requests/Minute",type:"number",default:1e3},{key:"distributed",label:"Distributed",type:"boolean",default:!0},{key:"backend",label:"Backend",type:"select",default:"Redis",options:["Redis","In-Memory","Database"]}]},{id:"circuit-breaker",group:"Services",icon:"",label:"Circuit Breaker",description:"Fault tolerance & resilience",tags:["circuit breaker","fault tolerance","resilience","hystrix","fallback"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Circuit Breaker"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"failureThreshold",label:"Failure Threshold (%)",type:"number",default:50},{key:"timeout",label:"Timeout (ms)",type:"number",default:5e3},{key:"fallback",label:"Fallback Strategy",type:"boolean",default:!0}]},{id:"file-storage",group:"Data Layer",icon:"",label:"File Storage",description:"Shared file system",tags:["file storage","nfs","efs","shared storage","file system"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"File Storage"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"type",label:"Type",type:"select",default:"NFS",options:["NFS","EFS","Azure Files","GCP Filestore"]},{key:"storageTB",label:"Storage (TB)",type:"number",default:1},{key:"throughput",label:"Throughput (MB/s)",type:"number",default:100}]},{id:"vpn-gateway",group:"Networking",icon:"",label:"VPN Gateway",description:"Secure network connection",tags:["vpn","gateway","ipsec","openvpn","wireguard","secure connection"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"VPN Gateway"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"protocol",label:"Protocol",type:"select",default:"IPSec",options:["IPSec","OpenVPN","WireGuard"]},{key:"encryption",label:"Encryption",type:"select",default:"AES-256",options:["AES-128","AES-256","ChaCha20"]},{key:"tunnels",label:"Active Tunnels",type:"number",default:2}]},{id:"firewall",group:"Security",icon:"",label:"Firewall",description:"Network security & filtering",tags:["firewall","waf","security","ips","network firewall","filtering"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Firewall"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"type",label:"Type",type:"select",default:"WAF",options:["Network Firewall","WAF","Next-Gen Firewall"]},{key:"rules",label:"Active Rules",type:"number",default:50},{key:"ips",label:"IPS Enabled",type:"boolean",default:!0},{key:"logging",label:"Traffic Logging",type:"boolean",default:!0}]},{id:"secrets-manager",group:"Security",icon:"",label:"Secrets Manager",description:"Credentials & secrets storage",tags:["secrets","vault","credentials","key management","hashicorp vault","secrets manager"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Secrets Manager"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"HashiCorp Vault",options:["HashiCorp Vault","AWS Secrets Manager","Azure Key Vault"]},{key:"rotation",label:"Auto Rotation",type:"boolean",default:!0},{key:"encryption",label:"Encryption at Rest",type:"boolean",default:!0},{key:"audit",label:"Audit Logging",type:"boolean",default:!0}]},{id:"email-service",group:"Services",icon:"",label:"Email Service",description:"Transactional email delivery",tags:["email","sendgrid","ses","mailgun","smtp","transactional email"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Email Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"SendGrid",options:["SendGrid","AWS SES","Mailgun","Postmark"]},{key:"templates",label:"Template Support",type:"boolean",default:!0},{key:"tracking",label:"Open/Click Tracking",type:"boolean",default:!0},{key:"bounceHandling",label:"Bounce Handling",type:"boolean",default:!0}]},{id:"sms-service",group:"Services",icon:"",label:"SMS Service",description:"SMS notifications & OTP",tags:["sms","twilio","sns","text message","otp","vonage"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"SMS Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"Twilio",options:["Twilio","AWS SNS","Vonage","MessageBird"]},{key:"otp",label:"OTP Support",type:"boolean",default:!0},{key:"deliveryReports",label:"Delivery Reports",type:"boolean",default:!0}]},{id:"custom-component",group:"Custom",icon:"",label:"Custom Component",description:"Create your own custom component",tags:["custom","generic","user-defined","flexible","other"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Custom Component"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe what this component does",default:""},{key:"componentType",label:"Component Type",type:"text",placeholder:"e.g., Service, Database, Cache, etc.",default:""},{key:"technology",label:"Technology/Tool",type:"text",placeholder:"e.g., Redis, Kafka, Custom API, etc.",default:""},{key:"purpose",label:"Purpose",type:"textarea",placeholder:"What problem does this solve?",default:""},{key:"notes",label:"Additional Notes",type:"textarea",placeholder:"Any additional details or configuration",default:""}]},{id:"group-cluster",group:"Grouping",icon:"",label:"Cluster/Group",description:"Container for grouping multiple components",tags:["group","cluster","container","zone","boundary","region"],properties:[{key:"componentName",label:"Group Name",type:"text",placeholder:"e.g., Backend Cluster, Database Zone",default:"Cluster"},{key:"description",label:"Description",type:"textarea",placeholder:"Purpose of this cluster/group",default:""},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"e.g., rgba(100, 100, 255, 0.05)",default:"rgba(100, 100, 255, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"e.g., rgba(100, 100, 255, 0.3)",default:"rgba(100, 100, 255, 0.3)"}]},{id:"availability-zone",group:"Grouping",icon:"",label:"Availability Zone",description:"Isolated location within a region",tags:["az","availability zone","fault isolation","zone","region"],properties:[{key:"componentName",label:"Zone Name",type:"text",placeholder:"e.g., us-east-1a, AZ-1",default:"Availability Zone"},{key:"description",label:"Description",type:"textarea",placeholder:"Zone details",default:""},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"Zone background color",default:"rgba(34, 139, 34, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"Zone border color",default:"rgba(34, 139, 34, 0.3)"}]},{id:"vpc-network",group:"Grouping",icon:"",label:"VPC/Network",description:"Virtual private cloud boundary",tags:["vpc","network","subnet","private","isolated"],properties:[{key:"componentName",label:"VPC Name",type:"text",placeholder:"e.g., Production VPC",default:"VPC"},{key:"description",label:"Description",type:"textarea",placeholder:"Network details",default:""},{key:"cidr",label:"CIDR Block",type:"text",placeholder:"e.g., 10.0.0.0/16",default:"10.0.0.0/16"},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"VPC background color",default:"rgba(128, 0, 128, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"VPC border color",default:"rgba(128, 0, 128, 0.3)"}]},{id:"microservice-group",group:"Grouping",icon:"",label:"Microservice Group",description:"Related microservices cluster",tags:["microservices","service group","domain","bounded context"],properties:[{key:"componentName",label:"Service Group",type:"text",placeholder:"e.g., User Services, Payment Domain",default:"Service Group"},{key:"description",label:"Description",type:"textarea",placeholder:"Service group purpose",default:""},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"Group background color",default:"rgba(255, 165, 0, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"Group border color",default:"rgba(255, 165, 0, 0.3)"}]},{id:"security-boundary",group:"Grouping",icon:"",label:"Security Boundary",description:"Security zone/perimeter",tags:["security","dmz","firewall","boundary","zone"],properties:[{key:"componentName",label:"Security Zone",type:"text",placeholder:"e.g., DMZ, Internal, Restricted",default:"Security Boundary"},{key:"description",label:"Description",type:"textarea",placeholder:"Security zone details",default:""},{key:"level",label:"Security Level",type:"select",default:"Internal",options:["Public","DMZ","Internal","Restricted"]},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"Zone background color",default:"rgba(255, 0, 0, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"Zone border color",default:"rgba(255, 0, 0, 0.3)"}]},{id:"custom-group",group:"Grouping",icon:"",label:"Custom Group",description:"Create your own custom group/container",tags:["custom","group","container","user-defined","flexible","boundary"],properties:[{key:"componentName",label:"Group Name",type:"text",placeholder:"Enter custom group name",default:"Custom Group"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe the purpose of this group",default:""},{key:"groupType",label:"Group Type",type:"text",placeholder:"e.g., Region, Data Center, Team, etc.",default:""},{key:"icon",label:"Icon",type:"text",placeholder:"e.g., , , , etc.",default:""},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"e.g., rgba(100, 100, 255, 0.05)",default:"rgba(100, 100, 255, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"e.g., rgba(100, 100, 255, 0.3)",default:"rgba(100, 100, 255, 0.3)"},{key:"subtitle",label:"Subtitle",type:"text",placeholder:"Optional subtitle text",default:""},{key:"notes",label:"Additional Notes",type:"textarea",placeholder:"Any additional details",default:""}]}];function VV(e){return ht({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M216.49,104.49l-80,80a12,12,0,0,1-17,0l-80-80a12,12,0,0,1,17-17L128,159l71.51-71.52a12,12,0,0,1,17,17Z"},child:[]}]})(e)}function lfe(e){return ht({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M168.49,199.51a12,12,0,0,1-17,17l-80-80a12,12,0,0,1,0-17l80-80a12,12,0,0,1,17,17L97,128Z"},child:[]}]})(e)}function cfe(e){return ht({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M184.49,136.49l-80,80a12,12,0,0,1-17-17L159,128,87.51,56.49a12,12,0,1,1,17-17l80,80A12,12,0,0,1,184.49,136.49Z"},child:[]}]})(e)}function ufe(e){return ht({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M108,60A16,16,0,1,1,92,44,16,16,0,0,1,108,60Zm56,16a16,16,0,1,0-16-16A16,16,0,0,0,164,76ZM92,112a16,16,0,1,0,16,16A16,16,0,0,0,92,112Zm72,0a16,16,0,1,0,16,16A16,16,0,0,0,164,112ZM92,180a16,16,0,1,0,16,16A16,16,0,0,0,92,180Zm72,0a16,16,0,1,0,16,16A16,16,0,0,0,164,180Z"},child:[]}]})(e)}function dfe({components:e,onAdd:t}){const[n,r]=Pe.useState(!0),[i,s]=Pe.useState(new Set),[o,l]=Pe.useState(null),[u,d]=Pe.useState(""),h=Pe.useMemo(()=>new va(Array.from(e),{keys:[{name:"label",weight:.4},{name:"tags",weight:.25},{name:"description",weight:.2},{name:"group",weight:.15}],threshold:.3,includeScore:!0}),[e]),p=Pe.useMemo(()=>{const x=u.trim();if(!x)return Array.from(e);const w=h.search(x).map(k=>k.item),E=e.find(k=>k.id==="custom-component"),N=w.some(k=>k.id==="custom-component");return E&&!N&&w.push(E),w},[e,h,u]),g=Pe.useMemo(()=>{const x=new Map;for(const S of p){const w=S.group??"Other";x.has(w)||x.set(w,[]),x.get(w).push(S)}return Array.from(x.entries()).sort((S,w)=>S[0].localeCompare(w[0]))},[p]);Pe.useEffect(()=>{g.length>0&&i.size===0&&s(new Set(g.map(([x])=>x)))},[g,i.size]);const y=x=>{s(S=>{const w=new Set(S);return w.has(x)?w.delete(x):w.add(x),w})};return v.jsxs("div",{className:"relative z-40",children:[v.jsx("button",{type:"button",onClick:()=>r(x=>!x),"aria-label":n?"Collapse component palette":"Expand component palette","aria-controls":"component-palette-panel",className:"absolute top-5 -right-3 h-6 w-6 flex items-center justify-center rounded-full border border-theme bg-surface text-theme shadow cursor-pointer hover:bg-[var(--bg-hover)] transition-colors z-50",children:n?v.jsx(lfe,{size:16}):v.jsx(cfe,{size:16})}),v.jsx("div",{className:`relative shrink-0 group h-full flex flex-col bg-surface border-r border-theme overflow-y-auto overflow-x-hidden component-palette transition-[width] duration-300 ease-in-out z-40 ${n?"w-56 p-3 pr-0":"w-6 p-1"}`,"aria-label":"Component palette",id:"component-palette-panel",children:n?v.jsxs(v.Fragment,{children:[v.jsx("h3",{className:"text-lg font-semibold text-theme mb-3",children:"Components"}),v.jsx("div",{className:"mr-3 mb-3",children:v.jsx("input",{type:"text",placeholder:"Search components...",value:u,onChange:x=>d(x.target.value),className:"w-full px-3 py-1.5 text-sm border border-theme rounded bg-[var(--bg)] text-theme placeholder:text-muted focus:outline-none focus:ring-1 focus:ring-[var(--brand)]"})}),v.jsxs("div",{className:"space-y-1 flex-1 overflow-y-auto",children:[g.length===0?v.jsx("div",{className:"text-center py-8 text-muted text-sm",children:"No components found"}):g.map(([x,S])=>{const w=i.has(x);return v.jsxs("div",{children:[v.jsxs("button",{type:"button",onClick:()=>y(x),className:"w-full flex items-center justify-between px-2 py-1.5 text-left hover:bg-[var(--bg-hover)] rounded transition-colors","aria-expanded":w,"aria-controls":`group-${x}`,children:[v.jsx("span",{className:"text-xs font-medium uppercase tracking-wide text-muted",children:x}),v.jsx(VV,{size:12,className:`text-muted transition-transform duration-150 ${w?"rotate-0":"-rotate-90"}`})]}),w&&v.jsx("div",{id:`group-${x}`,className:"mt-1 mb-3 px-1",children:v.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:S.map(E=>v.jsxs("button",{type:"button",draggable:!0,"aria-label":`Add ${E.label} to canvas`,onMouseEnter:N=>{const k=N.currentTarget.getBoundingClientRect();l({label:E.label,description:E.description||"",rect:k})},onMouseLeave:()=>l(null),onDragStart:N=>{l(null),N.dataTransfer?.setData("application/reactflow",JSON.stringify({type:E.id})),N.dataTransfer?.setData("text/plain",E.id),N.dataTransfer&&(N.dataTransfer.effectAllowed="move")},onKeyDown:N=>{(N.key==="Enter"||N.key===" ")&&(N.preventDefault(),t(E.id))},className:"text-left p-2 border border-theme rounded-md cursor-grab select-none hover:border-[var(--brand)] hover:bg-[var(--bg-hover)] transition-all group/item",children:[v.jsx("div",{className:"text-center mb-1",children:v.jsx("span",{className:"text-2xl",children:E.icon})}),v.jsx("div",{className:"text-xs font-medium text-theme text-center group-hover/item:text-[var(--brand)] transition-colors line-clamp-1",children:E.label})]},E.id))})})]},x)}),v.jsxs("div",{className:"mt-4 px-2 py-2.5 rounded text-xs bg-[var(--bg-hover)]",children:[v.jsx("div",{className:"font-medium mb-1 text-theme",children:" Tip"}),v.jsx("div",{className:"text-muted",children:"Drag a component to the canvas to start designing"})]})]})]}):v.jsx("div",{className:"flex-1 flex items-center justify-center h-full",children:v.jsx("span",{className:"sr-only",children:"Component palette collapsed"})})}),o&&c5.createPortal(v.jsxs("div",{className:"fixed px-3 py-2 bg-[var(--bg)] border border-theme rounded shadow-lg text-xs z-[9999] min-w-max max-w-xs pointer-events-none -translate-y-1/2",style:{left:`${o.rect.right+8}px`,top:`${o.rect.top+o.rect.height/2}px`},children:[v.jsx("div",{className:"font-semibold text-theme mb-0.5",children:o.label}),v.jsx("div",{className:"text-muted",children:o.description}),v.jsx("div",{className:"absolute right-full top-1/2 -translate-y-1/2 -mr-1 border-4 border-transparent border-r-[var(--bg)]"})]}),document.body)]})}const ffe=({reactFlowWrapperRef:e,nodes:t,edges:n,nodeTypes:r,edgeTypes:i,onNodesChange:s,onEdgesChange:o,onConnect:l,onDragOver:u,onDrop:d,onNodeDragStop:h})=>v.jsx("div",{className:"flex-1 relative bg-theme min-h-0",children:v.jsx("section",{className:"w-full h-full",ref:e,onDragOver:u,onDrop:d,"aria-label":"Diagram canvas drop area",children:v.jsxs(Sae,{className:"w-full h-full",nodes:t,edges:n,nodeTypes:r,edgeTypes:i,onNodesChange:s,onEdgesChange:o,onConnect:l,onNodeDragStop:h,connectionMode:fa.Loose,fitView:!0,proOptions:{hideAttribution:!0},children:[v.jsx(Wae,{nodeStrokeWidth:3}),v.jsx(Pae,{}),v.jsx(Mae,{gap:16})]})})}),hfe=({problem:e,activeTab:t,setActiveTab:n,inspectedNodeId:r,setInspectedNodeId:i,propertyElements:s,customPropertyElements:o,onAddCustomProperty:l,handleSave:u,assessmentResult:d,onDetachFromGroup:h,isNodeInGroup:p})=>{const[g,y]=Pe.useState(320),x=260,S=640,w=Pe.useRef(!1),E=Pe.useRef(null),[N,k]=Pe.useState(!1),T=Pe.useCallback(z=>{if(!w.current)return;const V=Math.min(Math.max(window.innerWidth-z.clientX,x),S);y(V)},[]),A=Pe.useCallback(()=>{w.current=!1,document.body.style.userSelect=""},[]),_=z=>{z.preventDefault(),w.current=!0,document.body.style.userSelect="none"};Pe.useEffect(()=>(globalThis.addEventListener("mousemove",T),globalThis.addEventListener("mouseup",A),()=>{globalThis.removeEventListener("mousemove",T),globalThis.removeEventListener("mouseup",A)}),[T,A]),Pe.useEffect(()=>{E.current&&(E.current.style.width=g+"px")},[g]);const R=e?.id==="free",D=R&&!r;if(Pe.useEffect(()=>{R&&r&&t==="details"&&n("inspector")},[R,r,t,n]),!e||D)return null;const B=async()=>{if(d)try{await navigator.clipboard.writeText(JSON.stringify(d,null,2))}catch{const z=document.createElement("textarea");z.value=JSON.stringify(d,null,2),document.body.appendChild(z),z.select(),document.execCommand("copy"),z.remove()}},$=()=>{if(!d)return;const z=new Blob([JSON.stringify(d,null,2)],{type:"application/json"}),V=URL.createObjectURL(z),Y=document.createElement("a");Y.href=V,Y.download=`assessment-${Date.now()}.json`,document.body.appendChild(Y),Y.click(),Y.remove(),URL.revokeObjectURL(V)};return v.jsxs("aside",{ref:E,className:"bg-surface border-l border-theme p-4 flex flex-col h-full relative inspector-resizable","data-width":g,children:[v.jsxs("button",{type:"button",onMouseDown:_,"aria-label":"Resize inspector panel",className:"absolute left-0 top-0 h-full w-2 -ml-1 cursor-col-resize flex items-center justify-center group",children:[v.jsx("span",{className:"w-px h-full bg-transparent group-hover:bg-[var(--brand)]/40 transition-colors"}),v.jsx(ufe,{"aria-hidden":!0,className:"absolute py-1 rounded-md bg-[var(--surface)] border border-theme text-[var(--muted)] opacity-90 group-hover:bg-[var(--brand)] group-hover:text-white shadow-sm pointer-events-none transition-colors",size:24})]}),v.jsxs("div",{className:"flex items-center justify-start gap-2",role:"tablist","aria-label":"Sidebar tabs",children:[!R&&v.jsxs("button",{type:"button",role:"tab",className:`flex items-center gap-2 px-3 py-2 rounded-t-md border-b-2 transition-colors ${t==="details"?"border-[var(--brand)] bg-[var(--brand)]/5 text-[var(--brand)]":"border-transparent text-theme hover:bg-[var(--bg-hover)]"}`,onClick:()=>n("details"),children:[v.jsx("span",{className:"text-sm",children:""}),v.jsx("span",{className:"text-sm font-medium",children:"Details"})]}),v.jsxs("button",{type:"button",role:"tab",className:`flex items-center gap-2 px-3 py-2 rounded-t-md border-b-2 transition-colors ${t==="inspector"?"border-[var(--brand)] bg-[var(--brand)]/5 text-[var(--brand)]":"border-transparent text-theme hover:bg-[var(--bg-hover)]"}`,onClick:()=>n("inspector"),children:[v.jsx("span",{className:"text-sm",children:""}),v.jsx("span",{className:"text-sm font-medium",children:"Properties"})]})]}),v.jsx("div",{className:"w-full h-px bg-[var(--muted)]/20 mb-4","aria-hidden":"true"}),v.jsxs("div",{className:"overflow-y-auto component-palette flex-1",children:[t==="details"&&v.jsxs("div",{children:[d&&v.jsxs("div",{className:"mb-4 p-2 border rounded bg-[var(--surface)]",children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("div",{className:"text-sm font-medium text-theme",children:"Assessment"}),v.jsxs("div",{className:"text-sm font-semibold text-theme",children:[d.score,"%"]})]}),v.jsx("div",{className:"text-xs text-muted mb-2",children:d.isValid?"Pass":"Needs work"}),v.jsx("div",{className:"space-y-1 text-xs",children:d.feedback.slice(0,3).map(z=>v.jsx("div",{className:"text-sm text-theme",children:z.message},`${z.category}-${z.type}`))}),v.jsxs("div",{className:"mt-3 flex gap-2",children:[v.jsx("button",{type:"button",onClick:B,className:"px-2 py-1 bg-theme border border-theme rounded text-sm hover:bg-[var(--bg-hover)]",children:"Copy JSON"}),v.jsx("button",{type:"button",onClick:$,className:"px-2 py-1 bg-theme border border-theme rounded text-sm hover:bg-[var(--bg-hover)]",children:"Download JSON"})]}),v.jsxs("div",{className:"mt-3 text-xs",children:[v.jsx("div",{className:"font-medium text-sm mb-1",children:"What went right"}),d.architectureStrengths.length>0?v.jsx("ul",{className:"list-disc list-inside text-xs mb-2",children:d.architectureStrengths.map(z=>v.jsx("li",{children:z},`strength-${z}`))}):v.jsx("div",{className:"text-xs text-muted mb-2",children:"No notable strengths detected."}),v.jsx("div",{className:"font-medium text-sm mb-1",children:"What to improve"}),d.improvements.length>0?v.jsx("ul",{className:"list-disc list-inside text-xs mb-2",children:d.improvements.map(z=>v.jsx("li",{children:z},`imp-${z}`))}):v.jsx("div",{className:"text-xs text-muted mb-2",children:"No specific improvements suggested."}),v.jsx("div",{className:"font-medium text-sm mb-1",children:"Feedback"}),v.jsx("div",{className:"space-y-1",children:d.feedback.map(z=>v.jsxs("div",{className:"text-xs",children:[v.jsx("div",{className:"font-medium",children:z.category.toUpperCase()}),v.jsx("div",{className:"text-muted",children:z.message})]},`${z.category}-${z.type}`))})]})]}),v.jsx("h3",{className:"text-lg font-semibold text-theme mb-3",children:e.title}),v.jsx("p",{className:"text-muted text-sm leading-relaxed mb-4",children:e.description}),v.jsxs("div",{className:"mb-4",children:[v.jsx("h4",{className:"text-sm font-semibold text-theme mb-2",children:"Requirements"}),v.jsx("ul",{className:"space-y-1",children:e.requirements.map(z=>v.jsxs("li",{className:"flex items-start space-x-2",children:[v.jsx("span",{className:"text-green-500 mt-0.5 text-xs",children:""}),v.jsx("span",{className:"text-xs text-muted",children:z})]},z))})]}),v.jsxs("div",{className:"mb-4",children:[v.jsx("h4",{className:"text-sm font-semibold text-theme mb-2",children:"Constraints"}),v.jsx("ul",{className:"space-y-1",children:e.constraints.map(z=>v.jsxs("li",{className:"flex items-start space-x-2",children:[v.jsx("span",{className:"text-yellow-500 mt-0.5 text-xs",children:""}),v.jsx("span",{className:"text-xs text-muted",children:z})]},z))})]}),v.jsxs("div",{className:"mb-4",children:[v.jsxs("button",{type:"button",onClick:()=>k(!N),className:"w-full flex items-center justify-between mb-2 cursor-pointer hover:bg-[var(--bg-hover)] p-2 rounded-md transition-colors","aria-controls":"hints-content",children:[v.jsx("h4",{className:"text-sm font-semibold text-theme",children:" Hints"}),v.jsx(VV,{size:14,className:`text-muted transition-transform duration-150 ${N?"rotate-0":"-rotate-90"}`})]}),N&&v.jsx("div",{id:"hints-content",className:"space-y-2",children:e.hints.map(z=>v.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900 border-l-4 border-yellow-400 dark:border-yellow-600 p-2 rounded-r-lg",children:v.jsx("div",{className:"text-xs text-white",children:z})},z))})]}),v.jsxs("div",{children:[v.jsx("h4",{className:"text-sm font-semibold text-theme mb-2",children:"Tags"}),v.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map(z=>v.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200 text-xs rounded-md",children:z},z))})]})]}),t==="inspector"&&v.jsxs("div",{children:[v.jsx("h3",{className:"text-lg font-semibold text-theme mb-3",children:"Component Properties"}),!r&&v.jsx("div",{className:"text-sm text-muted",children:"Select a node settings () to view properties."}),r&&v.jsxs("div",{children:[v.jsxs("div",{className:"text-sm text-theme mb-3",children:["Node: ",r]}),s&&v.jsxs("div",{className:"mb-6",children:[v.jsx("div",{className:"text-xs font-semibold text-muted uppercase tracking-wide mb-2",children:"Standard Properties"}),v.jsx("div",{className:"space-y-2",children:s})]}),v.jsxs("div",{className:"mb-4",children:[v.jsxs("div",{className:"flex items-center justify-between mb-2",children:[v.jsx("div",{className:"text-xs font-semibold text-muted uppercase tracking-wide",children:"Custom Properties"}),v.jsxs("button",{type:"button",onClick:l,className:"flex items-center gap-1 px-2 py-1 text-xs font-medium text-[var(--brand)] hover:bg-[var(--brand)]/10 rounded-md transition-colors border border-[var(--brand)]/30 hover:border-[var(--brand)] cursor-pointer",title:"Add custom property",children:[v.jsx(Bee,{size:14}),v.jsx("span",{children:"Add"})]})]}),v.jsx("div",{className:"space-y-2",children:o})]}),v.jsxs("div",{className:"mt-6 flex flex-col gap-2 pt-4 border-t border-theme",children:[p&&h&&v.jsxs("button",{type:"button",className:"w-full px-3 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-colors font-medium text-sm cursor-pointer flex items-center justify-center gap-2",onClick:h,title:"Remove this node from its parent group",children:[v.jsx("span",{children:""}),v.jsx("span",{children:"Detach from Group"})]}),v.jsxs("div",{className:"flex space-x-2",children:[v.jsx("button",{type:"button",className:"flex-1 px-3 py-2 bg-[var(--brand)] text-white rounded-md hover:bg-[var(--brand)]/90 transition-colors font-medium text-sm cursor-pointer",onClick:u,children:"Save Changes"}),v.jsx("button",{type:"button",className:"px-3 py-2 bg-theme border border-theme rounded-md hover:bg-[var(--bg-hover)] transition-colors text-sm cursor-pointer",onClick:()=>{i(null),n("details")},children:"Close"})]})]})]})]})]})]})};async function pfe(e,t){if(!e)return{isValid:!1,score:0,feedback:[{type:"error",message:"No solution provided.",category:"maintainability"}],suggestions:["Please add components to your design for assessment."],missingComponents:[],architectureStrengths:[],improvements:[]};const n="https://diagrammatic-api.vercel.app";try{const r={components:e.components.map(o=>({id:o.id||`comp-${Date.now()}`,type:o.type,label:o.label,properties:o.properties||{},position:o.position})),connections:e.connections?.map(o=>({id:o.id||`conn-${Date.now()}`,source:o.source,target:o.target,label:o.label,type:o.type}))||[],explanation:e.explanation,keyPoints:e.keyPoints,problem:t?{title:t.title,description:t.description,requirements:Array.isArray(t.requirements)?t.requirements.join(`.
`):t.requirements,constraints:Array.isArray(t.constraints)?t.constraints.join(`.
`):t.constraints,difficulty:t.difficulty,category:t.category,estimatedTime:t.estimated_time}:null};console.log("Calling assessment API:",`${n}/api/v1/assess`),console.log("Request payload:",r);const i=await fetch(`${n}/api/v1/assess`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(r)});if(!i.ok){const o=await i.text();throw new Error(`Assessment API failed: ${i.status} ${i.statusText} - ${o}`)}const s=await i.json();return console.log("Assessment API response:",s),mfe(s)}catch(r){return console.error("AI Assessment failed:",r),{isValid:!1,score:0,feedback:[{type:"error",message:`Assessment service unavailable: ${r instanceof Error?r.message:"Unknown error"}`,category:"maintainability"}],suggestions:["Please ensure the assessment service is running and try again."],missingComponents:[],architectureStrengths:[],improvements:[]}}}function mfe(e){const t=e,n=(t.feedback||[]).map(r=>({type:r.type,message:r.message,category:r.category}));return{isValid:t.is_valid||!1,score:t.overall_score||0,feedback:n,suggestions:t.suggestions||[],missingComponents:t.missing_components||[],architectureStrengths:t.strengths||[],improvements:t.improvements||[]}}const HV=Pe.memo(({id:e,data:t,onCopy:n,isInGroup:r})=>{const i=t.componentName||t.label,s=Pe.useCallback(d=>{d.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-delete",{detail:{id:e}}))},[e]),o=Pe.useCallback(d=>{d.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-toggle",{detail:{id:e}}))},[e]),l=Pe.useCallback(d=>{d.stopPropagation(),n?.(e,t)},[e,t,n]),u=Pe.useCallback(d=>{d.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-detach",{detail:{id:e}}))},[e]);return v.jsxs(ln.fieldset,{initial:{y:0,opacity:1},whileHover:{y:-1,boxShadow:"0 12px 30px rgba(0,0,0,0.12)"},whileTap:{scale:.985},transition:{type:"spring",stiffness:320,damping:28},className:"min-w-[140px] w-full max-w-xs bg-surface border border-theme rounded-lg text-theme text-sm shadow-sm cursor-grab relative",children:[v.jsx("legend",{className:"sr-only",children:i}),v.jsxs("div",{className:"absolute -top-5 right-1 flex items-center z-10 bg-[var(--surface)]/80 border border-theme rounded-full shadow-sm",children:[v.jsx(ln.button,{type:"button","aria-label":"Settings",onClick:o,className:"p-1 rounded-full hover:bg-[var(--bg-hover)] transition-colors flex items-center justify-center",title:"Settings",whileHover:{scale:1.1,y:-1,rotate:90},whileTap:{scale:.95},transition:{type:"spring",stiffness:400,damping:25},children:v.jsx(V6,{className:"w-2 h-2"})}),r&&v.jsx(ln.button,{type:"button","aria-label":"Detach from Group",onClick:u,className:"p-1 text-orange-500 rounded-full hover:bg-[var(--bg-hover)] transition-colors flex items-center justify-center",title:"Detach from Group",whileHover:{scale:1.1,y:-1},whileTap:{scale:.95},transition:{type:"spring",stiffness:400,damping:25},children:v.jsx(cU,{className:"w-2 h-2"})}),v.jsx(ln.button,{type:"button","aria-label":"Copy Node",onClick:l,className:"p-1 rounded-full hover:bg-[var(--bg-hover)] transition-colors flex items-center justify-center",title:"Copy Node",whileHover:{scale:1.1,y:-1},whileTap:{scale:.95},transition:{type:"spring",stiffness:400,damping:25},children:v.jsx(Iee,{className:"w-2 h-2"})}),v.jsx(ln.button,{type:"button","aria-label":"Delete",onClick:s,className:"p-1 text-red-600 rounded-full hover:bg-[var(--bg-hover)] transition-colors flex items-center justify-center",title:"Delete",whileHover:{scale:1.15,y:-2,rotate:5},whileTap:{scale:.9},transition:{type:"spring",stiffness:400,damping:25},children:v.jsx(ck,{className:"w-2 h-2"})})]}),v.jsx(Ar,{id:"top",type:"source",position:Ne.Top,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),v.jsx(Ar,{id:"right",type:"source",position:Ne.Right,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),v.jsx(Ar,{id:"bottom",type:"source",position:Ne.Bottom,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),v.jsx(Ar,{id:"left",type:"source",position:Ne.Left,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),v.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 min-w-0 w-full py-2",children:[v.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-[var(--bg-hover)] flex items-center justify-center text-xl",children:t.icon??""}),v.jsxs("div",{className:"min-w-0 w-full text-center",children:[v.jsx("div",{className:"truncate font-medium text-sm",children:i}),t.subtitle&&v.jsx("div",{className:"text-xs text-muted truncate",children:t.subtitle})]})]})]})});HV.displayName="Node";const gfe=({sourceX:e,sourceY:t,targetX:n,targetY:r},i)=>{const s=(e+n)/2,o=(t+r)/2;return`M ${e} ${t} Q ${s} ${o+i} ${n} ${r}`},yfe=(e,t)=>{const{sourceX:n,sourceY:r,targetX:i,targetY:s}=e;if(t){const d=n<i?25:-25,h=gfe({sourceX:n,sourceY:r,targetX:i,targetY:s},d),p=(n+i)/2,g=(r+s)/2,y=p,x=g+d/2;return{edgePath:h,centerX:y,centerY:x}}const[o]=xk(e),[l,u]=wk({sourceX:n,sourceY:r,targetX:i,targetY:s});return{edgePath:o,centerX:l,centerY:u}},vfe=e=>{const{id:t,source:n,target:r,sourceX:i,sourceY:s,targetX:o,targetY:l,sourcePosition:u,targetPosition:d,data:h,selected:p,markerEnd:g}=e,[y,x]=O.useState(!1),[S,w]=O.useState(h?.label??""),[E,N]=O.useState(h?.hasLabel??!1),k=O.useRef(null),T=Xe(Y=>{const I=Y.edges.some(F=>F.id!==t&&F.source===r&&F.target===n);return I&&console.log(`Bi-directional edge detected: ${t} (${n} -> ${r})`),I}),A={sourceX:i,sourceY:s,sourcePosition:u,targetX:o,targetY:l,targetPosition:d},{edgePath:_,centerX:R,centerY:D}=yfe(A,T),B=Y=>{Y.stopPropagation(),x(!0),setTimeout(()=>k.current?.focus(),0)},$=Y=>{Y.stopPropagation(),N(!0),x(!0),setTimeout(()=>k.current?.focus(),0)},z=Y=>{Y.stopPropagation(),N(!1),w(""),window.dispatchEvent(new CustomEvent("diagram:edge-label-change",{detail:{id:t,label:"",hasLabel:!1}}))},V=()=>{x(!1),window.dispatchEvent(new CustomEvent("diagram:edge-label-change",{detail:{id:t,label:S,hasLabel:E||S.trim().length>0}}))};return v.jsxs("g",{className:"react-flow__edge",children:[v.jsx("defs",{children:v.jsx("marker",{id:`arrow-${t}`,viewBox:"0 0 10 10",refX:"8",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto",children:v.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"var(--brand)"})})}),v.jsx("path",{id:t,d:_,fill:"none",stroke:p?"var(--brand)":"var(--muted)",strokeWidth:p?3:2,markerEnd:g||`url(#arrow-${t})`,className:"transition-colors"}),v.jsx("foreignObject",{x:R-75,y:D-12,width:150,height:24,className:"overflow-visible",children:v.jsx("div",{className:"flex items-center justify-center w-full h-full pointer-events-auto",children:E?v.jsx("div",{className:"flex items-center gap-1",children:y?v.jsx("input",{ref:k,value:S,onChange:Y=>w(Y.target.value),onBlur:V,onKeyDown:Y=>{Y.key==="Enter"&&V(),Y.key==="Escape"&&(x(!1),w(h?.label??""))},className:"text-xs border rounded px-2 py-1 bg-[var(--surface)] text-theme w-24 text-center focus:outline-none focus:ring-1 focus:ring-[var(--brand)]",placeholder:"Label..."}):v.jsxs(v.Fragment,{children:[v.jsx("button",{onDoubleClick:B,className:`text-xs px-2 py-1 rounded cursor-text bg-[var(--surface)] text-theme border text-center min-w-[60px] hover:bg-[var(--bg-hover)] ${p?"ring-1 ring-[var(--brand)]":"border-theme"}`,title:"Double-click to edit",type:"button",children:S||"Label"}),p&&v.jsx("button",{onClick:z,className:"text-xs px-1 py-1 rounded bg-red-100 text-red-700 hover:bg-red-200 dark:bg-red-900 dark:text-red-200",title:"Remove label",children:""})]})}):p&&v.jsx("button",{onClick:$,className:"text-xs px-2 py-1 rounded bg-[var(--surface)] border border-dashed border-[var(--brand)] text-[var(--brand)] hover:bg-[var(--bg-hover)]",title:"Add label",children:"+ Label"})})})]})},bfe=({id:e,data:t})=>{const n=t.backgroundColor||"rgba(100, 100, 255, 0.05)",r=t.borderColor||"rgba(100, 100, 255, 0.3)",i=Pe.useCallback(o=>{o.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-delete",{detail:{id:e}}))},[e]),s=Pe.useCallback(o=>{o.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-toggle",{detail:{id:e}}))},[e]);return v.jsxs("div",{className:"group-node",style:{padding:"20px",borderRadius:"12px",border:`2px dashed ${r}`,backgroundColor:n,minWidth:"300px",minHeight:"200px",height:"100%",position:"relative"},children:[v.jsx(Jae,{minWidth:300,minHeight:200,isVisible:!0,lineStyle:{borderColor:r,borderWidth:2,borderStyle:"dashed"},handleStyle:{width:8,height:8,borderRadius:"2px",backgroundColor:"var(--surface)",border:`2px solid ${r}`,boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}}),v.jsxs("div",{className:"absolute -top-3 right-2 flex items-center z-10 bg-[var(--surface)]/90 border border-theme rounded-full shadow-sm",children:[v.jsx(ln.button,{type:"button","aria-label":"Settings",onClick:s,className:"p-1 rounded-full hover:bg-[var(--bg-hover)] transition-colors flex items-center justify-center",title:"Group Settings",whileHover:{scale:1.1,y:-1,rotate:90},whileTap:{scale:.95},transition:{type:"spring",stiffness:400,damping:25},children:v.jsx(V6,{className:"w-3 h-3"})}),v.jsx(ln.button,{type:"button","aria-label":"Delete Group",onClick:i,className:"p-1 text-red-600 rounded-full hover:bg-[var(--bg-hover)] transition-colors flex items-center justify-center",title:"Delete Group",whileHover:{scale:1.15,y:-2,rotate:5},whileTap:{scale:.9},transition:{type:"spring",stiffness:400,damping:25},children:v.jsx(ck,{className:"w-3 h-3"})})]}),v.jsxs("div",{className:"group-header",style:{position:"absolute",top:"-12px",left:"10px",padding:"4px 12px",borderRadius:"6px",backgroundColor:"var(--surface)",border:`1px solid ${r}`,display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",fontWeight:"600",color:"var(--theme)",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[t.icon&&v.jsx("span",{children:t.icon}),v.jsx("span",{children:t.label})]}),t.subtitle&&v.jsx("div",{style:{marginTop:"8px",fontSize:"12px",color:"var(--muted)",fontStyle:"italic"},children:t.subtitle}),v.jsx(Ar,{id:"top",type:"source",position:Ne.Top,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),v.jsx(Ar,{id:"right",type:"source",position:Ne.Right,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),v.jsx(Ar,{id:"bottom",type:"source",position:Ne.Bottom,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),v.jsx(Ar,{id:"left",type:"source",position:Ne.Left,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}})]})},xfe=({property:e,onUpdate:t,onDelete:n,isNew:r=!1})=>{const[i,s]=O.useState(r),o=d=>{t(e.id,{value:d})},l=(d,h)=>{t(e.id,{[d]:h})},u=[{value:"text",label:"Text"},{value:"textarea",label:"Text Area"},{value:"number",label:"Number"},{value:"boolean",label:"Checkbox"}];return v.jsxs("div",{className:"border border-theme rounded-lg overflow-hidden bg-[var(--bg-hover)]/30",children:[v.jsxs("div",{className:"flex items-center justify-between p-2 bg-[var(--bg-hover)]/50",children:[v.jsxs("button",{type:"button",onClick:()=>s(!i),className:"flex items-center gap-2 flex-1 text-left hover:text-[var(--brand)] transition-colors",children:[i?v.jsx(Yee,{size:18}):v.jsx(Wee,{size:18}),v.jsx("span",{className:"text-sm font-medium text-theme truncate",children:e.label||"Unnamed Property"})]}),v.jsx("button",{type:"button",onClick:()=>n(e.id),className:"p-1 hover:bg-red-500/10 hover:text-red-500 rounded transition-colors",title:"Delete custom property",children:v.jsx(ck,{size:16})})]}),i&&v.jsxs("div",{className:"p-3 space-y-3 border-t border-theme",children:[v.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[v.jsx(Ch,{id:`${e.id}-key`,label:"Key",value:e.key,onChange:d=>l("key",d),placeholder:"e.g., customField"}),v.jsx(Ch,{id:`${e.id}-label`,label:"Label",value:e.label,onChange:d=>l("label",d),placeholder:"e.g., Custom Field"})]}),v.jsx(U6,{id:`${e.id}-type`,label:"Type",value:e.type,options:u.map(d=>d.value),onChange:d=>{l("type",d),d==="boolean"?l("value",!1):d==="number"?l("value",0):l("value","")}}),v.jsxs("div",{className:"border-t border-theme pt-3",children:[v.jsx("div",{className:"text-xs font-semibold text-muted uppercase tracking-wide mb-2",children:"Current Value"}),e.type==="text"&&v.jsx(Ch,{id:`${e.id}-value`,label:"",value:String(e.value),onChange:o,placeholder:"Enter value"}),e.type==="textarea"&&v.jsx(Tp,{id:`${e.id}-value`,label:"",value:String(e.value),onChange:o,placeholder:"Enter value"}),e.type==="number"&&v.jsx(F6,{id:`${e.id}-value`,label:"",value:Number(e.value)||0,onChange:d=>o(d)}),e.type==="boolean"&&v.jsx("div",{className:"pt-1",children:v.jsx(H6,{id:`${e.id}-value`,checked:!!e.value,onChange:o,label:"Enabled"})})]})]})]})},wfe=({isOpen:e,onClose:t,diagrams:n,onLoad:r,onDelete:i,isLoading:s})=>{const[o,l]=O.useState(null),u=async(h,p)=>{if(p.stopPropagation(),!!confirm("Are you sure you want to delete this diagram?")){l(h);try{await i(h)}finally{l(null)}}},d=h=>new Date(h).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e?v.jsx(Gp,{children:e&&v.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:v.jsxs(ln.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"bg-surface rounded-2xl shadow-2xl p-6 max-w-3xl w-full max-h-[80vh] flex flex-col border border-theme/10",onClick:h=>h.stopPropagation(),children:[v.jsxs("div",{className:"flex items-center justify-between mb-6",children:[v.jsx("h2",{className:"text-2xl font-bold text-theme",children:"My Diagrams"}),v.jsx("button",{type:"button",onClick:t,className:"p-2 text-muted hover:text-theme hover:bg-[var(--bg-hover)] rounded-md transition-colors","aria-label":"Close",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),v.jsx("div",{className:"flex-1 overflow-y-auto",children:s?v.jsx("div",{className:"flex items-center justify-center h-64",children:v.jsx("div",{className:"text-muted",children:"Loading diagrams..."})}):n.length===0?v.jsxs("div",{className:"flex flex-col items-center justify-center h-64 text-center",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-16 w-16 text-muted mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),v.jsx("p",{className:"text-muted text-lg mb-2",children:"No diagrams yet"}),v.jsx("p",{className:"text-muted text-sm",children:"Create your first diagram and save it to see it here"})]}):v.jsx("div",{className:"grid gap-3",children:n.map(h=>v.jsx("div",{onClick:()=>{r(h),t()},className:"p-4 bg-theme/5 hover:bg-theme/10 border border-theme/10 rounded-lg cursor-pointer transition-all group",children:v.jsxs("div",{className:"flex items-start justify-between",children:[v.jsxs("div",{className:"flex-1 min-w-0",children:[v.jsx("h3",{className:"font-semibold text-theme truncate group-hover:text-[var(--brand)] transition-colors",children:h.title}),h.description&&v.jsx("p",{className:"text-sm text-muted mt-1 line-clamp-2",children:h.description}),v.jsxs("div",{className:"flex items-center gap-4 mt-2 text-xs text-muted",children:[v.jsxs("span",{children:[h.nodes.length," node",h.nodes.length!==1?"s":""]}),v.jsxs("span",{children:[h.edges.length," connection",h.edges.length!==1?"s":""]}),v.jsxs("span",{children:["Updated ",d(h.updatedAt)]})]})]}),v.jsx("button",{type:"button",onClick:p=>u(h.id,p),disabled:o===h.id,className:"ml-4 p-2 text-muted hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-md transition-colors disabled:opacity-50","aria-label":"Delete diagram",children:o===h.id?v.jsxs("svg",{className:"animate-spin h-5 w-5",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[v.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),v.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})},h.id))})})]})})}):null},Sfe=()=>{const[e,t]=O.useState([]),n=O.useCallback((u,d="info",h)=>{const g={id:`toast-${Date.now()}-${Math.random()}`,message:u,type:d,duration:h};t(y=>[...y,g])},[]),r=O.useCallback(u=>{t(d=>d.filter(h=>h.id!==u))},[]),i=O.useCallback((u,d)=>{n(u,"success",d)},[n]),s=O.useCallback((u,d)=>{n(u,"error",d)},[n]),o=O.useCallback((u,d)=>{n(u,"warning",d)},[n]),l=O.useCallback((u,d)=>{n(u,"info",d)},[n]);return{toasts:e,showToast:n,removeToast:r,success:i,error:s,warning:o,info:l}},Cfe=({toast:e,onClose:t})=>{O.useEffect(()=>{const i=setTimeout(()=>{t(e.id)},e.duration||5e3);return()=>clearTimeout(i)},[e.id,e.duration,t]);const n=()=>{switch(e.type){case"success":return"bg-green-500 text-white";case"error":return"bg-red-500 text-white";case"warning":return"bg-yellow-500 text-white";case"info":return"bg-blue-500 text-white";default:return"bg-gray-500 text-white"}},r=()=>{switch(e.type){case"success":return v.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})});case"error":return v.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})});case"warning":return v.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})});case"info":return v.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}};return v.jsxs(ln.div,{initial:{opacity:0,y:-50,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.95},className:`${n()} rounded-lg shadow-lg p-4 flex items-center gap-3 min-w-[300px] max-w-md`,children:[v.jsx("div",{className:"flex-shrink-0",children:r()}),v.jsx("div",{className:"flex-1 text-sm font-medium",children:e.message}),v.jsx("button",{type:"button",onClick:()=>t(e.id),className:"flex-shrink-0 hover:bg-white/20 rounded p-1 transition-colors","aria-label":"Close notification",title:"Close",children:v.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},Efe=({toasts:e,onClose:t})=>v.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-3 pointer-events-none",children:v.jsx(Gp,{children:e.map(n=>v.jsx("div",{className:"pointer-events-auto",children:v.jsx(Cfe,{toast:n,onClose:t})},n.id))})}),kfe=({isOpen:e,onClose:t,onConfirm:n,title:r,label:i,placeholder:s,defaultValue:o="",type:l="text",required:u=!1})=>{const[d,h]=O.useState(o),p=O.useRef(null);O.useEffect(()=>{e&&(h(o),setTimeout(()=>p.current?.focus(),100))},[e,o]);const g=x=>{x.preventDefault(),!(u&&!d.trim())&&n(d)},y=x=>{x.key==="Escape"&&t()};return e?v.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:v.jsx("div",{className:"bg-surface rounded-lg shadow-xl border border-theme/10 w-full max-w-md mx-4",role:"dialog","aria-labelledby":"dialog-title","aria-modal":"true",children:v.jsxs("form",{onSubmit:g,children:[v.jsx("div",{className:"px-6 py-4 border-b border-theme/10",children:v.jsx("h2",{id:"dialog-title",className:"text-lg font-semibold text-theme",children:r})}),v.jsxs("div",{className:"px-6 py-4",children:[v.jsxs("label",{htmlFor:"dialog-input",className:"block text-sm font-medium text-theme mb-2",children:[i,u&&v.jsx("span",{className:"text-red-500 ml-1",children:"*"})]}),l==="textarea"?v.jsx("textarea",{ref:p,id:"dialog-input",value:d,onChange:x=>h(x.target.value),onKeyDown:y,placeholder:s,className:"w-full px-3 py-2 border border-theme/20 rounded-md focus:outline-none focus:ring-2 focus:ring-accent/50 bg-theme text-theme resize-none",rows:4,required:u}):v.jsx("input",{ref:p,id:"dialog-input",type:"text",value:d,onChange:x=>h(x.target.value),onKeyDown:y,placeholder:s,className:"w-full px-3 py-2 border border-theme/20 rounded-md focus:outline-none focus:ring-2 focus:ring-accent/50 bg-theme text-theme",required:u})]}),v.jsxs("div",{className:"px-6 py-4 border-t border-theme/10 flex justify-end gap-3",children:[v.jsx("button",{type:"button",onClick:t,className:"px-4 py-2 text-sm font-medium text-muted hover:text-theme hover:bg-[var(--bg-hover)] rounded-md transition-colors",children:"Cancel"}),v.jsx("button",{type:"submit",disabled:u&&!d.trim(),className:"px-4 py-2 text-sm font-medium bg-accent text-white rounded-md hover:brightness-90 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Confirm"})]})]})})}):null},Tfe=Pe.memo(e=>{const t=e.data;return v.jsx(HV,{id:e.id,data:t,onCopy:e.onCopy,isInGroup:e.isInGroup})}),Nfe=(e,t)=>n=>{const r=t.find(i=>i.id===n.id)?.parentId!==void 0;return v.jsx(Tfe,{...n,onCopy:e,isInGroup:r})},Afe=()=>{ya();const e=dd(),n=jF()?.id,{screenToFlowPosition:r}=ld(),{user:i,isAuthenticated:s,login:o,signup:l,googleLogin:u,logout:d}=Up(),h=Sfe(),[p,g]=O.useState(!1),[y,x]=O.useState(null),w=new URLSearchParams(globalThis.location.hash.split("?")[1]).get("diagramId"),[E,N]=O.useState(null),[k,T]=O.useState(!0),[A,_]=O.useState(null),[R,D]=O.useState(!1),[B,$]=O.useState(!1),[z,V]=O.useState([]),[Y,I]=O.useState(!1),[F,L]=O.useState(null),[q,W]=O.useState(!1);O.useEffect(()=>{if(!n){T(!1),_("No problem ID provided");return}if(n==="free"){N({id:"free",title:"Design Studio",description:"Create your own system design from scratch",difficulty:"Medium",category:"Custom",estimated_time:"Unlimited",requirements:[],constraints:[],hints:[],tags:["custom","free-design"]}),T(!1);return}if(n.startsWith("custom-")){const ne=localStorage.getItem(`custom-problem-${n}`);if(ne){N(JSON.parse(ne)),T(!1);return}}(async()=>{try{T(!0),_(null);const fe=await fetch(`https://diagrammatic-api.vercel.app/api/v1/problem/${n}`);if(!fe.ok)throw new Error(`Failed to fetch problem: ${fe.status} ${fe.statusText}`);const ye=await fe.json();N(ye)}catch(ne){_(ne instanceof Error?ne.message:"An error occurred while fetching the problem"),console.error("Error fetching problem:",ne)}finally{T(!1)}})()},[n]);const J=()=>e("/"),P=(()=>{if(!E)return"";const ae=E.difficulty;return ae==="Easy"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":ae==="Medium"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"})(),{state:G,setState:oe,undo:ce,redo:H,canUndo:X,canRedo:Q}=ete({nodes:[],edges:[]}),[ie,te,ge]=Cae(G.nodes),[xe,Me,Ae]=Eae(G.edges),{getNodes:Te,fitView:we}=ld(),[Se,Je]=O.useState(!1),[ke,Pt]=O.useState(!1);O.useEffect(()=>{if(!w||!s)return;(async()=>{try{const ne=await sr.getDiagram(w),fe=ne.nodes,ye=ne.edges;te(fe),Me(ye),L(ne.id),oe({nodes:fe,edges:ye})}catch(ne){console.error("Failed to load diagram:",ne),h.error("Failed to load diagram. It may have been deleted or you don't have access to it.")}})()},[w,s]),O.useEffect(()=>{const ae=setTimeout(()=>{oe({nodes:ie,edges:xe})},300);return()=>clearTimeout(ae)},[ie,xe,oe]),O.useEffect(()=>{te(G.nodes),Me(G.edges)},[G,te,Me]),O.useEffect(()=>{const ae=ne=>{(ne.ctrlKey||ne.metaKey)&&ne.key==="z"&&!ne.shiftKey&&(ne.preventDefault(),ce()),((ne.ctrlKey||ne.metaKey)&&ne.shiftKey&&ne.key==="z"||ne.ctrlKey&&ne.key==="y")&&(ne.preventDefault(),H())};return globalThis.addEventListener("keydown",ae),()=>globalThis.removeEventListener("keydown",ae)},[ce,H]),O.useEffect(()=>{const ae=ne=>{Se&&(ne.target.closest(".relative")||Je(!1))};if(Se)return document.addEventListener("click",ae),()=>document.removeEventListener("click",ae)},[Se]),O.useEffect(()=>{const ae=ne=>{ke&&(ne.target.closest(".relative")||Pt(!1))};if(ke)return document.addEventListener("click",ae),()=>document.removeEventListener("click",ae)},[ke]);const bn=ae=>{const ne={...ae,type:"customEdge",data:{label:"",hasLabel:!1}};Me(fe=>Bz(ne,fe))},[jr,Wt]=Pe.useState(null),[Bt,ut]=O.useState(!1),dr=async()=>{if(Bt)return;ut(!0),Wt(null);const ae={components:ie.map(ne=>{const fe=ne.data??{},ye=fe.type;let ve;typeof ye=="string"?ve=ye:typeof ne.type=="string"?ve=ne.type:ve="microservice";const Ce=fe.label,Oe=typeof Ce=="string"?Ce:String(ne.id),He=fe&&typeof fe=="object"?{...fe}:{},{label:Dt,icon:Yn,subtitle:hr,...bt}=He;return{id:ne.id,type:ve,label:Oe,position:{x:ne.position?.x??0,y:ne.position?.y??0},properties:{...bt,nodeData:{label:Oe,icon:fe.icon,subtitle:fe.subtitle}}}}),connections:xe.map(ne=>{const fe=ne.data??{},ye=fe.type,ve=typeof ye=="string"?ye:"api-call",Ce=fe.label,Oe=typeof Ce=="string"?Ce:void 0;return{id:ne.id??`${ne.source}-${ne.target}`,source:ne.source,target:ne.target,type:ve,label:Oe,properties:fe}}),explanation:"",keyPoints:[]};try{console.log("Running AI assessment with solution:",ae);const ne=await pfe(ae,E);Wt(ne),Gn("details")}catch(ne){console.error("Assessment failed:",ne),Wt({isValid:!1,score:0,feedback:[{type:"error",message:"Assessment failed. Please check your connection and try again.",category:"maintainability"}],suggestions:[],missingComponents:[],architectureStrengths:[],improvements:[]})}finally{ut(!1)}},On=O.useRef(null),xn=ae=>{ae.preventDefault(),ae.dataTransfer&&(ae.dataTransfer.dropEffect="move")},pt=ae=>{ae.preventDefault();const ne=ae.dataTransfer?.getData("application/reactflow")||ae.dataTransfer?.getData("text/plain");let fe=ne;try{ne&&(fe=JSON.parse(ne).type||ne)}catch{}const ye=r({x:ae.clientX,y:ae.clientY}),ve=`${fe}-${Date.now()}`,Ce=iu.find(Dt=>Dt.id===fe),Oe=Ce?.group==="Grouping",He={id:ve,position:ye,type:Oe?"group":"custom",style:Oe?{width:400,height:300,zIndex:-1}:void 0,data:{label:Ce?.label??fe,componentId:Ce?.id,icon:Ce?.icon,subtitle:Ce?.description,backgroundColor:Oe?"rgba(100, 100, 255, 0.05)":void 0,borderColor:Oe?"rgba(100, 100, 255, 0.3)":void 0}};te(Dt=>[...Dt,He])},It=(ae,ne)=>{if(ne.parentId)return;const fe=ie.filter(ve=>ve.type==="group");let ye;for(const ve of fe){if(ve.id===ne.id)continue;const Ce=ve.position.x,Oe=ve.position.y,He=ve.style?.width||400,Dt=ve.style?.height||300,Yn=ne.position.x,hr=ne.position.y,bt=10;if(Yn>Ce+bt&&Yn<Ce+He-bt&&hr>Oe+bt&&hr<Oe+Dt-bt){ye=ve.id;break}}ye&&te(ve=>ve.map(Ce=>{if(Ce.id===ne.id){const Oe=ve.find(Dt=>Dt.id===ye),He=Oe?{x:ne.position.x-Oe.position.x,y:ne.position.y-Oe.position.y}:ne.position;return{...Ce,position:He,parentId:ye,extent:"parent"}}return Ce}))},zt=O.useCallback(()=>{const ae=as.current;ae&&te(ne=>ne.map(fe=>{if(fe.id===ae&&fe.parentId){const ye=ne.find(Oe=>Oe.id===fe.parentId);let ve=fe.position.x,Ce=fe.position.y;return ye&&(ve+=ye.position.x,Ce+=ye.position.y),{...fe,position:{x:ve,y:Ce},parentId:void 0,extent:void 0}}return fe}))},[te]),[qe,Wr]=O.useState(null),[Xr,en]=O.useState({}),[tn,jn]=O.useState({}),[is,Gn]=O.useState("details"),[Ql,ss]=O.useState(!1),as=O.useRef(null);Pe.useEffect(()=>{as.current=qe},[qe]);const ls=O.useRef(void 0);ls.current=ae=>{const fe=ae.detail.id;te(ye=>ye.filter(ve=>ve.id!==fe)),as.current===fe&&(Wr(null),Gn("details"))};const Zr=O.useRef(void 0);Zr.current=ae=>{const fe=ae.detail.id;Wr(ye=>{const ve=ye===fe?null:fe;return Gn(ve?"inspector":"details"),ve})};function Jl(ae,ne,fe,ye){return ae.map(ve=>ve.id===ne?{...ve,data:{...ve.data,label:fe,hasLabel:ye},label:fe}:ve)}const co=Pe.useRef(void 0);co.current=ae=>{const ne=ae,{id:fe,label:ye,hasLabel:ve}=ne.detail;Me(Ce=>Jl(Ce,fe,ye,ve))},Pe.useEffect(()=>{const ae=ne=>co.current?.(ne);return globalThis.addEventListener("diagram:edge-label-change",ae),()=>globalThis.removeEventListener("diagram:edge-label-change",ae)},[]),Pe.useEffect(()=>{const ae=ye=>ls.current?.(ye),ne=ye=>Zr.current?.(ye),fe=ye=>{const ve=ye;te(Ce=>Ce.map(Oe=>{if(Oe.id===ve.detail.id&&Oe.parentId){const He=Ce.find(hr=>hr.id===Oe.parentId);let Dt=Oe.position.x,Yn=Oe.position.y;return He&&(Dt+=He.position.x,Yn+=He.position.y),{...Oe,position:{x:Dt,y:Yn},parentId:void 0,extent:void 0}}return Oe}))};return globalThis.addEventListener("diagram:node-delete",ae),globalThis.addEventListener("diagram:node-toggle",ne),globalThis.addEventListener("diagram:node-detach",fe),()=>{globalThis.removeEventListener("diagram:node-delete",ae),globalThis.removeEventListener("diagram:node-toggle",ne),globalThis.removeEventListener("diagram:node-detach",fe)}},[te]),Pe.useEffect(()=>{if(!qe)return;const ae=ie.find(ne=>ne.id===qe);en(ae?.data??{})},[qe,ie]);const Qr=(ae,ne)=>{en(fe=>({...fe,[ae]:ne})),qe&&te(fe=>fe.map(ye=>ye.id===qe?{...ye,data:{...ye.data,[ae]:ne}}:ye))},uo=(ae,ne)=>Qr(ae,ne),fo=(ae,ne)=>Qr(ae,ne),ho=(ae,ne)=>Qr(ae,ne),ec=(ae,ne)=>Qr(ae,ne),fr=()=>{if(!qe)return;const ae={id:`custom-${Date.now()}-${Math.random().toString(36).substring(2,11)}`,key:`customProperty${(tn[qe]?.length||0)+1}`,label:`Custom Property ${(tn[qe]?.length||0)+1}`,type:"text",value:""};jn(ne=>{const fe={...ne,[qe]:[...ne[qe]||[],ae]};return te(ye=>ye.map(ve=>ve.id===qe?{...ve,data:{...ve.data,_customProperties:fe[qe]}}:ve)),fe})},qt=(ae,ne)=>{qe&&jn(fe=>{const ve=(fe[qe]||[]).map(Ce=>Ce.id===ae?{...Ce,...ne}:Ce);return te(Ce=>Ce.map(Oe=>Oe.id===qe?{...Oe,data:{...Oe.data,_customProperties:ve}}:Oe)),{...fe,[qe]:ve}})},nn=ae=>{qe&&jn(ne=>{const ye=(ne[qe]||[]).filter(ve=>ve.id!==ae);return te(ve=>ve.map(Ce=>Ce.id===qe?{...Ce,data:{...Ce.data,_customProperties:ye}}:Ce)),{...ne,[qe]:ye}})};Pe.useEffect(()=>{if(!qe)return;const ae=ie.find(ne=>ne.id===qe);ae?.data?._customProperties&&jn(ne=>({...ne,[qe]:ae.data._customProperties}))},[qe,ie]);const Jr=ae=>{const ne=`${qe}-${ae.key}`,fe=Xr[ae.key];let ye;typeof fe=="number"?ye=fe:typeof ae.default=="number"?ye=ae.default:ye=void 0;let ve;typeof fe=="string"?ve=fe:ae.default===null||ae.default===void 0?ve="":ve=String(ae.default);let Ce;typeof fe=="string"?Ce=fe:ae.default===null||ae.default===void 0?Ce=void 0:Ce=String(ae.default);const Oe=!!fe;return v.jsxs("div",{className:"flex flex-col px-1",children:[ae.type==="boolean"&&v.jsx(H6,{id:ne,checked:Oe,onChange:He=>uo(ae.key,He),label:ae.label}),ae.type==="number"&&v.jsx(F6,{id:ne,label:ae.label,value:ye,onChange:He=>fo(ae.key,He)}),ae.type==="text"&&v.jsx(Ch,{id:ne,label:ae.label,value:ve,placeholder:ae.placeholder,onChange:He=>ho(ae.key,He)}),ae.type==="textarea"&&v.jsx(Tp,{id:ne,label:ae.label,value:ve,placeholder:ae.placeholder,onChange:He=>ho(ae.key,He)}),ae.type==="select"&&v.jsx(U6,{id:ne,label:ae.label,value:Ce,options:ae.options||[],onChange:He=>ec(ae.key,He)})]},ae.key)};let ei=null;if(qe){const ae=ie.find(ne=>ne.id===qe);if(ae){const ne=ae.data.componentId?iu.find(fe=>fe.id===ae.data.componentId):iu.find(fe=>fe.label===ae.data.label);ne?.properties?ei=ne.properties.map(fe=>Jr(fe)):ei=v.jsx("div",{className:"text-sm text-muted",children:"No properties defined"})}else ei=v.jsx("div",{className:"text-sm text-muted",children:"Node not found"})}let po=null;if(qe){const ae=tn[qe]||[];ae.length>0?po=ae.map(ne=>v.jsx(xfe,{property:ne,onUpdate:qt,onDelete:nn},ne.id)):po=v.jsx("div",{className:"text-xs text-muted text-center py-3",children:"No custom properties added yet"})}if(k)return v.jsx("div",{className:"min-h-screen bg-theme flex items-center justify-center",children:v.jsxs("div",{className:"text-center",children:[v.jsx("h2",{className:"text-2xl font-bold text-theme mb-4",children:"Loading problem..."}),v.jsx("div",{className:"text-muted",children:"Please wait while we fetch the problem details"})]})});if(A)return v.jsx("div",{className:"min-h-screen bg-theme flex items-center justify-center",children:v.jsxs("div",{className:"text-center",children:[v.jsx("h2",{className:"text-2xl font-bold text-theme mb-4",children:"Error Loading Problem"}),v.jsx("div",{className:"text-muted mb-4",children:A}),v.jsxs("div",{className:"flex gap-3 justify-center",children:[v.jsx("button",{onClick:J,className:"px-4 py-2 bg-accent text-white rounded-md hover:brightness-90",children:"Back to Dashboard"}),v.jsx("button",{onClick:()=>globalThis.location.reload(),className:"px-4 py-2 bg-surface border border-theme text-theme rounded-md hover:bg-[var(--bg-hover)]",children:"Retry"})]})]})});if(!E)return v.jsx("div",{className:"min-h-screen bg-theme flex items-center justify-center",children:v.jsxs("div",{className:"text-center",children:[v.jsx("h2",{className:"text-2xl font-bold text-theme mb-4",children:"Problem not found"}),v.jsx("div",{className:"text-muted mb-4",children:"The requested problem could not be found."}),v.jsx("button",{onClick:J,className:"px-4 py-2 bg-accent text-white rounded-md hover:brightness-90",children:"Back to Dashboard"})]})});function tc(ae){const ne=iu.find(He=>He.id===ae),fe=On.current?.getBoundingClientRect();if(!fe)return;const ye=r({x:fe.left+fe.width/2,y:fe.top+fe.height/2}),ve=`${ae}-${Date.now()}`,Ce=ne?.group==="Grouping",Oe={id:ve,position:ye,type:Ce?"group":"custom",style:Ce?{width:400,height:300,zIndex:-1}:void 0,data:{label:ne?.label??ae,componentId:ne?.id,icon:ne?.icon,subtitle:ne?.description,backgroundColor:Ce?"rgba(100, 100, 255, 0.05)":void 0,borderColor:Ce?"rgba(100, 100, 255, 0.3)":void 0}};te(He=>[...He,Oe])}const ka=(ae,ne)=>{const fe=ie.find(Ce=>Ce.id===ae);if(!fe)return;const ye=`${ae}-copy-${Date.now()}`,ve={...fe,id:ye,position:{x:fe.position.x+200,y:fe.position.y+100},data:{...ne},selected:!1};te(Ce=>[...Ce,ve])},Ci=()=>{ie.length===0&&xe.length===0||ss(!0)},mo=()=>{te([]),Me([]),Wr(null),Wt(null),ss(!1)},ti=()=>{ss(!1)},Kn=(ae="png")=>{const ne=Tz(Te()),fe=wm(ne,1024,768,.5,2,.2),ye=document.querySelector(".react-flow__viewport");if(!ye){console.error("Viewport element not found");return}let ve,Ce;ae==="svg"?(ve=qq,Ce="svg"):ae==="jpeg"?(ve=$le,Ce="jpg"):(ve=Ule,Ce="png"),ve(ye,{backgroundColor:ae==="png"?"transparent":"#ffffff",width:1024,height:768,style:{width:"1024px",height:"768px",transform:`translate(${fe.x}px, ${fe.y}px) scale(${fe.zoom})`}}).then(Oe=>{const He=document.createElement("a");He.setAttribute("download",`system-design-${Date.now()}.${Ce}`),He.setAttribute("href",Oe),He.click()}).catch(Oe=>{console.error("Error generating image:",Oe)})},ni=async()=>{if(!s){D(!0);return}x({title:"Save Design",label:"Design Title",placeholder:"Enter a title for this diagram",defaultValue:F?"Untitled Diagram":"",required:!0,onConfirm:ae=>{g(!1),setTimeout(()=>{x({title:"Save Design",label:"Description (Optional)",placeholder:"Enter a description for this diagram",type:"textarea",required:!1,onConfirm:ne=>{g(!1),(async()=>{try{if(F)await sr.updateDiagram(F,{title:ae,description:ne||void 0,nodes:ie,edges:xe}),h.success("Diagram updated successfully!");else{const fe=await sr.saveDiagram({title:ae,description:ne||void 0,nodes:ie,edges:xe});L(fe.id),h.success("Diagram saved successfully!")}}catch(fe){console.error("Failed to Save Design:",fe),h.error(fe instanceof Error?fe.message:"Failed to Save Design")}})()}}),g(!0)},100)}}),g(!0)},Lr=async()=>{if(!s){D(!0);return}I(!0);try{const ae=await sr.getUserDiagrams();V(ae),$(!0)}catch(ae){console.error("Failed to load diagrams:",ae),h.error("Failed to load diagrams")}finally{I(!1)}},Et=ae=>{te(ae.nodes),Me(ae.edges),L(ae.id)},Ta=async ae=>{try{await sr.deleteDiagram(ae),V(ne=>ne.filter(fe=>fe.id!==ae)),F===ae&&L(null)}catch(ne){throw console.error("Failed to delete diagram:",ne),ne}},go=(ae="TB")=>{const ne=ie.filter(Ze=>Ze.type==="group"),fe=ie.filter(Ze=>Ze.type!=="group"&&!Ze.parentId),ye=new hh.graphlib.Graph;ye.setDefaultEdgeLabel(()=>({})),ye.setGraph({rankdir:ae,nodesep:150,ranksep:200,marginx:50,marginy:50});const ve=350,Ce=250;for(const Ze of ne)ye.setNode(Ze.id,{width:ve,height:Ce});const Oe=xe.filter(Ze=>ne.some(Xt=>Xt.id===Ze.source)&&ne.some(Xt=>Xt.id===Ze.target));for(const Ze of Oe)ye.setEdge(Ze.source,Ze.target);ne.length>0&&hh.layout(ye);const He=new hh.graphlib.Graph;He.setDefaultEdgeLabel(()=>({})),He.setGraph({rankdir:ae,nodesep:80,ranksep:100});const Dt=200,Yn=80;for(const Ze of fe)He.setNode(Ze.id,{width:Dt,height:Yn});const hr=xe.filter(Ze=>fe.some(Xt=>Xt.id===Ze.source)&&fe.some(Xt=>Xt.id===Ze.target));for(const Ze of hr)He.setEdge(Ze.source,Ze.target);fe.length>0&&hh.layout(He);const bt=ie.map(Ze=>{if(Ze.type==="group"){const Xt=ye.node(Ze.id);if(Xt)return{...Ze,position:{x:Xt.x-ve/2,y:Xt.y-Ce/2}}}else{if(Ze.parentId)return Ze;{const Xt=He.node(Ze.id);if(Xt){const cs=ne.length>0?ve+100:0;return{...Ze,position:{x:Xt.x-Dt/2+cs,y:Xt.y-Yn/2}}}}}return Ze});te(bt),globalThis.requestAnimationFrame(()=>{we({padding:.2,duration:400})})},Pr={custom:Nfe(ka,ie),group:bfe},ri={customEdge:vfe},nc=()=>{if(te(ae=>ae.map(ne=>ne.id===qe?{...ne,data:{...ne.data,...Xr}}:ne)),qe){const ae=ie.find(ne=>ne.id===qe);console.log("Node properties saved:",{id:qe,data:ae?.data,nodeProps:Xr})}},yo=n==="free"?"Design Studio | Diagrammatic":`${E?.title||"System Design Challenge"} | Diagrammatic`,Na=n==="free"?"Create system architecture diagrams from scratch with our free interactive canvas. Design, prototype, and visualize your ideas with 45+ components.":`Solve the ${E?.title||"system design"} challenge. ${E?.description?.substring(0,150)||"Practice system design skills"}...`;return v.jsxs(v.Fragment,{children:[v.jsx(hd,{title:yo,description:Na,keywords:`system design playground, ${E?.title||"free canvas"}, architecture diagram tool, ${E?.category||"design tool"}`,url:`https://satya00089.github.io/diagrammatic/#/playground/${n||"free"}`}),v.jsxs("div",{className:"h-screen flex flex-col bg-theme",children:[v.jsx("div",{className:"bg-surface shadow-sm border-b border-theme px-4 py-1",children:v.jsxs("div",{className:"flex items-center justify-between",children:[v.jsxs("div",{className:"flex items-center space-x-4",children:[v.jsx("button",{onClick:J,className:"px-3 py-2 text-muted hover:text-theme hover:bg-[var(--bg-hover)] rounded-md transition-colors cursor-pointer",children:" Back to Dashboard"}),v.jsxs("div",{className:"flex items-center space-x-3",children:[v.jsx("h1",{className:"text-lg font-semibold text-theme",children:E.title}),v.jsx("span",{className:`px-2 py-1 rounded text-xs ${P}`,children:E.difficulty}),v.jsx("span",{className:"text-sm text-muted",children:E.estimated_time}),v.jsx("span",{className:"text-sm text-muted",children:""}),v.jsx("span",{className:"text-sm text-muted",children:E.category})]})]}),v.jsxs("div",{className:"flex items-center space-x-2",children:[v.jsxs("div",{className:"flex items-center border-r border-theme/10 pr-2 mr-2",children:[v.jsx("button",{type:"button",onClick:ce,disabled:!X,className:"p-2 text-muted hover:text-theme hover:bg-[var(--bg-hover)] rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer",title:"Undo (Ctrl+Z)",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})})}),v.jsx("button",{type:"button",onClick:H,disabled:!Q,className:"p-2 text-muted hover:text-theme hover:bg-[var(--bg-hover)] rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer",title:"Redo (Ctrl+Y or Ctrl+Shift+Z)",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 10h-10a8 8 0 00-8 8v2M21 10l-6 6m6-6l-6-6"})})})]}),v.jsx("button",{type:"button",onClick:Ci,disabled:ie.length===0&&xe.length===0,className:"p-2 text-muted hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer border-r border-theme/10 pr-2 mr-2",title:"Clear Canvas",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),v.jsxs("div",{className:"relative border-r border-theme/10 pr-2 mr-2",children:[v.jsx("button",{type:"button",onClick:()=>Je(!Se),disabled:ie.length===0,className:"p-2 text-muted hover:text-theme hover:bg-[var(--bg-hover)] rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer",title:"Download as Image",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),Se&&v.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-surface shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[120px]",children:[v.jsx("button",{type:"button",onClick:()=>{Kn("png"),Je(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"PNG"}),v.jsx("button",{type:"button",onClick:()=>{Kn("jpeg"),Je(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"JPEG"}),v.jsx("button",{type:"button",onClick:()=>{Kn("svg"),Je(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"SVG"})]})]}),v.jsxs("div",{className:"relative border-r border-theme/10 pr-2 mr-2",children:[v.jsx("button",{type:"button",onClick:()=>Pt(!ke),disabled:ie.length===0,className:"p-2 text-muted hover:text-theme hover:bg-[var(--bg-hover)] rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer",title:"Auto Layout",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 5a1 1 0 011-1h4a1 1 0 011 1v7a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM14 5a1 1 0 011-1h4a1 1 0 011 1v7a1 1 0 01-1 1h-4a1 1 0 01-1-1V5zM4 16a1 1 0 011-1h4a1 1 0 011 1v3a1 1 0 01-1 1H5a1 1 0 01-1-1v-3zM14 16a1 1 0 011-1h4a1 1 0 011 1v3a1 1 0 01-1 1h-4a1 1 0 01-1-1v-3z"})})}),ke&&v.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-surface shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[160px]",children:[v.jsx("button",{type:"button",onClick:()=>{go("TB"),Pt(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"Vertical Layout"}),v.jsx("button",{type:"button",onClick:()=>{go("LR"),Pt(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"Horizontal Layout"})]})]}),n==="free"&&v.jsxs("div",{className:"flex items-center gap-2 border-r border-theme/10 pr-2 mr-2",children:[v.jsxs("button",{type:"button",onClick:ni,disabled:ie.length===0,className:"px-3 py-2 text-sm font-medium text-theme hover:bg-[var(--bg-hover)] rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed flex items-center gap-2",title:s?"Save Design":"Sign in to Save Designs",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7H5a2 2 0 00-2 2v9a2 2 0 002 2h14a2 2 0 002-2V9a2 2 0 00-2-2h-3m-1 4l-3 3m0 0l-3-3m3 3V4"})}),F?"Update":"Save"]}),v.jsxs("button",{type:"button",onClick:Lr,className:"px-3 py-2 text-sm font-medium text-theme hover:bg-[var(--bg-hover)] rounded-md transition-colors flex items-center gap-2",title:s?"My Designs":"Sign in to view saved designs",children:[v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"My Designs"]})]}),E?.id!=="free"&&v.jsx("button",{type:"button",onClick:dr,disabled:Bt,className:"px-6 py-1 bg-[var(--brand)] text-white font-bold rounded-md hover:brightness-95 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer",title:"Run assessment on current design",children:Bt?"Assessing...":"Run Assessment"}),v.jsx(fd,{}),v.jsx("div",{className:"relative",children:s?v.jsxs(v.Fragment,{children:[v.jsxs("button",{type:"button",onClick:()=>W(!q),className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-theme hover:bg-[var(--bg-hover)] rounded-md transition-colors",children:[i?.picture?v.jsx("img",{src:i.picture,alt:i.name||"User",className:"w-8 h-8 rounded-full object-cover border-2 border-[var(--brand)]"}):v.jsx("div",{className:"w-8 h-8 rounded-full bg-[var(--brand)] text-white flex items-center justify-center font-bold",children:i?.name?.[0]?.toUpperCase()||i?.email?.[0]?.toUpperCase()||"U"}),v.jsx("span",{className:"hidden sm:inline",children:i?.name||i?.email}),v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),q&&v.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-surface shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[180px]",children:[v.jsxs("div",{className:"px-4 py-2 border-b border-theme/10",children:[v.jsx("p",{className:"text-sm font-medium text-theme",children:i?.name||"User"}),v.jsx("p",{className:"text-xs text-muted truncate",children:i?.email})]}),v.jsx("button",{type:"button",onClick:()=>{d(),W(!1),L(null)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:"Sign Out"})]})]}):v.jsx("button",{type:"button",onClick:()=>D(!0),className:"px-4 py-2 text-sm font-medium bg-[var(--brand)] text-white rounded-md hover:brightness-95 transition-all",children:"Sign In"})})]})]})}),v.jsxs("div",{className:"flex-1 flex min-h-0",children:[v.jsx(dfe,{components:iu,onAdd:tc}),v.jsx(ffe,{reactFlowWrapperRef:On,nodes:ie,edges:xe,nodeTypes:Pr,edgeTypes:ri,onNodesChange:ge,onEdgesChange:Ae,onConnect:bn,onDragOver:xn,onDrop:pt,onNodeDragStop:It}),v.jsx(hfe,{problem:E,activeTab:is,setActiveTab:Gn,inspectedNodeId:qe,setInspectedNodeId:Wr,propertyElements:ei,customPropertyElements:po,onAddCustomProperty:fr,handleSave:nc,assessmentResult:jr,onDetachFromGroup:zt,isNodeInGroup:qe?ie.find(ae=>ae.id===qe)?.parentId!==void 0:!1})]}),Ql&&v.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:v.jsxs("div",{className:"bg-surface rounded-2xl shadow-2xl p-6 max-w-md w-full mx-4 border border-theme/10",children:[v.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[v.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 dark:bg-red-900/20 flex items-center justify-center",children:v.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:v.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),v.jsxs("div",{children:[v.jsx("h3",{className:"text-lg font-bold text-theme",children:"Clear Canvas?"}),v.jsx("p",{className:"text-sm text-muted",children:"This action cannot be undone"})]})]}),v.jsx("p",{className:"text-muted mb-6",children:"Are you sure you want to clear all components and connections from the canvas? You will lose all your current work."}),v.jsxs("div",{className:"flex space-x-3",children:[v.jsx("button",{type:"button",onClick:ti,className:"flex-1 px-4 py-2 bg-theme/5 hover:bg-theme/10 text-theme font-medium rounded-lg transition-colors cursor-pointer",children:"Cancel"}),v.jsx("button",{type:"button",onClick:mo,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-bold rounded-lg transition-colors cursor-pointer",children:"Clear All"})]})]})}),v.jsx(Xp,{isOpen:R,onClose:()=>D(!1),onLogin:async(ae,ne)=>{await o({email:ae,password:ne})},onSignup:async(ae,ne,fe)=>{await l({email:ae,password:ne,name:fe})},onGoogleLogin:u}),v.jsx(wfe,{isOpen:B,onClose:()=>$(!1),diagrams:z,onLoad:Et,onDelete:Ta,isLoading:Y}),v.jsx(Efe,{toasts:h.toasts,onClose:h.removeToast}),y&&v.jsx(kfe,{isOpen:p,onClose:()=>g(!1),title:y.title,label:y.label,placeholder:y.placeholder,defaultValue:y.defaultValue,type:y.type,required:y.required,onConfirm:y.onConfirm})]})]})},Mfe=()=>v.jsx(Nq,{children:v.jsx(Afe,{})}),_fe=()=>(ya(),v.jsx(mU,{children:v.jsx(JF,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:v.jsxs(XF,{children:[v.jsx(Bo,{path:"/",element:v.jsx(e_,{})}),v.jsx(Bo,{path:"/problems",element:v.jsx(LK,{})}),v.jsx(Bo,{path:"/create-problem",element:v.jsx(Qee,{})}),v.jsx(Bo,{path:"/diagrams",element:v.jsx(Jee,{})}),v.jsx(Bo,{path:"/playground/:id",element:v.jsx(Mfe,{})}),v.jsx(Bo,{path:"*",element:v.jsx(e_,{})})]})})}));nF.createRoot(document.getElementById("root")).render(v.jsx(O.StrictMode,{children:v.jsx(_fe,{})}));
