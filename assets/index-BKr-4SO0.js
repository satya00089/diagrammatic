function FF(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var yh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Bd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var T0={exports:{}},xu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var rM;function UF(){if(rM)return xu;rM=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,s){var o=null;if(s!==void 0&&(o=""+s),i.key!==void 0&&(o=""+i.key),"key"in i){s={};for(var l in i)l!=="key"&&(s[l]=i[l])}else s=i;return i=s.ref,{$$typeof:e,type:r,key:o,ref:i!==void 0?i:null,props:s}}return xu.Fragment=t,xu.jsx=n,xu.jsxs=n,xu}var iM;function $F(){return iM||(iM=1,T0.exports=UF()),T0.exports}var y=$F(),N0={exports:{}},Xe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sM;function GF(){if(sM)return Xe;sM=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;function m(B){return B===null||typeof B!="object"?null:(B=p&&B[p]||B["@@iterator"],typeof B=="function"?B:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},x=Object.assign,S={};function w(B,$,oe){this.props=B,this.context=$,this.refs=S,this.updater=oe||b}w.prototype.isReactComponent={},w.prototype.setState=function(B,$){if(typeof B!="object"&&typeof B!="function"&&B!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,B,$,"setState")},w.prototype.forceUpdate=function(B){this.updater.enqueueForceUpdate(this,B,"forceUpdate")};function C(){}C.prototype=w.prototype;function N(B,$,oe){this.props=B,this.context=$,this.refs=S,this.updater=oe||b}var k=N.prototype=new C;k.constructor=N,x(k,w.prototype),k.isPureReactComponent=!0;var T=Array.isArray,A={H:null,A:null,T:null,S:null,V:null},M=Object.prototype.hasOwnProperty;function j(B,$,oe,ae,U,Z){return oe=Z.ref,{$$typeof:e,type:B,key:$,ref:oe!==void 0?oe:null,props:Z}}function R(B,$){return j(B.type,$,void 0,void 0,void 0,B.props)}function L(B){return typeof B=="object"&&B!==null&&B.$$typeof===e}function I(B){var $={"=":"=0",":":"=2"};return"$"+B.replace(/[=:]/g,function(oe){return $[oe]})}var H=/\/+/g;function q(B,$){return typeof B=="object"&&B!==null&&B.key!=null?I(""+B.key):$.toString(36)}function W(){}function z(B){switch(B.status){case"fulfilled":return B.value;case"rejected":throw B.reason;default:switch(typeof B.status=="string"?B.then(W,W):(B.status="pending",B.then(function($){B.status==="pending"&&(B.status="fulfilled",B.value=$)},function($){B.status==="pending"&&(B.status="rejected",B.reason=$)})),B.status){case"fulfilled":return B.value;case"rejected":throw B.reason}}throw B}function F(B,$,oe,ae,U){var Z=typeof B;(Z==="undefined"||Z==="boolean")&&(B=null);var ee=!1;if(B===null)ee=!0;else switch(Z){case"bigint":case"string":case"number":ee=!0;break;case"object":switch(B.$$typeof){case e:case t:ee=!0;break;case h:return ee=B._init,F(ee(B._payload),$,oe,ae,U)}}if(ee)return U=U(B),ee=ae===""?"."+q(B,0):ae,T(U)?(oe="",ee!=null&&(oe=ee.replace(H,"$&/")+"/"),F(U,$,oe,"",function(ve){return ve})):U!=null&&(L(U)&&(U=R(U,oe+(U.key==null||B&&B.key===U.key?"":(""+U.key).replace(H,"$&/")+"/")+ee)),$.push(U)),1;ee=0;var de=ae===""?".":ae+":";if(T(B))for(var ce=0;ce<B.length;ce++)ae=B[ce],Z=de+q(ae,ce),ee+=F(ae,$,oe,Z,U);else if(ce=m(B),typeof ce=="function")for(B=ce.call(B),ce=0;!(ae=B.next()).done;)ae=ae.value,Z=de+q(ae,ce++),ee+=F(ae,$,oe,Z,U);else if(Z==="object"){if(typeof B.then=="function")return F(z(B),$,oe,ae,U);throw $=String(B),Error("Objects are not valid as a React child (found: "+($==="[object Object]"?"object with keys {"+Object.keys(B).join(", ")+"}":$)+"). If you meant to render a collection of children, use an array instead.")}return ee}function O(B,$,oe){if(B==null)return B;var ae=[],U=0;return F(B,ae,"","",function(Z){return $.call(oe,Z,U++)}),ae}function V(B){if(B._status===-1){var $=B._result;$=$(),$.then(function(oe){(B._status===0||B._status===-1)&&(B._status=1,B._result=oe)},function(oe){(B._status===0||B._status===-1)&&(B._status=2,B._result=oe)}),B._status===-1&&(B._status=0,B._result=$)}if(B._status===1)return B._result.default;throw B._result}var Y=typeof reportError=="function"?reportError:function(B){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var $=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof B=="object"&&B!==null&&typeof B.message=="string"?String(B.message):String(B),error:B});if(!window.dispatchEvent($))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",B);return}console.error(B)};function te(){}return Xe.Children={map:O,forEach:function(B,$,oe){O(B,function(){$.apply(this,arguments)},oe)},count:function(B){var $=0;return O(B,function(){$++}),$},toArray:function(B){return O(B,function($){return $})||[]},only:function(B){if(!L(B))throw Error("React.Children.only expected to receive a single React element child.");return B}},Xe.Component=w,Xe.Fragment=n,Xe.Profiler=i,Xe.PureComponent=N,Xe.StrictMode=r,Xe.Suspense=u,Xe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,Xe.__COMPILER_RUNTIME={__proto__:null,c:function(B){return A.H.useMemoCache(B)}},Xe.cache=function(B){return function(){return B.apply(null,arguments)}},Xe.cloneElement=function(B,$,oe){if(B==null)throw Error("The argument must be a React element, but you passed "+B+".");var ae=x({},B.props),U=B.key,Z=void 0;if($!=null)for(ee in $.ref!==void 0&&(Z=void 0),$.key!==void 0&&(U=""+$.key),$)!M.call($,ee)||ee==="key"||ee==="__self"||ee==="__source"||ee==="ref"&&$.ref===void 0||(ae[ee]=$[ee]);var ee=arguments.length-2;if(ee===1)ae.children=oe;else if(1<ee){for(var de=Array(ee),ce=0;ce<ee;ce++)de[ce]=arguments[ce+2];ae.children=de}return j(B.type,U,void 0,void 0,Z,ae)},Xe.createContext=function(B){return B={$$typeof:o,_currentValue:B,_currentValue2:B,_threadCount:0,Provider:null,Consumer:null},B.Provider=B,B.Consumer={$$typeof:s,_context:B},B},Xe.createElement=function(B,$,oe){var ae,U={},Z=null;if($!=null)for(ae in $.key!==void 0&&(Z=""+$.key),$)M.call($,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&(U[ae]=$[ae]);var ee=arguments.length-2;if(ee===1)U.children=oe;else if(1<ee){for(var de=Array(ee),ce=0;ce<ee;ce++)de[ce]=arguments[ce+2];U.children=de}if(B&&B.defaultProps)for(ae in ee=B.defaultProps,ee)U[ae]===void 0&&(U[ae]=ee[ae]);return j(B,Z,void 0,void 0,null,U)},Xe.createRef=function(){return{current:null}},Xe.forwardRef=function(B){return{$$typeof:l,render:B}},Xe.isValidElement=L,Xe.lazy=function(B){return{$$typeof:h,_payload:{_status:-1,_result:B},_init:V}},Xe.memo=function(B,$){return{$$typeof:d,type:B,compare:$===void 0?null:$}},Xe.startTransition=function(B){var $=A.T,oe={};A.T=oe;try{var ae=B(),U=A.S;U!==null&&U(oe,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(te,Y)}catch(Z){Y(Z)}finally{A.T=$}},Xe.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},Xe.use=function(B){return A.H.use(B)},Xe.useActionState=function(B,$,oe){return A.H.useActionState(B,$,oe)},Xe.useCallback=function(B,$){return A.H.useCallback(B,$)},Xe.useContext=function(B){return A.H.useContext(B)},Xe.useDebugValue=function(){},Xe.useDeferredValue=function(B,$){return A.H.useDeferredValue(B,$)},Xe.useEffect=function(B,$,oe){var ae=A.H;if(typeof oe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ae.useEffect(B,$)},Xe.useId=function(){return A.H.useId()},Xe.useImperativeHandle=function(B,$,oe){return A.H.useImperativeHandle(B,$,oe)},Xe.useInsertionEffect=function(B,$){return A.H.useInsertionEffect(B,$)},Xe.useLayoutEffect=function(B,$){return A.H.useLayoutEffect(B,$)},Xe.useMemo=function(B,$){return A.H.useMemo(B,$)},Xe.useOptimistic=function(B,$){return A.H.useOptimistic(B,$)},Xe.useReducer=function(B,$,oe){return A.H.useReducer(B,$,oe)},Xe.useRef=function(B){return A.H.useRef(B)},Xe.useState=function(B){return A.H.useState(B)},Xe.useSyncExternalStore=function(B,$,oe){return A.H.useSyncExternalStore(B,$,oe)},Xe.useTransition=function(){return A.H.useTransition()},Xe.version="19.1.1",Xe}var oM;function zd(){return oM||(oM=1,N0.exports=GF()),N0.exports}var D=zd();const ke=Bd(D),WF=FF({__proto__:null,default:ke},[D]);var A0={exports:{}},wu={},M0={exports:{}},_0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aM;function KF(){return aM||(aM=1,(function(e){function t(O,V){var Y=O.length;O.push(V);e:for(;0<Y;){var te=Y-1>>>1,B=O[te];if(0<i(B,V))O[te]=V,O[Y]=B,Y=te;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var V=O[0],Y=O.pop();if(Y!==V){O[0]=Y;e:for(var te=0,B=O.length,$=B>>>1;te<$;){var oe=2*(te+1)-1,ae=O[oe],U=oe+1,Z=O[U];if(0>i(ae,Y))U<B&&0>i(Z,ae)?(O[te]=Z,O[U]=Y,te=U):(O[te]=ae,O[oe]=Y,te=oe);else if(U<B&&0>i(Z,Y))O[te]=Z,O[U]=Y,te=U;else break e}}return V}function i(O,V){var Y=O.sortIndex-V.sortIndex;return Y!==0?Y:O.id-V.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var u=[],d=[],h=1,p=null,m=3,b=!1,x=!1,S=!1,w=!1,C=typeof setTimeout=="function"?setTimeout:null,N=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function T(O){for(var V=n(d);V!==null;){if(V.callback===null)r(d);else if(V.startTime<=O)r(d),V.sortIndex=V.expirationTime,t(u,V);else break;V=n(d)}}function A(O){if(S=!1,T(O),!x)if(n(u)!==null)x=!0,M||(M=!0,q());else{var V=n(d);V!==null&&F(A,V.startTime-O)}}var M=!1,j=-1,R=5,L=-1;function I(){return w?!0:!(e.unstable_now()-L<R)}function H(){if(w=!1,M){var O=e.unstable_now();L=O;var V=!0;try{e:{x=!1,S&&(S=!1,N(j),j=-1),b=!0;var Y=m;try{t:{for(T(O),p=n(u);p!==null&&!(p.expirationTime>O&&I());){var te=p.callback;if(typeof te=="function"){p.callback=null,m=p.priorityLevel;var B=te(p.expirationTime<=O);if(O=e.unstable_now(),typeof B=="function"){p.callback=B,T(O),V=!0;break t}p===n(u)&&r(u),T(O)}else r(u);p=n(u)}if(p!==null)V=!0;else{var $=n(d);$!==null&&F(A,$.startTime-O),V=!1}}break e}finally{p=null,m=Y,b=!1}V=void 0}}finally{V?q():M=!1}}}var q;if(typeof k=="function")q=function(){k(H)};else if(typeof MessageChannel<"u"){var W=new MessageChannel,z=W.port2;W.port1.onmessage=H,q=function(){z.postMessage(null)}}else q=function(){C(H,0)};function F(O,V){j=C(function(){O(e.unstable_now())},V)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return m},e.unstable_next=function(O){switch(m){case 1:case 2:case 3:var V=3;break;default:V=m}var Y=m;m=V;try{return O()}finally{m=Y}},e.unstable_requestPaint=function(){w=!0},e.unstable_runWithPriority=function(O,V){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var Y=m;m=O;try{return V()}finally{m=Y}},e.unstable_scheduleCallback=function(O,V,Y){var te=e.unstable_now();switch(typeof Y=="object"&&Y!==null?(Y=Y.delay,Y=typeof Y=="number"&&0<Y?te+Y:te):Y=te,O){case 1:var B=-1;break;case 2:B=250;break;case 5:B=1073741823;break;case 4:B=1e4;break;default:B=5e3}return B=Y+B,O={id:h++,callback:V,priorityLevel:O,startTime:Y,expirationTime:B,sortIndex:-1},Y>te?(O.sortIndex=Y,t(d,O),n(u)===null&&O===n(d)&&(S?(N(j),j=-1):S=!0,F(A,Y-te))):(O.sortIndex=B,t(u,O),x||b||(x=!0,M||(M=!0,q()))),O},e.unstable_shouldYield=I,e.unstable_wrapCallback=function(O){var V=m;return function(){var Y=m;m=V;try{return O.apply(this,arguments)}finally{m=Y}}}})(_0)),_0}var lM;function YF(){return lM||(lM=1,M0.exports=KF()),M0.exports}var D0={exports:{}},er={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var cM;function XF(){if(cM)return er;cM=1;var e=zd();function t(u){var d="https://react.dev/errors/"+u;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)d+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(u,d,h){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:u,containerInfo:d,implementation:h}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(u,d){if(u==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return er.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,er.createPortal=function(u,d){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return s(u,d,null,h)},er.flushSync=function(u){var d=o.T,h=r.p;try{if(o.T=null,r.p=2,u)return u()}finally{o.T=d,r.p=h,r.d.f()}},er.preconnect=function(u,d){typeof u=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(u,d))},er.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},er.preinit=function(u,d){if(typeof u=="string"&&d&&typeof d.as=="string"){var h=d.as,p=l(h,d.crossOrigin),m=typeof d.integrity=="string"?d.integrity:void 0,b=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;h==="style"?r.d.S(u,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:p,integrity:m,fetchPriority:b}):h==="script"&&r.d.X(u,{crossOrigin:p,integrity:m,fetchPriority:b,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},er.preinitModule=function(u,d){if(typeof u=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var h=l(d.as,d.crossOrigin);r.d.M(u,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(u)},er.preload=function(u,d){if(typeof u=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var h=d.as,p=l(h,d.crossOrigin);r.d.L(u,h,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},er.preloadModule=function(u,d){if(typeof u=="string")if(d){var h=l(d.as,d.crossOrigin);r.d.m(u,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(u)},er.requestFormReset=function(u){r.d.r(u)},er.unstable_batchedUpdates=function(u,d){return u(d)},er.useFormState=function(u,d,h){return o.H.useFormState(u,d,h)},er.useFormStatus=function(){return o.H.useHostTransitionStatus()},er.version="19.1.1",er}var uM;function nP(){if(uM)return D0.exports;uM=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),D0.exports=XF(),D0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dM;function ZF(){if(dM)return wu;dM=1;var e=YF(),t=zd(),n=nP();function r(a){var c="https://react.dev/errors/"+a;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function s(a){var c=a,f=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,(c.flags&4098)!==0&&(f=c.return),a=c.return;while(a)}return c.tag===3?f:null}function o(a){if(a.tag===13){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function l(a){if(s(a)!==a)throw Error(r(188))}function u(a){var c=a.alternate;if(!c){if(c=s(a),c===null)throw Error(r(188));return c!==a?null:a}for(var f=a,g=c;;){var v=f.return;if(v===null)break;var E=v.alternate;if(E===null){if(g=v.return,g!==null){f=g;continue}break}if(v.child===E.child){for(E=v.child;E;){if(E===f)return l(v),a;if(E===g)return l(v),c;E=E.sibling}throw Error(r(188))}if(f.return!==g.return)f=v,g=E;else{for(var _=!1,P=v.child;P;){if(P===f){_=!0,f=v,g=E;break}if(P===g){_=!0,g=v,f=E;break}P=P.sibling}if(!_){for(P=E.child;P;){if(P===f){_=!0,f=E,g=v;break}if(P===g){_=!0,g=E,f=v;break}P=P.sibling}if(!_)throw Error(r(189))}}if(f.alternate!==g)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?a:c}function d(a){var c=a.tag;if(c===5||c===26||c===27||c===6)return a;for(a=a.child;a!==null;){if(c=d(a),c!==null)return c;a=a.sibling}return null}var h=Object.assign,p=Symbol.for("react.element"),m=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),x=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),N=Symbol.for("react.consumer"),k=Symbol.for("react.context"),T=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),M=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),L=Symbol.for("react.activity"),I=Symbol.for("react.memo_cache_sentinel"),H=Symbol.iterator;function q(a){return a===null||typeof a!="object"?null:(a=H&&a[H]||a["@@iterator"],typeof a=="function"?a:null)}var W=Symbol.for("react.client.reference");function z(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===W?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case x:return"Fragment";case w:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case M:return"SuspenseList";case L:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case b:return"Portal";case k:return(a.displayName||"Context")+".Provider";case N:return(a._context.displayName||"Context")+".Consumer";case T:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case j:return c=a.displayName||null,c!==null?c:z(a.type)||"Memo";case R:c=a._payload,a=a._init;try{return z(a(c))}catch{}}return null}var F=Array.isArray,O=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,V=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,Y={pending:!1,data:null,method:null,action:null},te=[],B=-1;function $(a){return{current:a}}function oe(a){0>B||(a.current=te[B],te[B]=null,B--)}function ae(a,c){B++,te[B]=a.current,a.current=c}var U=$(null),Z=$(null),ee=$(null),de=$(null);function ce(a,c){switch(ae(ee,c),ae(Z,a),ae(U,null),c.nodeType){case 9:case 11:a=(a=c.documentElement)&&(a=a.namespaceURI)?DA(a):0;break;default:if(a=c.tagName,c=c.namespaceURI)c=DA(c),a=RA(c,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}oe(U),ae(U,a)}function ve(){oe(U),oe(Z),oe(ee)}function De(a){a.memoizedState!==null&&ae(de,a);var c=U.current,f=RA(c,a.type);c!==f&&(ae(Z,a),ae(U,f))}function Pe(a){Z.current===a&&(oe(U),oe(Z)),de.current===a&&(oe(de),mu._currentValue=Y)}var Ae=Object.prototype.hasOwnProperty,Ee=e.unstable_scheduleCallback,Se=e.unstable_cancelCallback,Te=e.unstable_shouldYield,ot=e.unstable_requestPaint,Oe=e.unstable_now,Mt=e.unstable_getCurrentPriorityLevel,Wt=e.unstable_ImmediatePriority,Dn=e.unstable_UserBlockingPriority,rn=e.unstable_NormalPriority,_t=e.unstable_LowPriority,mt=e.unstable_IdlePriority,Rn=e.log,sn=e.unstable_setDisableYieldValue,zt=null,ht=null;function qe(a){if(typeof Rn=="function"&&sn(a),ht&&typeof ht.setStrictMode=="function")try{ht.setStrictMode(zt,a)}catch{}}var Ve=Math.clz32?Math.clz32:Kt,Mr=Math.log,Rt=Math.LN2;function Kt(a){return a>>>=0,a===0?32:31-(Mr(a)/Rt|0)|0}var Yt=256,on=4194304;function Xt(a){var c=a&42;if(c!==0)return c;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function kn(a,c,f){var g=a.pendingLanes;if(g===0)return 0;var v=0,E=a.suspendedLanes,_=a.pingedLanes;a=a.warmLanes;var P=g&134217727;return P!==0?(g=P&~E,g!==0?v=Xt(g):(_&=P,_!==0?v=Xt(_):f||(f=P&~a,f!==0&&(v=Xt(f))))):(P=g&~E,P!==0?v=Xt(P):_!==0?v=Xt(_):f||(f=g&~a,f!==0&&(v=Xt(f)))),v===0?0:c!==0&&c!==v&&(c&E)===0&&(E=v&-v,f=c&-c,E>=f||E===32&&(f&4194048)!==0)?c:v}function Tn(a,c){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&c)===0}function _r(a,c){switch(a){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function yi(){var a=Yt;return Yt<<=1,(Yt&4194048)===0&&(Yt=256),a}function gr(){var a=on;return on<<=1,(on&62914560)===0&&(on=4194304),a}function Kr(a){for(var c=[],f=0;31>f;f++)c.push(a);return c}function yr(a,c){a.pendingLanes|=c,c!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function bi(a,c,f,g,v,E){var _=a.pendingLanes;a.pendingLanes=f,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=f,a.entangledLanes&=f,a.errorRecoveryDisabledLanes&=f,a.shellSuspendCounter=0;var P=a.entanglements,G=a.expirationTimes,se=a.hiddenUpdates;for(f=_&~f;0<f;){var fe=31-Ve(f),me=1<<fe;P[fe]=0,G[fe]=-1;var le=se[fe];if(le!==null)for(se[fe]=null,fe=0;fe<le.length;fe++){var ue=le[fe];ue!==null&&(ue.lane&=-536870913)}f&=~me}g!==0&&Fs(a,g,0),E!==0&&v===0&&a.tag!==0&&(a.suspendedLanes|=E&~(_&~c))}function Fs(a,c,f){a.pendingLanes|=c,a.suspendedLanes&=~c;var g=31-Ve(c);a.entangledLanes|=c,a.entanglements[g]=a.entanglements[g]|1073741824|f&4194090}function Yr(a,c){var f=a.entangledLanes|=c;for(a=a.entanglements;f;){var g=31-Ve(f),v=1<<g;v&c|a[g]&c&&(a[g]|=c),f&=~v}}function vt(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function sr(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Us(){var a=V.p;return a!==0?a:(a=window.event,a===void 0?32:ZA(a.type))}function Oi(a,c){var f=V.p;try{return V.p=a,c()}finally{V.p=f}}var Yn=Math.random().toString(36).slice(2),qt="__reactFiber$"+Yn,an="__reactProps$"+Yn,Xr="__reactContainer$"+Yn,Ie="__reactEvents$"+Yn,Xn="__reactListeners$"+Yn,Li="__reactHandles$"+Yn,Pi="__reactResources$"+Yn,or="__reactMarker$"+Yn;function Dr(a){delete a[qt],delete a[an],delete a[Ie],delete a[Xn],delete a[Li]}function fn(a){var c=a[qt];if(c)return c;for(var f=a.parentNode;f;){if(c=f[Xr]||f[qt]){if(f=c.alternate,c.child!==null||f!==null&&f.child!==null)for(a=PA(a);a!==null;){if(f=a[qt])return f;a=PA(a)}return c}a=f,f=a.parentNode}return null}function jn(a){if(a=a[qt]||a[Xr]){var c=a.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return a}return null}function Rr(a){var c=a.tag;if(c===5||c===26||c===27||c===6)return a.stateNode;throw Error(r(33))}function Zn(a){var c=a[Pi];return c||(c=a[Pi]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Et(a){a[or]=!0}var ss=new Set,je={};function X(a,c){ge(a,c),ge(a+"Capture",c)}function ge(a,c){for(je[a]=c,a=0;a<c.length;a++)ss.add(c[a])}var Me=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),ut={},Tt={};function Nt(a){return Ae.call(Tt,a)?!0:Ae.call(ut,a)?!1:Me.test(a)?Tt[a]=!0:(ut[a]=!0,!1)}function Vt(a,c,f){if(Nt(c))if(f===null)a.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":a.removeAttribute(c);return;case"boolean":var g=c.toLowerCase().slice(0,5);if(g!=="data-"&&g!=="aria-"){a.removeAttribute(c);return}}a.setAttribute(c,""+f)}}function Nn(a,c,f){if(f===null)a.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(c);return}a.setAttribute(c,""+f)}}function hn(a,c,f,g){if(g===null)a.removeAttribute(f);else{switch(typeof g){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(f);return}a.setAttributeNS(c,f,""+g)}}var vi,jt;function br(a){if(vi===void 0)try{throw Error()}catch(f){var c=f.stack.trim().match(/\n( *(at )?)/);vi=c&&c[1]||"",jt=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+vi+a+jt}var Ii=!1;function Bi(a,c){if(!a||Ii)return"";Ii=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var g={DetermineComponentFrameRoot:function(){try{if(c){var me=function(){throw Error()};if(Object.defineProperty(me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(me,[])}catch(ue){var le=ue}Reflect.construct(a,[],me)}else{try{me.call()}catch(ue){le=ue}a.call(me.prototype)}}else{try{throw Error()}catch(ue){le=ue}(me=a())&&typeof me.catch=="function"&&me.catch(function(){})}}catch(ue){if(ue&&le&&typeof ue.stack=="string")return[ue.stack,le.stack]}return[null,null]}};g.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(g.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(g.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=g.DetermineComponentFrameRoot(),_=E[0],P=E[1];if(_&&P){var G=_.split(`
`),se=P.split(`
`);for(v=g=0;g<G.length&&!G[g].includes("DetermineComponentFrameRoot");)g++;for(;v<se.length&&!se[v].includes("DetermineComponentFrameRoot");)v++;if(g===G.length||v===se.length)for(g=G.length-1,v=se.length-1;1<=g&&0<=v&&G[g]!==se[v];)v--;for(;1<=g&&0<=v;g--,v--)if(G[g]!==se[v]){if(g!==1||v!==1)do if(g--,v--,0>v||G[g]!==se[v]){var fe=`
`+G[g].replace(" at new "," at ");return a.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",a.displayName)),fe}while(1<=g&&0<=v);break}}}finally{Ii=!1,Error.prepareStackTrace=f}return(f=a?a.displayName||a.name:"")?br(f):""}function Ko(a){switch(a.tag){case 26:case 27:case 5:return br(a.type);case 16:return br("Lazy");case 13:return br("Suspense");case 19:return br("SuspenseList");case 0:case 15:return Bi(a.type,!1);case 11:return Bi(a.type.render,!1);case 1:return Bi(a.type,!0);case 31:return br("Activity");default:return""}}function as(a){try{var c="";do c+=Ko(a),a=a.return;while(a);return c}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}function Jn(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function zi(a){var c=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function tl(a){var c=zi(a)?"checked":"value",f=Object.getOwnPropertyDescriptor(a.constructor.prototype,c),g=""+a[c];if(!a.hasOwnProperty(c)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var v=f.get,E=f.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return v.call(this)},set:function(_){g=""+_,E.call(this,_)}}),Object.defineProperty(a,c,{enumerable:f.enumerable}),{getValue:function(){return g},setValue:function(_){g=""+_},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function ls(a){a._valueTracker||(a._valueTracker=tl(a))}function $s(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var f=c.getValue(),g="";return a&&(g=zi(a)?a.checked?"true":"false":a.value),a=g,a!==f?(c.setValue(a),!0):!1}function Gs(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var kc=/[\n"\\]/g;function pn(a){return a.replace(kc,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function cs(a,c,f,g,v,E,_,P){a.name="",_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"?a.type=_:a.removeAttribute("type"),c!=null?_==="number"?(c===0&&a.value===""||a.value!=c)&&(a.value=""+Jn(c)):a.value!==""+Jn(c)&&(a.value=""+Jn(c)):_!=="submit"&&_!=="reset"||a.removeAttribute("value"),c!=null?Yo(a,_,Jn(c)):f!=null?Yo(a,_,Jn(f)):g!=null&&a.removeAttribute("value"),v==null&&E!=null&&(a.defaultChecked=!!E),v!=null&&(a.checked=v&&typeof v!="function"&&typeof v!="symbol"),P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?a.name=""+Jn(P):a.removeAttribute("name")}function nl(a,c,f,g,v,E,_,P){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(a.type=E),c!=null||f!=null){if(!(E!=="submit"&&E!=="reset"||c!=null))return;f=f!=null?""+Jn(f):"",c=c!=null?""+Jn(c):f,P||c===a.value||(a.value=c),a.defaultValue=c}g=g??v,g=typeof g!="function"&&typeof g!="symbol"&&!!g,a.checked=P?a.checked:!!g,a.defaultChecked=!!g,_!=null&&typeof _!="function"&&typeof _!="symbol"&&typeof _!="boolean"&&(a.name=_)}function Yo(a,c,f){c==="number"&&Gs(a.ownerDocument)===a||a.defaultValue===""+f||(a.defaultValue=""+f)}function xi(a,c,f,g){if(a=a.options,c){c={};for(var v=0;v<f.length;v++)c["$"+f[v]]=!0;for(f=0;f<a.length;f++)v=c.hasOwnProperty("$"+a[f].value),a[f].selected!==v&&(a[f].selected=v),v&&g&&(a[f].defaultSelected=!0)}else{for(f=""+Jn(f),c=null,v=0;v<a.length;v++){if(a[v].value===f){a[v].selected=!0,g&&(a[v].defaultSelected=!0);return}c!==null||a[v].disabled||(c=a[v])}c!==null&&(c.selected=!0)}}function uf(a,c,f){if(c!=null&&(c=""+Jn(c),c!==a.value&&(a.value=c),f==null)){a.defaultValue!==c&&(a.defaultValue=c);return}a.defaultValue=f!=null?""+Jn(f):""}function df(a,c,f,g){if(c==null){if(g!=null){if(f!=null)throw Error(r(92));if(F(g)){if(1<g.length)throw Error(r(93));g=g[0]}f=g}f==null&&(f=""),c=f}f=Jn(c),a.defaultValue=f,g=a.textContent,g===f&&g!==""&&g!==null&&(a.value=g)}function Ws(a,c){if(c){var f=a.firstChild;if(f&&f===a.lastChild&&f.nodeType===3){f.nodeValue=c;return}}a.textContent=c}var Tc=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function ff(a,c,f){var g=c.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?g?a.setProperty(c,""):c==="float"?a.cssFloat="":a[c]="":g?a.setProperty(c,f):typeof f!="number"||f===0||Tc.has(c)?c==="float"?a.cssFloat=f:a[c]=(""+f).trim():a[c]=f+"px"}function hf(a,c,f){if(c!=null&&typeof c!="object")throw Error(r(62));if(a=a.style,f!=null){for(var g in f)!f.hasOwnProperty(g)||c!=null&&c.hasOwnProperty(g)||(g.indexOf("--")===0?a.setProperty(g,""):g==="float"?a.cssFloat="":a[g]="");for(var v in c)g=c[v],c.hasOwnProperty(v)&&f[v]!==g&&ff(a,v,g)}else for(var E in c)c.hasOwnProperty(E)&&ff(a,E,c[E])}function Nc(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Ag=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),Mg=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function rl(a){return Mg.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var Ac=null;function Mc(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Ks=null,us=null;function pf(a){var c=jn(a);if(c&&(a=c.stateNode)){var f=a[an]||null;e:switch(a=c.stateNode,c.type){case"input":if(cs(a,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),c=f.name,f.type==="radio"&&c!=null){for(f=a;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+pn(""+c)+'"][type="radio"]'),c=0;c<f.length;c++){var g=f[c];if(g!==a&&g.form===a.form){var v=g[an]||null;if(!v)throw Error(r(90));cs(g,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(c=0;c<f.length;c++)g=f[c],g.form===a.form&&$s(g)}break e;case"textarea":uf(a,f.value,f.defaultValue);break e;case"select":c=f.value,c!=null&&xi(a,!!f.multiple,c,!1)}}}var _c=!1;function mf(a,c,f){if(_c)return a(c,f);_c=!0;try{var g=a(c);return g}finally{if(_c=!1,(Ks!==null||us!==null)&&(Xf(),Ks&&(c=Ks,a=us,us=Ks=null,pf(c),a)))for(c=0;c<a.length;c++)pf(a[c])}}function K(a,c){var f=a.stateNode;if(f===null)return null;var g=f[an]||null;if(g===null)return null;f=g[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(g=!g.disabled)||(a=a.type,g=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!g;break e;default:a=!1}if(a)return null;if(f&&typeof f!="function")throw Error(r(231,c,typeof f));return f}var J=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ie=!1;if(J)try{var pe={};Object.defineProperty(pe,"passive",{get:function(){ie=!0}}),window.addEventListener("test",pe,pe),window.removeEventListener("test",pe,pe)}catch{ie=!1}var be=null,we=null,Ce=null;function Fe(){if(Ce)return Ce;var a,c=we,f=c.length,g,v="value"in be?be.value:be.textContent,E=v.length;for(a=0;a<f&&c[a]===v[a];a++);var _=f-a;for(g=1;g<=_&&c[f-g]===v[E-g];g++);return Ce=v.slice(a,1<g?1-g:void 0)}function Je(a){var c=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&c===13&&(a=13)):a=c,a===10&&(a=13),32<=a||a===13?a:0}function lt(){return!0}function Ot(){return!1}function dt(a){function c(f,g,v,E,_){this._reactName=f,this._targetInst=v,this.type=g,this.nativeEvent=E,this.target=_,this.currentTarget=null;for(var P in a)a.hasOwnProperty(P)&&(f=a[P],this[P]=f?f(E):E[P]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?lt:Ot,this.isPropagationStopped=Ot,this}return h(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=lt)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=lt)},persist:function(){},isPersistent:lt}),c}var Ye={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ht=dt(Ye),Ys=h({},Ye,{view:0,detail:0}),_g=dt(Ys),Dg,Rg,Dc,gf=h({},Ys,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Og,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Dc&&(Dc&&a.type==="mousemove"?(Dg=a.screenX-Dc.screenX,Rg=a.screenY-Dc.screenY):Rg=Dg=0,Dc=a),Dg)},movementY:function(a){return"movementY"in a?a.movementY:Rg}}),I2=dt(gf),UV=h({},gf,{dataTransfer:0}),$V=dt(UV),GV=h({},Ys,{relatedTarget:0}),jg=dt(GV),WV=h({},Ye,{animationName:0,elapsedTime:0,pseudoElement:0}),KV=dt(WV),YV=h({},Ye,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),XV=dt(YV),ZV=h({},Ye,{data:0}),B2=dt(ZV),JV={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},QV={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},eH={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function tH(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=eH[a])?!!c[a]:!1}function Og(){return tH}var nH=h({},Ys,{key:function(a){if(a.key){var c=JV[a.key]||a.key;if(c!=="Unidentified")return c}return a.type==="keypress"?(a=Je(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?QV[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Og,charCode:function(a){return a.type==="keypress"?Je(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Je(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),rH=dt(nH),iH=h({},gf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),z2=dt(iH),sH=h({},Ys,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Og}),oH=dt(sH),aH=h({},Ye,{propertyName:0,elapsedTime:0,pseudoElement:0}),lH=dt(aH),cH=h({},gf,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),uH=dt(cH),dH=h({},Ye,{newState:0,oldState:0}),fH=dt(dH),hH=[9,13,27,32],Lg=J&&"CompositionEvent"in window,Rc=null;J&&"documentMode"in document&&(Rc=document.documentMode);var pH=J&&"TextEvent"in window&&!Rc,q2=J&&(!Lg||Rc&&8<Rc&&11>=Rc),V2=" ",H2=!1;function F2(a,c){switch(a){case"keyup":return hH.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function U2(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var il=!1;function mH(a,c){switch(a){case"compositionend":return U2(c);case"keypress":return c.which!==32?null:(H2=!0,V2);case"textInput":return a=c.data,a===V2&&H2?null:a;default:return null}}function gH(a,c){if(il)return a==="compositionend"||!Lg&&F2(a,c)?(a=Fe(),Ce=we=be=null,il=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return q2&&c.locale!=="ko"?null:c.data;default:return null}}var yH={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function $2(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c==="input"?!!yH[a.type]:c==="textarea"}function G2(a,c,f,g){Ks?us?us.push(g):us=[g]:Ks=g,c=nh(c,"onChange"),0<c.length&&(f=new Ht("onChange","change",null,f,g),a.push({event:f,listeners:c}))}var jc=null,Oc=null;function bH(a){TA(a,0)}function yf(a){var c=Rr(a);if($s(c))return a}function W2(a,c){if(a==="change")return c}var K2=!1;if(J){var Pg;if(J){var Ig="oninput"in document;if(!Ig){var Y2=document.createElement("div");Y2.setAttribute("oninput","return;"),Ig=typeof Y2.oninput=="function"}Pg=Ig}else Pg=!1;K2=Pg&&(!document.documentMode||9<document.documentMode)}function X2(){jc&&(jc.detachEvent("onpropertychange",Z2),Oc=jc=null)}function Z2(a){if(a.propertyName==="value"&&yf(Oc)){var c=[];G2(c,Oc,a,Mc(a)),mf(bH,c)}}function vH(a,c,f){a==="focusin"?(X2(),jc=c,Oc=f,jc.attachEvent("onpropertychange",Z2)):a==="focusout"&&X2()}function xH(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return yf(Oc)}function wH(a,c){if(a==="click")return yf(c)}function SH(a,c){if(a==="input"||a==="change")return yf(c)}function EH(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var jr=typeof Object.is=="function"?Object.is:EH;function Lc(a,c){if(jr(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var f=Object.keys(a),g=Object.keys(c);if(f.length!==g.length)return!1;for(g=0;g<f.length;g++){var v=f[g];if(!Ae.call(c,v)||!jr(a[v],c[v]))return!1}return!0}function J2(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function Q2(a,c){var f=J2(a);a=0;for(var g;f;){if(f.nodeType===3){if(g=a+f.textContent.length,a<=c&&g>=c)return{node:f,offset:c-a};a=g}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=J2(f)}}function eT(a,c){return a&&c?a===c?!0:a&&a.nodeType===3?!1:c&&c.nodeType===3?eT(a,c.parentNode):"contains"in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&16):!1:!1}function tT(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var c=Gs(a.document);c instanceof a.HTMLIFrameElement;){try{var f=typeof c.contentWindow.location.href=="string"}catch{f=!1}if(f)a=c.contentWindow;else break;c=Gs(a.document)}return c}function Bg(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c&&(c==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||c==="textarea"||a.contentEditable==="true")}var CH=J&&"documentMode"in document&&11>=document.documentMode,sl=null,zg=null,Pc=null,qg=!1;function nT(a,c,f){var g=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;qg||sl==null||sl!==Gs(g)||(g=sl,"selectionStart"in g&&Bg(g)?g={start:g.selectionStart,end:g.selectionEnd}:(g=(g.ownerDocument&&g.ownerDocument.defaultView||window).getSelection(),g={anchorNode:g.anchorNode,anchorOffset:g.anchorOffset,focusNode:g.focusNode,focusOffset:g.focusOffset}),Pc&&Lc(Pc,g)||(Pc=g,g=nh(zg,"onSelect"),0<g.length&&(c=new Ht("onSelect","select",null,c,f),a.push({event:c,listeners:g}),c.target=sl)))}function Xo(a,c){var f={};return f[a.toLowerCase()]=c.toLowerCase(),f["Webkit"+a]="webkit"+c,f["Moz"+a]="moz"+c,f}var ol={animationend:Xo("Animation","AnimationEnd"),animationiteration:Xo("Animation","AnimationIteration"),animationstart:Xo("Animation","AnimationStart"),transitionrun:Xo("Transition","TransitionRun"),transitionstart:Xo("Transition","TransitionStart"),transitioncancel:Xo("Transition","TransitionCancel"),transitionend:Xo("Transition","TransitionEnd")},Vg={},rT={};J&&(rT=document.createElement("div").style,"AnimationEvent"in window||(delete ol.animationend.animation,delete ol.animationiteration.animation,delete ol.animationstart.animation),"TransitionEvent"in window||delete ol.transitionend.transition);function Zo(a){if(Vg[a])return Vg[a];if(!ol[a])return a;var c=ol[a],f;for(f in c)if(c.hasOwnProperty(f)&&f in rT)return Vg[a]=c[f];return a}var iT=Zo("animationend"),sT=Zo("animationiteration"),oT=Zo("animationstart"),kH=Zo("transitionrun"),TH=Zo("transitionstart"),NH=Zo("transitioncancel"),aT=Zo("transitionend"),lT=new Map,Hg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Hg.push("scrollEnd");function wi(a,c){lT.set(a,c),X(c,[a])}var cT=new WeakMap;function Zr(a,c){if(typeof a=="object"&&a!==null){var f=cT.get(a);return f!==void 0?f:(c={value:a,source:c,stack:as(c)},cT.set(a,c),c)}return{value:a,source:c,stack:as(c)}}var Jr=[],al=0,Fg=0;function bf(){for(var a=al,c=Fg=al=0;c<a;){var f=Jr[c];Jr[c++]=null;var g=Jr[c];Jr[c++]=null;var v=Jr[c];Jr[c++]=null;var E=Jr[c];if(Jr[c++]=null,g!==null&&v!==null){var _=g.pending;_===null?v.next=v:(v.next=_.next,_.next=v),g.pending=v}E!==0&&uT(f,v,E)}}function vf(a,c,f,g){Jr[al++]=a,Jr[al++]=c,Jr[al++]=f,Jr[al++]=g,Fg|=g,a.lanes|=g,a=a.alternate,a!==null&&(a.lanes|=g)}function Ug(a,c,f,g){return vf(a,c,f,g),xf(a)}function ll(a,c){return vf(a,null,null,c),xf(a)}function uT(a,c,f){a.lanes|=f;var g=a.alternate;g!==null&&(g.lanes|=f);for(var v=!1,E=a.return;E!==null;)E.childLanes|=f,g=E.alternate,g!==null&&(g.childLanes|=f),E.tag===22&&(a=E.stateNode,a===null||a._visibility&1||(v=!0)),a=E,E=E.return;return a.tag===3?(E=a.stateNode,v&&c!==null&&(v=31-Ve(f),a=E.hiddenUpdates,g=a[v],g===null?a[v]=[c]:g.push(c),c.lane=f|536870912),E):null}function xf(a){if(50<au)throw au=0,Xy=null,Error(r(185));for(var c=a.return;c!==null;)a=c,c=a.return;return a.tag===3?a.stateNode:null}var cl={};function AH(a,c,f,g){this.tag=a,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=g,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Or(a,c,f,g){return new AH(a,c,f,g)}function $g(a){return a=a.prototype,!(!a||!a.isReactComponent)}function ds(a,c){var f=a.alternate;return f===null?(f=Or(a.tag,c,a.key,a.mode),f.elementType=a.elementType,f.type=a.type,f.stateNode=a.stateNode,f.alternate=a,a.alternate=f):(f.pendingProps=c,f.type=a.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=a.flags&65011712,f.childLanes=a.childLanes,f.lanes=a.lanes,f.child=a.child,f.memoizedProps=a.memoizedProps,f.memoizedState=a.memoizedState,f.updateQueue=a.updateQueue,c=a.dependencies,f.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},f.sibling=a.sibling,f.index=a.index,f.ref=a.ref,f.refCleanup=a.refCleanup,f}function dT(a,c){a.flags&=65011714;var f=a.alternate;return f===null?(a.childLanes=0,a.lanes=c,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=f.childLanes,a.lanes=f.lanes,a.child=f.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=f.memoizedProps,a.memoizedState=f.memoizedState,a.updateQueue=f.updateQueue,a.type=f.type,c=f.dependencies,a.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),a}function wf(a,c,f,g,v,E){var _=0;if(g=a,typeof a=="function")$g(a)&&(_=1);else if(typeof a=="string")_=_F(a,f,U.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case L:return a=Or(31,f,c,v),a.elementType=L,a.lanes=E,a;case x:return Jo(f.children,v,E,c);case S:_=8,v|=24;break;case w:return a=Or(12,f,c,v|2),a.elementType=w,a.lanes=E,a;case A:return a=Or(13,f,c,v),a.elementType=A,a.lanes=E,a;case M:return a=Or(19,f,c,v),a.elementType=M,a.lanes=E,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case C:case k:_=10;break e;case N:_=9;break e;case T:_=11;break e;case j:_=14;break e;case R:_=16,g=null;break e}_=29,f=Error(r(130,a===null?"null":typeof a,"")),g=null}return c=Or(_,f,c,v),c.elementType=a,c.type=g,c.lanes=E,c}function Jo(a,c,f,g){return a=Or(7,a,g,c),a.lanes=f,a}function Gg(a,c,f){return a=Or(6,a,null,c),a.lanes=f,a}function Wg(a,c,f){return c=Or(4,a.children!==null?a.children:[],a.key,c),c.lanes=f,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}var ul=[],dl=0,Sf=null,Ef=0,Qr=[],ei=0,Qo=null,fs=1,hs="";function ea(a,c){ul[dl++]=Ef,ul[dl++]=Sf,Sf=a,Ef=c}function fT(a,c,f){Qr[ei++]=fs,Qr[ei++]=hs,Qr[ei++]=Qo,Qo=a;var g=fs;a=hs;var v=32-Ve(g)-1;g&=~(1<<v),f+=1;var E=32-Ve(c)+v;if(30<E){var _=v-v%5;E=(g&(1<<_)-1).toString(32),g>>=_,v-=_,fs=1<<32-Ve(c)+v|f<<v|g,hs=E+a}else fs=1<<E|f<<v|g,hs=a}function Kg(a){a.return!==null&&(ea(a,1),fT(a,1,0))}function Yg(a){for(;a===Sf;)Sf=ul[--dl],ul[dl]=null,Ef=ul[--dl],ul[dl]=null;for(;a===Qo;)Qo=Qr[--ei],Qr[ei]=null,hs=Qr[--ei],Qr[ei]=null,fs=Qr[--ei],Qr[ei]=null}var ar=null,Zt=null,pt=!1,ta=null,qi=!1,Xg=Error(r(519));function na(a){var c=Error(r(418,""));throw zc(Zr(c,a)),Xg}function hT(a){var c=a.stateNode,f=a.type,g=a.memoizedProps;switch(c[qt]=a,c[an]=g,f){case"dialog":rt("cancel",c),rt("close",c);break;case"iframe":case"object":case"embed":rt("load",c);break;case"video":case"audio":for(f=0;f<cu.length;f++)rt(cu[f],c);break;case"source":rt("error",c);break;case"img":case"image":case"link":rt("error",c),rt("load",c);break;case"details":rt("toggle",c);break;case"input":rt("invalid",c),nl(c,g.value,g.defaultValue,g.checked,g.defaultChecked,g.type,g.name,!0),ls(c);break;case"select":rt("invalid",c);break;case"textarea":rt("invalid",c),df(c,g.value,g.defaultValue,g.children),ls(c)}f=g.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||c.textContent===""+f||g.suppressHydrationWarning===!0||_A(c.textContent,f)?(g.popover!=null&&(rt("beforetoggle",c),rt("toggle",c)),g.onScroll!=null&&rt("scroll",c),g.onScrollEnd!=null&&rt("scrollend",c),g.onClick!=null&&(c.onclick=rh),c=!0):c=!1,c||na(a)}function pT(a){for(ar=a.return;ar;)switch(ar.tag){case 5:case 13:qi=!1;return;case 27:case 3:qi=!0;return;default:ar=ar.return}}function Ic(a){if(a!==ar)return!1;if(!pt)return pT(a),pt=!0,!1;var c=a.tag,f;if((f=c!==3&&c!==27)&&((f=c===5)&&(f=a.type,f=!(f!=="form"&&f!=="button")||f0(a.type,a.memoizedProps)),f=!f),f&&Zt&&na(a),pT(a),c===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));e:{for(a=a.nextSibling,c=0;a;){if(a.nodeType===8)if(f=a.data,f==="/$"){if(c===0){Zt=Ei(a.nextSibling);break e}c--}else f!=="$"&&f!=="$!"&&f!=="$?"||c++;a=a.nextSibling}Zt=null}}else c===27?(c=Zt,fo(a.type)?(a=g0,g0=null,Zt=a):Zt=c):Zt=ar?Ei(a.stateNode.nextSibling):null;return!0}function Bc(){Zt=ar=null,pt=!1}function mT(){var a=ta;return a!==null&&(wr===null?wr=a:wr.push.apply(wr,a),ta=null),a}function zc(a){ta===null?ta=[a]:ta.push(a)}var Zg=$(null),ra=null,ps=null;function Xs(a,c,f){ae(Zg,c._currentValue),c._currentValue=f}function ms(a){a._currentValue=Zg.current,oe(Zg)}function Jg(a,c,f){for(;a!==null;){var g=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,g!==null&&(g.childLanes|=c)):g!==null&&(g.childLanes&c)!==c&&(g.childLanes|=c),a===f)break;a=a.return}}function Qg(a,c,f,g){var v=a.child;for(v!==null&&(v.return=a);v!==null;){var E=v.dependencies;if(E!==null){var _=v.child;E=E.firstContext;e:for(;E!==null;){var P=E;E=v;for(var G=0;G<c.length;G++)if(P.context===c[G]){E.lanes|=f,P=E.alternate,P!==null&&(P.lanes|=f),Jg(E.return,f,a),g||(_=null);break e}E=P.next}}else if(v.tag===18){if(_=v.return,_===null)throw Error(r(341));_.lanes|=f,E=_.alternate,E!==null&&(E.lanes|=f),Jg(_,f,a),_=null}else _=v.child;if(_!==null)_.return=v;else for(_=v;_!==null;){if(_===a){_=null;break}if(v=_.sibling,v!==null){v.return=_.return,_=v;break}_=_.return}v=_}}function qc(a,c,f,g){a=null;for(var v=c,E=!1;v!==null;){if(!E){if((v.flags&524288)!==0)E=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var _=v.alternate;if(_===null)throw Error(r(387));if(_=_.memoizedProps,_!==null){var P=v.type;jr(v.pendingProps.value,_.value)||(a!==null?a.push(P):a=[P])}}else if(v===de.current){if(_=v.alternate,_===null)throw Error(r(387));_.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(a!==null?a.push(mu):a=[mu])}v=v.return}a!==null&&Qg(c,a,f,g),c.flags|=262144}function Cf(a){for(a=a.firstContext;a!==null;){if(!jr(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function ia(a){ra=a,ps=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function Qn(a){return gT(ra,a)}function kf(a,c){return ra===null&&ia(a),gT(a,c)}function gT(a,c){var f=c._currentValue;if(c={context:c,memoizedValue:f,next:null},ps===null){if(a===null)throw Error(r(308));ps=c,a.dependencies={lanes:0,firstContext:c},a.flags|=524288}else ps=ps.next=c;return f}var MH=typeof AbortController<"u"?AbortController:function(){var a=[],c=this.signal={aborted:!1,addEventListener:function(f,g){a.push(g)}};this.abort=function(){c.aborted=!0,a.forEach(function(f){return f()})}},_H=e.unstable_scheduleCallback,DH=e.unstable_NormalPriority,An={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ey(){return{controller:new MH,data:new Map,refCount:0}}function Vc(a){a.refCount--,a.refCount===0&&_H(DH,function(){a.controller.abort()})}var Hc=null,ty=0,fl=0,hl=null;function RH(a,c){if(Hc===null){var f=Hc=[];ty=0,fl=r0(),hl={status:"pending",value:void 0,then:function(g){f.push(g)}}}return ty++,c.then(yT,yT),c}function yT(){if(--ty===0&&Hc!==null){hl!==null&&(hl.status="fulfilled");var a=Hc;Hc=null,fl=0,hl=null;for(var c=0;c<a.length;c++)(0,a[c])()}}function jH(a,c){var f=[],g={status:"pending",value:null,reason:null,then:function(v){f.push(v)}};return a.then(function(){g.status="fulfilled",g.value=c;for(var v=0;v<f.length;v++)(0,f[v])(c)},function(v){for(g.status="rejected",g.reason=v,v=0;v<f.length;v++)(0,f[v])(void 0)}),g}var bT=O.S;O.S=function(a,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&RH(a,c),bT!==null&&bT(a,c)};var sa=$(null);function ny(){var a=sa.current;return a!==null?a:At.pooledCache}function Tf(a,c){c===null?ae(sa,sa.current):ae(sa,c.pool)}function vT(){var a=ny();return a===null?null:{parent:An._currentValue,pool:a}}var Fc=Error(r(460)),xT=Error(r(474)),Nf=Error(r(542)),ry={then:function(){}};function wT(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Af(){}function ST(a,c,f){switch(f=a[f],f===void 0?a.push(c):f!==c&&(c.then(Af,Af),c=f),c.status){case"fulfilled":return c.value;case"rejected":throw a=c.reason,CT(a),a;default:if(typeof c.status=="string")c.then(Af,Af);else{if(a=At,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=c,a.status="pending",a.then(function(g){if(c.status==="pending"){var v=c;v.status="fulfilled",v.value=g}},function(g){if(c.status==="pending"){var v=c;v.status="rejected",v.reason=g}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw a=c.reason,CT(a),a}throw Uc=c,Fc}}var Uc=null;function ET(){if(Uc===null)throw Error(r(459));var a=Uc;return Uc=null,a}function CT(a){if(a===Fc||a===Nf)throw Error(r(483))}var Zs=!1;function iy(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function sy(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Js(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Qs(a,c,f){var g=a.updateQueue;if(g===null)return null;if(g=g.shared,(gt&2)!==0){var v=g.pending;return v===null?c.next=c:(c.next=v.next,v.next=c),g.pending=c,c=xf(a),uT(a,null,f),c}return vf(a,g,c,f),xf(a)}function $c(a,c,f){if(c=c.updateQueue,c!==null&&(c=c.shared,(f&4194048)!==0)){var g=c.lanes;g&=a.pendingLanes,f|=g,c.lanes=f,Yr(a,f)}}function oy(a,c){var f=a.updateQueue,g=a.alternate;if(g!==null&&(g=g.updateQueue,f===g)){var v=null,E=null;if(f=f.firstBaseUpdate,f!==null){do{var _={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};E===null?v=E=_:E=E.next=_,f=f.next}while(f!==null);E===null?v=E=c:E=E.next=c}else v=E=c;f={baseState:g.baseState,firstBaseUpdate:v,lastBaseUpdate:E,shared:g.shared,callbacks:g.callbacks},a.updateQueue=f;return}a=f.lastBaseUpdate,a===null?f.firstBaseUpdate=c:a.next=c,f.lastBaseUpdate=c}var ay=!1;function Gc(){if(ay){var a=hl;if(a!==null)throw a}}function Wc(a,c,f,g){ay=!1;var v=a.updateQueue;Zs=!1;var E=v.firstBaseUpdate,_=v.lastBaseUpdate,P=v.shared.pending;if(P!==null){v.shared.pending=null;var G=P,se=G.next;G.next=null,_===null?E=se:_.next=se,_=G;var fe=a.alternate;fe!==null&&(fe=fe.updateQueue,P=fe.lastBaseUpdate,P!==_&&(P===null?fe.firstBaseUpdate=se:P.next=se,fe.lastBaseUpdate=G))}if(E!==null){var me=v.baseState;_=0,fe=se=G=null,P=E;do{var le=P.lane&-536870913,ue=le!==P.lane;if(ue?(ct&le)===le:(g&le)===le){le!==0&&le===fl&&(ay=!0),fe!==null&&(fe=fe.next={lane:0,tag:P.tag,payload:P.payload,callback:null,next:null});e:{var $e=a,He=P;le=c;var St=f;switch(He.tag){case 1:if($e=He.payload,typeof $e=="function"){me=$e.call(St,me,le);break e}me=$e;break e;case 3:$e.flags=$e.flags&-65537|128;case 0:if($e=He.payload,le=typeof $e=="function"?$e.call(St,me,le):$e,le==null)break e;me=h({},me,le);break e;case 2:Zs=!0}}le=P.callback,le!==null&&(a.flags|=64,ue&&(a.flags|=8192),ue=v.callbacks,ue===null?v.callbacks=[le]:ue.push(le))}else ue={lane:le,tag:P.tag,payload:P.payload,callback:P.callback,next:null},fe===null?(se=fe=ue,G=me):fe=fe.next=ue,_|=le;if(P=P.next,P===null){if(P=v.shared.pending,P===null)break;ue=P,P=ue.next,ue.next=null,v.lastBaseUpdate=ue,v.shared.pending=null}}while(!0);fe===null&&(G=me),v.baseState=G,v.firstBaseUpdate=se,v.lastBaseUpdate=fe,E===null&&(v.shared.lanes=0),ao|=_,a.lanes=_,a.memoizedState=me}}function kT(a,c){if(typeof a!="function")throw Error(r(191,a));a.call(c)}function TT(a,c){var f=a.callbacks;if(f!==null)for(a.callbacks=null,a=0;a<f.length;a++)kT(f[a],c)}var pl=$(null),Mf=$(0);function NT(a,c){a=Ss,ae(Mf,a),ae(pl,c),Ss=a|c.baseLanes}function ly(){ae(Mf,Ss),ae(pl,pl.current)}function cy(){Ss=Mf.current,oe(pl),oe(Mf)}var eo=0,et=null,xt=null,mn=null,_f=!1,ml=!1,oa=!1,Df=0,Kc=0,gl=null,OH=0;function ln(){throw Error(r(321))}function uy(a,c){if(c===null)return!1;for(var f=0;f<c.length&&f<a.length;f++)if(!jr(a[f],c[f]))return!1;return!0}function dy(a,c,f,g,v,E){return eo=E,et=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,O.H=a===null||a.memoizedState===null?uN:dN,oa=!1,E=f(g,v),oa=!1,ml&&(E=MT(c,f,g,v)),AT(a),E}function AT(a){O.H=If;var c=xt!==null&&xt.next!==null;if(eo=0,mn=xt=et=null,_f=!1,Kc=0,gl=null,c)throw Error(r(300));a===null||On||(a=a.dependencies,a!==null&&Cf(a)&&(On=!0))}function MT(a,c,f,g){et=a;var v=0;do{if(ml&&(gl=null),Kc=0,ml=!1,25<=v)throw Error(r(301));if(v+=1,mn=xt=null,a.updateQueue!=null){var E=a.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}O.H=VH,E=c(f,g)}while(ml);return E}function LH(){var a=O.H,c=a.useState()[0];return c=typeof c.then=="function"?Yc(c):c,a=a.useState()[0],(xt!==null?xt.memoizedState:null)!==a&&(et.flags|=1024),c}function fy(){var a=Df!==0;return Df=0,a}function hy(a,c,f){c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~f}function py(a){if(_f){for(a=a.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}_f=!1}eo=0,mn=xt=et=null,ml=!1,Kc=Df=0,gl=null}function vr(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mn===null?et.memoizedState=mn=a:mn=mn.next=a,mn}function gn(){if(xt===null){var a=et.alternate;a=a!==null?a.memoizedState:null}else a=xt.next;var c=mn===null?et.memoizedState:mn.next;if(c!==null)mn=c,xt=a;else{if(a===null)throw et.alternate===null?Error(r(467)):Error(r(310));xt=a,a={memoizedState:xt.memoizedState,baseState:xt.baseState,baseQueue:xt.baseQueue,queue:xt.queue,next:null},mn===null?et.memoizedState=mn=a:mn=mn.next=a}return mn}function my(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function Yc(a){var c=Kc;return Kc+=1,gl===null&&(gl=[]),a=ST(gl,a,c),c=et,(mn===null?c.memoizedState:mn.next)===null&&(c=c.alternate,O.H=c===null||c.memoizedState===null?uN:dN),a}function Rf(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return Yc(a);if(a.$$typeof===k)return Qn(a)}throw Error(r(438,String(a)))}function gy(a){var c=null,f=et.updateQueue;if(f!==null&&(c=f.memoCache),c==null){var g=et.alternate;g!==null&&(g=g.updateQueue,g!==null&&(g=g.memoCache,g!=null&&(c={data:g.data.map(function(v){return v.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),f===null&&(f=my(),et.updateQueue=f),f.memoCache=c,f=c.data[c.index],f===void 0)for(f=c.data[c.index]=Array(a),g=0;g<a;g++)f[g]=I;return c.index++,f}function gs(a,c){return typeof c=="function"?c(a):c}function jf(a){var c=gn();return yy(c,xt,a)}function yy(a,c,f){var g=a.queue;if(g===null)throw Error(r(311));g.lastRenderedReducer=f;var v=a.baseQueue,E=g.pending;if(E!==null){if(v!==null){var _=v.next;v.next=E.next,E.next=_}c.baseQueue=v=E,g.pending=null}if(E=a.baseState,v===null)a.memoizedState=E;else{c=v.next;var P=_=null,G=null,se=c,fe=!1;do{var me=se.lane&-536870913;if(me!==se.lane?(ct&me)===me:(eo&me)===me){var le=se.revertLane;if(le===0)G!==null&&(G=G.next={lane:0,revertLane:0,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null}),me===fl&&(fe=!0);else if((eo&le)===le){se=se.next,le===fl&&(fe=!0);continue}else me={lane:0,revertLane:se.revertLane,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},G===null?(P=G=me,_=E):G=G.next=me,et.lanes|=le,ao|=le;me=se.action,oa&&f(E,me),E=se.hasEagerState?se.eagerState:f(E,me)}else le={lane:me,revertLane:se.revertLane,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},G===null?(P=G=le,_=E):G=G.next=le,et.lanes|=me,ao|=me;se=se.next}while(se!==null&&se!==c);if(G===null?_=E:G.next=P,!jr(E,a.memoizedState)&&(On=!0,fe&&(f=hl,f!==null)))throw f;a.memoizedState=E,a.baseState=_,a.baseQueue=G,g.lastRenderedState=E}return v===null&&(g.lanes=0),[a.memoizedState,g.dispatch]}function by(a){var c=gn(),f=c.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=a;var g=f.dispatch,v=f.pending,E=c.memoizedState;if(v!==null){f.pending=null;var _=v=v.next;do E=a(E,_.action),_=_.next;while(_!==v);jr(E,c.memoizedState)||(On=!0),c.memoizedState=E,c.baseQueue===null&&(c.baseState=E),f.lastRenderedState=E}return[E,g]}function _T(a,c,f){var g=et,v=gn(),E=pt;if(E){if(f===void 0)throw Error(r(407));f=f()}else f=c();var _=!jr((xt||v).memoizedState,f);_&&(v.memoizedState=f,On=!0),v=v.queue;var P=jT.bind(null,g,v,a);if(Xc(2048,8,P,[a]),v.getSnapshot!==c||_||mn!==null&&mn.memoizedState.tag&1){if(g.flags|=2048,yl(9,Of(),RT.bind(null,g,v,f,c),null),At===null)throw Error(r(349));E||(eo&124)!==0||DT(g,c,f)}return f}function DT(a,c,f){a.flags|=16384,a={getSnapshot:c,value:f},c=et.updateQueue,c===null?(c=my(),et.updateQueue=c,c.stores=[a]):(f=c.stores,f===null?c.stores=[a]:f.push(a))}function RT(a,c,f,g){c.value=f,c.getSnapshot=g,OT(c)&&LT(a)}function jT(a,c,f){return f(function(){OT(c)&&LT(a)})}function OT(a){var c=a.getSnapshot;a=a.value;try{var f=c();return!jr(a,f)}catch{return!0}}function LT(a){var c=ll(a,2);c!==null&&zr(c,a,2)}function vy(a){var c=vr();if(typeof a=="function"){var f=a;if(a=f(),oa){qe(!0);try{f()}finally{qe(!1)}}}return c.memoizedState=c.baseState=a,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gs,lastRenderedState:a},c}function PT(a,c,f,g){return a.baseState=f,yy(a,xt,typeof g=="function"?g:gs)}function PH(a,c,f,g,v){if(Pf(a))throw Error(r(485));if(a=c.action,a!==null){var E={payload:v,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(_){E.listeners.push(_)}};O.T!==null?f(!0):E.isTransition=!1,g(E),f=c.pending,f===null?(E.next=c.pending=E,IT(c,E)):(E.next=f.next,c.pending=f.next=E)}}function IT(a,c){var f=c.action,g=c.payload,v=a.state;if(c.isTransition){var E=O.T,_={};O.T=_;try{var P=f(v,g),G=O.S;G!==null&&G(_,P),BT(a,c,P)}catch(se){xy(a,c,se)}finally{O.T=E}}else try{E=f(v,g),BT(a,c,E)}catch(se){xy(a,c,se)}}function BT(a,c,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(g){zT(a,c,g)},function(g){return xy(a,c,g)}):zT(a,c,f)}function zT(a,c,f){c.status="fulfilled",c.value=f,qT(c),a.state=f,c=a.pending,c!==null&&(f=c.next,f===c?a.pending=null:(f=f.next,c.next=f,IT(a,f)))}function xy(a,c,f){var g=a.pending;if(a.pending=null,g!==null){g=g.next;do c.status="rejected",c.reason=f,qT(c),c=c.next;while(c!==g)}a.action=null}function qT(a){a=a.listeners;for(var c=0;c<a.length;c++)(0,a[c])()}function VT(a,c){return c}function HT(a,c){if(pt){var f=At.formState;if(f!==null){e:{var g=et;if(pt){if(Zt){t:{for(var v=Zt,E=qi;v.nodeType!==8;){if(!E){v=null;break t}if(v=Ei(v.nextSibling),v===null){v=null;break t}}E=v.data,v=E==="F!"||E==="F"?v:null}if(v){Zt=Ei(v.nextSibling),g=v.data==="F!";break e}}na(g)}g=!1}g&&(c=f[0])}}return f=vr(),f.memoizedState=f.baseState=c,g={pending:null,lanes:0,dispatch:null,lastRenderedReducer:VT,lastRenderedState:c},f.queue=g,f=aN.bind(null,et,g),g.dispatch=f,g=vy(!1),E=ky.bind(null,et,!1,g.queue),g=vr(),v={state:c,dispatch:null,action:a,pending:null},g.queue=v,f=PH.bind(null,et,v,E,f),v.dispatch=f,g.memoizedState=a,[c,f,!1]}function FT(a){var c=gn();return UT(c,xt,a)}function UT(a,c,f){if(c=yy(a,c,VT)[0],a=jf(gs)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var g=Yc(c)}catch(_){throw _===Fc?Nf:_}else g=c;c=gn();var v=c.queue,E=v.dispatch;return f!==c.memoizedState&&(et.flags|=2048,yl(9,Of(),IH.bind(null,v,f),null)),[g,E,a]}function IH(a,c){a.action=c}function $T(a){var c=gn(),f=xt;if(f!==null)return UT(c,f,a);gn(),c=c.memoizedState,f=gn();var g=f.queue.dispatch;return f.memoizedState=a,[c,g,!1]}function yl(a,c,f,g){return a={tag:a,create:f,deps:g,inst:c,next:null},c=et.updateQueue,c===null&&(c=my(),et.updateQueue=c),f=c.lastEffect,f===null?c.lastEffect=a.next=a:(g=f.next,f.next=a,a.next=g,c.lastEffect=a),a}function Of(){return{destroy:void 0,resource:void 0}}function GT(){return gn().memoizedState}function Lf(a,c,f,g){var v=vr();g=g===void 0?null:g,et.flags|=a,v.memoizedState=yl(1|c,Of(),f,g)}function Xc(a,c,f,g){var v=gn();g=g===void 0?null:g;var E=v.memoizedState.inst;xt!==null&&g!==null&&uy(g,xt.memoizedState.deps)?v.memoizedState=yl(c,E,f,g):(et.flags|=a,v.memoizedState=yl(1|c,E,f,g))}function WT(a,c){Lf(8390656,8,a,c)}function KT(a,c){Xc(2048,8,a,c)}function YT(a,c){return Xc(4,2,a,c)}function XT(a,c){return Xc(4,4,a,c)}function ZT(a,c){if(typeof c=="function"){a=a();var f=c(a);return function(){typeof f=="function"?f():c(null)}}if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function JT(a,c,f){f=f!=null?f.concat([a]):null,Xc(4,4,ZT.bind(null,c,a),f)}function wy(){}function QT(a,c){var f=gn();c=c===void 0?null:c;var g=f.memoizedState;return c!==null&&uy(c,g[1])?g[0]:(f.memoizedState=[a,c],a)}function eN(a,c){var f=gn();c=c===void 0?null:c;var g=f.memoizedState;if(c!==null&&uy(c,g[1]))return g[0];if(g=a(),oa){qe(!0);try{a()}finally{qe(!1)}}return f.memoizedState=[g,c],g}function Sy(a,c,f){return f===void 0||(eo&1073741824)!==0?a.memoizedState=c:(a.memoizedState=f,a=rA(),et.lanes|=a,ao|=a,f)}function tN(a,c,f,g){return jr(f,c)?f:pl.current!==null?(a=Sy(a,f,g),jr(a,c)||(On=!0),a):(eo&42)===0?(On=!0,a.memoizedState=f):(a=rA(),et.lanes|=a,ao|=a,c)}function nN(a,c,f,g,v){var E=V.p;V.p=E!==0&&8>E?E:8;var _=O.T,P={};O.T=P,ky(a,!1,c,f);try{var G=v(),se=O.S;if(se!==null&&se(P,G),G!==null&&typeof G=="object"&&typeof G.then=="function"){var fe=jH(G,g);Zc(a,c,fe,Br(a))}else Zc(a,c,g,Br(a))}catch(me){Zc(a,c,{then:function(){},status:"rejected",reason:me},Br())}finally{V.p=E,O.T=_}}function BH(){}function Ey(a,c,f,g){if(a.tag!==5)throw Error(r(476));var v=rN(a).queue;nN(a,v,c,Y,f===null?BH:function(){return iN(a),f(g)})}function rN(a){var c=a.memoizedState;if(c!==null)return c;c={memoizedState:Y,baseState:Y,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gs,lastRenderedState:Y},next:null};var f={};return c.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gs,lastRenderedState:f},next:null},a.memoizedState=c,a=a.alternate,a!==null&&(a.memoizedState=c),c}function iN(a){var c=rN(a).next.queue;Zc(a,c,{},Br())}function Cy(){return Qn(mu)}function sN(){return gn().memoizedState}function oN(){return gn().memoizedState}function zH(a){for(var c=a.return;c!==null;){switch(c.tag){case 24:case 3:var f=Br();a=Js(f);var g=Qs(c,a,f);g!==null&&(zr(g,c,f),$c(g,c,f)),c={cache:ey()},a.payload=c;return}c=c.return}}function qH(a,c,f){var g=Br();f={lane:g,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},Pf(a)?lN(c,f):(f=Ug(a,c,f,g),f!==null&&(zr(f,a,g),cN(f,c,g)))}function aN(a,c,f){var g=Br();Zc(a,c,f,g)}function Zc(a,c,f,g){var v={lane:g,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if(Pf(a))lN(c,v);else{var E=a.alternate;if(a.lanes===0&&(E===null||E.lanes===0)&&(E=c.lastRenderedReducer,E!==null))try{var _=c.lastRenderedState,P=E(_,f);if(v.hasEagerState=!0,v.eagerState=P,jr(P,_))return vf(a,c,v,0),At===null&&bf(),!1}catch{}finally{}if(f=Ug(a,c,v,g),f!==null)return zr(f,a,g),cN(f,c,g),!0}return!1}function ky(a,c,f,g){if(g={lane:2,revertLane:r0(),action:g,hasEagerState:!1,eagerState:null,next:null},Pf(a)){if(c)throw Error(r(479))}else c=Ug(a,f,g,2),c!==null&&zr(c,a,2)}function Pf(a){var c=a.alternate;return a===et||c!==null&&c===et}function lN(a,c){ml=_f=!0;var f=a.pending;f===null?c.next=c:(c.next=f.next,f.next=c),a.pending=c}function cN(a,c,f){if((f&4194048)!==0){var g=c.lanes;g&=a.pendingLanes,f|=g,c.lanes=f,Yr(a,f)}}var If={readContext:Qn,use:Rf,useCallback:ln,useContext:ln,useEffect:ln,useImperativeHandle:ln,useLayoutEffect:ln,useInsertionEffect:ln,useMemo:ln,useReducer:ln,useRef:ln,useState:ln,useDebugValue:ln,useDeferredValue:ln,useTransition:ln,useSyncExternalStore:ln,useId:ln,useHostTransitionStatus:ln,useFormState:ln,useActionState:ln,useOptimistic:ln,useMemoCache:ln,useCacheRefresh:ln},uN={readContext:Qn,use:Rf,useCallback:function(a,c){return vr().memoizedState=[a,c===void 0?null:c],a},useContext:Qn,useEffect:WT,useImperativeHandle:function(a,c,f){f=f!=null?f.concat([a]):null,Lf(4194308,4,ZT.bind(null,c,a),f)},useLayoutEffect:function(a,c){return Lf(4194308,4,a,c)},useInsertionEffect:function(a,c){Lf(4,2,a,c)},useMemo:function(a,c){var f=vr();c=c===void 0?null:c;var g=a();if(oa){qe(!0);try{a()}finally{qe(!1)}}return f.memoizedState=[g,c],g},useReducer:function(a,c,f){var g=vr();if(f!==void 0){var v=f(c);if(oa){qe(!0);try{f(c)}finally{qe(!1)}}}else v=c;return g.memoizedState=g.baseState=v,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:v},g.queue=a,a=a.dispatch=qH.bind(null,et,a),[g.memoizedState,a]},useRef:function(a){var c=vr();return a={current:a},c.memoizedState=a},useState:function(a){a=vy(a);var c=a.queue,f=aN.bind(null,et,c);return c.dispatch=f,[a.memoizedState,f]},useDebugValue:wy,useDeferredValue:function(a,c){var f=vr();return Sy(f,a,c)},useTransition:function(){var a=vy(!1);return a=nN.bind(null,et,a.queue,!0,!1),vr().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,c,f){var g=et,v=vr();if(pt){if(f===void 0)throw Error(r(407));f=f()}else{if(f=c(),At===null)throw Error(r(349));(ct&124)!==0||DT(g,c,f)}v.memoizedState=f;var E={value:f,getSnapshot:c};return v.queue=E,WT(jT.bind(null,g,E,a),[a]),g.flags|=2048,yl(9,Of(),RT.bind(null,g,E,f,c),null),f},useId:function(){var a=vr(),c=At.identifierPrefix;if(pt){var f=hs,g=fs;f=(g&~(1<<32-Ve(g)-1)).toString(32)+f,c=""+c+"R"+f,f=Df++,0<f&&(c+="H"+f.toString(32)),c+=""}else f=OH++,c=""+c+"r"+f.toString(32)+"";return a.memoizedState=c},useHostTransitionStatus:Cy,useFormState:HT,useActionState:HT,useOptimistic:function(a){var c=vr();c.memoizedState=c.baseState=a;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=f,c=ky.bind(null,et,!0,f),f.dispatch=c,[a,c]},useMemoCache:gy,useCacheRefresh:function(){return vr().memoizedState=zH.bind(null,et)}},dN={readContext:Qn,use:Rf,useCallback:QT,useContext:Qn,useEffect:KT,useImperativeHandle:JT,useInsertionEffect:YT,useLayoutEffect:XT,useMemo:eN,useReducer:jf,useRef:GT,useState:function(){return jf(gs)},useDebugValue:wy,useDeferredValue:function(a,c){var f=gn();return tN(f,xt.memoizedState,a,c)},useTransition:function(){var a=jf(gs)[0],c=gn().memoizedState;return[typeof a=="boolean"?a:Yc(a),c]},useSyncExternalStore:_T,useId:sN,useHostTransitionStatus:Cy,useFormState:FT,useActionState:FT,useOptimistic:function(a,c){var f=gn();return PT(f,xt,a,c)},useMemoCache:gy,useCacheRefresh:oN},VH={readContext:Qn,use:Rf,useCallback:QT,useContext:Qn,useEffect:KT,useImperativeHandle:JT,useInsertionEffect:YT,useLayoutEffect:XT,useMemo:eN,useReducer:by,useRef:GT,useState:function(){return by(gs)},useDebugValue:wy,useDeferredValue:function(a,c){var f=gn();return xt===null?Sy(f,a,c):tN(f,xt.memoizedState,a,c)},useTransition:function(){var a=by(gs)[0],c=gn().memoizedState;return[typeof a=="boolean"?a:Yc(a),c]},useSyncExternalStore:_T,useId:sN,useHostTransitionStatus:Cy,useFormState:$T,useActionState:$T,useOptimistic:function(a,c){var f=gn();return xt!==null?PT(f,xt,a,c):(f.baseState=a,[a,f.queue.dispatch])},useMemoCache:gy,useCacheRefresh:oN},bl=null,Jc=0;function Bf(a){var c=Jc;return Jc+=1,bl===null&&(bl=[]),ST(bl,a,c)}function Qc(a,c){c=c.props.ref,a.ref=c!==void 0?c:null}function zf(a,c){throw c.$$typeof===p?Error(r(525)):(a=Object.prototype.toString.call(c),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a)))}function fN(a){var c=a._init;return c(a._payload)}function hN(a){function c(ne,Q){if(a){var re=ne.deletions;re===null?(ne.deletions=[Q],ne.flags|=16):re.push(Q)}}function f(ne,Q){if(!a)return null;for(;Q!==null;)c(ne,Q),Q=Q.sibling;return null}function g(ne){for(var Q=new Map;ne!==null;)ne.key!==null?Q.set(ne.key,ne):Q.set(ne.index,ne),ne=ne.sibling;return Q}function v(ne,Q){return ne=ds(ne,Q),ne.index=0,ne.sibling=null,ne}function E(ne,Q,re){return ne.index=re,a?(re=ne.alternate,re!==null?(re=re.index,re<Q?(ne.flags|=67108866,Q):re):(ne.flags|=67108866,Q)):(ne.flags|=1048576,Q)}function _(ne){return a&&ne.alternate===null&&(ne.flags|=67108866),ne}function P(ne,Q,re,he){return Q===null||Q.tag!==6?(Q=Gg(re,ne.mode,he),Q.return=ne,Q):(Q=v(Q,re),Q.return=ne,Q)}function G(ne,Q,re,he){var Re=re.type;return Re===x?fe(ne,Q,re.props.children,he,re.key):Q!==null&&(Q.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===R&&fN(Re)===Q.type)?(Q=v(Q,re.props),Qc(Q,re),Q.return=ne,Q):(Q=wf(re.type,re.key,re.props,null,ne.mode,he),Qc(Q,re),Q.return=ne,Q)}function se(ne,Q,re,he){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==re.containerInfo||Q.stateNode.implementation!==re.implementation?(Q=Wg(re,ne.mode,he),Q.return=ne,Q):(Q=v(Q,re.children||[]),Q.return=ne,Q)}function fe(ne,Q,re,he,Re){return Q===null||Q.tag!==7?(Q=Jo(re,ne.mode,he,Re),Q.return=ne,Q):(Q=v(Q,re),Q.return=ne,Q)}function me(ne,Q,re){if(typeof Q=="string"&&Q!==""||typeof Q=="number"||typeof Q=="bigint")return Q=Gg(""+Q,ne.mode,re),Q.return=ne,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case m:return re=wf(Q.type,Q.key,Q.props,null,ne.mode,re),Qc(re,Q),re.return=ne,re;case b:return Q=Wg(Q,ne.mode,re),Q.return=ne,Q;case R:var he=Q._init;return Q=he(Q._payload),me(ne,Q,re)}if(F(Q)||q(Q))return Q=Jo(Q,ne.mode,re,null),Q.return=ne,Q;if(typeof Q.then=="function")return me(ne,Bf(Q),re);if(Q.$$typeof===k)return me(ne,kf(ne,Q),re);zf(ne,Q)}return null}function le(ne,Q,re,he){var Re=Q!==null?Q.key:null;if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return Re!==null?null:P(ne,Q,""+re,he);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case m:return re.key===Re?G(ne,Q,re,he):null;case b:return re.key===Re?se(ne,Q,re,he):null;case R:return Re=re._init,re=Re(re._payload),le(ne,Q,re,he)}if(F(re)||q(re))return Re!==null?null:fe(ne,Q,re,he,null);if(typeof re.then=="function")return le(ne,Q,Bf(re),he);if(re.$$typeof===k)return le(ne,Q,kf(ne,re),he);zf(ne,re)}return null}function ue(ne,Q,re,he,Re){if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return ne=ne.get(re)||null,P(Q,ne,""+he,Re);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case m:return ne=ne.get(he.key===null?re:he.key)||null,G(Q,ne,he,Re);case b:return ne=ne.get(he.key===null?re:he.key)||null,se(Q,ne,he,Re);case R:var tt=he._init;return he=tt(he._payload),ue(ne,Q,re,he,Re)}if(F(he)||q(he))return ne=ne.get(re)||null,fe(Q,ne,he,Re,null);if(typeof he.then=="function")return ue(ne,Q,re,Bf(he),Re);if(he.$$typeof===k)return ue(ne,Q,re,kf(Q,he),Re);zf(Q,he)}return null}function $e(ne,Q,re,he){for(var Re=null,tt=null,Le=Q,Ue=Q=0,Pn=null;Le!==null&&Ue<re.length;Ue++){Le.index>Ue?(Pn=Le,Le=null):Pn=Le.sibling;var ft=le(ne,Le,re[Ue],he);if(ft===null){Le===null&&(Le=Pn);break}a&&Le&&ft.alternate===null&&c(ne,Le),Q=E(ft,Q,Ue),tt===null?Re=ft:tt.sibling=ft,tt=ft,Le=Pn}if(Ue===re.length)return f(ne,Le),pt&&ea(ne,Ue),Re;if(Le===null){for(;Ue<re.length;Ue++)Le=me(ne,re[Ue],he),Le!==null&&(Q=E(Le,Q,Ue),tt===null?Re=Le:tt.sibling=Le,tt=Le);return pt&&ea(ne,Ue),Re}for(Le=g(Le);Ue<re.length;Ue++)Pn=ue(Le,ne,Ue,re[Ue],he),Pn!==null&&(a&&Pn.alternate!==null&&Le.delete(Pn.key===null?Ue:Pn.key),Q=E(Pn,Q,Ue),tt===null?Re=Pn:tt.sibling=Pn,tt=Pn);return a&&Le.forEach(function(yo){return c(ne,yo)}),pt&&ea(ne,Ue),Re}function He(ne,Q,re,he){if(re==null)throw Error(r(151));for(var Re=null,tt=null,Le=Q,Ue=Q=0,Pn=null,ft=re.next();Le!==null&&!ft.done;Ue++,ft=re.next()){Le.index>Ue?(Pn=Le,Le=null):Pn=Le.sibling;var yo=le(ne,Le,ft.value,he);if(yo===null){Le===null&&(Le=Pn);break}a&&Le&&yo.alternate===null&&c(ne,Le),Q=E(yo,Q,Ue),tt===null?Re=yo:tt.sibling=yo,tt=yo,Le=Pn}if(ft.done)return f(ne,Le),pt&&ea(ne,Ue),Re;if(Le===null){for(;!ft.done;Ue++,ft=re.next())ft=me(ne,ft.value,he),ft!==null&&(Q=E(ft,Q,Ue),tt===null?Re=ft:tt.sibling=ft,tt=ft);return pt&&ea(ne,Ue),Re}for(Le=g(Le);!ft.done;Ue++,ft=re.next())ft=ue(Le,ne,Ue,ft.value,he),ft!==null&&(a&&ft.alternate!==null&&Le.delete(ft.key===null?Ue:ft.key),Q=E(ft,Q,Ue),tt===null?Re=ft:tt.sibling=ft,tt=ft);return a&&Le.forEach(function(HF){return c(ne,HF)}),pt&&ea(ne,Ue),Re}function St(ne,Q,re,he){if(typeof re=="object"&&re!==null&&re.type===x&&re.key===null&&(re=re.props.children),typeof re=="object"&&re!==null){switch(re.$$typeof){case m:e:{for(var Re=re.key;Q!==null;){if(Q.key===Re){if(Re=re.type,Re===x){if(Q.tag===7){f(ne,Q.sibling),he=v(Q,re.props.children),he.return=ne,ne=he;break e}}else if(Q.elementType===Re||typeof Re=="object"&&Re!==null&&Re.$$typeof===R&&fN(Re)===Q.type){f(ne,Q.sibling),he=v(Q,re.props),Qc(he,re),he.return=ne,ne=he;break e}f(ne,Q);break}else c(ne,Q);Q=Q.sibling}re.type===x?(he=Jo(re.props.children,ne.mode,he,re.key),he.return=ne,ne=he):(he=wf(re.type,re.key,re.props,null,ne.mode,he),Qc(he,re),he.return=ne,ne=he)}return _(ne);case b:e:{for(Re=re.key;Q!==null;){if(Q.key===Re)if(Q.tag===4&&Q.stateNode.containerInfo===re.containerInfo&&Q.stateNode.implementation===re.implementation){f(ne,Q.sibling),he=v(Q,re.children||[]),he.return=ne,ne=he;break e}else{f(ne,Q);break}else c(ne,Q);Q=Q.sibling}he=Wg(re,ne.mode,he),he.return=ne,ne=he}return _(ne);case R:return Re=re._init,re=Re(re._payload),St(ne,Q,re,he)}if(F(re))return $e(ne,Q,re,he);if(q(re)){if(Re=q(re),typeof Re!="function")throw Error(r(150));return re=Re.call(re),He(ne,Q,re,he)}if(typeof re.then=="function")return St(ne,Q,Bf(re),he);if(re.$$typeof===k)return St(ne,Q,kf(ne,re),he);zf(ne,re)}return typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint"?(re=""+re,Q!==null&&Q.tag===6?(f(ne,Q.sibling),he=v(Q,re),he.return=ne,ne=he):(f(ne,Q),he=Gg(re,ne.mode,he),he.return=ne,ne=he),_(ne)):f(ne,Q)}return function(ne,Q,re,he){try{Jc=0;var Re=St(ne,Q,re,he);return bl=null,Re}catch(Le){if(Le===Fc||Le===Nf)throw Le;var tt=Or(29,Le,null,ne.mode);return tt.lanes=he,tt.return=ne,tt}finally{}}}var vl=hN(!0),pN=hN(!1),ti=$(null),Vi=null;function to(a){var c=a.alternate;ae(Mn,Mn.current&1),ae(ti,a),Vi===null&&(c===null||pl.current!==null||c.memoizedState!==null)&&(Vi=a)}function mN(a){if(a.tag===22){if(ae(Mn,Mn.current),ae(ti,a),Vi===null){var c=a.alternate;c!==null&&c.memoizedState!==null&&(Vi=a)}}else no()}function no(){ae(Mn,Mn.current),ae(ti,ti.current)}function ys(a){oe(ti),Vi===a&&(Vi=null),oe(Mn)}var Mn=$(0);function qf(a){for(var c=a;c!==null;){if(c.tag===13){var f=c.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||m0(f)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function Ty(a,c,f,g){c=a.memoizedState,f=f(g,c),f=f==null?c:h({},c,f),a.memoizedState=f,a.lanes===0&&(a.updateQueue.baseState=f)}var Ny={enqueueSetState:function(a,c,f){a=a._reactInternals;var g=Br(),v=Js(g);v.payload=c,f!=null&&(v.callback=f),c=Qs(a,v,g),c!==null&&(zr(c,a,g),$c(c,a,g))},enqueueReplaceState:function(a,c,f){a=a._reactInternals;var g=Br(),v=Js(g);v.tag=1,v.payload=c,f!=null&&(v.callback=f),c=Qs(a,v,g),c!==null&&(zr(c,a,g),$c(c,a,g))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var f=Br(),g=Js(f);g.tag=2,c!=null&&(g.callback=c),c=Qs(a,g,f),c!==null&&(zr(c,a,f),$c(c,a,f))}};function gN(a,c,f,g,v,E,_){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(g,E,_):c.prototype&&c.prototype.isPureReactComponent?!Lc(f,g)||!Lc(v,E):!0}function yN(a,c,f,g){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(f,g),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(f,g),c.state!==a&&Ny.enqueueReplaceState(c,c.state,null)}function aa(a,c){var f=c;if("ref"in c){f={};for(var g in c)g!=="ref"&&(f[g]=c[g])}if(a=a.defaultProps){f===c&&(f=h({},f));for(var v in a)f[v]===void 0&&(f[v]=a[v])}return f}var Vf=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function bN(a){Vf(a)}function vN(a){console.error(a)}function xN(a){Vf(a)}function Hf(a,c){try{var f=a.onUncaughtError;f(c.value,{componentStack:c.stack})}catch(g){setTimeout(function(){throw g})}}function wN(a,c,f){try{var g=a.onCaughtError;g(f.value,{componentStack:f.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Ay(a,c,f){return f=Js(f),f.tag=3,f.payload={element:null},f.callback=function(){Hf(a,c)},f}function SN(a){return a=Js(a),a.tag=3,a}function EN(a,c,f,g){var v=f.type.getDerivedStateFromError;if(typeof v=="function"){var E=g.value;a.payload=function(){return v(E)},a.callback=function(){wN(c,f,g)}}var _=f.stateNode;_!==null&&typeof _.componentDidCatch=="function"&&(a.callback=function(){wN(c,f,g),typeof v!="function"&&(lo===null?lo=new Set([this]):lo.add(this));var P=g.stack;this.componentDidCatch(g.value,{componentStack:P!==null?P:""})})}function HH(a,c,f,g,v){if(f.flags|=32768,g!==null&&typeof g=="object"&&typeof g.then=="function"){if(c=f.alternate,c!==null&&qc(c,f,v,!0),f=ti.current,f!==null){switch(f.tag){case 13:return Vi===null?Jy():f.alternate===null&&Jt===0&&(Jt=3),f.flags&=-257,f.flags|=65536,f.lanes=v,g===ry?f.flags|=16384:(c=f.updateQueue,c===null?f.updateQueue=new Set([g]):c.add(g),e0(a,g,v)),!1;case 22:return f.flags|=65536,g===ry?f.flags|=16384:(c=f.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([g])},f.updateQueue=c):(f=c.retryQueue,f===null?c.retryQueue=new Set([g]):f.add(g)),e0(a,g,v)),!1}throw Error(r(435,f.tag))}return e0(a,g,v),Jy(),!1}if(pt)return c=ti.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=v,g!==Xg&&(a=Error(r(422),{cause:g}),zc(Zr(a,f)))):(g!==Xg&&(c=Error(r(423),{cause:g}),zc(Zr(c,f))),a=a.current.alternate,a.flags|=65536,v&=-v,a.lanes|=v,g=Zr(g,f),v=Ay(a.stateNode,g,v),oy(a,v),Jt!==4&&(Jt=2)),!1;var E=Error(r(520),{cause:g});if(E=Zr(E,f),ou===null?ou=[E]:ou.push(E),Jt!==4&&(Jt=2),c===null)return!0;g=Zr(g,f),f=c;do{switch(f.tag){case 3:return f.flags|=65536,a=v&-v,f.lanes|=a,a=Ay(f.stateNode,g,a),oy(f,a),!1;case 1:if(c=f.type,E=f.stateNode,(f.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(lo===null||!lo.has(E))))return f.flags|=65536,v&=-v,f.lanes|=v,v=SN(v),EN(v,a,f,g),oy(f,v),!1}f=f.return}while(f!==null);return!1}var CN=Error(r(461)),On=!1;function Vn(a,c,f,g){c.child=a===null?pN(c,null,f,g):vl(c,a.child,f,g)}function kN(a,c,f,g,v){f=f.render;var E=c.ref;if("ref"in g){var _={};for(var P in g)P!=="ref"&&(_[P]=g[P])}else _=g;return ia(c),g=dy(a,c,f,_,E,v),P=fy(),a!==null&&!On?(hy(a,c,v),bs(a,c,v)):(pt&&P&&Kg(c),c.flags|=1,Vn(a,c,g,v),c.child)}function TN(a,c,f,g,v){if(a===null){var E=f.type;return typeof E=="function"&&!$g(E)&&E.defaultProps===void 0&&f.compare===null?(c.tag=15,c.type=E,NN(a,c,E,g,v)):(a=wf(f.type,null,g,c,c.mode,v),a.ref=c.ref,a.return=c,c.child=a)}if(E=a.child,!Py(a,v)){var _=E.memoizedProps;if(f=f.compare,f=f!==null?f:Lc,f(_,g)&&a.ref===c.ref)return bs(a,c,v)}return c.flags|=1,a=ds(E,g),a.ref=c.ref,a.return=c,c.child=a}function NN(a,c,f,g,v){if(a!==null){var E=a.memoizedProps;if(Lc(E,g)&&a.ref===c.ref)if(On=!1,c.pendingProps=g=E,Py(a,v))(a.flags&131072)!==0&&(On=!0);else return c.lanes=a.lanes,bs(a,c,v)}return My(a,c,f,g,v)}function AN(a,c,f){var g=c.pendingProps,v=g.children,E=a!==null?a.memoizedState:null;if(g.mode==="hidden"){if((c.flags&128)!==0){if(g=E!==null?E.baseLanes|f:f,a!==null){for(v=c.child=a.child,E=0;v!==null;)E=E|v.lanes|v.childLanes,v=v.sibling;c.childLanes=E&~g}else c.childLanes=0,c.child=null;return MN(a,c,g,f)}if((f&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},a!==null&&Tf(c,E!==null?E.cachePool:null),E!==null?NT(c,E):ly(),mN(c);else return c.lanes=c.childLanes=536870912,MN(a,c,E!==null?E.baseLanes|f:f,f)}else E!==null?(Tf(c,E.cachePool),NT(c,E),no(),c.memoizedState=null):(a!==null&&Tf(c,null),ly(),no());return Vn(a,c,v,f),c.child}function MN(a,c,f,g){var v=ny();return v=v===null?null:{parent:An._currentValue,pool:v},c.memoizedState={baseLanes:f,cachePool:v},a!==null&&Tf(c,null),ly(),mN(c),a!==null&&qc(a,c,g,!0),null}function Ff(a,c){var f=c.ref;if(f===null)a!==null&&a.ref!==null&&(c.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(a===null||a.ref!==f)&&(c.flags|=4194816)}}function My(a,c,f,g,v){return ia(c),f=dy(a,c,f,g,void 0,v),g=fy(),a!==null&&!On?(hy(a,c,v),bs(a,c,v)):(pt&&g&&Kg(c),c.flags|=1,Vn(a,c,f,v),c.child)}function _N(a,c,f,g,v,E){return ia(c),c.updateQueue=null,f=MT(c,g,f,v),AT(a),g=fy(),a!==null&&!On?(hy(a,c,E),bs(a,c,E)):(pt&&g&&Kg(c),c.flags|=1,Vn(a,c,f,E),c.child)}function DN(a,c,f,g,v){if(ia(c),c.stateNode===null){var E=cl,_=f.contextType;typeof _=="object"&&_!==null&&(E=Qn(_)),E=new f(g,E),c.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=Ny,c.stateNode=E,E._reactInternals=c,E=c.stateNode,E.props=g,E.state=c.memoizedState,E.refs={},iy(c),_=f.contextType,E.context=typeof _=="object"&&_!==null?Qn(_):cl,E.state=c.memoizedState,_=f.getDerivedStateFromProps,typeof _=="function"&&(Ty(c,f,_,g),E.state=c.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(_=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),_!==E.state&&Ny.enqueueReplaceState(E,E.state,null),Wc(c,g,E,v),Gc(),E.state=c.memoizedState),typeof E.componentDidMount=="function"&&(c.flags|=4194308),g=!0}else if(a===null){E=c.stateNode;var P=c.memoizedProps,G=aa(f,P);E.props=G;var se=E.context,fe=f.contextType;_=cl,typeof fe=="object"&&fe!==null&&(_=Qn(fe));var me=f.getDerivedStateFromProps;fe=typeof me=="function"||typeof E.getSnapshotBeforeUpdate=="function",P=c.pendingProps!==P,fe||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(P||se!==_)&&yN(c,E,g,_),Zs=!1;var le=c.memoizedState;E.state=le,Wc(c,g,E,v),Gc(),se=c.memoizedState,P||le!==se||Zs?(typeof me=="function"&&(Ty(c,f,me,g),se=c.memoizedState),(G=Zs||gN(c,f,G,g,le,se,_))?(fe||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(c.flags|=4194308)):(typeof E.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=g,c.memoizedState=se),E.props=g,E.state=se,E.context=_,g=G):(typeof E.componentDidMount=="function"&&(c.flags|=4194308),g=!1)}else{E=c.stateNode,sy(a,c),_=c.memoizedProps,fe=aa(f,_),E.props=fe,me=c.pendingProps,le=E.context,se=f.contextType,G=cl,typeof se=="object"&&se!==null&&(G=Qn(se)),P=f.getDerivedStateFromProps,(se=typeof P=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(_!==me||le!==G)&&yN(c,E,g,G),Zs=!1,le=c.memoizedState,E.state=le,Wc(c,g,E,v),Gc();var ue=c.memoizedState;_!==me||le!==ue||Zs||a!==null&&a.dependencies!==null&&Cf(a.dependencies)?(typeof P=="function"&&(Ty(c,f,P,g),ue=c.memoizedState),(fe=Zs||gN(c,f,fe,g,le,ue,G)||a!==null&&a.dependencies!==null&&Cf(a.dependencies))?(se||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(g,ue,G),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(g,ue,G)),typeof E.componentDidUpdate=="function"&&(c.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof E.componentDidUpdate!="function"||_===a.memoizedProps&&le===a.memoizedState||(c.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||_===a.memoizedProps&&le===a.memoizedState||(c.flags|=1024),c.memoizedProps=g,c.memoizedState=ue),E.props=g,E.state=ue,E.context=G,g=fe):(typeof E.componentDidUpdate!="function"||_===a.memoizedProps&&le===a.memoizedState||(c.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||_===a.memoizedProps&&le===a.memoizedState||(c.flags|=1024),g=!1)}return E=g,Ff(a,c),g=(c.flags&128)!==0,E||g?(E=c.stateNode,f=g&&typeof f.getDerivedStateFromError!="function"?null:E.render(),c.flags|=1,a!==null&&g?(c.child=vl(c,a.child,null,v),c.child=vl(c,null,f,v)):Vn(a,c,f,v),c.memoizedState=E.state,a=c.child):a=bs(a,c,v),a}function RN(a,c,f,g){return Bc(),c.flags|=256,Vn(a,c,f,g),c.child}var _y={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Dy(a){return{baseLanes:a,cachePool:vT()}}function Ry(a,c,f){return a=a!==null?a.childLanes&~f:0,c&&(a|=ni),a}function jN(a,c,f){var g=c.pendingProps,v=!1,E=(c.flags&128)!==0,_;if((_=E)||(_=a!==null&&a.memoizedState===null?!1:(Mn.current&2)!==0),_&&(v=!0,c.flags&=-129),_=(c.flags&32)!==0,c.flags&=-33,a===null){if(pt){if(v?to(c):no(),pt){var P=Zt,G;if(G=P){e:{for(G=P,P=qi;G.nodeType!==8;){if(!P){P=null;break e}if(G=Ei(G.nextSibling),G===null){P=null;break e}}P=G}P!==null?(c.memoizedState={dehydrated:P,treeContext:Qo!==null?{id:fs,overflow:hs}:null,retryLane:536870912,hydrationErrors:null},G=Or(18,null,null,0),G.stateNode=P,G.return=c,c.child=G,ar=c,Zt=null,G=!0):G=!1}G||na(c)}if(P=c.memoizedState,P!==null&&(P=P.dehydrated,P!==null))return m0(P)?c.lanes=32:c.lanes=536870912,null;ys(c)}return P=g.children,g=g.fallback,v?(no(),v=c.mode,P=Uf({mode:"hidden",children:P},v),g=Jo(g,v,f,null),P.return=c,g.return=c,P.sibling=g,c.child=P,v=c.child,v.memoizedState=Dy(f),v.childLanes=Ry(a,_,f),c.memoizedState=_y,g):(to(c),jy(c,P))}if(G=a.memoizedState,G!==null&&(P=G.dehydrated,P!==null)){if(E)c.flags&256?(to(c),c.flags&=-257,c=Oy(a,c,f)):c.memoizedState!==null?(no(),c.child=a.child,c.flags|=128,c=null):(no(),v=g.fallback,P=c.mode,g=Uf({mode:"visible",children:g.children},P),v=Jo(v,P,f,null),v.flags|=2,g.return=c,v.return=c,g.sibling=v,c.child=g,vl(c,a.child,null,f),g=c.child,g.memoizedState=Dy(f),g.childLanes=Ry(a,_,f),c.memoizedState=_y,c=v);else if(to(c),m0(P)){if(_=P.nextSibling&&P.nextSibling.dataset,_)var se=_.dgst;_=se,g=Error(r(419)),g.stack="",g.digest=_,zc({value:g,source:null,stack:null}),c=Oy(a,c,f)}else if(On||qc(a,c,f,!1),_=(f&a.childLanes)!==0,On||_){if(_=At,_!==null&&(g=f&-f,g=(g&42)!==0?1:vt(g),g=(g&(_.suspendedLanes|f))!==0?0:g,g!==0&&g!==G.retryLane))throw G.retryLane=g,ll(a,g),zr(_,a,g),CN;P.data==="$?"||Jy(),c=Oy(a,c,f)}else P.data==="$?"?(c.flags|=192,c.child=a.child,c=null):(a=G.treeContext,Zt=Ei(P.nextSibling),ar=c,pt=!0,ta=null,qi=!1,a!==null&&(Qr[ei++]=fs,Qr[ei++]=hs,Qr[ei++]=Qo,fs=a.id,hs=a.overflow,Qo=c),c=jy(c,g.children),c.flags|=4096);return c}return v?(no(),v=g.fallback,P=c.mode,G=a.child,se=G.sibling,g=ds(G,{mode:"hidden",children:g.children}),g.subtreeFlags=G.subtreeFlags&65011712,se!==null?v=ds(se,v):(v=Jo(v,P,f,null),v.flags|=2),v.return=c,g.return=c,g.sibling=v,c.child=g,g=v,v=c.child,P=a.child.memoizedState,P===null?P=Dy(f):(G=P.cachePool,G!==null?(se=An._currentValue,G=G.parent!==se?{parent:se,pool:se}:G):G=vT(),P={baseLanes:P.baseLanes|f,cachePool:G}),v.memoizedState=P,v.childLanes=Ry(a,_,f),c.memoizedState=_y,g):(to(c),f=a.child,a=f.sibling,f=ds(f,{mode:"visible",children:g.children}),f.return=c,f.sibling=null,a!==null&&(_=c.deletions,_===null?(c.deletions=[a],c.flags|=16):_.push(a)),c.child=f,c.memoizedState=null,f)}function jy(a,c){return c=Uf({mode:"visible",children:c},a.mode),c.return=a,a.child=c}function Uf(a,c){return a=Or(22,a,null,c),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function Oy(a,c,f){return vl(c,a.child,null,f),a=jy(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function ON(a,c,f){a.lanes|=c;var g=a.alternate;g!==null&&(g.lanes|=c),Jg(a.return,c,f)}function Ly(a,c,f,g,v){var E=a.memoizedState;E===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:g,tail:f,tailMode:v}:(E.isBackwards=c,E.rendering=null,E.renderingStartTime=0,E.last=g,E.tail=f,E.tailMode=v)}function LN(a,c,f){var g=c.pendingProps,v=g.revealOrder,E=g.tail;if(Vn(a,c,g.children,f),g=Mn.current,(g&2)!==0)g=g&1|2,c.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&ON(a,f,c);else if(a.tag===19)ON(a,f,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}g&=1}switch(ae(Mn,g),v){case"forwards":for(f=c.child,v=null;f!==null;)a=f.alternate,a!==null&&qf(a)===null&&(v=f),f=f.sibling;f=v,f===null?(v=c.child,c.child=null):(v=f.sibling,f.sibling=null),Ly(c,!1,v,f,E);break;case"backwards":for(f=null,v=c.child,c.child=null;v!==null;){if(a=v.alternate,a!==null&&qf(a)===null){c.child=v;break}a=v.sibling,v.sibling=f,f=v,v=a}Ly(c,!0,f,null,E);break;case"together":Ly(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function bs(a,c,f){if(a!==null&&(c.dependencies=a.dependencies),ao|=c.lanes,(f&c.childLanes)===0)if(a!==null){if(qc(a,c,f,!1),(f&c.childLanes)===0)return null}else return null;if(a!==null&&c.child!==a.child)throw Error(r(153));if(c.child!==null){for(a=c.child,f=ds(a,a.pendingProps),c.child=f,f.return=c;a.sibling!==null;)a=a.sibling,f=f.sibling=ds(a,a.pendingProps),f.return=c;f.sibling=null}return c.child}function Py(a,c){return(a.lanes&c)!==0?!0:(a=a.dependencies,!!(a!==null&&Cf(a)))}function FH(a,c,f){switch(c.tag){case 3:ce(c,c.stateNode.containerInfo),Xs(c,An,a.memoizedState.cache),Bc();break;case 27:case 5:De(c);break;case 4:ce(c,c.stateNode.containerInfo);break;case 10:Xs(c,c.type,c.memoizedProps.value);break;case 13:var g=c.memoizedState;if(g!==null)return g.dehydrated!==null?(to(c),c.flags|=128,null):(f&c.child.childLanes)!==0?jN(a,c,f):(to(c),a=bs(a,c,f),a!==null?a.sibling:null);to(c);break;case 19:var v=(a.flags&128)!==0;if(g=(f&c.childLanes)!==0,g||(qc(a,c,f,!1),g=(f&c.childLanes)!==0),v){if(g)return LN(a,c,f);c.flags|=128}if(v=c.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),ae(Mn,Mn.current),g)break;return null;case 22:case 23:return c.lanes=0,AN(a,c,f);case 24:Xs(c,An,a.memoizedState.cache)}return bs(a,c,f)}function PN(a,c,f){if(a!==null)if(a.memoizedProps!==c.pendingProps)On=!0;else{if(!Py(a,f)&&(c.flags&128)===0)return On=!1,FH(a,c,f);On=(a.flags&131072)!==0}else On=!1,pt&&(c.flags&1048576)!==0&&fT(c,Ef,c.index);switch(c.lanes=0,c.tag){case 16:e:{a=c.pendingProps;var g=c.elementType,v=g._init;if(g=v(g._payload),c.type=g,typeof g=="function")$g(g)?(a=aa(g,a),c.tag=1,c=DN(null,c,g,a,f)):(c.tag=0,c=My(null,c,g,a,f));else{if(g!=null){if(v=g.$$typeof,v===T){c.tag=11,c=kN(null,c,g,a,f);break e}else if(v===j){c.tag=14,c=TN(null,c,g,a,f);break e}}throw c=z(g)||g,Error(r(306,c,""))}}return c;case 0:return My(a,c,c.type,c.pendingProps,f);case 1:return g=c.type,v=aa(g,c.pendingProps),DN(a,c,g,v,f);case 3:e:{if(ce(c,c.stateNode.containerInfo),a===null)throw Error(r(387));g=c.pendingProps;var E=c.memoizedState;v=E.element,sy(a,c),Wc(c,g,null,f);var _=c.memoizedState;if(g=_.cache,Xs(c,An,g),g!==E.cache&&Qg(c,[An],f,!0),Gc(),g=_.element,E.isDehydrated)if(E={element:g,isDehydrated:!1,cache:_.cache},c.updateQueue.baseState=E,c.memoizedState=E,c.flags&256){c=RN(a,c,g,f);break e}else if(g!==v){v=Zr(Error(r(424)),c),zc(v),c=RN(a,c,g,f);break e}else{switch(a=c.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(Zt=Ei(a.firstChild),ar=c,pt=!0,ta=null,qi=!0,f=pN(c,null,g,f),c.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(Bc(),g===v){c=bs(a,c,f);break e}Vn(a,c,g,f)}c=c.child}return c;case 26:return Ff(a,c),a===null?(f=qA(c.type,null,c.pendingProps,null))?c.memoizedState=f:pt||(f=c.type,a=c.pendingProps,g=ih(ee.current).createElement(f),g[qt]=c,g[an]=a,Fn(g,f,a),Et(g),c.stateNode=g):c.memoizedState=qA(c.type,a.memoizedProps,c.pendingProps,a.memoizedState),null;case 27:return De(c),a===null&&pt&&(g=c.stateNode=IA(c.type,c.pendingProps,ee.current),ar=c,qi=!0,v=Zt,fo(c.type)?(g0=v,Zt=Ei(g.firstChild)):Zt=v),Vn(a,c,c.pendingProps.children,f),Ff(a,c),a===null&&(c.flags|=4194304),c.child;case 5:return a===null&&pt&&((v=g=Zt)&&(g=yF(g,c.type,c.pendingProps,qi),g!==null?(c.stateNode=g,ar=c,Zt=Ei(g.firstChild),qi=!1,v=!0):v=!1),v||na(c)),De(c),v=c.type,E=c.pendingProps,_=a!==null?a.memoizedProps:null,g=E.children,f0(v,E)?g=null:_!==null&&f0(v,_)&&(c.flags|=32),c.memoizedState!==null&&(v=dy(a,c,LH,null,null,f),mu._currentValue=v),Ff(a,c),Vn(a,c,g,f),c.child;case 6:return a===null&&pt&&((a=f=Zt)&&(f=bF(f,c.pendingProps,qi),f!==null?(c.stateNode=f,ar=c,Zt=null,a=!0):a=!1),a||na(c)),null;case 13:return jN(a,c,f);case 4:return ce(c,c.stateNode.containerInfo),g=c.pendingProps,a===null?c.child=vl(c,null,g,f):Vn(a,c,g,f),c.child;case 11:return kN(a,c,c.type,c.pendingProps,f);case 7:return Vn(a,c,c.pendingProps,f),c.child;case 8:return Vn(a,c,c.pendingProps.children,f),c.child;case 12:return Vn(a,c,c.pendingProps.children,f),c.child;case 10:return g=c.pendingProps,Xs(c,c.type,g.value),Vn(a,c,g.children,f),c.child;case 9:return v=c.type._context,g=c.pendingProps.children,ia(c),v=Qn(v),g=g(v),c.flags|=1,Vn(a,c,g,f),c.child;case 14:return TN(a,c,c.type,c.pendingProps,f);case 15:return NN(a,c,c.type,c.pendingProps,f);case 19:return LN(a,c,f);case 31:return g=c.pendingProps,f=c.mode,g={mode:g.mode,children:g.children},a===null?(f=Uf(g,f),f.ref=c.ref,c.child=f,f.return=c,c=f):(f=ds(a.child,g),f.ref=c.ref,c.child=f,f.return=c,c=f),c;case 22:return AN(a,c,f);case 24:return ia(c),g=Qn(An),a===null?(v=ny(),v===null&&(v=At,E=ey(),v.pooledCache=E,E.refCount++,E!==null&&(v.pooledCacheLanes|=f),v=E),c.memoizedState={parent:g,cache:v},iy(c),Xs(c,An,v)):((a.lanes&f)!==0&&(sy(a,c),Wc(c,null,null,f),Gc()),v=a.memoizedState,E=c.memoizedState,v.parent!==g?(v={parent:g,cache:g},c.memoizedState=v,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=v),Xs(c,An,g)):(g=E.cache,Xs(c,An,g),g!==v.cache&&Qg(c,[An],f,!0))),Vn(a,c,c.pendingProps.children,f),c.child;case 29:throw c.pendingProps}throw Error(r(156,c.tag))}function vs(a){a.flags|=4}function IN(a,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!$A(c)){if(c=ti.current,c!==null&&((ct&4194048)===ct?Vi!==null:(ct&62914560)!==ct&&(ct&536870912)===0||c!==Vi))throw Uc=ry,xT;a.flags|=8192}}function $f(a,c){c!==null&&(a.flags|=4),a.flags&16384&&(c=a.tag!==22?gr():536870912,a.lanes|=c,El|=c)}function eu(a,c){if(!pt)switch(a.tailMode){case"hidden":c=a.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?a.tail=null:f.sibling=null;break;case"collapsed":f=a.tail;for(var g=null;f!==null;)f.alternate!==null&&(g=f),f=f.sibling;g===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:g.sibling=null}}function Ft(a){var c=a.alternate!==null&&a.alternate.child===a.child,f=0,g=0;if(c)for(var v=a.child;v!==null;)f|=v.lanes|v.childLanes,g|=v.subtreeFlags&65011712,g|=v.flags&65011712,v.return=a,v=v.sibling;else for(v=a.child;v!==null;)f|=v.lanes|v.childLanes,g|=v.subtreeFlags,g|=v.flags,v.return=a,v=v.sibling;return a.subtreeFlags|=g,a.childLanes=f,c}function UH(a,c,f){var g=c.pendingProps;switch(Yg(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ft(c),null;case 1:return Ft(c),null;case 3:return f=c.stateNode,g=null,a!==null&&(g=a.memoizedState.cache),c.memoizedState.cache!==g&&(c.flags|=2048),ms(An),ve(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(a===null||a.child===null)&&(Ic(c)?vs(c):a===null||a.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,mT())),Ft(c),null;case 26:return f=c.memoizedState,a===null?(vs(c),f!==null?(Ft(c),IN(c,f)):(Ft(c),c.flags&=-16777217)):f?f!==a.memoizedState?(vs(c),Ft(c),IN(c,f)):(Ft(c),c.flags&=-16777217):(a.memoizedProps!==g&&vs(c),Ft(c),c.flags&=-16777217),null;case 27:Pe(c),f=ee.current;var v=c.type;if(a!==null&&c.stateNode!=null)a.memoizedProps!==g&&vs(c);else{if(!g){if(c.stateNode===null)throw Error(r(166));return Ft(c),null}a=U.current,Ic(c)?hT(c):(a=IA(v,g,f),c.stateNode=a,vs(c))}return Ft(c),null;case 5:if(Pe(c),f=c.type,a!==null&&c.stateNode!=null)a.memoizedProps!==g&&vs(c);else{if(!g){if(c.stateNode===null)throw Error(r(166));return Ft(c),null}if(a=U.current,Ic(c))hT(c);else{switch(v=ih(ee.current),a){case 1:a=v.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:a=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":a=v.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":a=v.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":a=v.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof g.is=="string"?v.createElement("select",{is:g.is}):v.createElement("select"),g.multiple?a.multiple=!0:g.size&&(a.size=g.size);break;default:a=typeof g.is=="string"?v.createElement(f,{is:g.is}):v.createElement(f)}}a[qt]=c,a[an]=g;e:for(v=c.child;v!==null;){if(v.tag===5||v.tag===6)a.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===c)break e;for(;v.sibling===null;){if(v.return===null||v.return===c)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}c.stateNode=a;e:switch(Fn(a,f,g),f){case"button":case"input":case"select":case"textarea":a=!!g.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&vs(c)}}return Ft(c),c.flags&=-16777217,null;case 6:if(a&&c.stateNode!=null)a.memoizedProps!==g&&vs(c);else{if(typeof g!="string"&&c.stateNode===null)throw Error(r(166));if(a=ee.current,Ic(c)){if(a=c.stateNode,f=c.memoizedProps,g=null,v=ar,v!==null)switch(v.tag){case 27:case 5:g=v.memoizedProps}a[qt]=c,a=!!(a.nodeValue===f||g!==null&&g.suppressHydrationWarning===!0||_A(a.nodeValue,f)),a||na(c)}else a=ih(a).createTextNode(g),a[qt]=c,c.stateNode=a}return Ft(c),null;case 13:if(g=c.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(v=Ic(c),g!==null&&g.dehydrated!==null){if(a===null){if(!v)throw Error(r(318));if(v=c.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(r(317));v[qt]=c}else Bc(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Ft(c),v=!1}else v=mT(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=v),v=!0;if(!v)return c.flags&256?(ys(c),c):(ys(c),null)}if(ys(c),(c.flags&128)!==0)return c.lanes=f,c;if(f=g!==null,a=a!==null&&a.memoizedState!==null,f){g=c.child,v=null,g.alternate!==null&&g.alternate.memoizedState!==null&&g.alternate.memoizedState.cachePool!==null&&(v=g.alternate.memoizedState.cachePool.pool);var E=null;g.memoizedState!==null&&g.memoizedState.cachePool!==null&&(E=g.memoizedState.cachePool.pool),E!==v&&(g.flags|=2048)}return f!==a&&f&&(c.child.flags|=8192),$f(c,c.updateQueue),Ft(c),null;case 4:return ve(),a===null&&a0(c.stateNode.containerInfo),Ft(c),null;case 10:return ms(c.type),Ft(c),null;case 19:if(oe(Mn),v=c.memoizedState,v===null)return Ft(c),null;if(g=(c.flags&128)!==0,E=v.rendering,E===null)if(g)eu(v,!1);else{if(Jt!==0||a!==null&&(a.flags&128)!==0)for(a=c.child;a!==null;){if(E=qf(a),E!==null){for(c.flags|=128,eu(v,!1),a=E.updateQueue,c.updateQueue=a,$f(c,a),c.subtreeFlags=0,a=f,f=c.child;f!==null;)dT(f,a),f=f.sibling;return ae(Mn,Mn.current&1|2),c.child}a=a.sibling}v.tail!==null&&Oe()>Kf&&(c.flags|=128,g=!0,eu(v,!1),c.lanes=4194304)}else{if(!g)if(a=qf(E),a!==null){if(c.flags|=128,g=!0,a=a.updateQueue,c.updateQueue=a,$f(c,a),eu(v,!0),v.tail===null&&v.tailMode==="hidden"&&!E.alternate&&!pt)return Ft(c),null}else 2*Oe()-v.renderingStartTime>Kf&&f!==536870912&&(c.flags|=128,g=!0,eu(v,!1),c.lanes=4194304);v.isBackwards?(E.sibling=c.child,c.child=E):(a=v.last,a!==null?a.sibling=E:c.child=E,v.last=E)}return v.tail!==null?(c=v.tail,v.rendering=c,v.tail=c.sibling,v.renderingStartTime=Oe(),c.sibling=null,a=Mn.current,ae(Mn,g?a&1|2:a&1),c):(Ft(c),null);case 22:case 23:return ys(c),cy(),g=c.memoizedState!==null,a!==null?a.memoizedState!==null!==g&&(c.flags|=8192):g&&(c.flags|=8192),g?(f&536870912)!==0&&(c.flags&128)===0&&(Ft(c),c.subtreeFlags&6&&(c.flags|=8192)):Ft(c),f=c.updateQueue,f!==null&&$f(c,f.retryQueue),f=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),g=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(g=c.memoizedState.cachePool.pool),g!==f&&(c.flags|=2048),a!==null&&oe(sa),null;case 24:return f=null,a!==null&&(f=a.memoizedState.cache),c.memoizedState.cache!==f&&(c.flags|=2048),ms(An),Ft(c),null;case 25:return null;case 30:return null}throw Error(r(156,c.tag))}function $H(a,c){switch(Yg(c),c.tag){case 1:return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return ms(An),ve(),a=c.flags,(a&65536)!==0&&(a&128)===0?(c.flags=a&-65537|128,c):null;case 26:case 27:case 5:return Pe(c),null;case 13:if(ys(c),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(r(340));Bc()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return oe(Mn),null;case 4:return ve(),null;case 10:return ms(c.type),null;case 22:case 23:return ys(c),cy(),a!==null&&oe(sa),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 24:return ms(An),null;case 25:return null;default:return null}}function BN(a,c){switch(Yg(c),c.tag){case 3:ms(An),ve();break;case 26:case 27:case 5:Pe(c);break;case 4:ve();break;case 13:ys(c);break;case 19:oe(Mn);break;case 10:ms(c.type);break;case 22:case 23:ys(c),cy(),a!==null&&oe(sa);break;case 24:ms(An)}}function tu(a,c){try{var f=c.updateQueue,g=f!==null?f.lastEffect:null;if(g!==null){var v=g.next;f=v;do{if((f.tag&a)===a){g=void 0;var E=f.create,_=f.inst;g=E(),_.destroy=g}f=f.next}while(f!==v)}}catch(P){Ct(c,c.return,P)}}function ro(a,c,f){try{var g=c.updateQueue,v=g!==null?g.lastEffect:null;if(v!==null){var E=v.next;g=E;do{if((g.tag&a)===a){var _=g.inst,P=_.destroy;if(P!==void 0){_.destroy=void 0,v=c;var G=f,se=P;try{se()}catch(fe){Ct(v,G,fe)}}}g=g.next}while(g!==E)}}catch(fe){Ct(c,c.return,fe)}}function zN(a){var c=a.updateQueue;if(c!==null){var f=a.stateNode;try{TT(c,f)}catch(g){Ct(a,a.return,g)}}}function qN(a,c,f){f.props=aa(a.type,a.memoizedProps),f.state=a.memoizedState;try{f.componentWillUnmount()}catch(g){Ct(a,c,g)}}function nu(a,c){try{var f=a.ref;if(f!==null){switch(a.tag){case 26:case 27:case 5:var g=a.stateNode;break;case 30:g=a.stateNode;break;default:g=a.stateNode}typeof f=="function"?a.refCleanup=f(g):f.current=g}}catch(v){Ct(a,c,v)}}function Hi(a,c){var f=a.ref,g=a.refCleanup;if(f!==null)if(typeof g=="function")try{g()}catch(v){Ct(a,c,v)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(v){Ct(a,c,v)}else f.current=null}function VN(a){var c=a.type,f=a.memoizedProps,g=a.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":f.autoFocus&&g.focus();break e;case"img":f.src?g.src=f.src:f.srcSet&&(g.srcset=f.srcSet)}}catch(v){Ct(a,a.return,v)}}function Iy(a,c,f){try{var g=a.stateNode;fF(g,a.type,f,c),g[an]=c}catch(v){Ct(a,a.return,v)}}function HN(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&fo(a.type)||a.tag===4}function By(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||HN(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&fo(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function zy(a,c,f){var g=a.tag;if(g===5||g===6)a=a.stateNode,c?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(a,c):(c=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,c.appendChild(a),f=f._reactRootContainer,f!=null||c.onclick!==null||(c.onclick=rh));else if(g!==4&&(g===27&&fo(a.type)&&(f=a.stateNode,c=null),a=a.child,a!==null))for(zy(a,c,f),a=a.sibling;a!==null;)zy(a,c,f),a=a.sibling}function Gf(a,c,f){var g=a.tag;if(g===5||g===6)a=a.stateNode,c?f.insertBefore(a,c):f.appendChild(a);else if(g!==4&&(g===27&&fo(a.type)&&(f=a.stateNode),a=a.child,a!==null))for(Gf(a,c,f),a=a.sibling;a!==null;)Gf(a,c,f),a=a.sibling}function FN(a){var c=a.stateNode,f=a.memoizedProps;try{for(var g=a.type,v=c.attributes;v.length;)c.removeAttributeNode(v[0]);Fn(c,g,f),c[qt]=a,c[an]=f}catch(E){Ct(a,a.return,E)}}var xs=!1,cn=!1,qy=!1,UN=typeof WeakSet=="function"?WeakSet:Set,Ln=null;function GH(a,c){if(a=a.containerInfo,u0=uh,a=tT(a),Bg(a)){if("selectionStart"in a)var f={start:a.selectionStart,end:a.selectionEnd};else e:{f=(f=a.ownerDocument)&&f.defaultView||window;var g=f.getSelection&&f.getSelection();if(g&&g.rangeCount!==0){f=g.anchorNode;var v=g.anchorOffset,E=g.focusNode;g=g.focusOffset;try{f.nodeType,E.nodeType}catch{f=null;break e}var _=0,P=-1,G=-1,se=0,fe=0,me=a,le=null;t:for(;;){for(var ue;me!==f||v!==0&&me.nodeType!==3||(P=_+v),me!==E||g!==0&&me.nodeType!==3||(G=_+g),me.nodeType===3&&(_+=me.nodeValue.length),(ue=me.firstChild)!==null;)le=me,me=ue;for(;;){if(me===a)break t;if(le===f&&++se===v&&(P=_),le===E&&++fe===g&&(G=_),(ue=me.nextSibling)!==null)break;me=le,le=me.parentNode}me=ue}f=P===-1||G===-1?null:{start:P,end:G}}else f=null}f=f||{start:0,end:0}}else f=null;for(d0={focusedElem:a,selectionRange:f},uh=!1,Ln=c;Ln!==null;)if(c=Ln,a=c.child,(c.subtreeFlags&1024)!==0&&a!==null)a.return=c,Ln=a;else for(;Ln!==null;){switch(c=Ln,E=c.alternate,a=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&E!==null){a=void 0,f=c,v=E.memoizedProps,E=E.memoizedState,g=f.stateNode;try{var $e=aa(f.type,v,f.elementType===f.type);a=g.getSnapshotBeforeUpdate($e,E),g.__reactInternalSnapshotBeforeUpdate=a}catch(He){Ct(f,f.return,He)}}break;case 3:if((a&1024)!==0){if(a=c.stateNode.containerInfo,f=a.nodeType,f===9)p0(a);else if(f===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":p0(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=c.sibling,a!==null){a.return=c.return,Ln=a;break}Ln=c.return}}function $N(a,c,f){var g=f.flags;switch(f.tag){case 0:case 11:case 15:io(a,f),g&4&&tu(5,f);break;case 1:if(io(a,f),g&4)if(a=f.stateNode,c===null)try{a.componentDidMount()}catch(_){Ct(f,f.return,_)}else{var v=aa(f.type,c.memoizedProps);c=c.memoizedState;try{a.componentDidUpdate(v,c,a.__reactInternalSnapshotBeforeUpdate)}catch(_){Ct(f,f.return,_)}}g&64&&zN(f),g&512&&nu(f,f.return);break;case 3:if(io(a,f),g&64&&(a=f.updateQueue,a!==null)){if(c=null,f.child!==null)switch(f.child.tag){case 27:case 5:c=f.child.stateNode;break;case 1:c=f.child.stateNode}try{TT(a,c)}catch(_){Ct(f,f.return,_)}}break;case 27:c===null&&g&4&&FN(f);case 26:case 5:io(a,f),c===null&&g&4&&VN(f),g&512&&nu(f,f.return);break;case 12:io(a,f);break;case 13:io(a,f),g&4&&KN(a,f),g&64&&(a=f.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(f=tF.bind(null,f),vF(a,f))));break;case 22:if(g=f.memoizedState!==null||xs,!g){c=c!==null&&c.memoizedState!==null||cn,v=xs;var E=cn;xs=g,(cn=c)&&!E?so(a,f,(f.subtreeFlags&8772)!==0):io(a,f),xs=v,cn=E}break;case 30:break;default:io(a,f)}}function GN(a){var c=a.alternate;c!==null&&(a.alternate=null,GN(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&Dr(c)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var Lt=null,xr=!1;function ws(a,c,f){for(f=f.child;f!==null;)WN(a,c,f),f=f.sibling}function WN(a,c,f){if(ht&&typeof ht.onCommitFiberUnmount=="function")try{ht.onCommitFiberUnmount(zt,f)}catch{}switch(f.tag){case 26:cn||Hi(f,c),ws(a,c,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:cn||Hi(f,c);var g=Lt,v=xr;fo(f.type)&&(Lt=f.stateNode,xr=!1),ws(a,c,f),du(f.stateNode),Lt=g,xr=v;break;case 5:cn||Hi(f,c);case 6:if(g=Lt,v=xr,Lt=null,ws(a,c,f),Lt=g,xr=v,Lt!==null)if(xr)try{(Lt.nodeType===9?Lt.body:Lt.nodeName==="HTML"?Lt.ownerDocument.body:Lt).removeChild(f.stateNode)}catch(E){Ct(f,c,E)}else try{Lt.removeChild(f.stateNode)}catch(E){Ct(f,c,E)}break;case 18:Lt!==null&&(xr?(a=Lt,LA(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,f.stateNode),vu(a)):LA(Lt,f.stateNode));break;case 4:g=Lt,v=xr,Lt=f.stateNode.containerInfo,xr=!0,ws(a,c,f),Lt=g,xr=v;break;case 0:case 11:case 14:case 15:cn||ro(2,f,c),cn||ro(4,f,c),ws(a,c,f);break;case 1:cn||(Hi(f,c),g=f.stateNode,typeof g.componentWillUnmount=="function"&&qN(f,c,g)),ws(a,c,f);break;case 21:ws(a,c,f);break;case 22:cn=(g=cn)||f.memoizedState!==null,ws(a,c,f),cn=g;break;default:ws(a,c,f)}}function KN(a,c){if(c.memoizedState===null&&(a=c.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{vu(a)}catch(f){Ct(c,c.return,f)}}function WH(a){switch(a.tag){case 13:case 19:var c=a.stateNode;return c===null&&(c=a.stateNode=new UN),c;case 22:return a=a.stateNode,c=a._retryCache,c===null&&(c=a._retryCache=new UN),c;default:throw Error(r(435,a.tag))}}function Vy(a,c){var f=WH(a);c.forEach(function(g){var v=nF.bind(null,a,g);f.has(g)||(f.add(g),g.then(v,v))})}function Lr(a,c){var f=c.deletions;if(f!==null)for(var g=0;g<f.length;g++){var v=f[g],E=a,_=c,P=_;e:for(;P!==null;){switch(P.tag){case 27:if(fo(P.type)){Lt=P.stateNode,xr=!1;break e}break;case 5:Lt=P.stateNode,xr=!1;break e;case 3:case 4:Lt=P.stateNode.containerInfo,xr=!0;break e}P=P.return}if(Lt===null)throw Error(r(160));WN(E,_,v),Lt=null,xr=!1,E=v.alternate,E!==null&&(E.return=null),v.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)YN(c,a),c=c.sibling}var Si=null;function YN(a,c){var f=a.alternate,g=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Lr(c,a),Pr(a),g&4&&(ro(3,a,a.return),tu(3,a),ro(5,a,a.return));break;case 1:Lr(c,a),Pr(a),g&512&&(cn||f===null||Hi(f,f.return)),g&64&&xs&&(a=a.updateQueue,a!==null&&(g=a.callbacks,g!==null&&(f=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=f===null?g:f.concat(g))));break;case 26:var v=Si;if(Lr(c,a),Pr(a),g&512&&(cn||f===null||Hi(f,f.return)),g&4){var E=f!==null?f.memoizedState:null;if(g=a.memoizedState,f===null)if(g===null)if(a.stateNode===null){e:{g=a.type,f=a.memoizedProps,v=v.ownerDocument||v;t:switch(g){case"title":E=v.getElementsByTagName("title")[0],(!E||E[or]||E[qt]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=v.createElement(g),v.head.insertBefore(E,v.querySelector("head > title"))),Fn(E,g,f),E[qt]=a,Et(E),g=E;break e;case"link":var _=FA("link","href",v).get(g+(f.href||""));if(_){for(var P=0;P<_.length;P++)if(E=_[P],E.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&E.getAttribute("rel")===(f.rel==null?null:f.rel)&&E.getAttribute("title")===(f.title==null?null:f.title)&&E.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){_.splice(P,1);break t}}E=v.createElement(g),Fn(E,g,f),v.head.appendChild(E);break;case"meta":if(_=FA("meta","content",v).get(g+(f.content||""))){for(P=0;P<_.length;P++)if(E=_[P],E.getAttribute("content")===(f.content==null?null:""+f.content)&&E.getAttribute("name")===(f.name==null?null:f.name)&&E.getAttribute("property")===(f.property==null?null:f.property)&&E.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&E.getAttribute("charset")===(f.charSet==null?null:f.charSet)){_.splice(P,1);break t}}E=v.createElement(g),Fn(E,g,f),v.head.appendChild(E);break;default:throw Error(r(468,g))}E[qt]=a,Et(E),g=E}a.stateNode=g}else UA(v,a.type,a.stateNode);else a.stateNode=HA(v,g,a.memoizedProps);else E!==g?(E===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):E.count--,g===null?UA(v,a.type,a.stateNode):HA(v,g,a.memoizedProps)):g===null&&a.stateNode!==null&&Iy(a,a.memoizedProps,f.memoizedProps)}break;case 27:Lr(c,a),Pr(a),g&512&&(cn||f===null||Hi(f,f.return)),f!==null&&g&4&&Iy(a,a.memoizedProps,f.memoizedProps);break;case 5:if(Lr(c,a),Pr(a),g&512&&(cn||f===null||Hi(f,f.return)),a.flags&32){v=a.stateNode;try{Ws(v,"")}catch(ue){Ct(a,a.return,ue)}}g&4&&a.stateNode!=null&&(v=a.memoizedProps,Iy(a,v,f!==null?f.memoizedProps:v)),g&1024&&(qy=!0);break;case 6:if(Lr(c,a),Pr(a),g&4){if(a.stateNode===null)throw Error(r(162));g=a.memoizedProps,f=a.stateNode;try{f.nodeValue=g}catch(ue){Ct(a,a.return,ue)}}break;case 3:if(ah=null,v=Si,Si=sh(c.containerInfo),Lr(c,a),Si=v,Pr(a),g&4&&f!==null&&f.memoizedState.isDehydrated)try{vu(c.containerInfo)}catch(ue){Ct(a,a.return,ue)}qy&&(qy=!1,XN(a));break;case 4:g=Si,Si=sh(a.stateNode.containerInfo),Lr(c,a),Pr(a),Si=g;break;case 12:Lr(c,a),Pr(a);break;case 13:Lr(c,a),Pr(a),a.child.flags&8192&&a.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(Wy=Oe()),g&4&&(g=a.updateQueue,g!==null&&(a.updateQueue=null,Vy(a,g)));break;case 22:v=a.memoizedState!==null;var G=f!==null&&f.memoizedState!==null,se=xs,fe=cn;if(xs=se||v,cn=fe||G,Lr(c,a),cn=fe,xs=se,Pr(a),g&8192)e:for(c=a.stateNode,c._visibility=v?c._visibility&-2:c._visibility|1,v&&(f===null||G||xs||cn||la(a)),f=null,c=a;;){if(c.tag===5||c.tag===26){if(f===null){G=f=c;try{if(E=G.stateNode,v)_=E.style,typeof _.setProperty=="function"?_.setProperty("display","none","important"):_.display="none";else{P=G.stateNode;var me=G.memoizedProps.style,le=me!=null&&me.hasOwnProperty("display")?me.display:null;P.style.display=le==null||typeof le=="boolean"?"":(""+le).trim()}}catch(ue){Ct(G,G.return,ue)}}}else if(c.tag===6){if(f===null){G=c;try{G.stateNode.nodeValue=v?"":G.memoizedProps}catch(ue){Ct(G,G.return,ue)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===a)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break e;for(;c.sibling===null;){if(c.return===null||c.return===a)break e;f===c&&(f=null),c=c.return}f===c&&(f=null),c.sibling.return=c.return,c=c.sibling}g&4&&(g=a.updateQueue,g!==null&&(f=g.retryQueue,f!==null&&(g.retryQueue=null,Vy(a,f))));break;case 19:Lr(c,a),Pr(a),g&4&&(g=a.updateQueue,g!==null&&(a.updateQueue=null,Vy(a,g)));break;case 30:break;case 21:break;default:Lr(c,a),Pr(a)}}function Pr(a){var c=a.flags;if(c&2){try{for(var f,g=a.return;g!==null;){if(HN(g)){f=g;break}g=g.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var v=f.stateNode,E=By(a);Gf(a,E,v);break;case 5:var _=f.stateNode;f.flags&32&&(Ws(_,""),f.flags&=-33);var P=By(a);Gf(a,P,_);break;case 3:case 4:var G=f.stateNode.containerInfo,se=By(a);zy(a,se,G);break;default:throw Error(r(161))}}catch(fe){Ct(a,a.return,fe)}a.flags&=-3}c&4096&&(a.flags&=-4097)}function XN(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var c=a;XN(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),a=a.sibling}}function io(a,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)$N(a,c.alternate,c),c=c.sibling}function la(a){for(a=a.child;a!==null;){var c=a;switch(c.tag){case 0:case 11:case 14:case 15:ro(4,c,c.return),la(c);break;case 1:Hi(c,c.return);var f=c.stateNode;typeof f.componentWillUnmount=="function"&&qN(c,c.return,f),la(c);break;case 27:du(c.stateNode);case 26:case 5:Hi(c,c.return),la(c);break;case 22:c.memoizedState===null&&la(c);break;case 30:la(c);break;default:la(c)}a=a.sibling}}function so(a,c,f){for(f=f&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var g=c.alternate,v=a,E=c,_=E.flags;switch(E.tag){case 0:case 11:case 15:so(v,E,f),tu(4,E);break;case 1:if(so(v,E,f),g=E,v=g.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(se){Ct(g,g.return,se)}if(g=E,v=g.updateQueue,v!==null){var P=g.stateNode;try{var G=v.shared.hiddenCallbacks;if(G!==null)for(v.shared.hiddenCallbacks=null,v=0;v<G.length;v++)kT(G[v],P)}catch(se){Ct(g,g.return,se)}}f&&_&64&&zN(E),nu(E,E.return);break;case 27:FN(E);case 26:case 5:so(v,E,f),f&&g===null&&_&4&&VN(E),nu(E,E.return);break;case 12:so(v,E,f);break;case 13:so(v,E,f),f&&_&4&&KN(v,E);break;case 22:E.memoizedState===null&&so(v,E,f),nu(E,E.return);break;case 30:break;default:so(v,E,f)}c=c.sibling}}function Hy(a,c){var f=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),a=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(a=c.memoizedState.cachePool.pool),a!==f&&(a!=null&&a.refCount++,f!=null&&Vc(f))}function Fy(a,c){a=null,c.alternate!==null&&(a=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==a&&(c.refCount++,a!=null&&Vc(a))}function Fi(a,c,f,g){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)ZN(a,c,f,g),c=c.sibling}function ZN(a,c,f,g){var v=c.flags;switch(c.tag){case 0:case 11:case 15:Fi(a,c,f,g),v&2048&&tu(9,c);break;case 1:Fi(a,c,f,g);break;case 3:Fi(a,c,f,g),v&2048&&(a=null,c.alternate!==null&&(a=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==a&&(c.refCount++,a!=null&&Vc(a)));break;case 12:if(v&2048){Fi(a,c,f,g),a=c.stateNode;try{var E=c.memoizedProps,_=E.id,P=E.onPostCommit;typeof P=="function"&&P(_,c.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(G){Ct(c,c.return,G)}}else Fi(a,c,f,g);break;case 13:Fi(a,c,f,g);break;case 23:break;case 22:E=c.stateNode,_=c.alternate,c.memoizedState!==null?E._visibility&2?Fi(a,c,f,g):ru(a,c):E._visibility&2?Fi(a,c,f,g):(E._visibility|=2,xl(a,c,f,g,(c.subtreeFlags&10256)!==0)),v&2048&&Hy(_,c);break;case 24:Fi(a,c,f,g),v&2048&&Fy(c.alternate,c);break;default:Fi(a,c,f,g)}}function xl(a,c,f,g,v){for(v=v&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var E=a,_=c,P=f,G=g,se=_.flags;switch(_.tag){case 0:case 11:case 15:xl(E,_,P,G,v),tu(8,_);break;case 23:break;case 22:var fe=_.stateNode;_.memoizedState!==null?fe._visibility&2?xl(E,_,P,G,v):ru(E,_):(fe._visibility|=2,xl(E,_,P,G,v)),v&&se&2048&&Hy(_.alternate,_);break;case 24:xl(E,_,P,G,v),v&&se&2048&&Fy(_.alternate,_);break;default:xl(E,_,P,G,v)}c=c.sibling}}function ru(a,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var f=a,g=c,v=g.flags;switch(g.tag){case 22:ru(f,g),v&2048&&Hy(g.alternate,g);break;case 24:ru(f,g),v&2048&&Fy(g.alternate,g);break;default:ru(f,g)}c=c.sibling}}var iu=8192;function wl(a){if(a.subtreeFlags&iu)for(a=a.child;a!==null;)JN(a),a=a.sibling}function JN(a){switch(a.tag){case 26:wl(a),a.flags&iu&&a.memoizedState!==null&&RF(Si,a.memoizedState,a.memoizedProps);break;case 5:wl(a);break;case 3:case 4:var c=Si;Si=sh(a.stateNode.containerInfo),wl(a),Si=c;break;case 22:a.memoizedState===null&&(c=a.alternate,c!==null&&c.memoizedState!==null?(c=iu,iu=16777216,wl(a),iu=c):wl(a));break;default:wl(a)}}function QN(a){var c=a.alternate;if(c!==null&&(a=c.child,a!==null)){c.child=null;do c=a.sibling,a.sibling=null,a=c;while(a!==null)}}function su(a){var c=a.deletions;if((a.flags&16)!==0){if(c!==null)for(var f=0;f<c.length;f++){var g=c[f];Ln=g,tA(g,a)}QN(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)eA(a),a=a.sibling}function eA(a){switch(a.tag){case 0:case 11:case 15:su(a),a.flags&2048&&ro(9,a,a.return);break;case 3:su(a);break;case 12:su(a);break;case 22:var c=a.stateNode;a.memoizedState!==null&&c._visibility&2&&(a.return===null||a.return.tag!==13)?(c._visibility&=-3,Wf(a)):su(a);break;default:su(a)}}function Wf(a){var c=a.deletions;if((a.flags&16)!==0){if(c!==null)for(var f=0;f<c.length;f++){var g=c[f];Ln=g,tA(g,a)}QN(a)}for(a=a.child;a!==null;){switch(c=a,c.tag){case 0:case 11:case 15:ro(8,c,c.return),Wf(c);break;case 22:f=c.stateNode,f._visibility&2&&(f._visibility&=-3,Wf(c));break;default:Wf(c)}a=a.sibling}}function tA(a,c){for(;Ln!==null;){var f=Ln;switch(f.tag){case 0:case 11:case 15:ro(8,f,c);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var g=f.memoizedState.cachePool.pool;g!=null&&g.refCount++}break;case 24:Vc(f.memoizedState.cache)}if(g=f.child,g!==null)g.return=f,Ln=g;else e:for(f=a;Ln!==null;){g=Ln;var v=g.sibling,E=g.return;if(GN(g),g===f){Ln=null;break e}if(v!==null){v.return=E,Ln=v;break e}Ln=E}}}var KH={getCacheForType:function(a){var c=Qn(An),f=c.data.get(a);return f===void 0&&(f=a(),c.data.set(a,f)),f}},YH=typeof WeakMap=="function"?WeakMap:Map,gt=0,At=null,nt=null,ct=0,yt=0,Ir=null,oo=!1,Sl=!1,Uy=!1,Ss=0,Jt=0,ao=0,ca=0,$y=0,ni=0,El=0,ou=null,wr=null,Gy=!1,Wy=0,Kf=1/0,Yf=null,lo=null,Hn=0,co=null,Cl=null,kl=0,Ky=0,Yy=null,nA=null,au=0,Xy=null;function Br(){if((gt&2)!==0&&ct!==0)return ct&-ct;if(O.T!==null){var a=fl;return a!==0?a:r0()}return Us()}function rA(){ni===0&&(ni=(ct&536870912)===0||pt?yi():536870912);var a=ti.current;return a!==null&&(a.flags|=32),ni}function zr(a,c,f){(a===At&&(yt===2||yt===9)||a.cancelPendingCommit!==null)&&(Tl(a,0),uo(a,ct,ni,!1)),yr(a,f),((gt&2)===0||a!==At)&&(a===At&&((gt&2)===0&&(ca|=f),Jt===4&&uo(a,ct,ni,!1)),Ui(a))}function iA(a,c,f){if((gt&6)!==0)throw Error(r(327));var g=!f&&(c&124)===0&&(c&a.expiredLanes)===0||Tn(a,c),v=g?JH(a,c):Qy(a,c,!0),E=g;do{if(v===0){Sl&&!g&&uo(a,c,0,!1);break}else{if(f=a.current.alternate,E&&!XH(f)){v=Qy(a,c,!1),E=!1;continue}if(v===2){if(E=c,a.errorRecoveryDisabledLanes&E)var _=0;else _=a.pendingLanes&-536870913,_=_!==0?_:_&536870912?536870912:0;if(_!==0){c=_;e:{var P=a;v=ou;var G=P.current.memoizedState.isDehydrated;if(G&&(Tl(P,_).flags|=256),_=Qy(P,_,!1),_!==2){if(Uy&&!G){P.errorRecoveryDisabledLanes|=E,ca|=E,v=4;break e}E=wr,wr=v,E!==null&&(wr===null?wr=E:wr.push.apply(wr,E))}v=_}if(E=!1,v!==2)continue}}if(v===1){Tl(a,0),uo(a,c,0,!0);break}e:{switch(g=a,E=v,E){case 0:case 1:throw Error(r(345));case 4:if((c&4194048)!==c)break;case 6:uo(g,c,ni,!oo);break e;case 2:wr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((c&62914560)===c&&(v=Wy+300-Oe(),10<v)){if(uo(g,c,ni,!oo),kn(g,0,!0)!==0)break e;g.timeoutHandle=jA(sA.bind(null,g,f,wr,Yf,Gy,c,ni,ca,El,oo,E,2,-0,0),v);break e}sA(g,f,wr,Yf,Gy,c,ni,ca,El,oo,E,0,-0,0)}}break}while(!0);Ui(a)}function sA(a,c,f,g,v,E,_,P,G,se,fe,me,le,ue){if(a.timeoutHandle=-1,me=c.subtreeFlags,(me&8192||(me&16785408)===16785408)&&(pu={stylesheets:null,count:0,unsuspend:DF},JN(c),me=jF(),me!==null)){a.cancelPendingCommit=me(fA.bind(null,a,c,E,f,g,v,_,P,G,fe,1,le,ue)),uo(a,E,_,!se);return}fA(a,c,E,f,g,v,_,P,G)}function XH(a){for(var c=a;;){var f=c.tag;if((f===0||f===11||f===15)&&c.flags&16384&&(f=c.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var g=0;g<f.length;g++){var v=f[g],E=v.getSnapshot;v=v.value;try{if(!jr(E(),v))return!1}catch{return!1}}if(f=c.child,c.subtreeFlags&16384&&f!==null)f.return=c,c=f;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function uo(a,c,f,g){c&=~$y,c&=~ca,a.suspendedLanes|=c,a.pingedLanes&=~c,g&&(a.warmLanes|=c),g=a.expirationTimes;for(var v=c;0<v;){var E=31-Ve(v),_=1<<E;g[E]=-1,v&=~_}f!==0&&Fs(a,f,c)}function Xf(){return(gt&6)===0?(lu(0),!1):!0}function Zy(){if(nt!==null){if(yt===0)var a=nt.return;else a=nt,ps=ra=null,py(a),bl=null,Jc=0,a=nt;for(;a!==null;)BN(a.alternate,a),a=a.return;nt=null}}function Tl(a,c){var f=a.timeoutHandle;f!==-1&&(a.timeoutHandle=-1,pF(f)),f=a.cancelPendingCommit,f!==null&&(a.cancelPendingCommit=null,f()),Zy(),At=a,nt=f=ds(a.current,null),ct=c,yt=0,Ir=null,oo=!1,Sl=Tn(a,c),Uy=!1,El=ni=$y=ca=ao=Jt=0,wr=ou=null,Gy=!1,(c&8)!==0&&(c|=c&32);var g=a.entangledLanes;if(g!==0)for(a=a.entanglements,g&=c;0<g;){var v=31-Ve(g),E=1<<v;c|=a[v],g&=~E}return Ss=c,bf(),f}function oA(a,c){et=null,O.H=If,c===Fc||c===Nf?(c=ET(),yt=3):c===xT?(c=ET(),yt=4):yt=c===CN?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,Ir=c,nt===null&&(Jt=1,Hf(a,Zr(c,a.current)))}function aA(){var a=O.H;return O.H=If,a===null?If:a}function lA(){var a=O.A;return O.A=KH,a}function Jy(){Jt=4,oo||(ct&4194048)!==ct&&ti.current!==null||(Sl=!0),(ao&134217727)===0&&(ca&134217727)===0||At===null||uo(At,ct,ni,!1)}function Qy(a,c,f){var g=gt;gt|=2;var v=aA(),E=lA();(At!==a||ct!==c)&&(Yf=null,Tl(a,c)),c=!1;var _=Jt;e:do try{if(yt!==0&&nt!==null){var P=nt,G=Ir;switch(yt){case 8:Zy(),_=6;break e;case 3:case 2:case 9:case 6:ti.current===null&&(c=!0);var se=yt;if(yt=0,Ir=null,Nl(a,P,G,se),f&&Sl){_=0;break e}break;default:se=yt,yt=0,Ir=null,Nl(a,P,G,se)}}ZH(),_=Jt;break}catch(fe){oA(a,fe)}while(!0);return c&&a.shellSuspendCounter++,ps=ra=null,gt=g,O.H=v,O.A=E,nt===null&&(At=null,ct=0,bf()),_}function ZH(){for(;nt!==null;)cA(nt)}function JH(a,c){var f=gt;gt|=2;var g=aA(),v=lA();At!==a||ct!==c?(Yf=null,Kf=Oe()+500,Tl(a,c)):Sl=Tn(a,c);e:do try{if(yt!==0&&nt!==null){c=nt;var E=Ir;t:switch(yt){case 1:yt=0,Ir=null,Nl(a,c,E,1);break;case 2:case 9:if(wT(E)){yt=0,Ir=null,uA(c);break}c=function(){yt!==2&&yt!==9||At!==a||(yt=7),Ui(a)},E.then(c,c);break e;case 3:yt=7;break e;case 4:yt=5;break e;case 7:wT(E)?(yt=0,Ir=null,uA(c)):(yt=0,Ir=null,Nl(a,c,E,7));break;case 5:var _=null;switch(nt.tag){case 26:_=nt.memoizedState;case 5:case 27:var P=nt;if(!_||$A(_)){yt=0,Ir=null;var G=P.sibling;if(G!==null)nt=G;else{var se=P.return;se!==null?(nt=se,Zf(se)):nt=null}break t}}yt=0,Ir=null,Nl(a,c,E,5);break;case 6:yt=0,Ir=null,Nl(a,c,E,6);break;case 8:Zy(),Jt=6;break e;default:throw Error(r(462))}}QH();break}catch(fe){oA(a,fe)}while(!0);return ps=ra=null,O.H=g,O.A=v,gt=f,nt!==null?0:(At=null,ct=0,bf(),Jt)}function QH(){for(;nt!==null&&!Te();)cA(nt)}function cA(a){var c=PN(a.alternate,a,Ss);a.memoizedProps=a.pendingProps,c===null?Zf(a):nt=c}function uA(a){var c=a,f=c.alternate;switch(c.tag){case 15:case 0:c=_N(f,c,c.pendingProps,c.type,void 0,ct);break;case 11:c=_N(f,c,c.pendingProps,c.type.render,c.ref,ct);break;case 5:py(c);default:BN(f,c),c=nt=dT(c,Ss),c=PN(f,c,Ss)}a.memoizedProps=a.pendingProps,c===null?Zf(a):nt=c}function Nl(a,c,f,g){ps=ra=null,py(c),bl=null,Jc=0;var v=c.return;try{if(HH(a,v,c,f,ct)){Jt=1,Hf(a,Zr(f,a.current)),nt=null;return}}catch(E){if(v!==null)throw nt=v,E;Jt=1,Hf(a,Zr(f,a.current)),nt=null;return}c.flags&32768?(pt||g===1?a=!0:Sl||(ct&536870912)!==0?a=!1:(oo=a=!0,(g===2||g===9||g===3||g===6)&&(g=ti.current,g!==null&&g.tag===13&&(g.flags|=16384))),dA(c,a)):Zf(c)}function Zf(a){var c=a;do{if((c.flags&32768)!==0){dA(c,oo);return}a=c.return;var f=UH(c.alternate,c,Ss);if(f!==null){nt=f;return}if(c=c.sibling,c!==null){nt=c;return}nt=c=a}while(c!==null);Jt===0&&(Jt=5)}function dA(a,c){do{var f=$H(a.alternate,a);if(f!==null){f.flags&=32767,nt=f;return}if(f=a.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!c&&(a=a.sibling,a!==null)){nt=a;return}nt=a=f}while(a!==null);Jt=6,nt=null}function fA(a,c,f,g,v,E,_,P,G){a.cancelPendingCommit=null;do Jf();while(Hn!==0);if((gt&6)!==0)throw Error(r(327));if(c!==null){if(c===a.current)throw Error(r(177));if(E=c.lanes|c.childLanes,E|=Fg,bi(a,f,E,_,P,G),a===At&&(nt=At=null,ct=0),Cl=c,co=a,kl=f,Ky=E,Yy=v,nA=g,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,rF(rn,function(){return yA(),null})):(a.callbackNode=null,a.callbackPriority=0),g=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||g){g=O.T,O.T=null,v=V.p,V.p=2,_=gt,gt|=4;try{GH(a,c,f)}finally{gt=_,V.p=v,O.T=g}}Hn=1,hA(),pA(),mA()}}function hA(){if(Hn===1){Hn=0;var a=co,c=Cl,f=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||f){f=O.T,O.T=null;var g=V.p;V.p=2;var v=gt;gt|=4;try{YN(c,a);var E=d0,_=tT(a.containerInfo),P=E.focusedElem,G=E.selectionRange;if(_!==P&&P&&P.ownerDocument&&eT(P.ownerDocument.documentElement,P)){if(G!==null&&Bg(P)){var se=G.start,fe=G.end;if(fe===void 0&&(fe=se),"selectionStart"in P)P.selectionStart=se,P.selectionEnd=Math.min(fe,P.value.length);else{var me=P.ownerDocument||document,le=me&&me.defaultView||window;if(le.getSelection){var ue=le.getSelection(),$e=P.textContent.length,He=Math.min(G.start,$e),St=G.end===void 0?He:Math.min(G.end,$e);!ue.extend&&He>St&&(_=St,St=He,He=_);var ne=Q2(P,He),Q=Q2(P,St);if(ne&&Q&&(ue.rangeCount!==1||ue.anchorNode!==ne.node||ue.anchorOffset!==ne.offset||ue.focusNode!==Q.node||ue.focusOffset!==Q.offset)){var re=me.createRange();re.setStart(ne.node,ne.offset),ue.removeAllRanges(),He>St?(ue.addRange(re),ue.extend(Q.node,Q.offset)):(re.setEnd(Q.node,Q.offset),ue.addRange(re))}}}}for(me=[],ue=P;ue=ue.parentNode;)ue.nodeType===1&&me.push({element:ue,left:ue.scrollLeft,top:ue.scrollTop});for(typeof P.focus=="function"&&P.focus(),P=0;P<me.length;P++){var he=me[P];he.element.scrollLeft=he.left,he.element.scrollTop=he.top}}uh=!!u0,d0=u0=null}finally{gt=v,V.p=g,O.T=f}}a.current=c,Hn=2}}function pA(){if(Hn===2){Hn=0;var a=co,c=Cl,f=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||f){f=O.T,O.T=null;var g=V.p;V.p=2;var v=gt;gt|=4;try{$N(a,c.alternate,c)}finally{gt=v,V.p=g,O.T=f}}Hn=3}}function mA(){if(Hn===4||Hn===3){Hn=0,ot();var a=co,c=Cl,f=kl,g=nA;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?Hn=5:(Hn=0,Cl=co=null,gA(a,a.pendingLanes));var v=a.pendingLanes;if(v===0&&(lo=null),sr(f),c=c.stateNode,ht&&typeof ht.onCommitFiberRoot=="function")try{ht.onCommitFiberRoot(zt,c,void 0,(c.current.flags&128)===128)}catch{}if(g!==null){c=O.T,v=V.p,V.p=2,O.T=null;try{for(var E=a.onRecoverableError,_=0;_<g.length;_++){var P=g[_];E(P.value,{componentStack:P.stack})}}finally{O.T=c,V.p=v}}(kl&3)!==0&&Jf(),Ui(a),v=a.pendingLanes,(f&4194090)!==0&&(v&42)!==0?a===Xy?au++:(au=0,Xy=a):au=0,lu(0)}}function gA(a,c){(a.pooledCacheLanes&=c)===0&&(c=a.pooledCache,c!=null&&(a.pooledCache=null,Vc(c)))}function Jf(a){return hA(),pA(),mA(),yA()}function yA(){if(Hn!==5)return!1;var a=co,c=Ky;Ky=0;var f=sr(kl),g=O.T,v=V.p;try{V.p=32>f?32:f,O.T=null,f=Yy,Yy=null;var E=co,_=kl;if(Hn=0,Cl=co=null,kl=0,(gt&6)!==0)throw Error(r(331));var P=gt;if(gt|=4,eA(E.current),ZN(E,E.current,_,f),gt=P,lu(0,!1),ht&&typeof ht.onPostCommitFiberRoot=="function")try{ht.onPostCommitFiberRoot(zt,E)}catch{}return!0}finally{V.p=v,O.T=g,gA(a,c)}}function bA(a,c,f){c=Zr(f,c),c=Ay(a.stateNode,c,2),a=Qs(a,c,2),a!==null&&(yr(a,2),Ui(a))}function Ct(a,c,f){if(a.tag===3)bA(a,a,f);else for(;c!==null;){if(c.tag===3){bA(c,a,f);break}else if(c.tag===1){var g=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof g.componentDidCatch=="function"&&(lo===null||!lo.has(g))){a=Zr(f,a),f=SN(2),g=Qs(c,f,2),g!==null&&(EN(f,g,c,a),yr(g,2),Ui(g));break}}c=c.return}}function e0(a,c,f){var g=a.pingCache;if(g===null){g=a.pingCache=new YH;var v=new Set;g.set(c,v)}else v=g.get(c),v===void 0&&(v=new Set,g.set(c,v));v.has(f)||(Uy=!0,v.add(f),a=eF.bind(null,a,c,f),c.then(a,a))}function eF(a,c,f){var g=a.pingCache;g!==null&&g.delete(c),a.pingedLanes|=a.suspendedLanes&f,a.warmLanes&=~f,At===a&&(ct&f)===f&&(Jt===4||Jt===3&&(ct&62914560)===ct&&300>Oe()-Wy?(gt&2)===0&&Tl(a,0):$y|=f,El===ct&&(El=0)),Ui(a)}function vA(a,c){c===0&&(c=gr()),a=ll(a,c),a!==null&&(yr(a,c),Ui(a))}function tF(a){var c=a.memoizedState,f=0;c!==null&&(f=c.retryLane),vA(a,f)}function nF(a,c){var f=0;switch(a.tag){case 13:var g=a.stateNode,v=a.memoizedState;v!==null&&(f=v.retryLane);break;case 19:g=a.stateNode;break;case 22:g=a.stateNode._retryCache;break;default:throw Error(r(314))}g!==null&&g.delete(c),vA(a,f)}function rF(a,c){return Ee(a,c)}var Qf=null,Al=null,t0=!1,eh=!1,n0=!1,ua=0;function Ui(a){a!==Al&&a.next===null&&(Al===null?Qf=Al=a:Al=Al.next=a),eh=!0,t0||(t0=!0,sF())}function lu(a,c){if(!n0&&eh){n0=!0;do for(var f=!1,g=Qf;g!==null;){if(a!==0){var v=g.pendingLanes;if(v===0)var E=0;else{var _=g.suspendedLanes,P=g.pingedLanes;E=(1<<31-Ve(42|a)+1)-1,E&=v&~(_&~P),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(f=!0,EA(g,E))}else E=ct,E=kn(g,g===At?E:0,g.cancelPendingCommit!==null||g.timeoutHandle!==-1),(E&3)===0||Tn(g,E)||(f=!0,EA(g,E));g=g.next}while(f);n0=!1}}function iF(){xA()}function xA(){eh=t0=!1;var a=0;ua!==0&&(hF()&&(a=ua),ua=0);for(var c=Oe(),f=null,g=Qf;g!==null;){var v=g.next,E=wA(g,c);E===0?(g.next=null,f===null?Qf=v:f.next=v,v===null&&(Al=f)):(f=g,(a!==0||(E&3)!==0)&&(eh=!0)),g=v}lu(a)}function wA(a,c){for(var f=a.suspendedLanes,g=a.pingedLanes,v=a.expirationTimes,E=a.pendingLanes&-62914561;0<E;){var _=31-Ve(E),P=1<<_,G=v[_];G===-1?((P&f)===0||(P&g)!==0)&&(v[_]=_r(P,c)):G<=c&&(a.expiredLanes|=P),E&=~P}if(c=At,f=ct,f=kn(a,a===c?f:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),g=a.callbackNode,f===0||a===c&&(yt===2||yt===9)||a.cancelPendingCommit!==null)return g!==null&&g!==null&&Se(g),a.callbackNode=null,a.callbackPriority=0;if((f&3)===0||Tn(a,f)){if(c=f&-f,c===a.callbackPriority)return c;switch(g!==null&&Se(g),sr(f)){case 2:case 8:f=Dn;break;case 32:f=rn;break;case 268435456:f=mt;break;default:f=rn}return g=SA.bind(null,a),f=Ee(f,g),a.callbackPriority=c,a.callbackNode=f,c}return g!==null&&g!==null&&Se(g),a.callbackPriority=2,a.callbackNode=null,2}function SA(a,c){if(Hn!==0&&Hn!==5)return a.callbackNode=null,a.callbackPriority=0,null;var f=a.callbackNode;if(Jf()&&a.callbackNode!==f)return null;var g=ct;return g=kn(a,a===At?g:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),g===0?null:(iA(a,g,c),wA(a,Oe()),a.callbackNode!=null&&a.callbackNode===f?SA.bind(null,a):null)}function EA(a,c){if(Jf())return null;iA(a,c,!0)}function sF(){mF(function(){(gt&6)!==0?Ee(Wt,iF):xA()})}function r0(){return ua===0&&(ua=yi()),ua}function CA(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:rl(""+a)}function kA(a,c){var f=c.ownerDocument.createElement("input");return f.name=c.name,f.value=c.value,a.id&&f.setAttribute("form",a.id),c.parentNode.insertBefore(f,c),a=new FormData(a),f.parentNode.removeChild(f),a}function oF(a,c,f,g,v){if(c==="submit"&&f&&f.stateNode===v){var E=CA((v[an]||null).action),_=g.submitter;_&&(c=(c=_[an]||null)?CA(c.formAction):_.getAttribute("formAction"),c!==null&&(E=c,_=null));var P=new Ht("action","action",null,g,v);a.push({event:P,listeners:[{instance:null,listener:function(){if(g.defaultPrevented){if(ua!==0){var G=_?kA(v,_):new FormData(v);Ey(f,{pending:!0,data:G,method:v.method,action:E},null,G)}}else typeof E=="function"&&(P.preventDefault(),G=_?kA(v,_):new FormData(v),Ey(f,{pending:!0,data:G,method:v.method,action:E},E,G))},currentTarget:v}]})}}for(var i0=0;i0<Hg.length;i0++){var s0=Hg[i0],aF=s0.toLowerCase(),lF=s0[0].toUpperCase()+s0.slice(1);wi(aF,"on"+lF)}wi(iT,"onAnimationEnd"),wi(sT,"onAnimationIteration"),wi(oT,"onAnimationStart"),wi("dblclick","onDoubleClick"),wi("focusin","onFocus"),wi("focusout","onBlur"),wi(kH,"onTransitionRun"),wi(TH,"onTransitionStart"),wi(NH,"onTransitionCancel"),wi(aT,"onTransitionEnd"),ge("onMouseEnter",["mouseout","mouseover"]),ge("onMouseLeave",["mouseout","mouseover"]),ge("onPointerEnter",["pointerout","pointerover"]),ge("onPointerLeave",["pointerout","pointerover"]),X("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),X("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),X("onBeforeInput",["compositionend","keypress","textInput","paste"]),X("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),X("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),X("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var cu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),cF=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(cu));function TA(a,c){c=(c&4)!==0;for(var f=0;f<a.length;f++){var g=a[f],v=g.event;g=g.listeners;e:{var E=void 0;if(c)for(var _=g.length-1;0<=_;_--){var P=g[_],G=P.instance,se=P.currentTarget;if(P=P.listener,G!==E&&v.isPropagationStopped())break e;E=P,v.currentTarget=se;try{E(v)}catch(fe){Vf(fe)}v.currentTarget=null,E=G}else for(_=0;_<g.length;_++){if(P=g[_],G=P.instance,se=P.currentTarget,P=P.listener,G!==E&&v.isPropagationStopped())break e;E=P,v.currentTarget=se;try{E(v)}catch(fe){Vf(fe)}v.currentTarget=null,E=G}}}}function rt(a,c){var f=c[Ie];f===void 0&&(f=c[Ie]=new Set);var g=a+"__bubble";f.has(g)||(NA(c,a,2,!1),f.add(g))}function o0(a,c,f){var g=0;c&&(g|=4),NA(f,a,g,c)}var th="_reactListening"+Math.random().toString(36).slice(2);function a0(a){if(!a[th]){a[th]=!0,ss.forEach(function(f){f!=="selectionchange"&&(cF.has(f)||o0(f,!1,a),o0(f,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[th]||(c[th]=!0,o0("selectionchange",!1,c))}}function NA(a,c,f,g){switch(ZA(c)){case 2:var v=PF;break;case 8:v=IF;break;default:v=w0}f=v.bind(null,c,f,a),v=void 0,!ie||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(v=!0),g?v!==void 0?a.addEventListener(c,f,{capture:!0,passive:v}):a.addEventListener(c,f,!0):v!==void 0?a.addEventListener(c,f,{passive:v}):a.addEventListener(c,f,!1)}function l0(a,c,f,g,v){var E=g;if((c&1)===0&&(c&2)===0&&g!==null)e:for(;;){if(g===null)return;var _=g.tag;if(_===3||_===4){var P=g.stateNode.containerInfo;if(P===v)break;if(_===4)for(_=g.return;_!==null;){var G=_.tag;if((G===3||G===4)&&_.stateNode.containerInfo===v)return;_=_.return}for(;P!==null;){if(_=fn(P),_===null)return;if(G=_.tag,G===5||G===6||G===26||G===27){g=E=_;continue e}P=P.parentNode}}g=g.return}mf(function(){var se=E,fe=Mc(f),me=[];e:{var le=lT.get(a);if(le!==void 0){var ue=Ht,$e=a;switch(a){case"keypress":if(Je(f)===0)break e;case"keydown":case"keyup":ue=rH;break;case"focusin":$e="focus",ue=jg;break;case"focusout":$e="blur",ue=jg;break;case"beforeblur":case"afterblur":ue=jg;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=I2;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=$V;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=oH;break;case iT:case sT:case oT:ue=KV;break;case aT:ue=lH;break;case"scroll":case"scrollend":ue=_g;break;case"wheel":ue=uH;break;case"copy":case"cut":case"paste":ue=XV;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=z2;break;case"toggle":case"beforetoggle":ue=fH}var He=(c&4)!==0,St=!He&&(a==="scroll"||a==="scrollend"),ne=He?le!==null?le+"Capture":null:le;He=[];for(var Q=se,re;Q!==null;){var he=Q;if(re=he.stateNode,he=he.tag,he!==5&&he!==26&&he!==27||re===null||ne===null||(he=K(Q,ne),he!=null&&He.push(uu(Q,he,re))),St)break;Q=Q.return}0<He.length&&(le=new ue(le,$e,null,f,fe),me.push({event:le,listeners:He}))}}if((c&7)===0){e:{if(le=a==="mouseover"||a==="pointerover",ue=a==="mouseout"||a==="pointerout",le&&f!==Ac&&($e=f.relatedTarget||f.fromElement)&&(fn($e)||$e[Xr]))break e;if((ue||le)&&(le=fe.window===fe?fe:(le=fe.ownerDocument)?le.defaultView||le.parentWindow:window,ue?($e=f.relatedTarget||f.toElement,ue=se,$e=$e?fn($e):null,$e!==null&&(St=s($e),He=$e.tag,$e!==St||He!==5&&He!==27&&He!==6)&&($e=null)):(ue=null,$e=se),ue!==$e)){if(He=I2,he="onMouseLeave",ne="onMouseEnter",Q="mouse",(a==="pointerout"||a==="pointerover")&&(He=z2,he="onPointerLeave",ne="onPointerEnter",Q="pointer"),St=ue==null?le:Rr(ue),re=$e==null?le:Rr($e),le=new He(he,Q+"leave",ue,f,fe),le.target=St,le.relatedTarget=re,he=null,fn(fe)===se&&(He=new He(ne,Q+"enter",$e,f,fe),He.target=re,He.relatedTarget=St,he=He),St=he,ue&&$e)t:{for(He=ue,ne=$e,Q=0,re=He;re;re=Ml(re))Q++;for(re=0,he=ne;he;he=Ml(he))re++;for(;0<Q-re;)He=Ml(He),Q--;for(;0<re-Q;)ne=Ml(ne),re--;for(;Q--;){if(He===ne||ne!==null&&He===ne.alternate)break t;He=Ml(He),ne=Ml(ne)}He=null}else He=null;ue!==null&&AA(me,le,ue,He,!1),$e!==null&&St!==null&&AA(me,St,$e,He,!0)}}e:{if(le=se?Rr(se):window,ue=le.nodeName&&le.nodeName.toLowerCase(),ue==="select"||ue==="input"&&le.type==="file")var Re=W2;else if($2(le))if(K2)Re=SH;else{Re=xH;var tt=vH}else ue=le.nodeName,!ue||ue.toLowerCase()!=="input"||le.type!=="checkbox"&&le.type!=="radio"?se&&Nc(se.elementType)&&(Re=W2):Re=wH;if(Re&&(Re=Re(a,se))){G2(me,Re,f,fe);break e}tt&&tt(a,le,se),a==="focusout"&&se&&le.type==="number"&&se.memoizedProps.value!=null&&Yo(le,"number",le.value)}switch(tt=se?Rr(se):window,a){case"focusin":($2(tt)||tt.contentEditable==="true")&&(sl=tt,zg=se,Pc=null);break;case"focusout":Pc=zg=sl=null;break;case"mousedown":qg=!0;break;case"contextmenu":case"mouseup":case"dragend":qg=!1,nT(me,f,fe);break;case"selectionchange":if(CH)break;case"keydown":case"keyup":nT(me,f,fe)}var Le;if(Lg)e:{switch(a){case"compositionstart":var Ue="onCompositionStart";break e;case"compositionend":Ue="onCompositionEnd";break e;case"compositionupdate":Ue="onCompositionUpdate";break e}Ue=void 0}else il?F2(a,f)&&(Ue="onCompositionEnd"):a==="keydown"&&f.keyCode===229&&(Ue="onCompositionStart");Ue&&(q2&&f.locale!=="ko"&&(il||Ue!=="onCompositionStart"?Ue==="onCompositionEnd"&&il&&(Le=Fe()):(be=fe,we="value"in be?be.value:be.textContent,il=!0)),tt=nh(se,Ue),0<tt.length&&(Ue=new B2(Ue,a,null,f,fe),me.push({event:Ue,listeners:tt}),Le?Ue.data=Le:(Le=U2(f),Le!==null&&(Ue.data=Le)))),(Le=pH?mH(a,f):gH(a,f))&&(Ue=nh(se,"onBeforeInput"),0<Ue.length&&(tt=new B2("onBeforeInput","beforeinput",null,f,fe),me.push({event:tt,listeners:Ue}),tt.data=Le)),oF(me,a,se,f,fe)}TA(me,c)})}function uu(a,c,f){return{instance:a,listener:c,currentTarget:f}}function nh(a,c){for(var f=c+"Capture",g=[];a!==null;){var v=a,E=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||E===null||(v=K(a,f),v!=null&&g.unshift(uu(a,v,E)),v=K(a,c),v!=null&&g.push(uu(a,v,E))),a.tag===3)return g;a=a.return}return[]}function Ml(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function AA(a,c,f,g,v){for(var E=c._reactName,_=[];f!==null&&f!==g;){var P=f,G=P.alternate,se=P.stateNode;if(P=P.tag,G!==null&&G===g)break;P!==5&&P!==26&&P!==27||se===null||(G=se,v?(se=K(f,E),se!=null&&_.unshift(uu(f,se,G))):v||(se=K(f,E),se!=null&&_.push(uu(f,se,G)))),f=f.return}_.length!==0&&a.push({event:c,listeners:_})}var uF=/\r\n?/g,dF=/\u0000|\uFFFD/g;function MA(a){return(typeof a=="string"?a:""+a).replace(uF,`
`).replace(dF,"")}function _A(a,c){return c=MA(c),MA(a)===c}function rh(){}function wt(a,c,f,g,v,E){switch(f){case"children":typeof g=="string"?c==="body"||c==="textarea"&&g===""||Ws(a,g):(typeof g=="number"||typeof g=="bigint")&&c!=="body"&&Ws(a,""+g);break;case"className":Nn(a,"class",g);break;case"tabIndex":Nn(a,"tabindex",g);break;case"dir":case"role":case"viewBox":case"width":case"height":Nn(a,f,g);break;case"style":hf(a,g,E);break;case"data":if(c!=="object"){Nn(a,"data",g);break}case"src":case"href":if(g===""&&(c!=="a"||f!=="href")){a.removeAttribute(f);break}if(g==null||typeof g=="function"||typeof g=="symbol"||typeof g=="boolean"){a.removeAttribute(f);break}g=rl(""+g),a.setAttribute(f,g);break;case"action":case"formAction":if(typeof g=="function"){a.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(f==="formAction"?(c!=="input"&&wt(a,c,"name",v.name,v,null),wt(a,c,"formEncType",v.formEncType,v,null),wt(a,c,"formMethod",v.formMethod,v,null),wt(a,c,"formTarget",v.formTarget,v,null)):(wt(a,c,"encType",v.encType,v,null),wt(a,c,"method",v.method,v,null),wt(a,c,"target",v.target,v,null)));if(g==null||typeof g=="symbol"||typeof g=="boolean"){a.removeAttribute(f);break}g=rl(""+g),a.setAttribute(f,g);break;case"onClick":g!=null&&(a.onclick=rh);break;case"onScroll":g!=null&&rt("scroll",a);break;case"onScrollEnd":g!=null&&rt("scrollend",a);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(f=g.__html,f!=null){if(v.children!=null)throw Error(r(60));a.innerHTML=f}}break;case"multiple":a.multiple=g&&typeof g!="function"&&typeof g!="symbol";break;case"muted":a.muted=g&&typeof g!="function"&&typeof g!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(g==null||typeof g=="function"||typeof g=="boolean"||typeof g=="symbol"){a.removeAttribute("xlink:href");break}f=rl(""+g),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":g!=null&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(f,""+g):a.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":g&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(f,""):a.removeAttribute(f);break;case"capture":case"download":g===!0?a.setAttribute(f,""):g!==!1&&g!=null&&typeof g!="function"&&typeof g!="symbol"?a.setAttribute(f,g):a.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":g!=null&&typeof g!="function"&&typeof g!="symbol"&&!isNaN(g)&&1<=g?a.setAttribute(f,g):a.removeAttribute(f);break;case"rowSpan":case"start":g==null||typeof g=="function"||typeof g=="symbol"||isNaN(g)?a.removeAttribute(f):a.setAttribute(f,g);break;case"popover":rt("beforetoggle",a),rt("toggle",a),Vt(a,"popover",g);break;case"xlinkActuate":hn(a,"http://www.w3.org/1999/xlink","xlink:actuate",g);break;case"xlinkArcrole":hn(a,"http://www.w3.org/1999/xlink","xlink:arcrole",g);break;case"xlinkRole":hn(a,"http://www.w3.org/1999/xlink","xlink:role",g);break;case"xlinkShow":hn(a,"http://www.w3.org/1999/xlink","xlink:show",g);break;case"xlinkTitle":hn(a,"http://www.w3.org/1999/xlink","xlink:title",g);break;case"xlinkType":hn(a,"http://www.w3.org/1999/xlink","xlink:type",g);break;case"xmlBase":hn(a,"http://www.w3.org/XML/1998/namespace","xml:base",g);break;case"xmlLang":hn(a,"http://www.w3.org/XML/1998/namespace","xml:lang",g);break;case"xmlSpace":hn(a,"http://www.w3.org/XML/1998/namespace","xml:space",g);break;case"is":Vt(a,"is",g);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=Ag.get(f)||f,Vt(a,f,g))}}function c0(a,c,f,g,v,E){switch(f){case"style":hf(a,g,E);break;case"dangerouslySetInnerHTML":if(g!=null){if(typeof g!="object"||!("__html"in g))throw Error(r(61));if(f=g.__html,f!=null){if(v.children!=null)throw Error(r(60));a.innerHTML=f}}break;case"children":typeof g=="string"?Ws(a,g):(typeof g=="number"||typeof g=="bigint")&&Ws(a,""+g);break;case"onScroll":g!=null&&rt("scroll",a);break;case"onScrollEnd":g!=null&&rt("scrollend",a);break;case"onClick":g!=null&&(a.onclick=rh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!je.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(v=f.endsWith("Capture"),c=f.slice(2,v?f.length-7:void 0),E=a[an]||null,E=E!=null?E[f]:null,typeof E=="function"&&a.removeEventListener(c,E,v),typeof g=="function")){typeof E!="function"&&E!==null&&(f in a?a[f]=null:a.hasAttribute(f)&&a.removeAttribute(f)),a.addEventListener(c,g,v);break e}f in a?a[f]=g:g===!0?a.setAttribute(f,""):Vt(a,f,g)}}}function Fn(a,c,f){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":rt("error",a),rt("load",a);var g=!1,v=!1,E;for(E in f)if(f.hasOwnProperty(E)){var _=f[E];if(_!=null)switch(E){case"src":g=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:wt(a,c,E,_,f,null)}}v&&wt(a,c,"srcSet",f.srcSet,f,null),g&&wt(a,c,"src",f.src,f,null);return;case"input":rt("invalid",a);var P=E=_=v=null,G=null,se=null;for(g in f)if(f.hasOwnProperty(g)){var fe=f[g];if(fe!=null)switch(g){case"name":v=fe;break;case"type":_=fe;break;case"checked":G=fe;break;case"defaultChecked":se=fe;break;case"value":E=fe;break;case"defaultValue":P=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(r(137,c));break;default:wt(a,c,g,fe,f,null)}}nl(a,E,P,G,se,_,v,!1),ls(a);return;case"select":rt("invalid",a),g=_=E=null;for(v in f)if(f.hasOwnProperty(v)&&(P=f[v],P!=null))switch(v){case"value":E=P;break;case"defaultValue":_=P;break;case"multiple":g=P;default:wt(a,c,v,P,f,null)}c=E,f=_,a.multiple=!!g,c!=null?xi(a,!!g,c,!1):f!=null&&xi(a,!!g,f,!0);return;case"textarea":rt("invalid",a),E=v=g=null;for(_ in f)if(f.hasOwnProperty(_)&&(P=f[_],P!=null))switch(_){case"value":g=P;break;case"defaultValue":v=P;break;case"children":E=P;break;case"dangerouslySetInnerHTML":if(P!=null)throw Error(r(91));break;default:wt(a,c,_,P,f,null)}df(a,g,v,E),ls(a);return;case"option":for(G in f)if(f.hasOwnProperty(G)&&(g=f[G],g!=null))switch(G){case"selected":a.selected=g&&typeof g!="function"&&typeof g!="symbol";break;default:wt(a,c,G,g,f,null)}return;case"dialog":rt("beforetoggle",a),rt("toggle",a),rt("cancel",a),rt("close",a);break;case"iframe":case"object":rt("load",a);break;case"video":case"audio":for(g=0;g<cu.length;g++)rt(cu[g],a);break;case"image":rt("error",a),rt("load",a);break;case"details":rt("toggle",a);break;case"embed":case"source":case"link":rt("error",a),rt("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(se in f)if(f.hasOwnProperty(se)&&(g=f[se],g!=null))switch(se){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:wt(a,c,se,g,f,null)}return;default:if(Nc(c)){for(fe in f)f.hasOwnProperty(fe)&&(g=f[fe],g!==void 0&&c0(a,c,fe,g,f,void 0));return}}for(P in f)f.hasOwnProperty(P)&&(g=f[P],g!=null&&wt(a,c,P,g,f,null))}function fF(a,c,f,g){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,E=null,_=null,P=null,G=null,se=null,fe=null;for(ue in f){var me=f[ue];if(f.hasOwnProperty(ue)&&me!=null)switch(ue){case"checked":break;case"value":break;case"defaultValue":G=me;default:g.hasOwnProperty(ue)||wt(a,c,ue,null,g,me)}}for(var le in g){var ue=g[le];if(me=f[le],g.hasOwnProperty(le)&&(ue!=null||me!=null))switch(le){case"type":E=ue;break;case"name":v=ue;break;case"checked":se=ue;break;case"defaultChecked":fe=ue;break;case"value":_=ue;break;case"defaultValue":P=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(r(137,c));break;default:ue!==me&&wt(a,c,le,ue,g,me)}}cs(a,_,P,G,se,fe,E,v);return;case"select":ue=_=P=le=null;for(E in f)if(G=f[E],f.hasOwnProperty(E)&&G!=null)switch(E){case"value":break;case"multiple":ue=G;default:g.hasOwnProperty(E)||wt(a,c,E,null,g,G)}for(v in g)if(E=g[v],G=f[v],g.hasOwnProperty(v)&&(E!=null||G!=null))switch(v){case"value":le=E;break;case"defaultValue":P=E;break;case"multiple":_=E;default:E!==G&&wt(a,c,v,E,g,G)}c=P,f=_,g=ue,le!=null?xi(a,!!f,le,!1):!!g!=!!f&&(c!=null?xi(a,!!f,c,!0):xi(a,!!f,f?[]:"",!1));return;case"textarea":ue=le=null;for(P in f)if(v=f[P],f.hasOwnProperty(P)&&v!=null&&!g.hasOwnProperty(P))switch(P){case"value":break;case"children":break;default:wt(a,c,P,null,g,v)}for(_ in g)if(v=g[_],E=f[_],g.hasOwnProperty(_)&&(v!=null||E!=null))switch(_){case"value":le=v;break;case"defaultValue":ue=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(r(91));break;default:v!==E&&wt(a,c,_,v,g,E)}uf(a,le,ue);return;case"option":for(var $e in f)if(le=f[$e],f.hasOwnProperty($e)&&le!=null&&!g.hasOwnProperty($e))switch($e){case"selected":a.selected=!1;break;default:wt(a,c,$e,null,g,le)}for(G in g)if(le=g[G],ue=f[G],g.hasOwnProperty(G)&&le!==ue&&(le!=null||ue!=null))switch(G){case"selected":a.selected=le&&typeof le!="function"&&typeof le!="symbol";break;default:wt(a,c,G,le,g,ue)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var He in f)le=f[He],f.hasOwnProperty(He)&&le!=null&&!g.hasOwnProperty(He)&&wt(a,c,He,null,g,le);for(se in g)if(le=g[se],ue=f[se],g.hasOwnProperty(se)&&le!==ue&&(le!=null||ue!=null))switch(se){case"children":case"dangerouslySetInnerHTML":if(le!=null)throw Error(r(137,c));break;default:wt(a,c,se,le,g,ue)}return;default:if(Nc(c)){for(var St in f)le=f[St],f.hasOwnProperty(St)&&le!==void 0&&!g.hasOwnProperty(St)&&c0(a,c,St,void 0,g,le);for(fe in g)le=g[fe],ue=f[fe],!g.hasOwnProperty(fe)||le===ue||le===void 0&&ue===void 0||c0(a,c,fe,le,g,ue);return}}for(var ne in f)le=f[ne],f.hasOwnProperty(ne)&&le!=null&&!g.hasOwnProperty(ne)&&wt(a,c,ne,null,g,le);for(me in g)le=g[me],ue=f[me],!g.hasOwnProperty(me)||le===ue||le==null&&ue==null||wt(a,c,me,le,g,ue)}var u0=null,d0=null;function ih(a){return a.nodeType===9?a:a.ownerDocument}function DA(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function RA(a,c){if(a===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&c==="foreignObject"?0:a}function f0(a,c){return a==="textarea"||a==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var h0=null;function hF(){var a=window.event;return a&&a.type==="popstate"?a===h0?!1:(h0=a,!0):(h0=null,!1)}var jA=typeof setTimeout=="function"?setTimeout:void 0,pF=typeof clearTimeout=="function"?clearTimeout:void 0,OA=typeof Promise=="function"?Promise:void 0,mF=typeof queueMicrotask=="function"?queueMicrotask:typeof OA<"u"?function(a){return OA.resolve(null).then(a).catch(gF)}:jA;function gF(a){setTimeout(function(){throw a})}function fo(a){return a==="head"}function LA(a,c){var f=c,g=0,v=0;do{var E=f.nextSibling;if(a.removeChild(f),E&&E.nodeType===8)if(f=E.data,f==="/$"){if(0<g&&8>g){f=g;var _=a.ownerDocument;if(f&1&&du(_.documentElement),f&2&&du(_.body),f&4)for(f=_.head,du(f),_=f.firstChild;_;){var P=_.nextSibling,G=_.nodeName;_[or]||G==="SCRIPT"||G==="STYLE"||G==="LINK"&&_.rel.toLowerCase()==="stylesheet"||f.removeChild(_),_=P}}if(v===0){a.removeChild(E),vu(c);return}v--}else f==="$"||f==="$?"||f==="$!"?v++:g=f.charCodeAt(0)-48;else g=0;f=E}while(f);vu(c)}function p0(a){var c=a.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var f=c;switch(c=c.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":p0(f),Dr(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}a.removeChild(f)}}function yF(a,c,f,g){for(;a.nodeType===1;){var v=f;if(a.nodeName.toLowerCase()!==c.toLowerCase()){if(!g&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(g){if(!a[or])switch(c){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(E=a.getAttribute("rel"),E==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(E!==v.rel||a.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||a.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||a.getAttribute("title")!==(v.title==null?null:v.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(E=a.getAttribute("src"),(E!==(v.src==null?null:v.src)||a.getAttribute("type")!==(v.type==null?null:v.type)||a.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&E&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(c==="input"&&a.type==="hidden"){var E=v.name==null?null:""+v.name;if(v.type==="hidden"&&a.getAttribute("name")===E)return a}else return a;if(a=Ei(a.nextSibling),a===null)break}return null}function bF(a,c,f){if(c==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!f||(a=Ei(a.nextSibling),a===null))return null;return a}function m0(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function vF(a,c){var f=a.ownerDocument;if(a.data!=="$?"||f.readyState==="complete")c();else{var g=function(){c(),f.removeEventListener("DOMContentLoaded",g)};f.addEventListener("DOMContentLoaded",g),a._reactRetry=g}}function Ei(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return a}var g0=null;function PA(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var f=a.data;if(f==="$"||f==="$!"||f==="$?"){if(c===0)return a;c--}else f==="/$"&&c++}a=a.previousSibling}return null}function IA(a,c,f){switch(c=ih(f),a){case"html":if(a=c.documentElement,!a)throw Error(r(452));return a;case"head":if(a=c.head,!a)throw Error(r(453));return a;case"body":if(a=c.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function du(a){for(var c=a.attributes;c.length;)a.removeAttributeNode(c[0]);Dr(a)}var ri=new Map,BA=new Set;function sh(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Es=V.d;V.d={f:xF,r:wF,D:SF,C:EF,L:CF,m:kF,X:NF,S:TF,M:AF};function xF(){var a=Es.f(),c=Xf();return a||c}function wF(a){var c=jn(a);c!==null&&c.tag===5&&c.type==="form"?iN(c):Es.r(a)}var _l=typeof document>"u"?null:document;function zA(a,c,f){var g=_l;if(g&&typeof c=="string"&&c){var v=pn(c);v='link[rel="'+a+'"][href="'+v+'"]',typeof f=="string"&&(v+='[crossorigin="'+f+'"]'),BA.has(v)||(BA.add(v),a={rel:a,crossOrigin:f,href:c},g.querySelector(v)===null&&(c=g.createElement("link"),Fn(c,"link",a),Et(c),g.head.appendChild(c)))}}function SF(a){Es.D(a),zA("dns-prefetch",a,null)}function EF(a,c){Es.C(a,c),zA("preconnect",a,c)}function CF(a,c,f){Es.L(a,c,f);var g=_l;if(g&&a&&c){var v='link[rel="preload"][as="'+pn(c)+'"]';c==="image"&&f&&f.imageSrcSet?(v+='[imagesrcset="'+pn(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(v+='[imagesizes="'+pn(f.imageSizes)+'"]')):v+='[href="'+pn(a)+'"]';var E=v;switch(c){case"style":E=Dl(a);break;case"script":E=Rl(a)}ri.has(E)||(a=h({rel:"preload",href:c==="image"&&f&&f.imageSrcSet?void 0:a,as:c},f),ri.set(E,a),g.querySelector(v)!==null||c==="style"&&g.querySelector(fu(E))||c==="script"&&g.querySelector(hu(E))||(c=g.createElement("link"),Fn(c,"link",a),Et(c),g.head.appendChild(c)))}}function kF(a,c){Es.m(a,c);var f=_l;if(f&&a){var g=c&&typeof c.as=="string"?c.as:"script",v='link[rel="modulepreload"][as="'+pn(g)+'"][href="'+pn(a)+'"]',E=v;switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=Rl(a)}if(!ri.has(E)&&(a=h({rel:"modulepreload",href:a},c),ri.set(E,a),f.querySelector(v)===null)){switch(g){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(hu(E)))return}g=f.createElement("link"),Fn(g,"link",a),Et(g),f.head.appendChild(g)}}}function TF(a,c,f){Es.S(a,c,f);var g=_l;if(g&&a){var v=Zn(g).hoistableStyles,E=Dl(a);c=c||"default";var _=v.get(E);if(!_){var P={loading:0,preload:null};if(_=g.querySelector(fu(E)))P.loading=5;else{a=h({rel:"stylesheet",href:a,"data-precedence":c},f),(f=ri.get(E))&&y0(a,f);var G=_=g.createElement("link");Et(G),Fn(G,"link",a),G._p=new Promise(function(se,fe){G.onload=se,G.onerror=fe}),G.addEventListener("load",function(){P.loading|=1}),G.addEventListener("error",function(){P.loading|=2}),P.loading|=4,oh(_,c,g)}_={type:"stylesheet",instance:_,count:1,state:P},v.set(E,_)}}}function NF(a,c){Es.X(a,c);var f=_l;if(f&&a){var g=Zn(f).hoistableScripts,v=Rl(a),E=g.get(v);E||(E=f.querySelector(hu(v)),E||(a=h({src:a,async:!0},c),(c=ri.get(v))&&b0(a,c),E=f.createElement("script"),Et(E),Fn(E,"link",a),f.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},g.set(v,E))}}function AF(a,c){Es.M(a,c);var f=_l;if(f&&a){var g=Zn(f).hoistableScripts,v=Rl(a),E=g.get(v);E||(E=f.querySelector(hu(v)),E||(a=h({src:a,async:!0,type:"module"},c),(c=ri.get(v))&&b0(a,c),E=f.createElement("script"),Et(E),Fn(E,"link",a),f.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},g.set(v,E))}}function qA(a,c,f,g){var v=(v=ee.current)?sh(v):null;if(!v)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(c=Dl(f.href),f=Zn(v).hoistableStyles,g=f.get(c),g||(g={type:"style",instance:null,count:0,state:null},f.set(c,g)),g):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){a=Dl(f.href);var E=Zn(v).hoistableStyles,_=E.get(a);if(_||(v=v.ownerDocument||v,_={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(a,_),(E=v.querySelector(fu(a)))&&!E._p&&(_.instance=E,_.state.loading=5),ri.has(a)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},ri.set(a,f),E||MF(v,a,f,_.state))),c&&g===null)throw Error(r(528,""));return _}if(c&&g!==null)throw Error(r(529,""));return null;case"script":return c=f.async,f=f.src,typeof f=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=Rl(f),f=Zn(v).hoistableScripts,g=f.get(c),g||(g={type:"script",instance:null,count:0,state:null},f.set(c,g)),g):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function Dl(a){return'href="'+pn(a)+'"'}function fu(a){return'link[rel="stylesheet"]['+a+"]"}function VA(a){return h({},a,{"data-precedence":a.precedence,precedence:null})}function MF(a,c,f,g){a.querySelector('link[rel="preload"][as="style"]['+c+"]")?g.loading=1:(c=a.createElement("link"),g.preload=c,c.addEventListener("load",function(){return g.loading|=1}),c.addEventListener("error",function(){return g.loading|=2}),Fn(c,"link",f),Et(c),a.head.appendChild(c))}function Rl(a){return'[src="'+pn(a)+'"]'}function hu(a){return"script[async]"+a}function HA(a,c,f){if(c.count++,c.instance===null)switch(c.type){case"style":var g=a.querySelector('style[data-href~="'+pn(f.href)+'"]');if(g)return c.instance=g,Et(g),g;var v=h({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return g=(a.ownerDocument||a).createElement("style"),Et(g),Fn(g,"style",v),oh(g,f.precedence,a),c.instance=g;case"stylesheet":v=Dl(f.href);var E=a.querySelector(fu(v));if(E)return c.state.loading|=4,c.instance=E,Et(E),E;g=VA(f),(v=ri.get(v))&&y0(g,v),E=(a.ownerDocument||a).createElement("link"),Et(E);var _=E;return _._p=new Promise(function(P,G){_.onload=P,_.onerror=G}),Fn(E,"link",g),c.state.loading|=4,oh(E,f.precedence,a),c.instance=E;case"script":return E=Rl(f.src),(v=a.querySelector(hu(E)))?(c.instance=v,Et(v),v):(g=f,(v=ri.get(E))&&(g=h({},f),b0(g,v)),a=a.ownerDocument||a,v=a.createElement("script"),Et(v),Fn(v,"link",g),a.head.appendChild(v),c.instance=v);case"void":return null;default:throw Error(r(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(g=c.instance,c.state.loading|=4,oh(g,f.precedence,a));return c.instance}function oh(a,c,f){for(var g=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=g.length?g[g.length-1]:null,E=v,_=0;_<g.length;_++){var P=g[_];if(P.dataset.precedence===c)E=P;else if(E!==v)break}E?E.parentNode.insertBefore(a,E.nextSibling):(c=f.nodeType===9?f.head:f,c.insertBefore(a,c.firstChild))}function y0(a,c){a.crossOrigin==null&&(a.crossOrigin=c.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=c.referrerPolicy),a.title==null&&(a.title=c.title)}function b0(a,c){a.crossOrigin==null&&(a.crossOrigin=c.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=c.referrerPolicy),a.integrity==null&&(a.integrity=c.integrity)}var ah=null;function FA(a,c,f){if(ah===null){var g=new Map,v=ah=new Map;v.set(f,g)}else v=ah,g=v.get(f),g||(g=new Map,v.set(f,g));if(g.has(a))return g;for(g.set(a,null),f=f.getElementsByTagName(a),v=0;v<f.length;v++){var E=f[v];if(!(E[or]||E[qt]||a==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var _=E.getAttribute(c)||"";_=a+_;var P=g.get(_);P?P.push(E):g.set(_,[E])}}return g}function UA(a,c,f){a=a.ownerDocument||a,a.head.insertBefore(f,c==="title"?a.querySelector("head > title"):null)}function _F(a,c,f){if(f===1||c.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return a=c.disabled,typeof c.precedence=="string"&&a==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function $A(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var pu=null;function DF(){}function RF(a,c,f){if(pu===null)throw Error(r(475));var g=pu;if(c.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var v=Dl(f.href),E=a.querySelector(fu(v));if(E){a=E._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(g.count++,g=lh.bind(g),a.then(g,g)),c.state.loading|=4,c.instance=E,Et(E);return}E=a.ownerDocument||a,f=VA(f),(v=ri.get(v))&&y0(f,v),E=E.createElement("link"),Et(E);var _=E;_._p=new Promise(function(P,G){_.onload=P,_.onerror=G}),Fn(E,"link",f),c.instance=E}g.stylesheets===null&&(g.stylesheets=new Map),g.stylesheets.set(c,a),(a=c.state.preload)&&(c.state.loading&3)===0&&(g.count++,c=lh.bind(g),a.addEventListener("load",c),a.addEventListener("error",c))}}function jF(){if(pu===null)throw Error(r(475));var a=pu;return a.stylesheets&&a.count===0&&v0(a,a.stylesheets),0<a.count?function(c){var f=setTimeout(function(){if(a.stylesheets&&v0(a,a.stylesheets),a.unsuspend){var g=a.unsuspend;a.unsuspend=null,g()}},6e4);return a.unsuspend=c,function(){a.unsuspend=null,clearTimeout(f)}}:null}function lh(){if(this.count--,this.count===0){if(this.stylesheets)v0(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var ch=null;function v0(a,c){a.stylesheets=null,a.unsuspend!==null&&(a.count++,ch=new Map,c.forEach(OF,a),ch=null,lh.call(a))}function OF(a,c){if(!(c.state.loading&4)){var f=ch.get(a);if(f)var g=f.get(null);else{f=new Map,ch.set(a,f);for(var v=a.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<v.length;E++){var _=v[E];(_.nodeName==="LINK"||_.getAttribute("media")!=="not all")&&(f.set(_.dataset.precedence,_),g=_)}g&&f.set(null,g)}v=c.instance,_=v.getAttribute("data-precedence"),E=f.get(_)||g,E===g&&f.set(null,v),f.set(_,v),this.count++,g=lh.bind(this),v.addEventListener("load",g),v.addEventListener("error",g),E?E.parentNode.insertBefore(v,E.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(v,a.firstChild)),c.state.loading|=4}}var mu={$$typeof:k,Provider:null,Consumer:null,_currentValue:Y,_currentValue2:Y,_threadCount:0};function LF(a,c,f,g,v,E,_,P){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Kr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Kr(0),this.hiddenUpdates=Kr(null),this.identifierPrefix=g,this.onUncaughtError=v,this.onCaughtError=E,this.onRecoverableError=_,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function GA(a,c,f,g,v,E,_,P,G,se,fe,me){return a=new LF(a,c,f,_,P,G,se,me),c=1,E===!0&&(c|=24),E=Or(3,null,null,c),a.current=E,E.stateNode=a,c=ey(),c.refCount++,a.pooledCache=c,c.refCount++,E.memoizedState={element:g,isDehydrated:f,cache:c},iy(E),a}function WA(a){return a?(a=cl,a):cl}function KA(a,c,f,g,v,E){v=WA(v),g.context===null?g.context=v:g.pendingContext=v,g=Js(c),g.payload={element:f},E=E===void 0?null:E,E!==null&&(g.callback=E),f=Qs(a,g,c),f!==null&&(zr(f,a,c),$c(f,a,c))}function YA(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var f=a.retryLane;a.retryLane=f!==0&&f<c?f:c}}function x0(a,c){YA(a,c),(a=a.alternate)&&YA(a,c)}function XA(a){if(a.tag===13){var c=ll(a,67108864);c!==null&&zr(c,a,67108864),x0(a,67108864)}}var uh=!0;function PF(a,c,f,g){var v=O.T;O.T=null;var E=V.p;try{V.p=2,w0(a,c,f,g)}finally{V.p=E,O.T=v}}function IF(a,c,f,g){var v=O.T;O.T=null;var E=V.p;try{V.p=8,w0(a,c,f,g)}finally{V.p=E,O.T=v}}function w0(a,c,f,g){if(uh){var v=S0(g);if(v===null)l0(a,c,g,dh,f),JA(a,g);else if(zF(v,a,c,f,g))g.stopPropagation();else if(JA(a,g),c&4&&-1<BF.indexOf(a)){for(;v!==null;){var E=jn(v);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var _=Xt(E.pendingLanes);if(_!==0){var P=E;for(P.pendingLanes|=2,P.entangledLanes|=2;_;){var G=1<<31-Ve(_);P.entanglements[1]|=G,_&=~G}Ui(E),(gt&6)===0&&(Kf=Oe()+500,lu(0))}}break;case 13:P=ll(E,2),P!==null&&zr(P,E,2),Xf(),x0(E,2)}if(E=S0(g),E===null&&l0(a,c,g,dh,f),E===v)break;v=E}v!==null&&g.stopPropagation()}else l0(a,c,g,null,f)}}function S0(a){return a=Mc(a),E0(a)}var dh=null;function E0(a){if(dh=null,a=fn(a),a!==null){var c=s(a);if(c===null)a=null;else{var f=c.tag;if(f===13){if(a=o(c),a!==null)return a;a=null}else if(f===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&&(a=null)}}return dh=a,null}function ZA(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(Mt()){case Wt:return 2;case Dn:return 8;case rn:case _t:return 32;case mt:return 268435456;default:return 32}default:return 32}}var C0=!1,ho=null,po=null,mo=null,gu=new Map,yu=new Map,go=[],BF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function JA(a,c){switch(a){case"focusin":case"focusout":ho=null;break;case"dragenter":case"dragleave":po=null;break;case"mouseover":case"mouseout":mo=null;break;case"pointerover":case"pointerout":gu.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":yu.delete(c.pointerId)}}function bu(a,c,f,g,v,E){return a===null||a.nativeEvent!==E?(a={blockedOn:c,domEventName:f,eventSystemFlags:g,nativeEvent:E,targetContainers:[v]},c!==null&&(c=jn(c),c!==null&&XA(c)),a):(a.eventSystemFlags|=g,c=a.targetContainers,v!==null&&c.indexOf(v)===-1&&c.push(v),a)}function zF(a,c,f,g,v){switch(c){case"focusin":return ho=bu(ho,a,c,f,g,v),!0;case"dragenter":return po=bu(po,a,c,f,g,v),!0;case"mouseover":return mo=bu(mo,a,c,f,g,v),!0;case"pointerover":var E=v.pointerId;return gu.set(E,bu(gu.get(E)||null,a,c,f,g,v)),!0;case"gotpointercapture":return E=v.pointerId,yu.set(E,bu(yu.get(E)||null,a,c,f,g,v)),!0}return!1}function QA(a){var c=fn(a.target);if(c!==null){var f=s(c);if(f!==null){if(c=f.tag,c===13){if(c=o(f),c!==null){a.blockedOn=c,Oi(a.priority,function(){if(f.tag===13){var g=Br();g=vt(g);var v=ll(f,g);v!==null&&zr(v,f,g),x0(f,g)}});return}}else if(c===3&&f.stateNode.current.memoizedState.isDehydrated){a.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}a.blockedOn=null}function fh(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0<c.length;){var f=S0(a.nativeEvent);if(f===null){f=a.nativeEvent;var g=new f.constructor(f.type,f);Ac=g,f.target.dispatchEvent(g),Ac=null}else return c=jn(f),c!==null&&XA(c),a.blockedOn=f,!1;c.shift()}return!0}function eM(a,c,f){fh(a)&&f.delete(c)}function qF(){C0=!1,ho!==null&&fh(ho)&&(ho=null),po!==null&&fh(po)&&(po=null),mo!==null&&fh(mo)&&(mo=null),gu.forEach(eM),yu.forEach(eM)}function hh(a,c){a.blockedOn===c&&(a.blockedOn=null,C0||(C0=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,qF)))}var ph=null;function tM(a){ph!==a&&(ph=a,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){ph===a&&(ph=null);for(var c=0;c<a.length;c+=3){var f=a[c],g=a[c+1],v=a[c+2];if(typeof g!="function"){if(E0(g||f)===null)continue;break}var E=jn(f);E!==null&&(a.splice(c,3),c-=3,Ey(E,{pending:!0,data:v,method:f.method,action:g},g,v))}}))}function vu(a){function c(G){return hh(G,a)}ho!==null&&hh(ho,a),po!==null&&hh(po,a),mo!==null&&hh(mo,a),gu.forEach(c),yu.forEach(c);for(var f=0;f<go.length;f++){var g=go[f];g.blockedOn===a&&(g.blockedOn=null)}for(;0<go.length&&(f=go[0],f.blockedOn===null);)QA(f),f.blockedOn===null&&go.shift();if(f=(a.ownerDocument||a).$$reactFormReplay,f!=null)for(g=0;g<f.length;g+=3){var v=f[g],E=f[g+1],_=v[an]||null;if(typeof E=="function")_||tM(f);else if(_){var P=null;if(E&&E.hasAttribute("formAction")){if(v=E,_=E[an]||null)P=_.formAction;else if(E0(v)!==null)continue}else P=_.action;typeof P=="function"?f[g+1]=P:(f.splice(g,3),g-=3),tM(f)}}}function k0(a){this._internalRoot=a}mh.prototype.render=k0.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(r(409));var f=c.current,g=Br();KA(f,g,a,c,null,null)},mh.prototype.unmount=k0.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;KA(a.current,2,null,a,null,null),Xf(),c[Xr]=null}};function mh(a){this._internalRoot=a}mh.prototype.unstable_scheduleHydration=function(a){if(a){var c=Us();a={blockedOn:null,target:a,priority:c};for(var f=0;f<go.length&&c!==0&&c<go[f].priority;f++);go.splice(f,0,a),f===0&&QA(a)}};var nM=t.version;if(nM!=="19.1.1")throw Error(r(527,nM,"19.1.1"));V.findDOMNode=function(a){var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=u(c),a=a!==null?d(a):null,a=a===null?null:a.stateNode,a};var VF={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var gh=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!gh.isDisabled&&gh.supportsFiber)try{zt=gh.inject(VF),ht=gh}catch{}}return wu.createRoot=function(a,c){if(!i(a))throw Error(r(299));var f=!1,g="",v=bN,E=vN,_=xN,P=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(g=c.identifierPrefix),c.onUncaughtError!==void 0&&(v=c.onUncaughtError),c.onCaughtError!==void 0&&(E=c.onCaughtError),c.onRecoverableError!==void 0&&(_=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(P=c.unstable_transitionCallbacks)),c=GA(a,1,!1,null,null,f,g,v,E,_,P,null),a[Xr]=c.current,a0(a),new k0(c)},wu.hydrateRoot=function(a,c,f){if(!i(a))throw Error(r(299));var g=!1,v="",E=bN,_=vN,P=xN,G=null,se=null;return f!=null&&(f.unstable_strictMode===!0&&(g=!0),f.identifierPrefix!==void 0&&(v=f.identifierPrefix),f.onUncaughtError!==void 0&&(E=f.onUncaughtError),f.onCaughtError!==void 0&&(_=f.onCaughtError),f.onRecoverableError!==void 0&&(P=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(G=f.unstable_transitionCallbacks),f.formState!==void 0&&(se=f.formState)),c=GA(a,1,!0,c,f??null,g,v,E,_,P,G,se),c.context=WA(null),f=c.current,g=Br(),g=vt(g),v=Js(g),v.callback=null,Qs(f,v,g),f=g,c.current.lanes=f,yr(c,f),Ui(c),a[Xr]=c.current,a0(a),new mh(c)},wu.version="19.1.1",wu}var fM;function JF(){if(fM)return A0.exports;fM=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),A0.exports=ZF(),A0.exports}var QF=JF(),eU=nP();const qd=Bd(eU);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ld(){return ld=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ld.apply(this,arguments)}var Mo;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Mo||(Mo={}));const hM="popstate";function tU(e){e===void 0&&(e={});function t(i,s){let{pathname:o="/",search:l="",hash:u=""}=$a(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),sE("",{pathname:o,search:l,hash:u},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let u=i.location.href,d=u.indexOf("#");l=d===-1?u:u.slice(0,d)}return l+"#"+(typeof s=="string"?s:rP(s))}function r(i,s){DC(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return rU(t,n,r,e)}function _n(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function DC(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function nU(){return Math.random().toString(36).substr(2,8)}function pM(e,t){return{usr:e.state,key:e.key,idx:t}}function sE(e,t,n,r){return n===void 0&&(n=null),ld({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?$a(t):t,{state:n,key:t&&t.key||r||nU()})}function rP(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function $a(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function rU(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l=Mo.Pop,u=null,d=h();d==null&&(d=0,o.replaceState(ld({},o.state,{idx:d}),""));function h(){return(o.state||{idx:null}).idx}function p(){l=Mo.Pop;let w=h(),C=w==null?null:w-d;d=w,u&&u({action:l,location:S.location,delta:C})}function m(w,C){l=Mo.Push;let N=sE(S.location,w,C);n&&n(N,w),d=h()+1;let k=pM(N,d),T=S.createHref(N);try{o.pushState(k,"",T)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;i.location.assign(T)}s&&u&&u({action:l,location:S.location,delta:1})}function b(w,C){l=Mo.Replace;let N=sE(S.location,w,C);n&&n(N,w),d=h();let k=pM(N,d),T=S.createHref(N);o.replaceState(k,"",T),s&&u&&u({action:l,location:S.location,delta:0})}function x(w){let C=i.location.origin!=="null"?i.location.origin:i.location.href,N=typeof w=="string"?w:rP(w);return N=N.replace(/ $/,"%20"),_n(C,"No window.location.(origin|href) available to create URL for href: "+N),new URL(N,C)}let S={get action(){return l},get location(){return e(i,o)},listen(w){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(hM,p),u=w,()=>{i.removeEventListener(hM,p),u=null}},createHref(w){return t(i,w)},createURL:x,encodeLocation(w){let C=x(w);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:m,replace:b,go(w){return o.go(w)}};return S}var mM;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(mM||(mM={}));function iU(e,t,n){return n===void 0&&(n="/"),sU(e,t,n)}function sU(e,t,n,r){let i=typeof t=="string"?$a(t):t,s=oP(i.pathname||"/",n);if(s==null)return null;let o=iP(e);oU(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let d=bU(s);l=mU(o[u],d)}return l}function iP(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,l)=>{let u={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(_n(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=ka([r,u.relativePath]),h=n.concat(u);s.children&&s.children.length>0&&(_n(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),iP(s.children,t,h,d)),!(s.path==null&&!s.index)&&t.push({path:d,score:hU(d,s.index),routesMeta:h})};return e.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let u of sP(s.path))i(s,o,u)}),t}function sP(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=sP(r.join("/")),l=[];return l.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&l.push(...o),l.map(u=>e.startsWith("/")&&u===""?"/":u)}function oU(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:pU(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const aU=/^:[\w-]+$/,lU=3,cU=2,uU=1,dU=10,fU=-2,gM=e=>e==="*";function hU(e,t){let n=e.split("/"),r=n.length;return n.some(gM)&&(r+=fU),t&&(r+=cU),n.filter(i=>!gM(i)).reduce((i,s)=>i+(aU.test(s)?lU:s===""?uU:dU),r)}function pU(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function mU(e,t,n){let{routesMeta:r}=e,i={},s="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],d=l===r.length-1,h=s==="/"?t:t.slice(s.length)||"/",p=gU({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),m=u.route;if(!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:ka([s,p.pathname]),pathnameBase:CU(ka([s,p.pathnameBase])),route:m}),p.pathnameBase!=="/"&&(s=ka([s,p.pathnameBase]))}return o}function gU(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=yU(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((d,h,p)=>{let{paramName:m,isOptional:b}=h;if(m==="*"){let S=l[p]||"";o=s.slice(0,s.length-S.length).replace(/(.)\/+$/,"$1")}const x=l[p];return b&&!x?d[m]=void 0:d[m]=(x||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:o,pattern:e}}function yU(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),DC(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function bU(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return DC(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function oP(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function vU(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?$a(e):e;return{pathname:n?n.startsWith("/")?n:xU(n,t):t,search:kU(r),hash:TU(i)}}function xU(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function R0(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function wU(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function SU(e,t){let n=wU(e);return t?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function EU(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=$a(e):(i=ld({},e),_n(!i.pathname||!i.pathname.includes("?"),R0("?","pathname","search",i)),_n(!i.pathname||!i.pathname.includes("#"),R0("#","pathname","hash",i)),_n(!i.search||!i.search.includes("#"),R0("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=n;else{let p=t.length-1;if(!r&&o.startsWith("..")){let m=o.split("/");for(;m[0]==="..";)m.shift(),p-=1;i.pathname=m.join("/")}l=p>=0?t[p]:"/"}let u=vU(i,l),d=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}const ka=e=>e.join("/").replace(/\/\/+/g,"/"),CU=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),kU=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,TU=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function NU(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const aP=["post","put","patch","delete"];new Set(aP);const AU=["get",...aP];new Set(AU);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function cd(){return cd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cd.apply(this,arguments)}const RC=D.createContext(null),MU=D.createContext(null),wm=D.createContext(null),Sm=D.createContext(null),Ga=D.createContext({outlet:null,matches:[],isDataRoute:!1}),lP=D.createContext(null);function Em(){return D.useContext(Sm)!=null}function cP(){return Em()||_n(!1),D.useContext(Sm).location}function uP(e){D.useContext(wm).static||D.useLayoutEffect(e)}function Vd(){let{isDataRoute:e}=D.useContext(Ga);return e?FU():_U()}function _U(){Em()||_n(!1);let e=D.useContext(RC),{basename:t,future:n,navigator:r}=D.useContext(wm),{matches:i}=D.useContext(Ga),{pathname:s}=cP(),o=JSON.stringify(SU(i,n.v7_relativeSplatPath)),l=D.useRef(!1);return uP(()=>{l.current=!0}),D.useCallback(function(d,h){if(h===void 0&&(h={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let p=EU(d,JSON.parse(o),s,h.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:ka([t,p.pathname])),(h.replace?r.replace:r.push)(p,h.state,h)},[t,r,o,s,e])}function DU(){let{matches:e}=D.useContext(Ga),t=e[e.length-1];return t?t.params:{}}function RU(e,t){return jU(e,t)}function jU(e,t,n,r){Em()||_n(!1);let{navigator:i}=D.useContext(wm),{matches:s}=D.useContext(Ga),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=cP(),h;if(t){var p;let w=typeof t=="string"?$a(t):t;u==="/"||(p=w.pathname)!=null&&p.startsWith(u)||_n(!1),h=w}else h=d;let m=h.pathname||"/",b=m;if(u!=="/"){let w=u.replace(/^\//,"").split("/");b="/"+m.replace(/^\//,"").split("/").slice(w.length).join("/")}let x=iU(e,{pathname:b}),S=BU(x&&x.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:ka([u,i.encodeLocation?i.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?u:ka([u,i.encodeLocation?i.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),s,n,r);return t&&S?D.createElement(Sm.Provider,{value:{location:cd({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Mo.Pop}},S):S}function OU(){let e=HU(),t=NU(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return D.createElement(D.Fragment,null,D.createElement("h2",null,"Unexpected Application Error!"),D.createElement("h3",{style:{fontStyle:"italic"}},t),n?D.createElement("pre",{style:i},n):null,null)}const LU=D.createElement(OU,null);class PU extends D.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?D.createElement(Ga.Provider,{value:this.props.routeContext},D.createElement(lP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function IU(e){let{routeContext:t,match:n,children:r}=e,i=D.useContext(RC);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),D.createElement(Ga.Provider,{value:t},r)}function BU(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if(!n)return null;if(n.errors)e=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,l=(i=n)==null?void 0:i.errors;if(l!=null){let h=o.findIndex(p=>p.route.id&&l?.[p.route.id]!==void 0);h>=0||_n(!1),o=o.slice(0,Math.min(o.length,h+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let p=o[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=h),p.route.id){let{loaderData:m,errors:b}=n,x=p.route.loader&&m[p.route.id]===void 0&&(!b||b[p.route.id]===void 0);if(p.route.lazy||x){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((h,p,m)=>{let b,x=!1,S=null,w=null;n&&(b=l&&p.route.id?l[p.route.id]:void 0,S=p.route.errorElement||LU,u&&(d<0&&m===0?(UU("route-fallback"),x=!0,w=null):d===m&&(x=!0,w=p.route.hydrateFallbackElement||null)));let C=t.concat(o.slice(0,m+1)),N=()=>{let k;return b?k=S:x?k=w:p.route.Component?k=D.createElement(p.route.Component,null):p.route.element?k=p.route.element:k=h,D.createElement(IU,{match:p,routeContext:{outlet:h,matches:C,isDataRoute:n!=null},children:k})};return n&&(p.route.ErrorBoundary||p.route.errorElement||m===0)?D.createElement(PU,{location:n.location,revalidation:n.revalidation,component:S,error:b,children:N(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):N()},null)}var dP=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(dP||{}),fP=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(fP||{});function zU(e){let t=D.useContext(RC);return t||_n(!1),t}function qU(e){let t=D.useContext(MU);return t||_n(!1),t}function VU(e){let t=D.useContext(Ga);return t||_n(!1),t}function hP(e){let t=VU(),n=t.matches[t.matches.length-1];return n.route.id||_n(!1),n.route.id}function HU(){var e;let t=D.useContext(lP),n=qU(),r=hP();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function FU(){let{router:e}=zU(dP.UseNavigateStable),t=hP(fP.UseNavigateStable),n=D.useRef(!1);return uP(()=>{n.current=!0}),D.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,cd({fromRouteId:t},s)))},[e,t])}const yM={};function UU(e,t,n){yM[e]||(yM[e]=!0)}function $U(e,t){e?.v7_startTransition,e?.v7_relativeSplatPath}function ha(e){_n(!1)}function GU(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Mo.Pop,navigator:s,static:o=!1,future:l}=e;Em()&&_n(!1);let u=t.replace(/^\/*/,"/"),d=D.useMemo(()=>({basename:u,navigator:s,static:o,future:cd({v7_relativeSplatPath:!1},l)}),[u,l,s,o]);typeof r=="string"&&(r=$a(r));let{pathname:h="/",search:p="",hash:m="",state:b=null,key:x="default"}=r,S=D.useMemo(()=>{let w=oP(h,u);return w==null?null:{location:{pathname:w,search:p,hash:m,state:b,key:x},navigationType:i}},[u,h,p,m,b,x,i]);return S==null?null:D.createElement(wm.Provider,{value:d},D.createElement(Sm.Provider,{children:n,value:S}))}function WU(e){let{children:t,location:n}=e;return RU(oE(t),n)}new Promise(()=>{});function oE(e,t){t===void 0&&(t=[]);let n=[];return D.Children.forEach(e,(r,i)=>{if(!D.isValidElement(r))return;let s=[...t,i];if(r.type===D.Fragment){n.push.apply(n,oE(r.props.children,s));return}r.type!==ha&&_n(!1),!r.props.index||!r.props.children||_n(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=oE(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const KU="6";try{window.__reactRouterVersion=KU}catch{}const YU="startTransition",bM=WF[YU];function XU(e){let{basename:t,children:n,future:r,window:i}=e,s=D.useRef();s.current==null&&(s.current=tU({window:i,v5Compat:!0}));let o=s.current,[l,u]=D.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},h=D.useCallback(p=>{d&&bM?bM(()=>u(p)):u(p)},[u,d]);return D.useLayoutEffect(()=>o.listen(h),[o,h]),D.useEffect(()=>$U(r),[r]),D.createElement(GU,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}var vM;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(vM||(vM={}));var xM;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(xM||(xM={}));var pP={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},wM=ke.createContext&&ke.createContext(pP),ZU=["attr","size","title"];function JU(e,t){if(e==null)return{};var n=QU(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function QU(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function cp(){return cp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cp.apply(this,arguments)}function SM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function up(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?SM(Object(n),!0).forEach(function(r){e9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):SM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function e9(e,t,n){return t=t9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t9(e){var t=n9(e,"string");return typeof t=="symbol"?t:t+""}function n9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function mP(e){return e&&e.map((t,n)=>ke.createElement(t.tag,up({key:n},t.attr),mP(t.child)))}function at(e){return t=>ke.createElement(r9,cp({attr:up({},e.attr)},t),mP(e.child))}function r9(e){var t=n=>{var{attr:r,size:i,title:s}=e,o=JU(e,ZU),l=i||n.size||"1em",u;return n.className&&(u=n.className),e.className&&(u=(u?u+" ":"")+e.className),ke.createElement("svg",cp({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:u,style:up(up({color:e.color||n.color},n.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&ke.createElement("title",null,s),e.children)};return wM!==void 0?ke.createElement(wM.Consumer,null,n=>t(n)):t(pP)}function i9(e){return at({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},child:[]}]})(e)}function s9(e){return at({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"5"},child:[]},{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"3"},child:[]},{tag:"line",attr:{x1:"12",y1:"21",x2:"12",y2:"23"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"},child:[]},{tag:"line",attr:{x1:"1",y1:"12",x2:"3",y2:"12"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"23",y2:"12"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"},child:[]}]})(e)}function jC(e){return at({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 9.9-1"},child:[]}]})(e)}const o9=e=>e==="system"||e==="light"||e==="dark";function Wa(){const[e,t]=D.useState(()=>{if(typeof window>"u")return"light";const s=localStorage.getItem("theme");return o9(s)?s:"light"}),[n,r]=D.useState(()=>typeof window>"u"?!1:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches);return D.useLayoutEffect(()=>{const s=document.documentElement;(l=>{l==="system"?s.classList.toggle("dark",n):s.classList.toggle("dark",l==="dark")})(e);try{localStorage.setItem("theme",e)}catch{}},[e,n]),D.useEffect(()=>{if(typeof window>"u")return;const s=window.matchMedia("(prefers-color-scheme: dark)"),o=l=>{r(l.matches)};return s.addEventListener("change",o),()=>s.removeEventListener("change",o)},[]),{theme:e,setTheme:t,flowColorMode:e==="system"?n?"dark":"light":e}}const Hd=()=>{const{theme:e,setTheme:t}=Wa();return y.jsx("button",{onClick:()=>t(e==="light"?"dark":"light"),className:"p-2 rounded-full bg-[var(--bg)] text-[var(--text)] cursor-pointer",children:e==="light"?y.jsx(i9,{size:18}):y.jsx(s9,{size:18})})},qr={title:"Diagrammatic  Interactive System Design Playground | Learn Architecture Design",description:"Master system design with Diagrammatic - an interactive playground featuring 45+ components, AI assessment, and real-world practice problems. Free system architecture tool for students, professionals, and educators.",keywords:"system design, architecture diagram, system design interview, software architecture, distributed systems, scalable architecture",image:"https://satya00089.github.io/diagrammatic/logo.png",url:"https://satya00089.github.io/diagrammatic/"},Fd=({title:e,description:t,keywords:n,image:r,url:i,type:s="website"})=>(D.useEffect(()=>{document.title=e||qr.title;const o=(u,d,h=!1)=>{const p=h?"property":"name";let m=document.querySelector(`meta[${p}="${u}"]`);m?m.content=d:(m=document.createElement("meta"),m.setAttribute(p,u),m.content=d,document.head.appendChild(m))};o("description",t||qr.description),o("keywords",n||qr.keywords),o("og:title",e||qr.title,!0),o("og:description",t||qr.description,!0),o("og:image",r||qr.image,!0),o("og:url",i||qr.url,!0),o("og:type",s,!0),o("twitter:title",e||qr.title),o("twitter:description",t||qr.description),o("twitter:image",r||qr.image),o("twitter:url",i||qr.url);let l=document.querySelector('link[rel="canonical"]');l?l.href=i||qr.url:(l=document.createElement("link"),l.rel="canonical",l.href=i||qr.url,document.head.appendChild(l))},[e,t,n,r,i,s]),null);class ju extends Error{}ju.prototype.name="InvalidTokenError";function a9(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,n)=>{let r=n.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function l9(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return a9(t)}catch{return atob(t)}}function c9(e,t){if(typeof e!="string")throw new ju("Invalid token specified: must be a string");t||(t={});const n=t.header===!0?0:1,r=e.split(".")[n];if(typeof r!="string")throw new ju(`Invalid token specified: missing part #${n+1}`);let i;try{i=l9(r)}catch(s){throw new ju(`Invalid token specified: invalid base64 for part #${n+1} (${s.message})`)}try{return JSON.parse(i)}catch(s){throw new ju(`Invalid token specified: invalid json for part #${n+1} (${s.message})`)}}const Sr="https://diagrammatic-api-production.up.railway.app";class u9{getAuthHeaders(){const t=localStorage.getItem("auth_token");return{"Content-Type":"application/json",...t?{Authorization:`Bearer ${t}`}:{}}}async login(t){const n=await fetch(`${Sr}/api/v1/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const r=await n.json().catch(()=>({message:"Login failed"}));throw new Error(r.message||"Login failed")}return n.json()}async signup(t){const n=await fetch(`${Sr}/api/v1/auth/signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const r=await n.json().catch(()=>({message:"Signup failed"}));throw new Error(r.message||"Signup failed")}return n.json()}async googleLogin(t){const n=await fetch(`${Sr}/api/v1/auth/google`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({credential:t})});if(!n.ok){const r=await n.json().catch(()=>({message:"Google login failed"}));throw new Error(r.message||"Google login failed")}return n.json()}async getCurrentUser(){const t=await fetch(`${Sr}/api/v1/auth/me`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch user");return t.json()}async saveDiagram(t){const n=await fetch(`${Sr}/api/v1/diagrams`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!n.ok){const r=await n.json().catch(()=>({message:"Failed to Save Design"}));throw new Error(r.message||"Failed to Save Design")}return n.json()}async updateDiagram(t,n){const r=await fetch(`${Sr}/api/v1/diagrams/${t}`,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify(n)});if(!r.ok){const i=await r.json().catch(()=>({message:"Failed to update diagram"}));throw new Error(i.message||"Failed to update diagram")}return r.json()}async getUserDiagrams(){const t=await fetch(`${Sr}/api/v1/diagrams`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch diagrams");return t.json()}async getDiagram(t){const n=await fetch(`${Sr}/api/v1/diagrams/${t}`,{headers:this.getAuthHeaders()});if(!n.ok)throw new Error("Failed to fetch diagram");return n.json()}async getPublicDiagram(t){const n=await fetch(`${Sr}/api/v1/diagrams/${t}/public`,{headers:{"Content-Type":"application/json"}});if(!n.ok)throw new Error("Failed to fetch diagram");return n.json()}async deleteDiagram(t){if(!(await fetch(`${Sr}/api/v1/diagrams/${t}`,{method:"DELETE",headers:this.getAuthHeaders()})).ok)throw new Error("Failed to delete diagram")}async addCollaborator(t,n,r){const i=await fetch(`${Sr}/api/v1/diagrams/${t}/share`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify({email:n,permission:r})});if(!i.ok){const s=await i.json().catch(()=>({message:"Failed to add collaborator"}));throw new Error(s.message||"Failed to add collaborator")}}async getCollaborators(t){const n=await fetch(`${Sr}/api/v1/diagrams/${t}/collaborators`,{headers:this.getAuthHeaders()});if(!n.ok)throw new Error("Failed to fetch collaborators");return n.json()}async updateCollaborator(t,n,r){const i=await fetch(`${Sr}/api/v1/diagrams/${t}/collaborators/${n}`,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify({permission:r})});if(!i.ok){const s=await i.json().catch(()=>({message:"Failed to update collaborator"}));throw new Error(s.message||"Failed to update collaborator")}}async removeCollaborator(t,n){if(!(await fetch(`${Sr}/api/v1/diagrams/${t}/collaborators/${n}`,{method:"DELETE",headers:this.getAuthHeaders()})).ok)throw new Error("Failed to remove collaborator")}}const Gn=new u9,gP=D.createContext(void 0),d9=({children:e})=>{const[t,n]=D.useState({user:null,token:null,isAuthenticated:!1,isLoading:!0}),r=D.useCallback(h=>{try{const p=c9(h);return p.exp?p.exp*1e3<Date.now():!1}catch{return!0}},[]),i=D.useCallback(()=>{localStorage.removeItem("auth_token"),n({user:null,token:null,isAuthenticated:!1,isLoading:!1})},[]);D.useEffect(()=>{(async()=>{const p=localStorage.getItem("auth_token");if(!p){n(m=>({...m,isLoading:!1}));return}if(r(p)){localStorage.removeItem("auth_token"),n(m=>({...m,isLoading:!1}));return}try{const m=await Gn.getCurrentUser();n({user:m,token:p,isAuthenticated:!0,isLoading:!1})}catch(m){console.error("Failed to fetch user:",m),localStorage.removeItem("auth_token"),n(b=>({...b,isLoading:!1}))}})()},[r]);const s=D.useCallback(async h=>{const{user:p,token:m}=await Gn.login(h);localStorage.setItem("auth_token",m),n({user:p,token:m,isAuthenticated:!0,isLoading:!1})},[]),o=D.useCallback(async h=>{const{user:p,token:m}=await Gn.signup(h);localStorage.setItem("auth_token",m),n({user:p,token:m,isAuthenticated:!0,isLoading:!1})},[]),l=D.useCallback(async h=>{const{user:p,token:m}=await Gn.googleLogin(h);localStorage.setItem("auth_token",m),n({user:p,token:m,isAuthenticated:!0,isLoading:!1})},[]),u=D.useCallback(async()=>{if(t.token)try{const h=await Gn.getCurrentUser();n(p=>({...p,user:h}))}catch(h){console.error("Failed to refresh user:",h),i()}},[t.token,i]),d=D.useMemo(()=>({...t,login:s,signup:o,googleLogin:l,logout:i,refreshUser:u}),[t,s,o,l,i,u]);return y.jsx(gP.Provider,{value:d,children:e})},Cm=()=>{const e=D.useContext(gP);if(!e)throw new Error("useAuth must be used within AuthProvider");return e},OC=D.createContext({});function LC(e){const t=D.useRef(null);return t.current===null&&(t.current=e()),t.current}const PC=typeof window<"u",yP=PC?D.useLayoutEffect:D.useEffect,km=D.createContext(null);function IC(e,t){e.indexOf(t)===-1&&e.push(t)}function BC(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const Ls=(e,t,n)=>n>t?t:n<e?e:n;let zC=()=>{};const Ps={},bP=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function vP(e){return typeof e=="object"&&e!==null}const xP=e=>/^0[^.\s]+$/u.test(e);function qC(e){let t;return()=>(t===void 0&&(t=e()),t)}const di=e=>e,f9=(e,t)=>n=>t(e(n)),Ud=(...e)=>e.reduce(f9),ud=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class VC{constructor(){this.subscriptions=[]}add(t){return IC(this.subscriptions,t),()=>BC(this.subscriptions,t)}notify(t,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Zi=e=>e*1e3,ui=e=>e/1e3;function wP(e,t){return t?e*(1e3/t):0}const SP=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,h9=1e-7,p9=12;function m9(e,t,n,r,i){let s,o,l=0;do o=t+(n-t)/2,s=SP(o,r,i)-e,s>0?n=o:t=o;while(Math.abs(s)>h9&&++l<p9);return o}function $d(e,t,n,r){if(e===t&&n===r)return di;const i=s=>m9(s,0,1,e,n);return s=>s===0||s===1?s:SP(i(s),t,r)}const EP=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,CP=e=>t=>1-e(1-t),kP=$d(.33,1.53,.69,.99),HC=CP(kP),TP=EP(HC),NP=e=>(e*=2)<1?.5*HC(e):.5*(2-Math.pow(2,-10*(e-1))),FC=e=>1-Math.sin(Math.acos(e)),AP=CP(FC),MP=EP(FC),g9=$d(.42,0,1,1),y9=$d(0,0,.58,1),_P=$d(.42,0,.58,1),b9=e=>Array.isArray(e)&&typeof e[0]!="number",DP=e=>Array.isArray(e)&&typeof e[0]=="number",v9={linear:di,easeIn:g9,easeInOut:_P,easeOut:y9,circIn:FC,circInOut:MP,circOut:AP,backIn:HC,backInOut:TP,backOut:kP,anticipate:NP},x9=e=>typeof e=="string",EM=e=>{if(DP(e)){zC(e.length===4);const[t,n,r,i]=e;return $d(t,n,r,i)}else if(x9(e))return v9[e];return e},bh=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function w9(e,t){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function u(h){o.has(h)&&(d.schedule(h),e()),h(l)}const d={schedule:(h,p=!1,m=!1)=>{const x=m&&i?n:r;return p&&o.add(h),x.has(h)||x.add(h),h},cancel:h=>{r.delete(h),o.delete(h)},process:h=>{if(l=h,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(u),n.clear(),i=!1,s&&(s=!1,d.process(h))}};return d}const S9=40;function RP(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=bh.reduce((k,T)=>(k[T]=w9(s),k),{}),{setup:l,read:u,resolveKeyframes:d,preUpdate:h,update:p,preRender:m,render:b,postRender:x}=o,S=()=>{const k=Ps.useManualTiming?i.timestamp:performance.now();n=!1,Ps.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(k-i.timestamp,S9),1)),i.timestamp=k,i.isProcessing=!0,l.process(i),u.process(i),d.process(i),h.process(i),p.process(i),m.process(i),b.process(i),x.process(i),i.isProcessing=!1,n&&t&&(r=!1,e(S))},w=()=>{n=!0,r=!0,i.isProcessing||e(S)};return{schedule:bh.reduce((k,T)=>{const A=o[T];return k[T]=(M,j=!1,R=!1)=>(n||w(),A.schedule(M,j,R)),k},{}),cancel:k=>{for(let T=0;T<bh.length;T++)o[bh[T]].cancel(k)},state:i,steps:o}}const{schedule:Pt,cancel:zo,state:$n,steps:j0}=RP(typeof requestAnimationFrame<"u"?requestAnimationFrame:di,!0);let Gh;function E9(){Gh=void 0}const Cr={now:()=>(Gh===void 0&&Cr.set($n.isProcessing||Ps.useManualTiming?$n.timestamp:performance.now()),Gh),set:e=>{Gh=e,queueMicrotask(E9)}},jP=e=>t=>typeof t=="string"&&t.startsWith(e),UC=jP("--"),C9=jP("var(--"),$C=e=>C9(e)?k9.test(e.split("/*")[0].trim()):!1,k9=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,gc={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},dd={...gc,transform:e=>Ls(0,1,e)},vh={...gc,default:1},Uu=e=>Math.round(e*1e5)/1e5,GC=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function T9(e){return e==null}const N9=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,WC=(e,t)=>n=>!!(typeof n=="string"&&N9.test(n)&&n.startsWith(e)||t&&!T9(n)&&Object.prototype.hasOwnProperty.call(n,t)),OP=(e,t,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,l]=r.match(GC);return{[e]:parseFloat(i),[t]:parseFloat(s),[n]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},A9=e=>Ls(0,255,e),O0={...gc,transform:e=>Math.round(A9(e))},ba={test:WC("rgb","red"),parse:OP("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+O0.transform(e)+", "+O0.transform(t)+", "+O0.transform(n)+", "+Uu(dd.transform(r))+")"};function M9(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const aE={test:WC("#"),parse:M9,transform:ba.transform},Gd=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),wo=Gd("deg"),Ji=Gd("%"),Ge=Gd("px"),_9=Gd("vh"),D9=Gd("vw"),CM={...Ji,parse:e=>Ji.parse(e)/100,transform:e=>Ji.transform(e*100)},Fl={test:WC("hsl","hue"),parse:OP("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Ji.transform(Uu(t))+", "+Ji.transform(Uu(n))+", "+Uu(dd.transform(r))+")"},yn={test:e=>ba.test(e)||aE.test(e)||Fl.test(e),parse:e=>ba.test(e)?ba.parse(e):Fl.test(e)?Fl.parse(e):aE.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?ba.transform(e):Fl.transform(e),getAnimatableNone:e=>{const t=yn.parse(e);return t.alpha=0,yn.transform(t)}},R9=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function j9(e){return isNaN(e)&&typeof e=="string"&&(e.match(GC)?.length||0)+(e.match(R9)?.length||0)>0}const LP="number",PP="color",O9="var",L9="var(",kM="${}",P9=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function fd(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const l=t.replace(P9,u=>(yn.test(u)?(r.color.push(s),i.push(PP),n.push(yn.parse(u))):u.startsWith(L9)?(r.var.push(s),i.push(O9),n.push(u)):(r.number.push(s),i.push(LP),n.push(parseFloat(u))),++s,kM)).split(kM);return{values:n,split:l,indexes:r,types:i}}function IP(e){return fd(e).values}function BP(e){const{split:t,types:n}=fd(e),r=t.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=t[o],i[o]!==void 0){const l=n[o];l===LP?s+=Uu(i[o]):l===PP?s+=yn.transform(i[o]):s+=i[o]}return s}}const I9=e=>typeof e=="number"?0:yn.test(e)?yn.getAnimatableNone(e):e;function B9(e){const t=IP(e);return BP(e)(t.map(I9))}const qo={test:j9,parse:IP,createTransformer:BP,getAnimatableNone:B9};function L0(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function z9({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let i=0,s=0,o=0;if(!t)i=s=o=n;else{const l=n<.5?n*(1+t):n+t-n*t,u=2*n-l;i=L0(u,l,e+1/3),s=L0(u,l,e),o=L0(u,l,e-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function dp(e,t){return n=>n>0?t:e}const $t=(e,t,n)=>e+(t-e)*n,P0=(e,t,n)=>{const r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},q9=[aE,ba,Fl],V9=e=>q9.find(t=>t.test(e));function TM(e){const t=V9(e);if(!t)return!1;let n=t.parse(e);return t===Fl&&(n=z9(n)),n}const NM=(e,t)=>{const n=TM(e),r=TM(t);if(!n||!r)return dp(e,t);const i={...n};return s=>(i.red=P0(n.red,r.red,s),i.green=P0(n.green,r.green,s),i.blue=P0(n.blue,r.blue,s),i.alpha=$t(n.alpha,r.alpha,s),ba.transform(i))},lE=new Set(["none","hidden"]);function H9(e,t){return lE.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function F9(e,t){return n=>$t(e,t,n)}function KC(e){return typeof e=="number"?F9:typeof e=="string"?$C(e)?dp:yn.test(e)?NM:G9:Array.isArray(e)?zP:typeof e=="object"?yn.test(e)?NM:U9:dp}function zP(e,t){const n=[...e],r=n.length,i=e.map((s,o)=>KC(s)(s,t[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function U9(e,t){const n={...e,...t},r={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(r[i]=KC(e[i])(e[i],t[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function $9(e,t){const n=[],r={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const s=t.types[i],o=e.indexes[s][r[s]],l=e.values[o]??0;n[i]=l,r[s]++}return n}const G9=(e,t)=>{const n=qo.createTransformer(t),r=fd(e),i=fd(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?lE.has(e)&&!i.values.length||lE.has(t)&&!r.values.length?H9(e,t):Ud(zP($9(r,i),i.values),n):dp(e,t)};function qP(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?$t(e,t,n):KC(e)(e,t)}const W9=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>Pt.update(t,n),stop:()=>zo(t),now:()=>$n.isProcessing?$n.timestamp:Cr.now()}},VP=(e,t,n=10)=>{let r="";const i=Math.max(Math.round(t/n),2);for(let s=0;s<i;s++)r+=Math.round(e(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},fp=2e4;function YC(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<fp;)t+=n,r=e.next(t);return t>=fp?1/0:t}function K9(e,t=100,n){const r=n({...e,keyframes:[0,t]}),i=Math.min(YC(r),fp);return{type:"keyframes",ease:s=>r.next(i*s).value/t,duration:ui(i)}}const Y9=5;function HP(e,t,n){const r=Math.max(t-Y9,0);return wP(n-e(r),t-r)}const en={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},I0=.001;function X9({duration:e=en.duration,bounce:t=en.bounce,velocity:n=en.velocity,mass:r=en.mass}){let i,s,o=1-t;o=Ls(en.minDamping,en.maxDamping,o),e=Ls(en.minDuration,en.maxDuration,ui(e)),o<1?(i=d=>{const h=d*o,p=h*e,m=h-n,b=cE(d,o),x=Math.exp(-p);return I0-m/b*x},s=d=>{const p=d*o*e,m=p*n+n,b=Math.pow(o,2)*Math.pow(d,2)*e,x=Math.exp(-p),S=cE(Math.pow(d,2),o);return(-i(d)+I0>0?-1:1)*((m-b)*x)/S}):(i=d=>{const h=Math.exp(-d*e),p=(d-n)*e+1;return-I0+h*p},s=d=>{const h=Math.exp(-d*e),p=(n-d)*(e*e);return h*p});const l=5/e,u=J9(i,s,l);if(e=Zi(e),isNaN(u))return{stiffness:en.stiffness,damping:en.damping,duration:e};{const d=Math.pow(u,2)*r;return{stiffness:d,damping:o*2*Math.sqrt(r*d),duration:e}}}const Z9=12;function J9(e,t,n){let r=n;for(let i=1;i<Z9;i++)r=r-e(r)/t(r);return r}function cE(e,t){return e*Math.sqrt(1-t*t)}const Q9=["duration","bounce"],e7=["stiffness","damping","mass"];function AM(e,t){return t.some(n=>e[n]!==void 0)}function t7(e){let t={velocity:en.velocity,stiffness:en.stiffness,damping:en.damping,mass:en.mass,isResolvedFromDuration:!1,...e};if(!AM(e,e7)&&AM(e,Q9))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*Ls(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:en.mass,stiffness:i,damping:s}}else{const n=X9(e);t={...t,...n,mass:en.mass},t.isResolvedFromDuration=!0}return t}function hp(e=en.visualDuration,t=en.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],l={done:!1,value:s},{stiffness:u,damping:d,mass:h,duration:p,velocity:m,isResolvedFromDuration:b}=t7({...n,velocity:-ui(n.velocity||0)}),x=m||0,S=d/(2*Math.sqrt(u*h)),w=o-s,C=ui(Math.sqrt(u/h)),N=Math.abs(w)<5;r||(r=N?en.restSpeed.granular:en.restSpeed.default),i||(i=N?en.restDelta.granular:en.restDelta.default);let k;if(S<1){const A=cE(C,S);k=M=>{const j=Math.exp(-S*C*M);return o-j*((x+S*C*w)/A*Math.sin(A*M)+w*Math.cos(A*M))}}else if(S===1)k=A=>o-Math.exp(-C*A)*(w+(x+C*w)*A);else{const A=C*Math.sqrt(S*S-1);k=M=>{const j=Math.exp(-S*C*M),R=Math.min(A*M,300);return o-j*((x+S*C*w)*Math.sinh(R)+A*w*Math.cosh(R))/A}}const T={calculatedDuration:b&&p||null,next:A=>{const M=k(A);if(b)l.done=A>=p;else{let j=A===0?x:0;S<1&&(j=A===0?Zi(x):HP(k,A,M));const R=Math.abs(j)<=r,L=Math.abs(o-M)<=i;l.done=R&&L}return l.value=l.done?o:M,l},toString:()=>{const A=Math.min(YC(T),fp),M=VP(j=>T.next(A*j).value,A,30);return A+"ms "+M},toTransition:()=>{}};return T}hp.applyToOptions=e=>{const t=K9(e,100,hp);return e.ease=t.ease,e.duration=Zi(t.duration),e.type="keyframes",e};function uE({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:l,max:u,restDelta:d=.5,restSpeed:h}){const p=e[0],m={done:!1,value:p},b=R=>l!==void 0&&R<l||u!==void 0&&R>u,x=R=>l===void 0?u:u===void 0||Math.abs(l-R)<Math.abs(u-R)?l:u;let S=n*t;const w=p+S,C=o===void 0?w:o(w);C!==w&&(S=C-p);const N=R=>-S*Math.exp(-R/r),k=R=>C+N(R),T=R=>{const L=N(R),I=k(R);m.done=Math.abs(L)<=d,m.value=m.done?C:I};let A,M;const j=R=>{b(m.value)&&(A=R,M=hp({keyframes:[m.value,x(m.value)],velocity:HP(k,R,m.value),damping:i,stiffness:s,restDelta:d,restSpeed:h}))};return j(0),{calculatedDuration:null,next:R=>{let L=!1;return!M&&A===void 0&&(L=!0,T(R),j(R)),A!==void 0&&R>=A?M.next(R-A):(!L&&T(R),m)}}}function n7(e,t,n){const r=[],i=n||Ps.mix||qP,s=e.length-1;for(let o=0;o<s;o++){let l=i(e[o],e[o+1]);if(t){const u=Array.isArray(t)?t[o]||di:t;l=Ud(u,l)}r.push(l)}return r}function r7(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const s=e.length;if(zC(s===t.length),s===1)return()=>t[0];if(s===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=n7(t,r,i),u=l.length,d=h=>{if(o&&h<e[0])return t[0];let p=0;if(u>1)for(;p<e.length-2&&!(h<e[p+1]);p++);const m=ud(e[p],e[p+1],h);return l[p](m)};return n?h=>d(Ls(e[0],e[s-1],h)):d}function i7(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=ud(0,t,r);e.push($t(n,1,i))}}function s7(e){const t=[0];return i7(t,e.length-1),t}function o7(e,t){return e.map(n=>n*t)}function a7(e,t){return e.map(()=>t||_P).splice(0,e.length-1)}function $u({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=b9(r)?r.map(EM):EM(r),s={done:!1,value:t[0]},o=o7(n&&n.length===t.length?n:s7(t),e),l=r7(o,t,{ease:Array.isArray(i)?i:a7(t,i)});return{calculatedDuration:e,next:u=>(s.value=l(u),s.done=u>=e,s)}}const l7=e=>e!==null;function XC(e,{repeat:t,repeatType:n="loop"},r,i=1){const s=e.filter(l7),l=i<0||t&&n!=="loop"&&t%2===1?0:s.length-1;return!l||r===void 0?s[l]:r}const c7={decay:uE,inertia:uE,tween:$u,keyframes:$u,spring:hp};function FP(e){typeof e.type=="string"&&(e.type=c7[e.type])}class ZC{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const u7=e=>e/100;class JC extends ZC{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Cr.now()&&this.tick(Cr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;FP(t);const{type:n=$u,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=t;let{keyframes:l}=t;const u=n||$u;u!==$u&&typeof l[0]!="number"&&(this.mixKeyframes=Ud(u7,qP(l[0],l[1])),l=[0,100]);const d=u({...t,keyframes:l});s==="mirror"&&(this.mirroredGenerator=u({...t,keyframes:[...l].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=YC(d));const{calculatedDuration:h}=d;this.calculatedDuration=h,this.resolvedDuration=h+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=d}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:u}=this;if(this.startTime===null)return r.next(0);const{delay:d=0,keyframes:h,repeat:p,repeatType:m,repeatDelay:b,type:x,onUpdate:S,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-i/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const C=this.currentTime-d*(this.playbackSpeed>=0?1:-1),N=this.playbackSpeed>=0?C<0:C>i;this.currentTime=Math.max(C,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let k=this.currentTime,T=r;if(p){const R=Math.min(this.currentTime,i)/l;let L=Math.floor(R),I=R%1;!I&&R>=1&&(I=1),I===1&&L--,L=Math.min(L,p+1),!!(L%2)&&(m==="reverse"?(I=1-I,b&&(I-=b/l)):m==="mirror"&&(T=o)),k=Ls(0,1,I)*l}const A=N?{done:!1,value:h[0]}:T.next(k);s&&(A.value=s(A.value));let{done:M}=A;!N&&u!==null&&(M=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const j=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&M);return j&&x!==uE&&(A.value=XC(h,this.options,w,this.speed)),S&&S(A.value),j&&this.finish(),A}then(t,n){return this.finished.then(t,n)}get duration(){return ui(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+ui(t)}get time(){return ui(this.currentTime)}set time(t){t=Zi(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Cr.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=ui(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=W9,startTime:n}=this.options;this.driver||(this.driver=t(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Cr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function d7(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const va=e=>e*180/Math.PI,dE=e=>{const t=va(Math.atan2(e[1],e[0]));return fE(t)},f7={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:dE,rotateZ:dE,skewX:e=>va(Math.atan(e[1])),skewY:e=>va(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},fE=e=>(e=e%360,e<0&&(e+=360),e),MM=dE,_M=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),DM=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),h7={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:_M,scaleY:DM,scale:e=>(_M(e)+DM(e))/2,rotateX:e=>fE(va(Math.atan2(e[6],e[5]))),rotateY:e=>fE(va(Math.atan2(-e[2],e[0]))),rotateZ:MM,rotate:MM,skewX:e=>va(Math.atan(e[4])),skewY:e=>va(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function hE(e){return e.includes("scale")?1:0}function pE(e,t){if(!e||e==="none")return hE(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=h7,i=n;else{const l=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=f7,i=l}if(!i)return hE(t);const s=r[t],o=i[1].split(",").map(m7);return typeof s=="function"?s(o):o[s]}const p7=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return pE(n,t)};function m7(e){return parseFloat(e.trim())}const yc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],bc=new Set(yc),RM=e=>e===gc||e===Ge,g7=new Set(["x","y","z"]),y7=yc.filter(e=>!g7.has(e));function b7(e){const t=[];return y7.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const Ta={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>pE(t,"x"),y:(e,{transform:t})=>pE(t,"y")};Ta.translateX=Ta.x;Ta.translateY=Ta.y;const Na=new Set;let mE=!1,gE=!1,yE=!1;function UP(){if(gE){const e=Array.from(Na).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const i=b7(r);i.length&&(n.set(r,i),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{r.getValue(s)?.set(o)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}gE=!1,mE=!1,Na.forEach(e=>e.complete(yE)),Na.clear()}function $P(){Na.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(gE=!0)})}function v7(){yE=!0,$P(),UP(),yE=!1}class QC{constructor(t,n,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Na.add(this),mE||(mE=!0,Pt.read($P),Pt.resolveKeyframes(UP))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:i}=this;if(t[0]===null){const s=i?.get(),o=t[t.length-1];if(s!==void 0)t[0]=s;else if(r&&n){const l=r.readValue(n,o);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=o),i&&s===void 0&&i.set(t[0])}d7(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Na.delete(this)}cancel(){this.state==="scheduled"&&(Na.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const x7=e=>e.startsWith("--");function w7(e,t,n){x7(t)?e.style.setProperty(t,n):e.style[t]=n}const S7=qC(()=>window.ScrollTimeline!==void 0),E7={};function C7(e,t){const n=qC(e);return()=>E7[t]??n()}const GP=C7(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Ou=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,jM={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Ou([0,.65,.55,1]),circOut:Ou([.55,0,1,.45]),backIn:Ou([.31,.01,.66,-.59]),backOut:Ou([.33,1.53,.69,.99])};function WP(e,t){if(e)return typeof e=="function"?GP()?VP(e,t):"ease-out":DP(e)?Ou(e):Array.isArray(e)?e.map(n=>WP(n,t)||jM.easeOut):jM[e]}function k7(e,t,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:l="easeOut",times:u}={},d=void 0){const h={[t]:n};u&&(h.offset=u);const p=WP(l,i);Array.isArray(p)&&(h.easing=p);const m={delay:r,duration:i,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return d&&(m.pseudoElement=d),e.animate(h,m)}function KP(e){return typeof e=="function"&&"applyToOptions"in e}function T7({type:e,...t}){return KP(e)&&GP()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class N7 extends ZC{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:l,onComplete:u}=t;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=t,zC(typeof t.type!="string");const d=T7(t);this.animation=k7(n,r,i,d,s),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const h=XC(i,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(h):w7(n,r,h),this.animation.cancel()}u?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return ui(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+ui(t)}get time(){return ui(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=Zi(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&S7()?(this.animation.timeline=t,di):n(this)}}const YP={anticipate:NP,backInOut:TP,circInOut:MP};function A7(e){return e in YP}function M7(e){typeof e.ease=="string"&&A7(e.ease)&&(e.ease=YP[e.ease])}const OM=10;class _7 extends N7{constructor(t){M7(t),FP(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const l=new JC({...o,autoplay:!1}),u=Zi(this.finishedTime??this.time);n.setWithVelocity(l.sample(u-OM).value,l.sample(u).value,OM),l.stop()}}const LM=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(qo.test(e)||e==="0")&&!e.startsWith("url("));function D7(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function R7(e,t,n,r){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const s=e[e.length-1],o=LM(i,t),l=LM(s,t);return!o||!l?!1:D7(e)||(n==="spring"||KP(n))&&r}function bE(e){e.duration=0,e.type="keyframes"}const j7=new Set(["opacity","clipPath","filter","transform"]),O7=qC(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function L7(e){const{motionValue:t,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:d}=t.owner.getProps();return O7()&&n&&j7.has(n)&&(n!=="transform"||!d)&&!u&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const P7=40;class I7 extends ZC{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:l,name:u,motionValue:d,element:h,...p}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Cr.now();const m={autoplay:t,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:u,motionValue:d,element:h,...p},b=h?.KeyframeResolver||QC;this.keyframeResolver=new b(l,(x,S,w)=>this.onKeyframesResolved(x,S,m,!w),u,d,h),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,n,r,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:l,delay:u,isHandoff:d,onUpdate:h}=r;this.resolvedAt=Cr.now(),R7(t,s,o,l)||((Ps.instantAnimations||!u)&&h?.(XC(t,r,n)),t[0]=t[t.length-1],bE(r),r.repeat=0);const m={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>P7?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},b=!d&&L7(m)?new _7({...m,element:m.motionValue.owner.current}):new JC(m);b.finished.then(()=>this.notifyFinished()).catch(di),this.pendingTimeline&&(this.stopTimeline=b.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=b}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),v7()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const B7=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function z7(e){const t=B7.exec(e);if(!t)return[,];const[,n,r,i]=t;return[`--${n??r}`,i]}function XP(e,t,n=1){const[r,i]=z7(e);if(!r)return;const s=window.getComputedStyle(t).getPropertyValue(r);if(s){const o=s.trim();return bP(o)?parseFloat(o):o}return $C(i)?XP(i,t,n+1):i}function ek(e,t){return e?.[t]??e?.default??e}const ZP=new Set(["width","height","top","left","right","bottom",...yc]),q7={test:e=>e==="auto",parse:e=>e},JP=e=>t=>t.test(e),QP=[gc,Ge,Ji,wo,D9,_9,q7],PM=e=>QP.find(JP(e));function V7(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||xP(e):!0}const H7=new Set(["brightness","contrast","saturate","opacity"]);function F7(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(GC)||[];if(!r)return e;const i=n.replace(r,"");let s=H7.has(t)?1:0;return r!==n&&(s*=100),t+"("+s+i+")"}const U7=/\b([a-z-]*)\(.*?\)/gu,vE={...qo,getAnimatableNone:e=>{const t=e.match(U7);return t?t.map(F7).join(" "):e}},IM={...gc,transform:Math.round},$7={rotate:wo,rotateX:wo,rotateY:wo,rotateZ:wo,scale:vh,scaleX:vh,scaleY:vh,scaleZ:vh,skew:wo,skewX:wo,skewY:wo,distance:Ge,translateX:Ge,translateY:Ge,translateZ:Ge,x:Ge,y:Ge,z:Ge,perspective:Ge,transformPerspective:Ge,opacity:dd,originX:CM,originY:CM,originZ:Ge},tk={borderWidth:Ge,borderTopWidth:Ge,borderRightWidth:Ge,borderBottomWidth:Ge,borderLeftWidth:Ge,borderRadius:Ge,radius:Ge,borderTopLeftRadius:Ge,borderTopRightRadius:Ge,borderBottomRightRadius:Ge,borderBottomLeftRadius:Ge,width:Ge,maxWidth:Ge,height:Ge,maxHeight:Ge,top:Ge,right:Ge,bottom:Ge,left:Ge,padding:Ge,paddingTop:Ge,paddingRight:Ge,paddingBottom:Ge,paddingLeft:Ge,margin:Ge,marginTop:Ge,marginRight:Ge,marginBottom:Ge,marginLeft:Ge,backgroundPositionX:Ge,backgroundPositionY:Ge,...$7,zIndex:IM,fillOpacity:dd,strokeOpacity:dd,numOctaves:IM},G7={...tk,color:yn,backgroundColor:yn,outlineColor:yn,fill:yn,stroke:yn,borderColor:yn,borderTopColor:yn,borderRightColor:yn,borderBottomColor:yn,borderLeftColor:yn,filter:vE,WebkitFilter:vE},eI=e=>G7[e];function tI(e,t){let n=eI(e);return n!==vE&&(n=qo),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const W7=new Set(["auto","none","0"]);function K7(e,t,n){let r=0,i;for(;r<e.length&&!i;){const s=e[r];typeof s=="string"&&!W7.has(s)&&fd(s).values.length&&(i=e[r]),r++}if(i&&n)for(const s of t)e[s]=tI(n,i)}class Y7 extends QC{constructor(t,n,r,i,s){super(t,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<t.length;u++){let d=t[u];if(typeof d=="string"&&(d=d.trim(),$C(d))){const h=XP(d,n.current);h!==void 0&&(t[u]=h),u===t.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!ZP.has(r)||t.length!==2)return;const[i,s]=t,o=PM(i),l=PM(s);if(o!==l)if(RM(o)&&RM(l))for(let u=0;u<t.length;u++){const d=t[u];typeof d=="string"&&(t[u]=parseFloat(d))}else Ta[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let i=0;i<t.length;i++)(t[i]===null||V7(t[i]))&&r.push(i);r.length&&K7(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ta[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&t.getValue(r,i).jump(i,!1)}measureEndState(){const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const i=t.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=Ta[n](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([l,u])=>{t.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function X7(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const i=n?.[e]??r.querySelectorAll(e);return i?Array.from(i):[]}return Array.from(e)}const nI=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function rI(e){return vP(e)&&"offsetHeight"in e}const BM=30,Z7=e=>!isNaN(parseFloat(e));class J7{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=Cr.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const s of this.dependents)s.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Cr.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=Z7(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new VC);const r=this.events[t].add(n);return t==="change"?()=>{r(),Pt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Cr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>BM)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,BM);return wP(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function nc(e,t){return new J7(e,t)}const{schedule:nk}=RP(queueMicrotask,!1),Ci={x:!1,y:!1};function iI(){return Ci.x||Ci.y}function Q7(e){return e==="x"||e==="y"?Ci[e]?null:(Ci[e]=!0,()=>{Ci[e]=!1}):Ci.x||Ci.y?null:(Ci.x=Ci.y=!0,()=>{Ci.x=Ci.y=!1})}function sI(e,t){const n=X7(e),r=new AbortController,i={passive:!0,...t,signal:r.signal};return[n,i,()=>r.abort()]}function zM(e){return!(e.pointerType==="touch"||iI())}function e$(e,t,n={}){const[r,i,s]=sI(e,n),o=l=>{if(!zM(l))return;const{target:u}=l,d=t(u,l);if(typeof d!="function"||!u)return;const h=p=>{zM(p)&&(d(p),u.removeEventListener("pointerleave",h))};u.addEventListener("pointerleave",h,i)};return r.forEach(l=>{l.addEventListener("pointerenter",o,i)}),s}const oI=(e,t)=>t?e===t?!0:oI(e,t.parentElement):!1,rk=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,t$=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function n$(e){return t$.has(e.tagName)||e.tabIndex!==-1}const Wh=new WeakSet;function qM(e){return t=>{t.key==="Enter"&&e(t)}}function B0(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const r$=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=qM(()=>{if(Wh.has(n))return;B0(n,"down");const i=qM(()=>{B0(n,"up")}),s=()=>B0(n,"cancel");n.addEventListener("keyup",i,t),n.addEventListener("blur",s,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function VM(e){return rk(e)&&!iI()}function i$(e,t,n={}){const[r,i,s]=sI(e,n),o=l=>{const u=l.currentTarget;if(!VM(l))return;Wh.add(u);const d=t(u,l),h=(b,x)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",m),Wh.has(u)&&Wh.delete(u),VM(b)&&typeof d=="function"&&d(b,{success:x})},p=b=>{h(b,u===window||u===document||n.useGlobalTarget||oI(u,b.target))},m=b=>{h(b,!1)};window.addEventListener("pointerup",p,i),window.addEventListener("pointercancel",m,i)};return r.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",o,i),rI(l)&&(l.addEventListener("focus",d=>r$(d,i)),!n$(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),s}function aI(e){return vP(e)&&"ownerSVGElement"in e}function s$(e){return aI(e)&&e.tagName==="svg"}const nr=e=>!!(e&&e.getVelocity),o$=[...QP,yn,qo],a$=e=>o$.find(JP(e)),ik=D.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function HM(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function l$(...e){return t=>{let n=!1;const r=e.map(i=>{const s=HM(i,t);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():HM(e[i],null)}}}}function c$(...e){return D.useCallback(l$(...e),e)}class u$ extends D.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=rI(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function d$({children:e,isPresent:t,anchorX:n,root:r}){const i=D.useId(),s=D.useRef(null),o=D.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=D.useContext(ik),u=c$(s,e?.ref);return D.useInsertionEffect(()=>{const{width:d,height:h,top:p,left:m,right:b}=o.current;if(t||!s.current||!d||!h)return;const x=n==="left"?`left: ${m}`:`right: ${b}`;s.current.dataset.motionPopId=i;const S=document.createElement("style");l&&(S.nonce=l);const w=r??document.head;return w.appendChild(S),S.sheet&&S.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${h}px !important;
            ${x}px !important;
            top: ${p}px !important;
          }
        `),()=>{w.contains(S)&&w.removeChild(S)}},[t]),y.jsx(u$,{isPresent:t,childRef:s,sizeRef:o,children:D.cloneElement(e,{ref:u})})}const f$=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o,anchorX:l,root:u})=>{const d=LC(h$),h=D.useId();let p=!0,m=D.useMemo(()=>(p=!1,{id:h,initial:t,isPresent:n,custom:i,onExitComplete:b=>{d.set(b,!0);for(const x of d.values())if(!x)return;r&&r()},register:b=>(d.set(b,!1),()=>d.delete(b))}),[n,d,r]);return s&&p&&(m={...m}),D.useMemo(()=>{d.forEach((b,x)=>d.set(x,!1))},[n]),D.useEffect(()=>{!n&&!d.size&&r&&r()},[n]),o==="popLayout"&&(e=y.jsx(d$,{isPresent:n,anchorX:l,root:u,children:e})),y.jsx(km.Provider,{value:m,children:e})};function h$(){return new Map}function lI(e=!0){const t=D.useContext(km);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=t,s=D.useId();D.useEffect(()=>{if(e)return i(s)},[e]);const o=D.useCallback(()=>e&&r&&r(s),[s,r,e]);return!n&&r?[!1,o]:[!0]}const xh=e=>e.key||"";function FM(e){const t=[];return D.Children.forEach(e,n=>{D.isValidElement(n)&&t.push(n)}),t}const Tm=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1,anchorX:l="left",root:u})=>{const[d,h]=lI(o),p=D.useMemo(()=>FM(e),[e]),m=o&&!d?[]:p.map(xh),b=D.useRef(!0),x=D.useRef(p),S=LC(()=>new Map),[w,C]=D.useState(p),[N,k]=D.useState(p);yP(()=>{b.current=!1,x.current=p;for(let M=0;M<N.length;M++){const j=xh(N[M]);m.includes(j)?S.delete(j):S.get(j)!==!0&&S.set(j,!1)}},[N,m.length,m.join("-")]);const T=[];if(p!==w){let M=[...p];for(let j=0;j<N.length;j++){const R=N[j],L=xh(R);m.includes(L)||(M.splice(j,0,R),T.push(R))}return s==="wait"&&T.length&&(M=T),k(FM(M)),C(p),null}const{forceRender:A}=D.useContext(OC);return y.jsx(y.Fragment,{children:N.map(M=>{const j=xh(M),R=o&&!d?!1:p===N||m.includes(j),L=()=>{if(S.has(j))S.set(j,!0);else return;let I=!0;S.forEach(H=>{H||(I=!1)}),I&&(A?.(),k(x.current),o&&h?.(),r&&r())};return y.jsx(f$,{isPresent:R,initial:!b.current||n?void 0:!1,custom:t,presenceAffectsLayout:i,mode:s,root:u,onExitComplete:R?void 0:L,anchorX:l,children:M},j)})})},cI=D.createContext({strict:!1}),UM={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},rc={};for(const e in UM)rc[e]={isEnabled:t=>UM[e].some(n=>!!t[n])};function p$(e){for(const t in e)rc[t]={...rc[t],...e[t]}}const m$=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function pp(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||m$.has(e)}let uI=e=>!pp(e);function g$(e){typeof e=="function"&&(uI=t=>t.startsWith("on")?!pp(t):e(t))}try{g$(require("@emotion/is-prop-valid").default)}catch{}function y$(e,t,n){const r={};for(const i in e)i==="values"&&typeof e.values=="object"||(uI(i)||n===!0&&pp(i)||!t&&!pp(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}const Nm=D.createContext({});function Am(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function hd(e){return typeof e=="string"||Array.isArray(e)}const sk=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],ok=["initial",...sk];function Mm(e){return Am(e.animate)||ok.some(t=>hd(e[t]))}function dI(e){return!!(Mm(e)||e.variants)}function b$(e,t){if(Mm(e)){const{initial:n,animate:r}=e;return{initial:n===!1||hd(n)?n:void 0,animate:hd(r)?r:void 0}}return e.inherit!==!1?t:{}}function v$(e){const{initial:t,animate:n}=b$(e,D.useContext(Nm));return D.useMemo(()=>({initial:t,animate:n}),[$M(t),$M(n)])}function $M(e){return Array.isArray(e)?e.join(" "):e}const pd={};function x$(e){for(const t in e)pd[t]=e[t],UC(t)&&(pd[t].isCSSVariable=!0)}function fI(e,{layout:t,layoutId:n}){return bc.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!pd[e]||e==="opacity")}const w$={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},S$=yc.length;function E$(e,t,n){let r="",i=!0;for(let s=0;s<S$;s++){const o=yc[s],l=e[o];if(l===void 0)continue;let u=!0;if(typeof l=="number"?u=l===(o.startsWith("scale")?1:0):u=parseFloat(l)===0,!u||n){const d=nI(l,tk[o]);if(!u){i=!1;const h=w$[o]||o;r+=`${h}(${d}) `}n&&(t[o]=d)}}return r=r.trim(),n?r=n(t,i?"":r):i&&(r="none"),r}function ak(e,t,n){const{style:r,vars:i,transformOrigin:s}=e;let o=!1,l=!1;for(const u in t){const d=t[u];if(bc.has(u)){o=!0;continue}else if(UC(u)){i[u]=d;continue}else{const h=nI(d,tk[u]);u.startsWith("origin")?(l=!0,s[u]=h):r[u]=h}}if(t.transform||(o||n?r.transform=E$(t,e.transform,n):r.transform&&(r.transform="none")),l){const{originX:u="50%",originY:d="50%",originZ:h=0}=s;r.transformOrigin=`${u} ${d} ${h}`}}const lk=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function hI(e,t,n){for(const r in t)!nr(t[r])&&!fI(r,n)&&(e[r]=t[r])}function C$({transformTemplate:e},t){return D.useMemo(()=>{const n=lk();return ak(n,t,e),Object.assign({},n.vars,n.style)},[t])}function k$(e,t){const n=e.style||{},r={};return hI(r,n,e),Object.assign(r,C$(e,t)),r}function T$(e,t){const n={},r=k$(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const N$={offset:"stroke-dashoffset",array:"stroke-dasharray"},A$={offset:"strokeDashoffset",array:"strokeDasharray"};function M$(e,t,n=1,r=0,i=!0){e.pathLength=1;const s=i?N$:A$;e[s.offset]=Ge.transform(-r);const o=Ge.transform(t),l=Ge.transform(n);e[s.array]=`${o} ${l}`}function pI(e,{attrX:t,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...l},u,d,h){if(ak(e,l,d),u){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:p,style:m}=e;p.transform&&(m.transform=p.transform,delete p.transform),(m.transform||p.transformOrigin)&&(m.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),m.transform&&(m.transformBox=h?.transformBox??"fill-box",delete p.transformBox),t!==void 0&&(p.x=t),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),i!==void 0&&M$(p,i,s,o,!1)}const mI=()=>({...lk(),attrs:{}}),gI=e=>typeof e=="string"&&e.toLowerCase()==="svg";function _$(e,t,n,r){const i=D.useMemo(()=>{const s=mI();return pI(s,t,gI(r),e.transformTemplate,e.style),{...s.attrs,style:{...s.style}}},[t]);if(e.style){const s={};hI(s,e.style,e),i.style={...s,...i.style}}return i}const D$=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function ck(e){return typeof e!="string"||e.includes("-")?!1:!!(D$.indexOf(e)>-1||/[A-Z]/u.test(e))}function R$(e,t,n,{latestValues:r},i,s=!1){const l=(ck(e)?_$:T$)(t,r,i,e),u=y$(t,typeof e=="string",s),d=e!==D.Fragment?{...u,...l,ref:n}:{},{children:h}=t,p=D.useMemo(()=>nr(h)?h.get():h,[h]);return D.createElement(e,{...d,children:p})}function GM(e){const t=[{},{}];return e?.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function uk(e,t,n,r){if(typeof t=="function"){const[i,s]=GM(r);t=t(n!==void 0?n:e.custom,i,s)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,s]=GM(r);t=t(n!==void 0?n:e.custom,i,s)}return t}function Kh(e){return nr(e)?e.get():e}function j$({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,i){return{latestValues:O$(n,r,i,e),renderState:t()}}function O$(e,t,n,r){const i={},s=r(e,{});for(const m in s)i[m]=Kh(s[m]);let{initial:o,animate:l}=e;const u=Mm(e),d=dI(e);t&&d&&!u&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const p=h?l:o;if(p&&typeof p!="boolean"&&!Am(p)){const m=Array.isArray(p)?p:[p];for(let b=0;b<m.length;b++){const x=uk(e,m[b]);if(x){const{transitionEnd:S,transition:w,...C}=x;for(const N in C){let k=C[N];if(Array.isArray(k)){const T=h?k.length-1:0;k=k[T]}k!==null&&(i[N]=k)}for(const N in S)i[N]=S[N]}}}return i}const yI=e=>(t,n)=>{const r=D.useContext(Nm),i=D.useContext(km),s=()=>j$(e,t,r,i);return n?s():LC(s)};function dk(e,t,n){const{style:r}=e,i={};for(const s in r)(nr(r[s])||t.style&&nr(t.style[s])||fI(s,e)||n?.getValue(s)?.liveStyle!==void 0)&&(i[s]=r[s]);return i}const L$=yI({scrapeMotionValuesFromProps:dk,createRenderState:lk});function bI(e,t,n){const r=dk(e,t,n);for(const i in e)if(nr(e[i])||nr(t[i])){const s=yc.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=e[i]}return r}const P$=yI({scrapeMotionValuesFromProps:bI,createRenderState:mI}),I$=Symbol.for("motionComponentSymbol");function Ul(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function B$(e,t,n){return D.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):Ul(n)&&(n.current=r))},[t])}const fk=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),z$="framerAppearId",vI="data-"+fk(z$),xI=D.createContext({});function q$(e,t,n,r,i){const{visualElement:s}=D.useContext(Nm),o=D.useContext(cI),l=D.useContext(km),u=D.useContext(ik).reducedMotion,d=D.useRef(null);r=r||o.renderer,!d.current&&r&&(d.current=r(e,{visualState:t,parent:s,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:u}));const h=d.current,p=D.useContext(xI);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&V$(d.current,n,i,p);const m=D.useRef(!1);D.useInsertionEffect(()=>{h&&m.current&&h.update(n,l)});const b=n[vI],x=D.useRef(!!b&&!window.MotionHandoffIsComplete?.(b)&&window.MotionHasOptimisedAnimation?.(b));return yP(()=>{h&&(m.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),x.current&&h.animationState&&h.animationState.animateChanges())}),D.useEffect(()=>{h&&(!x.current&&h.animationState&&h.animationState.animateChanges(),x.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(b)}),x.current=!1),h.enteringChildren=void 0)}),h}function V$(e,t,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:l,layoutScroll:u,layoutRoot:d,layoutCrossfade:h}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:wI(e.parent)),e.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||l&&Ul(l),visualElement:e,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:h,layoutScroll:u,layoutRoot:d})}function wI(e){if(e)return e.options.allowProjection!==!1?e.projection:wI(e.parent)}function z0(e,{forwardMotionProps:t=!1}={},n,r){n&&p$(n);const i=ck(e)?P$:L$;function s(l,u){let d;const h={...D.useContext(ik),...l,layoutId:H$(l)},{isStatic:p}=h,m=v$(l),b=i(l,p);if(!p&&PC){F$();const x=U$(h);d=x.MeasureLayout,m.visualElement=q$(e,b,h,r,x.ProjectionNode)}return y.jsxs(Nm.Provider,{value:m,children:[d&&m.visualElement?y.jsx(d,{visualElement:m.visualElement,...h}):null,R$(e,l,B$(b,m.visualElement,u),b,p,t)]})}s.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const o=D.forwardRef(s);return o[I$]=e,o}function H$({layoutId:e}){const t=D.useContext(OC).id;return t&&e!==void 0?t+"-"+e:e}function F$(e,t){D.useContext(cI).strict}function U$(e){const{drag:t,layout:n}=rc;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t?.isEnabled(e)||n?.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function $$(e,t){if(typeof Proxy>"u")return z0;const n=new Map,r=(s,o)=>z0(s,o,e,t),i=(s,o)=>r(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?r:(n.has(o)||n.set(o,z0(o,void 0,e,t)),n.get(o))})}function SI({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function G$({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function W$(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function q0(e){return e===void 0||e===1}function xE({scale:e,scaleX:t,scaleY:n}){return!q0(e)||!q0(t)||!q0(n)}function pa(e){return xE(e)||EI(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function EI(e){return WM(e.x)||WM(e.y)}function WM(e){return e&&e!=="0%"}function mp(e,t,n){const r=e-n,i=t*r;return n+i}function KM(e,t,n,r,i){return i!==void 0&&(e=mp(e,i,r)),mp(e,n,r)+t}function wE(e,t=0,n=1,r,i){e.min=KM(e.min,t,n,r,i),e.max=KM(e.max,t,n,r,i)}function CI(e,{x:t,y:n}){wE(e.x,t.translate,t.scale,t.originPoint),wE(e.y,n.translate,n.scale,n.originPoint)}const YM=.999999999999,XM=1.0000000000001;function K$(e,t,n,r=!1){const i=n.length;if(!i)return;t.x=t.y=1;let s,o;for(let l=0;l<i;l++){s=n[l],o=s.projectionDelta;const{visualElement:u}=s.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Gl(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,CI(e,o)),r&&pa(s.latestValues)&&Gl(e,s.latestValues))}t.x<XM&&t.x>YM&&(t.x=1),t.y<XM&&t.y>YM&&(t.y=1)}function $l(e,t){e.min=e.min+t,e.max=e.max+t}function ZM(e,t,n,r,i=.5){const s=$t(e.min,e.max,i);wE(e,t,n,s,r)}function Gl(e,t){ZM(e.x,t.x,t.scaleX,t.scale,t.originX),ZM(e.y,t.y,t.scaleY,t.scale,t.originY)}function kI(e,t){return SI(W$(e.getBoundingClientRect(),t))}function Y$(e,t,n){const r=kI(e,n),{scroll:i}=t;return i&&($l(r.x,i.offset.x),$l(r.y,i.offset.y)),r}const JM=()=>({translate:0,scale:1,origin:0,originPoint:0}),Wl=()=>({x:JM(),y:JM()}),QM=()=>({min:0,max:0}),un=()=>({x:QM(),y:QM()}),SE={current:null},TI={current:!1};function X$(){if(TI.current=!0,!!PC)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>SE.current=e.matches;e.addEventListener("change",t),t()}else SE.current=!1}const Z$=new WeakMap;function J$(e,t,n){for(const r in t){const i=t[r],s=n[r];if(nr(i))e.addValue(r,i);else if(nr(s))e.addValue(r,nc(i,{owner:e}));else if(s!==i)if(e.hasValue(r)){const o=e.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=e.getStaticValue(r);e.addValue(r,nc(o!==void 0?o:i,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const e_=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class Q${scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=QC,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const m=Cr.now();this.renderScheduledAt<m&&(this.renderScheduledAt=m,Pt.render(this.render,!1,!0))};const{latestValues:u,renderState:d}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=d,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.blockInitialAnimation=!!s,this.isControllingVariants=Mm(n),this.isVariantNode=dI(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:h,...p}=this.scrapeMotionValuesFromProps(n,{},this);for(const m in p){const b=p[m];u[m]!==void 0&&nr(b)&&b.set(u[m])}}mount(t){this.current=t,Z$.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),TI.current||X$(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:SE.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),zo(this.notifyUpdate),zo(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=bc.has(t);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&Pt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in rc){const n=rc[t];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[t]&&i&&r(this.props)&&(this.features[t]=new i(this)),this.features[t]){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):un()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<e_.length;r++){const i=e_[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=t[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=J$(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=nc(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(bP(r)||xP(r))?r=parseFloat(r):!a$(r)&&qo.test(n)&&(r=tI(t,n)),this.setBaseTarget(t,nr(r)?r.get():r)),nr(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const s=uk(this.props,n,this.presenceContext?.custom);s&&(r=s[t])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!nr(i)?i:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new VC),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){nk.render(this.render)}}class NI extends Q${constructor(){super(...arguments),this.KeyframeResolver=Y7}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;nr(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function AI(e,{style:t,vars:n},r,i){const s=e.style;let o;for(o in t)s[o]=t[o];i?.applyProjectionStyles(s,r);for(o in n)s.setProperty(o,n[o])}function eG(e){return window.getComputedStyle(e)}class tG extends NI{constructor(){super(...arguments),this.type="html",this.renderInstance=AI}readValueFromInstance(t,n){if(bc.has(n))return this.projection?.isProjecting?hE(n):p7(t,n);{const r=eG(t),i=(UC(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return kI(t,n)}build(t,n,r){ak(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return dk(t,n,r)}}const MI=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function nG(e,t,n,r){AI(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(MI.has(i)?i:fk(i),t.attrs[i])}class rG extends NI{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=un}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(bc.has(n)){const r=eI(n);return r&&r.default||0}return n=MI.has(n)?n:fk(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return bI(t,n,r)}build(t,n,r){pI(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,i){nG(t,n,r,i)}mount(t){this.isSVGTag=gI(t.tagName),super.mount(t)}}const iG=(e,t)=>ck(e)?new rG(t):new tG(t,{allowProjection:e!==D.Fragment});function Zl(e,t,n){const r=e.getProps();return uk(r,t,n!==void 0?n:r.custom,e)}const EE=e=>Array.isArray(e);function sG(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,nc(n))}function oG(e){return EE(e)?e[e.length-1]||0:e}function aG(e,t){const n=Zl(e,t);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const l=oG(s[o]);sG(e,o,l)}}function lG(e){return!!(nr(e)&&e.add)}function CE(e,t){const n=e.getValue("willChange");if(lG(n))return n.add(t);if(!n&&Ps.WillChange){const r=new Ps.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function _I(e){return e.props[vI]}const cG=e=>e!==null;function uG(e,{repeat:t,repeatType:n="loop"},r){const i=e.filter(cG),s=t&&n!=="loop"&&t%2===1?0:i.length-1;return i[s]}const dG={type:"spring",stiffness:500,damping:25,restSpeed:10},fG=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),hG={type:"keyframes",duration:.8},pG={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},mG=(e,{keyframes:t})=>t.length>2?hG:bc.has(e)?e.startsWith("scale")?fG(t[1]):dG:pG;function gG({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:l,from:u,elapsed:d,...h}){return!!Object.keys(h).length}const hk=(e,t,n,r={},i,s)=>o=>{const l=ek(r,e)||{},u=l.delay||r.delay||0;let{elapsed:d=0}=r;d=d-Zi(u);const h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-d,onUpdate:m=>{t.set(m),l.onUpdate&&l.onUpdate(m)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:s?void 0:i};gG(l)||Object.assign(h,mG(e,h)),h.duration&&(h.duration=Zi(h.duration)),h.repeatDelay&&(h.repeatDelay=Zi(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let p=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(bE(h),h.delay===0&&(p=!0)),(Ps.instantAnimations||Ps.skipAnimations)&&(p=!0,bE(h),h.delay=0),h.allowFlatten=!l.type&&!l.ease,p&&!s&&t.get()!==void 0){const m=uG(h.keyframes,l);if(m!==void 0){Pt.update(()=>{h.onUpdate(m),h.onComplete()});return}}return l.isSync?new JC(h):new I7(h)};function yG({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function DI(e,t,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=e.getDefaultTransition(),transitionEnd:o,...l}=t;r&&(s=r);const u=[],d=i&&e.animationState&&e.animationState.getState()[i];for(const h in l){const p=e.getValue(h,e.latestValues[h]??null),m=l[h];if(m===void 0||d&&yG(d,h))continue;const b={delay:n,...ek(s||{},h)},x=p.get();if(x!==void 0&&!p.isAnimating&&!Array.isArray(m)&&m===x&&!b.velocity)continue;let S=!1;if(window.MotionHandoffAnimation){const C=_I(e);if(C){const N=window.MotionHandoffAnimation(C,h,Pt);N!==null&&(b.startTime=N,S=!0)}}CE(e,h),p.start(hk(h,p,m,e.shouldReduceMotion&&ZP.has(h)?{type:!1}:b,e,S));const w=p.animation;w&&u.push(w)}return o&&Promise.all(u).then(()=>{Pt.update(()=>{o&&aG(e,o)})}),u}function RI(e,t,n,r=0,i=1){const s=Array.from(e).sort((d,h)=>d.sortNodePosition(h)).indexOf(t),o=e.size,l=(o-1)*r;return typeof n=="function"?n(s,o):i===1?s*r:l-s*r}function kE(e,t,n={}){const r=Zl(e,t,n.type==="exit"?e.presenceContext?.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(DI(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:p}=i;return bG(e,t,u,d,h,p,n)}:()=>Promise.resolve(),{when:l}=i;if(l){const[u,d]=l==="beforeChildren"?[s,o]:[o,s];return u().then(()=>d())}else return Promise.all([s(),o(n.delay)])}function bG(e,t,n=0,r=0,i=0,s=1,o){const l=[];for(const u of e.variantChildren)u.notify("AnimationStart",t),l.push(kE(u,t,{...o,delay:n+(typeof r=="function"?0:r)+RI(e.variantChildren,u,r,i,s)}).then(()=>u.notify("AnimationComplete",t)));return Promise.all(l)}function vG(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(s=>kE(e,s,n));r=Promise.all(i)}else if(typeof t=="string")r=kE(e,t,n);else{const i=typeof t=="function"?Zl(e,t,n.custom):t;r=Promise.all(DI(e,i,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function jI(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const xG=ok.length;function OI(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?OI(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<xG;n++){const r=ok[n],i=e.props[r];(hd(i)||i===!1)&&(t[r]=i)}return t}const wG=[...sk].reverse(),SG=sk.length;function EG(e){return t=>Promise.all(t.map(({animation:n,options:r})=>vG(e,n,r)))}function CG(e){let t=EG(e),n=t_(),r=!0;const i=u=>(d,h)=>{const p=Zl(e,h,u==="exit"?e.presenceContext?.custom:void 0);if(p){const{transition:m,transitionEnd:b,...x}=p;d={...d,...x,...b}}return d};function s(u){t=u(e)}function o(u){const{props:d}=e,h=OI(e.parent)||{},p=[],m=new Set;let b={},x=1/0;for(let w=0;w<SG;w++){const C=wG[w],N=n[C],k=d[C]!==void 0?d[C]:h[C],T=hd(k),A=C===u?N.isActive:null;A===!1&&(x=w);let M=k===h[C]&&k!==d[C]&&T;if(M&&r&&e.manuallyAnimateOnMount&&(M=!1),N.protectedKeys={...b},!N.isActive&&A===null||!k&&!N.prevProp||Am(k)||typeof k=="boolean")continue;const j=kG(N.prevProp,k);let R=j||C===u&&N.isActive&&!M&&T||w>x&&T,L=!1;const I=Array.isArray(k)?k:[k];let H=I.reduce(i(C),{});A===!1&&(H={});const{prevResolvedValues:q={}}=N,W={...q,...H},z=V=>{R=!0,m.has(V)&&(L=!0,m.delete(V)),N.needsAnimating[V]=!0;const Y=e.getValue(V);Y&&(Y.liveStyle=!1)};for(const V in W){const Y=H[V],te=q[V];if(b.hasOwnProperty(V))continue;let B=!1;EE(Y)&&EE(te)?B=!jI(Y,te):B=Y!==te,B?Y!=null?z(V):m.add(V):Y!==void 0&&m.has(V)?z(V):N.protectedKeys[V]=!0}N.prevProp=k,N.prevResolvedValues=H,N.isActive&&(b={...b,...H}),r&&e.blockInitialAnimation&&(R=!1);const F=M&&j;R&&(!F||L)&&p.push(...I.map(V=>{const Y={type:C};if(typeof V=="string"&&r&&!F&&e.manuallyAnimateOnMount&&e.parent){const{parent:te}=e,B=Zl(te,V);if(te.enteringChildren&&B){const{delayChildren:$}=B.transition||{};Y.delay=RI(te.enteringChildren,e,$)}}return{animation:V,options:Y}}))}if(m.size){const w={};if(typeof d.initial!="boolean"){const C=Zl(e,Array.isArray(d.initial)?d.initial[0]:d.initial);C&&C.transition&&(w.transition=C.transition)}m.forEach(C=>{const N=e.getBaseTarget(C),k=e.getValue(C);k&&(k.liveStyle=!0),w[C]=N??null}),p.push({animation:w})}let S=!!p.length;return r&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(S=!1),r=!1,S?t(p):Promise.resolve()}function l(u,d){if(n[u].isActive===d)return Promise.resolve();e.variantChildren?.forEach(p=>p.animationState?.setActive(u,d)),n[u].isActive=d;const h=o(u);for(const p in n)n[p].protectedKeys={};return h}return{animateChanges:o,setActive:l,setAnimateFunction:s,getState:()=>n,reset:()=>{n=t_(),r=!0}}}function kG(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!jI(t,e):!1}function da(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function t_(){return{animate:da(!0),whileInView:da(),whileHover:da(),whileTap:da(),whileDrag:da(),whileFocus:da(),exit:da()}}class Fo{constructor(t){this.isMounted=!1,this.node=t}update(){}}class TG extends Fo{constructor(t){super(t),t.animationState||(t.animationState=CG(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Am(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let NG=0;class AG extends Fo{constructor(){super(...arguments),this.id=NG++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t);n&&!t&&i.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const MG={animation:{Feature:TG},exit:{Feature:AG}};function md(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function Wd(e){return{point:{x:e.pageX,y:e.pageY}}}const _G=e=>t=>rk(t)&&e(t,Wd(t));function Gu(e,t,n,r){return md(e,t,_G(n),r)}const LI=1e-4,DG=1-LI,RG=1+LI,PI=.01,jG=0-PI,OG=0+PI;function cr(e){return e.max-e.min}function LG(e,t,n){return Math.abs(e-t)<=n}function n_(e,t,n,r=.5){e.origin=r,e.originPoint=$t(t.min,t.max,e.origin),e.scale=cr(n)/cr(t),e.translate=$t(n.min,n.max,e.origin)-e.originPoint,(e.scale>=DG&&e.scale<=RG||isNaN(e.scale))&&(e.scale=1),(e.translate>=jG&&e.translate<=OG||isNaN(e.translate))&&(e.translate=0)}function Wu(e,t,n,r){n_(e.x,t.x,n.x,r?r.originX:void 0),n_(e.y,t.y,n.y,r?r.originY:void 0)}function r_(e,t,n){e.min=n.min+t.min,e.max=e.min+cr(t)}function PG(e,t,n){r_(e.x,t.x,n.x),r_(e.y,t.y,n.y)}function i_(e,t,n){e.min=t.min-n.min,e.max=e.min+cr(t)}function Ku(e,t,n){i_(e.x,t.x,n.x),i_(e.y,t.y,n.y)}function oi(e){return[e("x"),e("y")]}const II=({current:e})=>e?e.ownerDocument.defaultView:null,s_=(e,t)=>Math.abs(e-t);function IG(e,t){const n=s_(e.x,t.x),r=s_(e.y,t.y);return Math.sqrt(n**2+r**2)}class BI{constructor(t,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const m=H0(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,x=IG(m.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!x)return;const{point:S}=m,{timestamp:w}=$n;this.history.push({...S,timestamp:w});const{onStart:C,onMove:N}=this.handlers;b||(C&&C(this.lastMoveEvent,m),this.startEvent=this.lastMoveEvent),N&&N(this.lastMoveEvent,m)},this.handlePointerMove=(m,b)=>{this.lastMoveEvent=m,this.lastMoveEventInfo=V0(b,this.transformPagePoint),Pt.update(this.updatePoint,!0)},this.handlePointerUp=(m,b)=>{this.end();const{onEnd:x,onSessionEnd:S,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=H0(m.type==="pointercancel"?this.lastMoveEventInfo:V0(b,this.transformPagePoint),this.history);this.startEvent&&x&&x(m,C),S&&S(m,C)},!rk(t))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const l=Wd(t),u=V0(l,this.transformPagePoint),{point:d}=u,{timestamp:h}=$n;this.history=[{...d,timestamp:h}];const{onSessionStart:p}=n;p&&p(t,H0(u,this.history)),this.removeListeners=Ud(Gu(this.contextWindow,"pointermove",this.handlePointerMove),Gu(this.contextWindow,"pointerup",this.handlePointerUp),Gu(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),zo(this.updatePoint)}}function V0(e,t){return t?{point:t(e.point)}:e}function o_(e,t){return{x:e.x-t.x,y:e.y-t.y}}function H0({point:e},t){return{point:e,delta:o_(e,zI(t)),offset:o_(e,BG(t)),velocity:zG(t,.1)}}function BG(e){return e[0]}function zI(e){return e[e.length-1]}function zG(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=zI(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>Zi(t)));)n--;if(!r)return{x:0,y:0};const s=ui(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function qG(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?$t(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?$t(n,e,r.max):Math.min(e,n)),e}function a_(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function VG(e,{top:t,left:n,bottom:r,right:i}){return{x:a_(e.x,n,i),y:a_(e.y,t,r)}}function l_(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function HG(e,t){return{x:l_(e.x,t.x),y:l_(e.y,t.y)}}function FG(e,t){let n=.5;const r=cr(e),i=cr(t);return i>r?n=ud(t.min,t.max-r,e.min):r>i&&(n=ud(e.min,e.max-i,t.min)),Ls(0,1,n)}function UG(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const TE=.35;function $G(e=TE){return e===!1?e=0:e===!0&&(e=TE),{x:c_(e,"left","right"),y:c_(e,"top","bottom")}}function c_(e,t,n){return{min:u_(e,t),max:u_(e,n)}}function u_(e,t){return typeof e=="number"?e:e[t]||0}const GG=new WeakMap;class WG{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=un(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=p=>{const{dragSnapToOrigin:m}=this.getProps();m?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Wd(p).point)},o=(p,m)=>{const{drag:b,dragPropagation:x,onDragStart:S}=this.getProps();if(b&&!x&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Q7(b),!this.openDragLock))return;this.latestPointerEvent=p,this.latestPanInfo=m,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),oi(C=>{let N=this.getAxisMotionValue(C).get()||0;if(Ji.test(N)){const{projection:k}=this.visualElement;if(k&&k.layout){const T=k.layout.layoutBox[C];T&&(N=cr(T)*(parseFloat(N)/100))}}this.originPoint[C]=N}),S&&Pt.postRender(()=>S(p,m)),CE(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},l=(p,m)=>{this.latestPointerEvent=p,this.latestPanInfo=m;const{dragPropagation:b,dragDirectionLock:x,onDirectionLock:S,onDrag:w}=this.getProps();if(!b&&!this.openDragLock)return;const{offset:C}=m;if(x&&this.currentDirection===null){this.currentDirection=KG(C),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",m.point,C),this.updateAxis("y",m.point,C),this.visualElement.render(),w&&w(p,m)},u=(p,m)=>{this.latestPointerEvent=p,this.latestPanInfo=m,this.stop(p,m),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>oi(p=>this.getAnimationState(p)==="paused"&&this.getAxisMotionValue(p).animation?.play()),{dragSnapToOrigin:h}=this.getProps();this.panSession=new BI(t,{onSessionStart:s,onStart:o,onMove:l,onSessionEnd:u,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:r,contextWindow:II(this.visualElement)})}stop(t,n){const r=t||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&Pt.postRender(()=>l(r,i))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:i}=this.getProps();if(!r||!wh(t,i,this.currentDirection))return;const s=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=qG(o,this.constraints[t],this.elastic[t])),s.set(o)}resolveConstraints(){const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;t&&Ul(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=VG(r.layoutBox,t):this.constraints=!1,this.elastic=$G(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&oi(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=UG(r.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Ul(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=Y$(r,i.root,this.visualElement.getTransformPagePoint());let o=HG(i.layout.layoutBox,s);if(n){const l=n(G$(o));this.hasMutatedConstraints=!!l,l&&(o=SI(l))}return o}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),u=this.constraints||{},d=oi(h=>{if(!wh(h,n,this.currentDirection))return;let p=u&&u[h]||{};o&&(p={min:0,max:0});const m=i?200:1e6,b=i?40:1e7,x={type:"inertia",velocity:r?t[h]:0,bounceStiffness:m,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...s,...p};return this.startAxisValueAnimation(h,x)});return Promise.all(d).then(l)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return CE(this.visualElement,t),r.start(hk(t,r,0,n,this.visualElement,!1))}stopAnimation(){oi(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){oi(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){oi(n=>{const{drag:r}=this.getProps();if(!wh(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:l}=i.layout.layoutBox[n];s.set(t[n]-$t(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Ul(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};oi(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const u=l.get();i[o]=FG({min:u,max:u},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),oi(o=>{if(!wh(o,t,null))return;const l=this.getAxisMotionValue(o),{min:u,max:d}=this.constraints[o];l.set($t(u,d,i[o]))})}addListeners(){if(!this.visualElement.current)return;GG.set(this.visualElement,this);const t=this.visualElement.current,n=Gu(t,"pointerdown",u=>{const{drag:d,dragListener:h=!0}=this.getProps();d&&h&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();Ul(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Pt.read(r);const o=md(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:d})=>{this.isDragging&&d&&(oi(h=>{const p=this.getAxisMotionValue(h);p&&(this.originPoint[h]+=u[h].translate,p.set(p.get()+u[h].translate))}),this.visualElement.render())}));return()=>{o(),n(),s(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=TE,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:l}}}function wh(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function KG(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class YG extends Fo{constructor(t){super(t),this.removeGroupControls=di,this.removeListeners=di,this.controls=new WG(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||di}unmount(){this.removeGroupControls(),this.removeListeners()}}const d_=e=>(t,n)=>{e&&Pt.postRender(()=>e(t,n))};class XG extends Fo{constructor(){super(...arguments),this.removePointerDownListener=di}onPointerDown(t){this.session=new BI(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:II(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:d_(t),onStart:d_(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Pt.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=Gu(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const Yh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function f_(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Su={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Ge.test(e))e=parseFloat(e);else return e;const n=f_(e,t.target.x),r=f_(e,t.target.y);return`${n}% ${r}%`}},ZG={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,i=qo.parse(e);if(i.length>5)return r;const s=qo.createTransformer(e),o=typeof i[0]!="number"?1:0,l=n.x.scale*t.x,u=n.y.scale*t.y;i[0+o]/=l,i[1+o]/=u;const d=$t(l,u,.5);return typeof i[2+o]=="number"&&(i[2+o]/=d),typeof i[3+o]=="number"&&(i[3+o]/=d),s(i)}};let F0=!1;class JG extends D.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=t;x$(QG),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),F0&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),Yh.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,F0=!0,i||t.layoutDependency!==n||n===void 0||t.isPresent!==s?o.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?o.promote():o.relegate()||Pt.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),nk.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=t;F0=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function qI(e){const[t,n]=lI(),r=D.useContext(OC);return y.jsx(JG,{...e,layoutGroup:r,switchLayoutGroup:D.useContext(xI),isPresent:t,safeToRemove:n})}const QG={borderRadius:{...Su,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Su,borderTopRightRadius:Su,borderBottomLeftRadius:Su,borderBottomRightRadius:Su,boxShadow:ZG};function eW(e,t,n){const r=nr(e)?e:nc(e);return r.start(hk("",r,t,n)),r.animation}const tW=(e,t)=>e.depth-t.depth;class nW{constructor(){this.children=[],this.isDirty=!1}add(t){IC(this.children,t),this.isDirty=!0}remove(t){BC(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(tW),this.isDirty=!1,this.children.forEach(t)}}function rW(e,t){const n=Cr.now(),r=({timestamp:i})=>{const s=i-n;s>=t&&(zo(r),e(s-t))};return Pt.setup(r,!0),()=>zo(r)}const VI=["TopLeft","TopRight","BottomLeft","BottomRight"],iW=VI.length,h_=e=>typeof e=="string"?parseFloat(e):e,p_=e=>typeof e=="number"||Ge.test(e);function sW(e,t,n,r,i,s){i?(e.opacity=$t(0,n.opacity??1,oW(r)),e.opacityExit=$t(t.opacity??1,0,aW(r))):s&&(e.opacity=$t(t.opacity??1,n.opacity??1,r));for(let o=0;o<iW;o++){const l=`border${VI[o]}Radius`;let u=m_(t,l),d=m_(n,l);if(u===void 0&&d===void 0)continue;u||(u=0),d||(d=0),u===0||d===0||p_(u)===p_(d)?(e[l]=Math.max($t(h_(u),h_(d),r),0),(Ji.test(d)||Ji.test(u))&&(e[l]+="%")):e[l]=d}(t.rotate||n.rotate)&&(e.rotate=$t(t.rotate||0,n.rotate||0,r))}function m_(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const oW=HI(0,.5,AP),aW=HI(.5,.95,di);function HI(e,t,n){return r=>r<e?0:r>t?1:n(ud(e,t,r))}function g_(e,t){e.min=t.min,e.max=t.max}function ii(e,t){g_(e.x,t.x),g_(e.y,t.y)}function y_(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function b_(e,t,n,r,i){return e-=t,e=mp(e,1/n,r),i!==void 0&&(e=mp(e,1/i,r)),e}function lW(e,t=0,n=1,r=.5,i,s=e,o=e){if(Ji.test(t)&&(t=parseFloat(t),t=$t(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=$t(s.min,s.max,r);e===s&&(l-=t),e.min=b_(e.min,t,n,l,i),e.max=b_(e.max,t,n,l,i)}function v_(e,t,[n,r,i],s,o){lW(e,t[n],t[r],t[i],t.scale,s,o)}const cW=["x","scaleX","originX"],uW=["y","scaleY","originY"];function x_(e,t,n,r){v_(e.x,t,cW,n?n.x:void 0,r?r.x:void 0),v_(e.y,t,uW,n?n.y:void 0,r?r.y:void 0)}function w_(e){return e.translate===0&&e.scale===1}function FI(e){return w_(e.x)&&w_(e.y)}function S_(e,t){return e.min===t.min&&e.max===t.max}function dW(e,t){return S_(e.x,t.x)&&S_(e.y,t.y)}function E_(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function UI(e,t){return E_(e.x,t.x)&&E_(e.y,t.y)}function C_(e){return cr(e.x)/cr(e.y)}function k_(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class fW{constructor(){this.members=[]}add(t){IC(this.members,t),t.scheduleRender()}remove(t){if(BC(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function hW(e,t,n){let r="";const i=e.x.translate/t.x,s=e.y.translate/t.y,o=n?.z||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:d,rotate:h,rotateX:p,rotateY:m,skewX:b,skewY:x}=n;d&&(r=`perspective(${d}px) ${r}`),h&&(r+=`rotate(${h}deg) `),p&&(r+=`rotateX(${p}deg) `),m&&(r+=`rotateY(${m}deg) `),b&&(r+=`skewX(${b}deg) `),x&&(r+=`skewY(${x}deg) `)}const l=e.x.scale*t.x,u=e.y.scale*t.y;return(l!==1||u!==1)&&(r+=`scale(${l}, ${u})`),r||"none"}const U0=["","X","Y","Z"],pW=1e3;let mW=0;function $0(e,t,n,r){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function $I(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=_I(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",Pt,!(i||s))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&$I(r)}function GI({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},l=t?.()){this.id=mW++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(bW),this.nodes.forEach(SW),this.nodes.forEach(EW),this.nodes.forEach(vW)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new nW)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new VC),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const u=this.eventHandlers.get(o);u&&u.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=aI(o)&&!s$(o),this.instance=o;const{layoutId:l,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||l)&&(this.isLayoutDirty=!0),e){let h,p=0;const m=()=>this.root.updateBlockedByResize=!1;Pt.read(()=>{p=window.innerWidth}),e(o,()=>{const b=window.innerWidth;b!==p&&(p=b,this.root.updateBlockedByResize=!0,h&&h(),h=rW(m,250),Yh.hasAnimatedSinceResize&&(Yh.hasAnimatedSinceResize=!1,this.nodes.forEach(A_)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:p,hasRelativeLayoutChanged:m,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const x=this.options.transition||d.getDefaultTransition()||AW,{onLayoutAnimationStart:S,onLayoutAnimationComplete:w}=d.getProps(),C=!this.targetLayout||!UI(this.targetLayout,b),N=!p&&m;if(this.options.layoutRoot||this.resumeFrom||N||p&&(C||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const k={...ek(x,"layout"),onPlay:S,onComplete:w};(d.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k),this.setAnimationOrigin(h,N)}else p||A_(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),zo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(CW),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&$I(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const p=this.path[h];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:l,layout:u}=this.options;if(l===void 0&&!u)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(T_);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(N_);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(wW),this.nodes.forEach(gW),this.nodes.forEach(yW)):this.nodes.forEach(N_),this.clearAllSnapshots();const l=Cr.now();$n.delta=Ls(0,1e3/60,l-$n.timestamp),$n.timestamp=l,$n.isProcessing=!0,j0.update.process($n),j0.preRender.process($n),j0.render.process($n),$n.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,nk.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(xW),this.sharedNodes.forEach(kW)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Pt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Pt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!cr(this.snapshot.measuredBox.x)&&!cr(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=un(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!FI(this.projectionDelta),u=this.getTransformTemplate(),d=u?u(this.latestValues,""):void 0,h=d!==this.prevTransformTemplateValue;o&&this.instance&&(l||pa(this.latestValues)||h)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let u=this.removeElementScroll(l);return o&&(u=this.removeTransform(u)),MW(u),{animationId:this.root.animationId,measuredBox:l,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return un();const l=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(_W))){const{scroll:d}=this.root;d&&($l(l.x,d.offset.x),$l(l.y,d.offset.y))}return l}removeElementScroll(o){const l=un();if(ii(l,o),this.scroll?.wasRoot)return l;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:p}=d;d!==this.root&&h&&p.layoutScroll&&(h.wasRoot&&ii(l,o),$l(l.x,h.offset.x),$l(l.y,h.offset.y))}return l}applyTransform(o,l=!1){const u=un();ii(u,o);for(let d=0;d<this.path.length;d++){const h=this.path[d];!l&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Gl(u,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),pa(h.latestValues)&&Gl(u,h.latestValues)}return pa(this.latestValues)&&Gl(u,this.latestValues),u}removeTransform(o){const l=un();ii(l,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];if(!d.instance||!pa(d.latestValues))continue;xE(d.latestValues)&&d.updateSnapshot();const h=un(),p=d.measurePageBox();ii(h,p),x_(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,h)}return pa(this.latestValues)&&x_(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==$n.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:p}=this.options;if(!(!this.layout||!(h||p))){if(this.resolvedRelativeTargetAt=$n.timestamp,!this.targetDelta&&!this.relativeTarget){const m=this.getClosestProjectingParent();m&&m.layout&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=un(),this.relativeTargetOrigin=un(),Ku(this.relativeTargetOrigin,this.layout.layoutBox,m.layout.layoutBox),ii(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=un(),this.targetWithTransforms=un()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),PG(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ii(this.target,this.layout.layoutBox),CI(this.target,this.targetDelta)):ii(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const m=this.getClosestProjectingParent();m&&!!m.resumingFrom==!!this.resumingFrom&&!m.options.layoutScroll&&m.target&&this.animationProgress!==1?(this.relativeParent=m,this.forceRelativeParentToResolveTarget(),this.relativeTarget=un(),this.relativeTargetOrigin=un(),Ku(this.relativeTargetOrigin,this.target,m.target),ii(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||xE(this.parent.latestValues)||EI(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const o=this.getLead(),l=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===$n.timestamp&&(u=!1),u)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;ii(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,m=this.treeScale.y;K$(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=un());const{target:b}=o;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(y_(this.prevProjectionDelta.x,this.projectionDelta.x),y_(this.prevProjectionDelta.y,this.projectionDelta.y)),Wu(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==m||!k_(this.projectionDelta.x,this.prevProjectionDelta.x)||!k_(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=Wl(),this.projectionDelta=Wl(),this.projectionDeltaWithTransform=Wl()}setAnimationOrigin(o,l=!1){const u=this.snapshot,d=u?u.latestValues:{},h={...this.latestValues},p=Wl();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const m=un(),b=u?u.source:void 0,x=this.layout?this.layout.source:void 0,S=b!==x,w=this.getStack(),C=!w||w.members.length<=1,N=!!(S&&!C&&this.options.crossfade===!0&&!this.path.some(NW));this.animationProgress=0;let k;this.mixTargetDelta=T=>{const A=T/1e3;M_(p.x,o.x,A),M_(p.y,o.y,A),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(Ku(m,this.layout.layoutBox,this.relativeParent.layout.layoutBox),TW(this.relativeTarget,this.relativeTargetOrigin,m,A),k&&dW(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=un()),ii(k,this.relativeTarget)),S&&(this.animationValues=h,sW(h,d,this.latestValues,A,N,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=A},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(zo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Pt.update(()=>{Yh.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=nc(0)),this.currentAnimation=eW(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(pW),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:u,layout:d,latestValues:h}=o;if(!(!l||!u||!d)){if(this!==o&&this.layout&&d&&WI(this.options.animationType,this.layout.layoutBox,d.layoutBox)){u=this.target||un();const p=cr(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+p;const m=cr(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+m}ii(l,u),Gl(l,h),Wu(this.projectionDeltaWithTransform,this.layoutCorrected,l,h)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new fW),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:u}={}){const d=this.getStack();d&&d.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(l=!0),!l)return;const d={};u.z&&$0("z",o,d,this.animationValues);for(let h=0;h<U0.length;h++)$0(`rotate${U0[h]}`,o,d,this.animationValues),$0(`skew${U0[h]}`,o,d,this.animationValues);o.render();for(const h in d)o.setStaticValue(h,d[h]),this.animationValues&&(this.animationValues[h]=d[h]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=Kh(l?.pointerEvents)||"",o.transform=u?u(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=Kh(l?.pointerEvents)||""),this.hasProjected&&!pa(this.latestValues)&&(o.transform=u?u({},""):"none",this.hasProjected=!1);return}o.visibility="";const h=d.animationValues||d.latestValues;this.applyTransformsToTarget();let p=hW(this.projectionDeltaWithTransform,this.treeScale,h);u&&(p=u(h,p)),o.transform=p;const{x:m,y:b}=this.projectionDelta;o.transformOrigin=`${m.origin*100}% ${b.origin*100}% 0`,d.animationValues?o.opacity=d===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:o.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const x in pd){if(h[x]===void 0)continue;const{correct:S,applyTo:w,isCSSVariable:C}=pd[x],N=p==="none"?h[x]:S(h[x],d);if(w){const k=w.length;for(let T=0;T<k;T++)o[w[T]]=N}else C?this.options.visualElement.renderState.vars[x]=N:o[x]=N}this.options.layoutId&&(o.pointerEvents=d===this?Kh(l?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(T_),this.root.sharedNodes.clear()}}}function gW(e){e.updateLayout()}function yW(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=e.layout,{animationType:i}=e.options,s=t.source!==e.layout.source;i==="size"?oi(h=>{const p=s?t.measuredBox[h]:t.layoutBox[h],m=cr(p);p.min=n[h].min,p.max=p.min+m}):WI(i,t.layoutBox,n)&&oi(h=>{const p=s?t.measuredBox[h]:t.layoutBox[h],m=cr(n[h]);p.max=p.min+m,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+m)});const o=Wl();Wu(o,n,t.layoutBox);const l=Wl();s?Wu(l,e.applyTransform(r,!0),t.measuredBox):Wu(l,n,t.layoutBox);const u=!FI(o);let d=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:m}=h;if(p&&m){const b=un();Ku(b,t.layoutBox,p.layoutBox);const x=un();Ku(x,n,m.layoutBox),UI(b,x)||(d=!0),h.options.layoutRoot&&(e.relativeTarget=x,e.relativeTargetOrigin=b,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function bW(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function vW(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function xW(e){e.clearSnapshot()}function T_(e){e.clearMeasurements()}function N_(e){e.isLayoutDirty=!1}function wW(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function A_(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function SW(e){e.resolveTargetDelta()}function EW(e){e.calcProjection()}function CW(e){e.resetSkewAndRotation()}function kW(e){e.removeLeadSnapshot()}function M_(e,t,n){e.translate=$t(t.translate,0,n),e.scale=$t(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function __(e,t,n,r){e.min=$t(t.min,n.min,r),e.max=$t(t.max,n.max,r)}function TW(e,t,n,r){__(e.x,t.x,n.x,r),__(e.y,t.y,n.y,r)}function NW(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const AW={duration:.45,ease:[.4,0,.1,1]},D_=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),R_=D_("applewebkit/")&&!D_("chrome/")?Math.round:di;function j_(e){e.min=R_(e.min),e.max=R_(e.max)}function MW(e){j_(e.x),j_(e.y)}function WI(e,t,n){return e==="position"||e==="preserve-aspect"&&!LG(C_(t),C_(n),.2)}function _W(e){return e!==e.root&&e.scroll?.wasRoot}const DW=GI({attachResizeListener:(e,t)=>md(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),G0={current:void 0},KI=GI({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!G0.current){const e=new DW({});e.mount(window),e.setOptions({layoutScroll:!0}),G0.current=e}return G0.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),RW={pan:{Feature:XG},drag:{Feature:YG,ProjectionNode:KI,MeasureLayout:qI}};function O_(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&Pt.postRender(()=>s(t,Wd(t)))}class jW extends Fo{mount(){const{current:t}=this.node;t&&(this.unmount=e$(t,(n,r)=>(O_(this.node,r,"Start"),i=>O_(this.node,i,"End"))))}unmount(){}}class OW extends Fo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Ud(md(this.node.current,"focus",()=>this.onFocus()),md(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function L_(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&Pt.postRender(()=>s(t,Wd(t)))}class LW extends Fo{mount(){const{current:t}=this.node;t&&(this.unmount=i$(t,(n,r)=>(L_(this.node,r,"Start"),(i,{success:s})=>L_(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const NE=new WeakMap,W0=new WeakMap,PW=e=>{const t=NE.get(e.target);t&&t(e)},IW=e=>{e.forEach(PW)};function BW({root:e,...t}){const n=e||document;W0.has(n)||W0.set(n,{});const r=W0.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(IW,{root:e,...t})),r[i]}function zW(e,t,n){const r=BW(t);return NE.set(e,n),r.observe(e),()=>{NE.delete(e),r.unobserve(e)}}const qW={some:0,all:1};class VW extends Fo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=t,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:qW[i]},l=u=>{const{isIntersecting:d}=u;if(this.isInView===d||(this.isInView=d,s&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:h,onViewportLeave:p}=this.node.getProps(),m=d?h:p;m&&m(u)};return zW(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(HW(t,n))&&this.startObserver()}unmount(){}}function HW({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const FW={inView:{Feature:VW},tap:{Feature:LW},focus:{Feature:OW},hover:{Feature:jW}},UW={layout:{ProjectionNode:KI,MeasureLayout:qI}},$W={...MG,...FW,...RW,...UW},xn=$$($W,iG);function GW(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"},child:[]}]})(e)}function ic(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(e)}function _m(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"},child:[]}]})(e)}function AE(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"},child:[]}]})(e)}function WW(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16a8.002 8.002 0 0 1 7.6-5.5c1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"},child:[]}]})(e)}function KW(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"},child:[]}]})(e)}function YW(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"},child:[]},{tag:"path",attr:{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},child:[]}]})(e)}function XW(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z"},child:[]}]})(e)}function ZW(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z"},child:[]}]})(e)}function JW(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z"},child:[]}]})(e)}function QW(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z"},child:[]}]})(e)}function eK(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z"},child:[]}]})(e)}function tK(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"},child:[]}]})(e)}function nK(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"},child:[]}]})(e)}function rK(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"},child:[]}]})(e)}function iK(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"},child:[]}]})(e)}function sK(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"},child:[]}]})(e)}function oK(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 20h14v-2H5v2zm0-10h4v6h6v-6h4l-7-7-7 7z"},child:[]}]})(e)}function Xh(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(e)}function aK(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"},child:[]}]})(e)}function YI(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"},child:[]}]})(e)}function lK(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"},child:[]}]})(e)}function cK(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"},child:[]}]})(e)}function uK(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46A7.93 7.93 0 0 0 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74A7.93 7.93 0 0 0 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"},child:[]}]})(e)}function dK(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M24 .01c0-.01 0-.01 0 0L0 0v24h24V.01zM0 0h24v24H0V0zm0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M22.99 9C19.15 5.16 13.8 3.76 8.84 4.78l2.52 2.52c3.47-.17 6.99 1.05 9.63 3.7l2-2zm-4 4a9.793 9.793 0 0 0-4.49-2.56l3.53 3.53.96-.97zM2 3.05 5.07 6.1C3.6 6.82 2.22 7.78 1 9l1.99 2c1.24-1.24 2.67-2.16 4.2-2.77l2.24 2.24A9.684 9.684 0 0 0 5 13v.01L6.99 15a7.042 7.042 0 0 1 4.92-2.06L18.98 20l1.27-1.26L3.29 1.79 2 3.05zM9 17l3 3 3-3a4.237 4.237 0 0 0-6 0z"},child:[]}]})(e)}function fK(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"},child:[]}]})(e)}const Dm=({isOpen:e,onClose:t,onLogin:n,onSignup:r,onGoogleLogin:i})=>{const[s,o]=D.useState("login"),[l,u]=D.useState(""),[d,h]=D.useState(""),[p,m]=D.useState(""),[b,x]=D.useState(""),[S,w]=D.useState(!1),[C,N]=D.useState(!1);D.useEffect(()=>{const M=()=>{const L=window.matchMedia("(prefers-color-scheme: dark)").matches||document.documentElement.classList.contains("dark");N(L)};M();const j=window.matchMedia("(prefers-color-scheme: dark)"),R=new MutationObserver(M);return j.addEventListener("change",M),R.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>{j.removeEventListener("change",M),R.disconnect()}},[]);const k=D.useCallback(async M=>{if(i){w(!0),x("");try{await i(M.credential),t()}catch(j){x(j instanceof Error?j.message:"Google authentication failed")}finally{w(!1)}}},[i,t]);D.useEffect(()=>{if(!e||!i)return;const M=document.createElement("script");return M.src="https://accounts.google.com/gsi/client",M.async=!0,M.defer=!0,document.body.appendChild(M),M.onload=()=>{window.google&&(window.google.accounts.id.initialize({client_id:"298068869246-l775qmuuledbg8fnlmli423kks90a62g.apps.googleusercontent.com",callback:k}),window.google.accounts.id.renderButton(document.getElementById("google-signin-button"),{theme:C?"filled_black":"outline",size:"large",width:400,text:s==="login"?"signin_with":"signup_with",shape:"rectangular",logo_alignment:"left"}))},()=>{document.body.contains(M)&&document.body.removeChild(M)}},[e,s,i,k,C]);const T=async M=>{M.preventDefault(),x(""),w(!0);try{s==="login"?await n(l,d):await r(l,d,p||void 0),t(),u(""),h(""),m("")}catch(j){x(j instanceof Error?j.message:"Authentication failed")}finally{w(!1)}},A=()=>{o(M=>M==="login"?"signup":"login"),x("")};return e?y.jsx(Tm,{children:e&&y.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:y.jsxs(xn.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"bg-surface rounded-2xl shadow-2xl p-8 max-w-md w-full border border-theme/10",onClick:M=>M.stopPropagation(),children:[y.jsxs("div",{className:"flex items-center justify-between mb-6",children:[y.jsx("h2",{className:"text-2xl font-bold text-theme",children:s==="login"?"Welcome Back":"Create Account"}),y.jsx("button",{type:"button",onClick:t,className:"p-2 text-muted hover:text-theme hover:bg-[var(--bg-hover)] rounded-md transition-colors","aria-label":"Close",children:y.jsx(Xh,{className:"h-5 w-5"})})]}),y.jsx("p",{className:"text-muted mb-6",children:s==="login"?"Sign in to save and manage your designs":"Create an account to start saving your work"}),b&&y.jsx("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/20 border border-red-300 dark:border-red-700 rounded-lg text-red-800 dark:text-red-200 text-sm",children:b}),i&&y.jsxs(y.Fragment,{children:[y.jsx("div",{id:"google-signin-button",className:"flex justify-center mb-4"}),y.jsxs("div",{className:"relative my-6",children:[y.jsx("div",{className:"absolute inset-0 flex items-center",children:y.jsx("div",{className:"w-full border-t border-theme/20"})}),y.jsx("div",{className:"relative flex justify-center text-sm",children:y.jsx("span",{className:"px-2 bg-surface text-muted",children:"Or continue with email"})})]})]}),y.jsxs("form",{onSubmit:T,className:"space-y-4",children:[s==="signup"&&y.jsxs("div",{children:[y.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-theme mb-2",children:"Name (optional)"}),y.jsx("input",{id:"name",type:"text",value:p,onChange:M=>m(M.target.value),className:"w-full px-4 py-2 bg-theme/5 border border-theme/20 rounded-lg text-theme placeholder-muted focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent",placeholder:"John Doe"})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-theme mb-2",children:"Email"}),y.jsx("input",{id:"email",type:"email",value:l,onChange:M=>u(M.target.value),required:!0,className:"w-full px-4 py-2 bg-theme/5 border border-theme/20 rounded-lg text-theme placeholder-muted focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent",placeholder:"you@example.com"})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-theme mb-2",children:"Password"}),y.jsx("input",{id:"password",type:"password",value:d,onChange:M=>h(M.target.value),required:!0,minLength:6,className:"w-full px-4 py-2 bg-theme/5 border border-theme/20 rounded-lg text-theme placeholder-muted focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent",placeholder:""}),s==="signup"&&y.jsx("p",{className:"mt-1 text-xs text-muted",children:"Minimum 6 characters"})]}),y.jsx("button",{type:"submit",disabled:S,className:"w-full px-6 py-3 bg-[var(--brand)] text-white font-bold rounded-lg hover:brightness-95 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:S?"Please wait...":s==="login"?"Sign In":"Create Account"})]}),y.jsx("div",{className:"mt-6 text-center",children:y.jsxs("p",{className:"text-muted text-sm",children:[s==="login"?"Don't have an account?":"Already have an account?"," ",y.jsx("button",{type:"button",onClick:A,className:"text-[var(--brand)] font-medium hover:underline",children:s==="login"?"Sign up":"Sign in"})]})}),y.jsx("div",{className:"mt-6 p-3 bg-theme/5 rounded-lg",children:y.jsx("p",{className:"text-xs text-muted text-center",children:" Your designs are securely stored and only accessible to you"})})]})})}):null},P_=()=>{Wa();const e=Vd(),[t,n]=D.useState(!1),[r,i]=D.useState(!1),{user:s,isAuthenticated:o,login:l,signup:u,googleLogin:d,logout:h}=Cm(),[p,m]=D.useState(!1),[b,x]=D.useState(!1),[S,w]=D.useState([]),[C,N]=D.useState(!1);D.useEffect(()=>{n(!0)},[]),D.useEffect(()=>{const R=()=>{i(window.scrollY>100)};return window.addEventListener("scroll",R),()=>window.removeEventListener("scroll",R)},[]),D.useEffect(()=>{(async()=>{if(!o){w([]);return}N(!0);try{const L=await Gn.getUserDiagrams();w(L)}catch(L){console.error("Failed to load diagrams:",L)}finally{N(!1)}})()},[o]);const k=R=>{e(`/playground/free?diagramId=${R}`)},T=[{icon:"",title:"Practice Problems",description:"Master system design through curated problems with real-world scenarios",action:"Browse Problems",route:"/problems",gradient:"from-blue-500 to-cyan-500"},{icon:"",title:"Design Studio",description:"Create your own system designs from scratch. Perfect for planning your next project",action:"Start Designing",route:"/playground/free",gradient:"from-purple-500 to-pink-500"},{icon:"",title:"Custom Problems",description:"Bring your own problem statements and design solutions in an interactive environment",action:"Create Problem",route:"/create-problem",gradient:"from-orange-500 to-red-500"}],A=[{icon:"",title:"55+ Components",description:"Databases, APIs, caches, queues, and more"},{icon:"",title:"Smart Connections",description:"Define data flow and relationships visually"},{icon:"",title:"Custom Properties",description:"Add metadata to any component"},{icon:"",title:"AI Assessment",description:"Get feedback on your designs"},{icon:"",title:"Dark Mode",description:"Beautiful themes for any preference"},{icon:"",title:"Export & Share",description:"Save and share your designs"}],M=[{value:"55+",label:"Components",icon:""},{value:"1000+",label:"Users",icon:""},{value:"",label:"Possibilities",icon:""}],j=[{quote:"This tool transformed how I prepare for system design interviews.",author:"Software Engineer",role:"FAANG Company"},{quote:"Perfect for teaching distributed systems to my students.",author:"Professor",role:"University CS Dept"},{quote:"I use it daily to plan architecture for client projects.",author:"Solutions Architect",role:"Tech Consulting"}];return y.jsxs(y.Fragment,{children:[y.jsx(Fd,{title:"Diagrammatic  Interactive System Design Playground | Learn Architecture Design",description:"Master system design with Diagrammatic - an interactive playground featuring 55+ components, AI assessment, and real-world practice problems. Free system architecture tool for students, professionals, and educators.",keywords:"system design, architecture diagram, system design interview, software architecture, distributed systems, scalable architecture, system design tool, architecture playground, cloud architecture, microservices design",url:"https://satya00089.github.io/diagrammatic/"}),y.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[var(--surface)] via-[var(--bg)] to-[var(--surface)] text-theme relative grid-pattern-overlay",children:[y.jsxs("div",{className:"absolute inset-0 pointer-events-none opacity-[0.16] z-0 min-h-full",children:[y.jsxs("svg",{className:"absolute inset-0 w-full h-full",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",children:[y.jsx("line",{x1:"10%",y1:"15%",x2:"25%",y2:"15%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme",opacity:"0.6"}),y.jsx("line",{x1:"25%",y1:"15%",x2:"40%",y2:"25%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-200",opacity:"0.6"}),y.jsx("line",{x1:"40%",y1:"25%",x2:"60%",y2:"20%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-400",opacity:"0.6"}),y.jsx("line",{x1:"60%",y1:"20%",x2:"75%",y2:"25%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-600",opacity:"0.6"}),y.jsx("line",{x1:"75%",y1:"25%",x2:"90%",y2:"15%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-800",opacity:"0.6"}),y.jsx("line",{x1:"15%",y1:"40%",x2:"30%",y2:"45%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-300",opacity:"0.6"}),y.jsx("line",{x1:"30%",y1:"45%",x2:"50%",y2:"50%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-500",opacity:"0.6"}),y.jsx("line",{x1:"50%",y1:"50%",x2:"70%",y2:"45%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-700",opacity:"0.6"}),y.jsx("line",{x1:"70%",y1:"45%",x2:"85%",y2:"40%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-900",opacity:"0.6"}),y.jsx("line",{x1:"20%",y1:"70%",x2:"35%",y2:"75%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-400",opacity:"0.6"}),y.jsx("line",{x1:"35%",y1:"75%",x2:"50%",y2:"80%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-600",opacity:"0.6"}),y.jsx("line",{x1:"50%",y1:"80%",x2:"65%",y2:"75%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-800",opacity:"0.6"}),y.jsx("line",{x1:"65%",y1:"75%",x2:"80%",y2:"70%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-1000",opacity:"0.6"}),y.jsx("line",{x1:"25%",y1:"15%",x2:"30%",y2:"45%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-500",opacity:"0.6"}),y.jsx("line",{x1:"50%",y1:"20%",x2:"50%",y2:"50%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-700",opacity:"0.6"}),y.jsx("line",{x1:"75%",y1:"25%",x2:"70%",y2:"45%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-900",opacity:"0.6"}),y.jsx("line",{x1:"50%",y1:"50%",x2:"50%",y2:"80%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-1100",opacity:"0.6"})]}),y.jsx("div",{className:"absolute top-[15%] left-[10%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg",children:""}),y.jsx("div",{className:"absolute top-[15%] left-[25%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),y.jsx("div",{className:"absolute top-[25%] left-[40%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-300",children:""}),y.jsx("div",{className:"absolute top-[20%] left-[60%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),y.jsx("div",{className:"absolute top-[25%] left-[75%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-600",children:""}),y.jsx("div",{className:"absolute top-[15%] left-[90%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),y.jsx("div",{className:"absolute top-[40%] left-[15%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-400",children:""}),y.jsx("div",{className:"absolute top-[45%] left-[30%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),y.jsx("div",{className:"absolute top-[50%] left-[50%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float shadow-lg delay-500",children:""}),y.jsx("div",{className:"absolute top-[45%] left-[70%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),y.jsx("div",{className:"absolute top-[40%] left-[85%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-700",children:""}),y.jsx("div",{className:"absolute top-[69%] left-[17%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl shadow-lg",children:""}),y.jsx("div",{className:"absolute top-[75%] left-[35%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),y.jsx("div",{className:"absolute top-[80%] left-[48%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl shadow-lg",children:""}),y.jsx("div",{className:"absolute top-[74%] left-[65%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),y.jsx("div",{className:"absolute top-[70%] left-[79%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-1000",children:""})]}),y.jsx("header",{className:`fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-[var(--brand)] to-[var(--header-gradient-end)] transition-all duration-300 ${r?"shadow-lg":""}`,children:y.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:y.jsxs("div",{className:"flex items-center justify-between h-16",children:[y.jsxs("button",{type:"button",onClick:()=>e("/"),className:"flex items-center space-x-3 group cursor-pointer",children:[y.jsx("img",{src:"./logo.png",alt:"Logo",className:"h-10 transition-transform group-hover:scale-110 duration-300"}),y.jsx("span",{className:"text-xl font-bold text-white",children:"Diagrammatic"})]}),y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("button",{type:"button",onClick:()=>e("/problems"),className:"hidden md:block px-4 py-2 text-sm font-medium text-white hover:text-white/80 transition-colors cursor-pointer",children:"Problems"}),o&&y.jsx("button",{type:"button",onClick:()=>e("/diagrams"),className:"hidden md:block px-4 py-2 text-sm font-medium text-white hover:text-white/80 transition-colors cursor-pointer",children:"My Designs"}),y.jsx(Hd,{}),y.jsx("div",{className:"relative",children:o?y.jsxs(y.Fragment,{children:[y.jsxs("button",{type:"button",onClick:()=>x(!b),className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-white hover:bg-white/20 rounded-md transition-colors",children:[s?.picture?y.jsx("img",{src:s.picture,alt:s.name||"User",className:"w-8 h-8 rounded-full object-cover border-2 border-white/30"}):y.jsx("div",{className:"w-8 h-8 rounded-full bg-white/30 flex items-center justify-center font-bold",children:s?.name?.[0]?.toUpperCase()||s?.email?.[0]?.toUpperCase()||"U"}),y.jsx("span",{className:"hidden sm:inline",children:s?.name||s?.email}),y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),b&&y.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-[var(--surface)] shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[180px]",children:[y.jsxs("div",{className:"px-4 py-2 border-b border-theme/10",children:[y.jsx("p",{className:"text-sm font-medium text-theme",children:s?.name||"User"}),y.jsx("p",{className:"text-xs text-muted truncate",children:s?.email})]}),y.jsx("button",{type:"button",onClick:()=>{h(),x(!1)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:"Sign Out"})]})]}):y.jsx("button",{type:"button",onClick:()=>m(!0),className:"px-4 py-2 text-sm font-medium bg-white/20 text-white rounded-md hover:bg-white/30 transition-colors",children:"Sign In"})})]})]})})}),y.jsx("section",{className:"relative pt-16 pb-20",children:y.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-[var(--brand)] to-[var(--accent)]",children:[y.jsxs("div",{className:"absolute inset-0 opacity-10 pointer-events-none",children:[y.jsxs("svg",{className:"absolute inset-0 w-full h-full",xmlns:"http://www.w3.org/2000/svg",children:[y.jsx("line",{x1:"10%",y1:"20%",x2:"30%",y2:"40%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse",opacity:"0.6"}),y.jsx("line",{x1:"30%",y1:"40%",x2:"50%",y2:"30%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-500",opacity:"0.6"}),y.jsx("line",{x1:"50%",y1:"30%",x2:"70%",y2:"45%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-1000",opacity:"0.6"}),y.jsx("line",{x1:"70%",y1:"45%",x2:"90%",y2:"25%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-1500",opacity:"0.6"}),y.jsx("line",{x1:"30%",y1:"40%",x2:"50%",y2:"70%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-700",opacity:"0.6"}),y.jsx("line",{x1:"50%",y1:"70%",x2:"70%",y2:"45%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-1200",opacity:"0.6"})]}),y.jsx("div",{className:"absolute top-[20%] left-[10%] w-16 h-16 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg",children:""}),y.jsx("div",{className:"absolute top-[40%] left-[30%] w-20 h-20 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),y.jsx("div",{className:"absolute top-[30%] left-[50%] w-16 h-16 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-500",children:""}),y.jsx("div",{className:"absolute top-[45%] left-[70%] w-20 h-20 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),y.jsx("div",{className:"absolute top-[25%] left-[90%] w-16 h-16 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-1000",children:""}),y.jsx("div",{className:"absolute top-[70%] left-[50%] w-16 h-16 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float-delayed shadow-lg delay-300",children:""})]}),y.jsx("div",{className:"absolute inset-0 opacity-[0.03] hero-grid-overlay"}),y.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 md:py-24",children:y.jsxs("div",{className:`relative z-10 text-center transition-all duration-1000 ${t?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:[y.jsx("div",{className:"inline-block mb-6",children:y.jsx("span",{className:"px-4 py-2 bg-white/20 backdrop-blur-sm text-white text-sm font-semibold rounded-full shadow-lg",children:" Now with 55+ Components & AI Assessment"})}),y.jsxs("h1",{className:"text-5xl md:text-7xl font-bold mb-6 leading-tight text-white",children:[y.jsx("span",{className:"inline-block animate-gradient bg-gradient-to-r from-white via-white/90 to-white bg-clip-text",children:"System Design"}),y.jsx("br",{}),y.jsx("span",{className:"text-white/95",children:"Visually, Intuitively"})]}),y.jsx("p",{className:"text-xl md:text-2xl text-white/90 max-w-3xl mx-auto mb-8 leading-relaxed",children:"The interactive playground for system design  practice, learn, and create architecture diagrams with ease"}),y.jsx("div",{className:"flex flex-wrap justify-center gap-8 mb-12",children:M.map((R,L)=>y.jsxs("div",{className:`text-center transition-all duration-500 bg-white/10 backdrop-blur-sm rounded-2xl px-6 py-4 hover:bg-white/20 hover:scale-105 ${t?"fade-in-up":"opacity-0 translate-y-5"} ${L===0?"fade-in-up-delay-100":L===1?"fade-in-up-delay-200":"fade-in-up-delay-300"}`,children:[y.jsx("div",{className:"text-3xl mb-1",children:R.icon}),y.jsx("div",{className:"text-3xl font-bold text-white",children:R.value}),y.jsx("div",{className:"text-sm text-white/80",children:R.label})]},R.label))}),y.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[y.jsxs("button",{type:"button",onClick:()=>e("/playground/free"),className:"group relative px-8 py-4 bg-white text-[var(--brand)] text-lg font-bold rounded-xl hover:shadow-2xl hover:scale-105 transition-all duration-300 cursor-pointer overflow-hidden",children:[y.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:["Get Started Free"," ",y.jsx("span",{className:"group-hover:translate-x-1 transition-transform",children:""})]}),y.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white to-white/90 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),y.jsxs("button",{type:"button",onClick:()=>e("/problems"),className:"group px-8 py-4 bg-white/10 backdrop-blur-sm border-2 border-white/30 text-white text-lg font-semibold rounded-xl hover:bg-white/20 hover:border-white/50 hover:scale-105 transition-all duration-300 cursor-pointer",children:["Explore Problems"," ",y.jsx("span",{className:"inline-block group-hover:translate-x-1 transition-transform",children:""})]})]}),y.jsx("p",{className:"mt-6 text-sm text-white/80",children:"No signup required  Free forever  55+ components"})]})})]})}),o&&y.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-transparent via-surface/20 to-transparent relative",children:y.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[y.jsxs("div",{className:"flex items-center justify-between mb-8",children:[y.jsxs("div",{children:[y.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-2",children:"My Designs"}),y.jsx("p",{className:"text-muted text-lg",children:"Your saved system design projects"})]}),y.jsxs("div",{className:"flex items-center gap-3",children:[S.length>0&&y.jsx("button",{type:"button",onClick:()=>e("/diagrams"),className:"px-5 py-2.5 text-sm font-medium text-theme hover:text-[var(--brand)] transition-colors",children:"View All"}),y.jsxs("button",{type:"button",onClick:()=>e("/playground/free"),className:"px-6 py-3 bg-[var(--brand)] text-white font-semibold rounded-lg hover:brightness-95 transition-all flex items-center gap-2",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Design"]})]})]}),C?y.jsx("div",{className:"flex items-center justify-center py-20",children:y.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[var(--brand)]"})}):S.length===0?y.jsxs("div",{className:"text-center py-20 backdrop-blur-md rounded-3xl shadow-[0_8px_30px_rgba(0,0,0,0.12)] p-12 elevated-card-bg",children:[y.jsx("div",{className:"text-6xl mb-4",children:""}),y.jsx("h3",{className:"text-xl font-semibold text-theme mb-2",children:"No designs yet"}),y.jsx("p",{className:"text-muted mb-6",children:"Start creating your first system design project"}),y.jsx("button",{type:"button",onClick:()=>e("/playground/free"),className:"px-6 py-3 bg-[var(--brand)] text-white font-semibold rounded-lg hover:brightness-95 transition-all",children:"Create Your First Design"})]}):y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:S.slice(0,6).map(R=>y.jsxs("div",{onClick:()=>k(R.id),className:"group backdrop-blur-md rounded-2xl shadow-[0_4px_20px_rgba(0,0,0,0.08)] p-6 hover:shadow-[0_12px_40px_rgba(0,0,0,0.15)] transition-all duration-300 hover:-translate-y-1 cursor-pointer elevated-card-bg",children:[y.jsxs("div",{className:"flex items-start justify-between mb-4",children:[y.jsxs("div",{className:"flex-1",children:[y.jsx("h3",{className:"text-lg font-semibold text-theme group-hover:text-[var(--brand)] transition-colors mb-1 line-clamp-1",children:R.title}),!R.isOwner&&y.jsxs("div",{className:"mb-2 flex items-center gap-2 flex-wrap",children:[y.jsxs("div",{className:"group/owner relative overflow-hidden rounded-lg bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 px-2.5 py-1.5 border border-purple-200/60 dark:border-purple-700/40 hover:border-purple-300 dark:hover:border-purple-600 transition-all duration-300 inline-flex items-center gap-2",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-400/0 via-blue-400/10 to-purple-400/0 opacity-0 group-hover/owner:opacity-100 transition-opacity duration-500"}),y.jsxs("div",{className:"relative flex items-center gap-1.5",children:[y.jsxs("div",{className:"relative flex-shrink-0",children:[R.owner.pictureUrl?y.jsx("img",{src:R.owner.pictureUrl,alt:R.owner.name,className:"w-5 h-5 rounded-full object-cover ring-1 ring-purple-300 dark:ring-purple-600"}):y.jsx("div",{className:"w-5 h-5 rounded-full bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center text-[9px] text-white font-bold",children:R.owner.name[0]?.toUpperCase()}),y.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-2 h-2 bg-green-500 rounded-full border border-white dark:border-gray-900"})]}),y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-2.5 w-2.5 text-purple-600 dark:text-purple-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})}),y.jsx("span",{className:"text-xs font-bold text-purple-800 dark:text-purple-300",children:R.owner.name})]})]})]}),y.jsxs("div",{className:`inline-flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg font-bold text-xs shadow-sm transition-all duration-300 ${R.permission==="edit"?"bg-gradient-to-r from-emerald-500 to-green-600 text-white hover:shadow-md hover:shadow-emerald-500/30":"bg-gradient-to-r from-slate-400 to-gray-500 text-white hover:shadow-md hover:shadow-slate-400/30"}`,children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:R.permission==="edit"?y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"}):y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})}),y.jsx("span",{children:R.permission==="edit"?"Can Edit":"View Only"})]})]}),R.description&&y.jsx("p",{className:"text-sm text-muted line-clamp-2",children:R.description})]}),y.jsx("div",{className:"text-3xl ml-2",children:""})]}),y.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted mb-4",children:[y.jsxs("span",{className:"flex items-center gap-1",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})}),R.nodes.length," node",R.nodes.length!==1?"s":""]}),y.jsxs("span",{className:"flex items-center gap-1",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),R.edges.length," connection",R.edges.length!==1?"s":""]})]}),y.jsxs("div",{className:"text-xs text-muted",children:["Updated"," ",new Date(R.updatedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]},R.id))})]})}),y.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 relative",children:y.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[y.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-4",children:"Choose Your Path"}),y.jsx("p",{className:"text-muted text-center mb-16 text-lg max-w-2xl mx-auto",children:"Whether you're learning, building, or teaching  we've got you covered"}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:T.map((R,L)=>y.jsxs("div",{className:`group relative backdrop-blur-md rounded-3xl shadow-[0_8px_30px_rgba(0,0,0,0.12)] p-8 hover:shadow-[0_20px_60px_rgba(0,0,0,0.25)] hover:scale-[1.02] cursor-pointer overflow-hidden transition-all duration-500 elevated-card-bg ${L===0?"delay-0":L===1?"delay-100":"delay-200"}`,onClick:()=>e(R.route),onKeyDown:I=>I.key==="Enter"&&e(R.route),role:"button",tabIndex:0,children:[y.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${R.gradient} opacity-0 group-hover:opacity-[0.03] transition-opacity duration-500`}),y.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-3xl opacity-0 group-hover:opacity-20 blur-xl transition-opacity duration-500"}),y.jsxs("div",{className:"relative z-10",children:[y.jsx("div",{className:"text-6xl mb-6 transform group-hover:scale-110 transition-transform duration-300",children:R.icon}),y.jsx("h3",{className:"text-2xl font-bold mb-4 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:R.title}),y.jsx("p",{className:"text-muted mb-8 leading-relaxed text-[15px]",children:R.description}),y.jsxs("div",{className:"inline-flex items-center gap-2 text-[var(--brand)] font-semibold text-sm group-hover:gap-3 transition-all duration-300",children:[R.action,y.jsx("span",{className:"text-lg group-hover:translate-x-1 transition-transform duration-300",children:""})]})]})]},R.title))})]})}),y.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-transparent via-surface/30 to-transparent relative",children:y.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[y.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-4",children:"Powerful Features"}),y.jsx("p",{className:"text-muted text-center mb-16 text-lg max-w-2xl mx-auto",children:"Everything you need to design, document, and share system architectures"}),y.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:A.map((R,L)=>y.jsxs("div",{className:`group backdrop-blur-md rounded-2xl shadow-[0_4px_20px_rgba(0,0,0,0.08)] p-6 hover:shadow-[0_12px_40px_rgba(0,0,0,0.15)] transition-all duration-300 hover:-translate-y-1 elevated-card-bg ${L===0?"delay-0":L===1?"delay-[50ms]":L===2?"delay-[100ms]":L===3?"delay-[150ms]":L===4?"delay-[200ms]":"delay-[250ms]"}`,children:[y.jsx("div",{className:"text-4xl mb-4 transform group-hover:scale-110 group-hover:rotate-6 transition-all duration-300",children:R.icon}),y.jsx("h3",{className:"text-lg font-semibold mb-2 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:R.title}),y.jsx("p",{className:"text-muted text-sm leading-relaxed",children:R.description})]},R.title))})]})}),y.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 relative",children:y.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[y.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-4",children:"Loved by Designers Worldwide"}),y.jsx("p",{className:"text-muted text-center mb-16 text-lg max-w-2xl mx-auto",children:"Join thousands who trust Diagrammatic for their system design needs"}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:j.map((R,L)=>y.jsxs("div",{className:"group relative backdrop-blur-md rounded-3xl shadow-[0_8px_30px_rgba(0,0,0,0.12)] p-8 hover:shadow-[0_20px_60px_rgba(0,0,0,0.2)] transition-all duration-500 hover:-translate-y-2 elevated-card-bg",children:[y.jsx("div",{className:"absolute top-6 right-6 text-7xl text-[var(--brand)]/5 font-serif leading-none",children:'"'}),y.jsxs("div",{className:"relative z-10",children:[y.jsx("div",{className:"text-5xl mb-6 text-[var(--brand)]/20 font-serif",children:'"'}),y.jsx("p",{className:"text-theme mb-8 leading-relaxed text-[15px] italic",children:R.quote}),y.jsxs("div",{className:"flex items-center gap-4",children:[y.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-[var(--brand)] to-[var(--accent)] flex items-center justify-center text-white font-bold text-lg shadow-lg group-hover:scale-110 transition-transform duration-300",children:R.author.charAt(0)}),y.jsxs("div",{children:[y.jsx("div",{className:"font-semibold text-theme",children:R.author}),y.jsx("div",{className:"text-muted text-sm",children:R.role})]})]})]})]},`testimonial-${L}`))})]})}),y.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-transparent via-surface/20 to-transparent relative",children:y.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[y.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-16",children:"Perfect For Every Role"}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-10",children:[y.jsxs("div",{className:"group text-center p-8 rounded-3xl hover:elevated-card-bg hover:backdrop-blur-md hover:shadow-[0_20px_60px_rgba(0,0,0,0.15)] transition-all duration-500 hover:-translate-y-2",role:"button",tabIndex:0,children:[y.jsxs("div",{className:"relative inline-block mb-6",children:[y.jsx("div",{className:"absolute inset-0 gradient-icon-blue-cyan rounded-full blur-xl opacity-50 group-hover:opacity-70 transition-opacity duration-500"}),y.jsx("div",{className:"relative w-20 h-20 mx-auto gradient-icon-blue-cyan rounded-full flex items-center justify-center text-4xl shadow-lg group-hover:scale-110 group-hover:rotate-12 transition-all duration-500",children:""})]}),y.jsx("h3",{className:"text-2xl font-bold mb-4 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:"Students"}),y.jsx("p",{className:"text-muted leading-relaxed mb-6",children:"Learn system design concepts through hands-on practice with real-world problems"}),y.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-[var(--brand)] font-semibold opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-2 group-hover:translate-y-0",children:["Start practicing"," ",y.jsx("span",{className:"group-hover:translate-x-1 transition-transform duration-300",children:""})]})]}),y.jsxs("div",{className:"group text-center p-8 rounded-3xl hover:elevated-card-bg hover:backdrop-blur-md hover:shadow-[0_20px_60px_rgba(0,0,0,0.15)] transition-all duration-500 hover:-translate-y-2",role:"button",tabIndex:0,children:[y.jsxs("div",{className:"relative inline-block mb-6",children:[y.jsx("div",{className:"absolute inset-0 gradient-icon-purple-pink rounded-full blur-xl opacity-50 group-hover:opacity-70 transition-opacity duration-500"}),y.jsx("div",{className:"relative w-20 h-20 mx-auto gradient-icon-purple-pink rounded-full flex items-center justify-center text-4xl shadow-lg group-hover:scale-110 group-hover:rotate-12 transition-all duration-500",children:""})]}),y.jsx("h3",{className:"text-2xl font-bold mb-4 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:"Professionals"}),y.jsx("p",{className:"text-muted leading-relaxed mb-6",children:"Plan and document architecture for your projects with a visual approach"}),y.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-[var(--brand)] font-semibold opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-2 group-hover:translate-y-0",children:["Start designing"," ",y.jsx("span",{className:"group-hover:translate-x-1 transition-transform duration-300",children:""})]})]}),y.jsxs("div",{className:"group text-center p-8 rounded-3xl hover:elevated-card-bg hover:backdrop-blur-md hover:shadow-[0_20px_60px_rgba(0,0,0,0.15)] transition-all duration-500 hover:-translate-y-2",role:"button",tabIndex:0,children:[y.jsxs("div",{className:"relative inline-block mb-6",children:[y.jsx("div",{className:"absolute inset-0 gradient-icon-orange-red rounded-full blur-xl opacity-50 group-hover:opacity-70 transition-opacity duration-500"}),y.jsx("div",{className:"relative w-20 h-20 mx-auto gradient-icon-orange-red rounded-full flex items-center justify-center text-4xl shadow-lg group-hover:scale-110 group-hover:rotate-12 transition-all duration-500",children:""})]}),y.jsx("h3",{className:"text-2xl font-bold mb-4 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:"Educators"}),y.jsx("p",{className:"text-muted leading-relaxed mb-6",children:"Create custom problems and assignments for your students to solve"}),y.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-[var(--brand)] font-semibold opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-2 group-hover:translate-y-0",children:["Create problem"," ",y.jsx("span",{className:"group-hover:translate-x-1 transition-transform duration-300",children:""})]})]})]})]})}),y.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 relative",children:y.jsxs("div",{className:"max-w-4xl mx-auto text-center bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-3xl p-12 relative overflow-hidden",children:[y.jsx("div",{className:"absolute top-0 left-0 w-40 h-40 bg-white/10 rounded-full -translate-x-1/2 -translate-y-1/2"}),y.jsx("div",{className:"absolute bottom-0 right-0 w-60 h-60 bg-white/10 rounded-full translate-x-1/3 translate-y-1/3"}),y.jsxs("div",{className:"relative z-10",children:[y.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-4",children:"Ready to Start Designing?"}),y.jsx("p",{className:"text-white/90 text-lg mb-8 max-w-2xl mx-auto",children:"Join thousands of developers and architects who trust Diagrammatic for their system design needs"}),y.jsx("button",{type:"button",onClick:()=>e("/playground/free"),className:"px-8 py-4 bg-white text-[var(--brand)] text-lg font-bold rounded-xl hover:shadow-2xl hover:scale-105 transition-all duration-300 cursor-pointer",children:"Launch Free Canvas"})]})]})}),y.jsx("footer",{className:"py-12 px-4 sm:px-6 lg:px-8 shadow-[0_-4px_20px_rgba(0,0,0,0.08)]",children:y.jsx("div",{className:"max-w-7xl mx-auto",children:y.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[y.jsxs("div",{className:"flex items-center space-x-3",children:[y.jsx("img",{src:"./logo.png",alt:"Logo",className:"h-8"}),y.jsx("span",{className:"font-semibold text-theme",children:"Diagrammatic"})]}),y.jsx("p",{className:"text-muted text-sm",children:" 2025 Diagrammatic. Built with  for system designers"})]})})}),y.jsx("style",{children:`
        @keyframes gradient {
          0%, 100% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
        }
        .animate-gradient {
          background-size: 200% auto;
          animation: gradient 3s ease infinite;
        }
        @keyframes float {
          0%, 100% { transform: translateY(0px) rotate(0deg); }
          50% { transform: translateY(-20px) rotate(5deg); }
        }
        .animate-float {
          animation: float 6s ease-in-out infinite;
        }
        .animate-float-delayed {
          animation: float 8s ease-in-out infinite;
          animation-delay: 1s;
        }
      `}),p&&y.jsx(Dm,{isOpen:p,onClose:()=>m(!1),onLogin:async(R,L)=>{await l({email:R,password:L})},onSignup:async(R,L,I)=>{await u({email:R,password:L,name:I})},onGoogleLogin:async R=>{await d(R)}})]})]})};function Is(e){return Array.isArray?Array.isArray(e):JI(e)==="[object Array]"}function hK(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function pK(e){return e==null?"":hK(e)}function Yi(e){return typeof e=="string"}function XI(e){return typeof e=="number"}function mK(e){return e===!0||e===!1||gK(e)&&JI(e)=="[object Boolean]"}function ZI(e){return typeof e=="object"}function gK(e){return ZI(e)&&e!==null}function Hr(e){return e!=null}function K0(e){return!e.trim().length}function JI(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const yK="Incorrect 'index' type",bK=e=>`Invalid value for key ${e}`,vK=e=>`Pattern length exceeds max of ${e}.`,xK=e=>`Missing ${e} property in key`,wK=e=>`Property 'weight' in key '${e}' must be a positive integer`,I_=Object.prototype.hasOwnProperty;class SK{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(r=>{let i=QI(r);this._keys.push(i),this._keyMap[i.id]=i,n+=i.weight}),this._keys.forEach(r=>{r.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function QI(e){let t=null,n=null,r=null,i=1,s=null;if(Yi(e)||Is(e))r=e,t=B_(e),n=ME(e);else{if(!I_.call(e,"name"))throw new Error(xK("name"));const o=e.name;if(r=o,I_.call(e,"weight")&&(i=e.weight,i<=0))throw new Error(wK(o));t=B_(o),n=ME(o),s=e.getFn}return{path:t,id:n,weight:i,src:r,getFn:s}}function B_(e){return Is(e)?e:e.split(".")}function ME(e){return Is(e)?e.join("."):e}function EK(e,t){let n=[],r=!1;const i=(s,o,l)=>{if(Hr(s))if(!o[l])n.push(s);else{let u=o[l];const d=s[u];if(!Hr(d))return;if(l===o.length-1&&(Yi(d)||XI(d)||mK(d)))n.push(pK(d));else if(Is(d)){r=!0;for(let h=0,p=d.length;h<p;h+=1)i(d[h],o,l+1)}else o.length&&i(d,o,l+1)}};return i(e,Yi(t)?t.split("."):t,0),r?n:n[0]}const CK={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},kK={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},TK={location:0,threshold:.6,distance:100},NK={useExtendedSearch:!1,getFn:EK,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var We={...kK,...CK,...TK,...NK};const AK=/[^ ]+/g;function MK(e=1,t=3){const n=new Map,r=Math.pow(10,t);return{get(i){const s=i.match(AK).length;if(n.has(s))return n.get(s);const o=1/Math.pow(s,.5*e),l=parseFloat(Math.round(o*r)/r);return n.set(s,l),l},clear(){n.clear()}}}class pk{constructor({getFn:t=We.getFn,fieldNormWeight:n=We.fieldNormWeight}={}){this.norm=MK(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Yi(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();Yi(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!Hr(t)||K0(t))return;let r={v:t,i:n,n:this.norm.get(t)};this.records.push(r)}_addObject(t,n){let r={i:n,$:{}};this.keys.forEach((i,s)=>{let o=i.getFn?i.getFn(t):this.getFn(t,i.path);if(Hr(o)){if(Is(o)){let l=[];const u=[{nestedArrIndex:-1,value:o}];for(;u.length;){const{nestedArrIndex:d,value:h}=u.pop();if(Hr(h))if(Yi(h)&&!K0(h)){let p={v:h,i:d,n:this.norm.get(h)};l.push(p)}else Is(h)&&h.forEach((p,m)=>{u.push({nestedArrIndex:m,value:p})})}r.$[s]=l}else if(Yi(o)&&!K0(o)){let l={v:o,n:this.norm.get(o)};r.$[s]=l}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function e6(e,t,{getFn:n=We.getFn,fieldNormWeight:r=We.fieldNormWeight}={}){const i=new pk({getFn:n,fieldNormWeight:r});return i.setKeys(e.map(QI)),i.setSources(t),i.create(),i}function _K(e,{getFn:t=We.getFn,fieldNormWeight:n=We.fieldNormWeight}={}){const{keys:r,records:i}=e,s=new pk({getFn:t,fieldNormWeight:n});return s.setKeys(r),s.setIndexRecords(i),s}function Sh(e,{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:i=We.distance,ignoreLocation:s=We.ignoreLocation}={}){const o=t/e.length;if(s)return o;const l=Math.abs(r-n);return i?o+l/i:l?1:o}function DK(e=[],t=We.minMatchCharLength){let n=[],r=-1,i=-1,s=0;for(let o=e.length;s<o;s+=1){let l=e[s];l&&r===-1?r=s:!l&&r!==-1&&(i=s-1,i-r+1>=t&&n.push([r,i]),r=-1)}return e[s-1]&&s-r>=t&&n.push([r,s-1]),n}const ga=32;function RK(e,t,n,{location:r=We.location,distance:i=We.distance,threshold:s=We.threshold,findAllMatches:o=We.findAllMatches,minMatchCharLength:l=We.minMatchCharLength,includeMatches:u=We.includeMatches,ignoreLocation:d=We.ignoreLocation}={}){if(t.length>ga)throw new Error(vK(ga));const h=t.length,p=e.length,m=Math.max(0,Math.min(r,p));let b=s,x=m;const S=l>1||u,w=S?Array(p):[];let C;for(;(C=e.indexOf(t,x))>-1;){let j=Sh(t,{currentLocation:C,expectedLocation:m,distance:i,ignoreLocation:d});if(b=Math.min(j,b),x=C+h,S){let R=0;for(;R<h;)w[C+R]=1,R+=1}}x=-1;let N=[],k=1,T=h+p;const A=1<<h-1;for(let j=0;j<h;j+=1){let R=0,L=T;for(;R<L;)Sh(t,{errors:j,currentLocation:m+L,expectedLocation:m,distance:i,ignoreLocation:d})<=b?R=L:T=L,L=Math.floor((T-R)/2+R);T=L;let I=Math.max(1,m-L+1),H=o?p:Math.min(m+L,p)+h,q=Array(H+2);q[H+1]=(1<<j)-1;for(let z=H;z>=I;z-=1){let F=z-1,O=n[e.charAt(F)];if(S&&(w[F]=+!!O),q[z]=(q[z+1]<<1|1)&O,j&&(q[z]|=(N[z+1]|N[z])<<1|1|N[z+1]),q[z]&A&&(k=Sh(t,{errors:j,currentLocation:F,expectedLocation:m,distance:i,ignoreLocation:d}),k<=b)){if(b=k,x=F,x<=m)break;I=Math.max(1,2*m-x)}}if(Sh(t,{errors:j+1,currentLocation:m,expectedLocation:m,distance:i,ignoreLocation:d})>b)break;N=q}const M={isMatch:x>=0,score:Math.max(.001,k)};if(S){const j=DK(w,l);j.length?u&&(M.indices=j):M.isMatch=!1}return M}function jK(e){let t={};for(let n=0,r=e.length;n<r;n+=1){const i=e.charAt(n);t[i]=(t[i]||0)|1<<r-n-1}return t}const gp=String.prototype.normalize?(e=>e.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,"")):(e=>e);class t6{constructor(t,{location:n=We.location,threshold:r=We.threshold,distance:i=We.distance,includeMatches:s=We.includeMatches,findAllMatches:o=We.findAllMatches,minMatchCharLength:l=We.minMatchCharLength,isCaseSensitive:u=We.isCaseSensitive,ignoreDiacritics:d=We.ignoreDiacritics,ignoreLocation:h=We.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:u,ignoreDiacritics:d,ignoreLocation:h},t=u?t:t.toLowerCase(),t=d?gp(t):t,this.pattern=t,this.chunks=[],!this.pattern.length)return;const p=(b,x)=>{this.chunks.push({pattern:b,alphabet:jK(b),startIndex:x})},m=this.pattern.length;if(m>ga){let b=0;const x=m%ga,S=m-x;for(;b<S;)p(this.pattern.substr(b,ga),b),b+=ga;if(x){const w=m-ga;p(this.pattern.substr(w),w)}}else p(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,ignoreDiacritics:r,includeMatches:i}=this.options;if(t=n?t:t.toLowerCase(),t=r?gp(t):t,this.pattern===t){let S={isMatch:!0,score:0};return i&&(S.indices=[[0,t.length-1]]),S}const{location:s,distance:o,threshold:l,findAllMatches:u,minMatchCharLength:d,ignoreLocation:h}=this.options;let p=[],m=0,b=!1;this.chunks.forEach(({pattern:S,alphabet:w,startIndex:C})=>{const{isMatch:N,score:k,indices:T}=RK(t,S,w,{location:s+C,distance:o,threshold:l,findAllMatches:u,minMatchCharLength:d,includeMatches:i,ignoreLocation:h});N&&(b=!0),m+=k,N&&T&&(p=[...p,...T])});let x={isMatch:b,score:b?m/this.chunks.length:1};return b&&i&&(x.indices=p),x}}class Uo{constructor(t){this.pattern=t}static isMultiMatch(t){return z_(t,this.multiRegex)}static isSingleMatch(t){return z_(t,this.singleRegex)}search(){}}function z_(e,t){const n=e.match(t);return n?n[1]:null}class OK extends Uo{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class LK extends Uo{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const r=t.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class PK extends Uo{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class IK extends Uo{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class BK extends Uo{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class zK extends Uo{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class n6 extends Uo{constructor(t,{location:n=We.location,threshold:r=We.threshold,distance:i=We.distance,includeMatches:s=We.includeMatches,findAllMatches:o=We.findAllMatches,minMatchCharLength:l=We.minMatchCharLength,isCaseSensitive:u=We.isCaseSensitive,ignoreDiacritics:d=We.ignoreDiacritics,ignoreLocation:h=We.ignoreLocation}={}){super(t),this._bitapSearch=new t6(t,{location:n,threshold:r,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:u,ignoreDiacritics:d,ignoreLocation:h})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class r6 extends Uo{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,r;const i=[],s=this.pattern.length;for(;(r=t.indexOf(this.pattern,n))>-1;)n=r+s,i.push([r,n-1]);const o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}const _E=[OK,r6,PK,IK,zK,BK,LK,n6],q_=_E.length,qK=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,VK="|";function HK(e,t={}){return e.split(VK).map(n=>{let r=n.trim().split(qK).filter(s=>s&&!!s.trim()),i=[];for(let s=0,o=r.length;s<o;s+=1){const l=r[s];let u=!1,d=-1;for(;!u&&++d<q_;){const h=_E[d];let p=h.isMultiMatch(l);p&&(i.push(new h(p,t)),u=!0)}if(!u)for(d=-1;++d<q_;){const h=_E[d];let p=h.isSingleMatch(l);if(p){i.push(new h(p,t));break}}}return i})}const FK=new Set([n6.type,r6.type]);class UK{constructor(t,{isCaseSensitive:n=We.isCaseSensitive,ignoreDiacritics:r=We.ignoreDiacritics,includeMatches:i=We.includeMatches,minMatchCharLength:s=We.minMatchCharLength,ignoreLocation:o=We.ignoreLocation,findAllMatches:l=We.findAllMatches,location:u=We.location,threshold:d=We.threshold,distance:h=We.distance}={}){this.query=null,this.options={isCaseSensitive:n,ignoreDiacritics:r,includeMatches:i,minMatchCharLength:s,findAllMatches:l,ignoreLocation:o,location:u,threshold:d,distance:h},t=n?t:t.toLowerCase(),t=r?gp(t):t,this.pattern=t,this.query=HK(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:i,ignoreDiacritics:s}=this.options;t=i?t:t.toLowerCase(),t=s?gp(t):t;let o=0,l=[],u=0;for(let d=0,h=n.length;d<h;d+=1){const p=n[d];l.length=0,o=0;for(let m=0,b=p.length;m<b;m+=1){const x=p[m],{isMatch:S,indices:w,score:C}=x.search(t);if(S){if(o+=1,u+=C,r){const N=x.constructor.type;FK.has(N)?l=[...l,...w]:l.push(w)}}else{u=0,o=0,l.length=0;break}}if(o){let m={isMatch:!0,score:u/o};return r&&(m.indices=l),m}}return{isMatch:!1,score:1}}}const DE=[];function $K(...e){DE.push(...e)}function RE(e,t){for(let n=0,r=DE.length;n<r;n+=1){let i=DE[n];if(i.condition(e,t))return new i(e,t)}return new t6(e,t)}const yp={AND:"$and",OR:"$or"},jE={PATH:"$path",PATTERN:"$val"},OE=e=>!!(e[yp.AND]||e[yp.OR]),GK=e=>!!e[jE.PATH],WK=e=>!Is(e)&&ZI(e)&&!OE(e),V_=e=>({[yp.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function i6(e,t,{auto:n=!0}={}){const r=i=>{let s=Object.keys(i);const o=GK(i);if(!o&&s.length>1&&!OE(i))return r(V_(i));if(WK(i)){const u=o?i[jE.PATH]:s[0],d=o?i[jE.PATTERN]:i[u];if(!Yi(d))throw new Error(bK(u));const h={keyId:ME(u),pattern:d};return n&&(h.searcher=RE(d,t)),h}let l={children:[],operator:s[0]};return s.forEach(u=>{const d=i[u];Is(d)&&d.forEach(h=>{l.children.push(r(h))})}),l};return OE(e)||(e=V_(e)),r(e)}function KK(e,{ignoreFieldNorm:t=We.ignoreFieldNorm}){e.forEach(n=>{let r=1;n.matches.forEach(({key:i,norm:s,score:o})=>{const l=i?i.weight:null;r*=Math.pow(o===0&&l?Number.EPSILON:o,(l||1)*(t?1:s))}),n.score=r})}function YK(e,t){const n=e.matches;t.matches=[],Hr(n)&&n.forEach(r=>{if(!Hr(r.indices)||!r.indices.length)return;const{indices:i,value:s}=r;let o={indices:i,value:s};r.key&&(o.key=r.key.src),r.idx>-1&&(o.refIndex=r.idx),t.matches.push(o)})}function XK(e,t){t.score=e.score}function ZK(e,t,{includeMatches:n=We.includeMatches,includeScore:r=We.includeScore}={}){const i=[];return n&&i.push(YK),r&&i.push(XK),e.map(s=>{const{idx:o}=s,l={item:t[o],refIndex:o};return i.length&&i.forEach(u=>{u(s,l)}),l})}class Ka{constructor(t,n={},r){this.options={...We,...n},this.options.useExtendedSearch,this._keyStore=new SK(this.options.keys),this.setCollection(t,r)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof pk))throw new Error(yK);this._myIndex=n||e6(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){Hr(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let r=0,i=this._docs.length;r<i;r+=1){const s=this._docs[r];t(s,r)&&(this.removeAt(r),r-=1,i-=1,n.push(s))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:r,includeScore:i,shouldSort:s,sortFn:o,ignoreFieldNorm:l}=this.options;let u=Yi(t)?Yi(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return KK(u,{ignoreFieldNorm:l}),s&&u.sort(o),XI(n)&&n>-1&&(u=u.slice(0,n)),ZK(u,this._docs,{includeMatches:r,includeScore:i})}_searchStringList(t){const n=RE(t,this.options),{records:r}=this._myIndex,i=[];return r.forEach(({v:s,i:o,n:l})=>{if(!Hr(s))return;const{isMatch:u,score:d,indices:h}=n.searchIn(s);u&&i.push({item:s,idx:o,matches:[{score:d,value:s,norm:l,indices:h}]})}),i}_searchLogical(t){const n=i6(t,this.options),r=(l,u,d)=>{if(!l.children){const{keyId:p,searcher:m}=l,b=this._findMatches({key:this._keyStore.get(p),value:this._myIndex.getValueForItemAtKeyId(u,p),searcher:m});return b&&b.length?[{idx:d,item:u,matches:b}]:[]}const h=[];for(let p=0,m=l.children.length;p<m;p+=1){const b=l.children[p],x=r(b,u,d);if(x.length)h.push(...x);else if(l.operator===yp.AND)return[]}return h},i=this._myIndex.records,s={},o=[];return i.forEach(({$:l,i:u})=>{if(Hr(l)){let d=r(n,l,u);d.length&&(s[u]||(s[u]={idx:u,item:l,matches:[]},o.push(s[u])),d.forEach(({matches:h})=>{s[u].matches.push(...h)}))}}),o}_searchObjectList(t){const n=RE(t,this.options),{keys:r,records:i}=this._myIndex,s=[];return i.forEach(({$:o,i:l})=>{if(!Hr(o))return;let u=[];r.forEach((d,h)=>{u.push(...this._findMatches({key:d,value:o[h],searcher:n}))}),u.length&&s.push({idx:l,item:o,matches:u})}),s}_findMatches({key:t,value:n,searcher:r}){if(!Hr(n))return[];let i=[];if(Is(n))n.forEach(({v:s,i:o,n:l})=>{if(!Hr(s))return;const{isMatch:u,score:d,indices:h}=r.searchIn(s);u&&i.push({score:d,key:t,value:s,idx:o,norm:l,indices:h})});else{const{v:s,n:o}=n,{isMatch:l,score:u,indices:d}=r.searchIn(s);l&&i.push({score:u,key:t,value:s,norm:o,indices:d})}return i}}Ka.version="7.1.0";Ka.createIndex=e6;Ka.parseIndex=_K;Ka.config=We;Ka.parseQuery=i6;$K(UK);const JK=()=>{Wa();const e=Vd(),[t,n]=D.useState("All"),[r,i]=D.useState("All"),[s,o]=D.useState(""),[l,u]=D.useState([]),[d,h]=D.useState(!0),[p,m]=D.useState(null),[b,x]=D.useState(!1),[S,w]=D.useState(!1),{user:C,isAuthenticated:N,login:k,signup:T,googleLogin:A,logout:M}=Cm();D.useEffect(()=>{(async()=>{try{h(!0),m(null);const W=await fetch("https://diagrammatic-api-production.up.railway.app/api/v1/all-problems");if(!W.ok)throw new Error(`Failed to fetch problems: ${W.status} ${W.statusText}`);const z=await W.json();u(z)}catch(q){m(q instanceof Error?q.message:"An error occurred while fetching problems"),console.error("Error fetching problems:",q)}finally{h(!1)}})()},[]);const j=D.useMemo(()=>{const H=s?.trim()??"";let q=l;return H.length>0&&(q=new Ka(l,{keys:[{name:"title",weight:.6},{name:"description",weight:.25},{name:"tags",weight:.15}],includeScore:!0,threshold:.45}).search(H).map(z=>z.item)),q.filter(W=>{const z=t==="All"||W.difficulty===t,F=r==="All"||W.category===r;return z&&F})},[t,r,s,l]),R=["All",...Array.from(new Set(l.map(H=>H.category)))],L=["All","Easy","Medium","Hard","Very Hard"],I=H=>{switch(H){case"Easy":return"bg-green-100 text-green-800";case"Medium":return"bg-yellow-100 text-yellow-800";case"Hard":return"bg-red-100 text-red-800";case"Very Hard":return"bg-orange-200 text-orange-800";default:return"bg-gray-100 text-gray-800"}};return y.jsxs(y.Fragment,{children:[y.jsx(Fd,{title:"System Design Practice Problems | Diagrammatic",description:"Browse and solve curated system design problems with real-world scenarios. Master distributed systems, scalable architectures, and ace your tech interviews with hands-on practice.",keywords:"system design problems, architecture challenges, distributed systems practice, system design interview prep, scalable architecture exercises",url:"https://satya00089.github.io/diagrammatic/#/problems"}),y.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[var(--surface)] via-[var(--bg)] to-[var(--surface)] text-theme relative grid-pattern-overlay",children:[y.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] transition-all duration-300",children:y.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:y.jsxs("div",{className:"flex items-center justify-between h-16",children:[y.jsxs("button",{type:"button",onClick:()=>e("/"),className:"flex items-center space-x-3 group cursor-pointer",children:[y.jsx("img",{src:"./logo.png",alt:"Logo",className:"h-10 transition-transform group-hover:scale-110 duration-300"}),y.jsx("span",{className:"text-xl font-bold text-white",children:"Diagrammatic"})]}),y.jsxs("div",{className:"flex items-center gap-4",children:[N&&y.jsx("button",{type:"button",onClick:()=>e("/diagrams"),className:"hidden md:block px-4 py-2 text-sm font-medium text-white hover:text-white/80 transition-colors cursor-pointer",children:"My Designs"}),y.jsx("div",{className:"hidden md:block text-sm text-white/90",children:d?"Loading...":`${j.length} problems available`}),y.jsx(Hd,{}),y.jsx("div",{className:"relative",children:N?y.jsxs(y.Fragment,{children:[y.jsxs("button",{type:"button",onClick:()=>x(!b),className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-white hover:bg-white/20 rounded-md transition-colors",children:[C?.picture?y.jsx("img",{src:C.picture,alt:C.name||"User",className:"w-8 h-8 rounded-full object-cover border-2 border-white/30"}):y.jsx("div",{className:"w-8 h-8 rounded-full bg-white/30 flex items-center justify-center font-bold",children:C?.name?.[0]?.toUpperCase()||C?.email?.[0]?.toUpperCase()||"U"}),y.jsx("span",{className:"hidden sm:inline",children:C?.name||C?.email}),y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),b&&y.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-[var(--surface)] shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[180px]",children:[y.jsxs("div",{className:"px-4 py-2 border-b border-theme/10",children:[y.jsx("p",{className:"text-sm font-medium text-theme",children:C?.name||"User"}),y.jsx("p",{className:"text-xs text-muted truncate",children:C?.email})]}),y.jsx("button",{type:"button",onClick:()=>{M(),x(!1)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:"Sign Out"})]})]}):y.jsx("button",{type:"button",onClick:()=>w(!0),className:"px-4 py-2 text-sm font-medium bg-white/20 text-white rounded-md hover:bg-white/30 transition-colors",children:"Sign In"})})]})]})})}),y.jsx("div",{className:"pt-16 relative z-10",children:y.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[y.jsxs("div",{className:"text-center mb-12",children:[y.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"System Design Problems"}),y.jsx("p",{className:"text-muted text-lg max-w-2xl mx-auto",children:"Master system design through interactive problem solving"})]}),d&&y.jsxs("div",{className:"text-center py-20",children:[y.jsx("div",{className:"inline-block w-16 h-16 border-4 border-[var(--brand)] border-t-transparent rounded-full animate-spin mb-4"}),y.jsx("div",{className:"text-theme text-xl mb-2",children:"Loading problems..."}),y.jsx("div",{className:"text-muted text-sm",children:"Please wait while we fetch the latest problems"})]}),p&&y.jsx("div",{className:"elevated-card-bg backdrop-blur-md rounded-2xl p-8 mb-6 border-2 border-red-500/20 shadow-lg max-w-2xl mx-auto",children:y.jsxs("div",{className:"text-center",children:[y.jsx("div",{className:"text-6xl mb-4",children:""}),y.jsx("div",{className:"text-theme text-xl font-semibold mb-2",children:"Error Loading Problems"}),y.jsx("div",{className:"text-muted text-sm mb-6",children:p}),y.jsx("button",{type:"button",onClick:()=>globalThis.location.reload(),className:"px-6 py-3 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white font-semibold rounded-xl hover:shadow-lg hover:scale-105 transition-all duration-300 cursor-pointer",children:"Retry"})]})}),!d&&!p&&y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"elevated-card-bg backdrop-blur-md rounded-2xl shadow-lg p-6 mb-8",children:y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[y.jsxs("div",{children:[y.jsx("label",{htmlFor:"search-input",className:"block text-sm font-semibold text-theme mb-2",children:" Search"}),y.jsx("input",{id:"search-input",type:"text",placeholder:"Search problems...",value:s,onChange:H=>o(H.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"difficulty-select",className:"block text-sm font-semibold text-theme mb-2",children:" Difficulty"}),y.jsx("select",{id:"difficulty-select",value:t,onChange:H=>n(H.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme appearance-none cursor-pointer transition-all duration-300 hover:border-[var(--brand)]/30",children:L.map(H=>y.jsx("option",{value:H,children:H},H))})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"category-select",className:"block text-sm font-semibold text-theme mb-2",children:" Category"}),y.jsx("select",{id:"category-select",value:r,onChange:H=>i(H.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme appearance-none cursor-pointer transition-all duration-300 hover:border-[var(--brand)]/30",children:R.map(H=>y.jsx("option",{value:H,children:H},H))})]})]})}),y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 pb-12",children:j.map((H,q)=>y.jsxs("div",{className:`group elevated-card-bg backdrop-blur-md rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-500 hover:-translate-y-2 overflow-hidden ${q===0?"delay-0":q===1?"delay-100":q===2?"delay-200":""}`,children:[y.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] rounded-2xl opacity-0 group-hover:opacity-20 blur-xl transition-opacity duration-500"}),y.jsxs("div",{className:"relative p-6",children:[y.jsxs("div",{className:"flex items-start justify-between mb-4",children:[y.jsx("h3",{className:"text-lg font-bold text-theme group-hover:text-[var(--brand)] transition-colors duration-300 line-clamp-2 flex-1",children:H.title}),y.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ml-2 ${I(H.difficulty)}`,children:H.difficulty})]}),y.jsx("p",{className:"text-muted text-sm mb-4 line-clamp-3 leading-relaxed",children:H.description}),y.jsxs("div",{className:"flex items-center justify-between text-sm text-muted mb-4 pb-4 border-b border-[var(--theme)]/10",children:[y.jsxs("span",{className:"flex items-center gap-1",children:[y.jsx("span",{children:""})," ",H.category]}),y.jsxs("span",{className:"flex items-center gap-1",children:[y.jsx("span",{children:""})," ",H.estimated_time]})]}),y.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[H.tags.slice(0,3).map(W=>y.jsx("span",{className:"px-3 py-1 bg-[var(--brand)]/10 text-[var(--brand)] text-xs font-semibold rounded-full",children:W},W)),H.tags.length>3&&y.jsxs("span",{className:"px-3 py-1 bg-[var(--theme)]/5 text-muted text-xs font-medium rounded-full",children:["+",H.tags.length-3," more"]})]}),y.jsx("button",{type:"button",onClick:W=>{W.stopPropagation(),e(`/playground/${H.id}`)},"aria-label":`Start ${H.title}`,className:"w-full px-6 py-3 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white font-semibold rounded-xl hover:shadow-lg hover:scale-105 transition-all duration-300 cursor-pointer group-hover:shadow-xl",children:"Start Problem "})]})]},H.id))}),j.length===0&&!d&&y.jsxs("div",{className:"text-center py-20",children:[y.jsx("div",{className:"text-7xl mb-6",children:""}),y.jsx("div",{className:"text-theme text-2xl font-bold mb-2",children:"No problems found"}),y.jsx("div",{className:"text-muted text-lg",children:"Try adjusting your filters or search terms"})]})]})]})})]}),S&&y.jsx(Dm,{isOpen:S,onClose:()=>w(!1),onLogin:async(H,q)=>{await k({email:H,password:q})},onSignup:async(H,q,W)=>{await T({email:H,password:q,name:W})},onGoogleLogin:async H=>{await A(H)}})]})};var Y0={exports:{}},X0={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var H_;function QK(){if(H_)return X0;H_=1;var e=zd();function t(p,m){return p===m&&(p!==0||1/p===1/m)||p!==p&&m!==m}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,i=e.useEffect,s=e.useLayoutEffect,o=e.useDebugValue;function l(p,m){var b=m(),x=r({inst:{value:b,getSnapshot:m}}),S=x[0].inst,w=x[1];return s(function(){S.value=b,S.getSnapshot=m,u(S)&&w({inst:S})},[p,b,m]),i(function(){return u(S)&&w({inst:S}),p(function(){u(S)&&w({inst:S})})},[p]),o(b),b}function u(p){var m=p.getSnapshot;p=p.value;try{var b=m();return!n(p,b)}catch{return!0}}function d(p,m){return m()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return X0.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:h,X0}var F_;function s6(){return F_||(F_=1,Y0.exports=QK()),Y0.exports}var o6=s6();function Un(e){this.content=e}Un.prototype={constructor:Un,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return t==-1?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,i=r.find(e),s=r.content.slice();return i==-1?s.push(n||e,t):(s[i+1]=t,n&&(s[i]=n)),new Un(s)},remove:function(e){var t=this.find(e);if(t==-1)return this;var n=this.content.slice();return n.splice(t,2),new Un(n)},addToStart:function(e,t){return new Un([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new Un(n)},addBefore:function(e,t,n){var r=this.remove(t),i=r.content.slice(),s=r.find(e);return i.splice(s==-1?i.length:s,0,t,n),new Un(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return e=Un.from(e),e.size?new Un(e.content.concat(this.subtract(e).content)):this},append:function(e){return e=Un.from(e),e.size?new Un(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=Un.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach(function(t,n){e[t]=n}),e},get size(){return this.content.length>>1}};Un.from=function(e){if(e instanceof Un)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new Un(t)};function a6(e,t,n){for(let r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;let i=e.child(r),s=t.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=a6(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function l6(e,t,n,r){for(let i=e.childCount,s=t.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=e.child(--i),l=t.child(--s),u=o.nodeSize;if(o==l){n-=u,r-=u;continue}if(!o.sameMarkup(l))return{a:n,b:r};if(o.isText&&o.text!=l.text){let d=0,h=Math.min(o.text.length,l.text.length);for(;d<h&&o.text[o.text.length-d-1]==l.text[l.text.length-d-1];)d++,n--,r--;return{a:n,b:r}}if(o.content.size||l.content.size){let d=l6(o.content,l.content,n-1,r-1);if(d)return d}n-=u,r-=u}}class ye{constructor(t,n){if(this.content=t,this.size=n||0,n==null)for(let r=0;r<t.length;r++)this.size+=t[r].nodeSize}nodesBetween(t,n,r,i=0,s){for(let o=0,l=0;l<n;o++){let u=this.content[o],d=l+u.nodeSize;if(d>t&&r(u,i+l,s||null,o)!==!1&&u.content.size){let h=l+1;u.nodesBetween(Math.max(0,t-h),Math.min(u.content.size,n-h),r,i+h)}l=d}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,n,r,i){let s="",o=!0;return this.nodesBetween(t,n,(l,u)=>{let d=l.isText?l.text.slice(Math.max(t,u)-u,n-u):l.isLeaf?i?typeof i=="function"?i(l):i:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&d||l.isTextblock)&&r&&(o?o=!1:s+=r),s+=d},0),s}append(t){if(!t.size)return this;if(!this.size)return t;let n=this.lastChild,r=t.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<t.content.length;s++)i.push(t.content[s]);return new ye(i,this.size+t.size)}cut(t,n=this.size){if(t==0&&n==this.size)return this;let r=[],i=0;if(n>t)for(let s=0,o=0;o<n;s++){let l=this.content[s],u=o+l.nodeSize;u>t&&((o<t||u>n)&&(l.isText?l=l.cut(Math.max(0,t-o),Math.min(l.text.length,n-o)):l=l.cut(Math.max(0,t-o-1),Math.min(l.content.size,n-o-1))),r.push(l),i+=l.nodeSize),o=u}return new ye(r,i)}cutByIndex(t,n){return t==n?ye.empty:t==0&&n==this.content.length?this:new ye(this.content.slice(t,n))}replaceChild(t,n){let r=this.content[t];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[t]=n,new ye(i,s)}addToStart(t){return new ye([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new ye(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(t.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let n=this.content[t];if(!n)throw new RangeError("Index "+t+" out of range for "+this);return n}maybeChild(t){return this.content[t]||null}forEach(t){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];t(i,r,n),r+=i.nodeSize}}findDiffStart(t,n=0){return a6(this,t,n)}findDiffEnd(t,n=this.size,r=t.size){return l6(this,t,n,r)}findIndex(t){if(t==0)return Eh(0,t);if(t==this.size)return Eh(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),s=r+i.nodeSize;if(s>=t)return s==t?Eh(n+1,s):Eh(n,r);r=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,n){if(!n)return ye.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new ye(n.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return ye.empty;let n,r=0;for(let i=0;i<t.length;i++){let s=t[i];r+=s.nodeSize,i&&s.isText&&t[i-1].sameMarkup(s)?(n||(n=t.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new ye(n||t,r)}static from(t){if(!t)return ye.empty;if(t instanceof ye)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new ye([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}ye.empty=new ye([],0);const Z0={index:0,offset:0};function Eh(e,t){return Z0.index=e,Z0.offset=t,Z0}function bp(e,t){if(e===t)return!0;if(!(e&&typeof e=="object")||!(t&&typeof t=="object"))return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!bp(e[r],t[r]))return!1}else{for(let r in e)if(!(r in t)||!bp(e[r],t[r]))return!1;for(let r in t)if(!(r in e))return!1}return!0}let kt=class LE{constructor(t,n){this.type=t,this.attrs=n}addToSet(t){let n,r=!1;for(let i=0;i<t.length;i++){let s=t[i];if(this.eq(s))return t;if(this.type.excludes(s.type))n||(n=t.slice(0,i));else{if(s.type.excludes(this.type))return t;!r&&s.type.rank>this.type.rank&&(n||(n=t.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=t.slice()),r||n.push(this),n}removeFromSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return t.slice(0,n).concat(t.slice(n+1));return t}isInSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return!0;return!1}eq(t){return this==t||this.type==t.type&&bp(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=t.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(t,n){if(t==n)return!0;if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].eq(n[r]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&t.length==0)return LE.none;if(t instanceof LE)return[t];let n=t.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};kt.none=[];class vp extends Error{}class Ne{constructor(t,n,r){this.content=t,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,n){let r=u6(this.content,t+this.openStart,n);return r&&new Ne(r,this.openStart,this.openEnd)}removeBetween(t,n){return new Ne(c6(this.content,t+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,n){if(!n)return Ne.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Ne(ye.fromJSON(t,n.content),r,i)}static maxOpen(t,n=!0){let r=0,i=0;for(let s=t.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=t.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new Ne(t,r,i)}}Ne.empty=new Ne(ye.empty,0,0);function c6(e,t,n){let{index:r,offset:i}=e.findIndex(t),s=e.maybeChild(r),{index:o,offset:l}=e.findIndex(n);if(i==t||s.isText){if(l!=n&&!e.child(o).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return e.replaceChild(r,s.copy(c6(s.content,t-i-1,n-i-1)))}function u6(e,t,n,r){let{index:i,offset:s}=e.findIndex(t),o=e.maybeChild(i);if(s==t||o.isText)return r&&!r.canReplace(i,i,n)?null:e.cut(0,t).append(n).append(e.cut(t));let l=u6(o.content,t-s-1,n,o);return l&&e.replaceChild(i,o.copy(l))}function eY(e,t,n){if(n.openStart>e.depth)throw new vp("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new vp("Inconsistent open depths");return d6(e,t,n,0)}function d6(e,t,n,r){let i=e.index(r),s=e.node(r);if(i==t.index(r)&&r<e.depth-n.openStart){let o=d6(e,t,n,r+1);return s.copy(s.content.replaceChild(i,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&e.depth==r&&t.depth==r){let o=e.parent,l=o.content;return Ma(o,l.cut(0,e.parentOffset).append(n.content).append(l.cut(t.parentOffset)))}else{let{start:o,end:l}=tY(n,e);return Ma(s,h6(e,o,l,t,r))}else return Ma(s,xp(e,t,r))}function f6(e,t){if(!t.type.compatibleContent(e.type))throw new vp("Cannot join "+t.type.name+" onto "+e.type.name)}function PE(e,t,n){let r=e.node(n);return f6(r,t.node(n)),r}function Aa(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function Yu(e,t,n,r){let i=(t||e).node(n),s=0,o=t?t.index(n):i.childCount;e&&(s=e.index(n),e.depth>n?s++:e.textOffset&&(Aa(e.nodeAfter,r),s++));for(let l=s;l<o;l++)Aa(i.child(l),r);t&&t.depth==n&&t.textOffset&&Aa(t.nodeBefore,r)}function Ma(e,t){return e.type.checkContent(t),e.copy(t)}function h6(e,t,n,r,i){let s=e.depth>i&&PE(e,t,i+1),o=r.depth>i&&PE(n,r,i+1),l=[];return Yu(null,e,i,l),s&&o&&t.index(i)==n.index(i)?(f6(s,o),Aa(Ma(s,h6(e,t,n,r,i+1)),l)):(s&&Aa(Ma(s,xp(e,t,i+1)),l),Yu(t,n,i,l),o&&Aa(Ma(o,xp(n,r,i+1)),l)),Yu(r,null,i,l),new ye(l)}function xp(e,t,n){let r=[];if(Yu(null,e,n,r),e.depth>n){let i=PE(e,t,n+1);Aa(Ma(i,xp(e,t,n+1)),r)}return Yu(t,null,n,r),new ye(r)}function tY(e,t){let n=t.depth-e.openStart,i=t.node(n).copy(e.content);for(let s=n-1;s>=0;s--)i=t.node(s).copy(ye.from(i));return{start:i.resolveNoCache(e.openStart+n),end:i.resolveNoCache(i.content.size-e.openEnd-n)}}class gd{constructor(t,n,r){this.pos=t,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(t){return t==null?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[this.resolveDepth(t)*3]}index(t){return this.path[this.resolveDepth(t)*3+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}start(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,n=this.index(this.depth);if(n==t.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=t.child(n);return r?t.child(n).cut(r):i}get nodeBefore(){let t=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(t).cut(0,n):t==0?null:this.parent.child(t-1)}posAtIndex(t,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<t;s++)i+=r.child(s).nodeSize;return i}marks(){let t=this.parent,n=this.index();if(t.content.size==0)return kt.none;if(this.textOffset)return t.child(n).marks;let r=t.maybeChild(n-1),i=t.maybeChild(n);if(!r){let l=r;r=i,i=l}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(t){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=t.parent.maybeChild(t.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(t){for(let n=this.depth;n>0;n--)if(this.start(n)<=t&&this.end(n)>=t)return n;return 0}blockRange(t=this,n){if(t.pos<this.pos)return t.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);r>=0;r--)if(t.pos<=this.end(r)&&(!n||n(this.node(r))))return new wp(this,t,r);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let n=1;n<=this.depth;n++)t+=(t?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return t+":"+this.parentOffset}static resolve(t,n){if(!(n>=0&&n<=t.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let o=t;;){let{index:l,offset:u}=o.content.findIndex(s),d=s-u;if(r.push(o,l,i+u),!d||(o=o.child(l),o.isText))break;s=d-1,i+=u+1}return new gd(n,r,s)}static resolveCached(t,n){let r=U_.get(t);if(r)for(let s=0;s<r.elts.length;s++){let o=r.elts[s];if(o.pos==n)return o}else U_.set(t,r=new nY);let i=r.elts[r.i]=gd.resolve(t,n);return r.i=(r.i+1)%rY,i}}class nY{constructor(){this.elts=[],this.i=0}}const rY=12,U_=new WeakMap;class wp{constructor(t,n,r){this.$from=t,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const iY=Object.create(null);let jo=class IE{constructor(t,n,r,i=kt.none){this.type=t,this.attrs=n,this.marks=i,this.content=r||ye.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,n,r,i=0){this.content.nodesBetween(t,n,r,i,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,n,r,i){return this.content.textBetween(t,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,n,r){return this.type==t&&bp(this.attrs,n||t.defaultAttrs||iY)&&kt.sameSet(this.marks,r||kt.none)}copy(t=null){return t==this.content?this:new IE(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new IE(this.type,this.attrs,this.content,t)}cut(t,n=this.content.size){return t==0&&n==this.content.size?this:this.copy(this.content.cut(t,n))}slice(t,n=this.content.size,r=!1){if(t==n)return Ne.empty;let i=this.resolve(t),s=this.resolve(n),o=r?0:i.sharedDepth(n),l=i.start(o),d=i.node(o).content.cut(i.pos-l,s.pos-l);return new Ne(d,i.depth-o,s.depth-o)}replace(t,n,r){return eY(this.resolve(t),this.resolve(n),r)}nodeAt(t){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(t);if(n=n.maybeChild(r),!n)return null;if(i==t||n.isText)return n;t-=i+1}}childAfter(t){let{index:n,offset:r}=this.content.findIndex(t);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(t){if(t==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(t);if(r<t)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(t){return gd.resolveCached(this,t)}resolveNoCache(t){return gd.resolve(this,t)}rangeHasMark(t,n,r){let i=!1;return n>t&&this.nodesBetween(t,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),p6(this.marks,t)}contentMatchAt(t){let n=this.type.contentMatch.matchFragment(this.content,0,t);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(t,n,r=ye.empty,i=0,s=r.childCount){let o=this.contentMatchAt(t).matchFragment(r,i,s),l=o&&o.matchFragment(this.content,n);if(!l||!l.validEnd)return!1;for(let u=i;u<s;u++)if(!this.type.allowsMarks(r.child(u).marks))return!1;return!0}canReplaceWith(t,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(t).matchType(r),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=kt.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),t=r.addToSet(t)}if(!kt.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(n=>n.toJSON())),t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(t.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(n.text,r)}let i=ye.fromJSON(t,n.content),s=t.nodeType(n.type).create(n.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};jo.prototype.text=void 0;class Sp extends jo{constructor(t,n,r,i){if(super(t,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):p6(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,n){return this.text.slice(t,n)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new Sp(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new Sp(this.type,this.attrs,t,this.marks)}cut(t=0,n=this.text.length){return t==0&&n==this.text.length?this:this.withText(this.text.slice(t,n))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function p6(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class La{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,n){let r=new sY(t,n);if(r.next==null)return La.empty;let i=m6(r);r.next&&r.err("Unexpected trailing text");let s=fY(dY(i));return hY(s,r),s}matchType(t){for(let n=0;n<this.next.length;n++)if(this.next[n].type==t)return this.next[n].next;return null}matchFragment(t,n=0,r=t.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(t.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:n}=this.next[t];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(t){for(let n=0;n<this.next.length;n++)for(let r=0;r<t.next.length;r++)if(this.next[n].type==t.next[r].type)return!0;return!1}fillBefore(t,n=!1,r=0){let i=[this];function s(o,l){let u=o.matchFragment(t,r);if(u&&(!n||u.validEnd))return ye.from(l.map(d=>d.createAndFill()));for(let d=0;d<o.next.length;d++){let{type:h,next:p}=o.next[d];if(!(h.isText||h.hasRequiredAttrs())&&i.indexOf(p)==-1){i.push(p);let m=s(p,l.concat(h));if(m)return m}}return null}return s(this,[])}findWrapping(t){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==t)return this.wrapCache[r+1];let n=this.computeWrapping(t);return this.wrapCache.push(t,n),n}computeWrapping(t){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(t)){let o=[];for(let l=i;l.type;l=l.via)o.push(l.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:l,next:u}=s.next[o];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in n)&&(!i.type||u.validEnd)&&(r.push({match:l.contentMatch,type:l,via:i}),n[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function n(r){t.push(r);for(let i=0;i<r.next.length;i++)t.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),t.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+t.indexOf(r.next[o].next);return s}).join(`
`)}}La.empty=new La(!0);class sY{constructor(t,n){this.string=t,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function m6(e){let t=[];do t.push(oY(e));while(e.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function oY(e){let t=[];do t.push(aY(e));while(e.next&&e.next!=")"&&e.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function aY(e){let t=uY(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else if(e.eat("{"))t=lY(e,t);else break;return t}function $_(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function lY(e,t){let n=$_(e),r=n;return e.eat(",")&&(e.next!="}"?r=$_(e):r=-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function cY(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let i=[];for(let s in n){let o=n[s];o.isInGroup(t)&&i.push(o)}return i.length==0&&e.err("No node type or group '"+t+"' found"),i}function uY(e){if(e.eat("(")){let t=m6(e);return e.eat(")")||e.err("Missing closing paren"),t}else if(/\W/.test(e.next))e.err("Unexpected token '"+e.next+"'");else{let t=cY(e,e.next).map(n=>(e.inline==null?e.inline=n.isInline:e.inline!=n.isInline&&e.err("Mixing inline and block content"),{type:"name",value:n}));return e.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function dY(e){let t=[[]];return i(s(e,0),n()),t;function n(){return t.push([])-1}function r(o,l,u){let d={term:u,to:l};return t[o].push(d),d}function i(o,l){o.forEach(u=>u.to=l)}function s(o,l){if(o.type=="choice")return o.exprs.reduce((u,d)=>u.concat(s(d,l)),[]);if(o.type=="seq")for(let u=0;;u++){let d=s(o.exprs[u],l);if(u==o.exprs.length-1)return d;i(d,l=n())}else if(o.type=="star"){let u=n();return r(l,u),i(s(o.expr,u),u),[r(u)]}else if(o.type=="plus"){let u=n();return i(s(o.expr,l),u),i(s(o.expr,u),u),[r(u)]}else{if(o.type=="opt")return[r(l)].concat(s(o.expr,l));if(o.type=="range"){let u=l;for(let d=0;d<o.min;d++){let h=n();i(s(o.expr,u),h),u=h}if(o.max==-1)i(s(o.expr,u),u);else for(let d=o.min;d<o.max;d++){let h=n();r(u,h),i(s(o.expr,u),h),u=h}return[r(u)]}else{if(o.type=="name")return[r(l,void 0,o.value)];throw new Error("Unknown expr type")}}}}function g6(e,t){return t-e}function G_(e,t){let n=[];return r(t),n.sort(g6);function r(i){let s=e[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let o=0;o<s.length;o++){let{term:l,to:u}=s[o];!l&&n.indexOf(u)==-1&&r(u)}}}function fY(e){let t=Object.create(null);return n(G_(e,0));function n(r){let i=[];r.forEach(o=>{e[o].forEach(({term:l,to:u})=>{if(!l)return;let d;for(let h=0;h<i.length;h++)i[h][0]==l&&(d=i[h][1]);G_(e,u).forEach(h=>{d||i.push([l,d=[]]),d.indexOf(h)==-1&&d.push(h)})})});let s=t[r.join(",")]=new La(r.indexOf(e.length-1)>-1);for(let o=0;o<i.length;o++){let l=i[o][1].sort(g6);s.next.push({type:i[o][0],next:t[l.join(",")]||n(l)})}return s}}function hY(e,t){for(let n=0,r=[e];n<r.length;n++){let i=r[n],s=!i.validEnd,o=[];for(let l=0;l<i.next.length;l++){let{type:u,next:d}=i.next[l];o.push(u.name),s&&!(u.isText||u.hasRequiredAttrs())&&(s=!1),r.indexOf(d)==-1&&r.push(d)}s&&t.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function y6(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function b6(e,t){let n=Object.create(null);for(let r in e){let i=t&&t[r];if(i===void 0){let s=e[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function v6(e,t,n,r){for(let i in t)if(!(i in e))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in e){let s=e[i];s.validate&&s.validate(t[i])}}function x6(e,t){let n=Object.create(null);if(t)for(let r in t)n[r]=new mY(e,r,t[r]);return n}let W_=class w6{constructor(t,n,r){this.name=t,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=x6(t,r.attrs),this.defaultAttrs=y6(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||t=="text"),this.isText=t=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==La.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(t){return this.groups.indexOf(t)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:b6(this.attrs,t)}create(t=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new jo(this,this.computeAttrs(t),ye.from(n),kt.setFrom(r))}createChecked(t=null,n,r){return n=ye.from(n),this.checkContent(n),new jo(this,this.computeAttrs(t),n,kt.setFrom(r))}createAndFill(t=null,n,r){if(t=this.computeAttrs(t),n=ye.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(ye.empty,!0);return s?new jo(this,t,n.append(s),kt.setFrom(r)):null}validContent(t){let n=this.contentMatch.matchFragment(t);if(!n||!n.validEnd)return!1;for(let r=0;r<t.childCount;r++)if(!this.allowsMarks(t.child(r).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}checkAttrs(t){v6(this.attrs,t,"node",this.name)}allowsMarkType(t){return this.markSet==null||this.markSet.indexOf(t)>-1}allowsMarks(t){if(this.markSet==null)return!0;for(let n=0;n<t.length;n++)if(!this.allowsMarkType(t[n].type))return!1;return!0}allowedMarks(t){if(this.markSet==null)return t;let n;for(let r=0;r<t.length;r++)this.allowsMarkType(t[r].type)?n&&n.push(t[r]):n||(n=t.slice(0,r));return n?n.length?n:kt.none:t}static compile(t,n){let r=Object.create(null);t.forEach((s,o)=>r[s]=new w6(s,n,o));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function pY(e,t,n){let r=n.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${t} on type ${e}, got ${s}`)}}class mY{constructor(t,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?pY(t,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Rm{constructor(t,n,r,i){this.name=t,this.rank=n,this.schema=r,this.spec=i,this.attrs=x6(t,i.attrs),this.excluded=null;let s=y6(this.attrs);this.instance=s?new kt(this,s):null}create(t=null){return!t&&this.instance?this.instance:new kt(this,b6(this.attrs,t))}static compile(t,n){let r=Object.create(null),i=0;return t.forEach((s,o)=>r[s]=new Rm(s,i++,n,o)),r}removeFromSet(t){for(var n=0;n<t.length;n++)t[n].type==this&&(t=t.slice(0,n).concat(t.slice(n+1)),n--);return t}isInSet(t){for(let n=0;n<t.length;n++)if(t[n].type==this)return t[n]}checkAttrs(t){v6(this.attrs,t,"mark",this.name)}excludes(t){return this.excluded.indexOf(t)>-1}}class S6{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in t)n[i]=t[i];n.nodes=Un.from(t.nodes),n.marks=Un.from(t.marks||{}),this.nodes=W_.compile(this.spec.nodes,this),this.marks=Rm.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",l=s.spec.marks;if(s.contentMatch=r[o]||(r[o]=La.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=l=="_"?null:l?K_(this,l.split(" ")):l==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:K_(this,o.split(" "))}this.nodeFromJSON=i=>jo.fromJSON(this,i),this.markFromJSON=i=>kt.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,n=null,r,i){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof W_){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(n,r,i)}text(t,n){let r=this.nodes.text;return new Sp(r,r.defaultAttrs,t,kt.setFrom(n))}mark(t,n){return typeof t=="string"&&(t=this.marks[t]),t.create(n)}nodeType(t){let n=this.nodes[t];if(!n)throw new RangeError("Unknown node type: "+t);return n}}function K_(e,t){let n=[];for(let r=0;r<t.length;r++){let i=t[r],s=e.marks[i],o=s;if(s)n.push(s);else for(let l in e.marks){let u=e.marks[l];(i=="_"||u.spec.group&&u.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=u)}if(!o)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}function gY(e){return e.tag!=null}function yY(e){return e.style!=null}let Xu=class BE{constructor(t,n){this.schema=t,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(gY(i))this.tags.push(i);else if(yY(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=t.nodes[i.node];return s.contentMatch.matchType(s)})}parse(t,n={}){let r=new X_(this,n,!1);return r.addAll(t,kt.none,n.from,n.to),r.finish()}parseSlice(t,n={}){let r=new X_(this,n,!0);return r.addAll(t,kt.none,n.from,n.to),Ne.maxOpen(r.finish())}matchTag(t,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(xY(t,s.tag)&&(s.namespace===void 0||t.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(t);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(t,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],l=o.style;if(!(l.indexOf(t)!=0||o.context&&!r.matchesContext(o.context)||l.length>t.length&&(l.charCodeAt(t.length)!=61||l.slice(t.length+1)!=n))){if(o.getAttrs){let u=o.getAttrs(n);if(u===!1)continue;o.attrs=u||void 0}return o}}}static schemaRules(t){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let l=n[o];if((l.priority==null?50:l.priority)<s)break}n.splice(o,0,i)}for(let i in t.marks){let s=t.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=Z_(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in t.nodes){let s=t.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=Z_(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new BE(t,BE.schemaRules(t)))}};const E6={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},bY={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},C6={ol:!0,ul:!0},yd=1,zE=2,Zu=4;function Y_(e,t,n){return t!=null?(t?yd:0)|(t==="full"?zE:0):e&&e.whitespace=="pre"?yd|zE:n&~Zu}class Ch{constructor(t,n,r,i,s,o){this.type=t,this.attrs=n,this.marks=r,this.solid=i,this.options=o,this.content=[],this.activeMarks=kt.none,this.match=s||(o&Zu?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(ye.from(t));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(t.type))?(this.match=r,i):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&yd)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=ye.from(this.content);return!t&&this.match&&(n=n.append(this.match.fillBefore(ye.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!E6.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class X_{constructor(t,n,r){this.parser=t,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,s,o=Y_(null,n.preserveWhitespace,0)|(r?Zu:0);i?s=new Ch(i.type,i.attrs,kt.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new Ch(null,null,kt.none,!0,null,o):s=new Ch(t.schema.topNodeType,null,kt.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t,n){t.nodeType==3?this.addTextNode(t,n):t.nodeType==1&&this.addElement(t,n)}addTextNode(t,n){let r=t.nodeValue,i=this.top,s=i.options&zE?"full":this.localPreserveWS||(i.options&yd)>0;if(s==="full"||i.inlineContext(t)||/[^ \t\r\n\u000c]/.test(r)){if(s)s!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let o=i.content[i.content.length-1],l=t.previousSibling;(!o||l&&l.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n,!/\S/.test(r)),this.findInText(t)}else this.findInside(t)}addElement(t,n,r){let i=this.localPreserveWS,s=this.top;(t.tagName=="PRE"||/pre/.test(t.style&&t.style.whiteSpace))&&(this.localPreserveWS=!0);let o=t.nodeName.toLowerCase(),l;C6.hasOwnProperty(o)&&this.parser.normalizeLists&&vY(t);let u=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(l=this.parser.matchTag(t,this,r));e:if(u?u.ignore:bY.hasOwnProperty(o))this.findInside(t),this.ignoreFallback(t,n);else if(!u||u.skip||u.closeParent){u&&u.closeParent?this.open=Math.max(0,this.open-1):u&&u.skip.nodeType&&(t=u.skip);let d,h=this.needsBlock;if(E6.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),d=!0,s.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t,n);break e}let p=u&&u.skip?n:this.readStyles(t,n);p&&this.addAll(t,p),d&&this.sync(s),this.needsBlock=h}else{let d=this.readStyles(t,n);d&&this.addElementByRule(t,u,d,u.consuming===!1?l:void 0)}this.localPreserveWS=i}leafFallback(t,n){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`),n)}ignoreFallback(t,n){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(t,n){let r=t.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=r.getPropertyValue(s);if(o)for(let l=void 0;;){let u=this.parser.matchStyle(s,o,this,l);if(!u)break;if(u.ignore)return null;if(u.clearMark?n=n.filter(d=>!u.clearMark(d)):n=n.concat(this.parser.schema.marks[u.mark].create(u.attrs)),u.consuming===!1)l=u;else break}}return n}addElementByRule(t,n,r,i){let s,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r,t.nodeName=="BR")||this.leafFallback(t,r);else{let u=this.enter(o,n.attrs||null,r,n.preserveWhitespace);u&&(s=!0,r=u)}else{let u=this.parser.schema.marks[n.mark];r=r.concat(u.create(n.attrs))}let l=this.top;if(o&&o.isLeaf)this.findInside(t);else if(i)this.addElement(t,r,i);else if(n.getContent)this.findInside(t),n.getContent(t,this.parser.schema).forEach(u=>this.insertNode(u,r,!1));else{let u=t;typeof n.contentElement=="string"?u=t.querySelector(n.contentElement):typeof n.contentElement=="function"?u=n.contentElement(t):n.contentElement&&(u=n.contentElement),this.findAround(t,u,!0),this.addAll(u,r),this.findAround(t,u,!1)}s&&this.sync(l)&&this.open--}addAll(t,n,r,i){let s=r||0;for(let o=r?t.childNodes[r]:t.firstChild,l=i==null?null:t.childNodes[i];o!=l;o=o.nextSibling,++s)this.findAtPoint(t,s),this.addDOM(o,n);this.findAtPoint(t,s)}findPlace(t,n,r){let i,s;for(let o=this.open,l=0;o>=0;o--){let u=this.nodes[o],d=u.findWrapping(t);if(d&&(!i||i.length>d.length+l)&&(i=d,s=u,!d.length))break;if(u.solid){if(r)break;l+=2}}if(!i)return null;this.sync(s);for(let o=0;o<i.length;o++)n=this.enterInner(i[o],null,n,!1);return n}insertNode(t,n,r){if(t.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let i=this.findPlace(t,n,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(t.type));let o=kt.none;for(let l of i.concat(t.marks))(s.type?s.type.allowsMarkType(l.type):J_(l.type,t.type))&&(o=l.addToSet(o));return s.content.push(t.mark(o)),!0}return!1}enter(t,n,r,i){let s=this.findPlace(t.create(n),r,!1);return s&&(s=this.enterInner(t,n,r,!0,i)),s}enterInner(t,n,r,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(t);let l=Y_(t,s,o.options);o.options&Zu&&o.content.length==0&&(l|=Zu);let u=kt.none;return r=r.filter(d=>(o.type?o.type.allowsMarkType(d.type):J_(d.type,t))?(u=d.addToSet(u),!1):!0),this.nodes.push(new Ch(t,n,u,i,null,l)),this.open++,r}closeExtra(t=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(t){for(let n=this.open;n>=0;n--){if(this.nodes[n]==t)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=yd)}return!1}get currentPos(){this.closeExtra();let t=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)t+=r[i].nodeSize;n&&t++}return t}findAtPoint(t,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==t&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&t.nodeType==1&&t.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(t,n,r){if(t!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&t.nodeType==1&&t.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&(this.find[n].pos=this.currentPos-(t.nodeValue.length-this.find[n].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let n=t.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(l,u)=>{for(;l>=0;l--){let d=n[l];if(d==""){if(l==n.length-1||l==0)continue;for(;u>=s;u--)if(o(l-1,u))return!0;return!1}else{let h=u>0||u==0&&i?this.nodes[u].type:r&&u>=s?r.node(u-s).type:null;if(!h||h.name!=d&&!h.isInGroup(d))return!1;u--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let n=t.depth;n>=0;n--){let r=t.node(n).contentMatchAt(t.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function vY(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let r=t.nodeType==1?t.nodeName.toLowerCase():null;r&&C6.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):r=="li"?n=t:r&&(n=null)}}function xY(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function Z_(e){let t={};for(let n in e)t[n]=e[n];return t}function J_(e,t){let n=t.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(e))continue;let s=[],o=l=>{s.push(l);for(let u=0;u<l.edgeCount;u++){let{type:d,next:h}=l.edge(u);if(d==t||s.indexOf(h)<0&&o(h))return!0}};if(o(i.contentMatch))return!0}}class Ya{constructor(t,n){this.nodes=t,this.marks=n}serializeFragment(t,n={},r){r||(r=J0(n).createDocumentFragment());let i=r,s=[];return t.forEach(o=>{if(s.length||o.marks.length){let l=0,u=0;for(;l<s.length&&u<o.marks.length;){let d=o.marks[u];if(!this.marks[d.type.name]){u++;continue}if(!d.eq(s[l][0])||d.type.spec.spanning===!1)break;l++,u++}for(;l<s.length;)i=s.pop()[1];for(;u<o.marks.length;){let d=o.marks[u++],h=this.serializeMark(d,o.isInline,n);h&&(s.push([d,i]),i.appendChild(h.dom),i=h.contentDOM||h.dom)}}i.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(t,n){let{dom:r,contentDOM:i}=Zh(J0(n),this.nodes[t.type.name](t),null,t.attrs);if(i){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,n,i)}return r}serializeNode(t,n={}){let r=this.serializeNodeInner(t,n);for(let i=t.marks.length-1;i>=0;i--){let s=this.serializeMark(t.marks[i],t.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(t,n,r={}){let i=this.marks[t.type.name];return i&&Zh(J0(r),i(t,n),null,t.attrs)}static renderSpec(t,n,r=null,i){return Zh(t,n,r,i)}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new Ya(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let n=Q_(t.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(t){return Q_(t.marks)}}function Q_(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function J0(e){return e.document||window.document}const eD=new WeakMap;function wY(e){let t=eD.get(e);return t===void 0&&eD.set(e,t=SY(e)),t}function SY(e){let t=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")t||(t=[]),t.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(e),t}function Zh(e,t,n,r){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let i=t[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=wY(r))&&s.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(n=i.slice(0,o),i=i.slice(o+1));let l,u=n?e.createElementNS(n,i):e.createElement(i),d=t[1],h=1;if(d&&typeof d=="object"&&d.nodeType==null&&!Array.isArray(d)){h=2;for(let p in d)if(d[p]!=null){let m=p.indexOf(" ");m>0?u.setAttributeNS(p.slice(0,m),p.slice(m+1),d[p]):p=="style"&&u.style?u.style.cssText=d[p]:u.setAttribute(p,d[p])}}for(let p=h;p<t.length;p++){let m=t[p];if(m===0){if(p<t.length-1||p>h)throw new RangeError("Content hole must be the only child of its parent node");return{dom:u,contentDOM:u}}else{let{dom:b,contentDOM:x}=Zh(e,m,n,r);if(u.appendChild(b),x){if(l)throw new RangeError("Multiple content holes");l=x}}}return{dom:u,contentDOM:l}}const k6=65535,T6=Math.pow(2,16);function EY(e,t){return e+t*T6}function tD(e){return e&k6}function CY(e){return(e-(e&k6))/T6}const N6=1,A6=2,Jh=4,M6=8;class qE{constructor(t,n,r){this.pos=t,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&M6)>0}get deletedBefore(){return(this.delInfo&(N6|Jh))>0}get deletedAfter(){return(this.delInfo&(A6|Jh))>0}get deletedAcross(){return(this.delInfo&Jh)>0}}class Fr{constructor(t,n=!1){if(this.ranges=t,this.inverted=n,!t.length&&Fr.empty)return Fr.empty}recover(t){let n=0,r=tD(t);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+CY(t)}mapResult(t,n=1){return this._map(t,n,!1)}map(t,n=1){return this._map(t,n,!0)}_map(t,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let u=this.ranges[l]-(this.inverted?i:0);if(u>t)break;let d=this.ranges[l+s],h=this.ranges[l+o],p=u+d;if(t<=p){let m=d?t==u?-1:t==p?1:n:n,b=u+i+(m<0?0:h);if(r)return b;let x=t==(n<0?u:p)?null:EY(l/3,t-u),S=t==u?A6:t==p?N6:Jh;return(n<0?t!=u:t!=p)&&(S|=M6),new qE(b,S,x)}i+=h-d}return r?t+i:new qE(t+i,0,null)}touches(t,n){let r=0,i=tD(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let u=this.ranges[l]-(this.inverted?r:0);if(u>t)break;let d=this.ranges[l+s],h=u+d;if(t<=h&&l==i*3)return!0;r+=this.ranges[l+o]-d}return!1}forEach(t){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],l=o-(this.inverted?s:0),u=o+(this.inverted?0:s),d=this.ranges[i+n],h=this.ranges[i+r];t(l,l+d,u,u+h),s+=h-d}}invert(){return new Fr(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?Fr.empty:new Fr(t<0?[0,-t,0]:[0,0,t])}}Fr.empty=new Fr([]);class bd{constructor(t,n,r=0,i=t?t.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=t||[],this.ownData=!(t||n)}get maps(){return this._maps}slice(t=0,n=this.maps.length){return new bd(this._maps,this.mirror,t,n)}appendMap(t,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(t),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(t){for(let n=0,r=this._maps.length;n<t._maps.length;n++){let i=t.getMirror(n);this.appendMap(t._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(t){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==t)return this.mirror[n+(n%2?-1:1)]}}setMirror(t,n){this.mirror||(this.mirror=[]),this.mirror.push(t,n)}appendMappingInverted(t){for(let n=t.maps.length-1,r=this._maps.length+t._maps.length;n>=0;n--){let i=t.getMirror(n);this.appendMap(t._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let t=new bd;return t.appendMappingInverted(this),t}map(t,n=1){if(this.mirror)return this._map(t,n,!0);for(let r=this.from;r<this.to;r++)t=this._maps[r].map(t,n);return t}mapResult(t,n=1){return this._map(t,n,!1)}_map(t,n,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],l=o.mapResult(t,n);if(l.recover!=null){let u=this.getMirror(s);if(u!=null&&u>s&&u<this.to){s=u,t=this._maps[u].recover(l.recover);continue}}i|=l.delInfo,t=l.pos}return r?t:new qE(t,i,null)}}const Q0=Object.create(null);class ir{getMap(){return Fr.empty}merge(t){return null}static fromJSON(t,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=Q0[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in Q0)throw new RangeError("Duplicate use of step JSON ID "+t);return Q0[t]=n,n.prototype.jsonID=t,n}}class bn{constructor(t,n){this.doc=t,this.failed=n}static ok(t){return new bn(t,null)}static fail(t){return new bn(null,t)}static fromReplace(t,n,r,i){try{return bn.ok(t.replace(n,r,i))}catch(s){if(s instanceof vp)return bn.fail(s.message);throw s}}}function mk(e,t,n){let r=[];for(let i=0;i<e.childCount;i++){let s=e.child(i);s.content.size&&(s=s.copy(mk(s.content,t,s))),s.isInline&&(s=t(s,n,i)),r.push(s)}return ye.fromArray(r)}class _o extends ir{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=t.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new Ne(mk(n.content,(o,l)=>!o.isAtom||!l.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return bn.fromReplace(t,this.from,this.to,s)}invert(){return new Mi(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new _o(n.pos,r.pos,this.mark)}merge(t){return t instanceof _o&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new _o(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new _o(n.from,n.to,t.markFromJSON(n.mark))}}ir.jsonID("addMark",_o);class Mi extends ir{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=new Ne(mk(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),t),n.openStart,n.openEnd);return bn.fromReplace(t,this.from,this.to,r)}invert(){return new _o(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Mi(n.pos,r.pos,this.mark)}merge(t){return t instanceof Mi&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Mi(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Mi(n.from,n.to,t.markFromJSON(n.mark))}}ir.jsonID("removeMark",Mi);class Do extends ir{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return bn.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return bn.fromReplace(t,this.pos,this.pos+1,new Ne(ye.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new Do(this.pos,n.marks[i]);return new Do(this.pos,this.mark)}}return new Pa(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new Do(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Do(n.pos,t.markFromJSON(n.mark))}}ir.jsonID("addNodeMark",Do);class Pa extends ir{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return bn.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return bn.fromReplace(t,this.pos,this.pos+1,new Ne(ye.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Do(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new Pa(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Pa(n.pos,t.markFromJSON(n.mark))}}ir.jsonID("removeNodeMark",Pa);class In extends ir{constructor(t,n,r,i=!1){super(),this.from=t,this.to=n,this.slice=r,this.structure=i}apply(t){return this.structure&&VE(t,this.from,this.to)?bn.fail("Structure replace would overwrite content"):bn.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new Fr([this.from,this.to-this.from,this.slice.size])}invert(t){return new In(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new In(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(t){if(!(t instanceof In)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let n=this.slice.size+t.slice.size==0?Ne.empty:new Ne(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new In(this.from,this.to+(t.to-t.from),n,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let n=this.slice.size+t.slice.size==0?Ne.empty:new Ne(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new In(t.from,this.to,n,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new In(n.from,n.to,Ne.fromJSON(t,n.slice),!!n.structure)}}ir.jsonID("replace",In);class Bn extends ir{constructor(t,n,r,i,s,o,l=!1){super(),this.from=t,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=l}apply(t){if(this.structure&&(VE(t,this.from,this.gapFrom)||VE(t,this.gapTo,this.to)))return bn.fail("Structure gap-replace would overwrite content");let n=t.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return bn.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?bn.fromReplace(t,this.from,this.to,r):bn.fail("Content does not fit in gap")}getMap(){return new Fr([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let n=this.gapTo-this.gapFrom;return new Bn(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:t.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:t.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new Bn(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Bn(n.from,n.to,n.gapFrom,n.gapTo,Ne.fromJSON(t,n.slice),n.insert,!!n.structure)}}ir.jsonID("replaceAround",Bn);function VE(e,t,n){let r=e.resolve(t),i=n-t,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function kY(e,t,n,r){let i=[],s=[],o,l;e.doc.nodesBetween(t,n,(u,d,h)=>{if(!u.isInline)return;let p=u.marks;if(!r.isInSet(p)&&h.type.allowsMarkType(r.type)){let m=Math.max(d,t),b=Math.min(d+u.nodeSize,n),x=r.addToSet(p);for(let S=0;S<p.length;S++)p[S].isInSet(x)||(o&&o.to==m&&o.mark.eq(p[S])?o.to=b:i.push(o=new Mi(m,b,p[S])));l&&l.to==m?l.to=b:s.push(l=new _o(m,b,r))}}),i.forEach(u=>e.step(u)),s.forEach(u=>e.step(u))}function TY(e,t,n,r){let i=[],s=0;e.doc.nodesBetween(t,n,(o,l)=>{if(!o.isInline)return;s++;let u=null;if(r instanceof Rm){let d=o.marks,h;for(;h=r.isInSet(d);)(u||(u=[])).push(h),d=h.removeFromSet(d)}else r?r.isInSet(o.marks)&&(u=[r]):u=o.marks;if(u&&u.length){let d=Math.min(l+o.nodeSize,n);for(let h=0;h<u.length;h++){let p=u[h],m;for(let b=0;b<i.length;b++){let x=i[b];x.step==s-1&&p.eq(i[b].style)&&(m=x)}m?(m.to=d,m.step=s):i.push({style:p,from:Math.max(l,t),to:d,step:s})}}}),i.forEach(o=>e.step(new Mi(o.from,o.to,o.style)))}function gk(e,t,n,r=n.contentMatch,i=!0){let s=e.doc.nodeAt(t),o=[],l=t+1;for(let u=0;u<s.childCount;u++){let d=s.child(u),h=l+d.nodeSize,p=r.matchType(d.type);if(!p)o.push(new In(l,h,Ne.empty));else{r=p;for(let m=0;m<d.marks.length;m++)n.allowsMarkType(d.marks[m].type)||e.step(new Mi(l,h,d.marks[m]));if(i&&d.isText&&n.whitespace!="pre"){let m,b=/\r?\n|\r/g,x;for(;m=b.exec(d.text);)x||(x=new Ne(ye.from(n.schema.text(" ",n.allowedMarks(d.marks))),0,0)),o.push(new In(l+m.index,l+m.index+m[0].length,x))}}l=h}if(!r.validEnd){let u=r.fillBefore(ye.empty,!0);e.replace(l,l,new Ne(u,0,0))}for(let u=o.length-1;u>=0;u--)e.step(o[u])}function NY(e,t,n){return(t==0||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function vc(e){let n=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let r=e.depth;;--r){let i=e.$from.node(r),s=e.$from.index(r),o=e.$to.indexAfter(r);if(r<e.depth&&i.canReplace(s,o,n))return r;if(r==0||i.type.spec.isolating||!NY(i,s,o))break}return null}function AY(e,t,n){let{$from:r,$to:i,depth:s}=t,o=r.before(s+1),l=i.after(s+1),u=o,d=l,h=ye.empty,p=0;for(let x=s,S=!1;x>n;x--)S||r.index(x)>0?(S=!0,h=ye.from(r.node(x).copy(h)),p++):u--;let m=ye.empty,b=0;for(let x=s,S=!1;x>n;x--)S||i.after(x+1)<i.end(x)?(S=!0,m=ye.from(i.node(x).copy(m)),b++):d++;e.step(new Bn(u,d,o,l,new Ne(h.append(m),p,b),h.size-p,!0))}function yk(e,t,n=null,r=e){let i=MY(e,t),s=i&&_Y(r,t);return s?i.map(nD).concat({type:t,attrs:n}).concat(s.map(nD)):null}function nD(e){return{type:e,attrs:null}}function MY(e,t){let{parent:n,startIndex:r,endIndex:i}=e,s=n.contentMatchAt(r).findWrapping(t);if(!s)return null;let o=s.length?s[0]:t;return n.canReplaceWith(r,i,o)?s:null}function _Y(e,t){let{parent:n,startIndex:r,endIndex:i}=e,s=n.child(r),o=t.contentMatch.findWrapping(s.type);if(!o)return null;let u=(o.length?o[o.length-1]:t).contentMatch;for(let d=r;u&&d<i;d++)u=u.matchType(n.child(d).type);return!u||!u.validEnd?null:o}function DY(e,t,n){let r=ye.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let l=n[o].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=ye.from(n[o].type.create(n[o].attrs,r))}let i=t.start,s=t.end;e.step(new Bn(i,s,i,s,new Ne(r,0,0),n.length,!0))}function RY(e,t,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=e.steps.length;e.doc.nodesBetween(t,n,(o,l)=>{let u=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(r,u)&&jY(e.doc,e.mapping.slice(s).map(l),r)){let d=null;if(r.schema.linebreakReplacement){let b=r.whitespace=="pre",x=!!r.contentMatch.matchType(r.schema.linebreakReplacement);b&&!x?d=!1:!b&&x&&(d=!0)}d===!1&&D6(e,o,l,s),gk(e,e.mapping.slice(s).map(l,1),r,void 0,d===null);let h=e.mapping.slice(s),p=h.map(l,1),m=h.map(l+o.nodeSize,1);return e.step(new Bn(p,m,p+1,m-1,new Ne(ye.from(r.create(u,null,o.marks)),0,0),1,!0)),d===!0&&_6(e,o,l,s),!1}})}function _6(e,t,n,r){t.forEach((i,s)=>{if(i.isText){let o,l=/\r?\n|\r/g;for(;o=l.exec(i.text);){let u=e.mapping.slice(r).map(n+1+s+o.index);e.replaceWith(u,u+1,t.type.schema.linebreakReplacement.create())}}})}function D6(e,t,n,r){t.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=e.mapping.slice(r).map(n+1+s);e.replaceWith(o,o+1,t.type.schema.text(`
`))}})}function jY(e,t,n){let r=e.resolve(t),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function OY(e,t,n,r,i){let s=e.doc.nodeAt(t);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return e.replaceWith(t,t+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new Bn(t,t+s.nodeSize,t+1,t+s.nodeSize-1,new Ne(ye.from(o),0,0),1,!0))}function js(e,t,n=1,r){let i=e.resolve(t),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let d=i.depth-1,h=n-2;d>s;d--,h--){let p=i.node(d),m=i.index(d);if(p.type.spec.isolating)return!1;let b=p.content.cutByIndex(m,p.childCount),x=r&&r[h+1];x&&(b=b.replaceChild(0,x.type.create(x.attrs)));let S=r&&r[h]||p;if(!p.canReplace(m+1,p.childCount)||!S.type.validContent(b))return!1}let l=i.indexAfter(s),u=r&&r[0];return i.node(s).canReplaceWith(l,l,u?u.type:i.node(s+1).type)}function LY(e,t,n=1,r){let i=e.doc.resolve(t),s=ye.empty,o=ye.empty;for(let l=i.depth,u=i.depth-n,d=n-1;l>u;l--,d--){s=ye.from(i.node(l).copy(s));let h=r&&r[d];o=ye.from(h?h.type.create(h.attrs,o):i.node(l).copy(o))}e.step(new In(t,t,new Ne(s.append(o),n,n),!0))}function $o(e,t){let n=e.resolve(t),r=n.index();return R6(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function PY(e,t){t.content.size||e.type.compatibleContent(t.type);let n=e.contentMatchAt(e.childCount),{linebreakReplacement:r}=e.type.schema;for(let i=0;i<t.childCount;i++){let s=t.child(i),o=s.type==r?e.type.schema.nodes.text:s.type;if(n=n.matchType(o),!n||!e.type.allowsMarks(s.marks))return!1}return n.validEnd}function R6(e,t){return!!(e&&t&&!e.isLeaf&&PY(e,t))}function jm(e,t,n=-1){let r=e.resolve(t);for(let i=r.depth;;i--){let s,o,l=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):n>0?(s=r.node(i+1),l++,o=r.node(i).maybeChild(l)):(s=r.node(i).maybeChild(l-1),o=r.node(i+1)),s&&!s.isTextblock&&R6(s,o)&&r.node(i).canReplace(l,l+1))return t;if(i==0)break;t=n<0?r.before(i):r.after(i)}}function IY(e,t,n){let r=null,{linebreakReplacement:i}=e.doc.type.schema,s=e.doc.resolve(t-n),o=s.node().type;if(i&&o.inlineContent){let h=o.whitespace=="pre",p=!!o.contentMatch.matchType(i);h&&!p?r=!1:!h&&p&&(r=!0)}let l=e.steps.length;if(r===!1){let h=e.doc.resolve(t+n);D6(e,h.node(),h.before(),l)}o.inlineContent&&gk(e,t+n-1,o,s.node().contentMatchAt(s.index()),r==null);let u=e.mapping.slice(l),d=u.map(t-n);if(e.step(new In(d,u.map(t+n,-1),Ne.empty,!0)),r===!0){let h=e.doc.resolve(d);_6(e,h.node(),h.before(),e.steps.length)}return e}function BY(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function j6(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=r.depth;o>=0;o--){let l=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,u=r.index(o)+(l>0?1:0),d=r.node(o),h=!1;if(s==1)h=d.canReplace(u,u,i);else{let p=d.contentMatchAt(u).findWrapping(i.firstChild.type);h=p&&d.canReplaceWith(u,u,p[0])}if(h)return l==0?r.pos:l<0?r.before(o+1):r.after(o+1)}return null}function Om(e,t,n=t,r=Ne.empty){if(t==n&&!r.size)return null;let i=e.resolve(t),s=e.resolve(n);return O6(i,s,r)?new In(t,n,r):new zY(i,s,r).fit()}function O6(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}class zY{constructor(t,n,r){this.$from=t,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=ye.empty;for(let i=0;i<=t.depth;i++){let s=t.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(t.indexAfter(i))})}for(let i=t.depth;i>0;i--)this.placed=ye.from(t.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let d=this.findFittable();d?this.placeNodes(d):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(t<0?this.$to:r.doc.resolve(t));if(!i)return null;let s=this.placed,o=r.depth,l=i.depth;for(;o&&l&&s.childCount==1;)s=s.firstChild.content,o--,l--;let u=new Ne(s,o,l);return t>-1?new Bn(r.pos,t,this.$to.pos,this.$to.end(),u,n):u.size||r.pos!=this.$to.pos?new In(r.pos,i.pos,u):null}findFittable(){let t=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<t;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){t=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?t:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=eb(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let l=this.depth;l>=0;l--){let{type:u,match:d}=this.frontier[l],h,p=null;if(n==1&&(o?d.matchType(o.type)||(p=d.fillBefore(ye.from(o),!1)):s&&u.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:l,parent:s,inject:p};if(n==2&&o&&(h=d.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:l,parent:s,wrap:h};if(s&&d.matchType(s.type))break}}}openMore(){let{content:t,openStart:n,openEnd:r}=this.unplaced,i=eb(t,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new Ne(t,n+1,Math.max(r,i.size+n>=t.size-r?n+1:0)),!0)}dropNode(){let{content:t,openStart:n,openEnd:r}=this.unplaced,i=eb(t,n);if(i.childCount<=1&&n>0){let s=t.size-n<=n+i.size;this.unplaced=new Ne(Lu(t,n-1,1),n-1,s?n-1:r)}else this.unplaced=new Ne(Lu(t,n,1),n,r)}placeNodes({sliceDepth:t,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let S=0;S<s.length;S++)this.openFrontierNode(s[S]);let o=this.unplaced,l=r?r.content:o.content,u=o.openStart-t,d=0,h=[],{match:p,type:m}=this.frontier[n];if(i){for(let S=0;S<i.childCount;S++)h.push(i.child(S));p=p.matchFragment(i)}let b=l.size+t-(o.content.size-o.openEnd);for(;d<l.childCount;){let S=l.child(d),w=p.matchType(S.type);if(!w)break;d++,(d>1||u==0||S.content.size)&&(p=w,h.push(L6(S.mark(m.allowedMarks(S.marks)),d==1?u:0,d==l.childCount?b:-1)))}let x=d==l.childCount;x||(b=-1),this.placed=Pu(this.placed,n,ye.from(h)),this.frontier[n].match=p,x&&b<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let S=0,w=l;S<b;S++){let C=w.lastChild;this.frontier.push({type:C.type,match:C.contentMatchAt(C.childCount)}),w=C.content}this.unplaced=x?t==0?Ne.empty:new Ne(Lu(o.content,t-1,1),t-1,b<0?o.openEnd:t-1):new Ne(Lu(o.content,t,d),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],n;if(!t.type.isTextblock||!tb(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(t){e:for(let n=Math.min(this.depth,t.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<t.depth&&t.end(n+1)==t.pos+(t.depth-(n+1)),o=tb(t,n,i,r,s);if(o){for(let l=n-1;l>=0;l--){let{match:u,type:d}=this.frontier[l],h=tb(t,l,d,u,!0);if(!h||h.childCount)continue e}return{depth:n,fit:o,move:s?t.doc.resolve(t.after(n+1)):t}}}}close(t){let n=this.findCloseLevel(t);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Pu(this.placed,n.depth,n.fit)),t=n.move;for(let r=n.depth+1;r<=t.depth;r++){let i=t.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,t.index(r));this.openFrontierNode(i.type,i.attrs,s)}return t}openFrontierNode(t,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(t),this.placed=Pu(this.placed,this.depth,ye.from(t.create(n,r))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(ye.empty,!0);n.childCount&&(this.placed=Pu(this.placed,this.frontier.length,n))}}function Lu(e,t,n){return t==0?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(Lu(e.firstChild.content,t-1,n)))}function Pu(e,t,n){return t==0?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(Pu(e.lastChild.content,t-1,n)))}function eb(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function L6(e,t,n){if(t<=0)return e;let r=e.content;return t>1&&(r=r.replaceChild(0,L6(r.firstChild,t-1,r.childCount==1?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(ye.empty,!0)))),e.copy(r)}function tb(e,t,n,r,i){let s=e.node(t),o=i?e.indexAfter(t):e.index(t);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let l=r.fillBefore(s.content,!0,o);return l&&!qY(n,s.content,o)?l:null}function qY(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}function VY(e){return e.spec.defining||e.spec.definingForContent}function HY(e,t,n,r){if(!r.size)return e.deleteRange(t,n);let i=e.doc.resolve(t),s=e.doc.resolve(n);if(O6(i,s,r))return e.step(new In(t,n,r));let o=I6(i,e.doc.resolve(n));o[o.length-1]==0&&o.pop();let l=-(i.depth+1);o.unshift(l);for(let m=i.depth,b=i.pos-1;m>0;m--,b--){let x=i.node(m).type.spec;if(x.defining||x.definingAsContext||x.isolating)break;o.indexOf(m)>-1?l=m:i.before(m)==b&&o.splice(1,0,-m)}let u=o.indexOf(l),d=[],h=r.openStart;for(let m=r.content,b=0;;b++){let x=m.firstChild;if(d.push(x),b==r.openStart)break;m=x.content}for(let m=h-1;m>=0;m--){let b=d[m],x=VY(b.type);if(x&&!b.sameMarkup(i.node(Math.abs(l)-1)))h=m;else if(x||!b.type.isTextblock)break}for(let m=r.openStart;m>=0;m--){let b=(m+h+1)%(r.openStart+1),x=d[b];if(x)for(let S=0;S<o.length;S++){let w=o[(S+u)%o.length],C=!0;w<0&&(C=!1,w=-w);let N=i.node(w-1),k=i.index(w-1);if(N.canReplaceWith(k,k,x.type,x.marks))return e.replace(i.before(w),C?s.after(w):n,new Ne(P6(r.content,0,r.openStart,b),b,r.openEnd))}}let p=e.steps.length;for(let m=o.length-1;m>=0&&(e.replace(t,n,r),!(e.steps.length>p));m--){let b=o[m];b<0||(t=i.before(b),n=s.after(b))}}function P6(e,t,n,r,i){if(t<n){let s=e.firstChild;e=e.replaceChild(0,s.copy(P6(s.content,t+1,n,r,s)))}if(t>r){let s=i.contentMatchAt(0),o=s.fillBefore(e).append(e);e=o.append(s.matchFragment(o).fillBefore(ye.empty,!0))}return e}function FY(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let i=BY(e.doc,t,r.type);i!=null&&(t=n=i)}e.replaceRange(t,n,new Ne(ye.from(r),0,0))}function UY(e,t,n){let r=e.doc.resolve(t),i=e.doc.resolve(n),s=I6(r,i);for(let o=0;o<s.length;o++){let l=s[o],u=o==s.length-1;if(u&&l==0||r.node(l).type.contentMatch.validEnd)return e.delete(r.start(l),i.end(l));if(l>0&&(u||r.node(l-1).canReplace(r.index(l-1),i.indexAfter(l-1))))return e.delete(r.before(l),i.after(l))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(t-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o&&r.start(o-1)==i.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),i.index(o-1)))return e.delete(r.before(o),n);e.delete(t,n)}function I6(e,t){let n=[],r=Math.min(e.depth,t.depth);for(let i=r;i>=0;i--){let s=e.start(i);if(s<e.pos-(e.depth-i)||t.end(i)>t.pos+(t.depth-i)||e.node(i).type.spec.isolating||t.node(i).type.spec.isolating)break;(s==t.start(i)||i==e.depth&&i==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&i&&t.start(i-1)==s-1)&&n.push(i)}return n}class Jl extends ir{constructor(t,n,r){super(),this.pos=t,this.attr=n,this.value=r}apply(t){let n=t.nodeAt(this.pos);if(!n)return bn.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return bn.fromReplace(t,this.pos,this.pos+1,new Ne(ye.from(i),0,n.isLeaf?0:1))}getMap(){return Fr.empty}invert(t){return new Jl(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new Jl(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new Jl(n.pos,n.attr,n.value)}}ir.jsonID("attr",Jl);class vd extends ir{constructor(t,n){super(),this.attr=t,this.value=n}apply(t){let n=Object.create(null);for(let i in t.attrs)n[i]=t.attrs[i];n[this.attr]=this.value;let r=t.type.create(n,t.content,t.marks);return bn.ok(r)}getMap(){return Fr.empty}invert(t){return new vd(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new vd(n.attr,n.value)}}ir.jsonID("docAttr",vd);let sc=class extends Error{};sc=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n};sc.prototype=Object.create(Error.prototype);sc.prototype.constructor=sc;sc.prototype.name="TransformError";let B6=class{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new bd}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let n=this.maybeStep(t);if(n.failed)throw new sc(n.failed);return this}maybeStep(t){let n=t.apply(this.doc);return n.failed||this.addStep(t,n.doc),n}get docChanged(){return this.steps.length>0}addStep(t,n){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=n}replace(t,n=t,r=Ne.empty){let i=Om(this.doc,t,n,r);return i&&this.step(i),this}replaceWith(t,n,r){return this.replace(t,n,new Ne(ye.from(r),0,0))}delete(t,n){return this.replace(t,n,Ne.empty)}insert(t,n){return this.replaceWith(t,t,n)}replaceRange(t,n,r){return HY(this,t,n,r),this}replaceRangeWith(t,n,r){return FY(this,t,n,r),this}deleteRange(t,n){return UY(this,t,n),this}lift(t,n){return AY(this,t,n),this}join(t,n=1){return IY(this,t,n),this}wrap(t,n){return DY(this,t,n),this}setBlockType(t,n=t,r,i=null){return RY(this,t,n,r,i),this}setNodeMarkup(t,n,r=null,i){return OY(this,t,n,r,i),this}setNodeAttribute(t,n,r){return this.step(new Jl(t,n,r)),this}setDocAttribute(t,n){return this.step(new vd(t,n)),this}addNodeMark(t,n){return this.step(new Do(t,n)),this}removeNodeMark(t,n){let r=this.doc.nodeAt(t);if(!r)throw new RangeError("No node at position "+t);if(n instanceof kt)n.isInSet(r.marks)&&this.step(new Pa(t,n));else{let i=r.marks,s,o=[];for(;s=n.isInSet(i);)o.push(new Pa(t,s)),i=s.removeFromSet(i);for(let l=o.length-1;l>=0;l--)this.step(o[l])}return this}split(t,n=1,r){return LY(this,t,n,r),this}addMark(t,n,r){return kY(this,t,n,r),this}removeMark(t,n,r){return TY(this,t,n,r),this}clearIncompatible(t,n,r){return gk(this,t,n,r),this}};const nb=Object.create(null);let Ze=class{constructor(t,n,r){this.$anchor=t,this.$head=n,this.ranges=r||[new $Y(t.min(n),t.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let n=0;n<t.length;n++)if(t[n].$from.pos!=t[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,n=Ne.empty){let r=n.content.lastChild,i=null;for(let l=0;l<n.openEnd;l++)i=r,r=r.lastChild;let s=t.steps.length,o=this.ranges;for(let l=0;l<o.length;l++){let{$from:u,$to:d}=o[l],h=t.mapping.slice(s);t.replaceRange(h.map(u.pos),h.map(d.pos),l?Ne.empty:n),l==0&&sD(t,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(t,n){let r=t.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:l}=i[s],u=t.mapping.slice(r),d=u.map(o.pos),h=u.map(l.pos);s?t.deleteRange(d,h):(t.replaceRangeWith(d,h,n),sD(t,r,n.isInline?-1:1))}}static findFrom(t,n,r=!1){let i=t.parent.inlineContent?new Ke(t):zl(t.node(0),t.parent,t.pos,t.index(),n,r);if(i)return i;for(let s=t.depth-1;s>=0;s--){let o=n<0?zl(t.node(0),t.node(s),t.before(s+1),t.index(s),n,r):zl(t.node(0),t.node(s),t.after(s+1),t.index(s)+1,n,r);if(o)return o}return null}static near(t,n=1){return this.findFrom(t,n)||this.findFrom(t,-n)||new $r(t.node(0))}static atStart(t){return zl(t,t,0,0,1)||new $r(t)}static atEnd(t){return zl(t,t,t.content.size,t.childCount,-1)||new $r(t)}static fromJSON(t,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=nb[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in nb)throw new RangeError("Duplicate use of selection JSON ID "+t);return nb[t]=n,n.prototype.jsonID=t,n}getBookmark(){return Ke.between(this.$anchor,this.$head).getBookmark()}};Ze.prototype.visible=!0;class $Y{constructor(t,n){this.$from=t,this.$to=n}}let rD=!1;function iD(e){!rD&&!e.parent.inlineContent&&(rD=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class Ke extends Ze{constructor(t,n=t){iD(t),iD(n),super(t,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,n){let r=t.resolve(n.map(this.head));if(!r.parent.inlineContent)return Ze.near(r);let i=t.resolve(n.map(this.anchor));return new Ke(i.parent.inlineContent?i:r,r)}replace(t,n=Ne.empty){if(super.replace(t,n),n==Ne.empty){let r=this.$from.marksAcross(this.$to);r&&t.ensureMarks(r)}}eq(t){return t instanceof Ke&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new Lm(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Ke(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,r=n){let i=t.resolve(n);return new this(i,r==n?i:t.resolve(r))}static between(t,n,r){let i=t.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=Ze.findFrom(n,r,!0)||Ze.findFrom(n,-r,!0);if(s)n=s.$head;else return Ze.near(n,r)}return t.parent.inlineContent||(i==0?t=n:(t=(Ze.findFrom(t,-r,!0)||Ze.findFrom(t,r,!0)).$anchor,t.pos<n.pos!=i<0&&(t=n))),new Ke(t,n)}}Ze.jsonID("text",Ke);class Lm{constructor(t,n){this.anchor=t,this.head=n}map(t){return new Lm(t.map(this.anchor),t.map(this.head))}resolve(t){return Ke.between(t.resolve(this.anchor),t.resolve(this.head))}}class ze extends Ze{constructor(t){let n=t.nodeAfter,r=t.node(0).resolve(t.pos+n.nodeSize);super(t,r),this.node=n}map(t,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=t.resolve(i);return r?Ze.near(s):new ze(s)}content(){return new Ne(ye.from(this.node),0,0)}eq(t){return t instanceof ze&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new bk(this.anchor)}static fromJSON(t,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new ze(t.resolve(n.anchor))}static create(t,n){return new ze(t.resolve(n))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}}ze.prototype.visible=!1;Ze.jsonID("node",ze);class bk{constructor(t){this.anchor=t}map(t){let{deleted:n,pos:r}=t.mapResult(this.anchor);return n?new Lm(r,r):new bk(r)}resolve(t){let n=t.resolve(this.anchor),r=n.nodeAfter;return r&&ze.isSelectable(r)?new ze(n):Ze.near(n)}}class $r extends Ze{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,n=Ne.empty){if(n==Ne.empty){t.delete(0,t.doc.content.size);let r=Ze.atStart(t.doc);r.eq(t.selection)||t.setSelection(r)}else super.replace(t,n)}toJSON(){return{type:"all"}}static fromJSON(t){return new $r(t)}map(t){return new $r(t)}eq(t){return t instanceof $r}getBookmark(){return GY}}Ze.jsonID("all",$r);const GY={map(){return this},resolve(e){return new $r(e)}};function zl(e,t,n,r,i,s=!1){if(t.inlineContent)return Ke.create(e,n);for(let o=r-(i>0?0:1);i>0?o<t.childCount:o>=0;o+=i){let l=t.child(o);if(l.isAtom){if(!s&&ze.isSelectable(l))return ze.create(e,n-(i<0?l.nodeSize:0))}else{let u=zl(e,l,n+i,i<0?l.childCount:0,i,s);if(u)return u}n+=l.nodeSize*i}return null}function sD(e,t,n){let r=e.steps.length-1;if(r<t)return;let i=e.steps[r];if(!(i instanceof In||i instanceof Bn))return;let s=e.mapping.maps[r],o;s.forEach((l,u,d,h)=>{o==null&&(o=h)}),e.setSelection(Ze.near(e.doc.resolve(o),n))}const oD=1,kh=2,aD=4;class WY extends B6{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|oD)&~kh,this.storedMarks=null,this}get selectionSet(){return(this.updated&oD)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=kh,this}ensureMarks(t){return kt.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&kh)>0}addStep(t,n){super.addStep(t,n),this.updated=this.updated&~kh,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,n=!0){let r=this.selection;return n&&(t=t.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||kt.none))),r.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,n,r){let i=this.doc.type.schema;if(n==null)return t?this.replaceSelectionWith(i.text(t),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!t)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(t,s)),this.selection.empty||this.setSelection(Ze.near(this.selection.$to)),this}}setMeta(t,n){return this.meta[typeof t=="string"?t:t.key]=n,this}getMeta(t){return this.meta[typeof t=="string"?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=aD,this}get scrolledIntoView(){return(this.updated&aD)>0}}function lD(e,t){return!t||!e?e:e.bind(t)}class Iu{constructor(t,n,r){this.name=t,this.init=lD(n.init,r),this.apply=lD(n.apply,r)}}const KY=[new Iu("doc",{init(e){return e.doc||e.schema.topNodeType.createAndFill()},apply(e){return e.doc}}),new Iu("selection",{init(e,t){return e.selection||Ze.atStart(t.doc)},apply(e){return e.selection}}),new Iu("storedMarks",{init(e){return e.storedMarks||null},apply(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new Iu("scrollToSelection",{init(){return 0},apply(e,t){return e.scrolledIntoView?t+1:t}})];class rb{constructor(t,n){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=KY.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Iu(r.key,r.spec.state,r))})}}class Kl{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let n=[t],r=this.applyInner(t),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let l=this.config.plugins[o];if(l.spec.appendTransaction){let u=i?i[o].n:0,d=i?i[o].state:this,h=u<n.length&&l.spec.appendTransaction.call(l,u?n.slice(u):n,d,r);if(h&&r.filterTransaction(h,o)){if(h.setMeta("appendedTransaction",t),!i){i=[];for(let p=0;p<this.config.plugins.length;p++)i.push(p<o?{state:r,n:n.length}:{state:this,n:0})}n.push(h),r=r.applyInner(h),s=!0}i&&(i[o]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new Kl(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(t,this[s.name],this,n)}return n}get tr(){return new WY(this)}static create(t){let n=new rb(t.doc?t.doc.type.schema:t.schema,t.plugins),r=new Kl(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(t,r);return r}reconfigure(t){let n=new rb(this.schema,t.plugins),r=n.fields,i=new Kl(n);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(t,i)}return i}toJSON(t){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),t&&typeof t=="object")for(let r in t){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=t[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(t,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let i=new rb(t.schema,t.plugins),s=new Kl(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=jo.fromJSON(t.schema,n.doc);else if(o.name=="selection")s.selection=Ze.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(t.schema.markFromJSON));else{if(r)for(let l in r){let u=r[l],d=u.spec.state;if(u.key==o.name&&d&&d.fromJSON&&Object.prototype.hasOwnProperty.call(n,l)){s[o.name]=d.fromJSON.call(u,t,n[l],s);return}}s[o.name]=o.init(t,s)}}),s}}function z6(e,t,n){for(let r in e){let i=e[r];i instanceof Function?i=i.bind(t):r=="handleDOMEvents"&&(i=z6(i,t,{})),n[r]=i}return n}class nn{constructor(t){this.spec=t,this.props={},t.props&&z6(t.props,this,this.props),this.key=t.key?t.key.key:q6("plugin")}getState(t){return t[this.key]}}const ib=Object.create(null);function q6(e){return e in ib?e+"$"+ ++ib[e]:(ib[e]=0,e+"$")}class qn{constructor(t="key"){this.key=q6(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}const Wn=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},oc=function(e){let t=e.assignedSlot||e.parentNode;return t&&t.nodeType==11?t.host:t};let HE=null;const _s=function(e,t,n){let r=HE||(HE=document.createRange());return r.setEnd(e,n??e.nodeValue.length),r.setStart(e,t||0),r},YY=function(){HE=null},Ia=function(e,t,n,r){return n&&(cD(e,t,n,r,-1)||cD(e,t,n,r,1))},XY=/^(img|br|input|textarea|hr)$/i;function cD(e,t,n,r,i){for(var s;;){if(e==n&&t==r)return!0;if(t==(i<0?0:ci(e))){let o=e.parentNode;if(!o||o.nodeType!=1||Kd(e)||XY.test(e.nodeName)||e.contentEditable=="false")return!1;t=Wn(e)+(i<0?0:1),e=o}else if(e.nodeType==1){let o=e.childNodes[t+(i<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)t+=i;else return!1;else e=o,t=i<0?ci(e):0}else return!1}}function ci(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function ZY(e,t){for(;;){if(e.nodeType==3&&t)return e;if(e.nodeType==1&&t>0){if(e.contentEditable=="false")return null;e=e.childNodes[t-1],t=ci(e)}else if(e.parentNode&&!Kd(e))t=Wn(e),e=e.parentNode;else return null}}function JY(e,t){for(;;){if(e.nodeType==3&&t<e.nodeValue.length)return e;if(e.nodeType==1&&t<e.childNodes.length){if(e.contentEditable=="false")return null;e=e.childNodes[t],t=0}else if(e.parentNode&&!Kd(e))t=Wn(e)+1,e=e.parentNode;else return null}}function QY(e,t,n){for(let r=t==0,i=t==ci(e);r||i;){if(e==n)return!0;let s=Wn(e);if(e=e.parentNode,!e)return!1;r=r&&s==0,i=i&&s==ci(e)}}function Kd(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const Pm=function(e){return e.focusNode&&Ia(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function ya(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function eX(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function tX(e,t,n){if(e.caretPositionFromPoint)try{let r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:Math.min(ci(r.offsetNode),r.offset)}}catch{}if(e.caretRangeFromPoint){let r=e.caretRangeFromPoint(t,n);if(r)return{node:r.startContainer,offset:Math.min(ci(r.startContainer),r.startOffset)}}}const es=typeof navigator<"u"?navigator:null,uD=typeof document<"u"?document:null,Go=es&&es.userAgent||"",FE=/Edge\/(\d+)/.exec(Go),V6=/MSIE \d/.exec(Go),UE=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Go),Tr=!!(V6||UE||FE),Oo=V6?document.documentMode:UE?+UE[1]:FE?+FE[1]:0,fi=!Tr&&/gecko\/(\d+)/i.test(Go);fi&&+(/Firefox\/(\d+)/.exec(Go)||[0,0])[1];const $E=!Tr&&/Chrome\/(\d+)/.exec(Go),rr=!!$E,H6=$E?+$E[1]:0,dr=!Tr&&!!es&&/Apple Computer/.test(es.vendor),ac=dr&&(/Mobile\/\w+/.test(Go)||!!es&&es.maxTouchPoints>2),li=ac||(es?/Mac/.test(es.platform):!1),nX=es?/Win/.test(es.platform):!1,Ds=/Android \d/.test(Go),Yd=!!uD&&"webkitFontSmoothing"in uD.documentElement.style,rX=Yd?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function iX(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function Cs(e,t){return typeof e=="number"?e:e[t]}function sX(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function dD(e,t,n){let r=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,s=e.dom.ownerDocument;for(let o=n||e.dom;o;){if(o.nodeType!=1){o=oc(o);continue}let l=o,u=l==s.body,d=u?iX(s):sX(l),h=0,p=0;if(t.top<d.top+Cs(r,"top")?p=-(d.top-t.top+Cs(i,"top")):t.bottom>d.bottom-Cs(r,"bottom")&&(p=t.bottom-t.top>d.bottom-d.top?t.top+Cs(i,"top")-d.top:t.bottom-d.bottom+Cs(i,"bottom")),t.left<d.left+Cs(r,"left")?h=-(d.left-t.left+Cs(i,"left")):t.right>d.right-Cs(r,"right")&&(h=t.right-d.right+Cs(i,"right")),h||p)if(u)s.defaultView.scrollBy(h,p);else{let b=l.scrollLeft,x=l.scrollTop;p&&(l.scrollTop+=p),h&&(l.scrollLeft+=h);let S=l.scrollLeft-b,w=l.scrollTop-x;t={left:t.left-S,top:t.top-w,right:t.right-S,bottom:t.bottom-w}}let m=u?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(m))break;o=m=="absolute"?o.offsetParent:oc(o)}}function oX(e){let t=e.dom.getBoundingClientRect(),n=Math.max(0,t.top),r,i;for(let s=(t.left+t.right)/2,o=n+1;o<Math.min(innerHeight,t.bottom);o+=5){let l=e.root.elementFromPoint(s,o);if(!l||l==e.dom||!e.dom.contains(l))continue;let u=l.getBoundingClientRect();if(u.top>=n-20){r=l,i=u.top;break}}return{refDOM:r,refTop:i,stack:F6(e.dom)}}function F6(e){let t=[],n=e.ownerDocument;for(let r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=oc(r));return t}function aX({refDOM:e,refTop:t,stack:n}){let r=e?e.getBoundingClientRect().top:0;U6(n,r==0?0:r-t)}function U6(e,t){for(let n=0;n<e.length;n++){let{dom:r,top:i,left:s}=e[n];r.scrollTop!=i+t&&(r.scrollTop=i+t),r.scrollLeft!=s&&(r.scrollLeft=s)}}let jl=null;function lX(e){if(e.setActive)return e.setActive();if(jl)return e.focus(jl);let t=F6(e);e.focus(jl==null?{get preventScroll(){return jl={preventScroll:!0},!0}}:void 0),jl||(jl=!1,U6(t,0))}function $6(e,t){let n,r=2e8,i,s=0,o=t.top,l=t.top,u,d;for(let h=e.firstChild,p=0;h;h=h.nextSibling,p++){let m;if(h.nodeType==1)m=h.getClientRects();else if(h.nodeType==3)m=_s(h).getClientRects();else continue;for(let b=0;b<m.length;b++){let x=m[b];if(x.top<=o&&x.bottom>=l){o=Math.max(x.bottom,o),l=Math.min(x.top,l);let S=x.left>t.left?x.left-t.left:x.right<t.left?t.left-x.right:0;if(S<r){n=h,r=S,i=S&&n.nodeType==3?{left:x.right<t.left?x.right:x.left,top:t.top}:t,h.nodeType==1&&S&&(s=p+(t.left>=(x.left+x.right)/2?1:0));continue}}else x.top>t.top&&!u&&x.left<=t.left&&x.right>=t.left&&(u=h,d={left:Math.max(x.left,Math.min(x.right,t.left)),top:x.top});!n&&(t.left>=x.right&&t.top>=x.top||t.left>=x.left&&t.top>=x.bottom)&&(s=p+1)}}return!n&&u&&(n=u,i=d,r=0),n&&n.nodeType==3?cX(n,i):!n||r&&n.nodeType==1?{node:e,offset:s}:$6(n,i)}function cX(e,t){let n=e.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(e,i+1),r.setStart(e,i);let s=So(r,1);if(s.top!=s.bottom&&vk(t,s))return{node:e,offset:i+(t.left>=(s.left+s.right)/2?1:0)}}return{node:e,offset:0}}function vk(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function uX(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}function dX(e,t,n){let{node:r,offset:i}=$6(t,n),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return e.docView.posFromDOM(r,i,s)}function fX(e,t,n,r){let i=-1;for(let s=t,o=!1;s!=e.dom;){let l=e.docView.nearestDesc(s,!0),u;if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)&&((u=l.dom.getBoundingClientRect()).width||u.height)&&(l.node.isBlock&&l.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(l.dom.nodeName)&&(!o&&u.left>r.left||u.top>r.top?i=l.posBefore:(!o&&u.right<r.left||u.bottom<r.top)&&(i=l.posAfter),o=!0),!l.contentDOM&&i<0&&!l.node.isText))return(l.node.isBlock?r.top<(u.top+u.bottom)/2:r.left<(u.left+u.right)/2)?l.posBefore:l.posAfter;s=l.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,n,-1)}function G6(e,t,n){let r=e.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let o=e.childNodes[s];if(o.nodeType==1){let l=o.getClientRects();for(let u=0;u<l.length;u++){let d=l[u];if(vk(t,d))return G6(o,t,d)}}if((s=(s+1)%r)==i)break}return e}function hX(e,t){let n=e.dom.ownerDocument,r,i=0,s=tX(n,t.left,t.top);s&&({node:r,offset:i}=s);let o=(e.root.elementFromPoint?e.root:n).elementFromPoint(t.left,t.top),l;if(!o||!e.dom.contains(o.nodeType!=1?o.parentNode:o)){let d=e.dom.getBoundingClientRect();if(!vk(t,d)||(o=G6(e.dom,t,d),!o))return null}if(dr)for(let d=o;r&&d;d=oc(d))d.draggable&&(r=void 0);if(o=uX(o,t),r){if(fi&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let h=r.childNodes[i],p;h.nodeName=="IMG"&&(p=h.getBoundingClientRect()).right<=t.left&&p.bottom>t.top&&i++}let d;Yd&&i&&r.nodeType==1&&(d=r.childNodes[i-1]).nodeType==1&&d.contentEditable=="false"&&d.getBoundingClientRect().top>=t.top&&i--,r==e.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&t.top>r.lastChild.getBoundingClientRect().bottom?l=e.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(l=fX(e,r,i,t))}l==null&&(l=dX(e,o,t));let u=e.docView.nearestDesc(o,!0);return{pos:l,inside:u?u.posAtStart-u.border:-1}}function fD(e){return e.top<e.bottom||e.left<e.right}function So(e,t){let n=e.getClientRects();if(n.length){let r=n[t<0?0:n.length-1];if(fD(r))return r}return Array.prototype.find.call(n,fD)||e.getBoundingClientRect()}const pX=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function W6(e,t,n){let{node:r,offset:i,atom:s}=e.docView.domFromPos(t,n<0?-1:1),o=Yd||fi;if(r.nodeType==3)if(o&&(pX.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let u=So(_s(r,i,i),n);if(fi&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let d=So(_s(r,i-1,i-1),-1);if(d.top==u.top){let h=So(_s(r,i,i+1),-1);if(h.top!=u.top)return Eu(h,h.left<d.left)}}return u}else{let u=i,d=i,h=n<0?1:-1;return n<0&&!i?(d++,h=-1):n>=0&&i==r.nodeValue.length?(u--,h=1):n<0?u--:d++,Eu(So(_s(r,u,d),h),h<0)}if(!e.state.doc.resolve(t-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==ci(r))){let u=r.childNodes[i-1];if(u.nodeType==1)return sb(u.getBoundingClientRect(),!1)}if(s==null&&i<ci(r)){let u=r.childNodes[i];if(u.nodeType==1)return sb(u.getBoundingClientRect(),!0)}return sb(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==ci(r))){let u=r.childNodes[i-1],d=u.nodeType==3?_s(u,ci(u)-(o?0:1)):u.nodeType==1&&(u.nodeName!="BR"||!u.nextSibling)?u:null;if(d)return Eu(So(d,1),!1)}if(s==null&&i<ci(r)){let u=r.childNodes[i];for(;u.pmViewDesc&&u.pmViewDesc.ignoreForCoords;)u=u.nextSibling;let d=u?u.nodeType==3?_s(u,0,o?0:1):u.nodeType==1?u:null:null;if(d)return Eu(So(d,-1),!0)}return Eu(So(r.nodeType==3?_s(r):r,-n),n>=0)}function Eu(e,t){if(e.width==0)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function sb(e,t){if(e.height==0)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function K6(e,t,n){let r=e.state,i=e.root.activeElement;r!=t&&e.updateState(t),i!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),i!=e.dom&&i&&i.focus()}}function mX(e,t,n){let r=t.selection,i=n=="up"?r.$from:r.$to;return K6(e,t,()=>{let{node:s}=e.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let l=e.docView.nearestDesc(s,!0);if(!l)break;if(l.node.isBlock){s=l.contentDOM||l.dom;break}s=l.dom.parentNode}let o=W6(e,i.pos,1);for(let l=s.firstChild;l;l=l.nextSibling){let u;if(l.nodeType==1)u=l.getClientRects();else if(l.nodeType==3)u=_s(l,0,l.nodeValue.length).getClientRects();else continue;for(let d=0;d<u.length;d++){let h=u[d];if(h.bottom>h.top+1&&(n=="up"?o.top-h.top>(h.bottom-o.top)*2:h.bottom-o.bottom>(o.bottom-h.top)*2))return!1}}return!0})}const gX=/[\u0590-\u08ac]/;function yX(e,t,n){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,l=e.domSelection();return l?!gX.test(r.parent.textContent)||!l.modify?n=="left"||n=="backward"?s:o:K6(e,t,()=>{let{focusNode:u,focusOffset:d,anchorNode:h,anchorOffset:p}=e.domSelectionRange(),m=l.caretBidiLevel;l.modify("move",n,"character");let b=r.depth?e.docView.domAfterPos(r.before()):e.dom,{focusNode:x,focusOffset:S}=e.domSelectionRange(),w=x&&!b.contains(x.nodeType==1?x:x.parentNode)||u==x&&d==S;try{l.collapse(h,p),u&&(u!=h||d!=p)&&l.extend&&l.extend(u,d)}catch{}return m!=null&&(l.caretBidiLevel=m),w}):r.pos==r.start()||r.pos==r.end()}let hD=null,pD=null,mD=!1;function bX(e,t,n){return hD==t&&pD==n?mD:(hD=t,pD=n,mD=n=="up"||n=="down"?mX(e,t,n):yX(e,t,n))}const hi=0,gD=1,xa=2,ts=3;class Xd{constructor(t,n,r,i){this.parent=t,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=hi,r.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,n,r){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let n=0;n<this.children.length;n++)t+=this.children[n].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==t)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,n,r){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(r<0){let s,o;if(t==this.contentDOM)s=t.childNodes[n-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(t==this.contentDOM)s=t.childNodes[n];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(t==this.dom&&this.contentDOM)i=n>Wn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=t;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==t.childNodes.length)for(let s=t;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(t,n=!1){for(let r=!0,i=t;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!n||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(t.nodeType==1?t:t.parentNode):o==t))r=!1;else return s}}getDesc(t){let n=t.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(t,n,r){for(let i=t;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(t,n,r)}return-1}descAt(t){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==t&&s!=r){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let l=i.children[o];if(l.size){i=l;break}}return i}if(t<s)return i.descAt(t-r-i.border);r=s}}domFromPos(t,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],l=s+o.size;if(l>t||o instanceof X6){i=t-s;break}s=l}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof Y6&&s.side>=0;r--);if(n<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?Wn(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?Wn(s.dom):this.contentDOM.childNodes.length}}}parseRange(t,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:t,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,l=0;;l++){let u=this.children[l],d=o+u.size;if(i==-1&&t<=d){let h=o+u.border;if(t>=h&&n<=d-u.border&&u.node&&u.contentDOM&&this.contentDOM.contains(u.contentDOM))return u.parseRange(t,n,h);t=o;for(let p=l;p>0;p--){let m=this.children[p-1];if(m.size&&m.dom.parentNode==this.contentDOM&&!m.emptyChildAt(1)){i=Wn(m.dom)+1;break}t-=m.size}i==-1&&(i=0)}if(i>-1&&(d>n||l==this.children.length-1)){n=d;for(let h=l+1;h<this.children.length;h++){let p=this.children[h];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(-1)){s=Wn(p.dom);break}n+=p.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=d}return{node:this.contentDOM,from:t,to:n,fromOffset:i,toOffset:s}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[t<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(t)}domAfterPos(t){let{node:n,offset:r}=this.domFromPos(t,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[r]}setSelection(t,n,r,i=!1){let s=Math.min(t,n),o=Math.max(t,n);for(let b=0,x=0;b<this.children.length;b++){let S=this.children[b],w=x+S.size;if(s>x&&o<w)return S.setSelection(t-x-S.border,n-x-S.border,r,i);x=w}let l=this.domFromPos(t,t?-1:1),u=n==t?l:this.domFromPos(n,n?-1:1),d=r.root.getSelection(),h=r.domSelectionRange(),p=!1;if((fi||dr)&&t==n){let{node:b,offset:x}=l;if(b.nodeType==3){if(p=!!(x&&b.nodeValue[x-1]==`
`),p&&x==b.nodeValue.length)for(let S=b,w;S;S=S.parentNode){if(w=S.nextSibling){w.nodeName=="BR"&&(l=u={node:w.parentNode,offset:Wn(w)+1});break}let C=S.pmViewDesc;if(C&&C.node&&C.node.isBlock)break}}else{let S=b.childNodes[x-1];p=S&&(S.nodeName=="BR"||S.contentEditable=="false")}}if(fi&&h.focusNode&&h.focusNode!=u.node&&h.focusNode.nodeType==1){let b=h.focusNode.childNodes[h.focusOffset];b&&b.contentEditable=="false"&&(i=!0)}if(!(i||p&&dr)&&Ia(l.node,l.offset,h.anchorNode,h.anchorOffset)&&Ia(u.node,u.offset,h.focusNode,h.focusOffset))return;let m=!1;if((d.extend||t==n)&&!(p&&fi)){d.collapse(l.node,l.offset);try{t!=n&&d.extend(u.node,u.offset),m=!0}catch{}}if(!m){if(t>n){let x=l;l=u,u=x}let b=document.createRange();b.setEnd(u.node,u.offset),b.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(b)}}ignoreMutation(t){return!this.contentDOM&&t.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?t<=o&&n>=r:t<o&&n>r){let l=r+s.border,u=o-s.border;if(t>=l&&n<=u){this.dirty=t==r||n==o?xa:gD,t==l&&n==u&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=ts:s.markDirty(t-l,n-l);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?xa:ts}r=o}this.dirty=xa}markParentsDirty(){let t=1;for(let n=this.parent;n;n=n.parent,t++){let r=t==1?xa:gD;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(t){return!1}}class Y6 extends Xd{constructor(t,n,r,i){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let l=document.createElement("span");l.appendChild(o),o=l}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(t,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(t){return this.dirty==hi&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let n=this.widget.spec.stopEvent;return n?n(t):!1}ignoreMutation(t){return t.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class vX extends Xd{constructor(t,n,r,i){super(t,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(t,n){return t!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return t.type==="characterData"&&t.target.nodeValue==t.oldValue}}class Ba extends Xd{constructor(t,n,r,i,s){super(t,[],r,i),this.mark=n,this.spec=s}static create(t,n,r,i){let s=i.nodeViews[n.type.name],o=s&&s(n,i,r);return(!o||!o.dom)&&(o=Ya.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new Ba(t,n,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&ts||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(t){return this.dirty!=ts&&this.mark.eq(t)}markDirty(t,n){if(super.markDirty(t,n),this.dirty!=hi){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=hi}}slice(t,n,r){let i=Ba.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;n<o&&(s=WE(s,n,o,r)),t>0&&(s=WE(s,0,t,r));for(let l=0;l<s.length;l++)s[l].parent=i;return i.children=s,i}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Lo extends Xd{constructor(t,n,r,i,s,o,l,u,d){super(t,[],s,o),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=l}static create(t,n,r,i,s,o){let l=s.nodeViews[n.type.name],u,d=l&&l(n,s,()=>{if(!u)return o;if(u.parent)return u.parent.posBeforeChild(u)},r,i),h=d&&d.dom,p=d&&d.contentDOM;if(n.isText){if(!h)h=document.createTextNode(n.text);else if(h.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else h||({dom:h,contentDOM:p}=Ya.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!p&&!n.isText&&h.nodeName!="BR"&&(h.hasAttribute("contenteditable")||(h.contentEditable="false"),n.type.spec.draggable&&(h.draggable=!0));let m=h;return h=Q6(h,r,n),d?u=new xX(t,n,r,i,h,p||null,m,d,s,o+1):n.isText?new Im(t,n,r,i,h,m,s):new Lo(t,n,r,i,h,p||null,m,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(t.preserveWhitespace="full"),!this.contentDOM)t.getContent=()=>this.node.content;else if(!this.contentLost)t.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){t.contentElement=r.dom.parentNode;break}}t.contentElement||(t.getContent=()=>ye.empty)}return t}matchesNode(t,n,r){return this.dirty==hi&&t.eq(this.node)&&Ep(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,n){let r=this.node.inlineContent,i=n,s=t.composing?this.localCompositionInfo(t,n):null,o=s&&s.pos>-1?s:null,l=s&&s.pos<0,u=new SX(this,o&&o.node,t);kX(this.node,this.innerDeco,(d,h,p)=>{d.spec.marks?u.syncToMarks(d.spec.marks,r,t):d.type.side>=0&&!p&&u.syncToMarks(h==this.node.childCount?kt.none:this.node.child(h).marks,r,t),u.placeWidget(d,t,i)},(d,h,p,m)=>{u.syncToMarks(d.marks,r,t);let b;u.findNodeMatch(d,h,p,m)||l&&t.state.selection.from>i&&t.state.selection.to<i+d.nodeSize&&(b=u.findIndexWithChild(s.node))>-1&&u.updateNodeAt(d,h,p,b,t)||u.updateNextNode(d,h,p,t,m,i)||u.addNode(d,h,p,t,i),i+=d.nodeSize}),u.syncToMarks([],r,t),this.node.isTextblock&&u.addTextblockHacks(),u.destroyRest(),(u.changed||this.dirty==xa)&&(o&&this.protectLocalComposition(t,o),Z6(this.contentDOM,this.children,t),ac&&TX(this.dom))}localCompositionInfo(t,n){let{from:r,to:i}=t.state.selection;if(!(t.state.selection instanceof Ke)||r<n||i>n+this.node.content.size)return null;let s=t.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,l=NX(this.node.content,o,r-n,i-n);return l<0?null:{node:s,pos:l,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(t,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new vX(this,s,n,i);t.input.compositionNodes.push(o),this.children=WE(this.children,r,r+i.length,t,o)}update(t,n,r,i){return this.dirty==ts||!t.sameMarkup(this.node)?!1:(this.updateInner(t,n,r,i),!0)}updateInner(t,n,r,i){this.updateOuterDeco(n),this.node=t,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=hi}updateOuterDeco(t){if(Ep(t,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=J6(this.dom,this.nodeDOM,GE(this.outerDeco,this.node,n),GE(t,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function yD(e,t,n,r,i){Q6(r,t,e);let s=new Lo(void 0,e,t,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class Im extends Lo{constructor(t,n,r,i,s,o,l){super(t,n,r,i,s,null,o,l,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,n,r,i){return this.dirty==ts||this.dirty!=hi&&!this.inParent()||!t.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=hi||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=t,this.dirty=hi,!0)}inParent(){let t=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,n,r){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(t,n,r)}ignoreMutation(t){return t.type!="characterData"&&t.type!="selection"}slice(t,n,r){let i=this.node.cut(t,n),s=document.createTextNode(i.text);return new Im(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(t,n){super.markDirty(t,n),this.dom!=this.nodeDOM&&(t==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=ts)}get domAtom(){return!1}isText(t){return this.node.text==t}}class X6 extends Xd{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==hi&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class xX extends Lo{constructor(t,n,r,i,s,o,l,u,d,h){super(t,n,r,i,s,o,l,d,h),this.spec=u}update(t,n,r,i){if(this.dirty==ts)return!1;if(this.spec.update&&(this.node.type==t.type||this.spec.multiType)){let s=this.spec.update(t,n,r);return s&&this.updateInner(t,n,r,i),s}else return!this.contentDOM&&!t.isLeaf?!1:super.update(t,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,n,r,i){this.spec.setSelection?this.spec.setSelection(t,n,r.root):super.setSelection(t,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return this.spec.stopEvent?this.spec.stopEvent(t):!1}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function Z6(e,t,n){let r=e.firstChild,i=!1;for(let s=0;s<t.length;s++){let o=t[s],l=o.dom;if(l.parentNode==e){for(;l!=r;)r=bD(r),i=!0;r=r.nextSibling}else i=!0,e.insertBefore(l,r);if(o instanceof Ba){let u=r?r.previousSibling:e.lastChild;Z6(o.contentDOM,o.children,n),r=u?u.nextSibling:e.firstChild}}for(;r;)r=bD(r),i=!0;i&&n.trackWrites==e&&(n.trackWrites=null)}const Ju=function(e){e&&(this.nodeName=e)};Ju.prototype=Object.create(null);const wa=[new Ju];function GE(e,t,n){if(e.length==0)return wa;let r=n?wa[0]:new Ju,i=[r];for(let s=0;s<e.length;s++){let o=e[s].type.attrs;if(o){o.nodeName&&i.push(r=new Ju(o.nodeName));for(let l in o){let u=o[l];u!=null&&(n&&i.length==1&&i.push(r=new Ju(t.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+u:l=="style"?r.style=(r.style?r.style+";":"")+u:l!="nodeName"&&(r[l]=u))}}}return i}function J6(e,t,n,r){if(n==wa&&r==wa)return t;let i=t;for(let s=0;s<r.length;s++){let o=r[s],l=n[s];if(s){let u;l&&l.nodeName==o.nodeName&&i!=e&&(u=i.parentNode)&&u.nodeName.toLowerCase()==o.nodeName||(u=document.createElement(o.nodeName),u.pmIsDeco=!0,u.appendChild(i),l=wa[0]),i=u}wX(i,l||wa[0],o)}return i}function wX(e,t,n){for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&e.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){let r=t.class?t.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&e.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&e.classList.add(i[s]);e.classList.length==0&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(t.style);)e.style.removeProperty(i[1])}n.style&&(e.style.cssText+=n.style)}}function Q6(e,t,n){return J6(e,e,wa,GE(t,n,e.nodeType!=1))}function Ep(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function bD(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class SX{constructor(t,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=EX(t.node.content,t)}destroyBetween(t,n){if(t!=n){for(let r=t;r<n;r++)this.top.children[r].destroy();this.top.children.splice(t,n-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,n,r){let i=0,s=this.stack.length>>1,o=Math.min(s,t.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(t[i])&&t[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=hi,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<t.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let u=this.index;u<Math.min(this.index+3,this.top.children.length);u++){let d=this.top.children[u];if(d.matchesMark(t[s])&&!this.isLocked(d.dom)){l=u;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let u=Ba.create(this.top,t[s],n,r);this.top.children.splice(this.index,0,u),this.top=u,this.changed=!0}this.index=0,s++}}findNodeMatch(t,n,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(t,n,r))s=this.top.children.indexOf(o,this.index);else for(let l=this.index,u=Math.min(this.top.children.length,l+5);l<u;l++){let d=this.top.children[l];if(d.matchesNode(t,n,r)&&!this.preMatch.matched.has(d)){s=l;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(t,n,r,i,s){let o=this.top.children[i];return o.dirty==ts&&o.dom==o.contentDOM&&(o.dirty=xa),o.update(t,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(t){for(;;){let n=t.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=t.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}t=n}}updateNextNode(t,n,r,i,s,o){for(let l=this.index;l<this.top.children.length;l++){let u=this.top.children[l];if(u instanceof Lo){let d=this.preMatch.matched.get(u);if(d!=null&&d!=s)return!1;let h=u.dom,p,m=this.isLocked(h)&&!(t.isText&&u.node&&u.node.isText&&u.nodeDOM.nodeValue==t.text&&u.dirty!=ts&&Ep(n,u.outerDeco));if(!m&&u.update(t,n,r,i))return this.destroyBetween(this.index,l),u.dom!=h&&(this.changed=!0),this.index++,!0;if(!m&&(p=this.recreateWrapper(u,t,n,r,i,o)))return this.destroyBetween(this.index,l),this.top.children[this.index]=p,p.contentDOM&&(p.dirty=xa,p.updateChildren(i,o+1),p.dirty=hi),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,n,r,i,s,o){if(t.dirty||n.isAtom||!t.children.length||!t.node.content.eq(n.content)||!Ep(r,t.outerDeco)||!i.eq(t.innerDeco))return null;let l=Lo.create(this.top,n,r,i,s,o);if(l.contentDOM){l.children=t.children,t.children=[];for(let u of l.children)u.parent=l}return t.destroy(),l}addNode(t,n,r,i,s){let o=Lo.create(this.top,t,n,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(t,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(t)&&(t==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new Y6(this.top,t,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let t=this.top.children[this.index-1],n=this.top;for(;t instanceof Ba;)n=t,t=n.children[n.children.length-1];(!t||!(t instanceof Im)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((dr||rr)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(t,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(t))this.index++;else{let r=document.createElement(t);t=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),t=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new X6(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||t.nodeType==1&&t.contains(this.lock.parentNode))}}function EX(e,t){let n=t,r=n.children.length,i=e.childCount,s=new Map,o=[];e:for(;i>0;){let l;for(;;)if(r){let d=n.children[r-1];if(d instanceof Ba)n=d,r=d.children.length;else{l=d,r--;break}}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}let u=l.node;if(u){if(u!=e.child(i-1))break;--i,s.set(l,i),o.push(l)}}return{index:i,matched:s,matches:o.reverse()}}function CX(e,t){return e.type.side-t.type.side}function kX(e,t,n,r){let i=t.locals(e),s=0;if(i.length==0){for(let d=0;d<e.childCount;d++){let h=e.child(d);r(h,i,t.forChild(s,h),d),s+=h.nodeSize}return}let o=0,l=[],u=null;for(let d=0;;){let h,p;for(;o<i.length&&i[o].to==s;){let w=i[o++];w.widget&&(h?(p||(p=[h])).push(w):h=w)}if(h)if(p){p.sort(CX);for(let w=0;w<p.length;w++)n(p[w],d,!!u)}else n(h,d,!!u);let m,b;if(u)b=-1,m=u,u=null;else if(d<e.childCount)b=d,m=e.child(d++);else break;for(let w=0;w<l.length;w++)l[w].to<=s&&l.splice(w--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)l.push(i[o++]);let x=s+m.nodeSize;if(m.isText){let w=x;o<i.length&&i[o].from<w&&(w=i[o].from);for(let C=0;C<l.length;C++)l[C].to<w&&(w=l[C].to);w<x&&(u=m.cut(w-s),m=m.cut(0,w-s),x=w,b=-1)}else for(;o<i.length&&i[o].to<x;)o++;let S=m.isInline&&!m.isLeaf?l.filter(w=>!w.inline):l.slice();r(m,S,t.forChild(s,m),b),s=x}}function TX(e){if(e.nodeName=="UL"||e.nodeName=="OL"){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function NX(e,t,n,r){for(let i=0,s=0;i<e.childCount&&s<=r;){let o=e.child(i++),l=s;if(s+=o.nodeSize,!o.isText)continue;let u=o.text;for(;i<e.childCount;){let d=e.child(i++);if(s+=d.nodeSize,!d.isText)break;u+=d.text}if(s>=n){if(s>=r&&u.slice(r-t.length-l,r-l)==t)return r-t.length;let d=l<r?u.lastIndexOf(t,r-l-1):-1;if(d>=0&&d+t.length+l>=n)return l+d;if(n==r&&u.length>=r+t.length-l&&u.slice(r-l,r-l+t.length)==t)return r}}return-1}function WE(e,t,n,r,i){let s=[];for(let o=0,l=0;o<e.length;o++){let u=e[o],d=l,h=l+=u.size;d>=n||h<=t?s.push(u):(d<t&&s.push(u.slice(0,t-d,r)),i&&(s.push(i),i=void 0),h>n&&s.push(u.slice(n-d,u.size,r)))}return s}function xk(e,t=null){let n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;let i=e.docView.nearestDesc(n.focusNode),s=i&&i.size==0,o=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let l=r.resolve(o),u,d;if(Pm(n)){for(u=o;i&&!i.node;)i=i.parent;let p=i.node;if(i&&p.isAtom&&ze.isSelectable(p)&&i.parent&&!(p.isInline&&QY(n.focusNode,n.focusOffset,i.dom))){let m=i.posBefore;d=new ze(o==m?l:r.resolve(m))}}else{if(n instanceof e.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let p=o,m=o;for(let b=0;b<n.rangeCount;b++){let x=n.getRangeAt(b);p=Math.min(p,e.docView.posFromDOM(x.startContainer,x.startOffset,1)),m=Math.max(m,e.docView.posFromDOM(x.endContainer,x.endOffset,-1))}if(p<0)return null;[u,o]=m==e.state.selection.anchor?[m,p]:[p,m],l=r.resolve(o)}else u=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(u<0)return null}let h=r.resolve(u);if(!d){let p=t=="pointer"||e.state.selection.head<l.pos&&!s?1:-1;d=wk(e,h,l,p)}return d}function eB(e){return e.editable?e.hasFocus():nB(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function Os(e,t=!1){let n=e.state.selection;if(tB(e,n),!!eB(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&rr){let r=e.domSelectionRange(),i=e.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Ia(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){e.input.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)MX(e);else{let{anchor:r,head:i}=n,s,o;vD&&!(n instanceof Ke)&&(n.$from.parent.inlineContent||(s=xD(e,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=xD(e,n.to))),e.docView.setSelection(r,i,e,t),vD&&(s&&wD(s),o&&wD(o)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&AX(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const vD=dr||rr&&H6<63;function xD(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(dr&&i&&i.contentEditable=="false")return ob(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return ob(i);if(s)return ob(s)}}function ob(e){return e.contentEditable="true",dr&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function wD(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function AX(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{(!eB(e)||e.state.selection.visible)&&e.dom.classList.remove("ProseMirror-hideselection")},20))})}function MX(e){let t=e.domSelection();if(!t)return;let n=e.cursorWrapper.dom,r=n.nodeName=="IMG";r?t.collapse(n.parentNode,Wn(n)+1):t.collapse(n,0),!r&&!e.state.selection.visible&&Tr&&Oo<=11&&(n.disabled=!0,n.disabled=!1)}function tB(e,t){if(t instanceof ze){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(SD(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else SD(e)}function SD(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function wk(e,t,n,r){return e.someProp("createSelectionBetween",i=>i(e,t,n))||Ke.between(t,n,r)}function ED(e){return e.editable&&!e.hasFocus()?!1:nB(e)}function nB(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function _X(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return Ia(t.node,t.offset,n.anchorNode,n.anchorOffset)}function KE(e,t){let{$anchor:n,$head:r}=e.selection,i=t>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return s&&Ze.findFrom(s,t)}function Eo(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function CD(e,t,n){let r=e.state.selection;if(r instanceof Ke)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=e.state.doc.resolve(i.pos+s.nodeSize*(t<0?-1:1));return Eo(e,new Ke(r.$anchor,o))}else if(r.empty){if(e.endOfTextblock(t>0?"forward":"backward")){let i=KE(e.state,t);return i&&i instanceof ze?Eo(e,i):!1}else if(!(li&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let l=t<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=e.docView.descAt(l))&&!o.contentDOM?ze.isSelectable(s)?Eo(e,new ze(t<0?e.state.doc.resolve(i.pos-s.nodeSize):i)):Yd?Eo(e,new Ke(e.state.doc.resolve(t<0?l:l+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof ze&&r.node.isInline)return Eo(e,new Ke(t>0?r.$to:r.$from));{let i=KE(e.state,t);return i?Eo(e,i):!1}}}function Cp(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function Qu(e,t){let n=e.pmViewDesc;return n&&n.size==0&&(t<0||e.nextSibling||e.nodeName!="BR")}function Ol(e,t){return t<0?DX(e):RX(e)}function DX(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i,s,o=!1;for(fi&&n.nodeType==1&&r<Cp(n)&&Qu(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let l=n.childNodes[r-1];if(Qu(l,-1))i=n,s=--r;else if(l.nodeType==3)n=l,r=n.nodeValue.length;else break}}else{if(rB(n))break;{let l=n.previousSibling;for(;l&&Qu(l,-1);)i=n.parentNode,s=Wn(l),l=l.previousSibling;if(l)n=l,r=Cp(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}}o?YE(e,n,r):i&&YE(e,i,s)}function RX(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i=Cp(n),s,o;for(;;)if(r<i){if(n.nodeType!=1)break;let l=n.childNodes[r];if(Qu(l,1))s=n,o=++r;else break}else{if(rB(n))break;{let l=n.nextSibling;for(;l&&Qu(l,1);)s=l.parentNode,o=Wn(l)+1,l=l.nextSibling;if(l)n=l,r=0,i=Cp(n);else{if(n=n.parentNode,n==e.dom)break;r=i=0}}}s&&YE(e,s,o)}function rB(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function jX(e,t){for(;e&&t==e.childNodes.length&&!Kd(e);)t=Wn(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=0}}function OX(e,t){for(;e&&!t&&!Kd(e);)t=Wn(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=e.childNodes.length}}function YE(e,t,n){if(t.nodeType!=3){let s,o;(o=jX(t,n))?(t=o,n=0):(s=OX(t,n))&&(t=s,n=s.nodeValue.length)}let r=e.domSelection();if(!r)return;if(Pm(r)){let s=document.createRange();s.setEnd(t,n),s.setStart(t,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(t,n);e.domObserver.setCurSelection();let{state:i}=e;setTimeout(()=>{e.state==i&&Os(e)},50)}function kD(e,t){let n=e.state.doc.resolve(t);if(!(rr||nX)&&n.parent.inlineContent){let i=e.coordsAtPos(t);if(t>n.start()){let s=e.coordsAtPos(t-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(t<n.end()){let s=e.coordsAtPos(t+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(e.dom).direction=="rtl"?"rtl":"ltr"}function TD(e,t,n){let r=e.state.selection;if(r instanceof Ke&&!r.empty||n.indexOf("s")>-1||li&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let o=KE(e.state,t);if(o&&o instanceof ze)return Eo(e,o)}if(!i.parent.inlineContent){let o=t<0?i:s,l=r instanceof $r?Ze.near(o,t):Ze.findFrom(o,t);return l?Eo(e,l):!1}return!1}function ND(e,t){if(!(e.state.selection instanceof Ke))return!0;let{$head:n,$anchor:r,empty:i}=e.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let s=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=e.state.tr;return t<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),e.dispatch(o),!0}return!1}function AD(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function LX(e){if(!dr||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&t.nodeType==1&&n==0&&t.firstChild&&t.firstChild.contentEditable=="false"){let r=t.firstChild;AD(e,r,"true"),setTimeout(()=>AD(e,r,"false"),20)}return!1}function PX(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function IX(e,t){let n=t.keyCode,r=PX(t);if(n==8||li&&n==72&&r=="c")return ND(e,-1)||Ol(e,-1);if(n==46&&!t.shiftKey||li&&n==68&&r=="c")return ND(e,1)||Ol(e,1);if(n==13||n==27)return!0;if(n==37||li&&n==66&&r=="c"){let i=n==37?kD(e,e.state.selection.from)=="ltr"?-1:1:-1;return CD(e,i,r)||Ol(e,i)}else if(n==39||li&&n==70&&r=="c"){let i=n==39?kD(e,e.state.selection.from)=="ltr"?1:-1:1;return CD(e,i,r)||Ol(e,i)}else{if(n==38||li&&n==80&&r=="c")return TD(e,-1,r)||Ol(e,-1);if(n==40||li&&n==78&&r=="c")return LX(e)||TD(e,1,r)||Ol(e,1);if(r==(li?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function Sk(e,t){e.someProp("transformCopied",b=>{t=b(t,e)});let n=[],{content:r,openStart:i,openEnd:s}=t;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let b=r.firstChild;n.push(b.type.name,b.attrs!=b.type.defaultAttrs?b.attrs:null),r=b.content}let o=e.someProp("clipboardSerializer")||Ya.fromSchema(e.state.schema),l=cB(),u=l.createElement("div");u.appendChild(o.serializeFragment(r,{document:l}));let d=u.firstChild,h,p=0;for(;d&&d.nodeType==1&&(h=lB[d.nodeName.toLowerCase()]);){for(let b=h.length-1;b>=0;b--){let x=l.createElement(h[b]);for(;u.firstChild;)x.appendChild(u.firstChild);u.appendChild(x),p++}d=u.firstChild}d&&d.nodeType==1&&d.setAttribute("data-pm-slice",`${i} ${s}${p?` -${p}`:""} ${JSON.stringify(n)}`);let m=e.someProp("clipboardTextSerializer",b=>b(t,e))||t.content.textBetween(0,t.content.size,`

`);return{dom:u,text:m,slice:t}}function iB(e,t,n,r,i){let s=i.parent.type.spec.code,o,l;if(!n&&!t)return null;let u=!!t&&(r||s||!n);if(u){if(e.someProp("transformPastedText",m=>{t=m(t,s||r,e)}),s)return l=new Ne(ye.from(e.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0),e.someProp("transformPasted",m=>{l=m(l,e,!0)}),l;let p=e.someProp("clipboardTextParser",m=>m(t,i,r,e));if(p)l=p;else{let m=i.marks(),{schema:b}=e.state,x=Ya.fromSchema(b);o=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(S=>{let w=o.appendChild(document.createElement("p"));S&&w.appendChild(x.serializeNode(b.text(S,m)))})}}else e.someProp("transformPastedHTML",p=>{n=p(n,e)}),o=VX(n),Yd&&HX(o);let d=o&&o.querySelector("[data-pm-slice]"),h=d&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(d.getAttribute("data-pm-slice")||"");if(h&&h[3])for(let p=+h[3];p>0;p--){let m=o.firstChild;for(;m&&m.nodeType!=1;)m=m.nextSibling;if(!m)break;o=m}if(l||(l=(e.someProp("clipboardParser")||e.someProp("domParser")||Xu.fromSchema(e.state.schema)).parseSlice(o,{preserveWhitespace:!!(u||h),context:i,ruleFromNode(m){return m.nodeName=="BR"&&!m.nextSibling&&m.parentNode&&!BX.test(m.parentNode.nodeName)?{ignore:!0}:null}})),h)l=FX(MD(l,+h[1],+h[2]),h[4]);else if(l=Ne.maxOpen(zX(l.content,i),!0),l.openStart||l.openEnd){let p=0,m=0;for(let b=l.content.firstChild;p<l.openStart&&!b.type.spec.isolating;p++,b=b.firstChild);for(let b=l.content.lastChild;m<l.openEnd&&!b.type.spec.isolating;m++,b=b.lastChild);l=MD(l,p,m)}return e.someProp("transformPasted",p=>{l=p(l,e,u)}),l}const BX=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function zX(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let i=t.node(n).contentMatchAt(t.index(n)),s,o=[];if(e.forEach(l=>{if(!o)return;let u=i.findWrapping(l.type),d;if(!u)return o=null;if(d=o.length&&s.length&&oB(u,s,l,o[o.length-1],0))o[o.length-1]=d;else{o.length&&(o[o.length-1]=aB(o[o.length-1],s.length));let h=sB(l,u);o.push(h),i=i.matchType(h.type),s=u}}),o)return ye.from(o)}return e}function sB(e,t,n=0){for(let r=t.length-1;r>=n;r--)e=t[r].create(null,ye.from(e));return e}function oB(e,t,n,r,i){if(i<e.length&&i<t.length&&e[i]==t[i]){let s=oB(e,t,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==e.length-1?n.type:e[i+1]))return r.copy(r.content.append(ye.from(sB(n,e,i+1))))}}function aB(e,t){if(t==0)return e;let n=e.content.replaceChild(e.childCount-1,aB(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(ye.empty,!0);return e.copy(n.append(r))}function XE(e,t,n,r,i,s){let o=t<0?e.firstChild:e.lastChild,l=o.content;return e.childCount>1&&(s=0),i<r-1&&(l=XE(l,t,n,r,i+1,s)),i>=n&&(l=t<0?o.contentMatchAt(0).fillBefore(l,s<=i).append(l):l.append(o.contentMatchAt(o.childCount).fillBefore(ye.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,o.copy(l))}function MD(e,t,n){return t<e.openStart&&(e=new Ne(XE(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new Ne(XE(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const lB={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let _D=null;function cB(){return _D||(_D=document.implementation.createHTMLDocument("title"))}let ab=null;function qX(e){let t=window.trustedTypes;return t?(ab||(ab=t.defaultPolicy||t.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),ab.createHTML(e)):e}function VX(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n=cB().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(e),i;if((i=r&&lB[r[1].toLowerCase()])&&(e=i.map(s=>"<"+s+">").join("")+e+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=qX(e),i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function HX(e){let t=e.querySelectorAll(rr?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}function FX(e,t){if(!e.size)return e;let n=e.content.firstChild.type.schema,r;try{r=JSON.parse(t)}catch{return e}let{content:i,openStart:s,openEnd:o}=e;for(let l=r.length-2;l>=0;l-=2){let u=n.nodes[r[l]];if(!u||u.hasRequiredAttrs())break;i=ye.from(u.create(r[l+1],i)),s++,o++}return new Ne(i,s,o)}const fr={},hr={},UX={touchstart:!0,touchmove:!0};class $X{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function GX(e){for(let t in fr){let n=fr[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=r=>{KX(e,r)&&!Ek(e,r)&&(e.editable||!(r.type in hr))&&n(e,r)},UX[t]?{passive:!0}:void 0)}dr&&e.dom.addEventListener("input",()=>null),ZE(e)}function Ro(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function WX(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}function ZE(e){e.someProp("handleDOMEvents",t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=r=>Ek(e,r))})}function Ek(e,t){return e.someProp("handleDOMEvents",n=>{let r=n[t.type];return r?r(e,t)||t.defaultPrevented:!1})}function KX(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function YX(e,t){!Ek(e,t)&&fr[t.type]&&(e.editable||!(t.type in hr))&&fr[t.type](e,t)}hr.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=n.keyCode==16||n.shiftKey,!dB(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!(Ds&&rr&&n.keyCode==13)))if(n.keyCode!=229&&e.domObserver.forceFlush(),ac&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();e.input.lastIOSEnter=r,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==r&&(e.someProp("handleKeyDown",i=>i(e,ya(13,"Enter"))),e.input.lastIOSEnter=0)},200)}else e.someProp("handleKeyDown",r=>r(e,n))||IX(e,n)?n.preventDefault():Ro(e,"key")};hr.keyup=(e,t)=>{t.keyCode==16&&(e.input.shiftKey=!1)};hr.keypress=(e,t)=>{let n=t;if(dB(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||li&&n.metaKey)return;if(e.someProp("handleKeyPress",i=>i(e,n))){n.preventDefault();return}let r=e.state.selection;if(!(r instanceof Ke)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),s=()=>e.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!e.someProp("handleTextInput",o=>o(e,r.$from.pos,r.$to.pos,i,s))&&e.dispatch(s()),n.preventDefault()}};function Bm(e){return{left:e.clientX,top:e.clientY}}function XX(e,t){let n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}function Ck(e,t,n,r,i){if(r==-1)return!1;let s=e.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(e.someProp(t,l=>o>s.depth?l(e,n,s.nodeAfter,s.before(o),i,!0):l(e,n,s.node(o),s.before(o),i,!1)))return!0;return!1}function Ql(e,t,n){if(e.focused||e.focus(),e.state.selection.eq(t))return;let r=e.state.tr.setSelection(t);r.setMeta("pointer",!0),e.dispatch(r)}function ZX(e,t){if(t==-1)return!1;let n=e.state.doc.resolve(t),r=n.nodeAfter;return r&&r.isAtom&&ze.isSelectable(r)?(Ql(e,new ze(n)),!0):!1}function JX(e,t){if(t==-1)return!1;let n=e.state.selection,r,i;n instanceof ze&&(r=n.node);let s=e.state.doc.resolve(t);for(let o=s.depth+1;o>0;o--){let l=o>s.depth?s.nodeAfter:s.node(o);if(ze.isSelectable(l)){r&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(o);break}}return i!=null?(Ql(e,ze.create(e.state.doc,i)),!0):!1}function QX(e,t,n,r,i){return Ck(e,"handleClickOn",t,n,r)||e.someProp("handleClick",s=>s(e,t,r))||(i?JX(e,n):ZX(e,n))}function eZ(e,t,n,r){return Ck(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",i=>i(e,t,r))}function tZ(e,t,n,r){return Ck(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",i=>i(e,t,r))||nZ(e,n,r)}function nZ(e,t,n){if(n.button!=0)return!1;let r=e.state.doc;if(t==-1)return r.inlineContent?(Ql(e,Ke.create(r,0,r.content.size)),!0):!1;let i=r.resolve(t);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),l=i.before(s);if(o.inlineContent)Ql(e,Ke.create(r,l+1,l+1+o.content.size));else if(ze.isSelectable(o))Ql(e,ze.create(r,l));else continue;return!0}}function kk(e){return kp(e)}const uB=li?"metaKey":"ctrlKey";fr.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let r=kk(e),i=Date.now(),s="singleClick";i-e.input.lastClick.time<500&&XX(n,e.input.lastClick)&&!n[uB]&&e.input.lastClick.button==n.button&&(e.input.lastClick.type=="singleClick"?s="doubleClick":e.input.lastClick.type=="doubleClick"&&(s="tripleClick")),e.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s,button:n.button};let o=e.posAtCoords(Bm(n));o&&(s=="singleClick"?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new rZ(e,o,n,!!r)):(s=="doubleClick"?eZ:tZ)(e,o.pos,o.inside,n)?n.preventDefault():Ro(e,"pointer"))};class rZ{constructor(t,n,r,i){this.view=t,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!r[uB],this.allowDefault=r.shiftKey;let s,o;if(n.inside>-1)s=t.state.doc.nodeAt(n.inside),o=n.inside;else{let h=t.state.doc.resolve(n.pos);s=h.parent,o=h.depth?h.before():0}const l=i?null:r.target,u=l?t.docView.nearestDesc(l,!0):null;this.target=u&&u.nodeDOM.nodeType==1?u.nodeDOM:null;let{selection:d}=t.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||d instanceof ze&&d.from<=o&&d.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&fi&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),Ro(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Os(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Bm(t))),this.updateAllowDefault(t),this.allowDefault||!n?Ro(this.view,"pointer"):QX(this.view,n.pos,n.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||dr&&this.mightDrag&&!this.mightDrag.node.isAtom||rr&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(Ql(this.view,Ze.near(this.view.state.doc.resolve(n.pos))),t.preventDefault()):Ro(this.view,"pointer")}move(t){this.updateAllowDefault(t),Ro(this.view,"pointer"),t.buttons==0&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}fr.touchstart=e=>{e.input.lastTouch=Date.now(),kk(e),Ro(e,"pointer")};fr.touchmove=e=>{e.input.lastTouch=Date.now(),Ro(e,"pointer")};fr.contextmenu=e=>kk(e);function dB(e,t){return e.composing?!0:dr&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500?(e.input.compositionEndedAt=-2e8,!0):!1}const iZ=Ds?5e3:-1;hr.compositionstart=hr.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$to;if(t.selection instanceof Ke&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))e.markCursor=e.state.storedMarks||n.marks(),kp(e,!0),e.markCursor=null;else if(kp(e,!t.selection.empty),fi&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=e.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let l=e.domSelection();l&&l.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}e.input.composing=!0}fB(e,iZ)};hr.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,fB(e,20))};function fB(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>kp(e),t))}function hB(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=oZ());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function sZ(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let n=ZY(t.focusNode,t.focusOffset),r=JY(t.focusNode,t.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,s=e.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(e.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function oZ(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function kp(e,t=!1){if(!(Ds&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),hB(e),t||e.docView&&e.docView.dirty){let n=xk(e),r=e.state.selection;return n&&!n.eq(r)?e.dispatch(e.state.tr.setSelection(n)):(e.markCursor||t)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?e.dispatch(e.state.tr.deleteSelection()):e.updateState(e.state),!0}return!1}}function aZ(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}const xd=Tr&&Oo<15||ac&&rX<604;fr.copy=hr.cut=(e,t)=>{let n=t,r=e.state.selection,i=n.type=="cut";if(r.empty)return;let s=xd?null:n.clipboardData,o=r.content(),{dom:l,text:u}=Sk(e,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",l.innerHTML),s.setData("text/plain",u)):aZ(e,l),i&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function lZ(e){return e.openStart==0&&e.openEnd==0&&e.content.childCount==1?e.content.firstChild:null}function cZ(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=e.input.shiftKey&&e.input.lastKeyCode!=45;setTimeout(()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?wd(e,r.value,null,i,t):wd(e,r.textContent,r.innerHTML,i,t)},50)}function wd(e,t,n,r,i){let s=iB(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",u=>u(e,i,s||Ne.empty)))return!0;if(!s)return!1;let o=lZ(s),l=o?e.state.tr.replaceSelectionWith(o,r):e.state.tr.replaceSelection(s);return e.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function pB(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}hr.paste=(e,t)=>{let n=t;if(e.composing&&!Ds)return;let r=xd?null:n.clipboardData,i=e.input.shiftKey&&e.input.lastKeyCode!=45;r&&wd(e,pB(r),r.getData("text/html"),i,n)?n.preventDefault():cZ(e,n)};class mB{constructor(t,n,r){this.slice=t,this.move=n,this.node=r}}const uZ=li?"altKey":"ctrlKey";function gB(e,t){let n=e.someProp("dragCopies",r=>!r(t));return n??!t[uZ]}fr.dragstart=(e,t)=>{let n=t,r=e.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=e.state.selection,s=i.empty?null:e.posAtCoords(Bm(n)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof ze?i.to-1:i.to))){if(r&&r.mightDrag)o=ze.create(e.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let p=e.docView.nearestDesc(n.target,!0);p&&p.node.type.spec.draggable&&p!=e.docView&&(o=ze.create(e.state.doc,p.posBefore))}}let l=(o||e.state.selection).content(),{dom:u,text:d,slice:h}=Sk(e,l);(!n.dataTransfer.files.length||!rr||H6>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(xd?"Text":"text/html",u.innerHTML),n.dataTransfer.effectAllowed="copyMove",xd||n.dataTransfer.setData("text/plain",d),e.dragging=new mB(h,gB(e,n),o)};fr.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)};hr.dragover=hr.dragenter=(e,t)=>t.preventDefault();hr.drop=(e,t)=>{let n=t,r=e.dragging;if(e.dragging=null,!n.dataTransfer)return;let i=e.posAtCoords(Bm(n));if(!i)return;let s=e.state.doc.resolve(i.pos),o=r&&r.slice;o?e.someProp("transformPasted",x=>{o=x(o,e,!1)}):o=iB(e,pB(n.dataTransfer),xd?null:n.dataTransfer.getData("text/html"),!1,s);let l=!!(r&&gB(e,n));if(e.someProp("handleDrop",x=>x(e,n,o||Ne.empty,l))){n.preventDefault();return}if(!o)return;n.preventDefault();let u=o?j6(e.state.doc,s.pos,o):s.pos;u==null&&(u=s.pos);let d=e.state.tr;if(l){let{node:x}=r;x?x.replace(d):d.deleteSelection()}let h=d.mapping.map(u),p=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,m=d.doc;if(p?d.replaceRangeWith(h,h,o.content.firstChild):d.replaceRange(h,h,o),d.doc.eq(m))return;let b=d.doc.resolve(h);if(p&&ze.isSelectable(o.content.firstChild)&&b.nodeAfter&&b.nodeAfter.sameMarkup(o.content.firstChild))d.setSelection(new ze(b));else{let x=d.mapping.map(u);d.mapping.maps[d.mapping.maps.length-1].forEach((S,w,C,N)=>x=N),d.setSelection(wk(e,b,d.doc.resolve(x)))}e.focus(),e.dispatch(d.setMeta("uiEvent","drop"))};fr.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&Os(e)},20))};fr.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)};fr.beforeinput=(e,t)=>{if(rr&&Ds&&t.inputType=="deleteContentBackward"){e.domObserver.flushSoon();let{domChangeCount:r}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=r||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",s=>s(e,ya(8,"Backspace")))))return;let{$cursor:i}=e.state.selection;i&&i.pos>0&&e.dispatch(e.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let e in hr)fr[e]=hr[e];function Sd(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class Tp{constructor(t,n){this.toDOM=t,this.spec=n||_a,this.side=this.spec.side||0}map(t,n,r,i){let{pos:s,deleted:o}=t.mapResult(n.from+i,this.side<0?-1:1);return o?null:new ur(s-r,s-r,this)}valid(){return!0}eq(t){return this==t||t instanceof Tp&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&Sd(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class Po{constructor(t,n){this.attrs=t,this.spec=n||_a}map(t,n,r,i){let s=t.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,o=t.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new ur(s,o,this)}valid(t,n){return n.from<n.to}eq(t){return this==t||t instanceof Po&&Sd(this.attrs,t.attrs)&&Sd(this.spec,t.spec)}static is(t){return t.type instanceof Po}destroy(){}}class Tk{constructor(t,n){this.attrs=t,this.spec=n||_a}map(t,n,r,i){let s=t.mapResult(n.from+i,1);if(s.deleted)return null;let o=t.mapResult(n.to+i,-1);return o.deleted||o.pos<=s.pos?null:new ur(s.pos-r,o.pos-r,this)}valid(t,n){let{index:r,offset:i}=t.content.findIndex(n.from),s;return i==n.from&&!(s=t.child(r)).isText&&i+s.nodeSize==n.to}eq(t){return this==t||t instanceof Tk&&Sd(this.attrs,t.attrs)&&Sd(this.spec,t.spec)}destroy(){}}class ur{constructor(t,n,r){this.from=t,this.to=n,this.type=r}copy(t,n){return new ur(t,n,this.type)}eq(t,n=0){return this.type.eq(t.type)&&this.from+n==t.from&&this.to+n==t.to}map(t,n,r){return this.type.map(t,this,n,r)}static widget(t,n,r){return new ur(t,t,new Tp(n,r))}static inline(t,n,r,i){return new ur(t,n,new Po(r,i))}static node(t,n,r,i){return new ur(t,n,new Tk(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Po}get widget(){return this.type instanceof Tp}}const ql=[],_a={};class Ut{constructor(t,n){this.local=t.length?t:ql,this.children=n.length?n:ql}static create(t,n){return n.length?Np(n,t,0,_a):tr}find(t,n,r){let i=[];return this.findInner(t??0,n??1e9,i,0,r),i}findInner(t,n,r,i,s){for(let o=0;o<this.local.length;o++){let l=this.local[o];l.from<=n&&l.to>=t&&(!s||s(l.spec))&&r.push(l.copy(l.from+i,l.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>t){let l=this.children[o]+1;this.children[o+2].findInner(t-l,n-l,r,i+l,s)}}map(t,n,r){return this==tr||t.maps.length==0?this:this.mapInner(t,n,0,0,r||_a)}mapInner(t,n,r,i,s){let o;for(let l=0;l<this.local.length;l++){let u=this.local[l].map(t,r,i);u&&u.type.valid(n,u)?(o||(o=[])).push(u):s.onRemove&&s.onRemove(this.local[l].spec)}return this.children.length?dZ(this.children,o||[],t,n,r,i,s):o?new Ut(o.sort(Da),ql):tr}add(t,n){return n.length?this==tr?Ut.create(t,n):this.addInner(t,n,0):this}addInner(t,n,r){let i,s=0;t.forEach((l,u)=>{let d=u+r,h;if(h=bB(n,l,d)){for(i||(i=this.children.slice());s<i.length&&i[s]<u;)s+=3;i[s]==u?i[s+2]=i[s+2].addInner(l,h,d+1):i.splice(s,0,u,u+l.nodeSize,Np(h,l,d+1,_a)),s+=3}});let o=yB(s?vB(n):n,-r);for(let l=0;l<o.length;l++)o[l].type.valid(t,o[l])||o.splice(l--,1);return new Ut(o.length?this.local.concat(o).sort(Da):this.local,i||this.children)}remove(t){return t.length==0||this==tr?this:this.removeInner(t,0)}removeInner(t,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,l=r[s]+n,u=r[s+1]+n;for(let h=0,p;h<t.length;h++)(p=t[h])&&p.from>l&&p.to<u&&(t[h]=null,(o||(o=[])).push(p));if(!o)continue;r==this.children&&(r=this.children.slice());let d=r[s+2].removeInner(o,l+1);d!=tr?r[s+2]=d:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<t.length;s++)if(o=t[s])for(let l=0;l<i.length;l++)i[l].eq(o,n)&&(i==this.local&&(i=this.local.slice()),i.splice(l--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new Ut(i,r):tr}forChild(t,n){if(this==tr)return this;if(n.isLeaf)return Ut.empty;let r,i;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=t){this.children[l]==t&&(r=this.children[l+2]);break}let s=t+1,o=s+n.content.size;for(let l=0;l<this.local.length;l++){let u=this.local[l];if(u.from<o&&u.to>s&&u.type instanceof Po){let d=Math.max(s,u.from)-s,h=Math.min(o,u.to)-s;d<h&&(i||(i=[])).push(u.copy(d,h))}}if(i){let l=new Ut(i.sort(Da),ql);return r?new To([l,r]):l}return r||tr}eq(t){if(this==t)return!0;if(!(t instanceof Ut)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(t.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!0}locals(t){return Nk(this.localsInner(t))}localsInner(t){if(this==tr)return ql;if(t.inlineContent||!this.local.some(Po.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Po||n.push(this.local[r]);return n}forEachSet(t){t(this)}}Ut.empty=new Ut([],[]);Ut.removeOverlap=Nk;const tr=Ut.empty;class To{constructor(t){this.members=t}map(t,n){const r=this.members.map(i=>i.map(t,n,_a));return To.from(r)}forChild(t,n){if(n.isLeaf)return Ut.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(t,n);s!=tr&&(s instanceof To?r=r.concat(s.members):r.push(s))}return To.from(r)}eq(t){if(!(t instanceof To)||t.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(t.members[n]))return!1;return!0}locals(t){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(t);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?Nk(r?n:n.sort(Da)):ql}static from(t){switch(t.length){case 0:return tr;case 1:return t[0];default:return new To(t.every(n=>n instanceof Ut)?t:t.reduce((n,r)=>n.concat(r instanceof Ut?r:r.members),[]))}}forEachSet(t){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(t)}}function dZ(e,t,n,r,i,s,o){let l=e.slice();for(let d=0,h=s;d<n.maps.length;d++){let p=0;n.maps[d].forEach((m,b,x,S)=>{let w=S-x-(b-m);for(let C=0;C<l.length;C+=3){let N=l[C+1];if(N<0||m>N+h-p)continue;let k=l[C]+h-p;b>=k?l[C+1]=m<=k?-2:-1:m>=h&&w&&(l[C]+=w,l[C+1]+=w)}p+=w}),h=n.maps[d].map(h,-1)}let u=!1;for(let d=0;d<l.length;d+=3)if(l[d+1]<0){if(l[d+1]==-2){u=!0,l[d+1]=-1;continue}let h=n.map(e[d]+s),p=h-i;if(p<0||p>=r.content.size){u=!0;continue}let m=n.map(e[d+1]+s,-1),b=m-i,{index:x,offset:S}=r.content.findIndex(p),w=r.maybeChild(x);if(w&&S==p&&S+w.nodeSize==b){let C=l[d+2].mapInner(n,w,h+1,e[d]+s+1,o);C!=tr?(l[d]=p,l[d+1]=b,l[d+2]=C):(l[d+1]=-2,u=!0)}else u=!0}if(u){let d=fZ(l,e,t,n,i,s,o),h=Np(d,r,0,o);t=h.local;for(let p=0;p<l.length;p+=3)l[p+1]<0&&(l.splice(p,3),p-=3);for(let p=0,m=0;p<h.children.length;p+=3){let b=h.children[p];for(;m<l.length&&l[m]<b;)m+=3;l.splice(m,0,h.children[p],h.children[p+1],h.children[p+2])}}return new Ut(t.sort(Da),l)}function yB(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let i=e[r];n.push(new ur(i.from+t,i.to+t,i.type))}return n}function fZ(e,t,n,r,i,s,o){function l(u,d){for(let h=0;h<u.local.length;h++){let p=u.local[h].map(r,i,d);p?n.push(p):o.onRemove&&o.onRemove(u.local[h].spec)}for(let h=0;h<u.children.length;h+=3)l(u.children[h+2],u.children[h]+d+1)}for(let u=0;u<e.length;u+=3)e[u+1]==-1&&l(e[u+2],t[u]+s+1);return n}function bB(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,i=null;for(let s=0,o;s<e.length;s++)(o=e[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),e[s]=null);return i}function vB(e){let t=[];for(let n=0;n<e.length;n++)e[n]!=null&&t.push(e[n]);return t}function Np(e,t,n,r){let i=[],s=!1;t.forEach((l,u)=>{let d=bB(e,l,u+n);if(d){s=!0;let h=Np(d,l,n+u+1,r);h!=tr&&i.push(u,u+l.nodeSize,h)}});let o=yB(s?vB(e):e,-n).sort(Da);for(let l=0;l<o.length;l++)o[l].type.valid(t,o[l])||(r.onRemove&&r.onRemove(o[l].spec),o.splice(l--,1));return o.length||i.length?new Ut(o,i):tr}function Da(e,t){return e.from-t.from||e.to-t.to}function Nk(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let i=n+1;i<t.length;i++){let s=t[i];if(s.from==r.from){s.to!=r.to&&(t==e&&(t=e.slice()),t[i]=s.copy(s.from,r.to),DD(t,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,s.from),DD(t,i,r.copy(s.from,r.to)));break}}}return t}function DD(e,t,n){for(;t<e.length&&Da(n,e[t])>0;)t++;e.splice(t,0,n)}function lb(e){let t=[];return e.someProp("decorations",n=>{let r=n(e.state);r&&r!=tr&&t.push(r)}),e.cursorWrapper&&t.push(Ut.create(e.state.doc,[e.cursorWrapper.deco])),To.from(t)}const hZ={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},pZ=Tr&&Oo<=11;class mZ{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class gZ{constructor(t,n){this.view=t,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new mZ,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Tr&&Oo<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),pZ&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,hZ)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(ED(this.view)){if(this.suppressingSelectionUpdates)return Os(this.view);if(Tr&&Oo<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&Ia(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let n=new Set,r;for(let s=t.focusNode;s;s=oc(s))n.add(s);for(let s=t.anchorNode;s;s=oc(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=t.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&ED(t)&&!this.ignoreSelectionChange(r),s=-1,o=-1,l=!1,u=[];if(t.editable)for(let h=0;h<n.length;h++){let p=this.registerMutation(n[h],u);p&&(s=s<0?p.from:Math.min(p.from,s),o=o<0?p.to:Math.max(p.to,o),p.typeOver&&(l=!0))}if(fi&&u.length){let h=u.filter(p=>p.nodeName=="BR");if(h.length==2){let[p,m]=h;p.parentNode&&p.parentNode.parentNode==m.parentNode?m.remove():p.remove()}else{let{focusNode:p}=this.currentSelection;for(let m of h){let b=m.parentNode;b&&b.nodeName=="LI"&&(!p||vZ(t,p)!=b)&&m.remove()}}}let d=null;s<0&&i&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&Pm(r)&&(d=xk(t))&&d.eq(Ze.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,Os(t),this.currentSelection.set(r),t.scrollToSelection()):(s>-1||i)&&(s>-1&&(t.docView.markDirty(s,o),yZ(t)),this.handleDOMChange(s,o,l,u),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(r)||Os(t),this.currentSelection.set(r))}registerMutation(t,n){if(n.indexOf(t.target)>-1)return null;let r=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(r==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!r||r.ignoreMutation(t))return null;if(t.type=="childList"){for(let h=0;h<t.addedNodes.length;h++){let p=t.addedNodes[h];n.push(p),p.nodeType==3&&(this.lastChangedTextNode=p)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(t.target))return{from:r.posBefore,to:r.posAfter};let i=t.previousSibling,s=t.nextSibling;if(Tr&&Oo<=11&&t.addedNodes.length)for(let h=0;h<t.addedNodes.length;h++){let{previousSibling:p,nextSibling:m}=t.addedNodes[h];(!p||Array.prototype.indexOf.call(t.addedNodes,p)<0)&&(i=p),(!m||Array.prototype.indexOf.call(t.addedNodes,m)<0)&&(s=m)}let o=i&&i.parentNode==t.target?Wn(i)+1:0,l=r.localPosFromDOM(t.target,o,-1),u=s&&s.parentNode==t.target?Wn(s):t.target.childNodes.length,d=r.localPosFromDOM(t.target,u,1);return{from:l,to:d}}else return t.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=t.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:t.target.nodeValue==t.oldValue})}}let RD=new WeakMap,jD=!1;function yZ(e){if(!RD.has(e)&&(RD.set(e,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)!==-1)){if(e.requiresGeckoHackNode=fi,jD)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),jD=!0}}function OD(e,t){let n=t.startContainer,r=t.startOffset,i=t.endContainer,s=t.endOffset,o=e.domAtPos(e.state.selection.anchor);return Ia(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function bZ(e,t){if(t.getComposedRanges){let i=t.getComposedRanges(e.root)[0];if(i)return OD(e,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",r,!0),n?OD(e,n):null}function vZ(e,t){for(let n=t.parentNode;n&&n!=e.dom;n=n.parentNode){let r=e.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function xZ(e,t,n){let{node:r,fromOffset:i,toOffset:s,from:o,to:l}=e.docView.parseRange(t,n),u=e.domSelectionRange(),d,h=u.anchorNode;if(h&&e.dom.contains(h.nodeType==1?h:h.parentNode)&&(d=[{node:h,offset:u.anchorOffset}],Pm(u)||d.push({node:u.focusNode,offset:u.focusOffset})),rr&&e.input.lastKeyCode===8)for(let w=s;w>i;w--){let C=r.childNodes[w-1],N=C.pmViewDesc;if(C.nodeName=="BR"&&!N){s=w;break}if(!N||N.size)break}let p=e.state.doc,m=e.someProp("domParser")||Xu.fromSchema(e.state.schema),b=p.resolve(o),x=null,S=m.parse(r,{topNode:b.parent,topMatch:b.parent.contentMatchAt(b.index()),topOpen:!0,from:i,to:s,preserveWhitespace:b.parent.type.whitespace=="pre"?"full":!0,findPositions:d,ruleFromNode:wZ,context:b});if(d&&d[0].pos!=null){let w=d[0].pos,C=d[1]&&d[1].pos;C==null&&(C=w),x={anchor:w+o,head:C+o}}return{doc:S,sel:x,from:o,to:l}}function wZ(e){let t=e.pmViewDesc;if(t)return t.parseRule();if(e.nodeName=="BR"&&e.parentNode){if(dr&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(e.parentNode.lastChild==e||dr&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if(e.nodeName=="IMG"&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const SZ=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function EZ(e,t,n,r,i){let s=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let R=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,L=xk(e,R);if(L&&!e.state.selection.eq(L)){if(rr&&Ds&&e.input.lastKeyCode===13&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",H=>H(e,ya(13,"Enter"))))return;let I=e.state.tr.setSelection(L);R=="pointer"?I.setMeta("pointer",!0):R=="key"&&I.scrollIntoView(),s&&I.setMeta("composition",s),e.dispatch(I)}return}let o=e.state.doc.resolve(t),l=o.sharedDepth(n);t=o.before(l+1),n=e.state.doc.resolve(n).after(l+1);let u=e.state.selection,d=xZ(e,t,n),h=e.state.doc,p=h.slice(d.from,d.to),m,b;e.input.lastKeyCode===8&&Date.now()-100<e.input.lastKeyCodeTime?(m=e.state.selection.to,b="end"):(m=e.state.selection.from,b="start"),e.input.lastKeyCode=null;let x=TZ(p.content,d.doc.content,d.from,m,b);if(x&&e.input.domChangeCount++,(ac&&e.input.lastIOSEnter>Date.now()-225||Ds)&&i.some(R=>R.nodeType==1&&!SZ.test(R.nodeName))&&(!x||x.endA>=x.endB)&&e.someProp("handleKeyDown",R=>R(e,ya(13,"Enter")))){e.input.lastIOSEnter=0;return}if(!x)if(r&&u instanceof Ke&&!u.empty&&u.$head.sameParent(u.$anchor)&&!e.composing&&!(d.sel&&d.sel.anchor!=d.sel.head))x={start:u.from,endA:u.to,endB:u.to};else{if(d.sel){let R=LD(e,e.state.doc,d.sel);if(R&&!R.eq(e.state.selection)){let L=e.state.tr.setSelection(R);s&&L.setMeta("composition",s),e.dispatch(L)}}return}e.state.selection.from<e.state.selection.to&&x.start==x.endB&&e.state.selection instanceof Ke&&(x.start>e.state.selection.from&&x.start<=e.state.selection.from+2&&e.state.selection.from>=d.from?x.start=e.state.selection.from:x.endA<e.state.selection.to&&x.endA>=e.state.selection.to-2&&e.state.selection.to<=d.to&&(x.endB+=e.state.selection.to-x.endA,x.endA=e.state.selection.to)),Tr&&Oo<=11&&x.endB==x.start+1&&x.endA==x.start&&x.start>d.from&&d.doc.textBetween(x.start-d.from-1,x.start-d.from+1)==" "&&(x.start--,x.endA--,x.endB--);let S=d.doc.resolveNoCache(x.start-d.from),w=d.doc.resolveNoCache(x.endB-d.from),C=h.resolve(x.start),N=S.sameParent(w)&&S.parent.inlineContent&&C.end()>=x.endA,k;if((ac&&e.input.lastIOSEnter>Date.now()-225&&(!N||i.some(R=>R.nodeName=="DIV"||R.nodeName=="P"))||!N&&S.pos<d.doc.content.size&&(!S.sameParent(w)||!S.parent.inlineContent)&&!/\S/.test(d.doc.textBetween(S.pos,w.pos,"",""))&&(k=Ze.findFrom(d.doc.resolve(S.pos+1),1,!0))&&k.head>S.pos)&&e.someProp("handleKeyDown",R=>R(e,ya(13,"Enter")))){e.input.lastIOSEnter=0;return}if(e.state.selection.anchor>x.start&&kZ(h,x.start,x.endA,S,w)&&e.someProp("handleKeyDown",R=>R(e,ya(8,"Backspace")))){Ds&&rr&&e.domObserver.suppressSelectionUpdates();return}rr&&x.endB==x.start&&(e.input.lastChromeDelete=Date.now()),Ds&&!N&&S.start()!=w.start()&&w.parentOffset==0&&S.depth==w.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==x.endA&&(x.endB-=2,w=d.doc.resolveNoCache(x.endB-d.from),setTimeout(()=>{e.someProp("handleKeyDown",function(R){return R(e,ya(13,"Enter"))})},20));let T=x.start,A=x.endA,M=R=>{let L=R||e.state.tr.replace(T,A,d.doc.slice(x.start-d.from,x.endB-d.from));if(d.sel){let I=LD(e,L.doc,d.sel);I&&!(rr&&e.composing&&I.empty&&(x.start!=x.endB||e.input.lastChromeDelete<Date.now()-100)&&(I.head==T||I.head==L.mapping.map(A)-1)||Tr&&I.empty&&I.head==T)&&L.setSelection(I)}return s&&L.setMeta("composition",s),L.scrollIntoView()},j;if(N){if(S.pos==w.pos){Tr&&Oo<=11&&S.parentOffset==0&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>Os(e),20));let R=M(e.state.tr.delete(T,A)),L=h.resolve(x.start).marksAcross(h.resolve(x.endA));L&&R.ensureMarks(L),e.dispatch(R)}else if(x.endA==x.endB&&(j=CZ(S.parent.content.cut(S.parentOffset,w.parentOffset),C.parent.content.cut(C.parentOffset,x.endA-C.start())))){let R=M(e.state.tr);j.type=="add"?R.addMark(T,A,j.mark):R.removeMark(T,A,j.mark),e.dispatch(R)}else if(S.parent.child(S.index()).isText&&S.index()==w.index()-(w.textOffset?0:1)){let R=S.parent.textBetween(S.parentOffset,w.parentOffset),L=()=>M(e.state.tr.insertText(R,T,A));e.someProp("handleTextInput",I=>I(e,T,A,R,L))||e.dispatch(L())}}else e.dispatch(M())}function LD(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:wk(e,t.resolve(n.anchor),t.resolve(n.head))}function CZ(e,t){let n=e.firstChild.marks,r=t.firstChild.marks,i=n,s=r,o,l,u;for(let h=0;h<r.length;h++)i=r[h].removeFromSet(i);for(let h=0;h<n.length;h++)s=n[h].removeFromSet(s);if(i.length==1&&s.length==0)l=i[0],o="add",u=h=>h.mark(l.addToSet(h.marks));else if(i.length==0&&s.length==1)l=s[0],o="remove",u=h=>h.mark(l.removeFromSet(h.marks));else return null;let d=[];for(let h=0;h<t.childCount;h++)d.push(u(t.child(h)));if(ye.from(d).eq(e))return{mark:l,type:o}}function kZ(e,t,n,r,i){if(n-t<=i.pos-r.pos||cb(r,!0,!1)<i.pos)return!1;let s=e.resolve(t);if(!r.parent.isTextblock){let l=s.nodeAfter;return l!=null&&n==t+l.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=e.resolve(cb(s,!0,!0));return!o.parent.isTextblock||o.pos>n||cb(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function cb(e,t,n){let r=e.depth,i=t?e.end():e.pos;for(;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,i++,t=!1;if(n){let s=e.node(r).maybeChild(e.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function TZ(e,t,n,r,i){let s=e.findDiffStart(t,n);if(s==null)return null;let{a:o,b:l}=e.findDiffEnd(t,n+e.size,n+t.size);if(i=="end"){let u=Math.max(0,s-Math.min(o,l));r-=o+u-s}if(o<s&&e.size<t.size){let u=r<=s&&r>=o?s-r:0;s-=u,s&&s<t.size&&PD(t.textBetween(s-1,s+1))&&(s+=u?1:-1),l=s+(l-o),o=s}else if(l<s){let u=r<=s&&r>=l?s-r:0;s-=u,s&&s<e.size&&PD(e.textBetween(s-1,s+1))&&(s+=u?1:-1),o=s+(o-l),l=s}return{start:s,endA:o,endB:l}}function PD(e){if(e.length!=2)return!1;let t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}class xB{constructor(t,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new $X,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(VD),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):typeof t=="function"?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=zD(this),BD(this),this.nodeViews=qD(this),this.docView=yD(this.state.doc,ID(this),lb(this),this.dom,this),this.domObserver=new gZ(this,(r,i,s,o)=>EZ(this,r,i,s,o)),this.domObserver.start(),GX(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let n in t)this._props[n]=t[n];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&ZE(this);let n=this._props;this._props=t,t.plugins&&(t.plugins.forEach(VD),this.directPlugins=t.plugins),this.updateStateInner(t.state,n)}setProps(t){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in t)n[r]=t[r];this.update(n)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,n){var r;let i=this.state,s=!1,o=!1;t.storedMarks&&this.composing&&(hB(this),o=!0),this.state=t;let l=i.plugins!=t.plugins||this._props.plugins!=n.plugins;if(l||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let b=qD(this);AZ(b,this.nodeViews)&&(this.nodeViews=b,s=!0)}(l||n.handleDOMEvents!=this._props.handleDOMEvents)&&ZE(this),this.editable=zD(this),BD(this);let u=lb(this),d=ID(this),h=i.plugins!=t.plugins&&!i.doc.eq(t.doc)?"reset":t.scrollToSelection>i.scrollToSelection?"to selection":"preserve",p=s||!this.docView.matchesNode(t.doc,d,u);(p||!t.selection.eq(i.selection))&&(o=!0);let m=h=="preserve"&&o&&this.dom.style.overflowAnchor==null&&oX(this);if(o){this.domObserver.stop();let b=p&&(Tr||rr)&&!this.composing&&!i.selection.empty&&!t.selection.empty&&NZ(i.selection,t.selection);if(p){let x=rr?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=sZ(this)),(s||!this.docView.update(t.doc,d,u,this))&&(this.docView.updateOuterDeco(d),this.docView.destroy(),this.docView=yD(t.doc,d,u,this.dom,this)),x&&!this.trackWrites&&(b=!0)}b||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&_X(this))?Os(this,b):(tB(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,i),h=="reset"?this.dom.scrollTop=0:h=="to selection"?this.scrollToSelection():m&&aX(m)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(!(!t||!this.dom.contains(t.nodeType==1?t:t.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof ze){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&dD(this,n.getBoundingClientRect(),t)}else dD(this,this.coordsAtPos(this.state.selection.head,1),t)}}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,t)}}updateDraggedNode(t,n){let r=t.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new mB(t.slice,t.move,i<0?void 0:ze.create(this.state.doc,i))}someProp(t,n){let r=this._props&&this._props[t],i;if(r!=null&&(i=n?n(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let l=this.directPlugins[o].props[t];if(l!=null&&(i=n?n(l):l))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let l=s[o].props[t];if(l!=null&&(i=n?n(l):l))return i}}hasFocus(){if(Tr){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if(t.contentEditable=="false")return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&lX(this.dom),Os(this),this.domObserver.start()}get root(){let t=this._root;if(t==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return t||document}updateRoot(){this._root=null}posAtCoords(t){return hX(this,t)}coordsAtPos(t,n=1){return W6(this,t,n)}domAtPos(t,n=0){return this.docView.domFromPos(t,n)}nodeDOM(t){let n=this.docView.descAt(t);return n?n.nodeDOM:null}posAtDOM(t,n,r=-1){let i=this.docView.posFromDOM(t,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(t,n){return bX(this,n||this.state,t)}pasteHTML(t,n){return wd(this,"",t,!1,n||new ClipboardEvent("paste"))}pasteText(t,n){return wd(this,t,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(t){return Sk(this,t)}destroy(){this.docView&&(WX(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],lb(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,YY())}get isDestroyed(){return this.docView==null}dispatchEvent(t){return YX(this,t)}domSelectionRange(){let t=this.domSelection();return t?dr&&this.root.nodeType===11&&eX(this.dom.ownerDocument)==this.dom&&bZ(this,t)||t:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}xB.prototype.dispatch=function(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))};function ID(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(e.state)),n)for(let r in n)r=="class"?t.class+=" "+n[r]:r=="style"?t.style=(t.style?t.style+";":"")+n[r]:!t[r]&&r!="contenteditable"&&r!="nodeName"&&(t[r]=String(n[r]))}),t.translate||(t.translate="no"),[ur.node(0,e.state.doc.content.size,t)]}function BD(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:ur.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function zD(e){return!e.someProp("editable",t=>t(e.state)===!1)}function NZ(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}function qD(e){let t=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(t,i)||(t[i]=r[i])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function AZ(e,t){let n=0,r=0;for(let i in e){if(e[i]!=t[i])return!0;n++}for(let i in t)r++;return n!=r}function VD(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Vo={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Ap={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},MZ=typeof navigator<"u"&&/Mac/.test(navigator.platform),_Z=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Kn=0;Kn<10;Kn++)Vo[48+Kn]=Vo[96+Kn]=String(Kn);for(var Kn=1;Kn<=24;Kn++)Vo[Kn+111]="F"+Kn;for(var Kn=65;Kn<=90;Kn++)Vo[Kn]=String.fromCharCode(Kn+32),Ap[Kn]=String.fromCharCode(Kn);for(var ub in Vo)Ap.hasOwnProperty(ub)||(Ap[ub]=Vo[ub]);function DZ(e){var t=MZ&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||_Z&&e.shiftKey&&e.key&&e.key.length==1||e.key=="Unidentified",n=!t&&e.key||(e.shiftKey?Ap:Vo)[e.keyCode]||e.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const RZ=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),jZ=typeof navigator<"u"&&/Win/.test(navigator.platform);function OZ(e){let t=e.split(/-(?!$)/),n=t[t.length-1];n=="Space"&&(n=" ");let r,i,s,o;for(let l=0;l<t.length-1;l++){let u=t[l];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))i=!0;else if(/^s(hift)?$/i.test(u))s=!0;else if(/^mod$/i.test(u))RZ?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+u)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function LZ(e){let t=Object.create(null);for(let n in e)t[OZ(n)]=e[n];return t}function db(e,t,n=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function PZ(e){return new nn({props:{handleKeyDown:wB(e)}})}function wB(e){let t=LZ(e);return function(n,r){let i=DZ(r),s,o=t[db(i,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let l=t[db(i,r,!1)];if(l&&l(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(jZ&&r.ctrlKey&&r.altKey)&&(s=Vo[r.keyCode])&&s!=i){let l=t[db(s,r)];if(l&&l(n.state,n.dispatch,n))return!0}}return!1}}const Ak=(e,t)=>e.selection.empty?!1:(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function SB(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}const EB=(e,t,n)=>{let r=SB(e,n);if(!r)return!1;let i=Mk(r);if(!i){let o=r.blockRange(),l=o&&vc(o);return l==null?!1:(t&&t(e.tr.lift(o,l).scrollIntoView()),!0)}let s=i.nodeBefore;if(RB(e,i,t,-1))return!0;if(r.parent.content.size==0&&(lc(s,"end")||ze.isSelectable(s)))for(let o=r.depth;;o--){let l=Om(e.doc,r.before(o),r.after(o),Ne.empty);if(l&&l.slice.size<l.to-l.from){if(t){let u=e.tr.step(l);u.setSelection(lc(s,"end")?Ze.findFrom(u.doc.resolve(u.mapping.map(i.pos,-1)),-1):ze.create(u.doc,i.pos-s.nodeSize)),t(u.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(t&&t(e.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},IZ=(e,t,n)=>{let r=SB(e,n);if(!r)return!1;let i=Mk(r);return i?CB(e,i,t):!1},BZ=(e,t,n)=>{let r=TB(e,n);if(!r)return!1;let i=_k(r);return i?CB(e,i,t):!1};function CB(e,t,n){let r=t.nodeBefore,i=r,s=t.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let h=i.lastChild;if(!h)return!1;i=h}let o=t.nodeAfter,l=o,u=t.pos+1;for(;!l.isTextblock;u++){if(l.type.spec.isolating)return!1;let h=l.firstChild;if(!h)return!1;l=h}let d=Om(e.doc,s,u,Ne.empty);if(!d||d.from!=s||d instanceof In&&d.slice.size>=u-s)return!1;if(n){let h=e.tr.step(d);h.setSelection(Ke.create(h.doc,s)),n(h.scrollIntoView())}return!0}function lc(e,t,n=!1){for(let r=e;r;r=t=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const kB=(e,t,n)=>{let{$head:r,empty:i}=e.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;s=Mk(r)}let o=s&&s.nodeBefore;return!o||!ze.isSelectable(o)?!1:(t&&t(e.tr.setSelection(ze.create(e.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function Mk(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function TB(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}const NB=(e,t,n)=>{let r=TB(e,n);if(!r)return!1;let i=_k(r);if(!i)return!1;let s=i.nodeAfter;if(RB(e,i,t,1))return!0;if(r.parent.content.size==0&&(lc(s,"start")||ze.isSelectable(s))){let o=Om(e.doc,r.before(),r.after(),Ne.empty);if(o&&o.slice.size<o.to-o.from){if(t){let l=e.tr.step(o);l.setSelection(lc(s,"start")?Ze.findFrom(l.doc.resolve(l.mapping.map(i.pos)),1):ze.create(l.doc,l.mapping.map(i.pos))),t(l.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(t&&t(e.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},AB=(e,t,n)=>{let{$head:r,empty:i}=e.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;s=_k(r)}let o=s&&s.nodeAfter;return!o||!ze.isSelectable(o)?!1:(t&&t(e.tr.setSelection(ze.create(e.doc,s.pos)).scrollIntoView()),!0)};function _k(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const zZ=(e,t)=>{let n=e.selection,r=n instanceof ze,i;if(r){if(n.node.isTextblock||!$o(e.doc,n.from))return!1;i=n.from}else if(i=jm(e.doc,n.from,-1),i==null)return!1;if(t){let s=e.tr.join(i);r&&s.setSelection(ze.create(s.doc,i-e.doc.resolve(i).nodeBefore.nodeSize)),t(s.scrollIntoView())}return!0},qZ=(e,t)=>{let n=e.selection,r;if(n instanceof ze){if(n.node.isTextblock||!$o(e.doc,n.to))return!1;r=n.to}else if(r=jm(e.doc,n.to,1),r==null)return!1;return t&&t(e.tr.join(r).scrollIntoView()),!0},VZ=(e,t)=>{let{$from:n,$to:r}=e.selection,i=n.blockRange(r),s=i&&vc(i);return s==null?!1:(t&&t(e.tr.lift(i,s).scrollIntoView()),!0)},MB=(e,t)=>{let{$head:n,$anchor:r}=e.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(t&&t(e.tr.insertText(`
`).scrollIntoView()),!0)};function Dk(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const HZ=(e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=Dk(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(t){let l=n.after(),u=e.tr.replaceWith(l,l,o.createAndFill());u.setSelection(Ze.near(u.doc.resolve(l),1)),t(u.scrollIntoView())}return!0},_B=(e,t)=>{let n=e.selection,{$from:r,$to:i}=n;if(n instanceof $r||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=Dk(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(t){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,l=e.tr.insert(o,s.createAndFill());l.setSelection(Ke.create(l.doc,o+1)),t(l.scrollIntoView())}return!0},DB=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(js(e.doc,s))return t&&t(e.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&vc(r);return i==null?!1:(t&&t(e.tr.lift(r,i).scrollIntoView()),!0)};function FZ(e){return(t,n)=>{let{$from:r,$to:i}=t.selection;if(t.selection instanceof ze&&t.selection.node.isBlock)return!r.parentOffset||!js(t.doc,r.pos)?!1:(n&&n(t.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],o,l,u=!1,d=!1;for(let b=r.depth;;b--)if(r.node(b).isBlock){u=r.end(b)==r.pos+(r.depth-b),d=r.start(b)==r.pos-(r.depth-b),l=Dk(r.node(b-1).contentMatchAt(r.indexAfter(b-1))),s.unshift(u&&l?{type:l}:null),o=b;break}else{if(b==1)return!1;s.unshift(null)}let h=t.tr;(t.selection instanceof Ke||t.selection instanceof $r)&&h.deleteSelection();let p=h.mapping.map(r.pos),m=js(h.doc,p,s.length,s);if(m||(s[0]=l?{type:l}:null,m=js(h.doc,p,s.length,s)),!m)return!1;if(h.split(p,s.length,s),!u&&d&&r.node(o).type!=l){let b=h.mapping.map(r.before(o)),x=h.doc.resolve(b);l&&r.node(o-1).canReplaceWith(x.index(),x.index()+1,l)&&h.setNodeMarkup(h.mapping.map(r.before(o)),l)}return n&&n(h.scrollIntoView()),!0}}const UZ=FZ(),$Z=(e,t)=>{let{$from:n,to:r}=e.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),t&&t(e.tr.setSelection(ze.create(e.doc,i))),!0)};function GZ(e,t,n){let r=t.nodeBefore,i=t.nodeAfter,s=t.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&t.parent.canReplace(s-1,s)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(s,s+1)||!(i.isTextblock||$o(e.doc,t.pos))?!1:(n&&n(e.tr.join(t.pos).scrollIntoView()),!0)}function RB(e,t,n,r){let i=t.nodeBefore,s=t.nodeAfter,o,l,u=i.type.spec.isolating||s.type.spec.isolating;if(!u&&GZ(e,t,n))return!0;let d=!u&&t.parent.canReplace(t.index(),t.index()+1);if(d&&(o=(l=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&l.matchType(o[0]||s.type).validEnd){if(n){let b=t.pos+s.nodeSize,x=ye.empty;for(let C=o.length-1;C>=0;C--)x=ye.from(o[C].create(null,x));x=ye.from(i.copy(x));let S=e.tr.step(new Bn(t.pos-1,b,t.pos,b,new Ne(x,1,0),o.length,!0)),w=S.doc.resolve(b+2*o.length);w.nodeAfter&&w.nodeAfter.type==i.type&&$o(S.doc,w.pos)&&S.join(w.pos),n(S.scrollIntoView())}return!0}let h=s.type.spec.isolating||r>0&&u?null:Ze.findFrom(t,1),p=h&&h.$from.blockRange(h.$to),m=p&&vc(p);if(m!=null&&m>=t.depth)return n&&n(e.tr.lift(p,m).scrollIntoView()),!0;if(d&&lc(s,"start",!0)&&lc(i,"end")){let b=i,x=[];for(;x.push(b),!b.isTextblock;)b=b.lastChild;let S=s,w=1;for(;!S.isTextblock;S=S.firstChild)w++;if(b.canReplace(b.childCount,b.childCount,S.content)){if(n){let C=ye.empty;for(let k=x.length-1;k>=0;k--)C=ye.from(x[k].copy(C));let N=e.tr.step(new Bn(t.pos-x.length,t.pos+s.nodeSize,t.pos+w,t.pos+s.nodeSize-w,new Ne(C,x.length,0),0,!0));n(N.scrollIntoView())}return!0}}return!1}function jB(e){return function(t,n){let r=t.selection,i=e<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(t.tr.setSelection(Ke.create(t.doc,e<0?i.start(s):i.end(s)))),!0):!1}}const WZ=jB(-1),KZ=jB(1);function YZ(e,t=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),l=o&&yk(o,e,t);return l?(r&&r(n.tr.wrap(o,l).scrollIntoView()),!0):!1}}function HD(e,t=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:l}}=n.selection.ranges[s];n.doc.nodesBetween(o,l,(u,d)=>{if(i)return!1;if(!(!u.isTextblock||u.hasMarkup(e,t)))if(u.type==e)i=!0;else{let h=n.doc.resolve(d),p=h.index();i=h.parent.canReplaceWith(p,p+1,e)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:l},$to:{pos:u}}=n.selection.ranges[o];s.setBlockType(l,u,e,t)}r(s.scrollIntoView())}return!0}}function Rk(...e){return function(t,n,r){for(let i=0;i<e.length;i++)if(e[i](t,n,r))return!0;return!1}}Rk(Ak,EB,kB);Rk(Ak,NB,AB);Rk(MB,_B,DB,UZ);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function XZ(e,t=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s);if(!o)return!1;let l=r?n.tr:null;return ZZ(l,o,e,t)?(r&&r(l.scrollIntoView()),!0):!1}}function ZZ(e,t,n,r=null){let i=!1,s=t,o=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(n)&&t.startIndex==0){if(t.$from.index(t.depth-1)==0)return!1;let u=o.resolve(t.start-2);s=new wp(u,u,t.depth),t.endIndex<t.parent.childCount&&(t=new wp(t.$from,o.resolve(t.$to.end(t.depth)),t.depth)),i=!0}let l=yk(s,n,r,t);return l?(e&&JZ(e,t,l,i,n),!0):!1}function JZ(e,t,n,r,i){let s=ye.empty;for(let h=n.length-1;h>=0;h--)s=ye.from(n[h].type.create(n[h].attrs,s));e.step(new Bn(t.start-(r?2:0),t.end,t.start,t.end,new Ne(s,0,0),n.length,!0));let o=0;for(let h=0;h<n.length;h++)n[h].type==i&&(o=h+1);let l=n.length-o,u=t.start+n.length-(r?2:0),d=t.parent;for(let h=t.startIndex,p=t.endIndex,m=!0;h<p;h++,m=!1)!m&&js(e.doc,u,l)&&(e.split(u,l),u+=2*l),u+=d.child(h).nodeSize;return e}function QZ(e){return function(t,n){let{$from:r,$to:i}=t.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==e);return s?n?r.node(s.depth-1).type==e?eJ(t,n,e,s):tJ(t,n,s):!0:!1}}function eJ(e,t,n,r){let i=e.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new Bn(s-1,o,s,o,new Ne(ye.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new wp(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const l=vc(r);if(l==null)return!1;i.lift(r,l);let u=i.doc.resolve(i.mapping.map(s,-1)-1);return $o(i.doc,u.pos)&&u.nodeBefore.type==u.nodeAfter.type&&i.join(u.pos),t(i.scrollIntoView()),!0}function tJ(e,t,n){let r=e.tr,i=n.parent;for(let b=n.end,x=n.endIndex-1,S=n.startIndex;x>S;x--)b-=i.child(x).nodeSize,r.delete(b-1,b+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let l=n.startIndex==0,u=n.endIndex==i.childCount,d=s.node(-1),h=s.index(-1);if(!d.canReplace(h+(l?0:1),h+1,o.content.append(u?ye.empty:ye.from(i))))return!1;let p=s.pos,m=p+o.nodeSize;return r.step(new Bn(p-(l?1:0),m+(u?1:0),p+1,m-1,new Ne((l?ye.empty:ye.from(i.copy(ye.empty))).append(u?ye.empty:ye.from(i.copy(ye.empty))),l?0:1,u?0:1),l?0:1)),t(r.scrollIntoView()),!0}function nJ(e){return function(t,n){let{$from:r,$to:i}=t.selection,s=r.blockRange(i,d=>d.childCount>0&&d.firstChild.type==e);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let l=s.parent,u=l.child(o-1);if(u.type!=e)return!1;if(n){let d=u.lastChild&&u.lastChild.type==l.type,h=ye.from(d?e.create():null),p=new Ne(ye.from(e.create(null,ye.from(l.type.create(null,h)))),d?3:1,0),m=s.start,b=s.end;n(t.tr.step(new Bn(m-(d?3:1),b,m,b,p,1,!0)).scrollIntoView())}return!0}}var rJ=Object.defineProperty,OB=(e,t)=>{for(var n in t)rJ(e,n,{get:t[n],enumerable:!0})};function zm(e){const{state:t,transaction:n}=e;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}var qm=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:n}=this,{view:r}=t,{tr:i}=n,s=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(([o,l])=>[o,(...d)=>{const h=l(...d)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),h}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,o=[],l=!!e,u=e||i.tr,d=()=>(!l&&t&&!u.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(u),o.every(p=>p===!0)),h={...Object.fromEntries(Object.entries(n).map(([p,m])=>[p,(...x)=>{const S=this.buildProps(u,t),w=m(...x)(S);return o.push(w),h}])),run:d};return h}createCan(e){const{rawCommands:t,state:n}=this,r=!1,i=e||n.tr,s=this.buildProps(i,r);return{...Object.fromEntries(Object.entries(t).map(([l,u])=>[l,(...d)=>u(...d)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,r)}}buildProps(e,t=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,o={tr:e,editor:r,view:s,state:zm({state:i,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map(([l,u])=>[l,(...d)=>u(...d)(o)]))}};return o}},iJ=class{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const n=this.callbacks[e];return n&&n.forEach(r=>r.apply(this,t)),this}off(e,t){const n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter(r=>r!==t):delete this.callbacks[e]),this}once(e,t){const n=(...r)=>{this.off(e,n),t.apply(this,r)};return this.on(e,n)}removeAllListeners(){this.callbacks={}}};function LB(e,t){const n=new B6(e);return t.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}var PB=e=>{const t=e.childNodes;for(let n=t.length-1;n>=0;n-=1){const r=t[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?e.removeChild(r):r.nodeType===1&&PB(r)}return e};function Th(e){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const t=`<body>${e}</body>`,n=new window.DOMParser().parseFromString(t,"text/html").body;return PB(n)}function Ed(e,t,n){if(e instanceof jo||e instanceof ye)return e;n={slice:!0,parseOptions:{},...n};const r=typeof e=="object"&&e!==null,i=typeof e=="string";if(r)try{if(Array.isArray(e)&&e.length>0)return ye.fromArray(e.map(l=>t.nodeFromJSON(l)));const o=t.nodeFromJSON(e);return n.errorOnInvalidContent&&o.check(),o}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",s),Ed("",t,n)}if(i){if(n.errorOnInvalidContent){let o=!1,l="";const u=new S6({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:d=>(o=!0,l=typeof d=="string"?d:d.outerHTML,null)}]}})});if(n.slice?Xu.fromSchema(u).parseSlice(Th(e),n.parseOptions):Xu.fromSchema(u).parse(Th(e),n.parseOptions),n.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${l}`)})}const s=Xu.fromSchema(t);return n.slice?s.parseSlice(Th(e),n.parseOptions).content:s.parse(Th(e),n.parseOptions)}return Ed("",t,n)}function JE(e,t,n={},r={}){return Ed(e,t,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}function sJ(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function oJ(e,t,n){const r=[];return e.nodesBetween(t.from,t.to,(i,s)=>{n(i)&&r.push({node:i,pos:s})}),r}function aJ(e,t){for(let n=e.depth;n>0;n-=1){const r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}function Vm(e){return t=>aJ(t.$from,e)}function Be(e,t,n){return e.config[t]===void 0&&e.parent?Be(e.parent,t,n):typeof e.config[t]=="function"?e.config[t].bind({...n,parent:e.parent?Be(e.parent,t,n):null}):e.config[t]}function jk(e){return e.map(t=>{const n={name:t.name,options:t.options,storage:t.storage},r=Be(t,"addExtensions",n);return r?[t,...jk(r())]:t}).flat(10)}function Ok(e,t){const n=Ya.fromSchema(t).serializeFragment(e),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function IB(e){return typeof e=="function"}function bt(e,t=void 0,...n){return IB(e)?t?e.bind(t)(...n):e(...n):e}function lJ(e={}){return Object.keys(e).length===0&&e.constructor===Object}function Cd(e){const t=e.filter(i=>i.type==="extension"),n=e.filter(i=>i.type==="node"),r=e.filter(i=>i.type==="mark");return{baseExtensions:t,nodeExtensions:n,markExtensions:r}}function BB(e){const t=[],{nodeExtensions:n,markExtensions:r}=Cd(e),i=[...n,...r],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage,extensions:i},u=Be(o,"addGlobalAttributes",l);if(!u)return;u().forEach(h=>{h.types.forEach(p=>{Object.entries(h.attributes).forEach(([m,b])=>{t.push({type:p,name:m,attribute:{...s,...b}})})})})}),i.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage},u=Be(o,"addAttributes",l);if(!u)return;const d=u();Object.entries(d).forEach(([h,p])=>{const m={...s,...p};typeof m?.default=="function"&&(m.default=m.default()),m?.isRequired&&m?.default===void 0&&delete m.default,t.push({type:o.name,name:h,attribute:m})})}),t}function wn(...e){return e.filter(t=>!!t).reduce((t,n)=>{const r={...t};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const l=s?String(s).split(" "):[],u=r[i]?r[i].split(" "):[],d=l.filter(h=>!u.includes(h));r[i]=[...u,...d].join(" ")}else if(i==="style"){const l=s?s.split(";").map(h=>h.trim()).filter(Boolean):[],u=r[i]?r[i].split(";").map(h=>h.trim()).filter(Boolean):[],d=new Map;u.forEach(h=>{const[p,m]=h.split(":").map(b=>b.trim());d.set(p,m)}),l.forEach(h=>{const[p,m]=h.split(":").map(b=>b.trim());d.set(p,m)}),r[i]=Array.from(d.entries()).map(([h,p])=>`${h}: ${p}`).join("; ")}else r[i]=s}),r},{})}function Mp(e,t){return t.filter(n=>n.type===e.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(e.attrs)||{}:{[n.name]:e.attrs[n.name]}).reduce((n,r)=>wn(n,r),{})}function cJ(e){return typeof e!="string"?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):e==="true"?!0:e==="false"?!1:e}function FD(e,t){return"style"in e?e:{...e,getAttrs:n=>{const r=e.getAttrs?e.getAttrs(n):e.attrs;if(r===!1)return!1;const i=t.reduce((s,o)=>{const l=o.attribute.parseHTML?o.attribute.parseHTML(n):cJ(n.getAttribute(o.name));return l==null?s:{...s,[o.name]:l}},{});return{...r,...i}}}}function UD(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>t==="attrs"&&lJ(n)?!1:n!=null))}function uJ(e,t){var n;const r=BB(e),{nodeExtensions:i,markExtensions:s}=Cd(e),o=(n=i.find(d=>Be(d,"topNode")))==null?void 0:n.name,l=Object.fromEntries(i.map(d=>{const h=r.filter(C=>C.type===d.name),p={name:d.name,options:d.options,storage:d.storage,editor:t},m=e.reduce((C,N)=>{const k=Be(N,"extendNodeSchema",p);return{...C,...k?k(d):{}}},{}),b=UD({...m,content:bt(Be(d,"content",p)),marks:bt(Be(d,"marks",p)),group:bt(Be(d,"group",p)),inline:bt(Be(d,"inline",p)),atom:bt(Be(d,"atom",p)),selectable:bt(Be(d,"selectable",p)),draggable:bt(Be(d,"draggable",p)),code:bt(Be(d,"code",p)),whitespace:bt(Be(d,"whitespace",p)),linebreakReplacement:bt(Be(d,"linebreakReplacement",p)),defining:bt(Be(d,"defining",p)),isolating:bt(Be(d,"isolating",p)),attrs:Object.fromEntries(h.map(C=>{var N,k;return[C.name,{default:(N=C?.attribute)==null?void 0:N.default,validate:(k=C?.attribute)==null?void 0:k.validate}]}))}),x=bt(Be(d,"parseHTML",p));x&&(b.parseDOM=x.map(C=>FD(C,h)));const S=Be(d,"renderHTML",p);S&&(b.toDOM=C=>S({node:C,HTMLAttributes:Mp(C,h)}));const w=Be(d,"renderText",p);return w&&(b.toText=w),[d.name,b]})),u=Object.fromEntries(s.map(d=>{const h=r.filter(w=>w.type===d.name),p={name:d.name,options:d.options,storage:d.storage,editor:t},m=e.reduce((w,C)=>{const N=Be(C,"extendMarkSchema",p);return{...w,...N?N(d):{}}},{}),b=UD({...m,inclusive:bt(Be(d,"inclusive",p)),excludes:bt(Be(d,"excludes",p)),group:bt(Be(d,"group",p)),spanning:bt(Be(d,"spanning",p)),code:bt(Be(d,"code",p)),attrs:Object.fromEntries(h.map(w=>{var C,N;return[w.name,{default:(C=w?.attribute)==null?void 0:C.default,validate:(N=w?.attribute)==null?void 0:N.validate}]}))}),x=bt(Be(d,"parseHTML",p));x&&(b.parseDOM=x.map(w=>FD(w,h)));const S=Be(d,"renderHTML",p);return S&&(b.toDOM=w=>S({mark:w,HTMLAttributes:Mp(w,h)})),[d.name,b]}));return new S6({topNode:o,nodes:l,marks:u})}function dJ(e){const t=e.filter((n,r)=>e.indexOf(n)!==r);return Array.from(new Set(t))}function Lk(e){return e.sort((n,r)=>{const i=Be(n,"priority")||100,s=Be(r,"priority")||100;return i>s?-1:i<s?1:0})}function zB(e){const t=Lk(jk(e)),n=dJ(t.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),t}function qB(e,t,n){const{from:r,to:i}=t,{blockSeparator:s=`

`,textSerializers:o={}}=n||{};let l="";return e.nodesBetween(r,i,(u,d,h,p)=>{var m;u.isBlock&&d>r&&(l+=s);const b=o?.[u.type.name];if(b)return h&&(l+=b({node:u,pos:d,parent:h,index:p,range:t})),!1;u.isText&&(l+=(m=u?.text)==null?void 0:m.slice(Math.max(r,d)-d,i-d))}),l}function fJ(e,t){const n={from:0,to:e.content.size};return qB(e,n,t)}function VB(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,t])=>t.spec.toText).map(([t,n])=>[t,n.spec.toText]))}function zs(e,t){if(typeof e=="string"){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}function HB(e,t){const n=zs(t,e.schema),{from:r,to:i,empty:s}=e.selection,o=[];s?(e.storedMarks&&o.push(...e.storedMarks),o.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,i,u=>{o.push(...u.marks)});const l=o.find(u=>u.type.name===n.name);return l?{...l.attrs}:{}}function Sn(e,t){if(typeof e=="string"){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}function hJ(e,t){const n=Sn(t,e.schema),{from:r,to:i}=e.selection,s=[];e.doc.nodesBetween(r,i,l=>{s.push(l)});const o=s.reverse().find(l=>l.type.name===n.name);return o?{...o.attrs}:{}}function Hm(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function FB(e,t){const n=Hm(typeof t=="string"?t:t.name,e.schema);return n==="node"?hJ(e,t):n==="mark"?HB(e,t):{}}function pJ(e,t=JSON.stringify){const n={};return e.filter(r=>{const i=t(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function mJ(e){const t=pJ(e);return t.length===1?t:t.filter((n,r)=>!t.filter((s,o)=>o!==r).some(s=>n.oldRange.from>=s.oldRange.from&&n.oldRange.to<=s.oldRange.to&&n.newRange.from>=s.newRange.from&&n.newRange.to<=s.newRange.to))}function UB(e){const{mapping:t,steps:n}=e,r=[];return t.maps.forEach((i,s)=>{const o=[];if(i.ranges.length)i.forEach((l,u)=>{o.push({from:l,to:u})});else{const{from:l,to:u}=n[s];if(l===void 0||u===void 0)return;o.push({from:l,to:u})}o.forEach(({from:l,to:u})=>{const d=t.slice(s).map(l,-1),h=t.slice(s).map(u),p=t.invert().map(d,-1),m=t.invert().map(h);r.push({oldRange:{from:p,to:m},newRange:{from:d,to:h}})})}),mJ(r)}function Pk(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function _p(e,t,n={strict:!0}){const r=Object.keys(t);return r.length?r.every(i=>n.strict?t[i]===e[i]:Pk(t[i])?t[i].test(e[i]):t[i]===e[i]):!0}function $B(e,t,n={}){return e.find(r=>r.type===t&&_p(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function $D(e,t,n={}){return!!$B(e,t,n)}function Ik(e,t,n){var r;if(!e||!t)return;let i=e.parent.childAfter(e.parentOffset);if((!i.node||!i.node.marks.some(h=>h.type===t))&&(i=e.parent.childBefore(e.parentOffset)),!i.node||!i.node.marks.some(h=>h.type===t)||(n=n||((r=i.node.marks[0])==null?void 0:r.attrs),!$B([...i.node.marks],t,n)))return;let o=i.index,l=e.start()+i.offset,u=o+1,d=l+i.node.nodeSize;for(;o>0&&$D([...e.parent.child(o-1).marks],t,n);)o-=1,l-=e.parent.child(o).nodeSize;for(;u<e.parent.childCount&&$D([...e.parent.child(u).marks],t,n);)d+=e.parent.child(u).nodeSize,u+=1;return{from:l,to:d}}function Bk(e,t,n){const r=[];return e===t?n.resolve(e).marks().forEach(i=>{const s=n.resolve(e),o=Ik(s,i.type);o&&r.push({mark:i,...o})}):n.nodesBetween(e,t,(i,s)=>{!i||i?.nodeSize===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}var gJ=(e,t,n,r=20)=>{const i=e.doc.resolve(n);let s=r,o=null;for(;s>0&&o===null;){const l=i.node(s);l?.type.name===t?o=l:s-=1}return[o,s]};function fb(e,t){return t.nodes[e]||t.marks[e]||null}function Qh(e,t,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=e.find(s=>s.type===t&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}var yJ=(e,t=500)=>{let n="";const r=e.parentOffset;return e.parent.nodesBetween(Math.max(0,r-t),r,(i,s,o,l)=>{var u,d;const h=((d=(u=i.type.spec).toText)==null?void 0:d.call(u,{node:i,pos:s,parent:o,index:l}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?h:h.slice(0,Math.max(0,r-s))}),n};function QE(e,t,n={}){const{empty:r,ranges:i}=e.selection,s=t?zs(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter(p=>s?s.name===p.type.name:!0).find(p=>_p(p.attrs,n,{strict:!1}));let o=0;const l=[];if(i.forEach(({$from:p,$to:m})=>{const b=p.pos,x=m.pos;e.doc.nodesBetween(b,x,(S,w)=>{if(!S.isText&&!S.marks.length)return;const C=Math.max(b,w),N=Math.min(x,w+S.nodeSize),k=N-C;o+=k,l.push(...S.marks.map(T=>({mark:T,from:C,to:N})))})}),o===0)return!1;const u=l.filter(p=>s?s.name===p.mark.type.name:!0).filter(p=>_p(p.mark.attrs,n,{strict:!1})).reduce((p,m)=>p+m.to-m.from,0),d=l.filter(p=>s?p.mark.type!==s&&p.mark.type.excludes(s):!0).reduce((p,m)=>p+m.to-m.from,0);return(u>0?u+d:u)>=o}function Ho(e,t,n={}){const{from:r,to:i,empty:s}=e.selection,o=t?Sn(t,e.schema):null,l=[];e.doc.nodesBetween(r,i,(p,m)=>{if(p.isText)return;const b=Math.max(r,m),x=Math.min(i,m+p.nodeSize);l.push({node:p,from:b,to:x})});const u=i-r,d=l.filter(p=>o?o.name===p.node.type.name:!0).filter(p=>_p(p.node.attrs,n,{strict:!1}));return s?!!d.length:d.reduce((p,m)=>p+m.to-m.from,0)>=u}function bJ(e,t,n={}){if(!t)return Ho(e,null,n)||QE(e,null,n);const r=Hm(t,e.schema);return r==="node"?Ho(e,t,n):r==="mark"?QE(e,t,n):!1}var vJ=(e,t)=>{const{$from:n,$to:r,$anchor:i}=e.selection;if(t){const s=Vm(l=>l.type.name===t)(e.selection);if(!s)return!1;const o=e.doc.resolve(s.pos+1);return i.pos+1===o.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},xJ=e=>{const{$from:t,$to:n}=e.selection;return!(t.parentOffset>0||t.pos!==n.pos)};function GD(e,t){return Array.isArray(t)?t.some(n=>(typeof n=="string"?n:n.name)===e.name):t}function WD(e,t){const{nodeExtensions:n}=Cd(t),r=n.find(o=>o.name===e);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=bt(Be(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function Fm(e,{checkChildren:t=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(e.type.name==="hardBreak")return!0;if(e.isText)return/^\s*$/m.test((r=e.text)!=null?r:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(e.content.childCount===0)return!0;if(t){let i=!0;return e.content.forEach(s=>{i!==!1&&(Fm(s,{ignoreWhitespace:n,checkChildren:t})||(i=!1))}),i}return!1}function GB(e){return e instanceof ze}function WB(e){return e instanceof Ke}function Sa(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function KB(e,t=null){if(!t)return null;const n=Ze.atStart(e),r=Ze.atEnd(e);if(t==="start"||t===!0)return n;if(t==="end")return r;const i=n.from,s=r.to;return t==="all"?Ke.create(e,Sa(0,i,s),Sa(e.content.size,i,s)):Ke.create(e,Sa(t,i,s),Sa(t,i,s))}function wJ(e,t,n){const r=e.steps.length-1;if(r<t)return;const i=e.steps[r];if(!(i instanceof In||i instanceof Bn))return;const s=e.mapping.maps[r];let o=0;s.forEach((l,u,d,h)=>{o===0&&(o=h)}),e.setSelection(Ze.near(e.doc.resolve(o),n))}var Um=class{constructor(e){var t;this.find=e.find,this.handler=e.handler,this.undoable=(t=e.undoable)!=null?t:!0}},SJ=(e,t)=>{if(Pk(t))return t.exec(e);const n=t(e);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=e,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function Nh(e){var t;const{editor:n,from:r,to:i,text:s,rules:o,plugin:l}=e,{view:u}=n;if(u.composing)return!1;const d=u.state.doc.resolve(r);if(d.parent.type.spec.code||(t=d.nodeBefore||d.nodeAfter)!=null&&t.marks.find(m=>m.type.spec.code))return!1;let h=!1;const p=yJ(d)+s;return o.forEach(m=>{if(h)return;const b=SJ(p,m.find);if(!b)return;const x=u.state.tr,S=zm({state:u.state,transaction:x}),w={from:r-(b[0].length-s.length),to:i},{commands:C,chain:N,can:k}=new qm({editor:n,state:S});m.handler({state:S,range:w,match:b,commands:C,chain:N,can:k})===null||!x.steps.length||(m.undoable&&x.setMeta(l,{transform:x,from:r,to:i,text:s}),u.dispatch(x),h=!0)}),h}function EJ(e){const{editor:t,rules:n}=e,r=new nn({state:{init(){return null},apply(i,s,o){const l=i.getMeta(r);if(l)return l;const u=i.getMeta("applyInputRules");return!!u&&setTimeout(()=>{let{text:h}=u;typeof h=="string"?h=h:h=Ok(ye.from(h),o.schema);const{from:p}=u,m=p+h.length;Nh({editor:t,from:p,to:m,text:h,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,l){return Nh({editor:t,from:s,to:o,text:l,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&Nh({editor:t,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?Nh({editor:t,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function CJ(e){return Object.prototype.toString.call(e).slice(8,-1)}function Ah(e){return CJ(e)!=="Object"?!1:e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function YB(e,t){const n={...e};return Ah(e)&&Ah(t)&&Object.keys(t).forEach(r=>{Ah(t[r])&&Ah(e[r])?n[r]=YB(e[r],t[r]):n[r]=t[r]}),n}var zk=class{constructor(e={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...e},this.name=this.config.name}get options(){return{...bt(Be(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...bt(Be(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(e={}){const t=this.extend({...this.config,addOptions:()=>YB(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new this.constructor({...this.config,...e});return t.parent=this,this.child=t,t.name="name"in e?e.name:t.parent.name,t}},Xa=class XB extends zk{constructor(){super(...arguments),this.type="mark"}static create(t={}){const n=typeof t=="function"?t():t;return new XB(n)}static handleExit({editor:t,mark:n}){const{tr:r}=t.state,i=t.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(d=>d?.type.name===n.name))return!1;const u=o.find(d=>d?.type.name===n.name);return u&&r.removeStoredMark(u),r.insertText(" ",i.pos),t.view.dispatch(r),!0}return!1}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}};function kJ(e){return typeof e=="number"}var TJ=class{constructor(e){this.find=e.find,this.handler=e.handler}},NJ=(e,t,n)=>{if(Pk(t))return[...e.matchAll(t)];const r=t(e,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=e,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function AJ(e){const{editor:t,state:n,from:r,to:i,rule:s,pasteEvent:o,dropEvent:l}=e,{commands:u,chain:d,can:h}=new qm({editor:t,state:n}),p=[];return n.doc.nodesBetween(r,i,(b,x)=>{var S,w,C,N,k;if((w=(S=b.type)==null?void 0:S.spec)!=null&&w.code||!(b.isText||b.isTextblock||b.isInline))return;const T=(k=(N=(C=b.content)==null?void 0:C.size)!=null?N:b.nodeSize)!=null?k:0,A=Math.max(r,x),M=Math.min(i,x+T);if(A>=M)return;const j=b.isText?b.text||"":b.textBetween(A-x,M-x,void 0,"");NJ(j,s.find,o).forEach(L=>{if(L.index===void 0)return;const I=A+L.index+1,H=I+L[0].length,q={from:n.tr.mapping.map(I),to:n.tr.mapping.map(H)},W=s.handler({state:n,range:q,match:L,commands:u,chain:d,can:h,pasteEvent:o,dropEvent:l});p.push(W)})}),p.every(b=>b!==null)}var Mh=null,MJ=e=>{var t;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(t=n.clipboardData)==null||t.setData("text/html",e),n};function _J(e){const{editor:t,rules:n}=e;let r=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,l;try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}const u=({state:h,from:p,to:m,rule:b,pasteEvt:x})=>{const S=h.tr,w=zm({state:h,transaction:S});if(!(!AJ({editor:t,state:w,from:Math.max(p-1,0),to:m.b-1,rule:b,pasteEvent:x,dropEvent:l})||!S.steps.length)){try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,S}};return n.map(h=>new nn({view(p){const m=x=>{var S;r=(S=p.dom.parentElement)!=null&&S.contains(x.target)?p.dom.parentElement:null,r&&(Mh=t)},b=()=>{Mh&&(Mh=null)};return window.addEventListener("dragstart",m),window.addEventListener("dragend",b),{destroy(){window.removeEventListener("dragstart",m),window.removeEventListener("dragend",b)}}},props:{handleDOMEvents:{drop:(p,m)=>{if(s=r===p.dom.parentElement,l=m,!s){const b=Mh;b?.isEditable&&setTimeout(()=>{const x=b.state.selection;x&&b.commands.deleteRange({from:x.from,to:x.to})},10)}return!1},paste:(p,m)=>{var b;const x=(b=m.clipboardData)==null?void 0:b.getData("text/html");return o=m,i=!!x?.includes("data-pm-slice"),!1}}},appendTransaction:(p,m,b)=>{const x=p[0],S=x.getMeta("uiEvent")==="paste"&&!i,w=x.getMeta("uiEvent")==="drop"&&!s,C=x.getMeta("applyPasteRules"),N=!!C;if(!S&&!w&&!N)return;if(N){let{text:A}=C;typeof A=="string"?A=A:A=Ok(ye.from(A),b.schema);const{from:M}=C,j=M+A.length,R=MJ(A);return u({rule:h,state:b,from:M,to:{b:j},pasteEvt:R})}const k=m.doc.content.findDiffStart(b.doc.content),T=m.doc.content.findDiffEnd(b.doc.content);if(!(!kJ(k)||!T||k===T.b))return u({rule:h,state:b,from:k,to:T,pasteEvt:o})}}))}var $m=class{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=zB(e),this.schema=uJ(this.extensions,t),this.setupExtensions()}get commands(){return this.extensions.reduce((e,t)=>{const n={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:fb(t.name,this.schema)},r=Be(t,"addCommands",n);return r?{...e,...r()}:e},{})}get plugins(){const{editor:e}=this;return Lk([...this.extensions].reverse()).flatMap(r=>{const i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:e,type:fb(r.name,this.schema)},s=[],o=Be(r,"addKeyboardShortcuts",i);let l={};if(r.type==="mark"&&Be(r,"exitable",i)&&(l.ArrowRight=()=>Xa.handleExit({editor:e,mark:r})),o){const m=Object.fromEntries(Object.entries(o()).map(([b,x])=>[b,()=>x({editor:e})]));l={...l,...m}}const u=PZ(l);s.push(u);const d=Be(r,"addInputRules",i);if(GD(r,e.options.enableInputRules)&&d){const m=d();if(m&&m.length){const b=EJ({editor:e,rules:m}),x=Array.isArray(b)?b:[b];s.push(...x)}}const h=Be(r,"addPasteRules",i);if(GD(r,e.options.enablePasteRules)&&h){const m=h();if(m&&m.length){const b=_J({editor:e,rules:m});s.push(...b)}}const p=Be(r,"addProseMirrorPlugins",i);if(p){const m=p();s.push(...m)}return s})}get attributes(){return BB(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=Cd(this.extensions);return Object.fromEntries(t.filter(n=>!!Be(n,"addNodeView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:Sn(n.name,this.schema)},s=Be(n,"addNodeView",i);if(!s)return[];const o=(l,u,d,h,p)=>{const m=Mp(l,r);return s()({node:l,view:u,getPos:d,decorations:h,innerDecorations:p,editor:e,extension:n,HTMLAttributes:m})};return[n.name,o]}))}get markViews(){const{editor:e}=this,{markExtensions:t}=Cd(this.extensions);return Object.fromEntries(t.filter(n=>!!Be(n,"addMarkView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:zs(n.name,this.schema)},s=Be(n,"addMarkView",i);if(!s)return[];const o=(l,u,d)=>{const h=Mp(l,r);return s()({mark:l,view:u,inline:d,editor:e,extension:n,HTMLAttributes:h,updateAttributes:p=>{GQ(l,e,p)}})};return[n.name,o]}))}setupExtensions(){const e=this.extensions;this.editor.extensionStorage=Object.fromEntries(e.map(t=>[t.name,t.storage])),e.forEach(t=>{var n;const r={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:fb(t.name,this.schema)};t.type==="mark"&&((n=bt(Be(t,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(t.name);const i=Be(t,"onBeforeCreate",r),s=Be(t,"onCreate",r),o=Be(t,"onUpdate",r),l=Be(t,"onSelectionUpdate",r),u=Be(t,"onTransaction",r),d=Be(t,"onFocus",r),h=Be(t,"onBlur",r),p=Be(t,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),l&&this.editor.on("selectionUpdate",l),u&&this.editor.on("transaction",u),d&&this.editor.on("focus",d),h&&this.editor.on("blur",h),p&&this.editor.on("destroy",p)})}};$m.resolve=zB;$m.sort=Lk;$m.flatten=jk;var DJ={};OB(DJ,{ClipboardTextSerializer:()=>JB,Commands:()=>tz,Delete:()=>nz,Drop:()=>rz,Editable:()=>iz,FocusEvents:()=>oz,Keymap:()=>az,Paste:()=>lz,Tabindex:()=>cz,focusEventsPluginKey:()=>sz});var dn=class ZB extends zk{constructor(){super(...arguments),this.type="extension"}static create(t={}){const n=typeof t=="function"?t():t;return new ZB(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}},JB=dn.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new nn({key:new qn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:i}=t,{ranges:s}=i,o=Math.min(...s.map(h=>h.$from.pos)),l=Math.max(...s.map(h=>h.$to.pos)),u=VB(n);return qB(r,{from:o,to:l},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:u})}}})]}}),QB={};OB(QB,{blur:()=>RJ,clearContent:()=>jJ,clearNodes:()=>OJ,command:()=>LJ,createParagraphNear:()=>PJ,cut:()=>IJ,deleteCurrentNode:()=>BJ,deleteNode:()=>zJ,deleteRange:()=>qJ,deleteSelection:()=>VJ,enter:()=>HJ,exitCode:()=>FJ,extendMarkRange:()=>UJ,first:()=>$J,focus:()=>WJ,forEach:()=>KJ,insertContent:()=>YJ,insertContentAt:()=>ZJ,joinBackward:()=>eQ,joinDown:()=>QJ,joinForward:()=>tQ,joinItemBackward:()=>nQ,joinItemForward:()=>rQ,joinTextblockBackward:()=>iQ,joinTextblockForward:()=>sQ,joinUp:()=>JJ,keyboardShortcut:()=>aQ,lift:()=>lQ,liftEmptyBlock:()=>cQ,liftListItem:()=>uQ,newlineInCode:()=>dQ,resetAttributes:()=>fQ,scrollIntoView:()=>hQ,selectAll:()=>pQ,selectNodeBackward:()=>mQ,selectNodeForward:()=>gQ,selectParentNode:()=>yQ,selectTextblockEnd:()=>bQ,selectTextblockStart:()=>vQ,setContent:()=>xQ,setMark:()=>SQ,setMeta:()=>EQ,setNode:()=>CQ,setNodeSelection:()=>kQ,setTextSelection:()=>TQ,sinkListItem:()=>NQ,splitBlock:()=>AQ,splitListItem:()=>MQ,toggleList:()=>_Q,toggleMark:()=>DQ,toggleNode:()=>RQ,toggleWrap:()=>jQ,undoInputRule:()=>OQ,unsetAllMarks:()=>LQ,unsetMark:()=>PQ,updateAttributes:()=>IQ,wrapIn:()=>BQ,wrapInList:()=>zQ});var RJ=()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var n;e.isDestroyed||(t.dom.blur(),(n=window?.getSelection())==null||n.removeAllRanges())}),!0),jJ=(e=!0)=>({commands:t})=>t.setContent("",{emitUpdate:e}),OJ=()=>({state:e,tr:t,dispatch:n})=>{const{selection:r}=t,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:o})=>{e.doc.nodesBetween(s.pos,o.pos,(l,u)=>{if(l.type.isText)return;const{doc:d,mapping:h}=t,p=d.resolve(h.map(u)),m=d.resolve(h.map(u+l.nodeSize)),b=p.blockRange(m);if(!b)return;const x=vc(b);if(l.type.isTextblock){const{defaultType:S}=p.parent.contentMatchAt(p.index());t.setNodeMarkup(b.start,S)}(x||x===0)&&t.lift(b,x)})}),!0},LJ=e=>t=>e(t),PJ=()=>({state:e,dispatch:t})=>_B(e,t),IJ=(e,t)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(e.from,e.to);r.deleteRange(e.from,e.to);const o=r.mapping.map(t);return r.insert(o,s.content),r.setSelection(new Ke(r.doc.resolve(Math.max(o-1,0)))),!0},BJ=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,r=n.$anchor.node();if(r.content.size>0)return!1;const i=e.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(t){const l=i.before(s),u=i.after(s);e.delete(l,u).scrollIntoView()}return!0}return!1},zJ=e=>({tr:t,state:n,dispatch:r})=>{const i=Sn(e,n.schema),s=t.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const u=s.before(o),d=s.after(o);t.delete(u,d).scrollIntoView()}return!0}return!1},qJ=e=>({tr:t,dispatch:n})=>{const{from:r,to:i}=e;return n&&t.delete(r,i),!0},VJ=()=>({state:e,dispatch:t})=>Ak(e,t),HJ=()=>({commands:e})=>e.keyboardShortcut("Enter"),FJ=()=>({state:e,dispatch:t})=>HZ(e,t),UJ=(e,t={})=>({tr:n,state:r,dispatch:i})=>{const s=zs(e,r.schema),{doc:o,selection:l}=n,{$from:u,from:d,to:h}=l;if(i){const p=Ik(u,s,t);if(p&&p.from<=d&&p.to>=h){const m=Ke.create(o,p.from,p.to);n.setSelection(m)}}return!0},$J=e=>t=>{const n=typeof e=="function"?e(t):e;for(let r=0;r<n.length;r+=1)if(n[r](t))return!0;return!1};function GJ(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function qk(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var WJ=(e=null,t={})=>({editor:n,view:r,tr:i,dispatch:s})=>{t={scrollIntoView:!0,...t};const o=()=>{(qk()||GJ())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),t?.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&e===null||e===!1)return!0;if(s&&e===null&&!WB(n.state.selection))return o(),!0;const l=KB(i.doc,e)||n.state.selection,u=n.state.selection.eq(l);return s&&(u||i.setSelection(l),u&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},KJ=(e,t)=>n=>e.every((r,i)=>t(r,{...n,index:i})),YJ=(e,t)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},e,t),XJ=e=>!("type"in e),ZJ=(e,t,n)=>({tr:r,dispatch:i,editor:s})=>{var o;if(i){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let l;const u=w=>{s.emit("contentError",{editor:s,error:w,disableCollaboration:()=>{"collaboration"in s.storage&&typeof s.storage.collaboration=="object"&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},d={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{Ed(t,s.schema,{parseOptions:d,errorOnInvalidContent:!0})}catch(w){u(w)}try{l=Ed(t,s.schema,{parseOptions:d,errorOnInvalidContent:(o=n.errorOnInvalidContent)!=null?o:s.options.enableContentCheck})}catch(w){return u(w),!1}let{from:h,to:p}=typeof e=="number"?{from:e,to:e}:{from:e.from,to:e.to},m=!0,b=!0;if((XJ(l)?l:[l]).forEach(w=>{w.check(),m=m?w.isText&&w.marks.length===0:!1,b=b?w.isBlock:!1}),h===p&&b){const{parent:w}=r.doc.resolve(h);w.isTextblock&&!w.type.spec.code&&!w.childCount&&(h-=1,p+=1)}let S;if(m){if(Array.isArray(t))S=t.map(w=>w.text||"").join("");else if(t instanceof ye){let w="";t.forEach(C=>{C.text&&(w+=C.text)}),S=w}else typeof t=="object"&&t&&t.text?S=t.text:S=t;r.insertText(S,h,p)}else{S=l;const w=r.doc.resolve(h),C=w.node(),N=w.parentOffset===0,k=C.isText||C.isTextblock,T=C.content.size>0;N&&k&&T&&(h=Math.max(0,h-1)),r.replaceWith(h,p,S)}n.updateSelection&&wJ(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:h,text:S}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:h,text:S})}return!0},JJ=()=>({state:e,dispatch:t})=>zZ(e,t),QJ=()=>({state:e,dispatch:t})=>qZ(e,t),eQ=()=>({state:e,dispatch:t})=>EB(e,t),tQ=()=>({state:e,dispatch:t})=>NB(e,t),nQ=()=>({state:e,dispatch:t,tr:n})=>{try{const r=jm(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},rQ=()=>({state:e,dispatch:t,tr:n})=>{try{const r=jm(e.doc,e.selection.$from.pos,1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},iQ=()=>({state:e,dispatch:t})=>IZ(e,t),sQ=()=>({state:e,dispatch:t})=>BZ(e,t);function ez(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function oQ(e){const t=e.split(/-(?!$)/);let n=t[t.length-1];n==="Space"&&(n=" ");let r,i,s,o;for(let l=0;l<t.length-1;l+=1){const u=t[l];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))i=!0;else if(/^s(hift)?$/i.test(u))s=!0;else if(/^mod$/i.test(u))qk()||ez()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${u}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}var aQ=e=>({editor:t,view:n,tr:r,dispatch:i})=>{const s=oQ(e).split(/-(?!$)/),o=s.find(d=>!["Alt","Ctrl","Meta","Shift"].includes(d)),l=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),u=t.captureTransaction(()=>{n.someProp("handleKeyDown",d=>d(n,l))});return u?.steps.forEach(d=>{const h=d.map(r.mapping);h&&i&&r.maybeStep(h)}),!0},lQ=(e,t={})=>({state:n,dispatch:r})=>{const i=Sn(e,n.schema);return Ho(n,i,t)?VZ(n,r):!1},cQ=()=>({state:e,dispatch:t})=>DB(e,t),uQ=e=>({state:t,dispatch:n})=>{const r=Sn(e,t.schema);return QZ(r)(t,n)},dQ=()=>({state:e,dispatch:t})=>MB(e,t);function KD(e,t){const n=typeof t=="string"?[t]:t;return Object.keys(e).reduce((r,i)=>(n.includes(i)||(r[i]=e[i]),r),{})}var fQ=(e,t)=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const l=Hm(typeof e=="string"?e:e.name,r.schema);return l?(l==="node"&&(s=Sn(e,r.schema)),l==="mark"&&(o=zs(e,r.schema)),i&&n.selection.ranges.forEach(u=>{r.doc.nodesBetween(u.$from.pos,u.$to.pos,(d,h)=>{s&&s===d.type&&n.setNodeMarkup(h,void 0,KD(d.attrs,t)),o&&d.marks.length&&d.marks.forEach(p=>{o===p.type&&n.addMark(h,h+d.nodeSize,o.create(KD(p.attrs,t)))})})}),!0):!1},hQ=()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),pQ=()=>({tr:e,dispatch:t})=>{if(t){const n=new $r(e.doc);e.setSelection(n)}return!0},mQ=()=>({state:e,dispatch:t})=>kB(e,t),gQ=()=>({state:e,dispatch:t})=>AB(e,t),yQ=()=>({state:e,dispatch:t})=>$Z(e,t),bQ=()=>({state:e,dispatch:t})=>KZ(e,t),vQ=()=>({state:e,dispatch:t})=>WZ(e,t),xQ=(e,{errorOnInvalidContent:t,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:i,tr:s,dispatch:o,commands:l})=>{const{doc:u}=s;if(r.preserveWhitespace!=="full"){const d=JE(e,i.schema,r,{errorOnInvalidContent:t??i.options.enableContentCheck});return o&&s.replaceWith(0,u.content.size,d).setMeta("preventUpdate",!n),!0}return o&&s.setMeta("preventUpdate",!n),l.insertContentAt({from:0,to:u.content.size},e,{parseOptions:r,errorOnInvalidContent:t??i.options.enableContentCheck})};function wQ(e,t,n){var r;const{selection:i}=t;let s=null;if(WB(i)&&(s=i.$cursor),s){const l=(r=e.storedMarks)!=null?r:s.marks();return s.parent.type.allowsMarkType(n)&&(!!n.isInSet(l)||!l.some(d=>d.type.excludes(n)))}const{ranges:o}=i;return o.some(({$from:l,$to:u})=>{let d=l.depth===0?e.doc.inlineContent&&e.doc.type.allowsMarkType(n):!1;return e.doc.nodesBetween(l.pos,u.pos,(h,p,m)=>{if(d)return!1;if(h.isInline){const b=!m||m.type.allowsMarkType(n),x=!!n.isInSet(h.marks)||!h.marks.some(S=>S.type.excludes(n));d=b&&x}return!d}),d})}var SQ=(e,t={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:o,ranges:l}=s,u=zs(e,r.schema);if(i)if(o){const d=HB(r,u);n.addStoredMark(u.create({...d,...t}))}else l.forEach(d=>{const h=d.$from.pos,p=d.$to.pos;r.doc.nodesBetween(h,p,(m,b)=>{const x=Math.max(b,h),S=Math.min(b+m.nodeSize,p);m.marks.find(C=>C.type===u)?m.marks.forEach(C=>{u===C.type&&n.addMark(x,S,u.create({...C.attrs,...t}))}):n.addMark(x,S,u.create(t))})});return wQ(r,n,u)},EQ=(e,t)=>({tr:n})=>(n.setMeta(e,t),!0),CQ=(e,t={})=>({state:n,dispatch:r,chain:i})=>{const s=Sn(e,n.schema);let o;return n.selection.$anchor.sameParent(n.selection.$head)&&(o=n.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:l})=>HD(s,{...o,...t})(n)?!0:l.clearNodes()).command(({state:l})=>HD(s,{...o,...t})(l,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},kQ=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,i=Sa(e,0,r.content.size),s=ze.create(r,i);t.setSelection(s)}return!0},TQ=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,{from:i,to:s}=typeof e=="number"?{from:e,to:e}:e,o=Ke.atStart(r).from,l=Ke.atEnd(r).to,u=Sa(i,o,l),d=Sa(s,o,l),h=Ke.create(r,u,d);t.setSelection(h)}return!0},NQ=e=>({state:t,dispatch:n})=>{const r=Sn(e,t.schema);return nJ(r)(t,n)};function YD(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const r=n.filter(i=>t?.includes(i.type.name));e.tr.ensureMarks(r)}}var AQ=({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:o}=t,{$from:l,$to:u}=s,d=i.extensionManager.attributes,h=Qh(d,l.node().type.name,l.node().attrs);if(s instanceof ze&&s.node.isBlock)return!l.parentOffset||!js(o,l.pos)?!1:(r&&(e&&YD(n,i.extensionManager.splittableMarks),t.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;const p=u.parentOffset===u.parent.content.size,m=l.depth===0?void 0:sJ(l.node(-1).contentMatchAt(l.indexAfter(-1)));let b=p&&m?[{type:m,attrs:h}]:void 0,x=js(t.doc,t.mapping.map(l.pos),1,b);if(!b&&!x&&js(t.doc,t.mapping.map(l.pos),1,m?[{type:m}]:void 0)&&(x=!0,b=m?[{type:m,attrs:h}]:void 0),r){if(x&&(s instanceof Ke&&t.deleteSelection(),t.split(t.mapping.map(l.pos),1,b),m&&!p&&!l.parentOffset&&l.parent.type!==m)){const S=t.mapping.map(l.before()),w=t.doc.resolve(S);l.node(-1).canReplaceWith(w.index(),w.index()+1,m)&&t.setNodeMarkup(t.mapping.map(l.before()),m)}e&&YD(n,i.extensionManager.splittableMarks),t.scrollIntoView()}return x},MQ=(e,t={})=>({tr:n,state:r,dispatch:i,editor:s})=>{var o;const l=Sn(e,r.schema),{$from:u,$to:d}=r.selection,h=r.selection.node;if(h&&h.isBlock||u.depth<2||!u.sameParent(d))return!1;const p=u.node(-1);if(p.type!==l)return!1;const m=s.extensionManager.attributes;if(u.parent.content.size===0&&u.node(-1).childCount===u.indexAfter(-1)){if(u.depth===2||u.node(-3).type!==l||u.index(-2)!==u.node(-2).childCount-1)return!1;if(i){let C=ye.empty;const N=u.index(-1)?1:u.index(-2)?2:3;for(let R=u.depth-N;R>=u.depth-3;R-=1)C=ye.from(u.node(R).copy(C));const k=u.indexAfter(-1)<u.node(-2).childCount?1:u.indexAfter(-2)<u.node(-3).childCount?2:3,T={...Qh(m,u.node().type.name,u.node().attrs),...t},A=((o=l.contentMatch.defaultType)==null?void 0:o.createAndFill(T))||void 0;C=C.append(ye.from(l.createAndFill(null,A)||void 0));const M=u.before(u.depth-(N-1));n.replace(M,u.after(-k),new Ne(C,4-N,0));let j=-1;n.doc.nodesBetween(M,n.doc.content.size,(R,L)=>{if(j>-1)return!1;R.isTextblock&&R.content.size===0&&(j=L+1)}),j>-1&&n.setSelection(Ke.near(n.doc.resolve(j))),n.scrollIntoView()}return!0}const b=d.pos===u.end()?p.contentMatchAt(0).defaultType:null,x={...Qh(m,p.type.name,p.attrs),...t},S={...Qh(m,u.node().type.name,u.node().attrs),...t};n.delete(u.pos,d.pos);const w=b?[{type:l,attrs:x},{type:b,attrs:S}]:[{type:l,attrs:x}];if(!js(n.doc,u.pos,2))return!1;if(i){const{selection:C,storedMarks:N}=r,{splittableMarks:k}=s.extensionManager,T=N||C.$to.parentOffset&&C.$from.marks();if(n.split(u.pos,2,w).scrollIntoView(),!T||!i)return!0;const A=T.filter(M=>k.includes(M.type.name));n.ensureMarks(A)}return!0},hb=(e,t)=>{const n=Vm(o=>o.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=e.doc.nodeAt(r);return n.node.type===i?.type&&$o(e.doc,n.pos)&&e.join(n.pos),!0},pb=(e,t)=>{const n=Vm(o=>o.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=e.doc.nodeAt(r);return n.node.type===i?.type&&$o(e.doc,r)&&e.join(r),!0},_Q=(e,t,n,r={})=>({editor:i,tr:s,state:o,dispatch:l,chain:u,commands:d,can:h})=>{const{extensions:p,splittableMarks:m}=i.extensionManager,b=Sn(e,o.schema),x=Sn(t,o.schema),{selection:S,storedMarks:w}=o,{$from:C,$to:N}=S,k=C.blockRange(N),T=w||S.$to.parentOffset&&S.$from.marks();if(!k)return!1;const A=Vm(M=>WD(M.type.name,p))(S);if(k.depth>=1&&A&&k.depth-A.depth<=1){if(A.node.type===b)return d.liftListItem(x);if(WD(A.node.type.name,p)&&b.validContent(A.node.content)&&l)return u().command(()=>(s.setNodeMarkup(A.pos,b),!0)).command(()=>hb(s,b)).command(()=>pb(s,b)).run()}return!n||!T||!l?u().command(()=>h().wrapInList(b,r)?!0:d.clearNodes()).wrapInList(b,r).command(()=>hb(s,b)).command(()=>pb(s,b)).run():u().command(()=>{const M=h().wrapInList(b,r),j=T.filter(R=>m.includes(R.type.name));return s.ensureMarks(j),M?!0:d.clearNodes()}).wrapInList(b,r).command(()=>hb(s,b)).command(()=>pb(s,b)).run()},DQ=(e,t={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,o=zs(e,r.schema);return QE(r,o,t)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,t)},RQ=(e,t,n={})=>({state:r,commands:i})=>{const s=Sn(e,r.schema),o=Sn(t,r.schema),l=Ho(r,s,n);let u;return r.selection.$anchor.sameParent(r.selection.$head)&&(u=r.selection.$anchor.parent.attrs),l?i.setNode(o,u):i.setNode(s,{...u,...n})},jQ=(e,t={})=>({state:n,commands:r})=>{const i=Sn(e,n.schema);return Ho(n,i,t)?r.lift(i):r.wrapIn(i,t)},OQ=()=>({state:e,dispatch:t})=>{const n=e.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(e))){if(t){const o=e.tr,l=s.transform;for(let u=l.steps.length-1;u>=0;u-=1)o.step(l.steps[u].invert(l.docs[u]));if(s.text){const u=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,e.schema.text(s.text,u))}else o.delete(s.from,s.to)}return!0}}return!1},LQ=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,{empty:r,ranges:i}=n;return r||t&&i.forEach(s=>{e.removeMark(s.$from.pos,s.$to.pos)}),!0},PQ=(e,t={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=t,{selection:l}=n,u=zs(e,r.schema),{$from:d,empty:h,ranges:p}=l;if(!i)return!0;if(h&&o){let{from:m,to:b}=l;const x=(s=d.marks().find(w=>w.type===u))==null?void 0:s.attrs,S=Ik(d,u,x);S&&(m=S.from,b=S.to),n.removeMark(m,b,u)}else p.forEach(m=>{n.removeMark(m.$from.pos,m.$to.pos,u)});return n.removeStoredMark(u),!0},IQ=(e,t={})=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const l=Hm(typeof e=="string"?e:e.name,r.schema);return l?(l==="node"&&(s=Sn(e,r.schema)),l==="mark"&&(o=zs(e,r.schema)),i&&n.selection.ranges.forEach(u=>{const d=u.$from.pos,h=u.$to.pos;let p,m,b,x;n.selection.empty?r.doc.nodesBetween(d,h,(S,w)=>{s&&s===S.type&&(b=Math.max(w,d),x=Math.min(w+S.nodeSize,h),p=w,m=S)}):r.doc.nodesBetween(d,h,(S,w)=>{w<d&&s&&s===S.type&&(b=Math.max(w,d),x=Math.min(w+S.nodeSize,h),p=w,m=S),w>=d&&w<=h&&(s&&s===S.type&&n.setNodeMarkup(w,void 0,{...S.attrs,...t}),o&&S.marks.length&&S.marks.forEach(C=>{if(o===C.type){const N=Math.max(w,d),k=Math.min(w+S.nodeSize,h);n.addMark(N,k,o.create({...C.attrs,...t}))}}))}),m&&(p!==void 0&&n.setNodeMarkup(p,void 0,{...m.attrs,...t}),o&&m.marks.length&&m.marks.forEach(S=>{o===S.type&&n.addMark(b,x,o.create({...S.attrs,...t}))}))}),!0):!1},BQ=(e,t={})=>({state:n,dispatch:r})=>{const i=Sn(e,n.schema);return YZ(i,t)(n,r)},zQ=(e,t={})=>({state:n,dispatch:r})=>{const i=Sn(e,n.schema);return XZ(i,t)(n,r)},tz=dn.create({name:"commands",addCommands(){return{...QB}}}),nz=dn.create({name:"delete",onUpdate({transaction:e,appendedTransactions:t}){var n,r,i;const s=()=>{var o,l,u,d;if((d=(u=(l=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:l.filterTransaction)==null?void 0:u.call(l,e))!=null?d:e.getMeta("y-sync$"))return;const h=LB(e.before,[e,...t]);UB(h).forEach(b=>{h.mapping.mapResult(b.oldRange.from).deletedAfter&&h.mapping.mapResult(b.oldRange.to).deletedBefore&&h.before.nodesBetween(b.oldRange.from,b.oldRange.to,(x,S)=>{const w=S+x.nodeSize-2,C=b.oldRange.from<=S&&w<=b.oldRange.to;this.editor.emit("delete",{type:"node",node:x,from:S,to:w,newFrom:h.mapping.map(S),newTo:h.mapping.map(w),deletedRange:b.oldRange,newRange:b.newRange,partial:!C,editor:this.editor,transaction:e,combinedTransform:h})})});const m=h.mapping;h.steps.forEach((b,x)=>{var S,w;if(b instanceof Mi){const C=m.slice(x).map(b.from,-1),N=m.slice(x).map(b.to),k=m.invert().map(C,-1),T=m.invert().map(N),A=(S=h.doc.nodeAt(C-1))==null?void 0:S.marks.some(j=>j.eq(b.mark)),M=(w=h.doc.nodeAt(N))==null?void 0:w.marks.some(j=>j.eq(b.mark));this.editor.emit("delete",{type:"mark",mark:b.mark,from:b.from,to:b.to,deletedRange:{from:k,to:T},newRange:{from:C,to:N},partial:!!(M||A),editor:this.editor,transaction:e,combinedTransform:h})}})};(i=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||i?setTimeout(s,0):s()}}),rz=dn.create({name:"drop",addProseMirrorPlugins(){return[new nn({key:new qn("tiptapDrop"),props:{handleDrop:(e,t,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:n,moved:r})}}})]}}),iz=dn.create({name:"editable",addProseMirrorPlugins(){return[new nn({key:new qn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),sz=new qn("focusEvents"),oz=dn.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new nn({key:sz,props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;const r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),az=dn.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:l})=>{const{selection:u,doc:d}=l,{empty:h,$anchor:p}=u,{pos:m,parent:b}=p,x=p.parent.isTextblock&&m>0?l.doc.resolve(m-1):p,S=x.parent.type.spec.isolating,w=p.pos-p.parentOffset,C=S&&x.parent.childCount===1?w===p.pos:Ze.atStart(d).from===m;return!h||!b.type.isTextblock||b.textContent.length||!C||C&&p.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return qk()||ez()?s:i},addProseMirrorPlugins(){return[new nn({key:new qn("clearDocument"),appendTransaction:(e,t,n)=>{if(e.some(S=>S.getMeta("composition")))return;const r=e.some(S=>S.docChanged)&&!t.doc.eq(n.doc),i=e.some(S=>S.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:o,to:l}=t.selection,u=Ze.atStart(t.doc).from,d=Ze.atEnd(t.doc).to;if(s||!(o===u&&l===d)||!Fm(n.doc))return;const m=n.tr,b=zm({state:n,transaction:m}),{commands:x}=new qm({editor:this.editor,state:b});if(x.clearNodes(),!!m.steps.length)return m}})]}}),lz=dn.create({name:"paste",addProseMirrorPlugins(){return[new nn({key:new qn("tiptapPaste"),props:{handlePaste:(e,t,n)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:n})}}})]}}),cz=dn.create({name:"tabindex",addProseMirrorPlugins(){return[new nn({key:new qn("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),qQ=class Vl{constructor(t,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=t,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var t;return(t=this.actualDepth)!=null?t:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(t){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},t)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const t=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(t);return new Vl(n,this.editor)}get before(){let t=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.from-3)),new Vl(t,this.editor)}get after(){let t=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.to+3)),new Vl(t,this.editor)}get children(){const t=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,o=this.pos+r+(s?0:1);if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;const l=this.resolvedPos.doc.resolve(o);if(!i&&l.depth<=this.depth)return;const u=new Vl(l,this.editor,i,i?n:null);i&&(u.actualDepth=this.depth+1),t.push(new Vl(l,this.editor,i,i?n:null))}),t}get firstChild(){return this.children[0]||null}get lastChild(){const t=this.children;return t[t.length-1]||null}closest(t,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===t)if(Object.keys(n).length>0){const s=i.node.attrs,o=Object.keys(n);for(let l=0;l<o.length;l+=1){const u=o[l];if(s[u]!==n[u])break}}else r=i;i=i.parent}return r}querySelector(t,n={}){return this.querySelectorAll(t,n,!0)[0]||null}querySelectorAll(t,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(n);return this.children.forEach(o=>{r&&i.length>0||(o.node.type.name===t&&s.every(u=>n[u]===o.node.attrs[u])&&i.push(o),!(r&&i.length>0)&&(i=i.concat(o.querySelectorAll(t,n,r))))}),i}setAttribute(t){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...t}),this.editor.view.dispatch(n)}},VQ=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function HQ(e,t,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return t&&i.setAttribute("nonce",t),i.setAttribute("data-tiptap-style",""),i.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(i),i}var FQ=class extends iJ{constructor(e={}){super(),this.css=null,this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:i,moved:s})=>this.options.onDrop(r,i,s)),this.on("paste",({event:r,slice:i})=>this.options.onPaste(r,i)),this.on("delete",this.options.onDelete);const t=this.createDoc(),n=KB(t,this.options.autofocus);this.editorState=Kl.create({doc:t,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(e){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(e),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const e=this.editorView.dom;e?.editor&&delete e.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(e){console.warn("Failed to remove CSS element:",e)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=HQ(VQ,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:e=>{this.editorState=e},dispatch:e=>{this.dispatchTransaction(e)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(e,t)=>{if(t==="state")return this.editorState;if(t in e)return Reflect.get(e,t);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${t}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(e,t){const n=IB(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let n=t;if([].concat(e).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;n=n.filter(o=>!o.key.startsWith(s))}),t.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var e,t;const r=[...this.options.enableCoreExtensions?[iz,JB.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)==null?void 0:e.clipboardTextSerializer)==null?void 0:t.blockSeparator}),tz,oz,az,cz,rz,lz,nz].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i?.type));this.extensionManager=new $m(r,this)}createCommandManager(){this.commandManager=new qm({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let e;try{e=JE(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(t){if(!(t instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(t.message))throw t;this.emit("contentError",{editor:this,error:t,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),e=JE(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return e}createView(e){var t;this.editorView=new xB(e,{...this.options.editorProps,attributes:{role:"textbox",...(t=this.options.editorProps)==null?void 0:t.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.prependClass(),this.injectCSS();const r=this.view.dom;r.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(d=>{var h;return(h=this.capturedTransaction)==null?void 0:h.step(d)});return}const{state:t,transactions:n}=this.state.applyTransaction(e),r=!this.state.selection.eq(t.selection),i=n.includes(e),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),!i)return;this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const o=n.findLast(d=>d.getMeta("focus")||d.getMeta("blur")),l=o?.getMeta("focus"),u=o?.getMeta("blur");l&&this.emit("focus",{editor:this,event:l.event,transaction:o}),u&&this.emit("blur",{editor:this,event:u.event,transaction:o}),!(e.getMeta("preventUpdate")||!n.some(d=>d.docChanged)||s.doc.eq(t.doc))&&this.emit("update",{editor:this,transaction:e,appendedTransactions:n.slice(1)})}getAttributes(e){return FB(this.state,e)}isActive(e,t){const n=typeof e=="string"?e:null,r=typeof e=="string"?t:e;return bJ(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return Ok(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:n={}}=e||{};return fJ(this.state.doc,{blockSeparator:t,textSerializers:{...VB(this.schema),...n}})}get isEmpty(){return Fm(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var e,t;return(t=(e=this.editorView)==null?void 0:e.isDestroyed)!=null?t:!0}$node(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelector(e,t))||null}$nodes(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new qQ(t,this)}get $doc(){return this.$pos(0)}};function cc(e){return new Um({find:e.find,handler:({state:t,range:n,match:r})=>{const i=bt(e.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=t,o=r[r.length-1],l=r[0];if(o){const u=l.search(/\S/),d=n.from+l.indexOf(o),h=d+o.length;if(Bk(n.from,n.to,t.doc).filter(b=>b.mark.type.excluded.find(S=>S===e.type&&S!==b.mark.type)).filter(b=>b.to>d).length)return null;h<n.to&&s.delete(h,n.to),d>n.from&&s.delete(n.from+u,d);const m=n.from+u+o.length;s.addMark(n.from+u,m,e.type.create(i||{})),s.removeStoredMark(e.type)}},undoable:e.undoable})}function UQ(e){return new Um({find:e.find,handler:({state:t,range:n,match:r})=>{const i=bt(e.getAttributes,void 0,r)||{},{tr:s}=t,o=n.from;let l=n.to;const u=e.type.create(i);if(r[1]){const d=r[0].lastIndexOf(r[1]);let h=o+d;h>l?h=l:l=h+r[1].length;const p=r[0][r[0].length-1];s.insertText(p,o+r[0].length-1),s.replaceWith(h,l,u)}else if(r[0]){const d=e.type.isInline?o:o-1;s.insert(d,e.type.create(i)).delete(s.mapping.map(o),s.mapping.map(l))}s.scrollIntoView()},undoable:e.undoable})}function eC(e){return new Um({find:e.find,handler:({state:t,range:n,match:r})=>{const i=t.doc.resolve(n.from),s=bt(e.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),e.type))return null;t.tr.delete(n.from,n.to).setBlockType(n.from,n.from,e.type,s)},undoable:e.undoable})}function uc(e){return new Um({find:e.find,handler:({state:t,range:n,match:r,chain:i})=>{const s=bt(e.getAttributes,void 0,r)||{},o=t.tr.delete(n.from,n.to),u=o.doc.resolve(n.from).blockRange(),d=u&&yk(u,e.type,s);if(!d)return null;if(o.wrap(u,d),e.keepMarks&&e.editor){const{selection:p,storedMarks:m}=t,{splittableMarks:b}=e.editor.extensionManager,x=m||p.$to.parentOffset&&p.$from.marks();if(x){const S=x.filter(w=>b.includes(w.type.name));o.ensureMarks(S)}}if(e.keepAttributes){const p=e.type.name==="bulletList"||e.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(p,s).run()}const h=o.doc.resolve(n.from-1).nodeBefore;h&&h.type===e.type&&$o(o.doc,n.from-1)&&(!e.joinPredicate||e.joinPredicate(r,h))&&o.join(n.from-1)},undoable:e.undoable})}function $Q(e,t){const{selection:n}=e,{$from:r}=n;if(n instanceof ze){const s=r.index();return r.parent.canReplaceWith(s,s+1,t)}let i=r.depth;for(;i>=0;){const s=r.index(i);if(r.node(i).contentMatchAt(s).matchType(t))return!0;i-=1}return!1}function GQ(e,t,n={}){const{state:r}=t,{doc:i,tr:s}=r,o=e;i.descendants((l,u)=>{const d=s.mapping.map(u),h=s.mapping.map(u)+l.nodeSize;let p=null;if(l.marks.forEach(b=>{if(b!==o)return!1;p=b}),!p)return;let m=!1;if(Object.keys(n).forEach(b=>{n[b]!==p.attrs[b]&&(m=!0)}),m){const b=e.type.create({...e.attrs,...n});s.removeMark(d,h,e.type),s.addMark(d,h,b)}}),s.docChanged&&t.view.dispatch(s)}var Wr=class uz extends zk{constructor(){super(...arguments),this.type="node"}static create(t={}){const n=typeof t=="function"?t():t;return new uz(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}};function za(e){return new TJ({find:e.find,handler:({state:t,range:n,match:r,pasteEvent:i})=>{const s=bt(e.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=t,l=r[r.length-1],u=r[0];let d=n.to;if(l){const h=u.search(/\S/),p=n.from+u.indexOf(l),m=p+l.length;if(Bk(n.from,n.to,t.doc).filter(x=>x.mark.type.excluded.find(w=>w===e.type&&w!==x.mark.type)).filter(x=>x.to>p).length)return null;m<n.to&&o.delete(m,n.to),p>n.from&&o.delete(n.from+h,p),d=n.from+h+l.length,o.addMark(n.from+h,d,e.type.create(s||{})),o.removeStoredMark(e.type)}}})}var mb,XD;function WQ(){return XD||(XD=1,mb=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t instanceof Map&&n instanceof Map){if(t.size!==n.size)return!1;for(i of t.entries())if(!n.has(i[0]))return!1;for(i of t.entries())if(!e(i[1],n.get(i[0])))return!1;return!0}if(t instanceof Set&&n instanceof Set){if(t.size!==n.size)return!1;for(i of t.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(n)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(t[i]!==n[i])return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!(o==="_owner"&&t.$$typeof)&&!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n}),mb}var KQ=WQ();const YQ=Bd(KQ);var gb={exports:{}},yb={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ZD;function XQ(){if(ZD)return yb;ZD=1;var e=zd(),t=s6();function n(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var r=typeof Object.is=="function"?Object.is:n,i=t.useSyncExternalStore,s=e.useRef,o=e.useEffect,l=e.useMemo,u=e.useDebugValue;return yb.useSyncExternalStoreWithSelector=function(d,h,p,m,b){var x=s(null);if(x.current===null){var S={hasValue:!1,value:null};x.current=S}else S=x.current;x=l(function(){function C(M){if(!N){if(N=!0,k=M,M=m(M),b!==void 0&&S.hasValue){var j=S.value;if(b(j,M))return T=j}return T=M}if(j=T,r(k,M))return j;var R=m(M);return b!==void 0&&b(j,R)?(k=M,j):(k=M,T=R)}var N=!1,k,T,A=p===void 0?null:p;return[function(){return C(h())},A===null?void 0:function(){return C(A())}]},[h,p,m,b]);var w=i(d,x[0],x[1]);return o(function(){S.hasValue=!0,S.value=w},[w]),u(w),w},yb}var JD;function ZQ(){return JD||(JD=1,gb.exports=XQ()),gb.exports}var dz=ZQ();const JQ=Bd(dz);var QQ=(...e)=>t=>{e.forEach(n=>{typeof n=="function"?n(t):n&&(n.current=t)})},eee=({contentComponent:e})=>{const t=o6.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getServerSnapshot);return y.jsx(y.Fragment,{children:Object.values(t)})};function tee(){const e=new Set;let t={};return{subscribe(n){return e.add(n),()=>{e.delete(n)}},getSnapshot(){return t},getServerSnapshot(){return t},setRenderer(n,r){t={...t,[n]:qd.createPortal(r.reactElement,r.element,n)},e.forEach(i=>i())},removeRenderer(n){const r={...t};delete r[n],t=r,e.forEach(i=>i())}}}var nee=class extends ke.Component{constructor(e){var t;super(e),this.editorContentRef=ke.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((t=e.editor)!=null&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(e.view.dom),e.setOptions({element:t}),e.contentComponent=tee(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var e;const t=this.props.editor;if(t){this.initialized=!1,t.isDestroyed||t.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),t.contentComponent=null;try{if(!((e=t.view.dom)!=null&&e.firstChild))return;const n=document.createElement("div");n.append(t.view.dom),t.setOptions({element:n})}catch{}}}render(){const{editor:e,innerRef:t,...n}=this.props;return y.jsxs(y.Fragment,{children:[y.jsx("div",{ref:QQ(t,this.editorContentRef),...n}),e?.contentComponent&&y.jsx(eee,{contentComponent:e.contentComponent})]})}},ree=D.forwardRef((e,t)=>{const n=ke.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[e.editor]);return ke.createElement(nee,{key:n,innerRef:t,...e})}),QD=ke.memo(ree),iee=typeof window<"u"?D.useLayoutEffect:D.useEffect,see=class{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",t),()=>{n.off("transaction",t)}}}};function oee(e){var t;const[n]=D.useState(()=>new see(e.editor)),r=dz.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,e.selector,(t=e.equalityFn)!=null?t:YQ);return iee(()=>n.watch(e.editor),[e.editor,n]),D.useDebugValue(r),r}var aee=!1,tC=typeof window>"u",lee=tC||!!(typeof window<"u"&&window.next),cee=class fz{constructor(t){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=t,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(t){this.editor=t,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?tC||lee?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const t={...this.options.current,onBeforeCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)==null?void 0:s.call(i,...r)},onBlur:(...r)=>{var i,s;return(s=(i=this.options.current).onBlur)==null?void 0:s.call(i,...r)},onCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onCreate)==null?void 0:s.call(i,...r)},onDestroy:(...r)=>{var i,s;return(s=(i=this.options.current).onDestroy)==null?void 0:s.call(i,...r)},onFocus:(...r)=>{var i,s;return(s=(i=this.options.current).onFocus)==null?void 0:s.call(i,...r)},onSelectionUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)==null?void 0:s.call(i,...r)},onTransaction:(...r)=>{var i,s;return(s=(i=this.options.current).onTransaction)==null?void 0:s.call(i,...r)},onUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onUpdate)==null?void 0:s.call(i,...r)},onContentError:(...r)=>{var i,s;return(s=(i=this.options.current).onContentError)==null?void 0:s.call(i,...r)},onDrop:(...r)=>{var i,s;return(s=(i=this.options.current).onDrop)==null?void 0:s.call(i,...r)},onPaste:(...r)=>{var i,s;return(s=(i=this.options.current).onPaste)==null?void 0:s.call(i,...r)},onDelete:(...r)=>{var i,s;return(s=(i=this.options.current).onDelete)==null?void 0:s.call(i,...r)}};return new FQ(t)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(t){return this.subscriptions.add(t),()=>{this.subscriptions.delete(t)}}static compareOptions(t,n){return Object.keys(t).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&t.extensions&&n.extensions?t.extensions.length!==n.extensions.length?!1:t.extensions.every((i,s)=>{var o;return i===((o=n.extensions)==null?void 0:o[s])}):t[r]===n[r])}onRender(t){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&t.length===0?fz.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(t),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(t){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=t;return}if(this.previousDeps.length===t.length&&this.previousDeps.every((r,i)=>r===t[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=t}scheduleDestroy(){const t=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===t){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===t&&this.setEditor(null))},1)}};function uee(e={},t=[]){const n=D.useRef(e);n.current=e;const[r]=D.useState(()=>new cee(n)),i=o6.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return D.useDebugValue(i),D.useEffect(r.onRender(t)),oee({editor:i,selector:({transactionNumber:s})=>e.shouldRerenderOnTransaction===!1||e.shouldRerenderOnTransaction===void 0?null:e.immediatelyRender&&s===0?0:s+1}),i}var dee=D.createContext({editor:null});dee.Consumer;var fee=D.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),hee=()=>D.useContext(fee);ke.forwardRef((e,t)=>{const{onDragStart:n}=hee(),r=e.as||"div";return y.jsx(r,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...e.style}})});ke.createContext({markViewContentRef:()=>{}});var Dp=(e,t)=>{if(e==="slot")return 0;if(e instanceof Function)return e(t);const{children:n,...r}=t??{};if(e==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[e,r,n]},pee=/^\s*>\s$/,mee=Wr.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:e}){return Dp("blockquote",{...wn(this.options.HTMLAttributes,e),children:Dp("slot",{})})},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[uc({find:pee,type:this.type})]}}),gee=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,yee=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,bee=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,vee=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,xee=Xa.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return Dp("strong",{...wn(this.options.HTMLAttributes,e),children:Dp("slot",{})})},addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[cc({find:gee,type:this.type}),cc({find:bee,type:this.type})]},addPasteRules(){return[za({find:yee,type:this.type}),za({find:vee,type:this.type})]}}),wee=/(^|[^`])`([^`]+)`(?!`)$/,See=/(^|[^`])`([^`]+)`(?!`)/g,Eee=Xa.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:e}){return["code",wn(this.options.HTMLAttributes,e),0]},addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[cc({find:wee,type:this.type})]},addPasteRules(){return[za({find:See,type:this.type})]}}),Cee=/^```([a-z]+)?[\s\n]$/,kee=/^~~~([a-z]+)?[\s\n]$/,Tee=Wr.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:4,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var t;const{languageClassPrefix:n}=this.options,s=[...((t=e.firstElementChild)==null?void 0:t.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:e,HTMLAttributes:t}){return["pre",wn(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,n=t.pos===1;return!e||t.parent.type.name!==this.name?!1:n||!t.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:e})=>{if(!this.options.enableTabIndentation)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:i}=n;if(r.parent.type!==this.type)return!1;const s=" ".repeat(this.options.tabSize);return i?e.commands.insertContent(s):e.commands.command(({tr:o})=>{const{from:l,to:u}=n,p=t.doc.textBetween(l,u,`
`,`
`).split(`
`).map(m=>s+m).join(`
`);return o.replaceWith(l,u,t.schema.text(p)),!0})},"Shift-Tab":({editor:e})=>{if(!this.options.enableTabIndentation)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:i}=n;return r.parent.type!==this.type?!1:i?e.commands.command(({tr:s})=>{var o;const{pos:l}=r,u=r.start(),d=r.end(),p=t.doc.textBetween(u,d,`
`,`
`).split(`
`);let m=0,b=0;const x=l-u;for(let T=0;T<p.length;T+=1){if(b+p[T].length>=x){m=T;break}b+=p[T].length+1}const w=((o=p[m].match(/^ */))==null?void 0:o[0])||"",C=Math.min(w.length,this.options.tabSize);if(C===0)return!0;let N=u;for(let T=0;T<m;T+=1)N+=p[T].length+1;return s.delete(N,N+C),l-N<=C&&s.setSelection(Ke.create(s.doc,N)),!0}):e.commands.command(({tr:s})=>{const{from:o,to:l}=n,h=t.doc.textBetween(o,l,`
`,`
`).split(`
`).map(p=>{var m;const b=((m=p.match(/^ */))==null?void 0:m[0])||"",x=Math.min(b.length,this.options.tabSize);return p.slice(x)}).join(`
`);return s.replaceWith(o,l,t.schema.text(h)),!0})},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:e.chain().command(({tr:l})=>(l.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:n,doc:r}=t,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const l=i.after();return l===void 0?!1:r.nodeAt(l)?e.commands.command(({tr:d})=>(d.setSelection(Ze.near(r.resolve(l))),!0)):e.commands.exitCode()}}},addInputRules(){return[eC({find:Cee,type:this.type,getAttributes:e=>({language:e[1]})}),eC({find:kee,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new nn({key:new qn("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;const n=t.clipboardData.getData("text/plain"),r=t.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i?.mode;if(!n||!s)return!1;const{tr:o,schema:l}=e.state,u=l.text(n.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},u)),o.selection.$from.parent.type!==this.type&&o.setSelection(Ke.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),e.dispatch(o),!0}}})]}}),Nee=Wr.create({name:"doc",topNode:!0,content:"block+"}),Aee=Wr.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",wn(this.options.HTMLAttributes,e)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:r})=>e.first([()=>e.exitCode(),()=>e.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:l}=r.extensionManager,u=s||i.$to.parentOffset&&i.$from.marks();return t().insertContent({type:this.name}).command(({tr:d,dispatch:h})=>{if(h&&u&&o){const p=u.filter(m=>l.includes(m.type.name));d.ensureMarks(p)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),hz=Wr.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,wn(this.options.HTMLAttributes,t),0]},addCommands(){return{setHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.setNode(this.name,e):!1,toggleHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.toggleNode(this.name,"paragraph",e):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>eC({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}}),Mee=hz,_ee=Wr.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:e}){return["hr",wn(this.options.HTMLAttributes,e)]},addCommands(){return{setHorizontalRule:()=>({chain:e,state:t})=>{if(!$Q(t,t.schema.nodes[this.name]))return!1;const{selection:n}=t,{$to:r}=n,i=e();return GB(n)?i.insertContentAt(r.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({tr:s,dispatch:o})=>{var l;if(o){const{$to:u}=s.selection,d=u.end();if(u.nodeAfter)u.nodeAfter.isTextblock?s.setSelection(Ke.create(s.doc,u.pos+1)):u.nodeAfter.isBlock?s.setSelection(ze.create(s.doc,u.pos)):s.setSelection(Ke.create(s.doc,u.pos));else{const h=(l=u.parent.type.contentMatch.defaultType)==null?void 0:l.create();h&&(s.insert(d,h),s.setSelection(Ke.create(s.doc,d+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[UQ({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),Dee=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,Ree=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,jee=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,Oee=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,Lee=Xa.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>e.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",wn(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[cc({find:Dee,type:this.type}),cc({find:jee,type:this.type})]},addPasteRules(){return[za({find:Ree,type:this.type}),za({find:Oee,type:this.type})]}});const Pee="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",Iee="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",nC="numeric",rC="ascii",iC="alpha",ed="asciinumeric",Bu="alphanumeric",sC="domain",pz="emoji",Bee="scheme",zee="slashscheme",bb="whitespace";function qee(e,t){return e in t||(t[e]=[]),t[e]}function Ea(e,t,n){t[nC]&&(t[ed]=!0,t[Bu]=!0),t[rC]&&(t[ed]=!0,t[iC]=!0),t[ed]&&(t[Bu]=!0),t[iC]&&(t[Bu]=!0),t[Bu]&&(t[sC]=!0),t[pz]&&(t[sC]=!0);for(const r in t){const i=qee(r,n);i.indexOf(e)<0&&i.push(e)}}function Vee(e,t){const n={};for(const r in t)t[r].indexOf(e)>=0&&(n[r]=!0);return n}function Er(e=null){this.j={},this.jr=[],this.jd=null,this.t=e}Er.groups={};Er.prototype={accepts(){return!!this.t},go(e){const t=this,n=t.j[e];if(n)return n;for(let r=0;r<t.jr.length;r++){const i=t.jr[r][0],s=t.jr[r][1];if(s&&i.test(e))return s}return t.jd},has(e,t=!1){return t?e in this.j:!!this.go(e)},ta(e,t,n,r){for(let i=0;i<e.length;i++)this.tt(e[i],t,n,r)},tr(e,t,n,r){r=r||Er.groups;let i;return t&&t.j?i=t:(i=new Er(t),n&&r&&Ea(t,n,r)),this.jr.push([e,i]),i},ts(e,t,n,r){let i=this;const s=e.length;if(!s)return i;for(let o=0;o<s-1;o++)i=i.tt(e[o]);return i.tt(e[s-1],t,n,r)},tt(e,t,n,r){r=r||Er.groups;const i=this;if(t&&t.j)return i.j[e]=t,t;const s=t;let o,l=i.go(e);if(l?(o=new Er,Object.assign(o.j,l.j),o.jr.push.apply(o.jr,l.jr),o.jd=l.jd,o.t=l.t):o=new Er,s){if(r)if(o.t&&typeof o.t=="string"){const u=Object.assign(Vee(o.t,r),n);Ea(s,u,r)}else n&&Ea(s,n,r);o.t=s}return i.j[e]=o,o}};const Qe=(e,t,n,r,i)=>e.ta(t,n,r,i),Qt=(e,t,n,r,i)=>e.tr(t,n,r,i),eR=(e,t,n,r,i)=>e.ts(t,n,r,i),xe=(e,t,n,r,i)=>e.tt(t,n,r,i),As="WORD",oC="UWORD",mz="ASCIINUMERICAL",gz="ALPHANUMERICAL",kd="LOCALHOST",aC="TLD",lC="UTLD",ep="SCHEME",Hl="SLASH_SCHEME",Vk="NUM",cC="WS",Hk="NL",td="OPENBRACE",nd="CLOSEBRACE",Rp="OPENBRACKET",jp="CLOSEBRACKET",Op="OPENPAREN",Lp="CLOSEPAREN",Pp="OPENANGLEBRACKET",Ip="CLOSEANGLEBRACKET",Bp="FULLWIDTHLEFTPAREN",zp="FULLWIDTHRIGHTPAREN",qp="LEFTCORNERBRACKET",Vp="RIGHTCORNERBRACKET",Hp="LEFTWHITECORNERBRACKET",Fp="RIGHTWHITECORNERBRACKET",Up="FULLWIDTHLESSTHAN",$p="FULLWIDTHGREATERTHAN",Gp="AMPERSAND",Wp="APOSTROPHE",Kp="ASTERISK",Co="AT",Yp="BACKSLASH",Xp="BACKTICK",Zp="CARET",No="COLON",Fk="COMMA",Jp="DOLLAR",$i="DOT",Qp="EQUALS",Uk="EXCLAMATION",ai="HYPHEN",rd="PERCENT",em="PIPE",tm="PLUS",nm="POUND",id="QUERY",$k="QUOTE",yz="FULLWIDTHMIDDLEDOT",Gk="SEMI",Gi="SLASH",sd="TILDE",rm="UNDERSCORE",bz="EMOJI",im="SYM";var vz=Object.freeze({__proto__:null,ALPHANUMERICAL:gz,AMPERSAND:Gp,APOSTROPHE:Wp,ASCIINUMERICAL:mz,ASTERISK:Kp,AT:Co,BACKSLASH:Yp,BACKTICK:Xp,CARET:Zp,CLOSEANGLEBRACKET:Ip,CLOSEBRACE:nd,CLOSEBRACKET:jp,CLOSEPAREN:Lp,COLON:No,COMMA:Fk,DOLLAR:Jp,DOT:$i,EMOJI:bz,EQUALS:Qp,EXCLAMATION:Uk,FULLWIDTHGREATERTHAN:$p,FULLWIDTHLEFTPAREN:Bp,FULLWIDTHLESSTHAN:Up,FULLWIDTHMIDDLEDOT:yz,FULLWIDTHRIGHTPAREN:zp,HYPHEN:ai,LEFTCORNERBRACKET:qp,LEFTWHITECORNERBRACKET:Hp,LOCALHOST:kd,NL:Hk,NUM:Vk,OPENANGLEBRACKET:Pp,OPENBRACE:td,OPENBRACKET:Rp,OPENPAREN:Op,PERCENT:rd,PIPE:em,PLUS:tm,POUND:nm,QUERY:id,QUOTE:$k,RIGHTCORNERBRACKET:Vp,RIGHTWHITECORNERBRACKET:Fp,SCHEME:ep,SEMI:Gk,SLASH:Gi,SLASH_SCHEME:Hl,SYM:im,TILDE:sd,TLD:aC,UNDERSCORE:rm,UTLD:lC,UWORD:oC,WORD:As,WS:cC});const ks=/[a-z]/,Cu=new RegExp("\\p{L}","u"),vb=new RegExp("\\p{Emoji}","u"),Ts=/\d/,xb=/\s/,tR="\r",wb=`
`,Hee="",Fee="",Sb="";let _h=null,Dh=null;function Uee(e=[]){const t={};Er.groups=t;const n=new Er;_h==null&&(_h=nR(Pee)),Dh==null&&(Dh=nR(Iee)),xe(n,"'",Wp),xe(n,"{",td),xe(n,"}",nd),xe(n,"[",Rp),xe(n,"]",jp),xe(n,"(",Op),xe(n,")",Lp),xe(n,"<",Pp),xe(n,">",Ip),xe(n,"",Bp),xe(n,"",zp),xe(n,"",qp),xe(n,"",Vp),xe(n,"",Hp),xe(n,"",Fp),xe(n,"",Up),xe(n,"",$p),xe(n,"&",Gp),xe(n,"*",Kp),xe(n,"@",Co),xe(n,"`",Xp),xe(n,"^",Zp),xe(n,":",No),xe(n,",",Fk),xe(n,"$",Jp),xe(n,".",$i),xe(n,"=",Qp),xe(n,"!",Uk),xe(n,"-",ai),xe(n,"%",rd),xe(n,"|",em),xe(n,"+",tm),xe(n,"#",nm),xe(n,"?",id),xe(n,'"',$k),xe(n,"/",Gi),xe(n,";",Gk),xe(n,"~",sd),xe(n,"_",rm),xe(n,"\\",Yp),xe(n,"",yz);const r=Qt(n,Ts,Vk,{[nC]:!0});Qt(r,Ts,r);const i=Qt(r,ks,mz,{[ed]:!0}),s=Qt(r,Cu,gz,{[Bu]:!0}),o=Qt(n,ks,As,{[rC]:!0});Qt(o,Ts,i),Qt(o,ks,o),Qt(i,Ts,i),Qt(i,ks,i);const l=Qt(n,Cu,oC,{[iC]:!0});Qt(l,ks),Qt(l,Ts,s),Qt(l,Cu,l),Qt(s,Ts,s),Qt(s,ks),Qt(s,Cu,s);const u=xe(n,wb,Hk,{[bb]:!0}),d=xe(n,tR,cC,{[bb]:!0}),h=Qt(n,xb,cC,{[bb]:!0});xe(n,Sb,h),xe(d,wb,u),xe(d,Sb,h),Qt(d,xb,h),xe(h,tR),xe(h,wb),Qt(h,xb,h),xe(h,Sb,h);const p=Qt(n,vb,bz,{[pz]:!0});xe(p,"#"),Qt(p,vb,p),xe(p,Hee,p);const m=xe(p,Fee);xe(m,"#"),Qt(m,vb,p);const b=[[ks,o],[Ts,i]],x=[[ks,null],[Cu,l],[Ts,s]];for(let S=0;S<_h.length;S++)bo(n,_h[S],aC,As,b);for(let S=0;S<Dh.length;S++)bo(n,Dh[S],lC,oC,x);Ea(aC,{tld:!0,ascii:!0},t),Ea(lC,{utld:!0,alpha:!0},t),bo(n,"file",ep,As,b),bo(n,"mailto",ep,As,b),bo(n,"http",Hl,As,b),bo(n,"https",Hl,As,b),bo(n,"ftp",Hl,As,b),bo(n,"ftps",Hl,As,b),Ea(ep,{scheme:!0,ascii:!0},t),Ea(Hl,{slashscheme:!0,ascii:!0},t),e=e.sort((S,w)=>S[0]>w[0]?1:-1);for(let S=0;S<e.length;S++){const w=e[S][0],N=e[S][1]?{[Bee]:!0}:{[zee]:!0};w.indexOf("-")>=0?N[sC]=!0:ks.test(w)?Ts.test(w)?N[ed]=!0:N[rC]=!0:N[nC]=!0,eR(n,w,w,N)}return eR(n,"localhost",kd,{ascii:!0}),n.jd=new Er(im),{start:n,tokens:Object.assign({groups:t},vz)}}function xz(e,t){const n=$ee(t.replace(/[A-Z]/g,l=>l.toLowerCase())),r=n.length,i=[];let s=0,o=0;for(;o<r;){let l=e,u=null,d=0,h=null,p=-1,m=-1;for(;o<r&&(u=l.go(n[o]));)l=u,l.accepts()?(p=0,m=0,h=l):p>=0&&(p+=n[o].length,m++),d+=n[o].length,s+=n[o].length,o++;s-=p,o-=m,d-=p,i.push({t:h.t,v:t.slice(s-d,s),s:s-d,e:s})}return i}function $ee(e){const t=[],n=e.length;let r=0;for(;r<n;){let i=e.charCodeAt(r),s,o=i<55296||i>56319||r+1===n||(s=e.charCodeAt(r+1))<56320||s>57343?e[r]:e.slice(r,r+2);t.push(o),r+=o.length}return t}function bo(e,t,n,r,i){let s;const o=t.length;for(let l=0;l<o-1;l++){const u=t[l];e.j[u]?s=e.j[u]:(s=new Er(r),s.jr=i.slice(),e.j[u]=s),e=s}return s=new Er(n),s.jr=i.slice(),e.j[t[o-1]]=s,s}function nR(e){const t=[],n=[];let r=0,i="0123456789";for(;r<e.length;){let s=0;for(;i.indexOf(e[r+s])>=0;)s++;if(s>0){t.push(n.join(""));for(let o=parseInt(e.substring(r,r+s),10);o>0;o--)n.pop();r+=s}else n.push(e[r]),r++}return t}const Td={defaultProtocol:"http",events:null,format:rR,formatHref:rR,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function Wk(e,t=null){let n=Object.assign({},Td);e&&(n=Object.assign(n,e instanceof Wk?e.o:e));const r=n.ignoreTags,i=[];for(let s=0;s<r.length;s++)i.push(r[s].toUpperCase());this.o=n,t&&(this.defaultRender=t),this.ignoreTags=i}Wk.prototype={o:Td,ignoreTags:[],defaultRender(e){return e},check(e){return this.get("validate",e.toString(),e)},get(e,t,n){const r=t!=null;let i=this.o[e];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:Td[e],typeof i=="function"&&r&&(i=i(t,n))):typeof i=="function"&&r&&(i=i(t,n.t,n)),i)},getObj(e,t,n){let r=this.o[e];return typeof r=="function"&&t!=null&&(r=r(t,n.t,n)),r},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}};function rR(e){return e}function wz(e,t){this.t="token",this.v=e,this.tk=t}wz.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),n=e.get("truncate",t,this),r=e.get("format",t,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e=Td.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,n=this.toHref(e.get("defaultProtocol")),r=e.get("formatHref",n,this),i=e.get("tagName",n,t),s=this.toFormattedString(e),o={},l=e.get("className",n,t),u=e.get("target",n,t),d=e.get("rel",n,t),h=e.getObj("attributes",n,t),p=e.getObj("events",n,t);return o.href=r,l&&(o.class=l),u&&(o.target=u),d&&(o.rel=d),h&&Object.assign(o,h),{tagName:i,attributes:o,content:s,eventListeners:p}}};function Gm(e,t){class n extends wz{constructor(i,s){super(i,s),this.t=e}}for(const r in t)n.prototype[r]=t[r];return n.t=e,n}const iR=Gm("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),sR=Gm("text"),Gee=Gm("nl"),Rh=Gm("url",{isLink:!0,toHref(e=Td.defaultProtocol){return this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==kd&&e[1].t===No}}),si=e=>new Er(e);function Wee({groups:e}){const t=e.domain.concat([Gp,Kp,Co,Yp,Xp,Zp,Jp,Qp,ai,Vk,rd,em,tm,nm,Gi,im,sd,rm]),n=[Wp,No,Fk,$i,Uk,rd,id,$k,Gk,Pp,Ip,td,nd,jp,Rp,Op,Lp,Bp,zp,qp,Vp,Hp,Fp,Up,$p],r=[Gp,Wp,Kp,Yp,Xp,Zp,Jp,Qp,ai,td,nd,rd,em,tm,nm,id,Gi,im,sd,rm],i=si(),s=xe(i,sd);Qe(s,r,s),Qe(s,e.domain,s);const o=si(),l=si(),u=si();Qe(i,e.domain,o),Qe(i,e.scheme,l),Qe(i,e.slashscheme,u),Qe(o,r,s),Qe(o,e.domain,o);const d=xe(o,Co);xe(s,Co,d),xe(l,Co,d),xe(u,Co,d);const h=xe(s,$i);Qe(h,r,s),Qe(h,e.domain,s);const p=si();Qe(d,e.domain,p),Qe(p,e.domain,p);const m=xe(p,$i);Qe(m,e.domain,p);const b=si(iR);Qe(m,e.tld,b),Qe(m,e.utld,b),xe(d,kd,b);const x=xe(p,ai);xe(x,ai,x),Qe(x,e.domain,p),Qe(b,e.domain,p),xe(b,$i,m),xe(b,ai,x);const S=xe(b,No);Qe(S,e.numeric,iR);const w=xe(o,ai),C=xe(o,$i);xe(w,ai,w),Qe(w,e.domain,o),Qe(C,r,s),Qe(C,e.domain,o);const N=si(Rh);Qe(C,e.tld,N),Qe(C,e.utld,N),Qe(N,e.domain,o),Qe(N,r,s),xe(N,$i,C),xe(N,ai,w),xe(N,Co,d);const k=xe(N,No),T=si(Rh);Qe(k,e.numeric,T);const A=si(Rh),M=si();Qe(A,t,A),Qe(A,n,M),Qe(M,t,A),Qe(M,n,M),xe(N,Gi,A),xe(T,Gi,A);const j=xe(l,No),R=xe(u,No),L=xe(R,Gi),I=xe(L,Gi);Qe(l,e.domain,o),xe(l,$i,C),xe(l,ai,w),Qe(u,e.domain,o),xe(u,$i,C),xe(u,ai,w),Qe(j,e.domain,A),xe(j,Gi,A),xe(j,id,A),Qe(I,e.domain,A),Qe(I,t,A),xe(I,Gi,A);const H=[[td,nd],[Rp,jp],[Op,Lp],[Pp,Ip],[Bp,zp],[qp,Vp],[Hp,Fp],[Up,$p]];for(let q=0;q<H.length;q++){const[W,z]=H[q],F=xe(A,W);xe(M,W,F),xe(F,z,A);const O=si(Rh);Qe(F,t,O);const V=si();Qe(F,n),Qe(O,t,O),Qe(O,n,V),Qe(V,t,O),Qe(V,n,V),xe(O,z,A),xe(V,z,A)}return xe(i,kd,N),xe(i,Hk,Gee),{start:i,tokens:vz}}function Kee(e,t,n){let r=n.length,i=0,s=[],o=[];for(;i<r;){let l=e,u=null,d=null,h=0,p=null,m=-1;for(;i<r&&!(u=l.go(n[i].t));)o.push(n[i++]);for(;i<r&&(d=u||l.go(n[i].t));)u=null,l=d,l.accepts()?(m=0,p=l):m>=0&&m++,i++,h++;if(m<0)i-=h,i<r&&(o.push(n[i]),i++);else{o.length>0&&(s.push(Eb(sR,t,o)),o=[]),i-=m,h-=m;const b=p.t,x=n.slice(i-h,i);s.push(Eb(b,t,x))}}return o.length>0&&s.push(Eb(sR,t,o)),s}function Eb(e,t,n){const r=n[0].s,i=n[n.length-1].e,s=t.slice(r,i);return new e(s,n)}const Yee=typeof console<"u"&&console&&console.warn||(()=>{}),Xee="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Dt={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function Zee(){return Er.groups={},Dt.scanner=null,Dt.parser=null,Dt.tokenQueue=[],Dt.pluginQueue=[],Dt.customSchemes=[],Dt.initialized=!1,Dt}function oR(e,t=!1){if(Dt.initialized&&Yee(`linkifyjs: already initialized - will not register custom scheme "${e}" ${Xee}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Dt.customSchemes.push([e,t])}function Jee(){Dt.scanner=Uee(Dt.customSchemes);for(let e=0;e<Dt.tokenQueue.length;e++)Dt.tokenQueue[e][1]({scanner:Dt.scanner});Dt.parser=Wee(Dt.scanner.tokens);for(let e=0;e<Dt.pluginQueue.length;e++)Dt.pluginQueue[e][1]({scanner:Dt.scanner,parser:Dt.parser});return Dt.initialized=!0,Dt}function Kk(e){return Dt.initialized||Jee(),Kee(Dt.parser.start,e,xz(Dt.scanner.start,e))}Kk.scan=xz;function Sz(e,t=null,n=null){if(t&&typeof t=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);n=t,t=null}const r=new Wk(n),i=Kk(e),s=[];for(let o=0;o<i.length;o++){const l=i[o];l.isLink&&(!t||l.t===t)&&r.check(l)&&s.push(l.toFormattedObject(r))}return s}var Yk="[\0- -\u2029]",Qee=new RegExp(Yk),ete=new RegExp(`${Yk}$`),tte=new RegExp(Yk,"g");function nte(e){return e.length===1?e[0].isLink:e.length===3&&e[1].isLink?["()","[]"].includes(e[0].value+e[2].value):!1}function rte(e){return new nn({key:new qn("autolink"),appendTransaction:(t,n,r)=>{const i=t.some(d=>d.docChanged)&&!n.doc.eq(r.doc),s=t.some(d=>d.getMeta("preventAutolink"));if(!i||s)return;const{tr:o}=r,l=LB(n.doc,[...t]);if(UB(l).forEach(({newRange:d})=>{const h=oJ(r.doc,d,b=>b.isTextblock);let p,m;if(h.length>1)p=h[0],m=r.doc.textBetween(p.pos,p.pos+p.node.nodeSize,void 0," ");else if(h.length){const b=r.doc.textBetween(d.from,d.to," "," ");if(!ete.test(b))return;p=h[0],m=r.doc.textBetween(p.pos,d.to,void 0," ")}if(p&&m){const b=m.split(Qee).filter(Boolean);if(b.length<=0)return!1;const x=b[b.length-1],S=p.pos+m.lastIndexOf(x);if(!x)return!1;const w=Kk(x).map(C=>C.toObject(e.defaultProtocol));if(!nte(w))return!1;w.filter(C=>C.isLink).map(C=>({...C,from:S+C.start+1,to:S+C.end+1})).filter(C=>r.schema.marks.code?!r.doc.rangeHasMark(C.from,C.to,r.schema.marks.code):!0).filter(C=>e.validate(C.value)).filter(C=>e.shouldAutoLink(C.value)).forEach(C=>{Bk(C.from,C.to,r.doc).some(N=>N.mark.type===e.type)||o.addMark(C.from,C.to,e.type.create({href:C.href}))})}}),!!o.steps.length)return o}})}function ite(e){return new nn({key:new qn("handleClickLink"),props:{handleClick:(t,n,r)=>{var i,s;if(r.button!==0||!t.editable)return!1;let o=null;if(r.target instanceof HTMLAnchorElement)o=r.target;else{let h=r.target;const p=[];for(;h.nodeName!=="DIV";)p.push(h),h=h.parentNode;o=p.find(m=>m.nodeName==="A")}if(!o)return!1;const l=FB(t.state,e.type.name),u=(i=o?.href)!=null?i:l.href,d=(s=o?.target)!=null?s:l.target;return e.enableClickSelection&&e.editor.commands.extendMarkRange(e.type.name),o&&u?(window.open(u,d),!0):!1}}})}function ste(e){return new nn({key:new qn("handlePasteLink"),props:{handlePaste:(t,n,r)=>{const{state:i}=t,{selection:s}=i,{empty:o}=s;if(o)return!1;let l="";r.content.forEach(d=>{l+=d.textContent});const u=Sz(l,{defaultProtocol:e.defaultProtocol}).find(d=>d.isLink&&d.value===l);return!l||!u?!1:e.editor.commands.setMark(e.type,{href:u.href})}}})}function fa(e,t){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return t&&t.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&n.push(i)}),!e||e.replace(tte,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var Ez=Xa.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(e=>{if(typeof e=="string"){oR(e);return}oR(e.scheme,e.optionalSlashes)})},onDestroy(){Zee()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(e,t)=>!!fa(e,t.protocols),validate:e=>!!e,shouldAutoLink:e=>!!e}},addAttributes(){return{href:{default:null,parseHTML(e){return e.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:e=>{const t=e.getAttribute("href");return!t||!this.options.isAllowedUri(t,{defaultValidate:n=>!!fa(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:e}){return this.options.isAllowedUri(e.href,{defaultValidate:t=>!!fa(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",wn(this.options.HTMLAttributes,e),0]:["a",wn(this.options.HTMLAttributes,{...e,href:""}),0]},addCommands(){return{setLink:e=>({chain:t})=>{const{href:n}=e;return this.options.isAllowedUri(n,{defaultValidate:r=>!!fa(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?t().setMark(this.name,e).setMeta("preventAutolink",!0).run():!1},toggleLink:e=>({chain:t})=>{const{href:n}=e||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!fa(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:t().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[za({find:e=>{const t=[];if(e){const{protocols:n,defaultProtocol:r}=this.options,i=Sz(e).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:o=>!!fa(o,n),protocols:n,defaultProtocol:r}));i.length&&i.forEach(s=>t.push({text:s.value,data:{href:s.href},index:s.start}))}return t},type:this.type,getAttributes:e=>{var t;return{href:(t=e.data)==null?void 0:t.href}}})]},addProseMirrorPlugins(){const e=[],{protocols:t,defaultProtocol:n}=this.options;return this.options.autolink&&e.push(rte({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!fa(i,t),protocols:t,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&e.push(ite({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&e.push(ste({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),e}}),ote=Ez,ate=Object.defineProperty,lte=(e,t)=>{for(var n in t)ate(e,n,{get:t[n],enumerable:!0})},cte="listItem",aR="textStyle",lR=/^\s*([-+*])\s$/,Xk=Wr.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:e}){return["ul",wn(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(cte,this.editor.getAttributes(aR)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=uc({find:lR,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=uc({find:lR,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(aR),editor:this.editor})),[e]}}),Zk=Wr.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",wn(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),ute={};lte(ute,{findListItemPos:()=>Zd,getNextListDepth:()=>Jk,handleBackspace:()=>uC,handleDelete:()=>dC,hasListBefore:()=>Cz,hasListItemAfter:()=>dte,hasListItemBefore:()=>kz,listItemHasSubList:()=>Tz,nextListIsDeeper:()=>Nz,nextListIsHigher:()=>Az});var Zd=(e,t)=>{const{$from:n}=t.selection,r=Sn(e,t.schema);let i=null,s=n.depth,o=n.pos,l=null;for(;s>0&&l===null;)i=n.node(s),i.type===r?l=s:(s-=1,o-=1);return l===null?null:{$pos:t.doc.resolve(o),depth:l}},Jk=(e,t)=>{const n=Zd(e,t);if(!n)return!1;const[,r]=gJ(t,e,n.$pos.pos+4);return r},Cz=(e,t,n)=>{const{$anchor:r}=e.selection,i=Math.max(0,r.pos-2),s=e.doc.resolve(i).node();return!(!s||!n.includes(s.type.name))},kz=(e,t)=>{var n;const{$anchor:r}=t.selection,i=t.doc.resolve(r.pos-2);return!(i.index()===0||((n=i.nodeBefore)==null?void 0:n.type.name)!==e)},Tz=(e,t,n)=>{if(!n)return!1;const r=Sn(e,t.schema);let i=!1;return n.descendants(s=>{s.type===r&&(i=!0)}),i},uC=(e,t,n)=>{if(e.commands.undoInputRule())return!0;if(e.state.selection.from!==e.state.selection.to)return!1;if(!Ho(e.state,t)&&Cz(e.state,t,n)){const{$anchor:l}=e.state.selection,u=e.state.doc.resolve(l.before()-1),d=[];u.node().descendants((m,b)=>{m.type.name===t&&d.push({node:m,pos:b})});const h=d.at(-1);if(!h)return!1;const p=e.state.doc.resolve(u.start()+h.pos+1);return e.chain().cut({from:l.start()-1,to:l.end()+1},p.end()).joinForward().run()}if(!Ho(e.state,t)||!xJ(e.state))return!1;const r=Zd(t,e.state);if(!r)return!1;const s=e.state.doc.resolve(r.$pos.pos-2).node(r.depth),o=Tz(t,e.state,s);return kz(t,e.state)&&!o?e.commands.joinItemBackward():e.chain().liftListItem(t).run()},Nz=(e,t)=>{const n=Jk(e,t),r=Zd(e,t);return!r||!n?!1:n>r.depth},Az=(e,t)=>{const n=Jk(e,t),r=Zd(e,t);return!r||!n?!1:n<r.depth},dC=(e,t)=>{if(!Ho(e.state,t)||!vJ(e.state,t))return!1;const{selection:n}=e.state,{$from:r,$to:i}=n;return!n.empty&&r.sameParent(i)?!1:Nz(t,e.state)?e.chain().focus(e.state.selection.from+4).lift(t).joinBackward().run():Az(t,e.state)?e.chain().joinForward().joinBackward().run():e.commands.joinItemForward()},dte=(e,t)=>{var n;const{$anchor:r}=t.selection,i=t.doc.resolve(r.pos-r.parentOffset-2);return!(i.index()===i.parent.childCount-1||((n=i.nodeAfter)==null?void 0:n.type.name)!==e)},Mz=dn.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&dC(e,n)&&(t=!0)}),t},"Mod-Delete":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&dC(e,n)&&(t=!0)}),t},Backspace:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{e.state.schema.nodes[n]!==void 0&&uC(e,n,r)&&(t=!0)}),t},"Mod-Backspace":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{e.state.schema.nodes[n]!==void 0&&uC(e,n,r)&&(t=!0)}),t}}}}),fte="listItem",cR="textStyle",uR=/^(\d+)\.\s$/,Qk=Wr.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1},type:{default:null,parseHTML:e=>e.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:e}){const{start:t,...n}=e;return t===1?["ol",wn(this.options.HTMLAttributes,n),0]:["ol",wn(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(fte,this.editor.getAttributes(cR)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=uc({find:uR,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=uc({find:uR,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:t=>({start:+t[1],...this.editor.getAttributes(cR)}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1],editor:this.editor})),[e]}}),hte=/^\s*(\[([( |x])?\])\s$/,pte=Wr.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:e=>{const t=e.getAttribute("data-checked");return t===""||t==="true"},renderHTML:e=>({"data-checked":e.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:e,HTMLAttributes:t}){return["li",wn(this.options.HTMLAttributes,t,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:e.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const e={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...e,Tab:()=>this.editor.commands.sinkListItem(this.name)}:e},addNodeView(){return({node:e,HTMLAttributes:t,getPos:n,editor:r})=>{const i=document.createElement("li"),s=document.createElement("label"),o=document.createElement("span"),l=document.createElement("input"),u=document.createElement("div"),d=h=>{var p,m;l.ariaLabel=((m=(p=this.options.a11y)==null?void 0:p.checkboxLabel)==null?void 0:m.call(p,h,l.checked))||`Task item checkbox for ${h.textContent||"empty task item"}`};return d(e),s.contentEditable="false",l.type="checkbox",l.addEventListener("mousedown",h=>h.preventDefault()),l.addEventListener("change",h=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){l.checked=!l.checked;return}const{checked:p}=h.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:m})=>{const b=n();if(typeof b!="number")return!1;const x=m.doc.nodeAt(b);return m.setNodeMarkup(b,void 0,{...x?.attrs,checked:p}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(e,p)||(l.checked=!l.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([h,p])=>{i.setAttribute(h,p)}),i.dataset.checked=e.attrs.checked,l.checked=e.attrs.checked,s.append(l,o),i.append(s,u),Object.entries(t).forEach(([h,p])=>{i.setAttribute(h,p)}),{dom:i,contentDOM:u,update:h=>h.type!==this.type?!1:(i.dataset.checked=h.attrs.checked,l.checked=h.attrs.checked,d(h),!0)}}},addInputRules(){return[uc({find:hte,type:this.type,getAttributes:e=>({checked:e[e.length-1]==="x"})})]}}),mte=Wr.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:e}){return["ul",wn(this.options.HTMLAttributes,e,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});dn.create({name:"listKit",addExtensions(){const e=[];return this.options.bulletList!==!1&&e.push(Xk.configure(this.options.bulletList)),this.options.listItem!==!1&&e.push(Zk.configure(this.options.listItem)),this.options.listKeymap!==!1&&e.push(Mz.configure(this.options.listKeymap)),this.options.orderedList!==!1&&e.push(Qk.configure(this.options.orderedList)),this.options.taskItem!==!1&&e.push(pte.configure(this.options.taskItem)),this.options.taskList!==!1&&e.push(mte.configure(this.options.taskList)),e}});var gte=Wr.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:e}){return["p",wn(this.options.HTMLAttributes,e),0]},addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),yte=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,bte=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,vte=Xa.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["s",wn(this.options.HTMLAttributes,e),0]},addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[cc({find:yte,type:this.type})]},addPasteRules(){return[za({find:bte,type:this.type})]}}),xte=Wr.create({name:"text",group:"inline"}),_z=Xa.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["u",wn(this.options.HTMLAttributes,e),0]},addCommands(){return{setUnderline:()=>({commands:e})=>e.setMark(this.name),toggleUnderline:()=>({commands:e})=>e.toggleMark(this.name),unsetUnderline:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),wte=_z;function Ste(e={}){return new nn({view(t){return new Ete(t,e)}})}class Ete{constructor(t,n){var r;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return t.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:t,handler:n})=>this.editorView.dom.removeEventListener(t,n))}update(t,n){this.cursorPos!=null&&n.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent,r,i=this.editorView.dom,s=i.getBoundingClientRect(),o=s.width/i.offsetWidth,l=s.height/i.offsetHeight;if(n){let p=t.nodeBefore,m=t.nodeAfter;if(p||m){let b=this.editorView.nodeDOM(this.cursorPos-(p?p.nodeSize:0));if(b){let x=b.getBoundingClientRect(),S=p?x.bottom:x.top;p&&m&&(S=(S+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let w=this.width/2*l;r={left:x.left,right:x.right,top:S-w,bottom:S+w}}}}if(!r){let p=this.editorView.coordsAtPos(this.cursorPos),m=this.width/2*o;r={left:p.left-m,right:p.left+m,top:p.top,bottom:p.bottom}}let u=this.editorView.dom.offsetParent;this.element||(this.element=u.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let d,h;if(!u||u==document.body&&getComputedStyle(u).position=="static")d=-pageXOffset,h=-pageYOffset;else{let p=u.getBoundingClientRect(),m=p.width/u.offsetWidth,b=p.height/u.offsetHeight;d=p.left-u.scrollLeft*m,h=p.top-u.scrollTop*b}this.element.style.left=(r.left-d)/o+"px",this.element.style.top=(r.top-h)/l+"px",this.element.style.width=(r.right-r.left)/o+"px",this.element.style.height=(r.bottom-r.top)/l+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,t):i;if(n&&!s){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=j6(this.editorView.state.doc,o,this.editorView.dragging.slice);l!=null&&(o=l)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}}class tn extends Ze{constructor(t){super(t,t)}map(t,n){let r=t.resolve(n.map(this.head));return tn.valid(r)?new tn(r):Ze.near(r)}content(){return Ne.empty}eq(t){return t instanceof tn&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new tn(t.resolve(n.pos))}getBookmark(){return new e2(this.anchor)}static valid(t){let n=t.parent;if(n.isTextblock||!Cte(t)||!kte(t))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(t.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(t,n,r=!1){e:for(;;){if(!r&&tn.valid(t))return t;let i=t.pos,s=null;for(let o=t.depth;;o--){let l=t.node(o);if(n>0?t.indexAfter(o)<l.childCount:t.index(o)>0){s=l.child(n>0?t.indexAfter(o):t.index(o)-1);break}else if(o==0)return null;i+=n;let u=t.doc.resolve(i);if(tn.valid(u))return u}for(;;){let o=n>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!ze.isSelectable(s)){t=t.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=o,i+=n;let l=t.doc.resolve(i);if(tn.valid(l))return l}return null}}}tn.prototype.visible=!1;tn.findFrom=tn.findGapCursorFrom;Ze.jsonID("gapcursor",tn);class e2{constructor(t){this.pos=t}map(t){return new e2(t.map(this.pos))}resolve(t){let n=t.resolve(this.pos);return tn.valid(n)?new tn(n):Ze.near(n)}}function Cte(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function kte(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function Tte(){return new nn({props:{decorations:_te,createSelectionBetween(e,t,n){return t.pos==n.pos&&tn.valid(n)?new tn(n):null},handleClick:Ate,handleKeyDown:Nte,handleDOMEvents:{beforeinput:Mte}}})}const Nte=wB({ArrowLeft:jh("horiz",-1),ArrowRight:jh("horiz",1),ArrowUp:jh("vert",-1),ArrowDown:jh("vert",1)});function jh(e,t){const n=e=="vert"?t>0?"down":"up":t>0?"right":"left";return function(r,i,s){let o=r.selection,l=t>0?o.$to:o.$from,u=o.empty;if(o instanceof Ke){if(!s.endOfTextblock(n)||l.depth==0)return!1;u=!1,l=r.doc.resolve(t>0?l.after():l.before())}let d=tn.findGapCursorFrom(l,t,u);return d?(i&&i(r.tr.setSelection(new tn(d))),!0):!1}}function Ate(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!tn.valid(r))return!1;let i=e.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&ze.isSelectable(e.state.doc.nodeAt(i.inside))?!1:(e.dispatch(e.state.tr.setSelection(new tn(r))),!0)}function Mte(e,t){if(t.inputType!="insertCompositionText"||!(e.state.selection instanceof tn))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let i=ye.empty;for(let o=r.length-1;o>=0;o--)i=ye.from(r[o].createAndFill(null,i));let s=e.state.tr.replace(n.pos,n.pos,new Ne(i,0,0));return s.setSelection(Ke.near(s.doc.resolve(n.pos+1))),e.dispatch(s),!1}function _te(e){if(!(e.selection instanceof tn))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",Ut.create(e.doc,[ur.widget(e.selection.head,t,{key:"gapcursor"})])}var sm=200,zn=function(){};zn.prototype.append=function(t){return t.length?(t=zn.from(t),!this.length&&t||t.length<sm&&this.leafAppend(t)||this.length<sm&&t.leafPrepend(this)||this.appendInner(t)):this};zn.prototype.prepend=function(t){return t.length?zn.from(t).append(this):this};zn.prototype.appendInner=function(t){return new Dte(this,t)};zn.prototype.slice=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=this.length),t>=n?zn.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,n))};zn.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};zn.prototype.forEach=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(t,n,r,0):this.forEachInvertedInner(t,n,r,0)};zn.prototype.map=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(t(s,o))},n,r),i};zn.from=function(t){return t instanceof zn?t:t&&t.length?new Dz(t):zn.empty};var Dz=(function(e){function t(r){e.call(this),this.values=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new t(this.values.slice(i,s))},t.prototype.getInner=function(i){return this.values[i]},t.prototype.forEachInner=function(i,s,o,l){for(var u=s;u<o;u++)if(i(this.values[u],l+u)===!1)return!1},t.prototype.forEachInvertedInner=function(i,s,o,l){for(var u=s-1;u>=o;u--)if(i(this.values[u],l+u)===!1)return!1},t.prototype.leafAppend=function(i){if(this.length+i.length<=sm)return new t(this.values.concat(i.flatten()))},t.prototype.leafPrepend=function(i){if(this.length+i.length<=sm)return new t(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t})(zn);zn.empty=new Dz([]);var Dte=(function(e){function t(n,r){e.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},t.prototype.forEachInner=function(r,i,s,o){var l=this.left.length;if(i<l&&this.left.forEachInner(r,i,Math.min(s,l),o)===!1||s>l&&this.right.forEachInner(r,Math.max(i-l,0),Math.min(this.length,s)-l,o+l)===!1)return!1},t.prototype.forEachInvertedInner=function(r,i,s,o){var l=this.left.length;if(i>l&&this.right.forEachInvertedInner(r,i-l,Math.max(s,l)-l,o+l)===!1||s<l&&this.left.forEachInvertedInner(r,Math.min(i,l),s,o)===!1)return!1},t.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},t.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new t(this.left,i)},t.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new t(i,this.right)},t.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new t(this.left,new t(this.right,r)):new t(this,r)},t})(zn);const Rte=500;class Ni{constructor(t,n){this.items=t,this.eventCount=n}popEvent(t,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=t.tr,l,u,d=[],h=[];return this.items.forEach((p,m)=>{if(!p.step){i||(i=this.remapping(r,m+1),s=i.maps.length),s--,h.push(p);return}if(i){h.push(new Wi(p.map));let b=p.step.map(i.slice(s)),x;b&&o.maybeStep(b).doc&&(x=o.mapping.maps[o.mapping.maps.length-1],d.push(new Wi(x,void 0,void 0,d.length+h.length))),s--,x&&i.appendMap(x,s)}else o.maybeStep(p.step);if(p.selection)return l=i?p.selection.map(i.slice(s)):p.selection,u=new Ni(this.items.slice(0,r).append(h.reverse().concat(d)),this.eventCount-1),!1},this.items.length,0),{remaining:u,transform:o,selection:l}}addTransform(t,n,r,i){let s=[],o=this.eventCount,l=this.items,u=!i&&l.length?l.get(l.length-1):null;for(let h=0;h<t.steps.length;h++){let p=t.steps[h].invert(t.docs[h]),m=new Wi(t.mapping.maps[h],p,n),b;(b=u&&u.merge(m))&&(m=b,h?s.pop():l=l.slice(0,l.length-1)),s.push(m),n&&(o++,n=void 0),i||(u=m)}let d=o-r.depth;return d>Ote&&(l=jte(l,d),o-=d),new Ni(l.append(s),o)}remapping(t,n){let r=new bd;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=t?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},t,n),r}addMaps(t){return this.eventCount==0?this:new Ni(this.items.append(t.map(n=>new Wi(n))),this.eventCount)}rebased(t,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=t.mapping,o=t.steps.length,l=this.eventCount;this.items.forEach(m=>{m.selection&&l--},i);let u=n;this.items.forEach(m=>{let b=s.getMirror(--u);if(b==null)return;o=Math.min(o,b);let x=s.maps[b];if(m.step){let S=t.steps[b].invert(t.docs[b]),w=m.selection&&m.selection.map(s.slice(u+1,b));w&&l++,r.push(new Wi(x,S,w))}else r.push(new Wi(x))},i);let d=[];for(let m=n;m<o;m++)d.push(new Wi(s.maps[m]));let h=this.items.slice(0,i).append(d).append(r),p=new Ni(h,l);return p.emptyItemCount()>Rte&&(p=p.compress(this.items.length-r.length)),p}emptyItemCount(){let t=0;return this.items.forEach(n=>{n.step||t++}),t}compress(t=this.items.length){let n=this.remapping(0,t),r=n.maps.length,i=[],s=0;return this.items.forEach((o,l)=>{if(l>=t)i.push(o),o.selection&&s++;else if(o.step){let u=o.step.map(n.slice(r)),d=u&&u.getMap();if(r--,d&&n.appendMap(d,r),u){let h=o.selection&&o.selection.map(n.slice(r));h&&s++;let p=new Wi(d.invert(),u,h),m,b=i.length-1;(m=i.length&&i[b].merge(p))?i[b]=m:i.push(p)}}else o.map&&r--},this.items.length,0),new Ni(zn.from(i.reverse()),s)}}Ni.empty=new Ni(zn.empty,0);function jte(e,t){let n;return e.forEach((r,i)=>{if(r.selection&&t--==0)return n=i,!1}),e.slice(n)}class Wi{constructor(t,n,r,i){this.map=t,this.step=n,this.selection=r,this.mirrorOffset=i}merge(t){if(this.step&&t.step&&!t.selection){let n=t.step.merge(this.step);if(n)return new Wi(n.getMap().invert(),n,this.selection)}}}class ko{constructor(t,n,r,i,s){this.done=t,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const Ote=20;function Lte(e,t,n,r){let i=n.getMeta(Ra),s;if(i)return i.historyState;n.getMeta(Bte)&&(e=new ko(e.done,e.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return e;if(o&&o.getMeta(Ra))return o.getMeta(Ra).redo?new ko(e.done.addTransform(n,void 0,r,tp(t)),e.undone,dR(n.mapping.maps),e.prevTime,e.prevComposition):new ko(e.done,e.undone.addTransform(n,void 0,r,tp(t)),null,e.prevTime,e.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let l=n.getMeta("composition"),u=e.prevTime==0||!o&&e.prevComposition!=l&&(e.prevTime<(n.time||0)-r.newGroupDelay||!Pte(n,e.prevRanges)),d=o?Cb(e.prevRanges,n.mapping):dR(n.mapping.maps);return new ko(e.done.addTransform(n,u?t.selection.getBookmark():void 0,r,tp(t)),Ni.empty,d,n.time,l??e.prevComposition)}else return(s=n.getMeta("rebased"))?new ko(e.done.rebased(n,s),e.undone.rebased(n,s),Cb(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new ko(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),Cb(e.prevRanges,n.mapping),e.prevTime,e.prevComposition)}function Pte(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<t.length;s+=2)r<=t[s+1]&&i>=t[s]&&(n=!0)}),n}function dR(e){let t=[];for(let n=e.length-1;n>=0&&t.length==0;n--)e[n].forEach((r,i,s,o)=>t.push(s,o));return t}function Cb(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let i=t.map(e[r],1),s=t.map(e[r+1],-1);i<=s&&n.push(i,s)}return n}function Ite(e,t,n){let r=tp(t),i=Ra.get(t).spec.config,s=(n?e.undone:e.done).popEvent(t,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),l=(n?e.done:e.undone).addTransform(s.transform,t.selection.getBookmark(),i,r),u=new ko(n?l:s.remaining,n?s.remaining:l,null,0,-1);return s.transform.setSelection(o).setMeta(Ra,{redo:n,historyState:u})}let kb=!1,fR=null;function tp(e){let t=e.plugins;if(fR!=t){kb=!1,fR=t;for(let n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){kb=!0;break}}return kb}const Ra=new qn("history"),Bte=new qn("closeHistory");function zte(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new nn({key:Ra,state:{init(){return new ko(Ni.empty,Ni.empty,null,0,-1)},apply(t,n,r){return Lte(n,r,t,e)}},config:e,props:{handleDOMEvents:{beforeinput(t,n){let r=n.inputType,i=r=="historyUndo"?jz:r=="historyRedo"?Oz:null;return i?(n.preventDefault(),i(t.state,t.dispatch)):!1}}}})}function Rz(e,t){return(n,r)=>{let i=Ra.getState(n);if(!i||(e?i.undone:i.done).eventCount==0)return!1;if(r){let s=Ite(i,n,e);s&&r(t?s.scrollIntoView():s)}return!0}}const jz=Rz(!1,!0),Oz=Rz(!0,!0);dn.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:e=>e.length,wordCounter:e=>e.split(" ").filter(t=>t!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=e=>{const t=e?.node||this.editor.state.doc;if((e?.mode||this.options.mode)==="textSize"){const r=t.textBetween(0,t.content.size,void 0," ");return this.options.textCounter(r)}return t.nodeSize},this.storage.words=e=>{const t=e?.node||this.editor.state.doc,n=t.textBetween(0,t.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let e=!1;return[new nn({key:new qn("characterCount"),appendTransaction:(t,n,r)=>{if(e)return;const i=this.options.limit;if(i==null||i===0){e=!0;return}const s=this.storage.characters({node:r.doc});if(s>i){const o=s-i,l=0,u=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const d=r.tr.deleteRange(l,u);return e=!0,d}e=!0},filterTransaction:(t,n)=>{const r=this.options.limit;if(!t.docChanged||r===0||r===null||r===void 0)return!0;const i=this.storage.characters({node:n.doc}),s=this.storage.characters({node:t.doc});if(s<=r||i>r&&s>r&&s<=i)return!0;if(i>r&&s>r&&s>i||!t.getMeta("paste"))return!1;const l=t.selection.$head.pos,u=s-r,d=l-u,h=l;return t.deleteRange(d,h),!(this.storage.characters({node:t.doc})>r)}})]}});var qte=dn.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[Ste(this.options)]}});dn.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new nn({key:new qn("focus"),props:{decorations:({doc:e,selection:t})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:i}=t,s=[];if(!n||!r)return Ut.create(e,[]);let o=0;this.options.mode==="deepest"&&e.descendants((u,d)=>{if(u.isText)return;if(!(i>=d&&i<=d+u.nodeSize-1))return!1;o+=1});let l=0;return e.descendants((u,d)=>{if(u.isText||!(i>=d&&i<=d+u.nodeSize-1))return!1;if(l+=1,this.options.mode==="deepest"&&o-l>0||this.options.mode==="shallowest"&&l>1)return this.options.mode==="deepest";s.push(ur.node(d,d+u.nodeSize,{class:this.options.className}))}),Ut.create(e,s)}}})]}});var Vte=dn.create({name:"gapCursor",addProseMirrorPlugins(){return[Tte()]},extendNodeSchema(e){var t;const n={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:(t=bt(Be(e,"allowGapCursor",n)))!=null?t:null}}}),Hte=dn.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new nn({key:new qn("placeholder"),props:{decorations:({doc:e,selection:t})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=t,i=[];if(!n)return null;const s=this.editor.isEmpty;return e.descendants((o,l)=>{const u=r>=l&&r<=l+o.nodeSize,d=!o.isLeaf&&Fm(o);if((u||!this.options.showOnlyCurrent)&&d){const h=[this.options.emptyNodeClass];s&&h.push(this.options.emptyEditorClass);const p=ur.node(l,l+o.nodeSize,{class:h.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:l,hasAnchor:u}):this.options.placeholder});i.push(p)}return this.options.includeChildren}),Ut.create(e,i)}}})]}});dn.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:e,options:t}=this;return[new nn({key:new qn("selection"),props:{decorations(n){return n.selection.empty||e.isFocused||!e.isEditable||GB(n.selection)||e.view.dragging?null:Ut.create(n.doc,[ur.inline(n.selection.from,n.selection.to,{class:t.className})])}}})]}});function hR({types:e,node:t}){return t&&Array.isArray(e)&&e.includes(t.type)||t?.type===e}var Fte=dn.create({name:"trailingNode",addOptions(){return{node:"paragraph",notAfter:[]}},addProseMirrorPlugins(){const e=new qn(this.name),t=Object.entries(this.editor.schema.nodes).map(([,n])=>n).filter(n=>(this.options.notAfter||[]).concat(this.options.node).includes(n.name));return[new nn({key:e,appendTransaction:(n,r,i)=>{const{doc:s,tr:o,schema:l}=i,u=e.getState(i),d=s.content.size,h=l.nodes[this.options.node];if(u)return o.insert(d,h.create())},state:{init:(n,r)=>{const i=r.tr.doc.lastChild;return!hR({node:i,types:t})},apply:(n,r)=>{if(!n.docChanged)return r;const i=n.doc.lastChild;return!hR({node:i,types:t})}}})]}}),Ute=dn.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:e,dispatch:t})=>jz(e,t),redo:()=>({state:e,dispatch:t})=>Oz(e,t)}},addProseMirrorPlugins(){return[zte(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),$te=dn.create({name:"starterKit",addExtensions(){var e,t,n,r;const i=[];return this.options.bold!==!1&&i.push(xee.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(mee.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(Xk.configure(this.options.bulletList)),this.options.code!==!1&&i.push(Eee.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(Tee.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(Nee.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(qte.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(Vte.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(Aee.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(hz.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(Ute.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(_ee.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(Lee.configure(this.options.italic)),this.options.listItem!==!1&&i.push(Zk.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(Mz.configure((e=this.options)==null?void 0:e.listKeymap)),this.options.link!==!1&&i.push(Ez.configure((t=this.options)==null?void 0:t.link)),this.options.orderedList!==!1&&i.push(Qk.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(gte.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(vte.configure(this.options.strike)),this.options.text!==!1&&i.push(xte.configure(this.options.text)),this.options.underline!==!1&&i.push(_z.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&i.push(Fte.configure((r=this.options)==null?void 0:r.trailingNode)),i}}),Gte=$te,Wte=dn.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:e=>{const t=e.style.textAlign;return this.options.alignments.includes(t)?t:this.options.defaultAlignment},renderHTML:e=>e.textAlign?{style:`text-align: ${e.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:e=>({commands:t})=>this.options.alignments.includes(e)?this.options.types.map(n=>t.updateAttributes(n,{textAlign:e})).every(n=>n):!1,unsetTextAlign:()=>({commands:e})=>this.options.types.map(t=>e.resetAttributes(t,"textAlign")).every(t=>t),toggleTextAlign:e=>({editor:t,commands:n})=>this.options.alignments.includes(e)?t.isActive({textAlign:e})?n.unsetTextAlign():n.setTextAlign(e):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),Kte=Wte,Yte=Hte,Xte=Xk,Zte=Qk,Jte=Zk;const Wm=({label:e,id:t,children:n,focused:r,containerClassName:i})=>{const s=`${t}-label`;return y.jsxs(xn.div,{initial:{opacity:0,y:-4,scale:.98},animate:{opacity:1,y:0,scale:1},transition:{type:"spring",stiffness:260,damping:24},className:`flex flex-col gap-1 ${i||""}`,children:[e&&y.jsx(xn.label,{id:s,htmlFor:t,className:"text-xs text-muted",animate:{color:r?"var(--brand)":"var(--muted)"},transition:{duration:.25},children:e}),n]})},Km=()=>{const[e,t]=ke.useState(!1);return{focused:e,onFocus:()=>t(!0),onBlur:()=>t(!1)}},Ll=({onClick:e,disabled:t,active:n,title:r,children:i})=>y.jsx("button",{onClick:e,disabled:t,title:r,className:`px-2 py-1 rounded transition-colors ${n?"bg-[var(--brand)] text-white":"hover:bg-[var(--bg-hover)] text-theme"} ${t?"opacity-50 cursor-not-allowed":""}`,children:i}),pR=({editor:e,disabled:t})=>{let n="0";return e.isActive("heading",{level:1})?n="1":e.isActive("heading",{level:2})?n="2":e.isActive("heading",{level:3})&&(n="3"),y.jsxs("select",{title:"Heading level",value:n,onChange:r=>{const i=parseInt(r.target.value,10);i===0?e.chain().focus().setParagraph().run():e.chain().focus().toggleHeading({level:i}).run()},className:"rounded border px-1 py-0.5 bg-[var(--surface)] text-theme",disabled:t,children:[y.jsx("option",{value:"0",children:"P"}),y.jsx("option",{value:"1",children:"H1"}),y.jsx("option",{value:"2",children:"H2"}),y.jsx("option",{value:"3",children:"H3"})]})},om=({id:e,label:t,value:n,onChange:r,placeholder:i="Start typing",disabled:s=!1,className:o="",containerClassName:l})=>{const[,u]=D.useState(0),[d,h]=D.useState(!1),{focused:p,onFocus:m,onBlur:b}=Km(),x=()=>u(Date.now()),S=()=>{h(!d)},w=uee({extensions:[Gte.configure({bulletList:!1,orderedList:!1,listItem:!1}),Xte.configure({HTMLAttributes:{class:"bullet-list"}}),Zte.configure({HTMLAttributes:{class:"ordered-list"}}),Jte.configure({HTMLAttributes:{class:"list-item"}}),wte,ote.configure({openOnClick:!1}),Kte.configure({types:["heading","paragraph"]}),Mee.configure({levels:[1,2,3]}),Yte.configure({placeholder:i})],content:n,editable:!s,onUpdate:({editor:T})=>{r(T.getHTML())},onFocus:m,onBlur:b,onSelectionUpdate:()=>{x()},onTransaction:()=>{x()}});if(D.useEffect(()=>{w&&(n!==w.getHTML()&&w.commands.setContent(n,{emitUpdate:!1}),w.setEditable(!s))},[n,s,w]),D.useEffect(()=>{const T=A=>{A.key==="Escape"&&d&&h(!1)};return d?(document.addEventListener("keydown",T),document.body.style.overflow="hidden"):document.body.style.overflow="",()=>{document.removeEventListener("keydown",T),document.body.style.overflow=""}},[d]),!w)return null;const C=[{key:"bold",title:"Bold",onClick:()=>w.chain().focus().toggleBold().run(),active:w.isActive("bold"),node:y.jsx(QW,{size:16})},{key:"italic",title:"Italic",onClick:()=>w.chain().focus().toggleItalic().run(),active:w.isActive("italic"),node:y.jsx(eK,{size:16})},{key:"underline",title:"Underline",onClick:()=>w.chain().focus().toggleUnderline().run(),active:w.isActive("underline"),node:y.jsx(iK,{size:16})},{key:"strike",title:"Strikethrough",onClick:()=>w.chain().focus().toggleStrike().run(),active:w.isActive("strike"),node:y.jsx(y.Fragment,{children:"S"})},{key:"bulletList",title:"Bullet List",onClick:()=>w.chain().focus().toggleBulletList().run(),active:w.isActive("bulletList"),node:y.jsx(tK,{size:16})},{key:"orderedList",title:"Numbered List",onClick:()=>w.chain().focus().toggleOrderedList().run(),active:w.isActive("orderedList"),node:y.jsx(nK,{size:16})},{key:"blockquote",title:"Quote",onClick:()=>w.chain().focus().toggleBlockquote().run(),active:w.isActive("blockquote"),node:y.jsx(rK,{size:16})},{key:"codeBlock",title:"Code Block",onClick:()=>w.chain().focus().toggleCodeBlock().run(),active:w.isActive("codeBlock"),node:y.jsx(GW,{size:16})}],N=[{key:"align-left",title:"Align Left",onClick:()=>w.chain().focus().setTextAlign("left").run(),active:w.isActive({textAlign:"left"}),node:y.jsx(ZW,{size:16})},{key:"align-center",title:"Align Center",onClick:()=>w.chain().focus().setTextAlign("center").run(),active:w.isActive({textAlign:"center"}),node:y.jsx(XW,{size:16})},{key:"align-right",title:"Align Right",onClick:()=>w.chain().focus().setTextAlign("right").run(),active:w.isActive({textAlign:"right"}),node:y.jsx(JW,{size:16})}],k=[{key:"fullscreen",title:d?"Exit Fullscreen":"Enter Fullscreen",onClick:S,active:d,node:d?y.jsx(lK,{size:16}):y.jsx(cK,{size:16})}];return y.jsx("div",{className:d?"fixed inset-0 z-50 bg-[var(--bg)] flex flex-col":"",children:d?y.jsxs(xn.div,{className:"h-full flex flex-col rounded-lg border border-[var(--border)] bg-[var(--surface)] text-theme m-4",animate:{boxShadow:p?"0 0 0 2px var(--brand)":"0 0 0 1px var(--border)"},transition:{type:"spring",stiffness:300,damping:30},children:[y.jsxs("div",{className:"flex flex-wrap items-center gap-1 border-b border-[var(--border)] p-2 text-sm shrink-0",children:[y.jsx("div",{className:"flex items-center gap-2 mr-4",children:t&&y.jsx("span",{className:"font-medium text-theme",children:t})}),y.jsx(pR,{editor:w,disabled:s}),C.map(T=>y.jsx(Ll,{onClick:T.onClick,disabled:s,active:T.active,title:T.title,children:T.node},T.key)),N.map(T=>y.jsx(Ll,{onClick:T.onClick,disabled:s,active:T.active,title:T.title,children:T.node},T.key)),y.jsx("div",{className:"w-px h-6 bg-[var(--border)] mx-1"}),k.map(T=>y.jsx(Ll,{onClick:T.onClick,disabled:s,active:T.active,title:T.title,children:T.node},T.key))]}),y.jsx("div",{className:"flex-1 overflow-hidden",children:y.jsx("div",{className:"h-full overflow-y-auto p-4",children:y.jsx("div",{className:"prose prose-invert max-w-none min-h-full",children:y.jsx(QD,{editor:w,className:"focus:outline-none h-full"})})})})]}):y.jsx(Wm,{id:e,label:t,focused:p,containerClassName:l,children:y.jsxs(xn.div,{className:`rounded-lg border border-[var(--border)] bg-[var(--surface)] text-theme ${o} ${s?"opacity-60 cursor-not-allowed":""}`,animate:{boxShadow:p?"0 0 0 2px var(--brand)":"0 0 0 1px var(--border)"},transition:{type:"spring",stiffness:300,damping:30},children:[y.jsxs("div",{className:"flex flex-wrap items-center gap-1 border-b border-[var(--border)] p-1 text-sm",children:[y.jsx(pR,{editor:w,disabled:s}),C.map(T=>y.jsx(Ll,{onClick:T.onClick,disabled:s,active:T.active,title:T.title,children:T.node},T.key)),N.map(T=>y.jsx(Ll,{onClick:T.onClick,disabled:s,active:T.active,title:T.title,children:T.node},T.key)),y.jsx("div",{className:"w-px h-6 bg-[var(--border)] mx-1"}),k.map(T=>y.jsx(Ll,{onClick:T.onClick,disabled:s,active:T.active,title:T.title,children:T.node},T.key))]}),y.jsx("div",{className:"p-3 min-h-[8rem] prose prose-invert max-w-none",children:y.jsx(QD,{editor:w,className:"focus:outline-none"})})]})})})},Qte=()=>{Wa();const e=Vd(),[t,n]=D.useState(!1),r=D.useRef(0),i=()=>(r.current+=1,`item-${Date.now()}-${r.current}`),[s,o]=D.useState({title:"",description:"",difficulty:"Medium",category:"Web Application",estimatedTime:"30 minutes",requirements:[{id:i(),value:""}],constraints:[{id:i(),value:""}],hints:[{id:i(),value:""}],tags:[{id:i(),value:""}]}),l=(m,b)=>{o(x=>({...x,[m]:b}))},u=(m,b,x)=>{const S=s[m].map(w=>w.id===b?{...w,value:x}:w);o(w=>({...w,[m]:S}))},d=m=>{o(b=>({...b,[m]:[...b[m],{id:i(),value:""}]}))},h=(m,b)=>{const x=s[m].filter(S=>S.id!==b);o(S=>({...S,[m]:x.length>0?x:[{id:i(),value:""}]}))},p=()=>{n(!0);const m={id:`custom-${Date.now()}`,title:s.title,description:s.description,difficulty:s.difficulty,category:s.category,estimated_time:s.estimatedTime,requirements:s.requirements.map(b=>b.value).filter(b=>b.trim()!==""),constraints:s.constraints.map(b=>b.value).filter(b=>b.trim()!==""),hints:s.hints.map(b=>b.value).filter(b=>b.trim()!==""),tags:s.tags.map(b=>b.value).filter(b=>b.trim()!=="")};localStorage.setItem(`custom-problem-${m.id}`,JSON.stringify(m)),setTimeout(()=>{e(`/playground/${m.id}`)},300)};return y.jsxs(y.Fragment,{children:[y.jsx(Fd,{title:"Create Custom System Design Problem | Diagrammatic",description:"Create and share custom system design problems with your students or team. Define requirements, constraints, and evaluation criteria for personalized learning experiences.",keywords:"create system design problem, custom architecture challenge, teaching system design, system design assignment creator",url:"https://satya00089.github.io/diagrammatic/#/create-problem"}),y.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[var(--surface)] via-[var(--bg)] to-[var(--surface)] text-theme relative grid-pattern-overlay",children:[y.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] transition-all duration-300 shadow-lg",children:y.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:y.jsxs("div",{className:"flex items-center justify-between h-16",children:[y.jsxs("button",{type:"button",onClick:()=>e("/"),className:"flex items-center space-x-3 group cursor-pointer",children:[y.jsx("img",{src:"./logo.png",alt:"Logo",className:"h-10 transition-transform group-hover:scale-110 duration-300"}),y.jsx("span",{className:"text-xl font-bold text-white",children:"Diagrammatic"})]}),y.jsx("div",{className:"flex items-center gap-4",children:y.jsx(Hd,{})})]})})}),y.jsx("div",{className:"pt-16 relative z-10",children:y.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[y.jsxs("div",{className:"text-center mb-12",children:[y.jsx("div",{className:"inline-block mb-4",children:y.jsx("span",{className:"px-4 py-2 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] text-white text-sm font-semibold rounded-full shadow-lg",children:" Custom Problem Creator"})}),y.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Create Custom Problem"}),y.jsx("p",{className:"text-muted text-lg max-w-2xl mx-auto",children:"Define your own system design challenge and start solving"})]}),y.jsx("div",{className:"elevated-card-bg backdrop-blur-md rounded-3xl shadow-2xl p-8 md:p-12",children:y.jsxs("div",{className:"space-y-8",children:[y.jsxs("div",{children:[y.jsxs("label",{htmlFor:"title",className:"text-sm font-bold text-theme mb-3 flex items-center gap-2",children:[y.jsx("span",{className:"text-xl",children:""})," Problem Title *"]}),y.jsx("input",{id:"title",type:"text",value:s.title,onChange:m=>l("title",m.target.value),placeholder:"e.g., Design a URL Shortener",className:"w-full px-5 py-4 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme text-lg transition-all duration-300 hover:border-[var(--brand)]/30"})]}),y.jsx("div",{children:y.jsx(om,{id:"description",label:" Description *",value:s.description,onChange:m=>l("description",m),placeholder:"Describe the problem in detail..."})}),y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[y.jsxs("div",{children:[y.jsxs("label",{htmlFor:"difficulty",className:"text-sm font-bold text-theme mb-3 flex items-center gap-2",children:[y.jsx("span",{className:"text-xl",children:""})," Difficulty"]}),y.jsxs("select",{id:"difficulty",value:s.difficulty,onChange:m=>l("difficulty",m.target.value),className:"w-full px-5 py-4 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme cursor-pointer transition-all duration-300 hover:border-[var(--brand)]/30",children:[y.jsx("option",{value:"Easy",children:"Easy"}),y.jsx("option",{value:"Medium",children:"Medium"}),y.jsx("option",{value:"Hard",children:"Hard"})]})]}),y.jsxs("div",{children:[y.jsxs("label",{htmlFor:"category",className:"text-sm font-bold text-theme mb-3 flex items-center gap-2",children:[y.jsx("span",{className:"text-xl",children:""})," Category"]}),y.jsx("input",{id:"category",type:"text",value:s.category,onChange:m=>l("category",m.target.value),placeholder:"e.g., Web Application",className:"w-full px-5 py-4 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"})]}),y.jsxs("div",{children:[y.jsxs("label",{htmlFor:"estimatedTime",className:"text-sm font-bold text-theme mb-3 flex items-center gap-2",children:[y.jsx("span",{className:"text-xl",children:""})," Estimated Time"]}),y.jsx("input",{id:"estimatedTime",type:"text",value:s.estimatedTime,onChange:m=>l("estimatedTime",m.target.value),placeholder:"e.g., 30 minutes",className:"w-full px-5 py-4 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"})]})]}),y.jsxs("div",{className:"rounded-2xl bg-[var(--surface)]/50",children:[y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[y.jsxs("div",{className:"text-sm font-bold text-theme flex items-center gap-2",children:[y.jsx("span",{className:"text-xl",children:""})," Requirements"]}),y.jsx("button",{type:"button",onClick:()=>d("requirements"),className:"px-4 py-2 text-sm text-white bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-lg hover:shadow-lg transition-all duration-300 cursor-pointer font-semibold",children:"+ Add"})]}),s.requirements.map((m,b)=>y.jsx("div",{className:"mb-4",children:y.jsxs("div",{className:"flex gap-3 items-start",children:[y.jsx("div",{className:"flex-1",children:y.jsx(om,{id:`requirement-${m.id}`,label:`Requirement ${b+1}`,value:m.value,onChange:x=>u("requirements",m.id,x),placeholder:"Enter a requirement (supports rich text formatting)"})}),s.requirements.length>1&&y.jsx("button",{type:"button",onClick:()=>h("requirements",m.id),className:"px-4 py-3 text-red-500 hover:bg-red-500/10 rounded-xl transition-colors cursor-pointer font-bold text-lg mt-8",children:""})]})},m.id))]}),y.jsxs("div",{className:"rounded-2xl bg-[var(--surface)]/50",children:[y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[y.jsxs("div",{className:"text-sm font-bold text-theme flex items-center gap-2",children:[y.jsx("span",{className:"text-xl",children:""})," Constraints"]}),y.jsx("button",{type:"button",onClick:()=>d("constraints"),className:"px-4 py-2 text-sm text-white bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-lg hover:shadow-lg transition-all duration-300 cursor-pointer font-semibold",children:"+ Add"})]}),s.constraints.map(m=>y.jsxs("div",{className:"flex gap-3 mb-3",children:[y.jsx("input",{type:"text",value:m.value,onChange:b=>u("constraints",m.id,b.target.value),placeholder:"Enter a constraint",className:"flex-1 px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300"}),s.constraints.length>1&&y.jsx("button",{type:"button",onClick:()=>h("constraints",m.id),className:"px-4 py-3 text-red-500 hover:bg-red-500/10 rounded-xl transition-colors cursor-pointer font-bold text-lg",children:""})]},m.id))]}),y.jsxs("div",{className:"rounded-2xl bg-[var(--surface)]/50",children:[y.jsxs("div",{className:"flex items-center justify-between mb-4",children:[y.jsxs("div",{className:"text-sm font-bold text-theme flex items-center gap-2",children:[y.jsx("span",{className:"text-xl",children:""})," Hints (Optional)"]}),y.jsx("button",{type:"button",onClick:()=>d("hints"),className:"px-4 py-2 text-sm text-white bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-lg hover:shadow-lg transition-all duration-300 cursor-pointer font-semibold",children:"+ Add"})]}),s.hints.map(m=>y.jsxs("div",{className:"flex gap-3 mb-3",children:[y.jsx("input",{type:"text",value:m.value,onChange:b=>u("hints",m.id,b.target.value),placeholder:"Enter a helpful hint",className:"flex-1 px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300"}),s.hints.length>1&&y.jsx("button",{type:"button",onClick:()=>h("hints",m.id),className:"px-4 py-3 text-red-500 hover:bg-red-500/10 rounded-xl transition-colors cursor-pointer font-bold text-lg",children:""})]},m.id))]}),y.jsxs("div",{className:"rounded-2xl bg-[var(--surface)]/50",children:[y.jsx("div",{className:"flex items-center justify-between mb-4",children:y.jsxs("div",{className:"text-sm font-bold text-theme flex items-center gap-2",children:[y.jsx("span",{className:"text-xl",children:""})," Tags"]})}),s.tags.some(m=>m.value.trim())&&y.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:s.tags.filter(m=>m.value.trim()).map(m=>y.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] text-white rounded-full text-sm font-semibold shadow-md hover:shadow-lg transition-all duration-300 group",children:[y.jsx("span",{children:m.value}),y.jsx("button",{type:"button",onClick:()=>h("tags",m.id),className:"hover:bg-white/20 rounded-full p-1 transition-colors","aria-label":"Remove tag",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:y.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]},m.id))}),y.jsxs("div",{className:"flex gap-3",children:[y.jsx("input",{type:"text",value:s.tags.at(-1)?.value||"",onChange:m=>u("tags",s.tags.at(-1)?.id||"",m.target.value),onKeyDown:m=>{m.key==="Enter"&&m.currentTarget.value.trim()&&(m.preventDefault(),d("tags"))},placeholder:"Type a tag and press Enter (e.g., caching, scalability)",className:"flex-1 px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"}),y.jsx("button",{type:"button",onClick:()=>{s.tags.at(-1)?.value.trim()&&d("tags")},className:"px-6 py-3 text-white bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-xl hover:shadow-lg transition-all duration-300 cursor-pointer font-semibold",children:"Add"})]})]}),y.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-8 border-t-2 border-[var(--theme)]/10",children:[y.jsx("button",{type:"button",onClick:p,disabled:!s.title||!s.description||t,className:"flex-1 px-8 py-4 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] text-white font-bold rounded-xl hover:shadow-2xl disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 cursor-pointer flex items-center justify-center gap-3 text-lg hover:scale-105",children:t?y.jsxs(y.Fragment,{children:[y.jsx("span",{className:"inline-block w-5 h-5 border-3 border-white border-t-transparent rounded-full animate-spin"})," ","Creating..."]}):y.jsx(y.Fragment,{children:" Create & Start Designing"})}),y.jsx("button",{type:"button",onClick:()=>e("/"),disabled:t,className:"px-8 py-4 elevated-card-bg border-2 border-[var(--theme)]/10 text-theme font-bold rounded-xl hover:border-[var(--brand)]/30 transition-all duration-300 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed hover:scale-105",children:"Cancel"})]})]})})]})})]})]})},ene=()=>{Wa();const e=Vd(),[t,n]=D.useState([]),[r,i]=D.useState(!1),[s,o]=D.useState(""),[l,u]=D.useState("updated"),[d,h]=D.useState("all"),[p,m]=D.useState(!1),[b,x]=D.useState(!1),[S,w]=D.useState(!1),[C,N]=D.useState(null),{user:k,isAuthenticated:T,login:A,signup:M,googleLogin:j,logout:R}=Cm();D.useEffect(()=>{T||e("/")},[T,e]),D.useEffect(()=>{(async()=>{if(!T){n([]);return}i(!0);try{const V=await Gn.getUserDiagrams();n(V)}catch(V){console.error("Failed to load diagrams:",V)}finally{i(!1)}})()},[T]);const L=O=>{e(`/playground/free?diagramId=${O}`)},I=async(O,V)=>{V.stopPropagation(),O.isOwner&&(N(O),w(!0))},H=async()=>{if(C)try{await Gn.deleteDiagram(C.id),n(O=>O.filter(V=>V.id!==C.id)),w(!1),N(null)}catch(O){console.error("Failed to delete diagram:",O),alert("Failed to delete diagram. Please try again.")}},q=()=>{w(!1),N(null)},W=t.filter(O=>{if(d==="owned"&&!O.isOwner||d==="shared"&&O.isOwner)return!1;const V=s.toLowerCase();return O.title.toLowerCase().includes(V)||O.description?.toLowerCase().includes(V)||O.owner.name.toLowerCase().includes(V)||O.owner.email.toLowerCase().includes(V)||!1}).sort((O,V)=>{switch(l){case"title":return O.title.localeCompare(V.title);case"created":return new Date(V.createdAt).getTime()-new Date(O.createdAt).getTime();case"updated":default:return new Date(V.updatedAt).getTime()-new Date(O.updatedAt).getTime()}}),z=t.filter(O=>O.isOwner).length,F=t.filter(O=>!O.isOwner).length;return y.jsxs(y.Fragment,{children:[y.jsx(Fd,{title:"My Designs | Diagrammatic",description:"View and manage your saved system design projects and diagrams shared with you",url:"https://satya00089.github.io/diagrammatic/#/diagrams"}),y.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[var(--surface)] via-[var(--bg)] to-[var(--surface)] text-theme relative grid-pattern-overlay",children:[y.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] transition-all duration-300",children:y.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:y.jsxs("div",{className:"flex items-center justify-between h-16",children:[y.jsxs("button",{type:"button",onClick:()=>e("/"),className:"flex items-center space-x-3 group cursor-pointer",children:[y.jsx("img",{src:"./logo.png",alt:"Logo",className:"h-10 transition-transform group-hover:scale-110 duration-300"}),y.jsx("span",{className:"text-xl font-bold text-white",children:"Diagrammatic"})]}),y.jsxs("div",{className:"flex items-center gap-4",children:[T&&y.jsx("button",{type:"button",onClick:()=>e("/problems"),className:"hidden md:block px-4 py-2 text-sm font-medium text-white hover:text-white/80 transition-colors cursor-pointer",children:"Problems"}),y.jsx("div",{className:"hidden md:block text-sm text-white/90",children:r?"Loading...":`${z} owned  ${F} shared`}),y.jsx("button",{type:"button",onClick:()=>e("/playground/free"),className:"px-4 py-2 bg-white/20 text-white text-sm font-semibold rounded-lg hover:bg-white/30 transition-all cursor-pointer",children:"New Design"}),y.jsx(Hd,{}),y.jsx("div",{className:"relative",children:T?y.jsxs(y.Fragment,{children:[y.jsxs("button",{type:"button",onClick:()=>m(!p),className:"flex items-center gap-2 px-3 py-2 rounded-md text-white hover:bg-white/10 transition-colors cursor-pointer",children:[k?.picture?y.jsx("img",{src:k.picture,alt:k.name||"User",className:"w-8 h-8 rounded-full object-cover border-2 border-white/30"}):y.jsx("div",{className:"h-8 w-8 rounded-full bg-white/20 flex items-center justify-center text-sm font-medium",children:k?.name?.[0]?.toUpperCase()||"U"}),y.jsx("span",{className:"hidden sm:inline text-sm",children:k?.name||k?.email}),y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),p&&y.jsx("div",{className:"absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-[var(--elevated)] backdrop-blur-sm ring-1 ring-black/5 border border-[var(--border)]",children:y.jsxs("div",{className:"py-1",children:[y.jsxs("div",{className:"px-4 py-3 border-b border-[var(--border)]",children:[y.jsx("p",{className:"text-sm font-medium text-theme",children:k?.name}),y.jsx("p",{className:"text-sm text-muted truncate",children:k?.email})]}),y.jsx("button",{type:"button",onClick:()=>{m(!1),R()},className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors cursor-pointer",children:"Sign Out"})]})})]}):y.jsx("button",{type:"button",onClick:()=>x(!0),className:"px-4 py-2 bg-white/20 text-white text-sm font-medium rounded-md hover:bg-white/30 transition-all cursor-pointer",children:"Sign In"})})]})]})})}),y.jsx("div",{className:"pt-16 relative z-10",children:y.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[y.jsxs("div",{className:"text-center mb-12",children:[y.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"My Designs"}),y.jsx("p",{className:"text-muted text-lg max-w-2xl mx-auto",children:"View and manage your saved projects and diagrams shared with you"})]}),!r&&y.jsxs(y.Fragment,{children:[y.jsxs("div",{className:"flex gap-2 mb-6 justify-center",children:[y.jsxs("button",{type:"button",onClick:()=>h("all"),className:`px-6 py-2.5 rounded-xl font-semibold transition-all duration-300 ${d==="all"?"bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white shadow-lg":"bg-[var(--surface)] text-muted hover:bg-[var(--theme)]/5 border border-[var(--theme)]/10"}`,children:["All Designs (",t.length,")"]}),y.jsxs("button",{type:"button",onClick:()=>h("owned"),className:`px-6 py-2.5 rounded-xl font-semibold transition-all duration-300 ${d==="owned"?"bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white shadow-lg":"bg-[var(--surface)] text-muted hover:bg-[var(--theme)]/5 border border-[var(--theme)]/10"}`,children:["My Designs (",z,")"]}),y.jsxs("button",{type:"button",onClick:()=>h("shared"),className:`px-6 py-2.5 rounded-xl font-semibold transition-all duration-300 ${d==="shared"?"bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white shadow-lg":"bg-[var(--surface)] text-muted hover:bg-[var(--theme)]/5 border border-[var(--theme)]/10"}`,children:["Shared with Me (",F,")"]})]}),y.jsx("div",{className:"elevated-card-bg backdrop-blur-md rounded-2xl shadow-lg p-6 mb-8",children:y.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[y.jsxs("div",{children:[y.jsx("label",{htmlFor:"search-input",className:"block text-sm font-semibold text-theme mb-2",children:" Search"}),y.jsx("input",{id:"search-input",type:"text",placeholder:"Search designs...",value:s,onChange:O=>o(O.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"sort-select",className:"block text-sm font-semibold text-theme mb-2",children:" Sort By"}),y.jsxs("select",{id:"sort-select",value:l,onChange:O=>u(O.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme appearance-none cursor-pointer transition-all duration-300 hover:border-[var(--brand)]/30",children:[y.jsx("option",{value:"updated",children:"Last Updated"}),y.jsx("option",{value:"created",children:"Date Created"}),y.jsx("option",{value:"title",children:"Title (A-Z)"})]})]})]})}),r&&y.jsxs("div",{className:"text-center py-20",children:[y.jsx("div",{className:"inline-block w-16 h-16 border-4 border-[var(--brand)] border-t-transparent rounded-full animate-spin mb-4"}),y.jsx("div",{className:"text-theme text-xl mb-2",children:"Loading designs..."}),y.jsx("div",{className:"text-muted text-sm",children:"Please wait while we fetch your designs"})]}),!r&&W.length===0&&y.jsxs("div",{className:"text-center py-20",children:[y.jsx("div",{className:"text-7xl mb-6",children:s?"":d==="shared"?"":""}),y.jsx("div",{className:"text-theme text-2xl font-bold mb-2",children:s?"No designs found":d==="shared"?"No shared designs yet":d==="owned"?"No designs created yet":"No designs yet"}),y.jsx("div",{className:"text-muted text-lg mb-6",children:s?"Try adjusting your search terms":d==="shared"?"Diagrams shared with you will appear here":"Start creating your first system design project"}),!s&&d!=="shared"&&y.jsx("button",{type:"button",onClick:()=>e("/playground/free"),className:"px-6 py-3 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white font-semibold rounded-xl hover:shadow-lg hover:scale-105 transition-all duration-300 cursor-pointer",children:"Create Your First Design "})]}),!r&&W.length>0&&y.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 pb-12",children:W.map((O,V)=>y.jsxs("div",{className:`group elevated-card-bg backdrop-blur-md rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-500 hover:-translate-y-2 overflow-hidden ${V===0?"delay-0":V===1?"delay-100":V===2?"delay-200":""}`,children:[y.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] rounded-2xl opacity-0 group-hover:opacity-20 blur-xl transition-opacity duration-500"}),y.jsxs("div",{className:"relative p-6",children:[O.isOwner&&y.jsx("button",{type:"button",onClick:Y=>I(O,Y),className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity p-2 hover:bg-red-500/10 rounded-lg z-10",title:"Delete diagram",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),y.jsxs("div",{className:"cursor-pointer",onClick:()=>L(O.id),children:[y.jsxs("div",{className:"flex items-start justify-between mb-4",children:[y.jsxs("div",{className:"flex-1 pr-8",children:[y.jsx("div",{className:"flex items-start gap-2 mb-2",children:y.jsx("h3",{className:"text-lg font-bold text-theme group-hover:text-[var(--brand)] transition-colors duration-300 line-clamp-2 flex-1",children:O.title})}),!O.isOwner&&y.jsxs("div",{className:"mb-2 flex items-center gap-2 flex-wrap",children:[y.jsxs("div",{className:"group/owner relative overflow-hidden rounded-lg bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 px-2.5 py-1.5 border border-purple-200/60 dark:border-purple-700/40 hover:border-purple-300 dark:hover:border-purple-600 transition-all duration-300 inline-flex items-center gap-2",children:[y.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-400/0 via-blue-400/10 to-purple-400/0 opacity-0 group-hover/owner:opacity-100 transition-opacity duration-500"}),y.jsxs("div",{className:"relative flex items-center gap-1.5",children:[y.jsxs("div",{className:"relative flex-shrink-0",children:[O.owner.pictureUrl?y.jsx("img",{src:O.owner.pictureUrl,alt:O.owner.name,className:"w-5 h-5 rounded-full object-cover ring-1 ring-purple-300 dark:ring-purple-600"}):y.jsx("div",{className:"w-5 h-5 rounded-full bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center text-[9px] text-white font-bold",children:O.owner.name[0]?.toUpperCase()}),y.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-2 h-2 bg-green-500 rounded-full border border-white dark:border-gray-900"})]}),y.jsxs("div",{className:"flex items-center gap-1",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-2.5 w-2.5 text-purple-600 dark:text-purple-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})}),y.jsx("span",{className:"text-xs font-bold text-purple-800 dark:text-purple-300",children:O.owner.name})]})]})]}),y.jsxs("div",{className:`inline-flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg font-bold text-xs shadow-sm transition-all duration-300 ${O.permission==="edit"?"bg-gradient-to-r from-emerald-500 to-green-600 text-white hover:shadow-md hover:shadow-emerald-500/30":"bg-gradient-to-r from-slate-400 to-gray-500 text-white hover:shadow-md hover:shadow-slate-400/30"}`,children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:O.permission==="edit"?y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"}):y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})}),y.jsx("span",{children:O.permission==="edit"?"Can Edit":"View Only"})]})]}),O.description&&y.jsx("p",{className:"text-muted text-sm line-clamp-2 leading-relaxed",children:O.description})]}),y.jsx("div",{className:"text-3xl",children:""})]}),y.jsxs("div",{className:"flex items-center justify-between text-sm text-muted mb-4 pb-4 border-b border-[var(--theme)]/10",children:[y.jsxs("span",{className:"flex items-center gap-1",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})}),O.nodes.length," node",O.nodes.length===1?"":"s"]}),y.jsxs("span",{className:"flex items-center gap-1",children:[y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),O.edges.length," connection",O.edges.length===1?"":"s"]})]}),y.jsxs("div",{className:"flex items-center justify-between text-xs text-muted mb-6",children:[y.jsxs("span",{children:["Updated"," ",new Date(O.updatedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]}),y.jsxs("span",{children:["Created"," ",new Date(O.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]}),y.jsx("button",{type:"button",onClick:Y=>{Y.stopPropagation(),L(O.id)},className:"w-full px-6 py-3 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white font-semibold rounded-xl hover:shadow-lg hover:scale-105 transition-all duration-300 cursor-pointer group-hover:shadow-xl",children:"Open Design "})]})]})]},O.id))})]})]})})]}),b&&y.jsx(Dm,{isOpen:b,onClose:()=>x(!1),onLogin:async(O,V)=>{await A({email:O,password:V})},onSignup:async(O,V,Y)=>{await M({email:O,password:V,name:Y})},onGoogleLogin:async O=>{await j(O)}}),S&&C&&y.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:y.jsxs("div",{className:"bg-[var(--surface)] rounded-2xl shadow-2xl p-6 max-w-md w-full mx-4 border border-[var(--theme)]/10",children:[y.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[y.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 dark:bg-red-900/20 flex items-center justify-center",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-bold text-[var(--theme)]",children:"Delete Design?"}),y.jsx("p",{className:"text-sm text-muted",children:"This action cannot be undone"})]})]}),y.jsxs("p",{className:"text-muted mb-6",children:["Are you sure you want to delete ",y.jsxs("strong",{children:['"',C.title,'"']}),"? This will permanently remove the design and all its data."]}),y.jsxs("div",{className:"flex space-x-3",children:[y.jsx("button",{type:"button",onClick:q,className:"flex-1 px-4 py-2 bg-[var(--theme)]/5 hover:bg-[var(--theme)]/10 text-[var(--theme)] font-medium rounded-lg transition-colors cursor-pointer",children:"Cancel"}),y.jsx("button",{type:"button",onClick:H,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-bold rounded-lg transition-colors cursor-pointer",children:"Delete Design"})]})]})})]})};function tne(e){return at({attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"polygon",attr:{fill:"#CFD8DC",points:"35,36 39,36 39,22 26,22 26,13 22,13 22,22 9,22 9,36 13,36 13,26 22,26 22,36 26,36 26,26 35,26"},child:[]},{tag:"rect",attr:{x:"17",y:"6",fill:"#3F51B5",width:"14",height:"10"},child:[]},{tag:"rect",attr:{x:"32",y:"32",fill:"#00BCD4",width:"10",height:"10"},child:[]},{tag:"rect",attr:{x:"6",y:"32",fill:"#00BCD4",width:"10",height:"10"},child:[]},{tag:"rect",attr:{x:"19",y:"32",fill:"#00BCD4",width:"10",height:"10"},child:[]}]})(e)}const Lz=({id:e,checked:t,onChange:n,label:r,disabled:i=!1,className:s=""})=>y.jsxs("label",{htmlFor:e,className:`inline-flex items-center gap-2 text-sm cursor-pointer select-none ${i?"opacity-60 cursor-not-allowed":""} ${s}`,children:[y.jsxs("span",{className:"relative inline-flex items-center justify-center",children:[y.jsx("input",{id:e,type:"checkbox",checked:t,disabled:i,onChange:o=>n(o.target.checked),className:"peer w-4 h-4 cursor-pointer appearance-none rounded border border-theme bg-[var(--surface)] focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:ring-offset-1 transition-colors disabled:cursor-not-allowed"}),y.jsx(Tm,{children:t&&y.jsx(xn.span,{initial:{scale:0,opacity:0,rotate:-45},animate:{scale:1,opacity:1,rotate:0},exit:{scale:.4,opacity:0,rotate:45},transition:{type:"spring",stiffness:400,damping:30},className:"pointer-events-none absolute w-3 h-3 flex items-center justify-center text-[10px] font-semibold text-white bg-[var(--brand)] rounded-sm shadow-sm",children:""},"check")})]}),r&&y.jsx("span",{className:"text-sm text-theme",children:r})]}),Pz=({id:e,label:t,value:n,onChange:r,min:i,max:s,step:o,disabled:l,className:u="",containerClassName:d})=>{const{focused:h,onFocus:p,onBlur:m}=Km();return y.jsx(Wm,{id:e,label:t,focused:h,containerClassName:d,children:y.jsx(xn.input,{id:e,type:"number",value:n??"",onChange:b=>r(Number(b.target.value)),onFocus:p,onBlur:m,disabled:l,min:i,max:s,step:o,className:`w-full border p-1 px-2 rounded bg-[var(--surface)] text-theme outline-none ${l?"opacity-60 cursor-not-allowed":""} ${u}`,animate:{boxShadow:h?"0 0 0 2px var(--brand)":"0 0 0 1px var(--border)"},transition:{type:"spring",stiffness:300,damping:30}})})},np=({id:e,label:t,value:n,onChange:r,placeholder:i,disabled:s,className:o="",containerClassName:l})=>{const{focused:u,onFocus:d,onBlur:h}=Km();return y.jsx(Wm,{id:e,label:t,focused:u,containerClassName:l,children:y.jsx(xn.input,{id:e,type:"text",value:n,placeholder:i,onChange:p=>r(p.target.value),onFocus:d,onBlur:h,disabled:s,className:`w-full border p-1 px-2 rounded bg-[var(--surface)] text-theme outline-none ${s?"opacity-60 cursor-not-allowed":""} ${o}`,animate:{boxShadow:u?"0 0 0 2px var(--brand)":"0 0 0 1px var(--border)"},transition:{type:"spring",stiffness:300,damping:30}})})},Iz=({id:e,label:t,value:n,onChange:r,options:i,disabled:s,className:o="",containerClassName:l})=>{const{focused:u,onFocus:d,onBlur:h}=Km(),p=`${e}-label`;return y.jsxs(Wm,{id:e,label:t,focused:u,containerClassName:l,children:[!t&&y.jsx("label",{id:p,htmlFor:e,className:"sr-only",children:e}),y.jsx(xn.div,{initial:{opacity:0,y:-4,scale:.98},animate:{opacity:1,y:0,scale:1},transition:{type:"spring",stiffness:260,damping:24},className:"w-full",children:y.jsx("select",{id:e,value:n??"",onChange:m=>r(m.target.value),onFocus:d,onBlur:h,disabled:s,"aria-labelledby":t?p:void 0,"aria-label":t||e,title:t||e,className:`w-full border p-1 px-2 rounded bg-[var(--surface)] text-theme outline-none ${s?"opacity-60 cursor-not-allowed":""} ${o}`,children:i.map(m=>y.jsx("option",{value:m,children:m},m))})})]})};function nne(e,t=50){const[n,r]=D.useState({past:[],present:e,future:[]}),i=D.useRef(!1),s=D.useCallback(d=>{r(h=>{const p=typeof d=="function"?d(h.present):d;if(i.current)return i.current=!1,{...h,present:p};if(JSON.stringify(p)===JSON.stringify(h.present))return h;const m=[...h.past,h.present];return m.length>t&&m.shift(),{past:m,present:p,future:[]}})},[t]),o=D.useCallback(()=>{r(d=>{if(d.past.length===0)return d;const h=d.past[d.past.length-1],p=d.past.slice(0,-1);return i.current=!0,{past:p,present:h,future:[d.present,...d.future]}})},[]),l=D.useCallback(()=>{r(d=>{if(d.future.length===0)return d;const h=d.future[0],p=d.future.slice(1);return i.current=!0,{past:[...d.past,d.present],present:h,future:p}})},[]),u=D.useCallback(()=>{r({past:[],present:n.present,future:[]})},[n.present]);return{state:n.present,setState:s,undo:o,redo:l,canUndo:n.past.length>0,canRedo:n.future.length>0,clearHistory:u}}function En(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=En(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var rne={value:()=>{}};function Ym(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new rp(n)}function rp(e){this._=e}function ine(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}rp.prototype=Ym.prototype={constructor:rp,on:function(e,t){var n=this._,r=ine(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=sne(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=mR(n[i],e.name,t);else if(t==null)for(i in n)n[i]=mR(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new rp(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function sne(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function mR(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=rne,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var fC="http://www.w3.org/1999/xhtml";const gR={svg:"http://www.w3.org/2000/svg",xhtml:fC,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function Xm(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),gR.hasOwnProperty(t)?{space:gR[t],local:e}:e}function one(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===fC&&t.documentElement.namespaceURI===fC?t.createElement(e):t.createElementNS(n,e)}}function ane(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Bz(e){var t=Xm(e);return(t.local?ane:one)(t)}function lne(){}function t2(e){return e==null?lne:function(){return this.querySelector(e)}}function cne(e){typeof e!="function"&&(e=t2(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,l=r[i]=new Array(o),u,d,h=0;h<o;++h)(u=s[h])&&(d=e.call(u,u.__data__,h,s))&&("__data__"in u&&(d.__data__=u.__data__),l[h]=d);return new Gr(r,this._parents)}function une(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function dne(){return[]}function zz(e){return e==null?dne:function(){return this.querySelectorAll(e)}}function fne(e){return function(){return une(e.apply(this,arguments))}}function hne(e){typeof e=="function"?e=fne(e):e=zz(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],l=o.length,u,d=0;d<l;++d)(u=o[d])&&(r.push(e.call(u,u.__data__,d,o)),i.push(u));return new Gr(r,i)}function qz(e){return function(){return this.matches(e)}}function Vz(e){return function(t){return t.matches(e)}}var pne=Array.prototype.find;function mne(e){return function(){return pne.call(this.children,e)}}function gne(){return this.firstElementChild}function yne(e){return this.select(e==null?gne:mne(typeof e=="function"?e:Vz(e)))}var bne=Array.prototype.filter;function vne(){return Array.from(this.children)}function xne(e){return function(){return bne.call(this.children,e)}}function wne(e){return this.selectAll(e==null?vne:xne(typeof e=="function"?e:Vz(e)))}function Sne(e){typeof e!="function"&&(e=qz(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,l=r[i]=[],u,d=0;d<o;++d)(u=s[d])&&e.call(u,u.__data__,d,s)&&l.push(u);return new Gr(r,this._parents)}function Hz(e){return new Array(e.length)}function Ene(){return new Gr(this._enter||this._groups.map(Hz),this._parents)}function am(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}am.prototype={constructor:am,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Cne(e){return function(){return e}}function kne(e,t,n,r,i,s){for(var o=0,l,u=t.length,d=s.length;o<d;++o)(l=t[o])?(l.__data__=s[o],r[o]=l):n[o]=new am(e,s[o]);for(;o<u;++o)(l=t[o])&&(i[o]=l)}function Tne(e,t,n,r,i,s,o){var l,u,d=new Map,h=t.length,p=s.length,m=new Array(h),b;for(l=0;l<h;++l)(u=t[l])&&(m[l]=b=o.call(u,u.__data__,l,t)+"",d.has(b)?i[l]=u:d.set(b,u));for(l=0;l<p;++l)b=o.call(e,s[l],l,s)+"",(u=d.get(b))?(r[l]=u,u.__data__=s[l],d.delete(b)):n[l]=new am(e,s[l]);for(l=0;l<h;++l)(u=t[l])&&d.get(m[l])===u&&(i[l]=u)}function Nne(e){return e.__data__}function Ane(e,t){if(!arguments.length)return Array.from(this,Nne);var n=t?Tne:kne,r=this._parents,i=this._groups;typeof e!="function"&&(e=Cne(e));for(var s=i.length,o=new Array(s),l=new Array(s),u=new Array(s),d=0;d<s;++d){var h=r[d],p=i[d],m=p.length,b=Mne(e.call(h,h&&h.__data__,d,r)),x=b.length,S=l[d]=new Array(x),w=o[d]=new Array(x),C=u[d]=new Array(m);n(h,p,S,w,C,b,t);for(var N=0,k=0,T,A;N<x;++N)if(T=S[N]){for(N>=k&&(k=N+1);!(A=w[k])&&++k<x;);T._next=A||null}}return o=new Gr(o,r),o._enter=l,o._exit=u,o}function Mne(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function _ne(){return new Gr(this._exit||this._groups.map(Hz),this._parents)}function Dne(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function Rne(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),l=new Array(i),u=0;u<o;++u)for(var d=n[u],h=r[u],p=d.length,m=l[u]=new Array(p),b,x=0;x<p;++x)(b=d[x]||h[x])&&(m[x]=b);for(;u<i;++u)l[u]=n[u];return new Gr(l,this._parents)}function jne(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function One(e){e||(e=Lne);function t(p,m){return p&&m?e(p.__data__,m.__data__):!p-!m}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],l=o.length,u=i[s]=new Array(l),d,h=0;h<l;++h)(d=o[h])&&(u[h]=d);u.sort(t)}return new Gr(i,this._parents).order()}function Lne(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Pne(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Ine(){return Array.from(this)}function Bne(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function zne(){let e=0;for(const t of this)++e;return e}function qne(){return!this.node()}function Vne(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,l;s<o;++s)(l=i[s])&&e.call(l,l.__data__,s,i);return this}function Hne(e){return function(){this.removeAttribute(e)}}function Fne(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Une(e,t){return function(){this.setAttribute(e,t)}}function $ne(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Gne(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Wne(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Kne(e,t){var n=Xm(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Fne:Hne:typeof t=="function"?n.local?Wne:Gne:n.local?$ne:Une)(n,t))}function Fz(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Yne(e){return function(){this.style.removeProperty(e)}}function Xne(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Zne(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Jne(e,t,n){return arguments.length>1?this.each((t==null?Yne:typeof t=="function"?Zne:Xne)(e,t,n??"")):dc(this.node(),e)}function dc(e,t){return e.style.getPropertyValue(t)||Fz(e).getComputedStyle(e,null).getPropertyValue(t)}function Qne(e){return function(){delete this[e]}}function ere(e,t){return function(){this[e]=t}}function tre(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function nre(e,t){return arguments.length>1?this.each((t==null?Qne:typeof t=="function"?tre:ere)(e,t)):this.node()[e]}function Uz(e){return e.trim().split(/^|\s+/)}function n2(e){return e.classList||new $z(e)}function $z(e){this._node=e,this._names=Uz(e.getAttribute("class")||"")}$z.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Gz(e,t){for(var n=n2(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Wz(e,t){for(var n=n2(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function rre(e){return function(){Gz(this,e)}}function ire(e){return function(){Wz(this,e)}}function sre(e,t){return function(){(t.apply(this,arguments)?Gz:Wz)(this,e)}}function ore(e,t){var n=Uz(e+"");if(arguments.length<2){for(var r=n2(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?sre:t?rre:ire)(n,t))}function are(){this.textContent=""}function lre(e){return function(){this.textContent=e}}function cre(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function ure(e){return arguments.length?this.each(e==null?are:(typeof e=="function"?cre:lre)(e)):this.node().textContent}function dre(){this.innerHTML=""}function fre(e){return function(){this.innerHTML=e}}function hre(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function pre(e){return arguments.length?this.each(e==null?dre:(typeof e=="function"?hre:fre)(e)):this.node().innerHTML}function mre(){this.nextSibling&&this.parentNode.appendChild(this)}function gre(){return this.each(mre)}function yre(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function bre(){return this.each(yre)}function vre(e){var t=typeof e=="function"?e:Bz(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function xre(){return null}function wre(e,t){var n=typeof e=="function"?e:Bz(e),r=t==null?xre:typeof t=="function"?t:t2(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Sre(){var e=this.parentNode;e&&e.removeChild(this)}function Ere(){return this.each(Sre)}function Cre(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function kre(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Tre(e){return this.select(e?kre:Cre)}function Nre(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Are(e){return function(t){e.call(this,t,this.__data__)}}function Mre(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function _re(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function Dre(e,t,n){return function(){var r=this.__on,i,s=Are(t);if(r){for(var o=0,l=r.length;o<l;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function Rre(e,t,n){var r=Mre(e+""),i,s=r.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,d=l.length,h;u<d;++u)for(i=0,h=l[u];i<s;++i)if((o=r[i]).type===h.type&&o.name===h.name)return h.value}return}for(l=t?Dre:_re,i=0;i<s;++i)this.each(l(r[i],t,n));return this}function Kz(e,t,n){var r=Fz(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function jre(e,t){return function(){return Kz(this,e,t)}}function Ore(e,t){return function(){return Kz(this,e,t.apply(this,arguments))}}function Lre(e,t){return this.each((typeof t=="function"?Ore:jre)(e,t))}function*Pre(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var Yz=[null];function Gr(e,t){this._groups=e,this._parents=t}function Jd(){return new Gr([[document.documentElement]],Yz)}function Ire(){return this}Gr.prototype=Jd.prototype={constructor:Gr,select:cne,selectAll:hne,selectChild:yne,selectChildren:wne,filter:Sne,data:Ane,enter:Ene,exit:_ne,join:Dne,merge:Rne,selection:Ire,order:jne,sort:One,call:Pne,nodes:Ine,node:Bne,size:zne,empty:qne,each:Vne,attr:Kne,style:Jne,property:nre,classed:ore,text:ure,html:pre,raise:gre,lower:bre,append:vre,insert:wre,remove:Ere,clone:Tre,datum:Nre,on:Rre,dispatch:Lre,[Symbol.iterator]:Pre};function Ur(e){return typeof e=="string"?new Gr([[document.querySelector(e)]],[document.documentElement]):new Gr([[e]],Yz)}function Bre(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Ti(e,t){if(e=Bre(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const zre={passive:!1},Nd={capture:!0,passive:!1};function Tb(e){e.stopImmediatePropagation()}function ec(e){e.preventDefault(),e.stopImmediatePropagation()}function Xz(e){var t=e.document.documentElement,n=Ur(e).on("dragstart.drag",ec,Nd);"onselectstart"in t?n.on("selectstart.drag",ec,Nd):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Zz(e,t){var n=e.document.documentElement,r=Ur(e).on("dragstart.drag",null);t&&(r.on("click.drag",ec,Nd),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Oh=e=>()=>e;function hC(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:s,x:o,y:l,dx:u,dy:d,dispatch:h}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:h}})}hC.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function qre(e){return!e.ctrlKey&&!e.button}function Vre(){return this.parentNode}function Hre(e,t){return t??{x:e.x,y:e.y}}function Fre(){return navigator.maxTouchPoints||"ontouchstart"in this}function Jz(){var e=qre,t=Vre,n=Hre,r=Fre,i={},s=Ym("start","drag","end"),o=0,l,u,d,h,p=0;function m(T){T.on("mousedown.drag",b).filter(r).on("touchstart.drag",w).on("touchmove.drag",C,zre).on("touchend.drag touchcancel.drag",N).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function b(T,A){if(!(h||!e.call(this,T,A))){var M=k(this,t.call(this,T,A),T,A,"mouse");M&&(Ur(T.view).on("mousemove.drag",x,Nd).on("mouseup.drag",S,Nd),Xz(T.view),Tb(T),d=!1,l=T.clientX,u=T.clientY,M("start",T))}}function x(T){if(ec(T),!d){var A=T.clientX-l,M=T.clientY-u;d=A*A+M*M>p}i.mouse("drag",T)}function S(T){Ur(T.view).on("mousemove.drag mouseup.drag",null),Zz(T.view,d),ec(T),i.mouse("end",T)}function w(T,A){if(e.call(this,T,A)){var M=T.changedTouches,j=t.call(this,T,A),R=M.length,L,I;for(L=0;L<R;++L)(I=k(this,j,T,A,M[L].identifier,M[L]))&&(Tb(T),I("start",T,M[L]))}}function C(T){var A=T.changedTouches,M=A.length,j,R;for(j=0;j<M;++j)(R=i[A[j].identifier])&&(ec(T),R("drag",T,A[j]))}function N(T){var A=T.changedTouches,M=A.length,j,R;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),j=0;j<M;++j)(R=i[A[j].identifier])&&(Tb(T),R("end",T,A[j]))}function k(T,A,M,j,R,L){var I=s.copy(),H=Ti(L||M,A),q,W,z;if((z=n.call(T,new hC("beforestart",{sourceEvent:M,target:m,identifier:R,active:o,x:H[0],y:H[1],dx:0,dy:0,dispatch:I}),j))!=null)return q=z.x-H[0]||0,W=z.y-H[1]||0,function F(O,V,Y){var te=H,B;switch(O){case"start":i[R]=F,B=o++;break;case"end":delete i[R],--o;case"drag":H=Ti(Y||V,A),B=o;break}I.call(O,T,new hC(O,{sourceEvent:V,subject:z,target:m,identifier:R,active:B,x:H[0]+q,y:H[1]+W,dx:H[0]-te[0],dy:H[1]-te[1],dispatch:I}),j)}}return m.filter=function(T){return arguments.length?(e=typeof T=="function"?T:Oh(!!T),m):e},m.container=function(T){return arguments.length?(t=typeof T=="function"?T:Oh(T),m):t},m.subject=function(T){return arguments.length?(n=typeof T=="function"?T:Oh(T),m):n},m.touchable=function(T){return arguments.length?(r=typeof T=="function"?T:Oh(!!T),m):r},m.on=function(){var T=s.on.apply(s,arguments);return T===s?m:T},m.clickDistance=function(T){return arguments.length?(p=(T=+T)*T,m):Math.sqrt(p)},m}function r2(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Qz(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function Qd(){}var Ad=.7,lm=1/Ad,tc="\\s*([+-]?\\d+)\\s*",Md="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Qi="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Ure=/^#([0-9a-f]{3,8})$/,$re=new RegExp(`^rgb\\(${tc},${tc},${tc}\\)$`),Gre=new RegExp(`^rgb\\(${Qi},${Qi},${Qi}\\)$`),Wre=new RegExp(`^rgba\\(${tc},${tc},${tc},${Md}\\)$`),Kre=new RegExp(`^rgba\\(${Qi},${Qi},${Qi},${Md}\\)$`),Yre=new RegExp(`^hsl\\(${Md},${Qi},${Qi}\\)$`),Xre=new RegExp(`^hsla\\(${Md},${Qi},${Qi},${Md}\\)$`),yR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};r2(Qd,qa,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:bR,formatHex:bR,formatHex8:Zre,formatHsl:Jre,formatRgb:vR,toString:vR});function bR(){return this.rgb().formatHex()}function Zre(){return this.rgb().formatHex8()}function Jre(){return e8(this).formatHsl()}function vR(){return this.rgb().formatRgb()}function qa(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Ure.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?xR(t):n===3?new kr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Lh(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Lh(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=$re.exec(e))?new kr(t[1],t[2],t[3],1):(t=Gre.exec(e))?new kr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Wre.exec(e))?Lh(t[1],t[2],t[3],t[4]):(t=Kre.exec(e))?Lh(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Yre.exec(e))?ER(t[1],t[2]/100,t[3]/100,1):(t=Xre.exec(e))?ER(t[1],t[2]/100,t[3]/100,t[4]):yR.hasOwnProperty(e)?xR(yR[e]):e==="transparent"?new kr(NaN,NaN,NaN,0):null}function xR(e){return new kr(e>>16&255,e>>8&255,e&255,1)}function Lh(e,t,n,r){return r<=0&&(e=t=n=NaN),new kr(e,t,n,r)}function Qre(e){return e instanceof Qd||(e=qa(e)),e?(e=e.rgb(),new kr(e.r,e.g,e.b,e.opacity)):new kr}function pC(e,t,n,r){return arguments.length===1?Qre(e):new kr(e,t,n,r??1)}function kr(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}r2(kr,pC,Qz(Qd,{brighter(e){return e=e==null?lm:Math.pow(lm,e),new kr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ad:Math.pow(Ad,e),new kr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new kr(ja(this.r),ja(this.g),ja(this.b),cm(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:wR,formatHex:wR,formatHex8:eie,formatRgb:SR,toString:SR}));function wR(){return`#${Ca(this.r)}${Ca(this.g)}${Ca(this.b)}`}function eie(){return`#${Ca(this.r)}${Ca(this.g)}${Ca(this.b)}${Ca((isNaN(this.opacity)?1:this.opacity)*255)}`}function SR(){const e=cm(this.opacity);return`${e===1?"rgb(":"rgba("}${ja(this.r)}, ${ja(this.g)}, ${ja(this.b)}${e===1?")":`, ${e})`}`}function cm(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function ja(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ca(e){return e=ja(e),(e<16?"0":"")+e.toString(16)}function ER(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Ai(e,t,n,r)}function e8(e){if(e instanceof Ai)return new Ai(e.h,e.s,e.l,e.opacity);if(e instanceof Qd||(e=qa(e)),!e)return new Ai;if(e instanceof Ai)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,l=s-i,u=(s+i)/2;return l?(t===s?o=(n-r)/l+(n<r)*6:n===s?o=(r-t)/l+2:o=(t-n)/l+4,l/=u<.5?s+i:2-s-i,o*=60):l=u>0&&u<1?0:o,new Ai(o,l,u,e.opacity)}function tie(e,t,n,r){return arguments.length===1?e8(e):new Ai(e,t,n,r??1)}function Ai(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}r2(Ai,tie,Qz(Qd,{brighter(e){return e=e==null?lm:Math.pow(lm,e),new Ai(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ad:Math.pow(Ad,e),new Ai(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new kr(Nb(e>=240?e-240:e+120,i,r),Nb(e,i,r),Nb(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Ai(CR(this.h),Ph(this.s),Ph(this.l),cm(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=cm(this.opacity);return`${e===1?"hsl(":"hsla("}${CR(this.h)}, ${Ph(this.s)*100}%, ${Ph(this.l)*100}%${e===1?")":`, ${e})`}`}}));function CR(e){return e=(e||0)%360,e<0?e+360:e}function Ph(e){return Math.max(0,Math.min(1,e||0))}function Nb(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const i2=e=>()=>e;function nie(e,t){return function(n){return e+n*t}}function rie(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function iie(e){return(e=+e)==1?t8:function(t,n){return n-t?rie(t,n,e):i2(isNaN(t)?n:t)}}function t8(e,t){var n=t-e;return n?nie(e,n):i2(isNaN(e)?t:e)}const um=(function e(t){var n=iie(t);function r(i,s){var o=n((i=pC(i)).r,(s=pC(s)).r),l=n(i.g,s.g),u=n(i.b,s.b),d=t8(i.opacity,s.opacity);return function(h){return i.r=o(h),i.g=l(h),i.b=u(h),i.opacity=d(h),i+""}}return r.gamma=e,r})(1);function sie(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function oie(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function aie(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=od(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(l){for(o=0;o<r;++o)s[o]=i[o](l);return s}}function lie(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Ki(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function cie(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=od(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var mC=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Ab=new RegExp(mC.source,"g");function uie(e){return function(){return e}}function die(e){return function(t){return e(t)+""}}function n8(e,t){var n=mC.lastIndex=Ab.lastIndex=0,r,i,s,o=-1,l=[],u=[];for(e=e+"",t=t+"";(r=mC.exec(e))&&(i=Ab.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),l[o]?l[o]+=s:l[++o]=s),(r=r[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,u.push({i:o,x:Ki(r,i)})),n=Ab.lastIndex;return n<t.length&&(s=t.slice(n),l[o]?l[o]+=s:l[++o]=s),l.length<2?u[0]?die(u[0].x):uie(t):(t=u.length,function(d){for(var h=0,p;h<t;++h)l[(p=u[h]).i]=p.x(d);return l.join("")})}function od(e,t){var n=typeof t,r;return t==null||n==="boolean"?i2(t):(n==="number"?Ki:n==="string"?(r=qa(t))?(t=r,um):n8:t instanceof qa?um:t instanceof Date?lie:oie(t)?sie:Array.isArray(t)?aie:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?cie:Ki)(e,t)}var kR=180/Math.PI,gC={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function r8(e,t,n,r,i,s){var o,l,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,u/=l),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*kR,skewX:Math.atan(u)*kR,scaleX:o,scaleY:l}}var Ih;function fie(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?gC:r8(t.a,t.b,t.c,t.d,t.e,t.f)}function hie(e){return e==null||(Ih||(Ih=document.createElementNS("http://www.w3.org/2000/svg","g")),Ih.setAttribute("transform",e),!(e=Ih.transform.baseVal.consolidate()))?gC:(e=e.matrix,r8(e.a,e.b,e.c,e.d,e.e,e.f))}function i8(e,t,n,r){function i(d){return d.length?d.pop()+" ":""}function s(d,h,p,m,b,x){if(d!==p||h!==m){var S=b.push("translate(",null,t,null,n);x.push({i:S-4,x:Ki(d,p)},{i:S-2,x:Ki(h,m)})}else(p||m)&&b.push("translate("+p+t+m+n)}function o(d,h,p,m){d!==h?(d-h>180?h+=360:h-d>180&&(d+=360),m.push({i:p.push(i(p)+"rotate(",null,r)-2,x:Ki(d,h)})):h&&p.push(i(p)+"rotate("+h+r)}function l(d,h,p,m){d!==h?m.push({i:p.push(i(p)+"skewX(",null,r)-2,x:Ki(d,h)}):h&&p.push(i(p)+"skewX("+h+r)}function u(d,h,p,m,b,x){if(d!==p||h!==m){var S=b.push(i(b)+"scale(",null,",",null,")");x.push({i:S-4,x:Ki(d,p)},{i:S-2,x:Ki(h,m)})}else(p!==1||m!==1)&&b.push(i(b)+"scale("+p+","+m+")")}return function(d,h){var p=[],m=[];return d=e(d),h=e(h),s(d.translateX,d.translateY,h.translateX,h.translateY,p,m),o(d.rotate,h.rotate,p,m),l(d.skewX,h.skewX,p,m),u(d.scaleX,d.scaleY,h.scaleX,h.scaleY,p,m),d=h=null,function(b){for(var x=-1,S=m.length,w;++x<S;)p[(w=m[x]).i]=w.x(b);return p.join("")}}}var pie=i8(fie,"px, ","px)","deg)"),mie=i8(hie,", ",")",")"),gie=1e-12;function TR(e){return((e=Math.exp(e))+1/e)/2}function yie(e){return((e=Math.exp(e))-1/e)/2}function bie(e){return((e=Math.exp(2*e))-1)/(e+1)}const ip=(function e(t,n,r){function i(s,o){var l=s[0],u=s[1],d=s[2],h=o[0],p=o[1],m=o[2],b=h-l,x=p-u,S=b*b+x*x,w,C;if(S<gie)C=Math.log(m/d)/t,w=function(j){return[l+j*b,u+j*x,d*Math.exp(t*j*C)]};else{var N=Math.sqrt(S),k=(m*m-d*d+r*S)/(2*d*n*N),T=(m*m-d*d-r*S)/(2*m*n*N),A=Math.log(Math.sqrt(k*k+1)-k),M=Math.log(Math.sqrt(T*T+1)-T);C=(M-A)/t,w=function(j){var R=j*C,L=TR(A),I=d/(n*N)*(L*bie(t*R+A)-yie(A));return[l+I*b,u+I*x,d*L/TR(t*R+A)]}}return w.duration=C*1e3*t/Math.SQRT2,w}return i.rho=function(s){var o=Math.max(.001,+s),l=o*o,u=l*l;return e(o,l,u)},i})(Math.SQRT2,2,4);var fc=0,zu=0,ku=0,s8=1e3,dm,qu,fm=0,Va=0,Zm=0,_d=typeof performance=="object"&&performance.now?performance:Date,o8=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function s2(){return Va||(o8(vie),Va=_d.now()+Zm)}function vie(){Va=0}function hm(){this._call=this._time=this._next=null}hm.prototype=a8.prototype={constructor:hm,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?s2():+n)+(t==null?0:+t),!this._next&&qu!==this&&(qu?qu._next=this:dm=this,qu=this),this._call=e,this._time=n,yC()},stop:function(){this._call&&(this._call=null,this._time=1/0,yC())}};function a8(e,t,n){var r=new hm;return r.restart(e,t,n),r}function xie(){s2(),++fc;for(var e=dm,t;e;)(t=Va-e._time)>=0&&e._call.call(void 0,t),e=e._next;--fc}function NR(){Va=(fm=_d.now())+Zm,fc=zu=0;try{xie()}finally{fc=0,Sie(),Va=0}}function wie(){var e=_d.now(),t=e-fm;t>s8&&(Zm-=t,fm=e)}function Sie(){for(var e,t=dm,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:dm=n);qu=e,yC(r)}function yC(e){if(!fc){zu&&(zu=clearTimeout(zu));var t=e-Va;t>24?(e<1/0&&(zu=setTimeout(NR,e-_d.now()-Zm)),ku&&(ku=clearInterval(ku))):(ku||(fm=_d.now(),ku=setInterval(wie,s8)),fc=1,o8(NR))}}function AR(e,t,n){var r=new hm;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Eie=Ym("start","end","cancel","interrupt"),Cie=[],l8=0,MR=1,bC=2,sp=3,_R=4,vC=5,op=6;function Jm(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;kie(e,n,{name:t,index:r,group:i,on:Eie,tween:Cie,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:l8})}function o2(e,t){var n=Ri(e,t);if(n.state>l8)throw new Error("too late; already scheduled");return n}function rs(e,t){var n=Ri(e,t);if(n.state>sp)throw new Error("too late; already running");return n}function Ri(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function kie(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=a8(s,0,n.time);function s(d){n.state=MR,n.timer.restart(o,n.delay,n.time),n.delay<=d&&o(d-n.delay)}function o(d){var h,p,m,b;if(n.state!==MR)return u();for(h in r)if(b=r[h],b.name===n.name){if(b.state===sp)return AR(o);b.state===_R?(b.state=op,b.timer.stop(),b.on.call("interrupt",e,e.__data__,b.index,b.group),delete r[h]):+h<t&&(b.state=op,b.timer.stop(),b.on.call("cancel",e,e.__data__,b.index,b.group),delete r[h])}if(AR(function(){n.state===sp&&(n.state=_R,n.timer.restart(l,n.delay,n.time),l(d))}),n.state=bC,n.on.call("start",e,e.__data__,n.index,n.group),n.state===bC){for(n.state=sp,i=new Array(m=n.tween.length),h=0,p=-1;h<m;++h)(b=n.tween[h].value.call(e,e.__data__,n.index,n.group))&&(i[++p]=b);i.length=p+1}}function l(d){for(var h=d<n.duration?n.ease.call(null,d/n.duration):(n.timer.restart(u),n.state=vC,1),p=-1,m=i.length;++p<m;)i[p].call(e,h);n.state===vC&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=op,n.timer.stop(),delete r[t];for(var d in r)return;delete e.__transition}}function ap(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>bC&&r.state<vC,r.state=op,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function Tie(e){return this.each(function(){ap(this,e)})}function Nie(e,t){var n,r;return function(){var i=rs(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,l=r.length;o<l;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Aie(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=rs(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var l={name:t,value:n},u=0,d=i.length;u<d;++u)if(i[u].name===t){i[u]=l;break}u===d&&i.push(l)}s.tween=i}}function Mie(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Ri(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?Nie:Aie)(n,e,t))}function a2(e,t,n){var r=e._id;return e.each(function(){var i=rs(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Ri(i,r).value[t]}}function c8(e,t){var n;return(typeof t=="number"?Ki:t instanceof qa?um:(n=qa(t))?(t=n,um):n8)(e,t)}function _ie(e){return function(){this.removeAttribute(e)}}function Die(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Rie(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function jie(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function Oie(e,t,n){var r,i,s;return function(){var o,l=n(this),u;return l==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=l+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,l)))}}function Lie(e,t,n){var r,i,s;return function(){var o,l=n(this),u;return l==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=l+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,l)))}}function Pie(e,t){var n=Xm(e),r=n==="transform"?mie:c8;return this.attrTween(e,typeof t=="function"?(n.local?Lie:Oie)(n,r,a2(this,"attr."+e,t)):t==null?(n.local?Die:_ie)(n):(n.local?jie:Rie)(n,r,t))}function Iie(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Bie(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function zie(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Bie(e,s)),n}return i._value=t,i}function qie(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Iie(e,s)),n}return i._value=t,i}function Vie(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=Xm(e);return this.tween(n,(r.local?zie:qie)(r,t))}function Hie(e,t){return function(){o2(this,e).delay=+t.apply(this,arguments)}}function Fie(e,t){return t=+t,function(){o2(this,e).delay=t}}function Uie(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Hie:Fie)(t,e)):Ri(this.node(),t).delay}function $ie(e,t){return function(){rs(this,e).duration=+t.apply(this,arguments)}}function Gie(e,t){return t=+t,function(){rs(this,e).duration=t}}function Wie(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?$ie:Gie)(t,e)):Ri(this.node(),t).duration}function Kie(e,t){if(typeof t!="function")throw new Error;return function(){rs(this,e).ease=t}}function Yie(e){var t=this._id;return arguments.length?this.each(Kie(t,e)):Ri(this.node(),t).ease}function Xie(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;rs(this,e).ease=n}}function Zie(e){if(typeof e!="function")throw new Error;return this.each(Xie(this._id,e))}function Jie(e){typeof e!="function"&&(e=qz(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,l=r[i]=[],u,d=0;d<o;++d)(u=s[d])&&e.call(u,u.__data__,d,s)&&l.push(u);return new Bs(r,this._parents,this._name,this._id)}function Qie(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),l=0;l<s;++l)for(var u=t[l],d=n[l],h=u.length,p=o[l]=new Array(h),m,b=0;b<h;++b)(m=u[b]||d[b])&&(p[b]=m);for(;l<r;++l)o[l]=t[l];return new Bs(o,this._parents,this._name,this._id)}function ese(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function tse(e,t,n){var r,i,s=ese(t)?o2:rs;return function(){var o=s(this,e),l=o.on;l!==r&&(i=(r=l).copy()).on(t,n),o.on=i}}function nse(e,t){var n=this._id;return arguments.length<2?Ri(this.node(),n).on.on(e):this.each(tse(n,e,t))}function rse(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function ise(){return this.on("end.remove",rse(this._id))}function sse(e){var t=this._name,n=this._id;typeof e!="function"&&(e=t2(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var l=r[o],u=l.length,d=s[o]=new Array(u),h,p,m=0;m<u;++m)(h=l[m])&&(p=e.call(h,h.__data__,m,l))&&("__data__"in h&&(p.__data__=h.__data__),d[m]=p,Jm(d[m],t,n,m,d,Ri(h,n)));return new Bs(s,this._parents,t,n)}function ose(e){var t=this._name,n=this._id;typeof e!="function"&&(e=zz(e));for(var r=this._groups,i=r.length,s=[],o=[],l=0;l<i;++l)for(var u=r[l],d=u.length,h,p=0;p<d;++p)if(h=u[p]){for(var m=e.call(h,h.__data__,p,u),b,x=Ri(h,n),S=0,w=m.length;S<w;++S)(b=m[S])&&Jm(b,t,n,S,m,x);s.push(m),o.push(h)}return new Bs(s,o,t,n)}var ase=Jd.prototype.constructor;function lse(){return new ase(this._groups,this._parents)}function cse(e,t){var n,r,i;return function(){var s=dc(this,e),o=(this.style.removeProperty(e),dc(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function u8(e){return function(){this.style.removeProperty(e)}}function use(e,t,n){var r,i=n+"",s;return function(){var o=dc(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function dse(e,t,n){var r,i,s;return function(){var o=dc(this,e),l=n(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(e),dc(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,l))}}function fse(e,t){var n,r,i,s="style."+t,o="end."+s,l;return function(){var u=rs(this,e),d=u.on,h=u.value[s]==null?l||(l=u8(t)):void 0;(d!==n||i!==h)&&(r=(n=d).copy()).on(o,i=h),u.on=r}}function hse(e,t,n){var r=(e+="")=="transform"?pie:c8;return t==null?this.styleTween(e,cse(e,r)).on("end.style."+e,u8(e)):typeof t=="function"?this.styleTween(e,dse(e,r,a2(this,"style."+e,t))).each(fse(this._id,e)):this.styleTween(e,use(e,r,t),n).on("end.style."+e,null)}function pse(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function mse(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&pse(e,o,n)),r}return s._value=t,s}function gse(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,mse(e,t,n??""))}function yse(e){return function(){this.textContent=e}}function bse(e){return function(){var t=e(this);this.textContent=t??""}}function vse(e){return this.tween("text",typeof e=="function"?bse(a2(this,"text",e)):yse(e==null?"":e+""))}function xse(e){return function(t){this.textContent=e.call(this,t)}}function wse(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&xse(i)),t}return r._value=e,r}function Sse(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,wse(e))}function Ese(){for(var e=this._name,t=this._id,n=d8(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],l=o.length,u,d=0;d<l;++d)if(u=o[d]){var h=Ri(u,t);Jm(u,e,n,d,o,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new Bs(r,this._parents,e,n)}function Cse(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var l={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var d=rs(this,r),h=d.on;h!==e&&(t=(e=h).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(u)),d.on=t}),i===0&&s()})}var kse=0;function Bs(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function d8(){return++kse}var Ns=Jd.prototype;Bs.prototype={constructor:Bs,select:sse,selectAll:ose,selectChild:Ns.selectChild,selectChildren:Ns.selectChildren,filter:Jie,merge:Qie,selection:lse,transition:Ese,call:Ns.call,nodes:Ns.nodes,node:Ns.node,size:Ns.size,empty:Ns.empty,each:Ns.each,on:nse,attr:Pie,attrTween:Vie,style:hse,styleTween:gse,text:vse,textTween:Sse,remove:ise,tween:Mie,delay:Uie,duration:Wie,ease:Yie,easeVarying:Zie,end:Cse,[Symbol.iterator]:Ns[Symbol.iterator]};function Tse(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Nse={time:null,delay:0,duration:250,ease:Tse};function Ase(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function Mse(e){var t,n;e instanceof Bs?(t=e._id,e=e._name):(t=d8(),(n=Nse).time=s2(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],l=o.length,u,d=0;d<l;++d)(u=o[d])&&Jm(u,e,t,d,o,n||Ase(u,t));return new Bs(r,this._parents,e,t)}Jd.prototype.interrupt=Tie;Jd.prototype.transition=Mse;const Bh=e=>()=>e;function _se(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Rs(e,t,n){this.k=e,this.x=t,this.y=n}Rs.prototype={constructor:Rs,scale:function(e){return e===1?this:new Rs(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Rs(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var Qm=new Rs(1,0,0);f8.prototype=Rs.prototype;function f8(e){for(;!e.__zoom;)if(!(e=e.parentNode))return Qm;return e.__zoom}function Mb(e){e.stopImmediatePropagation()}function Tu(e){e.preventDefault(),e.stopImmediatePropagation()}function Dse(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Rse(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function DR(){return this.__zoom||Qm}function jse(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Ose(){return navigator.maxTouchPoints||"ontouchstart"in this}function Lse(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function h8(){var e=Dse,t=Rse,n=Lse,r=jse,i=Ose,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,u=ip,d=Ym("start","zoom","end"),h,p,m,b=500,x=150,S=0,w=10;function C(z){z.property("__zoom",DR).on("wheel.zoom",R,{passive:!1}).on("mousedown.zoom",L).on("dblclick.zoom",I).filter(i).on("touchstart.zoom",H).on("touchmove.zoom",q).on("touchend.zoom touchcancel.zoom",W).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}C.transform=function(z,F,O,V){var Y=z.selection?z.selection():z;Y.property("__zoom",DR),z!==Y?A(z,F,O,V):Y.interrupt().each(function(){M(this,arguments).event(V).start().zoom(null,typeof F=="function"?F.apply(this,arguments):F).end()})},C.scaleBy=function(z,F,O,V){C.scaleTo(z,function(){var Y=this.__zoom.k,te=typeof F=="function"?F.apply(this,arguments):F;return Y*te},O,V)},C.scaleTo=function(z,F,O,V){C.transform(z,function(){var Y=t.apply(this,arguments),te=this.__zoom,B=O==null?T(Y):typeof O=="function"?O.apply(this,arguments):O,$=te.invert(B),oe=typeof F=="function"?F.apply(this,arguments):F;return n(k(N(te,oe),B,$),Y,o)},O,V)},C.translateBy=function(z,F,O,V){C.transform(z,function(){return n(this.__zoom.translate(typeof F=="function"?F.apply(this,arguments):F,typeof O=="function"?O.apply(this,arguments):O),t.apply(this,arguments),o)},null,V)},C.translateTo=function(z,F,O,V,Y){C.transform(z,function(){var te=t.apply(this,arguments),B=this.__zoom,$=V==null?T(te):typeof V=="function"?V.apply(this,arguments):V;return n(Qm.translate($[0],$[1]).scale(B.k).translate(typeof F=="function"?-F.apply(this,arguments):-F,typeof O=="function"?-O.apply(this,arguments):-O),te,o)},V,Y)};function N(z,F){return F=Math.max(s[0],Math.min(s[1],F)),F===z.k?z:new Rs(F,z.x,z.y)}function k(z,F,O){var V=F[0]-O[0]*z.k,Y=F[1]-O[1]*z.k;return V===z.x&&Y===z.y?z:new Rs(z.k,V,Y)}function T(z){return[(+z[0][0]+ +z[1][0])/2,(+z[0][1]+ +z[1][1])/2]}function A(z,F,O,V){z.on("start.zoom",function(){M(this,arguments).event(V).start()}).on("interrupt.zoom end.zoom",function(){M(this,arguments).event(V).end()}).tween("zoom",function(){var Y=this,te=arguments,B=M(Y,te).event(V),$=t.apply(Y,te),oe=O==null?T($):typeof O=="function"?O.apply(Y,te):O,ae=Math.max($[1][0]-$[0][0],$[1][1]-$[0][1]),U=Y.__zoom,Z=typeof F=="function"?F.apply(Y,te):F,ee=u(U.invert(oe).concat(ae/U.k),Z.invert(oe).concat(ae/Z.k));return function(de){if(de===1)de=Z;else{var ce=ee(de),ve=ae/ce[2];de=new Rs(ve,oe[0]-ce[0]*ve,oe[1]-ce[1]*ve)}B.zoom(null,de)}})}function M(z,F,O){return!O&&z.__zooming||new j(z,F)}function j(z,F){this.that=z,this.args=F,this.active=0,this.sourceEvent=null,this.extent=t.apply(z,F),this.taps=0}j.prototype={event:function(z){return z&&(this.sourceEvent=z),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(z,F){return this.mouse&&z!=="mouse"&&(this.mouse[1]=F.invert(this.mouse[0])),this.touch0&&z!=="touch"&&(this.touch0[1]=F.invert(this.touch0[0])),this.touch1&&z!=="touch"&&(this.touch1[1]=F.invert(this.touch1[0])),this.that.__zoom=F,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(z){var F=Ur(this.that).datum();d.call(z,this.that,new _se(z,{sourceEvent:this.sourceEvent,target:C,transform:this.that.__zoom,dispatch:d}),F)}};function R(z,...F){if(!e.apply(this,arguments))return;var O=M(this,F).event(z),V=this.__zoom,Y=Math.max(s[0],Math.min(s[1],V.k*Math.pow(2,r.apply(this,arguments)))),te=Ti(z);if(O.wheel)(O.mouse[0][0]!==te[0]||O.mouse[0][1]!==te[1])&&(O.mouse[1]=V.invert(O.mouse[0]=te)),clearTimeout(O.wheel);else{if(V.k===Y)return;O.mouse=[te,V.invert(te)],ap(this),O.start()}Tu(z),O.wheel=setTimeout(B,x),O.zoom("mouse",n(k(N(V,Y),O.mouse[0],O.mouse[1]),O.extent,o));function B(){O.wheel=null,O.end()}}function L(z,...F){if(m||!e.apply(this,arguments))return;var O=z.currentTarget,V=M(this,F,!0).event(z),Y=Ur(z.view).on("mousemove.zoom",oe,!0).on("mouseup.zoom",ae,!0),te=Ti(z,O),B=z.clientX,$=z.clientY;Xz(z.view),Mb(z),V.mouse=[te,this.__zoom.invert(te)],ap(this),V.start();function oe(U){if(Tu(U),!V.moved){var Z=U.clientX-B,ee=U.clientY-$;V.moved=Z*Z+ee*ee>S}V.event(U).zoom("mouse",n(k(V.that.__zoom,V.mouse[0]=Ti(U,O),V.mouse[1]),V.extent,o))}function ae(U){Y.on("mousemove.zoom mouseup.zoom",null),Zz(U.view,V.moved),Tu(U),V.event(U).end()}}function I(z,...F){if(e.apply(this,arguments)){var O=this.__zoom,V=Ti(z.changedTouches?z.changedTouches[0]:z,this),Y=O.invert(V),te=O.k*(z.shiftKey?.5:2),B=n(k(N(O,te),V,Y),t.apply(this,F),o);Tu(z),l>0?Ur(this).transition().duration(l).call(A,B,V,z):Ur(this).call(C.transform,B,V,z)}}function H(z,...F){if(e.apply(this,arguments)){var O=z.touches,V=O.length,Y=M(this,F,z.changedTouches.length===V).event(z),te,B,$,oe;for(Mb(z),B=0;B<V;++B)$=O[B],oe=Ti($,this),oe=[oe,this.__zoom.invert(oe),$.identifier],Y.touch0?!Y.touch1&&Y.touch0[2]!==oe[2]&&(Y.touch1=oe,Y.taps=0):(Y.touch0=oe,te=!0,Y.taps=1+!!h);h&&(h=clearTimeout(h)),te&&(Y.taps<2&&(p=oe[0],h=setTimeout(function(){h=null},b)),ap(this),Y.start())}}function q(z,...F){if(this.__zooming){var O=M(this,F).event(z),V=z.changedTouches,Y=V.length,te,B,$,oe;for(Tu(z),te=0;te<Y;++te)B=V[te],$=Ti(B,this),O.touch0&&O.touch0[2]===B.identifier?O.touch0[0]=$:O.touch1&&O.touch1[2]===B.identifier&&(O.touch1[0]=$);if(B=O.that.__zoom,O.touch1){var ae=O.touch0[0],U=O.touch0[1],Z=O.touch1[0],ee=O.touch1[1],de=(de=Z[0]-ae[0])*de+(de=Z[1]-ae[1])*de,ce=(ce=ee[0]-U[0])*ce+(ce=ee[1]-U[1])*ce;B=N(B,Math.sqrt(de/ce)),$=[(ae[0]+Z[0])/2,(ae[1]+Z[1])/2],oe=[(U[0]+ee[0])/2,(U[1]+ee[1])/2]}else if(O.touch0)$=O.touch0[0],oe=O.touch0[1];else return;O.zoom("touch",n(k(B,$,oe),O.extent,o))}}function W(z,...F){if(this.__zooming){var O=M(this,F).event(z),V=z.changedTouches,Y=V.length,te,B;for(Mb(z),m&&clearTimeout(m),m=setTimeout(function(){m=null},b),te=0;te<Y;++te)B=V[te],O.touch0&&O.touch0[2]===B.identifier?delete O.touch0:O.touch1&&O.touch1[2]===B.identifier&&delete O.touch1;if(O.touch1&&!O.touch0&&(O.touch0=O.touch1,delete O.touch1),O.touch0)O.touch0[1]=this.__zoom.invert(O.touch0[0]);else if(O.end(),O.taps===2&&(B=Ti(B,this),Math.hypot(p[0]-B[0],p[1]-B[1])<w)){var $=Ur(this).on("dblclick.zoom");$&&$.apply(this,arguments)}}}return C.wheelDelta=function(z){return arguments.length?(r=typeof z=="function"?z:Bh(+z),C):r},C.filter=function(z){return arguments.length?(e=typeof z=="function"?z:Bh(!!z),C):e},C.touchable=function(z){return arguments.length?(i=typeof z=="function"?z:Bh(!!z),C):i},C.extent=function(z){return arguments.length?(t=typeof z=="function"?z:Bh([[+z[0][0],+z[0][1]],[+z[1][0],+z[1][1]]]),C):t},C.scaleExtent=function(z){return arguments.length?(s[0]=+z[0],s[1]=+z[1],C):[s[0],s[1]]},C.translateExtent=function(z){return arguments.length?(o[0][0]=+z[0][0],o[1][0]=+z[1][0],o[0][1]=+z[0][1],o[1][1]=+z[1][1],C):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},C.constrain=function(z){return arguments.length?(n=z,C):n},C.duration=function(z){return arguments.length?(l=+z,C):l},C.interpolate=function(z){return arguments.length?(u=z,C):u},C.on=function(){var z=d.on.apply(d,arguments);return z===d?C:z},C.clickDistance=function(z){return arguments.length?(S=(z=+z)*z,C):Math.sqrt(S)},C.tapDistance=function(z){return arguments.length?(w=+z,C):w},C}const ns={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Dd=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],p8=["Enter"," ","Escape"],m8={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Ha;(function(e){e.Strict="strict",e.Loose="loose"})(Ha||(Ha={}));var Oa;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Oa||(Oa={}));var Rd;(function(e){e.Partial="partial",e.Full="full"})(Rd||(Rd={}));const g8={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Ao;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Ao||(Ao={}));var pm;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(pm||(pm={}));var _e;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(_e||(_e={}));const RR={[_e.Left]:_e.Right,[_e.Right]:_e.Left,[_e.Top]:_e.Bottom,[_e.Bottom]:_e.Top};function y8(e){return e===null?null:e?"valid":"invalid"}const b8=e=>"id"in e&&"source"in e&&"target"in e,Pse=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),l2=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),ef=(e,t=[0,0])=>{const{width:n,height:r}=qs(e),i=e.origin??t,s=n*i[0],o=r*i[1];return{x:e.position.x-s,y:e.position.y-o}},v8=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const s=typeof i=="string";let o=!t.nodeLookup&&!s?i:void 0;t.nodeLookup&&(o=s?t.nodeLookup.get(i):l2(i)?i:t.nodeLookup.get(i.id));const l=o?mm(o,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return eg(r,l)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return tg(n)},tf=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(r=>{if(t.filter===void 0||t.filter(r)){const i=mm(r);n=eg(n,i)}}),tg(n)},c2=(e,t,[n,r,i]=[0,0,1],s=!1,o=!1)=>{const l={...rf(t,[n,r,i]),width:t.width/i,height:t.height/i},u=[];for(const d of e.values()){const{measured:h,selectable:p=!0,hidden:m=!1}=d;if(o&&!p||m)continue;const b=h.width??d.width??d.initialWidth??null,x=h.height??d.height??d.initialHeight??null,S=jd(l,pc(d)),w=(b??0)*(x??0),C=s&&S>0;(!d.internals.handleBounds||C||S>=w||d.dragging)&&u.push(d)}return u},Ise=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function Bse(e,t){const n=new Map,r=t?.nodes?new Set(t.nodes.map(i=>i.id)):null;return e.forEach(i=>{i.measured.width&&i.measured.height&&(t?.includeHiddenNodes||!i.hidden)&&(!r||r.has(i.id))&&n.set(i.id,i)}),n}async function zse({nodes:e,width:t,height:n,panZoom:r,minZoom:i,maxZoom:s},o){if(e.size===0)return Promise.resolve(!0);const l=Bse(e,o),u=tf(l),d=ng(u,t,n,o?.minZoom??i,o?.maxZoom??s,o?.padding??.1);return await r.setViewport(d,{duration:o?.duration,ease:o?.ease,interpolate:o?.interpolate}),Promise.resolve(!0)}function x8({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:s}){const o=n.get(e),l=o.parentId?n.get(o.parentId):void 0,{x:u,y:d}=l?l.internals.positionAbsolute:{x:0,y:0},h=o.origin??r;let p=o.extent||i;if(o.extent==="parent"&&!o.expandParent)if(!l)s?.("005",ns.error005());else{const b=l.measured.width,x=l.measured.height;b&&x&&(p=[[u,d],[u+b,d+x]])}else l&&mc(o.extent)&&(p=[[o.extent[0][0]+u,o.extent[0][1]+d],[o.extent[1][0]+u,o.extent[1][1]+d]]);const m=mc(p)?Fa(t,p,o.measured):t;return(o.measured.width===void 0||o.measured.height===void 0)&&s?.("015",ns.error015()),{position:{x:m.x-u+(o.measured.width??0)*h[0],y:m.y-d+(o.measured.height??0)*h[1]},positionAbsolute:m}}async function qse({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:i}){const s=new Set(e.map(m=>m.id)),o=[];for(const m of n){if(m.deletable===!1)continue;const b=s.has(m.id),x=!b&&m.parentId&&o.find(S=>S.id===m.parentId);(b||x)&&o.push(m)}const l=new Set(t.map(m=>m.id)),u=r.filter(m=>m.deletable!==!1),h=Ise(o,u);for(const m of u)l.has(m.id)&&!h.find(x=>x.id===m.id)&&h.push(m);if(!i)return{edges:h,nodes:o};const p=await i({nodes:o,edges:h});return typeof p=="boolean"?p?{edges:h,nodes:o}:{edges:[],nodes:[]}:p}const hc=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Fa=(e={x:0,y:0},t,n)=>({x:hc(e.x,t[0][0],t[1][0]-(n?.width??0)),y:hc(e.y,t[0][1],t[1][1]-(n?.height??0))});function w8(e,t,n){const{width:r,height:i}=qs(n),{x:s,y:o}=n.internals.positionAbsolute;return Fa(e,[[s,o],[s+r,o+i]],t)}const jR=(e,t,n)=>e<t?hc(Math.abs(e-t),1,t)/t:e>n?-hc(Math.abs(e-n),1,t)/t:0,S8=(e,t,n=15,r=40)=>{const i=jR(e.x,r,t.width-r)*n,s=jR(e.y,r,t.height-r)*n;return[i,s]},eg=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),xC=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),tg=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),pc=(e,t=[0,0])=>{const{x:n,y:r}=l2(e)?e.internals.positionAbsolute:ef(e,t);return{x:n,y:r,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},mm=(e,t=[0,0])=>{const{x:n,y:r}=l2(e)?e.internals.positionAbsolute:ef(e,t);return{x:n,y:r,x2:n+(e.measured?.width??e.width??e.initialWidth??0),y2:r+(e.measured?.height??e.height??e.initialHeight??0)}},E8=(e,t)=>tg(eg(xC(e),xC(t))),jd=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},OR=e=>_i(e.width)&&_i(e.height)&&_i(e.x)&&_i(e.y),_i=e=>!isNaN(e)&&isFinite(e),Vse=(e,t)=>{},nf=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),rf=({x:e,y:t},[n,r,i],s=!1,o=[1,1])=>{const l={x:(e-n)/i,y:(t-r)/i};return s?nf(l,o):l},gm=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r});function Pl(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function Hse(e,t,n){if(typeof e=="string"||typeof e=="number"){const r=Pl(e,n),i=Pl(e,t);return{top:r,right:i,bottom:r,left:i,x:i*2,y:r*2}}if(typeof e=="object"){const r=Pl(e.top??e.y??0,n),i=Pl(e.bottom??e.y??0,n),s=Pl(e.left??e.x??0,t),o=Pl(e.right??e.x??0,t);return{top:r,right:o,bottom:i,left:s,x:s+o,y:r+i}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function Fse(e,t,n,r,i,s){const{x:o,y:l}=gm(e,[t,n,r]),{x:u,y:d}=gm({x:e.x+e.width,y:e.y+e.height},[t,n,r]),h=i-u,p=s-d;return{left:Math.floor(o),top:Math.floor(l),right:Math.floor(h),bottom:Math.floor(p)}}const ng=(e,t,n,r,i,s)=>{const o=Hse(s,t,n),l=(t-o.x)/e.width,u=(n-o.y)/e.height,d=Math.min(l,u),h=hc(d,r,i),p=e.x+e.width/2,m=e.y+e.height/2,b=t/2-p*h,x=n/2-m*h,S=Fse(e,b,x,h,t,n),w={left:Math.min(S.left-o.left,0),top:Math.min(S.top-o.top,0),right:Math.min(S.right-o.right,0),bottom:Math.min(S.bottom-o.bottom,0)};return{x:b-w.left+w.right,y:x-w.top+w.bottom,zoom:h}},Od=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function mc(e){return e!=null&&e!=="parent"}function qs(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function C8(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function k8(e,t={width:0,height:0},n,r,i){const s={...e},o=r.get(n);if(o){const l=o.origin||i;s.x+=o.internals.positionAbsolute.x-(t.width??0)*l[0],s.y+=o.internals.positionAbsolute.y-(t.height??0)*l[1]}return s}function LR(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function Use(){let e,t;return{promise:new Promise((r,i)=>{e=r,t=i}),resolve:e,reject:t}}function $se(e){return{...m8,...e||{}}}function ad(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){const{x:s,y:o}=Xi(e),l=rf({x:s-(i?.left??0),y:o-(i?.top??0)},r),{x:u,y:d}=n?nf(l,t):l;return{xSnapped:u,ySnapped:d,...l}}const u2=e=>({width:e.offsetWidth,height:e.offsetHeight}),T8=e=>e?.getRootNode?.()||window?.document,Gse=["INPUT","SELECT","TEXTAREA"];function N8(e){const t=e.composedPath?.()?.[0]||e.target;return t?.nodeType!==1?!1:Gse.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const A8=e=>"clientX"in e,Xi=(e,t)=>{const n=A8(e),r=n?e.clientX:e.touches?.[0].clientX,i=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:i-(t?.top??0)}},PR=(e,t,n,r,i)=>{const s=t.querySelectorAll(`.${e}`);return!s||!s.length?null:Array.from(s).map(o=>{const l=o.getBoundingClientRect();return{id:o.getAttribute("data-handleid"),type:e,nodeId:i,position:o.getAttribute("data-handlepos"),x:(l.left-n.left)/r,y:(l.top-n.top)/r,...u2(o)}})};function M8({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:s,targetControlX:o,targetControlY:l}){const u=e*.125+i*.375+o*.375+n*.125,d=t*.125+s*.375+l*.375+r*.125,h=Math.abs(u-e),p=Math.abs(d-t);return[u,d,h,p]}function zh(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function IR({pos:e,x1:t,y1:n,x2:r,y2:i,c:s}){switch(e){case _e.Left:return[t-zh(t-r,s),n];case _e.Right:return[t+zh(r-t,s),n];case _e.Top:return[t,n-zh(n-i,s)];case _e.Bottom:return[t,n+zh(i-n,s)]}}function rg({sourceX:e,sourceY:t,sourcePosition:n=_e.Bottom,targetX:r,targetY:i,targetPosition:s=_e.Top,curvature:o=.25}){const[l,u]=IR({pos:n,x1:e,y1:t,x2:r,y2:i,c:o}),[d,h]=IR({pos:s,x1:r,y1:i,x2:e,y2:t,c:o}),[p,m,b,x]=M8({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:l,sourceControlY:u,targetControlX:d,targetControlY:h});return[`M${e},${t} C${l},${u} ${d},${h} ${r},${i}`,p,m,b,x]}function ig({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,s=n<e?n+i:n-i,o=Math.abs(r-t)/2,l=r<t?r+o:r-o;return[s,l,i,o]}function Wse({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r,elevateOnSelect:i=!1}){if(r!==void 0)return r;const s=i&&n?1e3:0,o=Math.max(e.parentId?e.internals.z:0,t.parentId?t.internals.z:0);return s+o}function Kse({sourceNode:e,targetNode:t,width:n,height:r,transform:i}){const s=eg(mm(e),mm(t));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const o={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return jd(o,tg(s))>0}const Yse=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,Xse=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),_8=(e,t)=>{if(!e.source||!e.target)return t;let n;return b8(e)?n={...e}:n={...e,id:Yse(e)},Xse(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function D8({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,s,o,l]=ig({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,s,o,l]}const BR={[_e.Left]:{x:-1,y:0},[_e.Right]:{x:1,y:0},[_e.Top]:{x:0,y:-1},[_e.Bottom]:{x:0,y:1}},Zse=({source:e,sourcePosition:t=_e.Bottom,target:n})=>t===_e.Left||t===_e.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},zR=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Jse({source:e,sourcePosition:t=_e.Bottom,target:n,targetPosition:r=_e.Top,center:i,offset:s,stepPosition:o}){const l=BR[t],u=BR[r],d={x:e.x+l.x*s,y:e.y+l.y*s},h={x:n.x+u.x*s,y:n.y+u.y*s},p=Zse({source:d,sourcePosition:t,target:h}),m=p.x!==0?"x":"y",b=p[m];let x=[],S,w;const C={x:0,y:0},N={x:0,y:0},[,,k,T]=ig({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(l[m]*u[m]===-1){m==="x"?(S=i.x??d.x+(h.x-d.x)*o,w=i.y??(d.y+h.y)/2):(S=i.x??(d.x+h.x)/2,w=i.y??d.y+(h.y-d.y)*o);const M=[{x:S,y:d.y},{x:S,y:h.y}],j=[{x:d.x,y:w},{x:h.x,y:w}];l[m]===b?x=m==="x"?M:j:x=m==="x"?j:M}else{const M=[{x:d.x,y:h.y}],j=[{x:h.x,y:d.y}];if(m==="x"?x=l.x===b?j:M:x=l.y===b?M:j,t===r){const q=Math.abs(e[m]-n[m]);if(q<=s){const W=Math.min(s-1,s-q);l[m]===b?C[m]=(d[m]>e[m]?-1:1)*W:N[m]=(h[m]>n[m]?-1:1)*W}}if(t!==r){const q=m==="x"?"y":"x",W=l[m]===u[q],z=d[q]>h[q],F=d[q]<h[q];(l[m]===1&&(!W&&z||W&&F)||l[m]!==1&&(!W&&F||W&&z))&&(x=m==="x"?M:j)}const R={x:d.x+C.x,y:d.y+C.y},L={x:h.x+N.x,y:h.y+N.y},I=Math.max(Math.abs(R.x-x[0].x),Math.abs(L.x-x[0].x)),H=Math.max(Math.abs(R.y-x[0].y),Math.abs(L.y-x[0].y));I>=H?(S=(R.x+L.x)/2,w=x[0].y):(S=x[0].x,w=(R.y+L.y)/2)}return[[e,{x:d.x+C.x,y:d.y+C.y},...x,{x:h.x+N.x,y:h.y+N.y},n],S,w,k,T]}function Qse(e,t,n,r){const i=Math.min(zR(e,t)/2,zR(t,n)/2,r),{x:s,y:o}=t;if(e.x===s&&s===n.x||e.y===o&&o===n.y)return`L${s} ${o}`;if(e.y===o){const d=e.x<n.x?-1:1,h=e.y<n.y?1:-1;return`L ${s+i*d},${o}Q ${s},${o} ${s},${o+i*h}`}const l=e.x<n.x?1:-1,u=e.y<n.y?-1:1;return`L ${s},${o+i*u}Q ${s},${o} ${s+i*l},${o}`}function wC({sourceX:e,sourceY:t,sourcePosition:n=_e.Bottom,targetX:r,targetY:i,targetPosition:s=_e.Top,borderRadius:o=5,centerX:l,centerY:u,offset:d=20,stepPosition:h=.5}){const[p,m,b,x,S]=Jse({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:s,center:{x:l,y:u},offset:d,stepPosition:h});return[p.reduce((C,N,k)=>{let T="";return k>0&&k<p.length-1?T=Qse(p[k-1],N,p[k+1],o):T=`${k===0?"M":"L"}${N.x} ${N.y}`,C+=T,C},""),m,b,x,S]}function qR(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function eoe(e){const{sourceNode:t,targetNode:n}=e;if(!qR(t)||!qR(n))return null;const r=t.internals.handleBounds||VR(t.handles),i=n.internals.handleBounds||VR(n.handles),s=HR(r?.source??[],e.sourceHandle),o=HR(e.connectionMode===Ha.Strict?i?.target??[]:(i?.target??[]).concat(i?.source??[]),e.targetHandle);if(!s||!o)return e.onError?.("008",ns.error008(s?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const l=s?.position||_e.Bottom,u=o?.position||_e.Top,d=Ld(t,s,l),h=Ld(n,o,u);return{sourceX:d.x,sourceY:d.y,targetX:h.x,targetY:h.y,sourcePosition:l,targetPosition:u}}function VR(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function Ld(e,t,n=_e.Left,r=!1){const i=(t?.x??0)+e.internals.positionAbsolute.x,s=(t?.y??0)+e.internals.positionAbsolute.y,{width:o,height:l}=t??qs(e);if(r)return{x:i+o/2,y:s+l/2};switch(t?.position??n){case _e.Top:return{x:i+o/2,y:s};case _e.Right:return{x:i+o,y:s+l/2};case _e.Bottom:return{x:i+o/2,y:s+l};case _e.Left:return{x:i,y:s+l/2}}}function HR(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function SC(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function toe(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const s=new Set;return e.reduce((o,l)=>([l.markerStart||r,l.markerEnd||i].forEach(u=>{if(u&&typeof u=="object"){const d=SC(u,t);s.has(d)||(o.push({id:d,color:u.color||n,...u}),s.add(d))}}),o),[]).sort((o,l)=>o.id.localeCompare(l.id))}const d2={nodeOrigin:[0,0],nodeExtent:Dd,elevateNodesOnSelect:!0,defaults:{}},noe={...d2,checkEquality:!0};function f2(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function roe(e,t,n){const r=f2(d2,n);for(const i of e.values())if(i.parentId)h2(i,e,t,r);else{const s=ef(i,r.nodeOrigin),o=mc(i.extent)?i.extent:r.nodeExtent,l=Fa(s,o,qs(i));i.internals.positionAbsolute=l}}function EC(e,t,n,r){const i=f2(noe,r);let s=e.length>0;const o=new Map(t),l=i?.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const u of e){let d=o.get(u.id);if(i.checkEquality&&u===d?.internals.userNode)t.set(u.id,d);else{const h=ef(u,i.nodeOrigin),p=mc(u.extent)?u.extent:i.nodeExtent,m=Fa(h,p,qs(u));d={...i.defaults,...u,measured:{width:u.measured?.width,height:u.measured?.height},internals:{positionAbsolute:m,handleBounds:u.measured?d?.internals.handleBounds:void 0,z:R8(u,l),userNode:u}},t.set(u.id,d)}(d.measured===void 0||d.measured.width===void 0||d.measured.height===void 0)&&!d.hidden&&(s=!1),u.parentId&&h2(d,t,n,r)}return s}function ioe(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function h2(e,t,n,r){const{elevateNodesOnSelect:i,nodeOrigin:s,nodeExtent:o}=f2(d2,r),l=e.parentId,u=t.get(l);if(!u){console.warn(`Parent node ${l} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}ioe(e,n);const d=i?1e3:0,{x:h,y:p,z:m}=soe(e,u,s,o,d),{positionAbsolute:b}=e.internals,x=h!==b.x||p!==b.y;(x||m!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:x?{x:h,y:p}:b,z:m}})}function R8(e,t){return(_i(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function soe(e,t,n,r,i){const{x:s,y:o}=t.internals.positionAbsolute,l=qs(e),u=ef(e,n),d=mc(e.extent)?Fa(u,e.extent,l):u;let h=Fa({x:s+d.x,y:o+d.y},r,l);e.extent==="parent"&&(h=w8(h,l,t));const p=R8(e,i),m=t.internals.z??0;return{x:h.x,y:h.y,z:m>=p?m+1:p}}function p2(e,t,n,r=[0,0]){const i=[],s=new Map;for(const o of e){const l=t.get(o.parentId);if(!l)continue;const u=s.get(o.parentId)?.expandedRect??pc(l),d=E8(u,o.rect);s.set(o.parentId,{expandedRect:d,parent:l})}return s.size>0&&s.forEach(({expandedRect:o,parent:l},u)=>{const d=l.internals.positionAbsolute,h=qs(l),p=l.origin??r,m=o.x<d.x?Math.round(Math.abs(d.x-o.x)):0,b=o.y<d.y?Math.round(Math.abs(d.y-o.y)):0,x=Math.max(h.width,Math.round(o.width)),S=Math.max(h.height,Math.round(o.height)),w=(x-h.width)*p[0],C=(S-h.height)*p[1];(m>0||b>0||w||C)&&(i.push({id:u,type:"position",position:{x:l.position.x-m+w,y:l.position.y-b+C}}),n.get(u)?.forEach(N=>{e.some(k=>k.id===N.id)||i.push({id:N.id,type:"position",position:{x:N.position.x+m,y:N.position.y+b}})})),(h.width<o.width||h.height<o.height||m||b)&&i.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:x+(m?p[0]*m-w:0),height:S+(b?p[1]*b-C:0)}})}),i}function ooe(e,t,n,r,i,s){const o=r?.querySelector(".xyflow__viewport");let l=!1;if(!o)return{changes:[],updatedInternals:l};const u=[],d=window.getComputedStyle(o),{m22:h}=new window.DOMMatrixReadOnly(d.transform),p=[];for(const m of e.values()){const b=t.get(m.id);if(!b)continue;if(b.hidden){t.set(b.id,{...b,internals:{...b.internals,handleBounds:void 0}}),l=!0;continue}const x=u2(m.nodeElement),S=b.measured.width!==x.width||b.measured.height!==x.height;if(!!(x.width&&x.height&&(S||!b.internals.handleBounds||m.force))){const C=m.nodeElement.getBoundingClientRect(),N=mc(b.extent)?b.extent:s;let{positionAbsolute:k}=b.internals;b.parentId&&b.extent==="parent"?k=w8(k,x,t.get(b.parentId)):N&&(k=Fa(k,N,x));const T={...b,measured:x,internals:{...b.internals,positionAbsolute:k,handleBounds:{source:PR("source",m.nodeElement,C,h,b.id),target:PR("target",m.nodeElement,C,h,b.id)}}};t.set(b.id,T),b.parentId&&h2(T,t,n,{nodeOrigin:i}),l=!0,S&&(u.push({id:b.id,type:"dimensions",dimensions:x}),b.expandParent&&b.parentId&&p.push({id:b.id,parentId:b.parentId,rect:pc(T,i)}))}}if(p.length>0){const m=p2(p,t,n,i);u.push(...m)}return{changes:u,updatedInternals:l}}async function aoe({delta:e,panZoom:t,transform:n,translateExtent:r,width:i,height:s}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const o=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[i,s]],r),l=!!o&&(o.x!==n[0]||o.y!==n[1]||o.k!==n[2]);return Promise.resolve(l)}function FR(e,t,n,r,i,s){let o=i;const l=r.get(o)||new Map;r.set(o,l.set(n,t)),o=`${i}-${e}`;const u=r.get(o)||new Map;if(r.set(o,u.set(n,t)),s){o=`${i}-${e}-${s}`;const d=r.get(o)||new Map;r.set(o,d.set(n,t))}}function j8(e,t,n){e.clear(),t.clear();for(const r of n){const{source:i,target:s,sourceHandle:o=null,targetHandle:l=null}=r,u={edgeId:r.id,source:i,target:s,sourceHandle:o,targetHandle:l},d=`${i}-${o}--${s}-${l}`,h=`${s}-${l}--${i}-${o}`;FR("source",u,h,e,i,o),FR("target",u,d,e,s,l),t.set(r.id,r)}}function O8(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:O8(n,t):!1}function UR(e,t,n){let r=e;do{if(r?.matches?.(t))return!0;if(r===n)return!1;r=r?.parentElement}while(r);return!1}function loe(e,t,n,r){const i=new Map;for(const[s,o]of e)if((o.selected||o.id===r)&&(!o.parentId||!O8(o,e))&&(o.draggable||t&&typeof o.draggable>"u")){const l=e.get(s);l&&i.set(s,{id:s,position:l.position||{x:0,y:0},distance:{x:n.x-l.internals.positionAbsolute.x,y:n.y-l.internals.positionAbsolute.y},extent:l.extent,parentId:l.parentId,origin:l.origin,expandParent:l.expandParent,internals:{positionAbsolute:l.internals.positionAbsolute||{x:0,y:0}},measured:{width:l.measured.width??0,height:l.measured.height??0}})}return i}function _b({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){const i=[];for(const[o,l]of t){const u=n.get(o)?.internals.userNode;u&&i.push({...u,position:l.position,dragging:r})}if(!e)return[i[0],i];const s=n.get(e)?.internals.userNode;return[s?{...s,position:t.get(e)?.position||s.position,dragging:r}:i[0],i]}function coe({dragItems:e,snapGrid:t,x:n,y:r}){const i=e.values().next().value;if(!i)return null;const s={x:n-i.distance.x,y:r-i.distance.y},o=nf(s,t);return{x:o.x-s.x,y:o.y-s.y}}function uoe({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:i}){let s={x:null,y:null},o=0,l=new Map,u=!1,d={x:0,y:0},h=null,p=!1,m=null,b=!1,x=!1,S=null;function w({noDragClassName:N,handleSelector:k,domNode:T,isSelectable:A,nodeId:M,nodeClickDistance:j=0}){m=Ur(T);function R({x:q,y:W}){const{nodeLookup:z,nodeExtent:F,snapGrid:O,snapToGrid:V,nodeOrigin:Y,onNodeDrag:te,onSelectionDrag:B,onError:$,updateNodePositions:oe}=t();s={x:q,y:W};let ae=!1;const U=l.size>1,Z=U&&F?xC(tf(l)):null,ee=U&&V?coe({dragItems:l,snapGrid:O,x:q,y:W}):null;for(const[de,ce]of l){if(!z.has(de))continue;let ve={x:q-ce.distance.x,y:W-ce.distance.y};V&&(ve=ee?{x:Math.round(ve.x+ee.x),y:Math.round(ve.y+ee.y)}:nf(ve,O));let De=null;if(U&&F&&!ce.extent&&Z){const{positionAbsolute:Ee}=ce.internals,Se=Ee.x-Z.x+F[0][0],Te=Ee.x+ce.measured.width-Z.x2+F[1][0],ot=Ee.y-Z.y+F[0][1],Oe=Ee.y+ce.measured.height-Z.y2+F[1][1];De=[[Se,ot],[Te,Oe]]}const{position:Pe,positionAbsolute:Ae}=x8({nodeId:de,nextPosition:ve,nodeLookup:z,nodeExtent:De||F,nodeOrigin:Y,onError:$});ae=ae||ce.position.x!==Pe.x||ce.position.y!==Pe.y,ce.position=Pe,ce.internals.positionAbsolute=Ae}if(x=x||ae,!!ae&&(oe(l,!0),S&&(r||te||!M&&B))){const[de,ce]=_b({nodeId:M,dragItems:l,nodeLookup:z});r?.(S,l,de,ce),te?.(S,de,ce),M||B?.(S,ce)}}async function L(){if(!h)return;const{transform:q,panBy:W,autoPanSpeed:z,autoPanOnNodeDrag:F}=t();if(!F){u=!1,cancelAnimationFrame(o);return}const[O,V]=S8(d,h,z);(O!==0||V!==0)&&(s.x=(s.x??0)-O/q[2],s.y=(s.y??0)-V/q[2],await W({x:O,y:V})&&R(s)),o=requestAnimationFrame(L)}function I(q){const{nodeLookup:W,multiSelectionActive:z,nodesDraggable:F,transform:O,snapGrid:V,snapToGrid:Y,selectNodesOnDrag:te,onNodeDragStart:B,onSelectionDragStart:$,unselectNodesAndEdges:oe}=t();p=!0,(!te||!A)&&!z&&M&&(W.get(M)?.selected||oe()),A&&te&&M&&e?.(M);const ae=ad(q.sourceEvent,{transform:O,snapGrid:V,snapToGrid:Y,containerBounds:h});if(s=ae,l=loe(W,F,ae,M),l.size>0&&(n||B||!M&&$)){const[U,Z]=_b({nodeId:M,dragItems:l,nodeLookup:W});n?.(q.sourceEvent,l,U,Z),B?.(q.sourceEvent,U,Z),M||$?.(q.sourceEvent,Z)}}const H=Jz().clickDistance(j).on("start",q=>{const{domNode:W,nodeDragThreshold:z,transform:F,snapGrid:O,snapToGrid:V}=t();h=W?.getBoundingClientRect()||null,b=!1,x=!1,S=q.sourceEvent,z===0&&I(q),s=ad(q.sourceEvent,{transform:F,snapGrid:O,snapToGrid:V,containerBounds:h}),d=Xi(q.sourceEvent,h)}).on("drag",q=>{const{autoPanOnNodeDrag:W,transform:z,snapGrid:F,snapToGrid:O,nodeDragThreshold:V,nodeLookup:Y}=t(),te=ad(q.sourceEvent,{transform:z,snapGrid:F,snapToGrid:O,containerBounds:h});if(S=q.sourceEvent,(q.sourceEvent.type==="touchmove"&&q.sourceEvent.touches.length>1||M&&!Y.has(M))&&(b=!0),!b){if(!u&&W&&p&&(u=!0,L()),!p){const B=te.xSnapped-(s.x??0),$=te.ySnapped-(s.y??0);Math.sqrt(B*B+$*$)>V&&I(q)}(s.x!==te.xSnapped||s.y!==te.ySnapped)&&l&&p&&(d=Xi(q.sourceEvent,h),R(te))}}).on("end",q=>{if(!(!p||b)&&(u=!1,p=!1,cancelAnimationFrame(o),l.size>0)){const{nodeLookup:W,updateNodePositions:z,onNodeDragStop:F,onSelectionDragStop:O}=t();if(x&&(z(l,!1),x=!1),i||F||!M&&O){const[V,Y]=_b({nodeId:M,dragItems:l,nodeLookup:W,dragging:!1});i?.(q.sourceEvent,l,V,Y),F?.(q.sourceEvent,V,Y),M||O?.(q.sourceEvent,Y)}}}).filter(q=>{const W=q.target;return!q.button&&(!N||!UR(W,`.${N}`,T))&&(!k||UR(W,k,T))});m.call(H)}function C(){m?.on(".drag",null)}return{update:w,destroy:C}}function doe(e,t,n){const r=[],i={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const s of t.values())jd(i,pc(s))>0&&r.push(s);return r}const foe=250;function hoe(e,t,n,r){let i=[],s=1/0;const o=doe(e,n,t+foe);for(const l of o){const u=[...l.internals.handleBounds?.source??[],...l.internals.handleBounds?.target??[]];for(const d of u){if(r.nodeId===d.nodeId&&r.type===d.type&&r.id===d.id)continue;const{x:h,y:p}=Ld(l,d,d.position,!0),m=Math.sqrt(Math.pow(h-e.x,2)+Math.pow(p-e.y,2));m>t||(m<s?(i=[{...d,x:h,y:p}],s=m):m===s&&i.push({...d,x:h,y:p}))}}if(!i.length)return null;if(i.length>1){const l=r.type==="source"?"target":"source";return i.find(u=>u.type===l)??i[0]}return i[0]}function L8(e,t,n,r,i,s=!1){const o=r.get(e);if(!o)return null;const l=i==="strict"?o.internals.handleBounds?.[t]:[...o.internals.handleBounds?.source??[],...o.internals.handleBounds?.target??[]],u=(n?l?.find(d=>d.id===n):l?.[0])??null;return u&&s?{...u,...Ld(o,u,u.position,!0)}:u}function P8(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function poe(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const I8=()=>!0;function moe(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:s,isTarget:o,domNode:l,nodeLookup:u,lib:d,autoPanOnConnect:h,flowId:p,panBy:m,cancelConnection:b,onConnectStart:x,onConnect:S,onConnectEnd:w,isValidConnection:C=I8,onReconnectEnd:N,updateConnection:k,getTransform:T,getFromHandle:A,autoPanSpeed:M,dragThreshold:j=1,handleDomNode:R}){const L=T8(e.target);let I=0,H;const{x:q,y:W}=Xi(e),z=P8(s,R),F=l?.getBoundingClientRect();let O=!1;if(!F||!z)return;const V=L8(i,z,r,u,t);if(!V)return;let Y=Xi(e,F),te=!1,B=null,$=!1,oe=null;function ae(){if(!h||!F)return;const[Pe,Ae]=S8(Y,F,M);m({x:Pe,y:Ae}),I=requestAnimationFrame(ae)}const U={...V,nodeId:i,type:z,position:V.position},Z=u.get(i);let de={inProgress:!0,isValid:null,from:Ld(Z,U,_e.Left,!0),fromHandle:U,fromPosition:U.position,fromNode:Z,to:Y,toHandle:null,toPosition:RR[U.position],toNode:null};function ce(){O=!0,k(de),x?.(e,{nodeId:i,handleId:r,handleType:z})}j===0&&ce();function ve(Pe){if(!O){const{x:Te,y:ot}=Xi(Pe),Oe=Te-q,Mt=ot-W;if(!(Oe*Oe+Mt*Mt>j*j))return;ce()}if(!A()||!U){De(Pe);return}const Ae=T();Y=Xi(Pe,F),H=hoe(rf(Y,Ae,!1,[1,1]),n,u,U),te||(ae(),te=!0);const Ee=B8(Pe,{handle:H,connectionMode:t,fromNodeId:i,fromHandleId:r,fromType:o?"target":"source",isValidConnection:C,doc:L,lib:d,flowId:p,nodeLookup:u});oe=Ee.handleDomNode,B=Ee.connection,$=poe(!!H,Ee.isValid);const Se={...de,isValid:$,to:Ee.toHandle&&$?gm({x:Ee.toHandle.x,y:Ee.toHandle.y},Ae):Y,toHandle:Ee.toHandle,toPosition:$&&Ee.toHandle?Ee.toHandle.position:RR[U.position],toNode:Ee.toHandle?u.get(Ee.toHandle.nodeId):null};$&&H&&de.toHandle&&Se.toHandle&&de.toHandle.type===Se.toHandle.type&&de.toHandle.nodeId===Se.toHandle.nodeId&&de.toHandle.id===Se.toHandle.id&&de.to.x===Se.to.x&&de.to.y===Se.to.y||(k(Se),de=Se)}function De(Pe){if(O){(H||oe)&&B&&$&&S?.(B);const{inProgress:Ae,...Ee}=de,Se={...Ee,toPosition:de.toHandle?de.toPosition:null};w?.(Pe,Se),s&&N?.(Pe,Se)}b(),cancelAnimationFrame(I),te=!1,$=!1,B=null,oe=null,L.removeEventListener("mousemove",ve),L.removeEventListener("mouseup",De),L.removeEventListener("touchmove",ve),L.removeEventListener("touchend",De)}L.addEventListener("mousemove",ve),L.addEventListener("mouseup",De),L.addEventListener("touchmove",ve),L.addEventListener("touchend",De)}function B8(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:s,doc:o,lib:l,flowId:u,isValidConnection:d=I8,nodeLookup:h}){const p=s==="target",m=t?o.querySelector(`.${l}-flow__handle[data-id="${u}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:b,y:x}=Xi(e),S=o.elementFromPoint(b,x),w=S?.classList.contains(`${l}-flow__handle`)?S:m,C={handleDomNode:w,isValid:!1,connection:null,toHandle:null};if(w){const N=P8(void 0,w),k=w.getAttribute("data-nodeid"),T=w.getAttribute("data-handleid"),A=w.classList.contains("connectable"),M=w.classList.contains("connectableend");if(!k||!N)return C;const j={source:p?k:r,sourceHandle:p?T:i,target:p?r:k,targetHandle:p?i:T};C.connection=j;const L=A&&M&&(n===Ha.Strict?p&&N==="source"||!p&&N==="target":k!==r||T!==i);C.isValid=L&&d(j),C.toHandle=L8(k,N,T,h,n,!0)}return C}const CC={onPointerDown:moe,isValid:B8};function goe({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const i=Ur(e);function s({translateExtent:l,width:u,height:d,zoomStep:h=1,pannable:p=!0,zoomable:m=!0,inversePan:b=!1}){const x=k=>{if(k.sourceEvent.type!=="wheel"||!t)return;const T=n(),A=k.sourceEvent.ctrlKey&&Od()?10:1,M=-k.sourceEvent.deltaY*(k.sourceEvent.deltaMode===1?.05:k.sourceEvent.deltaMode?1:.002)*h,j=T[2]*Math.pow(2,M*A);t.scaleTo(j)};let S=[0,0];const w=k=>{(k.sourceEvent.type==="mousedown"||k.sourceEvent.type==="touchstart")&&(S=[k.sourceEvent.clientX??k.sourceEvent.touches[0].clientX,k.sourceEvent.clientY??k.sourceEvent.touches[0].clientY])},C=k=>{const T=n();if(k.sourceEvent.type!=="mousemove"&&k.sourceEvent.type!=="touchmove"||!t)return;const A=[k.sourceEvent.clientX??k.sourceEvent.touches[0].clientX,k.sourceEvent.clientY??k.sourceEvent.touches[0].clientY],M=[A[0]-S[0],A[1]-S[1]];S=A;const j=r()*Math.max(T[2],Math.log(T[2]))*(b?-1:1),R={x:T[0]-M[0]*j,y:T[1]-M[1]*j},L=[[0,0],[u,d]];t.setViewportConstrained({x:R.x,y:R.y,zoom:T[2]},L,l)},N=h8().on("start",w).on("zoom",p?C:null).on("zoom.wheel",m?x:null);i.call(N,{})}function o(){i.on("zoom",null)}return{update:s,destroy:o,pointer:Ti}}const yoe=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,sg=e=>({x:e.x,y:e.y,zoom:e.k}),Db=({x:e,y:t,zoom:n})=>Qm.translate(e,t).scale(n),Yl=(e,t)=>e.target.closest(`.${t}`),z8=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),boe=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,Rb=(e,t=0,n=boe,r=()=>{})=>{const i=typeof t=="number"&&t>0;return i||r(),i?e.transition().duration(t).ease(n).on("end",r):e},q8=e=>{const t=e.ctrlKey&&Od()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function voe({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:s,zoomOnPinch:o,onPanZoomStart:l,onPanZoom:u,onPanZoomEnd:d}){return h=>{if(Yl(h,t))return!1;h.preventDefault(),h.stopImmediatePropagation();const p=n.property("__zoom").k||1;if(h.ctrlKey&&o){const w=Ti(h),C=q8(h),N=p*Math.pow(2,C);r.scaleTo(n,N,w,h);return}const m=h.deltaMode===1?20:1;let b=i===Oa.Vertical?0:h.deltaX*m,x=i===Oa.Horizontal?0:h.deltaY*m;!Od()&&h.shiftKey&&i!==Oa.Vertical&&(b=h.deltaY*m,x=0),r.translateBy(n,-(b/p)*s,-(x/p)*s,{internal:!0});const S=sg(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,l?.(h,S)),e.isPanScrolling&&(u?.(h,S),e.panScrollTimeout=setTimeout(()=>{d?.(h,S),e.isPanScrolling=!1},150))}}function xoe({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,i){const s=r.type==="wheel",o=!t&&s&&!r.ctrlKey,l=Yl(r,e);if(r.ctrlKey&&s&&l&&r.preventDefault(),o||l)return null;r.preventDefault(),n.call(this,r,i)}}function woe({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{if(r.sourceEvent?.internal)return;const i=sg(r.transform);e.mouseButton=r.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=i,r.sourceEvent?.type==="mousedown"&&t(!0),n&&n?.(r.sourceEvent,i)}}function Soe({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return s=>{e.usedRightMouseButton=!!(n&&z8(t,e.mouseButton??0)),s.sourceEvent?.sync||r([s.transform.x,s.transform.y,s.transform.k]),i&&!s.sourceEvent?.internal&&i?.(s.sourceEvent,sg(s.transform))}}function Eoe({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:s}){return o=>{if(!o.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,s&&z8(t,e.mouseButton??0)&&!e.usedRightMouseButton&&o.sourceEvent&&s(o.sourceEvent),e.usedRightMouseButton=!1,r(!1),i&&yoe(e.prevViewport,o.transform))){const l=sg(o.transform);e.prevViewport=l,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{i?.(o.sourceEvent,l)},n?150:0)}}}function Coe({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:s,userSelectionActive:o,noWheelClassName:l,noPanClassName:u,lib:d}){return h=>{const p=e||t,m=n&&h.ctrlKey;if(h.button===1&&h.type==="mousedown"&&(Yl(h,`${d}-flow__node`)||Yl(h,`${d}-flow__edge`)))return!0;if(!r&&!p&&!i&&!s&&!n||o||Yl(h,l)&&h.type==="wheel"||Yl(h,u)&&(h.type!=="wheel"||i&&h.type==="wheel"&&!e)||!n&&h.ctrlKey&&h.type==="wheel")return!1;if(!n&&h.type==="touchstart"&&h.touches?.length>1)return h.preventDefault(),!1;if(!p&&!i&&!m&&h.type==="wheel"||!r&&(h.type==="mousedown"||h.type==="touchstart")||Array.isArray(r)&&!r.includes(h.button)&&h.type==="mousedown")return!1;const b=Array.isArray(r)&&r.includes(h.button)||!h.button||h.button<=1;return(!h.ctrlKey||h.type==="wheel")&&b}}function koe({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:r,translateExtent:i,viewport:s,onPanZoom:o,onPanZoomStart:l,onPanZoomEnd:u,onDraggingChange:d}){const h={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},p=e.getBoundingClientRect(),m=h8().clickDistance(!_i(r)||r<0?0:r).scaleExtent([t,n]).translateExtent(i),b=Ur(e).call(m);k({x:s.x,y:s.y,zoom:hc(s.zoom,t,n)},[[0,0],[p.width,p.height]],i);const x=b.on("wheel.zoom"),S=b.on("dblclick.zoom");m.wheelDelta(q8);function w(q,W){return b?new Promise(z=>{m?.interpolate(W?.interpolate==="linear"?od:ip).transform(Rb(b,W?.duration,W?.ease,()=>z(!0)),q)}):Promise.resolve(!1)}function C({noWheelClassName:q,noPanClassName:W,onPaneContextMenu:z,userSelectionActive:F,panOnScroll:O,panOnDrag:V,panOnScrollMode:Y,panOnScrollSpeed:te,preventScrolling:B,zoomOnPinch:$,zoomOnScroll:oe,zoomOnDoubleClick:ae,zoomActivationKeyPressed:U,lib:Z,onTransformChange:ee}){F&&!h.isZoomingOrPanning&&N();const ce=O&&!U&&!F?voe({zoomPanValues:h,noWheelClassName:q,d3Selection:b,d3Zoom:m,panOnScrollMode:Y,panOnScrollSpeed:te,zoomOnPinch:$,onPanZoomStart:l,onPanZoom:o,onPanZoomEnd:u}):xoe({noWheelClassName:q,preventScrolling:B,d3ZoomHandler:x});if(b.on("wheel.zoom",ce,{passive:!1}),!F){const De=woe({zoomPanValues:h,onDraggingChange:d,onPanZoomStart:l});m.on("start",De);const Pe=Soe({zoomPanValues:h,panOnDrag:V,onPaneContextMenu:!!z,onPanZoom:o,onTransformChange:ee});m.on("zoom",Pe);const Ae=Eoe({zoomPanValues:h,panOnDrag:V,panOnScroll:O,onPaneContextMenu:z,onPanZoomEnd:u,onDraggingChange:d});m.on("end",Ae)}const ve=Coe({zoomActivationKeyPressed:U,panOnDrag:V,zoomOnScroll:oe,panOnScroll:O,zoomOnDoubleClick:ae,zoomOnPinch:$,userSelectionActive:F,noPanClassName:W,noWheelClassName:q,lib:Z});m.filter(ve),ae?b.on("dblclick.zoom",S):b.on("dblclick.zoom",null)}function N(){m.on("zoom",null)}async function k(q,W,z){const F=Db(q),O=m?.constrain()(F,W,z);return O&&await w(O),new Promise(V=>V(O))}async function T(q,W){const z=Db(q);return await w(z,W),new Promise(F=>F(z))}function A(q){if(b){const W=Db(q),z=b.property("__zoom");(z.k!==q.zoom||z.x!==q.x||z.y!==q.y)&&m?.transform(b,W,null,{sync:!0})}}function M(){const q=b?f8(b.node()):{x:0,y:0,k:1};return{x:q.x,y:q.y,zoom:q.k}}function j(q,W){return b?new Promise(z=>{m?.interpolate(W?.interpolate==="linear"?od:ip).scaleTo(Rb(b,W?.duration,W?.ease,()=>z(!0)),q)}):Promise.resolve(!1)}function R(q,W){return b?new Promise(z=>{m?.interpolate(W?.interpolate==="linear"?od:ip).scaleBy(Rb(b,W?.duration,W?.ease,()=>z(!0)),q)}):Promise.resolve(!1)}function L(q){m?.scaleExtent(q)}function I(q){m?.translateExtent(q)}function H(q){const W=!_i(q)||q<0?0:q;m?.clickDistance(W)}return{update:C,destroy:N,setViewport:T,setViewportConstrained:k,getViewport:M,scaleTo:j,scaleBy:R,setScaleExtent:L,setTranslateExtent:I,syncViewport:A,setClickDistance:H}}var Ua;(function(e){e.Line="line",e.Handle="handle"})(Ua||(Ua={}));const Toe=["top-left","top-right","bottom-left","bottom-right"],Noe=["top","right","bottom","left"];function Aoe({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:i,affectsY:s}){const o=e-t,l=n-r,u=[o>0?1:o<0?-1:0,l>0?1:l<0?-1:0];return o&&i&&(u[0]=u[0]*-1),l&&s&&(u[1]=u[1]*-1),u}function Moe(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),i=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:i}}function vo(e,t){return Math.max(0,t-e)}function xo(e,t){return Math.max(0,e-t)}function qh(e,t,n){return Math.max(0,t-e,e-n)}function $R(e,t){return e?!t:t}function _oe(e,t,n,r,i,s,o,l){let{affectsX:u,affectsY:d}=t;const{isHorizontal:h,isVertical:p}=t,m=h&&p,{xSnapped:b,ySnapped:x}=n,{minWidth:S,maxWidth:w,minHeight:C,maxHeight:N}=r,{x:k,y:T,width:A,height:M,aspectRatio:j}=e;let R=Math.floor(h?b-e.pointerX:0),L=Math.floor(p?x-e.pointerY:0);const I=A+(u?-R:R),H=M+(d?-L:L),q=-s[0]*A,W=-s[1]*M;let z=qh(I,S,w),F=qh(H,C,N);if(o){let Y=0,te=0;u&&R<0?Y=vo(k+R+q,o[0][0]):!u&&R>0&&(Y=xo(k+I+q,o[1][0])),d&&L<0?te=vo(T+L+W,o[0][1]):!d&&L>0&&(te=xo(T+H+W,o[1][1])),z=Math.max(z,Y),F=Math.max(F,te)}if(l){let Y=0,te=0;u&&R>0?Y=xo(k+R,l[0][0]):!u&&R<0&&(Y=vo(k+I,l[1][0])),d&&L>0?te=xo(T+L,l[0][1]):!d&&L<0&&(te=vo(T+H,l[1][1])),z=Math.max(z,Y),F=Math.max(F,te)}if(i){if(h){const Y=qh(I/j,C,N)*j;if(z=Math.max(z,Y),o){let te=0;!u&&!d||u&&!d&&m?te=xo(T+W+I/j,o[1][1])*j:te=vo(T+W+(u?R:-R)/j,o[0][1])*j,z=Math.max(z,te)}if(l){let te=0;!u&&!d||u&&!d&&m?te=vo(T+I/j,l[1][1])*j:te=xo(T+(u?R:-R)/j,l[0][1])*j,z=Math.max(z,te)}}if(p){const Y=qh(H*j,S,w)/j;if(F=Math.max(F,Y),o){let te=0;!u&&!d||d&&!u&&m?te=xo(k+H*j+q,o[1][0])/j:te=vo(k+(d?L:-L)*j+q,o[0][0])/j,F=Math.max(F,te)}if(l){let te=0;!u&&!d||d&&!u&&m?te=vo(k+H*j,l[1][0])/j:te=xo(k+(d?L:-L)*j,l[0][0])/j,F=Math.max(F,te)}}}L=L+(L<0?F:-F),R=R+(R<0?z:-z),i&&(m?I>H*j?L=($R(u,d)?-R:R)/j:R=($R(u,d)?-L:L)*j:h?(L=R/j,d=u):(R=L*j,u=d));const O=u?k+R:k,V=d?T+L:T;return{width:A+(u?-R:R),height:M+(d?-L:L),x:s[0]*R*(u?-1:1)+O,y:s[1]*L*(d?-1:1)+V}}const V8={width:0,height:0,x:0,y:0},Doe={...V8,pointerX:0,pointerY:0,aspectRatio:1};function Roe(e){return[[0,0],[e.measured.width,e.measured.height]]}function joe(e,t,n){const r=t.position.x+e.position.x,i=t.position.y+e.position.y,s=e.measured.width??0,o=e.measured.height??0,l=n[0]*s,u=n[1]*o;return[[r-l,i-u],[r+s-l,i+o-u]]}function Ooe({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:i}){const s=Ur(e);function o({controlPosition:u,boundaries:d,keepAspectRatio:h,resizeDirection:p,onResizeStart:m,onResize:b,onResizeEnd:x,shouldResize:S}){let w={...V8},C={...Doe};const N=Moe(u);let k,T=null,A=[],M,j,R;const L=Jz().on("start",I=>{const{nodeLookup:H,transform:q,snapGrid:W,snapToGrid:z,nodeOrigin:F,paneDomNode:O}=n();if(k=H.get(t),!k)return;T=O?.getBoundingClientRect()??null;const{xSnapped:V,ySnapped:Y}=ad(I.sourceEvent,{transform:q,snapGrid:W,snapToGrid:z,containerBounds:T});w={width:k.measured.width??0,height:k.measured.height??0,x:k.position.x??0,y:k.position.y??0},C={...w,pointerX:V,pointerY:Y,aspectRatio:w.width/w.height},M=void 0,k.parentId&&(k.extent==="parent"||k.expandParent)&&(M=H.get(k.parentId),j=M&&k.extent==="parent"?Roe(M):void 0),A=[],R=void 0;for(const[te,B]of H)if(B.parentId===t&&(A.push({id:te,position:{...B.position},extent:B.extent}),B.extent==="parent"||B.expandParent)){const $=joe(B,k,B.origin??F);R?R=[[Math.min($[0][0],R[0][0]),Math.min($[0][1],R[0][1])],[Math.max($[1][0],R[1][0]),Math.max($[1][1],R[1][1])]]:R=$}m?.(I,{...w})}).on("drag",I=>{const{transform:H,snapGrid:q,snapToGrid:W,nodeOrigin:z}=n(),F=ad(I.sourceEvent,{transform:H,snapGrid:q,snapToGrid:W,containerBounds:T}),O=[];if(!k)return;const{x:V,y:Y,width:te,height:B}=w,$={},oe=k.origin??z,{width:ae,height:U,x:Z,y:ee}=_oe(C,N,F,d,h,oe,j,R),de=ae!==te,ce=U!==B,ve=Z!==V&&de,De=ee!==Y&&ce;if(!ve&&!De&&!de&&!ce)return;if((ve||De||oe[0]===1||oe[1]===1)&&($.x=ve?Z:w.x,$.y=De?ee:w.y,w.x=$.x,w.y=$.y,A.length>0)){const Se=Z-V,Te=ee-Y;for(const ot of A)ot.position={x:ot.position.x-Se+oe[0]*(ae-te),y:ot.position.y-Te+oe[1]*(U-B)},O.push(ot)}if((de||ce)&&($.width=de&&(!p||p==="horizontal")?ae:w.width,$.height=ce&&(!p||p==="vertical")?U:w.height,w.width=$.width,w.height=$.height),M&&k.expandParent){const Se=oe[0]*($.width??0);$.x&&$.x<Se&&(w.x=Se,C.x=C.x-($.x-Se));const Te=oe[1]*($.height??0);$.y&&$.y<Te&&(w.y=Te,C.y=C.y-($.y-Te))}const Pe=Aoe({width:w.width,prevWidth:te,height:w.height,prevHeight:B,affectsX:N.affectsX,affectsY:N.affectsY}),Ae={...w,direction:Pe};S?.(I,Ae)!==!1&&(b?.(I,Ae),r($,O))}).on("end",I=>{x?.(I,{...w}),i?.({...w})});s.call(L)}function l(){s.on(".drag",null)}return{update:o,destroy:l}}const Loe={},GR=e=>{let t;const n=new Set,r=(h,p)=>{const m=typeof h=="function"?h(t):h;if(!Object.is(m,t)){const b=t;t=p??(typeof m!="object"||m===null)?m:Object.assign({},t,m),n.forEach(x=>x(t,b))}},i=()=>t,u={setState:r,getState:i,getInitialState:()=>d,subscribe:h=>(n.add(h),()=>n.delete(h)),destroy:()=>{(Loe?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},d=t=e(r,i,u);return u},Poe=e=>e?GR(e):GR,{useDebugValue:Ioe}=ke,{useSyncExternalStoreWithSelector:Boe}=JQ,zoe=e=>e;function H8(e,t=zoe,n){const r=Boe(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Ioe(r),r}const WR=(e,t)=>{const n=Poe(e),r=(i,s=t)=>H8(n,i,s);return Object.assign(r,n),r},qoe=(e,t)=>e?WR(e,t):WR;function Gt(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,i]of e)if(!Object.is(i,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const og=D.createContext(null),Voe=og.Provider,F8=ns.error001();function st(e,t){const n=D.useContext(og);if(n===null)throw new Error(F8);return H8(n,e,t)}function It(){const e=D.useContext(og);if(e===null)throw new Error(F8);return D.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const KR={display:"none"},Hoe={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},U8="react-flow__node-desc",$8="react-flow__edge-desc",Foe="react-flow__aria-live",Uoe=e=>e.ariaLiveMessage,$oe=e=>e.ariaLabelConfig;function Goe({rfId:e}){const t=st(Uoe);return y.jsx("div",{id:`${Foe}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Hoe,children:t})}function Woe({rfId:e,disableKeyboardA11y:t}){const n=st($oe);return y.jsxs(y.Fragment,{children:[y.jsx("div",{id:`${U8}-${e}`,style:KR,children:t?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),y.jsx("div",{id:`${$8}-${e}`,style:KR,children:n["edge.a11yDescription.default"]}),!t&&y.jsx(Goe,{rfId:e})]})}const ag=D.forwardRef(({position:e="top-left",children:t,className:n,style:r,...i},s)=>{const o=`${e}`.split("-");return y.jsx("div",{className:En(["react-flow__panel",n,...o]),style:r,ref:s,...i,children:t})});ag.displayName="Panel";function Koe({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:y.jsx(ag,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:y.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const Yoe=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},Vh=e=>e.id;function Xoe(e,t){return Gt(e.selectedNodes.map(Vh),t.selectedNodes.map(Vh))&&Gt(e.selectedEdges.map(Vh),t.selectedEdges.map(Vh))}function Zoe({onSelectionChange:e}){const t=It(),{selectedNodes:n,selectedEdges:r}=st(Yoe,Xoe);return D.useEffect(()=>{const i={nodes:n,edges:r};e?.(i),t.getState().onSelectionChangeHandlers.forEach(s=>s(i))},[n,r,e]),null}const Joe=e=>!!e.onSelectionChangeHandlers;function Qoe({onSelectionChange:e}){const t=st(Joe);return e||t?y.jsx(Zoe,{onSelectionChange:e}):null}const G8=[0,0],eae={x:0,y:0,zoom:1},tae=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance","ariaLabelConfig"],YR=[...tae,"rfId"],nae=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),XR={translateExtent:Dd,nodeOrigin:G8,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function rae(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:i,setTranslateExtent:s,setNodeExtent:o,reset:l,setDefaultNodesAndEdges:u,setPaneClickDistance:d}=st(nae,Gt),h=It();D.useEffect(()=>(u(e.defaultNodes,e.defaultEdges),()=>{p.current=XR,l()}),[]);const p=D.useRef(XR);return D.useEffect(()=>{for(const m of YR){const b=e[m],x=p.current[m];b!==x&&(typeof e[m]>"u"||(m==="nodes"?t(b):m==="edges"?n(b):m==="minZoom"?r(b):m==="maxZoom"?i(b):m==="translateExtent"?s(b):m==="nodeExtent"?o(b):m==="paneClickDistance"?d(b):m==="ariaLabelConfig"?h.setState({ariaLabelConfig:$se(b)}):m==="fitView"?h.setState({fitViewQueued:b}):m==="fitViewOptions"?h.setState({fitViewOptions:b}):h.setState({[m]:b})))}p.current=e},YR.map(m=>e[m])),null}function ZR(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function iae(e){const[t,n]=D.useState(e==="system"?null:e);return D.useEffect(()=>{if(e!=="system"){n(e);return}const r=ZR(),i=()=>n(r?.matches?"dark":"light");return i(),r?.addEventListener("change",i),()=>{r?.removeEventListener("change",i)}},[e]),t!==null?t:ZR()?.matches?"dark":"light"}const JR=typeof document<"u"?document:null;function Pd(e=null,t={target:JR,actInsideInputWithModifier:!0}){const[n,r]=D.useState(!1),i=D.useRef(!1),s=D.useRef(new Set([])),[o,l]=D.useMemo(()=>{if(e!==null){const d=(Array.isArray(e)?e:[e]).filter(p=>typeof p=="string").map(p=>p.replace("+",`
`).replace(`

`,`
+`).split(`
`)),h=d.reduce((p,m)=>p.concat(...m),[]);return[d,h]}return[[],[]]},[e]);return D.useEffect(()=>{const u=t?.target??JR,d=t?.actInsideInputWithModifier??!0;if(e!==null){const h=b=>{if(i.current=b.ctrlKey||b.metaKey||b.shiftKey||b.altKey,(!i.current||i.current&&!d)&&N8(b))return!1;const S=ej(b.code,l);if(s.current.add(b[S]),QR(o,s.current,!1)){const w=b.composedPath?.()?.[0]||b.target,C=w?.nodeName==="BUTTON"||w?.nodeName==="A";t.preventDefault!==!1&&(i.current||!C)&&b.preventDefault(),r(!0)}},p=b=>{const x=ej(b.code,l);QR(o,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(b[x]),b.key==="Meta"&&s.current.clear(),i.current=!1},m=()=>{s.current.clear(),r(!1)};return u?.addEventListener("keydown",h),u?.addEventListener("keyup",p),window.addEventListener("blur",m),window.addEventListener("contextmenu",m),()=>{u?.removeEventListener("keydown",h),u?.removeEventListener("keyup",p),window.removeEventListener("blur",m),window.removeEventListener("contextmenu",m)}}},[e,r]),n}function QR(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(i=>t.has(i)))}function ej(e,t){return t.includes(e)?"code":"key"}const sae=()=>{const e=It();return D.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[r,i,s],panZoom:o}=e.getState();return o?(await o.setViewport({x:t.x??r,y:t.y??i,zoom:t.zoom??s},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},setCenter:async(t,n,r)=>e.getState().setCenter(t,n,r),fitBounds:async(t,n)=>{const{width:r,height:i,minZoom:s,maxZoom:o,panZoom:l}=e.getState(),u=ng(t,r,i,s,o,n?.padding??.1);return l?(await l.setViewport(u,{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{const{transform:r,snapGrid:i,snapToGrid:s,domNode:o}=e.getState();if(!o)return t;const{x:l,y:u}=o.getBoundingClientRect(),d={x:t.x-l,y:t.y-u},h=n.snapGrid??i,p=n.snapToGrid??s;return rf(d,r,p,h)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:i,y:s}=r.getBoundingClientRect(),o=gm(t,n);return{x:o.x+i,y:o.y+s}}}),[])};function W8(e,t){const n=[],r=new Map,i=[];for(const s of e)if(s.type==="add"){i.push(s);continue}else if(s.type==="remove"||s.type==="replace")r.set(s.id,[s]);else{const o=r.get(s.id);o?o.push(s):r.set(s.id,[s])}for(const s of t){const o=r.get(s.id);if(!o){n.push(s);continue}if(o[0].type==="remove")continue;if(o[0].type==="replace"){n.push({...o[0].item});continue}const l={...s};for(const u of o)oae(u,l);n.push(l)}return i.length&&i.forEach(s=>{s.index!==void 0?n.splice(s.index,0,{...s.item}):n.push({...s.item})}),n}function oae(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured??={},t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function K8(e,t){return W8(e,t)}function Y8(e,t){return W8(e,t)}function ma(e,t){return{id:e,type:"select",selected:t}}function Xl(e,t=new Set,n=!1){const r=[];for(const[i,s]of e){const o=t.has(i);!(s.selected===void 0&&!o)&&s.selected!==o&&(n&&(s.selected=o),r.push(ma(s.id,o)))}return r}function tj({items:e=[],lookup:t}){const n=[],r=new Map(e.map(i=>[i.id,i]));for(const[i,s]of e.entries()){const o=t.get(s.id),l=o?.internals?.userNode??o;l!==void 0&&l!==s&&n.push({id:s.id,item:s,type:"replace"}),l===void 0&&n.push({item:s,type:"add",index:i})}for(const[i]of t)r.get(i)===void 0&&n.push({id:i,type:"remove"});return n}function nj(e){return{id:e.id,type:"remove"}}const rj=e=>Pse(e),aae=e=>b8(e);function X8(e){return D.forwardRef(e)}const lae=typeof window<"u"?D.useLayoutEffect:D.useEffect;function ij(e){const[t,n]=D.useState(BigInt(0)),[r]=D.useState(()=>cae(()=>n(i=>i+BigInt(1))));return lae(()=>{const i=r.get();i.length&&(e(i),r.reset())},[t]),r}function cae(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const Z8=D.createContext(null);function uae({children:e}){const t=It(),n=D.useCallback(l=>{const{nodes:u=[],setNodes:d,hasDefaultNodes:h,onNodesChange:p,nodeLookup:m,fitViewQueued:b}=t.getState();let x=u;for(const w of l)x=typeof w=="function"?w(x):w;const S=tj({items:x,lookup:m});h&&d(x),S.length>0?p?.(S):b&&window.requestAnimationFrame(()=>{const{fitViewQueued:w,nodes:C,setNodes:N}=t.getState();w&&N(C)})},[]),r=ij(n),i=D.useCallback(l=>{const{edges:u=[],setEdges:d,hasDefaultEdges:h,onEdgesChange:p,edgeLookup:m}=t.getState();let b=u;for(const x of l)b=typeof x=="function"?x(b):x;h?d(b):p&&p(tj({items:b,lookup:m}))},[]),s=ij(i),o=D.useMemo(()=>({nodeQueue:r,edgeQueue:s}),[]);return y.jsx(Z8.Provider,{value:o,children:e})}function dae(){const e=D.useContext(Z8);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const fae=e=>!!e.panZoom;function Id(){const e=sae(),t=It(),n=dae(),r=st(fae),i=D.useMemo(()=>{const s=p=>t.getState().nodeLookup.get(p),o=p=>{n.nodeQueue.push(p)},l=p=>{n.edgeQueue.push(p)},u=p=>{const{nodeLookup:m,nodeOrigin:b}=t.getState(),x=rj(p)?p:m.get(p.id),S=x.parentId?k8(x.position,x.measured,x.parentId,m,b):x.position,w={...x,position:S,width:x.measured?.width??x.width,height:x.measured?.height??x.height};return pc(w)},d=(p,m,b={replace:!1})=>{o(x=>x.map(S=>{if(S.id===p){const w=typeof m=="function"?m(S):m;return b.replace&&rj(w)?w:{...S,...w}}return S}))},h=(p,m,b={replace:!1})=>{l(x=>x.map(S=>{if(S.id===p){const w=typeof m=="function"?m(S):m;return b.replace&&aae(w)?w:{...S,...w}}return S}))};return{getNodes:()=>t.getState().nodes.map(p=>({...p})),getNode:p=>s(p)?.internals.userNode,getInternalNode:s,getEdges:()=>{const{edges:p=[]}=t.getState();return p.map(m=>({...m}))},getEdge:p=>t.getState().edgeLookup.get(p),setNodes:o,setEdges:l,addNodes:p=>{const m=Array.isArray(p)?p:[p];n.nodeQueue.push(b=>[...b,...m])},addEdges:p=>{const m=Array.isArray(p)?p:[p];n.edgeQueue.push(b=>[...b,...m])},toObject:()=>{const{nodes:p=[],edges:m=[],transform:b}=t.getState(),[x,S,w]=b;return{nodes:p.map(C=>({...C})),edges:m.map(C=>({...C})),viewport:{x,y:S,zoom:w}}},deleteElements:async({nodes:p=[],edges:m=[]})=>{const{nodes:b,edges:x,onNodesDelete:S,onEdgesDelete:w,triggerNodeChanges:C,triggerEdgeChanges:N,onDelete:k,onBeforeDelete:T}=t.getState(),{nodes:A,edges:M}=await qse({nodesToRemove:p,edgesToRemove:m,nodes:b,edges:x,onBeforeDelete:T}),j=M.length>0,R=A.length>0;if(j){const L=M.map(nj);w?.(M),N(L)}if(R){const L=A.map(nj);S?.(A),C(L)}return(R||j)&&k?.({nodes:A,edges:M}),{deletedNodes:A,deletedEdges:M}},getIntersectingNodes:(p,m=!0,b)=>{const x=OR(p),S=x?p:u(p),w=b!==void 0;return S?(b||t.getState().nodes).filter(C=>{const N=t.getState().nodeLookup.get(C.id);if(N&&!x&&(C.id===p.id||!N.internals.positionAbsolute))return!1;const k=pc(w?C:N),T=jd(k,S);return m&&T>0||T>=k.width*k.height||T>=S.width*S.height}):[]},isNodeIntersecting:(p,m,b=!0)=>{const S=OR(p)?p:u(p);if(!S)return!1;const w=jd(S,m);return b&&w>0||w>=S.width*S.height},updateNode:d,updateNodeData:(p,m,b={replace:!1})=>{d(p,x=>{const S=typeof m=="function"?m(x):m;return b.replace?{...x,data:S}:{...x,data:{...x.data,...S}}},b)},updateEdge:h,updateEdgeData:(p,m,b={replace:!1})=>{h(p,x=>{const S=typeof m=="function"?m(x):m;return b.replace?{...x,data:S}:{...x,data:{...x.data,...S}}},b)},getNodesBounds:p=>{const{nodeLookup:m,nodeOrigin:b}=t.getState();return v8(p,{nodeLookup:m,nodeOrigin:b})},getHandleConnections:({type:p,id:m,nodeId:b})=>Array.from(t.getState().connectionLookup.get(`${b}-${p}${m?`-${m}`:""}`)?.values()??[]),getNodeConnections:({type:p,handleId:m,nodeId:b})=>Array.from(t.getState().connectionLookup.get(`${b}${p?m?`-${p}-${m}`:`-${p}`:""}`)?.values()??[]),fitView:async p=>{const m=t.getState().fitViewResolver??Use();return t.setState({fitViewQueued:!0,fitViewOptions:p,fitViewResolver:m}),n.nodeQueue.push(b=>[...b]),m.promise}}},[]);return D.useMemo(()=>({...i,...e,viewportInitialized:r}),[r])}const sj=e=>e.selected,hae=typeof window<"u"?window:void 0;function pae({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=It(),{deleteElements:r}=Id(),i=Pd(e,{actInsideInputWithModifier:!1}),s=Pd(t,{target:hae});D.useEffect(()=>{if(i){const{edges:o,nodes:l}=n.getState();r({nodes:l.filter(sj),edges:o.filter(sj)}),n.setState({nodesSelectionActive:!1})}},[i]),D.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])}function mae(e){const t=It();D.useEffect(()=>{const n=()=>{if(!e.current)return!1;const r=u2(e.current);(r.height===0||r.width===0)&&t.getState().onError?.("004",ns.error004()),t.setState({width:r.width||500,height:r.height||500})};if(e.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(e.current),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}}},[])}const lg={position:"absolute",width:"100%",height:"100%",top:0,left:0},gae=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function yae({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:i=.5,panOnScrollMode:s=Oa.Free,zoomOnDoubleClick:o=!0,panOnDrag:l=!0,defaultViewport:u,translateExtent:d,minZoom:h,maxZoom:p,zoomActivationKeyCode:m,preventScrolling:b=!0,children:x,noWheelClassName:S,noPanClassName:w,onViewportChange:C,isControlledViewport:N,paneClickDistance:k}){const T=It(),A=D.useRef(null),{userSelectionActive:M,lib:j}=st(gae,Gt),R=Pd(m),L=D.useRef();mae(A);const I=D.useCallback(H=>{C?.({x:H[0],y:H[1],zoom:H[2]}),N||T.setState({transform:H})},[C,N]);return D.useEffect(()=>{if(A.current){L.current=koe({domNode:A.current,minZoom:h,maxZoom:p,translateExtent:d,viewport:u,paneClickDistance:k,onDraggingChange:z=>T.setState({paneDragging:z}),onPanZoomStart:(z,F)=>{const{onViewportChangeStart:O,onMoveStart:V}=T.getState();V?.(z,F),O?.(F)},onPanZoom:(z,F)=>{const{onViewportChange:O,onMove:V}=T.getState();V?.(z,F),O?.(F)},onPanZoomEnd:(z,F)=>{const{onViewportChangeEnd:O,onMoveEnd:V}=T.getState();V?.(z,F),O?.(F)}});const{x:H,y:q,zoom:W}=L.current.getViewport();return T.setState({panZoom:L.current,transform:[H,q,W],domNode:A.current.closest(".react-flow")}),()=>{L.current?.destroy()}}},[]),D.useEffect(()=>{L.current?.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:i,panOnScrollMode:s,zoomOnDoubleClick:o,panOnDrag:l,zoomActivationKeyPressed:R,preventScrolling:b,noPanClassName:w,userSelectionActive:M,noWheelClassName:S,lib:j,onTransformChange:I})},[e,t,n,r,i,s,o,l,R,b,w,M,S,j,I]),y.jsx("div",{className:"react-flow__renderer",ref:A,style:lg,children:x})}const bae=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function vae(){const{userSelectionActive:e,userSelectionRect:t}=st(bae,Gt);return e&&t?y.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const jb=(e,t)=>n=>{n.target===t.current&&e?.(n)},xae=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function wae({isSelecting:e,selectionKeyPressed:t,selectionMode:n=Rd.Full,panOnDrag:r,selectionOnDrag:i,onSelectionStart:s,onSelectionEnd:o,onPaneClick:l,onPaneContextMenu:u,onPaneScroll:d,onPaneMouseEnter:h,onPaneMouseMove:p,onPaneMouseLeave:m,children:b}){const x=It(),{userSelectionActive:S,elementsSelectable:w,dragging:C,connectionInProgress:N}=st(xae,Gt),k=w&&(e||S),T=D.useRef(null),A=D.useRef(),M=D.useRef(new Set),j=D.useRef(new Set),R=D.useRef(!1),L=D.useRef(!1),I=V=>{if(R.current||N){R.current=!1;return}l?.(V),x.getState().resetSelectedElements(),x.setState({nodesSelectionActive:!1})},H=V=>{if(Array.isArray(r)&&r?.includes(2)){V.preventDefault();return}u?.(V)},q=d?V=>d(V):void 0,W=V=>{const{resetSelectedElements:Y,domNode:te}=x.getState();if(A.current=te?.getBoundingClientRect(),!w||!e||V.button!==0||V.target!==T.current||!A.current)return;V.target?.setPointerCapture?.(V.pointerId),L.current=!0,R.current=!1;const{x:B,y:$}=Xi(V.nativeEvent,A.current);Y(),x.setState({userSelectionRect:{width:0,height:0,startX:B,startY:$,x:B,y:$}}),s?.(V)},z=V=>{const{userSelectionRect:Y,transform:te,nodeLookup:B,edgeLookup:$,connectionLookup:oe,triggerNodeChanges:ae,triggerEdgeChanges:U,defaultEdgeOptions:Z}=x.getState();if(!A.current||!Y)return;R.current=!0;const{x:ee,y:de}=Xi(V.nativeEvent,A.current),{startX:ce,startY:ve}=Y,De={startX:ce,startY:ve,x:ee<ce?ee:ce,y:de<ve?de:ve,width:Math.abs(ee-ce),height:Math.abs(de-ve)},Pe=M.current,Ae=j.current;M.current=new Set(c2(B,De,te,n===Rd.Partial,!0).map(Se=>Se.id)),j.current=new Set;const Ee=Z?.selectable??!0;for(const Se of M.current){const Te=oe.get(Se);if(Te)for(const{edgeId:ot}of Te.values()){const Oe=$.get(ot);Oe&&(Oe.selectable??Ee)&&j.current.add(ot)}}if(!LR(Pe,M.current)){const Se=Xl(B,M.current,!0);ae(Se)}if(!LR(Ae,j.current)){const Se=Xl($,j.current);U(Se)}x.setState({userSelectionRect:De,userSelectionActive:!0,nodesSelectionActive:!1})},F=V=>{if(V.button!==0||!L.current)return;V.target?.releasePointerCapture?.(V.pointerId);const{userSelectionRect:Y}=x.getState();!S&&Y&&V.target===T.current&&I?.(V),x.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:M.current.size>0}),o?.(V),(t||i)&&(R.current=!1),L.current=!1},O=r===!0||Array.isArray(r)&&r.includes(0);return y.jsxs("div",{className:En(["react-flow__pane",{draggable:O,dragging:C,selection:e}]),onClick:k?void 0:jb(I,T),onContextMenu:jb(H,T),onWheel:jb(q,T),onPointerEnter:k?void 0:h,onPointerDown:k?W:p,onPointerMove:k?z:p,onPointerUp:k?F:void 0,onPointerLeave:m,ref:T,style:lg,children:[b,y.jsx(vae,{})]})}function kC({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:s,multiSelectionActive:o,nodeLookup:l,onError:u}=t.getState(),d=l.get(e);if(!d){u?.("012",ns.error012(e));return}t.setState({nodesSelectionActive:!1}),d.selected?(n||d.selected&&o)&&(s({nodes:[d],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):i([e])}function J8({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:s,nodeClickDistance:o}){const l=It(),[u,d]=D.useState(!1),h=D.useRef();return D.useEffect(()=>{h.current=uoe({getStoreItems:()=>l.getState(),onNodeMouseDown:p=>{kC({id:p,store:l,nodeRef:e})},onDragStart:()=>{d(!0)},onDragStop:()=>{d(!1)}})},[]),D.useEffect(()=>{if(t)h.current?.destroy();else if(e.current)return h.current?.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:s,nodeId:i,nodeClickDistance:o}),()=>{h.current?.destroy()}},[n,r,t,s,e,i]),u}const Sae=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function Q8(){const e=It();return D.useCallback(n=>{const{nodeExtent:r,snapToGrid:i,snapGrid:s,nodesDraggable:o,onError:l,updateNodePositions:u,nodeLookup:d,nodeOrigin:h}=e.getState(),p=new Map,m=Sae(o),b=i?s[0]:5,x=i?s[1]:5,S=n.direction.x*b*n.factor,w=n.direction.y*x*n.factor;for(const[,C]of d){if(!m(C))continue;let N={x:C.internals.positionAbsolute.x+S,y:C.internals.positionAbsolute.y+w};i&&(N=nf(N,s));const{position:k,positionAbsolute:T}=x8({nodeId:C.id,nextPosition:N,nodeLookup:d,nodeExtent:r,nodeOrigin:h,onError:l});C.position=k,C.internals.positionAbsolute=T,p.set(C.id,C)}u(p)},[])}const m2=D.createContext(null),Eae=m2.Provider;m2.Consumer;const eq=()=>D.useContext(m2),Cae=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),kae=(e,t,n)=>r=>{const{connectionClickStartHandle:i,connectionMode:s,connection:o}=r,{fromHandle:l,toHandle:u,isValid:d}=o,h=u?.nodeId===e&&u?.id===t&&u?.type===n;return{connectingFrom:l?.nodeId===e&&l?.id===t&&l?.type===n,connectingTo:h,clickConnecting:i?.nodeId===e&&i?.id===t&&i?.type===n,isPossibleEndHandle:s===Ha.Strict?l?.type!==n:e!==l?.nodeId||t!==l?.id,connectionInProcess:!!l,clickConnectionInProcess:!!i,valid:h&&d}};function Tae({type:e="source",position:t=_e.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:s=!0,id:o,onConnect:l,children:u,className:d,onMouseDown:h,onTouchStart:p,...m},b){const x=o||null,S=e==="target",w=It(),C=eq(),{connectOnClick:N,noPanClassName:k,rfId:T}=st(Cae,Gt),{connectingFrom:A,connectingTo:M,clickConnecting:j,isPossibleEndHandle:R,connectionInProcess:L,clickConnectionInProcess:I,valid:H}=st(kae(C,x,e),Gt);C||w.getState().onError?.("010",ns.error010());const q=F=>{const{defaultEdgeOptions:O,onConnect:V,hasDefaultEdges:Y}=w.getState(),te={...O,...F};if(Y){const{edges:B,setEdges:$}=w.getState();$(_8(te,B))}V?.(te),l?.(te)},W=F=>{if(!C)return;const O=A8(F.nativeEvent);if(i&&(O&&F.button===0||!O)){const V=w.getState();CC.onPointerDown(F.nativeEvent,{handleDomNode:F.currentTarget,autoPanOnConnect:V.autoPanOnConnect,connectionMode:V.connectionMode,connectionRadius:V.connectionRadius,domNode:V.domNode,nodeLookup:V.nodeLookup,lib:V.lib,isTarget:S,handleId:x,nodeId:C,flowId:V.rfId,panBy:V.panBy,cancelConnection:V.cancelConnection,onConnectStart:V.onConnectStart,onConnectEnd:V.onConnectEnd,updateConnection:V.updateConnection,onConnect:q,isValidConnection:n||V.isValidConnection,getTransform:()=>w.getState().transform,getFromHandle:()=>w.getState().connection.fromHandle,autoPanSpeed:V.autoPanSpeed,dragThreshold:V.connectionDragThreshold})}O?h?.(F):p?.(F)},z=F=>{const{onClickConnectStart:O,onClickConnectEnd:V,connectionClickStartHandle:Y,connectionMode:te,isValidConnection:B,lib:$,rfId:oe,nodeLookup:ae,connection:U}=w.getState();if(!C||!Y&&!i)return;if(!Y){O?.(F.nativeEvent,{nodeId:C,handleId:x,handleType:e}),w.setState({connectionClickStartHandle:{nodeId:C,type:e,id:x}});return}const Z=T8(F.target),ee=n||B,{connection:de,isValid:ce}=CC.isValid(F.nativeEvent,{handle:{nodeId:C,id:x,type:e},connectionMode:te,fromNodeId:Y.nodeId,fromHandleId:Y.id||null,fromType:Y.type,isValidConnection:ee,flowId:oe,doc:Z,lib:$,nodeLookup:ae});ce&&de&&q(de);const ve=structuredClone(U);delete ve.inProgress,ve.toPosition=ve.toHandle?ve.toHandle.position:null,V?.(F,ve),w.setState({connectionClickStartHandle:null})};return y.jsx("div",{"data-handleid":x,"data-nodeid":C,"data-handlepos":t,"data-id":`${T}-${C}-${x}-${e}`,className:En(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",k,d,{source:!S,target:S,connectable:r,connectablestart:i,connectableend:s,clickconnecting:j,connectingfrom:A,connectingto:M,valid:H,connectionindicator:r&&(!L||R)&&(L||I?s:i)}]),onMouseDown:W,onTouchStart:W,onClick:N?z:void 0,ref:b,...m,children:u})}const vn=D.memo(X8(Tae));function Nae({data:e,isConnectable:t,sourcePosition:n=_e.Bottom}){return y.jsxs(y.Fragment,{children:[e?.label,y.jsx(vn,{type:"source",position:n,isConnectable:t})]})}function Aae({data:e,isConnectable:t,targetPosition:n=_e.Top,sourcePosition:r=_e.Bottom}){return y.jsxs(y.Fragment,{children:[y.jsx(vn,{type:"target",position:n,isConnectable:t}),e?.label,y.jsx(vn,{type:"source",position:r,isConnectable:t})]})}function Mae(){return null}function _ae({data:e,isConnectable:t,targetPosition:n=_e.Top}){return y.jsxs(y.Fragment,{children:[y.jsx(vn,{type:"target",position:n,isConnectable:t}),e?.label]})}const ym={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},oj={input:Nae,default:Aae,output:_ae,group:Mae};function Dae(e){return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??e.style?.width,height:e.height??e.initialHeight??e.style?.height}:{width:e.width??e.style?.width,height:e.height??e.style?.height}}const Rae=e=>{const{width:t,height:n,x:r,y:i}=tf(e.nodeLookup,{filter:s=>!!s.selected});return{width:_i(t)?t:null,height:_i(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${i}px)`}};function jae({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=It(),{width:i,height:s,transformString:o,userSelectionActive:l}=st(Rae,Gt),u=Q8(),d=D.useRef(null);if(D.useEffect(()=>{n||d.current?.focus({preventScroll:!0})},[n]),J8({nodeRef:d}),l||!i||!s)return null;const h=e?m=>{const b=r.getState().nodes.filter(x=>x.selected);e(m,b)}:void 0,p=m=>{Object.prototype.hasOwnProperty.call(ym,m.key)&&(m.preventDefault(),u({direction:ym[m.key],factor:m.shiftKey?4:1}))};return y.jsx("div",{className:En(["react-flow__nodesselection","react-flow__container",t]),style:{transform:o},children:y.jsx("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:n?void 0:-1,onKeyDown:n?void 0:p,style:{width:i,height:s}})})}const aj=typeof window<"u"?window:void 0,Oae=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function tq({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,paneClickDistance:l,deleteKeyCode:u,selectionKeyCode:d,selectionOnDrag:h,selectionMode:p,onSelectionStart:m,onSelectionEnd:b,multiSelectionKeyCode:x,panActivationKeyCode:S,zoomActivationKeyCode:w,elementsSelectable:C,zoomOnScroll:N,zoomOnPinch:k,panOnScroll:T,panOnScrollSpeed:A,panOnScrollMode:M,zoomOnDoubleClick:j,panOnDrag:R,defaultViewport:L,translateExtent:I,minZoom:H,maxZoom:q,preventScrolling:W,onSelectionContextMenu:z,noWheelClassName:F,noPanClassName:O,disableKeyboardA11y:V,onViewportChange:Y,isControlledViewport:te}){const{nodesSelectionActive:B,userSelectionActive:$}=st(Oae),oe=Pd(d,{target:aj}),ae=Pd(S,{target:aj}),U=ae||R,Z=ae||T,ee=h&&U!==!0,de=oe||$||ee;return pae({deleteKeyCode:u,multiSelectionKeyCode:x}),y.jsx(yae,{onPaneContextMenu:s,elementsSelectable:C,zoomOnScroll:N,zoomOnPinch:k,panOnScroll:Z,panOnScrollSpeed:A,panOnScrollMode:M,zoomOnDoubleClick:j,panOnDrag:!oe&&U,defaultViewport:L,translateExtent:I,minZoom:H,maxZoom:q,zoomActivationKeyCode:w,preventScrolling:W,noWheelClassName:F,noPanClassName:O,onViewportChange:Y,isControlledViewport:te,paneClickDistance:l,children:y.jsxs(wae,{onSelectionStart:m,onSelectionEnd:b,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,panOnDrag:U,isSelecting:!!de,selectionMode:p,selectionKeyPressed:oe,selectionOnDrag:ee,children:[e,B&&y.jsx(jae,{onSelectionContextMenu:z,noPanClassName:O,disableKeyboardA11y:V})]})})}tq.displayName="FlowRenderer";const Lae=D.memo(tq),Pae=e=>t=>e?c2(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function Iae(e){return st(D.useCallback(Pae(e),[e]),Gt)}const Bae=e=>e.updateNodeInternals;function zae(){const e=st(Bae),[t]=D.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(i=>{const s=i.target.getAttribute("data-id");r.set(s,{id:s,nodeElement:i.target,force:!0})}),e(r)}));return D.useEffect(()=>()=>{t?.disconnect()},[t]),t}function qae({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const i=It(),s=D.useRef(null),o=D.useRef(null),l=D.useRef(e.sourcePosition),u=D.useRef(e.targetPosition),d=D.useRef(t),h=n&&!!e.internals.handleBounds;return D.useEffect(()=>{s.current&&!e.hidden&&(!h||o.current!==s.current)&&(o.current&&r?.unobserve(o.current),r?.observe(s.current),o.current=s.current)},[h,e.hidden]),D.useEffect(()=>()=>{o.current&&(r?.unobserve(o.current),o.current=null)},[]),D.useEffect(()=>{if(s.current){const p=d.current!==t,m=l.current!==e.sourcePosition,b=u.current!==e.targetPosition;(p||m||b)&&(d.current=t,l.current=e.sourcePosition,u.current=e.targetPosition,i.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:s.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),s}function Vae({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:i,onContextMenu:s,onDoubleClick:o,nodesDraggable:l,elementsSelectable:u,nodesConnectable:d,nodesFocusable:h,resizeObserver:p,noDragClassName:m,noPanClassName:b,disableKeyboardA11y:x,rfId:S,nodeTypes:w,nodeClickDistance:C,onError:N}){const{node:k,internals:T,isParent:A}=st(ce=>{const ve=ce.nodeLookup.get(e),De=ce.parentLookup.has(e);return{node:ve,internals:ve.internals,isParent:De}},Gt);let M=k.type||"default",j=w?.[M]||oj[M];j===void 0&&(N?.("003",ns.error003(M)),M="default",j=w?.default||oj.default);const R=!!(k.draggable||l&&typeof k.draggable>"u"),L=!!(k.selectable||u&&typeof k.selectable>"u"),I=!!(k.connectable||d&&typeof k.connectable>"u"),H=!!(k.focusable||h&&typeof k.focusable>"u"),q=It(),W=C8(k),z=qae({node:k,nodeType:M,hasDimensions:W,resizeObserver:p}),F=J8({nodeRef:z,disabled:k.hidden||!R,noDragClassName:m,handleSelector:k.dragHandle,nodeId:e,isSelectable:L,nodeClickDistance:C}),O=Q8();if(k.hidden)return null;const V=qs(k),Y=Dae(k),te=L||R||t||n||r||i,B=n?ce=>n(ce,{...T.userNode}):void 0,$=r?ce=>r(ce,{...T.userNode}):void 0,oe=i?ce=>i(ce,{...T.userNode}):void 0,ae=s?ce=>s(ce,{...T.userNode}):void 0,U=o?ce=>o(ce,{...T.userNode}):void 0,Z=ce=>{const{selectNodesOnDrag:ve,nodeDragThreshold:De}=q.getState();L&&(!ve||!R||De>0)&&kC({id:e,store:q,nodeRef:z}),t&&t(ce,{...T.userNode})},ee=ce=>{if(!(N8(ce.nativeEvent)||x)){if(p8.includes(ce.key)&&L){const ve=ce.key==="Escape";kC({id:e,store:q,unselect:ve,nodeRef:z})}else if(R&&k.selected&&Object.prototype.hasOwnProperty.call(ym,ce.key)){ce.preventDefault();const{ariaLabelConfig:ve}=q.getState();q.setState({ariaLiveMessage:ve["node.a11yDescription.ariaLiveMessage"]({direction:ce.key.replace("Arrow","").toLowerCase(),x:~~T.positionAbsolute.x,y:~~T.positionAbsolute.y})}),O({direction:ym[ce.key],factor:ce.shiftKey?4:1})}}},de=()=>{if(x||!z.current?.matches(":focus-visible"))return;const{transform:ce,width:ve,height:De,autoPanOnNodeFocus:Pe,setCenter:Ae}=q.getState();if(!Pe)return;c2(new Map([[e,k]]),{x:0,y:0,width:ve,height:De},ce,!0).length>0||Ae(k.position.x+V.width/2,k.position.y+V.height/2,{zoom:ce[2]})};return y.jsx("div",{className:En(["react-flow__node",`react-flow__node-${M}`,{[b]:R},k.className,{selected:k.selected,selectable:L,parent:A,draggable:R,dragging:F}]),ref:z,style:{zIndex:T.z,transform:`translate(${T.positionAbsolute.x}px,${T.positionAbsolute.y}px)`,pointerEvents:te?"all":"none",visibility:W?"visible":"hidden",...k.style,...Y},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:B,onMouseMove:$,onMouseLeave:oe,onContextMenu:ae,onClick:Z,onDoubleClick:U,onKeyDown:H?ee:void 0,tabIndex:H?0:void 0,onFocus:H?de:void 0,role:k.ariaRole??(H?"group":void 0),"aria-roledescription":"node","aria-describedby":x?void 0:`${U8}-${S}`,"aria-label":k.ariaLabel,...k.domAttributes,children:y.jsx(Eae,{value:e,children:y.jsx(j,{id:e,data:k.data,type:M,positionAbsoluteX:T.positionAbsolute.x,positionAbsoluteY:T.positionAbsolute.y,selected:k.selected??!1,selectable:L,draggable:R,deletable:k.deletable??!0,isConnectable:I,sourcePosition:k.sourcePosition,targetPosition:k.targetPosition,dragging:F,dragHandle:k.dragHandle,zIndex:T.z,parentId:k.parentId,...V})})})}const Hae=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function nq(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,onError:s}=st(Hae,Gt),o=Iae(e.onlyRenderVisibleElements),l=zae();return y.jsx("div",{className:"react-flow__nodes",style:lg,children:o.map(u=>y.jsx(Vae,{id:u,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:l,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,nodeClickDistance:e.nodeClickDistance,onError:s},u))})}nq.displayName="NodeRenderer";const Fae=D.memo(nq);function Uae(e){return st(D.useCallback(n=>{if(!e)return n.edges.map(i=>i.id);const r=[];if(n.width&&n.height)for(const i of n.edges){const s=n.nodeLookup.get(i.source),o=n.nodeLookup.get(i.target);s&&o&&Kse({sourceNode:s,targetNode:o,width:n.width,height:n.height,transform:n.transform})&&r.push(i.id)}return r},[e]),Gt)}const $ae=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e}};return y.jsx("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},Gae=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e,fill:e}};return y.jsx("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},lj={[pm.Arrow]:$ae,[pm.ArrowClosed]:Gae};function Wae(e){const t=It();return D.useMemo(()=>Object.prototype.hasOwnProperty.call(lj,e)?lj[e]:(t.getState().onError?.("009",ns.error009(e)),null),[e])}const Kae=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:s="strokeWidth",strokeWidth:o,orient:l="auto-start-reverse"})=>{const u=Wae(t);return u?y.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:l,refX:"0",refY:"0",children:y.jsx(u,{color:n,strokeWidth:o})}):null},rq=({defaultColor:e,rfId:t})=>{const n=st(s=>s.edges),r=st(s=>s.defaultEdgeOptions),i=D.useMemo(()=>toe(n,{id:t,defaultColor:e,defaultMarkerStart:r?.markerStart,defaultMarkerEnd:r?.markerEnd}),[n,r,t,e]);return i.length?y.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:y.jsx("defs",{children:i.map(s=>y.jsx(Kae,{id:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient},s.id))})}):null};rq.displayName="MarkerDefinitions";var Yae=D.memo(rq);function iq({x:e,y:t,label:n,labelStyle:r,labelShowBg:i=!0,labelBgStyle:s,labelBgPadding:o=[2,4],labelBgBorderRadius:l=2,children:u,className:d,...h}){const[p,m]=D.useState({x:1,y:0,width:0,height:0}),b=En(["react-flow__edge-textwrapper",d]),x=D.useRef(null);return D.useEffect(()=>{if(x.current){const S=x.current.getBBox();m({x:S.x,y:S.y,width:S.width,height:S.height})}},[n]),n?y.jsxs("g",{transform:`translate(${e-p.width/2} ${t-p.height/2})`,className:b,visibility:p.width?"visible":"hidden",...h,children:[i&&y.jsx("rect",{width:p.width+2*o[0],x:-o[0],y:-o[1],height:p.height+2*o[1],className:"react-flow__edge-textbg",style:s,rx:l,ry:l}),y.jsx("text",{className:"react-flow__edge-text",y:p.height/2,dy:"0.3em",ref:x,style:r,children:n}),u]}):null}iq.displayName="EdgeText";const Xae=D.memo(iq);function cg({path:e,labelX:t,labelY:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,interactionWidth:d=20,...h}){return y.jsxs(y.Fragment,{children:[y.jsx("path",{...h,d:e,fill:"none",className:En(["react-flow__edge-path",h.className])}),d?y.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:d,className:"react-flow__edge-interaction"}):null,r&&_i(t)&&_i(n)?y.jsx(Xae,{x:t,y:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u}):null]})}function cj({pos:e,x1:t,y1:n,x2:r,y2:i}){return e===_e.Left||e===_e.Right?[.5*(t+r),n]:[t,.5*(n+i)]}function sq({sourceX:e,sourceY:t,sourcePosition:n=_e.Bottom,targetX:r,targetY:i,targetPosition:s=_e.Top}){const[o,l]=cj({pos:n,x1:e,y1:t,x2:r,y2:i}),[u,d]=cj({pos:s,x1:r,y1:i,x2:e,y2:t}),[h,p,m,b]=M8({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:o,sourceControlY:l,targetControlX:u,targetControlY:d});return[`M${e},${t} C${o},${l} ${u},${d} ${r},${i}`,h,p,m,b]}function oq(e){return D.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o,targetPosition:l,label:u,labelStyle:d,labelShowBg:h,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:b,style:x,markerEnd:S,markerStart:w,interactionWidth:C})=>{const[N,k,T]=sq({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:l}),A=e.isInternal?void 0:t;return y.jsx(cg,{id:A,path:N,labelX:k,labelY:T,label:u,labelStyle:d,labelShowBg:h,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:b,style:x,markerEnd:S,markerStart:w,interactionWidth:C})})}const Zae=oq({isInternal:!1}),aq=oq({isInternal:!0});Zae.displayName="SimpleBezierEdge";aq.displayName="SimpleBezierEdgeInternal";function lq(e){return D.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p,style:m,sourcePosition:b=_e.Bottom,targetPosition:x=_e.Top,markerEnd:S,markerStart:w,pathOptions:C,interactionWidth:N})=>{const[k,T,A]=wC({sourceX:n,sourceY:r,sourcePosition:b,targetX:i,targetY:s,targetPosition:x,borderRadius:C?.borderRadius,offset:C?.offset,stepPosition:C?.stepPosition}),M=e.isInternal?void 0:t;return y.jsx(cg,{id:M,path:k,labelX:T,labelY:A,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p,style:m,markerEnd:S,markerStart:w,interactionWidth:N})})}const cq=lq({isInternal:!1}),uq=lq({isInternal:!0});cq.displayName="SmoothStepEdge";uq.displayName="SmoothStepEdgeInternal";function dq(e){return D.memo(({id:t,...n})=>{const r=e.isInternal?void 0:t;return y.jsx(cq,{...n,id:r,pathOptions:D.useMemo(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}const Jae=dq({isInternal:!1}),fq=dq({isInternal:!0});Jae.displayName="StepEdge";fq.displayName="StepEdgeInternal";function hq(e){return D.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p,style:m,markerEnd:b,markerStart:x,interactionWidth:S})=>{const[w,C,N]=D8({sourceX:n,sourceY:r,targetX:i,targetY:s}),k=e.isInternal?void 0:t;return y.jsx(cg,{id:k,path:w,labelX:C,labelY:N,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p,style:m,markerEnd:b,markerStart:x,interactionWidth:S})})}const Qae=hq({isInternal:!1}),pq=hq({isInternal:!0});Qae.displayName="StraightEdge";pq.displayName="StraightEdgeInternal";function mq(e){return D.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o=_e.Bottom,targetPosition:l=_e.Top,label:u,labelStyle:d,labelShowBg:h,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:b,style:x,markerEnd:S,markerStart:w,pathOptions:C,interactionWidth:N})=>{const[k,T,A]=rg({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:l,curvature:C?.curvature}),M=e.isInternal?void 0:t;return y.jsx(cg,{id:M,path:k,labelX:T,labelY:A,label:u,labelStyle:d,labelShowBg:h,labelBgStyle:p,labelBgPadding:m,labelBgBorderRadius:b,style:x,markerEnd:S,markerStart:w,interactionWidth:N})})}const ele=mq({isInternal:!1}),gq=mq({isInternal:!0});ele.displayName="BezierEdge";gq.displayName="BezierEdgeInternal";const uj={default:gq,straight:pq,step:fq,smoothstep:uq,simplebezier:aq},dj={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},tle=(e,t,n)=>n===_e.Left?e-t:n===_e.Right?e+t:e,nle=(e,t,n)=>n===_e.Top?e-t:n===_e.Bottom?e+t:e,fj="react-flow__edgeupdater";function hj({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:s,onMouseOut:o,type:l}){return y.jsx("circle",{onMouseDown:i,onMouseEnter:s,onMouseOut:o,className:En([fj,`${fj}-${l}`]),cx:tle(t,r,e),cy:nle(n,r,e),r,stroke:"transparent",fill:"transparent"})}function rle({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:i,targetX:s,targetY:o,sourcePosition:l,targetPosition:u,onReconnect:d,onReconnectStart:h,onReconnectEnd:p,setReconnecting:m,setUpdateHover:b}){const x=It(),S=(T,A)=>{if(T.button!==0)return;const{autoPanOnConnect:M,domNode:j,isValidConnection:R,connectionMode:L,connectionRadius:I,lib:H,onConnectStart:q,onConnectEnd:W,cancelConnection:z,nodeLookup:F,rfId:O,panBy:V,updateConnection:Y}=x.getState(),te=A.type==="target",B=(ae,U)=>{m(!1),p?.(ae,n,A.type,U)},$=ae=>d?.(n,ae),oe=(ae,U)=>{m(!0),h?.(T,n,A.type),q?.(ae,U)};CC.onPointerDown(T.nativeEvent,{autoPanOnConnect:M,connectionMode:L,connectionRadius:I,domNode:j,handleId:A.id,nodeId:A.nodeId,nodeLookup:F,isTarget:te,edgeUpdaterType:A.type,lib:H,flowId:O,cancelConnection:z,panBy:V,isValidConnection:R,onConnect:$,onConnectStart:oe,onConnectEnd:W,onReconnectEnd:B,updateConnection:Y,getTransform:()=>x.getState().transform,getFromHandle:()=>x.getState().connection.fromHandle,dragThreshold:x.getState().connectionDragThreshold,handleDomNode:T.currentTarget})},w=T=>S(T,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),C=T=>S(T,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),N=()=>b(!0),k=()=>b(!1);return y.jsxs(y.Fragment,{children:[(e===!0||e==="source")&&y.jsx(hj,{position:l,centerX:r,centerY:i,radius:t,onMouseDown:w,onMouseEnter:N,onMouseOut:k,type:"source"}),(e===!0||e==="target")&&y.jsx(hj,{position:u,centerX:s,centerY:o,radius:t,onMouseDown:C,onMouseEnter:N,onMouseOut:k,type:"target"})]})}function ile({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:i,onDoubleClick:s,onContextMenu:o,onMouseEnter:l,onMouseMove:u,onMouseLeave:d,reconnectRadius:h,onReconnect:p,onReconnectStart:m,onReconnectEnd:b,rfId:x,edgeTypes:S,noPanClassName:w,onError:C,disableKeyboardA11y:N}){let k=st(Ae=>Ae.edgeLookup.get(e));const T=st(Ae=>Ae.defaultEdgeOptions);k=T?{...T,...k}:k;let A=k.type||"default",M=S?.[A]||uj[A];M===void 0&&(C?.("011",ns.error011(A)),A="default",M=S?.default||uj.default);const j=!!(k.focusable||t&&typeof k.focusable>"u"),R=typeof p<"u"&&(k.reconnectable||n&&typeof k.reconnectable>"u"),L=!!(k.selectable||r&&typeof k.selectable>"u"),I=D.useRef(null),[H,q]=D.useState(!1),[W,z]=D.useState(!1),F=It(),{zIndex:O,sourceX:V,sourceY:Y,targetX:te,targetY:B,sourcePosition:$,targetPosition:oe}=st(D.useCallback(Ae=>{const Ee=Ae.nodeLookup.get(k.source),Se=Ae.nodeLookup.get(k.target);if(!Ee||!Se)return{zIndex:k.zIndex,...dj};const Te=eoe({id:e,sourceNode:Ee,targetNode:Se,sourceHandle:k.sourceHandle||null,targetHandle:k.targetHandle||null,connectionMode:Ae.connectionMode,onError:C});return{zIndex:Wse({selected:k.selected,zIndex:k.zIndex,sourceNode:Ee,targetNode:Se,elevateOnSelect:Ae.elevateEdgesOnSelect}),...Te||dj}},[k.source,k.target,k.sourceHandle,k.targetHandle,k.selected,k.zIndex]),Gt),ae=D.useMemo(()=>k.markerStart?`url('#${SC(k.markerStart,x)}')`:void 0,[k.markerStart,x]),U=D.useMemo(()=>k.markerEnd?`url('#${SC(k.markerEnd,x)}')`:void 0,[k.markerEnd,x]);if(k.hidden||V===null||Y===null||te===null||B===null)return null;const Z=Ae=>{const{addSelectedEdges:Ee,unselectNodesAndEdges:Se,multiSelectionActive:Te}=F.getState();L&&(F.setState({nodesSelectionActive:!1}),k.selected&&Te?(Se({nodes:[],edges:[k]}),I.current?.blur()):Ee([e])),i&&i(Ae,k)},ee=s?Ae=>{s(Ae,{...k})}:void 0,de=o?Ae=>{o(Ae,{...k})}:void 0,ce=l?Ae=>{l(Ae,{...k})}:void 0,ve=u?Ae=>{u(Ae,{...k})}:void 0,De=d?Ae=>{d(Ae,{...k})}:void 0,Pe=Ae=>{if(!N&&p8.includes(Ae.key)&&L){const{unselectNodesAndEdges:Ee,addSelectedEdges:Se}=F.getState();Ae.key==="Escape"?(I.current?.blur(),Ee({edges:[k]})):Se([e])}};return y.jsx("svg",{style:{zIndex:O},children:y.jsxs("g",{className:En(["react-flow__edge",`react-flow__edge-${A}`,k.className,w,{selected:k.selected,animated:k.animated,inactive:!L&&!i,updating:H,selectable:L}]),onClick:Z,onDoubleClick:ee,onContextMenu:de,onMouseEnter:ce,onMouseMove:ve,onMouseLeave:De,onKeyDown:j?Pe:void 0,tabIndex:j?0:void 0,role:k.ariaRole??(j?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":k.ariaLabel===null?void 0:k.ariaLabel||`Edge from ${k.source} to ${k.target}`,"aria-describedby":j?`${$8}-${x}`:void 0,ref:I,...k.domAttributes,children:[!W&&y.jsx(M,{id:e,source:k.source,target:k.target,type:k.type,selected:k.selected,animated:k.animated,selectable:L,deletable:k.deletable??!0,label:k.label,labelStyle:k.labelStyle,labelShowBg:k.labelShowBg,labelBgStyle:k.labelBgStyle,labelBgPadding:k.labelBgPadding,labelBgBorderRadius:k.labelBgBorderRadius,sourceX:V,sourceY:Y,targetX:te,targetY:B,sourcePosition:$,targetPosition:oe,data:k.data,style:k.style,sourceHandleId:k.sourceHandle,targetHandleId:k.targetHandle,markerStart:ae,markerEnd:U,pathOptions:"pathOptions"in k?k.pathOptions:void 0,interactionWidth:k.interactionWidth}),R&&y.jsx(rle,{edge:k,isReconnectable:R,reconnectRadius:h,onReconnect:p,onReconnectStart:m,onReconnectEnd:b,sourceX:V,sourceY:Y,targetX:te,targetY:B,sourcePosition:$,targetPosition:oe,setUpdateHover:q,setReconnecting:z})]})})}const sle=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function yq({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:i,onReconnect:s,onEdgeContextMenu:o,onEdgeMouseEnter:l,onEdgeMouseMove:u,onEdgeMouseLeave:d,onEdgeClick:h,reconnectRadius:p,onEdgeDoubleClick:m,onReconnectStart:b,onReconnectEnd:x,disableKeyboardA11y:S}){const{edgesFocusable:w,edgesReconnectable:C,elementsSelectable:N,onError:k}=st(sle,Gt),T=Uae(t);return y.jsxs("div",{className:"react-flow__edges",children:[y.jsx(Yae,{defaultColor:e,rfId:n}),T.map(A=>y.jsx(ile,{id:A,edgesFocusable:w,edgesReconnectable:C,elementsSelectable:N,noPanClassName:i,onReconnect:s,onContextMenu:o,onMouseEnter:l,onMouseMove:u,onMouseLeave:d,onClick:h,reconnectRadius:p,onDoubleClick:m,onReconnectStart:b,onReconnectEnd:x,rfId:n,onError:k,edgeTypes:r,disableKeyboardA11y:S},A))]})}yq.displayName="EdgeRenderer";const ole=D.memo(yq),ale=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function lle({children:e}){const t=st(ale);return y.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function cle(e){const t=Id(),n=D.useRef(!1);D.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const ule=e=>e.panZoom?.syncViewport;function dle(e){const t=st(ule),n=It();return D.useEffect(()=>{e&&(t?.(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function fle(e){return e.connection.inProgress?{...e.connection,to:rf(e.connection.to,e.transform)}:{...e.connection}}function hle(e){return fle}function ple(e){const t=hle();return st(t,Gt)}const mle=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function gle({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:i,width:s,height:o,isValid:l,inProgress:u}=st(mle,Gt);return!(s&&i&&u)?null:y.jsx("svg",{style:e,width:s,height:o,className:"react-flow__connectionline react-flow__container",children:y.jsx("g",{className:En(["react-flow__connection",y8(l)]),children:y.jsx(bq,{style:t,type:n,CustomComponent:r,isValid:l})})})}const bq=({style:e,type:t=Ao.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:i,from:s,fromNode:o,fromHandle:l,fromPosition:u,to:d,toNode:h,toHandle:p,toPosition:m}=ple();if(!i)return;if(n)return y.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:o,fromHandle:l,fromX:s.x,fromY:s.y,toX:d.x,toY:d.y,fromPosition:u,toPosition:m,connectionStatus:y8(r),toNode:h,toHandle:p});let b="";const x={sourceX:s.x,sourceY:s.y,sourcePosition:u,targetX:d.x,targetY:d.y,targetPosition:m};switch(t){case Ao.Bezier:[b]=rg(x);break;case Ao.SimpleBezier:[b]=sq(x);break;case Ao.Step:[b]=wC({...x,borderRadius:0});break;case Ao.SmoothStep:[b]=wC(x);break;default:[b]=D8(x)}return y.jsx("path",{d:b,fill:"none",className:"react-flow__connection-path",style:e})};bq.displayName="ConnectionLine";const yle={};function pj(e=yle){D.useRef(e),It(),D.useEffect(()=>{},[e])}function ble(){It(),D.useRef(!1),D.useEffect(()=>{},[])}function vq({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:i,onNodeDoubleClick:s,onEdgeDoubleClick:o,onNodeMouseEnter:l,onNodeMouseMove:u,onNodeMouseLeave:d,onNodeContextMenu:h,onSelectionContextMenu:p,onSelectionStart:m,onSelectionEnd:b,connectionLineType:x,connectionLineStyle:S,connectionLineComponent:w,connectionLineContainerStyle:C,selectionKeyCode:N,selectionOnDrag:k,selectionMode:T,multiSelectionKeyCode:A,panActivationKeyCode:M,zoomActivationKeyCode:j,deleteKeyCode:R,onlyRenderVisibleElements:L,elementsSelectable:I,defaultViewport:H,translateExtent:q,minZoom:W,maxZoom:z,preventScrolling:F,defaultMarkerColor:O,zoomOnScroll:V,zoomOnPinch:Y,panOnScroll:te,panOnScrollSpeed:B,panOnScrollMode:$,zoomOnDoubleClick:oe,panOnDrag:ae,onPaneClick:U,onPaneMouseEnter:Z,onPaneMouseMove:ee,onPaneMouseLeave:de,onPaneScroll:ce,onPaneContextMenu:ve,paneClickDistance:De,nodeClickDistance:Pe,onEdgeContextMenu:Ae,onEdgeMouseEnter:Ee,onEdgeMouseMove:Se,onEdgeMouseLeave:Te,reconnectRadius:ot,onReconnect:Oe,onReconnectStart:Mt,onReconnectEnd:Wt,noDragClassName:Dn,noWheelClassName:rn,noPanClassName:_t,disableKeyboardA11y:mt,nodeExtent:Rn,rfId:sn,viewport:zt,onViewportChange:ht}){return pj(e),pj(t),ble(),cle(n),dle(zt),y.jsx(Lae,{onPaneClick:U,onPaneMouseEnter:Z,onPaneMouseMove:ee,onPaneMouseLeave:de,onPaneContextMenu:ve,onPaneScroll:ce,paneClickDistance:De,deleteKeyCode:R,selectionKeyCode:N,selectionOnDrag:k,selectionMode:T,onSelectionStart:m,onSelectionEnd:b,multiSelectionKeyCode:A,panActivationKeyCode:M,zoomActivationKeyCode:j,elementsSelectable:I,zoomOnScroll:V,zoomOnPinch:Y,zoomOnDoubleClick:oe,panOnScroll:te,panOnScrollSpeed:B,panOnScrollMode:$,panOnDrag:ae,defaultViewport:H,translateExtent:q,minZoom:W,maxZoom:z,onSelectionContextMenu:p,preventScrolling:F,noDragClassName:Dn,noWheelClassName:rn,noPanClassName:_t,disableKeyboardA11y:mt,onViewportChange:ht,isControlledViewport:!!zt,children:y.jsxs(lle,{children:[y.jsx(ole,{edgeTypes:t,onEdgeClick:i,onEdgeDoubleClick:o,onReconnect:Oe,onReconnectStart:Mt,onReconnectEnd:Wt,onlyRenderVisibleElements:L,onEdgeContextMenu:Ae,onEdgeMouseEnter:Ee,onEdgeMouseMove:Se,onEdgeMouseLeave:Te,reconnectRadius:ot,defaultMarkerColor:O,noPanClassName:_t,disableKeyboardA11y:mt,rfId:sn}),y.jsx(gle,{style:S,type:x,component:w,containerStyle:C}),y.jsx("div",{className:"react-flow__edgelabel-renderer"}),y.jsx(Fae,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:s,onNodeMouseEnter:l,onNodeMouseMove:u,onNodeMouseLeave:d,onNodeContextMenu:h,nodeClickDistance:Pe,onlyRenderVisibleElements:L,noPanClassName:_t,noDragClassName:Dn,disableKeyboardA11y:mt,nodeExtent:Rn,rfId:sn}),y.jsx("div",{className:"react-flow__viewport-portal"})]})})}vq.displayName="GraphView";const vle=D.memo(vq),mj=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,fitViewOptions:l,minZoom:u=.5,maxZoom:d=2,nodeOrigin:h,nodeExtent:p}={})=>{const m=new Map,b=new Map,x=new Map,S=new Map,w=r??t??[],C=n??e??[],N=h??[0,0],k=p??Dd;j8(x,S,w);const T=EC(C,m,b,{nodeOrigin:N,nodeExtent:k,elevateNodesOnSelect:!1});let A=[0,0,1];if(o&&i&&s){const M=tf(m,{filter:I=>!!((I.width||I.initialWidth)&&(I.height||I.initialHeight))}),{x:j,y:R,zoom:L}=ng(M,i,s,u,d,l?.padding??.1);A=[j,R,L]}return{rfId:"1",width:0,height:0,transform:A,nodes:C,nodesInitialized:T,nodeLookup:m,parentLookup:b,edges:w,edgeLookup:S,connectionLookup:x,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:u,maxZoom:d,translateExtent:Dd,nodeExtent:k,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Ha.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:N,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:o??!1,fitViewOptions:l,fitViewResolver:null,connection:{...g8},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:Vse,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:m8}},xle=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,fitViewOptions:l,minZoom:u,maxZoom:d,nodeOrigin:h,nodeExtent:p})=>qoe((m,b)=>{async function x(){const{nodeLookup:S,panZoom:w,fitViewOptions:C,fitViewResolver:N,width:k,height:T,minZoom:A,maxZoom:M}=b();w&&(await zse({nodes:S,width:k,height:T,panZoom:w,minZoom:A,maxZoom:M},C),N?.resolve(!0),m({fitViewResolver:null}))}return{...mj({nodes:e,edges:t,width:i,height:s,fitView:o,fitViewOptions:l,minZoom:u,maxZoom:d,nodeOrigin:h,nodeExtent:p,defaultNodes:n,defaultEdges:r}),setNodes:S=>{const{nodeLookup:w,parentLookup:C,nodeOrigin:N,elevateNodesOnSelect:k,fitViewQueued:T}=b(),A=EC(S,w,C,{nodeOrigin:N,nodeExtent:p,elevateNodesOnSelect:k,checkEquality:!0});T&&A?(x(),m({nodes:S,nodesInitialized:A,fitViewQueued:!1,fitViewOptions:void 0})):m({nodes:S,nodesInitialized:A})},setEdges:S=>{const{connectionLookup:w,edgeLookup:C}=b();j8(w,C,S),m({edges:S})},setDefaultNodesAndEdges:(S,w)=>{if(S){const{setNodes:C}=b();C(S),m({hasDefaultNodes:!0})}if(w){const{setEdges:C}=b();C(w),m({hasDefaultEdges:!0})}},updateNodeInternals:S=>{const{triggerNodeChanges:w,nodeLookup:C,parentLookup:N,domNode:k,nodeOrigin:T,nodeExtent:A,debug:M,fitViewQueued:j}=b(),{changes:R,updatedInternals:L}=ooe(S,C,N,k,T,A);L&&(roe(C,N,{nodeOrigin:T,nodeExtent:A}),j?(x(),m({fitViewQueued:!1,fitViewOptions:void 0})):m({}),R?.length>0&&(M&&console.log("React Flow: trigger node changes",R),w?.(R)))},updateNodePositions:(S,w=!1)=>{const C=[],N=[],{nodeLookup:k,triggerNodeChanges:T}=b();for(const[A,M]of S){const j=k.get(A),R=!!(j?.expandParent&&j?.parentId&&M?.position),L={id:A,type:"position",position:R?{x:Math.max(0,M.position.x),y:Math.max(0,M.position.y)}:M.position,dragging:w};R&&j.parentId&&C.push({id:A,parentId:j.parentId,rect:{...M.internals.positionAbsolute,width:M.measured.width??0,height:M.measured.height??0}}),N.push(L)}if(C.length>0){const{parentLookup:A,nodeOrigin:M}=b(),j=p2(C,k,A,M);N.push(...j)}T(N)},triggerNodeChanges:S=>{const{onNodesChange:w,setNodes:C,nodes:N,hasDefaultNodes:k,debug:T}=b();if(S?.length){if(k){const A=K8(S,N);C(A)}T&&console.log("React Flow: trigger node changes",S),w?.(S)}},triggerEdgeChanges:S=>{const{onEdgesChange:w,setEdges:C,edges:N,hasDefaultEdges:k,debug:T}=b();if(S?.length){if(k){const A=Y8(S,N);C(A)}T&&console.log("React Flow: trigger edge changes",S),w?.(S)}},addSelectedNodes:S=>{const{multiSelectionActive:w,edgeLookup:C,nodeLookup:N,triggerNodeChanges:k,triggerEdgeChanges:T}=b();if(w){const A=S.map(M=>ma(M,!0));k(A);return}k(Xl(N,new Set([...S]),!0)),T(Xl(C))},addSelectedEdges:S=>{const{multiSelectionActive:w,edgeLookup:C,nodeLookup:N,triggerNodeChanges:k,triggerEdgeChanges:T}=b();if(w){const A=S.map(M=>ma(M,!0));T(A);return}T(Xl(C,new Set([...S]))),k(Xl(N,new Set,!0))},unselectNodesAndEdges:({nodes:S,edges:w}={})=>{const{edges:C,nodes:N,nodeLookup:k,triggerNodeChanges:T,triggerEdgeChanges:A}=b(),M=S||N,j=w||C,R=M.map(I=>{const H=k.get(I.id);return H&&(H.selected=!1),ma(I.id,!1)}),L=j.map(I=>ma(I.id,!1));T(R),A(L)},setMinZoom:S=>{const{panZoom:w,maxZoom:C}=b();w?.setScaleExtent([S,C]),m({minZoom:S})},setMaxZoom:S=>{const{panZoom:w,minZoom:C}=b();w?.setScaleExtent([C,S]),m({maxZoom:S})},setTranslateExtent:S=>{b().panZoom?.setTranslateExtent(S),m({translateExtent:S})},setPaneClickDistance:S=>{b().panZoom?.setClickDistance(S)},resetSelectedElements:()=>{const{edges:S,nodes:w,triggerNodeChanges:C,triggerEdgeChanges:N,elementsSelectable:k}=b();if(!k)return;const T=w.reduce((M,j)=>j.selected?[...M,ma(j.id,!1)]:M,[]),A=S.reduce((M,j)=>j.selected?[...M,ma(j.id,!1)]:M,[]);C(T),N(A)},setNodeExtent:S=>{const{nodes:w,nodeLookup:C,parentLookup:N,nodeOrigin:k,elevateNodesOnSelect:T,nodeExtent:A}=b();S[0][0]===A[0][0]&&S[0][1]===A[0][1]&&S[1][0]===A[1][0]&&S[1][1]===A[1][1]||(EC(w,C,N,{nodeOrigin:k,nodeExtent:S,elevateNodesOnSelect:T,checkEquality:!1}),m({nodeExtent:S}))},panBy:S=>{const{transform:w,width:C,height:N,panZoom:k,translateExtent:T}=b();return aoe({delta:S,panZoom:k,transform:w,translateExtent:T,width:C,height:N})},setCenter:async(S,w,C)=>{const{width:N,height:k,maxZoom:T,panZoom:A}=b();if(!A)return Promise.resolve(!1);const M=typeof C?.zoom<"u"?C.zoom:T;return await A.setViewport({x:N/2-S*M,y:k/2-w*M,zoom:M},{duration:C?.duration,ease:C?.ease,interpolate:C?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{m({connection:{...g8}})},updateConnection:S=>{m({connection:S})},reset:()=>m({...mj()})}},Object.is);function xq({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:i,initialHeight:s,initialMinZoom:o,initialMaxZoom:l,initialFitViewOptions:u,fitView:d,nodeOrigin:h,nodeExtent:p,children:m}){const[b]=D.useState(()=>xle({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:d,minZoom:o,maxZoom:l,fitViewOptions:u,nodeOrigin:h,nodeExtent:p}));return y.jsx(Voe,{value:b,children:y.jsx(uae,{children:m})})}function wle({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:i,width:s,height:o,fitView:l,fitViewOptions:u,minZoom:d,maxZoom:h,nodeOrigin:p,nodeExtent:m}){return D.useContext(og)?y.jsx(y.Fragment,{children:e}):y.jsx(xq,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:i,initialWidth:s,initialHeight:o,fitView:l,initialFitViewOptions:u,initialMinZoom:d,initialMaxZoom:h,nodeOrigin:p,nodeExtent:m,children:e})}const Sle={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function Ele({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:s,edgeTypes:o,onNodeClick:l,onEdgeClick:u,onInit:d,onMove:h,onMoveStart:p,onMoveEnd:m,onConnect:b,onConnectStart:x,onConnectEnd:S,onClickConnectStart:w,onClickConnectEnd:C,onNodeMouseEnter:N,onNodeMouseMove:k,onNodeMouseLeave:T,onNodeContextMenu:A,onNodeDoubleClick:M,onNodeDragStart:j,onNodeDrag:R,onNodeDragStop:L,onNodesDelete:I,onEdgesDelete:H,onDelete:q,onSelectionChange:W,onSelectionDragStart:z,onSelectionDrag:F,onSelectionDragStop:O,onSelectionContextMenu:V,onSelectionStart:Y,onSelectionEnd:te,onBeforeDelete:B,connectionMode:$,connectionLineType:oe=Ao.Bezier,connectionLineStyle:ae,connectionLineComponent:U,connectionLineContainerStyle:Z,deleteKeyCode:ee="Backspace",selectionKeyCode:de="Shift",selectionOnDrag:ce=!1,selectionMode:ve=Rd.Full,panActivationKeyCode:De="Space",multiSelectionKeyCode:Pe=Od()?"Meta":"Control",zoomActivationKeyCode:Ae=Od()?"Meta":"Control",snapToGrid:Ee,snapGrid:Se,onlyRenderVisibleElements:Te=!1,selectNodesOnDrag:ot,nodesDraggable:Oe,autoPanOnNodeFocus:Mt,nodesConnectable:Wt,nodesFocusable:Dn,nodeOrigin:rn=G8,edgesFocusable:_t,edgesReconnectable:mt,elementsSelectable:Rn=!0,defaultViewport:sn=eae,minZoom:zt=.5,maxZoom:ht=2,translateExtent:qe=Dd,preventScrolling:Ve=!0,nodeExtent:Mr,defaultMarkerColor:Rt="#b1b1b7",zoomOnScroll:Kt=!0,zoomOnPinch:Yt=!0,panOnScroll:on=!1,panOnScrollSpeed:Xt=.5,panOnScrollMode:kn=Oa.Free,zoomOnDoubleClick:Tn=!0,panOnDrag:_r=!0,onPaneClick:yi,onPaneMouseEnter:gr,onPaneMouseMove:Kr,onPaneMouseLeave:yr,onPaneScroll:bi,onPaneContextMenu:Fs,paneClickDistance:Yr=0,nodeClickDistance:vt=0,children:sr,onReconnect:Us,onReconnectStart:Oi,onReconnectEnd:Yn,onEdgeContextMenu:qt,onEdgeDoubleClick:an,onEdgeMouseEnter:Xr,onEdgeMouseMove:Ie,onEdgeMouseLeave:Xn,reconnectRadius:Li=10,onNodesChange:Pi,onEdgesChange:or,noDragClassName:Dr="nodrag",noWheelClassName:fn="nowheel",noPanClassName:jn="nopan",fitView:Rr,fitViewOptions:Zn,connectOnClick:Et,attributionPosition:ss,proOptions:je,defaultEdgeOptions:X,elevateNodesOnSelect:ge,elevateEdgesOnSelect:Me,disableKeyboardA11y:ut=!1,autoPanOnConnect:Tt,autoPanOnNodeDrag:Nt,autoPanSpeed:Vt,connectionRadius:Nn,isValidConnection:hn,onError:vi,style:jt,id:br,nodeDragThreshold:Ii,connectionDragThreshold:Bi,viewport:Ko,onViewportChange:as,width:Jn,height:zi,colorMode:tl="light",debug:ls,onScroll:$s,ariaLabelConfig:Gs,...kc},pn){const cs=br||"1",nl=iae(tl),Yo=D.useCallback(xi=>{xi.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),$s?.(xi)},[$s]);return y.jsx("div",{"data-testid":"rf__wrapper",...kc,onScroll:Yo,style:{...jt,...Sle},ref:pn,className:En(["react-flow",i,nl]),id:br,role:"application",children:y.jsxs(wle,{nodes:e,edges:t,width:Jn,height:zi,fitView:Rr,fitViewOptions:Zn,minZoom:zt,maxZoom:ht,nodeOrigin:rn,nodeExtent:Mr,children:[y.jsx(vle,{onInit:d,onNodeClick:l,onEdgeClick:u,onNodeMouseEnter:N,onNodeMouseMove:k,onNodeMouseLeave:T,onNodeContextMenu:A,onNodeDoubleClick:M,nodeTypes:s,edgeTypes:o,connectionLineType:oe,connectionLineStyle:ae,connectionLineComponent:U,connectionLineContainerStyle:Z,selectionKeyCode:de,selectionOnDrag:ce,selectionMode:ve,deleteKeyCode:ee,multiSelectionKeyCode:Pe,panActivationKeyCode:De,zoomActivationKeyCode:Ae,onlyRenderVisibleElements:Te,defaultViewport:sn,translateExtent:qe,minZoom:zt,maxZoom:ht,preventScrolling:Ve,zoomOnScroll:Kt,zoomOnPinch:Yt,zoomOnDoubleClick:Tn,panOnScroll:on,panOnScrollSpeed:Xt,panOnScrollMode:kn,panOnDrag:_r,onPaneClick:yi,onPaneMouseEnter:gr,onPaneMouseMove:Kr,onPaneMouseLeave:yr,onPaneScroll:bi,onPaneContextMenu:Fs,paneClickDistance:Yr,nodeClickDistance:vt,onSelectionContextMenu:V,onSelectionStart:Y,onSelectionEnd:te,onReconnect:Us,onReconnectStart:Oi,onReconnectEnd:Yn,onEdgeContextMenu:qt,onEdgeDoubleClick:an,onEdgeMouseEnter:Xr,onEdgeMouseMove:Ie,onEdgeMouseLeave:Xn,reconnectRadius:Li,defaultMarkerColor:Rt,noDragClassName:Dr,noWheelClassName:fn,noPanClassName:jn,rfId:cs,disableKeyboardA11y:ut,nodeExtent:Mr,viewport:Ko,onViewportChange:as}),y.jsx(rae,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:b,onConnectStart:x,onConnectEnd:S,onClickConnectStart:w,onClickConnectEnd:C,nodesDraggable:Oe,autoPanOnNodeFocus:Mt,nodesConnectable:Wt,nodesFocusable:Dn,edgesFocusable:_t,edgesReconnectable:mt,elementsSelectable:Rn,elevateNodesOnSelect:ge,elevateEdgesOnSelect:Me,minZoom:zt,maxZoom:ht,nodeExtent:Mr,onNodesChange:Pi,onEdgesChange:or,snapToGrid:Ee,snapGrid:Se,connectionMode:$,translateExtent:qe,connectOnClick:Et,defaultEdgeOptions:X,fitView:Rr,fitViewOptions:Zn,onNodesDelete:I,onEdgesDelete:H,onDelete:q,onNodeDragStart:j,onNodeDrag:R,onNodeDragStop:L,onSelectionDrag:F,onSelectionDragStart:z,onSelectionDragStop:O,onMove:h,onMoveStart:p,onMoveEnd:m,noPanClassName:jn,nodeOrigin:rn,rfId:cs,autoPanOnConnect:Tt,autoPanOnNodeDrag:Nt,autoPanSpeed:Vt,onError:vi,connectionRadius:Nn,isValidConnection:hn,selectNodesOnDrag:ot,nodeDragThreshold:Ii,connectionDragThreshold:Bi,onBeforeDelete:B,paneClickDistance:Yr,debug:ls,ariaLabelConfig:Gs}),y.jsx(Qoe,{onSelectionChange:W}),sr,y.jsx(Koe,{proOptions:je,position:ss}),y.jsx(Woe,{rfId:cs,disableKeyboardA11y:ut})]})})}var Cle=X8(Ele);function kle(e){const[t,n]=D.useState(e),r=D.useCallback(i=>n(s=>K8(i,s)),[]);return[t,n,r]}function Tle(e){const[t,n]=D.useState(e),r=D.useCallback(i=>n(s=>Y8(i,s)),[]);return[t,n,r]}function Nle({dimensions:e,lineWidth:t,variant:n,className:r}){return y.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:En(["react-flow__background-pattern",n,r])})}function Ale({radius:e,className:t}){return y.jsx("circle",{cx:e,cy:e,r:e,className:En(["react-flow__background-pattern","dots",t])})}var Io;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Io||(Io={}));const Mle={[Io.Dots]:1,[Io.Lines]:1,[Io.Cross]:6},_le=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function wq({id:e,variant:t=Io.Dots,gap:n=20,size:r,lineWidth:i=1,offset:s=0,color:o,bgColor:l,style:u,className:d,patternClassName:h}){const p=D.useRef(null),{transform:m,patternId:b}=st(_le,Gt),x=r||Mle[t],S=t===Io.Dots,w=t===Io.Cross,C=Array.isArray(n)?n:[n,n],N=[C[0]*m[2]||1,C[1]*m[2]||1],k=x*m[2],T=Array.isArray(s)?s:[s,s],A=w?[k,k]:N,M=[T[0]*m[2]||1+A[0]/2,T[1]*m[2]||1+A[1]/2],j=`${b}${e||""}`;return y.jsxs("svg",{className:En(["react-flow__background",d]),style:{...u,...lg,"--xy-background-color-props":l,"--xy-background-pattern-color-props":o},ref:p,"data-testid":"rf__background",children:[y.jsx("pattern",{id:j,x:m[0]%N[0],y:m[1]%N[1],width:N[0],height:N[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${M[0]},-${M[1]})`,children:S?y.jsx(Ale,{radius:k/2,className:h}):y.jsx(Nle,{dimensions:A,lineWidth:i,variant:t,className:h})}),y.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${j})`})]})}wq.displayName="Background";const Dle=D.memo(wq);function Rle(){return y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:y.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function jle(){return y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:y.jsx("path",{d:"M0 0h32v4.2H0z"})})}function Ole(){return y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:y.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function Lle(){return y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:y.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function Ple(){return y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:y.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function Hh({children:e,className:t,...n}){return y.jsx("button",{type:"button",className:En(["react-flow__controls-button",t]),...n,children:e})}const Ile=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function Sq({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:s,onZoomOut:o,onFitView:l,onInteractiveChange:u,className:d,children:h,position:p="bottom-left",orientation:m="vertical","aria-label":b}){const x=It(),{isInteractive:S,minZoomReached:w,maxZoomReached:C,ariaLabelConfig:N}=st(Ile,Gt),{zoomIn:k,zoomOut:T,fitView:A}=Id(),M=()=>{k(),s?.()},j=()=>{T(),o?.()},R=()=>{A(i),l?.()},L=()=>{x.setState({nodesDraggable:!S,nodesConnectable:!S,elementsSelectable:!S}),u?.(!S)},I=m==="horizontal"?"horizontal":"vertical";return y.jsxs(ag,{className:En(["react-flow__controls",I,d]),position:p,style:e,"data-testid":"rf__controls","aria-label":b??N["controls.ariaLabel"],children:[t&&y.jsxs(y.Fragment,{children:[y.jsx(Hh,{onClick:M,className:"react-flow__controls-zoomin",title:N["controls.zoomIn.ariaLabel"],"aria-label":N["controls.zoomIn.ariaLabel"],disabled:C,children:y.jsx(Rle,{})}),y.jsx(Hh,{onClick:j,className:"react-flow__controls-zoomout",title:N["controls.zoomOut.ariaLabel"],"aria-label":N["controls.zoomOut.ariaLabel"],disabled:w,children:y.jsx(jle,{})})]}),n&&y.jsx(Hh,{className:"react-flow__controls-fitview",onClick:R,title:N["controls.fitView.ariaLabel"],"aria-label":N["controls.fitView.ariaLabel"],children:y.jsx(Ole,{})}),r&&y.jsx(Hh,{className:"react-flow__controls-interactive",onClick:L,title:N["controls.interactive.ariaLabel"],"aria-label":N["controls.interactive.ariaLabel"],children:S?y.jsx(Ple,{}):y.jsx(Lle,{})}),h]})}Sq.displayName="Controls";const Ble=D.memo(Sq);function zle({id:e,x:t,y:n,width:r,height:i,style:s,color:o,strokeColor:l,strokeWidth:u,className:d,borderRadius:h,shapeRendering:p,selected:m,onClick:b}){const{background:x,backgroundColor:S}=s||{},w=o||x||S;return y.jsx("rect",{className:En(["react-flow__minimap-node",{selected:m},d]),x:t,y:n,rx:h,ry:h,width:r,height:i,style:{fill:w,stroke:l,strokeWidth:u},shapeRendering:p,onClick:b?C=>b(C,e):void 0})}const qle=D.memo(zle),Vle=e=>e.nodes.map(t=>t.id),Ob=e=>e instanceof Function?e:()=>e;function Hle({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:s=qle,onClick:o}){const l=st(Vle,Gt),u=Ob(t),d=Ob(e),h=Ob(n),p=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return y.jsx(y.Fragment,{children:l.map(m=>y.jsx(Ule,{id:m,nodeColorFunc:u,nodeStrokeColorFunc:d,nodeClassNameFunc:h,nodeBorderRadius:r,nodeStrokeWidth:i,NodeComponent:s,onClick:o,shapeRendering:p},m))})}function Fle({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:i,nodeStrokeWidth:s,shapeRendering:o,NodeComponent:l,onClick:u}){const{node:d,x:h,y:p,width:m,height:b}=st(x=>{const{internals:S}=x.nodeLookup.get(e),w=S.userNode,{x:C,y:N}=S.positionAbsolute,{width:k,height:T}=qs(w);return{node:w,x:C,y:N,width:k,height:T}},Gt);return!d||d.hidden||!C8(d)?null:y.jsx(l,{x:h,y:p,width:m,height:b,style:d.style,selected:!!d.selected,className:r(d),color:t(d),borderRadius:i,strokeColor:n(d),strokeWidth:s,shapeRendering:o,onClick:u,id:d.id})}const Ule=D.memo(Fle);var $le=D.memo(Hle);const Gle=200,Wle=150,Kle=e=>!e.hidden,Yle=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?E8(tf(e.nodeLookup,{filter:Kle}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},Xle="react-flow__minimap-desc";function Eq({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:i="",nodeBorderRadius:s=5,nodeStrokeWidth:o,nodeComponent:l,bgColor:u,maskColor:d,maskStrokeColor:h,maskStrokeWidth:p,position:m="bottom-right",onClick:b,onNodeClick:x,pannable:S=!1,zoomable:w=!1,ariaLabel:C,inversePan:N,zoomStep:k=1,offsetScale:T=5}){const A=It(),M=D.useRef(null),{boundingRect:j,viewBB:R,rfId:L,panZoom:I,translateExtent:H,flowWidth:q,flowHeight:W,ariaLabelConfig:z}=st(Yle,Gt),F=e?.width??Gle,O=e?.height??Wle,V=j.width/F,Y=j.height/O,te=Math.max(V,Y),B=te*F,$=te*O,oe=T*te,ae=j.x-(B-j.width)/2-oe,U=j.y-($-j.height)/2-oe,Z=B+oe*2,ee=$+oe*2,de=`${Xle}-${L}`,ce=D.useRef(0),ve=D.useRef();ce.current=te,D.useEffect(()=>{if(M.current&&I)return ve.current=goe({domNode:M.current,panZoom:I,getTransform:()=>A.getState().transform,getViewScale:()=>ce.current}),()=>{ve.current?.destroy()}},[I]),D.useEffect(()=>{ve.current?.update({translateExtent:H,width:q,height:W,inversePan:N,pannable:S,zoomStep:k,zoomable:w})},[S,w,N,k,H,q,W]);const De=b?Ee=>{const[Se,Te]=ve.current?.pointer(Ee)||[0,0];b(Ee,{x:Se,y:Te})}:void 0,Pe=x?D.useCallback((Ee,Se)=>{const Te=A.getState().nodeLookup.get(Se).internals.userNode;x(Ee,Te)},[]):void 0,Ae=C??z["minimap.ariaLabel"];return y.jsx(ag,{position:m,style:{...e,"--xy-minimap-background-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-background-color-props":typeof d=="string"?d:void 0,"--xy-minimap-mask-stroke-color-props":typeof h=="string"?h:void 0,"--xy-minimap-mask-stroke-width-props":typeof p=="number"?p*te:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof o=="number"?o:void 0},className:En(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:y.jsxs("svg",{width:F,height:O,viewBox:`${ae} ${U} ${Z} ${ee}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":de,ref:M,onClick:De,children:[Ae&&y.jsx("title",{id:de,children:Ae}),y.jsx($le,{onClick:Pe,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:i,nodeStrokeWidth:o,nodeComponent:l}),y.jsx("path",{className:"react-flow__minimap-mask",d:`M${ae-oe},${U-oe}h${Z+oe*2}v${ee+oe*2}h${-Z-oe*2}z
        M${R.x},${R.y}h${R.width}v${R.height}h${-R.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}Eq.displayName="MiniMap";const Zle=D.memo(Eq),Jle=e=>t=>e?`${Math.max(1/t.transform[2],1)}`:void 0,Qle={[Ua.Line]:"right",[Ua.Handle]:"bottom-right"};function ece({nodeId:e,position:t,variant:n=Ua.Handle,className:r,style:i=void 0,children:s,color:o,minWidth:l=10,minHeight:u=10,maxWidth:d=Number.MAX_VALUE,maxHeight:h=Number.MAX_VALUE,keepAspectRatio:p=!1,resizeDirection:m,autoScale:b=!0,shouldResize:x,onResizeStart:S,onResize:w,onResizeEnd:C}){const N=eq(),k=typeof e=="string"?e:N,T=It(),A=D.useRef(null),M=n===Ua.Handle,j=st(D.useCallback(Jle(M&&b),[M,b]),Gt),R=D.useRef(null),L=t??Qle[n];D.useEffect(()=>{if(!(!A.current||!k))return R.current||(R.current=Ooe({domNode:A.current,nodeId:k,getStoreItems:()=>{const{nodeLookup:H,transform:q,snapGrid:W,snapToGrid:z,nodeOrigin:F,domNode:O}=T.getState();return{nodeLookup:H,transform:q,snapGrid:W,snapToGrid:z,nodeOrigin:F,paneDomNode:O}},onChange:(H,q)=>{const{triggerNodeChanges:W,nodeLookup:z,parentLookup:F,nodeOrigin:O}=T.getState(),V=[],Y={x:H.x,y:H.y},te=z.get(k);if(te&&te.expandParent&&te.parentId){const B=te.origin??O,$=H.width??te.measured.width??0,oe=H.height??te.measured.height??0,ae={id:te.id,parentId:te.parentId,rect:{width:$,height:oe,...k8({x:H.x??te.position.x,y:H.y??te.position.y},{width:$,height:oe},te.parentId,z,B)}},U=p2([ae],z,F,O);V.push(...U),Y.x=H.x?Math.max(B[0]*$,H.x):void 0,Y.y=H.y?Math.max(B[1]*oe,H.y):void 0}if(Y.x!==void 0&&Y.y!==void 0){const B={id:k,type:"position",position:{...Y}};V.push(B)}if(H.width!==void 0&&H.height!==void 0){const $={id:k,type:"dimensions",resizing:!0,setAttributes:m?m==="horizontal"?"width":"height":!0,dimensions:{width:H.width,height:H.height}};V.push($)}for(const B of q){const $={...B,type:"position"};V.push($)}W(V)},onEnd:({width:H,height:q})=>{const W={id:k,type:"dimensions",resizing:!1,dimensions:{width:H,height:q}};T.getState().triggerNodeChanges([W])}})),R.current.update({controlPosition:L,boundaries:{minWidth:l,minHeight:u,maxWidth:d,maxHeight:h},keepAspectRatio:p,resizeDirection:m,onResizeStart:S,onResize:w,onResizeEnd:C,shouldResize:x}),()=>{R.current?.destroy()}},[L,l,u,d,h,p,S,w,C,x]);const I=L.split("-");return y.jsx("div",{className:En(["react-flow__resize-control","nodrag",...I,n,r]),ref:A,style:{...i,scale:j,...o&&{[M?"backgroundColor":"borderColor"]:o}},children:s})}const gj=D.memo(ece);function tce({nodeId:e,isVisible:t=!0,handleClassName:n,handleStyle:r,lineClassName:i,lineStyle:s,color:o,minWidth:l=10,minHeight:u=10,maxWidth:d=Number.MAX_VALUE,maxHeight:h=Number.MAX_VALUE,keepAspectRatio:p=!1,autoScale:m=!0,shouldResize:b,onResizeStart:x,onResize:S,onResizeEnd:w}){return t?y.jsxs(y.Fragment,{children:[Noe.map(C=>y.jsx(gj,{className:i,style:s,nodeId:e,position:C,variant:Ua.Line,color:o,minWidth:l,minHeight:u,maxWidth:d,maxHeight:h,onResizeStart:x,keepAspectRatio:p,autoScale:m,shouldResize:b,onResize:S,onResizeEnd:w},C)),Toe.map(C=>y.jsx(gj,{className:n,style:r,nodeId:e,position:C,color:o,minWidth:l,minHeight:u,maxWidth:d,maxHeight:h,onResizeStart:x,keepAspectRatio:p,autoScale:m,shouldResize:b,onResize:S,onResizeEnd:w},C))]}):null}function nce(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(i),t&&(r.href=t),i.href=e,i.href}const rce=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function Bo(e){const t=[];for(let n=0,r=e.length;n<r;n++)t.push(e[n]);return t}let Il=null;function Cq(e={}){return Il||(e.includeStyleProperties?(Il=e.includeStyleProperties,Il):(Il=Bo(window.getComputedStyle(document.documentElement)),Il))}function bm(e,t){const r=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return r?parseFloat(r.replace("px","")):0}function ice(e){const t=bm(e,"border-left-width"),n=bm(e,"border-right-width");return e.clientWidth+t+n}function sce(e){const t=bm(e,"border-top-width"),n=bm(e,"border-bottom-width");return e.clientHeight+t+n}function kq(e,t={}){const n=t.width||ice(e),r=t.height||sce(e);return{width:n,height:r}}function oce(){let e,t;try{t=process}catch{}const n=t&&t.env?t.env.devicePixelRatio:null;return n&&(e=parseInt(n,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const Vr=16384;function ace(e){(e.width>Vr||e.height>Vr)&&(e.width>Vr&&e.height>Vr?e.width>e.height?(e.height*=Vr/e.width,e.width=Vr):(e.width*=Vr/e.height,e.height=Vr):e.width>Vr?(e.height*=Vr/e.width,e.width=Vr):(e.width*=Vr/e.height,e.height=Vr))}function vm(e){return new Promise((t,n)=>{const r=new Image;r.onload=()=>{r.decode().then(()=>{requestAnimationFrame(()=>t(r))})},r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=e})}async function lce(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function cce(e,t,n){const r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg"),s=document.createElementNS(r,"foreignObject");return i.setAttribute("width",`${t}`),i.setAttribute("height",`${n}`),i.setAttribute("viewBox",`0 0 ${t} ${n}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),i.appendChild(s),s.appendChild(e),lce(i)}const Nr=(e,t)=>{if(e instanceof t)return!0;const n=Object.getPrototypeOf(e);return n===null?!1:n.constructor.name===t.name||Nr(n,t)};function uce(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function dce(e,t){return Cq(t).map(n=>{const r=e.getPropertyValue(n),i=e.getPropertyPriority(n);return`${n}: ${r}${i?" !important":""};`}).join(" ")}function fce(e,t,n,r){const i=`.${e}:${t}`,s=n.cssText?uce(n):dce(n,r);return document.createTextNode(`${i}{${s}}`)}function yj(e,t,n,r){const i=window.getComputedStyle(e,n),s=i.getPropertyValue("content");if(s===""||s==="none")return;const o=rce();try{t.className=`${t.className} ${o}`}catch{return}const l=document.createElement("style");l.appendChild(fce(o,n,i,r)),t.appendChild(l)}function hce(e,t,n){yj(e,t,":before",n),yj(e,t,":after",n)}const bj="application/font-woff",vj="image/jpeg",pce={woff:bj,woff2:bj,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:vj,jpeg:vj,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function mce(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function g2(e){const t=mce(e).toLowerCase();return pce[t]||""}function gce(e){return e.split(/,/)[1]}function TC(e){return e.search(/^(data:)/)!==-1}function yce(e,t){return`data:${t};base64,${e}`}async function Tq(e,t,n){const r=await fetch(e,t);if(r.status===404)throw new Error(`Resource "${r.url}" not found`);const i=await r.blob();return new Promise((s,o)=>{const l=new FileReader;l.onerror=o,l.onloadend=()=>{try{s(n({res:r,result:l.result}))}catch(u){o(u)}},l.readAsDataURL(i)})}const Lb={};function bce(e,t,n){let r=e.replace(/\?.*/,"");return n&&(r=e),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),t?`[${t}]${r}`:r}async function y2(e,t,n){const r=bce(e,t,n.includeQueryParams);if(Lb[r]!=null)return Lb[r];n.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let i;try{const s=await Tq(e,n.fetchRequestInit,({res:o,result:l})=>(t||(t=o.headers.get("Content-Type")||""),gce(l)));i=yce(s,t)}catch(s){i=n.imagePlaceholder||"";let o=`Failed to fetch resource: ${e}`;s&&(o=typeof s=="string"?s:s.message),o&&console.warn(o)}return Lb[r]=i,i}async function vce(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):vm(t)}async function xce(e,t){if(e.currentSrc){const s=document.createElement("canvas"),o=s.getContext("2d");s.width=e.clientWidth,s.height=e.clientHeight,o?.drawImage(e,0,0,s.width,s.height);const l=s.toDataURL();return vm(l)}const n=e.poster,r=g2(n),i=await y2(n,r,t);return vm(i)}async function wce(e,t){var n;try{if(!((n=e?.contentDocument)===null||n===void 0)&&n.body)return await ug(e.contentDocument.body,t,!0)}catch{}return e.cloneNode(!1)}async function Sce(e,t){return Nr(e,HTMLCanvasElement)?vce(e):Nr(e,HTMLVideoElement)?xce(e,t):Nr(e,HTMLIFrameElement)?wce(e,t):e.cloneNode(Nq(e))}const Ece=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",Nq=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function Cce(e,t,n){var r,i;if(Nq(t))return t;let s=[];return Ece(e)&&e.assignedNodes?s=Bo(e.assignedNodes()):Nr(e,HTMLIFrameElement)&&(!((r=e.contentDocument)===null||r===void 0)&&r.body)?s=Bo(e.contentDocument.body.childNodes):s=Bo(((i=e.shadowRoot)!==null&&i!==void 0?i:e).childNodes),s.length===0||Nr(e,HTMLVideoElement)||await s.reduce((o,l)=>o.then(()=>ug(l,n)).then(u=>{u&&t.appendChild(u)}),Promise.resolve()),t}function kce(e,t,n){const r=t.style;if(!r)return;const i=window.getComputedStyle(e);i.cssText?(r.cssText=i.cssText,r.transformOrigin=i.transformOrigin):Cq(n).forEach(s=>{let o=i.getPropertyValue(s);s==="font-size"&&o.endsWith("px")&&(o=`${Math.floor(parseFloat(o.substring(0,o.length-2)))-.1}px`),Nr(e,HTMLIFrameElement)&&s==="display"&&o==="inline"&&(o="block"),s==="d"&&t.getAttribute("d")&&(o=`path(${t.getAttribute("d")})`),r.setProperty(s,o,i.getPropertyPriority(s))})}function Tce(e,t){Nr(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),Nr(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function Nce(e,t){if(Nr(e,HTMLSelectElement)){const n=t,r=Array.from(n.children).find(i=>e.value===i.getAttribute("value"));r&&r.setAttribute("selected","")}}function Ace(e,t,n){return Nr(t,Element)&&(kce(e,t,n),hce(e,t,n),Tce(e,t),Nce(e,t)),t}async function Mce(e,t){const n=e.querySelectorAll?e.querySelectorAll("use"):[];if(n.length===0)return e;const r={};for(let s=0;s<n.length;s++){const l=n[s].getAttribute("xlink:href");if(l){const u=e.querySelector(l),d=document.querySelector(l);!u&&d&&!r[l]&&(r[l]=await ug(d,t,!0))}}const i=Object.values(r);if(i.length){const s="http://www.w3.org/1999/xhtml",o=document.createElementNS(s,"svg");o.setAttribute("xmlns",s),o.style.position="absolute",o.style.width="0",o.style.height="0",o.style.overflow="hidden",o.style.display="none";const l=document.createElementNS(s,"defs");o.appendChild(l);for(let u=0;u<i.length;u++)l.appendChild(i[u]);e.appendChild(o)}return e}async function ug(e,t,n){return!n&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(r=>Sce(r,t)).then(r=>Cce(e,r,t)).then(r=>Ace(e,r,t)).then(r=>Mce(r,t))}const Aq=/url\((['"]?)([^'"]+?)\1\)/g,_ce=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Dce=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Rce(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function jce(e){const t=[];return e.replace(Aq,(n,r,i)=>(t.push(i),n)),t.filter(n=>!TC(n))}async function Oce(e,t,n,r,i){try{const s=n?nce(t,n):t,o=g2(t);let l;return i||(l=await y2(s,o,r)),e.replace(Rce(t),`$1${l}$3`)}catch{}return e}function Lce(e,{preferredFontFormat:t}){return t?e.replace(Dce,n=>{for(;;){const[r,,i]=_ce.exec(n)||[];if(!i)return"";if(i===t)return`src: ${r};`}}):e}function Mq(e){return e.search(Aq)!==-1}async function _q(e,t,n){if(!Mq(e))return e;const r=Lce(e,n);return jce(r).reduce((s,o)=>s.then(l=>Oce(l,o,t,n)),Promise.resolve(r))}async function Bl(e,t,n){var r;const i=(r=t.style)===null||r===void 0?void 0:r.getPropertyValue(e);if(i){const s=await _q(i,null,n);return t.style.setProperty(e,s,t.style.getPropertyPriority(e)),!0}return!1}async function Pce(e,t){await Bl("background",e,t)||await Bl("background-image",e,t),await Bl("mask",e,t)||await Bl("-webkit-mask",e,t)||await Bl("mask-image",e,t)||await Bl("-webkit-mask-image",e,t)}async function Ice(e,t){const n=Nr(e,HTMLImageElement);if(!(n&&!TC(e.src))&&!(Nr(e,SVGImageElement)&&!TC(e.href.baseVal)))return;const r=n?e.src:e.href.baseVal,i=await y2(r,g2(r),t);await new Promise((s,o)=>{e.onload=s,e.onerror=t.onImageErrorHandler?(...u)=>{try{s(t.onImageErrorHandler(...u))}catch(d){o(d)}}:o;const l=e;l.decode&&(l.decode=s),l.loading==="lazy"&&(l.loading="eager"),n?(e.srcset="",e.src=i):e.href.baseVal=i})}async function Bce(e,t){const r=Bo(e.childNodes).map(i=>Dq(i,t));await Promise.all(r).then(()=>e)}async function Dq(e,t){Nr(e,Element)&&(await Pce(e,t),await Ice(e,t),await Bce(e,t))}function zce(e,t){const{style:n}=e;t.backgroundColor&&(n.backgroundColor=t.backgroundColor),t.width&&(n.width=`${t.width}px`),t.height&&(n.height=`${t.height}px`);const r=t.style;return r!=null&&Object.keys(r).forEach(i=>{n[i]=r[i]}),e}const xj={};async function wj(e){let t=xj[e];if(t!=null)return t;const r=await(await fetch(e)).text();return t={url:e,cssText:r},xj[e]=t,t}async function Sj(e,t){let n=e.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,s=(n.match(/url\([^)]+\)/g)||[]).map(async o=>{let l=o.replace(r,"$1");return l.startsWith("https://")||(l=new URL(l,e.url).href),Tq(l,t.fetchRequestInit,({result:u})=>(n=n.replace(o,`url(${u})`),[o,u]))});return Promise.all(s).then(()=>n)}function Ej(e){if(e==null)return[];const t=[],n=/(\/\*[\s\S]*?\*\/)/gi;let r=e.replace(n,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const u=i.exec(r);if(u===null)break;t.push(u[0])}r=r.replace(i,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,o="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",l=new RegExp(o,"gi");for(;;){let u=s.exec(r);if(u===null){if(u=l.exec(r),u===null)break;s.lastIndex=l.lastIndex}else l.lastIndex=s.lastIndex;t.push(u[0])}return t}async function qce(e,t){const n=[],r=[];return e.forEach(i=>{if("cssRules"in i)try{Bo(i.cssRules||[]).forEach((s,o)=>{if(s.type===CSSRule.IMPORT_RULE){let l=o+1;const u=s.href,d=wj(u).then(h=>Sj(h,t)).then(h=>Ej(h).forEach(p=>{try{i.insertRule(p,p.startsWith("@import")?l+=1:i.cssRules.length)}catch(m){console.error("Error inserting rule from remote css",{rule:p,error:m})}})).catch(h=>{console.error("Error loading remote css",h.toString())});r.push(d)}})}catch(s){const o=e.find(l=>l.href==null)||document.styleSheets[0];i.href!=null&&r.push(wj(i.href).then(l=>Sj(l,t)).then(l=>Ej(l).forEach(u=>{o.insertRule(u,o.cssRules.length)})).catch(l=>{console.error("Error loading remote stylesheet",l)})),console.error("Error inlining remote css file",s)}}),Promise.all(r).then(()=>(e.forEach(i=>{if("cssRules"in i)try{Bo(i.cssRules||[]).forEach(s=>{n.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${i.href}`,s)}}),n))}function Vce(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>Mq(t.style.getPropertyValue("src")))}async function Hce(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const n=Bo(e.ownerDocument.styleSheets),r=await qce(n,t);return Vce(r)}function Rq(e){return e.trim().replace(/["']/g,"")}function Fce(e){const t=new Set;function n(r){(r.style.fontFamily||getComputedStyle(r).fontFamily).split(",").forEach(s=>{t.add(Rq(s))}),Array.from(r.children).forEach(s=>{s instanceof HTMLElement&&n(s)})}return n(e),t}async function Uce(e,t){const n=await Hce(e,t),r=Fce(e);return(await Promise.all(n.filter(s=>r.has(Rq(s.style.fontFamily))).map(s=>{const o=s.parentStyleSheet?s.parentStyleSheet.href:null;return _q(s.cssText,o,t)}))).join(`
`)}async function $ce(e,t){const n=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await Uce(e,t);if(n){const r=document.createElement("style"),i=document.createTextNode(n);r.appendChild(i),e.firstChild?e.insertBefore(r,e.firstChild):e.appendChild(r)}}async function jq(e,t={}){const{width:n,height:r}=kq(e,t),i=await ug(e,t,!0);return await $ce(i,t),await Dq(i,t),zce(i,t),await cce(i,n,r)}async function Oq(e,t={}){const{width:n,height:r}=kq(e,t),i=await jq(e,t),s=await vm(i),o=document.createElement("canvas"),l=o.getContext("2d"),u=t.pixelRatio||oce(),d=t.canvasWidth||n,h=t.canvasHeight||r;return o.width=d*u,o.height=h*u,t.skipAutoScale||ace(o),o.style.width=`${d}`,o.style.height=`${h}`,t.backgroundColor&&(l.fillStyle=t.backgroundColor,l.fillRect(0,0,o.width,o.height)),l.drawImage(s,0,0,o.width,o.height),o}async function Gce(e,t={}){return(await Oq(e,t)).toDataURL()}async function Wce(e,t={}){return(await Oq(e,t)).toDataURL("image/jpeg",t.quality||1)}function b2(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Pb,Cj;function Kce(){if(Cj)return Pb;Cj=1;function e(){this.__data__=[],this.size=0}return Pb=e,Pb}var Ib,kj;function xc(){if(kj)return Ib;kj=1;function e(t,n){return t===n||t!==t&&n!==n}return Ib=e,Ib}var Bb,Tj;function dg(){if(Tj)return Bb;Tj=1;var e=xc();function t(n,r){for(var i=n.length;i--;)if(e(n[i][0],r))return i;return-1}return Bb=t,Bb}var zb,Nj;function Yce(){if(Nj)return zb;Nj=1;var e=dg(),t=Array.prototype,n=t.splice;function r(i){var s=this.__data__,o=e(s,i);if(o<0)return!1;var l=s.length-1;return o==l?s.pop():n.call(s,o,1),--this.size,!0}return zb=r,zb}var qb,Aj;function Xce(){if(Aj)return qb;Aj=1;var e=dg();function t(n){var r=this.__data__,i=e(r,n);return i<0?void 0:r[i][1]}return qb=t,qb}var Vb,Mj;function Zce(){if(Mj)return Vb;Mj=1;var e=dg();function t(n){return e(this.__data__,n)>-1}return Vb=t,Vb}var Hb,_j;function Jce(){if(_j)return Hb;_j=1;var e=dg();function t(n,r){var i=this.__data__,s=e(i,n);return s<0?(++this.size,i.push([n,r])):i[s][1]=r,this}return Hb=t,Hb}var Fb,Dj;function fg(){if(Dj)return Fb;Dj=1;var e=Kce(),t=Yce(),n=Xce(),r=Zce(),i=Jce();function s(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var d=o[l];this.set(d[0],d[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,Fb=s,Fb}var Ub,Rj;function Qce(){if(Rj)return Ub;Rj=1;var e=fg();function t(){this.__data__=new e,this.size=0}return Ub=t,Ub}var $b,jj;function eue(){if(jj)return $b;jj=1;function e(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}return $b=e,$b}var Gb,Oj;function tue(){if(Oj)return Gb;Oj=1;function e(t){return this.__data__.get(t)}return Gb=e,Gb}var Wb,Lj;function nue(){if(Lj)return Wb;Lj=1;function e(t){return this.__data__.has(t)}return Wb=e,Wb}var Kb,Pj;function Lq(){if(Pj)return Kb;Pj=1;var e=typeof yh=="object"&&yh&&yh.Object===Object&&yh;return Kb=e,Kb}var Yb,Ij;function ji(){if(Ij)return Yb;Ij=1;var e=Lq(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return Yb=n,Yb}var Xb,Bj;function wc(){if(Bj)return Xb;Bj=1;var e=ji(),t=e.Symbol;return Xb=t,Xb}var Zb,zj;function rue(){if(zj)return Zb;zj=1;var e=wc(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,i=e?e.toStringTag:void 0;function s(o){var l=n.call(o,i),u=o[i];try{o[i]=void 0;var d=!0}catch{}var h=r.call(o);return d&&(l?o[i]=u:delete o[i]),h}return Zb=s,Zb}var Jb,qj;function iue(){if(qj)return Jb;qj=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return Jb=n,Jb}var Qb,Vj;function Za(){if(Vj)return Qb;Vj=1;var e=wc(),t=rue(),n=iue(),r="[object Null]",i="[object Undefined]",s=e?e.toStringTag:void 0;function o(l){return l==null?l===void 0?i:r:s&&s in Object(l)?t(l):n(l)}return Qb=o,Qb}var ev,Hj;function mi(){if(Hj)return ev;Hj=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return ev=e,ev}var tv,Fj;function sf(){if(Fj)return tv;Fj=1;var e=Za(),t=mi(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function o(l){if(!t(l))return!1;var u=e(l);return u==r||u==i||u==n||u==s}return tv=o,tv}var nv,Uj;function sue(){if(Uj)return nv;Uj=1;var e=ji(),t=e["__core-js_shared__"];return nv=t,nv}var rv,$j;function oue(){if($j)return rv;$j=1;var e=sue(),t=(function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""})();function n(r){return!!t&&t in r}return rv=n,rv}var iv,Gj;function Pq(){if(Gj)return iv;Gj=1;var e=Function.prototype,t=e.toString;function n(r){if(r!=null){try{return t.call(r)}catch{}try{return r+""}catch{}}return""}return iv=n,iv}var sv,Wj;function aue(){if(Wj)return sv;Wj=1;var e=sf(),t=oue(),n=mi(),r=Pq(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,u=o.toString,d=l.hasOwnProperty,h=RegExp("^"+u.call(d).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(m){if(!n(m)||t(m))return!1;var b=e(m)?h:s;return b.test(r(m))}return sv=p,sv}var ov,Kj;function lue(){if(Kj)return ov;Kj=1;function e(t,n){return t?.[n]}return ov=e,ov}var av,Yj;function Ja(){if(Yj)return av;Yj=1;var e=aue(),t=lue();function n(r,i){var s=t(r,i);return e(s)?s:void 0}return av=n,av}var lv,Xj;function v2(){if(Xj)return lv;Xj=1;var e=Ja(),t=ji(),n=e(t,"Map");return lv=n,lv}var cv,Zj;function hg(){if(Zj)return cv;Zj=1;var e=Ja(),t=e(Object,"create");return cv=t,cv}var uv,Jj;function cue(){if(Jj)return uv;Jj=1;var e=hg();function t(){this.__data__=e?e(null):{},this.size=0}return uv=t,uv}var dv,Qj;function uue(){if(Qj)return dv;Qj=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return dv=e,dv}var fv,eO;function due(){if(eO)return fv;eO=1;var e=hg(),t="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(s){var o=this.__data__;if(e){var l=o[s];return l===t?void 0:l}return r.call(o,s)?o[s]:void 0}return fv=i,fv}var hv,tO;function fue(){if(tO)return hv;tO=1;var e=hg(),t=Object.prototype,n=t.hasOwnProperty;function r(i){var s=this.__data__;return e?s[i]!==void 0:n.call(s,i)}return hv=r,hv}var pv,nO;function hue(){if(nO)return pv;nO=1;var e=hg(),t="__lodash_hash_undefined__";function n(r,i){var s=this.__data__;return this.size+=this.has(r)?0:1,s[r]=e&&i===void 0?t:i,this}return pv=n,pv}var mv,rO;function pue(){if(rO)return mv;rO=1;var e=cue(),t=uue(),n=due(),r=fue(),i=hue();function s(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var d=o[l];this.set(d[0],d[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,mv=s,mv}var gv,iO;function mue(){if(iO)return gv;iO=1;var e=pue(),t=fg(),n=v2();function r(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return gv=r,gv}var yv,sO;function gue(){if(sO)return yv;sO=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return yv=e,yv}var bv,oO;function pg(){if(oO)return bv;oO=1;var e=gue();function t(n,r){var i=n.__data__;return e(r)?i[typeof r=="string"?"string":"hash"]:i.map}return bv=t,bv}var vv,aO;function yue(){if(aO)return vv;aO=1;var e=pg();function t(n){var r=e(this,n).delete(n);return this.size-=r?1:0,r}return vv=t,vv}var xv,lO;function bue(){if(lO)return xv;lO=1;var e=pg();function t(n){return e(this,n).get(n)}return xv=t,xv}var wv,cO;function vue(){if(cO)return wv;cO=1;var e=pg();function t(n){return e(this,n).has(n)}return wv=t,wv}var Sv,uO;function xue(){if(uO)return Sv;uO=1;var e=pg();function t(n,r){var i=e(this,n),s=i.size;return i.set(n,r),this.size+=i.size==s?0:1,this}return Sv=t,Sv}var Ev,dO;function x2(){if(dO)return Ev;dO=1;var e=mue(),t=yue(),n=bue(),r=vue(),i=xue();function s(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var d=o[l];this.set(d[0],d[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,Ev=s,Ev}var Cv,fO;function wue(){if(fO)return Cv;fO=1;var e=fg(),t=v2(),n=x2(),r=200;function i(s,o){var l=this.__data__;if(l instanceof e){var u=l.__data__;if(!t||u.length<r-1)return u.push([s,o]),this.size=++l.size,this;l=this.__data__=new n(u)}return l.set(s,o),this.size=l.size,this}return Cv=i,Cv}var kv,hO;function mg(){if(hO)return kv;hO=1;var e=fg(),t=Qce(),n=eue(),r=tue(),i=nue(),s=wue();function o(l){var u=this.__data__=new e(l);this.size=u.size}return o.prototype.clear=t,o.prototype.delete=n,o.prototype.get=r,o.prototype.has=i,o.prototype.set=s,kv=o,kv}var Tv,pO;function w2(){if(pO)return Tv;pO=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i&&n(t[r],r,t)!==!1;);return t}return Tv=e,Tv}var Nv,mO;function Iq(){if(mO)return Nv;mO=1;var e=Ja(),t=(function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}})();return Nv=t,Nv}var Av,gO;function gg(){if(gO)return Av;gO=1;var e=Iq();function t(n,r,i){r=="__proto__"&&e?e(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return Av=t,Av}var Mv,yO;function yg(){if(yO)return Mv;yO=1;var e=gg(),t=xc(),n=Object.prototype,r=n.hasOwnProperty;function i(s,o,l){var u=s[o];(!(r.call(s,o)&&t(u,l))||l===void 0&&!(o in s))&&e(s,o,l)}return Mv=i,Mv}var _v,bO;function of(){if(bO)return _v;bO=1;var e=yg(),t=gg();function n(r,i,s,o){var l=!s;s||(s={});for(var u=-1,d=i.length;++u<d;){var h=i[u],p=o?o(s[h],r[h],h,s,r):void 0;p===void 0&&(p=r[h]),l?t(s,h,p):e(s,h,p)}return s}return _v=n,_v}var Dv,vO;function Sue(){if(vO)return Dv;vO=1;function e(t,n){for(var r=-1,i=Array(t);++r<t;)i[r]=n(r);return i}return Dv=e,Dv}var Rv,xO;function is(){if(xO)return Rv;xO=1;function e(t){return t!=null&&typeof t=="object"}return Rv=e,Rv}var jv,wO;function Eue(){if(wO)return jv;wO=1;var e=Za(),t=is(),n="[object Arguments]";function r(i){return t(i)&&e(i)==n}return jv=r,jv}var Ov,SO;function af(){if(SO)return Ov;SO=1;var e=Eue(),t=is(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,s=e((function(){return arguments})())?e:function(o){return t(o)&&r.call(o,"callee")&&!i.call(o,"callee")};return Ov=s,Ov}var Lv,EO;function Cn(){if(EO)return Lv;EO=1;var e=Array.isArray;return Lv=e,Lv}var Vu={exports:{}},Pv,CO;function Cue(){if(CO)return Pv;CO=1;function e(){return!1}return Pv=e,Pv}Vu.exports;var kO;function Sc(){return kO||(kO=1,(function(e,t){var n=ji(),r=Cue(),i=t&&!t.nodeType&&t,s=i&&!0&&e&&!e.nodeType&&e,o=s&&s.exports===i,l=o?n.Buffer:void 0,u=l?l.isBuffer:void 0,d=u||r;e.exports=d})(Vu,Vu.exports)),Vu.exports}var Iv,TO;function bg(){if(TO)return Iv;TO=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(r,i){var s=typeof r;return i=i??e,!!i&&(s=="number"||s!="symbol"&&t.test(r))&&r>-1&&r%1==0&&r<i}return Iv=n,Iv}var Bv,NO;function S2(){if(NO)return Bv;NO=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return Bv=t,Bv}var zv,AO;function kue(){if(AO)return zv;AO=1;var e=Za(),t=S2(),n=is(),r="[object Arguments]",i="[object Array]",s="[object Boolean]",o="[object Date]",l="[object Error]",u="[object Function]",d="[object Map]",h="[object Number]",p="[object Object]",m="[object RegExp]",b="[object Set]",x="[object String]",S="[object WeakMap]",w="[object ArrayBuffer]",C="[object DataView]",N="[object Float32Array]",k="[object Float64Array]",T="[object Int8Array]",A="[object Int16Array]",M="[object Int32Array]",j="[object Uint8Array]",R="[object Uint8ClampedArray]",L="[object Uint16Array]",I="[object Uint32Array]",H={};H[N]=H[k]=H[T]=H[A]=H[M]=H[j]=H[R]=H[L]=H[I]=!0,H[r]=H[i]=H[w]=H[s]=H[C]=H[o]=H[l]=H[u]=H[d]=H[h]=H[p]=H[m]=H[b]=H[x]=H[S]=!1;function q(W){return n(W)&&t(W.length)&&!!H[e(W)]}return zv=q,zv}var qv,MO;function vg(){if(MO)return qv;MO=1;function e(t){return function(n){return t(n)}}return qv=e,qv}var Hu={exports:{}};Hu.exports;var _O;function E2(){return _O||(_O=1,(function(e,t){var n=Lq(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===r,o=s&&n.process,l=(function(){try{var u=i&&i.require&&i.require("util").types;return u||o&&o.binding&&o.binding("util")}catch{}})();e.exports=l})(Hu,Hu.exports)),Hu.exports}var Vv,DO;function lf(){if(DO)return Vv;DO=1;var e=kue(),t=vg(),n=E2(),r=n&&n.isTypedArray,i=r?t(r):e;return Vv=i,Vv}var Hv,RO;function Bq(){if(RO)return Hv;RO=1;var e=Sue(),t=af(),n=Cn(),r=Sc(),i=bg(),s=lf(),o=Object.prototype,l=o.hasOwnProperty;function u(d,h){var p=n(d),m=!p&&t(d),b=!p&&!m&&r(d),x=!p&&!m&&!b&&s(d),S=p||m||b||x,w=S?e(d.length,String):[],C=w.length;for(var N in d)(h||l.call(d,N))&&!(S&&(N=="length"||b&&(N=="offset"||N=="parent")||x&&(N=="buffer"||N=="byteLength"||N=="byteOffset")||i(N,C)))&&w.push(N);return w}return Hv=u,Hv}var Fv,jO;function xg(){if(jO)return Fv;jO=1;var e=Object.prototype;function t(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||e;return n===i}return Fv=t,Fv}var Uv,OO;function zq(){if(OO)return Uv;OO=1;function e(t,n){return function(r){return t(n(r))}}return Uv=e,Uv}var $v,LO;function Tue(){if(LO)return $v;LO=1;var e=zq(),t=e(Object.keys,Object);return $v=t,$v}var Gv,PO;function C2(){if(PO)return Gv;PO=1;var e=xg(),t=Tue(),n=Object.prototype,r=n.hasOwnProperty;function i(s){if(!e(s))return t(s);var o=[];for(var l in Object(s))r.call(s,l)&&l!="constructor"&&o.push(l);return o}return Gv=i,Gv}var Wv,IO;function Vs(){if(IO)return Wv;IO=1;var e=sf(),t=S2();function n(r){return r!=null&&t(r.length)&&!e(r)}return Wv=n,Wv}var Kv,BO;function Wo(){if(BO)return Kv;BO=1;var e=Bq(),t=C2(),n=Vs();function r(i){return n(i)?e(i):t(i)}return Kv=r,Kv}var Yv,zO;function Nue(){if(zO)return Yv;zO=1;var e=of(),t=Wo();function n(r,i){return r&&e(i,t(i),r)}return Yv=n,Yv}var Xv,qO;function Aue(){if(qO)return Xv;qO=1;function e(t){var n=[];if(t!=null)for(var r in Object(t))n.push(r);return n}return Xv=e,Xv}var Zv,VO;function Mue(){if(VO)return Zv;VO=1;var e=mi(),t=xg(),n=Aue(),r=Object.prototype,i=r.hasOwnProperty;function s(o){if(!e(o))return n(o);var l=t(o),u=[];for(var d in o)d=="constructor"&&(l||!i.call(o,d))||u.push(d);return u}return Zv=s,Zv}var Jv,HO;function Qa(){if(HO)return Jv;HO=1;var e=Bq(),t=Mue(),n=Vs();function r(i){return n(i)?e(i,!0):t(i)}return Jv=r,Jv}var Qv,FO;function _ue(){if(FO)return Qv;FO=1;var e=of(),t=Qa();function n(r,i){return r&&e(i,t(i),r)}return Qv=n,Qv}var Fu={exports:{}};Fu.exports;var UO;function qq(){return UO||(UO=1,(function(e,t){var n=ji(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===r,o=s?n.Buffer:void 0,l=o?o.allocUnsafe:void 0;function u(d,h){if(h)return d.slice();var p=d.length,m=l?l(p):new d.constructor(p);return d.copy(m),m}e.exports=u})(Fu,Fu.exports)),Fu.exports}var ex,$O;function Vq(){if($O)return ex;$O=1;function e(t,n){var r=-1,i=t.length;for(n||(n=Array(i));++r<i;)n[r]=t[r];return n}return ex=e,ex}var tx,GO;function Hq(){if(GO)return tx;GO=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,s=0,o=[];++r<i;){var l=t[r];n(l,r,t)&&(o[s++]=l)}return o}return tx=e,tx}var nx,WO;function Fq(){if(WO)return nx;WO=1;function e(){return[]}return nx=e,nx}var rx,KO;function k2(){if(KO)return rx;KO=1;var e=Hq(),t=Fq(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(o){return o==null?[]:(o=Object(o),e(i(o),function(l){return r.call(o,l)}))}:t;return rx=s,rx}var ix,YO;function Due(){if(YO)return ix;YO=1;var e=of(),t=k2();function n(r,i){return e(r,t(r),i)}return ix=n,ix}var sx,XO;function T2(){if(XO)return sx;XO=1;function e(t,n){for(var r=-1,i=n.length,s=t.length;++r<i;)t[s+r]=n[r];return t}return sx=e,sx}var ox,ZO;function wg(){if(ZO)return ox;ZO=1;var e=zq(),t=e(Object.getPrototypeOf,Object);return ox=t,ox}var ax,JO;function Uq(){if(JO)return ax;JO=1;var e=T2(),t=wg(),n=k2(),r=Fq(),i=Object.getOwnPropertySymbols,s=i?function(o){for(var l=[];o;)e(l,n(o)),o=t(o);return l}:r;return ax=s,ax}var lx,QO;function Rue(){if(QO)return lx;QO=1;var e=of(),t=Uq();function n(r,i){return e(r,t(r),i)}return lx=n,lx}var cx,e3;function $q(){if(e3)return cx;e3=1;var e=T2(),t=Cn();function n(r,i,s){var o=i(r);return t(r)?o:e(o,s(r))}return cx=n,cx}var ux,t3;function Gq(){if(t3)return ux;t3=1;var e=$q(),t=k2(),n=Wo();function r(i){return e(i,n,t)}return ux=r,ux}var dx,n3;function jue(){if(n3)return dx;n3=1;var e=$q(),t=Uq(),n=Qa();function r(i){return e(i,n,t)}return dx=r,dx}var fx,r3;function Oue(){if(r3)return fx;r3=1;var e=Ja(),t=ji(),n=e(t,"DataView");return fx=n,fx}var hx,i3;function Lue(){if(i3)return hx;i3=1;var e=Ja(),t=ji(),n=e(t,"Promise");return hx=n,hx}var px,s3;function Wq(){if(s3)return px;s3=1;var e=Ja(),t=ji(),n=e(t,"Set");return px=n,px}var mx,o3;function Pue(){if(o3)return mx;o3=1;var e=Ja(),t=ji(),n=e(t,"WeakMap");return mx=n,mx}var gx,a3;function Ec(){if(a3)return gx;a3=1;var e=Oue(),t=v2(),n=Lue(),r=Wq(),i=Pue(),s=Za(),o=Pq(),l="[object Map]",u="[object Object]",d="[object Promise]",h="[object Set]",p="[object WeakMap]",m="[object DataView]",b=o(e),x=o(t),S=o(n),w=o(r),C=o(i),N=s;return(e&&N(new e(new ArrayBuffer(1)))!=m||t&&N(new t)!=l||n&&N(n.resolve())!=d||r&&N(new r)!=h||i&&N(new i)!=p)&&(N=function(k){var T=s(k),A=T==u?k.constructor:void 0,M=A?o(A):"";if(M)switch(M){case b:return m;case x:return l;case S:return d;case w:return h;case C:return p}return T}),gx=N,gx}var yx,l3;function Iue(){if(l3)return yx;l3=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r){var i=r.length,s=new r.constructor(i);return i&&typeof r[0]=="string"&&t.call(r,"index")&&(s.index=r.index,s.input=r.input),s}return yx=n,yx}var bx,c3;function Kq(){if(c3)return bx;c3=1;var e=ji(),t=e.Uint8Array;return bx=t,bx}var vx,u3;function N2(){if(u3)return vx;u3=1;var e=Kq();function t(n){var r=new n.constructor(n.byteLength);return new e(r).set(new e(n)),r}return vx=t,vx}var xx,d3;function Bue(){if(d3)return xx;d3=1;var e=N2();function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.byteLength)}return xx=t,xx}var wx,f3;function zue(){if(f3)return wx;f3=1;var e=/\w*$/;function t(n){var r=new n.constructor(n.source,e.exec(n));return r.lastIndex=n.lastIndex,r}return wx=t,wx}var Sx,h3;function que(){if(h3)return Sx;h3=1;var e=wc(),t=e?e.prototype:void 0,n=t?t.valueOf:void 0;function r(i){return n?Object(n.call(i)):{}}return Sx=r,Sx}var Ex,p3;function Yq(){if(p3)return Ex;p3=1;var e=N2();function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.length)}return Ex=t,Ex}var Cx,m3;function Vue(){if(m3)return Cx;m3=1;var e=N2(),t=Bue(),n=zue(),r=que(),i=Yq(),s="[object Boolean]",o="[object Date]",l="[object Map]",u="[object Number]",d="[object RegExp]",h="[object Set]",p="[object String]",m="[object Symbol]",b="[object ArrayBuffer]",x="[object DataView]",S="[object Float32Array]",w="[object Float64Array]",C="[object Int8Array]",N="[object Int16Array]",k="[object Int32Array]",T="[object Uint8Array]",A="[object Uint8ClampedArray]",M="[object Uint16Array]",j="[object Uint32Array]";function R(L,I,H){var q=L.constructor;switch(I){case b:return e(L);case s:case o:return new q(+L);case x:return t(L,H);case S:case w:case C:case N:case k:case T:case A:case M:case j:return i(L,H);case l:return new q;case u:case p:return new q(L);case d:return n(L);case h:return new q;case m:return r(L)}}return Cx=R,Cx}var kx,g3;function Xq(){if(g3)return kx;g3=1;var e=mi(),t=Object.create,n=(function(){function r(){}return function(i){if(!e(i))return{};if(t)return t(i);r.prototype=i;var s=new r;return r.prototype=void 0,s}})();return kx=n,kx}var Tx,y3;function Zq(){if(y3)return Tx;y3=1;var e=Xq(),t=wg(),n=xg();function r(i){return typeof i.constructor=="function"&&!n(i)?e(t(i)):{}}return Tx=r,Tx}var Nx,b3;function Hue(){if(b3)return Nx;b3=1;var e=Ec(),t=is(),n="[object Map]";function r(i){return t(i)&&e(i)==n}return Nx=r,Nx}var Ax,v3;function Fue(){if(v3)return Ax;v3=1;var e=Hue(),t=vg(),n=E2(),r=n&&n.isMap,i=r?t(r):e;return Ax=i,Ax}var Mx,x3;function Uue(){if(x3)return Mx;x3=1;var e=Ec(),t=is(),n="[object Set]";function r(i){return t(i)&&e(i)==n}return Mx=r,Mx}var _x,w3;function $ue(){if(w3)return _x;w3=1;var e=Uue(),t=vg(),n=E2(),r=n&&n.isSet,i=r?t(r):e;return _x=i,_x}var Dx,S3;function Jq(){if(S3)return Dx;S3=1;var e=mg(),t=w2(),n=yg(),r=Nue(),i=_ue(),s=qq(),o=Vq(),l=Due(),u=Rue(),d=Gq(),h=jue(),p=Ec(),m=Iue(),b=Vue(),x=Zq(),S=Cn(),w=Sc(),C=Fue(),N=mi(),k=$ue(),T=Wo(),A=Qa(),M=1,j=2,R=4,L="[object Arguments]",I="[object Array]",H="[object Boolean]",q="[object Date]",W="[object Error]",z="[object Function]",F="[object GeneratorFunction]",O="[object Map]",V="[object Number]",Y="[object Object]",te="[object RegExp]",B="[object Set]",$="[object String]",oe="[object Symbol]",ae="[object WeakMap]",U="[object ArrayBuffer]",Z="[object DataView]",ee="[object Float32Array]",de="[object Float64Array]",ce="[object Int8Array]",ve="[object Int16Array]",De="[object Int32Array]",Pe="[object Uint8Array]",Ae="[object Uint8ClampedArray]",Ee="[object Uint16Array]",Se="[object Uint32Array]",Te={};Te[L]=Te[I]=Te[U]=Te[Z]=Te[H]=Te[q]=Te[ee]=Te[de]=Te[ce]=Te[ve]=Te[De]=Te[O]=Te[V]=Te[Y]=Te[te]=Te[B]=Te[$]=Te[oe]=Te[Pe]=Te[Ae]=Te[Ee]=Te[Se]=!0,Te[W]=Te[z]=Te[ae]=!1;function ot(Oe,Mt,Wt,Dn,rn,_t){var mt,Rn=Mt&M,sn=Mt&j,zt=Mt&R;if(Wt&&(mt=rn?Wt(Oe,Dn,rn,_t):Wt(Oe)),mt!==void 0)return mt;if(!N(Oe))return Oe;var ht=S(Oe);if(ht){if(mt=m(Oe),!Rn)return o(Oe,mt)}else{var qe=p(Oe),Ve=qe==z||qe==F;if(w(Oe))return s(Oe,Rn);if(qe==Y||qe==L||Ve&&!rn){if(mt=sn||Ve?{}:x(Oe),!Rn)return sn?u(Oe,i(mt,Oe)):l(Oe,r(mt,Oe))}else{if(!Te[qe])return rn?Oe:{};mt=b(Oe,qe,Rn)}}_t||(_t=new e);var Mr=_t.get(Oe);if(Mr)return Mr;_t.set(Oe,mt),k(Oe)?Oe.forEach(function(Yt){mt.add(ot(Yt,Mt,Wt,Yt,Oe,_t))}):C(Oe)&&Oe.forEach(function(Yt,on){mt.set(on,ot(Yt,Mt,Wt,on,Oe,_t))});var Rt=zt?sn?h:d:sn?A:T,Kt=ht?void 0:Rt(Oe);return t(Kt||Oe,function(Yt,on){Kt&&(on=Yt,Yt=Oe[on]),n(mt,on,ot(Yt,Mt,Wt,on,Oe,_t))}),mt}return Dx=ot,Dx}var Rx,E3;function Gue(){if(E3)return Rx;E3=1;var e=Jq(),t=4;function n(r){return e(r,t)}return Rx=n,Rx}var jx,C3;function A2(){if(C3)return jx;C3=1;function e(t){return function(){return t}}return jx=e,jx}var Ox,k3;function Wue(){if(k3)return Ox;k3=1;function e(t){return function(n,r,i){for(var s=-1,o=Object(n),l=i(n),u=l.length;u--;){var d=l[t?u:++s];if(r(o[d],d,o)===!1)break}return n}}return Ox=e,Ox}var Lx,T3;function M2(){if(T3)return Lx;T3=1;var e=Wue(),t=e();return Lx=t,Lx}var Px,N3;function _2(){if(N3)return Px;N3=1;var e=M2(),t=Wo();function n(r,i){return r&&e(r,i,t)}return Px=n,Px}var Ix,A3;function Kue(){if(A3)return Ix;A3=1;var e=Vs();function t(n,r){return function(i,s){if(i==null)return i;if(!e(i))return n(i,s);for(var o=i.length,l=r?o:-1,u=Object(i);(r?l--:++l<o)&&s(u[l],l,u)!==!1;);return i}}return Ix=t,Ix}var Bx,M3;function Sg(){if(M3)return Bx;M3=1;var e=_2(),t=Kue(),n=t(e);return Bx=n,Bx}var zx,_3;function el(){if(_3)return zx;_3=1;function e(t){return t}return zx=e,zx}var qx,D3;function Qq(){if(D3)return qx;D3=1;var e=el();function t(n){return typeof n=="function"?n:e}return qx=t,qx}var Vx,R3;function eV(){if(R3)return Vx;R3=1;var e=w2(),t=Sg(),n=Qq(),r=Cn();function i(s,o){var l=r(s)?e:t;return l(s,n(o))}return Vx=i,Vx}var Hx,j3;function tV(){return j3||(j3=1,Hx=eV()),Hx}var Fx,O3;function Yue(){if(O3)return Fx;O3=1;var e=Sg();function t(n,r){var i=[];return e(n,function(s,o,l){r(s,o,l)&&i.push(s)}),i}return Fx=t,Fx}var Ux,L3;function Xue(){if(L3)return Ux;L3=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return Ux=t,Ux}var $x,P3;function Zue(){if(P3)return $x;P3=1;function e(t){return this.__data__.has(t)}return $x=e,$x}var Gx,I3;function nV(){if(I3)return Gx;I3=1;var e=x2(),t=Xue(),n=Zue();function r(i){var s=-1,o=i==null?0:i.length;for(this.__data__=new e;++s<o;)this.add(i[s])}return r.prototype.add=r.prototype.push=t,r.prototype.has=n,Gx=r,Gx}var Wx,B3;function Jue(){if(B3)return Wx;B3=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(t[r],r,t))return!0;return!1}return Wx=e,Wx}var Kx,z3;function rV(){if(z3)return Kx;z3=1;function e(t,n){return t.has(n)}return Kx=e,Kx}var Yx,q3;function iV(){if(q3)return Yx;q3=1;var e=nV(),t=Jue(),n=rV(),r=1,i=2;function s(o,l,u,d,h,p){var m=u&r,b=o.length,x=l.length;if(b!=x&&!(m&&x>b))return!1;var S=p.get(o),w=p.get(l);if(S&&w)return S==l&&w==o;var C=-1,N=!0,k=u&i?new e:void 0;for(p.set(o,l),p.set(l,o);++C<b;){var T=o[C],A=l[C];if(d)var M=m?d(A,T,C,l,o,p):d(T,A,C,o,l,p);if(M!==void 0){if(M)continue;N=!1;break}if(k){if(!t(l,function(j,R){if(!n(k,R)&&(T===j||h(T,j,u,d,p)))return k.push(R)})){N=!1;break}}else if(!(T===A||h(T,A,u,d,p))){N=!1;break}}return p.delete(o),p.delete(l),N}return Yx=s,Yx}var Xx,V3;function Que(){if(V3)return Xx;V3=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i,s){r[++n]=[s,i]}),r}return Xx=e,Xx}var Zx,H3;function D2(){if(H3)return Zx;H3=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i){r[++n]=i}),r}return Zx=e,Zx}var Jx,F3;function ede(){if(F3)return Jx;F3=1;var e=wc(),t=Kq(),n=xc(),r=iV(),i=Que(),s=D2(),o=1,l=2,u="[object Boolean]",d="[object Date]",h="[object Error]",p="[object Map]",m="[object Number]",b="[object RegExp]",x="[object Set]",S="[object String]",w="[object Symbol]",C="[object ArrayBuffer]",N="[object DataView]",k=e?e.prototype:void 0,T=k?k.valueOf:void 0;function A(M,j,R,L,I,H,q){switch(R){case N:if(M.byteLength!=j.byteLength||M.byteOffset!=j.byteOffset)return!1;M=M.buffer,j=j.buffer;case C:return!(M.byteLength!=j.byteLength||!H(new t(M),new t(j)));case u:case d:case m:return n(+M,+j);case h:return M.name==j.name&&M.message==j.message;case b:case S:return M==j+"";case p:var W=i;case x:var z=L&o;if(W||(W=s),M.size!=j.size&&!z)return!1;var F=q.get(M);if(F)return F==j;L|=l,q.set(M,j);var O=r(W(M),W(j),L,I,H,q);return q.delete(M),O;case w:if(T)return T.call(M)==T.call(j)}return!1}return Jx=A,Jx}var Qx,U3;function tde(){if(U3)return Qx;U3=1;var e=Gq(),t=1,n=Object.prototype,r=n.hasOwnProperty;function i(s,o,l,u,d,h){var p=l&t,m=e(s),b=m.length,x=e(o),S=x.length;if(b!=S&&!p)return!1;for(var w=b;w--;){var C=m[w];if(!(p?C in o:r.call(o,C)))return!1}var N=h.get(s),k=h.get(o);if(N&&k)return N==o&&k==s;var T=!0;h.set(s,o),h.set(o,s);for(var A=p;++w<b;){C=m[w];var M=s[C],j=o[C];if(u)var R=p?u(j,M,C,o,s,h):u(M,j,C,s,o,h);if(!(R===void 0?M===j||d(M,j,l,u,h):R)){T=!1;break}A||(A=C=="constructor")}if(T&&!A){var L=s.constructor,I=o.constructor;L!=I&&"constructor"in s&&"constructor"in o&&!(typeof L=="function"&&L instanceof L&&typeof I=="function"&&I instanceof I)&&(T=!1)}return h.delete(s),h.delete(o),T}return Qx=i,Qx}var e1,$3;function nde(){if($3)return e1;$3=1;var e=mg(),t=iV(),n=ede(),r=tde(),i=Ec(),s=Cn(),o=Sc(),l=lf(),u=1,d="[object Arguments]",h="[object Array]",p="[object Object]",m=Object.prototype,b=m.hasOwnProperty;function x(S,w,C,N,k,T){var A=s(S),M=s(w),j=A?h:i(S),R=M?h:i(w);j=j==d?p:j,R=R==d?p:R;var L=j==p,I=R==p,H=j==R;if(H&&o(S)){if(!o(w))return!1;A=!0,L=!1}if(H&&!L)return T||(T=new e),A||l(S)?t(S,w,C,N,k,T):n(S,w,j,C,N,k,T);if(!(C&u)){var q=L&&b.call(S,"__wrapped__"),W=I&&b.call(w,"__wrapped__");if(q||W){var z=q?S.value():S,F=W?w.value():w;return T||(T=new e),k(z,F,C,N,T)}}return H?(T||(T=new e),r(S,w,C,N,k,T)):!1}return e1=x,e1}var t1,G3;function sV(){if(G3)return t1;G3=1;var e=nde(),t=is();function n(r,i,s,o,l){return r===i?!0:r==null||i==null||!t(r)&&!t(i)?r!==r&&i!==i:e(r,i,s,o,n,l)}return t1=n,t1}var n1,W3;function rde(){if(W3)return n1;W3=1;var e=mg(),t=sV(),n=1,r=2;function i(s,o,l,u){var d=l.length,h=d,p=!u;if(s==null)return!h;for(s=Object(s);d--;){var m=l[d];if(p&&m[2]?m[1]!==s[m[0]]:!(m[0]in s))return!1}for(;++d<h;){m=l[d];var b=m[0],x=s[b],S=m[1];if(p&&m[2]){if(x===void 0&&!(b in s))return!1}else{var w=new e;if(u)var C=u(x,S,b,s,o,w);if(!(C===void 0?t(S,x,n|r,u,w):C))return!1}}return!0}return n1=i,n1}var r1,K3;function oV(){if(K3)return r1;K3=1;var e=mi();function t(n){return n===n&&!e(n)}return r1=t,r1}var i1,Y3;function ide(){if(Y3)return i1;Y3=1;var e=oV(),t=Wo();function n(r){for(var i=t(r),s=i.length;s--;){var o=i[s],l=r[o];i[s]=[o,l,e(l)]}return i}return i1=n,i1}var s1,X3;function aV(){if(X3)return s1;X3=1;function e(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}return s1=e,s1}var o1,Z3;function sde(){if(Z3)return o1;Z3=1;var e=rde(),t=ide(),n=aV();function r(i){var s=t(i);return s.length==1&&s[0][2]?n(s[0][0],s[0][1]):function(o){return o===i||e(o,i,s)}}return o1=r,o1}var a1,J3;function Cc(){if(J3)return a1;J3=1;var e=Za(),t=is(),n="[object Symbol]";function r(i){return typeof i=="symbol"||t(i)&&e(i)==n}return a1=r,a1}var l1,Q3;function R2(){if(Q3)return l1;Q3=1;var e=Cn(),t=Cc(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,o){if(e(s))return!1;var l=typeof s;return l=="number"||l=="symbol"||l=="boolean"||s==null||t(s)?!0:r.test(s)||!n.test(s)||o!=null&&s in Object(o)}return l1=i,l1}var c1,eL;function ode(){if(eL)return c1;eL=1;var e=x2(),t="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var s=function(){var o=arguments,l=i?i.apply(this,o):o[0],u=s.cache;if(u.has(l))return u.get(l);var d=r.apply(this,o);return s.cache=u.set(l,d)||u,d};return s.cache=new(n.Cache||e),s}return n.Cache=e,c1=n,c1}var u1,tL;function ade(){if(tL)return u1;tL=1;var e=ode(),t=500;function n(r){var i=e(r,function(o){return s.size===t&&s.clear(),o}),s=i.cache;return i}return u1=n,u1}var d1,nL;function lde(){if(nL)return d1;nL=1;var e=ade(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(t,function(o,l,u,d){s.push(u?d.replace(n,"$1"):l||o)}),s});return d1=r,d1}var f1,rL;function Eg(){if(rL)return f1;rL=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,s=Array(i);++r<i;)s[r]=n(t[r],r,t);return s}return f1=e,f1}var h1,iL;function cde(){if(iL)return h1;iL=1;var e=wc(),t=Eg(),n=Cn(),r=Cc(),i=e?e.prototype:void 0,s=i?i.toString:void 0;function o(l){if(typeof l=="string")return l;if(n(l))return t(l,o)+"";if(r(l))return s?s.call(l):"";var u=l+"";return u=="0"&&1/l==-1/0?"-0":u}return h1=o,h1}var p1,sL;function lV(){if(sL)return p1;sL=1;var e=cde();function t(n){return n==null?"":e(n)}return p1=t,p1}var m1,oL;function Cg(){if(oL)return m1;oL=1;var e=Cn(),t=R2(),n=lde(),r=lV();function i(s,o){return e(s)?s:t(s,o)?[s]:n(r(s))}return m1=i,m1}var g1,aL;function cf(){if(aL)return g1;aL=1;var e=Cc();function t(n){if(typeof n=="string"||e(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return g1=t,g1}var y1,lL;function kg(){if(lL)return y1;lL=1;var e=Cg(),t=cf();function n(r,i){i=e(i,r);for(var s=0,o=i.length;r!=null&&s<o;)r=r[t(i[s++])];return s&&s==o?r:void 0}return y1=n,y1}var b1,cL;function ude(){if(cL)return b1;cL=1;var e=kg();function t(n,r,i){var s=n==null?void 0:e(n,r);return s===void 0?i:s}return b1=t,b1}var v1,uL;function dde(){if(uL)return v1;uL=1;function e(t,n){return t!=null&&n in Object(t)}return v1=e,v1}var x1,dL;function cV(){if(dL)return x1;dL=1;var e=Cg(),t=af(),n=Cn(),r=bg(),i=S2(),s=cf();function o(l,u,d){u=e(u,l);for(var h=-1,p=u.length,m=!1;++h<p;){var b=s(u[h]);if(!(m=l!=null&&d(l,b)))break;l=l[b]}return m||++h!=p?m:(p=l==null?0:l.length,!!p&&i(p)&&r(b,p)&&(n(l)||t(l)))}return x1=o,x1}var w1,fL;function uV(){if(fL)return w1;fL=1;var e=dde(),t=cV();function n(r,i){return r!=null&&t(r,i,e)}return w1=n,w1}var S1,hL;function fde(){if(hL)return S1;hL=1;var e=sV(),t=ude(),n=uV(),r=R2(),i=oV(),s=aV(),o=cf(),l=1,u=2;function d(h,p){return r(h)&&i(p)?s(o(h),p):function(m){var b=t(m,h);return b===void 0&&b===p?n(m,h):e(p,b,l|u)}}return S1=d,S1}var E1,pL;function dV(){if(pL)return E1;pL=1;function e(t){return function(n){return n?.[t]}}return E1=e,E1}var C1,mL;function hde(){if(mL)return C1;mL=1;var e=kg();function t(n){return function(r){return e(r,n)}}return C1=t,C1}var k1,gL;function pde(){if(gL)return k1;gL=1;var e=dV(),t=hde(),n=R2(),r=cf();function i(s){return n(s)?e(r(s)):t(s)}return k1=i,k1}var T1,yL;function Hs(){if(yL)return T1;yL=1;var e=sde(),t=fde(),n=el(),r=Cn(),i=pde();function s(o){return typeof o=="function"?o:o==null?n:typeof o=="object"?r(o)?t(o[0],o[1]):e(o):i(o)}return T1=s,T1}var N1,bL;function fV(){if(bL)return N1;bL=1;var e=Hq(),t=Yue(),n=Hs(),r=Cn();function i(s,o){var l=r(s)?e:t;return l(s,n(o,3))}return N1=i,N1}var A1,vL;function mde(){if(vL)return A1;vL=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r,i){return r!=null&&t.call(r,i)}return A1=n,A1}var M1,xL;function hV(){if(xL)return M1;xL=1;var e=mde(),t=cV();function n(r,i){return r!=null&&t(r,i,e)}return M1=n,M1}var _1,wL;function gde(){if(wL)return _1;wL=1;var e=C2(),t=Ec(),n=af(),r=Cn(),i=Vs(),s=Sc(),o=xg(),l=lf(),u="[object Map]",d="[object Set]",h=Object.prototype,p=h.hasOwnProperty;function m(b){if(b==null)return!0;if(i(b)&&(r(b)||typeof b=="string"||typeof b.splice=="function"||s(b)||l(b)||n(b)))return!b.length;var x=t(b);if(x==u||x==d)return!b.size;if(o(b))return!e(b).length;for(var S in b)if(p.call(b,S))return!1;return!0}return _1=m,_1}var D1,SL;function pV(){if(SL)return D1;SL=1;function e(t){return t===void 0}return D1=e,D1}var R1,EL;function mV(){if(EL)return R1;EL=1;var e=Sg(),t=Vs();function n(r,i){var s=-1,o=t(r)?Array(r.length):[];return e(r,function(l,u,d){o[++s]=i(l,u,d)}),o}return R1=n,R1}var j1,CL;function gV(){if(CL)return j1;CL=1;var e=Eg(),t=Hs(),n=mV(),r=Cn();function i(s,o){var l=r(s)?e:n;return l(s,t(o,3))}return j1=i,j1}var O1,kL;function yde(){if(kL)return O1;kL=1;function e(t,n,r,i){var s=-1,o=t==null?0:t.length;for(i&&o&&(r=t[++s]);++s<o;)r=n(r,t[s],s,t);return r}return O1=e,O1}var L1,TL;function bde(){if(TL)return L1;TL=1;function e(t,n,r,i,s){return s(t,function(o,l,u){r=i?(i=!1,o):n(r,o,l,u)}),r}return L1=e,L1}var P1,NL;function yV(){if(NL)return P1;NL=1;var e=yde(),t=Sg(),n=Hs(),r=bde(),i=Cn();function s(o,l,u){var d=i(o)?e:r,h=arguments.length<3;return d(o,n(l,4),u,h,t)}return P1=s,P1}var I1,AL;function vde(){if(AL)return I1;AL=1;var e=Za(),t=Cn(),n=is(),r="[object String]";function i(s){return typeof s=="string"||!t(s)&&n(s)&&e(s)==r}return I1=i,I1}var B1,ML;function xde(){if(ML)return B1;ML=1;var e=dV(),t=e("length");return B1=t,B1}var z1,_L;function wde(){if(_L)return z1;_L=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,s="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+e+i+s+"]");function u(d){return l.test(d)}return z1=u,z1}var q1,DL;function Sde(){if(DL)return q1;DL=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,s="\\ufe0e\\ufe0f",o="["+e+"]",l="["+i+"]",u="\\ud83c[\\udffb-\\udfff]",d="(?:"+l+"|"+u+")",h="[^"+e+"]",p="(?:\\ud83c[\\udde6-\\uddff]){2}",m="[\\ud800-\\udbff][\\udc00-\\udfff]",b="\\u200d",x=d+"?",S="["+s+"]?",w="(?:"+b+"(?:"+[h,p,m].join("|")+")"+S+x+")*",C=S+x+w,N="(?:"+[h+l+"?",l,p,m,o].join("|")+")",k=RegExp(u+"(?="+u+")|"+N+C,"g");function T(A){for(var M=k.lastIndex=0;k.test(A);)++M;return M}return q1=T,q1}var V1,RL;function Ede(){if(RL)return V1;RL=1;var e=xde(),t=wde(),n=Sde();function r(i){return t(i)?n(i):e(i)}return V1=r,V1}var H1,jL;function Cde(){if(jL)return H1;jL=1;var e=C2(),t=Ec(),n=Vs(),r=vde(),i=Ede(),s="[object Map]",o="[object Set]";function l(u){if(u==null)return 0;if(n(u))return r(u)?i(u):u.length;var d=t(u);return d==s||d==o?u.size:e(u).length}return H1=l,H1}var F1,OL;function kde(){if(OL)return F1;OL=1;var e=w2(),t=Xq(),n=_2(),r=Hs(),i=wg(),s=Cn(),o=Sc(),l=sf(),u=mi(),d=lf();function h(p,m,b){var x=s(p),S=x||o(p)||d(p);if(m=r(m,4),b==null){var w=p&&p.constructor;S?b=x?new w:[]:u(p)?b=l(w)?t(i(p)):{}:b={}}return(S?e:n)(p,function(C,N,k){return m(b,C,N,k)}),b}return F1=h,F1}var U1,LL;function Tde(){if(LL)return U1;LL=1;var e=wc(),t=af(),n=Cn(),r=e?e.isConcatSpreadable:void 0;function i(s){return n(s)||t(s)||!!(r&&s&&s[r])}return U1=i,U1}var $1,PL;function j2(){if(PL)return $1;PL=1;var e=T2(),t=Tde();function n(r,i,s,o,l){var u=-1,d=r.length;for(s||(s=t),l||(l=[]);++u<d;){var h=r[u];i>0&&s(h)?i>1?n(h,i-1,s,o,l):e(l,h):o||(l[l.length]=h)}return l}return $1=n,$1}var G1,IL;function Nde(){if(IL)return G1;IL=1;function e(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}return G1=e,G1}var W1,BL;function bV(){if(BL)return W1;BL=1;var e=Nde(),t=Math.max;function n(r,i,s){return i=t(i===void 0?r.length-1:i,0),function(){for(var o=arguments,l=-1,u=t(o.length-i,0),d=Array(u);++l<u;)d[l]=o[i+l];l=-1;for(var h=Array(i+1);++l<i;)h[l]=o[l];return h[i]=s(d),e(r,this,h)}}return W1=n,W1}var K1,zL;function Ade(){if(zL)return K1;zL=1;var e=A2(),t=Iq(),n=el(),r=t?function(i,s){return t(i,"toString",{configurable:!0,enumerable:!1,value:e(s),writable:!0})}:n;return K1=r,K1}var Y1,qL;function Mde(){if(qL)return Y1;qL=1;var e=800,t=16,n=Date.now;function r(i){var s=0,o=0;return function(){var l=n(),u=t-(l-o);if(o=l,u>0){if(++s>=e)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return Y1=r,Y1}var X1,VL;function vV(){if(VL)return X1;VL=1;var e=Ade(),t=Mde(),n=t(e);return X1=n,X1}var Z1,HL;function Tg(){if(HL)return Z1;HL=1;var e=el(),t=bV(),n=vV();function r(i,s){return n(t(i,s,e),i+"")}return Z1=r,Z1}var J1,FL;function xV(){if(FL)return J1;FL=1;function e(t,n,r,i){for(var s=t.length,o=r+(i?1:-1);i?o--:++o<s;)if(n(t[o],o,t))return o;return-1}return J1=e,J1}var Q1,UL;function _de(){if(UL)return Q1;UL=1;function e(t){return t!==t}return Q1=e,Q1}var ew,$L;function Dde(){if($L)return ew;$L=1;function e(t,n,r){for(var i=r-1,s=t.length;++i<s;)if(t[i]===n)return i;return-1}return ew=e,ew}var tw,GL;function Rde(){if(GL)return tw;GL=1;var e=xV(),t=_de(),n=Dde();function r(i,s,o){return s===s?n(i,s,o):e(i,t,o)}return tw=r,tw}var nw,WL;function jde(){if(WL)return nw;WL=1;var e=Rde();function t(n,r){var i=n==null?0:n.length;return!!i&&e(n,r,0)>-1}return nw=t,nw}var rw,KL;function Ode(){if(KL)return rw;KL=1;function e(t,n,r){for(var i=-1,s=t==null?0:t.length;++i<s;)if(r(n,t[i]))return!0;return!1}return rw=e,rw}var iw,YL;function Lde(){if(YL)return iw;YL=1;function e(){}return iw=e,iw}var sw,XL;function Pde(){if(XL)return sw;XL=1;var e=Wq(),t=Lde(),n=D2(),r=1/0,i=e&&1/n(new e([,-0]))[1]==r?function(s){return new e(s)}:t;return sw=i,sw}var ow,ZL;function Ide(){if(ZL)return ow;ZL=1;var e=nV(),t=jde(),n=Ode(),r=rV(),i=Pde(),s=D2(),o=200;function l(u,d,h){var p=-1,m=t,b=u.length,x=!0,S=[],w=S;if(h)x=!1,m=n;else if(b>=o){var C=d?null:i(u);if(C)return s(C);x=!1,m=r,w=new e}else w=d?[]:S;e:for(;++p<b;){var N=u[p],k=d?d(N):N;if(N=h||N!==0?N:0,x&&k===k){for(var T=w.length;T--;)if(w[T]===k)continue e;d&&w.push(k),S.push(N)}else m(w,k,h)||(w!==S&&w.push(k),S.push(N))}return S}return ow=l,ow}var aw,JL;function wV(){if(JL)return aw;JL=1;var e=Vs(),t=is();function n(r){return t(r)&&e(r)}return aw=n,aw}var lw,QL;function Bde(){if(QL)return lw;QL=1;var e=j2(),t=Tg(),n=Ide(),r=wV(),i=t(function(s){return n(e(s,1,r,!0))});return lw=i,lw}var cw,e4;function zde(){if(e4)return cw;e4=1;var e=Eg();function t(n,r){return e(r,function(i){return n[i]})}return cw=t,cw}var uw,t4;function SV(){if(t4)return uw;t4=1;var e=zde(),t=Wo();function n(r){return r==null?[]:e(r,t(r))}return uw=n,uw}var dw,n4;function gi(){if(n4)return dw;n4=1;var e;if(typeof b2=="function")try{e={clone:Gue(),constant:A2(),each:tV(),filter:fV(),has:hV(),isArray:Cn(),isEmpty:gde(),isFunction:sf(),isUndefined:pV(),keys:Wo(),map:gV(),reduce:yV(),size:Cde(),transform:kde(),union:Bde(),values:SV()}}catch{}return e||(e=window._),dw=e,dw}var fw,r4;function O2(){if(r4)return fw;r4=1;var e=gi();fw=i;var t="\0",n="\0",r="";function i(h){this._isDirected=e.has(h,"directed")?h.directed:!0,this._isMultigraph=e.has(h,"multigraph")?h.multigraph:!1,this._isCompound=e.has(h,"compound")?h.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(h){return this._label=h,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(h){return e.isFunction(h)||(h=e.constant(h)),this._defaultNodeLabelFn=h,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return e.keys(this._nodes)},i.prototype.sources=function(){var h=this;return e.filter(this.nodes(),function(p){return e.isEmpty(h._in[p])})},i.prototype.sinks=function(){var h=this;return e.filter(this.nodes(),function(p){return e.isEmpty(h._out[p])})},i.prototype.setNodes=function(h,p){var m=arguments,b=this;return e.each(h,function(x){m.length>1?b.setNode(x,p):b.setNode(x)}),this},i.prototype.setNode=function(h,p){return e.has(this._nodes,h)?(arguments.length>1&&(this._nodes[h]=p),this):(this._nodes[h]=arguments.length>1?p:this._defaultNodeLabelFn(h),this._isCompound&&(this._parent[h]=n,this._children[h]={},this._children[n][h]=!0),this._in[h]={},this._preds[h]={},this._out[h]={},this._sucs[h]={},++this._nodeCount,this)},i.prototype.node=function(h){return this._nodes[h]},i.prototype.hasNode=function(h){return e.has(this._nodes,h)},i.prototype.removeNode=function(h){var p=this;if(e.has(this._nodes,h)){var m=function(b){p.removeEdge(p._edgeObjs[b])};delete this._nodes[h],this._isCompound&&(this._removeFromParentsChildList(h),delete this._parent[h],e.each(this.children(h),function(b){p.setParent(b)}),delete this._children[h]),e.each(e.keys(this._in[h]),m),delete this._in[h],delete this._preds[h],e.each(e.keys(this._out[h]),m),delete this._out[h],delete this._sucs[h],--this._nodeCount}return this},i.prototype.setParent=function(h,p){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(p))p=n;else{p+="";for(var m=p;!e.isUndefined(m);m=this.parent(m))if(m===h)throw new Error("Setting "+p+" as parent of "+h+" would create a cycle");this.setNode(p)}return this.setNode(h),this._removeFromParentsChildList(h),this._parent[h]=p,this._children[p][h]=!0,this},i.prototype._removeFromParentsChildList=function(h){delete this._children[this._parent[h]][h]},i.prototype.parent=function(h){if(this._isCompound){var p=this._parent[h];if(p!==n)return p}},i.prototype.children=function(h){if(e.isUndefined(h)&&(h=n),this._isCompound){var p=this._children[h];if(p)return e.keys(p)}else{if(h===n)return this.nodes();if(this.hasNode(h))return[]}},i.prototype.predecessors=function(h){var p=this._preds[h];if(p)return e.keys(p)},i.prototype.successors=function(h){var p=this._sucs[h];if(p)return e.keys(p)},i.prototype.neighbors=function(h){var p=this.predecessors(h);if(p)return e.union(p,this.successors(h))},i.prototype.isLeaf=function(h){var p;return this.isDirected()?p=this.successors(h):p=this.neighbors(h),p.length===0},i.prototype.filterNodes=function(h){var p=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});p.setGraph(this.graph());var m=this;e.each(this._nodes,function(S,w){h(w)&&p.setNode(w,S)}),e.each(this._edgeObjs,function(S){p.hasNode(S.v)&&p.hasNode(S.w)&&p.setEdge(S,m.edge(S))});var b={};function x(S){var w=m.parent(S);return w===void 0||p.hasNode(w)?(b[S]=w,w):w in b?b[w]:x(w)}return this._isCompound&&e.each(p.nodes(),function(S){p.setParent(S,x(S))}),p},i.prototype.setDefaultEdgeLabel=function(h){return e.isFunction(h)||(h=e.constant(h)),this._defaultEdgeLabelFn=h,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return e.values(this._edgeObjs)},i.prototype.setPath=function(h,p){var m=this,b=arguments;return e.reduce(h,function(x,S){return b.length>1?m.setEdge(x,S,p):m.setEdge(x,S),S}),this},i.prototype.setEdge=function(){var h,p,m,b,x=!1,S=arguments[0];typeof S=="object"&&S!==null&&"v"in S?(h=S.v,p=S.w,m=S.name,arguments.length===2&&(b=arguments[1],x=!0)):(h=S,p=arguments[1],m=arguments[3],arguments.length>2&&(b=arguments[2],x=!0)),h=""+h,p=""+p,e.isUndefined(m)||(m=""+m);var w=l(this._isDirected,h,p,m);if(e.has(this._edgeLabels,w))return x&&(this._edgeLabels[w]=b),this;if(!e.isUndefined(m)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(h),this.setNode(p),this._edgeLabels[w]=x?b:this._defaultEdgeLabelFn(h,p,m);var C=u(this._isDirected,h,p,m);return h=C.v,p=C.w,Object.freeze(C),this._edgeObjs[w]=C,s(this._preds[p],h),s(this._sucs[h],p),this._in[p][w]=C,this._out[h][w]=C,this._edgeCount++,this},i.prototype.edge=function(h,p,m){var b=arguments.length===1?d(this._isDirected,arguments[0]):l(this._isDirected,h,p,m);return this._edgeLabels[b]},i.prototype.hasEdge=function(h,p,m){var b=arguments.length===1?d(this._isDirected,arguments[0]):l(this._isDirected,h,p,m);return e.has(this._edgeLabels,b)},i.prototype.removeEdge=function(h,p,m){var b=arguments.length===1?d(this._isDirected,arguments[0]):l(this._isDirected,h,p,m),x=this._edgeObjs[b];return x&&(h=x.v,p=x.w,delete this._edgeLabels[b],delete this._edgeObjs[b],o(this._preds[p],h),o(this._sucs[h],p),delete this._in[p][b],delete this._out[h][b],this._edgeCount--),this},i.prototype.inEdges=function(h,p){var m=this._in[h];if(m){var b=e.values(m);return p?e.filter(b,function(x){return x.v===p}):b}},i.prototype.outEdges=function(h,p){var m=this._out[h];if(m){var b=e.values(m);return p?e.filter(b,function(x){return x.w===p}):b}},i.prototype.nodeEdges=function(h,p){var m=this.inEdges(h,p);if(m)return m.concat(this.outEdges(h,p))};function s(h,p){h[p]?h[p]++:h[p]=1}function o(h,p){--h[p]||delete h[p]}function l(h,p,m,b){var x=""+p,S=""+m;if(!h&&x>S){var w=x;x=S,S=w}return x+r+S+r+(e.isUndefined(b)?t:b)}function u(h,p,m,b){var x=""+p,S=""+m;if(!h&&x>S){var w=x;x=S,S=w}var C={v:x,w:S};return b&&(C.name=b),C}function d(h,p){return l(h,p.v,p.w,p.name)}return fw}var hw,i4;function qde(){return i4||(i4=1,hw="2.1.8"),hw}var pw,s4;function Vde(){return s4||(s4=1,pw={Graph:O2(),version:qde()}),pw}var mw,o4;function Hde(){if(o4)return mw;o4=1;var e=gi(),t=O2();mw={write:n,read:s};function n(o){var l={options:{directed:o.isDirected(),multigraph:o.isMultigraph(),compound:o.isCompound()},nodes:r(o),edges:i(o)};return e.isUndefined(o.graph())||(l.value=e.clone(o.graph())),l}function r(o){return e.map(o.nodes(),function(l){var u=o.node(l),d=o.parent(l),h={v:l};return e.isUndefined(u)||(h.value=u),e.isUndefined(d)||(h.parent=d),h})}function i(o){return e.map(o.edges(),function(l){var u=o.edge(l),d={v:l.v,w:l.w};return e.isUndefined(l.name)||(d.name=l.name),e.isUndefined(u)||(d.value=u),d})}function s(o){var l=new t(o.options).setGraph(o.value);return e.each(o.nodes,function(u){l.setNode(u.v,u.value),u.parent&&l.setParent(u.v,u.parent)}),e.each(o.edges,function(u){l.setEdge({v:u.v,w:u.w,name:u.name},u.value)}),l}return mw}var gw,a4;function Fde(){if(a4)return gw;a4=1;var e=gi();gw=t;function t(n){var r={},i=[],s;function o(l){e.has(r,l)||(r[l]=!0,s.push(l),e.each(n.successors(l),o),e.each(n.predecessors(l),o))}return e.each(n.nodes(),function(l){s=[],o(l),s.length&&i.push(s)}),i}return gw}var yw,l4;function EV(){if(l4)return yw;l4=1;var e=gi();yw=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,r){var i=this._keyIndices;if(n=String(n),!e.has(i,n)){var s=this._arr,o=s.length;return i[n]=o,s.push({key:n,priority:r}),this._decrease(o),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)},t.prototype._heapify=function(n){var r=this._arr,i=2*n,s=i+1,o=n;i<r.length&&(o=r[i].priority<r[o].priority?i:o,s<r.length&&(o=r[s].priority<r[o].priority?s:o),o!==n&&(this._swap(n,o),this._heapify(o)))},t.prototype._decrease=function(n){for(var r=this._arr,i=r[n].priority,s;n!==0&&(s=n>>1,!(r[s].priority<i));)this._swap(n,s),n=s},t.prototype._swap=function(n,r){var i=this._arr,s=this._keyIndices,o=i[n],l=i[r];i[n]=l,i[r]=o,s[l.key]=n,s[o.key]=r},yw}var bw,c4;function CV(){if(c4)return bw;c4=1;var e=gi(),t=EV();bw=r;var n=e.constant(1);function r(s,o,l,u){return i(s,String(o),l||n,u||function(d){return s.outEdges(d)})}function i(s,o,l,u){var d={},h=new t,p,m,b=function(x){var S=x.v!==p?x.v:x.w,w=d[S],C=l(x),N=m.distance+C;if(C<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+x+" Weight: "+C);N<w.distance&&(w.distance=N,w.predecessor=p,h.decrease(S,N))};for(s.nodes().forEach(function(x){var S=x===o?0:Number.POSITIVE_INFINITY;d[x]={distance:S},h.add(x,S)});h.size()>0&&(p=h.removeMin(),m=d[p],m.distance!==Number.POSITIVE_INFINITY);)u(p).forEach(b);return d}return bw}var vw,u4;function Ude(){if(u4)return vw;u4=1;var e=CV(),t=gi();vw=n;function n(r,i,s){return t.transform(r.nodes(),function(o,l){o[l]=e(r,l,i,s)},{})}return vw}var xw,d4;function kV(){if(d4)return xw;d4=1;var e=gi();xw=t;function t(n){var r=0,i=[],s={},o=[];function l(u){var d=s[u]={onStack:!0,lowlink:r,index:r++};if(i.push(u),n.successors(u).forEach(function(m){e.has(s,m)?s[m].onStack&&(d.lowlink=Math.min(d.lowlink,s[m].index)):(l(m),d.lowlink=Math.min(d.lowlink,s[m].lowlink))}),d.lowlink===d.index){var h=[],p;do p=i.pop(),s[p].onStack=!1,h.push(p);while(u!==p);o.push(h)}}return n.nodes().forEach(function(u){e.has(s,u)||l(u)}),o}return xw}var ww,f4;function $de(){if(f4)return ww;f4=1;var e=gi(),t=kV();ww=n;function n(r){return e.filter(t(r),function(i){return i.length>1||i.length===1&&r.hasEdge(i[0],i[0])})}return ww}var Sw,h4;function Gde(){if(h4)return Sw;h4=1;var e=gi();Sw=n;var t=e.constant(1);function n(i,s,o){return r(i,s||t,o||function(l){return i.outEdges(l)})}function r(i,s,o){var l={},u=i.nodes();return u.forEach(function(d){l[d]={},l[d][d]={distance:0},u.forEach(function(h){d!==h&&(l[d][h]={distance:Number.POSITIVE_INFINITY})}),o(d).forEach(function(h){var p=h.v===d?h.w:h.v,m=s(h);l[d][p]={distance:m,predecessor:d}})}),u.forEach(function(d){var h=l[d];u.forEach(function(p){var m=l[p];u.forEach(function(b){var x=m[d],S=h[b],w=m[b],C=x.distance+S.distance;C<w.distance&&(w.distance=C,w.predecessor=S.predecessor)})})}),l}return Sw}var Ew,p4;function TV(){if(p4)return Ew;p4=1;var e=gi();Ew=t,t.CycleException=n;function t(r){var i={},s={},o=[];function l(u){if(e.has(s,u))throw new n;e.has(i,u)||(s[u]=!0,i[u]=!0,e.each(r.predecessors(u),l),delete s[u],o.push(u))}if(e.each(r.sinks(),l),e.size(i)!==r.nodeCount())throw new n;return o}function n(){}return n.prototype=new Error,Ew}var Cw,m4;function Wde(){if(m4)return Cw;m4=1;var e=TV();Cw=t;function t(n){try{e(n)}catch(r){if(r instanceof e.CycleException)return!1;throw r}return!0}return Cw}var kw,g4;function NV(){if(g4)return kw;g4=1;var e=gi();kw=t;function t(r,i,s){e.isArray(i)||(i=[i]);var o=(r.isDirected()?r.successors:r.neighbors).bind(r),l=[],u={};return e.each(i,function(d){if(!r.hasNode(d))throw new Error("Graph does not have node: "+d);n(r,d,s==="post",u,o,l)}),l}function n(r,i,s,o,l,u){e.has(o,i)||(o[i]=!0,s||u.push(i),e.each(l(i),function(d){n(r,d,s,o,l,u)}),s&&u.push(i))}return kw}var Tw,y4;function Kde(){if(y4)return Tw;y4=1;var e=NV();Tw=t;function t(n,r){return e(n,r,"post")}return Tw}var Nw,b4;function Yde(){if(b4)return Nw;b4=1;var e=NV();Nw=t;function t(n,r){return e(n,r,"pre")}return Nw}var Aw,v4;function Xde(){if(v4)return Aw;v4=1;var e=gi(),t=O2(),n=EV();Aw=r;function r(i,s){var o=new t,l={},u=new n,d;function h(m){var b=m.v===d?m.w:m.v,x=u.priority(b);if(x!==void 0){var S=s(m);S<x&&(l[b]=d,u.decrease(b,S))}}if(i.nodeCount()===0)return o;e.each(i.nodes(),function(m){u.add(m,Number.POSITIVE_INFINITY),o.setNode(m)}),u.decrease(i.nodes()[0],0);for(var p=!1;u.size()>0;){if(d=u.removeMin(),e.has(l,d))o.setEdge(d,l[d]);else{if(p)throw new Error("Input graph is not connected: "+i);p=!0}i.nodeEdges(d).forEach(h)}return o}return Aw}var Mw,x4;function Zde(){return x4||(x4=1,Mw={components:Fde(),dijkstra:CV(),dijkstraAll:Ude(),findCycles:$de(),floydWarshall:Gde(),isAcyclic:Wde(),postorder:Kde(),preorder:Yde(),prim:Xde(),tarjan:kV(),topsort:TV()}),Mw}var _w,w4;function Jde(){if(w4)return _w;w4=1;var e=Vde();return _w={Graph:e.Graph,json:Hde(),alg:Zde(),version:e.version},_w}var Dw,S4;function Di(){if(S4)return Dw;S4=1;var e;if(typeof b2=="function")try{e=Jde()}catch{}return e||(e=window.graphlib),Dw=e,Dw}var Rw,E4;function Qde(){if(E4)return Rw;E4=1;var e=Jq(),t=1,n=4;function r(i){return e(i,t|n)}return Rw=r,Rw}var jw,C4;function Ng(){if(C4)return jw;C4=1;var e=xc(),t=Vs(),n=bg(),r=mi();function i(s,o,l){if(!r(l))return!1;var u=typeof o;return(u=="number"?t(l)&&n(o,l.length):u=="string"&&o in l)?e(l[o],s):!1}return jw=i,jw}var Ow,k4;function efe(){if(k4)return Ow;k4=1;var e=Tg(),t=xc(),n=Ng(),r=Qa(),i=Object.prototype,s=i.hasOwnProperty,o=e(function(l,u){l=Object(l);var d=-1,h=u.length,p=h>2?u[2]:void 0;for(p&&n(u[0],u[1],p)&&(h=1);++d<h;)for(var m=u[d],b=r(m),x=-1,S=b.length;++x<S;){var w=b[x],C=l[w];(C===void 0||t(C,i[w])&&!s.call(l,w))&&(l[w]=m[w])}return l});return Ow=o,Ow}var Lw,T4;function tfe(){if(T4)return Lw;T4=1;var e=Hs(),t=Vs(),n=Wo();function r(i){return function(s,o,l){var u=Object(s);if(!t(s)){var d=e(o,3);s=n(s),o=function(p){return d(u[p],p,u)}}var h=i(s,o,l);return h>-1?u[d?s[h]:h]:void 0}}return Lw=r,Lw}var Pw,N4;function nfe(){if(N4)return Pw;N4=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return Pw=t,Pw}var Iw,A4;function rfe(){if(A4)return Iw;A4=1;var e=nfe(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return Iw=n,Iw}var Bw,M4;function ife(){if(M4)return Bw;M4=1;var e=rfe(),t=mi(),n=Cc(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function u(d){if(typeof d=="number")return d;if(n(d))return r;if(t(d)){var h=typeof d.valueOf=="function"?d.valueOf():d;d=t(h)?h+"":h}if(typeof d!="string")return d===0?d:+d;d=e(d);var p=s.test(d);return p||o.test(d)?l(d.slice(2),p?2:8):i.test(d)?r:+d}return Bw=u,Bw}var zw,_4;function AV(){if(_4)return zw;_4=1;var e=ife(),t=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=e(i),i===t||i===-t){var s=i<0?-1:1;return s*n}return i===i?i:0}return zw=r,zw}var qw,D4;function sfe(){if(D4)return qw;D4=1;var e=AV();function t(n){var r=e(n),i=r%1;return r===r?i?r-i:r:0}return qw=t,qw}var Vw,R4;function ofe(){if(R4)return Vw;R4=1;var e=xV(),t=Hs(),n=sfe(),r=Math.max;function i(s,o,l){var u=s==null?0:s.length;if(!u)return-1;var d=l==null?0:n(l);return d<0&&(d=r(u+d,0)),e(s,t(o,3),d)}return Vw=i,Vw}var Hw,j4;function afe(){if(j4)return Hw;j4=1;var e=tfe(),t=ofe(),n=e(t);return Hw=n,Hw}var Fw,O4;function MV(){if(O4)return Fw;O4=1;var e=j2();function t(n){var r=n==null?0:n.length;return r?e(n,1):[]}return Fw=t,Fw}var Uw,L4;function lfe(){if(L4)return Uw;L4=1;var e=M2(),t=Qq(),n=Qa();function r(i,s){return i==null?i:e(i,t(s),n)}return Uw=r,Uw}var $w,P4;function cfe(){if(P4)return $w;P4=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return $w=e,$w}var Gw,I4;function ufe(){if(I4)return Gw;I4=1;var e=gg(),t=_2(),n=Hs();function r(i,s){var o={};return s=n(s,3),t(i,function(l,u,d){e(o,u,s(l,u,d))}),o}return Gw=r,Gw}var Ww,B4;function L2(){if(B4)return Ww;B4=1;var e=Cc();function t(n,r,i){for(var s=-1,o=n.length;++s<o;){var l=n[s],u=r(l);if(u!=null&&(d===void 0?u===u&&!e(u):i(u,d)))var d=u,h=l}return h}return Ww=t,Ww}var Kw,z4;function dfe(){if(z4)return Kw;z4=1;function e(t,n){return t>n}return Kw=e,Kw}var Yw,q4;function ffe(){if(q4)return Yw;q4=1;var e=L2(),t=dfe(),n=el();function r(i){return i&&i.length?e(i,n,t):void 0}return Yw=r,Yw}var Xw,V4;function _V(){if(V4)return Xw;V4=1;var e=gg(),t=xc();function n(r,i,s){(s!==void 0&&!t(r[i],s)||s===void 0&&!(i in r))&&e(r,i,s)}return Xw=n,Xw}var Zw,H4;function hfe(){if(H4)return Zw;H4=1;var e=Za(),t=wg(),n=is(),r="[object Object]",i=Function.prototype,s=Object.prototype,o=i.toString,l=s.hasOwnProperty,u=o.call(Object);function d(h){if(!n(h)||e(h)!=r)return!1;var p=t(h);if(p===null)return!0;var m=l.call(p,"constructor")&&p.constructor;return typeof m=="function"&&m instanceof m&&o.call(m)==u}return Zw=d,Zw}var Jw,F4;function DV(){if(F4)return Jw;F4=1;function e(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}return Jw=e,Jw}var Qw,U4;function pfe(){if(U4)return Qw;U4=1;var e=of(),t=Qa();function n(r){return e(r,t(r))}return Qw=n,Qw}var eS,$4;function mfe(){if($4)return eS;$4=1;var e=_V(),t=qq(),n=Yq(),r=Vq(),i=Zq(),s=af(),o=Cn(),l=wV(),u=Sc(),d=sf(),h=mi(),p=hfe(),m=lf(),b=DV(),x=pfe();function S(w,C,N,k,T,A,M){var j=b(w,N),R=b(C,N),L=M.get(R);if(L){e(w,N,L);return}var I=A?A(j,R,N+"",w,C,M):void 0,H=I===void 0;if(H){var q=o(R),W=!q&&u(R),z=!q&&!W&&m(R);I=R,q||W||z?o(j)?I=j:l(j)?I=r(j):W?(H=!1,I=t(R,!0)):z?(H=!1,I=n(R,!0)):I=[]:p(R)||s(R)?(I=j,s(j)?I=x(j):(!h(j)||d(j))&&(I=i(R))):H=!1}H&&(M.set(R,I),T(I,R,k,A,M),M.delete(R)),e(w,N,I)}return eS=S,eS}var tS,G4;function gfe(){if(G4)return tS;G4=1;var e=mg(),t=_V(),n=M2(),r=mfe(),i=mi(),s=Qa(),o=DV();function l(u,d,h,p,m){u!==d&&n(d,function(b,x){if(m||(m=new e),i(b))r(u,d,x,h,l,p,m);else{var S=p?p(o(u,x),b,x+"",u,d,m):void 0;S===void 0&&(S=b),t(u,x,S)}},s)}return tS=l,tS}var nS,W4;function yfe(){if(W4)return nS;W4=1;var e=Tg(),t=Ng();function n(r){return e(function(i,s){var o=-1,l=s.length,u=l>1?s[l-1]:void 0,d=l>2?s[2]:void 0;for(u=r.length>3&&typeof u=="function"?(l--,u):void 0,d&&t(s[0],s[1],d)&&(u=l<3?void 0:u,l=1),i=Object(i);++o<l;){var h=s[o];h&&r(i,h,o,u)}return i})}return nS=n,nS}var rS,K4;function bfe(){if(K4)return rS;K4=1;var e=gfe(),t=yfe(),n=t(function(r,i,s){e(r,i,s)});return rS=n,rS}var iS,Y4;function RV(){if(Y4)return iS;Y4=1;function e(t,n){return t<n}return iS=e,iS}var sS,X4;function vfe(){if(X4)return sS;X4=1;var e=L2(),t=RV(),n=el();function r(i){return i&&i.length?e(i,n,t):void 0}return sS=r,sS}var oS,Z4;function xfe(){if(Z4)return oS;Z4=1;var e=L2(),t=Hs(),n=RV();function r(i,s){return i&&i.length?e(i,t(s,2),n):void 0}return oS=r,oS}var aS,J4;function wfe(){if(J4)return aS;J4=1;var e=ji(),t=function(){return e.Date.now()};return aS=t,aS}var lS,Q4;function Sfe(){if(Q4)return lS;Q4=1;var e=yg(),t=Cg(),n=bg(),r=mi(),i=cf();function s(o,l,u,d){if(!r(o))return o;l=t(l,o);for(var h=-1,p=l.length,m=p-1,b=o;b!=null&&++h<p;){var x=i(l[h]),S=u;if(x==="__proto__"||x==="constructor"||x==="prototype")return o;if(h!=m){var w=b[x];S=d?d(w,x,b):void 0,S===void 0&&(S=r(w)?w:n(l[h+1])?[]:{})}e(b,x,S),b=b[x]}return o}return lS=s,lS}var cS,e5;function Efe(){if(e5)return cS;e5=1;var e=kg(),t=Sfe(),n=Cg();function r(i,s,o){for(var l=-1,u=s.length,d={};++l<u;){var h=s[l],p=e(i,h);o(p,h)&&t(d,n(h,i),p)}return d}return cS=r,cS}var uS,t5;function Cfe(){if(t5)return uS;t5=1;var e=Efe(),t=uV();function n(r,i){return e(r,i,function(s,o){return t(r,o)})}return uS=n,uS}var dS,n5;function kfe(){if(n5)return dS;n5=1;var e=MV(),t=bV(),n=vV();function r(i){return n(t(i,void 0,e),i+"")}return dS=r,dS}var fS,r5;function Tfe(){if(r5)return fS;r5=1;var e=Cfe(),t=kfe(),n=t(function(r,i){return r==null?{}:e(r,i)});return fS=n,fS}var hS,i5;function Nfe(){if(i5)return hS;i5=1;var e=Math.ceil,t=Math.max;function n(r,i,s,o){for(var l=-1,u=t(e((i-r)/(s||1)),0),d=Array(u);u--;)d[o?u:++l]=r,r+=s;return d}return hS=n,hS}var pS,s5;function Afe(){if(s5)return pS;s5=1;var e=Nfe(),t=Ng(),n=AV();function r(i){return function(s,o,l){return l&&typeof l!="number"&&t(s,o,l)&&(o=l=void 0),s=n(s),o===void 0?(o=s,s=0):o=n(o),l=l===void 0?s<o?1:-1:n(l),e(s,o,l,i)}}return pS=r,pS}var mS,o5;function Mfe(){if(o5)return mS;o5=1;var e=Afe(),t=e();return mS=t,mS}var gS,a5;function _fe(){if(a5)return gS;a5=1;function e(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}return gS=e,gS}var yS,l5;function Dfe(){if(l5)return yS;l5=1;var e=Cc();function t(n,r){if(n!==r){var i=n!==void 0,s=n===null,o=n===n,l=e(n),u=r!==void 0,d=r===null,h=r===r,p=e(r);if(!d&&!p&&!l&&n>r||l&&u&&h&&!d&&!p||s&&u&&h||!i&&h||!o)return 1;if(!s&&!l&&!p&&n<r||p&&i&&o&&!s&&!l||d&&i&&o||!u&&o||!h)return-1}return 0}return yS=t,yS}var bS,c5;function Rfe(){if(c5)return bS;c5=1;var e=Dfe();function t(n,r,i){for(var s=-1,o=n.criteria,l=r.criteria,u=o.length,d=i.length;++s<u;){var h=e(o[s],l[s]);if(h){if(s>=d)return h;var p=i[s];return h*(p=="desc"?-1:1)}}return n.index-r.index}return bS=t,bS}var vS,u5;function jfe(){if(u5)return vS;u5=1;var e=Eg(),t=kg(),n=Hs(),r=mV(),i=_fe(),s=vg(),o=Rfe(),l=el(),u=Cn();function d(h,p,m){p.length?p=e(p,function(S){return u(S)?function(w){return t(w,S.length===1?S[0]:S)}:S}):p=[l];var b=-1;p=e(p,s(n));var x=r(h,function(S,w,C){var N=e(p,function(k){return k(S)});return{criteria:N,index:++b,value:S}});return i(x,function(S,w){return o(S,w,m)})}return vS=d,vS}var xS,d5;function Ofe(){if(d5)return xS;d5=1;var e=j2(),t=jfe(),n=Tg(),r=Ng(),i=n(function(s,o){if(s==null)return[];var l=o.length;return l>1&&r(s,o[0],o[1])?o=[]:l>2&&r(o[0],o[1],o[2])&&(o=[o[0]]),t(s,e(o,1),[])});return xS=i,xS}var wS,f5;function Lfe(){if(f5)return wS;f5=1;var e=lV(),t=0;function n(r){var i=++t;return e(r)+i}return wS=n,wS}var SS,h5;function Pfe(){if(h5)return SS;h5=1;function e(t,n,r){for(var i=-1,s=t.length,o=n.length,l={};++i<s;){var u=i<o?n[i]:void 0;r(l,t[i],u)}return l}return SS=e,SS}var ES,p5;function Ife(){if(p5)return ES;p5=1;var e=yg(),t=Pfe();function n(r,i){return t(r||[],i||[],e)}return ES=n,ES}var CS,m5;function Bt(){if(m5)return CS;m5=1;var e;if(typeof b2=="function")try{e={cloneDeep:Qde(),constant:A2(),defaults:efe(),each:tV(),filter:fV(),find:afe(),flatten:MV(),forEach:eV(),forIn:lfe(),has:hV(),isUndefined:pV(),last:cfe(),map:gV(),mapValues:ufe(),max:ffe(),merge:bfe(),min:vfe(),minBy:xfe(),now:wfe(),pick:Tfe(),range:Mfe(),reduce:yV(),sortBy:Ofe(),uniqueId:Lfe(),values:SV(),zipObject:Ife()}}catch{}return e||(e=window._),CS=e,CS}var kS,g5;function Bfe(){if(g5)return kS;g5=1,kS=e;function e(){var r={};r._next=r._prev=r,this._sentinel=r}e.prototype.dequeue=function(){var r=this._sentinel,i=r._prev;if(i!==r)return t(i),i},e.prototype.enqueue=function(r){var i=this._sentinel;r._prev&&r._next&&t(r),r._next=i._next,i._next._prev=r,i._next=r,r._prev=i},e.prototype.toString=function(){for(var r=[],i=this._sentinel,s=i._prev;s!==i;)r.push(JSON.stringify(s,n)),s=s._prev;return"["+r.join(", ")+"]"};function t(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function n(r,i){if(r!=="_next"&&r!=="_prev")return i}return kS}var TS,y5;function zfe(){if(y5)return TS;y5=1;var e=Bt(),t=Di().Graph,n=Bfe();TS=i;var r=e.constant(1);function i(d,h){if(d.nodeCount()<=1)return[];var p=l(d,h||r),m=s(p.graph,p.buckets,p.zeroIdx);return e.flatten(e.map(m,function(b){return d.outEdges(b.v,b.w)}),!0)}function s(d,h,p){for(var m=[],b=h[h.length-1],x=h[0],S;d.nodeCount();){for(;S=x.dequeue();)o(d,h,p,S);for(;S=b.dequeue();)o(d,h,p,S);if(d.nodeCount()){for(var w=h.length-2;w>0;--w)if(S=h[w].dequeue(),S){m=m.concat(o(d,h,p,S,!0));break}}}return m}function o(d,h,p,m,b){var x=b?[]:void 0;return e.forEach(d.inEdges(m.v),function(S){var w=d.edge(S),C=d.node(S.v);b&&x.push({v:S.v,w:S.w}),C.out-=w,u(h,p,C)}),e.forEach(d.outEdges(m.v),function(S){var w=d.edge(S),C=S.w,N=d.node(C);N.in-=w,u(h,p,N)}),d.removeNode(m.v),x}function l(d,h){var p=new t,m=0,b=0;e.forEach(d.nodes(),function(w){p.setNode(w,{v:w,in:0,out:0})}),e.forEach(d.edges(),function(w){var C=p.edge(w.v,w.w)||0,N=h(w),k=C+N;p.setEdge(w.v,w.w,k),b=Math.max(b,p.node(w.v).out+=N),m=Math.max(m,p.node(w.w).in+=N)});var x=e.range(b+m+3).map(function(){return new n}),S=m+1;return e.forEach(p.nodes(),function(w){u(x,S,p.node(w))}),{graph:p,buckets:x,zeroIdx:S}}function u(d,h,p){p.out?p.in?d[p.out-p.in+h].enqueue(p):d[d.length-1].enqueue(p):d[0].enqueue(p)}return TS}var NS,b5;function qfe(){if(b5)return NS;b5=1;var e=Bt(),t=zfe();NS={run:n,undo:i};function n(s){var o=s.graph().acyclicer==="greedy"?t(s,l(s)):r(s);e.forEach(o,function(u){var d=s.edge(u);s.removeEdge(u),d.forwardName=u.name,d.reversed=!0,s.setEdge(u.w,u.v,d,e.uniqueId("rev"))});function l(u){return function(d){return u.edge(d).weight}}}function r(s){var o=[],l={},u={};function d(h){e.has(u,h)||(u[h]=!0,l[h]=!0,e.forEach(s.outEdges(h),function(p){e.has(l,p.w)?o.push(p):d(p.w)}),delete l[h])}return e.forEach(s.nodes(),d),o}function i(s){e.forEach(s.edges(),function(o){var l=s.edge(o);if(l.reversed){s.removeEdge(o);var u=l.forwardName;delete l.reversed,delete l.forwardName,s.setEdge(o.w,o.v,l,u)}})}return NS}var AS,v5;function Ar(){if(v5)return AS;v5=1;var e=Bt(),t=Di().Graph;AS={addDummyNode:n,simplify:r,asNonCompoundGraph:i,successorWeights:s,predecessorWeights:o,intersectRect:l,buildLayerMatrix:u,normalizeRanks:d,removeEmptyRanks:h,addBorderNode:p,maxRank:m,partition:b,time:x,notime:S};function n(w,C,N,k){var T;do T=e.uniqueId(k);while(w.hasNode(T));return N.dummy=C,w.setNode(T,N),T}function r(w){var C=new t().setGraph(w.graph());return e.forEach(w.nodes(),function(N){C.setNode(N,w.node(N))}),e.forEach(w.edges(),function(N){var k=C.edge(N.v,N.w)||{weight:0,minlen:1},T=w.edge(N);C.setEdge(N.v,N.w,{weight:k.weight+T.weight,minlen:Math.max(k.minlen,T.minlen)})}),C}function i(w){var C=new t({multigraph:w.isMultigraph()}).setGraph(w.graph());return e.forEach(w.nodes(),function(N){w.children(N).length||C.setNode(N,w.node(N))}),e.forEach(w.edges(),function(N){C.setEdge(N,w.edge(N))}),C}function s(w){var C=e.map(w.nodes(),function(N){var k={};return e.forEach(w.outEdges(N),function(T){k[T.w]=(k[T.w]||0)+w.edge(T).weight}),k});return e.zipObject(w.nodes(),C)}function o(w){var C=e.map(w.nodes(),function(N){var k={};return e.forEach(w.inEdges(N),function(T){k[T.v]=(k[T.v]||0)+w.edge(T).weight}),k});return e.zipObject(w.nodes(),C)}function l(w,C){var N=w.x,k=w.y,T=C.x-N,A=C.y-k,M=w.width/2,j=w.height/2;if(!T&&!A)throw new Error("Not possible to find intersection inside of the rectangle");var R,L;return Math.abs(A)*M>Math.abs(T)*j?(A<0&&(j=-j),R=j*T/A,L=j):(T<0&&(M=-M),R=M,L=M*A/T),{x:N+R,y:k+L}}function u(w){var C=e.map(e.range(m(w)+1),function(){return[]});return e.forEach(w.nodes(),function(N){var k=w.node(N),T=k.rank;e.isUndefined(T)||(C[T][k.order]=N)}),C}function d(w){var C=e.min(e.map(w.nodes(),function(N){return w.node(N).rank}));e.forEach(w.nodes(),function(N){var k=w.node(N);e.has(k,"rank")&&(k.rank-=C)})}function h(w){var C=e.min(e.map(w.nodes(),function(A){return w.node(A).rank})),N=[];e.forEach(w.nodes(),function(A){var M=w.node(A).rank-C;N[M]||(N[M]=[]),N[M].push(A)});var k=0,T=w.graph().nodeRankFactor;e.forEach(N,function(A,M){e.isUndefined(A)&&M%T!==0?--k:k&&e.forEach(A,function(j){w.node(j).rank+=k})})}function p(w,C,N,k){var T={width:0,height:0};return arguments.length>=4&&(T.rank=N,T.order=k),n(w,"border",T,C)}function m(w){return e.max(e.map(w.nodes(),function(C){var N=w.node(C).rank;if(!e.isUndefined(N))return N}))}function b(w,C){var N={lhs:[],rhs:[]};return e.forEach(w,function(k){C(k)?N.lhs.push(k):N.rhs.push(k)}),N}function x(w,C){var N=e.now();try{return C()}finally{console.log(w+" time: "+(e.now()-N)+"ms")}}function S(w,C){return C()}return AS}var MS,x5;function Vfe(){if(x5)return MS;x5=1;var e=Bt(),t=Ar();MS={run:n,undo:i};function n(s){s.graph().dummyChains=[],e.forEach(s.edges(),function(o){r(s,o)})}function r(s,o){var l=o.v,u=s.node(l).rank,d=o.w,h=s.node(d).rank,p=o.name,m=s.edge(o),b=m.labelRank;if(h!==u+1){s.removeEdge(o);var x,S,w;for(w=0,++u;u<h;++w,++u)m.points=[],S={width:0,height:0,edgeLabel:m,edgeObj:o,rank:u},x=t.addDummyNode(s,"edge",S,"_d"),u===b&&(S.width=m.width,S.height=m.height,S.dummy="edge-label",S.labelpos=m.labelpos),s.setEdge(l,x,{weight:m.weight},p),w===0&&s.graph().dummyChains.push(x),l=x;s.setEdge(l,d,{weight:m.weight},p)}}function i(s){e.forEach(s.graph().dummyChains,function(o){var l=s.node(o),u=l.edgeLabel,d;for(s.setEdge(l.edgeObj,u);l.dummy;)d=s.successors(o)[0],s.removeNode(o),u.points.push({x:l.x,y:l.y}),l.dummy==="edge-label"&&(u.x=l.x,u.y=l.y,u.width=l.width,u.height=l.height),o=d,l=s.node(o)})}return MS}var _S,w5;function xm(){if(w5)return _S;w5=1;var e=Bt();_S={longestPath:t,slack:n};function t(r){var i={};function s(o){var l=r.node(o);if(e.has(i,o))return l.rank;i[o]=!0;var u=e.min(e.map(r.outEdges(o),function(d){return s(d.w)-r.edge(d).minlen}));return(u===Number.POSITIVE_INFINITY||u===void 0||u===null)&&(u=0),l.rank=u}e.forEach(r.sources(),s)}function n(r,i){return r.node(i.w).rank-r.node(i.v).rank-r.edge(i).minlen}return _S}var DS,S5;function jV(){if(S5)return DS;S5=1;var e=Bt(),t=Di().Graph,n=xm().slack;DS=r;function r(l){var u=new t({directed:!1}),d=l.nodes()[0],h=l.nodeCount();u.setNode(d,{});for(var p,m;i(u,l)<h;)p=s(u,l),m=u.hasNode(p.v)?n(l,p):-n(l,p),o(u,l,m);return u}function i(l,u){function d(h){e.forEach(u.nodeEdges(h),function(p){var m=p.v,b=h===m?p.w:m;!l.hasNode(b)&&!n(u,p)&&(l.setNode(b,{}),l.setEdge(h,b,{}),d(b))})}return e.forEach(l.nodes(),d),l.nodeCount()}function s(l,u){return e.minBy(u.edges(),function(d){if(l.hasNode(d.v)!==l.hasNode(d.w))return n(u,d)})}function o(l,u,d){e.forEach(l.nodes(),function(h){u.node(h).rank+=d})}return DS}var RS,E5;function Hfe(){if(E5)return RS;E5=1;var e=Bt(),t=jV(),n=xm().slack,r=xm().longestPath,i=Di().alg.preorder,s=Di().alg.postorder,o=Ar().simplify;RS=l,l.initLowLimValues=p,l.initCutValues=u,l.calcCutValue=h,l.leaveEdge=b,l.enterEdge=x,l.exchangeEdges=S;function l(k){k=o(k),r(k);var T=t(k);p(T),u(T,k);for(var A,M;A=b(T);)M=x(T,k,A),S(T,k,A,M)}function u(k,T){var A=s(k,k.nodes());A=A.slice(0,A.length-1),e.forEach(A,function(M){d(k,T,M)})}function d(k,T,A){var M=k.node(A),j=M.parent;k.edge(A,j).cutvalue=h(k,T,A)}function h(k,T,A){var M=k.node(A),j=M.parent,R=!0,L=T.edge(A,j),I=0;return L||(R=!1,L=T.edge(j,A)),I=L.weight,e.forEach(T.nodeEdges(A),function(H){var q=H.v===A,W=q?H.w:H.v;if(W!==j){var z=q===R,F=T.edge(H).weight;if(I+=z?F:-F,C(k,A,W)){var O=k.edge(A,W).cutvalue;I+=z?-O:O}}}),I}function p(k,T){arguments.length<2&&(T=k.nodes()[0]),m(k,{},1,T)}function m(k,T,A,M,j){var R=A,L=k.node(M);return T[M]=!0,e.forEach(k.neighbors(M),function(I){e.has(T,I)||(A=m(k,T,A,I,M))}),L.low=R,L.lim=A++,j?L.parent=j:delete L.parent,A}function b(k){return e.find(k.edges(),function(T){return k.edge(T).cutvalue<0})}function x(k,T,A){var M=A.v,j=A.w;T.hasEdge(M,j)||(M=A.w,j=A.v);var R=k.node(M),L=k.node(j),I=R,H=!1;R.lim>L.lim&&(I=L,H=!0);var q=e.filter(T.edges(),function(W){return H===N(k,k.node(W.v),I)&&H!==N(k,k.node(W.w),I)});return e.minBy(q,function(W){return n(T,W)})}function S(k,T,A,M){var j=A.v,R=A.w;k.removeEdge(j,R),k.setEdge(M.v,M.w,{}),p(k),u(k,T),w(k,T)}function w(k,T){var A=e.find(k.nodes(),function(j){return!T.node(j).parent}),M=i(k,A);M=M.slice(1),e.forEach(M,function(j){var R=k.node(j).parent,L=T.edge(j,R),I=!1;L||(L=T.edge(R,j),I=!0),T.node(j).rank=T.node(R).rank+(I?L.minlen:-L.minlen)})}function C(k,T,A){return k.hasEdge(T,A)}function N(k,T,A){return A.low<=T.lim&&T.lim<=A.lim}return RS}var jS,C5;function Ffe(){if(C5)return jS;C5=1;var e=xm(),t=e.longestPath,n=jV(),r=Hfe();jS=i;function i(u){switch(u.graph().ranker){case"network-simplex":l(u);break;case"tight-tree":o(u);break;case"longest-path":s(u);break;default:l(u)}}var s=t;function o(u){t(u),n(u)}function l(u){r(u)}return jS}var OS,k5;function Ufe(){if(k5)return OS;k5=1;var e=Bt();OS=t;function t(i){var s=r(i);e.forEach(i.graph().dummyChains,function(o){for(var l=i.node(o),u=l.edgeObj,d=n(i,s,u.v,u.w),h=d.path,p=d.lca,m=0,b=h[m],x=!0;o!==u.w;){if(l=i.node(o),x){for(;(b=h[m])!==p&&i.node(b).maxRank<l.rank;)m++;b===p&&(x=!1)}if(!x){for(;m<h.length-1&&i.node(b=h[m+1]).minRank<=l.rank;)m++;b=h[m]}i.setParent(o,b),o=i.successors(o)[0]}})}function n(i,s,o,l){var u=[],d=[],h=Math.min(s[o].low,s[l].low),p=Math.max(s[o].lim,s[l].lim),m,b;m=o;do m=i.parent(m),u.push(m);while(m&&(s[m].low>h||p>s[m].lim));for(b=m,m=l;(m=i.parent(m))!==b;)d.push(m);return{path:u.concat(d.reverse()),lca:b}}function r(i){var s={},o=0;function l(u){var d=o;e.forEach(i.children(u),l),s[u]={low:d,lim:o++}}return e.forEach(i.children(),l),s}return OS}var LS,T5;function $fe(){if(T5)return LS;T5=1;var e=Bt(),t=Ar();LS={run:n,cleanup:o};function n(l){var u=t.addDummyNode(l,"root",{},"_root"),d=i(l),h=e.max(e.values(d))-1,p=2*h+1;l.graph().nestingRoot=u,e.forEach(l.edges(),function(b){l.edge(b).minlen*=p});var m=s(l)+1;e.forEach(l.children(),function(b){r(l,u,p,m,h,d,b)}),l.graph().nodeRankFactor=p}function r(l,u,d,h,p,m,b){var x=l.children(b);if(!x.length){b!==u&&l.setEdge(u,b,{weight:0,minlen:d});return}var S=t.addBorderNode(l,"_bt"),w=t.addBorderNode(l,"_bb"),C=l.node(b);l.setParent(S,b),C.borderTop=S,l.setParent(w,b),C.borderBottom=w,e.forEach(x,function(N){r(l,u,d,h,p,m,N);var k=l.node(N),T=k.borderTop?k.borderTop:N,A=k.borderBottom?k.borderBottom:N,M=k.borderTop?h:2*h,j=T!==A?1:p-m[b]+1;l.setEdge(S,T,{weight:M,minlen:j,nestingEdge:!0}),l.setEdge(A,w,{weight:M,minlen:j,nestingEdge:!0})}),l.parent(b)||l.setEdge(u,S,{weight:0,minlen:p+m[b]})}function i(l){var u={};function d(h,p){var m=l.children(h);m&&m.length&&e.forEach(m,function(b){d(b,p+1)}),u[h]=p}return e.forEach(l.children(),function(h){d(h,1)}),u}function s(l){return e.reduce(l.edges(),function(u,d){return u+l.edge(d).weight},0)}function o(l){var u=l.graph();l.removeNode(u.nestingRoot),delete u.nestingRoot,e.forEach(l.edges(),function(d){var h=l.edge(d);h.nestingEdge&&l.removeEdge(d)})}return LS}var PS,N5;function Gfe(){if(N5)return PS;N5=1;var e=Bt(),t=Ar();PS=n;function n(i){function s(o){var l=i.children(o),u=i.node(o);if(l.length&&e.forEach(l,s),e.has(u,"minRank")){u.borderLeft=[],u.borderRight=[];for(var d=u.minRank,h=u.maxRank+1;d<h;++d)r(i,"borderLeft","_bl",o,u,d),r(i,"borderRight","_br",o,u,d)}}e.forEach(i.children(),s)}function r(i,s,o,l,u,d){var h={width:0,height:0,rank:d,borderType:s},p=u[s][d-1],m=t.addDummyNode(i,"border",h,o);u[s][d]=m,i.setParent(m,l),p&&i.setEdge(p,m,{weight:1})}return PS}var IS,A5;function Wfe(){if(A5)return IS;A5=1;var e=Bt();IS={adjust:t,undo:n};function t(d){var h=d.graph().rankdir.toLowerCase();(h==="lr"||h==="rl")&&r(d)}function n(d){var h=d.graph().rankdir.toLowerCase();(h==="bt"||h==="rl")&&s(d),(h==="lr"||h==="rl")&&(l(d),r(d))}function r(d){e.forEach(d.nodes(),function(h){i(d.node(h))}),e.forEach(d.edges(),function(h){i(d.edge(h))})}function i(d){var h=d.width;d.width=d.height,d.height=h}function s(d){e.forEach(d.nodes(),function(h){o(d.node(h))}),e.forEach(d.edges(),function(h){var p=d.edge(h);e.forEach(p.points,o),e.has(p,"y")&&o(p)})}function o(d){d.y=-d.y}function l(d){e.forEach(d.nodes(),function(h){u(d.node(h))}),e.forEach(d.edges(),function(h){var p=d.edge(h);e.forEach(p.points,u),e.has(p,"x")&&u(p)})}function u(d){var h=d.x;d.x=d.y,d.y=h}return IS}var BS,M5;function Kfe(){if(M5)return BS;M5=1;var e=Bt();BS=t;function t(n){var r={},i=e.filter(n.nodes(),function(d){return!n.children(d).length}),s=e.max(e.map(i,function(d){return n.node(d).rank})),o=e.map(e.range(s+1),function(){return[]});function l(d){if(!e.has(r,d)){r[d]=!0;var h=n.node(d);o[h.rank].push(d),e.forEach(n.successors(d),l)}}var u=e.sortBy(i,function(d){return n.node(d).rank});return e.forEach(u,l),o}return BS}var zS,_5;function Yfe(){if(_5)return zS;_5=1;var e=Bt();zS=t;function t(r,i){for(var s=0,o=1;o<i.length;++o)s+=n(r,i[o-1],i[o]);return s}function n(r,i,s){for(var o=e.zipObject(s,e.map(s,function(m,b){return b})),l=e.flatten(e.map(i,function(m){return e.sortBy(e.map(r.outEdges(m),function(b){return{pos:o[b.w],weight:r.edge(b).weight}}),"pos")}),!0),u=1;u<s.length;)u<<=1;var d=2*u-1;u-=1;var h=e.map(new Array(d),function(){return 0}),p=0;return e.forEach(l.forEach(function(m){var b=m.pos+u;h[b]+=m.weight;for(var x=0;b>0;)b%2&&(x+=h[b+1]),b=b-1>>1,h[b]+=m.weight;p+=m.weight*x})),p}return zS}var qS,D5;function Xfe(){if(D5)return qS;D5=1;var e=Bt();qS=t;function t(n,r){return e.map(r,function(i){var s=n.inEdges(i);if(s.length){var o=e.reduce(s,function(l,u){var d=n.edge(u),h=n.node(u.v);return{sum:l.sum+d.weight*h.order,weight:l.weight+d.weight}},{sum:0,weight:0});return{v:i,barycenter:o.sum/o.weight,weight:o.weight}}else return{v:i}})}return qS}var VS,R5;function Zfe(){if(R5)return VS;R5=1;var e=Bt();VS=t;function t(i,s){var o={};e.forEach(i,function(u,d){var h=o[u.v]={indegree:0,in:[],out:[],vs:[u.v],i:d};e.isUndefined(u.barycenter)||(h.barycenter=u.barycenter,h.weight=u.weight)}),e.forEach(s.edges(),function(u){var d=o[u.v],h=o[u.w];!e.isUndefined(d)&&!e.isUndefined(h)&&(h.indegree++,d.out.push(o[u.w]))});var l=e.filter(o,function(u){return!u.indegree});return n(l)}function n(i){var s=[];function o(d){return function(h){h.merged||(e.isUndefined(h.barycenter)||e.isUndefined(d.barycenter)||h.barycenter>=d.barycenter)&&r(d,h)}}function l(d){return function(h){h.in.push(d),--h.indegree===0&&i.push(h)}}for(;i.length;){var u=i.pop();s.push(u),e.forEach(u.in.reverse(),o(u)),e.forEach(u.out,l(u))}return e.map(e.filter(s,function(d){return!d.merged}),function(d){return e.pick(d,["vs","i","barycenter","weight"])})}function r(i,s){var o=0,l=0;i.weight&&(o+=i.barycenter*i.weight,l+=i.weight),s.weight&&(o+=s.barycenter*s.weight,l+=s.weight),i.vs=s.vs.concat(i.vs),i.barycenter=o/l,i.weight=l,i.i=Math.min(s.i,i.i),s.merged=!0}return VS}var HS,j5;function Jfe(){if(j5)return HS;j5=1;var e=Bt(),t=Ar();HS=n;function n(s,o){var l=t.partition(s,function(S){return e.has(S,"barycenter")}),u=l.lhs,d=e.sortBy(l.rhs,function(S){return-S.i}),h=[],p=0,m=0,b=0;u.sort(i(!!o)),b=r(h,d,b),e.forEach(u,function(S){b+=S.vs.length,h.push(S.vs),p+=S.barycenter*S.weight,m+=S.weight,b=r(h,d,b)});var x={vs:e.flatten(h,!0)};return m&&(x.barycenter=p/m,x.weight=m),x}function r(s,o,l){for(var u;o.length&&(u=e.last(o)).i<=l;)o.pop(),s.push(u.vs),l++;return l}function i(s){return function(o,l){return o.barycenter<l.barycenter?-1:o.barycenter>l.barycenter?1:s?l.i-o.i:o.i-l.i}}return HS}var FS,O5;function Qfe(){if(O5)return FS;O5=1;var e=Bt(),t=Xfe(),n=Zfe(),r=Jfe();FS=i;function i(l,u,d,h){var p=l.children(u),m=l.node(u),b=m?m.borderLeft:void 0,x=m?m.borderRight:void 0,S={};b&&(p=e.filter(p,function(A){return A!==b&&A!==x}));var w=t(l,p);e.forEach(w,function(A){if(l.children(A.v).length){var M=i(l,A.v,d,h);S[A.v]=M,e.has(M,"barycenter")&&o(A,M)}});var C=n(w,d);s(C,S);var N=r(C,h);if(b&&(N.vs=e.flatten([b,N.vs,x],!0),l.predecessors(b).length)){var k=l.node(l.predecessors(b)[0]),T=l.node(l.predecessors(x)[0]);e.has(N,"barycenter")||(N.barycenter=0,N.weight=0),N.barycenter=(N.barycenter*N.weight+k.order+T.order)/(N.weight+2),N.weight+=2}return N}function s(l,u){e.forEach(l,function(d){d.vs=e.flatten(d.vs.map(function(h){return u[h]?u[h].vs:h}),!0)})}function o(l,u){e.isUndefined(l.barycenter)?(l.barycenter=u.barycenter,l.weight=u.weight):(l.barycenter=(l.barycenter*l.weight+u.barycenter*u.weight)/(l.weight+u.weight),l.weight+=u.weight)}return FS}var US,L5;function ehe(){if(L5)return US;L5=1;var e=Bt(),t=Di().Graph;US=n;function n(i,s,o){var l=r(i),u=new t({compound:!0}).setGraph({root:l}).setDefaultNodeLabel(function(d){return i.node(d)});return e.forEach(i.nodes(),function(d){var h=i.node(d),p=i.parent(d);(h.rank===s||h.minRank<=s&&s<=h.maxRank)&&(u.setNode(d),u.setParent(d,p||l),e.forEach(i[o](d),function(m){var b=m.v===d?m.w:m.v,x=u.edge(b,d),S=e.isUndefined(x)?0:x.weight;u.setEdge(b,d,{weight:i.edge(m).weight+S})}),e.has(h,"minRank")&&u.setNode(d,{borderLeft:h.borderLeft[s],borderRight:h.borderRight[s]}))}),u}function r(i){for(var s;i.hasNode(s=e.uniqueId("_root")););return s}return US}var $S,P5;function the(){if(P5)return $S;P5=1;var e=Bt();$S=t;function t(n,r,i){var s={},o;e.forEach(i,function(l){for(var u=n.parent(l),d,h;u;){if(d=n.parent(u),d?(h=s[d],s[d]=u):(h=o,o=u),h&&h!==u){r.setEdge(h,u);return}u=d}})}return $S}var GS,I5;function nhe(){if(I5)return GS;I5=1;var e=Bt(),t=Kfe(),n=Yfe(),r=Qfe(),i=ehe(),s=the(),o=Di().Graph,l=Ar();GS=u;function u(m){var b=l.maxRank(m),x=d(m,e.range(1,b+1),"inEdges"),S=d(m,e.range(b-1,-1,-1),"outEdges"),w=t(m);p(m,w);for(var C=Number.POSITIVE_INFINITY,N,k=0,T=0;T<4;++k,++T){h(k%2?x:S,k%4>=2),w=l.buildLayerMatrix(m);var A=n(m,w);A<C&&(T=0,N=e.cloneDeep(w),C=A)}p(m,N)}function d(m,b,x){return e.map(b,function(S){return i(m,S,x)})}function h(m,b){var x=new o;e.forEach(m,function(S){var w=S.graph().root,C=r(S,w,x,b);e.forEach(C.vs,function(N,k){S.node(N).order=k}),s(S,x,C.vs)})}function p(m,b){e.forEach(b,function(x){e.forEach(x,function(S,w){m.node(S).order=w})})}return GS}var WS,B5;function rhe(){if(B5)return WS;B5=1;var e=Bt(),t=Di().Graph,n=Ar();WS={positionX:x,findType1Conflicts:r,findType2Conflicts:i,addConflict:o,hasConflict:l,verticalAlignment:u,horizontalCompaction:d,alignCoordinates:m,findSmallestWidthAlignment:p,balance:b};function r(C,N){var k={};function T(A,M){var j=0,R=0,L=A.length,I=e.last(M);return e.forEach(M,function(H,q){var W=s(C,H),z=W?C.node(W).order:L;(W||H===I)&&(e.forEach(M.slice(R,q+1),function(F){e.forEach(C.predecessors(F),function(O){var V=C.node(O),Y=V.order;(Y<j||z<Y)&&!(V.dummy&&C.node(F).dummy)&&o(k,O,F)})}),R=q+1,j=z)}),M}return e.reduce(N,T),k}function i(C,N){var k={};function T(M,j,R,L,I){var H;e.forEach(e.range(j,R),function(q){H=M[q],C.node(H).dummy&&e.forEach(C.predecessors(H),function(W){var z=C.node(W);z.dummy&&(z.order<L||z.order>I)&&o(k,W,H)})})}function A(M,j){var R=-1,L,I=0;return e.forEach(j,function(H,q){if(C.node(H).dummy==="border"){var W=C.predecessors(H);W.length&&(L=C.node(W[0]).order,T(j,I,q,R,L),I=q,R=L)}T(j,I,j.length,L,M.length)}),j}return e.reduce(N,A),k}function s(C,N){if(C.node(N).dummy)return e.find(C.predecessors(N),function(k){return C.node(k).dummy})}function o(C,N,k){if(N>k){var T=N;N=k,k=T}var A=C[N];A||(C[N]=A={}),A[k]=!0}function l(C,N,k){if(N>k){var T=N;N=k,k=T}return e.has(C[N],k)}function u(C,N,k,T){var A={},M={},j={};return e.forEach(N,function(R){e.forEach(R,function(L,I){A[L]=L,M[L]=L,j[L]=I})}),e.forEach(N,function(R){var L=-1;e.forEach(R,function(I){var H=T(I);if(H.length){H=e.sortBy(H,function(O){return j[O]});for(var q=(H.length-1)/2,W=Math.floor(q),z=Math.ceil(q);W<=z;++W){var F=H[W];M[I]===I&&L<j[F]&&!l(k,I,F)&&(M[F]=I,M[I]=A[I]=A[F],L=j[F])}}})}),{root:A,align:M}}function d(C,N,k,T,A){var M={},j=h(C,N,k,A),R=A?"borderLeft":"borderRight";function L(q,W){for(var z=j.nodes(),F=z.pop(),O={};F;)O[F]?q(F):(O[F]=!0,z.push(F),z=z.concat(W(F))),F=z.pop()}function I(q){M[q]=j.inEdges(q).reduce(function(W,z){return Math.max(W,M[z.v]+j.edge(z))},0)}function H(q){var W=j.outEdges(q).reduce(function(F,O){return Math.min(F,M[O.w]-j.edge(O))},Number.POSITIVE_INFINITY),z=C.node(q);W!==Number.POSITIVE_INFINITY&&z.borderType!==R&&(M[q]=Math.max(M[q],W))}return L(I,j.predecessors.bind(j)),L(H,j.successors.bind(j)),e.forEach(T,function(q){M[q]=M[k[q]]}),M}function h(C,N,k,T){var A=new t,M=C.graph(),j=S(M.nodesep,M.edgesep,T);return e.forEach(N,function(R){var L;e.forEach(R,function(I){var H=k[I];if(A.setNode(H),L){var q=k[L],W=A.edge(q,H);A.setEdge(q,H,Math.max(j(C,I,L),W||0))}L=I})}),A}function p(C,N){return e.minBy(e.values(N),function(k){var T=Number.NEGATIVE_INFINITY,A=Number.POSITIVE_INFINITY;return e.forIn(k,function(M,j){var R=w(C,j)/2;T=Math.max(M+R,T),A=Math.min(M-R,A)}),T-A})}function m(C,N){var k=e.values(N),T=e.min(k),A=e.max(k);e.forEach(["u","d"],function(M){e.forEach(["l","r"],function(j){var R=M+j,L=C[R],I;if(L!==N){var H=e.values(L);I=j==="l"?T-e.min(H):A-e.max(H),I&&(C[R]=e.mapValues(L,function(q){return q+I}))}})})}function b(C,N){return e.mapValues(C.ul,function(k,T){if(N)return C[N.toLowerCase()][T];var A=e.sortBy(e.map(C,T));return(A[1]+A[2])/2})}function x(C){var N=n.buildLayerMatrix(C),k=e.merge(r(C,N),i(C,N)),T={},A;e.forEach(["u","d"],function(j){A=j==="u"?N:e.values(N).reverse(),e.forEach(["l","r"],function(R){R==="r"&&(A=e.map(A,function(q){return e.values(q).reverse()}));var L=(j==="u"?C.predecessors:C.successors).bind(C),I=u(C,A,k,L),H=d(C,A,I.root,I.align,R==="r");R==="r"&&(H=e.mapValues(H,function(q){return-q})),T[j+R]=H})});var M=p(C,T);return m(T,M),b(T,C.graph().align)}function S(C,N,k){return function(T,A,M){var j=T.node(A),R=T.node(M),L=0,I;if(L+=j.width/2,e.has(j,"labelpos"))switch(j.labelpos.toLowerCase()){case"l":I=-j.width/2;break;case"r":I=j.width/2;break}if(I&&(L+=k?I:-I),I=0,L+=(j.dummy?N:C)/2,L+=(R.dummy?N:C)/2,L+=R.width/2,e.has(R,"labelpos"))switch(R.labelpos.toLowerCase()){case"l":I=R.width/2;break;case"r":I=-R.width/2;break}return I&&(L+=k?I:-I),I=0,L}}function w(C,N){return C.node(N).width}return WS}var KS,z5;function ihe(){if(z5)return KS;z5=1;var e=Bt(),t=Ar(),n=rhe().positionX;KS=r;function r(s){s=t.asNonCompoundGraph(s),i(s),e.forEach(n(s),function(o,l){s.node(l).x=o})}function i(s){var o=t.buildLayerMatrix(s),l=s.graph().ranksep,u=0;e.forEach(o,function(d){var h=e.max(e.map(d,function(p){return s.node(p).height}));e.forEach(d,function(p){s.node(p).y=u+h/2}),u+=h+l})}return KS}var YS,q5;function she(){if(q5)return YS;q5=1;var e=Bt(),t=qfe(),n=Vfe(),r=Ffe(),i=Ar().normalizeRanks,s=Ufe(),o=Ar().removeEmptyRanks,l=$fe(),u=Gfe(),d=Wfe(),h=nhe(),p=ihe(),m=Ar(),b=Di().Graph;YS=x;function x(U,Z){var ee=Z&&Z.debugTiming?m.time:m.notime;ee("layout",function(){var de=ee("  buildLayoutGraph",function(){return L(U)});ee("  runLayout",function(){S(de,ee)}),ee("  updateInputGraph",function(){w(U,de)})})}function S(U,Z){Z("    makeSpaceForEdgeLabels",function(){I(U)}),Z("    removeSelfEdges",function(){te(U)}),Z("    acyclic",function(){t.run(U)}),Z("    nestingGraph.run",function(){l.run(U)}),Z("    rank",function(){r(m.asNonCompoundGraph(U))}),Z("    injectEdgeLabelProxies",function(){H(U)}),Z("    removeEmptyRanks",function(){o(U)}),Z("    nestingGraph.cleanup",function(){l.cleanup(U)}),Z("    normalizeRanks",function(){i(U)}),Z("    assignRankMinMax",function(){q(U)}),Z("    removeEdgeLabelProxies",function(){W(U)}),Z("    normalize.run",function(){n.run(U)}),Z("    parentDummyChains",function(){s(U)}),Z("    addBorderSegments",function(){u(U)}),Z("    order",function(){h(U)}),Z("    insertSelfEdges",function(){B(U)}),Z("    adjustCoordinateSystem",function(){d.adjust(U)}),Z("    position",function(){p(U)}),Z("    positionSelfEdges",function(){$(U)}),Z("    removeBorderNodes",function(){Y(U)}),Z("    normalize.undo",function(){n.undo(U)}),Z("    fixupEdgeLabelCoords",function(){O(U)}),Z("    undoCoordinateSystem",function(){d.undo(U)}),Z("    translateGraph",function(){z(U)}),Z("    assignNodeIntersects",function(){F(U)}),Z("    reversePoints",function(){V(U)}),Z("    acyclic.undo",function(){t.undo(U)})}function w(U,Z){e.forEach(U.nodes(),function(ee){var de=U.node(ee),ce=Z.node(ee);de&&(de.x=ce.x,de.y=ce.y,Z.children(ee).length&&(de.width=ce.width,de.height=ce.height))}),e.forEach(U.edges(),function(ee){var de=U.edge(ee),ce=Z.edge(ee);de.points=ce.points,e.has(ce,"x")&&(de.x=ce.x,de.y=ce.y)}),U.graph().width=Z.graph().width,U.graph().height=Z.graph().height}var C=["nodesep","edgesep","ranksep","marginx","marginy"],N={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},k=["acyclicer","ranker","rankdir","align"],T=["width","height"],A={width:0,height:0},M=["minlen","weight","width","height","labeloffset"],j={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},R=["labelpos"];function L(U){var Z=new b({multigraph:!0,compound:!0}),ee=ae(U.graph());return Z.setGraph(e.merge({},N,oe(ee,C),e.pick(ee,k))),e.forEach(U.nodes(),function(de){var ce=ae(U.node(de));Z.setNode(de,e.defaults(oe(ce,T),A)),Z.setParent(de,U.parent(de))}),e.forEach(U.edges(),function(de){var ce=ae(U.edge(de));Z.setEdge(de,e.merge({},j,oe(ce,M),e.pick(ce,R)))}),Z}function I(U){var Z=U.graph();Z.ranksep/=2,e.forEach(U.edges(),function(ee){var de=U.edge(ee);de.minlen*=2,de.labelpos.toLowerCase()!=="c"&&(Z.rankdir==="TB"||Z.rankdir==="BT"?de.width+=de.labeloffset:de.height+=de.labeloffset)})}function H(U){e.forEach(U.edges(),function(Z){var ee=U.edge(Z);if(ee.width&&ee.height){var de=U.node(Z.v),ce=U.node(Z.w),ve={rank:(ce.rank-de.rank)/2+de.rank,e:Z};m.addDummyNode(U,"edge-proxy",ve,"_ep")}})}function q(U){var Z=0;e.forEach(U.nodes(),function(ee){var de=U.node(ee);de.borderTop&&(de.minRank=U.node(de.borderTop).rank,de.maxRank=U.node(de.borderBottom).rank,Z=e.max(Z,de.maxRank))}),U.graph().maxRank=Z}function W(U){e.forEach(U.nodes(),function(Z){var ee=U.node(Z);ee.dummy==="edge-proxy"&&(U.edge(ee.e).labelRank=ee.rank,U.removeNode(Z))})}function z(U){var Z=Number.POSITIVE_INFINITY,ee=0,de=Number.POSITIVE_INFINITY,ce=0,ve=U.graph(),De=ve.marginx||0,Pe=ve.marginy||0;function Ae(Ee){var Se=Ee.x,Te=Ee.y,ot=Ee.width,Oe=Ee.height;Z=Math.min(Z,Se-ot/2),ee=Math.max(ee,Se+ot/2),de=Math.min(de,Te-Oe/2),ce=Math.max(ce,Te+Oe/2)}e.forEach(U.nodes(),function(Ee){Ae(U.node(Ee))}),e.forEach(U.edges(),function(Ee){var Se=U.edge(Ee);e.has(Se,"x")&&Ae(Se)}),Z-=De,de-=Pe,e.forEach(U.nodes(),function(Ee){var Se=U.node(Ee);Se.x-=Z,Se.y-=de}),e.forEach(U.edges(),function(Ee){var Se=U.edge(Ee);e.forEach(Se.points,function(Te){Te.x-=Z,Te.y-=de}),e.has(Se,"x")&&(Se.x-=Z),e.has(Se,"y")&&(Se.y-=de)}),ve.width=ee-Z+De,ve.height=ce-de+Pe}function F(U){e.forEach(U.edges(),function(Z){var ee=U.edge(Z),de=U.node(Z.v),ce=U.node(Z.w),ve,De;ee.points?(ve=ee.points[0],De=ee.points[ee.points.length-1]):(ee.points=[],ve=ce,De=de),ee.points.unshift(m.intersectRect(de,ve)),ee.points.push(m.intersectRect(ce,De))})}function O(U){e.forEach(U.edges(),function(Z){var ee=U.edge(Z);if(e.has(ee,"x"))switch((ee.labelpos==="l"||ee.labelpos==="r")&&(ee.width-=ee.labeloffset),ee.labelpos){case"l":ee.x-=ee.width/2+ee.labeloffset;break;case"r":ee.x+=ee.width/2+ee.labeloffset;break}})}function V(U){e.forEach(U.edges(),function(Z){var ee=U.edge(Z);ee.reversed&&ee.points.reverse()})}function Y(U){e.forEach(U.nodes(),function(Z){if(U.children(Z).length){var ee=U.node(Z),de=U.node(ee.borderTop),ce=U.node(ee.borderBottom),ve=U.node(e.last(ee.borderLeft)),De=U.node(e.last(ee.borderRight));ee.width=Math.abs(De.x-ve.x),ee.height=Math.abs(ce.y-de.y),ee.x=ve.x+ee.width/2,ee.y=de.y+ee.height/2}}),e.forEach(U.nodes(),function(Z){U.node(Z).dummy==="border"&&U.removeNode(Z)})}function te(U){e.forEach(U.edges(),function(Z){if(Z.v===Z.w){var ee=U.node(Z.v);ee.selfEdges||(ee.selfEdges=[]),ee.selfEdges.push({e:Z,label:U.edge(Z)}),U.removeEdge(Z)}})}function B(U){var Z=m.buildLayerMatrix(U);e.forEach(Z,function(ee){var de=0;e.forEach(ee,function(ce,ve){var De=U.node(ce);De.order=ve+de,e.forEach(De.selfEdges,function(Pe){m.addDummyNode(U,"selfedge",{width:Pe.label.width,height:Pe.label.height,rank:De.rank,order:ve+ ++de,e:Pe.e,label:Pe.label},"_se")}),delete De.selfEdges})})}function $(U){e.forEach(U.nodes(),function(Z){var ee=U.node(Z);if(ee.dummy==="selfedge"){var de=U.node(ee.e.v),ce=de.x+de.width/2,ve=de.y,De=ee.x-ce,Pe=de.height/2;U.setEdge(ee.e,ee.label),U.removeNode(Z),ee.label.points=[{x:ce+2*De/3,y:ve-Pe},{x:ce+5*De/6,y:ve-Pe},{x:ce+De,y:ve},{x:ce+5*De/6,y:ve+Pe},{x:ce+2*De/3,y:ve+Pe}],ee.label.x=ee.x,ee.label.y=ee.y}})}function oe(U,Z){return e.mapValues(e.pick(U,Z),Number)}function ae(U){var Z={};return e.forEach(U,function(ee,de){Z[de.toLowerCase()]=ee}),Z}return YS}var XS,V5;function ohe(){if(V5)return XS;V5=1;var e=Bt(),t=Ar(),n=Di().Graph;XS={debugOrdering:r};function r(i){var s=t.buildLayerMatrix(i),o=new n({compound:!0,multigraph:!0}).setGraph({});return e.forEach(i.nodes(),function(l){o.setNode(l,{label:l}),o.setParent(l,"layer"+i.node(l).rank)}),e.forEach(i.edges(),function(l){o.setEdge(l.v,l.w,{},l.name)}),e.forEach(s,function(l,u){var d="layer"+u;o.setNode(d,{rank:"same"}),e.reduce(l,function(h,p){return o.setEdge(h,p,{style:"invis"}),p})}),o}return XS}var ZS,H5;function ahe(){return H5||(H5=1,ZS="0.8.5"),ZS}var JS,F5;function lhe(){return F5||(F5=1,JS={graphlib:Di(),layout:she(),debug:ohe(),util:{time:Ar().time,notime:Ar().notime},version:ahe()}),JS}var che=lhe();const Fh=Bd(che),Nu=[{id:"web-app",group:"Frontend",icon:"",label:"Web App",description:"Browser-based client",tags:["browser","client","frontend","spa","pwa","web application"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Web App",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"framework",label:"Framework",type:"select",default:"React",options:["React","Vue","Angular","Svelte"]},{key:"instances",label:"Instances",type:"number",default:3},{key:"cdn",label:"CDN Enabled",type:"boolean",default:!0},{key:"ssl",label:"SSL Enabled",type:"boolean",default:!0},{key:"staticAssets",label:"Static Assets (GB)",type:"number",default:50},{key:"logic",label:"Component Logic (Pseudo Code)",type:"textarea",placeholder:"submit -> validate -> call API -> show response",default:""}]},{id:"mobile-app",group:"Frontend",icon:"",label:"Mobile App",description:"iOS/Android client",tags:["ios","android","mobile","app","native","react native","flutter"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Mobile App",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",default:"",placeholder:"A brief description"},{key:"stack",label:"Tech Stack",type:"select",default:"React Native",options:["React Native","Flutter","Swift/Kotlin"]},{key:"pushNotifications",label:"Push Notifications",type:"boolean",default:!0},{key:"offlineSupport",label:"Offline Support",type:"boolean",default:!0},{key:"sessions",label:"Active Sessions (k)",type:"number",default:10}]},{id:"desktop-app",group:"Frontend",icon:"",label:"Desktop App",description:"Native / Electron client",tags:["desktop","electron","tauri","native","windows","mac","linux"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Desktop App",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",default:"",placeholder:"A brief description"},{key:"runtime",label:"Runtime",type:"select",default:"Electron",options:["Electron","Tauri","Native"]},{key:"autoUpdate",label:"Auto Update",type:"boolean",default:!0},{key:"bundledSizeMB",label:"Bundle Size (MB)",type:"number",default:120}]},{id:"database",group:"Data Layer",icon:"",label:"Database",description:"Relational/NoSQL data storage",tags:["db","rdbms","nosql","sql","postgres","mysql","mongodb","data","storage","persistence"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Database"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"type",label:"Database Type",type:"select",default:"RDBMS",options:["RDBMS","NoSQL","NewSQL","Time-Series","Graph"]},{key:"engine",label:"Engine",type:"select",default:"postgresql",options:["postgresql","mysql","mongodb","cassandra","dynamodb","cockroachdb"]},{key:"workload",label:"Workload Type",type:"select",default:"OLTP",options:["OLTP","OLAP","Hybrid"]},{key:"storageGB",label:"Storage (GB)",type:"number",default:100},{key:"sharding",label:"Sharding Strategy",type:"select",default:"None",options:["None","Hash-based","Range-based","Geographic"]},{key:"shards",label:"Number of Shards",type:"number",default:1},{key:"replication",label:"Replication Factor",type:"number",default:3},{key:"replicationMode",label:"Replication Mode",type:"select",default:"Async",options:["Sync","Async","Semi-Sync"]},{key:"multiAZ",label:"Multi-AZ",type:"boolean",default:!0},{key:"crossRegion",label:"Cross-Region Replication",type:"boolean",default:!1},{key:"backups",label:"Automatic Backups",type:"boolean",default:!0},{key:"pitr",label:"Point-in-Time Recovery",type:"boolean",default:!0},{key:"encryption",label:"Encryption at Rest",type:"boolean",default:!0},{key:"connectionPooling",label:"Connection Pooling",type:"boolean",default:!0},{key:"queryCache",label:"Query Cache Enabled",type:"boolean",default:!0},{key:"wal",label:"Write-Ahead Logging",type:"boolean",default:!0},{key:"rbac",label:"RBAC Enabled",type:"boolean",default:!0},{key:"auditLog",label:"Audit Trail",type:"boolean",default:!0}]},{id:"loadbalancer",group:"Networking",icon:"",label:"Load Balancer",description:"Traffic distribution & high availability",tags:["lb","alb","nlb","elb","traffic","distribution","nginx","haproxy","layer 4","layer 7"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Load Balancer"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"type",label:"Type",type:"select",default:"Layer 7 (Application)",options:["Layer 4 (Network)","Layer 7 (Application)","Global"]},{key:"algorithm",label:"Algorithm",type:"select",default:"round-robin",options:["round-robin","least-connections","ip-hash","weighted-round-robin","least-response-time"]},{key:"sslTermination",label:"SSL/TLS Termination",type:"boolean",default:!0},{key:"stickiness",label:"Session Stickiness",type:"boolean",default:!1},{key:"healthCheck",label:"Health Check",type:"boolean",default:!0},{key:"healthCheckInterval",label:"Health Check Interval (s)",type:"number",default:30},{key:"multiAZ",label:"Multi-AZ",type:"boolean",default:!0},{key:"accessLogs",label:"Access Logs",type:"boolean",default:!0},{key:"connectionDraining",label:"Connection Draining",type:"boolean",default:!0},{key:"ddosProtection",label:"DDoS Protection",type:"boolean",default:!0},{key:"waf",label:"WAF Enabled",type:"boolean",default:!1}]},{id:"cache",group:"Data Layer",icon:"",label:"Cache",description:"In-memory fast data access",tags:["redis","memcached","in-memory","caching","performance","speed"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Cache"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"engine",label:"Engine",type:"select",default:"redis",options:["redis","memcached","hazelcast","aerospike"]},{key:"cacheStrategy",label:"Cache Strategy",type:"select",default:"write-through",options:["write-through","write-around","write-back","cache-aside"]},{key:"ttl",label:"TTL (seconds)",type:"number",default:3600},{key:"inMemory",label:"In Memory",type:"boolean",default:!0},{key:"eviction",label:"Eviction Policy",type:"select",default:"lru",options:["lru","lfu","fifo","mru","random","ttl-based","volatile-lru"]},{key:"replication",label:"Replication",type:"boolean",default:!0},{key:"clusterMode",label:"Cluster Mode",type:"boolean",default:!1},{key:"persistence",label:"Persistence (AOF/RDB)",type:"boolean",default:!1},{key:"encryption",label:"Encryption in Transit",type:"boolean",default:!0},{key:"maxMemoryGB",label:"Max Memory (GB)",type:"number",default:16}]},{id:"webserver",group:"Compute",icon:"",label:"Web Server",description:"HTTP requests",tags:["http","server","nginx","apache","web","requests"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Web Server"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"instances",label:"Instances",type:"number",default:2},{key:"autoscale",label:"Autoscale",type:"boolean",default:!0},{key:"instanceType",label:"Instance Type",type:"select",default:"t3.medium",options:["t3.small","t3.medium","t3.large"]},{key:"gzip",label:"Gzip",type:"boolean",default:!0},{key:"connectionTimeout",label:"Connection Timeout (s)",type:"number",default:30}]},{id:"message-broker",group:"Messaging",icon:"",label:"Message Broker",description:"Pub/Sub message broker",tags:["kafka","rabbitmq","pubsub","messaging","broker","queue","mq"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Message Broker"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"partitions",label:"Partitions",type:"number",default:6},{key:"replication",label:"Replication Factor",type:"number",default:3},{key:"durable",label:"Durable (persist messages)",type:"boolean",default:!0},{key:"retention",label:"Retention (hours)",type:"number",default:168}]},{id:"auth-service",group:"Services",icon:"",label:"Auth Service",description:"Authentication & session management",tags:["authentication","authorization","auth","oauth","jwt","sso","login","security"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Auth Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"oauth",label:"OAuth Enabled",type:"boolean",default:!0},{key:"sessions",label:"Session Store",type:"select",default:"redis",options:["redis","database","none"]},{key:"tokenTTL",label:"Token TTL (minutes)",type:"number",default:60},{key:"mfa",label:"MFA Required",type:"boolean",default:!1}]},{id:"cdn",group:"Delivery",icon:"",label:"CDN",description:"Content delivery network",tags:["content delivery","cloudflare","akamai","fastly","edge","caching","cdn"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"CDN"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"Cloudflare",options:["Cloudflare","Akamai","Fastly","AWS CloudFront"]},{key:"ttl",label:"Edge TTL (seconds)",type:"number",default:3600},{key:"cacheInvalidation",label:"Cache Invalidation (manual)",type:"boolean",default:!0}]},{id:"search",group:"Services",icon:"",label:"Search",description:"Search engine & indexing",tags:["elasticsearch","opensearch","search engine","indexing","full-text","lucene"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Search"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"engine",label:"Engine",type:"select",default:"elasticsearch",options:["elasticsearch","opensearch","meilisearch"]},{key:"replicas",label:"Replicas",type:"number",default:2},{key:"indexing",label:"Real-time indexing",type:"boolean",default:!0},{key:"shards",label:"Shards",type:"number",default:5}]},{id:"queue",group:"Messaging",icon:"",label:"Queue",description:"Task queue",tags:["task queue","job queue","sqs","celery","worker queue","async"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Queue"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"visibilityTimeout",label:"Visibility Timeout (seconds)",type:"number",default:30},{key:"maxRetries",label:"Max Retries",type:"number",default:5},{key:"durable",label:"Durable (persist tasks)",type:"boolean",default:!0},{key:"backoff",label:"Backoff Strategy",type:"select",default:"exponential",options:["fixed","linear","exponential"]}]},{id:"analytics",group:"Data Layer",icon:"",label:"Analytics",description:"Event analytics pipeline",tags:["data analytics","metrics","events","tracking","bi","business intelligence"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Analytics"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"retentionDays",label:"Retention (days)",type:"number",default:90},{key:"samplingRate",label:"Sampling Rate (%)",type:"number",default:100},{key:"realTime",label:"Real-time processing",type:"boolean",default:!0},{key:"storage",label:"Storage",type:"select",default:"s3",options:["s3","gcs","azure_blob"]}]},{id:"root-nameserver",group:"DNS & Network",icon:"",label:"Root Nameserver",description:"Top-level DNS resolver",tags:["dns","nameserver","root","resolver","domain"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Root Nameserver"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"ttl",label:"TTL (seconds)",type:"number",default:172800},{key:"dnssec",label:"DNSSEC Enabled",type:"boolean",default:!0}]},{id:"tld-nameserver",group:"DNS & Network",icon:"",label:"TLD Nameserver",description:"Top-level domain nameserver",tags:["dns","tld","top-level domain","nameserver",".com",".org"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"TLD Nameserver"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"tld",label:"TLD",type:"select",default:".com",options:[".com",".org",".net",".io",".dev"]},{key:"ttl",label:"TTL (seconds)",type:"number",default:86400}]},{id:"authoritative-nameserver",group:"DNS & Network",icon:"",label:"Authoritative Nameserver",description:"Domain-specific DNS server",tags:["dns","authoritative","nameserver","domain","records"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Authoritative Nameserver"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"records",label:"DNS Records",type:"number",default:100},{key:"ttl",label:"TTL (seconds)",type:"number",default:3600},{key:"anycast",label:"Anycast Enabled",type:"boolean",default:!0}]},{id:"isp",group:"DNS & Network",icon:"",label:"ISP",description:"Internet Service Provider",tags:["internet","isp","network","provider","connectivity"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"ISP"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"dnsCache",label:"DNS Cache Enabled",type:"boolean",default:!0},{key:"bandwidth",label:"Bandwidth (Gbps)",type:"number",default:10}]},{id:"api-gateway",group:"Networking",icon:"",label:"API Gateway",description:"Central API entry point",tags:["api","gateway","rest","graphql","entry point","routing","kong","apigee"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"API Gateway"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"inputValidation",label:"Input Validation",type:"boolean",default:!0},{key:"authentication",label:"Authentication",type:"select",default:"OAuth 2.0",options:["OAuth 2.0","JWT","API Key","Basic Auth"]},{key:"rateLimiting",label:"Rate Limiting",type:"boolean",default:!0},{key:"requestsPerSecond",label:"Max Requests/Second",type:"number",default:1e3},{key:"tlsTermination",label:"TLS Termination",type:"boolean",default:!0},{key:"deduplication",label:"Request Deduplication",type:"boolean",default:!0},{key:"throttling",label:"Throttling Enabled",type:"boolean",default:!0}]},{id:"message-dispatcher",group:"Messaging",icon:"",label:"Message Dispatcher",description:"Message routing & distribution",tags:["message","dispatcher","routing","distribution","pub/sub"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Message Dispatcher"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"topics",label:"Topics",type:"number",default:10},{key:"loadBalancing",label:"Load Balancing",type:"select",default:"round-robin",options:["round-robin","least-load","hash-based"]},{key:"partitioning",label:"Partitioning Enabled",type:"boolean",default:!0}]},{id:"id-generator",group:"Services",icon:"",label:"ID Generator",description:"Distributed unique ID generation",tags:["id","uuid","snowflake","ulid","unique","generator","distributed"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"ID Generator"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"algorithm",label:"Algorithm",type:"select",default:"Snowflake",options:["Snowflake","UUID","ULID","Auto-Increment"]},{key:"shardId",label:"Shard ID",type:"number",default:1},{key:"distributed",label:"Distributed",type:"boolean",default:!0}]},{id:"distributed-lock",group:"Services",icon:"",label:"Distributed Lock",description:"Resource locking & coordination",tags:["lock","distributed","coordination","mutex","redis","etcd","zookeeper"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Distributed Lock"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"backend",label:"Backend",type:"select",default:"Redis",options:["Redis","Etcd","Zookeeper","Chubby"]},{key:"ttl",label:"Lock TTL (seconds)",type:"number",default:30},{key:"fairness",label:"Fair Locking",type:"boolean",default:!0}]},{id:"cold-storage",group:"Data Layer",icon:"",label:"Cold Storage",description:"Archive & backup storage",tags:["archive","backup","glacier","cold storage","long-term","s3 glacier"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Cold Storage"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"AWS Glacier",options:["AWS Glacier","Azure Archive","GCP Coldline"]},{key:"retentionDays",label:"Retention (days)",type:"number",default:2555},{key:"encryption",label:"Encryption at Rest",type:"boolean",default:!0}]},{id:"object-storage",group:"Data Layer",icon:"",label:"Object Storage",description:"S3-compatible object store",tags:["s3","blob","object storage","aws s3","azure blob","gcs","minio"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Object Storage"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"S3",options:["S3","Azure Blob","GCS","MinIO"]},{key:"versioning",label:"Versioning",type:"boolean",default:!0},{key:"checksumValidation",label:"Checksum Validation",type:"boolean",default:!0},{key:"storageGB",label:"Storage (GB)",type:"number",default:1e3}]},{id:"processing-worker",group:"Compute",icon:"",label:"Processing Worker",description:"Background job processor",tags:["worker","background job","async","task processor","celery","sidekiq"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Processing Worker"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"tasks",label:"Task Types",type:"select",default:"Media Encoding",options:["Media Encoding","Thumbnail Generation","Data Processing","ML Inference"]},{key:"concurrency",label:"Concurrent Jobs",type:"number",default:10},{key:"autoscale",label:"Auto-scale",type:"boolean",default:!0}]},{id:"notification-service",group:"Services",icon:"",label:"Notification Service",description:"Push notifications & alerts",tags:["notification","push","email","sms","alerts","fcm","apns"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Notification Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"channels",label:"Channels",type:"select",default:"Push + Email",options:["Push","Email","SMS","Push + Email","All"]},{key:"fanout",label:"Fan-out Support",type:"boolean",default:!0},{key:"batching",label:"Batch Notifications",type:"boolean",default:!0}]},{id:"recommendation-service",group:"Services",icon:"",label:"Recommendation",description:"ML-based recommendations",tags:["recommendation","ml","machine learning","collaborative filtering","personalization"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Recommendation"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"algorithm",label:"Algorithm",type:"select",default:"Collaborative Filtering",options:["Collaborative Filtering","Content-based","Hybrid"]},{key:"realTime",label:"Real-time",type:"boolean",default:!0},{key:"cacheResults",label:"Cache Results",type:"boolean",default:!0}]},{id:"payment-service",group:"Services",icon:"",label:"Payment Service",description:"Payment processing & gateway",tags:["payment","stripe","paypal","transaction","billing","checkout","pci"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Payment Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"gateway",label:"Gateway",type:"select",default:"Stripe",options:["Stripe","PayPal","Braintree","Square"]},{key:"pciDss",label:"PCI DSS Compliant",type:"boolean",default:!0},{key:"tokenization",label:"Card Tokenization",type:"boolean",default:!0},{key:"retry",label:"Auto-retry Failed",type:"boolean",default:!0}]},{id:"log-processing",group:"Services",icon:"",label:"Log Processing",description:"Log aggregation & analysis",tags:["logging","logs","elk","splunk","aggregation","analysis","kibana"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Log Processing"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"pipeline",label:"Pipeline",type:"select",default:"ELK Stack",options:["ELK Stack","Splunk","Datadog","CloudWatch"]},{key:"retentionDays",label:"Retention (days)",type:"number",default:30},{key:"indexing",label:"Real-time Indexing",type:"boolean",default:!0}]},{id:"pubsub",group:"Messaging",icon:"",label:"Pub/Sub",description:"Publish-subscribe messaging",tags:["pubsub","publish","subscribe","messaging","event","google pubsub","sns"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Pub/Sub"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"topics",label:"Topics",type:"number",default:20},{key:"fanout",label:"Fan-out Support",type:"boolean",default:!0},{key:"ordering",label:"Message Ordering",type:"boolean",default:!1},{key:"durable",label:"Durable Messages",type:"boolean",default:!0}]},{id:"frontend-server",group:"Compute",icon:"",label:"Frontend Server",description:"Client-facing server",tags:["frontend","server","websocket","connection","client-facing"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Frontend Server"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"inMemoryConnections",label:"In-Memory Connections",type:"boolean",default:!0},{key:"activeConnections",label:"Active Connections",type:"number",default:1e4},{key:"websockets",label:"WebSocket Support",type:"boolean",default:!0},{key:"instances",label:"Instances",type:"number",default:3}]},{id:"backend-server",group:"Compute",icon:"",label:"Backend Server",description:"Application logic & microservices",tags:["backend","server","microservices","api","business logic","application"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Backend Server"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"architecture",label:"Architecture",type:"select",default:"Microservices",options:["Monolith","Microservices","Serverless"]},{key:"instances",label:"Instances",type:"number",default:5},{key:"caching",label:"Caching Enabled",type:"boolean",default:!0},{key:"retry",label:"Retry Logic",type:"boolean",default:!0},{key:"bulkOps",label:"Bulk Operations",type:"boolean",default:!0}]},{id:"edge-server",group:"Delivery",icon:"",label:"Edge Server",description:"Edge computing & caching",tags:["edge","edge computing","edge network","cdn","streaming"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Edge Server"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"scope",label:"Scope",type:"select",default:"Regional",options:["Global","Regional","Local"]},{key:"streaming",label:"Streaming Support",type:"boolean",default:!0},{key:"abr",label:"ABR (Adaptive Bitrate)",type:"boolean",default:!0},{key:"staticCache",label:"Static Cache",type:"boolean",default:!0}]},{id:"service-mesh",group:"Networking",icon:"",label:"Service Mesh",description:"Microservices communication layer",tags:["service mesh","istio","linkerd","consul","mtls","traffic management"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Service Mesh"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"Istio",options:["Istio","Linkerd","Consul","AWS App Mesh"]},{key:"mtls",label:"Mutual TLS",type:"boolean",default:!0},{key:"tracing",label:"Distributed Tracing",type:"boolean",default:!0},{key:"circuitBreaker",label:"Circuit Breaker",type:"boolean",default:!0},{key:"retryPolicy",label:"Retry Policy",type:"boolean",default:!0},{key:"trafficSplitting",label:"Traffic Splitting",type:"boolean",default:!0}]},{id:"container-orchestrator",group:"Compute",icon:"",label:"Container Orchestrator",description:"Container management & orchestration",tags:["kubernetes","k8s","docker","container","orchestration","ecs","pods"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"K8s Cluster"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"platform",label:"Platform",type:"select",default:"Kubernetes",options:["Kubernetes","ECS","Docker Swarm","Nomad"]},{key:"nodes",label:"Worker Nodes",type:"number",default:3},{key:"autoscaling",label:"Auto-scaling (HPA)",type:"boolean",default:!0},{key:"ingress",label:"Ingress Controller",type:"boolean",default:!0},{key:"monitoring",label:"Monitoring (Prometheus)",type:"boolean",default:!0}]},{id:"serverless-function",group:"Compute",icon:"",label:"Serverless Function",description:"Event-driven compute",tags:["lambda","serverless","function app","cloud function","faas","azure functions","event-driven"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Lambda Function"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"runtime",label:"Runtime",type:"select",default:"Node.js",options:["Node.js","Python","Java","Go",".NET","Ruby"]},{key:"memoryMB",label:"Memory (MB)",type:"number",default:512},{key:"timeout",label:"Timeout (seconds)",type:"number",default:30},{key:"concurrency",label:"Concurrent Executions",type:"number",default:100},{key:"coldStart",label:"Cold Start Optimization",type:"boolean",default:!0}]},{id:"reverse-proxy",group:"Networking",icon:"",label:"Reverse Proxy",description:"Request routing & caching",tags:["reverse proxy","nginx","haproxy","envoy","traefik","proxy"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Reverse Proxy"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"server",label:"Server",type:"select",default:"Nginx",options:["Nginx","HAProxy","Envoy","Traefik"]},{key:"caching",label:"Response Caching",type:"boolean",default:!0},{key:"compression",label:"Compression (gzip/brotli)",type:"boolean",default:!0},{key:"ssl",label:"SSL/TLS",type:"boolean",default:!0},{key:"rateLimiting",label:"Rate Limiting",type:"boolean",default:!0}]},{id:"stream-processor",group:"Data Layer",icon:"",label:"Stream Processor",description:"Real-time data processing",tags:["stream","kafka streams","flink","spark streaming","kinesis","real-time"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Stream Processor"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"engine",label:"Engine",type:"select",default:"Kafka Streams",options:["Kafka Streams","Apache Flink","Spark Streaming","AWS Kinesis"]},{key:"throughput",label:"Throughput (events/sec)",type:"number",default:1e4},{key:"windowing",label:"Windowing Support",type:"boolean",default:!0},{key:"stateful",label:"Stateful Processing",type:"boolean",default:!0}]},{id:"data-warehouse",group:"Data Layer",icon:"",label:"Data Warehouse",description:"OLAP & analytics storage",tags:["data warehouse","snowflake","redshift","bigquery","olap","analytics"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Data Warehouse"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"platform",label:"Platform",type:"select",default:"Snowflake",options:["Snowflake","Redshift","BigQuery","Synapse"]},{key:"storageTB",label:"Storage (TB)",type:"number",default:10},{key:"compression",label:"Column Compression",type:"boolean",default:!0},{key:"partitioning",label:"Data Partitioning",type:"boolean",default:!0}]},{id:"monitoring",group:"Observability",icon:"",label:"Monitoring",description:"Metrics & alerting",tags:["monitoring","prometheus","grafana","datadog","metrics","alerts","observability"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Monitoring"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"stack",label:"Stack",type:"select",default:"Prometheus + Grafana",options:["Prometheus + Grafana","Datadog","New Relic","CloudWatch"]},{key:"metrics",label:"Metrics Collection",type:"boolean",default:!0},{key:"alerts",label:"Alerting",type:"boolean",default:!0},{key:"retention",label:"Retention (days)",type:"number",default:30}]},{id:"tracing",group:"Observability",icon:"",label:"Distributed Tracing",description:"Request flow tracking",tags:["tracing","jaeger","zipkin","distributed tracing","apm","x-ray"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Tracing"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"platform",label:"Platform",type:"select",default:"Jaeger",options:["Jaeger","Zipkin","AWS X-Ray","Datadog APM"]},{key:"sampling",label:"Sampling Rate (%)",type:"number",default:10},{key:"retention",label:"Retention (days)",type:"number",default:7}]},{id:"rate-limiter",group:"Services",icon:"",label:"Rate Limiter",description:"Request throttling service",tags:["rate limit","throttling","rate limiter","token bucket","quota"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Rate Limiter"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"algorithm",label:"Algorithm",type:"select",default:"Token Bucket",options:["Token Bucket","Leaky Bucket","Fixed Window","Sliding Window"]},{key:"requestsPerMinute",label:"Requests/Minute",type:"number",default:1e3},{key:"distributed",label:"Distributed",type:"boolean",default:!0},{key:"backend",label:"Backend",type:"select",default:"Redis",options:["Redis","In-Memory","Database"]}]},{id:"circuit-breaker",group:"Services",icon:"",label:"Circuit Breaker",description:"Fault tolerance & resilience",tags:["circuit breaker","fault tolerance","resilience","hystrix","fallback"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Circuit Breaker"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"failureThreshold",label:"Failure Threshold (%)",type:"number",default:50},{key:"timeout",label:"Timeout (ms)",type:"number",default:5e3},{key:"fallback",label:"Fallback Strategy",type:"boolean",default:!0}]},{id:"file-storage",group:"Data Layer",icon:"",label:"File Storage",description:"Shared file system",tags:["file storage","nfs","efs","shared storage","file system"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"File Storage"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"type",label:"Type",type:"select",default:"NFS",options:["NFS","EFS","Azure Files","GCP Filestore"]},{key:"storageTB",label:"Storage (TB)",type:"number",default:1},{key:"throughput",label:"Throughput (MB/s)",type:"number",default:100}]},{id:"vpn-gateway",group:"Networking",icon:"",label:"VPN Gateway",description:"Secure network connection",tags:["vpn","gateway","ipsec","openvpn","wireguard","secure connection"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"VPN Gateway"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"protocol",label:"Protocol",type:"select",default:"IPSec",options:["IPSec","OpenVPN","WireGuard"]},{key:"encryption",label:"Encryption",type:"select",default:"AES-256",options:["AES-128","AES-256","ChaCha20"]},{key:"tunnels",label:"Active Tunnels",type:"number",default:2}]},{id:"firewall",group:"Security",icon:"",label:"Firewall",description:"Network security & filtering",tags:["firewall","waf","security","ips","network firewall","filtering"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Firewall"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"type",label:"Type",type:"select",default:"WAF",options:["Network Firewall","WAF","Next-Gen Firewall"]},{key:"rules",label:"Active Rules",type:"number",default:50},{key:"ips",label:"IPS Enabled",type:"boolean",default:!0},{key:"logging",label:"Traffic Logging",type:"boolean",default:!0}]},{id:"secrets-manager",group:"Security",icon:"",label:"Secrets Manager",description:"Credentials & secrets storage",tags:["secrets","vault","credentials","key management","hashicorp vault","secrets manager"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Secrets Manager"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"HashiCorp Vault",options:["HashiCorp Vault","AWS Secrets Manager","Azure Key Vault"]},{key:"rotation",label:"Auto Rotation",type:"boolean",default:!0},{key:"encryption",label:"Encryption at Rest",type:"boolean",default:!0},{key:"audit",label:"Audit Logging",type:"boolean",default:!0}]},{id:"email-service",group:"Services",icon:"",label:"Email Service",description:"Transactional email delivery",tags:["email","sendgrid","ses","mailgun","smtp","transactional email"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Email Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"SendGrid",options:["SendGrid","AWS SES","Mailgun","Postmark"]},{key:"templates",label:"Template Support",type:"boolean",default:!0},{key:"tracking",label:"Open/Click Tracking",type:"boolean",default:!0},{key:"bounceHandling",label:"Bounce Handling",type:"boolean",default:!0}]},{id:"sms-service",group:"Services",icon:"",label:"SMS Service",description:"SMS notifications & OTP",tags:["sms","twilio","sns","text message","otp","vonage"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"SMS Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"Twilio",options:["Twilio","AWS SNS","Vonage","MessageBird"]},{key:"otp",label:"OTP Support",type:"boolean",default:!0},{key:"deliveryReports",label:"Delivery Reports",type:"boolean",default:!0}]},{id:"custom-component",group:"Custom",icon:"",label:"Custom Component",description:"Create your own custom component",tags:["custom","generic","user-defined","flexible","other"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Custom Component"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe what this component does",default:""},{key:"componentType",label:"Component Type",type:"text",placeholder:"e.g., Service, Database, Cache, etc.",default:""},{key:"technology",label:"Technology/Tool",type:"text",placeholder:"e.g., Redis, Kafka, Custom API, etc.",default:""},{key:"purpose",label:"Purpose",type:"textarea",placeholder:"What problem does this solve?",default:""},{key:"notes",label:"Additional Notes",type:"textarea",placeholder:"Any additional details or configuration",default:""}]},{id:"ml-model",group:"AI & ML",icon:"",label:"ML Model",description:"Machine Learning Model (inference/training)",tags:["ml","machine learning","model","ai","inference","training","neural network"],properties:[{key:"componentName",label:"Model Name",type:"text",default:"ML Model",placeholder:"Enter model name"},{key:"description",label:"Description",type:"textarea",placeholder:"Model description and purpose",default:""},{key:"modelType",label:"Model Type",type:"select",default:"Classification",options:["Classification","Regression","NLP","Computer Vision","Recommendation","Forecasting","Clustering","Anomaly Detection"]},{key:"framework",label:"Framework",type:"select",default:"TensorFlow",options:["TensorFlow","PyTorch","Scikit-learn","XGBoost","Keras","ONNX"]},{key:"version",label:"Model Version",type:"text",placeholder:"e.g., v1.0",default:"v1.0"}]},{id:"model-training",group:"AI & ML",icon:"",label:"Model Training",description:"ML model training pipeline",tags:["training","ml","pipeline","learning","dataset","batch training"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Model Training",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Training pipeline description",default:""},{key:"computeType",label:"Compute Type",type:"select",default:"GPU",options:["CPU","GPU","TPU","Distributed"]},{key:"batchSize",label:"Batch Size",type:"number",default:32},{key:"epochs",label:"Epochs",type:"number",default:100}]},{id:"model-serving",group:"AI & ML",icon:"",label:"Model Serving",description:"ML model serving/inference API",tags:["inference","serving","prediction","api","endpoint","model deployment"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Model Serving",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Model serving description",default:""},{key:"platform",label:"Serving Platform",type:"select",default:"TensorFlow Serving",options:["TensorFlow Serving","TorchServe","MLflow","Seldon Core","KServe","Custom API"]},{key:"instances",label:"Instances",type:"number",default:3},{key:"autoscaling",label:"Auto-scaling",type:"boolean",default:!0}]},{id:"feature-store",group:"AI & ML",icon:"",label:"Feature Store",description:"Centralized feature storage for ML",tags:["features","ml","data","store","feast","feature engineering"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Feature Store",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Feature store description",default:""},{key:"platform",label:"Platform",type:"select",default:"Feast",options:["Feast","Tecton","Hopsworks","AWS SageMaker","Custom"]},{key:"features",label:"Number of Features",type:"number",default:100}]},{id:"data-labeling",group:"AI & ML",icon:"",label:"Data Labeling",description:"Data annotation and labeling service",tags:["labeling","annotation","training data","ground truth","dataset"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Data Labeling",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Labeling service description",default:""},{key:"labelingType",label:"Labeling Type",type:"select",default:"Manual",options:["Manual","Semi-automated","Active Learning","Crowdsourced"]},{key:"dataType",label:"Data Type",type:"select",default:"Images",options:["Images","Text","Audio","Video","Tabular"]}]},{id:"mlops-pipeline",group:"AI & ML",icon:"",label:"MLOps Pipeline",description:"End-to-end ML operations pipeline",tags:["mlops","pipeline","ci/cd","automation","deployment","monitoring"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"MLOps Pipeline",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Pipeline description",default:""},{key:"platform",label:"Platform",type:"select",default:"Kubeflow",options:["Kubeflow","MLflow","AWS SageMaker","Azure ML","Vertex AI","Custom"]},{key:"stages",label:"Pipeline Stages",type:"text",placeholder:"e.g., train -> validate -> deploy",default:"train -> validate -> deploy"}]},{id:"model-registry",group:"AI & ML",icon:"",label:"Model Registry",description:"Centralized model versioning and registry",tags:["registry","versioning","models","metadata","tracking","mlflow"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Model Registry",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Registry description",default:""},{key:"platform",label:"Platform",type:"select",default:"MLflow",options:["MLflow","AWS SageMaker","Azure ML","Vertex AI","Custom"]},{key:"models",label:"Registered Models",type:"number",default:10}]},{id:"vector-database",group:"AI & ML",icon:"",label:"Vector Database",description:"Vector embeddings storage for similarity search",tags:["vector","embeddings","similarity","search","rag","retrieval"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Vector Database",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Vector DB description",default:""},{key:"engine",label:"Engine",type:"select",default:"Pinecone",options:["Pinecone","Weaviate","Milvus","Qdrant","Chroma","FAISS","pgvector"]},{key:"dimensions",label:"Vector Dimensions",type:"number",default:768},{key:"indexType",label:"Index Type",type:"select",default:"HNSW",options:["HNSW","IVF","Flat","LSH"]}]},{id:"llm-api",group:"AI & ML",icon:"",label:"LLM API",description:"Large Language Model API endpoint",tags:["llm","gpt","language model","openai","api","chatbot","ai"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"LLM API",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"LLM API description",default:""},{key:"provider",label:"Provider",type:"select",default:"OpenAI",options:["OpenAI","Anthropic","Google PaLM","Azure OpenAI","Hugging Face","Self-hosted"]},{key:"model",label:"Model",type:"text",placeholder:"e.g., gpt-4, claude-3",default:"gpt-4"},{key:"maxTokens",label:"Max Tokens",type:"number",default:4096}]},{id:"gpu-cluster",group:"AI & ML",icon:"",label:"GPU Cluster",description:"GPU computing cluster for ML workloads",tags:["gpu","compute","cluster","training","nvidia","cuda"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"GPU Cluster",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"GPU cluster description",default:""},{key:"gpuType",label:"GPU Type",type:"select",default:"NVIDIA A100",options:["NVIDIA A100","NVIDIA V100","NVIDIA T4","NVIDIA H100","AMD MI250"]},{key:"nodes",label:"Number of Nodes",type:"number",default:4},{key:"gpusPerNode",label:"GPUs per Node",type:"number",default:8}]},{id:"experiment-tracking",group:"AI & ML",icon:"",label:"Experiment Tracking",description:"ML experiment tracking and visualization",tags:["experiments","tracking","metrics","mlflow","wandb","monitoring"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Experiment Tracking",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Experiment tracking description",default:""},{key:"platform",label:"Platform",type:"select",default:"MLflow",options:["MLflow","Weights & Biases","TensorBoard","Neptune.ai","Comet ML"]},{key:"experiments",label:"Active Experiments",type:"number",default:5}]},{id:"group-cluster",group:"Grouping",icon:"",label:"Cluster/Group",description:"Container for grouping multiple components",tags:["group","cluster","container","zone","boundary","region"],properties:[{key:"componentName",label:"Group Name",type:"text",placeholder:"e.g., Backend Cluster, Database Zone",default:"Cluster"},{key:"description",label:"Description",type:"textarea",placeholder:"Purpose of this cluster/group",default:""},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"e.g., rgba(100, 100, 255, 0.05)",default:"rgba(100, 100, 255, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"e.g., rgba(100, 100, 255, 0.3)",default:"rgba(100, 100, 255, 0.3)"}]},{id:"availability-zone",group:"Grouping",icon:"",label:"Availability Zone",description:"Isolated location within a region",tags:["az","availability zone","fault isolation","zone","region"],properties:[{key:"componentName",label:"Zone Name",type:"text",placeholder:"e.g., us-east-1a, AZ-1",default:"Availability Zone"},{key:"description",label:"Description",type:"textarea",placeholder:"Zone details",default:""},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"Zone background color",default:"rgba(34, 139, 34, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"Zone border color",default:"rgba(34, 139, 34, 0.3)"}]},{id:"vpc-network",group:"Grouping",icon:"",label:"VPC/Network",description:"Virtual private cloud boundary",tags:["vpc","network","subnet","private","isolated"],properties:[{key:"componentName",label:"VPC Name",type:"text",placeholder:"e.g., Production VPC",default:"VPC"},{key:"description",label:"Description",type:"textarea",placeholder:"Network details",default:""},{key:"cidr",label:"CIDR Block",type:"text",placeholder:"e.g., 10.0.0.0/16",default:"10.0.0.0/16"},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"VPC background color",default:"rgba(128, 0, 128, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"VPC border color",default:"rgba(128, 0, 128, 0.3)"}]},{id:"microservice-group",group:"Grouping",icon:"",label:"Microservice Group",description:"Related microservices cluster",tags:["microservices","service group","domain","bounded context"],properties:[{key:"componentName",label:"Service Group",type:"text",placeholder:"e.g., User Services, Payment Domain",default:"Service Group"},{key:"description",label:"Description",type:"textarea",placeholder:"Service group purpose",default:""},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"Group background color",default:"rgba(255, 165, 0, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"Group border color",default:"rgba(255, 165, 0, 0.3)"}]},{id:"security-boundary",group:"Grouping",icon:"",label:"Security Boundary",description:"Security zone/perimeter",tags:["security","dmz","firewall","boundary","zone"],properties:[{key:"componentName",label:"Security Zone",type:"text",placeholder:"e.g., DMZ, Internal, Restricted",default:"Security Boundary"},{key:"description",label:"Description",type:"textarea",placeholder:"Security zone details",default:""},{key:"level",label:"Security Level",type:"select",default:"Internal",options:["Public","DMZ","Internal","Restricted"]},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"Zone background color",default:"rgba(255, 0, 0, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"Zone border color",default:"rgba(255, 0, 0, 0.3)"}]},{id:"custom-group",group:"Grouping",icon:"",label:"Custom Group",description:"Create your own custom group/container",tags:["custom","group","container","user-defined","flexible","boundary"],properties:[{key:"componentName",label:"Group Name",type:"text",placeholder:"Enter custom group name",default:"Custom Group"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe the purpose of this group",default:""},{key:"groupType",label:"Group Type",type:"text",placeholder:"e.g., Region, Data Center, Team, etc.",default:""},{key:"icon",label:"Icon",type:"text",placeholder:"e.g., , , , etc.",default:""},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"e.g., rgba(100, 100, 255, 0.05)",default:"rgba(100, 100, 255, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"e.g., rgba(100, 100, 255, 0.3)",default:"rgba(100, 100, 255, 0.3)"},{key:"subtitle",label:"Subtitle",type:"text",placeholder:"Optional subtitle text",default:""},{key:"notes",label:"Additional Notes",type:"textarea",placeholder:"Any additional details",default:""}]},{id:"entity",group:"ER Diagram",icon:"",label:"Entity",description:"Database table/entity with attributes",nodeType:"tableNode",tags:["entity","table","database","erd","relation","schema","model"],properties:[{key:"componentName",label:"Entity Name",type:"text",placeholder:"e.g., User, Order, Product",default:"Entity"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe what this entity represents",default:""},{key:"tableType",label:"Table Type",type:"select",default:"Regular",options:["Regular","Junction","Audit","Archive","View","Materialized View"]}],data:{attributes:[{id:"attr-1",name:"id",type:"UUID",isPrimaryKey:!0,isNullable:!1},{id:"attr-2",name:"name",type:"VARCHAR(100)",isNullable:!1},{id:"attr-3",name:"created_at",type:"TIMESTAMP",isNullable:!1}]},renderConfig:{shape:"table",sections:[{type:"header",editable:!1},{type:"attributes",editable:!0}],columns:[{key:"isPrimaryKey",label:"PK",width:"w-6",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-yellow-600 dark:text-yellow-400",inactive:"text-gray-400"}},{key:"name",label:"Column Name",width:"flex-1",type:"text",editable:!0,color:{active:"font-semibold"}},{key:"type",label:"Data Type",width:"w-24",type:"text",editable:!0},{key:"isForeignKey",label:"FK",width:"w-6",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-blue-600 dark:text-blue-400",inactive:"text-gray-400"}},{key:"isUnique",label:"UQ",width:"w-6",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-purple-600 dark:text-purple-400",inactive:"text-gray-400"}},{key:"isNullable",label:"NULL",width:"w-8",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-gray-400",inactive:"text-red-600 dark:text-red-400"}},{key:"actions",label:"",width:"w-8",type:"readonly"}]}},{id:"weak-entity",group:"ER Diagram",icon:"",label:"Weak Entity",description:"Entity dependent on another entity for identification",nodeType:"tableNode",tags:["weak entity","dependent","erd","relationship","partial key"],properties:[{key:"componentName",label:"Entity Name",type:"text",placeholder:"e.g., OrderItem, Dependent, Comment",default:"Weak Entity"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe this weak entity",default:""},{key:"ownerEntity",label:"Owner Entity",type:"text",placeholder:"Parent entity that this depends on",default:""},{key:"tableType",label:"Table Type",type:"select",default:"Weak Entity",options:["Weak Entity","Junction","Dependent"]}],data:{attributes:[{id:"attr-1",name:"owner_id",type:"UUID",isForeignKey:!0,isNullable:!1},{id:"attr-2",name:"sequence_number",type:"INT",isPrimaryKey:!0,isNullable:!1},{id:"attr-3",name:"data",type:"VARCHAR(255)",isNullable:!1}]},renderConfig:{shape:"table",sections:[{type:"header",editable:!1},{type:"attributes",editable:!0}],columns:[{key:"isPrimaryKey",label:"PK",width:"w-6",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-yellow-600 dark:text-yellow-400",inactive:"text-gray-400"}},{key:"name",label:"Column Name",width:"flex-1",type:"text",editable:!0,color:{active:"font-semibold"}},{key:"type",label:"Data Type",width:"w-24",type:"text",editable:!0},{key:"isForeignKey",label:"FK",width:"w-6",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-blue-600 dark:text-blue-400",inactive:"text-gray-400"}},{key:"isUnique",label:"UQ",width:"w-6",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-purple-600 dark:text-purple-400",inactive:"text-gray-400"}},{key:"isNullable",label:"NULL",width:"w-8",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-gray-400",inactive:"text-red-600 dark:text-red-400"}},{key:"actions",label:"",width:"w-8",type:"readonly"}],borderStyle:"double",borderWidth:4}},{id:"er-trigger",group:"ER Diagram",nodeType:"erNode",icon:"",label:"Trigger",description:"Database trigger for automated actions on events",tags:["trigger","automation","event","database","erd"],properties:[{key:"nodeType",label:"Node Type",type:"text",default:"er-trigger"},{key:"componentName",label:"Trigger Name",type:"text",placeholder:"e.g., update_timestamp, log_changes, validate_data",default:"update_timestamp"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe what this trigger does",default:"Automatically updates the updated_at timestamp when a row is modified"},{key:"targetTable",label:"Target Table",type:"text",placeholder:"Table this trigger is attached to",default:"users"},{key:"timing",label:"Timing",type:"select",default:"BEFORE",options:["BEFORE","AFTER","INSTEAD OF"]},{key:"event",label:"Event",type:"select",default:"UPDATE",options:["INSERT","UPDATE","DELETE","TRUNCATE"]},{key:"level",label:"Level",type:"select",default:"ROW",options:["ROW","STATEMENT"]},{key:"condition",label:"Condition (WHEN)",type:"textarea",placeholder:"Optional condition: e.g., NEW.status != OLD.status",default:""}],renderConfig:{shape:"note",sections:[{type:"header",editable:!1},{type:"content",editable:!1}],minWidth:200,minHeight:100}},{id:"er-note",group:"ER Diagram",nodeType:"erNode",icon:"",label:"Note/Constraint",description:"Business rule, constraint, or annotation",tags:["note","constraint","rule","annotation","comment","documentation"],properties:[{key:"nodeType",label:"Node Type",type:"text",default:"er-note"},{key:"componentName",label:"Note Title",type:"text",placeholder:"e.g., Business Rule, Constraint, Assumption",default:"Business Rule"},{key:"description",label:"Note Content",type:"textarea",placeholder:`Describe the rule, constraint, or important note
e.g., Email must be unique across all users
Orders can only be placed by verified customers`,default:"Email addresses must be unique across all user accounts"},{key:"type",label:"Type",type:"select",default:"Business Rule",options:["Business Rule","Database Constraint","Assumption","Clarification","TODO","Warning","Best Practice"]},{key:"severity",label:"Severity",type:"select",default:"Info",options:["Critical","High","Medium","Low","Info"]},{key:"relatedEntity",label:"Related To",type:"text",placeholder:"Entity or relationship this applies to",default:""},{key:"sqlConstraint",label:"SQL Constraint",type:"textarea",placeholder:`SQL code for this constraint
e.g., CHECK (price > 0)
CHECK (start_date < end_date)`,default:""}],renderConfig:{shape:"note",sections:[{type:"header",editable:!1},{type:"content",editable:!1}],minWidth:200,minHeight:120,borderStyle:"dashed"}},{id:"er-view",group:"ER Diagram",nodeType:"tableNode",icon:"",label:"View",description:"Database view or materialized view",tags:["view","query","virtual table","materialized","aggregation"],properties:[{key:"componentName",label:"View Name",type:"text",placeholder:"e.g., active_users_view, order_summary_view",default:"View"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe what this view provides",default:""},{key:"viewType",label:"View Type",type:"select",default:"Standard View",options:["Standard View","Materialized View","Indexed View","Updateable View"]},{key:"baseTables",label:"Base Tables",type:"text",placeholder:"Tables this view depends on (comma-separated)",default:""},{key:"tableType",label:"Table Type",type:"select",default:"View",options:["View","Materialized View","Indexed View"]}],data:{attributes:[{id:"attr-1",name:"id",type:"UUID",isPrimaryKey:!1,isNullable:!1},{id:"attr-2",name:"computed_field",type:"VARCHAR(100)",isNullable:!0},{id:"attr-3",name:"aggregate_value",type:"INT",isNullable:!0}]},renderConfig:{shape:"table",sections:[{type:"header",editable:!1},{type:"attributes",editable:!0}],columns:[{key:"isPrimaryKey",label:"PK",width:"w-6",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-yellow-600 dark:text-yellow-400",inactive:"text-gray-400"}},{key:"name",label:"Column Name",width:"flex-1",type:"text",editable:!0,color:{active:"font-semibold"}},{key:"type",label:"Data Type",width:"w-24",type:"text",editable:!0},{key:"isForeignKey",label:"FK",width:"w-6",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-blue-600 dark:text-blue-400",inactive:"text-gray-400"}},{key:"isUnique",label:"UQ",width:"w-6",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-purple-600 dark:text-purple-400",inactive:"text-gray-400"}},{key:"isNullable",label:"NULL",width:"w-8",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-gray-400",inactive:"text-red-600 dark:text-red-400"}},{key:"actions",label:"",width:"w-8",type:"readonly"}],borderStyle:"dashed",borderWidth:1}}];function OV(e){return at({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M216.49,104.49l-80,80a12,12,0,0,1-17,0l-80-80a12,12,0,0,1,17-17L128,159l71.51-71.52a12,12,0,0,1,17,17Z"},child:[]}]})(e)}function LV(e){return at({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M168.49,199.51a12,12,0,0,1-17,17l-80-80a12,12,0,0,1,0-17l80-80a12,12,0,0,1,17,17L97,128Z"},child:[]}]})(e)}function PV(e){return at({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M184.49,136.49l-80,80a12,12,0,0,1-17-17L159,128,87.51,56.49a12,12,0,1,1,17-17l80,80A12,12,0,0,1,184.49,136.49Z"},child:[]}]})(e)}function uhe(e){return at({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M108,60A16,16,0,1,1,92,44,16,16,0,0,1,108,60Zm56,16a16,16,0,1,0-16-16A16,16,0,0,0,164,76ZM92,112a16,16,0,1,0,16,16A16,16,0,0,0,92,112Zm72,0a16,16,0,1,0,16,16A16,16,0,0,0,164,112ZM92,180a16,16,0,1,0,16,16A16,16,0,0,0,92,180Zm72,0a16,16,0,1,0,16,16A16,16,0,0,0,164,180Z"},child:[]}]})(e)}function dhe({components:e,onAdd:t}){const[n,r]=ke.useState(!0),[i,s]=ke.useState(new Set),[o,l]=ke.useState(null),[u,d]=ke.useState(""),h=ke.useMemo(()=>new Ka(Array.from(e),{keys:[{name:"label",weight:.4},{name:"tags",weight:.25},{name:"description",weight:.2},{name:"group",weight:.15}],threshold:.3,includeScore:!0}),[e]),p=ke.useMemo(()=>{const x=u.trim();if(!x)return Array.from(e);const w=h.search(x).map(k=>k.item),C=e.find(k=>k.id==="custom-component"),N=w.some(k=>k.id==="custom-component");return C&&!N&&w.push(C),w},[e,h,u]),m=ke.useMemo(()=>{const x=new Map;for(const S of p){const w=S.group??"Other";x.has(w)||x.set(w,[]),x.get(w).push(S)}return Array.from(x.entries()).sort((S,w)=>S[0].localeCompare(w[0]))},[p]);ke.useEffect(()=>{m.length>0&&i.size===0&&s(new Set(m.map(([x])=>x)))},[m,i.size]);const b=x=>{s(S=>{const w=new Set(S);return w.has(x)?w.delete(x):w.add(x),w})};return y.jsxs("div",{className:"relative z-40",children:[y.jsx("button",{type:"button",onClick:()=>r(x=>!x),"aria-label":n?"Collapse component palette":"Expand component palette","aria-controls":"component-palette-panel",className:"absolute top-5 -right-3 h-6 w-6 flex items-center justify-center rounded-full border border-theme bg-surface text-theme shadow cursor-pointer hover:bg-[var(--bg-hover)] transition-colors z-50",children:n?y.jsx(LV,{size:16}):y.jsx(PV,{size:16})}),y.jsx("div",{className:`relative shrink-0 group h-full flex flex-col bg-surface border-r border-theme overflow-y-auto overflow-x-hidden component-palette transition-[width] duration-300 ease-in-out z-40 ${n?"w-56 p-3 pr-0":"w-6 p-1"}`,"aria-label":"Component palette",id:"component-palette-panel",children:n?y.jsxs(y.Fragment,{children:[y.jsx("h3",{className:"text-lg font-semibold text-theme mb-3",children:"Components"}),y.jsx("div",{className:"mr-3 mb-3",children:y.jsx("input",{type:"text",placeholder:"Search components...",value:u,onChange:x=>d(x.target.value),className:"w-full px-3 py-1.5 text-sm border border-theme rounded bg-[var(--bg)] text-theme placeholder:text-muted focus:outline-none focus:ring-1 focus:ring-[var(--brand)]"})}),y.jsxs("div",{className:"space-y-1 flex-1 overflow-y-auto",children:[m.length===0?y.jsx("div",{className:"text-center py-8 text-muted text-sm",children:"No components found"}):m.map(([x,S])=>{const w=i.has(x);return y.jsxs("div",{children:[y.jsxs("button",{type:"button",onClick:()=>b(x),className:"w-full flex items-center justify-between px-2 py-1.5 text-left hover:bg-[var(--bg-hover)] rounded transition-colors","aria-expanded":w,"aria-controls":`group-${x}`,children:[y.jsx("span",{className:"text-xs font-medium uppercase tracking-wide text-muted",children:x}),y.jsx(OV,{size:12,className:`text-muted transition-transform duration-150 ${w?"rotate-0":"-rotate-90"}`})]}),w&&y.jsx("div",{id:`group-${x}`,className:"mt-1 mb-3 px-1",children:y.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:S.map(C=>y.jsxs("button",{type:"button",draggable:!0,"aria-label":`Add ${C.label} to canvas`,onMouseEnter:N=>{const k=N.currentTarget.getBoundingClientRect();l({label:C.label,description:C.description||"",rect:k})},onMouseLeave:()=>l(null),onDragStart:N=>{l(null),N.dataTransfer?.setData("application/reactflow",JSON.stringify({type:C.id})),N.dataTransfer?.setData("text/plain",C.id),N.dataTransfer&&(N.dataTransfer.effectAllowed="move")},onKeyDown:N=>{(N.key==="Enter"||N.key===" ")&&(N.preventDefault(),t(C.id))},className:"text-left p-2 border border-theme rounded-md cursor-grab select-none hover:border-[var(--brand)] hover:bg-[var(--bg-hover)] transition-all group/item",children:[y.jsx("div",{className:"text-center mb-1",children:y.jsx("span",{className:"text-2xl",children:C.icon})}),y.jsx("div",{className:"text-xs font-medium text-theme text-center group-hover/item:text-[var(--brand)] transition-colors line-clamp-1",children:C.label})]},C.id))})})]},x)}),y.jsxs("div",{className:"mt-4 px-2 py-2.5 rounded text-xs bg-[var(--bg-hover)]",children:[y.jsx("div",{className:"font-medium mb-1 text-theme",children:" Tip"}),y.jsx("div",{className:"text-muted",children:"Drag a component to the canvas to start designing"})]})]})]}):y.jsx("div",{className:"flex-1 flex items-center justify-center h-full",children:y.jsx("span",{className:"sr-only",children:"Component palette collapsed"})})}),o&&qd.createPortal(y.jsxs("div",{className:"fixed px-3 py-2 bg-[var(--bg)] border border-theme rounded shadow-lg text-xs z-[9999] min-w-max max-w-xs pointer-events-none -translate-y-1/2",style:{left:`${o.rect.right+8}px`,top:`${o.rect.top+o.rect.height/2}px`},children:[y.jsx("div",{className:"font-semibold text-theme mb-0.5",children:o.label}),y.jsx("div",{className:"text-muted",children:o.description}),y.jsx("div",{className:"absolute right-full top-1/2 -translate-y-1/2 -mr-1 border-4 border-transparent border-r-[var(--bg)]"})]}),document.body)]})}const fhe=({reactFlowWrapperRef:e,nodes:t,edges:n,nodeTypes:r,edgeTypes:i,onNodesChange:s,onEdgesChange:o,onConnect:l,onDragOver:u,onDrop:d,onNodeDragStop:h,onMouseMove:p,children:m})=>y.jsx("div",{className:"flex-1 relative bg-theme min-h-0",children:y.jsx("section",{className:"w-full h-full",ref:e,onDragOver:u,onDrop:d,"aria-label":"Diagram canvas drop area",children:y.jsxs(Cle,{className:"w-full h-full",nodes:t,edges:n,nodeTypes:r,edgeTypes:i,onNodesChange:s,onEdgesChange:o,onConnect:l,onNodeDragStop:h,onMouseMove:p,connectionMode:Ha.Loose,fitView:!0,proOptions:{hideAttribution:!0},children:[y.jsx(Zle,{nodeStrokeWidth:3}),y.jsx(Ble,{}),y.jsx(Dle,{gap:16}),m]})})}),hhe=({problem:e,activeTab:t,setActiveTab:n,inspectedNodeId:r,setInspectedNodeId:i,propertyElements:s,customPropertyElements:o,onAddCustomProperty:l,handleSave:u,assessmentResult:d,onDetachFromGroup:h,isNodeInGroup:p})=>{const[m,b]=ke.useState(320),x=260,S=640,w=ke.useRef(!1),C=ke.useRef(null),[N,k]=ke.useState(!1),[T,A]=ke.useState(!0),M=ke.useCallback(q=>{if(!w.current)return;const W=Math.min(Math.max(window.innerWidth-q.clientX,x),S);b(W)},[]),j=ke.useCallback(()=>{w.current=!1,document.body.style.userSelect=""},[]),R=q=>{q.preventDefault(),w.current=!0,document.body.style.userSelect="none"};ke.useEffect(()=>(globalThis.addEventListener("mousemove",M),globalThis.addEventListener("mouseup",j),()=>{globalThis.removeEventListener("mousemove",M),globalThis.removeEventListener("mouseup",j)}),[M,j]),ke.useEffect(()=>{C.current&&(C.current.style.width=m+"px")},[m]);const L=e?.id==="free";if(ke.useEffect(()=>{L&&!r&&A(!1)},[L,r]),ke.useEffect(()=>{L&&r&&(n("inspector"),A(!0))},[L,r,n]),!e)return null;const I=async()=>{if(d)try{await navigator.clipboard.writeText(JSON.stringify(d,null,2))}catch{const q=document.createElement("textarea");q.value=JSON.stringify(d,null,2),document.body.appendChild(q),q.select(),document.execCommand("copy"),q.remove()}},H=()=>{if(!d)return;const q=new Blob([JSON.stringify(d,null,2)],{type:"application/json"}),W=URL.createObjectURL(q),z=document.createElement("a");z.href=W,z.download=`assessment-${Date.now()}.json`,document.body.appendChild(z),z.click(),z.remove(),URL.revokeObjectURL(W)};return y.jsxs("div",{className:"relative z-40",children:[y.jsx("button",{type:"button",onClick:()=>A(q=>!q),"aria-label":T?"Collapse inspector panel":"Expand inspector panel","aria-controls":"inspector-panel",className:"absolute top-5 -left-3 h-6 w-6 flex items-center justify-center rounded-full border border-theme bg-surface text-theme shadow cursor-pointer hover:bg-[var(--bg-hover)] transition-colors z-50",children:T?y.jsx(PV,{size:16}):y.jsx(LV,{size:16})}),y.jsx("aside",{ref:C,id:"inspector-panel",className:`bg-surface border-l border-theme flex flex-col h-full relative inspector-resizable transition-[width] duration-300 ease-in-out ${T?"p-4":"w-6 p-1"}`,"data-width":m,style:{width:T?`${m}px`:"24px"},children:T&&y.jsxs(y.Fragment,{children:[y.jsxs("button",{type:"button",onMouseDown:R,"aria-label":"Resize inspector panel",className:"absolute left-0 top-0 h-full w-2 -ml-1 cursor-col-resize flex items-center justify-center group",children:[y.jsx("span",{className:"w-px h-full bg-transparent group-hover:bg-[var(--brand)]/40 transition-colors"}),y.jsx(uhe,{"aria-hidden":!0,className:"absolute py-1 rounded-md bg-[var(--surface)] border border-theme text-[var(--muted)] opacity-90 group-hover:bg-[var(--brand)] group-hover:text-white shadow-sm pointer-events-none transition-colors",size:24})]}),y.jsxs("div",{className:"flex items-center justify-start gap-2",role:"tablist","aria-label":"Sidebar tabs",children:[!L&&y.jsxs("button",{type:"button",role:"tab",className:`flex items-center gap-2 px-3 py-2 rounded-t-md border-b-2 transition-colors ${t==="details"?"border-[var(--brand)] bg-[var(--brand)]/5 text-[var(--brand)]":"border-transparent text-theme hover:bg-[var(--bg-hover)]"}`,onClick:()=>n("details"),children:[y.jsx("span",{className:"text-sm",children:""}),y.jsx("span",{className:"text-sm font-medium",children:"Details"})]}),y.jsxs("button",{type:"button",role:"tab",className:`flex items-center gap-2 px-3 py-2 rounded-t-md border-b-2 transition-colors ${t==="inspector"?"border-[var(--brand)] bg-[var(--brand)]/5 text-[var(--brand)]":"border-transparent text-theme hover:bg-[var(--bg-hover)]"}`,onClick:()=>n("inspector"),children:[y.jsx("span",{className:"text-sm",children:""}),y.jsx("span",{className:"text-sm font-medium",children:"Properties"})]})]}),y.jsx("div",{className:"w-full h-px bg-[var(--muted)]/20 mb-4","aria-hidden":"true"}),y.jsxs("div",{className:"overflow-y-auto component-palette flex-1",children:[t==="details"&&y.jsxs("div",{children:[d&&y.jsxs("div",{className:"mb-4 p-2 border rounded bg-[var(--surface)]",children:[y.jsxs("div",{className:"flex items-center justify-between mb-2",children:[y.jsx("div",{className:"text-sm font-medium text-theme",children:"Assessment"}),y.jsxs("div",{className:"text-sm font-semibold text-theme",children:[d.score,"%"]})]}),y.jsx("div",{className:"text-xs text-muted mb-2",children:d.isValid?"Pass":"Needs work"}),y.jsx("div",{className:"space-y-1 text-xs",children:d.feedback.slice(0,3).map(q=>y.jsx("div",{className:"text-sm text-theme",children:q.message},`${q.category}-${q.type}`))}),y.jsxs("div",{className:"mt-3 flex gap-2",children:[y.jsx("button",{type:"button",onClick:I,className:"px-2 py-1 bg-theme border border-theme rounded text-sm hover:bg-[var(--bg-hover)]",children:"Copy JSON"}),y.jsx("button",{type:"button",onClick:H,className:"px-2 py-1 bg-theme border border-theme rounded text-sm hover:bg-[var(--bg-hover)]",children:"Download JSON"})]}),y.jsxs("div",{className:"mt-3 text-xs",children:[y.jsx("div",{className:"font-medium text-sm mb-1",children:"What went right"}),d.architectureStrengths.length>0?y.jsx("ul",{className:"list-disc list-inside text-xs mb-2",children:d.architectureStrengths.map(q=>y.jsx("li",{children:q},`strength-${q}`))}):y.jsx("div",{className:"text-xs text-muted mb-2",children:"No notable strengths detected."}),y.jsx("div",{className:"font-medium text-sm mb-1",children:"What to improve"}),d.improvements.length>0?y.jsx("ul",{className:"list-disc list-inside text-xs mb-2",children:d.improvements.map(q=>y.jsx("li",{children:q},`imp-${q}`))}):y.jsx("div",{className:"text-xs text-muted mb-2",children:"No specific improvements suggested."}),y.jsx("div",{className:"font-medium text-sm mb-1",children:"Feedback"}),y.jsx("div",{className:"space-y-1",children:d.feedback.map(q=>y.jsxs("div",{className:"text-xs",children:[y.jsx("div",{className:"font-medium",children:q.category.toUpperCase()}),y.jsx("div",{className:"text-muted",children:q.message})]},`${q.category}-${q.type}`))})]})]}),y.jsx("h3",{className:"text-lg font-semibold text-theme mb-3",children:e.title}),y.jsx("p",{className:"text-muted text-sm leading-relaxed mb-4",children:e.description}),y.jsxs("div",{className:"mb-4",children:[y.jsx("h4",{className:"text-sm font-semibold text-theme mb-2",children:"Requirements"}),y.jsx("ul",{className:"space-y-1",children:e.requirements.map(q=>y.jsxs("li",{className:"flex items-start space-x-2",children:[y.jsx("span",{className:"text-green-500 mt-0.5 text-xs",children:""}),y.jsx("span",{className:"text-xs text-muted",children:q})]},q))})]}),y.jsxs("div",{className:"mb-4",children:[y.jsx("h4",{className:"text-sm font-semibold text-theme mb-2",children:"Constraints"}),y.jsx("ul",{className:"space-y-1",children:e.constraints.map(q=>y.jsxs("li",{className:"flex items-start space-x-2",children:[y.jsx("span",{className:"text-yellow-500 mt-0.5 text-xs",children:""}),y.jsx("span",{className:"text-xs text-muted",children:q})]},q))})]}),y.jsxs("div",{className:"mb-4",children:[y.jsxs("button",{type:"button",onClick:()=>k(!N),className:"w-full flex items-center justify-between mb-2 cursor-pointer hover:bg-[var(--bg-hover)] p-2 rounded-md transition-colors","aria-controls":"hints-content",children:[y.jsx("h4",{className:"text-sm font-semibold text-theme",children:" Hints"}),y.jsx(OV,{size:14,className:`text-muted transition-transform duration-150 ${N?"rotate-0":"-rotate-90"}`})]}),N&&y.jsx("div",{id:"hints-content",className:"space-y-2",children:e.hints.map(q=>y.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900 border-l-4 border-yellow-400 dark:border-yellow-600 p-2 rounded-r-lg",children:y.jsx("div",{className:"text-xs text-white",children:q})},q))})]}),y.jsxs("div",{children:[y.jsx("h4",{className:"text-sm font-semibold text-theme mb-2",children:"Tags"}),y.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map(q=>y.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200 text-xs rounded-md",children:q},q))})]})]}),t==="inspector"&&y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-semibold text-theme mb-3",children:"Component Properties"}),!r&&y.jsx("div",{className:"text-sm text-muted",children:"Select a node settings () to view properties."}),r&&y.jsxs("div",{children:[y.jsxs("div",{className:"text-sm text-theme mb-3",children:["Node: ",r]}),s&&y.jsxs("div",{className:"mb-6",children:[y.jsx("div",{className:"text-xs font-semibold text-muted uppercase tracking-wide mb-2",children:"Standard Properties"}),y.jsx("div",{className:"space-y-2",children:s})]}),y.jsxs("div",{className:"mb-4",children:[y.jsxs("div",{className:"flex items-center justify-between mb-2",children:[y.jsx("div",{className:"text-xs font-semibold text-muted uppercase tracking-wide",children:"Custom Properties"}),y.jsxs("button",{type:"button",onClick:l,className:"flex items-center gap-1 px-2 py-1 text-xs font-medium text-[var(--brand)] hover:bg-[var(--brand)]/10 rounded-md transition-colors border border-[var(--brand)]/30 hover:border-[var(--brand)] cursor-pointer",title:"Add custom property",children:[y.jsx(AE,{size:14}),y.jsx("span",{children:"Add"})]})]}),y.jsx("div",{className:"space-y-2",children:o})]}),y.jsxs("div",{className:"mt-6 flex flex-col gap-2 pt-4 border-t border-theme",children:[p&&h&&y.jsxs("button",{type:"button",className:"w-full px-3 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-colors font-medium text-sm cursor-pointer flex items-center justify-center gap-2",onClick:h,title:"Remove this node from its parent group",children:[y.jsx("span",{children:""}),y.jsx("span",{children:"Detach from Group"})]}),y.jsxs("div",{className:"flex space-x-2",children:[y.jsx("button",{type:"button",className:"flex-1 px-3 py-2 bg-[var(--brand)] text-white rounded-md hover:bg-[var(--brand)]/90 transition-colors font-medium text-sm cursor-pointer",onClick:u,children:"Save Changes"}),y.jsx("button",{type:"button",className:"px-3 py-2 bg-theme border border-theme rounded-md hover:bg-[var(--bg-hover)] transition-colors text-sm cursor-pointer",onClick:()=>{i(null),n("details")},children:"Close"})]})]})]})]})]})]})})]})};async function phe(e,t){if(!e)return{isValid:!1,score:0,feedback:[{type:"error",message:"No solution provided.",category:"maintainability"}],suggestions:["Please add components to your design for assessment."],missingComponents:[],architectureStrengths:[],improvements:[]};const n="https://diagrammatic-api-production.up.railway.app";try{const r={components:e.components.map(o=>({id:o.id||`comp-${Date.now()}`,type:o.type,label:o.label,properties:o.properties||{},position:o.position})),connections:e.connections?.map(o=>({id:o.id||`conn-${Date.now()}`,source:o.source,target:o.target,label:o.label,type:o.type}))||[],explanation:e.explanation,keyPoints:e.keyPoints,problem:t?{title:t.title,description:t.description,requirements:Array.isArray(t.requirements)?t.requirements.join(`.
`):t.requirements,constraints:Array.isArray(t.constraints)?t.constraints.join(`.
`):t.constraints,difficulty:t.difficulty,category:t.category,estimatedTime:t.estimated_time}:null};console.log("Calling assessment API:",`${n}/api/v1/assess`),console.log("Request payload:",r);const i=await fetch(`${n}/api/v1/assess`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(r)});if(!i.ok){const o=await i.text();throw new Error(`Assessment API failed: ${i.status} ${i.statusText} - ${o}`)}const s=await i.json();return console.log("Assessment API response:",s),mhe(s)}catch(r){return console.error("AI Assessment failed:",r),{isValid:!1,score:0,feedback:[{type:"error",message:`Assessment service unavailable: ${r instanceof Error?r.message:"Unknown error"}`,category:"maintainability"}],suggestions:["Please ensure the assessment service is running and try again."],missingComponents:[],architectureStrengths:[],improvements:[]}}}function mhe(e){const t=e,n=(t.feedback||[]).map(r=>({type:r.type,message:r.message,category:r.category}));return{isValid:t.is_valid||!1,score:t.overall_score||0,feedback:n,suggestions:t.suggestions||[],missingComponents:t.missing_components||[],architectureStrengths:t.strengths||[],improvements:t.improvements||[]}}function P2(e){return at({attr:{viewBox:"0 0 512 512"},child:[{tag:"rect",attr:{width:"336",height:"336",x:"128",y:"128",fill:"none",strokeLinejoin:"round",strokeWidth:"32",rx:"57",ry:"57"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"m383.5 128 .5-24a56.16 56.16 0 0 0-56-56H112a64.19 64.19 0 0 0-64 64v216a56.16 56.16 0 0 0 56 56h24m168-168v160m80-80H216"},child:[]}]})(e)}const IV=ke.memo(({id:e,data:t,onCopy:n,isInGroup:r})=>{const[i,s]=ke.useState({visible:!1,x:0,y:0}),o=t.componentName||t.label,l=ke.useCallback(b=>{b.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-delete",{detail:{id:e}}))},[e]),u=ke.useCallback(b=>{b.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-toggle",{detail:{id:e}}))},[e]),d=ke.useCallback(b=>{b.stopPropagation(),n?.(e,t)},[e,t,n]),h=ke.useCallback(b=>{b.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-detach",{detail:{id:e}}))},[e]),p=ke.useCallback(b=>{b.preventDefault(),b.stopPropagation(),s({visible:!0,x:b.clientX,y:b.clientY})},[]),m=ke.useCallback(()=>{s({visible:!1,x:0,y:0})},[]);return ke.useEffect(()=>{if(i.visible){const b=x=>{const S=document.querySelector("[data-context-menu]");S&&!S.contains(x.target)&&m()};return document.addEventListener("click",b),document.addEventListener("contextmenu",b),()=>{document.removeEventListener("click",b),document.removeEventListener("contextmenu",b)}}},[i.visible,m]),y.jsxs(y.Fragment,{children:[y.jsxs(xn.fieldset,{initial:{y:0,opacity:1},whileHover:{y:-1,boxShadow:"0 12px 30px rgba(0,0,0,0.12)"},whileTap:{scale:.985},transition:{type:"spring",stiffness:320,damping:28},className:"min-w-[140px] w-full max-w-xs bg-surface border border-theme rounded-lg text-theme text-sm shadow-sm cursor-grab relative",onContextMenu:p,children:[y.jsx("legend",{className:"sr-only",children:o}),y.jsx(vn,{id:"top",type:"source",position:_e.Top,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),y.jsx(vn,{id:"right",type:"source",position:_e.Right,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),y.jsx(vn,{id:"bottom",type:"source",position:_e.Bottom,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),y.jsx(vn,{id:"left",type:"source",position:_e.Left,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),y.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 min-w-0 w-full py-2",children:[y.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-[var(--bg-hover)] flex items-center justify-center text-xl",children:t.icon??""}),y.jsxs("div",{className:"min-w-0 w-full text-center",children:[y.jsx("div",{className:"truncate font-medium text-sm",children:o}),t.subtitle&&y.jsx("div",{className:"text-xs text-muted truncate",children:t.subtitle})]})]})]}),i.visible&&qd.createPortal(y.jsxs(xn.div,{"data-context-menu":!0,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{type:"spring",stiffness:400,damping:25},className:"fixed z-[10000] bg-[var(--surface)] border border-theme rounded-lg shadow-lg py-1 min-w-[140px] pointer-events-auto",style:{left:i.x,top:i.y,transform:"translate(-50%, -10px)"},children:[y.jsxs("button",{type:"button",onClick:b=>{b.stopPropagation(),u(b),m()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm",children:[y.jsx(_m,{className:"w-4 h-4"}),"Settings"]}),r&&y.jsxs("button",{type:"button",onClick:b=>{b.stopPropagation(),h(b),m()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm text-orange-500",children:[y.jsx(jC,{className:"w-4 h-4"}),"Detach from Group"]}),y.jsxs("button",{type:"button",onClick:b=>{b.stopPropagation(),d(b),m()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm",children:[y.jsx(P2,{className:"w-4 h-4"}),"Duplicate"]}),y.jsxs("button",{type:"button",onClick:b=>{b.stopPropagation(),l(b),m()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm text-red-600",children:[y.jsx(ic,{className:"w-4 h-4"}),"Delete"]})]}),document.body)]})});IV.displayName="Node";/*! @license DOMPurify 3.3.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.0/LICENSE */const{entries:BV,setPrototypeOf:U5,isFrozen:ghe,getPrototypeOf:yhe,getOwnPropertyDescriptor:bhe}=Object;let{freeze:pr,seal:pi,create:NC}=Object,{apply:AC,construct:MC}=typeof Reflect<"u"&&Reflect;pr||(pr=function(t){return t});pi||(pi=function(t){return t});AC||(AC=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];return t.apply(n,i)});MC||(MC=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return new t(...r)});const Uh=mr(Array.prototype.forEach),vhe=mr(Array.prototype.lastIndexOf),$5=mr(Array.prototype.pop),Au=mr(Array.prototype.push),xhe=mr(Array.prototype.splice),lp=mr(String.prototype.toLowerCase),QS=mr(String.prototype.toString),eE=mr(String.prototype.match),Mu=mr(String.prototype.replace),whe=mr(String.prototype.indexOf),She=mr(String.prototype.trim),ki=mr(Object.prototype.hasOwnProperty),lr=mr(RegExp.prototype.test),_u=Ehe(TypeError);function mr(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return AC(e,t,r)}}function Ehe(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return MC(e,n)}}function it(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:lp;U5&&U5(e,null);let r=t.length;for(;r--;){let i=t[r];if(typeof i=="string"){const s=n(i);s!==i&&(ghe(t)||(t[r]=s),i=s)}e[i]=!0}return e}function Che(e){for(let t=0;t<e.length;t++)ki(e,t)||(e[t]=null);return e}function Ms(e){const t=NC(null);for(const[n,r]of BV(e))ki(e,n)&&(Array.isArray(r)?t[n]=Che(r):r&&typeof r=="object"&&r.constructor===Object?t[n]=Ms(r):t[n]=r);return t}function Du(e,t){for(;e!==null;){const r=bhe(e,t);if(r){if(r.get)return mr(r.get);if(typeof r.value=="function")return mr(r.value)}e=yhe(e)}function n(){return null}return n}const G5=pr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),tE=pr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),nE=pr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),khe=pr(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),rE=pr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),The=pr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),W5=pr(["#text"]),K5=pr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),iE=pr(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Y5=pr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),$h=pr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Nhe=pi(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Ahe=pi(/<%[\w\W]*|[\w\W]*%>/gm),Mhe=pi(/\$\{[\w\W]*/gm),_he=pi(/^data-[\-\w.\u00B7-\uFFFF]+$/),Dhe=pi(/^aria-[\-\w]+$/),zV=pi(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Rhe=pi(/^(?:\w+script|data):/i),jhe=pi(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),qV=pi(/^html$/i),Ohe=pi(/^[a-z][.\w]*(-[.\w]+)+$/i);var X5=Object.freeze({__proto__:null,ARIA_ATTR:Dhe,ATTR_WHITESPACE:jhe,CUSTOM_ELEMENT:Ohe,DATA_ATTR:_he,DOCTYPE_NAME:qV,ERB_EXPR:Ahe,IS_ALLOWED_URI:zV,IS_SCRIPT_OR_DATA:Rhe,MUSTACHE_EXPR:Nhe,TMPLIT_EXPR:Mhe});const Ru={element:1,text:3,progressingInstruction:7,comment:8,document:9},Lhe=function(){return typeof window>"u"?null:window},Phe=function(t,n){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";n&&n.hasAttribute(i)&&(r=n.getAttribute(i));const s="dompurify"+(r?"#"+r:"");try{return t.createPolicy(s,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}},Z5=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function VV(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Lhe();const t=je=>VV(je);if(t.version="3.3.0",t.removed=[],!e||!e.document||e.document.nodeType!==Ru.document||!e.Element)return t.isSupported=!1,t;let{document:n}=e;const r=n,i=r.currentScript,{DocumentFragment:s,HTMLTemplateElement:o,Node:l,Element:u,NodeFilter:d,NamedNodeMap:h=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:p,DOMParser:m,trustedTypes:b}=e,x=u.prototype,S=Du(x,"cloneNode"),w=Du(x,"remove"),C=Du(x,"nextSibling"),N=Du(x,"childNodes"),k=Du(x,"parentNode");if(typeof o=="function"){const je=n.createElement("template");je.content&&je.content.ownerDocument&&(n=je.content.ownerDocument)}let T,A="";const{implementation:M,createNodeIterator:j,createDocumentFragment:R,getElementsByTagName:L}=n,{importNode:I}=r;let H=Z5();t.isSupported=typeof BV=="function"&&typeof k=="function"&&M&&M.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:q,ERB_EXPR:W,TMPLIT_EXPR:z,DATA_ATTR:F,ARIA_ATTR:O,IS_SCRIPT_OR_DATA:V,ATTR_WHITESPACE:Y,CUSTOM_ELEMENT:te}=X5;let{IS_ALLOWED_URI:B}=X5,$=null;const oe=it({},[...G5,...tE,...nE,...rE,...W5]);let ae=null;const U=it({},[...K5,...iE,...Y5,...$h]);let Z=Object.seal(NC(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ee=null,de=null;const ce=Object.seal(NC(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let ve=!0,De=!0,Pe=!1,Ae=!0,Ee=!1,Se=!0,Te=!1,ot=!1,Oe=!1,Mt=!1,Wt=!1,Dn=!1,rn=!0,_t=!1;const mt="user-content-";let Rn=!0,sn=!1,zt={},ht=null;const qe=it({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let Ve=null;const Mr=it({},["audio","video","img","source","image","track"]);let Rt=null;const Kt=it({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Yt="http://www.w3.org/1998/Math/MathML",on="http://www.w3.org/2000/svg",Xt="http://www.w3.org/1999/xhtml";let kn=Xt,Tn=!1,_r=null;const yi=it({},[Yt,on,Xt],QS);let gr=it({},["mi","mo","mn","ms","mtext"]),Kr=it({},["annotation-xml"]);const yr=it({},["title","style","font","a","script"]);let bi=null;const Fs=["application/xhtml+xml","text/html"],Yr="text/html";let vt=null,sr=null;const Us=n.createElement("form"),Oi=function(X){return X instanceof RegExp||X instanceof Function},Yn=function(){let X=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(sr&&sr===X)){if((!X||typeof X!="object")&&(X={}),X=Ms(X),bi=Fs.indexOf(X.PARSER_MEDIA_TYPE)===-1?Yr:X.PARSER_MEDIA_TYPE,vt=bi==="application/xhtml+xml"?QS:lp,$=ki(X,"ALLOWED_TAGS")?it({},X.ALLOWED_TAGS,vt):oe,ae=ki(X,"ALLOWED_ATTR")?it({},X.ALLOWED_ATTR,vt):U,_r=ki(X,"ALLOWED_NAMESPACES")?it({},X.ALLOWED_NAMESPACES,QS):yi,Rt=ki(X,"ADD_URI_SAFE_ATTR")?it(Ms(Kt),X.ADD_URI_SAFE_ATTR,vt):Kt,Ve=ki(X,"ADD_DATA_URI_TAGS")?it(Ms(Mr),X.ADD_DATA_URI_TAGS,vt):Mr,ht=ki(X,"FORBID_CONTENTS")?it({},X.FORBID_CONTENTS,vt):qe,ee=ki(X,"FORBID_TAGS")?it({},X.FORBID_TAGS,vt):Ms({}),de=ki(X,"FORBID_ATTR")?it({},X.FORBID_ATTR,vt):Ms({}),zt=ki(X,"USE_PROFILES")?X.USE_PROFILES:!1,ve=X.ALLOW_ARIA_ATTR!==!1,De=X.ALLOW_DATA_ATTR!==!1,Pe=X.ALLOW_UNKNOWN_PROTOCOLS||!1,Ae=X.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Ee=X.SAFE_FOR_TEMPLATES||!1,Se=X.SAFE_FOR_XML!==!1,Te=X.WHOLE_DOCUMENT||!1,Mt=X.RETURN_DOM||!1,Wt=X.RETURN_DOM_FRAGMENT||!1,Dn=X.RETURN_TRUSTED_TYPE||!1,Oe=X.FORCE_BODY||!1,rn=X.SANITIZE_DOM!==!1,_t=X.SANITIZE_NAMED_PROPS||!1,Rn=X.KEEP_CONTENT!==!1,sn=X.IN_PLACE||!1,B=X.ALLOWED_URI_REGEXP||zV,kn=X.NAMESPACE||Xt,gr=X.MATHML_TEXT_INTEGRATION_POINTS||gr,Kr=X.HTML_INTEGRATION_POINTS||Kr,Z=X.CUSTOM_ELEMENT_HANDLING||{},X.CUSTOM_ELEMENT_HANDLING&&Oi(X.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Z.tagNameCheck=X.CUSTOM_ELEMENT_HANDLING.tagNameCheck),X.CUSTOM_ELEMENT_HANDLING&&Oi(X.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Z.attributeNameCheck=X.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),X.CUSTOM_ELEMENT_HANDLING&&typeof X.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Z.allowCustomizedBuiltInElements=X.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Ee&&(De=!1),Wt&&(Mt=!0),zt&&($=it({},W5),ae=[],zt.html===!0&&(it($,G5),it(ae,K5)),zt.svg===!0&&(it($,tE),it(ae,iE),it(ae,$h)),zt.svgFilters===!0&&(it($,nE),it(ae,iE),it(ae,$h)),zt.mathMl===!0&&(it($,rE),it(ae,Y5),it(ae,$h))),X.ADD_TAGS&&(typeof X.ADD_TAGS=="function"?ce.tagCheck=X.ADD_TAGS:($===oe&&($=Ms($)),it($,X.ADD_TAGS,vt))),X.ADD_ATTR&&(typeof X.ADD_ATTR=="function"?ce.attributeCheck=X.ADD_ATTR:(ae===U&&(ae=Ms(ae)),it(ae,X.ADD_ATTR,vt))),X.ADD_URI_SAFE_ATTR&&it(Rt,X.ADD_URI_SAFE_ATTR,vt),X.FORBID_CONTENTS&&(ht===qe&&(ht=Ms(ht)),it(ht,X.FORBID_CONTENTS,vt)),Rn&&($["#text"]=!0),Te&&it($,["html","head","body"]),$.table&&(it($,["tbody"]),delete ee.tbody),X.TRUSTED_TYPES_POLICY){if(typeof X.TRUSTED_TYPES_POLICY.createHTML!="function")throw _u('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof X.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw _u('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');T=X.TRUSTED_TYPES_POLICY,A=T.createHTML("")}else T===void 0&&(T=Phe(b,i)),T!==null&&typeof A=="string"&&(A=T.createHTML(""));pr&&pr(X),sr=X}},qt=it({},[...tE,...nE,...khe]),an=it({},[...rE,...The]),Xr=function(X){let ge=k(X);(!ge||!ge.tagName)&&(ge={namespaceURI:kn,tagName:"template"});const Me=lp(X.tagName),ut=lp(ge.tagName);return _r[X.namespaceURI]?X.namespaceURI===on?ge.namespaceURI===Xt?Me==="svg":ge.namespaceURI===Yt?Me==="svg"&&(ut==="annotation-xml"||gr[ut]):!!qt[Me]:X.namespaceURI===Yt?ge.namespaceURI===Xt?Me==="math":ge.namespaceURI===on?Me==="math"&&Kr[ut]:!!an[Me]:X.namespaceURI===Xt?ge.namespaceURI===on&&!Kr[ut]||ge.namespaceURI===Yt&&!gr[ut]?!1:!an[Me]&&(yr[Me]||!qt[Me]):!!(bi==="application/xhtml+xml"&&_r[X.namespaceURI]):!1},Ie=function(X){Au(t.removed,{element:X});try{k(X).removeChild(X)}catch{w(X)}},Xn=function(X,ge){try{Au(t.removed,{attribute:ge.getAttributeNode(X),from:ge})}catch{Au(t.removed,{attribute:null,from:ge})}if(ge.removeAttribute(X),X==="is")if(Mt||Wt)try{Ie(ge)}catch{}else try{ge.setAttribute(X,"")}catch{}},Li=function(X){let ge=null,Me=null;if(Oe)X="<remove></remove>"+X;else{const Nt=eE(X,/^[\r\n\t ]+/);Me=Nt&&Nt[0]}bi==="application/xhtml+xml"&&kn===Xt&&(X='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+X+"</body></html>");const ut=T?T.createHTML(X):X;if(kn===Xt)try{ge=new m().parseFromString(ut,bi)}catch{}if(!ge||!ge.documentElement){ge=M.createDocument(kn,"template",null);try{ge.documentElement.innerHTML=Tn?A:ut}catch{}}const Tt=ge.body||ge.documentElement;return X&&Me&&Tt.insertBefore(n.createTextNode(Me),Tt.childNodes[0]||null),kn===Xt?L.call(ge,Te?"html":"body")[0]:Te?ge.documentElement:Tt},Pi=function(X){return j.call(X.ownerDocument||X,X,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null)},or=function(X){return X instanceof p&&(typeof X.nodeName!="string"||typeof X.textContent!="string"||typeof X.removeChild!="function"||!(X.attributes instanceof h)||typeof X.removeAttribute!="function"||typeof X.setAttribute!="function"||typeof X.namespaceURI!="string"||typeof X.insertBefore!="function"||typeof X.hasChildNodes!="function")},Dr=function(X){return typeof l=="function"&&X instanceof l};function fn(je,X,ge){Uh(je,Me=>{Me.call(t,X,ge,sr)})}const jn=function(X){let ge=null;if(fn(H.beforeSanitizeElements,X,null),or(X))return Ie(X),!0;const Me=vt(X.nodeName);if(fn(H.uponSanitizeElement,X,{tagName:Me,allowedTags:$}),Se&&X.hasChildNodes()&&!Dr(X.firstElementChild)&&lr(/<[/\w!]/g,X.innerHTML)&&lr(/<[/\w!]/g,X.textContent)||X.nodeType===Ru.progressingInstruction||Se&&X.nodeType===Ru.comment&&lr(/<[/\w]/g,X.data))return Ie(X),!0;if(!(ce.tagCheck instanceof Function&&ce.tagCheck(Me))&&(!$[Me]||ee[Me])){if(!ee[Me]&&Zn(Me)&&(Z.tagNameCheck instanceof RegExp&&lr(Z.tagNameCheck,Me)||Z.tagNameCheck instanceof Function&&Z.tagNameCheck(Me)))return!1;if(Rn&&!ht[Me]){const ut=k(X)||X.parentNode,Tt=N(X)||X.childNodes;if(Tt&&ut){const Nt=Tt.length;for(let Vt=Nt-1;Vt>=0;--Vt){const Nn=S(Tt[Vt],!0);Nn.__removalCount=(X.__removalCount||0)+1,ut.insertBefore(Nn,C(X))}}}return Ie(X),!0}return X instanceof u&&!Xr(X)||(Me==="noscript"||Me==="noembed"||Me==="noframes")&&lr(/<\/no(script|embed|frames)/i,X.innerHTML)?(Ie(X),!0):(Ee&&X.nodeType===Ru.text&&(ge=X.textContent,Uh([q,W,z],ut=>{ge=Mu(ge,ut," ")}),X.textContent!==ge&&(Au(t.removed,{element:X.cloneNode()}),X.textContent=ge)),fn(H.afterSanitizeElements,X,null),!1)},Rr=function(X,ge,Me){if(rn&&(ge==="id"||ge==="name")&&(Me in n||Me in Us))return!1;if(!(De&&!de[ge]&&lr(F,ge))){if(!(ve&&lr(O,ge))){if(!(ce.attributeCheck instanceof Function&&ce.attributeCheck(ge,X))){if(!ae[ge]||de[ge]){if(!(Zn(X)&&(Z.tagNameCheck instanceof RegExp&&lr(Z.tagNameCheck,X)||Z.tagNameCheck instanceof Function&&Z.tagNameCheck(X))&&(Z.attributeNameCheck instanceof RegExp&&lr(Z.attributeNameCheck,ge)||Z.attributeNameCheck instanceof Function&&Z.attributeNameCheck(ge,X))||ge==="is"&&Z.allowCustomizedBuiltInElements&&(Z.tagNameCheck instanceof RegExp&&lr(Z.tagNameCheck,Me)||Z.tagNameCheck instanceof Function&&Z.tagNameCheck(Me))))return!1}else if(!Rt[ge]){if(!lr(B,Mu(Me,Y,""))){if(!((ge==="src"||ge==="xlink:href"||ge==="href")&&X!=="script"&&whe(Me,"data:")===0&&Ve[X])){if(!(Pe&&!lr(V,Mu(Me,Y,"")))){if(Me)return!1}}}}}}}return!0},Zn=function(X){return X!=="annotation-xml"&&eE(X,te)},Et=function(X){fn(H.beforeSanitizeAttributes,X,null);const{attributes:ge}=X;if(!ge||or(X))return;const Me={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ae,forceKeepAttr:void 0};let ut=ge.length;for(;ut--;){const Tt=ge[ut],{name:Nt,namespaceURI:Vt,value:Nn}=Tt,hn=vt(Nt),vi=Nn;let jt=Nt==="value"?vi:She(vi);if(Me.attrName=hn,Me.attrValue=jt,Me.keepAttr=!0,Me.forceKeepAttr=void 0,fn(H.uponSanitizeAttribute,X,Me),jt=Me.attrValue,_t&&(hn==="id"||hn==="name")&&(Xn(Nt,X),jt=mt+jt),Se&&lr(/((--!?|])>)|<\/(style|title|textarea)/i,jt)){Xn(Nt,X);continue}if(hn==="attributename"&&eE(jt,"href")){Xn(Nt,X);continue}if(Me.forceKeepAttr)continue;if(!Me.keepAttr){Xn(Nt,X);continue}if(!Ae&&lr(/\/>/i,jt)){Xn(Nt,X);continue}Ee&&Uh([q,W,z],Ii=>{jt=Mu(jt,Ii," ")});const br=vt(X.nodeName);if(!Rr(br,hn,jt)){Xn(Nt,X);continue}if(T&&typeof b=="object"&&typeof b.getAttributeType=="function"&&!Vt)switch(b.getAttributeType(br,hn)){case"TrustedHTML":{jt=T.createHTML(jt);break}case"TrustedScriptURL":{jt=T.createScriptURL(jt);break}}if(jt!==vi)try{Vt?X.setAttributeNS(Vt,Nt,jt):X.setAttribute(Nt,jt),or(X)?Ie(X):$5(t.removed)}catch{Xn(Nt,X)}}fn(H.afterSanitizeAttributes,X,null)},ss=function je(X){let ge=null;const Me=Pi(X);for(fn(H.beforeSanitizeShadowDOM,X,null);ge=Me.nextNode();)fn(H.uponSanitizeShadowNode,ge,null),jn(ge),Et(ge),ge.content instanceof s&&je(ge.content);fn(H.afterSanitizeShadowDOM,X,null)};return t.sanitize=function(je){let X=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ge=null,Me=null,ut=null,Tt=null;if(Tn=!je,Tn&&(je="<!-->"),typeof je!="string"&&!Dr(je))if(typeof je.toString=="function"){if(je=je.toString(),typeof je!="string")throw _u("dirty is not a string, aborting")}else throw _u("toString is not a function");if(!t.isSupported)return je;if(ot||Yn(X),t.removed=[],typeof je=="string"&&(sn=!1),sn){if(je.nodeName){const Nn=vt(je.nodeName);if(!$[Nn]||ee[Nn])throw _u("root node is forbidden and cannot be sanitized in-place")}}else if(je instanceof l)ge=Li("<!---->"),Me=ge.ownerDocument.importNode(je,!0),Me.nodeType===Ru.element&&Me.nodeName==="BODY"||Me.nodeName==="HTML"?ge=Me:ge.appendChild(Me);else{if(!Mt&&!Ee&&!Te&&je.indexOf("<")===-1)return T&&Dn?T.createHTML(je):je;if(ge=Li(je),!ge)return Mt?null:Dn?A:""}ge&&Oe&&Ie(ge.firstChild);const Nt=Pi(sn?je:ge);for(;ut=Nt.nextNode();)jn(ut),Et(ut),ut.content instanceof s&&ss(ut.content);if(sn)return je;if(Mt){if(Wt)for(Tt=R.call(ge.ownerDocument);ge.firstChild;)Tt.appendChild(ge.firstChild);else Tt=ge;return(ae.shadowroot||ae.shadowrootmode)&&(Tt=I.call(r,Tt,!0)),Tt}let Vt=Te?ge.outerHTML:ge.innerHTML;return Te&&$["!doctype"]&&ge.ownerDocument&&ge.ownerDocument.doctype&&ge.ownerDocument.doctype.name&&lr(qV,ge.ownerDocument.doctype.name)&&(Vt="<!DOCTYPE "+ge.ownerDocument.doctype.name+`>
`+Vt),Ee&&Uh([q,W,z],Nn=>{Vt=Mu(Vt,Nn," ")}),T&&Dn?T.createHTML(Vt):Vt},t.setConfig=function(){let je=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Yn(je),ot=!0},t.clearConfig=function(){sr=null,ot=!1},t.isValidAttribute=function(je,X,ge){sr||Yn({});const Me=vt(je),ut=vt(X);return Rr(Me,ut,ge)},t.addHook=function(je,X){typeof X=="function"&&Au(H[je],X)},t.removeHook=function(je,X){if(X!==void 0){const ge=vhe(H[je],X);return ge===-1?void 0:xhe(H[je],ge,1)[0]}return $5(H[je])},t.removeHooks=function(je){H[je]=[]},t.removeAllHooks=function(){H=Z5()},t}var J5=VV();const HV=ke.memo(({id:e,data:t,onCopy:n,isInGroup:r})=>{const[i,s]=ke.useState({visible:!1,x:0,y:0}),o=t.componentName||t.label,l=t.nodeType||"entity",u=ke.useCallback(k=>{k.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-delete",{detail:{id:e}}))},[e]),d=ke.useCallback(k=>{k.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-toggle",{detail:{id:e}}))},[e]),h=ke.useCallback(k=>{k.stopPropagation(),n?.(e,t)},[e,t,n]),p=ke.useCallback(k=>{k.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-detach",{detail:{id:e}}))},[e]),m=ke.useCallback(k=>{k.preventDefault(),k.stopPropagation(),s({visible:!0,x:k.clientX,y:k.clientY})},[]),b=ke.useCallback(()=>{s({visible:!1,x:0,y:0})},[]);ke.useEffect(()=>{if(i.visible){const k=T=>{const A=document.querySelector("[data-context-menu]");A&&!A.contains(T.target)&&b()};return document.addEventListener("click",k),document.addEventListener("contextmenu",k),()=>{document.removeEventListener("click",k),document.removeEventListener("contextmenu",k)}}},[i.visible,b]);const x=t.attributes?t.attributes.split(`
`).filter(k=>k.trim()):[],w=(()=>{switch(l){case"weak-entity":return{border:"3px double var(--theme-color, #333)",borderRadius:"0.5rem",minWidth:"200px",maxWidth:"400px",maxHeight:"500px"};case"er-note":return{borderRadius:"0.25rem",minWidth:"180px",maxWidth:"400px",maxHeight:"300px",backgroundColor:"var(--note-bg, #fef3c7)",borderLeft:"4px solid var(--warning, #f59e0b)"};case"er-trigger":return{borderRadius:"0.5rem",minWidth:"200px",maxWidth:"400px",maxHeight:"300px",backgroundColor:"var(--accent-bg, #fef3e7)",borderLeft:"4px solid var(--accent, #f59e0b)"};case"er-view":return{borderRadius:"0.5rem",minWidth:"200px",maxWidth:"400px",maxHeight:"500px",borderStyle:"dashed",borderWidth:"2px"};default:return{borderRadius:"0.5rem",minWidth:"200px",maxWidth:"400px",maxHeight:"500px"}}})(),C=l==="er-note",N=l==="er-trigger";return y.jsxs(y.Fragment,{children:[y.jsxs(xn.div,{initial:{y:0,opacity:1},whileHover:{y:-1,boxShadow:"0 12px 30px rgba(0,0,0,0.12)"},whileTap:{scale:.985},transition:{type:"spring",stiffness:320,damping:28},className:`bg-surface border-2 border-theme text-sm shadow-sm cursor-grab relative overflow-auto er-node-scroll ${C?"bg-yellow-50 dark:bg-yellow-900/20 text-gray-900 dark:text-gray-100":""} ${N?"bg-orange-50 dark:bg-orange-900/20 text-gray-900 dark:text-gray-100":"text-theme"}`,style:w,onContextMenu:m,children:[y.jsx(vn,{id:"top",type:"source",position:_e.Top,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),y.jsx(vn,{id:"right",type:"source",position:_e.Right,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),y.jsx(vn,{id:"bottom",type:"source",position:_e.Bottom,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),y.jsx(vn,{id:"left",type:"source",position:_e.Left,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),!C&&!N&&y.jsxs("div",{className:"bg-[var(--brand)] text-white px-3 py-2 font-semibold text-center flex items-center justify-center gap-2",children:[t.icon&&y.jsx("span",{className:"text-lg",children:t.icon}),y.jsx("span",{children:o})]}),C&&y.jsxs("div",{className:"px-3 py-2",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.icon&&y.jsx("span",{className:"text-lg",children:t.icon}),y.jsx("span",{className:"font-semibold text-gray-700",children:o})]}),t.description&&y.jsx("div",{className:"text-xs text-gray-700 mt-1",dangerouslySetInnerHTML:{__html:J5.sanitize(t.description)}})]}),N&&y.jsxs("div",{className:"px-3 py-2",children:[y.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.icon&&y.jsx("span",{className:"text-lg",children:t.icon}),y.jsx("span",{className:"font-semibold text-gray-700",children:o})]}),y.jsxs("div",{className:"text-xs space-y-1 mt-2",children:[t.timing&&t.event&&y.jsxs("div",{className:"font-mono text-[11px] text-orange-700",children:[t.timing," ",t.event]}),t.targetTable&&y.jsxs("div",{className:"text-gray-700",children:["ON ",y.jsx("span",{className:"font-semibold text-gray-700",children:t.targetTable})]}),t.level&&y.jsxs("div",{className:"text-gray-600 text-[10px]",children:["FOR EACH ",t.level]}),t.description&&y.jsx("div",{className:"text-gray-700 mt-1 pt-1 border-t border-gray-300",dangerouslySetInnerHTML:{__html:J5.sanitize(t.description)}})]})]}),(l==="entity"||l==="weak-entity")&&x.length>0&&y.jsx("div",{className:"px-3 py-2 border-t border-theme/20",children:y.jsx("div",{className:"space-y-1 text-xs",children:x.map((k,T)=>{const A=t.primaryKey&&k.includes(t.primaryKey),M=t.foreignKeys&&t.foreignKeys.split(`
`).some(j=>k.includes(j));return y.jsx("div",{className:`font-mono ${A?"font-bold text-yellow-600 dark:text-yellow-400":M?"text-blue-600 dark:text-blue-400":""}`,children:k.trim().startsWith("+")?y.jsxs("span",{className:"text-yellow-600 dark:text-yellow-400",children:[" ",k.trim().substring(1).trim()]}):k.trim()},T)})})})]}),i.visible&&qd.createPortal(y.jsxs(xn.div,{"data-context-menu":!0,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{type:"spring",stiffness:400,damping:25},className:"fixed z-[10000] bg-[var(--surface)] border border-theme rounded-lg shadow-lg py-1 min-w-[140px] pointer-events-auto",style:{left:i.x,top:i.y,transform:"translate(-50%, -10px)"},children:[y.jsxs("button",{type:"button",onClick:k=>{k.stopPropagation(),d(k),b()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm",children:[y.jsx(_m,{className:"w-4 h-4"}),"Settings"]}),r&&y.jsxs("button",{type:"button",onClick:k=>{k.stopPropagation(),p(k),b()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm text-orange-500",children:[y.jsx(jC,{className:"w-4 h-4"}),"Detach from Group"]}),y.jsxs("button",{type:"button",onClick:k=>{k.stopPropagation(),h(k),b()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm",children:[y.jsx(P2,{className:"w-4 h-4"}),"Duplicate"]}),y.jsxs("button",{type:"button",onClick:k=>{k.stopPropagation(),u(k),b()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm text-red-600",children:[y.jsx(ic,{className:"w-4 h-4"}),"Delete"]})]}),document.body)]})});HV.displayName="ERNode";const FV=ke.memo(({id:e,data:t,onCopy:n,isInGroup:r})=>{const[i,s]=D.useState({visible:!1,x:0,y:0}),[o,l]=D.useState(null),[u,d]=D.useState({name:"",type:""}),h=t.componentName||t.label,p=ke.useMemo(()=>{if(!t.attributes)return[];if(Array.isArray(t.attributes))return t.attributes;if(typeof t.attributes=="string")try{const I=JSON.parse(t.attributes);return Array.isArray(I)?I:[]}catch{return[]}return[]},[t.attributes]),m=ke.useMemo(()=>t.renderConfig?.columns&&t.renderConfig.columns.length>0?t.renderConfig.columns:[{key:"pk",label:"PK",width:"w-6"},{key:"name",label:"Column Name",width:"flex-1"},{key:"type",label:"Data Type",width:"w-24"},{key:"actions",label:"",width:"w-8"}],[t.renderConfig]),b=D.useCallback(I=>{I.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-delete",{detail:{id:e}}))},[e]),x=D.useCallback(I=>{I.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-toggle",{detail:{id:e}}))},[e]),S=D.useCallback(I=>{I.stopPropagation(),n?.(e,t)},[e,t,n]),w=D.useCallback(I=>{I.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-detach",{detail:{id:e}}))},[e]),C=D.useCallback(I=>{I.preventDefault(),I.stopPropagation(),s({visible:!0,x:I.clientX,y:I.clientY})},[]),N=D.useCallback(()=>{s({visible:!1,x:0,y:0})},[]),k=D.useCallback(I=>{I.stopPropagation();const H={id:`attr-${Date.now()}`,name:"newColumn",type:"VARCHAR(255)",isNullable:!0};globalThis.dispatchEvent(new CustomEvent("diagram:table-attribute-add",{detail:{nodeId:e,attribute:H}}))},[e]),T=D.useCallback(I=>{globalThis.dispatchEvent(new CustomEvent("diagram:table-attribute-delete",{detail:{nodeId:e,attributeId:I}}))},[e]),A=D.useCallback((I,H)=>{H.stopPropagation(),l(I.id),d({name:I.name,type:I.type})},[]),M=D.useCallback(()=>{o&&(globalThis.dispatchEvent(new CustomEvent("diagram:table-attribute-update",{detail:{nodeId:e,attributeId:o,name:u.name,type:u.type}})),l(null))},[e,o,u]),j=D.useCallback(()=>{l(null)},[]),R=D.useCallback((I,H)=>{globalThis.dispatchEvent(new CustomEvent("diagram:table-attribute-toggle",{detail:{nodeId:e,attributeId:I,key:H}}))},[e]),L=D.useCallback((I,H,q)=>{const W=I.width||"flex-1",z=H[I.key];if(I.type==="boolean"){const F=!!z,V=I.key==="isNullable"?!F:F,Y=V?I.icon?.active:I.icon?.inactive,te=V?I.color?.active:I.color?.inactive;return y.jsx("button",{type:"button",onClick:()=>R(H.id,I.key),className:`${W} flex items-center justify-center ${te||""}`,title:I.label,children:Y?y.jsx("span",{className:"text-xs",children:Y}):y.jsx("div",{className:"w-3 h-3 border border-theme/40 rounded"})},I.key)}if(I.type==="text"&&I.editable){if(q)return y.jsx("input",{type:"text",value:String(u[I.key]||z||""),onChange:O=>d({...u,[I.key]:O.target.value}),onKeyDown:O=>{O.key==="Enter"&&M(),O.key==="Escape"&&j()},className:`${W} px-1 py-0.5 bg-surface border border-theme/40 rounded text-xs`,autoFocus:I.key==="name",onClick:O=>O.stopPropagation()},I.key);let F="text-xs cursor-pointer";return I.key==="name"?H.isPrimaryKey?F+=" font-semibold text-yellow-600 dark:text-yellow-400":H.isForeignKey&&(F+=" text-blue-600 dark:text-blue-400"):I.key==="type"&&(F+=" text-muted"),y.jsx("span",{className:`${W} truncate ${F}`,onDoubleClick:O=>A(H,O),title:"Double-click to edit",role:"button",tabIndex:0,children:String(z||"")},I.key)}return I.type==="readonly"&&I.key==="actions"?q?y.jsx("button",{type:"button",onClick:M,className:`${W} text-green-600 hover:text-green-700 text-xs`,title:"Save",children:""},"actions"):y.jsx("button",{type:"button",onClick:()=>T(H.id),className:`${W} opacity-0 group-hover:opacity-100 text-red-600 hover:text-red-700 transition-opacity`,title:"Delete attribute",children:y.jsx(ic,{className:"w-3 h-3"})},"actions"):y.jsx("span",{className:W,children:String(z||"")},I.key)},[R,T,A,M,j,u]);return ke.useEffect(()=>{if(i.visible){const I=H=>{const q=document.querySelector("[data-context-menu]");q&&!q.contains(H.target)&&N()};return document.addEventListener("click",I),document.addEventListener("contextmenu",I),()=>{document.removeEventListener("click",I),document.removeEventListener("contextmenu",I)}}},[i.visible,N]),y.jsxs(y.Fragment,{children:[y.jsxs(xn.div,{initial:{y:0,opacity:1},whileHover:{y:-1,boxShadow:"0 12px 30px rgba(0,0,0,0.12)"},whileTap:{scale:.985},transition:{type:"spring",stiffness:320,damping:28},className:"min-w-[220px] bg-surface border-2 border-theme text-theme text-sm shadow-lg cursor-grab relative rounded-lg overflow-hidden",onContextMenu:C,children:[y.jsx(vn,{id:"top",type:"source",position:_e.Top,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),y.jsx(vn,{id:"right",type:"source",position:_e.Right,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),y.jsx(vn,{id:"bottom",type:"source",position:_e.Bottom,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),y.jsx(vn,{id:"left",type:"source",position:_e.Left,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),y.jsxs("div",{className:"bg-[var(--brand)] text-white px-3 py-2 font-semibold flex items-center justify-between",children:[y.jsxs("div",{className:"flex items-center gap-2",children:[t.icon&&y.jsx("span",{className:"text-lg",children:t.icon}),y.jsx("span",{children:h})]}),y.jsx("button",{type:"button",onClick:k,className:"p-1 hover:bg-white/20 rounded transition-colors",title:"Add attribute",children:y.jsx(AE,{className:"w-4 h-4"})})]}),y.jsx("div",{className:"bg-[var(--bg-hover)] px-3 py-1 border-b border-theme/20 flex items-center gap-2 text-xs font-semibold",children:m.map(I=>y.jsx("span",{className:I.width||"flex-1",style:{textAlign:I.align||"left"},children:I.label},I.key))}),y.jsx("div",{className:"divide-y divide-theme/10",children:p.map(I=>{const H=o===I.id;return y.jsx("div",{className:"flex items-center gap-2 px-3 py-2 hover:bg-[var(--bg-hover)] group",children:m.map(q=>L(q,I,H))},I.id)})}),p.length===0&&y.jsx("div",{className:"px-3 py-4 text-center text-xs text-muted",children:"Click + to add attributes"})]}),i.visible&&qd.createPortal(y.jsxs(xn.div,{"data-context-menu":!0,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{type:"spring",stiffness:400,damping:25},className:"fixed z-[10000] bg-[var(--surface)] border border-theme rounded-lg shadow-lg py-1 min-w-[140px] pointer-events-auto",style:{left:i.x,top:i.y,transform:"translate(-50%, -10px)"},children:[y.jsxs("button",{type:"button",onClick:I=>{I.stopPropagation(),x(I),N()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm",children:[y.jsx(_m,{className:"w-4 h-4"}),"Settings"]}),y.jsxs("button",{type:"button",onClick:I=>{I.stopPropagation(),k(I),N()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm",children:[y.jsx(AE,{className:"w-4 h-4"}),"Add Attribute"]}),r&&y.jsxs("button",{type:"button",onClick:I=>{I.stopPropagation(),w(I),N()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm text-orange-500",children:[y.jsx(jC,{className:"w-4 h-4"}),"Detach from Group"]}),y.jsxs("button",{type:"button",onClick:I=>{I.stopPropagation(),S(I),N()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm",children:[y.jsx(P2,{className:"w-4 h-4"}),"Duplicate"]}),y.jsxs("button",{type:"button",onClick:I=>{I.stopPropagation(),b(I),N()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm text-red-600",children:[y.jsx(ic,{className:"w-4 h-4"}),"Delete"]})]}),document.body)]})});FV.displayName="TableNode";const Ihe=({sourceX:e,sourceY:t,targetX:n,targetY:r},i)=>{const s=(e+n)/2,o=(t+r)/2;return`M ${e} ${t} Q ${s} ${o+i} ${n} ${r}`},Bhe=(e,t)=>{const{sourceX:n,sourceY:r,targetX:i,targetY:s}=e;if(t){const d=n<i?25:-25,h=Ihe({sourceX:n,sourceY:r,targetX:i,targetY:s},d),p=(n+i)/2,m=(r+s)/2,b=p,x=m+d/2;return{edgePath:h,centerX:b,centerY:x}}const[o]=rg(e),[l,u]=ig({sourceX:n,sourceY:r,targetX:i,targetY:s});return{edgePath:o,centerX:l,centerY:u}},zhe=e=>{const{id:t,source:n,target:r,sourceX:i,sourceY:s,targetX:o,targetY:l,sourcePosition:u,targetPosition:d,data:h,selected:p,markerEnd:m}=e,[b,x]=D.useState(!1),[S,w]=D.useState(h?.label??""),[C,N]=D.useState(h?.hasLabel??!1),k=D.useRef(null),T=st(W=>{const z=W.edges.some(F=>F.id!==t&&F.source===r&&F.target===n);return z&&console.log(`Bi-directional edge detected: ${t} (${n} -> ${r})`),z}),A={sourceX:i,sourceY:s,sourcePosition:u,targetX:o,targetY:l,targetPosition:d},{edgePath:M,centerX:j,centerY:R}=Bhe(A,T),L=W=>{W.stopPropagation(),x(!0),setTimeout(()=>k.current?.focus(),0)},I=W=>{W.stopPropagation(),N(!0),x(!0),setTimeout(()=>k.current?.focus(),0)},H=W=>{W.stopPropagation(),N(!1),w(""),window.dispatchEvent(new CustomEvent("diagram:edge-label-change",{detail:{id:t,label:"",hasLabel:!1}}))},q=()=>{x(!1),window.dispatchEvent(new CustomEvent("diagram:edge-label-change",{detail:{id:t,label:S,hasLabel:C||S.trim().length>0}}))};return y.jsxs("g",{className:"react-flow__edge",children:[y.jsx("defs",{children:y.jsx("marker",{id:`arrow-${t}`,viewBox:"0 0 10 10",refX:"8",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto",children:y.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"var(--brand)"})})}),y.jsx("path",{id:t,d:M,fill:"none",stroke:p?"var(--brand)":"var(--muted)",strokeWidth:p?3:2,markerEnd:m||`url(#arrow-${t})`,className:"transition-colors"}),y.jsx("foreignObject",{x:j-75,y:R-12,width:150,height:24,className:"overflow-visible",children:y.jsx("div",{className:"flex items-center justify-center w-full h-full pointer-events-auto",children:C?y.jsx("div",{className:"flex items-center gap-1",children:b?y.jsx("input",{ref:k,value:S,onChange:W=>w(W.target.value),onBlur:q,onKeyDown:W=>{W.key==="Enter"&&q(),W.key==="Escape"&&(x(!1),w(h?.label??""))},className:"text-xs border rounded px-2 py-1 bg-[var(--surface)] text-theme w-24 text-center focus:outline-none focus:ring-1 focus:ring-[var(--brand)]",placeholder:"Label..."}):y.jsxs(y.Fragment,{children:[y.jsx("button",{onDoubleClick:L,className:`text-xs px-2 py-1 rounded cursor-text bg-[var(--surface)] text-theme border text-center min-w-[60px] hover:bg-[var(--bg-hover)] ${p?"ring-1 ring-[var(--brand)]":"border-theme"}`,title:"Double-click to edit",type:"button",children:S||"Label"}),p&&y.jsx("button",{onClick:H,className:"text-xs px-1 py-1 rounded bg-red-100 text-red-700 hover:bg-red-200 dark:bg-red-900 dark:text-red-200",title:"Remove label",children:""})]})}):p&&y.jsx("button",{onClick:I,className:"text-xs px-2 py-1 rounded bg-[var(--surface)] border border-dashed border-[var(--brand)] text-[var(--brand)] hover:bg-[var(--bg-hover)]",title:"Add label",children:"+ Label"})})})]})},qhe=({sourceX:e,sourceY:t,targetX:n,targetY:r},i)=>{const s=(e+n)/2,o=(t+r)/2;return`M ${e} ${t} Q ${s} ${o+i} ${n} ${r}`},Vhe=(e,t)=>{const{sourceX:n,sourceY:r,targetX:i,targetY:s}=e;if(t){const d=n<i?25:-25,h=qhe({sourceX:n,sourceY:r,targetX:i,targetY:s},d),p=(n+i)/2,m=(r+s)/2,b=p,x=m+d/2;return{edgePath:h,centerX:b,centerY:x}}const[o]=rg(e),[l,u]=ig({sourceX:n,sourceY:r,targetX:i,targetY:s});return{edgePath:o,centerX:l,centerY:u}},Hhe=e=>{switch(e){case"one-to-one":case"one-to-many":case"zero-to-one":case"one-mandatory-many-optional":case"one-or-many":return"one";case"many-to-one":case"many-to-many":case"mandatory-many-to-many":case"optional-many-to-many":return"many";case"mandatory-one-to-one":case"mandatory-one-to-many":return"mandatory-one";case"optional-zero-to-one":case"optional-zero-to-many":case"zero-to-many":return"optional-zero";case"recursive-one-to-one":return"one";case"recursive-one-to-many":return"one";case"recursive-many-to-many":return"many";default:return"one"}},Fhe=e=>{switch(e){case"one-to-one":case"many-to-one":case"zero-to-one":return"one";case"one-to-many":case"many-to-many":case"zero-to-many":case"one-mandatory-many-optional":case"one-or-many":return"many";case"mandatory-one-to-one":return"mandatory-one";case"mandatory-one-to-many":case"mandatory-many-to-many":return"mandatory-many";case"optional-zero-to-one":return"optional-one";case"optional-zero-to-many":case"optional-many-to-many":return"optional-many";case"recursive-one-to-one":return"one";case"recursive-one-to-many":return"many";case"recursive-many-to-many":return"many";default:return"many"}},Uhe=e=>{const{id:t,source:n,target:r,sourceX:i,sourceY:s,targetX:o,targetY:l,sourcePosition:u,targetPosition:d,data:h,selected:p}=e,m=h||{},[b,x]=D.useState(!1),[S,w]=D.useState(m.label??""),[C,N]=D.useState(m.hasLabel??!1),[k,T]=D.useState(m.cardinality??"one-to-many"),A=D.useRef(null),M=st(Y=>Y.edges.some(B=>B.id!==t&&B.source===r&&B.target===n)),j={sourceX:i,sourceY:s,sourcePosition:u,targetX:o,targetY:l,targetPosition:d},{edgePath:R,centerX:L,centerY:I}=Vhe(j,M),H=Y=>{Y.stopPropagation(),x(!0),setTimeout(()=>A.current?.focus(),0)},q=Y=>{Y.stopPropagation(),N(!0),x(!0),setTimeout(()=>A.current?.focus(),0)},W=Y=>{Y.stopPropagation(),N(!1),w(""),globalThis.dispatchEvent(new CustomEvent("diagram:edge-label-change",{detail:{id:t,label:"",hasLabel:!1}}))},z=()=>{x(!1),globalThis.dispatchEvent(new CustomEvent("diagram:edge-label-change",{detail:{id:t,label:S,hasLabel:C||S.trim().length>0}}))},F=Y=>{T(Y),globalThis.dispatchEvent(new CustomEvent("diagram:edge-cardinality-change",{detail:{id:t,cardinality:Y}}))},O=Hhe(k),V=Fhe(k);return y.jsxs("g",{className:"react-flow__edge",children:[y.jsxs("defs",{children:[y.jsx("marker",{id:`er-one-${t}`,viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"8",markerHeight:"8",orient:"auto",children:y.jsx("line",{x1:"0",y1:"0",x2:"0",y2:"10",stroke:"var(--brand)",strokeWidth:"2"})}),y.jsxs("marker",{id:`er-many-${t}`,viewBox:"0 0 20 20",refX:"18",refY:"10",markerWidth:"12",markerHeight:"12",orient:"auto",children:[y.jsx("line",{x1:"0",y1:"10",x2:"15",y2:"10",stroke:"var(--brand)",strokeWidth:"2"}),y.jsx("line",{x1:"15",y1:"10",x2:"20",y2:"5",stroke:"var(--brand)",strokeWidth:"2"}),y.jsx("line",{x1:"15",y1:"10",x2:"20",y2:"15",stroke:"var(--brand)",strokeWidth:"2"})]}),y.jsxs("marker",{id:`er-mandatory-one-${t}`,viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"8",markerHeight:"8",orient:"auto",children:[y.jsx("line",{x1:"0",y1:"0",x2:"0",y2:"10",stroke:"var(--brand)",strokeWidth:"2"}),y.jsx("line",{x1:"3",y1:"0",x2:"3",y2:"10",stroke:"var(--brand)",strokeWidth:"2"})]}),y.jsxs("marker",{id:`er-mandatory-many-${t}`,viewBox:"0 0 20 20",refX:"18",refY:"10",markerWidth:"12",markerHeight:"12",orient:"auto",children:[y.jsx("line",{x1:"0",y1:"10",x2:"12",y2:"10",stroke:"var(--brand)",strokeWidth:"2"}),y.jsx("line",{x1:"3",y1:"8",x2:"3",y2:"12",stroke:"var(--brand)",strokeWidth:"2"}),y.jsx("line",{x1:"12",y1:"10",x2:"20",y2:"5",stroke:"var(--brand)",strokeWidth:"2"}),y.jsx("line",{x1:"12",y1:"10",x2:"20",y2:"15",stroke:"var(--brand)",strokeWidth:"2"})]}),y.jsx("marker",{id:`er-optional-zero-${t}`,viewBox:"0 0 12 12",refX:"10",refY:"6",markerWidth:"10",markerHeight:"10",orient:"auto",children:y.jsx("circle",{cx:"6",cy:"6",r:"3",fill:"none",stroke:"var(--brand)",strokeWidth:"2"})}),y.jsxs("marker",{id:`er-optional-one-${t}`,viewBox:"0 0 15 12",refX:"14",refY:"6",markerWidth:"12",markerHeight:"10",orient:"auto",children:[y.jsx("circle",{cx:"4",cy:"6",r:"3",fill:"none",stroke:"var(--brand)",strokeWidth:"1.5"}),y.jsx("line",{x1:"10",y1:"0",x2:"10",y2:"12",stroke:"var(--brand)",strokeWidth:"2"})]}),y.jsxs("marker",{id:`er-optional-many-${t}`,viewBox:"0 0 25 20",refX:"23",refY:"10",markerWidth:"14",markerHeight:"12",orient:"auto",children:[y.jsx("circle",{cx:"4",cy:"10",r:"3",fill:"none",stroke:"var(--brand)",strokeWidth:"1.5"}),y.jsx("line",{x1:"10",y1:"10",x2:"18",y2:"10",stroke:"var(--brand)",strokeWidth:"2"}),y.jsx("line",{x1:"18",y1:"10",x2:"25",y2:"5",stroke:"var(--brand)",strokeWidth:"2"}),y.jsx("line",{x1:"18",y1:"10",x2:"25",y2:"15",stroke:"var(--brand)",strokeWidth:"2"})]}),y.jsx("marker",{id:`er-one-source-${t}`,viewBox:"0 0 10 10",refX:"1",refY:"5",markerWidth:"8",markerHeight:"8",orient:"auto",children:y.jsx("line",{x1:"10",y1:"0",x2:"10",y2:"10",stroke:"var(--brand)",strokeWidth:"2"})}),y.jsxs("marker",{id:`er-many-source-${t}`,viewBox:"0 0 20 20",refX:"2",refY:"10",markerWidth:"12",markerHeight:"12",orient:"auto",children:[y.jsx("line",{x1:"20",y1:"10",x2:"5",y2:"10",stroke:"var(--brand)",strokeWidth:"2"}),y.jsx("line",{x1:"5",y1:"10",x2:"0",y2:"5",stroke:"var(--brand)",strokeWidth:"2"}),y.jsx("line",{x1:"5",y1:"10",x2:"0",y2:"15",stroke:"var(--brand)",strokeWidth:"2"})]}),y.jsxs("marker",{id:`er-mandatory-one-source-${t}`,viewBox:"0 0 10 10",refX:"1",refY:"5",markerWidth:"8",markerHeight:"8",orient:"auto",children:[y.jsx("line",{x1:"10",y1:"0",x2:"10",y2:"10",stroke:"var(--brand)",strokeWidth:"2"}),y.jsx("line",{x1:"7",y1:"0",x2:"7",y2:"10",stroke:"var(--brand)",strokeWidth:"2"})]}),y.jsx("marker",{id:`er-optional-zero-source-${t}`,viewBox:"0 0 12 12",refX:"2",refY:"6",markerWidth:"10",markerHeight:"10",orient:"auto",children:y.jsx("circle",{cx:"6",cy:"6",r:"3",fill:"none",stroke:"var(--brand)",strokeWidth:"2"})})]}),y.jsx("path",{id:t,d:R,fill:"none",stroke:p?"var(--brand)":"var(--muted)",strokeWidth:p?3:2,markerEnd:`url(#er-${V}-${t})`,markerStart:`url(#er-${O}-source-${t})`,className:"transition-colors"}),y.jsx("foreignObject",{x:L-100,y:I-40,width:200,height:80,className:"overflow-visible",children:y.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-full pointer-events-auto gap-2",children:[C?y.jsx("div",{className:"flex items-center gap-1",children:b?y.jsx("input",{ref:A,value:S,onChange:Y=>w(Y.target.value),onBlur:z,onKeyDown:Y=>{Y.key==="Enter"&&z(),Y.key==="Escape"&&(x(!1),w(m.label??""))},className:"text-xs border rounded px-2 py-1 bg-[var(--surface)] text-theme w-24 text-center focus:outline-none focus:ring-1 focus:ring-[var(--brand)]",placeholder:"Label..."}):y.jsxs(y.Fragment,{children:[y.jsx("button",{onDoubleClick:H,className:`text-xs px-2 py-1 rounded cursor-text bg-[var(--surface)] text-theme border text-center min-w-[60px] hover:bg-[var(--bg-hover)] ${p?"ring-1 ring-[var(--brand)]":"border-theme"}`,title:"Double-click to edit",type:"button",children:S||"Label"}),p&&y.jsx("button",{onClick:W,className:"text-xs px-1 py-1 rounded bg-red-100 text-red-700 hover:bg-red-200 dark:bg-red-900 dark:text-red-200",title:"Remove label",type:"button",children:""})]})}):p&&y.jsx("button",{onClick:q,className:"text-xs px-2 py-1 rounded bg-[var(--surface)] border border-dashed border-[var(--brand)] text-[var(--brand)] hover:bg-[var(--bg-hover)]",title:"Add label",type:"button",children:"+ Label"}),p&&y.jsx("div",{className:"flex items-center gap-1 bg-[var(--surface)] border border-[var(--brand)] rounded px-2 py-1",children:y.jsxs("select",{value:k,onChange:Y=>F(Y.target.value),className:"text-xs bg-transparent text-theme focus:outline-none cursor-pointer",onClick:Y=>Y.stopPropagation(),children:[y.jsxs("optgroup",{label:" Basic Cardinality ",children:[y.jsx("option",{value:"one-to-one",children:"1:1 (One to One)"}),y.jsx("option",{value:"one-to-many",children:"1:N (One to Many)"}),y.jsx("option",{value:"many-to-one",children:"N:1 (Many to One)"}),y.jsx("option",{value:"many-to-many",children:"N:M (Many to Many)"})]}),y.jsxs("optgroup",{label:" Mandatory (Must Participate) ",children:[y.jsx("option",{value:"mandatory-one-to-one",children:"1:1 Mandatory (Both must exist)"}),y.jsx("option",{value:"mandatory-one-to-many",children:"1:N Mandatory (Both must exist)"}),y.jsx("option",{value:"mandatory-many-to-many",children:"M:N Mandatory (Both must exist)"})]}),y.jsxs("optgroup",{label:" Optional (May Participate) ",children:[y.jsx("option",{value:"optional-zero-to-one",children:"0:1 Optional (Zero or One)"}),y.jsx("option",{value:"optional-zero-to-many",children:"0:N Optional (Zero or Many)"}),y.jsx("option",{value:"optional-many-to-many",children:"0:M to 0:N Optional (Both optional)"})]}),y.jsxs("optgroup",{label:" Mixed Participation ",children:[y.jsx("option",{value:"one-mandatory-many-optional",children:"1 to 0..N (One mandatory, many optional)"}),y.jsx("option",{value:"zero-to-one",children:"0..1 (Zero or One)"}),y.jsx("option",{value:"zero-to-many",children:"0..N (Zero or Many)"}),y.jsx("option",{value:"one-or-many",children:"1..N (One or Many - at least one)"})]}),y.jsxs("optgroup",{label:" Recursive (Self-Referencing) ",children:[y.jsx("option",{value:"recursive-one-to-one",children:"Self 1:1 (Recursive One-to-One)"}),y.jsx("option",{value:"recursive-one-to-many",children:"Self 1:N (Recursive One-to-Many)"}),y.jsx("option",{value:"recursive-many-to-many",children:"Self M:N (Recursive Many-to-Many)"})]})]})})]})})]})},$he=({id:e,data:t})=>{const n=t.backgroundColor||"rgba(100, 100, 255, 0.05)",r=t.borderColor||"rgba(100, 100, 255, 0.3)",i=ke.useCallback(o=>{o.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-delete",{detail:{id:e}}))},[e]),s=ke.useCallback(o=>{o.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-toggle",{detail:{id:e}}))},[e]);return y.jsxs("div",{className:"group-node",style:{padding:"20px",borderRadius:"12px",border:`2px dashed ${r}`,backgroundColor:n,minWidth:"300px",minHeight:"200px",height:"100%",position:"relative"},children:[y.jsx(tce,{minWidth:300,minHeight:200,isVisible:!0,lineStyle:{borderColor:r,borderWidth:2,borderStyle:"dashed"},handleStyle:{width:8,height:8,borderRadius:"2px",backgroundColor:"var(--surface)",border:`2px solid ${r}`,boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}}),y.jsxs("div",{className:"absolute -top-3 right-2 flex items-center z-10 bg-[var(--surface)]/90 border border-theme rounded-full shadow-sm",children:[y.jsx(xn.button,{type:"button","aria-label":"Settings",onClick:s,className:"p-1 rounded-full hover:bg-[var(--bg-hover)] transition-colors flex items-center justify-center",title:"Group Settings",whileHover:{scale:1.1,y:-1,rotate:90},whileTap:{scale:.95},transition:{type:"spring",stiffness:400,damping:25},children:y.jsx(_m,{className:"w-3 h-3"})}),y.jsx(xn.button,{type:"button","aria-label":"Delete Group",onClick:i,className:"p-1 text-red-600 rounded-full hover:bg-[var(--bg-hover)] transition-colors flex items-center justify-center",title:"Delete Group",whileHover:{scale:1.15,y:-2,rotate:5},whileTap:{scale:.9},transition:{type:"spring",stiffness:400,damping:25},children:y.jsx(ic,{className:"w-3 h-3"})})]}),y.jsxs("div",{className:"group-header",style:{position:"absolute",top:"-12px",left:"10px",padding:"4px 12px",borderRadius:"6px",backgroundColor:"var(--surface)",border:`1px solid ${r}`,display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",fontWeight:"600",color:"var(--theme)",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[t.icon&&y.jsx("span",{children:t.icon}),y.jsx("span",{children:t.label})]}),t.subtitle&&y.jsx("div",{style:{marginTop:"8px",fontSize:"12px",color:"var(--muted)",fontStyle:"italic"},children:t.subtitle}),y.jsx(vn,{id:"top",type:"source",position:_e.Top,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),y.jsx(vn,{id:"right",type:"source",position:_e.Right,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),y.jsx(vn,{id:"bottom",type:"source",position:_e.Bottom,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),y.jsx(vn,{id:"left",type:"source",position:_e.Left,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}})]})},Ghe=({property:e,onUpdate:t,onDelete:n,isNew:r=!1})=>{const[i,s]=D.useState(r),o=d=>{t(e.id,{value:d})},l=(d,h)=>{t(e.id,{[d]:h})},u=[{value:"text",label:"Text"},{value:"textarea",label:"Text Area"},{value:"number",label:"Number"},{value:"boolean",label:"Checkbox"}];return y.jsxs("div",{className:"border border-theme rounded-lg overflow-hidden bg-[var(--bg-hover)]/30",children:[y.jsxs("div",{className:"flex items-center justify-between p-2 bg-[var(--bg-hover)]/50",children:[y.jsxs("button",{type:"button",onClick:()=>s(!i),className:"flex items-center gap-2 flex-1 text-left hover:text-[var(--brand)] transition-colors",children:[i?y.jsx(aK,{size:18}):y.jsx(YI,{size:18}),y.jsx("span",{className:"text-sm font-medium text-theme truncate",children:e.label||"Unnamed Property"})]}),y.jsx("button",{type:"button",onClick:()=>n(e.id),className:"p-1 hover:bg-red-500/10 hover:text-red-500 rounded transition-colors",title:"Delete custom property",children:y.jsx(ic,{size:16})})]}),i&&y.jsxs("div",{className:"p-3 space-y-3 border-t border-theme",children:[y.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[y.jsx(np,{id:`${e.id}-key`,label:"Key",value:e.key,onChange:d=>l("key",d),placeholder:"e.g., customField"}),y.jsx(np,{id:`${e.id}-label`,label:"Label",value:e.label,onChange:d=>l("label",d),placeholder:"e.g., Custom Field"})]}),y.jsx(Iz,{id:`${e.id}-type`,label:"Type",value:e.type,options:u.map(d=>d.value),onChange:d=>{l("type",d),d==="boolean"?l("value",!1):d==="number"?l("value",0):l("value","")}}),y.jsxs("div",{className:"border-t border-theme pt-3",children:[y.jsx("div",{className:"text-xs font-semibold text-muted uppercase tracking-wide mb-2",children:"Current Value"}),e.type==="text"&&y.jsx(np,{id:`${e.id}-value`,label:"",value:String(e.value),onChange:o,placeholder:"Enter value"}),e.type==="textarea"&&y.jsx(om,{id:`${e.id}-value`,label:"",value:String(e.value),onChange:o,placeholder:"Enter value"}),e.type==="number"&&y.jsx(Pz,{id:`${e.id}-value`,label:"",value:Number(e.value)||0,onChange:d=>o(d)}),e.type==="boolean"&&y.jsx("div",{className:"pt-1",children:y.jsx(Lz,{id:`${e.id}-value`,checked:!!e.value,onChange:o,label:"Enabled"})})]})]})]})},Whe=()=>{const[e,t]=D.useState([]),n=D.useCallback((u,d="info",h)=>{const m={id:`toast-${Date.now()}-${Math.random()}`,message:u,type:d,duration:h};t(b=>[...b,m])},[]),r=D.useCallback(u=>{t(d=>d.filter(h=>h.id!==u))},[]),i=D.useCallback((u,d)=>{n(u,"success",d)},[n]),s=D.useCallback((u,d)=>{n(u,"error",d)},[n]),o=D.useCallback((u,d)=>{n(u,"warning",d)},[n]),l=D.useCallback((u,d)=>{n(u,"info",d)},[n]);return{toasts:e,showToast:n,removeToast:r,success:i,error:s,warning:o,info:l}},Khe=({toast:e,onClose:t})=>{D.useEffect(()=>{const i=setTimeout(()=>{t(e.id)},e.duration||5e3);return()=>clearTimeout(i)},[e.id,e.duration,t]);const n=()=>{switch(e.type){case"success":return"bg-green-500 text-white";case"error":return"bg-red-500 text-white";case"warning":return"bg-yellow-500 text-white";case"info":return"bg-blue-500 text-white";default:return"bg-gray-500 text-white"}},r=()=>{switch(e.type){case"success":return y.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})});case"error":return y.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})});case"warning":return y.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})});case"info":return y.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}};return y.jsxs(xn.div,{initial:{opacity:0,y:-50,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.95},className:`${n()} rounded-lg shadow-lg p-4 flex items-center gap-3 min-w-[300px] max-w-md`,children:[y.jsx("div",{className:"flex-shrink-0",children:r()}),y.jsx("div",{className:"flex-1 text-sm font-medium",children:e.message}),y.jsx("button",{type:"button",onClick:()=>t(e.id),className:"flex-shrink-0 hover:bg-white/20 rounded p-1 transition-colors","aria-label":"Close notification",title:"Close",children:y.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},Yhe=({toasts:e,onClose:t})=>y.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-3 pointer-events-none",children:y.jsx(Tm,{children:e.map(n=>y.jsx("div",{className:"pointer-events-auto",children:y.jsx(Khe,{toast:n,onClose:t})},n.id))})}),Xhe=({url:e,enabled:t=!0,onMessage:n,onOpen:r,onClose:i,onError:s,reconnect:o=!0,reconnectInterval:l=1e3,maxReconnectAttempts:u=5})=>{const d=D.useRef(null),h=D.useRef(null),p=D.useRef(0),m=D.useRef(!0),b=D.useRef(null),[x,S]=D.useState(!1),[w,C]=D.useState(!1),[N,k]=D.useState(0),T=D.useCallback(()=>{h.current&&(clearTimeout(h.current),h.current=null)},[]),A=D.useCallback(()=>{m.current=!1,T(),d.current&&(d.current.close(),d.current=null),S(!1),C(!1),p.current=0,k(0)},[T]),M=D.useCallback(()=>{if(!(d.current?.readyState===WebSocket.OPEN||d.current?.readyState===WebSocket.CONNECTING))try{C(!0),d.current=new WebSocket(e),d.current.onopen=()=>{console.log("WebSocket connected"),S(!0),C(!1),p.current=0,k(0),r?.()},d.current.onmessage=L=>{try{const I=JSON.parse(L.data);n?.(I)}catch(I){console.error("Failed to parse WebSocket message:",I)}},d.current.onclose=L=>{console.log("WebSocket disconnected",L.code,L.reason),S(!1),C(!1),d.current=null,i?.(),m.current&&o&&b.current&&b.current()},d.current.onerror=L=>{console.error("WebSocket error:",L),s?.(L)}}catch(L){console.error("Failed to create WebSocket connection:",L),C(!1),m.current&&o&&b.current&&b.current()}},[e,n,r,i,s,o]),j=D.useCallback(()=>{if(!o||!m.current)return;if(p.current>=u){console.error("Max reconnection attempts reached"),C(!1);return}T();const L=l*Math.pow(2,p.current),I=Math.random()*1e3,H=Math.min(L+I,3e4);console.log(`Reconnecting in ${Math.round(H/1e3)}s... (attempt ${p.current+1}/${u})`),h.current=setTimeout(()=>{p.current++,k(p.current),M()},H)},[o,l,u,T,M]);D.useEffect(()=>{b.current=j},[j]);const R=D.useCallback(L=>{if(d.current?.readyState===WebSocket.OPEN)try{d.current.send(JSON.stringify(L))}catch(I){console.error("Failed to send WebSocket message:",I)}else console.warn("WebSocket is not connected. Message not sent:",L)},[]);return D.useEffect(()=>{if(t)return m.current=!0,M(),()=>{m.current=!1,A()}},[M,A,t]),{sendMessage:R,disconnect:A,connect:M,isConnected:x,isConnecting:w,reconnectAttempts:N}},Zhe=e=>e.startsWith("https://")?e.replace("https://","wss://"):e.startsWith("http://")?e.replace("http://","ws://"):`ws://${e}`,Jhe=Zhe("https://diagrammatic-api-production.up.railway.app"),Qhe=({diagramId:e,token:t,enabled:n,onDiagramUpdate:r,onUserJoined:i,onUserLeft:s,onError:o})=>{const[l,u]=D.useState([]),[d,h]=D.useState([]),p=D.useRef(null),m=D.useRef(0),b=D.useRef(null),x=`${Jhe}/api/v1/diagrams/${e}/collaborate?token=${t}`,S=D.useCallback(I=>{const H=I.type?.trim();switch(H){case"welcome":{const q=I.user;p.current=q.id,console.log("Welcome message received:",q.name);break}case"user_joined":{const q=I.user;u(W=>W.some(z=>z.id===q.id)?W:[...W,q]),i?.(q);break}case"user_left":{const q=I.user;u(W=>W.filter(z=>z.id!==q.id)),h(W=>W.filter(z=>z.userId!==q.id)),s?.(q);break}case"diagram_update":{const q=I.user,W=I.data;if(q.id===p.current)return;const z=Date.now();if(z-m.current<100)return;m.current=z,r?.(W,q.id);break}case"cursor_move":case"cursor_update":{const q=I.user,W=I.position,z=I.timestamp;if(q.id===p.current)return;h(F=>{const O=F.findIndex(Y=>Y.userId===q.id),V={userId:q.id,user:q,position:W,timestamp:z};if(O>=0){const Y=[...F];return Y[O]=V,Y}return[...F,V]});break}case"pong":break;case"error":{const q=I.message||"Unknown error";console.error("WebSocket error:",q),o?.(q);break}default:console.warn("Unknown WebSocket message type:",H)}},[r,i,s,o]),w=D.useCallback(()=>{console.log("Collaboration WebSocket connected")},[]),C=D.useCallback(()=>{console.log("Collaboration WebSocket disconnected"),u([]),h([])},[]),N=D.useCallback(I=>{console.error("Collaboration WebSocket error:",I),o?.("Connection error. Retrying...")},[o]),{sendMessage:k,disconnect:T,isConnected:A,isConnecting:M,reconnectAttempts:j}=Xhe({url:x,enabled:n,onMessage:S,onOpen:w,onClose:C,onError:N,reconnect:!0,reconnectInterval:1e3,maxReconnectAttempts:5}),R=D.useCallback(I=>{!n||!A||(b.current&&clearTimeout(b.current),b.current=setTimeout(()=>{k({type:"diagram_update",data:I,timestamp:new Date().toISOString()})},300))},[n,A,k]),L=D.useCallback(I=>{!n||!A||k({type:"cursor_move",position:I,timestamp:new Date().toISOString()})},[n,A,k]);return D.useEffect(()=>()=>{b.current&&clearTimeout(b.current)},[]),D.useEffect(()=>{if(!A||!n)return;const I=setInterval(()=>{k({type:"ping",timestamp:new Date().toISOString()})},3e4);return()=>clearInterval(I)},[A,n,k]),{sendDiagramUpdate:R,sendCursorPosition:L,collaborators:l,cursors:d,isConnected:A,isConnecting:M,reconnectAttempts:j,disconnect:T}},_C=e=>{const t=["#10b981","#3b82f6","#8b5cf6","#f59e0b","#ef4444","#ec4899","#06b6d4","#6366f1"];let n=0;for(let r=0;r<e.length;r++)n=e.charCodeAt(r)+((n<<5)-n);return t[Math.abs(n)%t.length]},epe=({isConnected:e,isConnecting:t,reconnectAttempts:n,collaborators:r,showCollaborators:i=!0})=>{const[s,o]=ke.useState(!1),l=t||!e,u=i&&r.length>0;if(!l&&!u)return null;const d=()=>t?n>0?`Reconnecting... (${n})`:"Connecting...":"Connection lost",h=()=>t?y.jsx(uK,{className:"h-4 w-4 animate-spin"}):y.jsx(dK,{className:"h-4 w-4"}),p=()=>t?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400";return y.jsxs("div",{className:"flex items-center gap-2",children:[l&&y.jsxs("div",{className:"relative",onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[y.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-lg bg-surface border border-theme/10 ${p()} transition-colors`,children:[h(),y.jsx("span",{className:"text-xs font-medium",children:d()})]}),y.jsx(Tm,{children:s&&y.jsx(xn.div,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},exit:{opacity:0,y:5},className:"absolute top-full left-0 mt-2 p-2 bg-surface border border-theme/10 rounded-lg shadow-lg z-50 min-w-[200px]",children:y.jsxs("div",{className:"text-xs text-theme",children:[y.jsx("div",{className:"font-semibold mb-1",children:"Connection Status"}),y.jsx("div",{className:"text-muted",children:t?"Establishing connection...":"Collaboration unavailable"})]})})})]}),u&&y.jsxs("div",{className:"flex items-center gap-1 px-3 py-1.5 rounded-lg bg-surface border border-theme/10",children:[y.jsx(fK,{className:"h-4 w-4 text-theme"}),y.jsxs("div",{className:"flex -space-x-2",children:[r.slice(0,3).map(m=>y.jsx("div",{className:"relative group","data-tooltip":m.name,children:m.pictureUrl?y.jsx("img",{src:m.pictureUrl,alt:m.name,className:"w-6 h-6 rounded-full border-2 border-surface",style:{borderColor:_C(m.id)}}):y.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-surface flex items-center justify-center text-xs font-bold text-white",style:{backgroundColor:_C(m.id)},children:m.name.charAt(0).toUpperCase()})},m.id)),r.length>3&&y.jsxs("div",{className:"w-6 h-6 rounded-full bg-theme/10 border-2 border-surface flex items-center justify-center text-xs font-bold text-theme",children:["+",r.length-3]})]})]})]})},tpe=({name:e,color:t,position:n,pictureUrl:r})=>y.jsxs(xn.div,{className:"pointer-events-none absolute z-50",style:{left:n.x,top:n.y},initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},transition:{duration:.2},children:[y.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.2))"},children:y.jsx("path",{d:"M5.5 3.21V20.79L10.29 16L14 21.5L15.5 20.5L11.79 15L18.5 14L5.5 3.21Z",fill:t,stroke:"white",strokeWidth:"1.5",strokeLinejoin:"round"})}),y.jsxs("div",{className:"ml-6 -mt-2 px-2 py-1 rounded-md text-xs font-medium text-white whitespace-nowrap shadow-lg flex items-center gap-1.5",style:{backgroundColor:t},children:[r&&y.jsx("img",{src:r,alt:e,className:"w-4 h-4 rounded-full border border-white/50"}),y.jsx("span",{children:e})]})]}),npe=(e,t,n,r)=>{const i={version:"1.0",metadata:{title:n,description:r,createdAt:new Date().toISOString(),exportedAt:new Date().toISOString()},nodes:e,edges:t};return JSON.stringify(i,null,2)},rpe=(e,t,n,r)=>{const i=l=>l.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&apos;"),s=()=>"rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;";let o=`<?xml version="1.0" encoding="UTF-8"?>
`;o+='<mxfile host="Diagrammatic" modified="'+new Date().toISOString()+`" agent="Diagrammatic" version="1.0" type="device">
`,o+='  <diagram id="diagram1" name="'+i(n)+`">
`,o+=`    <mxGraphModel dx="1434" dy="844" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
`,o+=`      <root>
`,o+=`        <mxCell id="0"/>
`,o+=`        <mxCell id="1" parent="0"/>
`,r&&(o+="        <!-- Description: "+i(r)+` -->
`);for(let l=0;l<e.length;l++){const u=e[l],d=`node-${l+2}`,h=u.data?.label||u.id,p=u.position?.x||0,m=u.position?.y||0,b=u.style?.width||u.width||200,x=u.style?.height||u.height||80,S=s();o+=`        <mxCell id="${d}" value="${i(String(h))}" `,o+=`style="${S}" `,o+=`vertex="1" parent="1">
`,o+=`          <mxGeometry x="${p}" y="${m}" width="${b}" height="${x}" as="geometry"/>
`,o+=`        </mxCell>
`}for(let l=0;l<t.length;l++){const u=t[l],d=`edge-${l}`,h=e.findIndex(b=>b.id===u.source),p=e.findIndex(b=>b.id===u.target),m=u.label||u.data?.label||"";h!==-1&&p!==-1&&(o+=`        <mxCell id="${d}" value="${i(String(m))}" `,o+='style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" ',o+=`edge="1" parent="1" source="node-${h+2}" target="node-${p+2}">
`,o+=`          <mxGeometry relative="1" as="geometry"/>
`,o+=`        </mxCell>
`)}return o+=`      </root>
`,o+=`    </mxGraphModel>
`,o+=`  </diagram>
`,o+=`</mxfile>
`,o},Q5=e=>{try{const t=JSON.parse(e);if(!t.nodes||!Array.isArray(t.nodes))throw new Error("Invalid JSON format: missing or invalid nodes array");if(!t.edges||!Array.isArray(t.edges))throw new Error("Invalid JSON format: missing or invalid edges array");return{nodes:t.nodes,edges:t.edges}}catch(t){throw new Error(t instanceof Error?`Failed to import JSON: ${t.message}`:"Failed to import JSON: Invalid format")}},eP=e=>{try{const n=new DOMParser().parseFromString(e,"text/xml");if(n.querySelector("parsererror"))throw new Error("Invalid XML format");const i=[],s=[],o=new Map,l=n.querySelectorAll('mxCell[vertex="1"]');let u=0;for(const p of l){const m=p.getAttribute("id")||`cell-${u}`,b=p.getAttribute("value")||`Node ${u+1}`,x=p.querySelector("mxGeometry"),S=Number.parseFloat(x?.getAttribute("x")||"0"),w=Number.parseFloat(x?.getAttribute("y")||"0"),C=Number.parseFloat(x?.getAttribute("width")||"200"),N=Number.parseFloat(x?.getAttribute("height")||"80"),k=`imported-node-${Date.now()}-${u}`;o.set(m,k);const T={label:b},A=p.querySelector("mxData");if(A){const M=A.querySelectorAll("property");for(const j of M){const R=j.getAttribute("name"),L=j.getAttribute("value");if(R&&L)try{T[R]=JSON.parse(L)}catch{T[R]=L}}}i.push({id:k,type:"custom",position:{x:S,y:w},data:T,...C&&N?{style:{width:C,height:N}}:{}}),u++}const d=n.querySelectorAll('mxCell[edge="1"]');let h=0;for(const p of d){const m=p.getAttribute("source"),b=p.getAttribute("target"),x=p.getAttribute("value")||"";if(m&&b){const S=o.get(m),w=o.get(b);if(S&&w){const C={};x&&(C.label=x,C.hasLabel=!0);const N=p.querySelector("mxData");if(N){const k=N.querySelectorAll("property");for(const T of k){const A=T.getAttribute("name"),M=T.getAttribute("value");if(A&&M)try{C[A]=JSON.parse(M)}catch{C[A]=M}}}s.push({id:`imported-edge-${Date.now()}-${h}`,source:S,target:w,type:"customEdge",data:C,...x?{label:x}:{}})}}h++}if(i.length===0)throw new Error("No valid nodes found in XML file");return{nodes:i,edges:s}}catch(t){throw new Error(t instanceof Error?`Failed to import XML: ${t.message}`:"Failed to import XML: Invalid format")}},tP=(e,t,n)=>{const r=new Blob([e],{type:n}),i=URL.createObjectURL(r),s=document.createElement("a");s.href=i,s.download=t,document.body.appendChild(s),s.click(),s.remove(),URL.revokeObjectURL(i)},ipe=async e=>e.text(),spe={customEdge:zhe,erRelationship:Uhe},ope=ke.memo(e=>{const t=e.data;return y.jsx(IV,{id:e.id,data:t,onCopy:(n,r)=>e.onCopy(n,r),isInGroup:e.isInGroup})}),ape=ke.memo(e=>{const t=e.data;return y.jsx(HV,{id:e.id,data:t,onCopy:(n,r)=>e.onCopy(n,r),isInGroup:e.isInGroup})}),lpe=ke.memo(e=>{const t=e.data;return y.jsx(FV,{id:e.id,data:t,onCopy:(n,r)=>e.onCopy(n,r),isInGroup:e.isInGroup})}),cpe=(e,t)=>n=>{const r=t.current.find(i=>i.id===n.id)?.parentId!==void 0;return y.jsx(ope,{...n,onCopy:e,isInGroup:r})},upe=(e,t)=>n=>{const r=t.current.find(i=>i.id===n.id)?.parentId!==void 0;return y.jsx(ape,{...n,onCopy:e,isInGroup:r})},dpe=(e,t)=>n=>{const r=t.current.find(i=>i.id===n.id)?.parentId!==void 0;return y.jsx(lpe,{...n,onCopy:e,isInGroup:r})},fpe=()=>{Wa();const e=Vd(),n=DU()?.id,{screenToFlowPosition:r,flowToScreenPosition:i}=Id(),{user:s,isAuthenticated:o,login:l,signup:u,googleLogin:d,logout:h}=Cm(),p=Whe(),m=D.useRef(p);m.current=p;const b=D.useRef([]),S=new URLSearchParams(globalThis.location.hash.split("?")[1]).get("diagramId"),[w,C]=D.useState(null),[N,k]=D.useState(!0),[T,A]=D.useState(null),[M,j]=D.useState(!1),[R,L]=D.useState(null),[I,H]=D.useState(null),[q,W]=D.useState(!1),[z,F]=D.useState(!1),[O,V]=D.useState(""),[Y,te]=D.useState(""),[B,$]=D.useState(!1),[oe,ae]=D.useState(""),[U,Z]=D.useState("read"),[ee,de]=D.useState([]),[ce,ve]=D.useState(!1),[De,Pe]=D.useState(!1),[Ae,Ee]=D.useState("idle"),[Se,Te]=D.useState(null),[ot,Oe]=D.useState(!1),[Mt,Wt]=D.useState(0),Dn=D.useRef(null);D.useEffect(()=>{if(!n){k(!1),A("No problem ID provided");return}if(n==="free"){C({id:"free",title:"Design Studio",description:"Create your own system design from scratch",difficulty:"Medium",category:"Custom",estimated_time:"Unlimited",requirements:[],constraints:[],hints:[],tags:["custom","free-design"]}),k(!1);return}if(n.startsWith("custom-")){const J=localStorage.getItem(`custom-problem-${n}`);if(J){C(JSON.parse(J)),k(!1);return}}(async()=>{try{k(!0),A(null);const ie=await fetch(`https://diagrammatic-api-production.up.railway.app/api/v1/problem/${n}`);if(!ie.ok)throw new Error(`Failed to fetch problem: ${ie.status} ${ie.statusText}`);const pe=await ie.json();C(pe)}catch(J){A(J instanceof Error?J.message:"An error occurred while fetching the problem"),console.error("Error fetching problem:",J)}finally{k(!1)}})()},[n]);const rn=()=>e("/"),{state:_t,setState:mt,undo:Rn,redo:sn,canUndo:zt,canRedo:ht}=nne({nodes:[],edges:[]}),[qe,Ve,Mr]=kle(_t.nodes),[Rt,Kt,Yt]=Tle(_t.edges),{getNodes:on,fitView:Xt}=Id();D.useEffect(()=>{b.current=qe},[qe]);const[kn,Tn]=D.useState(!1),[_r,yi]=D.useState(!1),gr=D.useRef(null);D.useEffect(()=>{if(S)(async()=>{try{const J=o?await Gn.getDiagram(S):await Gn.getPublicDiagram(S),ie=J.nodes,pe=J.edges;Ve(ie),Kt(pe),L(J.id),H(J),mt({nodes:ie,edges:pe})}catch(J){console.error("Failed to load diagram:",J),p.error("Failed to load diagram. It may have been deleted or you don't have access to it.")}})();else if(n==="free"&&o){const K=`last-diagram-${s?.id||"anonymous"}`,J=localStorage.getItem(K);J&&(async()=>{try{const pe=await Gn.getDiagram(J),be=pe.nodes,we=pe.edges;Ve(be),Kt(we),L(pe.id),H(pe),mt({nodes:be,edges:we}),p.success("Design restored from previous session")}catch(pe){console.error("Failed to load last diagram:",pe),localStorage.removeItem(K),p.error("Failed to restore previous design. Starting fresh.")}})()}else if(n&&n!=="free"&&o){const K=`problem-progress-${s?.id||"anonymous"}-${n}`,J=localStorage.getItem(K);if(J)try{const ie=JSON.parse(J),pe=ie.nodes,be=ie.edges;Ve(pe),Kt(be),ie.elapsedTime&&Wt(ie.elapsedTime),mt({nodes:pe,edges:be}),p.success("Progress restored from previous session")}catch(ie){console.error("Failed to load saved progress:",ie)}}},[S,o,n,s?.id]),D.useEffect(()=>{Oe(o&&n!==void 0)},[o,n]),D.useEffect(()=>{if(!ot||qe.length===0)return;const J=setTimeout(async()=>{try{if(Ee("saving"),n==="free")if(R){await Gn.updateDiagram(R,{title:I?.title||"Auto-saved Design",description:I?.description||"Auto-saved design",nodes:qe,edges:Rt});const ie=`last-diagram-${s?.id||"anonymous"}`;localStorage.setItem(ie,R)}else{F(!0),Ee("idle");return}else{const ie=`problem-progress-${s?.id||"anonymous"}-${n}`,pe={problemId:n,nodes:qe,edges:Rt,lastSaved:new Date().toISOString(),elapsedTime:Mt};localStorage.setItem(ie,JSON.stringify(pe))}Ee("saved"),Te(new Date),p.success(n==="free"?"Design auto-saved successfully!":"Progress auto-saved successfully!"),setTimeout(()=>Ee("idle"),3e3)}catch(ie){console.error("Auto-save failed:",ie),Ee("error"),setTimeout(()=>Ee("idle"),5e3)}},3e3);return()=>clearTimeout(J)},[qe,Rt,ot,n,R,s?.id]),D.useEffect(()=>{Ve(_t.nodes),Kt(_t.edges)},[_t,Ve,Kt]),D.useEffect(()=>{const K=J=>{(J.ctrlKey||J.metaKey)&&J.key==="z"&&!J.shiftKey&&(J.preventDefault(),Rn()),((J.ctrlKey||J.metaKey)&&J.shiftKey&&J.key==="z"||J.ctrlKey&&J.key==="y")&&(J.preventDefault(),sn())};return globalThis.addEventListener("keydown",K),()=>globalThis.removeEventListener("keydown",K)},[Rn,sn]),D.useEffect(()=>{if(n!=="free")return Dn.current=setInterval(()=>{Wt(K=>K+1)},1e3),()=>{Dn.current&&clearInterval(Dn.current)}},[n]),D.useEffect(()=>()=>{const K=`last-diagram-${s?.id||"anonymous"}`;if(localStorage.removeItem(K),n&&n!=="free"){const J=`problem-progress-${s?.id||"anonymous"}-${n}`;localStorage.removeItem(J)}},[s?.id,n]);const Kr=K=>{const J=Math.floor(K/3600),ie=Math.floor(K%3600/60),pe=K%60;return J>0?`${J.toString().padStart(2,"0")}:${ie.toString().padStart(2,"0")}:${pe.toString().padStart(2,"0")}`:`${ie.toString().padStart(2,"0")}:${pe.toString().padStart(2,"0")}`},yr=K=>{const ie=Math.floor((new Date().getTime()-K.getTime())/1e3);if(ie<60)return"a moment ago";if(ie<1800)return`${Math.floor(ie/60)} min ago`;if(ie<3600)return"about an hour ago";if(ie<86400){const pe=Math.floor(ie/3600);return`${pe} hour${pe>1?"s":""} ago`}else return`at ${K.toLocaleTimeString()}`};D.useEffect(()=>{const K=J=>{kn&&(J.target.closest(".relative")||Tn(!1))};if(kn)return document.addEventListener("click",K),()=>document.removeEventListener("click",K)},[kn]),D.useEffect(()=>{const K=J=>{_r&&(J.target.closest(".relative")||yi(!1))};if(_r)return document.addEventListener("click",K),()=>document.removeEventListener("click",K)},[_r]);const bi=K=>{const J=qe.find(Ce=>Ce.id===K.source),ie=qe.find(Ce=>Ce.id===K.target),pe=Ce=>{const Fe=Ce?.data?.componentId;return Fe==="entity"||Fe==="weak-entity"},be=pe(J)&&pe(ie),we={...K,type:be?"erRelationship":"customEdge",data:be?{label:"",hasLabel:!1,cardinality:"one-to-many"}:{label:"",hasLabel:!1}};Kt(Ce=>_8(we,Ce))},[Fs,Yr]=ke.useState(null),[vt,sr]=D.useState(!1),Us=async()=>{if(vt)return;sr(!0),Yr(null);const K={components:qe.map(J=>{const ie=J.data??{},pe=ie.type;let be;typeof pe=="string"?be=pe:typeof J.type=="string"?be=J.type:be="microservice";const we=ie.label,Ce=typeof we=="string"?we:String(J.id),Fe=ie&&typeof ie=="object"?{...ie}:{},{icon:Je,subtitle:lt,...Ot}=Fe;return{id:J.id,type:be,label:Ce,position:{x:J.position?.x??0,y:J.position?.y??0},properties:{...Ot,nodeData:{label:Ce,icon:ie.icon,subtitle:ie.subtitle}}}}),connections:Rt.map(J=>{const ie=J.data??{},pe=ie.type,be=typeof pe=="string"?pe:"api-call",we=ie.label,Ce=typeof we=="string"?we:void 0;return{id:J.id??`${J.source}-${J.target}`,source:J.source,target:J.target,type:be,label:Ce,properties:ie}}),explanation:"",keyPoints:[]};try{console.log("Running AI assessment with solution:",K);const J=await phe(K,w);Yr(J),jn("details")}catch(J){console.error("Assessment failed:",J),Yr({isValid:!1,score:0,feedback:[{type:"error",message:"Assessment failed. Please check your connection and try again.",category:"maintainability"}],suggestions:[],missingComponents:[],architectureStrengths:[],improvements:[]})}finally{sr(!1)}},Oi=D.useRef(null),Yn=K=>{K.preventDefault(),K.dataTransfer&&(K.dataTransfer.dropEffect="move")},qt=K=>{K.preventDefault();const J=K.dataTransfer?.getData("application/reactflow")||K.dataTransfer?.getData("text/plain");let ie=J;try{J&&(ie=JSON.parse(J).type||J)}catch{}const pe=r({x:K.clientX,y:K.clientY}),be=`${ie}-${Date.now()}`,we=Nu.find(lt=>lt.id===ie),Ce=we?.group==="Grouping",Fe=we?.nodeType||(Ce?"group":"custom"),Je={id:be,position:pe,type:Fe,style:Ce?{width:400,height:300,zIndex:-1}:void 0,data:{label:we?.label??ie,componentId:we?.id,icon:we?.icon,subtitle:we?.description,backgroundColor:Ce?"rgba(100, 100, 255, 0.05)":void 0,borderColor:Ce?"rgba(100, 100, 255, 0.3)":void 0,...Fe==="tableNode"?{componentName:we?.label||"Entity",attributes:we?.data?.attributes||[{id:"attr-1",name:"id",type:"UUID",isPrimaryKey:!0},{id:"attr-2",name:"name",type:"VARCHAR(100)",isNullable:!1},{id:"attr-3",name:"created_at",type:"TIMESTAMP",isNullable:!1}],renderConfig:we?.renderConfig}:{},...Fe==="erNode"?we?.properties?.reduce((lt,Ot)=>(Ot.default!==void 0&&Ot.default!==""&&(lt[Ot.key]=Ot.default),lt),{}):{}}};Ve(lt=>[...lt,Je])},an=(K,J)=>{if(J.parentId)return;const ie=qe.filter(be=>be.type==="group");let pe;for(const be of ie){if(be.id===J.id)continue;const we=be.position.x,Ce=be.position.y,Fe=be.style?.width||400,Je=be.style?.height||300,lt=J.position.x,Ot=J.position.y,dt=10;if(lt>we+dt&&lt<we+Fe-dt&&Ot>Ce+dt&&Ot<Ce+Je-dt){pe=be.id;break}}pe&&Ve(be=>be.map(we=>{if(we.id===J.id){const Ce=be.find(Je=>Je.id===pe),Fe=Ce?{x:J.position.x-Ce.position.x,y:J.position.y-Ce.position.y}:J.position;return{...we,position:Fe,parentId:pe,extent:"parent"}}return we}))},Xr=D.useCallback(()=>{const K=Et.current;K&&Ve(J=>J.map(ie=>{if(ie.id===K&&ie.parentId){const pe=J.find(Ce=>Ce.id===ie.parentId);let be=ie.position.x,we=ie.position.y;return pe&&(be+=pe.position.x,we+=pe.position.y),{...ie,position:{x:be,y:we},parentId:void 0,extent:void 0}}return ie}))},[Ve]),[Ie,Xn]=D.useState(null),[Li,Pi]=D.useState({}),[or,Dr]=D.useState({}),[fn,jn]=D.useState("details"),[Rr,Zn]=D.useState(!1),Et=D.useRef(null);ke.useEffect(()=>{Et.current=Ie},[Ie]);const ss=D.useRef(void 0);ss.current=K=>{const ie=K.detail.id;Ve(pe=>pe.filter(be=>be.id!==ie)),Et.current===ie&&(Xn(null),jn("details"))};const je=D.useRef(void 0);je.current=K=>{const ie=K.detail.id;Xn(pe=>{const be=pe===ie?null:ie;return jn(be?"inspector":"details"),be})};function X(K,J,ie,pe){return K.map(be=>be.id===J?{...be,data:{...be.data,label:ie,hasLabel:pe},label:ie}:be)}function ge(K,J,ie){return K.map(pe=>pe.id===J?{...pe,data:{...pe.data,cardinality:ie}}:pe)}const Me=ke.useRef(void 0);Me.current=K=>{const J=K,{id:ie,label:pe,hasLabel:be}=J.detail;Kt(we=>X(we,ie,pe,be))};const ut=ke.useRef(void 0);ut.current=K=>{const J=K,{id:ie,cardinality:pe}=J.detail;Kt(be=>ge(be,ie,pe))},ke.useEffect(()=>{const K=ie=>Me.current?.(ie),J=ie=>ut.current?.(ie);return globalThis.addEventListener("diagram:edge-label-change",K),globalThis.addEventListener("diagram:edge-cardinality-change",J),()=>{globalThis.removeEventListener("diagram:edge-label-change",K),globalThis.removeEventListener("diagram:edge-cardinality-change",J)}},[]),ke.useEffect(()=>{const K=pe=>ss.current?.(pe),J=pe=>je.current?.(pe),ie=pe=>{const be=pe;Ve(we=>we.map(Ce=>{if(Ce.id===be.detail.id&&Ce.parentId){const Fe=we.find(Ot=>Ot.id===Ce.parentId);let Je=Ce.position.x,lt=Ce.position.y;return Fe&&(Je+=Fe.position.x,lt+=Fe.position.y),{...Ce,position:{x:Je,y:lt},parentId:void 0,extent:void 0}}return Ce}))};return globalThis.addEventListener("diagram:node-delete",K),globalThis.addEventListener("diagram:node-toggle",J),globalThis.addEventListener("diagram:node-detach",ie),()=>{globalThis.removeEventListener("diagram:node-delete",K),globalThis.removeEventListener("diagram:node-toggle",J),globalThis.removeEventListener("diagram:node-detach",ie)}},[Ve]),ke.useEffect(()=>{const K=we=>{if(!we)return[];if(Array.isArray(we))return we;if(typeof we=="string")try{const Ce=JSON.parse(we);return Array.isArray(Ce)?Ce:[]}catch{return[]}return[]},J=we=>{const Ce=we;Ve(Fe=>Fe.map(Je=>{if(Je.id===Ce.detail.nodeId){const lt=Je.data,Ot=K(lt.attributes);return{...Je,data:{...lt,attributes:[...Ot,Ce.detail.attribute]}}}return Je}))},ie=we=>{const Ce=we;Ve(Fe=>Fe.map(Je=>{if(Je.id===Ce.detail.nodeId){const lt=Je.data,Ot=K(lt.attributes);return{...Je,data:{...lt,attributes:Ot.filter(dt=>dt.id!==Ce.detail.attributeId)}}}return Je}))},pe=we=>{const Ce=we;Ve(Fe=>Fe.map(Je=>{if(Je.id===Ce.detail.nodeId){const lt=Je.data,Ot=K(lt.attributes);return{...Je,data:{...lt,attributes:Ot.map(dt=>dt.id===Ce.detail.attributeId?{...dt,[Ce.detail.key]:!dt[Ce.detail.key]}:dt)}}}return Je}))},be=we=>{const Ce=we;Ve(Fe=>Fe.map(Je=>{if(Je.id===Ce.detail.nodeId){const lt=Je.data,Ot=K(lt.attributes);return{...Je,data:{...lt,attributes:Ot.map(dt=>dt.id===Ce.detail.attributeId?{...dt,name:Ce.detail.name,type:Ce.detail.type}:dt)}}}return Je}))};return globalThis.addEventListener("diagram:table-attribute-add",J),globalThis.addEventListener("diagram:table-attribute-delete",ie),globalThis.addEventListener("diagram:table-attribute-toggle",pe),globalThis.addEventListener("diagram:table-attribute-update",be),()=>{globalThis.removeEventListener("diagram:table-attribute-add",J),globalThis.removeEventListener("diagram:table-attribute-delete",ie),globalThis.removeEventListener("diagram:table-attribute-toggle",pe),globalThis.removeEventListener("diagram:table-attribute-update",be)}},[Ve]),ke.useEffect(()=>{if(!Ie)return;const K=qe.find(J=>J.id===Ie);Pi(K?.data??{})},[Ie,qe]);const Tt=(K,J)=>{Pi(ie=>({...ie,[K]:J})),Ie&&Ve(ie=>ie.map(pe=>pe.id===Ie?{...pe,data:{...pe.data,[K]:J}}:pe))},Nt=(K,J)=>Tt(K,J),Vt=(K,J)=>Tt(K,J),Nn=(K,J)=>Tt(K,J),hn=(K,J)=>Tt(K,J),vi=()=>{if(!Ie)return;const K={id:`custom-${Date.now()}-${Math.random().toString(36).substring(2,11)}`,key:`customProperty${(or[Ie]?.length||0)+1}`,label:`Custom Property ${(or[Ie]?.length||0)+1}`,type:"text",value:""};Dr(J=>{const ie={...J,[Ie]:[...J[Ie]||[],K]};return Ve(pe=>pe.map(be=>be.id===Ie?{...be,data:{...be.data,_customProperties:ie[Ie]}}:be)),ie})},jt=(K,J)=>{Ie&&Dr(ie=>{const be=(ie[Ie]||[]).map(we=>we.id===K?{...we,...J}:we);return Ve(we=>we.map(Ce=>Ce.id===Ie?{...Ce,data:{...Ce.data,_customProperties:be}}:Ce)),{...ie,[Ie]:be}})},br=K=>{Ie&&Dr(J=>{const pe=(J[Ie]||[]).filter(be=>be.id!==K);return Ve(be=>be.map(we=>we.id===Ie?{...we,data:{...we.data,_customProperties:pe}}:we)),{...J,[Ie]:pe}})};ke.useEffect(()=>{if(!Ie)return;const K=qe.find(J=>J.id===Ie);K?.data?._customProperties&&Dr(J=>({...J,[Ie]:K.data._customProperties}))},[Ie,qe]);const Ii=K=>{const J=`${Ie}-${K.key}`,ie=Li[K.key];let pe;typeof ie=="number"?pe=ie:typeof K.default=="number"?pe=K.default:pe=void 0;let be;typeof ie=="string"?be=ie:K.default===null||K.default===void 0?be="":be=String(K.default);let we;typeof ie=="string"?we=ie:K.default===null||K.default===void 0?we=void 0:we=String(K.default);const Ce=!!ie;return y.jsxs("div",{className:"flex flex-col px-1",children:[K.type==="boolean"&&y.jsx(Lz,{id:J,checked:Ce,onChange:Fe=>Nt(K.key,Fe),label:K.label}),K.type==="number"&&y.jsx(Pz,{id:J,label:K.label,value:pe,onChange:Fe=>Vt(K.key,Fe)}),K.type==="text"&&y.jsx(np,{id:J,label:K.label,value:be,placeholder:K.placeholder,onChange:Fe=>Nn(K.key,Fe)}),K.type==="textarea"&&y.jsx(om,{id:J,label:K.label,value:be,placeholder:K.placeholder,onChange:Fe=>Nn(K.key,Fe)}),K.type==="select"&&y.jsx(Iz,{id:J,label:K.label,value:we,options:K.options||[],onChange:Fe=>hn(K.key,Fe)})]},K.key)};let Bi=null;if(Ie){const K=qe.find(J=>J.id===Ie);if(K){const J=K.data.componentId?Nu.find(ie=>ie.id===K.data.componentId):Nu.find(ie=>ie.label===K.data.label);J?.properties?Bi=J.properties.map(ie=>Ii(ie)):Bi=y.jsx("div",{className:"text-sm text-muted",children:"No properties defined"})}else Bi=y.jsx("div",{className:"text-sm text-muted",children:"Node not found"})}let Ko=null;if(Ie){const K=or[Ie]||[];K.length>0?Ko=K.map(J=>y.jsx(Ghe,{property:J,onUpdate:jt,onDelete:br},J.id)):Ko=y.jsx("div",{className:"text-xs text-muted text-center py-3",children:"No custom properties added yet"})}const as=D.useCallback((K,J)=>{const ie=b.current.find(we=>we.id===K);if(!ie)return;const pe=`${K}-copy-${Date.now()}`,be={...ie,id:pe,position:{x:ie.position.x+200,y:ie.position.y+100},data:{...J},selected:!1};Ve(we=>[...we,be])},[Ve]),Jn=D.useMemo(()=>({custom:cpe(as,b),erNode:upe(as,b),tableNode:dpe(as,b),group:$he}),[as]),zi=D.useCallback(async()=>{if(!(!R||!B))try{Pe(!0);const K=await Gn.getCollaborators(R);de(K)}catch(K){console.error("Failed to load collaborators:",K),m.current.error("Failed to load collaborators.")}finally{Pe(!1)}},[R,B]);D.useEffect(()=>{B&&R?zi():B||de([])},[B,R,zi]);const tl=localStorage.getItem("auth_token")||"",{sendDiagramUpdate:ls,sendCursorPosition:$s,collaborators:Gs,cursors:kc,isConnected:pn,isConnecting:cs,reconnectAttempts:nl}=Qhe({diagramId:R||"",token:tl,enabled:!!R&&o&&!!tl,onDiagramUpdate:D.useCallback((K,J)=>{console.log("Received diagram update from user:",J),K.nodes&&Ve(K.nodes),K.edges&&Kt(K.edges),K.title&&I&&H({...I,title:K.title}),m.current.success("Diagram updated by collaborator")},[Ve,Kt,I]),onUserJoined:D.useCallback(K=>{m.current.success(`${K.name} joined the collaboration`)},[]),onUserLeft:D.useCallback(K=>{m.current.success(`${K.name} left the collaboration`)},[]),onError:D.useCallback(K=>{m.current.error(K)},[])});D.useEffect(()=>{if(!pn)return;const K=setTimeout(()=>{ls({nodes:qe,edges:Rt,title:I?.title})},500);return()=>clearTimeout(K)},[qe,Rt,I?.title,pn,ls]);const Yo=D.useCallback(K=>{if(!pn||!Oi.current?.getBoundingClientRect())return;const ie=r({x:K.clientX,y:K.clientY});$s(ie)},[pn,$s,r]);if(N)return y.jsx("div",{className:"min-h-screen bg-theme flex items-center justify-center",children:y.jsxs("div",{className:"text-center",children:[y.jsx("h2",{className:"text-2xl font-bold text-theme mb-4",children:"Loading problem..."}),y.jsx("div",{className:"text-muted",children:"Please wait while we fetch the problem details"})]})});if(T)return y.jsx("div",{className:"min-h-screen bg-theme flex items-center justify-center",children:y.jsxs("div",{className:"text-center",children:[y.jsx("h2",{className:"text-2xl font-bold text-theme mb-4",children:"Error Loading Problem"}),y.jsx("div",{className:"text-muted mb-4",children:T}),y.jsxs("div",{className:"flex gap-3 justify-center",children:[y.jsx("button",{onClick:rn,className:"px-4 py-2 bg-accent text-white rounded-md hover:brightness-90",children:"Back to Dashboard"}),y.jsx("button",{onClick:()=>globalThis.location.reload(),className:"px-4 py-2 bg-surface border border-theme text-theme rounded-md hover:bg-[var(--bg-hover)]",children:"Retry"})]})]})});if(!w)return y.jsx("div",{className:"min-h-screen bg-theme flex items-center justify-center",children:y.jsxs("div",{className:"text-center",children:[y.jsx("h2",{className:"text-2xl font-bold text-theme mb-4",children:"Problem not found"}),y.jsx("div",{className:"text-muted mb-4",children:"The requested problem could not be found."}),y.jsx("button",{onClick:rn,className:"px-4 py-2 bg-accent text-white rounded-md hover:brightness-90",children:"Back to Dashboard"})]})});function xi(K){const J=Nu.find(Je=>Je.id===K),ie=Oi.current?.getBoundingClientRect();if(!ie)return;const pe=r({x:ie.left+ie.width/2,y:ie.top+ie.height/2}),be=`${K}-${Date.now()}`,we=J?.group==="Grouping",Ce=J?.nodeType||(we?"group":"custom"),Fe={id:be,position:pe,type:Ce,style:we?{width:400,height:300,zIndex:-1}:void 0,data:{label:J?.label??K,componentId:J?.id,icon:J?.icon,subtitle:J?.description,backgroundColor:we?"rgba(100, 100, 255, 0.05)":void 0,borderColor:we?"rgba(100, 100, 255, 0.3)":void 0}};Ve(Je=>[...Je,Fe])}const uf=()=>{qe.length===0&&Rt.length===0||Zn(!0)},df=()=>{Ve([]),Kt([]),Xn(null),Yr(null),Zn(!1)},Ws=()=>{Zn(!1)},Tc=(K="png")=>{const J=v8(on()),ie=ng(J,1024,768,.5,2,.2),pe=document.querySelector(".react-flow__viewport");if(!pe){console.error("Viewport element not found");return}let be,we;K==="svg"?(be=jq,we="svg"):K==="jpeg"?(be=Wce,we="jpg"):(be=Gce,we="png"),be(pe,{backgroundColor:K==="png"?"transparent":"#ffffff",width:1024,height:768,style:{width:"1024px",height:"768px",transform:`translate(${ie.x}px, ${ie.y}px) scale(${ie.zoom})`}}).then(Ce=>{const Fe=document.createElement("a");Fe.setAttribute("download",`system-design-${Date.now()}.${we}`),Fe.setAttribute("href",Ce),Fe.click()}).catch(Ce=>{console.error("Error generating image:",Ce)})},ff=()=>{try{const K=w?.title||"System Design",J=w?.description,ie=npe(qe,Rt,K,J),pe=`${K.replace(/\s+/g,"-").toLowerCase()}-${Date.now()}.json`;tP(ie,pe,"application/json"),m.current.success("Design exported as JSON successfully!")}catch(K){console.error("Export JSON error:",K),m.current.error("Failed to export as JSON")}},hf=()=>{try{const K=w?.title||"System Design",J=w?.description,ie=rpe(qe,Rt,K,J),pe=`${K.replace(/\s+/g,"-").toLowerCase()}-${Date.now()}.drawio`;tP(ie,pe,"application/xml"),p.success("Design exported as XML successfully!")}catch(K){console.error("Export XML error:",K),p.error("Failed to export as XML")}},Nc=async K=>{const J=K.target.files?.[0];if(J)try{const ie=await ipe(J);let pe;if(J.name.endsWith(".json"))pe=Q5(ie),p.success("Design imported from JSON successfully!");else if(J.name.endsWith(".xml")||J.name.endsWith(".drawio"))pe=eP(ie),p.success("Design imported from XML successfully!");else{const be=ie.trim();if(be.startsWith("{")||be.startsWith("["))pe=Q5(ie),p.success("Design imported from JSON successfully!");else if(be.startsWith("<?xml")||be.startsWith("<mxfile"))pe=eP(ie),p.success("Design imported from XML successfully!");else throw new Error("Unsupported file format. Please use JSON or XML/DrawIO files.")}Ve(pe.nodes),Kt(pe.edges),L(null),setTimeout(()=>{Xt({padding:.2,duration:400})},100)}catch(ie){console.error("Import error:",ie),p.error(ie instanceof Error?ie.message:"Failed to import diagram")}finally{gr.current&&(gr.current.value="")}},Ag=()=>{gr.current?.click()},Mg=async()=>{if(!(!oe.trim()||!R))try{ve(!0),await Gn.addCollaborator(R,oe.trim(),U),m.current.success(`Diagram shared with ${oe} successfully!`),ae(""),Z("read"),zi()}catch(K){console.error("Failed to Share Design:",K),m.current.error("Failed to Share Design. Please try again.")}finally{ve(!1)}},rl=async(K,J)=>{if(R)try{await Gn.updateCollaborator(R,K,J),m.current.success("Permission updated successfully!"),zi()}catch(ie){console.error("Failed to update permission:",ie),m.current.error("Failed to update permission.")}},Ac=async K=>{if(R)try{await Gn.removeCollaborator(R,K),m.current.success("Collaborator removed successfully!"),zi()}catch(J){console.error("Failed to remove collaborator:",J),m.current.error("Failed to remove collaborator.")}},Mc=async K=>{if(K.preventDefault(),!!O.trim())try{Ee("saving");const J={title:O.trim(),description:Y.trim()||void 0,nodes:qe,edges:Rt},ie=await Gn.saveDiagram(J);L(ie.id),H(ie);const pe=`last-diagram-${s?.id||"anonymous"}`;localStorage.setItem(pe,ie.id),Ee("saved"),Te(new Date),F(!1),V(""),te(""),p.success("Design saved successfully!")}catch(J){console.error("Failed to save diagram:",J),Ee("error"),p.error("Failed to save design. Please try again.")}},Ks=()=>{F(!1),Ee("idle"),V(""),te("")},us=(K="TB")=>{const J=qe.filter(Ye=>Ye.type==="group"),ie=qe.filter(Ye=>Ye.type!=="group"&&!Ye.parentId),pe=new Fh.graphlib.Graph;pe.setDefaultEdgeLabel(()=>({})),pe.setGraph({rankdir:K,nodesep:150,ranksep:200,marginx:50,marginy:50});const be=350,we=250;for(const Ye of J)pe.setNode(Ye.id,{width:be,height:we});const Ce=Rt.filter(Ye=>J.some(Ht=>Ht.id===Ye.source)&&J.some(Ht=>Ht.id===Ye.target));for(const Ye of Ce)pe.setEdge(Ye.source,Ye.target);J.length>0&&Fh.layout(pe);const Fe=new Fh.graphlib.Graph;Fe.setDefaultEdgeLabel(()=>({})),Fe.setGraph({rankdir:K,nodesep:K==="LR"?150:80,ranksep:K==="LR"?200:100});const Je=Ye=>Ye.type==="tableNode"?{width:400,height:400}:Ye.type==="erNode"?{width:400,height:300}:{width:200,height:80},lt=new Map;for(const Ye of ie){const Ht=Je(Ye);lt.set(Ye.id,Ht),Fe.setNode(Ye.id,Ht)}const Ot=Rt.filter(Ye=>ie.some(Ht=>Ht.id===Ye.source)&&ie.some(Ht=>Ht.id===Ye.target));for(const Ye of Ot)Fe.setEdge(Ye.source,Ye.target);ie.length>0&&Fh.layout(Fe);const dt=qe.map(Ye=>{if(Ye.type==="group"){const Ht=pe.node(Ye.id);if(Ht)return{...Ye,position:{x:Ht.x-be/2,y:Ht.y-we/2}}}else{if(Ye.parentId)return Ye;{const Ht=Fe.node(Ye.id);if(Ht){const Ys=lt.get(Ye.id)||{width:200,height:80},_g=J.length>0?be+100:0;return{...Ye,position:{x:Ht.x-Ys.width/2+_g,y:Ht.y-Ys.height/2}}}}}return Ye});Ve(dt),globalThis.requestAnimationFrame(()=>{Xt({padding:.2,duration:400})})},pf=()=>{if(Ve(K=>K.map(J=>J.id===Ie?{...J,data:{...J.data,...Li}}:J)),Ie){const K=qe.find(J=>J.id===Ie);console.log("Node properties saved:",{id:Ie,data:K?.data,nodeProps:Li})}},_c=n==="free"?"Design Studio | Diagrammatic":`${w?.title||"System Design Challenge"} | Diagrammatic`,mf=n==="free"?"Create system architecture diagrams from scratch with our free interactive canvas. Design, prototype, and visualize your ideas with 45+ components.":`Solve the ${w?.title||"system design"} challenge. ${w?.description?.substring(0,150)||"Practice system design skills"}...`;return y.jsxs(y.Fragment,{children:[y.jsx(Fd,{title:_c,description:mf,keywords:`system design playground, ${w?.title||"free canvas"}, architecture diagram tool, ${w?.category||"design tool"}`,url:`https://satya00089.github.io/diagrammatic/#/playground/${n||"free"}`}),y.jsxs("div",{className:"h-screen flex flex-col bg-theme",children:[y.jsx("header",{className:"bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] shadow-lg overflow-visible",children:y.jsx("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8 overflow-visible",children:y.jsxs("div",{className:"flex items-center justify-between h-12 overflow-visible",children:[y.jsxs("div",{className:"flex items-center space-x-4",children:[y.jsxs("button",{type:"button",onClick:rn,className:"flex items-center space-x-3 group cursor-pointer",children:[y.jsx("img",{src:"./logo.png",alt:"Logo",className:"h-8 transition-transform group-hover:scale-110 duration-300"}),y.jsx("span",{className:"text-lg font-bold text-white",children:"Diagrammatic"})]}),y.jsxs("div",{className:"hidden md:flex items-center space-x-3 border-l border-white/20 pl-4",children:[y.jsx("h1",{className:"text-sm font-semibold text-white max-w-[200px] truncate cursor-default","data-tooltip":w.title,children:w.title}),n!=="free"&&y.jsxs(y.Fragment,{children:[y.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${w.difficulty==="Easy"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":w.difficulty==="Medium"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"}`,children:w.difficulty}),w.estimated_time&&y.jsxs("span",{className:"px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300 flex items-center gap-1",children:[y.jsx(YW,{className:"h-3 w-3"}),w.estimated_time]})]}),n!=="free"&&y.jsx("div",{className:"flex items-center gap-1 border-l border-white/20 pl-3",children:y.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300 flex items-center gap-1 font-mono",children:Kr(Mt)})})]})]}),y.jsxs("div",{className:"flex items-center gap-2",children:[n==="free"&&y.jsx("div",{className:"hidden sm:flex items-center gap-2 border-white/20",children:ot&&y.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 text-xs text-white/80",children:[Ae==="saving"&&y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"w-3 h-3 border border-white/60 border-t-transparent rounded-full animate-spin"}),y.jsx("span",{children:"Saving..."})]}),Ae==="saved"&&y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full"}),y.jsxs("span",{children:["Saved"," ",Se&&yr(Se)]})]}),Ae==="error"&&y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"w-3 h-3 bg-red-400 rounded-full"}),y.jsx("span",{children:"Save failed"})]}),Ae==="idle"&&Se&&y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"w-3 h-3 bg-white/40 rounded-full"}),y.jsxs("span",{children:["Saved ",yr(Se)]})]})]})}),n&&n!=="free"&&ot&&y.jsx("div",{className:"hidden sm:flex items-center gap-2 border-white/20",children:y.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 text-xs text-white/80",children:[Ae==="saving"&&y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"w-3 h-3 border border-white/60 border-t-transparent rounded-full animate-spin"}),y.jsx("span",{children:"Saving progress..."})]}),Ae==="saved"&&y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full"}),y.jsxs("span",{children:["Progress saved"," ",Se&&yr(Se)]})]}),Ae==="error"&&y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"w-3 h-3 bg-red-400 rounded-full"}),y.jsx("span",{children:"Save failed"})]}),Ae==="idle"&&Se&&y.jsxs(y.Fragment,{children:[y.jsx("div",{className:"w-3 h-3 bg-white/40 rounded-full"}),y.jsxs("span",{children:["Progress saved ",yr(Se)]})]})]})}),y.jsxs("div",{className:"hidden sm:flex items-center gap-1 border-l border-r border-white/20 pl-2 pr-2",children:[y.jsx("button",{type:"button",onClick:Rn,disabled:!zt,className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer","data-tooltip":"Undo (Ctrl+Z)",children:y.jsx(KW,{className:"h-5 w-5"})}),y.jsx("button",{type:"button",onClick:sn,disabled:!ht,className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer","data-tooltip":"Redo (Ctrl+Y or Ctrl+Shift+Z)",children:y.jsx(WW,{className:"h-5 w-5"})}),y.jsx("button",{type:"button",onClick:uf,disabled:qe.length===0&&Rt.length===0,className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer","data-tooltip":"Clear Canvas",children:y.jsx(Xh,{className:"h-5 w-5"})})]}),n==="free"&&y.jsxs(y.Fragment,{children:[y.jsx("button",{type:"button",onClick:Ag,className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors cursor-pointer","data-tooltip":"Import Design",children:y.jsx(oK,{className:"h-5 w-5"})}),y.jsx("input",{ref:gr,type:"file",accept:".json,.xml,.drawio",onChange:Nc,className:"hidden","aria-label":"Import diagram file"})]}),y.jsxs("div",{className:"relative",children:[y.jsx("button",{type:"button",onClick:()=>Tn(!kn),disabled:qe.length===0,className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer","data-tooltip":"Export Design",children:y.jsx(sK,{className:"h-5 w-5"})}),kn&&y.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-[var(--surface)] shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[180px]",children:[y.jsx("div",{className:"px-3 py-1 text-xs font-semibold text-muted uppercase tracking-wider",children:"Images"}),y.jsx("button",{type:"button",onClick:()=>{Tc("png"),Tn(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"PNG Image"}),y.jsx("button",{type:"button",onClick:()=>{Tc("jpeg"),Tn(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"JPEG Image"}),y.jsx("button",{type:"button",onClick:()=>{Tc("svg"),Tn(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"SVG Vector"}),y.jsx("div",{className:"border-t border-theme/10 my-1"}),y.jsx("div",{className:"px-3 py-1 text-xs font-semibold text-muted uppercase tracking-wider",children:"Data Files"}),y.jsx("button",{type:"button",onClick:()=>{ff(),Tn(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"JSON Format"}),y.jsx("button",{type:"button",onClick:()=>{hf(),Tn(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"XML/DrawIO"})]})]}),y.jsxs("div",{className:"relative",children:[y.jsx("button",{type:"button",onClick:()=>yi(!_r),disabled:qe.length===0,className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer","data-tooltip":"Auto Layout",children:y.jsx(tne,{className:"h-5 w-5"})}),_r&&y.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-[var(--surface)] shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[160px]",children:[y.jsx("button",{type:"button",onClick:()=>{us("TB"),yi(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"Vertical Layout"}),y.jsx("button",{type:"button",onClick:()=>{us("LR"),yi(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"Horizontal Layout"})]})]}),n==="free"&&o&&R&&y.jsxs(y.Fragment,{children:[y.jsx("button",{type:"button",onClick:()=>$(!0),className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors cursor-pointer","data-tooltip":"Share Diagram",children:y.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"})})}),y.jsx(epe,{isConnected:pn,isConnecting:cs,reconnectAttempts:nl,collaborators:Gs,showCollaborators:!0})]}),w?.id!=="free"&&y.jsx("button",{type:"button",onClick:Us,disabled:vt,className:"px-6 py-1 text-white font-bold rounded-md hover:bg-white/20 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer transition-colors","data-tooltip":"Run assessment on current design",children:vt?"Assessing...":"Run Assessment"}),y.jsx(Hd,{}),y.jsx("div",{className:"relative",children:o?y.jsxs(y.Fragment,{children:[y.jsxs("button",{type:"button",onClick:()=>W(!q),className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-white hover:bg-white/20 rounded-md transition-colors",children:[s?.picture?y.jsx("img",{src:s.picture,alt:s.name||"User",className:"w-8 h-8 rounded-full object-cover border-2 border-white"}):y.jsx("div",{className:"w-8 h-8 rounded-full bg-white/20 text-white flex items-center justify-center font-bold",children:s?.name?.[0]?.toUpperCase()||s?.email?.[0]?.toUpperCase()||"U"}),y.jsx("span",{className:"hidden sm:inline",children:s?.name||s?.email}),y.jsx(YI,{className:"h-4 w-4"})]}),q&&y.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-[var(--surface)] shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[180px]",children:[y.jsxs("div",{className:"px-4 py-2 border-b border-theme/10",children:[y.jsx("p",{className:"text-sm font-medium text-theme",children:s?.name||"User"}),y.jsx("p",{className:"text-xs text-muted truncate",children:s?.email})]}),y.jsx("button",{type:"button",onClick:()=>{h(),W(!1),L(null)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:"Sign Out"})]})]}):y.jsx("button",{type:"button",onClick:()=>j(!0),className:"px-4 py-2 text-sm font-medium text-white rounded-md hover:bg-white/20 transition-colors",children:"Sign In"})})]})]})})}),y.jsxs("div",{className:"flex-1 flex min-h-0",children:[y.jsx(dhe,{components:Nu,onAdd:xi}),y.jsx(fhe,{reactFlowWrapperRef:Oi,nodes:qe,edges:Rt,nodeTypes:Jn,edgeTypes:spe,onNodesChange:Mr,onEdgesChange:Yt,onConnect:bi,onDragOver:Yn,onDrop:qt,onNodeDragStop:an,onMouseMove:Yo,children:kc.map(K=>{const J=i(K.position);return y.jsx(tpe,{name:K.user.name,color:_C(K.userId),position:J,pictureUrl:K.user.pictureUrl},K.userId)})}),y.jsx(hhe,{problem:w,activeTab:fn,setActiveTab:jn,inspectedNodeId:Ie,setInspectedNodeId:Xn,propertyElements:Bi,customPropertyElements:Ko,onAddCustomProperty:vi,handleSave:pf,assessmentResult:Fs,onDetachFromGroup:Xr,isNodeInGroup:Ie?qe.find(K=>K.id===Ie)?.parentId!==void 0:!1})]}),Rr&&y.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:y.jsxs("div",{className:"bg-surface rounded-2xl shadow-2xl p-6 max-w-md w-full mx-4 border border-theme/10",children:[y.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[y.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 dark:bg-red-900/20 flex items-center justify-center",children:y.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:y.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),y.jsxs("div",{children:[y.jsx("h3",{className:"text-lg font-bold text-theme",children:"Clear Canvas?"}),y.jsx("p",{className:"text-sm text-muted",children:"This action cannot be undone"})]})]}),y.jsx("p",{className:"text-muted mb-6",children:"Are you sure you want to clear all components and connections from the canvas? You will lose all your current work."}),y.jsxs("div",{className:"flex space-x-3",children:[y.jsx("button",{type:"button",onClick:Ws,className:"flex-1 px-4 py-2 bg-theme/5 hover:bg-theme/10 text-theme font-medium rounded-lg transition-colors cursor-pointer",children:"Cancel"}),y.jsx("button",{type:"button",onClick:df,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-bold rounded-lg transition-colors cursor-pointer",children:"Clear All"})]})]})}),y.jsx(Dm,{isOpen:M,onClose:()=>j(!1),onLogin:async(K,J)=>{await l({email:K,password:J})},onSignup:async(K,J,ie)=>{await u({email:K,password:J,name:ie})},onGoogleLogin:d}),z&&y.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:y.jsx("div",{className:"bg-surface rounded-lg shadow-xl border border-theme/10 w-full max-w-md mx-4",children:y.jsxs("form",{onSubmit:Mc,children:[y.jsx("div",{className:"px-6 py-4 border-b border-theme/10",children:y.jsx("h2",{className:"text-lg font-semibold text-theme",children:"Save Your Design"})}),y.jsxs("div",{className:"px-6 py-4 space-y-4",children:[y.jsxs("div",{children:[y.jsxs("label",{htmlFor:"title-input",className:"block text-sm font-medium text-theme mb-2",children:["Title ",y.jsx("span",{className:"text-red-500",children:"*"})]}),y.jsx("input",{id:"title-input",type:"text",value:O,onChange:K=>V(K.target.value),placeholder:"Enter a title for your design",className:"w-full px-3 py-2 border border-theme/20 rounded-md focus:outline-none focus:ring-2 focus:ring-accent/50 bg-theme text-theme",required:!0})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"description-input",className:"block text-sm font-medium text-theme mb-2",children:"Description"}),y.jsx("textarea",{id:"description-input",value:Y,onChange:K=>te(K.target.value),placeholder:"Describe your design (optional)",className:"w-full px-3 py-2 border border-theme/20 rounded-md focus:outline-none focus:ring-2 focus:ring-accent/50 bg-theme text-theme resize-none",rows:3})]})]}),y.jsxs("div",{className:"px-6 py-4 border-t border-theme/10 flex justify-end gap-3",children:[y.jsx("button",{type:"button",onClick:Ks,className:"px-4 py-2 text-sm font-medium text-muted hover:text-theme hover:bg-[var(--bg-hover)] rounded-md transition-colors",children:"Cancel"}),y.jsx("button",{type:"submit",disabled:!O.trim(),className:"px-4 py-2 text-sm font-medium bg-accent text-white rounded-md hover:brightness-90 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Save Design"})]})]})})}),B&&y.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:y.jsxs("div",{className:"bg-surface rounded-lg shadow-xl border border-theme/10 w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto",children:[y.jsxs("div",{className:"px-6 py-4 border-b border-theme/10",children:[y.jsxs("div",{className:"flex items-center justify-between",children:[y.jsx("h2",{className:"text-lg font-semibold text-theme",children:"Share Design"}),y.jsx("button",{type:"button",onClick:()=>$(!1),className:"p-1 text-muted hover:text-theme rounded-md transition-colors",children:y.jsx(Xh,{className:"h-5 w-5"})})]}),y.jsxs("p",{className:"text-sm text-muted mt-1",children:['Share "',I?.title||"Untitled Design",'" with others']})]}),y.jsxs("div",{className:"px-6 py-4 space-y-6",children:[y.jsxs("div",{className:"space-y-4",children:[y.jsx("h3",{className:"text-sm font-medium text-theme",children:"Add Collaborator"}),y.jsxs("div",{className:"space-y-3",children:[y.jsxs("div",{children:[y.jsx("label",{htmlFor:"share-email",className:"block text-sm font-medium text-theme mb-2",children:"Email Address"}),y.jsx("input",{id:"share-email",type:"email",value:oe,onChange:K=>ae(K.target.value),placeholder:"Enter email address",className:"w-full px-3 py-2 border border-theme/20 rounded-md focus:outline-none focus:ring-2 focus:ring-accent/50 bg-theme text-theme"})]}),y.jsxs("div",{children:[y.jsx("label",{htmlFor:"share-permission",className:"block text-sm font-medium text-theme mb-2",children:"Permission Level"}),y.jsxs("select",{id:"share-permission",value:U,onChange:K=>Z(K.target.value),className:"w-full px-3 py-2 border border-theme/20 rounded-md focus:outline-none focus:ring-2 focus:ring-accent/50 bg-theme text-theme",children:[y.jsx("option",{value:"read",children:"Read Only - Can view the diagram"}),y.jsx("option",{value:"edit",children:"Read & Edit - Can view and modify the diagram"})]})]}),y.jsx("button",{type:"button",onClick:Mg,disabled:!oe.trim()||ce,className:"w-full px-4 py-2 bg-accent text-white rounded-md hover:brightness-90 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:ce?"Sharing...":"Share Design"})]})]}),y.jsxs("div",{className:"space-y-4",children:[y.jsx("h3",{className:"text-sm font-medium text-theme",children:"Current Collaborators"}),De?y.jsxs("div",{className:"text-center py-4",children:[y.jsx("div",{className:"inline-block w-4 h-4 border border-accent/30 border-t-accent rounded-full animate-spin"}),y.jsx("p",{className:"text-sm text-muted mt-2",children:"Loading collaborators..."})]}):ee.length===0?y.jsxs("div",{className:"text-center py-4 text-muted",children:[y.jsx("p",{className:"text-sm",children:"No collaborators yet"}),y.jsx("p",{className:"text-xs mt-1",children:"Share this diagram to start collaborating"})]}):y.jsx("div",{className:"space-y-2",children:ee.map(K=>y.jsxs("div",{className:"flex items-center justify-between p-3 bg-theme/5 rounded-md",children:[y.jsxs("div",{className:"flex items-center space-x-3",children:[y.jsx("div",{className:"w-8 h-8 rounded-full bg-accent/20 flex items-center justify-center",children:y.jsx("span",{className:"text-sm font-medium text-accent",children:K.email[0].toUpperCase()})}),y.jsxs("div",{children:[y.jsx("p",{className:"text-sm font-medium text-theme",children:K.email}),y.jsxs("p",{className:"text-xs text-muted capitalize",children:[K.permission," access"]})]})]}),y.jsxs("div",{className:"flex items-center space-x-2",children:[y.jsxs("select",{value:K.permission,onChange:J=>rl(K.id,J.target.value),className:"text-xs px-2 py-1 border border-theme/20 rounded bg-theme text-theme",children:[y.jsx("option",{value:"read",children:"Read"}),y.jsx("option",{value:"edit",children:"Edit"})]}),y.jsx("button",{type:"button",onClick:()=>Ac(K.id),className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",title:"Remove collaborator",children:y.jsx(Xh,{className:"h-4 w-4"})})]})]},K.id))})]}),y.jsxs("div",{className:"space-y-3",children:[y.jsx("h3",{className:"text-sm font-medium text-theme",children:"Share Link"}),y.jsxs("div",{className:"flex space-x-2",children:[y.jsx("input",{type:"text",value:`${window.location.origin}/#/playground/free?diagramId=${R}`,readOnly:!0,className:"flex-1 px-3 py-2 text-sm border border-theme/20 rounded-md bg-theme/50 text-theme"}),y.jsx("button",{type:"button",onClick:()=>{navigator.clipboard.writeText(`${window.location.origin}/#/playground/free?diagramId=${R}`),p.success("Link copied to clipboard!")},className:"px-3 py-2 bg-theme/10 hover:bg-theme/20 text-theme rounded-md transition-colors",children:"Copy"})]}),y.jsx("p",{className:"text-xs text-muted",children:"Anyone with this link can access the diagram according to their permission level"})]})]})]})}),y.jsx(Yhe,{toasts:p.toasts,onClose:p.removeToast})]})]})},hpe=()=>y.jsx(xq,{children:y.jsx(fpe,{})}),ppe=()=>(Wa(),y.jsx(d9,{children:y.jsx(XU,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:y.jsxs(WU,{children:[y.jsx(ha,{path:"/",element:y.jsx(P_,{})}),y.jsx(ha,{path:"/problems",element:y.jsx(JK,{})}),y.jsx(ha,{path:"/create-problem",element:y.jsx(Qte,{})}),y.jsx(ha,{path:"/diagrams",element:y.jsx(ene,{})}),y.jsx(ha,{path:"/playground/:id",element:y.jsx(hpe,{})}),y.jsx(ha,{path:"*",element:y.jsx(P_,{})})]})})}));QF.createRoot(document.getElementById("root")).render(y.jsx(D.StrictMode,{children:y.jsx(ppe,{})}));
