function GF(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var Mh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Wd(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var O0={exports:{}},_u={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dM;function WF(){if(dM)return _u;dM=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,s){var o=null;if(s!==void 0&&(o=""+s),i.key!==void 0&&(o=""+i.key),"key"in i){s={};for(var l in i)l!=="key"&&(s[l]=i[l])}else s=i;return i=s.ref,{$$typeof:e,type:r,key:o,ref:i!==void 0?i:null,props:s}}return _u.Fragment=t,_u.jsx=n,_u.jsxs=n,_u}var fM;function KF(){return fM||(fM=1,O0.exports=WF()),O0.exports}var m=KF(),L0={exports:{}},Qe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var hM;function YF(){if(hM)return Qe;hM=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),u=Symbol.for("react.suspense"),d=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;function g(z){return z===null||typeof z!="object"?null:(z=p&&z[p]||z["@@iterator"],typeof z=="function"?z:null)}var b={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},v=Object.assign,S={};function w(z,G,oe){this.props=z,this.context=G,this.refs=S,this.updater=oe||b}w.prototype.isReactComponent={},w.prototype.setState=function(z,G){if(typeof z!="object"&&typeof z!="function"&&z!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,z,G,"setState")},w.prototype.forceUpdate=function(z){this.updater.enqueueForceUpdate(this,z,"forceUpdate")};function k(){}k.prototype=w.prototype;function T(z,G,oe){this.props=z,this.context=G,this.refs=S,this.updater=oe||b}var E=T.prototype=new k;E.constructor=T,v(E,w.prototype),E.isPureReactComponent=!0;var N=Array.isArray,A={H:null,A:null,T:null,S:null,V:null},_=Object.prototype.hasOwnProperty;function j(z,G,oe,ae,$,Q){return oe=Q.ref,{$$typeof:e,type:z,key:G,ref:oe!==void 0?oe:null,props:Q}}function R(z,G){return j(z.type,G,void 0,void 0,void 0,z.props)}function I(z){return typeof z=="object"&&z!==null&&z.$$typeof===e}function B(z){var G={"=":"=0",":":"=2"};return"$"+z.replace(/[=:]/g,function(oe){return G[oe]})}var U=/\/+/g;function V(z,G){return typeof z=="object"&&z!==null&&z.key!=null?B(""+z.key):G.toString(36)}function F(){}function L(z){switch(z.status){case"fulfilled":return z.value;case"rejected":throw z.reason;default:switch(typeof z.status=="string"?z.then(F,F):(z.status="pending",z.then(function(G){z.status==="pending"&&(z.status="fulfilled",z.value=G)},function(G){z.status==="pending"&&(z.status="rejected",z.reason=G)})),z.status){case"fulfilled":return z.value;case"rejected":throw z.reason}}throw z}function H(z,G,oe,ae,$){var Q=typeof z;(Q==="undefined"||Q==="boolean")&&(z=null);var ee=!1;if(z===null)ee=!0;else switch(Q){case"bigint":case"string":case"number":ee=!0;break;case"object":switch(z.$$typeof){case e:case t:ee=!0;break;case h:return ee=z._init,H(ee(z._payload),G,oe,ae,$)}}if(ee)return $=$(z),ee=ae===""?"."+V(z,0):ae,N($)?(oe="",ee!=null&&(oe=ee.replace(U,"$&/")+"/"),H($,G,oe,"",function(xe){return xe})):$!=null&&(I($)&&($=R($,oe+($.key==null||z&&z.key===$.key?"":(""+$.key).replace(U,"$&/")+"/")+ee)),G.push($)),1;ee=0;var de=ae===""?".":ae+":";if(N(z))for(var le=0;le<z.length;le++)ae=z[le],Q=de+V(ae,le),ee+=H(ae,G,oe,Q,$);else if(le=g(z),typeof le=="function")for(z=le.call(z),le=0;!(ae=z.next()).done;)ae=ae.value,Q=de+V(ae,le++),ee+=H(ae,G,oe,Q,$);else if(Q==="object"){if(typeof z.then=="function")return H(L(z),G,oe,ae,$);throw G=String(z),Error("Objects are not valid as a React child (found: "+(G==="[object Object]"?"object with keys {"+Object.keys(z).join(", ")+"}":G)+"). If you meant to render a collection of children, use an array instead.")}return ee}function O(z,G,oe){if(z==null)return z;var ae=[],$=0;return H(z,ae,"","",function(Q){return G.call(oe,Q,$++)}),ae}function q(z){if(z._status===-1){var G=z._result;G=G(),G.then(function(oe){(z._status===0||z._status===-1)&&(z._status=1,z._result=oe)},function(oe){(z._status===0||z._status===-1)&&(z._status=2,z._result=oe)}),z._status===-1&&(z._status=0,z._result=G)}if(z._status===1)return z._result.default;throw z._result}var K=typeof reportError=="function"?reportError:function(z){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var G=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof z=="object"&&z!==null&&typeof z.message=="string"?String(z.message):String(z),error:z});if(!window.dispatchEvent(G))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",z);return}console.error(z)};function te(){}return Qe.Children={map:O,forEach:function(z,G,oe){O(z,function(){G.apply(this,arguments)},oe)},count:function(z){var G=0;return O(z,function(){G++}),G},toArray:function(z){return O(z,function(G){return G})||[]},only:function(z){if(!I(z))throw Error("React.Children.only expected to receive a single React element child.");return z}},Qe.Component=w,Qe.Fragment=n,Qe.Profiler=i,Qe.PureComponent=T,Qe.StrictMode=r,Qe.Suspense=u,Qe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=A,Qe.__COMPILER_RUNTIME={__proto__:null,c:function(z){return A.H.useMemoCache(z)}},Qe.cache=function(z){return function(){return z.apply(null,arguments)}},Qe.cloneElement=function(z,G,oe){if(z==null)throw Error("The argument must be a React element, but you passed "+z+".");var ae=v({},z.props),$=z.key,Q=void 0;if(G!=null)for(ee in G.ref!==void 0&&(Q=void 0),G.key!==void 0&&($=""+G.key),G)!_.call(G,ee)||ee==="key"||ee==="__self"||ee==="__source"||ee==="ref"&&G.ref===void 0||(ae[ee]=G[ee]);var ee=arguments.length-2;if(ee===1)ae.children=oe;else if(1<ee){for(var de=Array(ee),le=0;le<ee;le++)de[le]=arguments[le+2];ae.children=de}return j(z.type,$,void 0,void 0,Q,ae)},Qe.createContext=function(z){return z={$$typeof:o,_currentValue:z,_currentValue2:z,_threadCount:0,Provider:null,Consumer:null},z.Provider=z,z.Consumer={$$typeof:s,_context:z},z},Qe.createElement=function(z,G,oe){var ae,$={},Q=null;if(G!=null)for(ae in G.key!==void 0&&(Q=""+G.key),G)_.call(G,ae)&&ae!=="key"&&ae!=="__self"&&ae!=="__source"&&($[ae]=G[ae]);var ee=arguments.length-2;if(ee===1)$.children=oe;else if(1<ee){for(var de=Array(ee),le=0;le<ee;le++)de[le]=arguments[le+2];$.children=de}if(z&&z.defaultProps)for(ae in ee=z.defaultProps,ee)$[ae]===void 0&&($[ae]=ee[ae]);return j(z,Q,void 0,void 0,null,$)},Qe.createRef=function(){return{current:null}},Qe.forwardRef=function(z){return{$$typeof:l,render:z}},Qe.isValidElement=I,Qe.lazy=function(z){return{$$typeof:h,_payload:{_status:-1,_result:z},_init:q}},Qe.memo=function(z,G){return{$$typeof:d,type:z,compare:G===void 0?null:G}},Qe.startTransition=function(z){var G=A.T,oe={};A.T=oe;try{var ae=z(),$=A.S;$!==null&&$(oe,ae),typeof ae=="object"&&ae!==null&&typeof ae.then=="function"&&ae.then(te,K)}catch(Q){K(Q)}finally{A.T=G}},Qe.unstable_useCacheRefresh=function(){return A.H.useCacheRefresh()},Qe.use=function(z){return A.H.use(z)},Qe.useActionState=function(z,G,oe){return A.H.useActionState(z,G,oe)},Qe.useCallback=function(z,G){return A.H.useCallback(z,G)},Qe.useContext=function(z){return A.H.useContext(z)},Qe.useDebugValue=function(){},Qe.useDeferredValue=function(z,G){return A.H.useDeferredValue(z,G)},Qe.useEffect=function(z,G,oe){var ae=A.H;if(typeof oe=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return ae.useEffect(z,G)},Qe.useId=function(){return A.H.useId()},Qe.useImperativeHandle=function(z,G,oe){return A.H.useImperativeHandle(z,G,oe)},Qe.useInsertionEffect=function(z,G){return A.H.useInsertionEffect(z,G)},Qe.useLayoutEffect=function(z,G){return A.H.useLayoutEffect(z,G)},Qe.useMemo=function(z,G){return A.H.useMemo(z,G)},Qe.useOptimistic=function(z,G){return A.H.useOptimistic(z,G)},Qe.useReducer=function(z,G,oe){return A.H.useReducer(z,G,oe)},Qe.useRef=function(z){return A.H.useRef(z)},Qe.useState=function(z){return A.H.useState(z)},Qe.useSyncExternalStore=function(z,G,oe){return A.H.useSyncExternalStore(z,G,oe)},Qe.useTransition=function(){return A.H.useTransition()},Qe.version="19.1.1",Qe}var pM;function Kd(){return pM||(pM=1,L0.exports=YF()),L0.exports}var M=Kd();const Ce=Wd(M),XF=GF({__proto__:null,default:Ce},[M]);var P0={exports:{}},Du={},I0={exports:{}},B0={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mM;function ZF(){return mM||(mM=1,(function(e){function t(O,q){var K=O.length;O.push(q);e:for(;0<K;){var te=K-1>>>1,z=O[te];if(0<i(z,q))O[te]=q,O[K]=z,K=te;else break e}}function n(O){return O.length===0?null:O[0]}function r(O){if(O.length===0)return null;var q=O[0],K=O.pop();if(K!==q){O[0]=K;e:for(var te=0,z=O.length,G=z>>>1;te<G;){var oe=2*(te+1)-1,ae=O[oe],$=oe+1,Q=O[$];if(0>i(ae,K))$<z&&0>i(Q,ae)?(O[te]=Q,O[$]=K,te=$):(O[te]=ae,O[oe]=K,te=oe);else if($<z&&0>i(Q,K))O[te]=Q,O[$]=K,te=$;else break e}}return q}function i(O,q){var K=O.sortIndex-q.sortIndex;return K!==0?K:O.id-q.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var u=[],d=[],h=1,p=null,g=3,b=!1,v=!1,S=!1,w=!1,k=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,E=typeof setImmediate<"u"?setImmediate:null;function N(O){for(var q=n(d);q!==null;){if(q.callback===null)r(d);else if(q.startTime<=O)r(d),q.sortIndex=q.expirationTime,t(u,q);else break;q=n(d)}}function A(O){if(S=!1,N(O),!v)if(n(u)!==null)v=!0,_||(_=!0,V());else{var q=n(d);q!==null&&H(A,q.startTime-O)}}var _=!1,j=-1,R=5,I=-1;function B(){return w?!0:!(e.unstable_now()-I<R)}function U(){if(w=!1,_){var O=e.unstable_now();I=O;var q=!0;try{e:{v=!1,S&&(S=!1,T(j),j=-1),b=!0;var K=g;try{t:{for(N(O),p=n(u);p!==null&&!(p.expirationTime>O&&B());){var te=p.callback;if(typeof te=="function"){p.callback=null,g=p.priorityLevel;var z=te(p.expirationTime<=O);if(O=e.unstable_now(),typeof z=="function"){p.callback=z,N(O),q=!0;break t}p===n(u)&&r(u),N(O)}else r(u);p=n(u)}if(p!==null)q=!0;else{var G=n(d);G!==null&&H(A,G.startTime-O),q=!1}}break e}finally{p=null,g=K,b=!1}q=void 0}}finally{q?V():_=!1}}}var V;if(typeof E=="function")V=function(){E(U)};else if(typeof MessageChannel<"u"){var F=new MessageChannel,L=F.port2;F.port1.onmessage=U,V=function(){L.postMessage(null)}}else V=function(){k(U,0)};function H(O,q){j=k(function(){O(e.unstable_now())},q)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):R=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_next=function(O){switch(g){case 1:case 2:case 3:var q=3;break;default:q=g}var K=g;g=q;try{return O()}finally{g=K}},e.unstable_requestPaint=function(){w=!0},e.unstable_runWithPriority=function(O,q){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var K=g;g=O;try{return q()}finally{g=K}},e.unstable_scheduleCallback=function(O,q,K){var te=e.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?te+K:te):K=te,O){case 1:var z=-1;break;case 2:z=250;break;case 5:z=1073741823;break;case 4:z=1e4;break;default:z=5e3}return z=K+z,O={id:h++,callback:q,priorityLevel:O,startTime:K,expirationTime:z,sortIndex:-1},K>te?(O.sortIndex=K,t(d,O),n(u)===null&&O===n(d)&&(S?(T(j),j=-1):S=!0,H(A,K-te))):(O.sortIndex=z,t(u,O),v||b||(v=!0,_||(_=!0,V()))),O},e.unstable_shouldYield=B,e.unstable_wrapCallback=function(O){var q=g;return function(){var K=g;g=q;try{return O.apply(this,arguments)}finally{g=K}}}})(B0)),B0}var gM;function QF(){return gM||(gM=1,I0.exports=ZF()),I0.exports}var z0={exports:{}},er={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yM;function JF(){if(yM)return er;yM=1;var e=Kd();function t(u){var d="https://react.dev/errors/"+u;if(1<arguments.length){d+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)d+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+u+"; visit "+d+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(u,d,h){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:u,containerInfo:d,implementation:h}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(u,d){if(u==="font")return"";if(typeof d=="string")return d==="use-credentials"?d:""}return er.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,er.createPortal=function(u,d){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!d||d.nodeType!==1&&d.nodeType!==9&&d.nodeType!==11)throw Error(t(299));return s(u,d,null,h)},er.flushSync=function(u){var d=o.T,h=r.p;try{if(o.T=null,r.p=2,u)return u()}finally{o.T=d,r.p=h,r.d.f()}},er.preconnect=function(u,d){typeof u=="string"&&(d?(d=d.crossOrigin,d=typeof d=="string"?d==="use-credentials"?d:"":void 0):d=null,r.d.C(u,d))},er.prefetchDNS=function(u){typeof u=="string"&&r.d.D(u)},er.preinit=function(u,d){if(typeof u=="string"&&d&&typeof d.as=="string"){var h=d.as,p=l(h,d.crossOrigin),g=typeof d.integrity=="string"?d.integrity:void 0,b=typeof d.fetchPriority=="string"?d.fetchPriority:void 0;h==="style"?r.d.S(u,typeof d.precedence=="string"?d.precedence:void 0,{crossOrigin:p,integrity:g,fetchPriority:b}):h==="script"&&r.d.X(u,{crossOrigin:p,integrity:g,fetchPriority:b,nonce:typeof d.nonce=="string"?d.nonce:void 0})}},er.preinitModule=function(u,d){if(typeof u=="string")if(typeof d=="object"&&d!==null){if(d.as==null||d.as==="script"){var h=l(d.as,d.crossOrigin);r.d.M(u,{crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0})}}else d==null&&r.d.M(u)},er.preload=function(u,d){if(typeof u=="string"&&typeof d=="object"&&d!==null&&typeof d.as=="string"){var h=d.as,p=l(h,d.crossOrigin);r.d.L(u,h,{crossOrigin:p,integrity:typeof d.integrity=="string"?d.integrity:void 0,nonce:typeof d.nonce=="string"?d.nonce:void 0,type:typeof d.type=="string"?d.type:void 0,fetchPriority:typeof d.fetchPriority=="string"?d.fetchPriority:void 0,referrerPolicy:typeof d.referrerPolicy=="string"?d.referrerPolicy:void 0,imageSrcSet:typeof d.imageSrcSet=="string"?d.imageSrcSet:void 0,imageSizes:typeof d.imageSizes=="string"?d.imageSizes:void 0,media:typeof d.media=="string"?d.media:void 0})}},er.preloadModule=function(u,d){if(typeof u=="string")if(d){var h=l(d.as,d.crossOrigin);r.d.m(u,{as:typeof d.as=="string"&&d.as!=="script"?d.as:void 0,crossOrigin:h,integrity:typeof d.integrity=="string"?d.integrity:void 0})}else r.d.m(u)},er.requestFormReset=function(u){r.d.r(u)},er.unstable_batchedUpdates=function(u,d){return u(d)},er.useFormState=function(u,d,h){return o.H.useFormState(u,d,h)},er.useFormStatus=function(){return o.H.useHostTransitionStatus()},er.version="19.1.1",er}var bM;function uP(){if(bM)return z0.exports;bM=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),z0.exports=JF(),z0.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xM;function eU(){if(xM)return Du;xM=1;var e=QF(),t=Kd(),n=uP();function r(a){var c="https://react.dev/errors/"+a;if(1<arguments.length){c+="?args[]="+encodeURIComponent(arguments[1]);for(var f=2;f<arguments.length;f++)c+="&args[]="+encodeURIComponent(arguments[f])}return"Minified React error #"+a+"; visit "+c+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function s(a){var c=a,f=a;if(a.alternate)for(;c.return;)c=c.return;else{a=c;do c=a,(c.flags&4098)!==0&&(f=c.return),a=c.return;while(a)}return c.tag===3?f:null}function o(a){if(a.tag===13){var c=a.memoizedState;if(c===null&&(a=a.alternate,a!==null&&(c=a.memoizedState)),c!==null)return c.dehydrated}return null}function l(a){if(s(a)!==a)throw Error(r(188))}function u(a){var c=a.alternate;if(!c){if(c=s(a),c===null)throw Error(r(188));return c!==a?null:a}for(var f=a,y=c;;){var x=f.return;if(x===null)break;var C=x.alternate;if(C===null){if(y=x.return,y!==null){f=y;continue}break}if(x.child===C.child){for(C=x.child;C;){if(C===f)return l(x),a;if(C===y)return l(x),c;C=C.sibling}throw Error(r(188))}if(f.return!==y.return)f=x,y=C;else{for(var D=!1,P=x.child;P;){if(P===f){D=!0,f=x,y=C;break}if(P===y){D=!0,y=x,f=C;break}P=P.sibling}if(!D){for(P=C.child;P;){if(P===f){D=!0,f=C,y=x;break}if(P===y){D=!0,y=C,f=x;break}P=P.sibling}if(!D)throw Error(r(189))}}if(f.alternate!==y)throw Error(r(190))}if(f.tag!==3)throw Error(r(188));return f.stateNode.current===f?a:c}function d(a){var c=a.tag;if(c===5||c===26||c===27||c===6)return a;for(a=a.child;a!==null;){if(c=d(a),c!==null)return c;a=a.sibling}return null}var h=Object.assign,p=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),b=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),w=Symbol.for("react.profiler"),k=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),E=Symbol.for("react.context"),N=Symbol.for("react.forward_ref"),A=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),j=Symbol.for("react.memo"),R=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),B=Symbol.for("react.memo_cache_sentinel"),U=Symbol.iterator;function V(a){return a===null||typeof a!="object"?null:(a=U&&a[U]||a["@@iterator"],typeof a=="function"?a:null)}var F=Symbol.for("react.client.reference");function L(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===F?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case v:return"Fragment";case w:return"Profiler";case S:return"StrictMode";case A:return"Suspense";case _:return"SuspenseList";case I:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case b:return"Portal";case E:return(a.displayName||"Context")+".Provider";case T:return(a._context.displayName||"Context")+".Consumer";case N:var c=a.render;return a=a.displayName,a||(a=c.displayName||c.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case j:return c=a.displayName||null,c!==null?c:L(a.type)||"Memo";case R:c=a._payload,a=a._init;try{return L(a(c))}catch{}}return null}var H=Array.isArray,O=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,q=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,K={pending:!1,data:null,method:null,action:null},te=[],z=-1;function G(a){return{current:a}}function oe(a){0>z||(a.current=te[z],te[z]=null,z--)}function ae(a,c){z++,te[z]=a.current,a.current=c}var $=G(null),Q=G(null),ee=G(null),de=G(null);function le(a,c){switch(ae(ee,c),ae(Q,a),ae($,null),c.nodeType){case 9:case 11:a=(a=c.documentElement)&&(a=a.namespaceURI)?zA(a):0;break;default:if(a=c.tagName,c=c.namespaceURI)c=zA(c),a=VA(c,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}oe($),ae($,a)}function xe(){oe($),oe(Q),oe(ee)}function _e(a){a.memoizedState!==null&&ae(de,a);var c=$.current,f=VA(c,a.type);c!==f&&(ae(Q,a),ae($,f))}function Be(a){Q.current===a&&(oe($),oe(Q)),de.current===a&&(oe(de),Eu._currentValue=K)}var Pe=Object.prototype.hasOwnProperty,Te=e.unstable_scheduleCallback,ke=e.unstable_cancelCallback,Ee=e.unstable_shouldYield,ht=e.unstable_requestPaint,Oe=e.unstable_now,mt=e.unstable_getCurrentPriorityLevel,bt=e.unstable_ImmediatePriority,$t=e.unstable_UserBlockingPriority,un=e.unstable_NormalPriority,zt=e.unstable_LowPriority,Nt=e.unstable_IdlePriority,kn=e.log,dn=e.unstable_setDisableYieldValue,Ot=null,ut=null;function Tt(a){if(typeof kn=="function"&&dn(a),ut&&typeof ut.setStrictMode=="function")try{ut.setStrictMode(Ot,a)}catch{}}var At=Math.clz32?Math.clz32:vi,sr=Math.log,Ar=Math.LN2;function vi(a){return a>>>=0,a===0?32:31-(sr(a)/Ar|0)|0}var Zt=256,Le=4194304;function Fe(a){var c=a&42;if(c!==0)return c;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function or(a,c,f){var y=a.pendingLanes;if(y===0)return 0;var x=0,C=a.suspendedLanes,D=a.pingedLanes;a=a.warmLanes;var P=y&134217727;return P!==0?(y=P&~C,y!==0?x=Fe(y):(D&=P,D!==0?x=Fe(D):f||(f=P&~a,f!==0&&(x=Fe(f))))):(P=y&~C,P!==0?x=Fe(P):D!==0?x=Fe(D):f||(f=y&~a,f!==0&&(x=Fe(f)))),x===0?0:c!==0&&c!==x&&(c&C)===0&&(C=x&-x,f=c&-c,C>=f||C===32&&(f&4194048)!==0)?c:x}function dt(a,c){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&c)===0}function fn(a,c){switch(a){case 1:case 2:case 4:case 8:case 64:return c+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return c+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Fs(){var a=Zt;return Zt<<=1,(Zt&4194048)===0&&(Zt=256),a}function wi(){var a=Le;return Le<<=1,(Le&62914560)===0&&(Le=4194304),a}function Mr(a){for(var c=[],f=0;31>f;f++)c.push(a);return c}function _r(a,c){a.pendingLanes|=c,c!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function ar(a,c,f,y,x,C){var D=a.pendingLanes;a.pendingLanes=f,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=f,a.entangledLanes&=f,a.errorRecoveryDisabledLanes&=f,a.shellSuspendCounter=0;var P=a.entanglements,W=a.expirationTimes,se=a.hiddenUpdates;for(f=D&~f;0<f;){var fe=31-At(f),me=1<<fe;P[fe]=0,W[fe]=-1;var ce=se[fe];if(ce!==null)for(se[fe]=null,fe=0;fe<ce.length;fe++){var ue=ce[fe];ue!==null&&(ue.lane&=-536870913)}f&=~me}y!==0&&yr(a,y,0),C!==0&&x===0&&a.tag!==0&&(a.suspendedLanes|=C&~(D&~c))}function yr(a,c,f){a.pendingLanes|=c,a.suspendedLanes&=~c;var y=31-At(c);a.entangledLanes|=c,a.entanglements[y]=a.entanglements[y]|1073741824|f&4194090}function Dr(a,c){var f=a.entangledLanes|=c;for(a=a.entanglements;f;){var y=31-At(f),x=1<<y;x&c|a[y]&c&&(a[y]|=c),f&=~x}}function xt(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function Bn(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Us(){var a=q.p;return a!==0?a:(a=window.event,a===void 0?32:sM(a.type))}function Si(a,c){var f=q.p;try{return q.p=a,c()}finally{q.p=f}}var Kn=Math.random().toString(36).slice(2),Gt="__reactFiber$"+Kn,Lt="__reactProps$"+Kn,br="__reactContainer$"+Kn,En="__reactEvents$"+Kn,Rr="__reactListeners$"+Kn,Ii="__reactHandles$"+Kn,us="__reactResources$"+Kn,jr="__reactMarker$"+Kn;function Bi(a){delete a[Gt],delete a[Lt],delete a[En],delete a[Rr],delete a[Ii]}function hn(a){var c=a[Gt];if(c)return c;for(var f=a.parentNode;f;){if(c=f[br]||f[Gt]){if(f=c.alternate,c.child!==null||f!==null&&f.child!==null)for(a=UA(a);a!==null;){if(f=a[Gt])return f;a=UA(a)}return c}a=f,f=a.parentNode}return null}function qe(a){if(a=a[Gt]||a[br]){var c=a.tag;if(c===5||c===6||c===13||c===26||c===27||c===3)return a}return null}function Yn(a){var c=a.tag;if(c===5||c===26||c===27||c===6)return a.stateNode;throw Error(r(33))}function Xn(a){var c=a[us];return c||(c=a[us]={hoistableStyles:new Map,hoistableScripts:new Map}),c}function Rt(a){a[jr]=!0}var zi=new Set,De={};function Z(a,c){ge(a,c),ge(a+"Capture",c)}function ge(a,c){for(De[a]=c,a=0;a<c.length;a++)zi.add(c[a])}var Me=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),lt={},Pt={};function Mt(a){return Pe.call(Pt,a)?!0:Pe.call(lt,a)?!1:Me.test(a)?Pt[a]=!0:(lt[a]=!0,!1)}function Vt(a,c,f){if(Mt(c))if(f===null)a.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":a.removeAttribute(c);return;case"boolean":var y=c.toLowerCase().slice(0,5);if(y!=="data-"&&y!=="aria-"){a.removeAttribute(c);return}}a.setAttribute(c,""+f)}}function _n(a,c,f){if(f===null)a.removeAttribute(c);else{switch(typeof f){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(c);return}a.setAttribute(c,""+f)}}function pn(a,c,f,y){if(y===null)a.removeAttribute(f);else{switch(typeof y){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(f);return}a.setAttributeNS(c,f,""+y)}}var Xr,It;function zn(a){if(Xr===void 0)try{throw Error()}catch(f){var c=f.stack.trim().match(/\n( *(at )?)/);Xr=c&&c[1]||"",It=-1<f.stack.indexOf(`
    at`)?" (<anonymous>)":-1<f.stack.indexOf("@")?"@unknown:0:0":""}return`
`+Xr+a+It}var Vi=!1;function Ko(a,c){if(!a||Vi)return"";Vi=!0;var f=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var y={DetermineComponentFrameRoot:function(){try{if(c){var me=function(){throw Error()};if(Object.defineProperty(me.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(me,[])}catch(ue){var ce=ue}Reflect.construct(a,[],me)}else{try{me.call()}catch(ue){ce=ue}a.call(me.prototype)}}else{try{throw Error()}catch(ue){ce=ue}(me=a())&&typeof me.catch=="function"&&me.catch(function(){})}}catch(ue){if(ue&&ce&&typeof ue.stack=="string")return[ue.stack,ce.stack]}return[null,null]}};y.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var x=Object.getOwnPropertyDescriptor(y.DetermineComponentFrameRoot,"name");x&&x.configurable&&Object.defineProperty(y.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var C=y.DetermineComponentFrameRoot(),D=C[0],P=C[1];if(D&&P){var W=D.split(`
`),se=P.split(`
`);for(x=y=0;y<W.length&&!W[y].includes("DetermineComponentFrameRoot");)y++;for(;x<se.length&&!se[x].includes("DetermineComponentFrameRoot");)x++;if(y===W.length||x===se.length)for(y=W.length-1,x=se.length-1;1<=y&&0<=x&&W[y]!==se[x];)x--;for(;1<=y&&0<=x;y--,x--)if(W[y]!==se[x]){if(y!==1||x!==1)do if(y--,x--,0>x||W[y]!==se[x]){var fe=`
`+W[y].replace(" at new "," at ");return a.displayName&&fe.includes("<anonymous>")&&(fe=fe.replace("<anonymous>",a.displayName)),fe}while(1<=y&&0<=x);break}}}finally{Vi=!1,Error.prepareStackTrace=f}return(f=a?a.displayName||a.name:"")?zn(f):""}function il(a){switch(a.tag){case 26:case 27:case 5:return zn(a.type);case 16:return zn("Lazy");case 13:return zn("Suspense");case 19:return zn("SuspenseList");case 0:case 15:return Ko(a.type,!1);case 11:return Ko(a.type.render,!1);case 1:return Ko(a.type,!0);case 31:return zn("Activity");default:return""}}function sl(a){try{var c="";do c+=il(a),a=a.return;while(a);return c}catch(f){return`
Error generating stack: `+f.message+`
`+f.stack}}function Zn(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function ol(a){var c=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(c==="checkbox"||c==="radio")}function Lc(a){var c=ol(a)?"checked":"value",f=Object.getOwnPropertyDescriptor(a.constructor.prototype,c),y=""+a[c];if(!a.hasOwnProperty(c)&&typeof f<"u"&&typeof f.get=="function"&&typeof f.set=="function"){var x=f.get,C=f.set;return Object.defineProperty(a,c,{configurable:!0,get:function(){return x.call(this)},set:function(D){y=""+D,C.call(this,D)}}),Object.defineProperty(a,c,{enumerable:f.enumerable}),{getValue:function(){return y},setValue:function(D){y=""+D},stopTracking:function(){a._valueTracker=null,delete a[c]}}}}function $s(a){a._valueTracker||(a._valueTracker=Lc(a))}function qi(a){if(!a)return!1;var c=a._valueTracker;if(!c)return!0;var f=c.getValue(),y="";return a&&(y=ol(a)?a.checked?"true":"false":a.value),a=y,a!==f?(c.setValue(a),!0):!1}function Hi(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var Gs=/[\n"\\]/g;function Qn(a){return a.replace(Gs,function(c){return"\\"+c.charCodeAt(0).toString(16)+" "})}function Or(a,c,f,y,x,C,D,P){a.name="",D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?a.type=D:a.removeAttribute("type"),c!=null?D==="number"?(c===0&&a.value===""||a.value!=c)&&(a.value=""+Zn(c)):a.value!==""+Zn(c)&&(a.value=""+Zn(c)):D!=="submit"&&D!=="reset"||a.removeAttribute("value"),c!=null?Ws(a,D,Zn(c)):f!=null?Ws(a,D,Zn(f)):y!=null&&a.removeAttribute("value"),x==null&&C!=null&&(a.defaultChecked=!!C),x!=null&&(a.checked=x&&typeof x!="function"&&typeof x!="symbol"),P!=null&&typeof P!="function"&&typeof P!="symbol"&&typeof P!="boolean"?a.name=""+Zn(P):a.removeAttribute("name")}function Yo(a,c,f,y,x,C,D,P){if(C!=null&&typeof C!="function"&&typeof C!="symbol"&&typeof C!="boolean"&&(a.type=C),c!=null||f!=null){if(!(C!=="submit"&&C!=="reset"||c!=null))return;f=f!=null?""+Zn(f):"",c=c!=null?""+Zn(c):f,P||c===a.value||(a.value=c),a.defaultValue=c}y=y??x,y=typeof y!="function"&&typeof y!="symbol"&&!!y,a.checked=P?a.checked:!!y,a.defaultChecked=!!y,D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"&&(a.name=D)}function Ws(a,c,f){c==="number"&&Hi(a.ownerDocument)===a||a.defaultValue===""+f||(a.defaultValue=""+f)}function Zr(a,c,f,y){if(a=a.options,c){c={};for(var x=0;x<f.length;x++)c["$"+f[x]]=!0;for(f=0;f<a.length;f++)x=c.hasOwnProperty("$"+a[f].value),a[f].selected!==x&&(a[f].selected=x),x&&y&&(a[f].defaultSelected=!0)}else{for(f=""+Zn(f),c=null,x=0;x<a.length;x++){if(a[x].value===f){a[x].selected=!0,y&&(a[x].defaultSelected=!0);return}c!==null||a[x].disabled||(c=a[x])}c!==null&&(c.selected=!0)}}function xf(a,c,f){if(c!=null&&(c=""+Zn(c),c!==a.value&&(a.value=c),f==null)){a.defaultValue!==c&&(a.defaultValue=c);return}a.defaultValue=f!=null?""+Zn(f):""}function vf(a,c,f,y){if(c==null){if(y!=null){if(f!=null)throw Error(r(92));if(H(y)){if(1<y.length)throw Error(r(93));y=y[0]}f=y}f==null&&(f=""),c=f}f=Zn(c),a.defaultValue=f,y=a.textContent,y===f&&y!==""&&y!==null&&(a.value=y)}function Qr(a,c){if(c){var f=a.firstChild;if(f&&f===a.lastChild&&f.nodeType===3){f.nodeValue=c;return}}a.textContent=c}var Bg=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function wf(a,c,f){var y=c.indexOf("--")===0;f==null||typeof f=="boolean"||f===""?y?a.setProperty(c,""):c==="float"?a.cssFloat="":a[c]="":y?a.setProperty(c,f):typeof f!="number"||f===0||Bg.has(c)?c==="float"?a.cssFloat=f:a[c]=(""+f).trim():a[c]=f+"px"}function Sf(a,c,f){if(c!=null&&typeof c!="object")throw Error(r(62));if(a=a.style,f!=null){for(var y in f)!f.hasOwnProperty(y)||c!=null&&c.hasOwnProperty(y)||(y.indexOf("--")===0?a.setProperty(y,""):y==="float"?a.cssFloat="":a[y]="");for(var x in c)y=c[x],c.hasOwnProperty(x)&&f[x]!==y&&wf(a,x,y)}else for(var C in c)c.hasOwnProperty(C)&&wf(a,C,c[C])}function Pc(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Cf=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),zg=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function al(a){return zg.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var Ic=null;function Xo(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var Ks=null,Ys=null;function kf(a){var c=qe(a);if(c&&(a=c.stateNode)){var f=a[Lt]||null;e:switch(a=c.stateNode,c.type){case"input":if(Or(a,f.value,f.defaultValue,f.defaultValue,f.checked,f.defaultChecked,f.type,f.name),c=f.name,f.type==="radio"&&c!=null){for(f=a;f.parentNode;)f=f.parentNode;for(f=f.querySelectorAll('input[name="'+Qn(""+c)+'"][type="radio"]'),c=0;c<f.length;c++){var y=f[c];if(y!==a&&y.form===a.form){var x=y[Lt]||null;if(!x)throw Error(r(90));Or(y,x.value,x.defaultValue,x.defaultValue,x.checked,x.defaultChecked,x.type,x.name)}}for(c=0;c<f.length;c++)y=f[c],y.form===a.form&&qi(y)}break e;case"textarea":xf(a,f.value,f.defaultValue);break e;case"select":c=f.value,c!=null&&Zr(a,!!f.multiple,c,!1)}}}var Bc=!1;function Ef(a,c,f){if(Bc)return a(c,f);Bc=!0;try{var y=a(c);return y}finally{if(Bc=!1,(Ks!==null||Ys!==null)&&(lh(),Ks&&(c=Ks,a=Ys,Ys=Ks=null,kf(c),a)))for(c=0;c<a.length;c++)kf(a[c])}}function Zo(a,c){var f=a.stateNode;if(f===null)return null;var y=f[Lt]||null;if(y===null)return null;f=y[c];e:switch(c){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(y=!y.disabled)||(a=a.type,y=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!y;break e;default:a=!1}if(a)return null;if(f&&typeof f!="function")throw Error(r(231,c,typeof f));return f}var Ci=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),zc=!1;if(Ci)try{var Qo={};Object.defineProperty(Qo,"passive",{get:function(){zc=!0}}),window.addEventListener("test",Qo,Qo),window.removeEventListener("test",Qo,Qo)}catch{zc=!1}var Fi=null,Vc=null,Jo=null;function Nf(){if(Jo)return Jo;var a,c=Vc,f=c.length,y,x="value"in Fi?Fi.value:Fi.textContent,C=x.length;for(a=0;a<f&&c[a]===x[a];a++);var D=f-a;for(y=1;y<=D&&c[f-y]===x[C-y];y++);return Jo=x.slice(a,1<y?1-y:void 0)}function ll(a){var c=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&c===13&&(a=13)):a=c,a===10&&(a=13),32<=a||a===13?a:0}function cl(){return!0}function Y(){return!1}function X(a){function c(f,y,x,C,D){this._reactName=f,this._targetInst=x,this.type=y,this.nativeEvent=C,this.target=D,this.currentTarget=null;for(var P in a)a.hasOwnProperty(P)&&(f=a[P],this[P]=f?f(C):C[P]);return this.isDefaultPrevented=(C.defaultPrevented!=null?C.defaultPrevented:C.returnValue===!1)?cl:Y,this.isPropagationStopped=Y,this}return h(c.prototype,{preventDefault:function(){this.defaultPrevented=!0;var f=this.nativeEvent;f&&(f.preventDefault?f.preventDefault():typeof f.returnValue!="unknown"&&(f.returnValue=!1),this.isDefaultPrevented=cl)},stopPropagation:function(){var f=this.nativeEvent;f&&(f.stopPropagation?f.stopPropagation():typeof f.cancelBubble!="unknown"&&(f.cancelBubble=!0),this.isPropagationStopped=cl)},persist:function(){},isPersistent:cl}),c}var ie={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},pe=X(ie),be=h({},ie,{view:0,detail:0}),we=X(be),Se,Ke,Ze,Re=h({},be,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hg,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Ze&&(Ze&&a.type==="mousemove"?(Se=a.screenX-Ze.screenX,Ke=a.screenY-Ze.screenY):Ke=Se=0,Ze=a),Se)},movementY:function(a){return"movementY"in a?a.movementY:Ke}}),Xe=X(Re),gt=h({},Re,{dataTransfer:0}),Vg=X(gt),qg=h({},be,{relatedTarget:0}),qc=X(qg),Tf=h({},ie,{animationName:0,elapsedTime:0,pseudoElement:0}),Vn=X(Tf),Jr=h({},ie,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),Af=X(Jr),eH=h({},ie,{data:0}),G2=X(eH),tH={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},nH={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},rH={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function iH(a){var c=this.nativeEvent;return c.getModifierState?c.getModifierState(a):(a=rH[a])?!!c[a]:!1}function Hg(){return iH}var sH=h({},be,{key:function(a){if(a.key){var c=tH[a.key]||a.key;if(c!=="Unidentified")return c}return a.type==="keypress"?(a=ll(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?nH[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hg,charCode:function(a){return a.type==="keypress"?ll(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?ll(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),oH=X(sH),aH=h({},Re,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),W2=X(aH),lH=h({},be,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hg}),cH=X(lH),uH=h({},ie,{propertyName:0,elapsedTime:0,pseudoElement:0}),dH=X(uH),fH=h({},Re,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),hH=X(fH),pH=h({},ie,{newState:0,oldState:0}),mH=X(pH),gH=[9,13,27,32],Fg=Ci&&"CompositionEvent"in window,Hc=null;Ci&&"documentMode"in document&&(Hc=document.documentMode);var yH=Ci&&"TextEvent"in window&&!Hc,K2=Ci&&(!Fg||Hc&&8<Hc&&11>=Hc),Y2=" ",X2=!1;function Z2(a,c){switch(a){case"keyup":return gH.indexOf(c.keyCode)!==-1;case"keydown":return c.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Q2(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var ul=!1;function bH(a,c){switch(a){case"compositionend":return Q2(c);case"keypress":return c.which!==32?null:(X2=!0,Y2);case"textInput":return a=c.data,a===Y2&&X2?null:a;default:return null}}function xH(a,c){if(ul)return a==="compositionend"||!Fg&&Z2(a,c)?(a=Nf(),Jo=Vc=Fi=null,ul=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(c.ctrlKey||c.altKey||c.metaKey)||c.ctrlKey&&c.altKey){if(c.char&&1<c.char.length)return c.char;if(c.which)return String.fromCharCode(c.which)}return null;case"compositionend":return K2&&c.locale!=="ko"?null:c.data;default:return null}}var vH={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function J2(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c==="input"?!!vH[a.type]:c==="textarea"}function eN(a,c,f,y){Ks?Ys?Ys.push(y):Ys=[y]:Ks=y,c=ph(c,"onChange"),0<c.length&&(f=new pe("onChange","change",null,f,y),a.push({event:f,listeners:c}))}var Fc=null,Uc=null;function wH(a){OA(a,0)}function Mf(a){var c=Yn(a);if(qi(c))return a}function tN(a,c){if(a==="change")return c}var nN=!1;if(Ci){var Ug;if(Ci){var $g="oninput"in document;if(!$g){var rN=document.createElement("div");rN.setAttribute("oninput","return;"),$g=typeof rN.oninput=="function"}Ug=$g}else Ug=!1;nN=Ug&&(!document.documentMode||9<document.documentMode)}function iN(){Fc&&(Fc.detachEvent("onpropertychange",sN),Uc=Fc=null)}function sN(a){if(a.propertyName==="value"&&Mf(Uc)){var c=[];eN(c,Uc,a,Xo(a)),Ef(wH,c)}}function SH(a,c,f){a==="focusin"?(iN(),Fc=c,Uc=f,Fc.attachEvent("onpropertychange",sN)):a==="focusout"&&iN()}function CH(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return Mf(Uc)}function kH(a,c){if(a==="click")return Mf(c)}function EH(a,c){if(a==="input"||a==="change")return Mf(c)}function NH(a,c){return a===c&&(a!==0||1/a===1/c)||a!==a&&c!==c}var Lr=typeof Object.is=="function"?Object.is:NH;function $c(a,c){if(Lr(a,c))return!0;if(typeof a!="object"||a===null||typeof c!="object"||c===null)return!1;var f=Object.keys(a),y=Object.keys(c);if(f.length!==y.length)return!1;for(y=0;y<f.length;y++){var x=f[y];if(!Pe.call(c,x)||!Lr(a[x],c[x]))return!1}return!0}function oN(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function aN(a,c){var f=oN(a);a=0;for(var y;f;){if(f.nodeType===3){if(y=a+f.textContent.length,a<=c&&y>=c)return{node:f,offset:c-a};a=y}e:{for(;f;){if(f.nextSibling){f=f.nextSibling;break e}f=f.parentNode}f=void 0}f=oN(f)}}function lN(a,c){return a&&c?a===c?!0:a&&a.nodeType===3?!1:c&&c.nodeType===3?lN(a,c.parentNode):"contains"in a?a.contains(c):a.compareDocumentPosition?!!(a.compareDocumentPosition(c)&16):!1:!1}function cN(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var c=Hi(a.document);c instanceof a.HTMLIFrameElement;){try{var f=typeof c.contentWindow.location.href=="string"}catch{f=!1}if(f)a=c.contentWindow;else break;c=Hi(a.document)}return c}function Gg(a){var c=a&&a.nodeName&&a.nodeName.toLowerCase();return c&&(c==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||c==="textarea"||a.contentEditable==="true")}var TH=Ci&&"documentMode"in document&&11>=document.documentMode,dl=null,Wg=null,Gc=null,Kg=!1;function uN(a,c,f){var y=f.window===f?f.document:f.nodeType===9?f:f.ownerDocument;Kg||dl==null||dl!==Hi(y)||(y=dl,"selectionStart"in y&&Gg(y)?y={start:y.selectionStart,end:y.selectionEnd}:(y=(y.ownerDocument&&y.ownerDocument.defaultView||window).getSelection(),y={anchorNode:y.anchorNode,anchorOffset:y.anchorOffset,focusNode:y.focusNode,focusOffset:y.focusOffset}),Gc&&$c(Gc,y)||(Gc=y,y=ph(Wg,"onSelect"),0<y.length&&(c=new pe("onSelect","select",null,c,f),a.push({event:c,listeners:y}),c.target=dl)))}function ea(a,c){var f={};return f[a.toLowerCase()]=c.toLowerCase(),f["Webkit"+a]="webkit"+c,f["Moz"+a]="moz"+c,f}var fl={animationend:ea("Animation","AnimationEnd"),animationiteration:ea("Animation","AnimationIteration"),animationstart:ea("Animation","AnimationStart"),transitionrun:ea("Transition","TransitionRun"),transitionstart:ea("Transition","TransitionStart"),transitioncancel:ea("Transition","TransitionCancel"),transitionend:ea("Transition","TransitionEnd")},Yg={},dN={};Ci&&(dN=document.createElement("div").style,"AnimationEvent"in window||(delete fl.animationend.animation,delete fl.animationiteration.animation,delete fl.animationstart.animation),"TransitionEvent"in window||delete fl.transitionend.transition);function ta(a){if(Yg[a])return Yg[a];if(!fl[a])return a;var c=fl[a],f;for(f in c)if(c.hasOwnProperty(f)&&f in dN)return Yg[a]=c[f];return a}var fN=ta("animationend"),hN=ta("animationiteration"),pN=ta("animationstart"),AH=ta("transitionrun"),MH=ta("transitionstart"),_H=ta("transitioncancel"),mN=ta("transitionend"),gN=new Map,Xg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");Xg.push("scrollEnd");function ki(a,c){gN.set(a,c),Z(c,[a])}var yN=new WeakMap;function ei(a,c){if(typeof a=="object"&&a!==null){var f=yN.get(a);return f!==void 0?f:(c={value:a,source:c,stack:sl(c)},yN.set(a,c),c)}return{value:a,source:c,stack:sl(c)}}var ti=[],hl=0,Zg=0;function _f(){for(var a=hl,c=Zg=hl=0;c<a;){var f=ti[c];ti[c++]=null;var y=ti[c];ti[c++]=null;var x=ti[c];ti[c++]=null;var C=ti[c];if(ti[c++]=null,y!==null&&x!==null){var D=y.pending;D===null?x.next=x:(x.next=D.next,D.next=x),y.pending=x}C!==0&&bN(f,x,C)}}function Df(a,c,f,y){ti[hl++]=a,ti[hl++]=c,ti[hl++]=f,ti[hl++]=y,Zg|=y,a.lanes|=y,a=a.alternate,a!==null&&(a.lanes|=y)}function Qg(a,c,f,y){return Df(a,c,f,y),Rf(a)}function pl(a,c){return Df(a,null,null,c),Rf(a)}function bN(a,c,f){a.lanes|=f;var y=a.alternate;y!==null&&(y.lanes|=f);for(var x=!1,C=a.return;C!==null;)C.childLanes|=f,y=C.alternate,y!==null&&(y.childLanes|=f),C.tag===22&&(a=C.stateNode,a===null||a._visibility&1||(x=!0)),a=C,C=C.return;return a.tag===3?(C=a.stateNode,x&&c!==null&&(x=31-At(f),a=C.hiddenUpdates,y=a[x],y===null?a[x]=[c]:y.push(c),c.lane=f|536870912),C):null}function Rf(a){if(50<yu)throw yu=0,i0=null,Error(r(185));for(var c=a.return;c!==null;)a=c,c=a.return;return a.tag===3?a.stateNode:null}var ml={};function DH(a,c,f,y){this.tag=a,this.key=f,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=c,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=y,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Pr(a,c,f,y){return new DH(a,c,f,y)}function Jg(a){return a=a.prototype,!(!a||!a.isReactComponent)}function ds(a,c){var f=a.alternate;return f===null?(f=Pr(a.tag,c,a.key,a.mode),f.elementType=a.elementType,f.type=a.type,f.stateNode=a.stateNode,f.alternate=a,a.alternate=f):(f.pendingProps=c,f.type=a.type,f.flags=0,f.subtreeFlags=0,f.deletions=null),f.flags=a.flags&65011712,f.childLanes=a.childLanes,f.lanes=a.lanes,f.child=a.child,f.memoizedProps=a.memoizedProps,f.memoizedState=a.memoizedState,f.updateQueue=a.updateQueue,c=a.dependencies,f.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext},f.sibling=a.sibling,f.index=a.index,f.ref=a.ref,f.refCleanup=a.refCleanup,f}function xN(a,c){a.flags&=65011714;var f=a.alternate;return f===null?(a.childLanes=0,a.lanes=c,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=f.childLanes,a.lanes=f.lanes,a.child=f.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=f.memoizedProps,a.memoizedState=f.memoizedState,a.updateQueue=f.updateQueue,a.type=f.type,c=f.dependencies,a.dependencies=c===null?null:{lanes:c.lanes,firstContext:c.firstContext}),a}function jf(a,c,f,y,x,C){var D=0;if(y=a,typeof a=="function")Jg(a)&&(D=1);else if(typeof a=="string")D=jF(a,f,$.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case I:return a=Pr(31,f,c,x),a.elementType=I,a.lanes=C,a;case v:return na(f.children,x,C,c);case S:D=8,x|=24;break;case w:return a=Pr(12,f,c,x|2),a.elementType=w,a.lanes=C,a;case A:return a=Pr(13,f,c,x),a.elementType=A,a.lanes=C,a;case _:return a=Pr(19,f,c,x),a.elementType=_,a.lanes=C,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case k:case E:D=10;break e;case T:D=9;break e;case N:D=11;break e;case j:D=14;break e;case R:D=16,y=null;break e}D=29,f=Error(r(130,a===null?"null":typeof a,"")),y=null}return c=Pr(D,f,c,x),c.elementType=a,c.type=y,c.lanes=C,c}function na(a,c,f,y){return a=Pr(7,a,y,c),a.lanes=f,a}function ey(a,c,f){return a=Pr(6,a,null,c),a.lanes=f,a}function ty(a,c,f){return c=Pr(4,a.children!==null?a.children:[],a.key,c),c.lanes=f,c.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},c}var gl=[],yl=0,Of=null,Lf=0,ni=[],ri=0,ra=null,fs=1,hs="";function ia(a,c){gl[yl++]=Lf,gl[yl++]=Of,Of=a,Lf=c}function vN(a,c,f){ni[ri++]=fs,ni[ri++]=hs,ni[ri++]=ra,ra=a;var y=fs;a=hs;var x=32-At(y)-1;y&=~(1<<x),f+=1;var C=32-At(c)+x;if(30<C){var D=x-x%5;C=(y&(1<<D)-1).toString(32),y>>=D,x-=D,fs=1<<32-At(c)+x|f<<x|y,hs=C+a}else fs=1<<C|f<<x|y,hs=a}function ny(a){a.return!==null&&(ia(a,1),vN(a,1,0))}function ry(a){for(;a===Of;)Of=gl[--yl],gl[yl]=null,Lf=gl[--yl],gl[yl]=null;for(;a===ra;)ra=ni[--ri],ni[ri]=null,hs=ni[--ri],ni[ri]=null,fs=ni[--ri],ni[ri]=null}var lr=null,Qt=null,yt=!1,sa=null,Ui=!1,iy=Error(r(519));function oa(a){var c=Error(r(418,""));throw Yc(ei(c,a)),iy}function wN(a){var c=a.stateNode,f=a.type,y=a.memoizedProps;switch(c[Gt]=a,c[Lt]=y,f){case"dialog":it("cancel",c),it("close",c);break;case"iframe":case"object":case"embed":it("load",c);break;case"video":case"audio":for(f=0;f<xu.length;f++)it(xu[f],c);break;case"source":it("error",c);break;case"img":case"image":case"link":it("error",c),it("load",c);break;case"details":it("toggle",c);break;case"input":it("invalid",c),Yo(c,y.value,y.defaultValue,y.checked,y.defaultChecked,y.type,y.name,!0),$s(c);break;case"select":it("invalid",c);break;case"textarea":it("invalid",c),vf(c,y.value,y.defaultValue,y.children),$s(c)}f=y.children,typeof f!="string"&&typeof f!="number"&&typeof f!="bigint"||c.textContent===""+f||y.suppressHydrationWarning===!0||BA(c.textContent,f)?(y.popover!=null&&(it("beforetoggle",c),it("toggle",c)),y.onScroll!=null&&it("scroll",c),y.onScrollEnd!=null&&it("scrollend",c),y.onClick!=null&&(c.onclick=mh),c=!0):c=!1,c||oa(a)}function SN(a){for(lr=a.return;lr;)switch(lr.tag){case 5:case 13:Ui=!1;return;case 27:case 3:Ui=!0;return;default:lr=lr.return}}function Wc(a){if(a!==lr)return!1;if(!yt)return SN(a),yt=!0,!1;var c=a.tag,f;if((f=c!==3&&c!==27)&&((f=c===5)&&(f=a.type,f=!(f!=="form"&&f!=="button")||v0(a.type,a.memoizedProps)),f=!f),f&&Qt&&oa(a),SN(a),c===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));e:{for(a=a.nextSibling,c=0;a;){if(a.nodeType===8)if(f=a.data,f==="/$"){if(c===0){Qt=Ni(a.nextSibling);break e}c--}else f!=="$"&&f!=="$!"&&f!=="$?"||c++;a=a.nextSibling}Qt=null}}else c===27?(c=Qt,fo(a.type)?(a=k0,k0=null,Qt=a):Qt=c):Qt=lr?Ni(a.stateNode.nextSibling):null;return!0}function Kc(){Qt=lr=null,yt=!1}function CN(){var a=sa;return a!==null&&(wr===null?wr=a:wr.push.apply(wr,a),sa=null),a}function Yc(a){sa===null?sa=[a]:sa.push(a)}var sy=G(null),aa=null,ps=null;function Xs(a,c,f){ae(sy,c._currentValue),c._currentValue=f}function ms(a){a._currentValue=sy.current,oe(sy)}function oy(a,c,f){for(;a!==null;){var y=a.alternate;if((a.childLanes&c)!==c?(a.childLanes|=c,y!==null&&(y.childLanes|=c)):y!==null&&(y.childLanes&c)!==c&&(y.childLanes|=c),a===f)break;a=a.return}}function ay(a,c,f,y){var x=a.child;for(x!==null&&(x.return=a);x!==null;){var C=x.dependencies;if(C!==null){var D=x.child;C=C.firstContext;e:for(;C!==null;){var P=C;C=x;for(var W=0;W<c.length;W++)if(P.context===c[W]){C.lanes|=f,P=C.alternate,P!==null&&(P.lanes|=f),oy(C.return,f,a),y||(D=null);break e}C=P.next}}else if(x.tag===18){if(D=x.return,D===null)throw Error(r(341));D.lanes|=f,C=D.alternate,C!==null&&(C.lanes|=f),oy(D,f,a),D=null}else D=x.child;if(D!==null)D.return=x;else for(D=x;D!==null;){if(D===a){D=null;break}if(x=D.sibling,x!==null){x.return=D.return,D=x;break}D=D.return}x=D}}function Xc(a,c,f,y){a=null;for(var x=c,C=!1;x!==null;){if(!C){if((x.flags&524288)!==0)C=!0;else if((x.flags&262144)!==0)break}if(x.tag===10){var D=x.alternate;if(D===null)throw Error(r(387));if(D=D.memoizedProps,D!==null){var P=x.type;Lr(x.pendingProps.value,D.value)||(a!==null?a.push(P):a=[P])}}else if(x===de.current){if(D=x.alternate,D===null)throw Error(r(387));D.memoizedState.memoizedState!==x.memoizedState.memoizedState&&(a!==null?a.push(Eu):a=[Eu])}x=x.return}a!==null&&ay(c,a,f,y),c.flags|=262144}function Pf(a){for(a=a.firstContext;a!==null;){if(!Lr(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function la(a){aa=a,ps=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function Jn(a){return kN(aa,a)}function If(a,c){return aa===null&&la(a),kN(a,c)}function kN(a,c){var f=c._currentValue;if(c={context:c,memoizedValue:f,next:null},ps===null){if(a===null)throw Error(r(308));ps=c,a.dependencies={lanes:0,firstContext:c},a.flags|=524288}else ps=ps.next=c;return f}var RH=typeof AbortController<"u"?AbortController:function(){var a=[],c=this.signal={aborted:!1,addEventListener:function(f,y){a.push(y)}};this.abort=function(){c.aborted=!0,a.forEach(function(f){return f()})}},jH=e.unstable_scheduleCallback,OH=e.unstable_NormalPriority,Nn={$$typeof:E,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function ly(){return{controller:new RH,data:new Map,refCount:0}}function Zc(a){a.refCount--,a.refCount===0&&jH(OH,function(){a.controller.abort()})}var Qc=null,cy=0,bl=0,xl=null;function LH(a,c){if(Qc===null){var f=Qc=[];cy=0,bl=d0(),xl={status:"pending",value:void 0,then:function(y){f.push(y)}}}return cy++,c.then(EN,EN),c}function EN(){if(--cy===0&&Qc!==null){xl!==null&&(xl.status="fulfilled");var a=Qc;Qc=null,bl=0,xl=null;for(var c=0;c<a.length;c++)(0,a[c])()}}function PH(a,c){var f=[],y={status:"pending",value:null,reason:null,then:function(x){f.push(x)}};return a.then(function(){y.status="fulfilled",y.value=c;for(var x=0;x<f.length;x++)(0,f[x])(c)},function(x){for(y.status="rejected",y.reason=x,x=0;x<f.length;x++)(0,f[x])(void 0)}),y}var NN=O.S;O.S=function(a,c){typeof c=="object"&&c!==null&&typeof c.then=="function"&&LH(a,c),NN!==null&&NN(a,c)};var ca=G(null);function uy(){var a=ca.current;return a!==null?a:jt.pooledCache}function Bf(a,c){c===null?ae(ca,ca.current):ae(ca,c.pool)}function TN(){var a=uy();return a===null?null:{parent:Nn._currentValue,pool:a}}var Jc=Error(r(460)),AN=Error(r(474)),zf=Error(r(542)),dy={then:function(){}};function MN(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Vf(){}function _N(a,c,f){switch(f=a[f],f===void 0?a.push(c):f!==c&&(c.then(Vf,Vf),c=f),c.status){case"fulfilled":return c.value;case"rejected":throw a=c.reason,RN(a),a;default:if(typeof c.status=="string")c.then(Vf,Vf);else{if(a=jt,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=c,a.status="pending",a.then(function(y){if(c.status==="pending"){var x=c;x.status="fulfilled",x.value=y}},function(y){if(c.status==="pending"){var x=c;x.status="rejected",x.reason=y}})}switch(c.status){case"fulfilled":return c.value;case"rejected":throw a=c.reason,RN(a),a}throw eu=c,Jc}}var eu=null;function DN(){if(eu===null)throw Error(r(459));var a=eu;return eu=null,a}function RN(a){if(a===Jc||a===zf)throw Error(r(483))}var Zs=!1;function fy(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function hy(a,c){a=a.updateQueue,c.updateQueue===a&&(c.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Qs(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function Js(a,c,f){var y=a.updateQueue;if(y===null)return null;if(y=y.shared,(vt&2)!==0){var x=y.pending;return x===null?c.next=c:(c.next=x.next,x.next=c),y.pending=c,c=Rf(a),bN(a,null,f),c}return Df(a,y,c,f),Rf(a)}function tu(a,c,f){if(c=c.updateQueue,c!==null&&(c=c.shared,(f&4194048)!==0)){var y=c.lanes;y&=a.pendingLanes,f|=y,c.lanes=f,Dr(a,f)}}function py(a,c){var f=a.updateQueue,y=a.alternate;if(y!==null&&(y=y.updateQueue,f===y)){var x=null,C=null;if(f=f.firstBaseUpdate,f!==null){do{var D={lane:f.lane,tag:f.tag,payload:f.payload,callback:null,next:null};C===null?x=C=D:C=C.next=D,f=f.next}while(f!==null);C===null?x=C=c:C=C.next=c}else x=C=c;f={baseState:y.baseState,firstBaseUpdate:x,lastBaseUpdate:C,shared:y.shared,callbacks:y.callbacks},a.updateQueue=f;return}a=f.lastBaseUpdate,a===null?f.firstBaseUpdate=c:a.next=c,f.lastBaseUpdate=c}var my=!1;function nu(){if(my){var a=xl;if(a!==null)throw a}}function ru(a,c,f,y){my=!1;var x=a.updateQueue;Zs=!1;var C=x.firstBaseUpdate,D=x.lastBaseUpdate,P=x.shared.pending;if(P!==null){x.shared.pending=null;var W=P,se=W.next;W.next=null,D===null?C=se:D.next=se,D=W;var fe=a.alternate;fe!==null&&(fe=fe.updateQueue,P=fe.lastBaseUpdate,P!==D&&(P===null?fe.firstBaseUpdate=se:P.next=se,fe.lastBaseUpdate=W))}if(C!==null){var me=x.baseState;D=0,fe=se=W=null,P=C;do{var ce=P.lane&-536870913,ue=ce!==P.lane;if(ue?(ct&ce)===ce:(y&ce)===ce){ce!==0&&ce===bl&&(my=!0),fe!==null&&(fe=fe.next={lane:0,tag:P.tag,payload:P.payload,callback:null,next:null});e:{var $e=a,He=P;ce=c;var Et=f;switch(He.tag){case 1:if($e=He.payload,typeof $e=="function"){me=$e.call(Et,me,ce);break e}me=$e;break e;case 3:$e.flags=$e.flags&-65537|128;case 0:if($e=He.payload,ce=typeof $e=="function"?$e.call(Et,me,ce):$e,ce==null)break e;me=h({},me,ce);break e;case 2:Zs=!0}}ce=P.callback,ce!==null&&(a.flags|=64,ue&&(a.flags|=8192),ue=x.callbacks,ue===null?x.callbacks=[ce]:ue.push(ce))}else ue={lane:ce,tag:P.tag,payload:P.payload,callback:P.callback,next:null},fe===null?(se=fe=ue,W=me):fe=fe.next=ue,D|=ce;if(P=P.next,P===null){if(P=x.shared.pending,P===null)break;ue=P,P=ue.next,ue.next=null,x.lastBaseUpdate=ue,x.shared.pending=null}}while(!0);fe===null&&(W=me),x.baseState=W,x.firstBaseUpdate=se,x.lastBaseUpdate=fe,C===null&&(x.shared.lanes=0),ao|=D,a.lanes=D,a.memoizedState=me}}function jN(a,c){if(typeof a!="function")throw Error(r(191,a));a.call(c)}function ON(a,c){var f=a.callbacks;if(f!==null)for(a.callbacks=null,a=0;a<f.length;a++)jN(f[a],c)}var vl=G(null),qf=G(0);function LN(a,c){a=Ss,ae(qf,a),ae(vl,c),Ss=a|c.baseLanes}function gy(){ae(qf,Ss),ae(vl,vl.current)}function yy(){Ss=qf.current,oe(vl),oe(qf)}var eo=0,tt=null,Ct=null,mn=null,Hf=!1,wl=!1,ua=!1,Ff=0,iu=0,Sl=null,IH=0;function on(){throw Error(r(321))}function by(a,c){if(c===null)return!1;for(var f=0;f<c.length&&f<a.length;f++)if(!Lr(a[f],c[f]))return!1;return!0}function xy(a,c,f,y,x,C){return eo=C,tt=c,c.memoizedState=null,c.updateQueue=null,c.lanes=0,O.H=a===null||a.memoizedState===null?bT:xT,ua=!1,C=f(y,x),ua=!1,wl&&(C=IN(c,f,y,x)),PN(a),C}function PN(a){O.H=Yf;var c=Ct!==null&&Ct.next!==null;if(eo=0,mn=Ct=tt=null,Hf=!1,iu=0,Sl=null,c)throw Error(r(300));a===null||Dn||(a=a.dependencies,a!==null&&Pf(a)&&(Dn=!0))}function IN(a,c,f,y){tt=a;var x=0;do{if(wl&&(Sl=null),iu=0,wl=!1,25<=x)throw Error(r(301));if(x+=1,mn=Ct=null,a.updateQueue!=null){var C=a.updateQueue;C.lastEffect=null,C.events=null,C.stores=null,C.memoCache!=null&&(C.memoCache.index=0)}O.H=UH,C=c(f,y)}while(wl);return C}function BH(){var a=O.H,c=a.useState()[0];return c=typeof c.then=="function"?su(c):c,a=a.useState()[0],(Ct!==null?Ct.memoizedState:null)!==a&&(tt.flags|=1024),c}function vy(){var a=Ff!==0;return Ff=0,a}function wy(a,c,f){c.updateQueue=a.updateQueue,c.flags&=-2053,a.lanes&=~f}function Sy(a){if(Hf){for(a=a.memoizedState;a!==null;){var c=a.queue;c!==null&&(c.pending=null),a=a.next}Hf=!1}eo=0,mn=Ct=tt=null,wl=!1,iu=Ff=0,Sl=null}function xr(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return mn===null?tt.memoizedState=mn=a:mn=mn.next=a,mn}function gn(){if(Ct===null){var a=tt.alternate;a=a!==null?a.memoizedState:null}else a=Ct.next;var c=mn===null?tt.memoizedState:mn.next;if(c!==null)mn=c,Ct=a;else{if(a===null)throw tt.alternate===null?Error(r(467)):Error(r(310));Ct=a,a={memoizedState:Ct.memoizedState,baseState:Ct.baseState,baseQueue:Ct.baseQueue,queue:Ct.queue,next:null},mn===null?tt.memoizedState=mn=a:mn=mn.next=a}return mn}function Cy(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function su(a){var c=iu;return iu+=1,Sl===null&&(Sl=[]),a=_N(Sl,a,c),c=tt,(mn===null?c.memoizedState:mn.next)===null&&(c=c.alternate,O.H=c===null||c.memoizedState===null?bT:xT),a}function Uf(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return su(a);if(a.$$typeof===E)return Jn(a)}throw Error(r(438,String(a)))}function ky(a){var c=null,f=tt.updateQueue;if(f!==null&&(c=f.memoCache),c==null){var y=tt.alternate;y!==null&&(y=y.updateQueue,y!==null&&(y=y.memoCache,y!=null&&(c={data:y.data.map(function(x){return x.slice()}),index:0})))}if(c==null&&(c={data:[],index:0}),f===null&&(f=Cy(),tt.updateQueue=f),f.memoCache=c,f=c.data[c.index],f===void 0)for(f=c.data[c.index]=Array(a),y=0;y<a;y++)f[y]=B;return c.index++,f}function gs(a,c){return typeof c=="function"?c(a):c}function $f(a){var c=gn();return Ey(c,Ct,a)}function Ey(a,c,f){var y=a.queue;if(y===null)throw Error(r(311));y.lastRenderedReducer=f;var x=a.baseQueue,C=y.pending;if(C!==null){if(x!==null){var D=x.next;x.next=C.next,C.next=D}c.baseQueue=x=C,y.pending=null}if(C=a.baseState,x===null)a.memoizedState=C;else{c=x.next;var P=D=null,W=null,se=c,fe=!1;do{var me=se.lane&-536870913;if(me!==se.lane?(ct&me)===me:(eo&me)===me){var ce=se.revertLane;if(ce===0)W!==null&&(W=W.next={lane:0,revertLane:0,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null}),me===bl&&(fe=!0);else if((eo&ce)===ce){se=se.next,ce===bl&&(fe=!0);continue}else me={lane:0,revertLane:se.revertLane,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},W===null?(P=W=me,D=C):W=W.next=me,tt.lanes|=ce,ao|=ce;me=se.action,ua&&f(C,me),C=se.hasEagerState?se.eagerState:f(C,me)}else ce={lane:me,revertLane:se.revertLane,action:se.action,hasEagerState:se.hasEagerState,eagerState:se.eagerState,next:null},W===null?(P=W=ce,D=C):W=W.next=ce,tt.lanes|=me,ao|=me;se=se.next}while(se!==null&&se!==c);if(W===null?D=C:W.next=P,!Lr(C,a.memoizedState)&&(Dn=!0,fe&&(f=xl,f!==null)))throw f;a.memoizedState=C,a.baseState=D,a.baseQueue=W,y.lastRenderedState=C}return x===null&&(y.lanes=0),[a.memoizedState,y.dispatch]}function Ny(a){var c=gn(),f=c.queue;if(f===null)throw Error(r(311));f.lastRenderedReducer=a;var y=f.dispatch,x=f.pending,C=c.memoizedState;if(x!==null){f.pending=null;var D=x=x.next;do C=a(C,D.action),D=D.next;while(D!==x);Lr(C,c.memoizedState)||(Dn=!0),c.memoizedState=C,c.baseQueue===null&&(c.baseState=C),f.lastRenderedState=C}return[C,y]}function BN(a,c,f){var y=tt,x=gn(),C=yt;if(C){if(f===void 0)throw Error(r(407));f=f()}else f=c();var D=!Lr((Ct||x).memoizedState,f);D&&(x.memoizedState=f,Dn=!0),x=x.queue;var P=qN.bind(null,y,x,a);if(ou(2048,8,P,[a]),x.getSnapshot!==c||D||mn!==null&&mn.memoizedState.tag&1){if(y.flags|=2048,Cl(9,Gf(),VN.bind(null,y,x,f,c),null),jt===null)throw Error(r(349));C||(eo&124)!==0||zN(y,c,f)}return f}function zN(a,c,f){a.flags|=16384,a={getSnapshot:c,value:f},c=tt.updateQueue,c===null?(c=Cy(),tt.updateQueue=c,c.stores=[a]):(f=c.stores,f===null?c.stores=[a]:f.push(a))}function VN(a,c,f,y){c.value=f,c.getSnapshot=y,HN(c)&&FN(a)}function qN(a,c,f){return f(function(){HN(c)&&FN(a)})}function HN(a){var c=a.getSnapshot;a=a.value;try{var f=c();return!Lr(a,f)}catch{return!0}}function FN(a){var c=pl(a,2);c!==null&&qr(c,a,2)}function Ty(a){var c=xr();if(typeof a=="function"){var f=a;if(a=f(),ua){Tt(!0);try{f()}finally{Tt(!1)}}}return c.memoizedState=c.baseState=a,c.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:gs,lastRenderedState:a},c}function UN(a,c,f,y){return a.baseState=f,Ey(a,Ct,typeof y=="function"?y:gs)}function zH(a,c,f,y,x){if(Kf(a))throw Error(r(485));if(a=c.action,a!==null){var C={payload:x,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(D){C.listeners.push(D)}};O.T!==null?f(!0):C.isTransition=!1,y(C),f=c.pending,f===null?(C.next=c.pending=C,$N(c,C)):(C.next=f.next,c.pending=f.next=C)}}function $N(a,c){var f=c.action,y=c.payload,x=a.state;if(c.isTransition){var C=O.T,D={};O.T=D;try{var P=f(x,y),W=O.S;W!==null&&W(D,P),GN(a,c,P)}catch(se){Ay(a,c,se)}finally{O.T=C}}else try{C=f(x,y),GN(a,c,C)}catch(se){Ay(a,c,se)}}function GN(a,c,f){f!==null&&typeof f=="object"&&typeof f.then=="function"?f.then(function(y){WN(a,c,y)},function(y){return Ay(a,c,y)}):WN(a,c,f)}function WN(a,c,f){c.status="fulfilled",c.value=f,KN(c),a.state=f,c=a.pending,c!==null&&(f=c.next,f===c?a.pending=null:(f=f.next,c.next=f,$N(a,f)))}function Ay(a,c,f){var y=a.pending;if(a.pending=null,y!==null){y=y.next;do c.status="rejected",c.reason=f,KN(c),c=c.next;while(c!==y)}a.action=null}function KN(a){a=a.listeners;for(var c=0;c<a.length;c++)(0,a[c])()}function YN(a,c){return c}function XN(a,c){if(yt){var f=jt.formState;if(f!==null){e:{var y=tt;if(yt){if(Qt){t:{for(var x=Qt,C=Ui;x.nodeType!==8;){if(!C){x=null;break t}if(x=Ni(x.nextSibling),x===null){x=null;break t}}C=x.data,x=C==="F!"||C==="F"?x:null}if(x){Qt=Ni(x.nextSibling),y=x.data==="F!";break e}}oa(y)}y=!1}y&&(c=f[0])}}return f=xr(),f.memoizedState=f.baseState=c,y={pending:null,lanes:0,dispatch:null,lastRenderedReducer:YN,lastRenderedState:c},f.queue=y,f=mT.bind(null,tt,y),y.dispatch=f,y=Ty(!1),C=jy.bind(null,tt,!1,y.queue),y=xr(),x={state:c,dispatch:null,action:a,pending:null},y.queue=x,f=zH.bind(null,tt,x,C,f),x.dispatch=f,y.memoizedState=a,[c,f,!1]}function ZN(a){var c=gn();return QN(c,Ct,a)}function QN(a,c,f){if(c=Ey(a,c,YN)[0],a=$f(gs)[0],typeof c=="object"&&c!==null&&typeof c.then=="function")try{var y=su(c)}catch(D){throw D===Jc?zf:D}else y=c;c=gn();var x=c.queue,C=x.dispatch;return f!==c.memoizedState&&(tt.flags|=2048,Cl(9,Gf(),VH.bind(null,x,f),null)),[y,C,a]}function VH(a,c){a.action=c}function JN(a){var c=gn(),f=Ct;if(f!==null)return QN(c,f,a);gn(),c=c.memoizedState,f=gn();var y=f.queue.dispatch;return f.memoizedState=a,[c,y,!1]}function Cl(a,c,f,y){return a={tag:a,create:f,deps:y,inst:c,next:null},c=tt.updateQueue,c===null&&(c=Cy(),tt.updateQueue=c),f=c.lastEffect,f===null?c.lastEffect=a.next=a:(y=f.next,f.next=a,a.next=y,c.lastEffect=a),a}function Gf(){return{destroy:void 0,resource:void 0}}function eT(){return gn().memoizedState}function Wf(a,c,f,y){var x=xr();y=y===void 0?null:y,tt.flags|=a,x.memoizedState=Cl(1|c,Gf(),f,y)}function ou(a,c,f,y){var x=gn();y=y===void 0?null:y;var C=x.memoizedState.inst;Ct!==null&&y!==null&&by(y,Ct.memoizedState.deps)?x.memoizedState=Cl(c,C,f,y):(tt.flags|=a,x.memoizedState=Cl(1|c,C,f,y))}function tT(a,c){Wf(8390656,8,a,c)}function nT(a,c){ou(2048,8,a,c)}function rT(a,c){return ou(4,2,a,c)}function iT(a,c){return ou(4,4,a,c)}function sT(a,c){if(typeof c=="function"){a=a();var f=c(a);return function(){typeof f=="function"?f():c(null)}}if(c!=null)return a=a(),c.current=a,function(){c.current=null}}function oT(a,c,f){f=f!=null?f.concat([a]):null,ou(4,4,sT.bind(null,c,a),f)}function My(){}function aT(a,c){var f=gn();c=c===void 0?null:c;var y=f.memoizedState;return c!==null&&by(c,y[1])?y[0]:(f.memoizedState=[a,c],a)}function lT(a,c){var f=gn();c=c===void 0?null:c;var y=f.memoizedState;if(c!==null&&by(c,y[1]))return y[0];if(y=a(),ua){Tt(!0);try{a()}finally{Tt(!1)}}return f.memoizedState=[y,c],y}function _y(a,c,f){return f===void 0||(eo&1073741824)!==0?a.memoizedState=c:(a.memoizedState=f,a=dA(),tt.lanes|=a,ao|=a,f)}function cT(a,c,f,y){return Lr(f,c)?f:vl.current!==null?(a=_y(a,f,y),Lr(a,c)||(Dn=!0),a):(eo&42)===0?(Dn=!0,a.memoizedState=f):(a=dA(),tt.lanes|=a,ao|=a,c)}function uT(a,c,f,y,x){var C=q.p;q.p=C!==0&&8>C?C:8;var D=O.T,P={};O.T=P,jy(a,!1,c,f);try{var W=x(),se=O.S;if(se!==null&&se(P,W),W!==null&&typeof W=="object"&&typeof W.then=="function"){var fe=PH(W,y);au(a,c,fe,Vr(a))}else au(a,c,y,Vr(a))}catch(me){au(a,c,{then:function(){},status:"rejected",reason:me},Vr())}finally{q.p=C,O.T=D}}function qH(){}function Dy(a,c,f,y){if(a.tag!==5)throw Error(r(476));var x=dT(a).queue;uT(a,x,c,K,f===null?qH:function(){return fT(a),f(y)})}function dT(a){var c=a.memoizedState;if(c!==null)return c;c={memoizedState:K,baseState:K,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gs,lastRenderedState:K},next:null};var f={};return c.next={memoizedState:f,baseState:f,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:gs,lastRenderedState:f},next:null},a.memoizedState=c,a=a.alternate,a!==null&&(a.memoizedState=c),c}function fT(a){var c=dT(a).next.queue;au(a,c,{},Vr())}function Ry(){return Jn(Eu)}function hT(){return gn().memoizedState}function pT(){return gn().memoizedState}function HH(a){for(var c=a.return;c!==null;){switch(c.tag){case 24:case 3:var f=Vr();a=Qs(f);var y=Js(c,a,f);y!==null&&(qr(y,c,f),tu(y,c,f)),c={cache:ly()},a.payload=c;return}c=c.return}}function FH(a,c,f){var y=Vr();f={lane:y,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null},Kf(a)?gT(c,f):(f=Qg(a,c,f,y),f!==null&&(qr(f,a,y),yT(f,c,y)))}function mT(a,c,f){var y=Vr();au(a,c,f,y)}function au(a,c,f,y){var x={lane:y,revertLane:0,action:f,hasEagerState:!1,eagerState:null,next:null};if(Kf(a))gT(c,x);else{var C=a.alternate;if(a.lanes===0&&(C===null||C.lanes===0)&&(C=c.lastRenderedReducer,C!==null))try{var D=c.lastRenderedState,P=C(D,f);if(x.hasEagerState=!0,x.eagerState=P,Lr(P,D))return Df(a,c,x,0),jt===null&&_f(),!1}catch{}finally{}if(f=Qg(a,c,x,y),f!==null)return qr(f,a,y),yT(f,c,y),!0}return!1}function jy(a,c,f,y){if(y={lane:2,revertLane:d0(),action:y,hasEagerState:!1,eagerState:null,next:null},Kf(a)){if(c)throw Error(r(479))}else c=Qg(a,f,y,2),c!==null&&qr(c,a,2)}function Kf(a){var c=a.alternate;return a===tt||c!==null&&c===tt}function gT(a,c){wl=Hf=!0;var f=a.pending;f===null?c.next=c:(c.next=f.next,f.next=c),a.pending=c}function yT(a,c,f){if((f&4194048)!==0){var y=c.lanes;y&=a.pendingLanes,f|=y,c.lanes=f,Dr(a,f)}}var Yf={readContext:Jn,use:Uf,useCallback:on,useContext:on,useEffect:on,useImperativeHandle:on,useLayoutEffect:on,useInsertionEffect:on,useMemo:on,useReducer:on,useRef:on,useState:on,useDebugValue:on,useDeferredValue:on,useTransition:on,useSyncExternalStore:on,useId:on,useHostTransitionStatus:on,useFormState:on,useActionState:on,useOptimistic:on,useMemoCache:on,useCacheRefresh:on},bT={readContext:Jn,use:Uf,useCallback:function(a,c){return xr().memoizedState=[a,c===void 0?null:c],a},useContext:Jn,useEffect:tT,useImperativeHandle:function(a,c,f){f=f!=null?f.concat([a]):null,Wf(4194308,4,sT.bind(null,c,a),f)},useLayoutEffect:function(a,c){return Wf(4194308,4,a,c)},useInsertionEffect:function(a,c){Wf(4,2,a,c)},useMemo:function(a,c){var f=xr();c=c===void 0?null:c;var y=a();if(ua){Tt(!0);try{a()}finally{Tt(!1)}}return f.memoizedState=[y,c],y},useReducer:function(a,c,f){var y=xr();if(f!==void 0){var x=f(c);if(ua){Tt(!0);try{f(c)}finally{Tt(!1)}}}else x=c;return y.memoizedState=y.baseState=x,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:x},y.queue=a,a=a.dispatch=FH.bind(null,tt,a),[y.memoizedState,a]},useRef:function(a){var c=xr();return a={current:a},c.memoizedState=a},useState:function(a){a=Ty(a);var c=a.queue,f=mT.bind(null,tt,c);return c.dispatch=f,[a.memoizedState,f]},useDebugValue:My,useDeferredValue:function(a,c){var f=xr();return _y(f,a,c)},useTransition:function(){var a=Ty(!1);return a=uT.bind(null,tt,a.queue,!0,!1),xr().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,c,f){var y=tt,x=xr();if(yt){if(f===void 0)throw Error(r(407));f=f()}else{if(f=c(),jt===null)throw Error(r(349));(ct&124)!==0||zN(y,c,f)}x.memoizedState=f;var C={value:f,getSnapshot:c};return x.queue=C,tT(qN.bind(null,y,C,a),[a]),y.flags|=2048,Cl(9,Gf(),VN.bind(null,y,C,f,c),null),f},useId:function(){var a=xr(),c=jt.identifierPrefix;if(yt){var f=hs,y=fs;f=(y&~(1<<32-At(y)-1)).toString(32)+f,c=""+c+"R"+f,f=Ff++,0<f&&(c+="H"+f.toString(32)),c+=""}else f=IH++,c=""+c+"r"+f.toString(32)+"";return a.memoizedState=c},useHostTransitionStatus:Ry,useFormState:XN,useActionState:XN,useOptimistic:function(a){var c=xr();c.memoizedState=c.baseState=a;var f={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return c.queue=f,c=jy.bind(null,tt,!0,f),f.dispatch=c,[a,c]},useMemoCache:ky,useCacheRefresh:function(){return xr().memoizedState=HH.bind(null,tt)}},xT={readContext:Jn,use:Uf,useCallback:aT,useContext:Jn,useEffect:nT,useImperativeHandle:oT,useInsertionEffect:rT,useLayoutEffect:iT,useMemo:lT,useReducer:$f,useRef:eT,useState:function(){return $f(gs)},useDebugValue:My,useDeferredValue:function(a,c){var f=gn();return cT(f,Ct.memoizedState,a,c)},useTransition:function(){var a=$f(gs)[0],c=gn().memoizedState;return[typeof a=="boolean"?a:su(a),c]},useSyncExternalStore:BN,useId:hT,useHostTransitionStatus:Ry,useFormState:ZN,useActionState:ZN,useOptimistic:function(a,c){var f=gn();return UN(f,Ct,a,c)},useMemoCache:ky,useCacheRefresh:pT},UH={readContext:Jn,use:Uf,useCallback:aT,useContext:Jn,useEffect:nT,useImperativeHandle:oT,useInsertionEffect:rT,useLayoutEffect:iT,useMemo:lT,useReducer:Ny,useRef:eT,useState:function(){return Ny(gs)},useDebugValue:My,useDeferredValue:function(a,c){var f=gn();return Ct===null?_y(f,a,c):cT(f,Ct.memoizedState,a,c)},useTransition:function(){var a=Ny(gs)[0],c=gn().memoizedState;return[typeof a=="boolean"?a:su(a),c]},useSyncExternalStore:BN,useId:hT,useHostTransitionStatus:Ry,useFormState:JN,useActionState:JN,useOptimistic:function(a,c){var f=gn();return Ct!==null?UN(f,Ct,a,c):(f.baseState=a,[a,f.queue.dispatch])},useMemoCache:ky,useCacheRefresh:pT},kl=null,lu=0;function Xf(a){var c=lu;return lu+=1,kl===null&&(kl=[]),_N(kl,a,c)}function cu(a,c){c=c.props.ref,a.ref=c!==void 0?c:null}function Zf(a,c){throw c.$$typeof===p?Error(r(525)):(a=Object.prototype.toString.call(c),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(c).join(", ")+"}":a)))}function vT(a){var c=a._init;return c(a._payload)}function wT(a){function c(ne,J){if(a){var re=ne.deletions;re===null?(ne.deletions=[J],ne.flags|=16):re.push(J)}}function f(ne,J){if(!a)return null;for(;J!==null;)c(ne,J),J=J.sibling;return null}function y(ne){for(var J=new Map;ne!==null;)ne.key!==null?J.set(ne.key,ne):J.set(ne.index,ne),ne=ne.sibling;return J}function x(ne,J){return ne=ds(ne,J),ne.index=0,ne.sibling=null,ne}function C(ne,J,re){return ne.index=re,a?(re=ne.alternate,re!==null?(re=re.index,re<J?(ne.flags|=67108866,J):re):(ne.flags|=67108866,J)):(ne.flags|=1048576,J)}function D(ne){return a&&ne.alternate===null&&(ne.flags|=67108866),ne}function P(ne,J,re,he){return J===null||J.tag!==6?(J=ey(re,ne.mode,he),J.return=ne,J):(J=x(J,re),J.return=ne,J)}function W(ne,J,re,he){var je=re.type;return je===v?fe(ne,J,re.props.children,he,re.key):J!==null&&(J.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===R&&vT(je)===J.type)?(J=x(J,re.props),cu(J,re),J.return=ne,J):(J=jf(re.type,re.key,re.props,null,ne.mode,he),cu(J,re),J.return=ne,J)}function se(ne,J,re,he){return J===null||J.tag!==4||J.stateNode.containerInfo!==re.containerInfo||J.stateNode.implementation!==re.implementation?(J=ty(re,ne.mode,he),J.return=ne,J):(J=x(J,re.children||[]),J.return=ne,J)}function fe(ne,J,re,he,je){return J===null||J.tag!==7?(J=na(re,ne.mode,he,je),J.return=ne,J):(J=x(J,re),J.return=ne,J)}function me(ne,J,re){if(typeof J=="string"&&J!==""||typeof J=="number"||typeof J=="bigint")return J=ey(""+J,ne.mode,re),J.return=ne,J;if(typeof J=="object"&&J!==null){switch(J.$$typeof){case g:return re=jf(J.type,J.key,J.props,null,ne.mode,re),cu(re,J),re.return=ne,re;case b:return J=ty(J,ne.mode,re),J.return=ne,J;case R:var he=J._init;return J=he(J._payload),me(ne,J,re)}if(H(J)||V(J))return J=na(J,ne.mode,re,null),J.return=ne,J;if(typeof J.then=="function")return me(ne,Xf(J),re);if(J.$$typeof===E)return me(ne,If(ne,J),re);Zf(ne,J)}return null}function ce(ne,J,re,he){var je=J!==null?J.key:null;if(typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint")return je!==null?null:P(ne,J,""+re,he);if(typeof re=="object"&&re!==null){switch(re.$$typeof){case g:return re.key===je?W(ne,J,re,he):null;case b:return re.key===je?se(ne,J,re,he):null;case R:return je=re._init,re=je(re._payload),ce(ne,J,re,he)}if(H(re)||V(re))return je!==null?null:fe(ne,J,re,he,null);if(typeof re.then=="function")return ce(ne,J,Xf(re),he);if(re.$$typeof===E)return ce(ne,J,If(ne,re),he);Zf(ne,re)}return null}function ue(ne,J,re,he,je){if(typeof he=="string"&&he!==""||typeof he=="number"||typeof he=="bigint")return ne=ne.get(re)||null,P(J,ne,""+he,je);if(typeof he=="object"&&he!==null){switch(he.$$typeof){case g:return ne=ne.get(he.key===null?re:he.key)||null,W(J,ne,he,je);case b:return ne=ne.get(he.key===null?re:he.key)||null,se(J,ne,he,je);case R:var nt=he._init;return he=nt(he._payload),ue(ne,J,re,he,je)}if(H(he)||V(he))return ne=ne.get(re)||null,fe(J,ne,he,je,null);if(typeof he.then=="function")return ue(ne,J,re,Xf(he),je);if(he.$$typeof===E)return ue(ne,J,re,If(J,he),je);Zf(J,he)}return null}function $e(ne,J,re,he){for(var je=null,nt=null,Ie=J,Ue=J=0,jn=null;Ie!==null&&Ue<re.length;Ue++){Ie.index>Ue?(jn=Ie,Ie=null):jn=Ie.sibling;var pt=ce(ne,Ie,re[Ue],he);if(pt===null){Ie===null&&(Ie=jn);break}a&&Ie&&pt.alternate===null&&c(ne,Ie),J=C(pt,J,Ue),nt===null?je=pt:nt.sibling=pt,nt=pt,Ie=jn}if(Ue===re.length)return f(ne,Ie),yt&&ia(ne,Ue),je;if(Ie===null){for(;Ue<re.length;Ue++)Ie=me(ne,re[Ue],he),Ie!==null&&(J=C(Ie,J,Ue),nt===null?je=Ie:nt.sibling=Ie,nt=Ie);return yt&&ia(ne,Ue),je}for(Ie=y(Ie);Ue<re.length;Ue++)jn=ue(Ie,ne,Ue,re[Ue],he),jn!==null&&(a&&jn.alternate!==null&&Ie.delete(jn.key===null?Ue:jn.key),J=C(jn,J,Ue),nt===null?je=jn:nt.sibling=jn,nt=jn);return a&&Ie.forEach(function(yo){return c(ne,yo)}),yt&&ia(ne,Ue),je}function He(ne,J,re,he){if(re==null)throw Error(r(151));for(var je=null,nt=null,Ie=J,Ue=J=0,jn=null,pt=re.next();Ie!==null&&!pt.done;Ue++,pt=re.next()){Ie.index>Ue?(jn=Ie,Ie=null):jn=Ie.sibling;var yo=ce(ne,Ie,pt.value,he);if(yo===null){Ie===null&&(Ie=jn);break}a&&Ie&&yo.alternate===null&&c(ne,Ie),J=C(yo,J,Ue),nt===null?je=yo:nt.sibling=yo,nt=yo,Ie=jn}if(pt.done)return f(ne,Ie),yt&&ia(ne,Ue),je;if(Ie===null){for(;!pt.done;Ue++,pt=re.next())pt=me(ne,pt.value,he),pt!==null&&(J=C(pt,J,Ue),nt===null?je=pt:nt.sibling=pt,nt=pt);return yt&&ia(ne,Ue),je}for(Ie=y(Ie);!pt.done;Ue++,pt=re.next())pt=ue(Ie,ne,Ue,pt.value,he),pt!==null&&(a&&pt.alternate!==null&&Ie.delete(pt.key===null?Ue:pt.key),J=C(pt,J,Ue),nt===null?je=pt:nt.sibling=pt,nt=pt);return a&&Ie.forEach(function($F){return c(ne,$F)}),yt&&ia(ne,Ue),je}function Et(ne,J,re,he){if(typeof re=="object"&&re!==null&&re.type===v&&re.key===null&&(re=re.props.children),typeof re=="object"&&re!==null){switch(re.$$typeof){case g:e:{for(var je=re.key;J!==null;){if(J.key===je){if(je=re.type,je===v){if(J.tag===7){f(ne,J.sibling),he=x(J,re.props.children),he.return=ne,ne=he;break e}}else if(J.elementType===je||typeof je=="object"&&je!==null&&je.$$typeof===R&&vT(je)===J.type){f(ne,J.sibling),he=x(J,re.props),cu(he,re),he.return=ne,ne=he;break e}f(ne,J);break}else c(ne,J);J=J.sibling}re.type===v?(he=na(re.props.children,ne.mode,he,re.key),he.return=ne,ne=he):(he=jf(re.type,re.key,re.props,null,ne.mode,he),cu(he,re),he.return=ne,ne=he)}return D(ne);case b:e:{for(je=re.key;J!==null;){if(J.key===je)if(J.tag===4&&J.stateNode.containerInfo===re.containerInfo&&J.stateNode.implementation===re.implementation){f(ne,J.sibling),he=x(J,re.children||[]),he.return=ne,ne=he;break e}else{f(ne,J);break}else c(ne,J);J=J.sibling}he=ty(re,ne.mode,he),he.return=ne,ne=he}return D(ne);case R:return je=re._init,re=je(re._payload),Et(ne,J,re,he)}if(H(re))return $e(ne,J,re,he);if(V(re)){if(je=V(re),typeof je!="function")throw Error(r(150));return re=je.call(re),He(ne,J,re,he)}if(typeof re.then=="function")return Et(ne,J,Xf(re),he);if(re.$$typeof===E)return Et(ne,J,If(ne,re),he);Zf(ne,re)}return typeof re=="string"&&re!==""||typeof re=="number"||typeof re=="bigint"?(re=""+re,J!==null&&J.tag===6?(f(ne,J.sibling),he=x(J,re),he.return=ne,ne=he):(f(ne,J),he=ey(re,ne.mode,he),he.return=ne,ne=he),D(ne)):f(ne,J)}return function(ne,J,re,he){try{lu=0;var je=Et(ne,J,re,he);return kl=null,je}catch(Ie){if(Ie===Jc||Ie===zf)throw Ie;var nt=Pr(29,Ie,null,ne.mode);return nt.lanes=he,nt.return=ne,nt}finally{}}}var El=wT(!0),ST=wT(!1),ii=G(null),$i=null;function to(a){var c=a.alternate;ae(Tn,Tn.current&1),ae(ii,a),$i===null&&(c===null||vl.current!==null||c.memoizedState!==null)&&($i=a)}function CT(a){if(a.tag===22){if(ae(Tn,Tn.current),ae(ii,a),$i===null){var c=a.alternate;c!==null&&c.memoizedState!==null&&($i=a)}}else no()}function no(){ae(Tn,Tn.current),ae(ii,ii.current)}function ys(a){oe(ii),$i===a&&($i=null),oe(Tn)}var Tn=G(0);function Qf(a){for(var c=a;c!==null;){if(c.tag===13){var f=c.memoizedState;if(f!==null&&(f=f.dehydrated,f===null||f.data==="$?"||C0(f)))return c}else if(c.tag===19&&c.memoizedProps.revealOrder!==void 0){if((c.flags&128)!==0)return c}else if(c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return null;c=c.return}c.sibling.return=c.return,c=c.sibling}return null}function Oy(a,c,f,y){c=a.memoizedState,f=f(y,c),f=f==null?c:h({},c,f),a.memoizedState=f,a.lanes===0&&(a.updateQueue.baseState=f)}var Ly={enqueueSetState:function(a,c,f){a=a._reactInternals;var y=Vr(),x=Qs(y);x.payload=c,f!=null&&(x.callback=f),c=Js(a,x,y),c!==null&&(qr(c,a,y),tu(c,a,y))},enqueueReplaceState:function(a,c,f){a=a._reactInternals;var y=Vr(),x=Qs(y);x.tag=1,x.payload=c,f!=null&&(x.callback=f),c=Js(a,x,y),c!==null&&(qr(c,a,y),tu(c,a,y))},enqueueForceUpdate:function(a,c){a=a._reactInternals;var f=Vr(),y=Qs(f);y.tag=2,c!=null&&(y.callback=c),c=Js(a,y,f),c!==null&&(qr(c,a,f),tu(c,a,f))}};function kT(a,c,f,y,x,C,D){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(y,C,D):c.prototype&&c.prototype.isPureReactComponent?!$c(f,y)||!$c(x,C):!0}function ET(a,c,f,y){a=c.state,typeof c.componentWillReceiveProps=="function"&&c.componentWillReceiveProps(f,y),typeof c.UNSAFE_componentWillReceiveProps=="function"&&c.UNSAFE_componentWillReceiveProps(f,y),c.state!==a&&Ly.enqueueReplaceState(c,c.state,null)}function da(a,c){var f=c;if("ref"in c){f={};for(var y in c)y!=="ref"&&(f[y]=c[y])}if(a=a.defaultProps){f===c&&(f=h({},f));for(var x in a)f[x]===void 0&&(f[x]=a[x])}return f}var Jf=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var c=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(c))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function NT(a){Jf(a)}function TT(a){console.error(a)}function AT(a){Jf(a)}function eh(a,c){try{var f=a.onUncaughtError;f(c.value,{componentStack:c.stack})}catch(y){setTimeout(function(){throw y})}}function MT(a,c,f){try{var y=a.onCaughtError;y(f.value,{componentStack:f.stack,errorBoundary:c.tag===1?c.stateNode:null})}catch(x){setTimeout(function(){throw x})}}function Py(a,c,f){return f=Qs(f),f.tag=3,f.payload={element:null},f.callback=function(){eh(a,c)},f}function _T(a){return a=Qs(a),a.tag=3,a}function DT(a,c,f,y){var x=f.type.getDerivedStateFromError;if(typeof x=="function"){var C=y.value;a.payload=function(){return x(C)},a.callback=function(){MT(c,f,y)}}var D=f.stateNode;D!==null&&typeof D.componentDidCatch=="function"&&(a.callback=function(){MT(c,f,y),typeof x!="function"&&(lo===null?lo=new Set([this]):lo.add(this));var P=y.stack;this.componentDidCatch(y.value,{componentStack:P!==null?P:""})})}function $H(a,c,f,y,x){if(f.flags|=32768,y!==null&&typeof y=="object"&&typeof y.then=="function"){if(c=f.alternate,c!==null&&Xc(c,f,x,!0),f=ii.current,f!==null){switch(f.tag){case 13:return $i===null?o0():f.alternate===null&&Jt===0&&(Jt=3),f.flags&=-257,f.flags|=65536,f.lanes=x,y===dy?f.flags|=16384:(c=f.updateQueue,c===null?f.updateQueue=new Set([y]):c.add(y),l0(a,y,x)),!1;case 22:return f.flags|=65536,y===dy?f.flags|=16384:(c=f.updateQueue,c===null?(c={transitions:null,markerInstances:null,retryQueue:new Set([y])},f.updateQueue=c):(f=c.retryQueue,f===null?c.retryQueue=new Set([y]):f.add(y)),l0(a,y,x)),!1}throw Error(r(435,f.tag))}return l0(a,y,x),o0(),!1}if(yt)return c=ii.current,c!==null?((c.flags&65536)===0&&(c.flags|=256),c.flags|=65536,c.lanes=x,y!==iy&&(a=Error(r(422),{cause:y}),Yc(ei(a,f)))):(y!==iy&&(c=Error(r(423),{cause:y}),Yc(ei(c,f))),a=a.current.alternate,a.flags|=65536,x&=-x,a.lanes|=x,y=ei(y,f),x=Py(a.stateNode,y,x),py(a,x),Jt!==4&&(Jt=2)),!1;var C=Error(r(520),{cause:y});if(C=ei(C,f),gu===null?gu=[C]:gu.push(C),Jt!==4&&(Jt=2),c===null)return!0;y=ei(y,f),f=c;do{switch(f.tag){case 3:return f.flags|=65536,a=x&-x,f.lanes|=a,a=Py(f.stateNode,y,a),py(f,a),!1;case 1:if(c=f.type,C=f.stateNode,(f.flags&128)===0&&(typeof c.getDerivedStateFromError=="function"||C!==null&&typeof C.componentDidCatch=="function"&&(lo===null||!lo.has(C))))return f.flags|=65536,x&=-x,f.lanes|=x,x=_T(x),DT(x,a,f,y),py(f,x),!1}f=f.return}while(f!==null);return!1}var RT=Error(r(461)),Dn=!1;function qn(a,c,f,y){c.child=a===null?ST(c,null,f,y):El(c,a.child,f,y)}function jT(a,c,f,y,x){f=f.render;var C=c.ref;if("ref"in y){var D={};for(var P in y)P!=="ref"&&(D[P]=y[P])}else D=y;return la(c),y=xy(a,c,f,D,C,x),P=vy(),a!==null&&!Dn?(wy(a,c,x),bs(a,c,x)):(yt&&P&&ny(c),c.flags|=1,qn(a,c,y,x),c.child)}function OT(a,c,f,y,x){if(a===null){var C=f.type;return typeof C=="function"&&!Jg(C)&&C.defaultProps===void 0&&f.compare===null?(c.tag=15,c.type=C,LT(a,c,C,y,x)):(a=jf(f.type,null,y,c,c.mode,x),a.ref=c.ref,a.return=c,c.child=a)}if(C=a.child,!Uy(a,x)){var D=C.memoizedProps;if(f=f.compare,f=f!==null?f:$c,f(D,y)&&a.ref===c.ref)return bs(a,c,x)}return c.flags|=1,a=ds(C,y),a.ref=c.ref,a.return=c,c.child=a}function LT(a,c,f,y,x){if(a!==null){var C=a.memoizedProps;if($c(C,y)&&a.ref===c.ref)if(Dn=!1,c.pendingProps=y=C,Uy(a,x))(a.flags&131072)!==0&&(Dn=!0);else return c.lanes=a.lanes,bs(a,c,x)}return Iy(a,c,f,y,x)}function PT(a,c,f){var y=c.pendingProps,x=y.children,C=a!==null?a.memoizedState:null;if(y.mode==="hidden"){if((c.flags&128)!==0){if(y=C!==null?C.baseLanes|f:f,a!==null){for(x=c.child=a.child,C=0;x!==null;)C=C|x.lanes|x.childLanes,x=x.sibling;c.childLanes=C&~y}else c.childLanes=0,c.child=null;return IT(a,c,y,f)}if((f&536870912)!==0)c.memoizedState={baseLanes:0,cachePool:null},a!==null&&Bf(c,C!==null?C.cachePool:null),C!==null?LN(c,C):gy(),CT(c);else return c.lanes=c.childLanes=536870912,IT(a,c,C!==null?C.baseLanes|f:f,f)}else C!==null?(Bf(c,C.cachePool),LN(c,C),no(),c.memoizedState=null):(a!==null&&Bf(c,null),gy(),no());return qn(a,c,x,f),c.child}function IT(a,c,f,y){var x=uy();return x=x===null?null:{parent:Nn._currentValue,pool:x},c.memoizedState={baseLanes:f,cachePool:x},a!==null&&Bf(c,null),gy(),CT(c),a!==null&&Xc(a,c,y,!0),null}function th(a,c){var f=c.ref;if(f===null)a!==null&&a.ref!==null&&(c.flags|=4194816);else{if(typeof f!="function"&&typeof f!="object")throw Error(r(284));(a===null||a.ref!==f)&&(c.flags|=4194816)}}function Iy(a,c,f,y,x){return la(c),f=xy(a,c,f,y,void 0,x),y=vy(),a!==null&&!Dn?(wy(a,c,x),bs(a,c,x)):(yt&&y&&ny(c),c.flags|=1,qn(a,c,f,x),c.child)}function BT(a,c,f,y,x,C){return la(c),c.updateQueue=null,f=IN(c,y,f,x),PN(a),y=vy(),a!==null&&!Dn?(wy(a,c,C),bs(a,c,C)):(yt&&y&&ny(c),c.flags|=1,qn(a,c,f,C),c.child)}function zT(a,c,f,y,x){if(la(c),c.stateNode===null){var C=ml,D=f.contextType;typeof D=="object"&&D!==null&&(C=Jn(D)),C=new f(y,C),c.memoizedState=C.state!==null&&C.state!==void 0?C.state:null,C.updater=Ly,c.stateNode=C,C._reactInternals=c,C=c.stateNode,C.props=y,C.state=c.memoizedState,C.refs={},fy(c),D=f.contextType,C.context=typeof D=="object"&&D!==null?Jn(D):ml,C.state=c.memoizedState,D=f.getDerivedStateFromProps,typeof D=="function"&&(Oy(c,f,D,y),C.state=c.memoizedState),typeof f.getDerivedStateFromProps=="function"||typeof C.getSnapshotBeforeUpdate=="function"||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(D=C.state,typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount(),D!==C.state&&Ly.enqueueReplaceState(C,C.state,null),ru(c,y,C,x),nu(),C.state=c.memoizedState),typeof C.componentDidMount=="function"&&(c.flags|=4194308),y=!0}else if(a===null){C=c.stateNode;var P=c.memoizedProps,W=da(f,P);C.props=W;var se=C.context,fe=f.contextType;D=ml,typeof fe=="object"&&fe!==null&&(D=Jn(fe));var me=f.getDerivedStateFromProps;fe=typeof me=="function"||typeof C.getSnapshotBeforeUpdate=="function",P=c.pendingProps!==P,fe||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(P||se!==D)&&ET(c,C,y,D),Zs=!1;var ce=c.memoizedState;C.state=ce,ru(c,y,C,x),nu(),se=c.memoizedState,P||ce!==se||Zs?(typeof me=="function"&&(Oy(c,f,me,y),se=c.memoizedState),(W=Zs||kT(c,f,W,y,ce,se,D))?(fe||typeof C.UNSAFE_componentWillMount!="function"&&typeof C.componentWillMount!="function"||(typeof C.componentWillMount=="function"&&C.componentWillMount(),typeof C.UNSAFE_componentWillMount=="function"&&C.UNSAFE_componentWillMount()),typeof C.componentDidMount=="function"&&(c.flags|=4194308)):(typeof C.componentDidMount=="function"&&(c.flags|=4194308),c.memoizedProps=y,c.memoizedState=se),C.props=y,C.state=se,C.context=D,y=W):(typeof C.componentDidMount=="function"&&(c.flags|=4194308),y=!1)}else{C=c.stateNode,hy(a,c),D=c.memoizedProps,fe=da(f,D),C.props=fe,me=c.pendingProps,ce=C.context,se=f.contextType,W=ml,typeof se=="object"&&se!==null&&(W=Jn(se)),P=f.getDerivedStateFromProps,(se=typeof P=="function"||typeof C.getSnapshotBeforeUpdate=="function")||typeof C.UNSAFE_componentWillReceiveProps!="function"&&typeof C.componentWillReceiveProps!="function"||(D!==me||ce!==W)&&ET(c,C,y,W),Zs=!1,ce=c.memoizedState,C.state=ce,ru(c,y,C,x),nu();var ue=c.memoizedState;D!==me||ce!==ue||Zs||a!==null&&a.dependencies!==null&&Pf(a.dependencies)?(typeof P=="function"&&(Oy(c,f,P,y),ue=c.memoizedState),(fe=Zs||kT(c,f,fe,y,ce,ue,W)||a!==null&&a.dependencies!==null&&Pf(a.dependencies))?(se||typeof C.UNSAFE_componentWillUpdate!="function"&&typeof C.componentWillUpdate!="function"||(typeof C.componentWillUpdate=="function"&&C.componentWillUpdate(y,ue,W),typeof C.UNSAFE_componentWillUpdate=="function"&&C.UNSAFE_componentWillUpdate(y,ue,W)),typeof C.componentDidUpdate=="function"&&(c.flags|=4),typeof C.getSnapshotBeforeUpdate=="function"&&(c.flags|=1024)):(typeof C.componentDidUpdate!="function"||D===a.memoizedProps&&ce===a.memoizedState||(c.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||D===a.memoizedProps&&ce===a.memoizedState||(c.flags|=1024),c.memoizedProps=y,c.memoizedState=ue),C.props=y,C.state=ue,C.context=W,y=fe):(typeof C.componentDidUpdate!="function"||D===a.memoizedProps&&ce===a.memoizedState||(c.flags|=4),typeof C.getSnapshotBeforeUpdate!="function"||D===a.memoizedProps&&ce===a.memoizedState||(c.flags|=1024),y=!1)}return C=y,th(a,c),y=(c.flags&128)!==0,C||y?(C=c.stateNode,f=y&&typeof f.getDerivedStateFromError!="function"?null:C.render(),c.flags|=1,a!==null&&y?(c.child=El(c,a.child,null,x),c.child=El(c,null,f,x)):qn(a,c,f,x),c.memoizedState=C.state,a=c.child):a=bs(a,c,x),a}function VT(a,c,f,y){return Kc(),c.flags|=256,qn(a,c,f,y),c.child}var By={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function zy(a){return{baseLanes:a,cachePool:TN()}}function Vy(a,c,f){return a=a!==null?a.childLanes&~f:0,c&&(a|=si),a}function qT(a,c,f){var y=c.pendingProps,x=!1,C=(c.flags&128)!==0,D;if((D=C)||(D=a!==null&&a.memoizedState===null?!1:(Tn.current&2)!==0),D&&(x=!0,c.flags&=-129),D=(c.flags&32)!==0,c.flags&=-33,a===null){if(yt){if(x?to(c):no(),yt){var P=Qt,W;if(W=P){e:{for(W=P,P=Ui;W.nodeType!==8;){if(!P){P=null;break e}if(W=Ni(W.nextSibling),W===null){P=null;break e}}P=W}P!==null?(c.memoizedState={dehydrated:P,treeContext:ra!==null?{id:fs,overflow:hs}:null,retryLane:536870912,hydrationErrors:null},W=Pr(18,null,null,0),W.stateNode=P,W.return=c,c.child=W,lr=c,Qt=null,W=!0):W=!1}W||oa(c)}if(P=c.memoizedState,P!==null&&(P=P.dehydrated,P!==null))return C0(P)?c.lanes=32:c.lanes=536870912,null;ys(c)}return P=y.children,y=y.fallback,x?(no(),x=c.mode,P=nh({mode:"hidden",children:P},x),y=na(y,x,f,null),P.return=c,y.return=c,P.sibling=y,c.child=P,x=c.child,x.memoizedState=zy(f),x.childLanes=Vy(a,D,f),c.memoizedState=By,y):(to(c),qy(c,P))}if(W=a.memoizedState,W!==null&&(P=W.dehydrated,P!==null)){if(C)c.flags&256?(to(c),c.flags&=-257,c=Hy(a,c,f)):c.memoizedState!==null?(no(),c.child=a.child,c.flags|=128,c=null):(no(),x=y.fallback,P=c.mode,y=nh({mode:"visible",children:y.children},P),x=na(x,P,f,null),x.flags|=2,y.return=c,x.return=c,y.sibling=x,c.child=y,El(c,a.child,null,f),y=c.child,y.memoizedState=zy(f),y.childLanes=Vy(a,D,f),c.memoizedState=By,c=x);else if(to(c),C0(P)){if(D=P.nextSibling&&P.nextSibling.dataset,D)var se=D.dgst;D=se,y=Error(r(419)),y.stack="",y.digest=D,Yc({value:y,source:null,stack:null}),c=Hy(a,c,f)}else if(Dn||Xc(a,c,f,!1),D=(f&a.childLanes)!==0,Dn||D){if(D=jt,D!==null&&(y=f&-f,y=(y&42)!==0?1:xt(y),y=(y&(D.suspendedLanes|f))!==0?0:y,y!==0&&y!==W.retryLane))throw W.retryLane=y,pl(a,y),qr(D,a,y),RT;P.data==="$?"||o0(),c=Hy(a,c,f)}else P.data==="$?"?(c.flags|=192,c.child=a.child,c=null):(a=W.treeContext,Qt=Ni(P.nextSibling),lr=c,yt=!0,sa=null,Ui=!1,a!==null&&(ni[ri++]=fs,ni[ri++]=hs,ni[ri++]=ra,fs=a.id,hs=a.overflow,ra=c),c=qy(c,y.children),c.flags|=4096);return c}return x?(no(),x=y.fallback,P=c.mode,W=a.child,se=W.sibling,y=ds(W,{mode:"hidden",children:y.children}),y.subtreeFlags=W.subtreeFlags&65011712,se!==null?x=ds(se,x):(x=na(x,P,f,null),x.flags|=2),x.return=c,y.return=c,y.sibling=x,c.child=y,y=x,x=c.child,P=a.child.memoizedState,P===null?P=zy(f):(W=P.cachePool,W!==null?(se=Nn._currentValue,W=W.parent!==se?{parent:se,pool:se}:W):W=TN(),P={baseLanes:P.baseLanes|f,cachePool:W}),x.memoizedState=P,x.childLanes=Vy(a,D,f),c.memoizedState=By,y):(to(c),f=a.child,a=f.sibling,f=ds(f,{mode:"visible",children:y.children}),f.return=c,f.sibling=null,a!==null&&(D=c.deletions,D===null?(c.deletions=[a],c.flags|=16):D.push(a)),c.child=f,c.memoizedState=null,f)}function qy(a,c){return c=nh({mode:"visible",children:c},a.mode),c.return=a,a.child=c}function nh(a,c){return a=Pr(22,a,null,c),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function Hy(a,c,f){return El(c,a.child,null,f),a=qy(c,c.pendingProps.children),a.flags|=2,c.memoizedState=null,a}function HT(a,c,f){a.lanes|=c;var y=a.alternate;y!==null&&(y.lanes|=c),oy(a.return,c,f)}function Fy(a,c,f,y,x){var C=a.memoizedState;C===null?a.memoizedState={isBackwards:c,rendering:null,renderingStartTime:0,last:y,tail:f,tailMode:x}:(C.isBackwards=c,C.rendering=null,C.renderingStartTime=0,C.last=y,C.tail=f,C.tailMode=x)}function FT(a,c,f){var y=c.pendingProps,x=y.revealOrder,C=y.tail;if(qn(a,c,y.children,f),y=Tn.current,(y&2)!==0)y=y&1|2,c.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=c.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&HT(a,f,c);else if(a.tag===19)HT(a,f,c);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===c)break e;for(;a.sibling===null;){if(a.return===null||a.return===c)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}y&=1}switch(ae(Tn,y),x){case"forwards":for(f=c.child,x=null;f!==null;)a=f.alternate,a!==null&&Qf(a)===null&&(x=f),f=f.sibling;f=x,f===null?(x=c.child,c.child=null):(x=f.sibling,f.sibling=null),Fy(c,!1,x,f,C);break;case"backwards":for(f=null,x=c.child,c.child=null;x!==null;){if(a=x.alternate,a!==null&&Qf(a)===null){c.child=x;break}a=x.sibling,x.sibling=f,f=x,x=a}Fy(c,!0,f,null,C);break;case"together":Fy(c,!1,null,null,void 0);break;default:c.memoizedState=null}return c.child}function bs(a,c,f){if(a!==null&&(c.dependencies=a.dependencies),ao|=c.lanes,(f&c.childLanes)===0)if(a!==null){if(Xc(a,c,f,!1),(f&c.childLanes)===0)return null}else return null;if(a!==null&&c.child!==a.child)throw Error(r(153));if(c.child!==null){for(a=c.child,f=ds(a,a.pendingProps),c.child=f,f.return=c;a.sibling!==null;)a=a.sibling,f=f.sibling=ds(a,a.pendingProps),f.return=c;f.sibling=null}return c.child}function Uy(a,c){return(a.lanes&c)!==0?!0:(a=a.dependencies,!!(a!==null&&Pf(a)))}function GH(a,c,f){switch(c.tag){case 3:le(c,c.stateNode.containerInfo),Xs(c,Nn,a.memoizedState.cache),Kc();break;case 27:case 5:_e(c);break;case 4:le(c,c.stateNode.containerInfo);break;case 10:Xs(c,c.type,c.memoizedProps.value);break;case 13:var y=c.memoizedState;if(y!==null)return y.dehydrated!==null?(to(c),c.flags|=128,null):(f&c.child.childLanes)!==0?qT(a,c,f):(to(c),a=bs(a,c,f),a!==null?a.sibling:null);to(c);break;case 19:var x=(a.flags&128)!==0;if(y=(f&c.childLanes)!==0,y||(Xc(a,c,f,!1),y=(f&c.childLanes)!==0),x){if(y)return FT(a,c,f);c.flags|=128}if(x=c.memoizedState,x!==null&&(x.rendering=null,x.tail=null,x.lastEffect=null),ae(Tn,Tn.current),y)break;return null;case 22:case 23:return c.lanes=0,PT(a,c,f);case 24:Xs(c,Nn,a.memoizedState.cache)}return bs(a,c,f)}function UT(a,c,f){if(a!==null)if(a.memoizedProps!==c.pendingProps)Dn=!0;else{if(!Uy(a,f)&&(c.flags&128)===0)return Dn=!1,GH(a,c,f);Dn=(a.flags&131072)!==0}else Dn=!1,yt&&(c.flags&1048576)!==0&&vN(c,Lf,c.index);switch(c.lanes=0,c.tag){case 16:e:{a=c.pendingProps;var y=c.elementType,x=y._init;if(y=x(y._payload),c.type=y,typeof y=="function")Jg(y)?(a=da(y,a),c.tag=1,c=zT(null,c,y,a,f)):(c.tag=0,c=Iy(null,c,y,a,f));else{if(y!=null){if(x=y.$$typeof,x===N){c.tag=11,c=jT(null,c,y,a,f);break e}else if(x===j){c.tag=14,c=OT(null,c,y,a,f);break e}}throw c=L(y)||y,Error(r(306,c,""))}}return c;case 0:return Iy(a,c,c.type,c.pendingProps,f);case 1:return y=c.type,x=da(y,c.pendingProps),zT(a,c,y,x,f);case 3:e:{if(le(c,c.stateNode.containerInfo),a===null)throw Error(r(387));y=c.pendingProps;var C=c.memoizedState;x=C.element,hy(a,c),ru(c,y,null,f);var D=c.memoizedState;if(y=D.cache,Xs(c,Nn,y),y!==C.cache&&ay(c,[Nn],f,!0),nu(),y=D.element,C.isDehydrated)if(C={element:y,isDehydrated:!1,cache:D.cache},c.updateQueue.baseState=C,c.memoizedState=C,c.flags&256){c=VT(a,c,y,f);break e}else if(y!==x){x=ei(Error(r(424)),c),Yc(x),c=VT(a,c,y,f);break e}else{switch(a=c.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(Qt=Ni(a.firstChild),lr=c,yt=!0,sa=null,Ui=!0,f=ST(c,null,y,f),c.child=f;f;)f.flags=f.flags&-3|4096,f=f.sibling}else{if(Kc(),y===x){c=bs(a,c,f);break e}qn(a,c,y,f)}c=c.child}return c;case 26:return th(a,c),a===null?(f=KA(c.type,null,c.pendingProps,null))?c.memoizedState=f:yt||(f=c.type,a=c.pendingProps,y=gh(ee.current).createElement(f),y[Gt]=c,y[Lt]=a,Fn(y,f,a),Rt(y),c.stateNode=y):c.memoizedState=KA(c.type,a.memoizedProps,c.pendingProps,a.memoizedState),null;case 27:return _e(c),a===null&&yt&&(y=c.stateNode=$A(c.type,c.pendingProps,ee.current),lr=c,Ui=!0,x=Qt,fo(c.type)?(k0=x,Qt=Ni(y.firstChild)):Qt=x),qn(a,c,c.pendingProps.children,f),th(a,c),a===null&&(c.flags|=4194304),c.child;case 5:return a===null&&yt&&((x=y=Qt)&&(y=vF(y,c.type,c.pendingProps,Ui),y!==null?(c.stateNode=y,lr=c,Qt=Ni(y.firstChild),Ui=!1,x=!0):x=!1),x||oa(c)),_e(c),x=c.type,C=c.pendingProps,D=a!==null?a.memoizedProps:null,y=C.children,v0(x,C)?y=null:D!==null&&v0(x,D)&&(c.flags|=32),c.memoizedState!==null&&(x=xy(a,c,BH,null,null,f),Eu._currentValue=x),th(a,c),qn(a,c,y,f),c.child;case 6:return a===null&&yt&&((a=f=Qt)&&(f=wF(f,c.pendingProps,Ui),f!==null?(c.stateNode=f,lr=c,Qt=null,a=!0):a=!1),a||oa(c)),null;case 13:return qT(a,c,f);case 4:return le(c,c.stateNode.containerInfo),y=c.pendingProps,a===null?c.child=El(c,null,y,f):qn(a,c,y,f),c.child;case 11:return jT(a,c,c.type,c.pendingProps,f);case 7:return qn(a,c,c.pendingProps,f),c.child;case 8:return qn(a,c,c.pendingProps.children,f),c.child;case 12:return qn(a,c,c.pendingProps.children,f),c.child;case 10:return y=c.pendingProps,Xs(c,c.type,y.value),qn(a,c,y.children,f),c.child;case 9:return x=c.type._context,y=c.pendingProps.children,la(c),x=Jn(x),y=y(x),c.flags|=1,qn(a,c,y,f),c.child;case 14:return OT(a,c,c.type,c.pendingProps,f);case 15:return LT(a,c,c.type,c.pendingProps,f);case 19:return FT(a,c,f);case 31:return y=c.pendingProps,f=c.mode,y={mode:y.mode,children:y.children},a===null?(f=nh(y,f),f.ref=c.ref,c.child=f,f.return=c,c=f):(f=ds(a.child,y),f.ref=c.ref,c.child=f,f.return=c,c=f),c;case 22:return PT(a,c,f);case 24:return la(c),y=Jn(Nn),a===null?(x=uy(),x===null&&(x=jt,C=ly(),x.pooledCache=C,C.refCount++,C!==null&&(x.pooledCacheLanes|=f),x=C),c.memoizedState={parent:y,cache:x},fy(c),Xs(c,Nn,x)):((a.lanes&f)!==0&&(hy(a,c),ru(c,null,null,f),nu()),x=a.memoizedState,C=c.memoizedState,x.parent!==y?(x={parent:y,cache:y},c.memoizedState=x,c.lanes===0&&(c.memoizedState=c.updateQueue.baseState=x),Xs(c,Nn,y)):(y=C.cache,Xs(c,Nn,y),y!==x.cache&&ay(c,[Nn],f,!0))),qn(a,c,c.pendingProps.children,f),c.child;case 29:throw c.pendingProps}throw Error(r(156,c.tag))}function xs(a){a.flags|=4}function $T(a,c){if(c.type!=="stylesheet"||(c.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!JA(c)){if(c=ii.current,c!==null&&((ct&4194048)===ct?$i!==null:(ct&62914560)!==ct&&(ct&536870912)===0||c!==$i))throw eu=dy,AN;a.flags|=8192}}function rh(a,c){c!==null&&(a.flags|=4),a.flags&16384&&(c=a.tag!==22?wi():536870912,a.lanes|=c,Ml|=c)}function uu(a,c){if(!yt)switch(a.tailMode){case"hidden":c=a.tail;for(var f=null;c!==null;)c.alternate!==null&&(f=c),c=c.sibling;f===null?a.tail=null:f.sibling=null;break;case"collapsed":f=a.tail;for(var y=null;f!==null;)f.alternate!==null&&(y=f),f=f.sibling;y===null?c||a.tail===null?a.tail=null:a.tail.sibling=null:y.sibling=null}}function Wt(a){var c=a.alternate!==null&&a.alternate.child===a.child,f=0,y=0;if(c)for(var x=a.child;x!==null;)f|=x.lanes|x.childLanes,y|=x.subtreeFlags&65011712,y|=x.flags&65011712,x.return=a,x=x.sibling;else for(x=a.child;x!==null;)f|=x.lanes|x.childLanes,y|=x.subtreeFlags,y|=x.flags,x.return=a,x=x.sibling;return a.subtreeFlags|=y,a.childLanes=f,c}function WH(a,c,f){var y=c.pendingProps;switch(ry(c),c.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Wt(c),null;case 1:return Wt(c),null;case 3:return f=c.stateNode,y=null,a!==null&&(y=a.memoizedState.cache),c.memoizedState.cache!==y&&(c.flags|=2048),ms(Nn),xe(),f.pendingContext&&(f.context=f.pendingContext,f.pendingContext=null),(a===null||a.child===null)&&(Wc(c)?xs(c):a===null||a.memoizedState.isDehydrated&&(c.flags&256)===0||(c.flags|=1024,CN())),Wt(c),null;case 26:return f=c.memoizedState,a===null?(xs(c),f!==null?(Wt(c),$T(c,f)):(Wt(c),c.flags&=-16777217)):f?f!==a.memoizedState?(xs(c),Wt(c),$T(c,f)):(Wt(c),c.flags&=-16777217):(a.memoizedProps!==y&&xs(c),Wt(c),c.flags&=-16777217),null;case 27:Be(c),f=ee.current;var x=c.type;if(a!==null&&c.stateNode!=null)a.memoizedProps!==y&&xs(c);else{if(!y){if(c.stateNode===null)throw Error(r(166));return Wt(c),null}a=$.current,Wc(c)?wN(c):(a=$A(x,y,f),c.stateNode=a,xs(c))}return Wt(c),null;case 5:if(Be(c),f=c.type,a!==null&&c.stateNode!=null)a.memoizedProps!==y&&xs(c);else{if(!y){if(c.stateNode===null)throw Error(r(166));return Wt(c),null}if(a=$.current,Wc(c))wN(c);else{switch(x=gh(ee.current),a){case 1:a=x.createElementNS("http://www.w3.org/2000/svg",f);break;case 2:a=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;default:switch(f){case"svg":a=x.createElementNS("http://www.w3.org/2000/svg",f);break;case"math":a=x.createElementNS("http://www.w3.org/1998/Math/MathML",f);break;case"script":a=x.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof y.is=="string"?x.createElement("select",{is:y.is}):x.createElement("select"),y.multiple?a.multiple=!0:y.size&&(a.size=y.size);break;default:a=typeof y.is=="string"?x.createElement(f,{is:y.is}):x.createElement(f)}}a[Gt]=c,a[Lt]=y;e:for(x=c.child;x!==null;){if(x.tag===5||x.tag===6)a.appendChild(x.stateNode);else if(x.tag!==4&&x.tag!==27&&x.child!==null){x.child.return=x,x=x.child;continue}if(x===c)break e;for(;x.sibling===null;){if(x.return===null||x.return===c)break e;x=x.return}x.sibling.return=x.return,x=x.sibling}c.stateNode=a;e:switch(Fn(a,f,y),f){case"button":case"input":case"select":case"textarea":a=!!y.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&xs(c)}}return Wt(c),c.flags&=-16777217,null;case 6:if(a&&c.stateNode!=null)a.memoizedProps!==y&&xs(c);else{if(typeof y!="string"&&c.stateNode===null)throw Error(r(166));if(a=ee.current,Wc(c)){if(a=c.stateNode,f=c.memoizedProps,y=null,x=lr,x!==null)switch(x.tag){case 27:case 5:y=x.memoizedProps}a[Gt]=c,a=!!(a.nodeValue===f||y!==null&&y.suppressHydrationWarning===!0||BA(a.nodeValue,f)),a||oa(c)}else a=gh(a).createTextNode(y),a[Gt]=c,c.stateNode=a}return Wt(c),null;case 13:if(y=c.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(x=Wc(c),y!==null&&y.dehydrated!==null){if(a===null){if(!x)throw Error(r(318));if(x=c.memoizedState,x=x!==null?x.dehydrated:null,!x)throw Error(r(317));x[Gt]=c}else Kc(),(c.flags&128)===0&&(c.memoizedState=null),c.flags|=4;Wt(c),x=!1}else x=CN(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=x),x=!0;if(!x)return c.flags&256?(ys(c),c):(ys(c),null)}if(ys(c),(c.flags&128)!==0)return c.lanes=f,c;if(f=y!==null,a=a!==null&&a.memoizedState!==null,f){y=c.child,x=null,y.alternate!==null&&y.alternate.memoizedState!==null&&y.alternate.memoizedState.cachePool!==null&&(x=y.alternate.memoizedState.cachePool.pool);var C=null;y.memoizedState!==null&&y.memoizedState.cachePool!==null&&(C=y.memoizedState.cachePool.pool),C!==x&&(y.flags|=2048)}return f!==a&&f&&(c.child.flags|=8192),rh(c,c.updateQueue),Wt(c),null;case 4:return xe(),a===null&&m0(c.stateNode.containerInfo),Wt(c),null;case 10:return ms(c.type),Wt(c),null;case 19:if(oe(Tn),x=c.memoizedState,x===null)return Wt(c),null;if(y=(c.flags&128)!==0,C=x.rendering,C===null)if(y)uu(x,!1);else{if(Jt!==0||a!==null&&(a.flags&128)!==0)for(a=c.child;a!==null;){if(C=Qf(a),C!==null){for(c.flags|=128,uu(x,!1),a=C.updateQueue,c.updateQueue=a,rh(c,a),c.subtreeFlags=0,a=f,f=c.child;f!==null;)xN(f,a),f=f.sibling;return ae(Tn,Tn.current&1|2),c.child}a=a.sibling}x.tail!==null&&Oe()>oh&&(c.flags|=128,y=!0,uu(x,!1),c.lanes=4194304)}else{if(!y)if(a=Qf(C),a!==null){if(c.flags|=128,y=!0,a=a.updateQueue,c.updateQueue=a,rh(c,a),uu(x,!0),x.tail===null&&x.tailMode==="hidden"&&!C.alternate&&!yt)return Wt(c),null}else 2*Oe()-x.renderingStartTime>oh&&f!==536870912&&(c.flags|=128,y=!0,uu(x,!1),c.lanes=4194304);x.isBackwards?(C.sibling=c.child,c.child=C):(a=x.last,a!==null?a.sibling=C:c.child=C,x.last=C)}return x.tail!==null?(c=x.tail,x.rendering=c,x.tail=c.sibling,x.renderingStartTime=Oe(),c.sibling=null,a=Tn.current,ae(Tn,y?a&1|2:a&1),c):(Wt(c),null);case 22:case 23:return ys(c),yy(),y=c.memoizedState!==null,a!==null?a.memoizedState!==null!==y&&(c.flags|=8192):y&&(c.flags|=8192),y?(f&536870912)!==0&&(c.flags&128)===0&&(Wt(c),c.subtreeFlags&6&&(c.flags|=8192)):Wt(c),f=c.updateQueue,f!==null&&rh(c,f.retryQueue),f=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),y=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(y=c.memoizedState.cachePool.pool),y!==f&&(c.flags|=2048),a!==null&&oe(ca),null;case 24:return f=null,a!==null&&(f=a.memoizedState.cache),c.memoizedState.cache!==f&&(c.flags|=2048),ms(Nn),Wt(c),null;case 25:return null;case 30:return null}throw Error(r(156,c.tag))}function KH(a,c){switch(ry(c),c.tag){case 1:return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 3:return ms(Nn),xe(),a=c.flags,(a&65536)!==0&&(a&128)===0?(c.flags=a&-65537|128,c):null;case 26:case 27:case 5:return Be(c),null;case 13:if(ys(c),a=c.memoizedState,a!==null&&a.dehydrated!==null){if(c.alternate===null)throw Error(r(340));Kc()}return a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 19:return oe(Tn),null;case 4:return xe(),null;case 10:return ms(c.type),null;case 22:case 23:return ys(c),yy(),a!==null&&oe(ca),a=c.flags,a&65536?(c.flags=a&-65537|128,c):null;case 24:return ms(Nn),null;case 25:return null;default:return null}}function GT(a,c){switch(ry(c),c.tag){case 3:ms(Nn),xe();break;case 26:case 27:case 5:Be(c);break;case 4:xe();break;case 13:ys(c);break;case 19:oe(Tn);break;case 10:ms(c.type);break;case 22:case 23:ys(c),yy(),a!==null&&oe(ca);break;case 24:ms(Nn)}}function du(a,c){try{var f=c.updateQueue,y=f!==null?f.lastEffect:null;if(y!==null){var x=y.next;f=x;do{if((f.tag&a)===a){y=void 0;var C=f.create,D=f.inst;y=C(),D.destroy=y}f=f.next}while(f!==x)}}catch(P){_t(c,c.return,P)}}function ro(a,c,f){try{var y=c.updateQueue,x=y!==null?y.lastEffect:null;if(x!==null){var C=x.next;y=C;do{if((y.tag&a)===a){var D=y.inst,P=D.destroy;if(P!==void 0){D.destroy=void 0,x=c;var W=f,se=P;try{se()}catch(fe){_t(x,W,fe)}}}y=y.next}while(y!==C)}}catch(fe){_t(c,c.return,fe)}}function WT(a){var c=a.updateQueue;if(c!==null){var f=a.stateNode;try{ON(c,f)}catch(y){_t(a,a.return,y)}}}function KT(a,c,f){f.props=da(a.type,a.memoizedProps),f.state=a.memoizedState;try{f.componentWillUnmount()}catch(y){_t(a,c,y)}}function fu(a,c){try{var f=a.ref;if(f!==null){switch(a.tag){case 26:case 27:case 5:var y=a.stateNode;break;case 30:y=a.stateNode;break;default:y=a.stateNode}typeof f=="function"?a.refCleanup=f(y):f.current=y}}catch(x){_t(a,c,x)}}function Gi(a,c){var f=a.ref,y=a.refCleanup;if(f!==null)if(typeof y=="function")try{y()}catch(x){_t(a,c,x)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof f=="function")try{f(null)}catch(x){_t(a,c,x)}else f.current=null}function YT(a){var c=a.type,f=a.memoizedProps,y=a.stateNode;try{e:switch(c){case"button":case"input":case"select":case"textarea":f.autoFocus&&y.focus();break e;case"img":f.src?y.src=f.src:f.srcSet&&(y.srcset=f.srcSet)}}catch(x){_t(a,a.return,x)}}function $y(a,c,f){try{var y=a.stateNode;mF(y,a.type,f,c),y[Lt]=c}catch(x){_t(a,a.return,x)}}function XT(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&fo(a.type)||a.tag===4}function Gy(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||XT(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&fo(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function Wy(a,c,f){var y=a.tag;if(y===5||y===6)a=a.stateNode,c?(f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f).insertBefore(a,c):(c=f.nodeType===9?f.body:f.nodeName==="HTML"?f.ownerDocument.body:f,c.appendChild(a),f=f._reactRootContainer,f!=null||c.onclick!==null||(c.onclick=mh));else if(y!==4&&(y===27&&fo(a.type)&&(f=a.stateNode,c=null),a=a.child,a!==null))for(Wy(a,c,f),a=a.sibling;a!==null;)Wy(a,c,f),a=a.sibling}function ih(a,c,f){var y=a.tag;if(y===5||y===6)a=a.stateNode,c?f.insertBefore(a,c):f.appendChild(a);else if(y!==4&&(y===27&&fo(a.type)&&(f=a.stateNode),a=a.child,a!==null))for(ih(a,c,f),a=a.sibling;a!==null;)ih(a,c,f),a=a.sibling}function ZT(a){var c=a.stateNode,f=a.memoizedProps;try{for(var y=a.type,x=c.attributes;x.length;)c.removeAttributeNode(x[0]);Fn(c,y,f),c[Gt]=a,c[Lt]=f}catch(C){_t(a,a.return,C)}}var vs=!1,an=!1,Ky=!1,QT=typeof WeakSet=="function"?WeakSet:Set,Rn=null;function YH(a,c){if(a=a.containerInfo,b0=Sh,a=cN(a),Gg(a)){if("selectionStart"in a)var f={start:a.selectionStart,end:a.selectionEnd};else e:{f=(f=a.ownerDocument)&&f.defaultView||window;var y=f.getSelection&&f.getSelection();if(y&&y.rangeCount!==0){f=y.anchorNode;var x=y.anchorOffset,C=y.focusNode;y=y.focusOffset;try{f.nodeType,C.nodeType}catch{f=null;break e}var D=0,P=-1,W=-1,se=0,fe=0,me=a,ce=null;t:for(;;){for(var ue;me!==f||x!==0&&me.nodeType!==3||(P=D+x),me!==C||y!==0&&me.nodeType!==3||(W=D+y),me.nodeType===3&&(D+=me.nodeValue.length),(ue=me.firstChild)!==null;)ce=me,me=ue;for(;;){if(me===a)break t;if(ce===f&&++se===x&&(P=D),ce===C&&++fe===y&&(W=D),(ue=me.nextSibling)!==null)break;me=ce,ce=me.parentNode}me=ue}f=P===-1||W===-1?null:{start:P,end:W}}else f=null}f=f||{start:0,end:0}}else f=null;for(x0={focusedElem:a,selectionRange:f},Sh=!1,Rn=c;Rn!==null;)if(c=Rn,a=c.child,(c.subtreeFlags&1024)!==0&&a!==null)a.return=c,Rn=a;else for(;Rn!==null;){switch(c=Rn,C=c.alternate,a=c.flags,c.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&C!==null){a=void 0,f=c,x=C.memoizedProps,C=C.memoizedState,y=f.stateNode;try{var $e=da(f.type,x,f.elementType===f.type);a=y.getSnapshotBeforeUpdate($e,C),y.__reactInternalSnapshotBeforeUpdate=a}catch(He){_t(f,f.return,He)}}break;case 3:if((a&1024)!==0){if(a=c.stateNode.containerInfo,f=a.nodeType,f===9)S0(a);else if(f===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":S0(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=c.sibling,a!==null){a.return=c.return,Rn=a;break}Rn=c.return}}function JT(a,c,f){var y=f.flags;switch(f.tag){case 0:case 11:case 15:io(a,f),y&4&&du(5,f);break;case 1:if(io(a,f),y&4)if(a=f.stateNode,c===null)try{a.componentDidMount()}catch(D){_t(f,f.return,D)}else{var x=da(f.type,c.memoizedProps);c=c.memoizedState;try{a.componentDidUpdate(x,c,a.__reactInternalSnapshotBeforeUpdate)}catch(D){_t(f,f.return,D)}}y&64&&WT(f),y&512&&fu(f,f.return);break;case 3:if(io(a,f),y&64&&(a=f.updateQueue,a!==null)){if(c=null,f.child!==null)switch(f.child.tag){case 27:case 5:c=f.child.stateNode;break;case 1:c=f.child.stateNode}try{ON(a,c)}catch(D){_t(f,f.return,D)}}break;case 27:c===null&&y&4&&ZT(f);case 26:case 5:io(a,f),c===null&&y&4&&YT(f),y&512&&fu(f,f.return);break;case 12:io(a,f);break;case 13:io(a,f),y&4&&nA(a,f),y&64&&(a=f.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(f=iF.bind(null,f),SF(a,f))));break;case 22:if(y=f.memoizedState!==null||vs,!y){c=c!==null&&c.memoizedState!==null||an,x=vs;var C=an;vs=y,(an=c)&&!C?so(a,f,(f.subtreeFlags&8772)!==0):io(a,f),vs=x,an=C}break;case 30:break;default:io(a,f)}}function eA(a){var c=a.alternate;c!==null&&(a.alternate=null,eA(c)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(c=a.stateNode,c!==null&&Bi(c)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var qt=null,vr=!1;function ws(a,c,f){for(f=f.child;f!==null;)tA(a,c,f),f=f.sibling}function tA(a,c,f){if(ut&&typeof ut.onCommitFiberUnmount=="function")try{ut.onCommitFiberUnmount(Ot,f)}catch{}switch(f.tag){case 26:an||Gi(f,c),ws(a,c,f),f.memoizedState?f.memoizedState.count--:f.stateNode&&(f=f.stateNode,f.parentNode.removeChild(f));break;case 27:an||Gi(f,c);var y=qt,x=vr;fo(f.type)&&(qt=f.stateNode,vr=!1),ws(a,c,f),wu(f.stateNode),qt=y,vr=x;break;case 5:an||Gi(f,c);case 6:if(y=qt,x=vr,qt=null,ws(a,c,f),qt=y,vr=x,qt!==null)if(vr)try{(qt.nodeType===9?qt.body:qt.nodeName==="HTML"?qt.ownerDocument.body:qt).removeChild(f.stateNode)}catch(C){_t(f,c,C)}else try{qt.removeChild(f.stateNode)}catch(C){_t(f,c,C)}break;case 18:qt!==null&&(vr?(a=qt,FA(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,f.stateNode),Mu(a)):FA(qt,f.stateNode));break;case 4:y=qt,x=vr,qt=f.stateNode.containerInfo,vr=!0,ws(a,c,f),qt=y,vr=x;break;case 0:case 11:case 14:case 15:an||ro(2,f,c),an||ro(4,f,c),ws(a,c,f);break;case 1:an||(Gi(f,c),y=f.stateNode,typeof y.componentWillUnmount=="function"&&KT(f,c,y)),ws(a,c,f);break;case 21:ws(a,c,f);break;case 22:an=(y=an)||f.memoizedState!==null,ws(a,c,f),an=y;break;default:ws(a,c,f)}}function nA(a,c){if(c.memoizedState===null&&(a=c.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Mu(a)}catch(f){_t(c,c.return,f)}}function XH(a){switch(a.tag){case 13:case 19:var c=a.stateNode;return c===null&&(c=a.stateNode=new QT),c;case 22:return a=a.stateNode,c=a._retryCache,c===null&&(c=a._retryCache=new QT),c;default:throw Error(r(435,a.tag))}}function Yy(a,c){var f=XH(a);c.forEach(function(y){var x=sF.bind(null,a,y);f.has(y)||(f.add(y),y.then(x,x))})}function Ir(a,c){var f=c.deletions;if(f!==null)for(var y=0;y<f.length;y++){var x=f[y],C=a,D=c,P=D;e:for(;P!==null;){switch(P.tag){case 27:if(fo(P.type)){qt=P.stateNode,vr=!1;break e}break;case 5:qt=P.stateNode,vr=!1;break e;case 3:case 4:qt=P.stateNode.containerInfo,vr=!0;break e}P=P.return}if(qt===null)throw Error(r(160));tA(C,D,x),qt=null,vr=!1,C=x.alternate,C!==null&&(C.return=null),x.return=null}if(c.subtreeFlags&13878)for(c=c.child;c!==null;)rA(c,a),c=c.sibling}var Ei=null;function rA(a,c){var f=a.alternate,y=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Ir(c,a),Br(a),y&4&&(ro(3,a,a.return),du(3,a),ro(5,a,a.return));break;case 1:Ir(c,a),Br(a),y&512&&(an||f===null||Gi(f,f.return)),y&64&&vs&&(a=a.updateQueue,a!==null&&(y=a.callbacks,y!==null&&(f=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=f===null?y:f.concat(y))));break;case 26:var x=Ei;if(Ir(c,a),Br(a),y&512&&(an||f===null||Gi(f,f.return)),y&4){var C=f!==null?f.memoizedState:null;if(y=a.memoizedState,f===null)if(y===null)if(a.stateNode===null){e:{y=a.type,f=a.memoizedProps,x=x.ownerDocument||x;t:switch(y){case"title":C=x.getElementsByTagName("title")[0],(!C||C[jr]||C[Gt]||C.namespaceURI==="http://www.w3.org/2000/svg"||C.hasAttribute("itemprop"))&&(C=x.createElement(y),x.head.insertBefore(C,x.querySelector("head > title"))),Fn(C,y,f),C[Gt]=a,Rt(C),y=C;break e;case"link":var D=ZA("link","href",x).get(y+(f.href||""));if(D){for(var P=0;P<D.length;P++)if(C=D[P],C.getAttribute("href")===(f.href==null||f.href===""?null:f.href)&&C.getAttribute("rel")===(f.rel==null?null:f.rel)&&C.getAttribute("title")===(f.title==null?null:f.title)&&C.getAttribute("crossorigin")===(f.crossOrigin==null?null:f.crossOrigin)){D.splice(P,1);break t}}C=x.createElement(y),Fn(C,y,f),x.head.appendChild(C);break;case"meta":if(D=ZA("meta","content",x).get(y+(f.content||""))){for(P=0;P<D.length;P++)if(C=D[P],C.getAttribute("content")===(f.content==null?null:""+f.content)&&C.getAttribute("name")===(f.name==null?null:f.name)&&C.getAttribute("property")===(f.property==null?null:f.property)&&C.getAttribute("http-equiv")===(f.httpEquiv==null?null:f.httpEquiv)&&C.getAttribute("charset")===(f.charSet==null?null:f.charSet)){D.splice(P,1);break t}}C=x.createElement(y),Fn(C,y,f),x.head.appendChild(C);break;default:throw Error(r(468,y))}C[Gt]=a,Rt(C),y=C}a.stateNode=y}else QA(x,a.type,a.stateNode);else a.stateNode=XA(x,y,a.memoizedProps);else C!==y?(C===null?f.stateNode!==null&&(f=f.stateNode,f.parentNode.removeChild(f)):C.count--,y===null?QA(x,a.type,a.stateNode):XA(x,y,a.memoizedProps)):y===null&&a.stateNode!==null&&$y(a,a.memoizedProps,f.memoizedProps)}break;case 27:Ir(c,a),Br(a),y&512&&(an||f===null||Gi(f,f.return)),f!==null&&y&4&&$y(a,a.memoizedProps,f.memoizedProps);break;case 5:if(Ir(c,a),Br(a),y&512&&(an||f===null||Gi(f,f.return)),a.flags&32){x=a.stateNode;try{Qr(x,"")}catch(ue){_t(a,a.return,ue)}}y&4&&a.stateNode!=null&&(x=a.memoizedProps,$y(a,x,f!==null?f.memoizedProps:x)),y&1024&&(Ky=!0);break;case 6:if(Ir(c,a),Br(a),y&4){if(a.stateNode===null)throw Error(r(162));y=a.memoizedProps,f=a.stateNode;try{f.nodeValue=y}catch(ue){_t(a,a.return,ue)}}break;case 3:if(xh=null,x=Ei,Ei=yh(c.containerInfo),Ir(c,a),Ei=x,Br(a),y&4&&f!==null&&f.memoizedState.isDehydrated)try{Mu(c.containerInfo)}catch(ue){_t(a,a.return,ue)}Ky&&(Ky=!1,iA(a));break;case 4:y=Ei,Ei=yh(a.stateNode.containerInfo),Ir(c,a),Br(a),Ei=y;break;case 12:Ir(c,a),Br(a);break;case 13:Ir(c,a),Br(a),a.child.flags&8192&&a.memoizedState!==null!=(f!==null&&f.memoizedState!==null)&&(t0=Oe()),y&4&&(y=a.updateQueue,y!==null&&(a.updateQueue=null,Yy(a,y)));break;case 22:x=a.memoizedState!==null;var W=f!==null&&f.memoizedState!==null,se=vs,fe=an;if(vs=se||x,an=fe||W,Ir(c,a),an=fe,vs=se,Br(a),y&8192)e:for(c=a.stateNode,c._visibility=x?c._visibility&-2:c._visibility|1,x&&(f===null||W||vs||an||fa(a)),f=null,c=a;;){if(c.tag===5||c.tag===26){if(f===null){W=f=c;try{if(C=W.stateNode,x)D=C.style,typeof D.setProperty=="function"?D.setProperty("display","none","important"):D.display="none";else{P=W.stateNode;var me=W.memoizedProps.style,ce=me!=null&&me.hasOwnProperty("display")?me.display:null;P.style.display=ce==null||typeof ce=="boolean"?"":(""+ce).trim()}}catch(ue){_t(W,W.return,ue)}}}else if(c.tag===6){if(f===null){W=c;try{W.stateNode.nodeValue=x?"":W.memoizedProps}catch(ue){_t(W,W.return,ue)}}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===a)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===a)break e;for(;c.sibling===null;){if(c.return===null||c.return===a)break e;f===c&&(f=null),c=c.return}f===c&&(f=null),c.sibling.return=c.return,c=c.sibling}y&4&&(y=a.updateQueue,y!==null&&(f=y.retryQueue,f!==null&&(y.retryQueue=null,Yy(a,f))));break;case 19:Ir(c,a),Br(a),y&4&&(y=a.updateQueue,y!==null&&(a.updateQueue=null,Yy(a,y)));break;case 30:break;case 21:break;default:Ir(c,a),Br(a)}}function Br(a){var c=a.flags;if(c&2){try{for(var f,y=a.return;y!==null;){if(XT(y)){f=y;break}y=y.return}if(f==null)throw Error(r(160));switch(f.tag){case 27:var x=f.stateNode,C=Gy(a);ih(a,C,x);break;case 5:var D=f.stateNode;f.flags&32&&(Qr(D,""),f.flags&=-33);var P=Gy(a);ih(a,P,D);break;case 3:case 4:var W=f.stateNode.containerInfo,se=Gy(a);Wy(a,se,W);break;default:throw Error(r(161))}}catch(fe){_t(a,a.return,fe)}a.flags&=-3}c&4096&&(a.flags&=-4097)}function iA(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var c=a;iA(c),c.tag===5&&c.flags&1024&&c.stateNode.reset(),a=a.sibling}}function io(a,c){if(c.subtreeFlags&8772)for(c=c.child;c!==null;)JT(a,c.alternate,c),c=c.sibling}function fa(a){for(a=a.child;a!==null;){var c=a;switch(c.tag){case 0:case 11:case 14:case 15:ro(4,c,c.return),fa(c);break;case 1:Gi(c,c.return);var f=c.stateNode;typeof f.componentWillUnmount=="function"&&KT(c,c.return,f),fa(c);break;case 27:wu(c.stateNode);case 26:case 5:Gi(c,c.return),fa(c);break;case 22:c.memoizedState===null&&fa(c);break;case 30:fa(c);break;default:fa(c)}a=a.sibling}}function so(a,c,f){for(f=f&&(c.subtreeFlags&8772)!==0,c=c.child;c!==null;){var y=c.alternate,x=a,C=c,D=C.flags;switch(C.tag){case 0:case 11:case 15:so(x,C,f),du(4,C);break;case 1:if(so(x,C,f),y=C,x=y.stateNode,typeof x.componentDidMount=="function")try{x.componentDidMount()}catch(se){_t(y,y.return,se)}if(y=C,x=y.updateQueue,x!==null){var P=y.stateNode;try{var W=x.shared.hiddenCallbacks;if(W!==null)for(x.shared.hiddenCallbacks=null,x=0;x<W.length;x++)jN(W[x],P)}catch(se){_t(y,y.return,se)}}f&&D&64&&WT(C),fu(C,C.return);break;case 27:ZT(C);case 26:case 5:so(x,C,f),f&&y===null&&D&4&&YT(C),fu(C,C.return);break;case 12:so(x,C,f);break;case 13:so(x,C,f),f&&D&4&&nA(x,C);break;case 22:C.memoizedState===null&&so(x,C,f),fu(C,C.return);break;case 30:break;default:so(x,C,f)}c=c.sibling}}function Xy(a,c){var f=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(f=a.memoizedState.cachePool.pool),a=null,c.memoizedState!==null&&c.memoizedState.cachePool!==null&&(a=c.memoizedState.cachePool.pool),a!==f&&(a!=null&&a.refCount++,f!=null&&Zc(f))}function Zy(a,c){a=null,c.alternate!==null&&(a=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==a&&(c.refCount++,a!=null&&Zc(a))}function Wi(a,c,f,y){if(c.subtreeFlags&10256)for(c=c.child;c!==null;)sA(a,c,f,y),c=c.sibling}function sA(a,c,f,y){var x=c.flags;switch(c.tag){case 0:case 11:case 15:Wi(a,c,f,y),x&2048&&du(9,c);break;case 1:Wi(a,c,f,y);break;case 3:Wi(a,c,f,y),x&2048&&(a=null,c.alternate!==null&&(a=c.alternate.memoizedState.cache),c=c.memoizedState.cache,c!==a&&(c.refCount++,a!=null&&Zc(a)));break;case 12:if(x&2048){Wi(a,c,f,y),a=c.stateNode;try{var C=c.memoizedProps,D=C.id,P=C.onPostCommit;typeof P=="function"&&P(D,c.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(W){_t(c,c.return,W)}}else Wi(a,c,f,y);break;case 13:Wi(a,c,f,y);break;case 23:break;case 22:C=c.stateNode,D=c.alternate,c.memoizedState!==null?C._visibility&2?Wi(a,c,f,y):hu(a,c):C._visibility&2?Wi(a,c,f,y):(C._visibility|=2,Nl(a,c,f,y,(c.subtreeFlags&10256)!==0)),x&2048&&Xy(D,c);break;case 24:Wi(a,c,f,y),x&2048&&Zy(c.alternate,c);break;default:Wi(a,c,f,y)}}function Nl(a,c,f,y,x){for(x=x&&(c.subtreeFlags&10256)!==0,c=c.child;c!==null;){var C=a,D=c,P=f,W=y,se=D.flags;switch(D.tag){case 0:case 11:case 15:Nl(C,D,P,W,x),du(8,D);break;case 23:break;case 22:var fe=D.stateNode;D.memoizedState!==null?fe._visibility&2?Nl(C,D,P,W,x):hu(C,D):(fe._visibility|=2,Nl(C,D,P,W,x)),x&&se&2048&&Xy(D.alternate,D);break;case 24:Nl(C,D,P,W,x),x&&se&2048&&Zy(D.alternate,D);break;default:Nl(C,D,P,W,x)}c=c.sibling}}function hu(a,c){if(c.subtreeFlags&10256)for(c=c.child;c!==null;){var f=a,y=c,x=y.flags;switch(y.tag){case 22:hu(f,y),x&2048&&Xy(y.alternate,y);break;case 24:hu(f,y),x&2048&&Zy(y.alternate,y);break;default:hu(f,y)}c=c.sibling}}var pu=8192;function Tl(a){if(a.subtreeFlags&pu)for(a=a.child;a!==null;)oA(a),a=a.sibling}function oA(a){switch(a.tag){case 26:Tl(a),a.flags&pu&&a.memoizedState!==null&&LF(Ei,a.memoizedState,a.memoizedProps);break;case 5:Tl(a);break;case 3:case 4:var c=Ei;Ei=yh(a.stateNode.containerInfo),Tl(a),Ei=c;break;case 22:a.memoizedState===null&&(c=a.alternate,c!==null&&c.memoizedState!==null?(c=pu,pu=16777216,Tl(a),pu=c):Tl(a));break;default:Tl(a)}}function aA(a){var c=a.alternate;if(c!==null&&(a=c.child,a!==null)){c.child=null;do c=a.sibling,a.sibling=null,a=c;while(a!==null)}}function mu(a){var c=a.deletions;if((a.flags&16)!==0){if(c!==null)for(var f=0;f<c.length;f++){var y=c[f];Rn=y,cA(y,a)}aA(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)lA(a),a=a.sibling}function lA(a){switch(a.tag){case 0:case 11:case 15:mu(a),a.flags&2048&&ro(9,a,a.return);break;case 3:mu(a);break;case 12:mu(a);break;case 22:var c=a.stateNode;a.memoizedState!==null&&c._visibility&2&&(a.return===null||a.return.tag!==13)?(c._visibility&=-3,sh(a)):mu(a);break;default:mu(a)}}function sh(a){var c=a.deletions;if((a.flags&16)!==0){if(c!==null)for(var f=0;f<c.length;f++){var y=c[f];Rn=y,cA(y,a)}aA(a)}for(a=a.child;a!==null;){switch(c=a,c.tag){case 0:case 11:case 15:ro(8,c,c.return),sh(c);break;case 22:f=c.stateNode,f._visibility&2&&(f._visibility&=-3,sh(c));break;default:sh(c)}a=a.sibling}}function cA(a,c){for(;Rn!==null;){var f=Rn;switch(f.tag){case 0:case 11:case 15:ro(8,f,c);break;case 23:case 22:if(f.memoizedState!==null&&f.memoizedState.cachePool!==null){var y=f.memoizedState.cachePool.pool;y!=null&&y.refCount++}break;case 24:Zc(f.memoizedState.cache)}if(y=f.child,y!==null)y.return=f,Rn=y;else e:for(f=a;Rn!==null;){y=Rn;var x=y.sibling,C=y.return;if(eA(y),y===f){Rn=null;break e}if(x!==null){x.return=C,Rn=x;break e}Rn=C}}}var ZH={getCacheForType:function(a){var c=Jn(Nn),f=c.data.get(a);return f===void 0&&(f=a(),c.data.set(a,f)),f}},QH=typeof WeakMap=="function"?WeakMap:Map,vt=0,jt=null,rt=null,ct=0,wt=0,zr=null,oo=!1,Al=!1,Qy=!1,Ss=0,Jt=0,ao=0,ha=0,Jy=0,si=0,Ml=0,gu=null,wr=null,e0=!1,t0=0,oh=1/0,ah=null,lo=null,Hn=0,co=null,_l=null,Dl=0,n0=0,r0=null,uA=null,yu=0,i0=null;function Vr(){if((vt&2)!==0&&ct!==0)return ct&-ct;if(O.T!==null){var a=bl;return a!==0?a:d0()}return Us()}function dA(){si===0&&(si=(ct&536870912)===0||yt?Fs():536870912);var a=ii.current;return a!==null&&(a.flags|=32),si}function qr(a,c,f){(a===jt&&(wt===2||wt===9)||a.cancelPendingCommit!==null)&&(Rl(a,0),uo(a,ct,si,!1)),_r(a,f),((vt&2)===0||a!==jt)&&(a===jt&&((vt&2)===0&&(ha|=f),Jt===4&&uo(a,ct,si,!1)),Ki(a))}function fA(a,c,f){if((vt&6)!==0)throw Error(r(327));var y=!f&&(c&124)===0&&(c&a.expiredLanes)===0||dt(a,c),x=y?tF(a,c):a0(a,c,!0),C=y;do{if(x===0){Al&&!y&&uo(a,c,0,!1);break}else{if(f=a.current.alternate,C&&!JH(f)){x=a0(a,c,!1),C=!1;continue}if(x===2){if(C=c,a.errorRecoveryDisabledLanes&C)var D=0;else D=a.pendingLanes&-536870913,D=D!==0?D:D&536870912?536870912:0;if(D!==0){c=D;e:{var P=a;x=gu;var W=P.current.memoizedState.isDehydrated;if(W&&(Rl(P,D).flags|=256),D=a0(P,D,!1),D!==2){if(Qy&&!W){P.errorRecoveryDisabledLanes|=C,ha|=C,x=4;break e}C=wr,wr=x,C!==null&&(wr===null?wr=C:wr.push.apply(wr,C))}x=D}if(C=!1,x!==2)continue}}if(x===1){Rl(a,0),uo(a,c,0,!0);break}e:{switch(y=a,C=x,C){case 0:case 1:throw Error(r(345));case 4:if((c&4194048)!==c)break;case 6:uo(y,c,si,!oo);break e;case 2:wr=null;break;case 3:case 5:break;default:throw Error(r(329))}if((c&62914560)===c&&(x=t0+300-Oe(),10<x)){if(uo(y,c,si,!oo),or(y,0,!0)!==0)break e;y.timeoutHandle=qA(hA.bind(null,y,f,wr,ah,e0,c,si,ha,Ml,oo,C,2,-0,0),x);break e}hA(y,f,wr,ah,e0,c,si,ha,Ml,oo,C,0,-0,0)}}break}while(!0);Ki(a)}function hA(a,c,f,y,x,C,D,P,W,se,fe,me,ce,ue){if(a.timeoutHandle=-1,me=c.subtreeFlags,(me&8192||(me&16785408)===16785408)&&(ku={stylesheets:null,count:0,unsuspend:OF},oA(c),me=PF(),me!==null)){a.cancelPendingCommit=me(vA.bind(null,a,c,C,f,y,x,D,P,W,fe,1,ce,ue)),uo(a,C,D,!se);return}vA(a,c,C,f,y,x,D,P,W)}function JH(a){for(var c=a;;){var f=c.tag;if((f===0||f===11||f===15)&&c.flags&16384&&(f=c.updateQueue,f!==null&&(f=f.stores,f!==null)))for(var y=0;y<f.length;y++){var x=f[y],C=x.getSnapshot;x=x.value;try{if(!Lr(C(),x))return!1}catch{return!1}}if(f=c.child,c.subtreeFlags&16384&&f!==null)f.return=c,c=f;else{if(c===a)break;for(;c.sibling===null;){if(c.return===null||c.return===a)return!0;c=c.return}c.sibling.return=c.return,c=c.sibling}}return!0}function uo(a,c,f,y){c&=~Jy,c&=~ha,a.suspendedLanes|=c,a.pingedLanes&=~c,y&&(a.warmLanes|=c),y=a.expirationTimes;for(var x=c;0<x;){var C=31-At(x),D=1<<C;y[C]=-1,x&=~D}f!==0&&yr(a,f,c)}function lh(){return(vt&6)===0?(bu(0),!1):!0}function s0(){if(rt!==null){if(wt===0)var a=rt.return;else a=rt,ps=aa=null,Sy(a),kl=null,lu=0,a=rt;for(;a!==null;)GT(a.alternate,a),a=a.return;rt=null}}function Rl(a,c){var f=a.timeoutHandle;f!==-1&&(a.timeoutHandle=-1,yF(f)),f=a.cancelPendingCommit,f!==null&&(a.cancelPendingCommit=null,f()),s0(),jt=a,rt=f=ds(a.current,null),ct=c,wt=0,zr=null,oo=!1,Al=dt(a,c),Qy=!1,Ml=si=Jy=ha=ao=Jt=0,wr=gu=null,e0=!1,(c&8)!==0&&(c|=c&32);var y=a.entangledLanes;if(y!==0)for(a=a.entanglements,y&=c;0<y;){var x=31-At(y),C=1<<x;c|=a[x],y&=~C}return Ss=c,_f(),f}function pA(a,c){tt=null,O.H=Yf,c===Jc||c===zf?(c=DN(),wt=3):c===AN?(c=DN(),wt=4):wt=c===RT?8:c!==null&&typeof c=="object"&&typeof c.then=="function"?6:1,zr=c,rt===null&&(Jt=1,eh(a,ei(c,a.current)))}function mA(){var a=O.H;return O.H=Yf,a===null?Yf:a}function gA(){var a=O.A;return O.A=ZH,a}function o0(){Jt=4,oo||(ct&4194048)!==ct&&ii.current!==null||(Al=!0),(ao&134217727)===0&&(ha&134217727)===0||jt===null||uo(jt,ct,si,!1)}function a0(a,c,f){var y=vt;vt|=2;var x=mA(),C=gA();(jt!==a||ct!==c)&&(ah=null,Rl(a,c)),c=!1;var D=Jt;e:do try{if(wt!==0&&rt!==null){var P=rt,W=zr;switch(wt){case 8:s0(),D=6;break e;case 3:case 2:case 9:case 6:ii.current===null&&(c=!0);var se=wt;if(wt=0,zr=null,jl(a,P,W,se),f&&Al){D=0;break e}break;default:se=wt,wt=0,zr=null,jl(a,P,W,se)}}eF(),D=Jt;break}catch(fe){pA(a,fe)}while(!0);return c&&a.shellSuspendCounter++,ps=aa=null,vt=y,O.H=x,O.A=C,rt===null&&(jt=null,ct=0,_f()),D}function eF(){for(;rt!==null;)yA(rt)}function tF(a,c){var f=vt;vt|=2;var y=mA(),x=gA();jt!==a||ct!==c?(ah=null,oh=Oe()+500,Rl(a,c)):Al=dt(a,c);e:do try{if(wt!==0&&rt!==null){c=rt;var C=zr;t:switch(wt){case 1:wt=0,zr=null,jl(a,c,C,1);break;case 2:case 9:if(MN(C)){wt=0,zr=null,bA(c);break}c=function(){wt!==2&&wt!==9||jt!==a||(wt=7),Ki(a)},C.then(c,c);break e;case 3:wt=7;break e;case 4:wt=5;break e;case 7:MN(C)?(wt=0,zr=null,bA(c)):(wt=0,zr=null,jl(a,c,C,7));break;case 5:var D=null;switch(rt.tag){case 26:D=rt.memoizedState;case 5:case 27:var P=rt;if(!D||JA(D)){wt=0,zr=null;var W=P.sibling;if(W!==null)rt=W;else{var se=P.return;se!==null?(rt=se,ch(se)):rt=null}break t}}wt=0,zr=null,jl(a,c,C,5);break;case 6:wt=0,zr=null,jl(a,c,C,6);break;case 8:s0(),Jt=6;break e;default:throw Error(r(462))}}nF();break}catch(fe){pA(a,fe)}while(!0);return ps=aa=null,O.H=y,O.A=x,vt=f,rt!==null?0:(jt=null,ct=0,_f(),Jt)}function nF(){for(;rt!==null&&!Ee();)yA(rt)}function yA(a){var c=UT(a.alternate,a,Ss);a.memoizedProps=a.pendingProps,c===null?ch(a):rt=c}function bA(a){var c=a,f=c.alternate;switch(c.tag){case 15:case 0:c=BT(f,c,c.pendingProps,c.type,void 0,ct);break;case 11:c=BT(f,c,c.pendingProps,c.type.render,c.ref,ct);break;case 5:Sy(c);default:GT(f,c),c=rt=xN(c,Ss),c=UT(f,c,Ss)}a.memoizedProps=a.pendingProps,c===null?ch(a):rt=c}function jl(a,c,f,y){ps=aa=null,Sy(c),kl=null,lu=0;var x=c.return;try{if($H(a,x,c,f,ct)){Jt=1,eh(a,ei(f,a.current)),rt=null;return}}catch(C){if(x!==null)throw rt=x,C;Jt=1,eh(a,ei(f,a.current)),rt=null;return}c.flags&32768?(yt||y===1?a=!0:Al||(ct&536870912)!==0?a=!1:(oo=a=!0,(y===2||y===9||y===3||y===6)&&(y=ii.current,y!==null&&y.tag===13&&(y.flags|=16384))),xA(c,a)):ch(c)}function ch(a){var c=a;do{if((c.flags&32768)!==0){xA(c,oo);return}a=c.return;var f=WH(c.alternate,c,Ss);if(f!==null){rt=f;return}if(c=c.sibling,c!==null){rt=c;return}rt=c=a}while(c!==null);Jt===0&&(Jt=5)}function xA(a,c){do{var f=KH(a.alternate,a);if(f!==null){f.flags&=32767,rt=f;return}if(f=a.return,f!==null&&(f.flags|=32768,f.subtreeFlags=0,f.deletions=null),!c&&(a=a.sibling,a!==null)){rt=a;return}rt=a=f}while(a!==null);Jt=6,rt=null}function vA(a,c,f,y,x,C,D,P,W){a.cancelPendingCommit=null;do uh();while(Hn!==0);if((vt&6)!==0)throw Error(r(327));if(c!==null){if(c===a.current)throw Error(r(177));if(C=c.lanes|c.childLanes,C|=Zg,ar(a,f,C,D,P,W),a===jt&&(rt=jt=null,ct=0),_l=c,co=a,Dl=f,n0=C,r0=x,uA=y,(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,oF(un,function(){return EA(),null})):(a.callbackNode=null,a.callbackPriority=0),y=(c.flags&13878)!==0,(c.subtreeFlags&13878)!==0||y){y=O.T,O.T=null,x=q.p,q.p=2,D=vt,vt|=4;try{YH(a,c,f)}finally{vt=D,q.p=x,O.T=y}}Hn=1,wA(),SA(),CA()}}function wA(){if(Hn===1){Hn=0;var a=co,c=_l,f=(c.flags&13878)!==0;if((c.subtreeFlags&13878)!==0||f){f=O.T,O.T=null;var y=q.p;q.p=2;var x=vt;vt|=4;try{rA(c,a);var C=x0,D=cN(a.containerInfo),P=C.focusedElem,W=C.selectionRange;if(D!==P&&P&&P.ownerDocument&&lN(P.ownerDocument.documentElement,P)){if(W!==null&&Gg(P)){var se=W.start,fe=W.end;if(fe===void 0&&(fe=se),"selectionStart"in P)P.selectionStart=se,P.selectionEnd=Math.min(fe,P.value.length);else{var me=P.ownerDocument||document,ce=me&&me.defaultView||window;if(ce.getSelection){var ue=ce.getSelection(),$e=P.textContent.length,He=Math.min(W.start,$e),Et=W.end===void 0?He:Math.min(W.end,$e);!ue.extend&&He>Et&&(D=Et,Et=He,He=D);var ne=aN(P,He),J=aN(P,Et);if(ne&&J&&(ue.rangeCount!==1||ue.anchorNode!==ne.node||ue.anchorOffset!==ne.offset||ue.focusNode!==J.node||ue.focusOffset!==J.offset)){var re=me.createRange();re.setStart(ne.node,ne.offset),ue.removeAllRanges(),He>Et?(ue.addRange(re),ue.extend(J.node,J.offset)):(re.setEnd(J.node,J.offset),ue.addRange(re))}}}}for(me=[],ue=P;ue=ue.parentNode;)ue.nodeType===1&&me.push({element:ue,left:ue.scrollLeft,top:ue.scrollTop});for(typeof P.focus=="function"&&P.focus(),P=0;P<me.length;P++){var he=me[P];he.element.scrollLeft=he.left,he.element.scrollTop=he.top}}Sh=!!b0,x0=b0=null}finally{vt=x,q.p=y,O.T=f}}a.current=c,Hn=2}}function SA(){if(Hn===2){Hn=0;var a=co,c=_l,f=(c.flags&8772)!==0;if((c.subtreeFlags&8772)!==0||f){f=O.T,O.T=null;var y=q.p;q.p=2;var x=vt;vt|=4;try{JT(a,c.alternate,c)}finally{vt=x,q.p=y,O.T=f}}Hn=3}}function CA(){if(Hn===4||Hn===3){Hn=0,ht();var a=co,c=_l,f=Dl,y=uA;(c.subtreeFlags&10256)!==0||(c.flags&10256)!==0?Hn=5:(Hn=0,_l=co=null,kA(a,a.pendingLanes));var x=a.pendingLanes;if(x===0&&(lo=null),Bn(f),c=c.stateNode,ut&&typeof ut.onCommitFiberRoot=="function")try{ut.onCommitFiberRoot(Ot,c,void 0,(c.current.flags&128)===128)}catch{}if(y!==null){c=O.T,x=q.p,q.p=2,O.T=null;try{for(var C=a.onRecoverableError,D=0;D<y.length;D++){var P=y[D];C(P.value,{componentStack:P.stack})}}finally{O.T=c,q.p=x}}(Dl&3)!==0&&uh(),Ki(a),x=a.pendingLanes,(f&4194090)!==0&&(x&42)!==0?a===i0?yu++:(yu=0,i0=a):yu=0,bu(0)}}function kA(a,c){(a.pooledCacheLanes&=c)===0&&(c=a.pooledCache,c!=null&&(a.pooledCache=null,Zc(c)))}function uh(a){return wA(),SA(),CA(),EA()}function EA(){if(Hn!==5)return!1;var a=co,c=n0;n0=0;var f=Bn(Dl),y=O.T,x=q.p;try{q.p=32>f?32:f,O.T=null,f=r0,r0=null;var C=co,D=Dl;if(Hn=0,_l=co=null,Dl=0,(vt&6)!==0)throw Error(r(331));var P=vt;if(vt|=4,lA(C.current),sA(C,C.current,D,f),vt=P,bu(0,!1),ut&&typeof ut.onPostCommitFiberRoot=="function")try{ut.onPostCommitFiberRoot(Ot,C)}catch{}return!0}finally{q.p=x,O.T=y,kA(a,c)}}function NA(a,c,f){c=ei(f,c),c=Py(a.stateNode,c,2),a=Js(a,c,2),a!==null&&(_r(a,2),Ki(a))}function _t(a,c,f){if(a.tag===3)NA(a,a,f);else for(;c!==null;){if(c.tag===3){NA(c,a,f);break}else if(c.tag===1){var y=c.stateNode;if(typeof c.type.getDerivedStateFromError=="function"||typeof y.componentDidCatch=="function"&&(lo===null||!lo.has(y))){a=ei(f,a),f=_T(2),y=Js(c,f,2),y!==null&&(DT(f,y,c,a),_r(y,2),Ki(y));break}}c=c.return}}function l0(a,c,f){var y=a.pingCache;if(y===null){y=a.pingCache=new QH;var x=new Set;y.set(c,x)}else x=y.get(c),x===void 0&&(x=new Set,y.set(c,x));x.has(f)||(Qy=!0,x.add(f),a=rF.bind(null,a,c,f),c.then(a,a))}function rF(a,c,f){var y=a.pingCache;y!==null&&y.delete(c),a.pingedLanes|=a.suspendedLanes&f,a.warmLanes&=~f,jt===a&&(ct&f)===f&&(Jt===4||Jt===3&&(ct&62914560)===ct&&300>Oe()-t0?(vt&2)===0&&Rl(a,0):Jy|=f,Ml===ct&&(Ml=0)),Ki(a)}function TA(a,c){c===0&&(c=wi()),a=pl(a,c),a!==null&&(_r(a,c),Ki(a))}function iF(a){var c=a.memoizedState,f=0;c!==null&&(f=c.retryLane),TA(a,f)}function sF(a,c){var f=0;switch(a.tag){case 13:var y=a.stateNode,x=a.memoizedState;x!==null&&(f=x.retryLane);break;case 19:y=a.stateNode;break;case 22:y=a.stateNode._retryCache;break;default:throw Error(r(314))}y!==null&&y.delete(c),TA(a,f)}function oF(a,c){return Te(a,c)}var dh=null,Ol=null,c0=!1,fh=!1,u0=!1,pa=0;function Ki(a){a!==Ol&&a.next===null&&(Ol===null?dh=Ol=a:Ol=Ol.next=a),fh=!0,c0||(c0=!0,lF())}function bu(a,c){if(!u0&&fh){u0=!0;do for(var f=!1,y=dh;y!==null;){if(a!==0){var x=y.pendingLanes;if(x===0)var C=0;else{var D=y.suspendedLanes,P=y.pingedLanes;C=(1<<31-At(42|a)+1)-1,C&=x&~(D&~P),C=C&201326741?C&201326741|1:C?C|2:0}C!==0&&(f=!0,DA(y,C))}else C=ct,C=or(y,y===jt?C:0,y.cancelPendingCommit!==null||y.timeoutHandle!==-1),(C&3)===0||dt(y,C)||(f=!0,DA(y,C));y=y.next}while(f);u0=!1}}function aF(){AA()}function AA(){fh=c0=!1;var a=0;pa!==0&&(gF()&&(a=pa),pa=0);for(var c=Oe(),f=null,y=dh;y!==null;){var x=y.next,C=MA(y,c);C===0?(y.next=null,f===null?dh=x:f.next=x,x===null&&(Ol=f)):(f=y,(a!==0||(C&3)!==0)&&(fh=!0)),y=x}bu(a)}function MA(a,c){for(var f=a.suspendedLanes,y=a.pingedLanes,x=a.expirationTimes,C=a.pendingLanes&-62914561;0<C;){var D=31-At(C),P=1<<D,W=x[D];W===-1?((P&f)===0||(P&y)!==0)&&(x[D]=fn(P,c)):W<=c&&(a.expiredLanes|=P),C&=~P}if(c=jt,f=ct,f=or(a,a===c?f:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),y=a.callbackNode,f===0||a===c&&(wt===2||wt===9)||a.cancelPendingCommit!==null)return y!==null&&y!==null&&ke(y),a.callbackNode=null,a.callbackPriority=0;if((f&3)===0||dt(a,f)){if(c=f&-f,c===a.callbackPriority)return c;switch(y!==null&&ke(y),Bn(f)){case 2:case 8:f=$t;break;case 32:f=un;break;case 268435456:f=Nt;break;default:f=un}return y=_A.bind(null,a),f=Te(f,y),a.callbackPriority=c,a.callbackNode=f,c}return y!==null&&y!==null&&ke(y),a.callbackPriority=2,a.callbackNode=null,2}function _A(a,c){if(Hn!==0&&Hn!==5)return a.callbackNode=null,a.callbackPriority=0,null;var f=a.callbackNode;if(uh()&&a.callbackNode!==f)return null;var y=ct;return y=or(a,a===jt?y:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),y===0?null:(fA(a,y,c),MA(a,Oe()),a.callbackNode!=null&&a.callbackNode===f?_A.bind(null,a):null)}function DA(a,c){if(uh())return null;fA(a,c,!0)}function lF(){bF(function(){(vt&6)!==0?Te(bt,aF):AA()})}function d0(){return pa===0&&(pa=Fs()),pa}function RA(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:al(""+a)}function jA(a,c){var f=c.ownerDocument.createElement("input");return f.name=c.name,f.value=c.value,a.id&&f.setAttribute("form",a.id),c.parentNode.insertBefore(f,c),a=new FormData(a),f.parentNode.removeChild(f),a}function cF(a,c,f,y,x){if(c==="submit"&&f&&f.stateNode===x){var C=RA((x[Lt]||null).action),D=y.submitter;D&&(c=(c=D[Lt]||null)?RA(c.formAction):D.getAttribute("formAction"),c!==null&&(C=c,D=null));var P=new pe("action","action",null,y,x);a.push({event:P,listeners:[{instance:null,listener:function(){if(y.defaultPrevented){if(pa!==0){var W=D?jA(x,D):new FormData(x);Dy(f,{pending:!0,data:W,method:x.method,action:C},null,W)}}else typeof C=="function"&&(P.preventDefault(),W=D?jA(x,D):new FormData(x),Dy(f,{pending:!0,data:W,method:x.method,action:C},C,W))},currentTarget:x}]})}}for(var f0=0;f0<Xg.length;f0++){var h0=Xg[f0],uF=h0.toLowerCase(),dF=h0[0].toUpperCase()+h0.slice(1);ki(uF,"on"+dF)}ki(fN,"onAnimationEnd"),ki(hN,"onAnimationIteration"),ki(pN,"onAnimationStart"),ki("dblclick","onDoubleClick"),ki("focusin","onFocus"),ki("focusout","onBlur"),ki(AH,"onTransitionRun"),ki(MH,"onTransitionStart"),ki(_H,"onTransitionCancel"),ki(mN,"onTransitionEnd"),ge("onMouseEnter",["mouseout","mouseover"]),ge("onMouseLeave",["mouseout","mouseover"]),ge("onPointerEnter",["pointerout","pointerover"]),ge("onPointerLeave",["pointerout","pointerover"]),Z("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),Z("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),Z("onBeforeInput",["compositionend","keypress","textInput","paste"]),Z("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),Z("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),Z("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var xu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),fF=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(xu));function OA(a,c){c=(c&4)!==0;for(var f=0;f<a.length;f++){var y=a[f],x=y.event;y=y.listeners;e:{var C=void 0;if(c)for(var D=y.length-1;0<=D;D--){var P=y[D],W=P.instance,se=P.currentTarget;if(P=P.listener,W!==C&&x.isPropagationStopped())break e;C=P,x.currentTarget=se;try{C(x)}catch(fe){Jf(fe)}x.currentTarget=null,C=W}else for(D=0;D<y.length;D++){if(P=y[D],W=P.instance,se=P.currentTarget,P=P.listener,W!==C&&x.isPropagationStopped())break e;C=P,x.currentTarget=se;try{C(x)}catch(fe){Jf(fe)}x.currentTarget=null,C=W}}}}function it(a,c){var f=c[En];f===void 0&&(f=c[En]=new Set);var y=a+"__bubble";f.has(y)||(LA(c,a,2,!1),f.add(y))}function p0(a,c,f){var y=0;c&&(y|=4),LA(f,a,y,c)}var hh="_reactListening"+Math.random().toString(36).slice(2);function m0(a){if(!a[hh]){a[hh]=!0,zi.forEach(function(f){f!=="selectionchange"&&(fF.has(f)||p0(f,!1,a),p0(f,!0,a))});var c=a.nodeType===9?a:a.ownerDocument;c===null||c[hh]||(c[hh]=!0,p0("selectionchange",!1,c))}}function LA(a,c,f,y){switch(sM(c)){case 2:var x=zF;break;case 8:x=VF;break;default:x=M0}f=x.bind(null,c,f,a),x=void 0,!zc||c!=="touchstart"&&c!=="touchmove"&&c!=="wheel"||(x=!0),y?x!==void 0?a.addEventListener(c,f,{capture:!0,passive:x}):a.addEventListener(c,f,!0):x!==void 0?a.addEventListener(c,f,{passive:x}):a.addEventListener(c,f,!1)}function g0(a,c,f,y,x){var C=y;if((c&1)===0&&(c&2)===0&&y!==null)e:for(;;){if(y===null)return;var D=y.tag;if(D===3||D===4){var P=y.stateNode.containerInfo;if(P===x)break;if(D===4)for(D=y.return;D!==null;){var W=D.tag;if((W===3||W===4)&&D.stateNode.containerInfo===x)return;D=D.return}for(;P!==null;){if(D=hn(P),D===null)return;if(W=D.tag,W===5||W===6||W===26||W===27){y=C=D;continue e}P=P.parentNode}}y=y.return}Ef(function(){var se=C,fe=Xo(f),me=[];e:{var ce=gN.get(a);if(ce!==void 0){var ue=pe,$e=a;switch(a){case"keypress":if(ll(f)===0)break e;case"keydown":case"keyup":ue=oH;break;case"focusin":$e="focus",ue=qc;break;case"focusout":$e="blur",ue=qc;break;case"beforeblur":case"afterblur":ue=qc;break;case"click":if(f.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ue=Xe;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ue=Vg;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ue=cH;break;case fN:case hN:case pN:ue=Vn;break;case mN:ue=dH;break;case"scroll":case"scrollend":ue=we;break;case"wheel":ue=hH;break;case"copy":case"cut":case"paste":ue=Af;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ue=W2;break;case"toggle":case"beforetoggle":ue=mH}var He=(c&4)!==0,Et=!He&&(a==="scroll"||a==="scrollend"),ne=He?ce!==null?ce+"Capture":null:ce;He=[];for(var J=se,re;J!==null;){var he=J;if(re=he.stateNode,he=he.tag,he!==5&&he!==26&&he!==27||re===null||ne===null||(he=Zo(J,ne),he!=null&&He.push(vu(J,he,re))),Et)break;J=J.return}0<He.length&&(ce=new ue(ce,$e,null,f,fe),me.push({event:ce,listeners:He}))}}if((c&7)===0){e:{if(ce=a==="mouseover"||a==="pointerover",ue=a==="mouseout"||a==="pointerout",ce&&f!==Ic&&($e=f.relatedTarget||f.fromElement)&&(hn($e)||$e[br]))break e;if((ue||ce)&&(ce=fe.window===fe?fe:(ce=fe.ownerDocument)?ce.defaultView||ce.parentWindow:window,ue?($e=f.relatedTarget||f.toElement,ue=se,$e=$e?hn($e):null,$e!==null&&(Et=s($e),He=$e.tag,$e!==Et||He!==5&&He!==27&&He!==6)&&($e=null)):(ue=null,$e=se),ue!==$e)){if(He=Xe,he="onMouseLeave",ne="onMouseEnter",J="mouse",(a==="pointerout"||a==="pointerover")&&(He=W2,he="onPointerLeave",ne="onPointerEnter",J="pointer"),Et=ue==null?ce:Yn(ue),re=$e==null?ce:Yn($e),ce=new He(he,J+"leave",ue,f,fe),ce.target=Et,ce.relatedTarget=re,he=null,hn(fe)===se&&(He=new He(ne,J+"enter",$e,f,fe),He.target=re,He.relatedTarget=Et,he=He),Et=he,ue&&$e)t:{for(He=ue,ne=$e,J=0,re=He;re;re=Ll(re))J++;for(re=0,he=ne;he;he=Ll(he))re++;for(;0<J-re;)He=Ll(He),J--;for(;0<re-J;)ne=Ll(ne),re--;for(;J--;){if(He===ne||ne!==null&&He===ne.alternate)break t;He=Ll(He),ne=Ll(ne)}He=null}else He=null;ue!==null&&PA(me,ce,ue,He,!1),$e!==null&&Et!==null&&PA(me,Et,$e,He,!0)}}e:{if(ce=se?Yn(se):window,ue=ce.nodeName&&ce.nodeName.toLowerCase(),ue==="select"||ue==="input"&&ce.type==="file")var je=tN;else if(J2(ce))if(nN)je=EH;else{je=CH;var nt=SH}else ue=ce.nodeName,!ue||ue.toLowerCase()!=="input"||ce.type!=="checkbox"&&ce.type!=="radio"?se&&Pc(se.elementType)&&(je=tN):je=kH;if(je&&(je=je(a,se))){eN(me,je,f,fe);break e}nt&&nt(a,ce,se),a==="focusout"&&se&&ce.type==="number"&&se.memoizedProps.value!=null&&Ws(ce,"number",ce.value)}switch(nt=se?Yn(se):window,a){case"focusin":(J2(nt)||nt.contentEditable==="true")&&(dl=nt,Wg=se,Gc=null);break;case"focusout":Gc=Wg=dl=null;break;case"mousedown":Kg=!0;break;case"contextmenu":case"mouseup":case"dragend":Kg=!1,uN(me,f,fe);break;case"selectionchange":if(TH)break;case"keydown":case"keyup":uN(me,f,fe)}var Ie;if(Fg)e:{switch(a){case"compositionstart":var Ue="onCompositionStart";break e;case"compositionend":Ue="onCompositionEnd";break e;case"compositionupdate":Ue="onCompositionUpdate";break e}Ue=void 0}else ul?Z2(a,f)&&(Ue="onCompositionEnd"):a==="keydown"&&f.keyCode===229&&(Ue="onCompositionStart");Ue&&(K2&&f.locale!=="ko"&&(ul||Ue!=="onCompositionStart"?Ue==="onCompositionEnd"&&ul&&(Ie=Nf()):(Fi=fe,Vc="value"in Fi?Fi.value:Fi.textContent,ul=!0)),nt=ph(se,Ue),0<nt.length&&(Ue=new G2(Ue,a,null,f,fe),me.push({event:Ue,listeners:nt}),Ie?Ue.data=Ie:(Ie=Q2(f),Ie!==null&&(Ue.data=Ie)))),(Ie=yH?bH(a,f):xH(a,f))&&(Ue=ph(se,"onBeforeInput"),0<Ue.length&&(nt=new G2("onBeforeInput","beforeinput",null,f,fe),me.push({event:nt,listeners:Ue}),nt.data=Ie)),cF(me,a,se,f,fe)}OA(me,c)})}function vu(a,c,f){return{instance:a,listener:c,currentTarget:f}}function ph(a,c){for(var f=c+"Capture",y=[];a!==null;){var x=a,C=x.stateNode;if(x=x.tag,x!==5&&x!==26&&x!==27||C===null||(x=Zo(a,f),x!=null&&y.unshift(vu(a,x,C)),x=Zo(a,c),x!=null&&y.push(vu(a,x,C))),a.tag===3)return y;a=a.return}return[]}function Ll(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function PA(a,c,f,y,x){for(var C=c._reactName,D=[];f!==null&&f!==y;){var P=f,W=P.alternate,se=P.stateNode;if(P=P.tag,W!==null&&W===y)break;P!==5&&P!==26&&P!==27||se===null||(W=se,x?(se=Zo(f,C),se!=null&&D.unshift(vu(f,se,W))):x||(se=Zo(f,C),se!=null&&D.push(vu(f,se,W)))),f=f.return}D.length!==0&&a.push({event:c,listeners:D})}var hF=/\r\n?/g,pF=/\u0000|\uFFFD/g;function IA(a){return(typeof a=="string"?a:""+a).replace(hF,`
`).replace(pF,"")}function BA(a,c){return c=IA(c),IA(a)===c}function mh(){}function kt(a,c,f,y,x,C){switch(f){case"children":typeof y=="string"?c==="body"||c==="textarea"&&y===""||Qr(a,y):(typeof y=="number"||typeof y=="bigint")&&c!=="body"&&Qr(a,""+y);break;case"className":_n(a,"class",y);break;case"tabIndex":_n(a,"tabindex",y);break;case"dir":case"role":case"viewBox":case"width":case"height":_n(a,f,y);break;case"style":Sf(a,y,C);break;case"data":if(c!=="object"){_n(a,"data",y);break}case"src":case"href":if(y===""&&(c!=="a"||f!=="href")){a.removeAttribute(f);break}if(y==null||typeof y=="function"||typeof y=="symbol"||typeof y=="boolean"){a.removeAttribute(f);break}y=al(""+y),a.setAttribute(f,y);break;case"action":case"formAction":if(typeof y=="function"){a.setAttribute(f,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof C=="function"&&(f==="formAction"?(c!=="input"&&kt(a,c,"name",x.name,x,null),kt(a,c,"formEncType",x.formEncType,x,null),kt(a,c,"formMethod",x.formMethod,x,null),kt(a,c,"formTarget",x.formTarget,x,null)):(kt(a,c,"encType",x.encType,x,null),kt(a,c,"method",x.method,x,null),kt(a,c,"target",x.target,x,null)));if(y==null||typeof y=="symbol"||typeof y=="boolean"){a.removeAttribute(f);break}y=al(""+y),a.setAttribute(f,y);break;case"onClick":y!=null&&(a.onclick=mh);break;case"onScroll":y!=null&&it("scroll",a);break;case"onScrollEnd":y!=null&&it("scrollend",a);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(f=y.__html,f!=null){if(x.children!=null)throw Error(r(60));a.innerHTML=f}}break;case"multiple":a.multiple=y&&typeof y!="function"&&typeof y!="symbol";break;case"muted":a.muted=y&&typeof y!="function"&&typeof y!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(y==null||typeof y=="function"||typeof y=="boolean"||typeof y=="symbol"){a.removeAttribute("xlink:href");break}f=al(""+y),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",f);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":y!=null&&typeof y!="function"&&typeof y!="symbol"?a.setAttribute(f,""+y):a.removeAttribute(f);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":y&&typeof y!="function"&&typeof y!="symbol"?a.setAttribute(f,""):a.removeAttribute(f);break;case"capture":case"download":y===!0?a.setAttribute(f,""):y!==!1&&y!=null&&typeof y!="function"&&typeof y!="symbol"?a.setAttribute(f,y):a.removeAttribute(f);break;case"cols":case"rows":case"size":case"span":y!=null&&typeof y!="function"&&typeof y!="symbol"&&!isNaN(y)&&1<=y?a.setAttribute(f,y):a.removeAttribute(f);break;case"rowSpan":case"start":y==null||typeof y=="function"||typeof y=="symbol"||isNaN(y)?a.removeAttribute(f):a.setAttribute(f,y);break;case"popover":it("beforetoggle",a),it("toggle",a),Vt(a,"popover",y);break;case"xlinkActuate":pn(a,"http://www.w3.org/1999/xlink","xlink:actuate",y);break;case"xlinkArcrole":pn(a,"http://www.w3.org/1999/xlink","xlink:arcrole",y);break;case"xlinkRole":pn(a,"http://www.w3.org/1999/xlink","xlink:role",y);break;case"xlinkShow":pn(a,"http://www.w3.org/1999/xlink","xlink:show",y);break;case"xlinkTitle":pn(a,"http://www.w3.org/1999/xlink","xlink:title",y);break;case"xlinkType":pn(a,"http://www.w3.org/1999/xlink","xlink:type",y);break;case"xmlBase":pn(a,"http://www.w3.org/XML/1998/namespace","xml:base",y);break;case"xmlLang":pn(a,"http://www.w3.org/XML/1998/namespace","xml:lang",y);break;case"xmlSpace":pn(a,"http://www.w3.org/XML/1998/namespace","xml:space",y);break;case"is":Vt(a,"is",y);break;case"innerText":case"textContent":break;default:(!(2<f.length)||f[0]!=="o"&&f[0]!=="O"||f[1]!=="n"&&f[1]!=="N")&&(f=Cf.get(f)||f,Vt(a,f,y))}}function y0(a,c,f,y,x,C){switch(f){case"style":Sf(a,y,C);break;case"dangerouslySetInnerHTML":if(y!=null){if(typeof y!="object"||!("__html"in y))throw Error(r(61));if(f=y.__html,f!=null){if(x.children!=null)throw Error(r(60));a.innerHTML=f}}break;case"children":typeof y=="string"?Qr(a,y):(typeof y=="number"||typeof y=="bigint")&&Qr(a,""+y);break;case"onScroll":y!=null&&it("scroll",a);break;case"onScrollEnd":y!=null&&it("scrollend",a);break;case"onClick":y!=null&&(a.onclick=mh);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!De.hasOwnProperty(f))e:{if(f[0]==="o"&&f[1]==="n"&&(x=f.endsWith("Capture"),c=f.slice(2,x?f.length-7:void 0),C=a[Lt]||null,C=C!=null?C[f]:null,typeof C=="function"&&a.removeEventListener(c,C,x),typeof y=="function")){typeof C!="function"&&C!==null&&(f in a?a[f]=null:a.hasAttribute(f)&&a.removeAttribute(f)),a.addEventListener(c,y,x);break e}f in a?a[f]=y:y===!0?a.setAttribute(f,""):Vt(a,f,y)}}}function Fn(a,c,f){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":it("error",a),it("load",a);var y=!1,x=!1,C;for(C in f)if(f.hasOwnProperty(C)){var D=f[C];if(D!=null)switch(C){case"src":y=!0;break;case"srcSet":x=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:kt(a,c,C,D,f,null)}}x&&kt(a,c,"srcSet",f.srcSet,f,null),y&&kt(a,c,"src",f.src,f,null);return;case"input":it("invalid",a);var P=C=D=x=null,W=null,se=null;for(y in f)if(f.hasOwnProperty(y)){var fe=f[y];if(fe!=null)switch(y){case"name":x=fe;break;case"type":D=fe;break;case"checked":W=fe;break;case"defaultChecked":se=fe;break;case"value":C=fe;break;case"defaultValue":P=fe;break;case"children":case"dangerouslySetInnerHTML":if(fe!=null)throw Error(r(137,c));break;default:kt(a,c,y,fe,f,null)}}Yo(a,C,P,W,se,D,x,!1),$s(a);return;case"select":it("invalid",a),y=D=C=null;for(x in f)if(f.hasOwnProperty(x)&&(P=f[x],P!=null))switch(x){case"value":C=P;break;case"defaultValue":D=P;break;case"multiple":y=P;default:kt(a,c,x,P,f,null)}c=C,f=D,a.multiple=!!y,c!=null?Zr(a,!!y,c,!1):f!=null&&Zr(a,!!y,f,!0);return;case"textarea":it("invalid",a),C=x=y=null;for(D in f)if(f.hasOwnProperty(D)&&(P=f[D],P!=null))switch(D){case"value":y=P;break;case"defaultValue":x=P;break;case"children":C=P;break;case"dangerouslySetInnerHTML":if(P!=null)throw Error(r(91));break;default:kt(a,c,D,P,f,null)}vf(a,y,x,C),$s(a);return;case"option":for(W in f)if(f.hasOwnProperty(W)&&(y=f[W],y!=null))switch(W){case"selected":a.selected=y&&typeof y!="function"&&typeof y!="symbol";break;default:kt(a,c,W,y,f,null)}return;case"dialog":it("beforetoggle",a),it("toggle",a),it("cancel",a),it("close",a);break;case"iframe":case"object":it("load",a);break;case"video":case"audio":for(y=0;y<xu.length;y++)it(xu[y],a);break;case"image":it("error",a),it("load",a);break;case"details":it("toggle",a);break;case"embed":case"source":case"link":it("error",a),it("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(se in f)if(f.hasOwnProperty(se)&&(y=f[se],y!=null))switch(se){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,c));default:kt(a,c,se,y,f,null)}return;default:if(Pc(c)){for(fe in f)f.hasOwnProperty(fe)&&(y=f[fe],y!==void 0&&y0(a,c,fe,y,f,void 0));return}}for(P in f)f.hasOwnProperty(P)&&(y=f[P],y!=null&&kt(a,c,P,y,f,null))}function mF(a,c,f,y){switch(c){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var x=null,C=null,D=null,P=null,W=null,se=null,fe=null;for(ue in f){var me=f[ue];if(f.hasOwnProperty(ue)&&me!=null)switch(ue){case"checked":break;case"value":break;case"defaultValue":W=me;default:y.hasOwnProperty(ue)||kt(a,c,ue,null,y,me)}}for(var ce in y){var ue=y[ce];if(me=f[ce],y.hasOwnProperty(ce)&&(ue!=null||me!=null))switch(ce){case"type":C=ue;break;case"name":x=ue;break;case"checked":se=ue;break;case"defaultChecked":fe=ue;break;case"value":D=ue;break;case"defaultValue":P=ue;break;case"children":case"dangerouslySetInnerHTML":if(ue!=null)throw Error(r(137,c));break;default:ue!==me&&kt(a,c,ce,ue,y,me)}}Or(a,D,P,W,se,fe,C,x);return;case"select":ue=D=P=ce=null;for(C in f)if(W=f[C],f.hasOwnProperty(C)&&W!=null)switch(C){case"value":break;case"multiple":ue=W;default:y.hasOwnProperty(C)||kt(a,c,C,null,y,W)}for(x in y)if(C=y[x],W=f[x],y.hasOwnProperty(x)&&(C!=null||W!=null))switch(x){case"value":ce=C;break;case"defaultValue":P=C;break;case"multiple":D=C;default:C!==W&&kt(a,c,x,C,y,W)}c=P,f=D,y=ue,ce!=null?Zr(a,!!f,ce,!1):!!y!=!!f&&(c!=null?Zr(a,!!f,c,!0):Zr(a,!!f,f?[]:"",!1));return;case"textarea":ue=ce=null;for(P in f)if(x=f[P],f.hasOwnProperty(P)&&x!=null&&!y.hasOwnProperty(P))switch(P){case"value":break;case"children":break;default:kt(a,c,P,null,y,x)}for(D in y)if(x=y[D],C=f[D],y.hasOwnProperty(D)&&(x!=null||C!=null))switch(D){case"value":ce=x;break;case"defaultValue":ue=x;break;case"children":break;case"dangerouslySetInnerHTML":if(x!=null)throw Error(r(91));break;default:x!==C&&kt(a,c,D,x,y,C)}xf(a,ce,ue);return;case"option":for(var $e in f)if(ce=f[$e],f.hasOwnProperty($e)&&ce!=null&&!y.hasOwnProperty($e))switch($e){case"selected":a.selected=!1;break;default:kt(a,c,$e,null,y,ce)}for(W in y)if(ce=y[W],ue=f[W],y.hasOwnProperty(W)&&ce!==ue&&(ce!=null||ue!=null))switch(W){case"selected":a.selected=ce&&typeof ce!="function"&&typeof ce!="symbol";break;default:kt(a,c,W,ce,y,ue)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var He in f)ce=f[He],f.hasOwnProperty(He)&&ce!=null&&!y.hasOwnProperty(He)&&kt(a,c,He,null,y,ce);for(se in y)if(ce=y[se],ue=f[se],y.hasOwnProperty(se)&&ce!==ue&&(ce!=null||ue!=null))switch(se){case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(r(137,c));break;default:kt(a,c,se,ce,y,ue)}return;default:if(Pc(c)){for(var Et in f)ce=f[Et],f.hasOwnProperty(Et)&&ce!==void 0&&!y.hasOwnProperty(Et)&&y0(a,c,Et,void 0,y,ce);for(fe in y)ce=y[fe],ue=f[fe],!y.hasOwnProperty(fe)||ce===ue||ce===void 0&&ue===void 0||y0(a,c,fe,ce,y,ue);return}}for(var ne in f)ce=f[ne],f.hasOwnProperty(ne)&&ce!=null&&!y.hasOwnProperty(ne)&&kt(a,c,ne,null,y,ce);for(me in y)ce=y[me],ue=f[me],!y.hasOwnProperty(me)||ce===ue||ce==null&&ue==null||kt(a,c,me,ce,y,ue)}var b0=null,x0=null;function gh(a){return a.nodeType===9?a:a.ownerDocument}function zA(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function VA(a,c){if(a===0)switch(c){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&c==="foreignObject"?0:a}function v0(a,c){return a==="textarea"||a==="noscript"||typeof c.children=="string"||typeof c.children=="number"||typeof c.children=="bigint"||typeof c.dangerouslySetInnerHTML=="object"&&c.dangerouslySetInnerHTML!==null&&c.dangerouslySetInnerHTML.__html!=null}var w0=null;function gF(){var a=window.event;return a&&a.type==="popstate"?a===w0?!1:(w0=a,!0):(w0=null,!1)}var qA=typeof setTimeout=="function"?setTimeout:void 0,yF=typeof clearTimeout=="function"?clearTimeout:void 0,HA=typeof Promise=="function"?Promise:void 0,bF=typeof queueMicrotask=="function"?queueMicrotask:typeof HA<"u"?function(a){return HA.resolve(null).then(a).catch(xF)}:qA;function xF(a){setTimeout(function(){throw a})}function fo(a){return a==="head"}function FA(a,c){var f=c,y=0,x=0;do{var C=f.nextSibling;if(a.removeChild(f),C&&C.nodeType===8)if(f=C.data,f==="/$"){if(0<y&&8>y){f=y;var D=a.ownerDocument;if(f&1&&wu(D.documentElement),f&2&&wu(D.body),f&4)for(f=D.head,wu(f),D=f.firstChild;D;){var P=D.nextSibling,W=D.nodeName;D[jr]||W==="SCRIPT"||W==="STYLE"||W==="LINK"&&D.rel.toLowerCase()==="stylesheet"||f.removeChild(D),D=P}}if(x===0){a.removeChild(C),Mu(c);return}x--}else f==="$"||f==="$?"||f==="$!"?x++:y=f.charCodeAt(0)-48;else y=0;f=C}while(f);Mu(c)}function S0(a){var c=a.firstChild;for(c&&c.nodeType===10&&(c=c.nextSibling);c;){var f=c;switch(c=c.nextSibling,f.nodeName){case"HTML":case"HEAD":case"BODY":S0(f),Bi(f);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(f.rel.toLowerCase()==="stylesheet")continue}a.removeChild(f)}}function vF(a,c,f,y){for(;a.nodeType===1;){var x=f;if(a.nodeName.toLowerCase()!==c.toLowerCase()){if(!y&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(y){if(!a[jr])switch(c){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(C=a.getAttribute("rel"),C==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(C!==x.rel||a.getAttribute("href")!==(x.href==null||x.href===""?null:x.href)||a.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin)||a.getAttribute("title")!==(x.title==null?null:x.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(C=a.getAttribute("src"),(C!==(x.src==null?null:x.src)||a.getAttribute("type")!==(x.type==null?null:x.type)||a.getAttribute("crossorigin")!==(x.crossOrigin==null?null:x.crossOrigin))&&C&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(c==="input"&&a.type==="hidden"){var C=x.name==null?null:""+x.name;if(x.type==="hidden"&&a.getAttribute("name")===C)return a}else return a;if(a=Ni(a.nextSibling),a===null)break}return null}function wF(a,c,f){if(c==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!f||(a=Ni(a.nextSibling),a===null))return null;return a}function C0(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function SF(a,c){var f=a.ownerDocument;if(a.data!=="$?"||f.readyState==="complete")c();else{var y=function(){c(),f.removeEventListener("DOMContentLoaded",y)};f.addEventListener("DOMContentLoaded",y),a._reactRetry=y}}function Ni(a){for(;a!=null;a=a.nextSibling){var c=a.nodeType;if(c===1||c===3)break;if(c===8){if(c=a.data,c==="$"||c==="$!"||c==="$?"||c==="F!"||c==="F")break;if(c==="/$")return null}}return a}var k0=null;function UA(a){a=a.previousSibling;for(var c=0;a;){if(a.nodeType===8){var f=a.data;if(f==="$"||f==="$!"||f==="$?"){if(c===0)return a;c--}else f==="/$"&&c++}a=a.previousSibling}return null}function $A(a,c,f){switch(c=gh(f),a){case"html":if(a=c.documentElement,!a)throw Error(r(452));return a;case"head":if(a=c.head,!a)throw Error(r(453));return a;case"body":if(a=c.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function wu(a){for(var c=a.attributes;c.length;)a.removeAttributeNode(c[0]);Bi(a)}var oi=new Map,GA=new Set;function yh(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Cs=q.d;q.d={f:CF,r:kF,D:EF,C:NF,L:TF,m:AF,X:_F,S:MF,M:DF};function CF(){var a=Cs.f(),c=lh();return a||c}function kF(a){var c=qe(a);c!==null&&c.tag===5&&c.type==="form"?fT(c):Cs.r(a)}var Pl=typeof document>"u"?null:document;function WA(a,c,f){var y=Pl;if(y&&typeof c=="string"&&c){var x=Qn(c);x='link[rel="'+a+'"][href="'+x+'"]',typeof f=="string"&&(x+='[crossorigin="'+f+'"]'),GA.has(x)||(GA.add(x),a={rel:a,crossOrigin:f,href:c},y.querySelector(x)===null&&(c=y.createElement("link"),Fn(c,"link",a),Rt(c),y.head.appendChild(c)))}}function EF(a){Cs.D(a),WA("dns-prefetch",a,null)}function NF(a,c){Cs.C(a,c),WA("preconnect",a,c)}function TF(a,c,f){Cs.L(a,c,f);var y=Pl;if(y&&a&&c){var x='link[rel="preload"][as="'+Qn(c)+'"]';c==="image"&&f&&f.imageSrcSet?(x+='[imagesrcset="'+Qn(f.imageSrcSet)+'"]',typeof f.imageSizes=="string"&&(x+='[imagesizes="'+Qn(f.imageSizes)+'"]')):x+='[href="'+Qn(a)+'"]';var C=x;switch(c){case"style":C=Il(a);break;case"script":C=Bl(a)}oi.has(C)||(a=h({rel:"preload",href:c==="image"&&f&&f.imageSrcSet?void 0:a,as:c},f),oi.set(C,a),y.querySelector(x)!==null||c==="style"&&y.querySelector(Su(C))||c==="script"&&y.querySelector(Cu(C))||(c=y.createElement("link"),Fn(c,"link",a),Rt(c),y.head.appendChild(c)))}}function AF(a,c){Cs.m(a,c);var f=Pl;if(f&&a){var y=c&&typeof c.as=="string"?c.as:"script",x='link[rel="modulepreload"][as="'+Qn(y)+'"][href="'+Qn(a)+'"]',C=x;switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":C=Bl(a)}if(!oi.has(C)&&(a=h({rel:"modulepreload",href:a},c),oi.set(C,a),f.querySelector(x)===null)){switch(y){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(f.querySelector(Cu(C)))return}y=f.createElement("link"),Fn(y,"link",a),Rt(y),f.head.appendChild(y)}}}function MF(a,c,f){Cs.S(a,c,f);var y=Pl;if(y&&a){var x=Xn(y).hoistableStyles,C=Il(a);c=c||"default";var D=x.get(C);if(!D){var P={loading:0,preload:null};if(D=y.querySelector(Su(C)))P.loading=5;else{a=h({rel:"stylesheet",href:a,"data-precedence":c},f),(f=oi.get(C))&&E0(a,f);var W=D=y.createElement("link");Rt(W),Fn(W,"link",a),W._p=new Promise(function(se,fe){W.onload=se,W.onerror=fe}),W.addEventListener("load",function(){P.loading|=1}),W.addEventListener("error",function(){P.loading|=2}),P.loading|=4,bh(D,c,y)}D={type:"stylesheet",instance:D,count:1,state:P},x.set(C,D)}}}function _F(a,c){Cs.X(a,c);var f=Pl;if(f&&a){var y=Xn(f).hoistableScripts,x=Bl(a),C=y.get(x);C||(C=f.querySelector(Cu(x)),C||(a=h({src:a,async:!0},c),(c=oi.get(x))&&N0(a,c),C=f.createElement("script"),Rt(C),Fn(C,"link",a),f.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},y.set(x,C))}}function DF(a,c){Cs.M(a,c);var f=Pl;if(f&&a){var y=Xn(f).hoistableScripts,x=Bl(a),C=y.get(x);C||(C=f.querySelector(Cu(x)),C||(a=h({src:a,async:!0,type:"module"},c),(c=oi.get(x))&&N0(a,c),C=f.createElement("script"),Rt(C),Fn(C,"link",a),f.head.appendChild(C)),C={type:"script",instance:C,count:1,state:null},y.set(x,C))}}function KA(a,c,f,y){var x=(x=ee.current)?yh(x):null;if(!x)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof f.precedence=="string"&&typeof f.href=="string"?(c=Il(f.href),f=Xn(x).hoistableStyles,y=f.get(c),y||(y={type:"style",instance:null,count:0,state:null},f.set(c,y)),y):{type:"void",instance:null,count:0,state:null};case"link":if(f.rel==="stylesheet"&&typeof f.href=="string"&&typeof f.precedence=="string"){a=Il(f.href);var C=Xn(x).hoistableStyles,D=C.get(a);if(D||(x=x.ownerDocument||x,D={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},C.set(a,D),(C=x.querySelector(Su(a)))&&!C._p&&(D.instance=C,D.state.loading=5),oi.has(a)||(f={rel:"preload",as:"style",href:f.href,crossOrigin:f.crossOrigin,integrity:f.integrity,media:f.media,hrefLang:f.hrefLang,referrerPolicy:f.referrerPolicy},oi.set(a,f),C||RF(x,a,f,D.state))),c&&y===null)throw Error(r(528,""));return D}if(c&&y!==null)throw Error(r(529,""));return null;case"script":return c=f.async,f=f.src,typeof f=="string"&&c&&typeof c!="function"&&typeof c!="symbol"?(c=Bl(f),f=Xn(x).hoistableScripts,y=f.get(c),y||(y={type:"script",instance:null,count:0,state:null},f.set(c,y)),y):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function Il(a){return'href="'+Qn(a)+'"'}function Su(a){return'link[rel="stylesheet"]['+a+"]"}function YA(a){return h({},a,{"data-precedence":a.precedence,precedence:null})}function RF(a,c,f,y){a.querySelector('link[rel="preload"][as="style"]['+c+"]")?y.loading=1:(c=a.createElement("link"),y.preload=c,c.addEventListener("load",function(){return y.loading|=1}),c.addEventListener("error",function(){return y.loading|=2}),Fn(c,"link",f),Rt(c),a.head.appendChild(c))}function Bl(a){return'[src="'+Qn(a)+'"]'}function Cu(a){return"script[async]"+a}function XA(a,c,f){if(c.count++,c.instance===null)switch(c.type){case"style":var y=a.querySelector('style[data-href~="'+Qn(f.href)+'"]');if(y)return c.instance=y,Rt(y),y;var x=h({},f,{"data-href":f.href,"data-precedence":f.precedence,href:null,precedence:null});return y=(a.ownerDocument||a).createElement("style"),Rt(y),Fn(y,"style",x),bh(y,f.precedence,a),c.instance=y;case"stylesheet":x=Il(f.href);var C=a.querySelector(Su(x));if(C)return c.state.loading|=4,c.instance=C,Rt(C),C;y=YA(f),(x=oi.get(x))&&E0(y,x),C=(a.ownerDocument||a).createElement("link"),Rt(C);var D=C;return D._p=new Promise(function(P,W){D.onload=P,D.onerror=W}),Fn(C,"link",y),c.state.loading|=4,bh(C,f.precedence,a),c.instance=C;case"script":return C=Bl(f.src),(x=a.querySelector(Cu(C)))?(c.instance=x,Rt(x),x):(y=f,(x=oi.get(C))&&(y=h({},f),N0(y,x)),a=a.ownerDocument||a,x=a.createElement("script"),Rt(x),Fn(x,"link",y),a.head.appendChild(x),c.instance=x);case"void":return null;default:throw Error(r(443,c.type))}else c.type==="stylesheet"&&(c.state.loading&4)===0&&(y=c.instance,c.state.loading|=4,bh(y,f.precedence,a));return c.instance}function bh(a,c,f){for(var y=f.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),x=y.length?y[y.length-1]:null,C=x,D=0;D<y.length;D++){var P=y[D];if(P.dataset.precedence===c)C=P;else if(C!==x)break}C?C.parentNode.insertBefore(a,C.nextSibling):(c=f.nodeType===9?f.head:f,c.insertBefore(a,c.firstChild))}function E0(a,c){a.crossOrigin==null&&(a.crossOrigin=c.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=c.referrerPolicy),a.title==null&&(a.title=c.title)}function N0(a,c){a.crossOrigin==null&&(a.crossOrigin=c.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=c.referrerPolicy),a.integrity==null&&(a.integrity=c.integrity)}var xh=null;function ZA(a,c,f){if(xh===null){var y=new Map,x=xh=new Map;x.set(f,y)}else x=xh,y=x.get(f),y||(y=new Map,x.set(f,y));if(y.has(a))return y;for(y.set(a,null),f=f.getElementsByTagName(a),x=0;x<f.length;x++){var C=f[x];if(!(C[jr]||C[Gt]||a==="link"&&C.getAttribute("rel")==="stylesheet")&&C.namespaceURI!=="http://www.w3.org/2000/svg"){var D=C.getAttribute(c)||"";D=a+D;var P=y.get(D);P?P.push(C):y.set(D,[C])}}return y}function QA(a,c,f){a=a.ownerDocument||a,a.head.insertBefore(f,c==="title"?a.querySelector("head > title"):null)}function jF(a,c,f){if(f===1||c.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof c.precedence!="string"||typeof c.href!="string"||c.href==="")break;return!0;case"link":if(typeof c.rel!="string"||typeof c.href!="string"||c.href===""||c.onLoad||c.onError)break;switch(c.rel){case"stylesheet":return a=c.disabled,typeof c.precedence=="string"&&a==null;default:return!0}case"script":if(c.async&&typeof c.async!="function"&&typeof c.async!="symbol"&&!c.onLoad&&!c.onError&&c.src&&typeof c.src=="string")return!0}return!1}function JA(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var ku=null;function OF(){}function LF(a,c,f){if(ku===null)throw Error(r(475));var y=ku;if(c.type==="stylesheet"&&(typeof f.media!="string"||matchMedia(f.media).matches!==!1)&&(c.state.loading&4)===0){if(c.instance===null){var x=Il(f.href),C=a.querySelector(Su(x));if(C){a=C._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(y.count++,y=vh.bind(y),a.then(y,y)),c.state.loading|=4,c.instance=C,Rt(C);return}C=a.ownerDocument||a,f=YA(f),(x=oi.get(x))&&E0(f,x),C=C.createElement("link"),Rt(C);var D=C;D._p=new Promise(function(P,W){D.onload=P,D.onerror=W}),Fn(C,"link",f),c.instance=C}y.stylesheets===null&&(y.stylesheets=new Map),y.stylesheets.set(c,a),(a=c.state.preload)&&(c.state.loading&3)===0&&(y.count++,c=vh.bind(y),a.addEventListener("load",c),a.addEventListener("error",c))}}function PF(){if(ku===null)throw Error(r(475));var a=ku;return a.stylesheets&&a.count===0&&T0(a,a.stylesheets),0<a.count?function(c){var f=setTimeout(function(){if(a.stylesheets&&T0(a,a.stylesheets),a.unsuspend){var y=a.unsuspend;a.unsuspend=null,y()}},6e4);return a.unsuspend=c,function(){a.unsuspend=null,clearTimeout(f)}}:null}function vh(){if(this.count--,this.count===0){if(this.stylesheets)T0(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var wh=null;function T0(a,c){a.stylesheets=null,a.unsuspend!==null&&(a.count++,wh=new Map,c.forEach(IF,a),wh=null,vh.call(a))}function IF(a,c){if(!(c.state.loading&4)){var f=wh.get(a);if(f)var y=f.get(null);else{f=new Map,wh.set(a,f);for(var x=a.querySelectorAll("link[data-precedence],style[data-precedence]"),C=0;C<x.length;C++){var D=x[C];(D.nodeName==="LINK"||D.getAttribute("media")!=="not all")&&(f.set(D.dataset.precedence,D),y=D)}y&&f.set(null,y)}x=c.instance,D=x.getAttribute("data-precedence"),C=f.get(D)||y,C===y&&f.set(null,x),f.set(D,x),this.count++,y=vh.bind(this),x.addEventListener("load",y),x.addEventListener("error",y),C?C.parentNode.insertBefore(x,C.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(x,a.firstChild)),c.state.loading|=4}}var Eu={$$typeof:E,Provider:null,Consumer:null,_currentValue:K,_currentValue2:K,_threadCount:0};function BF(a,c,f,y,x,C,D,P){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Mr(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Mr(0),this.hiddenUpdates=Mr(null),this.identifierPrefix=y,this.onUncaughtError=x,this.onCaughtError=C,this.onRecoverableError=D,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=P,this.incompleteTransitions=new Map}function eM(a,c,f,y,x,C,D,P,W,se,fe,me){return a=new BF(a,c,f,D,P,W,se,me),c=1,C===!0&&(c|=24),C=Pr(3,null,null,c),a.current=C,C.stateNode=a,c=ly(),c.refCount++,a.pooledCache=c,c.refCount++,C.memoizedState={element:y,isDehydrated:f,cache:c},fy(C),a}function tM(a){return a?(a=ml,a):ml}function nM(a,c,f,y,x,C){x=tM(x),y.context===null?y.context=x:y.pendingContext=x,y=Qs(c),y.payload={element:f},C=C===void 0?null:C,C!==null&&(y.callback=C),f=Js(a,y,c),f!==null&&(qr(f,a,c),tu(f,a,c))}function rM(a,c){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var f=a.retryLane;a.retryLane=f!==0&&f<c?f:c}}function A0(a,c){rM(a,c),(a=a.alternate)&&rM(a,c)}function iM(a){if(a.tag===13){var c=pl(a,67108864);c!==null&&qr(c,a,67108864),A0(a,67108864)}}var Sh=!0;function zF(a,c,f,y){var x=O.T;O.T=null;var C=q.p;try{q.p=2,M0(a,c,f,y)}finally{q.p=C,O.T=x}}function VF(a,c,f,y){var x=O.T;O.T=null;var C=q.p;try{q.p=8,M0(a,c,f,y)}finally{q.p=C,O.T=x}}function M0(a,c,f,y){if(Sh){var x=_0(y);if(x===null)g0(a,c,y,Ch,f),oM(a,y);else if(HF(x,a,c,f,y))y.stopPropagation();else if(oM(a,y),c&4&&-1<qF.indexOf(a)){for(;x!==null;){var C=qe(x);if(C!==null)switch(C.tag){case 3:if(C=C.stateNode,C.current.memoizedState.isDehydrated){var D=Fe(C.pendingLanes);if(D!==0){var P=C;for(P.pendingLanes|=2,P.entangledLanes|=2;D;){var W=1<<31-At(D);P.entanglements[1]|=W,D&=~W}Ki(C),(vt&6)===0&&(oh=Oe()+500,bu(0))}}break;case 13:P=pl(C,2),P!==null&&qr(P,C,2),lh(),A0(C,2)}if(C=_0(y),C===null&&g0(a,c,y,Ch,f),C===x)break;x=C}x!==null&&y.stopPropagation()}else g0(a,c,y,null,f)}}function _0(a){return a=Xo(a),D0(a)}var Ch=null;function D0(a){if(Ch=null,a=hn(a),a!==null){var c=s(a);if(c===null)a=null;else{var f=c.tag;if(f===13){if(a=o(c),a!==null)return a;a=null}else if(f===3){if(c.stateNode.current.memoizedState.isDehydrated)return c.tag===3?c.stateNode.containerInfo:null;a=null}else c!==a&&(a=null)}}return Ch=a,null}function sM(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(mt()){case bt:return 2;case $t:return 8;case un:case zt:return 32;case Nt:return 268435456;default:return 32}default:return 32}}var R0=!1,ho=null,po=null,mo=null,Nu=new Map,Tu=new Map,go=[],qF="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function oM(a,c){switch(a){case"focusin":case"focusout":ho=null;break;case"dragenter":case"dragleave":po=null;break;case"mouseover":case"mouseout":mo=null;break;case"pointerover":case"pointerout":Nu.delete(c.pointerId);break;case"gotpointercapture":case"lostpointercapture":Tu.delete(c.pointerId)}}function Au(a,c,f,y,x,C){return a===null||a.nativeEvent!==C?(a={blockedOn:c,domEventName:f,eventSystemFlags:y,nativeEvent:C,targetContainers:[x]},c!==null&&(c=qe(c),c!==null&&iM(c)),a):(a.eventSystemFlags|=y,c=a.targetContainers,x!==null&&c.indexOf(x)===-1&&c.push(x),a)}function HF(a,c,f,y,x){switch(c){case"focusin":return ho=Au(ho,a,c,f,y,x),!0;case"dragenter":return po=Au(po,a,c,f,y,x),!0;case"mouseover":return mo=Au(mo,a,c,f,y,x),!0;case"pointerover":var C=x.pointerId;return Nu.set(C,Au(Nu.get(C)||null,a,c,f,y,x)),!0;case"gotpointercapture":return C=x.pointerId,Tu.set(C,Au(Tu.get(C)||null,a,c,f,y,x)),!0}return!1}function aM(a){var c=hn(a.target);if(c!==null){var f=s(c);if(f!==null){if(c=f.tag,c===13){if(c=o(f),c!==null){a.blockedOn=c,Si(a.priority,function(){if(f.tag===13){var y=Vr();y=xt(y);var x=pl(f,y);x!==null&&qr(x,f,y),A0(f,y)}});return}}else if(c===3&&f.stateNode.current.memoizedState.isDehydrated){a.blockedOn=f.tag===3?f.stateNode.containerInfo:null;return}}}a.blockedOn=null}function kh(a){if(a.blockedOn!==null)return!1;for(var c=a.targetContainers;0<c.length;){var f=_0(a.nativeEvent);if(f===null){f=a.nativeEvent;var y=new f.constructor(f.type,f);Ic=y,f.target.dispatchEvent(y),Ic=null}else return c=qe(f),c!==null&&iM(c),a.blockedOn=f,!1;c.shift()}return!0}function lM(a,c,f){kh(a)&&f.delete(c)}function FF(){R0=!1,ho!==null&&kh(ho)&&(ho=null),po!==null&&kh(po)&&(po=null),mo!==null&&kh(mo)&&(mo=null),Nu.forEach(lM),Tu.forEach(lM)}function Eh(a,c){a.blockedOn===c&&(a.blockedOn=null,R0||(R0=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,FF)))}var Nh=null;function cM(a){Nh!==a&&(Nh=a,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Nh===a&&(Nh=null);for(var c=0;c<a.length;c+=3){var f=a[c],y=a[c+1],x=a[c+2];if(typeof y!="function"){if(D0(y||f)===null)continue;break}var C=qe(f);C!==null&&(a.splice(c,3),c-=3,Dy(C,{pending:!0,data:x,method:f.method,action:y},y,x))}}))}function Mu(a){function c(W){return Eh(W,a)}ho!==null&&Eh(ho,a),po!==null&&Eh(po,a),mo!==null&&Eh(mo,a),Nu.forEach(c),Tu.forEach(c);for(var f=0;f<go.length;f++){var y=go[f];y.blockedOn===a&&(y.blockedOn=null)}for(;0<go.length&&(f=go[0],f.blockedOn===null);)aM(f),f.blockedOn===null&&go.shift();if(f=(a.ownerDocument||a).$$reactFormReplay,f!=null)for(y=0;y<f.length;y+=3){var x=f[y],C=f[y+1],D=x[Lt]||null;if(typeof C=="function")D||cM(f);else if(D){var P=null;if(C&&C.hasAttribute("formAction")){if(x=C,D=C[Lt]||null)P=D.formAction;else if(D0(x)!==null)continue}else P=D.action;typeof P=="function"?f[y+1]=P:(f.splice(y,3),y-=3),cM(f)}}}function j0(a){this._internalRoot=a}Th.prototype.render=j0.prototype.render=function(a){var c=this._internalRoot;if(c===null)throw Error(r(409));var f=c.current,y=Vr();nM(f,y,a,c,null,null)},Th.prototype.unmount=j0.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var c=a.containerInfo;nM(a.current,2,null,a,null,null),lh(),c[br]=null}};function Th(a){this._internalRoot=a}Th.prototype.unstable_scheduleHydration=function(a){if(a){var c=Us();a={blockedOn:null,target:a,priority:c};for(var f=0;f<go.length&&c!==0&&c<go[f].priority;f++);go.splice(f,0,a),f===0&&aM(a)}};var uM=t.version;if(uM!=="19.1.1")throw Error(r(527,uM,"19.1.1"));q.findDOMNode=function(a){var c=a._reactInternals;if(c===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=u(c),a=a!==null?d(a):null,a=a===null?null:a.stateNode,a};var UF={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:O,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ah=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ah.isDisabled&&Ah.supportsFiber)try{Ot=Ah.inject(UF),ut=Ah}catch{}}return Du.createRoot=function(a,c){if(!i(a))throw Error(r(299));var f=!1,y="",x=NT,C=TT,D=AT,P=null;return c!=null&&(c.unstable_strictMode===!0&&(f=!0),c.identifierPrefix!==void 0&&(y=c.identifierPrefix),c.onUncaughtError!==void 0&&(x=c.onUncaughtError),c.onCaughtError!==void 0&&(C=c.onCaughtError),c.onRecoverableError!==void 0&&(D=c.onRecoverableError),c.unstable_transitionCallbacks!==void 0&&(P=c.unstable_transitionCallbacks)),c=eM(a,1,!1,null,null,f,y,x,C,D,P,null),a[br]=c.current,m0(a),new j0(c)},Du.hydrateRoot=function(a,c,f){if(!i(a))throw Error(r(299));var y=!1,x="",C=NT,D=TT,P=AT,W=null,se=null;return f!=null&&(f.unstable_strictMode===!0&&(y=!0),f.identifierPrefix!==void 0&&(x=f.identifierPrefix),f.onUncaughtError!==void 0&&(C=f.onUncaughtError),f.onCaughtError!==void 0&&(D=f.onCaughtError),f.onRecoverableError!==void 0&&(P=f.onRecoverableError),f.unstable_transitionCallbacks!==void 0&&(W=f.unstable_transitionCallbacks),f.formState!==void 0&&(se=f.formState)),c=eM(a,1,!0,c,f??null,y,x,C,D,P,W,se),c.context=tM(null),f=c.current,y=Vr(),y=xt(y),x=Qs(y),x.callback=null,Js(f,x,y),f=y,c.current.lanes=f,_r(c,f),Ki(c),a[br]=c.current,m0(a),new Th(c)},Du.version="19.1.1",Du}var vM;function tU(){if(vM)return P0.exports;vM=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),P0.exports=eU(),P0.exports}var nU=tU(),rU=uP();const Yd=Wd(rU);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function yd(){return yd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},yd.apply(this,arguments)}var Mo;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Mo||(Mo={}));const wM="popstate";function iU(e){e===void 0&&(e={});function t(r,i){let{pathname:s,search:o,hash:l}=r.location;return pC("",{pathname:s,search:o,hash:l},i.state&&i.state.usr||null,i.state&&i.state.key||"default")}function n(r,i){return typeof i=="string"?i:fP(i)}return oU(t,n,null,e)}function Mn(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function dP(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function sU(){return Math.random().toString(36).substr(2,8)}function SM(e,t){return{usr:e.state,key:e.key,idx:t}}function pC(e,t,n,r){return n===void 0&&(n=null),yd({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Ec(t):t,{state:n,key:t&&t.key||r||sU()})}function fP(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Ec(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function oU(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l=Mo.Pop,u=null,d=h();d==null&&(d=0,o.replaceState(yd({},o.state,{idx:d}),""));function h(){return(o.state||{idx:null}).idx}function p(){l=Mo.Pop;let w=h(),k=w==null?null:w-d;d=w,u&&u({action:l,location:S.location,delta:k})}function g(w,k){l=Mo.Push;let T=pC(S.location,w,k);d=h()+1;let E=SM(T,d),N=S.createHref(T);try{o.pushState(E,"",N)}catch(A){if(A instanceof DOMException&&A.name==="DataCloneError")throw A;i.location.assign(N)}s&&u&&u({action:l,location:S.location,delta:1})}function b(w,k){l=Mo.Replace;let T=pC(S.location,w,k);d=h();let E=SM(T,d),N=S.createHref(T);o.replaceState(E,"",N),s&&u&&u({action:l,location:S.location,delta:0})}function v(w){let k=i.location.origin!=="null"?i.location.origin:i.location.href,T=typeof w=="string"?w:fP(w);return T=T.replace(/ $/,"%20"),Mn(k,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,k)}let S={get action(){return l},get location(){return e(i,o)},listen(w){if(u)throw new Error("A history only accepts one active listener");return i.addEventListener(wM,p),u=w,()=>{i.removeEventListener(wM,p),u=null}},createHref(w){return t(i,w)},createURL:v,encodeLocation(w){let k=v(w);return{pathname:k.pathname,search:k.search,hash:k.hash}},push:g,replace:b,go(w){return o.go(w)}};return S}var CM;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(CM||(CM={}));function aU(e,t,n){return n===void 0&&(n="/"),lU(e,t,n)}function lU(e,t,n,r){let i=typeof t=="string"?Ec(t):t,s=mP(i.pathname||"/",n);if(s==null)return null;let o=hP(e);cU(o);let l=null;for(let u=0;l==null&&u<o.length;++u){let d=wU(s);l=bU(o[u],d)}return l}function hP(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,l)=>{let u={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};u.relativePath.startsWith("/")&&(Mn(u.relativePath.startsWith(r),'Absolute route path "'+u.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),u.relativePath=u.relativePath.slice(r.length));let d=Ma([r,u.relativePath]),h=n.concat(u);s.children&&s.children.length>0&&(Mn(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),hP(s.children,t,h,d)),!(s.path==null&&!s.index)&&t.push({path:d,score:gU(d,s.index),routesMeta:h})};return e.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let u of pP(s.path))i(s,o,u)}),t}function pP(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=pP(r.join("/")),l=[];return l.push(...o.map(u=>u===""?s:[s,u].join("/"))),i&&l.push(...o),l.map(u=>e.startsWith("/")&&u===""?"/":u)}function cU(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:yU(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const uU=/^:[\w-]+$/,dU=3,fU=2,hU=1,pU=10,mU=-2,kM=e=>e==="*";function gU(e,t){let n=e.split("/"),r=n.length;return n.some(kM)&&(r+=mU),t&&(r+=fU),n.filter(i=>!kM(i)).reduce((i,s)=>i+(uU.test(s)?dU:s===""?hU:pU),r)}function yU(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function bU(e,t,n){let{routesMeta:r}=e,i={},s="/",o=[];for(let l=0;l<r.length;++l){let u=r[l],d=l===r.length-1,h=s==="/"?t:t.slice(s.length)||"/",p=xU({path:u.relativePath,caseSensitive:u.caseSensitive,end:d},h),g=u.route;if(!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:Ma([s,p.pathname]),pathnameBase:TU(Ma([s,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(s=Ma([s,p.pathnameBase]))}return o}function xU(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=vU(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((d,h,p)=>{let{paramName:g,isOptional:b}=h;if(g==="*"){let S=l[p]||"";o=s.slice(0,s.length-S.length).replace(/(.)\/+$/,"$1")}const v=l[p];return b&&!v?d[g]=void 0:d[g]=(v||"").replace(/%2F/g,"/"),d},{}),pathname:s,pathnameBase:o,pattern:e}}function vU(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),dP(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,u)=>(r.push({paramName:l,isOptional:u!=null}),u?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function wU(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return dP(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function mP(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function SU(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Ec(e):e;return{pathname:n?n.startsWith("/")?n:CU(n,t):t,search:AU(r),hash:MU(i)}}function CU(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function V0(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function kU(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function EU(e,t){let n=kU(e);return t?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function NU(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=Ec(e):(i=yd({},e),Mn(!i.pathname||!i.pathname.includes("?"),V0("?","pathname","search",i)),Mn(!i.pathname||!i.pathname.includes("#"),V0("#","pathname","hash",i)),Mn(!i.search||!i.search.includes("#"),V0("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=n;else{let p=t.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}l=p>=0?t[p]:"/"}let u=SU(i,l),d=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!u.pathname.endsWith("/")&&(d||h)&&(u.pathname+="/"),u}const Ma=e=>e.join("/").replace(/\/\/+/g,"/"),TU=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),AU=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,MU=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function _U(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const gP=["post","put","patch","delete"];new Set(gP);const DU=["get",...gP];new Set(DU);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bd(){return bd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bd.apply(this,arguments)}const Vk=M.createContext(null),RU=M.createContext(null),Rm=M.createContext(null),jm=M.createContext(null),Ya=M.createContext({outlet:null,matches:[],isDataRoute:!1}),yP=M.createContext(null);function Om(){return M.useContext(jm)!=null}function bP(){return Om()||Mn(!1),M.useContext(jm).location}function xP(e){M.useContext(Rm).static||M.useLayoutEffect(e)}function Xd(){let{isDataRoute:e}=M.useContext(Ya);return e?GU():jU()}function jU(){Om()||Mn(!1);let e=M.useContext(Vk),{basename:t,future:n,navigator:r}=M.useContext(Rm),{matches:i}=M.useContext(Ya),{pathname:s}=bP(),o=JSON.stringify(EU(i,n.v7_relativeSplatPath)),l=M.useRef(!1);return xP(()=>{l.current=!0}),M.useCallback(function(d,h){if(h===void 0&&(h={}),!l.current)return;if(typeof d=="number"){r.go(d);return}let p=NU(d,JSON.parse(o),s,h.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:Ma([t,p.pathname])),(h.replace?r.replace:r.push)(p,h.state,h)},[t,r,o,s,e])}function OU(){let{matches:e}=M.useContext(Ya),t=e[e.length-1];return t?t.params:{}}function LU(e,t){return PU(e,t)}function PU(e,t,n,r){Om()||Mn(!1);let{navigator:i}=M.useContext(Rm),{matches:s}=M.useContext(Ya),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let u=o?o.pathnameBase:"/";o&&o.route;let d=bP(),h;if(t){var p;let w=typeof t=="string"?Ec(t):t;u==="/"||(p=w.pathname)!=null&&p.startsWith(u)||Mn(!1),h=w}else h=d;let g=h.pathname||"/",b=g;if(u!=="/"){let w=u.replace(/^\//,"").split("/");b="/"+g.replace(/^\//,"").split("/").slice(w.length).join("/")}let v=aU(e,{pathname:b}),S=qU(v&&v.map(w=>Object.assign({},w,{params:Object.assign({},l,w.params),pathname:Ma([u,i.encodeLocation?i.encodeLocation(w.pathname).pathname:w.pathname]),pathnameBase:w.pathnameBase==="/"?u:Ma([u,i.encodeLocation?i.encodeLocation(w.pathnameBase).pathname:w.pathnameBase])})),s,n,r);return t&&S?M.createElement(jm.Provider,{value:{location:bd({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:Mo.Pop}},S):S}function IU(){let e=$U(),t=_U(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return M.createElement(M.Fragment,null,M.createElement("h2",null,"Unexpected Application Error!"),M.createElement("h3",{style:{fontStyle:"italic"}},t),n?M.createElement("pre",{style:i},n):null,null)}const BU=M.createElement(IU,null);class zU extends M.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?M.createElement(Ya.Provider,{value:this.props.routeContext},M.createElement(yP.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function VU(e){let{routeContext:t,match:n,children:r}=e,i=M.useContext(Vk);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),M.createElement(Ya.Provider,{value:t},r)}function qU(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if(!n)return null;if(n.errors)e=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,l=(i=n)==null?void 0:i.errors;if(l!=null){let h=o.findIndex(p=>p.route.id&&l?.[p.route.id]!==void 0);h>=0||Mn(!1),o=o.slice(0,Math.min(o.length,h+1))}let u=!1,d=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let p=o[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(d=h),p.route.id){let{loaderData:g,errors:b}=n,v=p.route.loader&&g[p.route.id]===void 0&&(!b||b[p.route.id]===void 0);if(p.route.lazy||v){u=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((h,p,g)=>{let b,v=!1,S=null,w=null;n&&(b=l&&p.route.id?l[p.route.id]:void 0,S=p.route.errorElement||BU,u&&(d<0&&g===0?(WU("route-fallback"),v=!0,w=null):d===g&&(v=!0,w=p.route.hydrateFallbackElement||null)));let k=t.concat(o.slice(0,g+1)),T=()=>{let E;return b?E=S:v?E=w:p.route.Component?E=M.createElement(p.route.Component,null):p.route.element?E=p.route.element:E=h,M.createElement(VU,{match:p,routeContext:{outlet:h,matches:k,isDataRoute:n!=null},children:E})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?M.createElement(zU,{location:n.location,revalidation:n.revalidation,component:S,error:b,children:T(),routeContext:{outlet:null,matches:k,isDataRoute:!0}}):T()},null)}var vP=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(vP||{}),wP=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(wP||{});function HU(e){let t=M.useContext(Vk);return t||Mn(!1),t}function FU(e){let t=M.useContext(RU);return t||Mn(!1),t}function UU(e){let t=M.useContext(Ya);return t||Mn(!1),t}function SP(e){let t=UU(),n=t.matches[t.matches.length-1];return n.route.id||Mn(!1),n.route.id}function $U(){var e;let t=M.useContext(yP),n=FU(),r=SP();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function GU(){let{router:e}=HU(vP.UseNavigateStable),t=SP(wP.UseNavigateStable),n=M.useRef(!1);return xP(()=>{n.current=!0}),M.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,bd({fromRouteId:t},s)))},[e,t])}const EM={};function WU(e,t,n){EM[e]||(EM[e]=!0)}function KU(e,t){e?.v7_startTransition,e?.v7_relativeSplatPath}function ya(e){Mn(!1)}function YU(e){let{basename:t="/",children:n=null,location:r,navigationType:i=Mo.Pop,navigator:s,static:o=!1,future:l}=e;Om()&&Mn(!1);let u=t.replace(/^\/*/,"/"),d=M.useMemo(()=>({basename:u,navigator:s,static:o,future:bd({v7_relativeSplatPath:!1},l)}),[u,l,s,o]);typeof r=="string"&&(r=Ec(r));let{pathname:h="/",search:p="",hash:g="",state:b=null,key:v="default"}=r,S=M.useMemo(()=>{let w=mP(h,u);return w==null?null:{location:{pathname:w,search:p,hash:g,state:b,key:v},navigationType:i}},[u,h,p,g,b,v,i]);return S==null?null:M.createElement(Rm.Provider,{value:d},M.createElement(jm.Provider,{children:n,value:S}))}function XU(e){let{children:t,location:n}=e;return LU(mC(t),n)}new Promise(()=>{});function mC(e,t){t===void 0&&(t=[]);let n=[];return M.Children.forEach(e,(r,i)=>{if(!M.isValidElement(r))return;let s=[...t,i];if(r.type===M.Fragment){n.push.apply(n,mC(r.props.children,s));return}r.type!==ya&&Mn(!1),!r.props.index||!r.props.children||Mn(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=mC(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const ZU="6";try{window.__reactRouterVersion=ZU}catch{}const QU="startTransition",NM=XF[QU];function JU(e){let{basename:t,children:n,future:r,window:i}=e,s=M.useRef();s.current==null&&(s.current=iU({window:i,v5Compat:!0}));let o=s.current,[l,u]=M.useState({action:o.action,location:o.location}),{v7_startTransition:d}=r||{},h=M.useCallback(p=>{d&&NM?NM(()=>u(p)):u(p)},[u,d]);return M.useLayoutEffect(()=>o.listen(h),[o,h]),M.useEffect(()=>KU(r),[r]),M.createElement(YU,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}var TM;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(TM||(TM={}));var AM;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(AM||(AM={}));var CP={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},MM=Ce.createContext&&Ce.createContext(CP),e9=["attr","size","title"];function t9(e,t){if(e==null)return{};var n=n9(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function n9(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function vp(){return vp=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vp.apply(this,arguments)}function _M(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function wp(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_M(Object(n),!0).forEach(function(r){r9(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_M(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function r9(e,t,n){return t=i9(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function i9(e){var t=s9(e,"string");return typeof t=="symbol"?t:t+""}function s9(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kP(e){return e&&e.map((t,n)=>Ce.createElement(t.tag,wp({key:n},t.attr),kP(t.child)))}function at(e){return t=>Ce.createElement(o9,vp({attr:wp({},e.attr)},t),kP(e.child))}function o9(e){var t=n=>{var{attr:r,size:i,title:s}=e,o=t9(e,e9),l=i||n.size||"1em",u;return n.className&&(u=n.className),e.className&&(u=(u?u+" ":"")+e.className),Ce.createElement("svg",vp({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:u,style:wp(wp({color:e.color||n.color},n.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&Ce.createElement("title",null,s),e.children)};return MM!==void 0?Ce.createElement(MM.Consumer,null,n=>t(n)):t(CP)}function a9(e){return at({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},child:[]}]})(e)}function l9(e){return at({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"5"},child:[]},{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"3"},child:[]},{tag:"line",attr:{x1:"12",y1:"21",x2:"12",y2:"23"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"},child:[]},{tag:"line",attr:{x1:"1",y1:"12",x2:"3",y2:"12"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"23",y2:"12"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"},child:[]}]})(e)}function qk(e){return at({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 9.9-1"},child:[]}]})(e)}const c9=e=>e==="system"||e==="light"||e==="dark";function Xa(){const[e,t]=M.useState(()=>{if(typeof window>"u")return"light";const s=localStorage.getItem("theme");return c9(s)?s:"light"}),[n,r]=M.useState(()=>typeof window>"u"?!1:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches);return M.useLayoutEffect(()=>{const s=document.documentElement;(l=>{l==="system"?s.classList.toggle("dark",n):s.classList.toggle("dark",l==="dark")})(e);try{localStorage.setItem("theme",e)}catch{}},[e,n]),M.useEffect(()=>{if(typeof window>"u")return;const s=window.matchMedia("(prefers-color-scheme: dark)"),o=l=>{r(l.matches)};return s.addEventListener("change",o),()=>s.removeEventListener("change",o)},[]),{theme:e,setTheme:t,flowColorMode:e==="system"?n?"dark":"light":e}}const Zd=()=>{const{theme:e,setTheme:t}=Xa();return m.jsx("button",{onClick:()=>t(e==="light"?"dark":"light"),className:"p-2 rounded-full bg-[var(--bg)] text-[var(--text)] cursor-pointer",children:e==="light"?m.jsx(a9,{size:18}):m.jsx(l9,{size:18})})},Hr={title:"Diagrammatic  Interactive System Design Playground | Learn Architecture Design",description:"Master system design with Diagrammatic - an interactive playground featuring 45+ components, AI assessment, and real-world practice problems. Free system architecture tool for students, professionals, and educators.",keywords:"system design, architecture diagram, system design interview, software architecture, distributed systems, scalable architecture",image:"https://satya00089.github.io/diagrammatic/logo.png",url:"https://satya00089.github.io/diagrammatic/"},Qd=({title:e,description:t,keywords:n,image:r,url:i,type:s="website"})=>(M.useEffect(()=>{document.title=e||Hr.title;const o=(u,d,h=!1)=>{const p=h?"property":"name";let g=document.querySelector(`meta[${p}="${u}"]`);g?g.content=d:(g=document.createElement("meta"),g.setAttribute(p,u),g.content=d,document.head.appendChild(g))};o("description",t||Hr.description),o("keywords",n||Hr.keywords),o("og:title",e||Hr.title,!0),o("og:description",t||Hr.description,!0),o("og:image",r||Hr.image,!0),o("og:url",i||Hr.url,!0),o("og:type",s,!0),o("twitter:title",e||Hr.title),o("twitter:description",t||Hr.description),o("twitter:image",r||Hr.image),o("twitter:url",i||Hr.url);let l=document.querySelector('link[rel="canonical"]');l?l.href=i||Hr.url:(l=document.createElement("link"),l.rel="canonical",l.href=i||Hr.url,document.head.appendChild(l))},[e,t,n,r,i,s]),null);class Hu extends Error{}Hu.prototype.name="InvalidTokenError";function u9(e){return decodeURIComponent(atob(e).replace(/(.)/g,(t,n)=>{let r=n.charCodeAt(0).toString(16).toUpperCase();return r.length<2&&(r="0"+r),"%"+r}))}function d9(e){let t=e.replace(/-/g,"+").replace(/_/g,"/");switch(t.length%4){case 0:break;case 2:t+="==";break;case 3:t+="=";break;default:throw new Error("base64 string is not of the correct length")}try{return u9(t)}catch{return atob(t)}}function f9(e,t){if(typeof e!="string")throw new Hu("Invalid token specified: must be a string");t||(t={});const n=t.header===!0?0:1,r=e.split(".")[n];if(typeof r!="string")throw new Hu(`Invalid token specified: missing part #${n+1}`);let i;try{i=d9(r)}catch(s){throw new Hu(`Invalid token specified: invalid base64 for part #${n+1} (${s.message})`)}try{return JSON.parse(i)}catch(s){throw new Hu(`Invalid token specified: invalid json for part #${n+1} (${s.message})`)}}const An="https://diagrammatic-api-production.up.railway.app";class h9{getAuthHeaders(){const t=localStorage.getItem("auth_token");return{"Content-Type":"application/json",...t?{Authorization:`Bearer ${t}`}:{}}}async login(t){const n=await fetch(`${An}/api/v1/auth/login`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const r=await n.json().catch(()=>({message:"Login failed"}));throw new Error(r.message||"Login failed")}return n.json()}async signup(t){const n=await fetch(`${An}/api/v1/auth/signup`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!n.ok){const r=await n.json().catch(()=>({message:"Signup failed"}));throw new Error(r.message||"Signup failed")}return n.json()}async googleLogin(t){const n=await fetch(`${An}/api/v1/auth/google`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({credential:t})});if(!n.ok){const r=await n.json().catch(()=>({message:"Google login failed"}));throw new Error(r.message||"Google login failed")}return n.json()}async getCurrentUser(){const t=await fetch(`${An}/api/v1/auth/me`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch user");return t.json()}async saveDiagram(t){const n=await fetch(`${An}/api/v1/diagrams`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!n.ok){const r=await n.json().catch(()=>({message:"Failed to Save Design"}));throw new Error(r.message||"Failed to Save Design")}return n.json()}async updateDiagram(t,n){const r=await fetch(`${An}/api/v1/diagrams/${t}`,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify(n)});if(!r.ok){const i=await r.json().catch(()=>({message:"Failed to update diagram"}));throw new Error(i.message||"Failed to update diagram")}return r.json()}async getUserDiagrams(){const t=await fetch(`${An}/api/v1/diagrams`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch diagrams");return t.json()}async getDiagram(t){const n=await fetch(`${An}/api/v1/diagrams/${t}`,{headers:this.getAuthHeaders()});if(!n.ok)throw new Error("Failed to fetch diagram");return n.json()}async getPublicDiagram(t){const n=await fetch(`${An}/api/v1/diagrams/${t}/public`,{headers:{"Content-Type":"application/json"}});if(!n.ok)throw new Error("Failed to fetch diagram");return n.json()}async deleteDiagram(t){if(!(await fetch(`${An}/api/v1/diagrams/${t}`,{method:"DELETE",headers:this.getAuthHeaders()})).ok)throw new Error("Failed to delete diagram")}async addCollaborator(t,n,r){const i=await fetch(`${An}/api/v1/diagrams/${t}/share`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify({email:n,permission:r})});if(!i.ok){const s=await i.json().catch(()=>({message:"Failed to add collaborator"}));throw new Error(s.message||"Failed to add collaborator")}}async getCollaborators(t){const n=await fetch(`${An}/api/v1/diagrams/${t}/collaborators`,{headers:this.getAuthHeaders()});if(!n.ok)throw new Error("Failed to fetch collaborators");return n.json()}async updateCollaborator(t,n,r){const i=await fetch(`${An}/api/v1/diagrams/${t}/collaborators/${n}`,{method:"PUT",headers:this.getAuthHeaders(),body:JSON.stringify({permission:r})});if(!i.ok){const s=await i.json().catch(()=>({message:"Failed to update collaborator"}));throw new Error(s.message||"Failed to update collaborator")}}async removeCollaborator(t,n){if(!(await fetch(`${An}/api/v1/diagrams/${t}/collaborators/${n}`,{method:"DELETE",headers:this.getAuthHeaders()})).ok)throw new Error("Failed to remove collaborator")}async getAttemptedProblems(){const t=await fetch(`${An}/api/v1/problems/attempted`,{headers:this.getAuthHeaders()});return t.ok?t.json():[]}async saveAttempt(t){const n=await fetch(`${An}/api/v1/attempts`,{method:"POST",headers:this.getAuthHeaders(),body:JSON.stringify(t)});if(!n.ok){const r=await n.json().catch(()=>({message:"Failed to save attempt"}));throw new Error(r.message||"Failed to save attempt")}return n.json()}async getUserAttempts(){const t=await fetch(`${An}/api/v1/attempts`,{headers:this.getAuthHeaders()});if(!t.ok)throw new Error("Failed to fetch attempts");return t.json()}async getAttemptByProblem(t){const n=await fetch(`${An}/api/v1/attempts/problem/${t}`,{headers:this.getAuthHeaders()});if(n.status===404)return null;if(!n.ok)throw new Error("Failed to fetch attempt");return n.json()}async deleteAttempt(t){if(!(await fetch(`${An}/api/v1/attempts/problem/${t}`,{method:"DELETE",headers:this.getAuthHeaders()})).ok)throw new Error("Failed to delete attempt")}}const tn=new h9,EP=M.createContext(void 0),p9=({children:e})=>{const[t,n]=M.useState({user:null,token:null,isAuthenticated:!1,isLoading:!0}),r=M.useCallback(h=>{try{const p=f9(h);return p.exp?p.exp*1e3<Date.now():!1}catch{return!0}},[]),i=M.useCallback(()=>{localStorage.removeItem("auth_token"),n({user:null,token:null,isAuthenticated:!1,isLoading:!1})},[]);M.useEffect(()=>{(async()=>{const p=localStorage.getItem("auth_token");if(!p){n(g=>({...g,isLoading:!1}));return}if(r(p)){localStorage.removeItem("auth_token"),n(g=>({...g,isLoading:!1}));return}try{const g=await tn.getCurrentUser();n({user:g,token:p,isAuthenticated:!0,isLoading:!1})}catch(g){console.error("Failed to fetch user:",g),localStorage.removeItem("auth_token"),n(b=>({...b,isLoading:!1}))}})()},[r]);const s=M.useCallback(async h=>{const{user:p,token:g}=await tn.login(h);localStorage.setItem("auth_token",g),n({user:p,token:g,isAuthenticated:!0,isLoading:!1})},[]),o=M.useCallback(async h=>{const{user:p,token:g}=await tn.signup(h);localStorage.setItem("auth_token",g),n({user:p,token:g,isAuthenticated:!0,isLoading:!1})},[]),l=M.useCallback(async h=>{const{user:p,token:g}=await tn.googleLogin(h);localStorage.setItem("auth_token",g),n({user:p,token:g,isAuthenticated:!0,isLoading:!1})},[]),u=M.useCallback(async()=>{if(t.token)try{const h=await tn.getCurrentUser();n(p=>({...p,user:h}))}catch(h){console.error("Failed to refresh user:",h),i()}},[t.token,i]),d=M.useMemo(()=>({...t,login:s,signup:o,googleLogin:l,logout:i,refreshUser:u}),[t,s,o,l,i,u]);return m.jsx(EP.Provider,{value:d,children:e})},Lm=()=>{const e=M.useContext(EP);if(!e)throw new Error("useAuth must be used within AuthProvider");return e},Hk=M.createContext({});function Fk(e){const t=M.useRef(null);return t.current===null&&(t.current=e()),t.current}const Uk=typeof window<"u",NP=Uk?M.useLayoutEffect:M.useEffect,Pm=M.createContext(null);function $k(e,t){e.indexOf(t)===-1&&e.push(t)}function Gk(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const Ls=(e,t,n)=>n>t?t:n<e?e:n;let Wk=()=>{};const Ps={},TP=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function AP(e){return typeof e=="object"&&e!==null}const MP=e=>/^0[^.\s]+$/u.test(e);function Kk(e){let t;return()=>(t===void 0&&(t=e()),t)}const pi=e=>e,m9=(e,t)=>n=>t(e(n)),Jd=(...e)=>e.reduce(m9),xd=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class Yk{constructor(){this.subscriptions=[]}add(t){return $k(this.subscriptions,t),()=>Gk(this.subscriptions,t)}notify(t,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ts=e=>e*1e3,hi=e=>e/1e3;function _P(e,t){return t?e*(1e3/t):0}const DP=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,g9=1e-7,y9=12;function b9(e,t,n,r,i){let s,o,l=0;do o=t+(n-t)/2,s=DP(o,r,i)-e,s>0?n=o:t=o;while(Math.abs(s)>g9&&++l<y9);return o}function ef(e,t,n,r){if(e===t&&n===r)return pi;const i=s=>b9(s,0,1,e,n);return s=>s===0||s===1?s:DP(i(s),t,r)}const RP=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,jP=e=>t=>1-e(1-t),OP=ef(.33,1.53,.69,.99),Xk=jP(OP),LP=RP(Xk),PP=e=>(e*=2)<1?.5*Xk(e):.5*(2-Math.pow(2,-10*(e-1))),Zk=e=>1-Math.sin(Math.acos(e)),IP=jP(Zk),BP=RP(Zk),x9=ef(.42,0,1,1),v9=ef(0,0,.58,1),zP=ef(.42,0,.58,1),w9=e=>Array.isArray(e)&&typeof e[0]!="number",VP=e=>Array.isArray(e)&&typeof e[0]=="number",S9={linear:pi,easeIn:x9,easeInOut:zP,easeOut:v9,circIn:Zk,circInOut:BP,circOut:IP,backIn:Xk,backInOut:LP,backOut:OP,anticipate:PP},C9=e=>typeof e=="string",DM=e=>{if(VP(e)){Wk(e.length===4);const[t,n,r,i]=e;return ef(t,n,r,i)}else if(C9(e))return S9[e];return e},_h=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function k9(e,t){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function u(h){o.has(h)&&(d.schedule(h),e()),h(l)}const d={schedule:(h,p=!1,g=!1)=>{const v=g&&i?n:r;return p&&o.add(h),v.has(h)||v.add(h),h},cancel:h=>{r.delete(h),o.delete(h)},process:h=>{if(l=h,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(u),n.clear(),i=!1,s&&(s=!1,d.process(h))}};return d}const E9=40;function qP(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=_h.reduce((E,N)=>(E[N]=k9(s),E),{}),{setup:l,read:u,resolveKeyframes:d,preUpdate:h,update:p,preRender:g,render:b,postRender:v}=o,S=()=>{const E=Ps.useManualTiming?i.timestamp:performance.now();n=!1,Ps.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(E-i.timestamp,E9),1)),i.timestamp=E,i.isProcessing=!0,l.process(i),u.process(i),d.process(i),h.process(i),p.process(i),g.process(i),b.process(i),v.process(i),i.isProcessing=!1,n&&t&&(r=!1,e(S))},w=()=>{n=!0,r=!0,i.isProcessing||e(S)};return{schedule:_h.reduce((E,N)=>{const A=o[N];return E[N]=(_,j=!1,R=!1)=>(n||w(),A.schedule(_,j,R)),E},{}),cancel:E=>{for(let N=0;N<_h.length;N++)o[_h[N]].cancel(E)},state:i,steps:o}}const{schedule:Ht,cancel:zo,state:$n,steps:q0}=qP(typeof requestAnimationFrame<"u"?requestAnimationFrame:pi,!0);let ip;function N9(){ip=void 0}const Cr={now:()=>(ip===void 0&&Cr.set($n.isProcessing||Ps.useManualTiming?$n.timestamp:performance.now()),ip),set:e=>{ip=e,queueMicrotask(N9)}},HP=e=>t=>typeof t=="string"&&t.startsWith(e),Qk=HP("--"),T9=HP("var(--"),Jk=e=>T9(e)?A9.test(e.split("/*")[0].trim()):!1,A9=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Nc={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},vd={...Nc,transform:e=>Ls(0,1,e)},Dh={...Nc,default:1},Ju=e=>Math.round(e*1e5)/1e5,eE=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function M9(e){return e==null}const _9=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,tE=(e,t)=>n=>!!(typeof n=="string"&&_9.test(n)&&n.startsWith(e)||t&&!M9(n)&&Object.prototype.hasOwnProperty.call(n,t)),FP=(e,t,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,l]=r.match(eE);return{[e]:parseFloat(i),[t]:parseFloat(s),[n]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},D9=e=>Ls(0,255,e),H0={...Nc,transform:e=>Math.round(D9(e))},Sa={test:tE("rgb","red"),parse:FP("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+H0.transform(e)+", "+H0.transform(t)+", "+H0.transform(n)+", "+Ju(vd.transform(r))+")"};function R9(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const gC={test:tE("#"),parse:R9,transform:Sa.transform},tf=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),wo=tf("deg"),ns=tf("%"),Ge=tf("px"),j9=tf("vh"),O9=tf("vw"),RM={...ns,parse:e=>ns.parse(e)/100,transform:e=>ns.transform(e*100)},Xl={test:tE("hsl","hue"),parse:FP("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+ns.transform(Ju(t))+", "+ns.transform(Ju(n))+", "+Ju(vd.transform(r))+")"},yn={test:e=>Sa.test(e)||gC.test(e)||Xl.test(e),parse:e=>Sa.test(e)?Sa.parse(e):Xl.test(e)?Xl.parse(e):gC.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Sa.transform(e):Xl.transform(e),getAnimatableNone:e=>{const t=yn.parse(e);return t.alpha=0,yn.transform(t)}},L9=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function P9(e){return isNaN(e)&&typeof e=="string"&&(e.match(eE)?.length||0)+(e.match(L9)?.length||0)>0}const UP="number",$P="color",I9="var",B9="var(",jM="${}",z9=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function wd(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const l=t.replace(z9,u=>(yn.test(u)?(r.color.push(s),i.push($P),n.push(yn.parse(u))):u.startsWith(B9)?(r.var.push(s),i.push(I9),n.push(u)):(r.number.push(s),i.push(UP),n.push(parseFloat(u))),++s,jM)).split(jM);return{values:n,split:l,indexes:r,types:i}}function GP(e){return wd(e).values}function WP(e){const{split:t,types:n}=wd(e),r=t.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=t[o],i[o]!==void 0){const l=n[o];l===UP?s+=Ju(i[o]):l===$P?s+=yn.transform(i[o]):s+=i[o]}return s}}const V9=e=>typeof e=="number"?0:yn.test(e)?yn.getAnimatableNone(e):e;function q9(e){const t=GP(e);return WP(e)(t.map(V9))}const Vo={test:P9,parse:GP,createTransformer:WP,getAnimatableNone:q9};function F0(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function H9({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let i=0,s=0,o=0;if(!t)i=s=o=n;else{const l=n<.5?n*(1+t):n+t-n*t,u=2*n-l;i=F0(u,l,e+1/3),s=F0(u,l,e),o=F0(u,l,e-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Sp(e,t){return n=>n>0?t:e}const Yt=(e,t,n)=>e+(t-e)*n,U0=(e,t,n)=>{const r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},F9=[gC,Sa,Xl],U9=e=>F9.find(t=>t.test(e));function OM(e){const t=U9(e);if(!t)return!1;let n=t.parse(e);return t===Xl&&(n=H9(n)),n}const LM=(e,t)=>{const n=OM(e),r=OM(t);if(!n||!r)return Sp(e,t);const i={...n};return s=>(i.red=U0(n.red,r.red,s),i.green=U0(n.green,r.green,s),i.blue=U0(n.blue,r.blue,s),i.alpha=Yt(n.alpha,r.alpha,s),Sa.transform(i))},yC=new Set(["none","hidden"]);function $9(e,t){return yC.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function G9(e,t){return n=>Yt(e,t,n)}function nE(e){return typeof e=="number"?G9:typeof e=="string"?Jk(e)?Sp:yn.test(e)?LM:Y9:Array.isArray(e)?KP:typeof e=="object"?yn.test(e)?LM:W9:Sp}function KP(e,t){const n=[...e],r=n.length,i=e.map((s,o)=>nE(s)(s,t[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function W9(e,t){const n={...e,...t},r={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(r[i]=nE(e[i])(e[i],t[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function K9(e,t){const n=[],r={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const s=t.types[i],o=e.indexes[s][r[s]],l=e.values[o]??0;n[i]=l,r[s]++}return n}const Y9=(e,t)=>{const n=Vo.createTransformer(t),r=wd(e),i=wd(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?yC.has(e)&&!i.values.length||yC.has(t)&&!r.values.length?$9(e,t):Jd(KP(K9(r,i),i.values),n):Sp(e,t)};function YP(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Yt(e,t,n):nE(e)(e,t)}const X9=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>Ht.update(t,n),stop:()=>zo(t),now:()=>$n.isProcessing?$n.timestamp:Cr.now()}},XP=(e,t,n=10)=>{let r="";const i=Math.max(Math.round(t/n),2);for(let s=0;s<i;s++)r+=Math.round(e(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Cp=2e4;function rE(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Cp;)t+=n,r=e.next(t);return t>=Cp?1/0:t}function Z9(e,t=100,n){const r=n({...e,keyframes:[0,t]}),i=Math.min(rE(r),Cp);return{type:"keyframes",ease:s=>r.next(i*s).value/t,duration:hi(i)}}const Q9=5;function ZP(e,t,n){const r=Math.max(t-Q9,0);return _P(n-e(r),t-r)}const nn={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},$0=.001;function J9({duration:e=nn.duration,bounce:t=nn.bounce,velocity:n=nn.velocity,mass:r=nn.mass}){let i,s,o=1-t;o=Ls(nn.minDamping,nn.maxDamping,o),e=Ls(nn.minDuration,nn.maxDuration,hi(e)),o<1?(i=d=>{const h=d*o,p=h*e,g=h-n,b=bC(d,o),v=Math.exp(-p);return $0-g/b*v},s=d=>{const p=d*o*e,g=p*n+n,b=Math.pow(o,2)*Math.pow(d,2)*e,v=Math.exp(-p),S=bC(Math.pow(d,2),o);return(-i(d)+$0>0?-1:1)*((g-b)*v)/S}):(i=d=>{const h=Math.exp(-d*e),p=(d-n)*e+1;return-$0+h*p},s=d=>{const h=Math.exp(-d*e),p=(n-d)*(e*e);return h*p});const l=5/e,u=t7(i,s,l);if(e=ts(e),isNaN(u))return{stiffness:nn.stiffness,damping:nn.damping,duration:e};{const d=Math.pow(u,2)*r;return{stiffness:d,damping:o*2*Math.sqrt(r*d),duration:e}}}const e7=12;function t7(e,t,n){let r=n;for(let i=1;i<e7;i++)r=r-e(r)/t(r);return r}function bC(e,t){return e*Math.sqrt(1-t*t)}const n7=["duration","bounce"],r7=["stiffness","damping","mass"];function PM(e,t){return t.some(n=>e[n]!==void 0)}function i7(e){let t={velocity:nn.velocity,stiffness:nn.stiffness,damping:nn.damping,mass:nn.mass,isResolvedFromDuration:!1,...e};if(!PM(e,r7)&&PM(e,n7))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*Ls(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:nn.mass,stiffness:i,damping:s}}else{const n=J9(e);t={...t,...n,mass:nn.mass},t.isResolvedFromDuration=!0}return t}function kp(e=nn.visualDuration,t=nn.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],l={done:!1,value:s},{stiffness:u,damping:d,mass:h,duration:p,velocity:g,isResolvedFromDuration:b}=i7({...n,velocity:-hi(n.velocity||0)}),v=g||0,S=d/(2*Math.sqrt(u*h)),w=o-s,k=hi(Math.sqrt(u/h)),T=Math.abs(w)<5;r||(r=T?nn.restSpeed.granular:nn.restSpeed.default),i||(i=T?nn.restDelta.granular:nn.restDelta.default);let E;if(S<1){const A=bC(k,S);E=_=>{const j=Math.exp(-S*k*_);return o-j*((v+S*k*w)/A*Math.sin(A*_)+w*Math.cos(A*_))}}else if(S===1)E=A=>o-Math.exp(-k*A)*(w+(v+k*w)*A);else{const A=k*Math.sqrt(S*S-1);E=_=>{const j=Math.exp(-S*k*_),R=Math.min(A*_,300);return o-j*((v+S*k*w)*Math.sinh(R)+A*w*Math.cosh(R))/A}}const N={calculatedDuration:b&&p||null,next:A=>{const _=E(A);if(b)l.done=A>=p;else{let j=A===0?v:0;S<1&&(j=A===0?ts(v):ZP(E,A,_));const R=Math.abs(j)<=r,I=Math.abs(o-_)<=i;l.done=R&&I}return l.value=l.done?o:_,l},toString:()=>{const A=Math.min(rE(N),Cp),_=XP(j=>N.next(A*j).value,A,30);return A+"ms "+_},toTransition:()=>{}};return N}kp.applyToOptions=e=>{const t=Z9(e,100,kp);return e.ease=t.ease,e.duration=ts(t.duration),e.type="keyframes",e};function xC({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:l,max:u,restDelta:d=.5,restSpeed:h}){const p=e[0],g={done:!1,value:p},b=R=>l!==void 0&&R<l||u!==void 0&&R>u,v=R=>l===void 0?u:u===void 0||Math.abs(l-R)<Math.abs(u-R)?l:u;let S=n*t;const w=p+S,k=o===void 0?w:o(w);k!==w&&(S=k-p);const T=R=>-S*Math.exp(-R/r),E=R=>k+T(R),N=R=>{const I=T(R),B=E(R);g.done=Math.abs(I)<=d,g.value=g.done?k:B};let A,_;const j=R=>{b(g.value)&&(A=R,_=kp({keyframes:[g.value,v(g.value)],velocity:ZP(E,R,g.value),damping:i,stiffness:s,restDelta:d,restSpeed:h}))};return j(0),{calculatedDuration:null,next:R=>{let I=!1;return!_&&A===void 0&&(I=!0,N(R),j(R)),A!==void 0&&R>=A?_.next(R-A):(!I&&N(R),g)}}}function s7(e,t,n){const r=[],i=n||Ps.mix||YP,s=e.length-1;for(let o=0;o<s;o++){let l=i(e[o],e[o+1]);if(t){const u=Array.isArray(t)?t[o]||pi:t;l=Jd(u,l)}r.push(l)}return r}function o7(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const s=e.length;if(Wk(s===t.length),s===1)return()=>t[0];if(s===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=s7(t,r,i),u=l.length,d=h=>{if(o&&h<e[0])return t[0];let p=0;if(u>1)for(;p<e.length-2&&!(h<e[p+1]);p++);const g=xd(e[p],e[p+1],h);return l[p](g)};return n?h=>d(Ls(e[0],e[s-1],h)):d}function a7(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=xd(0,t,r);e.push(Yt(n,1,i))}}function l7(e){const t=[0];return a7(t,e.length-1),t}function c7(e,t){return e.map(n=>n*t)}function u7(e,t){return e.map(()=>t||zP).splice(0,e.length-1)}function ed({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=w9(r)?r.map(DM):DM(r),s={done:!1,value:t[0]},o=c7(n&&n.length===t.length?n:l7(t),e),l=o7(o,t,{ease:Array.isArray(i)?i:u7(t,i)});return{calculatedDuration:e,next:u=>(s.value=l(u),s.done=u>=e,s)}}const d7=e=>e!==null;function iE(e,{repeat:t,repeatType:n="loop"},r,i=1){const s=e.filter(d7),l=i<0||t&&n!=="loop"&&t%2===1?0:s.length-1;return!l||r===void 0?s[l]:r}const f7={decay:xC,inertia:xC,tween:ed,keyframes:ed,spring:kp};function QP(e){typeof e.type=="string"&&(e.type=f7[e.type])}class sE{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const h7=e=>e/100;class oE extends sE{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==Cr.now()&&this.tick(Cr.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;QP(t);const{type:n=ed,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=t;let{keyframes:l}=t;const u=n||ed;u!==ed&&typeof l[0]!="number"&&(this.mixKeyframes=Jd(h7,YP(l[0],l[1])),l=[0,100]);const d=u({...t,keyframes:l});s==="mirror"&&(this.mirroredGenerator=u({...t,keyframes:[...l].reverse(),velocity:-o})),d.calculatedDuration===null&&(d.calculatedDuration=rE(d));const{calculatedDuration:h}=d;this.calculatedDuration=h,this.resolvedDuration=h+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=d}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:u}=this;if(this.startTime===null)return r.next(0);const{delay:d=0,keyframes:h,repeat:p,repeatType:g,repeatDelay:b,type:v,onUpdate:S,finalKeyframe:w}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-i/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const k=this.currentTime-d*(this.playbackSpeed>=0?1:-1),T=this.playbackSpeed>=0?k<0:k>i;this.currentTime=Math.max(k,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let E=this.currentTime,N=r;if(p){const R=Math.min(this.currentTime,i)/l;let I=Math.floor(R),B=R%1;!B&&R>=1&&(B=1),B===1&&I--,I=Math.min(I,p+1),!!(I%2)&&(g==="reverse"?(B=1-B,b&&(B-=b/l)):g==="mirror"&&(N=o)),E=Ls(0,1,B)*l}const A=T?{done:!1,value:h[0]}:N.next(E);s&&(A.value=s(A.value));let{done:_}=A;!T&&u!==null&&(_=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const j=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&_);return j&&v!==xC&&(A.value=iE(h,this.options,w,this.speed)),S&&S(A.value),j&&this.finish(),A}then(t,n){return this.finished.then(t,n)}get duration(){return hi(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+hi(t)}get time(){return hi(this.currentTime)}set time(t){t=ts(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(Cr.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=hi(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=X9,startTime:n}=this.options;this.driver||(this.driver=t(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(Cr.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function p7(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Ca=e=>e*180/Math.PI,vC=e=>{const t=Ca(Math.atan2(e[1],e[0]));return wC(t)},m7={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:vC,rotateZ:vC,skewX:e=>Ca(Math.atan(e[1])),skewY:e=>Ca(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},wC=e=>(e=e%360,e<0&&(e+=360),e),IM=vC,BM=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),zM=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),g7={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:BM,scaleY:zM,scale:e=>(BM(e)+zM(e))/2,rotateX:e=>wC(Ca(Math.atan2(e[6],e[5]))),rotateY:e=>wC(Ca(Math.atan2(-e[2],e[0]))),rotateZ:IM,rotate:IM,skewX:e=>Ca(Math.atan(e[4])),skewY:e=>Ca(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function SC(e){return e.includes("scale")?1:0}function CC(e,t){if(!e||e==="none")return SC(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=g7,i=n;else{const l=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=m7,i=l}if(!i)return SC(t);const s=r[t],o=i[1].split(",").map(b7);return typeof s=="function"?s(o):o[s]}const y7=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return CC(n,t)};function b7(e){return parseFloat(e.trim())}const Tc=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Ac=new Set(Tc),VM=e=>e===Nc||e===Ge,x7=new Set(["x","y","z"]),v7=Tc.filter(e=>!x7.has(e));function w7(e){const t=[];return v7.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const _a={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>CC(t,"x"),y:(e,{transform:t})=>CC(t,"y")};_a.translateX=_a.x;_a.translateY=_a.y;const Da=new Set;let kC=!1,EC=!1,NC=!1;function JP(){if(EC){const e=Array.from(Da).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const i=w7(r);i.length&&(n.set(r,i),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{r.getValue(s)?.set(o)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}EC=!1,kC=!1,Da.forEach(e=>e.complete(NC)),Da.clear()}function eI(){Da.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(EC=!0)})}function S7(){NC=!0,eI(),JP(),NC=!1}class aE{constructor(t,n,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Da.add(this),kC||(kC=!0,Ht.read(eI),Ht.resolveKeyframes(JP))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:i}=this;if(t[0]===null){const s=i?.get(),o=t[t.length-1];if(s!==void 0)t[0]=s;else if(r&&n){const l=r.readValue(n,o);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=o),i&&s===void 0&&i.set(t[0])}p7(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Da.delete(this)}cancel(){this.state==="scheduled"&&(Da.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const C7=e=>e.startsWith("--");function k7(e,t,n){C7(t)?e.style.setProperty(t,n):e.style[t]=n}const E7=Kk(()=>window.ScrollTimeline!==void 0),N7={};function T7(e,t){const n=Kk(e);return()=>N7[t]??n()}const tI=T7(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),Fu=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,qM={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:Fu([0,.65,.55,1]),circOut:Fu([.55,0,1,.45]),backIn:Fu([.31,.01,.66,-.59]),backOut:Fu([.33,1.53,.69,.99])};function nI(e,t){if(e)return typeof e=="function"?tI()?XP(e,t):"ease-out":VP(e)?Fu(e):Array.isArray(e)?e.map(n=>nI(n,t)||qM.easeOut):qM[e]}function A7(e,t,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:l="easeOut",times:u}={},d=void 0){const h={[t]:n};u&&(h.offset=u);const p=nI(l,i);Array.isArray(p)&&(h.easing=p);const g={delay:r,duration:i,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return d&&(g.pseudoElement=d),e.animate(h,g)}function rI(e){return typeof e=="function"&&"applyToOptions"in e}function M7({type:e,...t}){return rI(e)&&tI()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class _7 extends sE{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:l,onComplete:u}=t;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=t,Wk(typeof t.type!="string");const d=M7(t);this.animation=A7(n,r,i,d,s),d.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const h=iE(i,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(h):k7(n,r,h),this.animation.cancel()}u?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return hi(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+hi(t)}get time(){return hi(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=ts(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&E7()?(this.animation.timeline=t,pi):n(this)}}const iI={anticipate:PP,backInOut:LP,circInOut:BP};function D7(e){return e in iI}function R7(e){typeof e.ease=="string"&&D7(e.ease)&&(e.ease=iI[e.ease])}const HM=10;class j7 extends _7{constructor(t){R7(t),QP(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const l=new oE({...o,autoplay:!1}),u=ts(this.finishedTime??this.time);n.setWithVelocity(l.sample(u-HM).value,l.sample(u).value,HM),l.stop()}}const FM=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Vo.test(e)||e==="0")&&!e.startsWith("url("));function O7(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function L7(e,t,n,r){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const s=e[e.length-1],o=FM(i,t),l=FM(s,t);return!o||!l?!1:O7(e)||(n==="spring"||rI(n))&&r}function TC(e){e.duration=0,e.type="keyframes"}const P7=new Set(["opacity","clipPath","filter","transform"]),I7=Kk(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function B7(e){const{motionValue:t,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:u,transformTemplate:d}=t.owner.getProps();return I7()&&n&&P7.has(n)&&(n!=="transform"||!d)&&!u&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const z7=40;class V7 extends sE{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:l,name:u,motionValue:d,element:h,...p}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=Cr.now();const g={autoplay:t,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:u,motionValue:d,element:h,...p},b=h?.KeyframeResolver||aE;this.keyframeResolver=new b(l,(v,S,w)=>this.onKeyframesResolved(v,S,g,!w),u,d,h),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,n,r,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:l,delay:u,isHandoff:d,onUpdate:h}=r;this.resolvedAt=Cr.now(),L7(t,s,o,l)||((Ps.instantAnimations||!u)&&h?.(iE(t,r,n)),t[0]=t[t.length-1],TC(r),r.repeat=0);const g={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>z7?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},b=!d&&B7(g)?new j7({...g,element:g.motionValue.owner.current}):new oE(g);b.finished.then(()=>this.notifyFinished()).catch(pi),this.pendingTimeline&&(this.stopTimeline=b.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=b}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),S7()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const q7=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function H7(e){const t=q7.exec(e);if(!t)return[,];const[,n,r,i]=t;return[`--${n??r}`,i]}function sI(e,t,n=1){const[r,i]=H7(e);if(!r)return;const s=window.getComputedStyle(t).getPropertyValue(r);if(s){const o=s.trim();return TP(o)?parseFloat(o):o}return Jk(i)?sI(i,t,n+1):i}function lE(e,t){return e?.[t]??e?.default??e}const oI=new Set(["width","height","top","left","right","bottom",...Tc]),F7={test:e=>e==="auto",parse:e=>e},aI=e=>t=>t.test(e),lI=[Nc,Ge,ns,wo,O9,j9,F7],UM=e=>lI.find(aI(e));function U7(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||MP(e):!0}const $7=new Set(["brightness","contrast","saturate","opacity"]);function G7(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(eE)||[];if(!r)return e;const i=n.replace(r,"");let s=$7.has(t)?1:0;return r!==n&&(s*=100),t+"("+s+i+")"}const W7=/\b([a-z-]*)\(.*?\)/gu,AC={...Vo,getAnimatableNone:e=>{const t=e.match(W7);return t?t.map(G7).join(" "):e}},$M={...Nc,transform:Math.round},K7={rotate:wo,rotateX:wo,rotateY:wo,rotateZ:wo,scale:Dh,scaleX:Dh,scaleY:Dh,scaleZ:Dh,skew:wo,skewX:wo,skewY:wo,distance:Ge,translateX:Ge,translateY:Ge,translateZ:Ge,x:Ge,y:Ge,z:Ge,perspective:Ge,transformPerspective:Ge,opacity:vd,originX:RM,originY:RM,originZ:Ge},cE={borderWidth:Ge,borderTopWidth:Ge,borderRightWidth:Ge,borderBottomWidth:Ge,borderLeftWidth:Ge,borderRadius:Ge,radius:Ge,borderTopLeftRadius:Ge,borderTopRightRadius:Ge,borderBottomRightRadius:Ge,borderBottomLeftRadius:Ge,width:Ge,maxWidth:Ge,height:Ge,maxHeight:Ge,top:Ge,right:Ge,bottom:Ge,left:Ge,padding:Ge,paddingTop:Ge,paddingRight:Ge,paddingBottom:Ge,paddingLeft:Ge,margin:Ge,marginTop:Ge,marginRight:Ge,marginBottom:Ge,marginLeft:Ge,backgroundPositionX:Ge,backgroundPositionY:Ge,...K7,zIndex:$M,fillOpacity:vd,strokeOpacity:vd,numOctaves:$M},Y7={...cE,color:yn,backgroundColor:yn,outlineColor:yn,fill:yn,stroke:yn,borderColor:yn,borderTopColor:yn,borderRightColor:yn,borderBottomColor:yn,borderLeftColor:yn,filter:AC,WebkitFilter:AC},cI=e=>Y7[e];function uI(e,t){let n=cI(e);return n!==AC&&(n=Vo),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const X7=new Set(["auto","none","0"]);function Z7(e,t,n){let r=0,i;for(;r<e.length&&!i;){const s=e[r];typeof s=="string"&&!X7.has(s)&&wd(s).values.length&&(i=e[r]),r++}if(i&&n)for(const s of t)e[s]=uI(n,i)}class Q7 extends aE{constructor(t,n,r,i,s){super(t,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let u=0;u<t.length;u++){let d=t[u];if(typeof d=="string"&&(d=d.trim(),Jk(d))){const h=sI(d,n.current);h!==void 0&&(t[u]=h),u===t.length-1&&(this.finalKeyframe=d)}}if(this.resolveNoneKeyframes(),!oI.has(r)||t.length!==2)return;const[i,s]=t,o=UM(i),l=UM(s);if(o!==l)if(VM(o)&&VM(l))for(let u=0;u<t.length;u++){const d=t[u];typeof d=="string"&&(t[u]=parseFloat(d))}else _a[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let i=0;i<t.length;i++)(t[i]===null||U7(t[i]))&&r.push(i);r.length&&Z7(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=_a[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&t.getValue(r,i).jump(i,!1)}measureEndState(){const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const i=t.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=_a[n](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([l,u])=>{t.getValue(l).set(u)}),this.resolveNoneKeyframes()}}function J7(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const i=n?.[e]??r.querySelectorAll(e);return i?Array.from(i):[]}return Array.from(e)}const dI=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function fI(e){return AP(e)&&"offsetHeight"in e}const GM=30,e$=e=>!isNaN(parseFloat(e));class t${constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=Cr.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const s of this.dependents)s.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Cr.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=e$(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new Yk);const r=this.events[t].add(n);return t==="change"?()=>{r(),Ht.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Cr.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>GM)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,GM);return _P(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function cc(e,t){return new t$(e,t)}const{schedule:uE}=qP(queueMicrotask,!1),Ti={x:!1,y:!1};function hI(){return Ti.x||Ti.y}function n$(e){return e==="x"||e==="y"?Ti[e]?null:(Ti[e]=!0,()=>{Ti[e]=!1}):Ti.x||Ti.y?null:(Ti.x=Ti.y=!0,()=>{Ti.x=Ti.y=!1})}function pI(e,t){const n=J7(e),r=new AbortController,i={passive:!0,...t,signal:r.signal};return[n,i,()=>r.abort()]}function WM(e){return!(e.pointerType==="touch"||hI())}function r$(e,t,n={}){const[r,i,s]=pI(e,n),o=l=>{if(!WM(l))return;const{target:u}=l,d=t(u,l);if(typeof d!="function"||!u)return;const h=p=>{WM(p)&&(d(p),u.removeEventListener("pointerleave",h))};u.addEventListener("pointerleave",h,i)};return r.forEach(l=>{l.addEventListener("pointerenter",o,i)}),s}const mI=(e,t)=>t?e===t?!0:mI(e,t.parentElement):!1,dE=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,i$=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function s$(e){return i$.has(e.tagName)||e.tabIndex!==-1}const sp=new WeakSet;function KM(e){return t=>{t.key==="Enter"&&e(t)}}function G0(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const o$=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=KM(()=>{if(sp.has(n))return;G0(n,"down");const i=KM(()=>{G0(n,"up")}),s=()=>G0(n,"cancel");n.addEventListener("keyup",i,t),n.addEventListener("blur",s,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function YM(e){return dE(e)&&!hI()}function a$(e,t,n={}){const[r,i,s]=pI(e,n),o=l=>{const u=l.currentTarget;if(!YM(l))return;sp.add(u);const d=t(u,l),h=(b,v)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",g),sp.has(u)&&sp.delete(u),YM(b)&&typeof d=="function"&&d(b,{success:v})},p=b=>{h(b,u===window||u===document||n.useGlobalTarget||mI(u,b.target))},g=b=>{h(b,!1)};window.addEventListener("pointerup",p,i),window.addEventListener("pointercancel",g,i)};return r.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",o,i),fI(l)&&(l.addEventListener("focus",d=>o$(d,i)),!s$(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),s}function gI(e){return AP(e)&&"ownerSVGElement"in e}function l$(e){return gI(e)&&e.tagName==="svg"}const nr=e=>!!(e&&e.getVelocity),c$=[...lI,yn,Vo],u$=e=>c$.find(aI(e)),fE=M.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function XM(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function d$(...e){return t=>{let n=!1;const r=e.map(i=>{const s=XM(i,t);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():XM(e[i],null)}}}}function f$(...e){return M.useCallback(d$(...e),e)}class h$ extends M.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=fI(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function p$({children:e,isPresent:t,anchorX:n,root:r}){const i=M.useId(),s=M.useRef(null),o=M.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=M.useContext(fE),u=f$(s,e?.ref);return M.useInsertionEffect(()=>{const{width:d,height:h,top:p,left:g,right:b}=o.current;if(t||!s.current||!d||!h)return;const v=n==="left"?`left: ${g}`:`right: ${b}`;s.current.dataset.motionPopId=i;const S=document.createElement("style");l&&(S.nonce=l);const w=r??document.head;return w.appendChild(S),S.sheet&&S.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${d}px !important;
            height: ${h}px !important;
            ${v}px !important;
            top: ${p}px !important;
          }
        `),()=>{w.contains(S)&&w.removeChild(S)}},[t]),m.jsx(h$,{isPresent:t,childRef:s,sizeRef:o,children:M.cloneElement(e,{ref:u})})}const m$=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o,anchorX:l,root:u})=>{const d=Fk(g$),h=M.useId();let p=!0,g=M.useMemo(()=>(p=!1,{id:h,initial:t,isPresent:n,custom:i,onExitComplete:b=>{d.set(b,!0);for(const v of d.values())if(!v)return;r&&r()},register:b=>(d.set(b,!1),()=>d.delete(b))}),[n,d,r]);return s&&p&&(g={...g}),M.useMemo(()=>{d.forEach((b,v)=>d.set(v,!1))},[n]),M.useEffect(()=>{!n&&!d.size&&r&&r()},[n]),o==="popLayout"&&(e=m.jsx(p$,{isPresent:n,anchorX:l,root:u,children:e})),m.jsx(Pm.Provider,{value:g,children:e})};function g$(){return new Map}function yI(e=!0){const t=M.useContext(Pm);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=t,s=M.useId();M.useEffect(()=>{if(e)return i(s)},[e]);const o=M.useCallback(()=>e&&r&&r(s),[s,r,e]);return!n&&r?[!1,o]:[!0]}const Rh=e=>e.key||"";function ZM(e){const t=[];return M.Children.forEach(e,n=>{M.isValidElement(n)&&t.push(n)}),t}const uc=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1,anchorX:l="left",root:u})=>{const[d,h]=yI(o),p=M.useMemo(()=>ZM(e),[e]),g=o&&!d?[]:p.map(Rh),b=M.useRef(!0),v=M.useRef(p),S=Fk(()=>new Map),[w,k]=M.useState(p),[T,E]=M.useState(p);NP(()=>{b.current=!1,v.current=p;for(let _=0;_<T.length;_++){const j=Rh(T[_]);g.includes(j)?S.delete(j):S.get(j)!==!0&&S.set(j,!1)}},[T,g.length,g.join("-")]);const N=[];if(p!==w){let _=[...p];for(let j=0;j<T.length;j++){const R=T[j],I=Rh(R);g.includes(I)||(_.splice(j,0,R),N.push(R))}return s==="wait"&&N.length&&(_=N),E(ZM(_)),k(p),null}const{forceRender:A}=M.useContext(Hk);return m.jsx(m.Fragment,{children:T.map(_=>{const j=Rh(_),R=o&&!d?!1:p===T||g.includes(j),I=()=>{if(S.has(j))S.set(j,!0);else return;let B=!0;S.forEach(U=>{U||(B=!1)}),B&&(A?.(),E(v.current),o&&h?.(),r&&r())};return m.jsx(m$,{isPresent:R,initial:!b.current||n?void 0:!1,custom:t,presenceAffectsLayout:i,mode:s,root:u,onExitComplete:R?void 0:I,anchorX:l,children:_},j)})})},bI=M.createContext({strict:!1}),QM={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},dc={};for(const e in QM)dc[e]={isEnabled:t=>QM[e].some(n=>!!t[n])};function y$(e){for(const t in e)dc[t]={...dc[t],...e[t]}}const b$=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function Ep(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||b$.has(e)}let xI=e=>!Ep(e);function x$(e){typeof e=="function"&&(xI=t=>t.startsWith("on")?!Ep(t):e(t))}try{x$(require("@emotion/is-prop-valid").default)}catch{}function v$(e,t,n){const r={};for(const i in e)i==="values"&&typeof e.values=="object"||(xI(i)||n===!0&&Ep(i)||!t&&!Ep(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}const Im=M.createContext({});function Bm(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Sd(e){return typeof e=="string"||Array.isArray(e)}const hE=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],pE=["initial",...hE];function zm(e){return Bm(e.animate)||pE.some(t=>Sd(e[t]))}function vI(e){return!!(zm(e)||e.variants)}function w$(e,t){if(zm(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Sd(n)?n:void 0,animate:Sd(r)?r:void 0}}return e.inherit!==!1?t:{}}function S$(e){const{initial:t,animate:n}=w$(e,M.useContext(Im));return M.useMemo(()=>({initial:t,animate:n}),[JM(t),JM(n)])}function JM(e){return Array.isArray(e)?e.join(" "):e}const Cd={};function C$(e){for(const t in e)Cd[t]=e[t],Qk(t)&&(Cd[t].isCSSVariable=!0)}function wI(e,{layout:t,layoutId:n}){return Ac.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Cd[e]||e==="opacity")}const k$={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},E$=Tc.length;function N$(e,t,n){let r="",i=!0;for(let s=0;s<E$;s++){const o=Tc[s],l=e[o];if(l===void 0)continue;let u=!0;if(typeof l=="number"?u=l===(o.startsWith("scale")?1:0):u=parseFloat(l)===0,!u||n){const d=dI(l,cE[o]);if(!u){i=!1;const h=k$[o]||o;r+=`${h}(${d}) `}n&&(t[o]=d)}}return r=r.trim(),n?r=n(t,i?"":r):i&&(r="none"),r}function mE(e,t,n){const{style:r,vars:i,transformOrigin:s}=e;let o=!1,l=!1;for(const u in t){const d=t[u];if(Ac.has(u)){o=!0;continue}else if(Qk(u)){i[u]=d;continue}else{const h=dI(d,cE[u]);u.startsWith("origin")?(l=!0,s[u]=h):r[u]=h}}if(t.transform||(o||n?r.transform=N$(t,e.transform,n):r.transform&&(r.transform="none")),l){const{originX:u="50%",originY:d="50%",originZ:h=0}=s;r.transformOrigin=`${u} ${d} ${h}`}}const gE=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function SI(e,t,n){for(const r in t)!nr(t[r])&&!wI(r,n)&&(e[r]=t[r])}function T$({transformTemplate:e},t){return M.useMemo(()=>{const n=gE();return mE(n,t,e),Object.assign({},n.vars,n.style)},[t])}function A$(e,t){const n=e.style||{},r={};return SI(r,n,e),Object.assign(r,T$(e,t)),r}function M$(e,t){const n={},r=A$(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const _$={offset:"stroke-dashoffset",array:"stroke-dasharray"},D$={offset:"strokeDashoffset",array:"strokeDasharray"};function R$(e,t,n=1,r=0,i=!0){e.pathLength=1;const s=i?_$:D$;e[s.offset]=Ge.transform(-r);const o=Ge.transform(t),l=Ge.transform(n);e[s.array]=`${o} ${l}`}function CI(e,{attrX:t,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...l},u,d,h){if(mE(e,l,d),u){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:p,style:g}=e;p.transform&&(g.transform=p.transform,delete p.transform),(g.transform||p.transformOrigin)&&(g.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),g.transform&&(g.transformBox=h?.transformBox??"fill-box",delete p.transformBox),t!==void 0&&(p.x=t),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),i!==void 0&&R$(p,i,s,o,!1)}const kI=()=>({...gE(),attrs:{}}),EI=e=>typeof e=="string"&&e.toLowerCase()==="svg";function j$(e,t,n,r){const i=M.useMemo(()=>{const s=kI();return CI(s,t,EI(r),e.transformTemplate,e.style),{...s.attrs,style:{...s.style}}},[t]);if(e.style){const s={};SI(s,e.style,e),i.style={...s,...i.style}}return i}const O$=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function yE(e){return typeof e!="string"||e.includes("-")?!1:!!(O$.indexOf(e)>-1||/[A-Z]/u.test(e))}function L$(e,t,n,{latestValues:r},i,s=!1){const l=(yE(e)?j$:M$)(t,r,i,e),u=v$(t,typeof e=="string",s),d=e!==M.Fragment?{...u,...l,ref:n}:{},{children:h}=t,p=M.useMemo(()=>nr(h)?h.get():h,[h]);return M.createElement(e,{...d,children:p})}function e_(e){const t=[{},{}];return e?.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function bE(e,t,n,r){if(typeof t=="function"){const[i,s]=e_(r);t=t(n!==void 0?n:e.custom,i,s)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,s]=e_(r);t=t(n!==void 0?n:e.custom,i,s)}return t}function op(e){return nr(e)?e.get():e}function P$({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,i){return{latestValues:I$(n,r,i,e),renderState:t()}}function I$(e,t,n,r){const i={},s=r(e,{});for(const g in s)i[g]=op(s[g]);let{initial:o,animate:l}=e;const u=zm(e),d=vI(e);t&&d&&!u&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const p=h?l:o;if(p&&typeof p!="boolean"&&!Bm(p)){const g=Array.isArray(p)?p:[p];for(let b=0;b<g.length;b++){const v=bE(e,g[b]);if(v){const{transitionEnd:S,transition:w,...k}=v;for(const T in k){let E=k[T];if(Array.isArray(E)){const N=h?E.length-1:0;E=E[N]}E!==null&&(i[T]=E)}for(const T in S)i[T]=S[T]}}}return i}const NI=e=>(t,n)=>{const r=M.useContext(Im),i=M.useContext(Pm),s=()=>P$(e,t,r,i);return n?s():Fk(s)};function xE(e,t,n){const{style:r}=e,i={};for(const s in r)(nr(r[s])||t.style&&nr(t.style[s])||wI(s,e)||n?.getValue(s)?.liveStyle!==void 0)&&(i[s]=r[s]);return i}const B$=NI({scrapeMotionValuesFromProps:xE,createRenderState:gE});function TI(e,t,n){const r=xE(e,t,n);for(const i in e)if(nr(e[i])||nr(t[i])){const s=Tc.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=e[i]}return r}const z$=NI({scrapeMotionValuesFromProps:TI,createRenderState:kI}),V$=Symbol.for("motionComponentSymbol");function Zl(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function q$(e,t,n){return M.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):Zl(n)&&(n.current=r))},[t])}const vE=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),H$="framerAppearId",AI="data-"+vE(H$),MI=M.createContext({});function F$(e,t,n,r,i){const{visualElement:s}=M.useContext(Im),o=M.useContext(bI),l=M.useContext(Pm),u=M.useContext(fE).reducedMotion,d=M.useRef(null);r=r||o.renderer,!d.current&&r&&(d.current=r(e,{visualState:t,parent:s,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:u}));const h=d.current,p=M.useContext(MI);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&U$(d.current,n,i,p);const g=M.useRef(!1);M.useInsertionEffect(()=>{h&&g.current&&h.update(n,l)});const b=n[AI],v=M.useRef(!!b&&!window.MotionHandoffIsComplete?.(b)&&window.MotionHasOptimisedAnimation?.(b));return NP(()=>{h&&(g.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),v.current&&h.animationState&&h.animationState.animateChanges())}),M.useEffect(()=>{h&&(!v.current&&h.animationState&&h.animationState.animateChanges(),v.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(b)}),v.current=!1),h.enteringChildren=void 0)}),h}function U$(e,t,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:l,layoutScroll:u,layoutRoot:d,layoutCrossfade:h}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:_I(e.parent)),e.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||l&&Zl(l),visualElement:e,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:h,layoutScroll:u,layoutRoot:d})}function _I(e){if(e)return e.options.allowProjection!==!1?e.projection:_I(e.parent)}function W0(e,{forwardMotionProps:t=!1}={},n,r){n&&y$(n);const i=yE(e)?z$:B$;function s(l,u){let d;const h={...M.useContext(fE),...l,layoutId:$$(l)},{isStatic:p}=h,g=S$(l),b=i(l,p);if(!p&&Uk){G$();const v=W$(h);d=v.MeasureLayout,g.visualElement=F$(e,b,h,r,v.ProjectionNode)}return m.jsxs(Im.Provider,{value:g,children:[d&&g.visualElement?m.jsx(d,{visualElement:g.visualElement,...h}):null,L$(e,l,q$(b,g.visualElement,u),b,p,t)]})}s.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const o=M.forwardRef(s);return o[V$]=e,o}function $$({layoutId:e}){const t=M.useContext(Hk).id;return t&&e!==void 0?t+"-"+e:e}function G$(e,t){M.useContext(bI).strict}function W$(e){const{drag:t,layout:n}=dc;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t?.isEnabled(e)||n?.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function K$(e,t){if(typeof Proxy>"u")return W0;const n=new Map,r=(s,o)=>W0(s,o,e,t),i=(s,o)=>r(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?r:(n.has(o)||n.set(o,W0(o,void 0,e,t)),n.get(o))})}function DI({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function Y$({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function X$(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function K0(e){return e===void 0||e===1}function MC({scale:e,scaleX:t,scaleY:n}){return!K0(e)||!K0(t)||!K0(n)}function ba(e){return MC(e)||RI(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function RI(e){return t_(e.x)||t_(e.y)}function t_(e){return e&&e!=="0%"}function Np(e,t,n){const r=e-n,i=t*r;return n+i}function n_(e,t,n,r,i){return i!==void 0&&(e=Np(e,i,r)),Np(e,n,r)+t}function _C(e,t=0,n=1,r,i){e.min=n_(e.min,t,n,r,i),e.max=n_(e.max,t,n,r,i)}function jI(e,{x:t,y:n}){_C(e.x,t.translate,t.scale,t.originPoint),_C(e.y,n.translate,n.scale,n.originPoint)}const r_=.999999999999,i_=1.0000000000001;function Z$(e,t,n,r=!1){const i=n.length;if(!i)return;t.x=t.y=1;let s,o;for(let l=0;l<i;l++){s=n[l],o=s.projectionDelta;const{visualElement:u}=s.options;u&&u.props.style&&u.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&Jl(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,jI(e,o)),r&&ba(s.latestValues)&&Jl(e,s.latestValues))}t.x<i_&&t.x>r_&&(t.x=1),t.y<i_&&t.y>r_&&(t.y=1)}function Ql(e,t){e.min=e.min+t,e.max=e.max+t}function s_(e,t,n,r,i=.5){const s=Yt(e.min,e.max,i);_C(e,t,n,s,r)}function Jl(e,t){s_(e.x,t.x,t.scaleX,t.scale,t.originX),s_(e.y,t.y,t.scaleY,t.scale,t.originY)}function OI(e,t){return DI(X$(e.getBoundingClientRect(),t))}function Q$(e,t,n){const r=OI(e,n),{scroll:i}=t;return i&&(Ql(r.x,i.offset.x),Ql(r.y,i.offset.y)),r}const o_=()=>({translate:0,scale:1,origin:0,originPoint:0}),ec=()=>({x:o_(),y:o_()}),a_=()=>({min:0,max:0}),ln=()=>({x:a_(),y:a_()}),DC={current:null},LI={current:!1};function J$(){if(LI.current=!0,!!Uk)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>DC.current=e.matches;e.addEventListener("change",t),t()}else DC.current=!1}const eG=new WeakMap;function tG(e,t,n){for(const r in t){const i=t[r],s=n[r];if(nr(i))e.addValue(r,i);else if(nr(s))e.addValue(r,cc(i,{owner:e}));else if(s!==i)if(e.hasValue(r)){const o=e.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=e.getStaticValue(r);e.addValue(r,cc(o!==void 0?o:i,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const l_=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class nG{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=aE,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=Cr.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,Ht.render(this.render,!1,!0))};const{latestValues:u,renderState:d}=o;this.latestValues=u,this.baseTarget={...u},this.initialValues=n.initial?{...u}:{},this.renderState=d,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.blockInitialAnimation=!!s,this.isControllingVariants=zm(n),this.isVariantNode=vI(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:h,...p}=this.scrapeMotionValuesFromProps(n,{},this);for(const g in p){const b=p[g];u[g]!==void 0&&nr(b)&&b.set(u[g])}}mount(t){this.current=t,eG.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),LI.current||J$(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:DC.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),zo(this.notifyUpdate),zo(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Ac.has(t);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&Ht.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in dc){const n=dc[t];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[t]&&i&&r(this.props)&&(this.features[t]=new i(this)),this.features[t]){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):ln()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<l_.length;r++){const i=l_[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=t[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=tG(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=cc(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(TP(r)||MP(r))?r=parseFloat(r):!u$(r)&&Vo.test(n)&&(r=uI(t,n)),this.setBaseTarget(t,nr(r)?r.get():r)),nr(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const s=bE(this.props,n,this.presenceContext?.custom);s&&(r=s[t])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!nr(i)?i:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new Yk),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){uE.render(this.render)}}class PI extends nG{constructor(){super(...arguments),this.KeyframeResolver=Q7}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;nr(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function II(e,{style:t,vars:n},r,i){const s=e.style;let o;for(o in t)s[o]=t[o];i?.applyProjectionStyles(s,r);for(o in n)s.setProperty(o,n[o])}function rG(e){return window.getComputedStyle(e)}class iG extends PI{constructor(){super(...arguments),this.type="html",this.renderInstance=II}readValueFromInstance(t,n){if(Ac.has(n))return this.projection?.isProjecting?SC(n):y7(t,n);{const r=rG(t),i=(Qk(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return OI(t,n)}build(t,n,r){mE(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return xE(t,n,r)}}const BI=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function sG(e,t,n,r){II(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(BI.has(i)?i:vE(i),t.attrs[i])}class oG extends PI{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=ln}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Ac.has(n)){const r=cI(n);return r&&r.default||0}return n=BI.has(n)?n:vE(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return TI(t,n,r)}build(t,n,r){CI(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,i){sG(t,n,r,i)}mount(t){this.isSVGTag=EI(t.tagName),super.mount(t)}}const aG=(e,t)=>yE(e)?new oG(t):new iG(t,{allowProjection:e!==M.Fragment});function ic(e,t,n){const r=e.getProps();return bE(r,t,n!==void 0?n:r.custom,e)}const RC=e=>Array.isArray(e);function lG(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,cc(n))}function cG(e){return RC(e)?e[e.length-1]||0:e}function uG(e,t){const n=ic(e,t);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const l=cG(s[o]);lG(e,o,l)}}function dG(e){return!!(nr(e)&&e.add)}function jC(e,t){const n=e.getValue("willChange");if(dG(n))return n.add(t);if(!n&&Ps.WillChange){const r=new Ps.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function zI(e){return e.props[AI]}const fG=e=>e!==null;function hG(e,{repeat:t,repeatType:n="loop"},r){const i=e.filter(fG),s=t&&n!=="loop"&&t%2===1?0:i.length-1;return i[s]}const pG={type:"spring",stiffness:500,damping:25,restSpeed:10},mG=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),gG={type:"keyframes",duration:.8},yG={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},bG=(e,{keyframes:t})=>t.length>2?gG:Ac.has(e)?e.startsWith("scale")?mG(t[1]):pG:yG;function xG({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:l,from:u,elapsed:d,...h}){return!!Object.keys(h).length}const wE=(e,t,n,r={},i,s)=>o=>{const l=lE(r,e)||{},u=l.delay||r.delay||0;let{elapsed:d=0}=r;d=d-ts(u);const h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-d,onUpdate:g=>{t.set(g),l.onUpdate&&l.onUpdate(g)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:s?void 0:i};xG(l)||Object.assign(h,bG(e,h)),h.duration&&(h.duration=ts(h.duration)),h.repeatDelay&&(h.repeatDelay=ts(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let p=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(TC(h),h.delay===0&&(p=!0)),(Ps.instantAnimations||Ps.skipAnimations)&&(p=!0,TC(h),h.delay=0),h.allowFlatten=!l.type&&!l.ease,p&&!s&&t.get()!==void 0){const g=hG(h.keyframes,l);if(g!==void 0){Ht.update(()=>{h.onUpdate(g),h.onComplete()});return}}return l.isSync?new oE(h):new V7(h)};function vG({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function VI(e,t,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=e.getDefaultTransition(),transitionEnd:o,...l}=t;r&&(s=r);const u=[],d=i&&e.animationState&&e.animationState.getState()[i];for(const h in l){const p=e.getValue(h,e.latestValues[h]??null),g=l[h];if(g===void 0||d&&vG(d,h))continue;const b={delay:n,...lE(s||{},h)},v=p.get();if(v!==void 0&&!p.isAnimating&&!Array.isArray(g)&&g===v&&!b.velocity)continue;let S=!1;if(window.MotionHandoffAnimation){const k=zI(e);if(k){const T=window.MotionHandoffAnimation(k,h,Ht);T!==null&&(b.startTime=T,S=!0)}}jC(e,h),p.start(wE(h,p,g,e.shouldReduceMotion&&oI.has(h)?{type:!1}:b,e,S));const w=p.animation;w&&u.push(w)}return o&&Promise.all(u).then(()=>{Ht.update(()=>{o&&uG(e,o)})}),u}function qI(e,t,n,r=0,i=1){const s=Array.from(e).sort((d,h)=>d.sortNodePosition(h)).indexOf(t),o=e.size,l=(o-1)*r;return typeof n=="function"?n(s,o):i===1?s*r:l-s*r}function OC(e,t,n={}){const r=ic(e,t,n.type==="exit"?e.presenceContext?.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(VI(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(u=0)=>{const{delayChildren:d=0,staggerChildren:h,staggerDirection:p}=i;return wG(e,t,u,d,h,p,n)}:()=>Promise.resolve(),{when:l}=i;if(l){const[u,d]=l==="beforeChildren"?[s,o]:[o,s];return u().then(()=>d())}else return Promise.all([s(),o(n.delay)])}function wG(e,t,n=0,r=0,i=0,s=1,o){const l=[];for(const u of e.variantChildren)u.notify("AnimationStart",t),l.push(OC(u,t,{...o,delay:n+(typeof r=="function"?0:r)+qI(e.variantChildren,u,r,i,s)}).then(()=>u.notify("AnimationComplete",t)));return Promise.all(l)}function SG(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(s=>OC(e,s,n));r=Promise.all(i)}else if(typeof t=="string")r=OC(e,t,n);else{const i=typeof t=="function"?ic(e,t,n.custom):t;r=Promise.all(VI(e,i,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function HI(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const CG=pE.length;function FI(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?FI(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<CG;n++){const r=pE[n],i=e.props[r];(Sd(i)||i===!1)&&(t[r]=i)}return t}const kG=[...hE].reverse(),EG=hE.length;function NG(e){return t=>Promise.all(t.map(({animation:n,options:r})=>SG(e,n,r)))}function TG(e){let t=NG(e),n=c_(),r=!0;const i=u=>(d,h)=>{const p=ic(e,h,u==="exit"?e.presenceContext?.custom:void 0);if(p){const{transition:g,transitionEnd:b,...v}=p;d={...d,...v,...b}}return d};function s(u){t=u(e)}function o(u){const{props:d}=e,h=FI(e.parent)||{},p=[],g=new Set;let b={},v=1/0;for(let w=0;w<EG;w++){const k=kG[w],T=n[k],E=d[k]!==void 0?d[k]:h[k],N=Sd(E),A=k===u?T.isActive:null;A===!1&&(v=w);let _=E===h[k]&&E!==d[k]&&N;if(_&&r&&e.manuallyAnimateOnMount&&(_=!1),T.protectedKeys={...b},!T.isActive&&A===null||!E&&!T.prevProp||Bm(E)||typeof E=="boolean")continue;const j=AG(T.prevProp,E);let R=j||k===u&&T.isActive&&!_&&N||w>v&&N,I=!1;const B=Array.isArray(E)?E:[E];let U=B.reduce(i(k),{});A===!1&&(U={});const{prevResolvedValues:V={}}=T,F={...V,...U},L=q=>{R=!0,g.has(q)&&(I=!0,g.delete(q)),T.needsAnimating[q]=!0;const K=e.getValue(q);K&&(K.liveStyle=!1)};for(const q in F){const K=U[q],te=V[q];if(b.hasOwnProperty(q))continue;let z=!1;RC(K)&&RC(te)?z=!HI(K,te):z=K!==te,z?K!=null?L(q):g.add(q):K!==void 0&&g.has(q)?L(q):T.protectedKeys[q]=!0}T.prevProp=E,T.prevResolvedValues=U,T.isActive&&(b={...b,...U}),r&&e.blockInitialAnimation&&(R=!1);const H=_&&j;R&&(!H||I)&&p.push(...B.map(q=>{const K={type:k};if(typeof q=="string"&&r&&!H&&e.manuallyAnimateOnMount&&e.parent){const{parent:te}=e,z=ic(te,q);if(te.enteringChildren&&z){const{delayChildren:G}=z.transition||{};K.delay=qI(te.enteringChildren,e,G)}}return{animation:q,options:K}}))}if(g.size){const w={};if(typeof d.initial!="boolean"){const k=ic(e,Array.isArray(d.initial)?d.initial[0]:d.initial);k&&k.transition&&(w.transition=k.transition)}g.forEach(k=>{const T=e.getBaseTarget(k),E=e.getValue(k);E&&(E.liveStyle=!0),w[k]=T??null}),p.push({animation:w})}let S=!!p.length;return r&&(d.initial===!1||d.initial===d.animate)&&!e.manuallyAnimateOnMount&&(S=!1),r=!1,S?t(p):Promise.resolve()}function l(u,d){if(n[u].isActive===d)return Promise.resolve();e.variantChildren?.forEach(p=>p.animationState?.setActive(u,d)),n[u].isActive=d;const h=o(u);for(const p in n)n[p].protectedKeys={};return h}return{animateChanges:o,setActive:l,setAnimateFunction:s,getState:()=>n,reset:()=>{n=c_(),r=!0}}}function AG(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!HI(t,e):!1}function ma(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function c_(){return{animate:ma(!0),whileInView:ma(),whileHover:ma(),whileTap:ma(),whileDrag:ma(),whileFocus:ma(),exit:ma()}}class Fo{constructor(t){this.isMounted=!1,this.node=t}update(){}}class MG extends Fo{constructor(t){super(t),t.animationState||(t.animationState=TG(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Bm(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let _G=0;class DG extends Fo{constructor(){super(...arguments),this.id=_G++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t);n&&!t&&i.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const RG={animation:{Feature:MG},exit:{Feature:DG}};function kd(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function nf(e){return{point:{x:e.pageX,y:e.pageY}}}const jG=e=>t=>dE(t)&&e(t,nf(t));function td(e,t,n,r){return kd(e,t,jG(n),r)}const UI=1e-4,OG=1-UI,LG=1+UI,$I=.01,PG=0-$I,IG=0+$I;function ur(e){return e.max-e.min}function BG(e,t,n){return Math.abs(e-t)<=n}function u_(e,t,n,r=.5){e.origin=r,e.originPoint=Yt(t.min,t.max,e.origin),e.scale=ur(n)/ur(t),e.translate=Yt(n.min,n.max,e.origin)-e.originPoint,(e.scale>=OG&&e.scale<=LG||isNaN(e.scale))&&(e.scale=1),(e.translate>=PG&&e.translate<=IG||isNaN(e.translate))&&(e.translate=0)}function nd(e,t,n,r){u_(e.x,t.x,n.x,r?r.originX:void 0),u_(e.y,t.y,n.y,r?r.originY:void 0)}function d_(e,t,n){e.min=n.min+t.min,e.max=e.min+ur(t)}function zG(e,t,n){d_(e.x,t.x,n.x),d_(e.y,t.y,n.y)}function f_(e,t,n){e.min=t.min-n.min,e.max=e.min+ur(t)}function rd(e,t,n){f_(e.x,t.x,n.x),f_(e.y,t.y,n.y)}function ci(e){return[e("x"),e("y")]}const GI=({current:e})=>e?e.ownerDocument.defaultView:null,h_=(e,t)=>Math.abs(e-t);function VG(e,t){const n=h_(e.x,t.x),r=h_(e.y,t.y);return Math.sqrt(n**2+r**2)}class WI{constructor(t,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=X0(this.lastMoveEventInfo,this.history),b=this.startEvent!==null,v=VG(g.offset,{x:0,y:0})>=this.distanceThreshold;if(!b&&!v)return;const{point:S}=g,{timestamp:w}=$n;this.history.push({...S,timestamp:w});const{onStart:k,onMove:T}=this.handlers;b||(k&&k(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,g)},this.handlePointerMove=(g,b)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=Y0(b,this.transformPagePoint),Ht.update(this.updatePoint,!0)},this.handlePointerUp=(g,b)=>{this.end();const{onEnd:v,onSessionEnd:S,resumeAnimation:w}=this.handlers;if(this.dragSnapToOrigin&&w&&w(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const k=X0(g.type==="pointercancel"?this.lastMoveEventInfo:Y0(b,this.transformPagePoint),this.history);this.startEvent&&v&&v(g,k),S&&S(g,k)},!dE(t))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const l=nf(t),u=Y0(l,this.transformPagePoint),{point:d}=u,{timestamp:h}=$n;this.history=[{...d,timestamp:h}];const{onSessionStart:p}=n;p&&p(t,X0(u,this.history)),this.removeListeners=Jd(td(this.contextWindow,"pointermove",this.handlePointerMove),td(this.contextWindow,"pointerup",this.handlePointerUp),td(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),zo(this.updatePoint)}}function Y0(e,t){return t?{point:t(e.point)}:e}function p_(e,t){return{x:e.x-t.x,y:e.y-t.y}}function X0({point:e},t){return{point:e,delta:p_(e,KI(t)),offset:p_(e,qG(t)),velocity:HG(t,.1)}}function qG(e){return e[0]}function KI(e){return e[e.length-1]}function HG(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=KI(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>ts(t)));)n--;if(!r)return{x:0,y:0};const s=hi(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function FG(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Yt(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Yt(n,e,r.max):Math.min(e,n)),e}function m_(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function UG(e,{top:t,left:n,bottom:r,right:i}){return{x:m_(e.x,n,i),y:m_(e.y,t,r)}}function g_(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function $G(e,t){return{x:g_(e.x,t.x),y:g_(e.y,t.y)}}function GG(e,t){let n=.5;const r=ur(e),i=ur(t);return i>r?n=xd(t.min,t.max-r,e.min):r>i&&(n=xd(e.min,e.max-i,t.min)),Ls(0,1,n)}function WG(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const LC=.35;function KG(e=LC){return e===!1?e=0:e===!0&&(e=LC),{x:y_(e,"left","right"),y:y_(e,"top","bottom")}}function y_(e,t,n){return{min:b_(e,t),max:b_(e,n)}}function b_(e,t){return typeof e=="number"?e:e[t]||0}const YG=new WeakMap;class XG{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=ln(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=p=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(nf(p).point)},o=(p,g)=>{const{drag:b,dragPropagation:v,onDragStart:S}=this.getProps();if(b&&!v&&(this.openDragLock&&this.openDragLock(),this.openDragLock=n$(b),!this.openDragLock))return;this.latestPointerEvent=p,this.latestPanInfo=g,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),ci(k=>{let T=this.getAxisMotionValue(k).get()||0;if(ns.test(T)){const{projection:E}=this.visualElement;if(E&&E.layout){const N=E.layout.layoutBox[k];N&&(T=ur(N)*(parseFloat(T)/100))}}this.originPoint[k]=T}),S&&Ht.postRender(()=>S(p,g)),jC(this.visualElement,"transform");const{animationState:w}=this.visualElement;w&&w.setActive("whileDrag",!0)},l=(p,g)=>{this.latestPointerEvent=p,this.latestPanInfo=g;const{dragPropagation:b,dragDirectionLock:v,onDirectionLock:S,onDrag:w}=this.getProps();if(!b&&!this.openDragLock)return;const{offset:k}=g;if(v&&this.currentDirection===null){this.currentDirection=ZG(k),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",g.point,k),this.updateAxis("y",g.point,k),this.visualElement.render(),w&&w(p,g)},u=(p,g)=>{this.latestPointerEvent=p,this.latestPanInfo=g,this.stop(p,g),this.latestPointerEvent=null,this.latestPanInfo=null},d=()=>ci(p=>this.getAnimationState(p)==="paused"&&this.getAxisMotionValue(p).animation?.play()),{dragSnapToOrigin:h}=this.getProps();this.panSession=new WI(t,{onSessionStart:s,onStart:o,onMove:l,onSessionEnd:u,resumeAnimation:d},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:r,contextWindow:GI(this.visualElement)})}stop(t,n){const r=t||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&Ht.postRender(()=>l(r,i))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:i}=this.getProps();if(!r||!jh(t,i,this.currentDirection))return;const s=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=FG(o,this.constraints[t],this.elastic[t])),s.set(o)}resolveConstraints(){const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;t&&Zl(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=UG(r.layoutBox,t):this.constraints=!1,this.elastic=KG(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&ci(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=WG(r.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!Zl(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=Q$(r,i.root,this.visualElement.getTransformPagePoint());let o=$G(i.layout.layoutBox,s);if(n){const l=n(Y$(o));this.hasMutatedConstraints=!!l,l&&(o=DI(l))}return o}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),u=this.constraints||{},d=ci(h=>{if(!jh(h,n,this.currentDirection))return;let p=u&&u[h]||{};o&&(p={min:0,max:0});const g=i?200:1e6,b=i?40:1e7,v={type:"inertia",velocity:r?t[h]:0,bounceStiffness:g,bounceDamping:b,timeConstant:750,restDelta:1,restSpeed:10,...s,...p};return this.startAxisValueAnimation(h,v)});return Promise.all(d).then(l)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return jC(this.visualElement,t),r.start(wE(t,r,0,n,this.visualElement,!1))}stopAnimation(){ci(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){ci(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){ci(n=>{const{drag:r}=this.getProps();if(!jh(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:l}=i.layout.layoutBox[n];s.set(t[n]-Yt(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!Zl(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};ci(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const u=l.get();i[o]=GG({min:u,max:u},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),ci(o=>{if(!jh(o,t,null))return;const l=this.getAxisMotionValue(o),{min:u,max:d}=this.constraints[o];l.set(Yt(u,d,i[o]))})}addListeners(){if(!this.visualElement.current)return;YG.set(this.visualElement,this);const t=this.visualElement.current,n=td(t,"pointerdown",u=>{const{drag:d,dragListener:h=!0}=this.getProps();d&&h&&this.start(u)}),r=()=>{const{dragConstraints:u}=this.getProps();Zl(u)&&u.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),Ht.read(r);const o=kd(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",(({delta:u,hasLayoutChanged:d})=>{this.isDragging&&d&&(ci(h=>{const p=this.getAxisMotionValue(h);p&&(this.originPoint[h]+=u[h].translate,p.set(p.get()+u[h].translate))}),this.visualElement.render())}));return()=>{o(),n(),s(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=LC,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:l}}}function jh(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function ZG(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class QG extends Fo{constructor(t){super(t),this.removeGroupControls=pi,this.removeListeners=pi,this.controls=new XG(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||pi}unmount(){this.removeGroupControls(),this.removeListeners()}}const x_=e=>(t,n)=>{e&&Ht.postRender(()=>e(t,n))};class JG extends Fo{constructor(){super(...arguments),this.removePointerDownListener=pi}onPointerDown(t){this.session=new WI(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:GI(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:x_(t),onStart:x_(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&Ht.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=td(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const ap={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function v_(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const Ru={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Ge.test(e))e=parseFloat(e);else return e;const n=v_(e,t.target.x),r=v_(e,t.target.y);return`${n}% ${r}%`}},eW={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,i=Vo.parse(e);if(i.length>5)return r;const s=Vo.createTransformer(e),o=typeof i[0]!="number"?1:0,l=n.x.scale*t.x,u=n.y.scale*t.y;i[0+o]/=l,i[1+o]/=u;const d=Yt(l,u,.5);return typeof i[2+o]=="number"&&(i[2+o]/=d),typeof i[3+o]=="number"&&(i[3+o]/=d),s(i)}};let Z0=!1;class tW extends M.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=t;C$(nW),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),Z0&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),ap.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,Z0=!0,i||t.layoutDependency!==n||n===void 0||t.isPresent!==s?o.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?o.promote():o.relegate()||Ht.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),uE.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=t;Z0=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function YI(e){const[t,n]=yI(),r=M.useContext(Hk);return m.jsx(tW,{...e,layoutGroup:r,switchLayoutGroup:M.useContext(MI),isPresent:t,safeToRemove:n})}const nW={borderRadius:{...Ru,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:Ru,borderTopRightRadius:Ru,borderBottomLeftRadius:Ru,borderBottomRightRadius:Ru,boxShadow:eW};function rW(e,t,n){const r=nr(e)?e:cc(e);return r.start(wE("",r,t,n)),r.animation}const iW=(e,t)=>e.depth-t.depth;class sW{constructor(){this.children=[],this.isDirty=!1}add(t){$k(this.children,t),this.isDirty=!0}remove(t){Gk(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(iW),this.isDirty=!1,this.children.forEach(t)}}function oW(e,t){const n=Cr.now(),r=({timestamp:i})=>{const s=i-n;s>=t&&(zo(r),e(s-t))};return Ht.setup(r,!0),()=>zo(r)}const XI=["TopLeft","TopRight","BottomLeft","BottomRight"],aW=XI.length,w_=e=>typeof e=="string"?parseFloat(e):e,S_=e=>typeof e=="number"||Ge.test(e);function lW(e,t,n,r,i,s){i?(e.opacity=Yt(0,n.opacity??1,cW(r)),e.opacityExit=Yt(t.opacity??1,0,uW(r))):s&&(e.opacity=Yt(t.opacity??1,n.opacity??1,r));for(let o=0;o<aW;o++){const l=`border${XI[o]}Radius`;let u=C_(t,l),d=C_(n,l);if(u===void 0&&d===void 0)continue;u||(u=0),d||(d=0),u===0||d===0||S_(u)===S_(d)?(e[l]=Math.max(Yt(w_(u),w_(d),r),0),(ns.test(d)||ns.test(u))&&(e[l]+="%")):e[l]=d}(t.rotate||n.rotate)&&(e.rotate=Yt(t.rotate||0,n.rotate||0,r))}function C_(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const cW=ZI(0,.5,IP),uW=ZI(.5,.95,pi);function ZI(e,t,n){return r=>r<e?0:r>t?1:n(xd(e,t,r))}function k_(e,t){e.min=t.min,e.max=t.max}function ai(e,t){k_(e.x,t.x),k_(e.y,t.y)}function E_(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function N_(e,t,n,r,i){return e-=t,e=Np(e,1/n,r),i!==void 0&&(e=Np(e,1/i,r)),e}function dW(e,t=0,n=1,r=.5,i,s=e,o=e){if(ns.test(t)&&(t=parseFloat(t),t=Yt(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=Yt(s.min,s.max,r);e===s&&(l-=t),e.min=N_(e.min,t,n,l,i),e.max=N_(e.max,t,n,l,i)}function T_(e,t,[n,r,i],s,o){dW(e,t[n],t[r],t[i],t.scale,s,o)}const fW=["x","scaleX","originX"],hW=["y","scaleY","originY"];function A_(e,t,n,r){T_(e.x,t,fW,n?n.x:void 0,r?r.x:void 0),T_(e.y,t,hW,n?n.y:void 0,r?r.y:void 0)}function M_(e){return e.translate===0&&e.scale===1}function QI(e){return M_(e.x)&&M_(e.y)}function __(e,t){return e.min===t.min&&e.max===t.max}function pW(e,t){return __(e.x,t.x)&&__(e.y,t.y)}function D_(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function JI(e,t){return D_(e.x,t.x)&&D_(e.y,t.y)}function R_(e){return ur(e.x)/ur(e.y)}function j_(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class mW{constructor(){this.members=[]}add(t){$k(this.members,t),t.scheduleRender()}remove(t){if(Gk(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function gW(e,t,n){let r="";const i=e.x.translate/t.x,s=e.y.translate/t.y,o=n?.z||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:d,rotate:h,rotateX:p,rotateY:g,skewX:b,skewY:v}=n;d&&(r=`perspective(${d}px) ${r}`),h&&(r+=`rotate(${h}deg) `),p&&(r+=`rotateX(${p}deg) `),g&&(r+=`rotateY(${g}deg) `),b&&(r+=`skewX(${b}deg) `),v&&(r+=`skewY(${v}deg) `)}const l=e.x.scale*t.x,u=e.y.scale*t.y;return(l!==1||u!==1)&&(r+=`scale(${l}, ${u})`),r||"none"}const Q0=["","X","Y","Z"],yW=1e3;let bW=0;function J0(e,t,n,r){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function e6(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=zI(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",Ht,!(i||s))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&e6(r)}function t6({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},l=t?.()){this.id=bW++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(wW),this.nodes.forEach(EW),this.nodes.forEach(NW),this.nodes.forEach(SW)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let u=0;u<this.path.length;u++)this.path[u].shouldResetTransform=!0;this.root===this&&(this.nodes=new sW)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new Yk),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const u=this.eventHandlers.get(o);u&&u.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=gI(o)&&!l$(o),this.instance=o;const{layoutId:l,layout:u,visualElement:d}=this.options;if(d&&!d.current&&d.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(u||l)&&(this.isLayoutDirty=!0),e){let h,p=0;const g=()=>this.root.updateBlockedByResize=!1;Ht.read(()=>{p=window.innerWidth}),e(o,()=>{const b=window.innerWidth;b!==p&&(p=b,this.root.updateBlockedByResize=!0,h&&h(),h=oW(g,250),ap.hasAnimatedSinceResize&&(ap.hasAnimatedSinceResize=!1,this.nodes.forEach(P_)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&d&&(l||u)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:p,hasRelativeLayoutChanged:g,layout:b})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const v=this.options.transition||d.getDefaultTransition()||DW,{onLayoutAnimationStart:S,onLayoutAnimationComplete:w}=d.getProps(),k=!this.targetLayout||!JI(this.targetLayout,b),T=!p&&g;if(this.options.layoutRoot||this.resumeFrom||T||p&&(k||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const E={...lE(v,"layout"),onPlay:S,onComplete:w};(d.shouldReduceMotion||this.options.layoutRoot)&&(E.delay=0,E.type=!1),this.startAnimation(E),this.setAnimationOrigin(h,T)}else p||P_(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=b})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),zo(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(TW),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&e6(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const p=this.path[h];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:l,layout:u}=this.options;if(l===void 0&&!u)return;const d=this.getTransformTemplate();this.prevTransformTemplateValue=d?d(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(O_);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach(L_);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(kW),this.nodes.forEach(xW),this.nodes.forEach(vW)):this.nodes.forEach(L_),this.clearAllSnapshots();const l=Cr.now();$n.delta=Ls(0,1e3/60,l-$n.timestamp),$n.timestamp=l,$n.isProcessing=!0,q0.update.process($n),q0.preRender.process($n),q0.render.process($n),$n.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,uE.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(CW),this.sharedNodes.forEach(AW)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Ht.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Ht.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ur(this.snapshot.measuredBox.x)&&!ur(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let u=0;u<this.path.length;u++)this.path[u].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=ln(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const u=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:u,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:u}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!QI(this.projectionDelta),u=this.getTransformTemplate(),d=u?u(this.latestValues,""):void 0,h=d!==this.prevTransformTemplateValue;o&&this.instance&&(l||ba(this.latestValues)||h)&&(i(this.instance,d),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let u=this.removeElementScroll(l);return o&&(u=this.removeTransform(u)),RW(u),{animationId:this.root.animationId,measuredBox:l,layoutBox:u,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return ln();const l=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(jW))){const{scroll:d}=this.root;d&&(Ql(l.x,d.offset.x),Ql(l.y,d.offset.y))}return l}removeElementScroll(o){const l=ln();if(ai(l,o),this.scroll?.wasRoot)return l;for(let u=0;u<this.path.length;u++){const d=this.path[u],{scroll:h,options:p}=d;d!==this.root&&h&&p.layoutScroll&&(h.wasRoot&&ai(l,o),Ql(l.x,h.offset.x),Ql(l.y,h.offset.y))}return l}applyTransform(o,l=!1){const u=ln();ai(u,o);for(let d=0;d<this.path.length;d++){const h=this.path[d];!l&&h.options.layoutScroll&&h.scroll&&h!==h.root&&Jl(u,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),ba(h.latestValues)&&Jl(u,h.latestValues)}return ba(this.latestValues)&&Jl(u,this.latestValues),u}removeTransform(o){const l=ln();ai(l,o);for(let u=0;u<this.path.length;u++){const d=this.path[u];if(!d.instance||!ba(d.latestValues))continue;MC(d.latestValues)&&d.updateSnapshot();const h=ln(),p=d.measurePageBox();ai(h,p),A_(l,d.latestValues,d.snapshot?d.snapshot.layoutBox:void 0,h)}return ba(this.latestValues)&&A_(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==$n.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const u=!!this.resumingFrom||this!==l;if(!(o||u&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:p}=this.options;if(!(!this.layout||!(h||p))){if(this.resolvedRelativeTargetAt=$n.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ln(),this.relativeTargetOrigin=ln(),rd(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),ai(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=ln(),this.targetWithTransforms=ln()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),zG(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):ai(this.target,this.layout.layoutBox),jI(this.target,this.targetDelta)):ai(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=ln(),this.relativeTargetOrigin=ln(),rd(this.relativeTargetOrigin,this.target,g.target),ai(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||MC(this.parent.latestValues)||RI(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const o=this.getLead(),l=!!this.resumingFrom||this!==o;let u=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(u=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(u=!1),this.resolvedRelativeTargetAt===$n.timestamp&&(u=!1),u)return;const{layout:d,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(d||h))return;ai(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,g=this.treeScale.y;Z$(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=ln());const{target:b}=o;if(!b){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(E_(this.prevProjectionDelta.x,this.projectionDelta.x),E_(this.prevProjectionDelta.y,this.projectionDelta.y)),nd(this.projectionDelta,this.layoutCorrected,b,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==g||!j_(this.projectionDelta.x,this.prevProjectionDelta.x)||!j_(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",b))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=ec(),this.projectionDelta=ec(),this.projectionDeltaWithTransform=ec()}setAnimationOrigin(o,l=!1){const u=this.snapshot,d=u?u.latestValues:{},h={...this.latestValues},p=ec();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const g=ln(),b=u?u.source:void 0,v=this.layout?this.layout.source:void 0,S=b!==v,w=this.getStack(),k=!w||w.members.length<=1,T=!!(S&&!k&&this.options.crossfade===!0&&!this.path.some(_W));this.animationProgress=0;let E;this.mixTargetDelta=N=>{const A=N/1e3;I_(p.x,o.x,A),I_(p.y,o.y,A),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(rd(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),MW(this.relativeTarget,this.relativeTargetOrigin,g,A),E&&pW(this.relativeTarget,E)&&(this.isProjectionDirty=!1),E||(E=ln()),ai(E,this.relativeTarget)),S&&(this.animationValues=h,lW(h,d,this.latestValues,A,T,k)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=A},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(zo(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Ht.update(()=>{ap.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=cc(0)),this.currentAnimation=rW(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(yW),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:u,layout:d,latestValues:h}=o;if(!(!l||!u||!d)){if(this!==o&&this.layout&&d&&n6(this.options.animationType,this.layout.layoutBox,d.layoutBox)){u=this.target||ln();const p=ur(this.layout.layoutBox.x);u.x.min=o.target.x.min,u.x.max=u.x.min+p;const g=ur(this.layout.layoutBox.y);u.y.min=o.target.y.min,u.y.max=u.y.min+g}ai(l,u),Jl(l,h),nd(this.projectionDeltaWithTransform,this.layoutCorrected,l,h)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new mW),this.sharedNodes.get(o).add(l);const d=l.options.initialPromotionConfig;l.promote({transition:d?d.transition:void 0,preserveFollowOpacity:d&&d.shouldPreserveFollowOpacity?d.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:u}={}){const d=this.getStack();d&&d.promote(this,u),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:u}=o;if((u.z||u.rotate||u.rotateX||u.rotateY||u.rotateZ||u.skewX||u.skewY)&&(l=!0),!l)return;const d={};u.z&&J0("z",o,d,this.animationValues);for(let h=0;h<Q0.length;h++)J0(`rotate${Q0[h]}`,o,d,this.animationValues),J0(`skew${Q0[h]}`,o,d,this.animationValues);o.render();for(const h in d)o.setStaticValue(h,d[h]),this.animationValues&&(this.animationValues[h]=d[h]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const u=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=op(l?.pointerEvents)||"",o.transform=u?u(this.latestValues,""):"none";return}const d=this.getLead();if(!this.projectionDelta||!this.layout||!d.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=op(l?.pointerEvents)||""),this.hasProjected&&!ba(this.latestValues)&&(o.transform=u?u({},""):"none",this.hasProjected=!1);return}o.visibility="";const h=d.animationValues||d.latestValues;this.applyTransformsToTarget();let p=gW(this.projectionDeltaWithTransform,this.treeScale,h);u&&(p=u(h,p)),o.transform=p;const{x:g,y:b}=this.projectionDelta;o.transformOrigin=`${g.origin*100}% ${b.origin*100}% 0`,d.animationValues?o.opacity=d===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:o.opacity=d===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const v in Cd){if(h[v]===void 0)continue;const{correct:S,applyTo:w,isCSSVariable:k}=Cd[v],T=p==="none"?h[v]:S(h[v],d);if(w){const E=w.length;for(let N=0;N<E;N++)o[w[N]]=T}else k?this.options.visualElement.renderState.vars[v]=T:o[v]=T}this.options.layoutId&&(o.pointerEvents=d===this?op(l?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(O_),this.root.sharedNodes.clear()}}}function xW(e){e.updateLayout()}function vW(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=e.layout,{animationType:i}=e.options,s=t.source!==e.layout.source;i==="size"?ci(h=>{const p=s?t.measuredBox[h]:t.layoutBox[h],g=ur(p);p.min=n[h].min,p.max=p.min+g}):n6(i,t.layoutBox,n)&&ci(h=>{const p=s?t.measuredBox[h]:t.layoutBox[h],g=ur(n[h]);p.max=p.min+g,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+g)});const o=ec();nd(o,n,t.layoutBox);const l=ec();s?nd(l,e.applyTransform(r,!0),t.measuredBox):nd(l,n,t.layoutBox);const u=!QI(o);let d=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:g}=h;if(p&&g){const b=ln();rd(b,t.layoutBox,p.layoutBox);const v=ln();rd(v,n,g.layoutBox),JI(b,v)||(d=!0),h.options.layoutRoot&&(e.relativeTarget=v,e.relativeTargetOrigin=b,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:l,layoutDelta:o,hasLayoutChanged:u,hasRelativeLayoutChanged:d})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function wW(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function SW(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function CW(e){e.clearSnapshot()}function O_(e){e.clearMeasurements()}function L_(e){e.isLayoutDirty=!1}function kW(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function P_(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function EW(e){e.resolveTargetDelta()}function NW(e){e.calcProjection()}function TW(e){e.resetSkewAndRotation()}function AW(e){e.removeLeadSnapshot()}function I_(e,t,n){e.translate=Yt(t.translate,0,n),e.scale=Yt(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function B_(e,t,n,r){e.min=Yt(t.min,n.min,r),e.max=Yt(t.max,n.max,r)}function MW(e,t,n,r){B_(e.x,t.x,n.x,r),B_(e.y,t.y,n.y,r)}function _W(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const DW={duration:.45,ease:[.4,0,.1,1]},z_=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),V_=z_("applewebkit/")&&!z_("chrome/")?Math.round:pi;function q_(e){e.min=V_(e.min),e.max=V_(e.max)}function RW(e){q_(e.x),q_(e.y)}function n6(e,t,n){return e==="position"||e==="preserve-aspect"&&!BG(R_(t),R_(n),.2)}function jW(e){return e!==e.root&&e.scroll?.wasRoot}const OW=t6({attachResizeListener:(e,t)=>kd(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),eb={current:void 0},r6=t6({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!eb.current){const e=new OW({});e.mount(window),e.setOptions({layoutScroll:!0}),eb.current=e}return eb.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),LW={pan:{Feature:JG},drag:{Feature:QG,ProjectionNode:r6,MeasureLayout:YI}};function H_(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&Ht.postRender(()=>s(t,nf(t)))}class PW extends Fo{mount(){const{current:t}=this.node;t&&(this.unmount=r$(t,(n,r)=>(H_(this.node,r,"Start"),i=>H_(this.node,i,"End"))))}unmount(){}}class IW extends Fo{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Jd(kd(this.node.current,"focus",()=>this.onFocus()),kd(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function F_(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&Ht.postRender(()=>s(t,nf(t)))}class BW extends Fo{mount(){const{current:t}=this.node;t&&(this.unmount=a$(t,(n,r)=>(F_(this.node,r,"Start"),(i,{success:s})=>F_(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const PC=new WeakMap,tb=new WeakMap,zW=e=>{const t=PC.get(e.target);t&&t(e)},VW=e=>{e.forEach(zW)};function qW({root:e,...t}){const n=e||document;tb.has(n)||tb.set(n,{});const r=tb.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(VW,{root:e,...t})),r[i]}function HW(e,t,n){const r=qW(t);return PC.set(e,n),r.observe(e),()=>{PC.delete(e),r.unobserve(e)}}const FW={some:0,all:1};class UW extends Fo{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=t,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:FW[i]},l=u=>{const{isIntersecting:d}=u;if(this.isInView===d||(this.isInView=d,s&&!d&&this.hasEnteredView))return;d&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",d);const{onViewportEnter:h,onViewportLeave:p}=this.node.getProps(),g=d?h:p;g&&g(u)};return HW(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some($W(t,n))&&this.startObserver()}unmount(){}}function $W({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const GW={inView:{Feature:UW},tap:{Feature:BW},focus:{Feature:IW},hover:{Feature:PW}},WW={layout:{ProjectionNode:r6,MeasureLayout:YI}},KW={...RG,...GW,...LW,...WW},ft=K$(KW,aG);function YW(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"},child:[]}]})(e)}function fc(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(e)}function Vm(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"},child:[]}]})(e)}function XW(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M20 2H4c-1.1 0-1.99.9-1.99 2L2 22l4-4h14c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zM6 9h12v2H6V9zm8 5H6v-2h8v2zm4-6H6V6h12v2z"},child:[]}]})(e)}function IC(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"},child:[]}]})(e)}function ZW(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18.4 10.6C16.55 8.99 14.15 8 11.5 8c-4.65 0-8.58 3.03-9.96 7.22L3.9 16a8.002 8.002 0 0 1 7.6-5.5c1.95 0 3.73.72 5.12 1.88L13 16h9V7l-3.6 3.6z"},child:[]}]})(e)}function QW(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12.5 8c-2.65 0-5.05.99-6.9 2.6L2 7v9h9l-3.62-3.62c1.39-1.16 3.16-1.88 5.12-1.88 3.54 0 6.55 2.31 7.6 5.5l2.37-.78C21.08 11.03 17.15 8 12.5 8z"},child:[]}]})(e)}function JW(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M11.99 2C6.47 2 2 6.48 2 12s4.47 10 9.99 10C17.52 22 22 17.52 22 12S17.52 2 11.99 2zM12 20c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"},child:[]},{tag:"path",attr:{d:"M12.5 7H11v6l5.25 3.15.75-1.23-4.5-2.67z"},child:[]}]})(e)}function eK(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z"},child:[]}]})(e)}function tK(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z"},child:[]}]})(e)}function nK(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z"},child:[]}]})(e)}function rK(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z"},child:[]}]})(e)}function iK(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z"},child:[]}]})(e)}function sK(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"},child:[]}]})(e)}function oK(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"},child:[]}]})(e)}function aK(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"},child:[]}]})(e)}function lK(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"},child:[]}]})(e)}function cK(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 20h14v-2H5v2zM19 9h-4V3H9v6H5l7 7 7-7z"},child:[]}]})(e)}function uK(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 20h14v-2H5v2zm0-10h4v6h6v-6h4l-7-7-7 7z"},child:[]}]})(e)}function hc(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"},child:[]}]})(e)}function dK(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"},child:[]}]})(e)}function i6(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"},child:[]}]})(e)}function fK(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"},child:[]}]})(e)}function hK(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"},child:[]}]})(e)}function pK(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 4V1L8 5l4 4V6c3.31 0 6 2.69 6 6 0 1.01-.25 1.97-.7 2.8l1.46 1.46A7.93 7.93 0 0 0 20 12c0-4.42-3.58-8-8-8zm0 14c-3.31 0-6-2.69-6-6 0-1.01.25-1.97.7-2.8L5.24 7.74A7.93 7.93 0 0 0 4 12c0 4.42 3.58 8 8 8v3l4-4-4-4v3z"},child:[]}]})(e)}function mK(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M24 .01c0-.01 0-.01 0 0L0 0v24h24V.01zM0 0h24v24H0V0zm0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M22.99 9C19.15 5.16 13.8 3.76 8.84 4.78l2.52 2.52c3.47-.17 6.99 1.05 9.63 3.7l2-2zm-4 4a9.793 9.793 0 0 0-4.49-2.56l3.53 3.53.96-.97zM2 3.05 5.07 6.1C3.6 6.82 2.22 7.78 1 9l1.99 2c1.24-1.24 2.67-2.16 4.2-2.77l2.24 2.24A9.684 9.684 0 0 0 5 13v.01L6.99 15a7.042 7.042 0 0 1 4.92-2.06L18.98 20l1.27-1.26L3.29 1.79 2 3.05zM9 17l3 3 3-3a4.237 4.237 0 0 0-6 0z"},child:[]}]})(e)}function gK(e){return at({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16 11c1.66 0 2.99-1.34 2.99-3S17.66 5 16 5c-1.66 0-3 1.34-3 3s1.34 3 3 3zm-8 0c1.66 0 2.99-1.34 2.99-3S9.66 5 8 5C6.34 5 5 6.34 5 8s1.34 3 3 3zm0 2c-2.33 0-7 1.17-7 3.5V19h14v-2.5c0-2.33-4.67-3.5-7-3.5zm8 0c-.29 0-.62.02-.97.05 1.16.84 1.97 1.97 1.97 3.45V19h6v-2.5c0-2.33-4.67-3.5-7-3.5z"},child:[]}]})(e)}const qm=({isOpen:e,onClose:t,onLogin:n,onSignup:r,onGoogleLogin:i})=>{const[s,o]=M.useState("login"),[l,u]=M.useState(""),[d,h]=M.useState(""),[p,g]=M.useState(""),[b,v]=M.useState(""),[S,w]=M.useState(!1),[k,T]=M.useState(!1);M.useEffect(()=>{const _=()=>{const I=window.matchMedia("(prefers-color-scheme: dark)").matches||document.documentElement.classList.contains("dark");T(I)};_();const j=window.matchMedia("(prefers-color-scheme: dark)"),R=new MutationObserver(_);return j.addEventListener("change",_),R.observe(document.documentElement,{attributes:!0,attributeFilter:["class"]}),()=>{j.removeEventListener("change",_),R.disconnect()}},[]);const E=M.useCallback(async _=>{if(i){w(!0),v("");try{await i(_.credential),t()}catch(j){v(j instanceof Error?j.message:"Google authentication failed")}finally{w(!1)}}},[i,t]);M.useEffect(()=>{if(!e||!i)return;const _=document.createElement("script");return _.src="https://accounts.google.com/gsi/client",_.async=!0,_.defer=!0,document.body.appendChild(_),_.onload=()=>{window.google&&(window.google.accounts.id.initialize({client_id:"298068869246-l775qmuuledbg8fnlmli423kks90a62g.apps.googleusercontent.com",callback:E}),window.google.accounts.id.renderButton(document.getElementById("google-signin-button"),{theme:k?"filled_black":"outline",size:"large",width:400,text:s==="login"?"signin_with":"signup_with",shape:"rectangular",logo_alignment:"left"}))},()=>{document.body.contains(_)&&document.body.removeChild(_)}},[e,s,i,E,k]);const N=async _=>{_.preventDefault(),v(""),w(!0);try{s==="login"?await n(l,d):await r(l,d,p||void 0),t(),u(""),h(""),g("")}catch(j){v(j instanceof Error?j.message:"Authentication failed")}finally{w(!1)}},A=()=>{o(_=>_==="login"?"signup":"login"),v("")};return e?m.jsx(uc,{children:e&&m.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:m.jsxs(ft.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},transition:{duration:.2},className:"bg-surface rounded-2xl shadow-2xl p-8 max-w-md w-full border border-theme/10",onClick:_=>_.stopPropagation(),children:[m.jsxs("div",{className:"flex items-center justify-between mb-6",children:[m.jsx("h2",{className:"text-2xl font-bold text-theme",children:s==="login"?"Welcome Back":"Create Account"}),m.jsx("button",{type:"button",onClick:t,className:"p-2 text-muted hover:text-theme hover:bg-[var(--bg-hover)] rounded-md transition-colors","aria-label":"Close",children:m.jsx(hc,{className:"h-5 w-5"})})]}),m.jsx("p",{className:"text-muted mb-6",children:s==="login"?"Sign in to save and manage your designs":"Create an account to start saving your work"}),b&&m.jsx("div",{className:"mb-4 p-3 bg-red-100 dark:bg-red-900/20 border border-red-300 dark:border-red-700 rounded-lg text-red-800 dark:text-red-200 text-sm",children:b}),i&&m.jsxs(m.Fragment,{children:[m.jsx("div",{id:"google-signin-button",className:"flex justify-center mb-4"}),m.jsxs("div",{className:"relative my-6",children:[m.jsx("div",{className:"absolute inset-0 flex items-center",children:m.jsx("div",{className:"w-full border-t border-theme/20"})}),m.jsx("div",{className:"relative flex justify-center text-sm",children:m.jsx("span",{className:"px-2 bg-surface text-muted",children:"Or continue with email"})})]})]}),m.jsxs("form",{onSubmit:N,className:"space-y-4",children:[s==="signup"&&m.jsxs("div",{children:[m.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-theme mb-2",children:"Name (optional)"}),m.jsx("input",{id:"name",type:"text",value:p,onChange:_=>g(_.target.value),className:"w-full px-4 py-2 bg-theme/5 border border-theme/20 rounded-lg text-theme placeholder-muted focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent",placeholder:"John Doe"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-theme mb-2",children:"Email"}),m.jsx("input",{id:"email",type:"email",value:l,onChange:_=>u(_.target.value),required:!0,className:"w-full px-4 py-2 bg-theme/5 border border-theme/20 rounded-lg text-theme placeholder-muted focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent",placeholder:"you@example.com"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-theme mb-2",children:"Password"}),m.jsx("input",{id:"password",type:"password",value:d,onChange:_=>h(_.target.value),required:!0,minLength:6,className:"w-full px-4 py-2 bg-theme/5 border border-theme/20 rounded-lg text-theme placeholder-muted focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent",placeholder:""}),s==="signup"&&m.jsx("p",{className:"mt-1 text-xs text-muted",children:"Minimum 6 characters"})]}),m.jsx("button",{type:"submit",disabled:S,className:"w-full px-6 py-3 bg-[var(--brand)] text-white font-bold rounded-lg hover:brightness-95 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:S?"Please wait...":s==="login"?"Sign In":"Create Account"})]}),m.jsx("div",{className:"mt-6 text-center",children:m.jsxs("p",{className:"text-muted text-sm",children:[s==="login"?"Don't have an account?":"Already have an account?"," ",m.jsx("button",{type:"button",onClick:A,className:"text-[var(--brand)] font-medium hover:underline",children:s==="login"?"Sign up":"Sign in"})]})}),m.jsx("div",{className:"mt-6 p-3 bg-theme/5 rounded-lg",children:m.jsx("p",{className:"text-xs text-muted text-center",children:" Your designs are securely stored and only accessible to you"})})]})})}):null},U_=()=>{Xa();const e=Xd(),[t,n]=M.useState(!1),[r,i]=M.useState(!1),{user:s,isAuthenticated:o,login:l,signup:u,googleLogin:d,logout:h}=Lm(),[p,g]=M.useState(!1),[b,v]=M.useState(!1),[S,w]=M.useState([]),[k,T]=M.useState(!1);M.useEffect(()=>{n(!0)},[]),M.useEffect(()=>{const R=()=>{i(window.scrollY>100)};return window.addEventListener("scroll",R),()=>window.removeEventListener("scroll",R)},[]),M.useEffect(()=>{(async()=>{if(!o){w([]);return}T(!0);try{const I=await tn.getUserDiagrams();w(I)}catch(I){console.error("Failed to load diagrams:",I)}finally{T(!1)}})()},[o]);const E=R=>{e(`/playground/free?diagramId=${R}`)},N=[{icon:"",title:"Practice Problems",description:"Master system design through curated problems with real-world scenarios",action:"Browse Problems",route:"/problems",gradient:"from-blue-500 to-cyan-500"},{icon:"",title:"Design Studio",description:"Create system designs, ER diagrams, and UML diagrams from scratch. Perfect for planning your next project",action:"Start Designing",route:"/playground/free",gradient:"from-purple-500 to-pink-500"},{icon:"",title:"Custom Problems",description:"Bring your own problem statements and design solutions in an interactive environment",action:"Create Problem",route:"/create-problem",gradient:"from-orange-500 to-red-500"}],A=[{icon:"",title:"75+ Components",description:"System design, ER diagrams, UML diagrams, and more"},{icon:"",title:"Smart Connections",description:"Define data flow and relationships visually"},{icon:"",title:"Custom Properties",description:"Add metadata to any component"},{icon:"",title:"AI Assessment",description:"Get feedback on your designs"},{icon:"",title:"Dark Mode",description:"Beautiful themes for any preference"},{icon:"",title:"Export & Share",description:"Save and share your designs"}],_=[{value:"75+",label:"Components",icon:""},{value:"1000+",label:"Users",icon:""},{value:"",label:"Possibilities",icon:""}],j=[{quote:"This tool transformed how I prepare for system design interviews.",author:"Software Engineer",role:"FAANG Company"},{quote:"Perfect for teaching distributed systems to my students.",author:"Professor",role:"University CS Dept"},{quote:"I use it daily to plan architecture for client projects.",author:"Solutions Architect",role:"Tech Consulting"}];return m.jsxs(m.Fragment,{children:[m.jsx(Qd,{title:"Diagrammatic  Interactive System Design Playground | Learn Architecture Design",description:"Master system design with Diagrammatic - an interactive playground featuring 78+ components, AI assessment, UML & ER diagrams, and real-world practice problems. Free system architecture tool for students, professionals, and educators.",keywords:"system design, architecture diagram, system design interview, software architecture, distributed systems, scalable architecture, system design tool, architecture playground, cloud architecture, microservices design, ER diagram, entity relationship diagram, UML diagram, class diagram, database design",url:"https://satya00089.github.io/diagrammatic/"}),m.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[var(--surface)] via-[var(--bg)] to-[var(--surface)] text-theme relative grid-pattern-overlay",children:[m.jsxs("div",{className:"absolute inset-0 pointer-events-none opacity-[0.16] z-0 min-h-full",children:[m.jsxs("svg",{className:"absolute inset-0 w-full h-full",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",children:[m.jsx("line",{x1:"10%",y1:"15%",x2:"25%",y2:"15%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme",opacity:"0.6"}),m.jsx("line",{x1:"25%",y1:"15%",x2:"40%",y2:"25%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-200",opacity:"0.6"}),m.jsx("line",{x1:"40%",y1:"25%",x2:"60%",y2:"20%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-400",opacity:"0.6"}),m.jsx("line",{x1:"60%",y1:"20%",x2:"75%",y2:"25%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-600",opacity:"0.6"}),m.jsx("line",{x1:"75%",y1:"25%",x2:"90%",y2:"15%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-800",opacity:"0.6"}),m.jsx("line",{x1:"15%",y1:"40%",x2:"30%",y2:"45%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-300",opacity:"0.6"}),m.jsx("line",{x1:"30%",y1:"45%",x2:"50%",y2:"50%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-500",opacity:"0.6"}),m.jsx("line",{x1:"50%",y1:"50%",x2:"70%",y2:"45%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-700",opacity:"0.6"}),m.jsx("line",{x1:"70%",y1:"45%",x2:"85%",y2:"40%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-900",opacity:"0.6"}),m.jsx("line",{x1:"20%",y1:"70%",x2:"35%",y2:"75%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-400",opacity:"0.6"}),m.jsx("line",{x1:"35%",y1:"75%",x2:"50%",y2:"80%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-600",opacity:"0.6"}),m.jsx("line",{x1:"50%",y1:"80%",x2:"65%",y2:"75%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-800",opacity:"0.6"}),m.jsx("line",{x1:"65%",y1:"75%",x2:"80%",y2:"70%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-1000",opacity:"0.6"}),m.jsx("line",{x1:"25%",y1:"15%",x2:"30%",y2:"45%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-500",opacity:"0.6"}),m.jsx("line",{x1:"50%",y1:"20%",x2:"50%",y2:"50%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-700",opacity:"0.6"}),m.jsx("line",{x1:"75%",y1:"25%",x2:"70%",y2:"45%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-900",opacity:"0.6"}),m.jsx("line",{x1:"50%",y1:"50%",x2:"50%",y2:"80%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-1100",opacity:"0.6"})]}),m.jsx("div",{className:"absolute top-[15%] left-[10%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg",children:""}),m.jsx("div",{className:"absolute top-[15%] left-[25%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),m.jsx("div",{className:"absolute top-[25%] left-[40%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-300",children:""}),m.jsx("div",{className:"absolute top-[20%] left-[60%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),m.jsx("div",{className:"absolute top-[25%] left-[75%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-600",children:""}),m.jsx("div",{className:"absolute top-[15%] left-[90%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),m.jsx("div",{className:"absolute top-[40%] left-[15%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-400",children:""}),m.jsx("div",{className:"absolute top-[45%] left-[30%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),m.jsx("div",{className:"absolute top-[50%] left-[50%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float shadow-lg delay-500",children:""}),m.jsx("div",{className:"absolute top-[45%] left-[70%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),m.jsx("div",{className:"absolute top-[40%] left-[85%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-700",children:""}),m.jsx("div",{className:"absolute top-[69%] left-[17%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl shadow-lg",children:""}),m.jsx("div",{className:"absolute top-[75%] left-[35%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),m.jsx("div",{className:"absolute top-[80%] left-[48%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl shadow-lg",children:""}),m.jsx("div",{className:"absolute top-[74%] left-[65%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),m.jsx("div",{className:"absolute top-[70%] left-[79%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-1000",children:""})]}),m.jsx("header",{className:`fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-[var(--brand)] to-[var(--header-gradient-end)] transition-all duration-300 ${r?"shadow-lg":""}`,children:m.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:m.jsxs("div",{className:"flex items-center justify-between h-16",children:[m.jsxs("button",{type:"button",onClick:()=>e("/"),className:"flex items-center space-x-3 group cursor-pointer",children:[m.jsx("img",{src:"/logo.png",alt:"Logo",className:"h-10 transition-transform group-hover:scale-110 duration-300"}),m.jsx("span",{className:"text-xl font-bold text-white",children:"Diagrammatic"})]}),m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("button",{type:"button",onClick:()=>e("/problems"),className:"hidden md:block px-4 py-2 text-sm font-medium text-white hover:text-white/80 transition-colors cursor-pointer",children:"Problems"}),o&&m.jsx("button",{type:"button",onClick:()=>e("/diagrams"),className:"hidden md:block px-4 py-2 text-sm font-medium text-white hover:text-white/80 transition-colors cursor-pointer",children:"My Designs"}),m.jsx(Zd,{}),m.jsx("div",{className:"relative",children:o?m.jsxs(m.Fragment,{children:[m.jsxs("button",{type:"button",onClick:()=>v(!b),className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-white hover:bg-white/20 rounded-md transition-colors",children:[s?.picture?m.jsx("img",{src:s.picture,alt:s.name||"User",className:"w-8 h-8 rounded-full object-cover border-2 border-white/30"}):m.jsx("div",{className:"w-8 h-8 rounded-full bg-white/30 flex items-center justify-center font-bold",children:s?.name?.[0]?.toUpperCase()||s?.email?.[0]?.toUpperCase()||"U"}),m.jsx("span",{className:"hidden sm:inline",children:s?.name||s?.email}),m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),b&&m.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-[var(--surface)] shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[180px]",children:[m.jsxs("div",{className:"px-4 py-2 border-b border-theme/10",children:[m.jsx("p",{className:"text-sm font-medium text-theme",children:s?.name||"User"}),m.jsx("p",{className:"text-xs text-muted truncate",children:s?.email})]}),m.jsx("button",{type:"button",onClick:()=>{h(),v(!1)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:"Sign Out"})]})]}):m.jsx("button",{type:"button",onClick:()=>g(!0),className:"px-4 py-2 text-sm font-medium bg-white/20 text-white rounded-md hover:bg-white/30 transition-colors",children:"Sign In"})})]})]})})}),m.jsx("section",{className:"relative pt-16 pb-20",children:m.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-[var(--brand)] to-[var(--accent)]",children:[m.jsxs("div",{className:"absolute inset-0 opacity-10 pointer-events-none",children:[m.jsxs("svg",{className:"absolute inset-0 w-full h-full",xmlns:"http://www.w3.org/2000/svg",children:[m.jsx("line",{x1:"10%",y1:"20%",x2:"30%",y2:"40%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse",opacity:"0.6"}),m.jsx("line",{x1:"30%",y1:"40%",x2:"50%",y2:"30%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-500",opacity:"0.6"}),m.jsx("line",{x1:"50%",y1:"30%",x2:"70%",y2:"45%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-1000",opacity:"0.6"}),m.jsx("line",{x1:"70%",y1:"45%",x2:"90%",y2:"25%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-1500",opacity:"0.6"}),m.jsx("line",{x1:"30%",y1:"40%",x2:"50%",y2:"70%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-700",opacity:"0.6"}),m.jsx("line",{x1:"50%",y1:"70%",x2:"70%",y2:"45%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-1200",opacity:"0.6"})]}),m.jsx("div",{className:"absolute top-[20%] left-[10%] w-16 h-16 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg",children:""}),m.jsx("div",{className:"absolute top-[40%] left-[30%] w-20 h-20 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),m.jsx("div",{className:"absolute top-[30%] left-[50%] w-16 h-16 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-500",children:""}),m.jsx("div",{className:"absolute top-[45%] left-[70%] w-20 h-20 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:""}),m.jsx("div",{className:"absolute top-[25%] left-[90%] w-16 h-16 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-1000",children:""}),m.jsx("div",{className:"absolute top-[70%] left-[50%] w-16 h-16 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float-delayed shadow-lg delay-300",children:""})]}),m.jsx("div",{className:"absolute inset-0 opacity-[0.03] hero-grid-overlay"}),m.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 md:py-24",children:m.jsxs("div",{className:`relative z-10 text-center transition-all duration-1000 ${t?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:[m.jsx("div",{className:"inline-block mb-6",children:m.jsx("span",{className:"px-4 py-2 bg-white/20 backdrop-blur-sm text-white text-sm font-semibold rounded-full shadow-lg",children:" Now with 75+ Components, UML & ER Diagrams, AI Assessment"})}),m.jsxs("h1",{className:"text-5xl md:text-7xl font-bold mb-6 leading-tight text-white",children:[m.jsx("span",{className:"inline-block animate-gradient bg-gradient-to-r from-white via-white/90 to-white bg-clip-text",children:"System Design"}),m.jsx("br",{}),m.jsx("span",{className:"text-white/95",children:"Visually, Intuitively"})]}),m.jsx("p",{className:"text-xl md:text-2xl text-white/90 max-w-3xl mx-auto mb-8 leading-relaxed",children:"The interactive playground for system design, ER diagrams, and UML  practice, learn, and create architecture diagrams with ease"}),m.jsx("div",{className:"flex flex-wrap justify-center gap-8 mb-12",children:_.map((R,I)=>{const B=()=>I===0?"fade-in-up-delay-100":I===1?"fade-in-up-delay-200":"fade-in-up-delay-300";return m.jsxs("div",{className:`text-center transition-all duration-500 bg-white/10 backdrop-blur-sm rounded-2xl px-6 py-4 hover:bg-white/20 hover:scale-105 ${t?"fade-in-up":"opacity-0 translate-y-5"} ${B()}`,children:[m.jsx("div",{className:"text-3xl mb-1",children:R.icon}),m.jsx("div",{className:"text-3xl font-bold text-white",children:R.value}),m.jsx("div",{className:"text-sm text-white/80",children:R.label})]},R.label)})}),m.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[m.jsxs("button",{type:"button",onClick:()=>e("/playground/free"),className:"group relative px-8 py-4 bg-white text-[var(--brand)] text-lg font-bold rounded-xl hover:shadow-2xl hover:scale-105 transition-all duration-300 cursor-pointer overflow-hidden",children:[m.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:["Get Started Free"," ",m.jsx("span",{className:"group-hover:translate-x-1 transition-transform",children:""})]}),m.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white to-white/90 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),m.jsxs("button",{type:"button",onClick:()=>e("/problems"),className:"group px-8 py-4 bg-white/10 backdrop-blur-sm border-2 border-white/30 text-white text-lg font-semibold rounded-xl hover:bg-white/20 hover:border-white/50 hover:scale-105 transition-all duration-300 cursor-pointer",children:["Explore Problems"," ",m.jsx("span",{className:"inline-block group-hover:translate-x-1 transition-transform",children:""})]})]}),m.jsx("p",{className:"mt-6 text-sm text-white/80",children:"Trusted by 1000+ developers  AI-powered feedback  Open source"})]})})]})}),o&&m.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-transparent via-surface/20 to-transparent relative",children:m.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[m.jsxs("div",{className:"flex items-center justify-between mb-8",children:[m.jsxs("div",{children:[m.jsx("h2",{className:"text-3xl md:text-4xl font-bold mb-2",children:"My Designs"}),m.jsx("p",{className:"text-muted text-lg",children:"Your saved system design projects"})]}),m.jsxs("div",{className:"flex items-center gap-3",children:[S.length>0&&m.jsx("button",{type:"button",onClick:()=>e("/diagrams"),className:"px-5 py-2.5 text-sm font-medium text-theme hover:text-[var(--brand)] transition-colors",children:"View All"}),m.jsxs("button",{type:"button",onClick:()=>e("/playground/free"),className:"px-6 py-3 bg-[var(--brand)] text-white font-semibold rounded-lg hover:brightness-95 transition-all flex items-center gap-2",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Design"]})]})]}),k?m.jsx("div",{className:"flex items-center justify-center py-20",children:m.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-[var(--brand)]"})}):S.length===0?m.jsxs("div",{className:"text-center py-20 backdrop-blur-md rounded-3xl shadow-[0_8px_30px_rgba(0,0,0,0.12)] p-12 elevated-card-bg",children:[m.jsx("div",{className:"text-6xl mb-4",children:""}),m.jsx("h3",{className:"text-xl font-semibold text-theme mb-2",children:"No designs yet"}),m.jsx("p",{className:"text-muted mb-6",children:"Start creating your first system design project"}),m.jsx("button",{type:"button",onClick:()=>e("/playground/free"),className:"px-6 py-3 bg-[var(--brand)] text-white font-semibold rounded-lg hover:brightness-95 transition-all",children:"Create Your First Design"})]}):m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:S.slice(0,6).map(R=>m.jsxs("div",{onClick:()=>E(R.id),className:"group backdrop-blur-md rounded-2xl shadow-[0_4px_20px_rgba(0,0,0,0.08)] p-6 hover:shadow-[0_12px_40px_rgba(0,0,0,0.15)] transition-all duration-300 hover:-translate-y-1 cursor-pointer elevated-card-bg",children:[m.jsxs("div",{className:"flex items-start justify-between mb-4",children:[m.jsxs("div",{className:"flex-1",children:[m.jsx("h3",{className:"text-lg font-semibold text-theme group-hover:text-[var(--brand)] transition-colors mb-1 line-clamp-1",children:R.title}),!R.isOwner&&m.jsxs("div",{className:"mb-2 flex items-center gap-2 flex-wrap",children:[m.jsxs("div",{className:"group/owner relative overflow-hidden rounded-lg bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 px-2.5 py-1.5 border border-purple-200/60 dark:border-purple-700/40 hover:border-purple-300 dark:hover:border-purple-600 transition-all duration-300 inline-flex items-center gap-2",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-400/0 via-blue-400/10 to-purple-400/0 opacity-0 group-hover/owner:opacity-100 transition-opacity duration-500"}),m.jsxs("div",{className:"relative flex items-center gap-1.5",children:[m.jsxs("div",{className:"relative flex-shrink-0",children:[R.owner.pictureUrl?m.jsx("img",{src:R.owner.pictureUrl,alt:R.owner.name,className:"w-5 h-5 rounded-full object-cover ring-1 ring-purple-300 dark:ring-purple-600"}):m.jsx("div",{className:"w-5 h-5 rounded-full bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center text-[9px] text-white font-bold",children:R.owner.name[0]?.toUpperCase()}),m.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-2 h-2 bg-green-500 rounded-full border border-white dark:border-gray-900"})]}),m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-2.5 w-2.5 text-purple-600 dark:text-purple-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})}),m.jsx("span",{className:"text-xs font-bold text-purple-800 dark:text-purple-300",children:R.owner.name})]})]})]}),m.jsxs("div",{className:`inline-flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg font-bold text-xs shadow-sm transition-all duration-300 ${R.permission==="edit"?"bg-gradient-to-r from-emerald-500 to-green-600 text-white hover:shadow-md hover:shadow-emerald-500/30":"bg-gradient-to-r from-slate-400 to-gray-500 text-white hover:shadow-md hover:shadow-slate-400/30"}`,children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:R.permission==="edit"?m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"}):m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})}),m.jsx("span",{children:R.permission==="edit"?"Can Edit":"View Only"})]})]}),R.description&&m.jsx("p",{className:"text-sm text-muted line-clamp-2",children:R.description})]}),m.jsx("div",{className:"text-3xl ml-2",children:""})]}),m.jsxs("div",{className:"flex items-center gap-4 text-sm text-muted mb-4",children:[m.jsxs("span",{className:"flex items-center gap-1",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})}),R.nodes.length," node",R.nodes.length!==1?"s":""]}),m.jsxs("span",{className:"flex items-center gap-1",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),R.edges.length," connection",R.edges.length!==1?"s":""]})]}),m.jsxs("div",{className:"text-xs text-muted",children:["Updated"," ",new Date(R.updatedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]})]},R.id))})]})}),m.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 relative",children:m.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[m.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-4",children:"Choose Your Path"}),m.jsx("p",{className:"text-muted text-center mb-16 text-lg max-w-2xl mx-auto",children:"Whether you're learning, building, or teaching  we've got you covered"}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:N.map((R,I)=>{const B=()=>I===0?"delay-0":I===1?"delay-100":"delay-200";return m.jsxs("div",{className:`group relative backdrop-blur-md rounded-3xl shadow-[0_8px_30px_rgba(0,0,0,0.12)] p-8 hover:shadow-[0_20px_60px_rgba(0,0,0,0.25)] hover:scale-[1.02] cursor-pointer overflow-hidden transition-all duration-500 elevated-card-bg ${B()}`,onClick:()=>e(R.route),onKeyDown:U=>U.key==="Enter"&&e(R.route),role:"button",tabIndex:0,children:[m.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${R.gradient} opacity-0 group-hover:opacity-[0.03] transition-opacity duration-500`}),m.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-3xl opacity-0 group-hover:opacity-20 blur-xl transition-opacity duration-500"}),m.jsxs("div",{className:"relative z-10",children:[m.jsx("div",{className:"text-6xl mb-6 transform group-hover:scale-110 transition-transform duration-300",children:R.icon}),m.jsx("h3",{className:"text-2xl font-bold mb-4 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:R.title}),m.jsx("p",{className:"text-muted mb-8 leading-relaxed text-[15px]",children:R.description}),m.jsxs("div",{className:"inline-flex items-center gap-2 text-[var(--brand)] font-semibold text-sm group-hover:gap-3 transition-all duration-300",children:[R.action,m.jsx("span",{className:"text-lg group-hover:translate-x-1 transition-transform duration-300",children:""})]})]})]},R.title)})})]})}),m.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-transparent via-surface/30 to-transparent relative",children:m.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[m.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-4",children:"Powerful Features"}),m.jsx("p",{className:"text-muted text-center mb-16 text-lg max-w-2xl mx-auto",children:"Everything you need to design, document, and share system architectures"}),m.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:A.map((R,I)=>{const B=()=>["delay-0","delay-[50ms]","delay-[100ms]","delay-[150ms]","delay-[200ms]","delay-[250ms]"][I]||"delay-[250ms]";return m.jsxs("div",{className:`group backdrop-blur-md rounded-2xl shadow-[0_4px_20px_rgba(0,0,0,0.08)] p-6 hover:shadow-[0_12px_40px_rgba(0,0,0,0.15)] transition-all duration-300 hover:-translate-y-1 elevated-card-bg ${B()}`,children:[m.jsx("div",{className:"text-4xl mb-4 transform group-hover:scale-110 group-hover:rotate-6 transition-all duration-300",children:R.icon}),m.jsx("h3",{className:"text-lg font-semibold mb-2 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:R.title}),m.jsx("p",{className:"text-muted text-sm leading-relaxed",children:R.description})]},R.title)})})]})}),m.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 relative",children:m.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[m.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-4",children:"Loved by Designers Worldwide"}),m.jsx("p",{className:"text-muted text-center mb-16 text-lg max-w-2xl mx-auto",children:"Join thousands who trust Diagrammatic for their system design needs"}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:j.map(R=>m.jsxs("div",{className:"group relative backdrop-blur-md rounded-3xl shadow-[0_8px_30px_rgba(0,0,0,0.12)] p-8 hover:shadow-[0_20px_60px_rgba(0,0,0,0.2)] transition-all duration-500 hover:-translate-y-2 elevated-card-bg",children:[m.jsx("div",{className:"absolute top-6 right-6 text-7xl text-[var(--brand)]/5 font-serif leading-none",children:'"'}),m.jsxs("div",{className:"relative z-10",children:[m.jsx("div",{className:"text-5xl mb-6 text-[var(--brand)]/20 font-serif",children:'"'}),m.jsx("p",{className:"text-theme mb-8 leading-relaxed text-[15px] italic",children:R.quote}),m.jsxs("div",{className:"flex items-center gap-4",children:[m.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-[var(--brand)] to-[var(--accent)] flex items-center justify-center text-white font-bold text-lg shadow-lg group-hover:scale-110 transition-transform duration-300",children:R.author.charAt(0)}),m.jsxs("div",{children:[m.jsx("div",{className:"font-semibold text-theme",children:R.author}),m.jsx("div",{className:"text-muted text-sm",children:R.role})]})]})]})]},`${R.author}-${R.role}`))})]})}),m.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-transparent via-surface/20 to-transparent relative",children:m.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[m.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-16",children:"Perfect For Every Role"}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-10",children:[m.jsxs("div",{className:"group text-center p-8 rounded-3xl hover:elevated-card-bg hover:backdrop-blur-md hover:shadow-[0_20px_60px_rgba(0,0,0,0.15)] transition-all duration-500 hover:-translate-y-2",role:"button",tabIndex:0,children:[m.jsxs("div",{className:"relative inline-block mb-6",children:[m.jsx("div",{className:"absolute inset-0 gradient-icon-blue-cyan rounded-full blur-xl opacity-50 group-hover:opacity-70 transition-opacity duration-500"}),m.jsx("div",{className:"relative w-20 h-20 mx-auto gradient-icon-blue-cyan rounded-full flex items-center justify-center text-4xl shadow-lg group-hover:scale-110 group-hover:rotate-12 transition-all duration-500",children:""})]}),m.jsx("h3",{className:"text-2xl font-bold mb-4 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:"Students"}),m.jsx("p",{className:"text-muted leading-relaxed mb-6",children:"Learn system design concepts through hands-on practice with real-world problems"}),m.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-[var(--brand)] font-semibold opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-2 group-hover:translate-y-0",children:["Start practicing"," ",m.jsx("span",{className:"group-hover:translate-x-1 transition-transform duration-300",children:""})]})]}),m.jsxs("div",{className:"group text-center p-8 rounded-3xl hover:elevated-card-bg hover:backdrop-blur-md hover:shadow-[0_20px_60px_rgba(0,0,0,0.15)] transition-all duration-500 hover:-translate-y-2",role:"button",tabIndex:0,children:[m.jsxs("div",{className:"relative inline-block mb-6",children:[m.jsx("div",{className:"absolute inset-0 gradient-icon-purple-pink rounded-full blur-xl opacity-50 group-hover:opacity-70 transition-opacity duration-500"}),m.jsx("div",{className:"relative w-20 h-20 mx-auto gradient-icon-purple-pink rounded-full flex items-center justify-center text-4xl shadow-lg group-hover:scale-110 group-hover:rotate-12 transition-all duration-500",children:""})]}),m.jsx("h3",{className:"text-2xl font-bold mb-4 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:"Professionals"}),m.jsx("p",{className:"text-muted leading-relaxed mb-6",children:"Plan and document architecture for your projects with a visual approach"}),m.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-[var(--brand)] font-semibold opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-2 group-hover:translate-y-0",children:["Start designing"," ",m.jsx("span",{className:"group-hover:translate-x-1 transition-transform duration-300",children:""})]})]}),m.jsxs("div",{className:"group text-center p-8 rounded-3xl hover:elevated-card-bg hover:backdrop-blur-md hover:shadow-[0_20px_60px_rgba(0,0,0,0.15)] transition-all duration-500 hover:-translate-y-2",role:"button",tabIndex:0,children:[m.jsxs("div",{className:"relative inline-block mb-6",children:[m.jsx("div",{className:"absolute inset-0 gradient-icon-orange-red rounded-full blur-xl opacity-50 group-hover:opacity-70 transition-opacity duration-500"}),m.jsx("div",{className:"relative w-20 h-20 mx-auto gradient-icon-orange-red rounded-full flex items-center justify-center text-4xl shadow-lg group-hover:scale-110 group-hover:rotate-12 transition-all duration-500",children:""})]}),m.jsx("h3",{className:"text-2xl font-bold mb-4 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:"Educators"}),m.jsx("p",{className:"text-muted leading-relaxed mb-6",children:"Create custom problems and assignments for your students to solve"}),m.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-[var(--brand)] font-semibold opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-2 group-hover:translate-y-0",children:["Create problem"," ",m.jsx("span",{className:"group-hover:translate-x-1 transition-transform duration-300",children:""})]})]})]})]})}),m.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 relative",children:m.jsxs("div",{className:"max-w-4xl mx-auto text-center bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-3xl p-12 relative overflow-hidden",children:[m.jsx("div",{className:"absolute top-0 left-0 w-40 h-40 bg-white/10 rounded-full -translate-x-1/2 -translate-y-1/2"}),m.jsx("div",{className:"absolute bottom-0 right-0 w-60 h-60 bg-white/10 rounded-full translate-x-1/3 translate-y-1/3"}),m.jsxs("div",{className:"relative z-10",children:[m.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-4",children:"Ready to Start Designing?"}),m.jsx("p",{className:"text-white/90 text-lg mb-8 max-w-2xl mx-auto",children:"Join thousands of developers and architects who trust Diagrammatic for their system design needs"}),m.jsx("button",{type:"button",onClick:()=>e("/playground/free"),className:"px-8 py-4 bg-white text-[var(--brand)] text-lg font-bold rounded-xl hover:shadow-2xl hover:scale-105 transition-all duration-300 cursor-pointer",children:"Launch Free Canvas"})]})]})}),m.jsx("footer",{className:"py-12 px-4 sm:px-6 lg:px-8 shadow-[0_-4px_20px_rgba(0,0,0,0.08)]",children:m.jsx("div",{className:"max-w-7xl mx-auto",children:m.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx("img",{src:"./logo.png",alt:"Logo",className:"h-8"}),m.jsx("span",{className:"font-semibold text-theme",children:"Diagrammatic"})]}),m.jsx("p",{className:"text-muted text-sm",children:" 2025 Diagrammatic. Built with  for system designers"})]})})}),m.jsx("style",{children:`
        @keyframes gradient {
          0%, 100% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
        }
        .animate-gradient {
          background-size: 200% auto;
          animation: gradient 3s ease infinite;
        }
        @keyframes float {
          0%, 100% { transform: translateY(0px) rotate(0deg); }
          50% { transform: translateY(-20px) rotate(5deg); }
        }
        .animate-float {
          animation: float 6s ease-in-out infinite;
        }
        .animate-float-delayed {
          animation: float 8s ease-in-out infinite;
          animation-delay: 1s;
        }
      `}),p&&m.jsx(qm,{isOpen:p,onClose:()=>g(!1),onLogin:async(R,I)=>{await l({email:R,password:I})},onSignup:async(R,I,B)=>{await u({email:R,password:I,name:B})},onGoogleLogin:async R=>{await d(R)}})]})]})};function Is(e){return Array.isArray?Array.isArray(e):a6(e)==="[object Array]"}function yK(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function bK(e){return e==null?"":yK(e)}function Ji(e){return typeof e=="string"}function s6(e){return typeof e=="number"}function xK(e){return e===!0||e===!1||vK(e)&&a6(e)=="[object Boolean]"}function o6(e){return typeof e=="object"}function vK(e){return o6(e)&&e!==null}function Ur(e){return e!=null}function nb(e){return!e.trim().length}function a6(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const wK="Incorrect 'index' type",SK=e=>`Invalid value for key ${e}`,CK=e=>`Pattern length exceeds max of ${e}.`,kK=e=>`Missing ${e} property in key`,EK=e=>`Property 'weight' in key '${e}' must be a positive integer`,$_=Object.prototype.hasOwnProperty;class NK{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(r=>{let i=l6(r);this._keys.push(i),this._keyMap[i.id]=i,n+=i.weight}),this._keys.forEach(r=>{r.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function l6(e){let t=null,n=null,r=null,i=1,s=null;if(Ji(e)||Is(e))r=e,t=G_(e),n=BC(e);else{if(!$_.call(e,"name"))throw new Error(kK("name"));const o=e.name;if(r=o,$_.call(e,"weight")&&(i=e.weight,i<=0))throw new Error(EK(o));t=G_(o),n=BC(o),s=e.getFn}return{path:t,id:n,weight:i,src:r,getFn:s}}function G_(e){return Is(e)?e:e.split(".")}function BC(e){return Is(e)?e.join("."):e}function TK(e,t){let n=[],r=!1;const i=(s,o,l)=>{if(Ur(s))if(!o[l])n.push(s);else{let u=o[l];const d=s[u];if(!Ur(d))return;if(l===o.length-1&&(Ji(d)||s6(d)||xK(d)))n.push(bK(d));else if(Is(d)){r=!0;for(let h=0,p=d.length;h<p;h+=1)i(d[h],o,l+1)}else o.length&&i(d,o,l+1)}};return i(e,Ji(t)?t.split("."):t,0),r?n:n[0]}const AK={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},MK={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},_K={location:0,threshold:.6,distance:100},DK={useExtendedSearch:!1,getFn:TK,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var We={...MK,...AK,..._K,...DK};const RK=/[^ ]+/g;function jK(e=1,t=3){const n=new Map,r=Math.pow(10,t);return{get(i){const s=i.match(RK).length;if(n.has(s))return n.get(s);const o=1/Math.pow(s,.5*e),l=parseFloat(Math.round(o*r)/r);return n.set(s,l),l},clear(){n.clear()}}}class SE{constructor({getFn:t=We.getFn,fieldNormWeight:n=We.fieldNormWeight}={}){this.norm=jK(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Ji(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();Ji(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!Ur(t)||nb(t))return;let r={v:t,i:n,n:this.norm.get(t)};this.records.push(r)}_addObject(t,n){let r={i:n,$:{}};this.keys.forEach((i,s)=>{let o=i.getFn?i.getFn(t):this.getFn(t,i.path);if(Ur(o)){if(Is(o)){let l=[];const u=[{nestedArrIndex:-1,value:o}];for(;u.length;){const{nestedArrIndex:d,value:h}=u.pop();if(Ur(h))if(Ji(h)&&!nb(h)){let p={v:h,i:d,n:this.norm.get(h)};l.push(p)}else Is(h)&&h.forEach((p,g)=>{u.push({nestedArrIndex:g,value:p})})}r.$[s]=l}else if(Ji(o)&&!nb(o)){let l={v:o,n:this.norm.get(o)};r.$[s]=l}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function c6(e,t,{getFn:n=We.getFn,fieldNormWeight:r=We.fieldNormWeight}={}){const i=new SE({getFn:n,fieldNormWeight:r});return i.setKeys(e.map(l6)),i.setSources(t),i.create(),i}function OK(e,{getFn:t=We.getFn,fieldNormWeight:n=We.fieldNormWeight}={}){const{keys:r,records:i}=e,s=new SE({getFn:t,fieldNormWeight:n});return s.setKeys(r),s.setIndexRecords(i),s}function Oh(e,{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:i=We.distance,ignoreLocation:s=We.ignoreLocation}={}){const o=t/e.length;if(s)return o;const l=Math.abs(r-n);return i?o+l/i:l?1:o}function LK(e=[],t=We.minMatchCharLength){let n=[],r=-1,i=-1,s=0;for(let o=e.length;s<o;s+=1){let l=e[s];l&&r===-1?r=s:!l&&r!==-1&&(i=s-1,i-r+1>=t&&n.push([r,i]),r=-1)}return e[s-1]&&s-r>=t&&n.push([r,s-1]),n}const va=32;function PK(e,t,n,{location:r=We.location,distance:i=We.distance,threshold:s=We.threshold,findAllMatches:o=We.findAllMatches,minMatchCharLength:l=We.minMatchCharLength,includeMatches:u=We.includeMatches,ignoreLocation:d=We.ignoreLocation}={}){if(t.length>va)throw new Error(CK(va));const h=t.length,p=e.length,g=Math.max(0,Math.min(r,p));let b=s,v=g;const S=l>1||u,w=S?Array(p):[];let k;for(;(k=e.indexOf(t,v))>-1;){let j=Oh(t,{currentLocation:k,expectedLocation:g,distance:i,ignoreLocation:d});if(b=Math.min(j,b),v=k+h,S){let R=0;for(;R<h;)w[k+R]=1,R+=1}}v=-1;let T=[],E=1,N=h+p;const A=1<<h-1;for(let j=0;j<h;j+=1){let R=0,I=N;for(;R<I;)Oh(t,{errors:j,currentLocation:g+I,expectedLocation:g,distance:i,ignoreLocation:d})<=b?R=I:N=I,I=Math.floor((N-R)/2+R);N=I;let B=Math.max(1,g-I+1),U=o?p:Math.min(g+I,p)+h,V=Array(U+2);V[U+1]=(1<<j)-1;for(let L=U;L>=B;L-=1){let H=L-1,O=n[e.charAt(H)];if(S&&(w[H]=+!!O),V[L]=(V[L+1]<<1|1)&O,j&&(V[L]|=(T[L+1]|T[L])<<1|1|T[L+1]),V[L]&A&&(E=Oh(t,{errors:j,currentLocation:H,expectedLocation:g,distance:i,ignoreLocation:d}),E<=b)){if(b=E,v=H,v<=g)break;B=Math.max(1,2*g-v)}}if(Oh(t,{errors:j+1,currentLocation:g,expectedLocation:g,distance:i,ignoreLocation:d})>b)break;T=V}const _={isMatch:v>=0,score:Math.max(.001,E)};if(S){const j=LK(w,l);j.length?u&&(_.indices=j):_.isMatch=!1}return _}function IK(e){let t={};for(let n=0,r=e.length;n<r;n+=1){const i=e.charAt(n);t[i]=(t[i]||0)|1<<r-n-1}return t}const Tp=String.prototype.normalize?(e=>e.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,"")):(e=>e);class u6{constructor(t,{location:n=We.location,threshold:r=We.threshold,distance:i=We.distance,includeMatches:s=We.includeMatches,findAllMatches:o=We.findAllMatches,minMatchCharLength:l=We.minMatchCharLength,isCaseSensitive:u=We.isCaseSensitive,ignoreDiacritics:d=We.ignoreDiacritics,ignoreLocation:h=We.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:u,ignoreDiacritics:d,ignoreLocation:h},t=u?t:t.toLowerCase(),t=d?Tp(t):t,this.pattern=t,this.chunks=[],!this.pattern.length)return;const p=(b,v)=>{this.chunks.push({pattern:b,alphabet:IK(b),startIndex:v})},g=this.pattern.length;if(g>va){let b=0;const v=g%va,S=g-v;for(;b<S;)p(this.pattern.substr(b,va),b),b+=va;if(v){const w=g-va;p(this.pattern.substr(w),w)}}else p(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,ignoreDiacritics:r,includeMatches:i}=this.options;if(t=n?t:t.toLowerCase(),t=r?Tp(t):t,this.pattern===t){let S={isMatch:!0,score:0};return i&&(S.indices=[[0,t.length-1]]),S}const{location:s,distance:o,threshold:l,findAllMatches:u,minMatchCharLength:d,ignoreLocation:h}=this.options;let p=[],g=0,b=!1;this.chunks.forEach(({pattern:S,alphabet:w,startIndex:k})=>{const{isMatch:T,score:E,indices:N}=PK(t,S,w,{location:s+k,distance:o,threshold:l,findAllMatches:u,minMatchCharLength:d,includeMatches:i,ignoreLocation:h});T&&(b=!0),g+=E,T&&N&&(p=[...p,...N])});let v={isMatch:b,score:b?g/this.chunks.length:1};return b&&i&&(v.indices=p),v}}class Uo{constructor(t){this.pattern=t}static isMultiMatch(t){return W_(t,this.multiRegex)}static isSingleMatch(t){return W_(t,this.singleRegex)}search(){}}function W_(e,t){const n=e.match(t);return n?n[1]:null}class BK extends Uo{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class zK extends Uo{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const r=t.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class VK extends Uo{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class qK extends Uo{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class HK extends Uo{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class FK extends Uo{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class d6 extends Uo{constructor(t,{location:n=We.location,threshold:r=We.threshold,distance:i=We.distance,includeMatches:s=We.includeMatches,findAllMatches:o=We.findAllMatches,minMatchCharLength:l=We.minMatchCharLength,isCaseSensitive:u=We.isCaseSensitive,ignoreDiacritics:d=We.ignoreDiacritics,ignoreLocation:h=We.ignoreLocation}={}){super(t),this._bitapSearch=new u6(t,{location:n,threshold:r,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:u,ignoreDiacritics:d,ignoreLocation:h})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class f6 extends Uo{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,r;const i=[],s=this.pattern.length;for(;(r=t.indexOf(this.pattern,n))>-1;)n=r+s,i.push([r,n-1]);const o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}const zC=[BK,f6,VK,qK,FK,HK,zK,d6],K_=zC.length,UK=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,$K="|";function GK(e,t={}){return e.split($K).map(n=>{let r=n.trim().split(UK).filter(s=>s&&!!s.trim()),i=[];for(let s=0,o=r.length;s<o;s+=1){const l=r[s];let u=!1,d=-1;for(;!u&&++d<K_;){const h=zC[d];let p=h.isMultiMatch(l);p&&(i.push(new h(p,t)),u=!0)}if(!u)for(d=-1;++d<K_;){const h=zC[d];let p=h.isSingleMatch(l);if(p){i.push(new h(p,t));break}}}return i})}const WK=new Set([d6.type,f6.type]);class KK{constructor(t,{isCaseSensitive:n=We.isCaseSensitive,ignoreDiacritics:r=We.ignoreDiacritics,includeMatches:i=We.includeMatches,minMatchCharLength:s=We.minMatchCharLength,ignoreLocation:o=We.ignoreLocation,findAllMatches:l=We.findAllMatches,location:u=We.location,threshold:d=We.threshold,distance:h=We.distance}={}){this.query=null,this.options={isCaseSensitive:n,ignoreDiacritics:r,includeMatches:i,minMatchCharLength:s,findAllMatches:l,ignoreLocation:o,location:u,threshold:d,distance:h},t=n?t:t.toLowerCase(),t=r?Tp(t):t,this.pattern=t,this.query=GK(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:i,ignoreDiacritics:s}=this.options;t=i?t:t.toLowerCase(),t=s?Tp(t):t;let o=0,l=[],u=0;for(let d=0,h=n.length;d<h;d+=1){const p=n[d];l.length=0,o=0;for(let g=0,b=p.length;g<b;g+=1){const v=p[g],{isMatch:S,indices:w,score:k}=v.search(t);if(S){if(o+=1,u+=k,r){const T=v.constructor.type;WK.has(T)?l=[...l,...w]:l.push(w)}}else{u=0,o=0,l.length=0;break}}if(o){let g={isMatch:!0,score:u/o};return r&&(g.indices=l),g}}return{isMatch:!1,score:1}}}const VC=[];function YK(...e){VC.push(...e)}function qC(e,t){for(let n=0,r=VC.length;n<r;n+=1){let i=VC[n];if(i.condition(e,t))return new i(e,t)}return new u6(e,t)}const Ap={AND:"$and",OR:"$or"},HC={PATH:"$path",PATTERN:"$val"},FC=e=>!!(e[Ap.AND]||e[Ap.OR]),XK=e=>!!e[HC.PATH],ZK=e=>!Is(e)&&o6(e)&&!FC(e),Y_=e=>({[Ap.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function h6(e,t,{auto:n=!0}={}){const r=i=>{let s=Object.keys(i);const o=XK(i);if(!o&&s.length>1&&!FC(i))return r(Y_(i));if(ZK(i)){const u=o?i[HC.PATH]:s[0],d=o?i[HC.PATTERN]:i[u];if(!Ji(d))throw new Error(SK(u));const h={keyId:BC(u),pattern:d};return n&&(h.searcher=qC(d,t)),h}let l={children:[],operator:s[0]};return s.forEach(u=>{const d=i[u];Is(d)&&d.forEach(h=>{l.children.push(r(h))})}),l};return FC(e)||(e=Y_(e)),r(e)}function QK(e,{ignoreFieldNorm:t=We.ignoreFieldNorm}){e.forEach(n=>{let r=1;n.matches.forEach(({key:i,norm:s,score:o})=>{const l=i?i.weight:null;r*=Math.pow(o===0&&l?Number.EPSILON:o,(l||1)*(t?1:s))}),n.score=r})}function JK(e,t){const n=e.matches;t.matches=[],Ur(n)&&n.forEach(r=>{if(!Ur(r.indices)||!r.indices.length)return;const{indices:i,value:s}=r;let o={indices:i,value:s};r.key&&(o.key=r.key.src),r.idx>-1&&(o.refIndex=r.idx),t.matches.push(o)})}function eY(e,t){t.score=e.score}function tY(e,t,{includeMatches:n=We.includeMatches,includeScore:r=We.includeScore}={}){const i=[];return n&&i.push(JK),r&&i.push(eY),e.map(s=>{const{idx:o}=s,l={item:t[o],refIndex:o};return i.length&&i.forEach(u=>{u(s,l)}),l})}class Za{constructor(t,n={},r){this.options={...We,...n},this.options.useExtendedSearch,this._keyStore=new NK(this.options.keys),this.setCollection(t,r)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof SE))throw new Error(wK);this._myIndex=n||c6(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){Ur(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let r=0,i=this._docs.length;r<i;r+=1){const s=this._docs[r];t(s,r)&&(this.removeAt(r),r-=1,i-=1,n.push(s))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:r,includeScore:i,shouldSort:s,sortFn:o,ignoreFieldNorm:l}=this.options;let u=Ji(t)?Ji(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return QK(u,{ignoreFieldNorm:l}),s&&u.sort(o),s6(n)&&n>-1&&(u=u.slice(0,n)),tY(u,this._docs,{includeMatches:r,includeScore:i})}_searchStringList(t){const n=qC(t,this.options),{records:r}=this._myIndex,i=[];return r.forEach(({v:s,i:o,n:l})=>{if(!Ur(s))return;const{isMatch:u,score:d,indices:h}=n.searchIn(s);u&&i.push({item:s,idx:o,matches:[{score:d,value:s,norm:l,indices:h}]})}),i}_searchLogical(t){const n=h6(t,this.options),r=(l,u,d)=>{if(!l.children){const{keyId:p,searcher:g}=l,b=this._findMatches({key:this._keyStore.get(p),value:this._myIndex.getValueForItemAtKeyId(u,p),searcher:g});return b&&b.length?[{idx:d,item:u,matches:b}]:[]}const h=[];for(let p=0,g=l.children.length;p<g;p+=1){const b=l.children[p],v=r(b,u,d);if(v.length)h.push(...v);else if(l.operator===Ap.AND)return[]}return h},i=this._myIndex.records,s={},o=[];return i.forEach(({$:l,i:u})=>{if(Ur(l)){let d=r(n,l,u);d.length&&(s[u]||(s[u]={idx:u,item:l,matches:[]},o.push(s[u])),d.forEach(({matches:h})=>{s[u].matches.push(...h)}))}}),o}_searchObjectList(t){const n=qC(t,this.options),{keys:r,records:i}=this._myIndex,s=[];return i.forEach(({$:o,i:l})=>{if(!Ur(o))return;let u=[];r.forEach((d,h)=>{u.push(...this._findMatches({key:d,value:o[h],searcher:n}))}),u.length&&s.push({idx:l,item:o,matches:u})}),s}_findMatches({key:t,value:n,searcher:r}){if(!Ur(n))return[];let i=[];if(Is(n))n.forEach(({v:s,i:o,n:l})=>{if(!Ur(s))return;const{isMatch:u,score:d,indices:h}=r.searchIn(s);u&&i.push({score:d,key:t,value:s,idx:o,norm:l,indices:h})});else{const{v:s,n:o}=n,{isMatch:l,score:u,indices:d}=r.searchIn(s);l&&i.push({score:u,key:t,value:s,norm:o,indices:d})}return i}}Za.version="7.1.0";Za.createIndex=c6;Za.parseIndex=OK;Za.config=We;Za.parseQuery=h6;YK(KK);const nY=()=>{Xa();const e=Xd(),[t,n]=M.useState("All"),[r,i]=M.useState("All"),[s,o]=M.useState(""),[l,u]=M.useState([]),[d,h]=M.useState(!0),[p,g]=M.useState(null),[b,v]=M.useState(!1),[S,w]=M.useState(!1),[k,T]=M.useState(new Set),{user:E,isAuthenticated:N,login:A,signup:_,googleLogin:j,logout:R}=Lm();M.useEffect(()=>{(async()=>{try{h(!0),g(null);const H=await fetch("https://diagrammatic-api-production.up.railway.app/api/v1/all-problems");if(!H.ok)throw new Error(`Failed to fetch problems: ${H.status} ${H.statusText}`);const O=await H.json();u(O)}catch(L){g(L instanceof Error?L.message:"An error occurred while fetching problems"),console.error("Error fetching problems:",L)}finally{h(!1)}})()},[]),M.useEffect(()=>{(async()=>{if(!N){T(new Set);return}try{const L=await tn.getAttemptedProblems();T(new Set(L))}catch(L){console.error("Failed to fetch attempted problems:",L)}})()},[N]);const I=M.useMemo(()=>{const F=s?.trim()??"";let L=l;return F.length>0&&(L=new Za(l,{keys:[{name:"title",weight:.6},{name:"description",weight:.25},{name:"tags",weight:.15}],includeScore:!0,threshold:.45}).search(F).map(q=>q.item)),L.filter(O=>{const q=t==="All"||O.difficulty===t,K=r==="All"||O.category===r;return q&&K}).sort((O,q)=>{const K=k.has(O.id)?1:0;return(k.has(q.id)?1:0)-K})},[t,r,s,l,k]),B=["All",...Array.from(new Set(l.map(F=>F.category)))],U=["All","Easy","Medium","Hard","Very Hard"],V=F=>{switch(F){case"Easy":return"bg-green-100 text-green-800";case"Medium":return"bg-yellow-100 text-yellow-800";case"Hard":return"bg-red-100 text-red-800";case"Very Hard":return"bg-orange-200 text-orange-800";default:return"bg-gray-100 text-gray-800"}};return m.jsxs(m.Fragment,{children:[m.jsx(Qd,{title:"System Design Practice Problems | Diagrammatic",description:"Browse and solve curated system design problems with real-world scenarios. Master distributed systems, scalable architectures, and ace your tech interviews with hands-on practice.",keywords:"system design problems, architecture challenges, distributed systems practice, system design interview prep, scalable architecture exercises",url:"https://satya00089.github.io/diagrammatic/#/problems"}),m.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[var(--surface)] via-[var(--bg)] to-[var(--surface)] text-theme relative grid-pattern-overlay",children:[m.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] transition-all duration-300",children:m.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:m.jsxs("div",{className:"flex items-center justify-between h-16",children:[m.jsxs("button",{type:"button",onClick:()=>e("/"),className:"flex items-center space-x-3 group cursor-pointer",children:[m.jsx("img",{src:"/logo.png",alt:"Logo",className:"h-10 transition-transform group-hover:scale-110 duration-300"}),m.jsx("span",{className:"text-xl font-bold text-white",children:"Diagrammatic"})]}),m.jsxs("div",{className:"flex items-center gap-4",children:[N&&m.jsx("button",{type:"button",onClick:()=>e("/diagrams"),className:"hidden md:block px-4 py-2 text-sm font-medium text-white hover:text-white/80 transition-colors cursor-pointer",children:"My Designs"}),m.jsx("div",{className:"hidden md:block text-sm text-white/90",children:d?"Loading...":`${I.length} problems available`}),m.jsx(Zd,{}),m.jsx("div",{className:"relative",children:N?m.jsxs(m.Fragment,{children:[m.jsxs("button",{type:"button",onClick:()=>v(!b),className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-white hover:bg-white/20 rounded-md transition-colors",children:[E?.picture?m.jsx("img",{src:E.picture,alt:E.name||"User",className:"w-8 h-8 rounded-full object-cover border-2 border-white/30"}):m.jsx("div",{className:"w-8 h-8 rounded-full bg-white/30 flex items-center justify-center font-bold",children:E?.name?.[0]?.toUpperCase()||E?.email?.[0]?.toUpperCase()||"U"}),m.jsx("span",{className:"hidden sm:inline",children:E?.name||E?.email}),m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),b&&m.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-[var(--surface)] shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[180px]",children:[m.jsxs("div",{className:"px-4 py-2 border-b border-theme/10",children:[m.jsx("p",{className:"text-sm font-medium text-theme",children:E?.name||"User"}),m.jsx("p",{className:"text-xs text-muted truncate",children:E?.email})]}),m.jsx("button",{type:"button",onClick:()=>{R(),v(!1)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:"Sign Out"})]})]}):m.jsx("button",{type:"button",onClick:()=>w(!0),className:"px-4 py-2 text-sm font-medium bg-white/20 text-white rounded-md hover:bg-white/30 transition-colors",children:"Sign In"})})]})]})})}),m.jsx("div",{className:"pt-16 relative z-10",children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[m.jsxs("div",{className:"text-center mb-12",children:[m.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"System Design Problems"}),m.jsx("p",{className:"text-muted text-lg max-w-2xl mx-auto",children:"Master system design through interactive problem solving"})]}),d&&m.jsxs("div",{className:"text-center py-20",children:[m.jsx("div",{className:"inline-block w-16 h-16 border-4 border-[var(--brand)] border-t-transparent rounded-full animate-spin mb-4"}),m.jsx("div",{className:"text-theme text-xl mb-2",children:"Loading problems..."}),m.jsx("div",{className:"text-muted text-sm",children:"Please wait while we fetch the latest problems"})]}),p&&m.jsx("div",{className:"elevated-card-bg backdrop-blur-md rounded-2xl p-8 mb-6 border-2 border-red-500/20 shadow-lg max-w-2xl mx-auto",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"text-6xl mb-4",children:""}),m.jsx("div",{className:"text-theme text-xl font-semibold mb-2",children:"Error Loading Problems"}),m.jsx("div",{className:"text-muted text-sm mb-6",children:p}),m.jsx("button",{type:"button",onClick:()=>globalThis.location.reload(),className:"px-6 py-3 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white font-semibold rounded-xl hover:shadow-lg hover:scale-105 transition-all duration-300 cursor-pointer",children:"Retry"})]})}),!d&&!p&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"elevated-card-bg backdrop-blur-md rounded-2xl shadow-lg p-6 mb-8",children:m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"search-input",className:"block text-sm font-semibold text-theme mb-2",children:" Search"}),m.jsx("input",{id:"search-input",type:"text",placeholder:"Search problems...",value:s,onChange:F=>o(F.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"difficulty-select",className:"block text-sm font-semibold text-theme mb-2",children:" Difficulty"}),m.jsx("select",{id:"difficulty-select",value:t,onChange:F=>n(F.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme appearance-none cursor-pointer transition-all duration-300 hover:border-[var(--brand)]/30",children:U.map(F=>m.jsx("option",{value:F,children:F},F))})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"category-select",className:"block text-sm font-semibold text-theme mb-2",children:" Category"}),m.jsx("select",{id:"category-select",value:r,onChange:F=>i(F.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme appearance-none cursor-pointer transition-all duration-300 hover:border-[var(--brand)]/30",children:B.map(F=>m.jsx("option",{value:F,children:F},F))})]})]})}),m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 pb-12",children:I.map((F,L)=>m.jsxs("div",{className:`group elevated-card-bg backdrop-blur-md rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-500 hover:-translate-y-2 overflow-hidden ${L===0?"delay-0":L===1?"delay-100":L===2?"delay-200":""}`,children:[m.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] rounded-2xl opacity-0 group-hover:opacity-20 blur-xl transition-opacity duration-500"}),m.jsxs("div",{className:"relative p-6",children:[m.jsxs("div",{className:"flex items-start justify-between mb-4",children:[m.jsx("h3",{className:"text-lg font-bold text-theme group-hover:text-[var(--brand)] transition-colors duration-300 line-clamp-2 flex-1 pr-2",children:F.title}),m.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ml-2 flex-shrink-0 ${V(F.difficulty)}`,children:F.difficulty})]}),m.jsx("p",{className:"text-muted text-sm mb-4 line-clamp-3 leading-relaxed",children:F.description}),m.jsxs("div",{className:"flex items-center justify-between text-sm text-muted mb-4 pb-4 border-b border-[var(--theme)]/10",children:[m.jsxs("span",{className:"flex items-center gap-1",children:[m.jsx("span",{children:""})," ",F.category]}),m.jsxs("span",{className:"flex items-center gap-1",children:[m.jsx("span",{children:""})," ",F.estimated_time]})]}),m.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[F.tags.slice(0,3).map(H=>m.jsx("span",{className:"px-3 py-1 bg-[var(--brand)]/10 text-[var(--brand)] text-xs font-semibold rounded-full",children:H},H)),F.tags.length>3&&m.jsxs("span",{className:"px-3 py-1 bg-[var(--theme)]/5 text-muted text-xs font-medium rounded-full",children:["+",F.tags.length-3," more"]})]}),m.jsx("button",{type:"button",onClick:H=>{H.stopPropagation(),e(`/playground/${F.id}`)},"aria-label":`Start ${F.title}`,className:`w-full px-6 py-3 font-semibold rounded-xl transition-all duration-300 cursor-pointer group-hover:shadow-xl ${N&&k.has(F.id)?"bg-gradient-to-r from-blue-500 to-indigo-600 text-white hover:shadow-lg hover:scale-105":"bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white hover:shadow-lg hover:scale-105"}`,children:m.jsxs("span",{className:"flex items-center justify-center gap-2",children:[N&&k.has(F.id)&&m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),N&&k.has(F.id)?"Continue Problem":"Start Problem"," "]})})]})]},F.id))}),I.length===0&&!d&&m.jsxs("div",{className:"text-center py-20",children:[m.jsx("div",{className:"text-7xl mb-6",children:""}),m.jsx("div",{className:"text-theme text-2xl font-bold mb-2",children:"No problems found"}),m.jsx("div",{className:"text-muted text-lg",children:"Try adjusting your filters or search terms"})]})]})]})})]}),S&&m.jsx(qm,{isOpen:S,onClose:()=>w(!1),onLogin:async(F,L)=>{await A({email:F,password:L})},onSignup:async(F,L,H)=>{await _({email:F,password:L,name:H})},onGoogleLogin:async F=>{await j(F)}})]})};var rb={exports:{}},ib={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var X_;function rY(){if(X_)return ib;X_=1;var e=Kd();function t(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,i=e.useEffect,s=e.useLayoutEffect,o=e.useDebugValue;function l(p,g){var b=g(),v=r({inst:{value:b,getSnapshot:g}}),S=v[0].inst,w=v[1];return s(function(){S.value=b,S.getSnapshot=g,u(S)&&w({inst:S})},[p,b,g]),i(function(){return u(S)&&w({inst:S}),p(function(){u(S)&&w({inst:S})})},[p]),o(b),b}function u(p){var g=p.getSnapshot;p=p.value;try{var b=g();return!n(p,b)}catch{return!0}}function d(p,g){return g()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?d:l;return ib.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:h,ib}var Z_;function p6(){return Z_||(Z_=1,rb.exports=rY()),rb.exports}var m6=p6();function Un(e){this.content=e}Un.prototype={constructor:Un,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return t==-1?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,i=r.find(e),s=r.content.slice();return i==-1?s.push(n||e,t):(s[i+1]=t,n&&(s[i]=n)),new Un(s)},remove:function(e){var t=this.find(e);if(t==-1)return this;var n=this.content.slice();return n.splice(t,2),new Un(n)},addToStart:function(e,t){return new Un([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new Un(n)},addBefore:function(e,t,n){var r=this.remove(t),i=r.content.slice(),s=r.find(e);return i.splice(s==-1?i.length:s,0,t,n),new Un(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return e=Un.from(e),e.size?new Un(e.content.concat(this.subtract(e).content)):this},append:function(e){return e=Un.from(e),e.size?new Un(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=Un.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach(function(t,n){e[t]=n}),e},get size(){return this.content.length>>1}};Un.from=function(e){if(e instanceof Un)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new Un(t)};function g6(e,t,n){for(let r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;let i=e.child(r),s=t.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=g6(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function y6(e,t,n,r){for(let i=e.childCount,s=t.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=e.child(--i),l=t.child(--s),u=o.nodeSize;if(o==l){n-=u,r-=u;continue}if(!o.sameMarkup(l))return{a:n,b:r};if(o.isText&&o.text!=l.text){let d=0,h=Math.min(o.text.length,l.text.length);for(;d<h&&o.text[o.text.length-d-1]==l.text[l.text.length-d-1];)d++,n--,r--;return{a:n,b:r}}if(o.content.size||l.content.size){let d=y6(o.content,l.content,n-1,r-1);if(d)return d}n-=u,r-=u}}class ye{constructor(t,n){if(this.content=t,this.size=n||0,n==null)for(let r=0;r<t.length;r++)this.size+=t[r].nodeSize}nodesBetween(t,n,r,i=0,s){for(let o=0,l=0;l<n;o++){let u=this.content[o],d=l+u.nodeSize;if(d>t&&r(u,i+l,s||null,o)!==!1&&u.content.size){let h=l+1;u.nodesBetween(Math.max(0,t-h),Math.min(u.content.size,n-h),r,i+h)}l=d}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,n,r,i){let s="",o=!0;return this.nodesBetween(t,n,(l,u)=>{let d=l.isText?l.text.slice(Math.max(t,u)-u,n-u):l.isLeaf?i?typeof i=="function"?i(l):i:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&d||l.isTextblock)&&r&&(o?o=!1:s+=r),s+=d},0),s}append(t){if(!t.size)return this;if(!this.size)return t;let n=this.lastChild,r=t.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<t.content.length;s++)i.push(t.content[s]);return new ye(i,this.size+t.size)}cut(t,n=this.size){if(t==0&&n==this.size)return this;let r=[],i=0;if(n>t)for(let s=0,o=0;o<n;s++){let l=this.content[s],u=o+l.nodeSize;u>t&&((o<t||u>n)&&(l.isText?l=l.cut(Math.max(0,t-o),Math.min(l.text.length,n-o)):l=l.cut(Math.max(0,t-o-1),Math.min(l.content.size,n-o-1))),r.push(l),i+=l.nodeSize),o=u}return new ye(r,i)}cutByIndex(t,n){return t==n?ye.empty:t==0&&n==this.content.length?this:new ye(this.content.slice(t,n))}replaceChild(t,n){let r=this.content[t];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[t]=n,new ye(i,s)}addToStart(t){return new ye([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new ye(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(t.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let n=this.content[t];if(!n)throw new RangeError("Index "+t+" out of range for "+this);return n}maybeChild(t){return this.content[t]||null}forEach(t){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];t(i,r,n),r+=i.nodeSize}}findDiffStart(t,n=0){return g6(this,t,n)}findDiffEnd(t,n=this.size,r=t.size){return y6(this,t,n,r)}findIndex(t){if(t==0)return Lh(0,t);if(t==this.size)return Lh(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),s=r+i.nodeSize;if(s>=t)return s==t?Lh(n+1,s):Lh(n,r);r=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,n){if(!n)return ye.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new ye(n.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return ye.empty;let n,r=0;for(let i=0;i<t.length;i++){let s=t[i];r+=s.nodeSize,i&&s.isText&&t[i-1].sameMarkup(s)?(n||(n=t.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new ye(n||t,r)}static from(t){if(!t)return ye.empty;if(t instanceof ye)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new ye([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}ye.empty=new ye([],0);const sb={index:0,offset:0};function Lh(e,t){return sb.index=e,sb.offset=t,sb}function Mp(e,t){if(e===t)return!0;if(!(e&&typeof e=="object")||!(t&&typeof t=="object"))return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!Mp(e[r],t[r]))return!1}else{for(let r in e)if(!(r in t)||!Mp(e[r],t[r]))return!1;for(let r in t)if(!(r in e))return!1}return!0}let Dt=class UC{constructor(t,n){this.type=t,this.attrs=n}addToSet(t){let n,r=!1;for(let i=0;i<t.length;i++){let s=t[i];if(this.eq(s))return t;if(this.type.excludes(s.type))n||(n=t.slice(0,i));else{if(s.type.excludes(this.type))return t;!r&&s.type.rank>this.type.rank&&(n||(n=t.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=t.slice()),r||n.push(this),n}removeFromSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return t.slice(0,n).concat(t.slice(n+1));return t}isInSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return!0;return!1}eq(t){return this==t||this.type==t.type&&Mp(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=t.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(t,n){if(t==n)return!0;if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].eq(n[r]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&t.length==0)return UC.none;if(t instanceof UC)return[t];let n=t.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};Dt.none=[];class _p extends Error{}class Ne{constructor(t,n,r){this.content=t,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,n){let r=x6(this.content,t+this.openStart,n);return r&&new Ne(r,this.openStart,this.openEnd)}removeBetween(t,n){return new Ne(b6(this.content,t+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,n){if(!n)return Ne.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new Ne(ye.fromJSON(t,n.content),r,i)}static maxOpen(t,n=!0){let r=0,i=0;for(let s=t.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=t.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new Ne(t,r,i)}}Ne.empty=new Ne(ye.empty,0,0);function b6(e,t,n){let{index:r,offset:i}=e.findIndex(t),s=e.maybeChild(r),{index:o,offset:l}=e.findIndex(n);if(i==t||s.isText){if(l!=n&&!e.child(o).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return e.replaceChild(r,s.copy(b6(s.content,t-i-1,n-i-1)))}function x6(e,t,n,r){let{index:i,offset:s}=e.findIndex(t),o=e.maybeChild(i);if(s==t||o.isText)return r&&!r.canReplace(i,i,n)?null:e.cut(0,t).append(n).append(e.cut(t));let l=x6(o.content,t-s-1,n,o);return l&&e.replaceChild(i,o.copy(l))}function iY(e,t,n){if(n.openStart>e.depth)throw new _p("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new _p("Inconsistent open depths");return v6(e,t,n,0)}function v6(e,t,n,r){let i=e.index(r),s=e.node(r);if(i==t.index(r)&&r<e.depth-n.openStart){let o=v6(e,t,n,r+1);return s.copy(s.content.replaceChild(i,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&e.depth==r&&t.depth==r){let o=e.parent,l=o.content;return ja(o,l.cut(0,e.parentOffset).append(n.content).append(l.cut(t.parentOffset)))}else{let{start:o,end:l}=sY(n,e);return ja(s,S6(e,o,l,t,r))}else return ja(s,Dp(e,t,r))}function w6(e,t){if(!t.type.compatibleContent(e.type))throw new _p("Cannot join "+t.type.name+" onto "+e.type.name)}function $C(e,t,n){let r=e.node(n);return w6(r,t.node(n)),r}function Ra(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function id(e,t,n,r){let i=(t||e).node(n),s=0,o=t?t.index(n):i.childCount;e&&(s=e.index(n),e.depth>n?s++:e.textOffset&&(Ra(e.nodeAfter,r),s++));for(let l=s;l<o;l++)Ra(i.child(l),r);t&&t.depth==n&&t.textOffset&&Ra(t.nodeBefore,r)}function ja(e,t){return e.type.checkContent(t),e.copy(t)}function S6(e,t,n,r,i){let s=e.depth>i&&$C(e,t,i+1),o=r.depth>i&&$C(n,r,i+1),l=[];return id(null,e,i,l),s&&o&&t.index(i)==n.index(i)?(w6(s,o),Ra(ja(s,S6(e,t,n,r,i+1)),l)):(s&&Ra(ja(s,Dp(e,t,i+1)),l),id(t,n,i,l),o&&Ra(ja(o,Dp(n,r,i+1)),l)),id(r,null,i,l),new ye(l)}function Dp(e,t,n){let r=[];if(id(null,e,n,r),e.depth>n){let i=$C(e,t,n+1);Ra(ja(i,Dp(e,t,n+1)),r)}return id(t,null,n,r),new ye(r)}function sY(e,t){let n=t.depth-e.openStart,i=t.node(n).copy(e.content);for(let s=n-1;s>=0;s--)i=t.node(s).copy(ye.from(i));return{start:i.resolveNoCache(e.openStart+n),end:i.resolveNoCache(i.content.size-e.openEnd-n)}}class Ed{constructor(t,n,r){this.pos=t,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(t){return t==null?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[this.resolveDepth(t)*3]}index(t){return this.path[this.resolveDepth(t)*3+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}start(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,n=this.index(this.depth);if(n==t.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=t.child(n);return r?t.child(n).cut(r):i}get nodeBefore(){let t=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(t).cut(0,n):t==0?null:this.parent.child(t-1)}posAtIndex(t,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<t;s++)i+=r.child(s).nodeSize;return i}marks(){let t=this.parent,n=this.index();if(t.content.size==0)return Dt.none;if(this.textOffset)return t.child(n).marks;let r=t.maybeChild(n-1),i=t.maybeChild(n);if(!r){let l=r;r=i,i=l}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(t){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=t.parent.maybeChild(t.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(t){for(let n=this.depth;n>0;n--)if(this.start(n)<=t&&this.end(n)>=t)return n;return 0}blockRange(t=this,n){if(t.pos<this.pos)return t.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);r>=0;r--)if(t.pos<=this.end(r)&&(!n||n(this.node(r))))return new Rp(this,t,r);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let n=1;n<=this.depth;n++)t+=(t?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return t+":"+this.parentOffset}static resolve(t,n){if(!(n>=0&&n<=t.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let o=t;;){let{index:l,offset:u}=o.content.findIndex(s),d=s-u;if(r.push(o,l,i+u),!d||(o=o.child(l),o.isText))break;s=d-1,i+=u+1}return new Ed(n,r,s)}static resolveCached(t,n){let r=Q_.get(t);if(r)for(let s=0;s<r.elts.length;s++){let o=r.elts[s];if(o.pos==n)return o}else Q_.set(t,r=new oY);let i=r.elts[r.i]=Ed.resolve(t,n);return r.i=(r.i+1)%aY,i}}class oY{constructor(){this.elts=[],this.i=0}}const aY=12,Q_=new WeakMap;class Rp{constructor(t,n,r){this.$from=t,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const lY=Object.create(null);let jo=class GC{constructor(t,n,r,i=Dt.none){this.type=t,this.attrs=n,this.marks=i,this.content=r||ye.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,n,r,i=0){this.content.nodesBetween(t,n,r,i,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,n,r,i){return this.content.textBetween(t,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,n,r){return this.type==t&&Mp(this.attrs,n||t.defaultAttrs||lY)&&Dt.sameSet(this.marks,r||Dt.none)}copy(t=null){return t==this.content?this:new GC(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new GC(this.type,this.attrs,this.content,t)}cut(t,n=this.content.size){return t==0&&n==this.content.size?this:this.copy(this.content.cut(t,n))}slice(t,n=this.content.size,r=!1){if(t==n)return Ne.empty;let i=this.resolve(t),s=this.resolve(n),o=r?0:i.sharedDepth(n),l=i.start(o),d=i.node(o).content.cut(i.pos-l,s.pos-l);return new Ne(d,i.depth-o,s.depth-o)}replace(t,n,r){return iY(this.resolve(t),this.resolve(n),r)}nodeAt(t){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(t);if(n=n.maybeChild(r),!n)return null;if(i==t||n.isText)return n;t-=i+1}}childAfter(t){let{index:n,offset:r}=this.content.findIndex(t);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(t){if(t==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(t);if(r<t)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(t){return Ed.resolveCached(this,t)}resolveNoCache(t){return Ed.resolve(this,t)}rangeHasMark(t,n,r){let i=!1;return n>t&&this.nodesBetween(t,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),C6(this.marks,t)}contentMatchAt(t){let n=this.type.contentMatch.matchFragment(this.content,0,t);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(t,n,r=ye.empty,i=0,s=r.childCount){let o=this.contentMatchAt(t).matchFragment(r,i,s),l=o&&o.matchFragment(this.content,n);if(!l||!l.validEnd)return!1;for(let u=i;u<s;u++)if(!this.type.allowsMarks(r.child(u).marks))return!1;return!0}canReplaceWith(t,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(t).matchType(r),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=Dt.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),t=r.addToSet(t)}if(!Dt.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(n=>n.toJSON())),t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(t.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(n.text,r)}let i=ye.fromJSON(t,n.content),s=t.nodeType(n.type).create(n.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};jo.prototype.text=void 0;class jp extends jo{constructor(t,n,r,i){if(super(t,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):C6(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,n){return this.text.slice(t,n)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new jp(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new jp(this.type,this.attrs,t,this.marks)}cut(t=0,n=this.text.length){return t==0&&n==this.text.length?this:this.withText(this.text.slice(t,n))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function C6(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class za{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,n){let r=new cY(t,n);if(r.next==null)return za.empty;let i=k6(r);r.next&&r.err("Unexpected trailing text");let s=gY(mY(i));return yY(s,r),s}matchType(t){for(let n=0;n<this.next.length;n++)if(this.next[n].type==t)return this.next[n].next;return null}matchFragment(t,n=0,r=t.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(t.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:n}=this.next[t];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(t){for(let n=0;n<this.next.length;n++)for(let r=0;r<t.next.length;r++)if(this.next[n].type==t.next[r].type)return!0;return!1}fillBefore(t,n=!1,r=0){let i=[this];function s(o,l){let u=o.matchFragment(t,r);if(u&&(!n||u.validEnd))return ye.from(l.map(d=>d.createAndFill()));for(let d=0;d<o.next.length;d++){let{type:h,next:p}=o.next[d];if(!(h.isText||h.hasRequiredAttrs())&&i.indexOf(p)==-1){i.push(p);let g=s(p,l.concat(h));if(g)return g}}return null}return s(this,[])}findWrapping(t){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==t)return this.wrapCache[r+1];let n=this.computeWrapping(t);return this.wrapCache.push(t,n),n}computeWrapping(t){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(t)){let o=[];for(let l=i;l.type;l=l.via)o.push(l.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:l,next:u}=s.next[o];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in n)&&(!i.type||u.validEnd)&&(r.push({match:l.contentMatch,type:l,via:i}),n[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function n(r){t.push(r);for(let i=0;i<r.next.length;i++)t.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),t.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+t.indexOf(r.next[o].next);return s}).join(`
`)}}za.empty=new za(!0);class cY{constructor(t,n){this.string=t,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function k6(e){let t=[];do t.push(uY(e));while(e.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function uY(e){let t=[];do t.push(dY(e));while(e.next&&e.next!=")"&&e.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function dY(e){let t=pY(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else if(e.eat("{"))t=fY(e,t);else break;return t}function J_(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function fY(e,t){let n=J_(e),r=n;return e.eat(",")&&(e.next!="}"?r=J_(e):r=-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function hY(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let i=[];for(let s in n){let o=n[s];o.isInGroup(t)&&i.push(o)}return i.length==0&&e.err("No node type or group '"+t+"' found"),i}function pY(e){if(e.eat("(")){let t=k6(e);return e.eat(")")||e.err("Missing closing paren"),t}else if(/\W/.test(e.next))e.err("Unexpected token '"+e.next+"'");else{let t=hY(e,e.next).map(n=>(e.inline==null?e.inline=n.isInline:e.inline!=n.isInline&&e.err("Mixing inline and block content"),{type:"name",value:n}));return e.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function mY(e){let t=[[]];return i(s(e,0),n()),t;function n(){return t.push([])-1}function r(o,l,u){let d={term:u,to:l};return t[o].push(d),d}function i(o,l){o.forEach(u=>u.to=l)}function s(o,l){if(o.type=="choice")return o.exprs.reduce((u,d)=>u.concat(s(d,l)),[]);if(o.type=="seq")for(let u=0;;u++){let d=s(o.exprs[u],l);if(u==o.exprs.length-1)return d;i(d,l=n())}else if(o.type=="star"){let u=n();return r(l,u),i(s(o.expr,u),u),[r(u)]}else if(o.type=="plus"){let u=n();return i(s(o.expr,l),u),i(s(o.expr,u),u),[r(u)]}else{if(o.type=="opt")return[r(l)].concat(s(o.expr,l));if(o.type=="range"){let u=l;for(let d=0;d<o.min;d++){let h=n();i(s(o.expr,u),h),u=h}if(o.max==-1)i(s(o.expr,u),u);else for(let d=o.min;d<o.max;d++){let h=n();r(u,h),i(s(o.expr,u),h),u=h}return[r(u)]}else{if(o.type=="name")return[r(l,void 0,o.value)];throw new Error("Unknown expr type")}}}}function E6(e,t){return t-e}function eD(e,t){let n=[];return r(t),n.sort(E6);function r(i){let s=e[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let o=0;o<s.length;o++){let{term:l,to:u}=s[o];!l&&n.indexOf(u)==-1&&r(u)}}}function gY(e){let t=Object.create(null);return n(eD(e,0));function n(r){let i=[];r.forEach(o=>{e[o].forEach(({term:l,to:u})=>{if(!l)return;let d;for(let h=0;h<i.length;h++)i[h][0]==l&&(d=i[h][1]);eD(e,u).forEach(h=>{d||i.push([l,d=[]]),d.indexOf(h)==-1&&d.push(h)})})});let s=t[r.join(",")]=new za(r.indexOf(e.length-1)>-1);for(let o=0;o<i.length;o++){let l=i[o][1].sort(E6);s.next.push({type:i[o][0],next:t[l.join(",")]||n(l)})}return s}}function yY(e,t){for(let n=0,r=[e];n<r.length;n++){let i=r[n],s=!i.validEnd,o=[];for(let l=0;l<i.next.length;l++){let{type:u,next:d}=i.next[l];o.push(u.name),s&&!(u.isText||u.hasRequiredAttrs())&&(s=!1),r.indexOf(d)==-1&&r.push(d)}s&&t.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function N6(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function T6(e,t){let n=Object.create(null);for(let r in e){let i=t&&t[r];if(i===void 0){let s=e[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function A6(e,t,n,r){for(let i in t)if(!(i in e))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in e){let s=e[i];s.validate&&s.validate(t[i])}}function M6(e,t){let n=Object.create(null);if(t)for(let r in t)n[r]=new xY(e,r,t[r]);return n}let tD=class _6{constructor(t,n,r){this.name=t,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=M6(t,r.attrs),this.defaultAttrs=N6(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||t=="text"),this.isText=t=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==za.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(t){return this.groups.indexOf(t)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:T6(this.attrs,t)}create(t=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new jo(this,this.computeAttrs(t),ye.from(n),Dt.setFrom(r))}createChecked(t=null,n,r){return n=ye.from(n),this.checkContent(n),new jo(this,this.computeAttrs(t),n,Dt.setFrom(r))}createAndFill(t=null,n,r){if(t=this.computeAttrs(t),n=ye.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(ye.empty,!0);return s?new jo(this,t,n.append(s),Dt.setFrom(r)):null}validContent(t){let n=this.contentMatch.matchFragment(t);if(!n||!n.validEnd)return!1;for(let r=0;r<t.childCount;r++)if(!this.allowsMarks(t.child(r).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}checkAttrs(t){A6(this.attrs,t,"node",this.name)}allowsMarkType(t){return this.markSet==null||this.markSet.indexOf(t)>-1}allowsMarks(t){if(this.markSet==null)return!0;for(let n=0;n<t.length;n++)if(!this.allowsMarkType(t[n].type))return!1;return!0}allowedMarks(t){if(this.markSet==null)return t;let n;for(let r=0;r<t.length;r++)this.allowsMarkType(t[r].type)?n&&n.push(t[r]):n||(n=t.slice(0,r));return n?n.length?n:Dt.none:t}static compile(t,n){let r=Object.create(null);t.forEach((s,o)=>r[s]=new _6(s,n,o));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function bY(e,t,n){let r=n.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${t} on type ${e}, got ${s}`)}}class xY{constructor(t,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?bY(t,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class Hm{constructor(t,n,r,i){this.name=t,this.rank=n,this.schema=r,this.spec=i,this.attrs=M6(t,i.attrs),this.excluded=null;let s=N6(this.attrs);this.instance=s?new Dt(this,s):null}create(t=null){return!t&&this.instance?this.instance:new Dt(this,T6(this.attrs,t))}static compile(t,n){let r=Object.create(null),i=0;return t.forEach((s,o)=>r[s]=new Hm(s,i++,n,o)),r}removeFromSet(t){for(var n=0;n<t.length;n++)t[n].type==this&&(t=t.slice(0,n).concat(t.slice(n+1)),n--);return t}isInSet(t){for(let n=0;n<t.length;n++)if(t[n].type==this)return t[n]}checkAttrs(t){A6(this.attrs,t,"mark",this.name)}excludes(t){return this.excluded.indexOf(t)>-1}}class D6{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in t)n[i]=t[i];n.nodes=Un.from(t.nodes),n.marks=Un.from(t.marks||{}),this.nodes=tD.compile(this.spec.nodes,this),this.marks=Hm.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",l=s.spec.marks;if(s.contentMatch=r[o]||(r[o]=za.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=l=="_"?null:l?nD(this,l.split(" ")):l==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:nD(this,o.split(" "))}this.nodeFromJSON=i=>jo.fromJSON(this,i),this.markFromJSON=i=>Dt.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,n=null,r,i){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof tD){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(n,r,i)}text(t,n){let r=this.nodes.text;return new jp(r,r.defaultAttrs,t,Dt.setFrom(n))}mark(t,n){return typeof t=="string"&&(t=this.marks[t]),t.create(n)}nodeType(t){let n=this.nodes[t];if(!n)throw new RangeError("Unknown node type: "+t);return n}}function nD(e,t){let n=[];for(let r=0;r<t.length;r++){let i=t[r],s=e.marks[i],o=s;if(s)n.push(s);else for(let l in e.marks){let u=e.marks[l];(i=="_"||u.spec.group&&u.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=u)}if(!o)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}function vY(e){return e.tag!=null}function wY(e){return e.style!=null}let sd=class WC{constructor(t,n){this.schema=t,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(vY(i))this.tags.push(i);else if(wY(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=t.nodes[i.node];return s.contentMatch.matchType(s)})}parse(t,n={}){let r=new iD(this,n,!1);return r.addAll(t,Dt.none,n.from,n.to),r.finish()}parseSlice(t,n={}){let r=new iD(this,n,!0);return r.addAll(t,Dt.none,n.from,n.to),Ne.maxOpen(r.finish())}matchTag(t,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(kY(t,s.tag)&&(s.namespace===void 0||t.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(t);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(t,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],l=o.style;if(!(l.indexOf(t)!=0||o.context&&!r.matchesContext(o.context)||l.length>t.length&&(l.charCodeAt(t.length)!=61||l.slice(t.length+1)!=n))){if(o.getAttrs){let u=o.getAttrs(n);if(u===!1)continue;o.attrs=u||void 0}return o}}}static schemaRules(t){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let l=n[o];if((l.priority==null?50:l.priority)<s)break}n.splice(o,0,i)}for(let i in t.marks){let s=t.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=sD(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in t.nodes){let s=t.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=sD(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new WC(t,WC.schemaRules(t)))}};const R6={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},SY={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},j6={ol:!0,ul:!0},Nd=1,KC=2,od=4;function rD(e,t,n){return t!=null?(t?Nd:0)|(t==="full"?KC:0):e&&e.whitespace=="pre"?Nd|KC:n&~od}class Ph{constructor(t,n,r,i,s,o){this.type=t,this.attrs=n,this.marks=r,this.solid=i,this.options=o,this.content=[],this.activeMarks=Dt.none,this.match=s||(o&od?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(ye.from(t));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(t.type))?(this.match=r,i):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&Nd)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=ye.from(this.content);return!t&&this.match&&(n=n.append(this.match.fillBefore(ye.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!R6.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class iD{constructor(t,n,r){this.parser=t,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,s,o=rD(null,n.preserveWhitespace,0)|(r?od:0);i?s=new Ph(i.type,i.attrs,Dt.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new Ph(null,null,Dt.none,!0,null,o):s=new Ph(t.schema.topNodeType,null,Dt.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t,n){t.nodeType==3?this.addTextNode(t,n):t.nodeType==1&&this.addElement(t,n)}addTextNode(t,n){let r=t.nodeValue,i=this.top,s=i.options&KC?"full":this.localPreserveWS||(i.options&Nd)>0;if(s==="full"||i.inlineContext(t)||/[^ \t\r\n\u000c]/.test(r)){if(s)s!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let o=i.content[i.content.length-1],l=t.previousSibling;(!o||l&&l.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n,!/\S/.test(r)),this.findInText(t)}else this.findInside(t)}addElement(t,n,r){let i=this.localPreserveWS,s=this.top;(t.tagName=="PRE"||/pre/.test(t.style&&t.style.whiteSpace))&&(this.localPreserveWS=!0);let o=t.nodeName.toLowerCase(),l;j6.hasOwnProperty(o)&&this.parser.normalizeLists&&CY(t);let u=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(l=this.parser.matchTag(t,this,r));e:if(u?u.ignore:SY.hasOwnProperty(o))this.findInside(t),this.ignoreFallback(t,n);else if(!u||u.skip||u.closeParent){u&&u.closeParent?this.open=Math.max(0,this.open-1):u&&u.skip.nodeType&&(t=u.skip);let d,h=this.needsBlock;if(R6.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),d=!0,s.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t,n);break e}let p=u&&u.skip?n:this.readStyles(t,n);p&&this.addAll(t,p),d&&this.sync(s),this.needsBlock=h}else{let d=this.readStyles(t,n);d&&this.addElementByRule(t,u,d,u.consuming===!1?l:void 0)}this.localPreserveWS=i}leafFallback(t,n){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`),n)}ignoreFallback(t,n){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(t,n){let r=t.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=r.getPropertyValue(s);if(o)for(let l=void 0;;){let u=this.parser.matchStyle(s,o,this,l);if(!u)break;if(u.ignore)return null;if(u.clearMark?n=n.filter(d=>!u.clearMark(d)):n=n.concat(this.parser.schema.marks[u.mark].create(u.attrs)),u.consuming===!1)l=u;else break}}return n}addElementByRule(t,n,r,i){let s,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r,t.nodeName=="BR")||this.leafFallback(t,r);else{let u=this.enter(o,n.attrs||null,r,n.preserveWhitespace);u&&(s=!0,r=u)}else{let u=this.parser.schema.marks[n.mark];r=r.concat(u.create(n.attrs))}let l=this.top;if(o&&o.isLeaf)this.findInside(t);else if(i)this.addElement(t,r,i);else if(n.getContent)this.findInside(t),n.getContent(t,this.parser.schema).forEach(u=>this.insertNode(u,r,!1));else{let u=t;typeof n.contentElement=="string"?u=t.querySelector(n.contentElement):typeof n.contentElement=="function"?u=n.contentElement(t):n.contentElement&&(u=n.contentElement),this.findAround(t,u,!0),this.addAll(u,r),this.findAround(t,u,!1)}s&&this.sync(l)&&this.open--}addAll(t,n,r,i){let s=r||0;for(let o=r?t.childNodes[r]:t.firstChild,l=i==null?null:t.childNodes[i];o!=l;o=o.nextSibling,++s)this.findAtPoint(t,s),this.addDOM(o,n);this.findAtPoint(t,s)}findPlace(t,n,r){let i,s;for(let o=this.open,l=0;o>=0;o--){let u=this.nodes[o],d=u.findWrapping(t);if(d&&(!i||i.length>d.length+l)&&(i=d,s=u,!d.length))break;if(u.solid){if(r)break;l+=2}}if(!i)return null;this.sync(s);for(let o=0;o<i.length;o++)n=this.enterInner(i[o],null,n,!1);return n}insertNode(t,n,r){if(t.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let i=this.findPlace(t,n,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(t.type));let o=Dt.none;for(let l of i.concat(t.marks))(s.type?s.type.allowsMarkType(l.type):oD(l.type,t.type))&&(o=l.addToSet(o));return s.content.push(t.mark(o)),!0}return!1}enter(t,n,r,i){let s=this.findPlace(t.create(n),r,!1);return s&&(s=this.enterInner(t,n,r,!0,i)),s}enterInner(t,n,r,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(t);let l=rD(t,s,o.options);o.options&od&&o.content.length==0&&(l|=od);let u=Dt.none;return r=r.filter(d=>(o.type?o.type.allowsMarkType(d.type):oD(d.type,t))?(u=d.addToSet(u),!1):!0),this.nodes.push(new Ph(t,n,u,i,null,l)),this.open++,r}closeExtra(t=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(t){for(let n=this.open;n>=0;n--){if(this.nodes[n]==t)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Nd)}return!1}get currentPos(){this.closeExtra();let t=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)t+=r[i].nodeSize;n&&t++}return t}findAtPoint(t,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==t&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&t.nodeType==1&&t.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(t,n,r){if(t!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&t.nodeType==1&&t.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&(this.find[n].pos=this.currentPos-(t.nodeValue.length-this.find[n].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let n=t.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(l,u)=>{for(;l>=0;l--){let d=n[l];if(d==""){if(l==n.length-1||l==0)continue;for(;u>=s;u--)if(o(l-1,u))return!0;return!1}else{let h=u>0||u==0&&i?this.nodes[u].type:r&&u>=s?r.node(u-s).type:null;if(!h||h.name!=d&&!h.isInGroup(d))return!1;u--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let n=t.depth;n>=0;n--){let r=t.node(n).contentMatchAt(t.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function CY(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let r=t.nodeType==1?t.nodeName.toLowerCase():null;r&&j6.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):r=="li"?n=t:r&&(n=null)}}function kY(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function sD(e){let t={};for(let n in e)t[n]=e[n];return t}function oD(e,t){let n=t.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(e))continue;let s=[],o=l=>{s.push(l);for(let u=0;u<l.edgeCount;u++){let{type:d,next:h}=l.edge(u);if(d==t||s.indexOf(h)<0&&o(h))return!0}};if(o(i.contentMatch))return!0}}class Qa{constructor(t,n){this.nodes=t,this.marks=n}serializeFragment(t,n={},r){r||(r=ob(n).createDocumentFragment());let i=r,s=[];return t.forEach(o=>{if(s.length||o.marks.length){let l=0,u=0;for(;l<s.length&&u<o.marks.length;){let d=o.marks[u];if(!this.marks[d.type.name]){u++;continue}if(!d.eq(s[l][0])||d.type.spec.spanning===!1)break;l++,u++}for(;l<s.length;)i=s.pop()[1];for(;u<o.marks.length;){let d=o.marks[u++],h=this.serializeMark(d,o.isInline,n);h&&(s.push([d,i]),i.appendChild(h.dom),i=h.contentDOM||h.dom)}}i.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(t,n){let{dom:r,contentDOM:i}=lp(ob(n),this.nodes[t.type.name](t),null,t.attrs);if(i){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,n,i)}return r}serializeNode(t,n={}){let r=this.serializeNodeInner(t,n);for(let i=t.marks.length-1;i>=0;i--){let s=this.serializeMark(t.marks[i],t.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(t,n,r={}){let i=this.marks[t.type.name];return i&&lp(ob(r),i(t,n),null,t.attrs)}static renderSpec(t,n,r=null,i){return lp(t,n,r,i)}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new Qa(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let n=aD(t.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(t){return aD(t.marks)}}function aD(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function ob(e){return e.document||window.document}const lD=new WeakMap;function EY(e){let t=lD.get(e);return t===void 0&&lD.set(e,t=NY(e)),t}function NY(e){let t=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")t||(t=[]),t.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(e),t}function lp(e,t,n,r){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let i=t[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=EY(r))&&s.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(n=i.slice(0,o),i=i.slice(o+1));let l,u=n?e.createElementNS(n,i):e.createElement(i),d=t[1],h=1;if(d&&typeof d=="object"&&d.nodeType==null&&!Array.isArray(d)){h=2;for(let p in d)if(d[p]!=null){let g=p.indexOf(" ");g>0?u.setAttributeNS(p.slice(0,g),p.slice(g+1),d[p]):p=="style"&&u.style?u.style.cssText=d[p]:u.setAttribute(p,d[p])}}for(let p=h;p<t.length;p++){let g=t[p];if(g===0){if(p<t.length-1||p>h)throw new RangeError("Content hole must be the only child of its parent node");return{dom:u,contentDOM:u}}else{let{dom:b,contentDOM:v}=lp(e,g,n,r);if(u.appendChild(b),v){if(l)throw new RangeError("Multiple content holes");l=v}}}return{dom:u,contentDOM:l}}const O6=65535,L6=Math.pow(2,16);function TY(e,t){return e+t*L6}function cD(e){return e&O6}function AY(e){return(e-(e&O6))/L6}const P6=1,I6=2,cp=4,B6=8;class YC{constructor(t,n,r){this.pos=t,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&B6)>0}get deletedBefore(){return(this.delInfo&(P6|cp))>0}get deletedAfter(){return(this.delInfo&(I6|cp))>0}get deletedAcross(){return(this.delInfo&cp)>0}}class $r{constructor(t,n=!1){if(this.ranges=t,this.inverted=n,!t.length&&$r.empty)return $r.empty}recover(t){let n=0,r=cD(t);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+AY(t)}mapResult(t,n=1){return this._map(t,n,!1)}map(t,n=1){return this._map(t,n,!0)}_map(t,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let u=this.ranges[l]-(this.inverted?i:0);if(u>t)break;let d=this.ranges[l+s],h=this.ranges[l+o],p=u+d;if(t<=p){let g=d?t==u?-1:t==p?1:n:n,b=u+i+(g<0?0:h);if(r)return b;let v=t==(n<0?u:p)?null:TY(l/3,t-u),S=t==u?I6:t==p?P6:cp;return(n<0?t!=u:t!=p)&&(S|=B6),new YC(b,S,v)}i+=h-d}return r?t+i:new YC(t+i,0,null)}touches(t,n){let r=0,i=cD(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let u=this.ranges[l]-(this.inverted?r:0);if(u>t)break;let d=this.ranges[l+s],h=u+d;if(t<=h&&l==i*3)return!0;r+=this.ranges[l+o]-d}return!1}forEach(t){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],l=o-(this.inverted?s:0),u=o+(this.inverted?0:s),d=this.ranges[i+n],h=this.ranges[i+r];t(l,l+d,u,u+h),s+=h-d}}invert(){return new $r(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?$r.empty:new $r(t<0?[0,-t,0]:[0,0,t])}}$r.empty=new $r([]);class Td{constructor(t,n,r=0,i=t?t.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=t||[],this.ownData=!(t||n)}get maps(){return this._maps}slice(t=0,n=this.maps.length){return new Td(this._maps,this.mirror,t,n)}appendMap(t,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(t),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(t){for(let n=0,r=this._maps.length;n<t._maps.length;n++){let i=t.getMirror(n);this.appendMap(t._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(t){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==t)return this.mirror[n+(n%2?-1:1)]}}setMirror(t,n){this.mirror||(this.mirror=[]),this.mirror.push(t,n)}appendMappingInverted(t){for(let n=t.maps.length-1,r=this._maps.length+t._maps.length;n>=0;n--){let i=t.getMirror(n);this.appendMap(t._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let t=new Td;return t.appendMappingInverted(this),t}map(t,n=1){if(this.mirror)return this._map(t,n,!0);for(let r=this.from;r<this.to;r++)t=this._maps[r].map(t,n);return t}mapResult(t,n=1){return this._map(t,n,!1)}_map(t,n,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],l=o.mapResult(t,n);if(l.recover!=null){let u=this.getMirror(s);if(u!=null&&u>s&&u<this.to){s=u,t=this._maps[u].recover(l.recover);continue}}i|=l.delInfo,t=l.pos}return r?t:new YC(t,i,null)}}const ab=Object.create(null);class ir{getMap(){return $r.empty}merge(t){return null}static fromJSON(t,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=ab[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in ab)throw new RangeError("Duplicate use of step JSON ID "+t);return ab[t]=n,n.prototype.jsonID=t,n}}class bn{constructor(t,n){this.doc=t,this.failed=n}static ok(t){return new bn(t,null)}static fail(t){return new bn(null,t)}static fromReplace(t,n,r,i){try{return bn.ok(t.replace(n,r,i))}catch(s){if(s instanceof _p)return bn.fail(s.message);throw s}}}function CE(e,t,n){let r=[];for(let i=0;i<e.childCount;i++){let s=e.child(i);s.content.size&&(s=s.copy(CE(s.content,t,s))),s.isInline&&(s=t(s,n,i)),r.push(s)}return ye.fromArray(r)}class _o extends ir{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=t.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new Ne(CE(n.content,(o,l)=>!o.isAtom||!l.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return bn.fromReplace(t,this.from,this.to,s)}invert(){return new Ri(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new _o(n.pos,r.pos,this.mark)}merge(t){return t instanceof _o&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new _o(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new _o(n.from,n.to,t.markFromJSON(n.mark))}}ir.jsonID("addMark",_o);class Ri extends ir{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=new Ne(CE(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),t),n.openStart,n.openEnd);return bn.fromReplace(t,this.from,this.to,r)}invert(){return new _o(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Ri(n.pos,r.pos,this.mark)}merge(t){return t instanceof Ri&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Ri(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Ri(n.from,n.to,t.markFromJSON(n.mark))}}ir.jsonID("removeMark",Ri);class Do extends ir{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return bn.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return bn.fromReplace(t,this.pos,this.pos+1,new Ne(ye.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new Do(this.pos,n.marks[i]);return new Do(this.pos,this.mark)}}return new Va(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new Do(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Do(n.pos,t.markFromJSON(n.mark))}}ir.jsonID("addNodeMark",Do);class Va extends ir{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return bn.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return bn.fromReplace(t,this.pos,this.pos+1,new Ne(ye.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Do(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new Va(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Va(n.pos,t.markFromJSON(n.mark))}}ir.jsonID("removeNodeMark",Va);class On extends ir{constructor(t,n,r,i=!1){super(),this.from=t,this.to=n,this.slice=r,this.structure=i}apply(t){return this.structure&&XC(t,this.from,this.to)?bn.fail("Structure replace would overwrite content"):bn.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new $r([this.from,this.to-this.from,this.slice.size])}invert(t){return new On(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new On(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(t){if(!(t instanceof On)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let n=this.slice.size+t.slice.size==0?Ne.empty:new Ne(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new On(this.from,this.to+(t.to-t.from),n,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let n=this.slice.size+t.slice.size==0?Ne.empty:new Ne(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new On(t.from,this.to,n,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new On(n.from,n.to,Ne.fromJSON(t,n.slice),!!n.structure)}}ir.jsonID("replace",On);class Ln extends ir{constructor(t,n,r,i,s,o,l=!1){super(),this.from=t,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=l}apply(t){if(this.structure&&(XC(t,this.from,this.gapFrom)||XC(t,this.gapTo,this.to)))return bn.fail("Structure gap-replace would overwrite content");let n=t.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return bn.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?bn.fromReplace(t,this.from,this.to,r):bn.fail("Content does not fit in gap")}getMap(){return new $r([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let n=this.gapTo-this.gapFrom;return new Ln(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:t.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:t.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new Ln(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new Ln(n.from,n.to,n.gapFrom,n.gapTo,Ne.fromJSON(t,n.slice),n.insert,!!n.structure)}}ir.jsonID("replaceAround",Ln);function XC(e,t,n){let r=e.resolve(t),i=n-t,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function MY(e,t,n,r){let i=[],s=[],o,l;e.doc.nodesBetween(t,n,(u,d,h)=>{if(!u.isInline)return;let p=u.marks;if(!r.isInSet(p)&&h.type.allowsMarkType(r.type)){let g=Math.max(d,t),b=Math.min(d+u.nodeSize,n),v=r.addToSet(p);for(let S=0;S<p.length;S++)p[S].isInSet(v)||(o&&o.to==g&&o.mark.eq(p[S])?o.to=b:i.push(o=new Ri(g,b,p[S])));l&&l.to==g?l.to=b:s.push(l=new _o(g,b,r))}}),i.forEach(u=>e.step(u)),s.forEach(u=>e.step(u))}function _Y(e,t,n,r){let i=[],s=0;e.doc.nodesBetween(t,n,(o,l)=>{if(!o.isInline)return;s++;let u=null;if(r instanceof Hm){let d=o.marks,h;for(;h=r.isInSet(d);)(u||(u=[])).push(h),d=h.removeFromSet(d)}else r?r.isInSet(o.marks)&&(u=[r]):u=o.marks;if(u&&u.length){let d=Math.min(l+o.nodeSize,n);for(let h=0;h<u.length;h++){let p=u[h],g;for(let b=0;b<i.length;b++){let v=i[b];v.step==s-1&&p.eq(i[b].style)&&(g=v)}g?(g.to=d,g.step=s):i.push({style:p,from:Math.max(l,t),to:d,step:s})}}}),i.forEach(o=>e.step(new Ri(o.from,o.to,o.style)))}function kE(e,t,n,r=n.contentMatch,i=!0){let s=e.doc.nodeAt(t),o=[],l=t+1;for(let u=0;u<s.childCount;u++){let d=s.child(u),h=l+d.nodeSize,p=r.matchType(d.type);if(!p)o.push(new On(l,h,Ne.empty));else{r=p;for(let g=0;g<d.marks.length;g++)n.allowsMarkType(d.marks[g].type)||e.step(new Ri(l,h,d.marks[g]));if(i&&d.isText&&n.whitespace!="pre"){let g,b=/\r?\n|\r/g,v;for(;g=b.exec(d.text);)v||(v=new Ne(ye.from(n.schema.text(" ",n.allowedMarks(d.marks))),0,0)),o.push(new On(l+g.index,l+g.index+g[0].length,v))}}l=h}if(!r.validEnd){let u=r.fillBefore(ye.empty,!0);e.replace(l,l,new Ne(u,0,0))}for(let u=o.length-1;u>=0;u--)e.step(o[u])}function DY(e,t,n){return(t==0||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function Mc(e){let n=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let r=e.depth;;--r){let i=e.$from.node(r),s=e.$from.index(r),o=e.$to.indexAfter(r);if(r<e.depth&&i.canReplace(s,o,n))return r;if(r==0||i.type.spec.isolating||!DY(i,s,o))break}return null}function RY(e,t,n){let{$from:r,$to:i,depth:s}=t,o=r.before(s+1),l=i.after(s+1),u=o,d=l,h=ye.empty,p=0;for(let v=s,S=!1;v>n;v--)S||r.index(v)>0?(S=!0,h=ye.from(r.node(v).copy(h)),p++):u--;let g=ye.empty,b=0;for(let v=s,S=!1;v>n;v--)S||i.after(v+1)<i.end(v)?(S=!0,g=ye.from(i.node(v).copy(g)),b++):d++;e.step(new Ln(u,d,o,l,new Ne(h.append(g),p,b),h.size-p,!0))}function EE(e,t,n=null,r=e){let i=jY(e,t),s=i&&OY(r,t);return s?i.map(uD).concat({type:t,attrs:n}).concat(s.map(uD)):null}function uD(e){return{type:e,attrs:null}}function jY(e,t){let{parent:n,startIndex:r,endIndex:i}=e,s=n.contentMatchAt(r).findWrapping(t);if(!s)return null;let o=s.length?s[0]:t;return n.canReplaceWith(r,i,o)?s:null}function OY(e,t){let{parent:n,startIndex:r,endIndex:i}=e,s=n.child(r),o=t.contentMatch.findWrapping(s.type);if(!o)return null;let u=(o.length?o[o.length-1]:t).contentMatch;for(let d=r;u&&d<i;d++)u=u.matchType(n.child(d).type);return!u||!u.validEnd?null:o}function LY(e,t,n){let r=ye.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let l=n[o].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=ye.from(n[o].type.create(n[o].attrs,r))}let i=t.start,s=t.end;e.step(new Ln(i,s,i,s,new Ne(r,0,0),n.length,!0))}function PY(e,t,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=e.steps.length;e.doc.nodesBetween(t,n,(o,l)=>{let u=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(r,u)&&IY(e.doc,e.mapping.slice(s).map(l),r)){let d=null;if(r.schema.linebreakReplacement){let b=r.whitespace=="pre",v=!!r.contentMatch.matchType(r.schema.linebreakReplacement);b&&!v?d=!1:!b&&v&&(d=!0)}d===!1&&V6(e,o,l,s),kE(e,e.mapping.slice(s).map(l,1),r,void 0,d===null);let h=e.mapping.slice(s),p=h.map(l,1),g=h.map(l+o.nodeSize,1);return e.step(new Ln(p,g,p+1,g-1,new Ne(ye.from(r.create(u,null,o.marks)),0,0),1,!0)),d===!0&&z6(e,o,l,s),!1}})}function z6(e,t,n,r){t.forEach((i,s)=>{if(i.isText){let o,l=/\r?\n|\r/g;for(;o=l.exec(i.text);){let u=e.mapping.slice(r).map(n+1+s+o.index);e.replaceWith(u,u+1,t.type.schema.linebreakReplacement.create())}}})}function V6(e,t,n,r){t.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=e.mapping.slice(r).map(n+1+s);e.replaceWith(o,o+1,t.type.schema.text(`
`))}})}function IY(e,t,n){let r=e.resolve(t),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function BY(e,t,n,r,i){let s=e.doc.nodeAt(t);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return e.replaceWith(t,t+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new Ln(t,t+s.nodeSize,t+1,t+s.nodeSize-1,new Ne(ye.from(o),0,0),1,!0))}function js(e,t,n=1,r){let i=e.resolve(t),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let d=i.depth-1,h=n-2;d>s;d--,h--){let p=i.node(d),g=i.index(d);if(p.type.spec.isolating)return!1;let b=p.content.cutByIndex(g,p.childCount),v=r&&r[h+1];v&&(b=b.replaceChild(0,v.type.create(v.attrs)));let S=r&&r[h]||p;if(!p.canReplace(g+1,p.childCount)||!S.type.validContent(b))return!1}let l=i.indexAfter(s),u=r&&r[0];return i.node(s).canReplaceWith(l,l,u?u.type:i.node(s+1).type)}function zY(e,t,n=1,r){let i=e.doc.resolve(t),s=ye.empty,o=ye.empty;for(let l=i.depth,u=i.depth-n,d=n-1;l>u;l--,d--){s=ye.from(i.node(l).copy(s));let h=r&&r[d];o=ye.from(h?h.type.create(h.attrs,o):i.node(l).copy(o))}e.step(new On(t,t,new Ne(s.append(o),n,n),!0))}function $o(e,t){let n=e.resolve(t),r=n.index();return q6(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function VY(e,t){t.content.size||e.type.compatibleContent(t.type);let n=e.contentMatchAt(e.childCount),{linebreakReplacement:r}=e.type.schema;for(let i=0;i<t.childCount;i++){let s=t.child(i),o=s.type==r?e.type.schema.nodes.text:s.type;if(n=n.matchType(o),!n||!e.type.allowsMarks(s.marks))return!1}return n.validEnd}function q6(e,t){return!!(e&&t&&!e.isLeaf&&VY(e,t))}function Fm(e,t,n=-1){let r=e.resolve(t);for(let i=r.depth;;i--){let s,o,l=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):n>0?(s=r.node(i+1),l++,o=r.node(i).maybeChild(l)):(s=r.node(i).maybeChild(l-1),o=r.node(i+1)),s&&!s.isTextblock&&q6(s,o)&&r.node(i).canReplace(l,l+1))return t;if(i==0)break;t=n<0?r.before(i):r.after(i)}}function qY(e,t,n){let r=null,{linebreakReplacement:i}=e.doc.type.schema,s=e.doc.resolve(t-n),o=s.node().type;if(i&&o.inlineContent){let h=o.whitespace=="pre",p=!!o.contentMatch.matchType(i);h&&!p?r=!1:!h&&p&&(r=!0)}let l=e.steps.length;if(r===!1){let h=e.doc.resolve(t+n);V6(e,h.node(),h.before(),l)}o.inlineContent&&kE(e,t+n-1,o,s.node().contentMatchAt(s.index()),r==null);let u=e.mapping.slice(l),d=u.map(t-n);if(e.step(new On(d,u.map(t+n,-1),Ne.empty,!0)),r===!0){let h=e.doc.resolve(d);z6(e,h.node(),h.before(),e.steps.length)}return e}function HY(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function H6(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=r.depth;o>=0;o--){let l=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,u=r.index(o)+(l>0?1:0),d=r.node(o),h=!1;if(s==1)h=d.canReplace(u,u,i);else{let p=d.contentMatchAt(u).findWrapping(i.firstChild.type);h=p&&d.canReplaceWith(u,u,p[0])}if(h)return l==0?r.pos:l<0?r.before(o+1):r.after(o+1)}return null}function Um(e,t,n=t,r=Ne.empty){if(t==n&&!r.size)return null;let i=e.resolve(t),s=e.resolve(n);return F6(i,s,r)?new On(t,n,r):new FY(i,s,r).fit()}function F6(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}class FY{constructor(t,n,r){this.$from=t,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=ye.empty;for(let i=0;i<=t.depth;i++){let s=t.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(t.indexAfter(i))})}for(let i=t.depth;i>0;i--)this.placed=ye.from(t.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let d=this.findFittable();d?this.placeNodes(d):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(t<0?this.$to:r.doc.resolve(t));if(!i)return null;let s=this.placed,o=r.depth,l=i.depth;for(;o&&l&&s.childCount==1;)s=s.firstChild.content,o--,l--;let u=new Ne(s,o,l);return t>-1?new Ln(r.pos,t,this.$to.pos,this.$to.end(),u,n):u.size||r.pos!=this.$to.pos?new On(r.pos,i.pos,u):null}findFittable(){let t=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<t;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){t=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?t:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=lb(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let l=this.depth;l>=0;l--){let{type:u,match:d}=this.frontier[l],h,p=null;if(n==1&&(o?d.matchType(o.type)||(p=d.fillBefore(ye.from(o),!1)):s&&u.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:l,parent:s,inject:p};if(n==2&&o&&(h=d.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:l,parent:s,wrap:h};if(s&&d.matchType(s.type))break}}}openMore(){let{content:t,openStart:n,openEnd:r}=this.unplaced,i=lb(t,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new Ne(t,n+1,Math.max(r,i.size+n>=t.size-r?n+1:0)),!0)}dropNode(){let{content:t,openStart:n,openEnd:r}=this.unplaced,i=lb(t,n);if(i.childCount<=1&&n>0){let s=t.size-n<=n+i.size;this.unplaced=new Ne(Uu(t,n-1,1),n-1,s?n-1:r)}else this.unplaced=new Ne(Uu(t,n,1),n,r)}placeNodes({sliceDepth:t,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let S=0;S<s.length;S++)this.openFrontierNode(s[S]);let o=this.unplaced,l=r?r.content:o.content,u=o.openStart-t,d=0,h=[],{match:p,type:g}=this.frontier[n];if(i){for(let S=0;S<i.childCount;S++)h.push(i.child(S));p=p.matchFragment(i)}let b=l.size+t-(o.content.size-o.openEnd);for(;d<l.childCount;){let S=l.child(d),w=p.matchType(S.type);if(!w)break;d++,(d>1||u==0||S.content.size)&&(p=w,h.push(U6(S.mark(g.allowedMarks(S.marks)),d==1?u:0,d==l.childCount?b:-1)))}let v=d==l.childCount;v||(b=-1),this.placed=$u(this.placed,n,ye.from(h)),this.frontier[n].match=p,v&&b<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let S=0,w=l;S<b;S++){let k=w.lastChild;this.frontier.push({type:k.type,match:k.contentMatchAt(k.childCount)}),w=k.content}this.unplaced=v?t==0?Ne.empty:new Ne(Uu(o.content,t-1,1),t-1,b<0?o.openEnd:t-1):new Ne(Uu(o.content,t,d),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],n;if(!t.type.isTextblock||!cb(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(t){e:for(let n=Math.min(this.depth,t.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<t.depth&&t.end(n+1)==t.pos+(t.depth-(n+1)),o=cb(t,n,i,r,s);if(o){for(let l=n-1;l>=0;l--){let{match:u,type:d}=this.frontier[l],h=cb(t,l,d,u,!0);if(!h||h.childCount)continue e}return{depth:n,fit:o,move:s?t.doc.resolve(t.after(n+1)):t}}}}close(t){let n=this.findCloseLevel(t);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=$u(this.placed,n.depth,n.fit)),t=n.move;for(let r=n.depth+1;r<=t.depth;r++){let i=t.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,t.index(r));this.openFrontierNode(i.type,i.attrs,s)}return t}openFrontierNode(t,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(t),this.placed=$u(this.placed,this.depth,ye.from(t.create(n,r))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(ye.empty,!0);n.childCount&&(this.placed=$u(this.placed,this.frontier.length,n))}}function Uu(e,t,n){return t==0?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(Uu(e.firstChild.content,t-1,n)))}function $u(e,t,n){return t==0?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy($u(e.lastChild.content,t-1,n)))}function lb(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function U6(e,t,n){if(t<=0)return e;let r=e.content;return t>1&&(r=r.replaceChild(0,U6(r.firstChild,t-1,r.childCount==1?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(ye.empty,!0)))),e.copy(r)}function cb(e,t,n,r,i){let s=e.node(t),o=i?e.indexAfter(t):e.index(t);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let l=r.fillBefore(s.content,!0,o);return l&&!UY(n,s.content,o)?l:null}function UY(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}function $Y(e){return e.spec.defining||e.spec.definingForContent}function GY(e,t,n,r){if(!r.size)return e.deleteRange(t,n);let i=e.doc.resolve(t),s=e.doc.resolve(n);if(F6(i,s,r))return e.step(new On(t,n,r));let o=G6(i,e.doc.resolve(n));o[o.length-1]==0&&o.pop();let l=-(i.depth+1);o.unshift(l);for(let g=i.depth,b=i.pos-1;g>0;g--,b--){let v=i.node(g).type.spec;if(v.defining||v.definingAsContext||v.isolating)break;o.indexOf(g)>-1?l=g:i.before(g)==b&&o.splice(1,0,-g)}let u=o.indexOf(l),d=[],h=r.openStart;for(let g=r.content,b=0;;b++){let v=g.firstChild;if(d.push(v),b==r.openStart)break;g=v.content}for(let g=h-1;g>=0;g--){let b=d[g],v=$Y(b.type);if(v&&!b.sameMarkup(i.node(Math.abs(l)-1)))h=g;else if(v||!b.type.isTextblock)break}for(let g=r.openStart;g>=0;g--){let b=(g+h+1)%(r.openStart+1),v=d[b];if(v)for(let S=0;S<o.length;S++){let w=o[(S+u)%o.length],k=!0;w<0&&(k=!1,w=-w);let T=i.node(w-1),E=i.index(w-1);if(T.canReplaceWith(E,E,v.type,v.marks))return e.replace(i.before(w),k?s.after(w):n,new Ne($6(r.content,0,r.openStart,b),b,r.openEnd))}}let p=e.steps.length;for(let g=o.length-1;g>=0&&(e.replace(t,n,r),!(e.steps.length>p));g--){let b=o[g];b<0||(t=i.before(b),n=s.after(b))}}function $6(e,t,n,r,i){if(t<n){let s=e.firstChild;e=e.replaceChild(0,s.copy($6(s.content,t+1,n,r,s)))}if(t>r){let s=i.contentMatchAt(0),o=s.fillBefore(e).append(e);e=o.append(s.matchFragment(o).fillBefore(ye.empty,!0))}return e}function WY(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let i=HY(e.doc,t,r.type);i!=null&&(t=n=i)}e.replaceRange(t,n,new Ne(ye.from(r),0,0))}function KY(e,t,n){let r=e.doc.resolve(t),i=e.doc.resolve(n),s=G6(r,i);for(let o=0;o<s.length;o++){let l=s[o],u=o==s.length-1;if(u&&l==0||r.node(l).type.contentMatch.validEnd)return e.delete(r.start(l),i.end(l));if(l>0&&(u||r.node(l-1).canReplace(r.index(l-1),i.indexAfter(l-1))))return e.delete(r.before(l),i.after(l))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(t-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o&&r.start(o-1)==i.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),i.index(o-1)))return e.delete(r.before(o),n);e.delete(t,n)}function G6(e,t){let n=[],r=Math.min(e.depth,t.depth);for(let i=r;i>=0;i--){let s=e.start(i);if(s<e.pos-(e.depth-i)||t.end(i)>t.pos+(t.depth-i)||e.node(i).type.spec.isolating||t.node(i).type.spec.isolating)break;(s==t.start(i)||i==e.depth&&i==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&i&&t.start(i-1)==s-1)&&n.push(i)}return n}class sc extends ir{constructor(t,n,r){super(),this.pos=t,this.attr=n,this.value=r}apply(t){let n=t.nodeAt(this.pos);if(!n)return bn.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return bn.fromReplace(t,this.pos,this.pos+1,new Ne(ye.from(i),0,n.isLeaf?0:1))}getMap(){return $r.empty}invert(t){return new sc(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new sc(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new sc(n.pos,n.attr,n.value)}}ir.jsonID("attr",sc);class Ad extends ir{constructor(t,n){super(),this.attr=t,this.value=n}apply(t){let n=Object.create(null);for(let i in t.attrs)n[i]=t.attrs[i];n[this.attr]=this.value;let r=t.type.create(n,t.content,t.marks);return bn.ok(r)}getMap(){return $r.empty}invert(t){return new Ad(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Ad(n.attr,n.value)}}ir.jsonID("docAttr",Ad);let pc=class extends Error{};pc=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n};pc.prototype=Object.create(Error.prototype);pc.prototype.constructor=pc;pc.prototype.name="TransformError";let W6=class{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new Td}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let n=this.maybeStep(t);if(n.failed)throw new pc(n.failed);return this}maybeStep(t){let n=t.apply(this.doc);return n.failed||this.addStep(t,n.doc),n}get docChanged(){return this.steps.length>0}addStep(t,n){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=n}replace(t,n=t,r=Ne.empty){let i=Um(this.doc,t,n,r);return i&&this.step(i),this}replaceWith(t,n,r){return this.replace(t,n,new Ne(ye.from(r),0,0))}delete(t,n){return this.replace(t,n,Ne.empty)}insert(t,n){return this.replaceWith(t,t,n)}replaceRange(t,n,r){return GY(this,t,n,r),this}replaceRangeWith(t,n,r){return WY(this,t,n,r),this}deleteRange(t,n){return KY(this,t,n),this}lift(t,n){return RY(this,t,n),this}join(t,n=1){return qY(this,t,n),this}wrap(t,n){return LY(this,t,n),this}setBlockType(t,n=t,r,i=null){return PY(this,t,n,r,i),this}setNodeMarkup(t,n,r=null,i){return BY(this,t,n,r,i),this}setNodeAttribute(t,n,r){return this.step(new sc(t,n,r)),this}setDocAttribute(t,n){return this.step(new Ad(t,n)),this}addNodeMark(t,n){return this.step(new Do(t,n)),this}removeNodeMark(t,n){let r=this.doc.nodeAt(t);if(!r)throw new RangeError("No node at position "+t);if(n instanceof Dt)n.isInSet(r.marks)&&this.step(new Va(t,n));else{let i=r.marks,s,o=[];for(;s=n.isInSet(i);)o.push(new Va(t,s)),i=s.removeFromSet(i);for(let l=o.length-1;l>=0;l--)this.step(o[l])}return this}split(t,n=1,r){return zY(this,t,n,r),this}addMark(t,n,r){return MY(this,t,n,r),this}removeMark(t,n,r){return _Y(this,t,n,r),this}clearIncompatible(t,n,r){return kE(this,t,n,r),this}};const ub=Object.create(null);let Je=class{constructor(t,n,r){this.$anchor=t,this.$head=n,this.ranges=r||[new YY(t.min(n),t.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let n=0;n<t.length;n++)if(t[n].$from.pos!=t[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,n=Ne.empty){let r=n.content.lastChild,i=null;for(let l=0;l<n.openEnd;l++)i=r,r=r.lastChild;let s=t.steps.length,o=this.ranges;for(let l=0;l<o.length;l++){let{$from:u,$to:d}=o[l],h=t.mapping.slice(s);t.replaceRange(h.map(u.pos),h.map(d.pos),l?Ne.empty:n),l==0&&hD(t,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(t,n){let r=t.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:l}=i[s],u=t.mapping.slice(r),d=u.map(o.pos),h=u.map(l.pos);s?t.deleteRange(d,h):(t.replaceRangeWith(d,h,n),hD(t,r,n.isInline?-1:1))}}static findFrom(t,n,r=!1){let i=t.parent.inlineContent?new Ye(t):$l(t.node(0),t.parent,t.pos,t.index(),n,r);if(i)return i;for(let s=t.depth-1;s>=0;s--){let o=n<0?$l(t.node(0),t.node(s),t.before(s+1),t.index(s),n,r):$l(t.node(0),t.node(s),t.after(s+1),t.index(s)+1,n,r);if(o)return o}return null}static near(t,n=1){return this.findFrom(t,n)||this.findFrom(t,-n)||new Wr(t.node(0))}static atStart(t){return $l(t,t,0,0,1)||new Wr(t)}static atEnd(t){return $l(t,t,t.content.size,t.childCount,-1)||new Wr(t)}static fromJSON(t,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=ub[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in ub)throw new RangeError("Duplicate use of selection JSON ID "+t);return ub[t]=n,n.prototype.jsonID=t,n}getBookmark(){return Ye.between(this.$anchor,this.$head).getBookmark()}};Je.prototype.visible=!0;class YY{constructor(t,n){this.$from=t,this.$to=n}}let dD=!1;function fD(e){!dD&&!e.parent.inlineContent&&(dD=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class Ye extends Je{constructor(t,n=t){fD(t),fD(n),super(t,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,n){let r=t.resolve(n.map(this.head));if(!r.parent.inlineContent)return Je.near(r);let i=t.resolve(n.map(this.anchor));return new Ye(i.parent.inlineContent?i:r,r)}replace(t,n=Ne.empty){if(super.replace(t,n),n==Ne.empty){let r=this.$from.marksAcross(this.$to);r&&t.ensureMarks(r)}}eq(t){return t instanceof Ye&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new $m(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new Ye(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,r=n){let i=t.resolve(n);return new this(i,r==n?i:t.resolve(r))}static between(t,n,r){let i=t.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=Je.findFrom(n,r,!0)||Je.findFrom(n,-r,!0);if(s)n=s.$head;else return Je.near(n,r)}return t.parent.inlineContent||(i==0?t=n:(t=(Je.findFrom(t,-r,!0)||Je.findFrom(t,r,!0)).$anchor,t.pos<n.pos!=i<0&&(t=n))),new Ye(t,n)}}Je.jsonID("text",Ye);class $m{constructor(t,n){this.anchor=t,this.head=n}map(t){return new $m(t.map(this.anchor),t.map(this.head))}resolve(t){return Ye.between(t.resolve(this.anchor),t.resolve(this.head))}}class Ve extends Je{constructor(t){let n=t.nodeAfter,r=t.node(0).resolve(t.pos+n.nodeSize);super(t,r),this.node=n}map(t,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=t.resolve(i);return r?Je.near(s):new Ve(s)}content(){return new Ne(ye.from(this.node),0,0)}eq(t){return t instanceof Ve&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new NE(this.anchor)}static fromJSON(t,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Ve(t.resolve(n.anchor))}static create(t,n){return new Ve(t.resolve(n))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}}Ve.prototype.visible=!1;Je.jsonID("node",Ve);class NE{constructor(t){this.anchor=t}map(t){let{deleted:n,pos:r}=t.mapResult(this.anchor);return n?new $m(r,r):new NE(r)}resolve(t){let n=t.resolve(this.anchor),r=n.nodeAfter;return r&&Ve.isSelectable(r)?new Ve(n):Je.near(n)}}class Wr extends Je{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,n=Ne.empty){if(n==Ne.empty){t.delete(0,t.doc.content.size);let r=Je.atStart(t.doc);r.eq(t.selection)||t.setSelection(r)}else super.replace(t,n)}toJSON(){return{type:"all"}}static fromJSON(t){return new Wr(t)}map(t){return new Wr(t)}eq(t){return t instanceof Wr}getBookmark(){return XY}}Je.jsonID("all",Wr);const XY={map(){return this},resolve(e){return new Wr(e)}};function $l(e,t,n,r,i,s=!1){if(t.inlineContent)return Ye.create(e,n);for(let o=r-(i>0?0:1);i>0?o<t.childCount:o>=0;o+=i){let l=t.child(o);if(l.isAtom){if(!s&&Ve.isSelectable(l))return Ve.create(e,n-(i<0?l.nodeSize:0))}else{let u=$l(e,l,n+i,i<0?l.childCount:0,i,s);if(u)return u}n+=l.nodeSize*i}return null}function hD(e,t,n){let r=e.steps.length-1;if(r<t)return;let i=e.steps[r];if(!(i instanceof On||i instanceof Ln))return;let s=e.mapping.maps[r],o;s.forEach((l,u,d,h)=>{o==null&&(o=h)}),e.setSelection(Je.near(e.doc.resolve(o),n))}const pD=1,Ih=2,mD=4;class ZY extends W6{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|pD)&~Ih,this.storedMarks=null,this}get selectionSet(){return(this.updated&pD)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=Ih,this}ensureMarks(t){return Dt.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Ih)>0}addStep(t,n){super.addStep(t,n),this.updated=this.updated&~Ih,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,n=!0){let r=this.selection;return n&&(t=t.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||Dt.none))),r.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,n,r){let i=this.doc.type.schema;if(n==null)return t?this.replaceSelectionWith(i.text(t),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!t)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(t,s)),this.selection.empty||this.setSelection(Je.near(this.selection.$to)),this}}setMeta(t,n){return this.meta[typeof t=="string"?t:t.key]=n,this}getMeta(t){return this.meta[typeof t=="string"?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=mD,this}get scrolledIntoView(){return(this.updated&mD)>0}}function gD(e,t){return!t||!e?e:e.bind(t)}class Gu{constructor(t,n,r){this.name=t,this.init=gD(n.init,r),this.apply=gD(n.apply,r)}}const QY=[new Gu("doc",{init(e){return e.doc||e.schema.topNodeType.createAndFill()},apply(e){return e.doc}}),new Gu("selection",{init(e,t){return e.selection||Je.atStart(t.doc)},apply(e){return e.selection}}),new Gu("storedMarks",{init(e){return e.storedMarks||null},apply(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new Gu("scrollToSelection",{init(){return 0},apply(e,t){return e.scrolledIntoView?t+1:t}})];class db{constructor(t,n){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=QY.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Gu(r.key,r.spec.state,r))})}}class tc{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let n=[t],r=this.applyInner(t),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let l=this.config.plugins[o];if(l.spec.appendTransaction){let u=i?i[o].n:0,d=i?i[o].state:this,h=u<n.length&&l.spec.appendTransaction.call(l,u?n.slice(u):n,d,r);if(h&&r.filterTransaction(h,o)){if(h.setMeta("appendedTransaction",t),!i){i=[];for(let p=0;p<this.config.plugins.length;p++)i.push(p<o?{state:r,n:n.length}:{state:this,n:0})}n.push(h),r=r.applyInner(h),s=!0}i&&(i[o]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new tc(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(t,this[s.name],this,n)}return n}get tr(){return new ZY(this)}static create(t){let n=new db(t.doc?t.doc.type.schema:t.schema,t.plugins),r=new tc(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(t,r);return r}reconfigure(t){let n=new db(this.schema,t.plugins),r=n.fields,i=new tc(n);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(t,i)}return i}toJSON(t){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),t&&typeof t=="object")for(let r in t){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=t[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(t,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let i=new db(t.schema,t.plugins),s=new tc(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=jo.fromJSON(t.schema,n.doc);else if(o.name=="selection")s.selection=Je.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(t.schema.markFromJSON));else{if(r)for(let l in r){let u=r[l],d=u.spec.state;if(u.key==o.name&&d&&d.fromJSON&&Object.prototype.hasOwnProperty.call(n,l)){s[o.name]=d.fromJSON.call(u,t,n[l],s);return}}s[o.name]=o.init(t,s)}}),s}}function K6(e,t,n){for(let r in e){let i=e[r];i instanceof Function?i=i.bind(t):r=="handleDOMEvents"&&(i=K6(i,t,{})),n[r]=i}return n}class sn{constructor(t){this.spec=t,this.props={},t.props&&K6(t.props,this,this.props),this.key=t.key?t.key.key:Y6("plugin")}getState(t){return t[this.key]}}const fb=Object.create(null);function Y6(e){return e in fb?e+"$"+ ++fb[e]:(fb[e]=0,e+"$")}class In{constructor(t="key"){this.key=Y6(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}const Gn=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},mc=function(e){let t=e.assignedSlot||e.parentNode;return t&&t.nodeType==11?t.host:t};let ZC=null;const _s=function(e,t,n){let r=ZC||(ZC=document.createRange());return r.setEnd(e,n??e.nodeValue.length),r.setStart(e,t||0),r},JY=function(){ZC=null},qa=function(e,t,n,r){return n&&(yD(e,t,n,r,-1)||yD(e,t,n,r,1))},eX=/^(img|br|input|textarea|hr)$/i;function yD(e,t,n,r,i){for(var s;;){if(e==n&&t==r)return!0;if(t==(i<0?0:fi(e))){let o=e.parentNode;if(!o||o.nodeType!=1||rf(e)||eX.test(e.nodeName)||e.contentEditable=="false")return!1;t=Gn(e)+(i<0?0:1),e=o}else if(e.nodeType==1){let o=e.childNodes[t+(i<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)t+=i;else return!1;else e=o,t=i<0?fi(e):0}else return!1}}function fi(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function tX(e,t){for(;;){if(e.nodeType==3&&t)return e;if(e.nodeType==1&&t>0){if(e.contentEditable=="false")return null;e=e.childNodes[t-1],t=fi(e)}else if(e.parentNode&&!rf(e))t=Gn(e),e=e.parentNode;else return null}}function nX(e,t){for(;;){if(e.nodeType==3&&t<e.nodeValue.length)return e;if(e.nodeType==1&&t<e.childNodes.length){if(e.contentEditable=="false")return null;e=e.childNodes[t],t=0}else if(e.parentNode&&!rf(e))t=Gn(e)+1,e=e.parentNode;else return null}}function rX(e,t,n){for(let r=t==0,i=t==fi(e);r||i;){if(e==n)return!0;let s=Gn(e);if(e=e.parentNode,!e)return!1;r=r&&s==0,i=i&&s==fi(e)}}function rf(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const Gm=function(e){return e.focusNode&&qa(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function wa(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function iX(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function sX(e,t,n){if(e.caretPositionFromPoint)try{let r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:Math.min(fi(r.offsetNode),r.offset)}}catch{}if(e.caretRangeFromPoint){let r=e.caretRangeFromPoint(t,n);if(r)return{node:r.startContainer,offset:Math.min(fi(r.startContainer),r.startOffset)}}}const is=typeof navigator<"u"?navigator:null,bD=typeof document<"u"?document:null,Go=is&&is.userAgent||"",QC=/Edge\/(\d+)/.exec(Go),X6=/MSIE \d/.exec(Go),JC=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Go),Er=!!(X6||JC||QC),Oo=X6?document.documentMode:JC?+JC[1]:QC?+QC[1]:0,mi=!Er&&/gecko\/(\d+)/i.test(Go);mi&&+(/Firefox\/(\d+)/.exec(Go)||[0,0])[1];const ek=!Er&&/Chrome\/(\d+)/.exec(Go),rr=!!ek,Z6=ek?+ek[1]:0,fr=!Er&&!!is&&/Apple Computer/.test(is.vendor),gc=fr&&(/Mobile\/\w+/.test(Go)||!!is&&is.maxTouchPoints>2),di=gc||(is?/Mac/.test(is.platform):!1),oX=is?/Win/.test(is.platform):!1,Ds=/Android \d/.test(Go),sf=!!bD&&"webkitFontSmoothing"in bD.documentElement.style,aX=sf?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function lX(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function ks(e,t){return typeof e=="number"?e:e[t]}function cX(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function xD(e,t,n){let r=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,s=e.dom.ownerDocument;for(let o=n||e.dom;o;){if(o.nodeType!=1){o=mc(o);continue}let l=o,u=l==s.body,d=u?lX(s):cX(l),h=0,p=0;if(t.top<d.top+ks(r,"top")?p=-(d.top-t.top+ks(i,"top")):t.bottom>d.bottom-ks(r,"bottom")&&(p=t.bottom-t.top>d.bottom-d.top?t.top+ks(i,"top")-d.top:t.bottom-d.bottom+ks(i,"bottom")),t.left<d.left+ks(r,"left")?h=-(d.left-t.left+ks(i,"left")):t.right>d.right-ks(r,"right")&&(h=t.right-d.right+ks(i,"right")),h||p)if(u)s.defaultView.scrollBy(h,p);else{let b=l.scrollLeft,v=l.scrollTop;p&&(l.scrollTop+=p),h&&(l.scrollLeft+=h);let S=l.scrollLeft-b,w=l.scrollTop-v;t={left:t.left-S,top:t.top-w,right:t.right-S,bottom:t.bottom-w}}let g=u?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(g))break;o=g=="absolute"?o.offsetParent:mc(o)}}function uX(e){let t=e.dom.getBoundingClientRect(),n=Math.max(0,t.top),r,i;for(let s=(t.left+t.right)/2,o=n+1;o<Math.min(innerHeight,t.bottom);o+=5){let l=e.root.elementFromPoint(s,o);if(!l||l==e.dom||!e.dom.contains(l))continue;let u=l.getBoundingClientRect();if(u.top>=n-20){r=l,i=u.top;break}}return{refDOM:r,refTop:i,stack:Q6(e.dom)}}function Q6(e){let t=[],n=e.ownerDocument;for(let r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=mc(r));return t}function dX({refDOM:e,refTop:t,stack:n}){let r=e?e.getBoundingClientRect().top:0;J6(n,r==0?0:r-t)}function J6(e,t){for(let n=0;n<e.length;n++){let{dom:r,top:i,left:s}=e[n];r.scrollTop!=i+t&&(r.scrollTop=i+t),r.scrollLeft!=s&&(r.scrollLeft=s)}}let zl=null;function fX(e){if(e.setActive)return e.setActive();if(zl)return e.focus(zl);let t=Q6(e);e.focus(zl==null?{get preventScroll(){return zl={preventScroll:!0},!0}}:void 0),zl||(zl=!1,J6(t,0))}function eB(e,t){let n,r=2e8,i,s=0,o=t.top,l=t.top,u,d;for(let h=e.firstChild,p=0;h;h=h.nextSibling,p++){let g;if(h.nodeType==1)g=h.getClientRects();else if(h.nodeType==3)g=_s(h).getClientRects();else continue;for(let b=0;b<g.length;b++){let v=g[b];if(v.top<=o&&v.bottom>=l){o=Math.max(v.bottom,o),l=Math.min(v.top,l);let S=v.left>t.left?v.left-t.left:v.right<t.left?t.left-v.right:0;if(S<r){n=h,r=S,i=S&&n.nodeType==3?{left:v.right<t.left?v.right:v.left,top:t.top}:t,h.nodeType==1&&S&&(s=p+(t.left>=(v.left+v.right)/2?1:0));continue}}else v.top>t.top&&!u&&v.left<=t.left&&v.right>=t.left&&(u=h,d={left:Math.max(v.left,Math.min(v.right,t.left)),top:v.top});!n&&(t.left>=v.right&&t.top>=v.top||t.left>=v.left&&t.top>=v.bottom)&&(s=p+1)}}return!n&&u&&(n=u,i=d,r=0),n&&n.nodeType==3?hX(n,i):!n||r&&n.nodeType==1?{node:e,offset:s}:eB(n,i)}function hX(e,t){let n=e.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(e,i+1),r.setStart(e,i);let s=So(r,1);if(s.top!=s.bottom&&TE(t,s))return{node:e,offset:i+(t.left>=(s.left+s.right)/2?1:0)}}return{node:e,offset:0}}function TE(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function pX(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}function mX(e,t,n){let{node:r,offset:i}=eB(t,n),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return e.docView.posFromDOM(r,i,s)}function gX(e,t,n,r){let i=-1;for(let s=t,o=!1;s!=e.dom;){let l=e.docView.nearestDesc(s,!0),u;if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)&&((u=l.dom.getBoundingClientRect()).width||u.height)&&(l.node.isBlock&&l.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(l.dom.nodeName)&&(!o&&u.left>r.left||u.top>r.top?i=l.posBefore:(!o&&u.right<r.left||u.bottom<r.top)&&(i=l.posAfter),o=!0),!l.contentDOM&&i<0&&!l.node.isText))return(l.node.isBlock?r.top<(u.top+u.bottom)/2:r.left<(u.left+u.right)/2)?l.posBefore:l.posAfter;s=l.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,n,-1)}function tB(e,t,n){let r=e.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let o=e.childNodes[s];if(o.nodeType==1){let l=o.getClientRects();for(let u=0;u<l.length;u++){let d=l[u];if(TE(t,d))return tB(o,t,d)}}if((s=(s+1)%r)==i)break}return e}function yX(e,t){let n=e.dom.ownerDocument,r,i=0,s=sX(n,t.left,t.top);s&&({node:r,offset:i}=s);let o=(e.root.elementFromPoint?e.root:n).elementFromPoint(t.left,t.top),l;if(!o||!e.dom.contains(o.nodeType!=1?o.parentNode:o)){let d=e.dom.getBoundingClientRect();if(!TE(t,d)||(o=tB(e.dom,t,d),!o))return null}if(fr)for(let d=o;r&&d;d=mc(d))d.draggable&&(r=void 0);if(o=pX(o,t),r){if(mi&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let h=r.childNodes[i],p;h.nodeName=="IMG"&&(p=h.getBoundingClientRect()).right<=t.left&&p.bottom>t.top&&i++}let d;sf&&i&&r.nodeType==1&&(d=r.childNodes[i-1]).nodeType==1&&d.contentEditable=="false"&&d.getBoundingClientRect().top>=t.top&&i--,r==e.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&t.top>r.lastChild.getBoundingClientRect().bottom?l=e.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(l=gX(e,r,i,t))}l==null&&(l=mX(e,o,t));let u=e.docView.nearestDesc(o,!0);return{pos:l,inside:u?u.posAtStart-u.border:-1}}function vD(e){return e.top<e.bottom||e.left<e.right}function So(e,t){let n=e.getClientRects();if(n.length){let r=n[t<0?0:n.length-1];if(vD(r))return r}return Array.prototype.find.call(n,vD)||e.getBoundingClientRect()}const bX=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function nB(e,t,n){let{node:r,offset:i,atom:s}=e.docView.domFromPos(t,n<0?-1:1),o=sf||mi;if(r.nodeType==3)if(o&&(bX.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let u=So(_s(r,i,i),n);if(mi&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let d=So(_s(r,i-1,i-1),-1);if(d.top==u.top){let h=So(_s(r,i,i+1),-1);if(h.top!=u.top)return ju(h,h.left<d.left)}}return u}else{let u=i,d=i,h=n<0?1:-1;return n<0&&!i?(d++,h=-1):n>=0&&i==r.nodeValue.length?(u--,h=1):n<0?u--:d++,ju(So(_s(r,u,d),h),h<0)}if(!e.state.doc.resolve(t-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==fi(r))){let u=r.childNodes[i-1];if(u.nodeType==1)return hb(u.getBoundingClientRect(),!1)}if(s==null&&i<fi(r)){let u=r.childNodes[i];if(u.nodeType==1)return hb(u.getBoundingClientRect(),!0)}return hb(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==fi(r))){let u=r.childNodes[i-1],d=u.nodeType==3?_s(u,fi(u)-(o?0:1)):u.nodeType==1&&(u.nodeName!="BR"||!u.nextSibling)?u:null;if(d)return ju(So(d,1),!1)}if(s==null&&i<fi(r)){let u=r.childNodes[i];for(;u.pmViewDesc&&u.pmViewDesc.ignoreForCoords;)u=u.nextSibling;let d=u?u.nodeType==3?_s(u,0,o?0:1):u.nodeType==1?u:null:null;if(d)return ju(So(d,-1),!0)}return ju(So(r.nodeType==3?_s(r):r,-n),n>=0)}function ju(e,t){if(e.width==0)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function hb(e,t){if(e.height==0)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function rB(e,t,n){let r=e.state,i=e.root.activeElement;r!=t&&e.updateState(t),i!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),i!=e.dom&&i&&i.focus()}}function xX(e,t,n){let r=t.selection,i=n=="up"?r.$from:r.$to;return rB(e,t,()=>{let{node:s}=e.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let l=e.docView.nearestDesc(s,!0);if(!l)break;if(l.node.isBlock){s=l.contentDOM||l.dom;break}s=l.dom.parentNode}let o=nB(e,i.pos,1);for(let l=s.firstChild;l;l=l.nextSibling){let u;if(l.nodeType==1)u=l.getClientRects();else if(l.nodeType==3)u=_s(l,0,l.nodeValue.length).getClientRects();else continue;for(let d=0;d<u.length;d++){let h=u[d];if(h.bottom>h.top+1&&(n=="up"?o.top-h.top>(h.bottom-o.top)*2:h.bottom-o.bottom>(o.bottom-h.top)*2))return!1}}return!0})}const vX=/[\u0590-\u08ac]/;function wX(e,t,n){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,l=e.domSelection();return l?!vX.test(r.parent.textContent)||!l.modify?n=="left"||n=="backward"?s:o:rB(e,t,()=>{let{focusNode:u,focusOffset:d,anchorNode:h,anchorOffset:p}=e.domSelectionRange(),g=l.caretBidiLevel;l.modify("move",n,"character");let b=r.depth?e.docView.domAfterPos(r.before()):e.dom,{focusNode:v,focusOffset:S}=e.domSelectionRange(),w=v&&!b.contains(v.nodeType==1?v:v.parentNode)||u==v&&d==S;try{l.collapse(h,p),u&&(u!=h||d!=p)&&l.extend&&l.extend(u,d)}catch{}return g!=null&&(l.caretBidiLevel=g),w}):r.pos==r.start()||r.pos==r.end()}let wD=null,SD=null,CD=!1;function SX(e,t,n){return wD==t&&SD==n?CD:(wD=t,SD=n,CD=n=="up"||n=="down"?xX(e,t,n):wX(e,t,n))}const gi=0,kD=1,ka=2,ss=3;class of{constructor(t,n,r,i){this.parent=t,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=gi,r.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,n,r){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let n=0;n<this.children.length;n++)t+=this.children[n].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==t)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,n,r){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(r<0){let s,o;if(t==this.contentDOM)s=t.childNodes[n-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(t==this.contentDOM)s=t.childNodes[n];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(t==this.dom&&this.contentDOM)i=n>Gn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=t;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==t.childNodes.length)for(let s=t;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(t,n=!1){for(let r=!0,i=t;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!n||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(t.nodeType==1?t:t.parentNode):o==t))r=!1;else return s}}getDesc(t){let n=t.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(t,n,r){for(let i=t;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(t,n,r)}return-1}descAt(t){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==t&&s!=r){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let l=i.children[o];if(l.size){i=l;break}}return i}if(t<s)return i.descAt(t-r-i.border);r=s}}domFromPos(t,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],l=s+o.size;if(l>t||o instanceof sB){i=t-s;break}s=l}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof iB&&s.side>=0;r--);if(n<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?Gn(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?Gn(s.dom):this.contentDOM.childNodes.length}}}parseRange(t,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:t,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,l=0;;l++){let u=this.children[l],d=o+u.size;if(i==-1&&t<=d){let h=o+u.border;if(t>=h&&n<=d-u.border&&u.node&&u.contentDOM&&this.contentDOM.contains(u.contentDOM))return u.parseRange(t,n,h);t=o;for(let p=l;p>0;p--){let g=this.children[p-1];if(g.size&&g.dom.parentNode==this.contentDOM&&!g.emptyChildAt(1)){i=Gn(g.dom)+1;break}t-=g.size}i==-1&&(i=0)}if(i>-1&&(d>n||l==this.children.length-1)){n=d;for(let h=l+1;h<this.children.length;h++){let p=this.children[h];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(-1)){s=Gn(p.dom);break}n+=p.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=d}return{node:this.contentDOM,from:t,to:n,fromOffset:i,toOffset:s}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[t<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(t)}domAfterPos(t){let{node:n,offset:r}=this.domFromPos(t,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[r]}setSelection(t,n,r,i=!1){let s=Math.min(t,n),o=Math.max(t,n);for(let b=0,v=0;b<this.children.length;b++){let S=this.children[b],w=v+S.size;if(s>v&&o<w)return S.setSelection(t-v-S.border,n-v-S.border,r,i);v=w}let l=this.domFromPos(t,t?-1:1),u=n==t?l:this.domFromPos(n,n?-1:1),d=r.root.getSelection(),h=r.domSelectionRange(),p=!1;if((mi||fr)&&t==n){let{node:b,offset:v}=l;if(b.nodeType==3){if(p=!!(v&&b.nodeValue[v-1]==`
`),p&&v==b.nodeValue.length)for(let S=b,w;S;S=S.parentNode){if(w=S.nextSibling){w.nodeName=="BR"&&(l=u={node:w.parentNode,offset:Gn(w)+1});break}let k=S.pmViewDesc;if(k&&k.node&&k.node.isBlock)break}}else{let S=b.childNodes[v-1];p=S&&(S.nodeName=="BR"||S.contentEditable=="false")}}if(mi&&h.focusNode&&h.focusNode!=u.node&&h.focusNode.nodeType==1){let b=h.focusNode.childNodes[h.focusOffset];b&&b.contentEditable=="false"&&(i=!0)}if(!(i||p&&fr)&&qa(l.node,l.offset,h.anchorNode,h.anchorOffset)&&qa(u.node,u.offset,h.focusNode,h.focusOffset))return;let g=!1;if((d.extend||t==n)&&!(p&&mi)){d.collapse(l.node,l.offset);try{t!=n&&d.extend(u.node,u.offset),g=!0}catch{}}if(!g){if(t>n){let v=l;l=u,u=v}let b=document.createRange();b.setEnd(u.node,u.offset),b.setStart(l.node,l.offset),d.removeAllRanges(),d.addRange(b)}}ignoreMutation(t){return!this.contentDOM&&t.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?t<=o&&n>=r:t<o&&n>r){let l=r+s.border,u=o-s.border;if(t>=l&&n<=u){this.dirty=t==r||n==o?ka:kD,t==l&&n==u&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=ss:s.markDirty(t-l,n-l);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?ka:ss}r=o}this.dirty=ka}markParentsDirty(){let t=1;for(let n=this.parent;n;n=n.parent,t++){let r=t==1?ka:kD;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(t){return!1}}class iB extends of{constructor(t,n,r,i){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let l=document.createElement("span");l.appendChild(o),o=l}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(t,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(t){return this.dirty==gi&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let n=this.widget.spec.stopEvent;return n?n(t):!1}ignoreMutation(t){return t.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class CX extends of{constructor(t,n,r,i){super(t,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(t,n){return t!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return t.type==="characterData"&&t.target.nodeValue==t.oldValue}}class Ha extends of{constructor(t,n,r,i,s){super(t,[],r,i),this.mark=n,this.spec=s}static create(t,n,r,i){let s=i.nodeViews[n.type.name],o=s&&s(n,i,r);return(!o||!o.dom)&&(o=Qa.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new Ha(t,n,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&ss||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(t){return this.dirty!=ss&&this.mark.eq(t)}markDirty(t,n){if(super.markDirty(t,n),this.dirty!=gi){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=gi}}slice(t,n,r){let i=Ha.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;n<o&&(s=nk(s,n,o,r)),t>0&&(s=nk(s,0,t,r));for(let l=0;l<s.length;l++)s[l].parent=i;return i.children=s,i}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Lo extends of{constructor(t,n,r,i,s,o,l,u,d){super(t,[],s,o),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=l}static create(t,n,r,i,s,o){let l=s.nodeViews[n.type.name],u,d=l&&l(n,s,()=>{if(!u)return o;if(u.parent)return u.parent.posBeforeChild(u)},r,i),h=d&&d.dom,p=d&&d.contentDOM;if(n.isText){if(!h)h=document.createTextNode(n.text);else if(h.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else h||({dom:h,contentDOM:p}=Qa.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!p&&!n.isText&&h.nodeName!="BR"&&(h.hasAttribute("contenteditable")||(h.contentEditable="false"),n.type.spec.draggable&&(h.draggable=!0));let g=h;return h=lB(h,r,n),d?u=new kX(t,n,r,i,h,p||null,g,d,s,o+1):n.isText?new Wm(t,n,r,i,h,g,s):new Lo(t,n,r,i,h,p||null,g,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(t.preserveWhitespace="full"),!this.contentDOM)t.getContent=()=>this.node.content;else if(!this.contentLost)t.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){t.contentElement=r.dom.parentNode;break}}t.contentElement||(t.getContent=()=>ye.empty)}return t}matchesNode(t,n,r){return this.dirty==gi&&t.eq(this.node)&&Op(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,n){let r=this.node.inlineContent,i=n,s=t.composing?this.localCompositionInfo(t,n):null,o=s&&s.pos>-1?s:null,l=s&&s.pos<0,u=new NX(this,o&&o.node,t);MX(this.node,this.innerDeco,(d,h,p)=>{d.spec.marks?u.syncToMarks(d.spec.marks,r,t):d.type.side>=0&&!p&&u.syncToMarks(h==this.node.childCount?Dt.none:this.node.child(h).marks,r,t),u.placeWidget(d,t,i)},(d,h,p,g)=>{u.syncToMarks(d.marks,r,t);let b;u.findNodeMatch(d,h,p,g)||l&&t.state.selection.from>i&&t.state.selection.to<i+d.nodeSize&&(b=u.findIndexWithChild(s.node))>-1&&u.updateNodeAt(d,h,p,b,t)||u.updateNextNode(d,h,p,t,g,i)||u.addNode(d,h,p,t,i),i+=d.nodeSize}),u.syncToMarks([],r,t),this.node.isTextblock&&u.addTextblockHacks(),u.destroyRest(),(u.changed||this.dirty==ka)&&(o&&this.protectLocalComposition(t,o),oB(this.contentDOM,this.children,t),gc&&_X(this.dom))}localCompositionInfo(t,n){let{from:r,to:i}=t.state.selection;if(!(t.state.selection instanceof Ye)||r<n||i>n+this.node.content.size)return null;let s=t.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,l=DX(this.node.content,o,r-n,i-n);return l<0?null:{node:s,pos:l,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(t,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new CX(this,s,n,i);t.input.compositionNodes.push(o),this.children=nk(this.children,r,r+i.length,t,o)}update(t,n,r,i){return this.dirty==ss||!t.sameMarkup(this.node)?!1:(this.updateInner(t,n,r,i),!0)}updateInner(t,n,r,i){this.updateOuterDeco(n),this.node=t,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=gi}updateOuterDeco(t){if(Op(t,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=aB(this.dom,this.nodeDOM,tk(this.outerDeco,this.node,n),tk(t,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function ED(e,t,n,r,i){lB(r,t,e);let s=new Lo(void 0,e,t,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class Wm extends Lo{constructor(t,n,r,i,s,o,l){super(t,n,r,i,s,null,o,l,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,n,r,i){return this.dirty==ss||this.dirty!=gi&&!this.inParent()||!t.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=gi||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=t,this.dirty=gi,!0)}inParent(){let t=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,n,r){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(t,n,r)}ignoreMutation(t){return t.type!="characterData"&&t.type!="selection"}slice(t,n,r){let i=this.node.cut(t,n),s=document.createTextNode(i.text);return new Wm(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(t,n){super.markDirty(t,n),this.dom!=this.nodeDOM&&(t==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=ss)}get domAtom(){return!1}isText(t){return this.node.text==t}}class sB extends of{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==gi&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class kX extends Lo{constructor(t,n,r,i,s,o,l,u,d,h){super(t,n,r,i,s,o,l,d,h),this.spec=u}update(t,n,r,i){if(this.dirty==ss)return!1;if(this.spec.update&&(this.node.type==t.type||this.spec.multiType)){let s=this.spec.update(t,n,r);return s&&this.updateInner(t,n,r,i),s}else return!this.contentDOM&&!t.isLeaf?!1:super.update(t,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,n,r,i){this.spec.setSelection?this.spec.setSelection(t,n,r.root):super.setSelection(t,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return this.spec.stopEvent?this.spec.stopEvent(t):!1}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function oB(e,t,n){let r=e.firstChild,i=!1;for(let s=0;s<t.length;s++){let o=t[s],l=o.dom;if(l.parentNode==e){for(;l!=r;)r=ND(r),i=!0;r=r.nextSibling}else i=!0,e.insertBefore(l,r);if(o instanceof Ha){let u=r?r.previousSibling:e.lastChild;oB(o.contentDOM,o.children,n),r=u?u.nextSibling:e.firstChild}}for(;r;)r=ND(r),i=!0;i&&n.trackWrites==e&&(n.trackWrites=null)}const ad=function(e){e&&(this.nodeName=e)};ad.prototype=Object.create(null);const Ea=[new ad];function tk(e,t,n){if(e.length==0)return Ea;let r=n?Ea[0]:new ad,i=[r];for(let s=0;s<e.length;s++){let o=e[s].type.attrs;if(o){o.nodeName&&i.push(r=new ad(o.nodeName));for(let l in o){let u=o[l];u!=null&&(n&&i.length==1&&i.push(r=new ad(t.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+u:l=="style"?r.style=(r.style?r.style+";":"")+u:l!="nodeName"&&(r[l]=u))}}}return i}function aB(e,t,n,r){if(n==Ea&&r==Ea)return t;let i=t;for(let s=0;s<r.length;s++){let o=r[s],l=n[s];if(s){let u;l&&l.nodeName==o.nodeName&&i!=e&&(u=i.parentNode)&&u.nodeName.toLowerCase()==o.nodeName||(u=document.createElement(o.nodeName),u.pmIsDeco=!0,u.appendChild(i),l=Ea[0]),i=u}EX(i,l||Ea[0],o)}return i}function EX(e,t,n){for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&e.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){let r=t.class?t.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&e.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&e.classList.add(i[s]);e.classList.length==0&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(t.style);)e.style.removeProperty(i[1])}n.style&&(e.style.cssText+=n.style)}}function lB(e,t,n){return aB(e,e,Ea,tk(t,n,e.nodeType!=1))}function Op(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function ND(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class NX{constructor(t,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=TX(t.node.content,t)}destroyBetween(t,n){if(t!=n){for(let r=t;r<n;r++)this.top.children[r].destroy();this.top.children.splice(t,n-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,n,r){let i=0,s=this.stack.length>>1,o=Math.min(s,t.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(t[i])&&t[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=gi,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<t.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let u=this.index;u<Math.min(this.index+3,this.top.children.length);u++){let d=this.top.children[u];if(d.matchesMark(t[s])&&!this.isLocked(d.dom)){l=u;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let u=Ha.create(this.top,t[s],n,r);this.top.children.splice(this.index,0,u),this.top=u,this.changed=!0}this.index=0,s++}}findNodeMatch(t,n,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(t,n,r))s=this.top.children.indexOf(o,this.index);else for(let l=this.index,u=Math.min(this.top.children.length,l+5);l<u;l++){let d=this.top.children[l];if(d.matchesNode(t,n,r)&&!this.preMatch.matched.has(d)){s=l;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(t,n,r,i,s){let o=this.top.children[i];return o.dirty==ss&&o.dom==o.contentDOM&&(o.dirty=ka),o.update(t,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(t){for(;;){let n=t.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=t.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}t=n}}updateNextNode(t,n,r,i,s,o){for(let l=this.index;l<this.top.children.length;l++){let u=this.top.children[l];if(u instanceof Lo){let d=this.preMatch.matched.get(u);if(d!=null&&d!=s)return!1;let h=u.dom,p,g=this.isLocked(h)&&!(t.isText&&u.node&&u.node.isText&&u.nodeDOM.nodeValue==t.text&&u.dirty!=ss&&Op(n,u.outerDeco));if(!g&&u.update(t,n,r,i))return this.destroyBetween(this.index,l),u.dom!=h&&(this.changed=!0),this.index++,!0;if(!g&&(p=this.recreateWrapper(u,t,n,r,i,o)))return this.destroyBetween(this.index,l),this.top.children[this.index]=p,p.contentDOM&&(p.dirty=ka,p.updateChildren(i,o+1),p.dirty=gi),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,n,r,i,s,o){if(t.dirty||n.isAtom||!t.children.length||!t.node.content.eq(n.content)||!Op(r,t.outerDeco)||!i.eq(t.innerDeco))return null;let l=Lo.create(this.top,n,r,i,s,o);if(l.contentDOM){l.children=t.children,t.children=[];for(let u of l.children)u.parent=l}return t.destroy(),l}addNode(t,n,r,i,s){let o=Lo.create(this.top,t,n,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(t,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(t)&&(t==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new iB(this.top,t,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let t=this.top.children[this.index-1],n=this.top;for(;t instanceof Ha;)n=t,t=n.children[n.children.length-1];(!t||!(t instanceof Wm)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((fr||rr)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(t,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(t))this.index++;else{let r=document.createElement(t);t=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),t=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new sB(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||t.nodeType==1&&t.contains(this.lock.parentNode))}}function TX(e,t){let n=t,r=n.children.length,i=e.childCount,s=new Map,o=[];e:for(;i>0;){let l;for(;;)if(r){let d=n.children[r-1];if(d instanceof Ha)n=d,r=d.children.length;else{l=d,r--;break}}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}let u=l.node;if(u){if(u!=e.child(i-1))break;--i,s.set(l,i),o.push(l)}}return{index:i,matched:s,matches:o.reverse()}}function AX(e,t){return e.type.side-t.type.side}function MX(e,t,n,r){let i=t.locals(e),s=0;if(i.length==0){for(let d=0;d<e.childCount;d++){let h=e.child(d);r(h,i,t.forChild(s,h),d),s+=h.nodeSize}return}let o=0,l=[],u=null;for(let d=0;;){let h,p;for(;o<i.length&&i[o].to==s;){let w=i[o++];w.widget&&(h?(p||(p=[h])).push(w):h=w)}if(h)if(p){p.sort(AX);for(let w=0;w<p.length;w++)n(p[w],d,!!u)}else n(h,d,!!u);let g,b;if(u)b=-1,g=u,u=null;else if(d<e.childCount)b=d,g=e.child(d++);else break;for(let w=0;w<l.length;w++)l[w].to<=s&&l.splice(w--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)l.push(i[o++]);let v=s+g.nodeSize;if(g.isText){let w=v;o<i.length&&i[o].from<w&&(w=i[o].from);for(let k=0;k<l.length;k++)l[k].to<w&&(w=l[k].to);w<v&&(u=g.cut(w-s),g=g.cut(0,w-s),v=w,b=-1)}else for(;o<i.length&&i[o].to<v;)o++;let S=g.isInline&&!g.isLeaf?l.filter(w=>!w.inline):l.slice();r(g,S,t.forChild(s,g),b),s=v}}function _X(e){if(e.nodeName=="UL"||e.nodeName=="OL"){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function DX(e,t,n,r){for(let i=0,s=0;i<e.childCount&&s<=r;){let o=e.child(i++),l=s;if(s+=o.nodeSize,!o.isText)continue;let u=o.text;for(;i<e.childCount;){let d=e.child(i++);if(s+=d.nodeSize,!d.isText)break;u+=d.text}if(s>=n){if(s>=r&&u.slice(r-t.length-l,r-l)==t)return r-t.length;let d=l<r?u.lastIndexOf(t,r-l-1):-1;if(d>=0&&d+t.length+l>=n)return l+d;if(n==r&&u.length>=r+t.length-l&&u.slice(r-l,r-l+t.length)==t)return r}}return-1}function nk(e,t,n,r,i){let s=[];for(let o=0,l=0;o<e.length;o++){let u=e[o],d=l,h=l+=u.size;d>=n||h<=t?s.push(u):(d<t&&s.push(u.slice(0,t-d,r)),i&&(s.push(i),i=void 0),h>n&&s.push(u.slice(n-d,u.size,r)))}return s}function AE(e,t=null){let n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;let i=e.docView.nearestDesc(n.focusNode),s=i&&i.size==0,o=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let l=r.resolve(o),u,d;if(Gm(n)){for(u=o;i&&!i.node;)i=i.parent;let p=i.node;if(i&&p.isAtom&&Ve.isSelectable(p)&&i.parent&&!(p.isInline&&rX(n.focusNode,n.focusOffset,i.dom))){let g=i.posBefore;d=new Ve(o==g?l:r.resolve(g))}}else{if(n instanceof e.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let p=o,g=o;for(let b=0;b<n.rangeCount;b++){let v=n.getRangeAt(b);p=Math.min(p,e.docView.posFromDOM(v.startContainer,v.startOffset,1)),g=Math.max(g,e.docView.posFromDOM(v.endContainer,v.endOffset,-1))}if(p<0)return null;[u,o]=g==e.state.selection.anchor?[g,p]:[p,g],l=r.resolve(o)}else u=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(u<0)return null}let h=r.resolve(u);if(!d){let p=t=="pointer"||e.state.selection.head<l.pos&&!s?1:-1;d=ME(e,h,l,p)}return d}function cB(e){return e.editable?e.hasFocus():dB(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function Os(e,t=!1){let n=e.state.selection;if(uB(e,n),!!cB(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&rr){let r=e.domSelectionRange(),i=e.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&qa(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){e.input.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)jX(e);else{let{anchor:r,head:i}=n,s,o;TD&&!(n instanceof Ye)&&(n.$from.parent.inlineContent||(s=AD(e,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=AD(e,n.to))),e.docView.setSelection(r,i,e,t),TD&&(s&&MD(s),o&&MD(o)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&RX(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const TD=fr||rr&&Z6<63;function AD(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(fr&&i&&i.contentEditable=="false")return pb(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return pb(i);if(s)return pb(s)}}function pb(e){return e.contentEditable="true",fr&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function MD(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function RX(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{(!cB(e)||e.state.selection.visible)&&e.dom.classList.remove("ProseMirror-hideselection")},20))})}function jX(e){let t=e.domSelection();if(!t)return;let n=e.cursorWrapper.dom,r=n.nodeName=="IMG";r?t.collapse(n.parentNode,Gn(n)+1):t.collapse(n,0),!r&&!e.state.selection.visible&&Er&&Oo<=11&&(n.disabled=!0,n.disabled=!1)}function uB(e,t){if(t instanceof Ve){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(_D(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else _D(e)}function _D(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function ME(e,t,n,r){return e.someProp("createSelectionBetween",i=>i(e,t,n))||Ye.between(t,n,r)}function DD(e){return e.editable&&!e.hasFocus()?!1:dB(e)}function dB(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function OX(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return qa(t.node,t.offset,n.anchorNode,n.anchorOffset)}function rk(e,t){let{$anchor:n,$head:r}=e.selection,i=t>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return s&&Je.findFrom(s,t)}function Co(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function RD(e,t,n){let r=e.state.selection;if(r instanceof Ye)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=e.state.doc.resolve(i.pos+s.nodeSize*(t<0?-1:1));return Co(e,new Ye(r.$anchor,o))}else if(r.empty){if(e.endOfTextblock(t>0?"forward":"backward")){let i=rk(e.state,t);return i&&i instanceof Ve?Co(e,i):!1}else if(!(di&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let l=t<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=e.docView.descAt(l))&&!o.contentDOM?Ve.isSelectable(s)?Co(e,new Ve(t<0?e.state.doc.resolve(i.pos-s.nodeSize):i)):sf?Co(e,new Ye(e.state.doc.resolve(t<0?l:l+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Ve&&r.node.isInline)return Co(e,new Ye(t>0?r.$to:r.$from));{let i=rk(e.state,t);return i?Co(e,i):!1}}}function Lp(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function ld(e,t){let n=e.pmViewDesc;return n&&n.size==0&&(t<0||e.nextSibling||e.nodeName!="BR")}function Vl(e,t){return t<0?LX(e):PX(e)}function LX(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i,s,o=!1;for(mi&&n.nodeType==1&&r<Lp(n)&&ld(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let l=n.childNodes[r-1];if(ld(l,-1))i=n,s=--r;else if(l.nodeType==3)n=l,r=n.nodeValue.length;else break}}else{if(fB(n))break;{let l=n.previousSibling;for(;l&&ld(l,-1);)i=n.parentNode,s=Gn(l),l=l.previousSibling;if(l)n=l,r=Lp(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}}o?ik(e,n,r):i&&ik(e,i,s)}function PX(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i=Lp(n),s,o;for(;;)if(r<i){if(n.nodeType!=1)break;let l=n.childNodes[r];if(ld(l,1))s=n,o=++r;else break}else{if(fB(n))break;{let l=n.nextSibling;for(;l&&ld(l,1);)s=l.parentNode,o=Gn(l)+1,l=l.nextSibling;if(l)n=l,r=0,i=Lp(n);else{if(n=n.parentNode,n==e.dom)break;r=i=0}}}s&&ik(e,s,o)}function fB(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function IX(e,t){for(;e&&t==e.childNodes.length&&!rf(e);)t=Gn(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=0}}function BX(e,t){for(;e&&!t&&!rf(e);)t=Gn(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=e.childNodes.length}}function ik(e,t,n){if(t.nodeType!=3){let s,o;(o=IX(t,n))?(t=o,n=0):(s=BX(t,n))&&(t=s,n=s.nodeValue.length)}let r=e.domSelection();if(!r)return;if(Gm(r)){let s=document.createRange();s.setEnd(t,n),s.setStart(t,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(t,n);e.domObserver.setCurSelection();let{state:i}=e;setTimeout(()=>{e.state==i&&Os(e)},50)}function jD(e,t){let n=e.state.doc.resolve(t);if(!(rr||oX)&&n.parent.inlineContent){let i=e.coordsAtPos(t);if(t>n.start()){let s=e.coordsAtPos(t-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(t<n.end()){let s=e.coordsAtPos(t+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(e.dom).direction=="rtl"?"rtl":"ltr"}function OD(e,t,n){let r=e.state.selection;if(r instanceof Ye&&!r.empty||n.indexOf("s")>-1||di&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let o=rk(e.state,t);if(o&&o instanceof Ve)return Co(e,o)}if(!i.parent.inlineContent){let o=t<0?i:s,l=r instanceof Wr?Je.near(o,t):Je.findFrom(o,t);return l?Co(e,l):!1}return!1}function LD(e,t){if(!(e.state.selection instanceof Ye))return!0;let{$head:n,$anchor:r,empty:i}=e.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let s=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=e.state.tr;return t<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),e.dispatch(o),!0}return!1}function PD(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function zX(e){if(!fr||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&t.nodeType==1&&n==0&&t.firstChild&&t.firstChild.contentEditable=="false"){let r=t.firstChild;PD(e,r,"true"),setTimeout(()=>PD(e,r,"false"),20)}return!1}function VX(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function qX(e,t){let n=t.keyCode,r=VX(t);if(n==8||di&&n==72&&r=="c")return LD(e,-1)||Vl(e,-1);if(n==46&&!t.shiftKey||di&&n==68&&r=="c")return LD(e,1)||Vl(e,1);if(n==13||n==27)return!0;if(n==37||di&&n==66&&r=="c"){let i=n==37?jD(e,e.state.selection.from)=="ltr"?-1:1:-1;return RD(e,i,r)||Vl(e,i)}else if(n==39||di&&n==70&&r=="c"){let i=n==39?jD(e,e.state.selection.from)=="ltr"?1:-1:1;return RD(e,i,r)||Vl(e,i)}else{if(n==38||di&&n==80&&r=="c")return OD(e,-1,r)||Vl(e,-1);if(n==40||di&&n==78&&r=="c")return zX(e)||OD(e,1,r)||Vl(e,1);if(r==(di?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function _E(e,t){e.someProp("transformCopied",b=>{t=b(t,e)});let n=[],{content:r,openStart:i,openEnd:s}=t;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let b=r.firstChild;n.push(b.type.name,b.attrs!=b.type.defaultAttrs?b.attrs:null),r=b.content}let o=e.someProp("clipboardSerializer")||Qa.fromSchema(e.state.schema),l=bB(),u=l.createElement("div");u.appendChild(o.serializeFragment(r,{document:l}));let d=u.firstChild,h,p=0;for(;d&&d.nodeType==1&&(h=yB[d.nodeName.toLowerCase()]);){for(let b=h.length-1;b>=0;b--){let v=l.createElement(h[b]);for(;u.firstChild;)v.appendChild(u.firstChild);u.appendChild(v),p++}d=u.firstChild}d&&d.nodeType==1&&d.setAttribute("data-pm-slice",`${i} ${s}${p?` -${p}`:""} ${JSON.stringify(n)}`);let g=e.someProp("clipboardTextSerializer",b=>b(t,e))||t.content.textBetween(0,t.content.size,`

`);return{dom:u,text:g,slice:t}}function hB(e,t,n,r,i){let s=i.parent.type.spec.code,o,l;if(!n&&!t)return null;let u=!!t&&(r||s||!n);if(u){if(e.someProp("transformPastedText",g=>{t=g(t,s||r,e)}),s)return l=new Ne(ye.from(e.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0),e.someProp("transformPasted",g=>{l=g(l,e,!0)}),l;let p=e.someProp("clipboardTextParser",g=>g(t,i,r,e));if(p)l=p;else{let g=i.marks(),{schema:b}=e.state,v=Qa.fromSchema(b);o=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(S=>{let w=o.appendChild(document.createElement("p"));S&&w.appendChild(v.serializeNode(b.text(S,g)))})}}else e.someProp("transformPastedHTML",p=>{n=p(n,e)}),o=$X(n),sf&&GX(o);let d=o&&o.querySelector("[data-pm-slice]"),h=d&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(d.getAttribute("data-pm-slice")||"");if(h&&h[3])for(let p=+h[3];p>0;p--){let g=o.firstChild;for(;g&&g.nodeType!=1;)g=g.nextSibling;if(!g)break;o=g}if(l||(l=(e.someProp("clipboardParser")||e.someProp("domParser")||sd.fromSchema(e.state.schema)).parseSlice(o,{preserveWhitespace:!!(u||h),context:i,ruleFromNode(g){return g.nodeName=="BR"&&!g.nextSibling&&g.parentNode&&!HX.test(g.parentNode.nodeName)?{ignore:!0}:null}})),h)l=WX(ID(l,+h[1],+h[2]),h[4]);else if(l=Ne.maxOpen(FX(l.content,i),!0),l.openStart||l.openEnd){let p=0,g=0;for(let b=l.content.firstChild;p<l.openStart&&!b.type.spec.isolating;p++,b=b.firstChild);for(let b=l.content.lastChild;g<l.openEnd&&!b.type.spec.isolating;g++,b=b.lastChild);l=ID(l,p,g)}return e.someProp("transformPasted",p=>{l=p(l,e,u)}),l}const HX=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function FX(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let i=t.node(n).contentMatchAt(t.index(n)),s,o=[];if(e.forEach(l=>{if(!o)return;let u=i.findWrapping(l.type),d;if(!u)return o=null;if(d=o.length&&s.length&&mB(u,s,l,o[o.length-1],0))o[o.length-1]=d;else{o.length&&(o[o.length-1]=gB(o[o.length-1],s.length));let h=pB(l,u);o.push(h),i=i.matchType(h.type),s=u}}),o)return ye.from(o)}return e}function pB(e,t,n=0){for(let r=t.length-1;r>=n;r--)e=t[r].create(null,ye.from(e));return e}function mB(e,t,n,r,i){if(i<e.length&&i<t.length&&e[i]==t[i]){let s=mB(e,t,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==e.length-1?n.type:e[i+1]))return r.copy(r.content.append(ye.from(pB(n,e,i+1))))}}function gB(e,t){if(t==0)return e;let n=e.content.replaceChild(e.childCount-1,gB(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(ye.empty,!0);return e.copy(n.append(r))}function sk(e,t,n,r,i,s){let o=t<0?e.firstChild:e.lastChild,l=o.content;return e.childCount>1&&(s=0),i<r-1&&(l=sk(l,t,n,r,i+1,s)),i>=n&&(l=t<0?o.contentMatchAt(0).fillBefore(l,s<=i).append(l):l.append(o.contentMatchAt(o.childCount).fillBefore(ye.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,o.copy(l))}function ID(e,t,n){return t<e.openStart&&(e=new Ne(sk(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new Ne(sk(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const yB={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let BD=null;function bB(){return BD||(BD=document.implementation.createHTMLDocument("title"))}let mb=null;function UX(e){let t=window.trustedTypes;return t?(mb||(mb=t.defaultPolicy||t.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),mb.createHTML(e)):e}function $X(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n=bB().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(e),i;if((i=r&&yB[r[1].toLowerCase()])&&(e=i.map(s=>"<"+s+">").join("")+e+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=UX(e),i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function GX(e){let t=e.querySelectorAll(rr?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];r.childNodes.length==1&&r.textContent==""&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}function WX(e,t){if(!e.size)return e;let n=e.content.firstChild.type.schema,r;try{r=JSON.parse(t)}catch{return e}let{content:i,openStart:s,openEnd:o}=e;for(let l=r.length-2;l>=0;l-=2){let u=n.nodes[r[l]];if(!u||u.hasRequiredAttrs())break;i=ye.from(u.create(r[l+1],i)),s++,o++}return new Ne(i,s,o)}const hr={},pr={},KX={touchstart:!0,touchmove:!0};class YX{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function XX(e){for(let t in hr){let n=hr[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=r=>{QX(e,r)&&!DE(e,r)&&(e.editable||!(r.type in pr))&&n(e,r)},KX[t]?{passive:!0}:void 0)}fr&&e.dom.addEventListener("input",()=>null),ok(e)}function Ro(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function ZX(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}function ok(e){e.someProp("handleDOMEvents",t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=r=>DE(e,r))})}function DE(e,t){return e.someProp("handleDOMEvents",n=>{let r=n[t.type];return r?r(e,t)||t.defaultPrevented:!1})}function QX(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function JX(e,t){!DE(e,t)&&hr[t.type]&&(e.editable||!(t.type in pr))&&hr[t.type](e,t)}pr.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=n.keyCode==16||n.shiftKey,!vB(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!(Ds&&rr&&n.keyCode==13)))if(n.keyCode!=229&&e.domObserver.forceFlush(),gc&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();e.input.lastIOSEnter=r,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==r&&(e.someProp("handleKeyDown",i=>i(e,wa(13,"Enter"))),e.input.lastIOSEnter=0)},200)}else e.someProp("handleKeyDown",r=>r(e,n))||qX(e,n)?n.preventDefault():Ro(e,"key")};pr.keyup=(e,t)=>{t.keyCode==16&&(e.input.shiftKey=!1)};pr.keypress=(e,t)=>{let n=t;if(vB(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||di&&n.metaKey)return;if(e.someProp("handleKeyPress",i=>i(e,n))){n.preventDefault();return}let r=e.state.selection;if(!(r instanceof Ye)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),s=()=>e.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!e.someProp("handleTextInput",o=>o(e,r.$from.pos,r.$to.pos,i,s))&&e.dispatch(s()),n.preventDefault()}};function Km(e){return{left:e.clientX,top:e.clientY}}function eZ(e,t){let n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}function RE(e,t,n,r,i){if(r==-1)return!1;let s=e.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(e.someProp(t,l=>o>s.depth?l(e,n,s.nodeAfter,s.before(o),i,!0):l(e,n,s.node(o),s.before(o),i,!1)))return!0;return!1}function oc(e,t,n){if(e.focused||e.focus(),e.state.selection.eq(t))return;let r=e.state.tr.setSelection(t);r.setMeta("pointer",!0),e.dispatch(r)}function tZ(e,t){if(t==-1)return!1;let n=e.state.doc.resolve(t),r=n.nodeAfter;return r&&r.isAtom&&Ve.isSelectable(r)?(oc(e,new Ve(n)),!0):!1}function nZ(e,t){if(t==-1)return!1;let n=e.state.selection,r,i;n instanceof Ve&&(r=n.node);let s=e.state.doc.resolve(t);for(let o=s.depth+1;o>0;o--){let l=o>s.depth?s.nodeAfter:s.node(o);if(Ve.isSelectable(l)){r&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(o);break}}return i!=null?(oc(e,Ve.create(e.state.doc,i)),!0):!1}function rZ(e,t,n,r,i){return RE(e,"handleClickOn",t,n,r)||e.someProp("handleClick",s=>s(e,t,r))||(i?nZ(e,n):tZ(e,n))}function iZ(e,t,n,r){return RE(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",i=>i(e,t,r))}function sZ(e,t,n,r){return RE(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",i=>i(e,t,r))||oZ(e,n,r)}function oZ(e,t,n){if(n.button!=0)return!1;let r=e.state.doc;if(t==-1)return r.inlineContent?(oc(e,Ye.create(r,0,r.content.size)),!0):!1;let i=r.resolve(t);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),l=i.before(s);if(o.inlineContent)oc(e,Ye.create(r,l+1,l+1+o.content.size));else if(Ve.isSelectable(o))oc(e,Ve.create(r,l));else continue;return!0}}function jE(e){return Pp(e)}const xB=di?"metaKey":"ctrlKey";hr.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let r=jE(e),i=Date.now(),s="singleClick";i-e.input.lastClick.time<500&&eZ(n,e.input.lastClick)&&!n[xB]&&e.input.lastClick.button==n.button&&(e.input.lastClick.type=="singleClick"?s="doubleClick":e.input.lastClick.type=="doubleClick"&&(s="tripleClick")),e.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s,button:n.button};let o=e.posAtCoords(Km(n));o&&(s=="singleClick"?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new aZ(e,o,n,!!r)):(s=="doubleClick"?iZ:sZ)(e,o.pos,o.inside,n)?n.preventDefault():Ro(e,"pointer"))};class aZ{constructor(t,n,r,i){this.view=t,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!r[xB],this.allowDefault=r.shiftKey;let s,o;if(n.inside>-1)s=t.state.doc.nodeAt(n.inside),o=n.inside;else{let h=t.state.doc.resolve(n.pos);s=h.parent,o=h.depth?h.before():0}const l=i?null:r.target,u=l?t.docView.nearestDesc(l,!0):null;this.target=u&&u.nodeDOM.nodeType==1?u.nodeDOM:null;let{selection:d}=t.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||d instanceof Ve&&d.from<=o&&d.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&mi&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),Ro(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Os(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Km(t))),this.updateAllowDefault(t),this.allowDefault||!n?Ro(this.view,"pointer"):rZ(this.view,n.pos,n.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||fr&&this.mightDrag&&!this.mightDrag.node.isAtom||rr&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(oc(this.view,Je.near(this.view.state.doc.resolve(n.pos))),t.preventDefault()):Ro(this.view,"pointer")}move(t){this.updateAllowDefault(t),Ro(this.view,"pointer"),t.buttons==0&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}hr.touchstart=e=>{e.input.lastTouch=Date.now(),jE(e),Ro(e,"pointer")};hr.touchmove=e=>{e.input.lastTouch=Date.now(),Ro(e,"pointer")};hr.contextmenu=e=>jE(e);function vB(e,t){return e.composing?!0:fr&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500?(e.input.compositionEndedAt=-2e8,!0):!1}const lZ=Ds?5e3:-1;pr.compositionstart=pr.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$to;if(t.selection instanceof Ye&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))e.markCursor=e.state.storedMarks||n.marks(),Pp(e,!0),e.markCursor=null;else if(Pp(e,!t.selection.empty),mi&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=e.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let l=e.domSelection();l&&l.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}e.input.composing=!0}wB(e,lZ)};pr.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,wB(e,20))};function wB(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>Pp(e),t))}function SB(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=uZ());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function cZ(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let n=tX(t.focusNode,t.focusOffset),r=nX(t.focusNode,t.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,s=e.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(e.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function uZ(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function Pp(e,t=!1){if(!(Ds&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),SB(e),t||e.docView&&e.docView.dirty){let n=AE(e),r=e.state.selection;return n&&!n.eq(r)?e.dispatch(e.state.tr.setSelection(n)):(e.markCursor||t)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?e.dispatch(e.state.tr.deleteSelection()):e.updateState(e.state),!0}return!1}}function dZ(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}const Md=Er&&Oo<15||gc&&aX<604;hr.copy=pr.cut=(e,t)=>{let n=t,r=e.state.selection,i=n.type=="cut";if(r.empty)return;let s=Md?null:n.clipboardData,o=r.content(),{dom:l,text:u}=_E(e,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",l.innerHTML),s.setData("text/plain",u)):dZ(e,l),i&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function fZ(e){return e.openStart==0&&e.openEnd==0&&e.content.childCount==1?e.content.firstChild:null}function hZ(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=e.input.shiftKey&&e.input.lastKeyCode!=45;setTimeout(()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?_d(e,r.value,null,i,t):_d(e,r.textContent,r.innerHTML,i,t)},50)}function _d(e,t,n,r,i){let s=hB(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",u=>u(e,i,s||Ne.empty)))return!0;if(!s)return!1;let o=fZ(s),l=o?e.state.tr.replaceSelectionWith(o,r):e.state.tr.replaceSelection(s);return e.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function CB(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}pr.paste=(e,t)=>{let n=t;if(e.composing&&!Ds)return;let r=Md?null:n.clipboardData,i=e.input.shiftKey&&e.input.lastKeyCode!=45;r&&_d(e,CB(r),r.getData("text/html"),i,n)?n.preventDefault():hZ(e,n)};class kB{constructor(t,n,r){this.slice=t,this.move=n,this.node=r}}const pZ=di?"altKey":"ctrlKey";function EB(e,t){let n=e.someProp("dragCopies",r=>!r(t));return n??!t[pZ]}hr.dragstart=(e,t)=>{let n=t,r=e.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=e.state.selection,s=i.empty?null:e.posAtCoords(Km(n)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof Ve?i.to-1:i.to))){if(r&&r.mightDrag)o=Ve.create(e.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let p=e.docView.nearestDesc(n.target,!0);p&&p.node.type.spec.draggable&&p!=e.docView&&(o=Ve.create(e.state.doc,p.posBefore))}}let l=(o||e.state.selection).content(),{dom:u,text:d,slice:h}=_E(e,l);(!n.dataTransfer.files.length||!rr||Z6>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(Md?"Text":"text/html",u.innerHTML),n.dataTransfer.effectAllowed="copyMove",Md||n.dataTransfer.setData("text/plain",d),e.dragging=new kB(h,EB(e,n),o)};hr.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)};pr.dragover=pr.dragenter=(e,t)=>t.preventDefault();pr.drop=(e,t)=>{let n=t,r=e.dragging;if(e.dragging=null,!n.dataTransfer)return;let i=e.posAtCoords(Km(n));if(!i)return;let s=e.state.doc.resolve(i.pos),o=r&&r.slice;o?e.someProp("transformPasted",v=>{o=v(o,e,!1)}):o=hB(e,CB(n.dataTransfer),Md?null:n.dataTransfer.getData("text/html"),!1,s);let l=!!(r&&EB(e,n));if(e.someProp("handleDrop",v=>v(e,n,o||Ne.empty,l))){n.preventDefault();return}if(!o)return;n.preventDefault();let u=o?H6(e.state.doc,s.pos,o):s.pos;u==null&&(u=s.pos);let d=e.state.tr;if(l){let{node:v}=r;v?v.replace(d):d.deleteSelection()}let h=d.mapping.map(u),p=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,g=d.doc;if(p?d.replaceRangeWith(h,h,o.content.firstChild):d.replaceRange(h,h,o),d.doc.eq(g))return;let b=d.doc.resolve(h);if(p&&Ve.isSelectable(o.content.firstChild)&&b.nodeAfter&&b.nodeAfter.sameMarkup(o.content.firstChild))d.setSelection(new Ve(b));else{let v=d.mapping.map(u);d.mapping.maps[d.mapping.maps.length-1].forEach((S,w,k,T)=>v=T),d.setSelection(ME(e,b,d.doc.resolve(v)))}e.focus(),e.dispatch(d.setMeta("uiEvent","drop"))};hr.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&Os(e)},20))};hr.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)};hr.beforeinput=(e,t)=>{if(rr&&Ds&&t.inputType=="deleteContentBackward"){e.domObserver.flushSoon();let{domChangeCount:r}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=r||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",s=>s(e,wa(8,"Backspace")))))return;let{$cursor:i}=e.state.selection;i&&i.pos>0&&e.dispatch(e.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let e in pr)hr[e]=pr[e];function Dd(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class Ip{constructor(t,n){this.toDOM=t,this.spec=n||Oa,this.side=this.spec.side||0}map(t,n,r,i){let{pos:s,deleted:o}=t.mapResult(n.from+i,this.side<0?-1:1);return o?null:new dr(s-r,s-r,this)}valid(){return!0}eq(t){return this==t||t instanceof Ip&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&Dd(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class Po{constructor(t,n){this.attrs=t,this.spec=n||Oa}map(t,n,r,i){let s=t.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,o=t.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new dr(s,o,this)}valid(t,n){return n.from<n.to}eq(t){return this==t||t instanceof Po&&Dd(this.attrs,t.attrs)&&Dd(this.spec,t.spec)}static is(t){return t.type instanceof Po}destroy(){}}class OE{constructor(t,n){this.attrs=t,this.spec=n||Oa}map(t,n,r,i){let s=t.mapResult(n.from+i,1);if(s.deleted)return null;let o=t.mapResult(n.to+i,-1);return o.deleted||o.pos<=s.pos?null:new dr(s.pos-r,o.pos-r,this)}valid(t,n){let{index:r,offset:i}=t.content.findIndex(n.from),s;return i==n.from&&!(s=t.child(r)).isText&&i+s.nodeSize==n.to}eq(t){return this==t||t instanceof OE&&Dd(this.attrs,t.attrs)&&Dd(this.spec,t.spec)}destroy(){}}class dr{constructor(t,n,r){this.from=t,this.to=n,this.type=r}copy(t,n){return new dr(t,n,this.type)}eq(t,n=0){return this.type.eq(t.type)&&this.from+n==t.from&&this.to+n==t.to}map(t,n,r){return this.type.map(t,this,n,r)}static widget(t,n,r){return new dr(t,t,new Ip(n,r))}static inline(t,n,r,i){return new dr(t,n,new Po(r,i))}static node(t,n,r,i){return new dr(t,n,new OE(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Po}get widget(){return this.type instanceof Ip}}const Gl=[],Oa={};class Kt{constructor(t,n){this.local=t.length?t:Gl,this.children=n.length?n:Gl}static create(t,n){return n.length?Bp(n,t,0,Oa):tr}find(t,n,r){let i=[];return this.findInner(t??0,n??1e9,i,0,r),i}findInner(t,n,r,i,s){for(let o=0;o<this.local.length;o++){let l=this.local[o];l.from<=n&&l.to>=t&&(!s||s(l.spec))&&r.push(l.copy(l.from+i,l.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>t){let l=this.children[o]+1;this.children[o+2].findInner(t-l,n-l,r,i+l,s)}}map(t,n,r){return this==tr||t.maps.length==0?this:this.mapInner(t,n,0,0,r||Oa)}mapInner(t,n,r,i,s){let o;for(let l=0;l<this.local.length;l++){let u=this.local[l].map(t,r,i);u&&u.type.valid(n,u)?(o||(o=[])).push(u):s.onRemove&&s.onRemove(this.local[l].spec)}return this.children.length?mZ(this.children,o||[],t,n,r,i,s):o?new Kt(o.sort(La),Gl):tr}add(t,n){return n.length?this==tr?Kt.create(t,n):this.addInner(t,n,0):this}addInner(t,n,r){let i,s=0;t.forEach((l,u)=>{let d=u+r,h;if(h=TB(n,l,d)){for(i||(i=this.children.slice());s<i.length&&i[s]<u;)s+=3;i[s]==u?i[s+2]=i[s+2].addInner(l,h,d+1):i.splice(s,0,u,u+l.nodeSize,Bp(h,l,d+1,Oa)),s+=3}});let o=NB(s?AB(n):n,-r);for(let l=0;l<o.length;l++)o[l].type.valid(t,o[l])||o.splice(l--,1);return new Kt(o.length?this.local.concat(o).sort(La):this.local,i||this.children)}remove(t){return t.length==0||this==tr?this:this.removeInner(t,0)}removeInner(t,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,l=r[s]+n,u=r[s+1]+n;for(let h=0,p;h<t.length;h++)(p=t[h])&&p.from>l&&p.to<u&&(t[h]=null,(o||(o=[])).push(p));if(!o)continue;r==this.children&&(r=this.children.slice());let d=r[s+2].removeInner(o,l+1);d!=tr?r[s+2]=d:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<t.length;s++)if(o=t[s])for(let l=0;l<i.length;l++)i[l].eq(o,n)&&(i==this.local&&(i=this.local.slice()),i.splice(l--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new Kt(i,r):tr}forChild(t,n){if(this==tr)return this;if(n.isLeaf)return Kt.empty;let r,i;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=t){this.children[l]==t&&(r=this.children[l+2]);break}let s=t+1,o=s+n.content.size;for(let l=0;l<this.local.length;l++){let u=this.local[l];if(u.from<o&&u.to>s&&u.type instanceof Po){let d=Math.max(s,u.from)-s,h=Math.min(o,u.to)-s;d<h&&(i||(i=[])).push(u.copy(d,h))}}if(i){let l=new Kt(i.sort(La),Gl);return r?new No([l,r]):l}return r||tr}eq(t){if(this==t)return!0;if(!(t instanceof Kt)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(t.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!0}locals(t){return LE(this.localsInner(t))}localsInner(t){if(this==tr)return Gl;if(t.inlineContent||!this.local.some(Po.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Po||n.push(this.local[r]);return n}forEachSet(t){t(this)}}Kt.empty=new Kt([],[]);Kt.removeOverlap=LE;const tr=Kt.empty;class No{constructor(t){this.members=t}map(t,n){const r=this.members.map(i=>i.map(t,n,Oa));return No.from(r)}forChild(t,n){if(n.isLeaf)return Kt.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(t,n);s!=tr&&(s instanceof No?r=r.concat(s.members):r.push(s))}return No.from(r)}eq(t){if(!(t instanceof No)||t.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(t.members[n]))return!1;return!0}locals(t){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(t);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?LE(r?n:n.sort(La)):Gl}static from(t){switch(t.length){case 0:return tr;case 1:return t[0];default:return new No(t.every(n=>n instanceof Kt)?t:t.reduce((n,r)=>n.concat(r instanceof Kt?r:r.members),[]))}}forEachSet(t){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(t)}}function mZ(e,t,n,r,i,s,o){let l=e.slice();for(let d=0,h=s;d<n.maps.length;d++){let p=0;n.maps[d].forEach((g,b,v,S)=>{let w=S-v-(b-g);for(let k=0;k<l.length;k+=3){let T=l[k+1];if(T<0||g>T+h-p)continue;let E=l[k]+h-p;b>=E?l[k+1]=g<=E?-2:-1:g>=h&&w&&(l[k]+=w,l[k+1]+=w)}p+=w}),h=n.maps[d].map(h,-1)}let u=!1;for(let d=0;d<l.length;d+=3)if(l[d+1]<0){if(l[d+1]==-2){u=!0,l[d+1]=-1;continue}let h=n.map(e[d]+s),p=h-i;if(p<0||p>=r.content.size){u=!0;continue}let g=n.map(e[d+1]+s,-1),b=g-i,{index:v,offset:S}=r.content.findIndex(p),w=r.maybeChild(v);if(w&&S==p&&S+w.nodeSize==b){let k=l[d+2].mapInner(n,w,h+1,e[d]+s+1,o);k!=tr?(l[d]=p,l[d+1]=b,l[d+2]=k):(l[d+1]=-2,u=!0)}else u=!0}if(u){let d=gZ(l,e,t,n,i,s,o),h=Bp(d,r,0,o);t=h.local;for(let p=0;p<l.length;p+=3)l[p+1]<0&&(l.splice(p,3),p-=3);for(let p=0,g=0;p<h.children.length;p+=3){let b=h.children[p];for(;g<l.length&&l[g]<b;)g+=3;l.splice(g,0,h.children[p],h.children[p+1],h.children[p+2])}}return new Kt(t.sort(La),l)}function NB(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let i=e[r];n.push(new dr(i.from+t,i.to+t,i.type))}return n}function gZ(e,t,n,r,i,s,o){function l(u,d){for(let h=0;h<u.local.length;h++){let p=u.local[h].map(r,i,d);p?n.push(p):o.onRemove&&o.onRemove(u.local[h].spec)}for(let h=0;h<u.children.length;h+=3)l(u.children[h+2],u.children[h]+d+1)}for(let u=0;u<e.length;u+=3)e[u+1]==-1&&l(e[u+2],t[u]+s+1);return n}function TB(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,i=null;for(let s=0,o;s<e.length;s++)(o=e[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),e[s]=null);return i}function AB(e){let t=[];for(let n=0;n<e.length;n++)e[n]!=null&&t.push(e[n]);return t}function Bp(e,t,n,r){let i=[],s=!1;t.forEach((l,u)=>{let d=TB(e,l,u+n);if(d){s=!0;let h=Bp(d,l,n+u+1,r);h!=tr&&i.push(u,u+l.nodeSize,h)}});let o=NB(s?AB(e):e,-n).sort(La);for(let l=0;l<o.length;l++)o[l].type.valid(t,o[l])||(r.onRemove&&r.onRemove(o[l].spec),o.splice(l--,1));return o.length||i.length?new Kt(o,i):tr}function La(e,t){return e.from-t.from||e.to-t.to}function LE(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let i=n+1;i<t.length;i++){let s=t[i];if(s.from==r.from){s.to!=r.to&&(t==e&&(t=e.slice()),t[i]=s.copy(s.from,r.to),zD(t,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,s.from),zD(t,i,r.copy(s.from,r.to)));break}}}return t}function zD(e,t,n){for(;t<e.length&&La(n,e[t])>0;)t++;e.splice(t,0,n)}function gb(e){let t=[];return e.someProp("decorations",n=>{let r=n(e.state);r&&r!=tr&&t.push(r)}),e.cursorWrapper&&t.push(Kt.create(e.state.doc,[e.cursorWrapper.deco])),No.from(t)}const yZ={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},bZ=Er&&Oo<=11;class xZ{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class vZ{constructor(t,n){this.view=t,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new xZ,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);Er&&Oo<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),bZ&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,yZ)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(DD(this.view)){if(this.suppressingSelectionUpdates)return Os(this.view);if(Er&&Oo<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&qa(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let n=new Set,r;for(let s=t.focusNode;s;s=mc(s))n.add(s);for(let s=t.anchorNode;s;s=mc(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=t.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&DD(t)&&!this.ignoreSelectionChange(r),s=-1,o=-1,l=!1,u=[];if(t.editable)for(let h=0;h<n.length;h++){let p=this.registerMutation(n[h],u);p&&(s=s<0?p.from:Math.min(p.from,s),o=o<0?p.to:Math.max(p.to,o),p.typeOver&&(l=!0))}if(mi&&u.length){let h=u.filter(p=>p.nodeName=="BR");if(h.length==2){let[p,g]=h;p.parentNode&&p.parentNode.parentNode==g.parentNode?g.remove():p.remove()}else{let{focusNode:p}=this.currentSelection;for(let g of h){let b=g.parentNode;b&&b.nodeName=="LI"&&(!p||CZ(t,p)!=b)&&g.remove()}}}let d=null;s<0&&i&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&Gm(r)&&(d=AE(t))&&d.eq(Je.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,Os(t),this.currentSelection.set(r),t.scrollToSelection()):(s>-1||i)&&(s>-1&&(t.docView.markDirty(s,o),wZ(t)),this.handleDOMChange(s,o,l,u),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(r)||Os(t),this.currentSelection.set(r))}registerMutation(t,n){if(n.indexOf(t.target)>-1)return null;let r=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(r==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!r||r.ignoreMutation(t))return null;if(t.type=="childList"){for(let h=0;h<t.addedNodes.length;h++){let p=t.addedNodes[h];n.push(p),p.nodeType==3&&(this.lastChangedTextNode=p)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(t.target))return{from:r.posBefore,to:r.posAfter};let i=t.previousSibling,s=t.nextSibling;if(Er&&Oo<=11&&t.addedNodes.length)for(let h=0;h<t.addedNodes.length;h++){let{previousSibling:p,nextSibling:g}=t.addedNodes[h];(!p||Array.prototype.indexOf.call(t.addedNodes,p)<0)&&(i=p),(!g||Array.prototype.indexOf.call(t.addedNodes,g)<0)&&(s=g)}let o=i&&i.parentNode==t.target?Gn(i)+1:0,l=r.localPosFromDOM(t.target,o,-1),u=s&&s.parentNode==t.target?Gn(s):t.target.childNodes.length,d=r.localPosFromDOM(t.target,u,1);return{from:l,to:d}}else return t.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=t.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:t.target.nodeValue==t.oldValue})}}let VD=new WeakMap,qD=!1;function wZ(e){if(!VD.has(e)&&(VD.set(e,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)!==-1)){if(e.requiresGeckoHackNode=mi,qD)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),qD=!0}}function HD(e,t){let n=t.startContainer,r=t.startOffset,i=t.endContainer,s=t.endOffset,o=e.domAtPos(e.state.selection.anchor);return qa(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function SZ(e,t){if(t.getComposedRanges){let i=t.getComposedRanges(e.root)[0];if(i)return HD(e,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",r,!0),n?HD(e,n):null}function CZ(e,t){for(let n=t.parentNode;n&&n!=e.dom;n=n.parentNode){let r=e.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function kZ(e,t,n){let{node:r,fromOffset:i,toOffset:s,from:o,to:l}=e.docView.parseRange(t,n),u=e.domSelectionRange(),d,h=u.anchorNode;if(h&&e.dom.contains(h.nodeType==1?h:h.parentNode)&&(d=[{node:h,offset:u.anchorOffset}],Gm(u)||d.push({node:u.focusNode,offset:u.focusOffset})),rr&&e.input.lastKeyCode===8)for(let w=s;w>i;w--){let k=r.childNodes[w-1],T=k.pmViewDesc;if(k.nodeName=="BR"&&!T){s=w;break}if(!T||T.size)break}let p=e.state.doc,g=e.someProp("domParser")||sd.fromSchema(e.state.schema),b=p.resolve(o),v=null,S=g.parse(r,{topNode:b.parent,topMatch:b.parent.contentMatchAt(b.index()),topOpen:!0,from:i,to:s,preserveWhitespace:b.parent.type.whitespace=="pre"?"full":!0,findPositions:d,ruleFromNode:EZ,context:b});if(d&&d[0].pos!=null){let w=d[0].pos,k=d[1]&&d[1].pos;k==null&&(k=w),v={anchor:w+o,head:k+o}}return{doc:S,sel:v,from:o,to:l}}function EZ(e){let t=e.pmViewDesc;if(t)return t.parseRule();if(e.nodeName=="BR"&&e.parentNode){if(fr&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(e.parentNode.lastChild==e||fr&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if(e.nodeName=="IMG"&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const NZ=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function TZ(e,t,n,r,i){let s=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let R=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,I=AE(e,R);if(I&&!e.state.selection.eq(I)){if(rr&&Ds&&e.input.lastKeyCode===13&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",U=>U(e,wa(13,"Enter"))))return;let B=e.state.tr.setSelection(I);R=="pointer"?B.setMeta("pointer",!0):R=="key"&&B.scrollIntoView(),s&&B.setMeta("composition",s),e.dispatch(B)}return}let o=e.state.doc.resolve(t),l=o.sharedDepth(n);t=o.before(l+1),n=e.state.doc.resolve(n).after(l+1);let u=e.state.selection,d=kZ(e,t,n),h=e.state.doc,p=h.slice(d.from,d.to),g,b;e.input.lastKeyCode===8&&Date.now()-100<e.input.lastKeyCodeTime?(g=e.state.selection.to,b="end"):(g=e.state.selection.from,b="start"),e.input.lastKeyCode=null;let v=_Z(p.content,d.doc.content,d.from,g,b);if(v&&e.input.domChangeCount++,(gc&&e.input.lastIOSEnter>Date.now()-225||Ds)&&i.some(R=>R.nodeType==1&&!NZ.test(R.nodeName))&&(!v||v.endA>=v.endB)&&e.someProp("handleKeyDown",R=>R(e,wa(13,"Enter")))){e.input.lastIOSEnter=0;return}if(!v)if(r&&u instanceof Ye&&!u.empty&&u.$head.sameParent(u.$anchor)&&!e.composing&&!(d.sel&&d.sel.anchor!=d.sel.head))v={start:u.from,endA:u.to,endB:u.to};else{if(d.sel){let R=FD(e,e.state.doc,d.sel);if(R&&!R.eq(e.state.selection)){let I=e.state.tr.setSelection(R);s&&I.setMeta("composition",s),e.dispatch(I)}}return}e.state.selection.from<e.state.selection.to&&v.start==v.endB&&e.state.selection instanceof Ye&&(v.start>e.state.selection.from&&v.start<=e.state.selection.from+2&&e.state.selection.from>=d.from?v.start=e.state.selection.from:v.endA<e.state.selection.to&&v.endA>=e.state.selection.to-2&&e.state.selection.to<=d.to&&(v.endB+=e.state.selection.to-v.endA,v.endA=e.state.selection.to)),Er&&Oo<=11&&v.endB==v.start+1&&v.endA==v.start&&v.start>d.from&&d.doc.textBetween(v.start-d.from-1,v.start-d.from+1)==" "&&(v.start--,v.endA--,v.endB--);let S=d.doc.resolveNoCache(v.start-d.from),w=d.doc.resolveNoCache(v.endB-d.from),k=h.resolve(v.start),T=S.sameParent(w)&&S.parent.inlineContent&&k.end()>=v.endA,E;if((gc&&e.input.lastIOSEnter>Date.now()-225&&(!T||i.some(R=>R.nodeName=="DIV"||R.nodeName=="P"))||!T&&S.pos<d.doc.content.size&&(!S.sameParent(w)||!S.parent.inlineContent)&&!/\S/.test(d.doc.textBetween(S.pos,w.pos,"",""))&&(E=Je.findFrom(d.doc.resolve(S.pos+1),1,!0))&&E.head>S.pos)&&e.someProp("handleKeyDown",R=>R(e,wa(13,"Enter")))){e.input.lastIOSEnter=0;return}if(e.state.selection.anchor>v.start&&MZ(h,v.start,v.endA,S,w)&&e.someProp("handleKeyDown",R=>R(e,wa(8,"Backspace")))){Ds&&rr&&e.domObserver.suppressSelectionUpdates();return}rr&&v.endB==v.start&&(e.input.lastChromeDelete=Date.now()),Ds&&!T&&S.start()!=w.start()&&w.parentOffset==0&&S.depth==w.depth&&d.sel&&d.sel.anchor==d.sel.head&&d.sel.head==v.endA&&(v.endB-=2,w=d.doc.resolveNoCache(v.endB-d.from),setTimeout(()=>{e.someProp("handleKeyDown",function(R){return R(e,wa(13,"Enter"))})},20));let N=v.start,A=v.endA,_=R=>{let I=R||e.state.tr.replace(N,A,d.doc.slice(v.start-d.from,v.endB-d.from));if(d.sel){let B=FD(e,I.doc,d.sel);B&&!(rr&&e.composing&&B.empty&&(v.start!=v.endB||e.input.lastChromeDelete<Date.now()-100)&&(B.head==N||B.head==I.mapping.map(A)-1)||Er&&B.empty&&B.head==N)&&I.setSelection(B)}return s&&I.setMeta("composition",s),I.scrollIntoView()},j;if(T){if(S.pos==w.pos){Er&&Oo<=11&&S.parentOffset==0&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>Os(e),20));let R=_(e.state.tr.delete(N,A)),I=h.resolve(v.start).marksAcross(h.resolve(v.endA));I&&R.ensureMarks(I),e.dispatch(R)}else if(v.endA==v.endB&&(j=AZ(S.parent.content.cut(S.parentOffset,w.parentOffset),k.parent.content.cut(k.parentOffset,v.endA-k.start())))){let R=_(e.state.tr);j.type=="add"?R.addMark(N,A,j.mark):R.removeMark(N,A,j.mark),e.dispatch(R)}else if(S.parent.child(S.index()).isText&&S.index()==w.index()-(w.textOffset?0:1)){let R=S.parent.textBetween(S.parentOffset,w.parentOffset),I=()=>_(e.state.tr.insertText(R,N,A));e.someProp("handleTextInput",B=>B(e,N,A,R,I))||e.dispatch(I())}}else e.dispatch(_())}function FD(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:ME(e,t.resolve(n.anchor),t.resolve(n.head))}function AZ(e,t){let n=e.firstChild.marks,r=t.firstChild.marks,i=n,s=r,o,l,u;for(let h=0;h<r.length;h++)i=r[h].removeFromSet(i);for(let h=0;h<n.length;h++)s=n[h].removeFromSet(s);if(i.length==1&&s.length==0)l=i[0],o="add",u=h=>h.mark(l.addToSet(h.marks));else if(i.length==0&&s.length==1)l=s[0],o="remove",u=h=>h.mark(l.removeFromSet(h.marks));else return null;let d=[];for(let h=0;h<t.childCount;h++)d.push(u(t.child(h)));if(ye.from(d).eq(e))return{mark:l,type:o}}function MZ(e,t,n,r,i){if(n-t<=i.pos-r.pos||yb(r,!0,!1)<i.pos)return!1;let s=e.resolve(t);if(!r.parent.isTextblock){let l=s.nodeAfter;return l!=null&&n==t+l.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=e.resolve(yb(s,!0,!0));return!o.parent.isTextblock||o.pos>n||yb(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function yb(e,t,n){let r=e.depth,i=t?e.end():e.pos;for(;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,i++,t=!1;if(n){let s=e.node(r).maybeChild(e.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function _Z(e,t,n,r,i){let s=e.findDiffStart(t,n);if(s==null)return null;let{a:o,b:l}=e.findDiffEnd(t,n+e.size,n+t.size);if(i=="end"){let u=Math.max(0,s-Math.min(o,l));r-=o+u-s}if(o<s&&e.size<t.size){let u=r<=s&&r>=o?s-r:0;s-=u,s&&s<t.size&&UD(t.textBetween(s-1,s+1))&&(s+=u?1:-1),l=s+(l-o),o=s}else if(l<s){let u=r<=s&&r>=l?s-r:0;s-=u,s&&s<e.size&&UD(e.textBetween(s-1,s+1))&&(s+=u?1:-1),o=s+(o-l),l=s}return{start:s,endA:o,endB:l}}function UD(e){if(e.length!=2)return!1;let t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}class MB{constructor(t,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new YX,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(YD),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):typeof t=="function"?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=WD(this),GD(this),this.nodeViews=KD(this),this.docView=ED(this.state.doc,$D(this),gb(this),this.dom,this),this.domObserver=new vZ(this,(r,i,s,o)=>TZ(this,r,i,s,o)),this.domObserver.start(),XX(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let n in t)this._props[n]=t[n];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&ok(this);let n=this._props;this._props=t,t.plugins&&(t.plugins.forEach(YD),this.directPlugins=t.plugins),this.updateStateInner(t.state,n)}setProps(t){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in t)n[r]=t[r];this.update(n)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,n){var r;let i=this.state,s=!1,o=!1;t.storedMarks&&this.composing&&(SB(this),o=!0),this.state=t;let l=i.plugins!=t.plugins||this._props.plugins!=n.plugins;if(l||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let b=KD(this);RZ(b,this.nodeViews)&&(this.nodeViews=b,s=!0)}(l||n.handleDOMEvents!=this._props.handleDOMEvents)&&ok(this),this.editable=WD(this),GD(this);let u=gb(this),d=$D(this),h=i.plugins!=t.plugins&&!i.doc.eq(t.doc)?"reset":t.scrollToSelection>i.scrollToSelection?"to selection":"preserve",p=s||!this.docView.matchesNode(t.doc,d,u);(p||!t.selection.eq(i.selection))&&(o=!0);let g=h=="preserve"&&o&&this.dom.style.overflowAnchor==null&&uX(this);if(o){this.domObserver.stop();let b=p&&(Er||rr)&&!this.composing&&!i.selection.empty&&!t.selection.empty&&DZ(i.selection,t.selection);if(p){let v=rr?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=cZ(this)),(s||!this.docView.update(t.doc,d,u,this))&&(this.docView.updateOuterDeco(d),this.docView.destroy(),this.docView=ED(t.doc,d,u,this.dom,this)),v&&!this.trackWrites&&(b=!0)}b||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&OX(this))?Os(this,b):(uB(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,i),h=="reset"?this.dom.scrollTop=0:h=="to selection"?this.scrollToSelection():g&&dX(g)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(!(!t||!this.dom.contains(t.nodeType==1?t:t.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof Ve){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&xD(this,n.getBoundingClientRect(),t)}else xD(this,this.coordsAtPos(this.state.selection.head,1),t)}}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,t)}}updateDraggedNode(t,n){let r=t.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new kB(t.slice,t.move,i<0?void 0:Ve.create(this.state.doc,i))}someProp(t,n){let r=this._props&&this._props[t],i;if(r!=null&&(i=n?n(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let l=this.directPlugins[o].props[t];if(l!=null&&(i=n?n(l):l))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let l=s[o].props[t];if(l!=null&&(i=n?n(l):l))return i}}hasFocus(){if(Er){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if(t.contentEditable=="false")return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&fX(this.dom),Os(this),this.domObserver.start()}get root(){let t=this._root;if(t==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return t||document}updateRoot(){this._root=null}posAtCoords(t){return yX(this,t)}coordsAtPos(t,n=1){return nB(this,t,n)}domAtPos(t,n=0){return this.docView.domFromPos(t,n)}nodeDOM(t){let n=this.docView.descAt(t);return n?n.nodeDOM:null}posAtDOM(t,n,r=-1){let i=this.docView.posFromDOM(t,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(t,n){return SX(this,n||this.state,t)}pasteHTML(t,n){return _d(this,"",t,!1,n||new ClipboardEvent("paste"))}pasteText(t,n){return _d(this,t,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(t){return _E(this,t)}destroy(){this.docView&&(ZX(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],gb(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,JY())}get isDestroyed(){return this.docView==null}dispatchEvent(t){return JX(this,t)}domSelectionRange(){let t=this.domSelection();return t?fr&&this.root.nodeType===11&&iX(this.dom.ownerDocument)==this.dom&&SZ(this,t)||t:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}MB.prototype.dispatch=function(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))};function $D(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(e.state)),n)for(let r in n)r=="class"?t.class+=" "+n[r]:r=="style"?t.style=(t.style?t.style+";":"")+n[r]:!t[r]&&r!="contenteditable"&&r!="nodeName"&&(t[r]=String(n[r]))}),t.translate||(t.translate="no"),[dr.node(0,e.state.doc.content.size,t)]}function GD(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:dr.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function WD(e){return!e.someProp("editable",t=>t(e.state)===!1)}function DZ(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}function KD(e){let t=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(t,i)||(t[i]=r[i])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function RZ(e,t){let n=0,r=0;for(let i in e){if(e[i]!=t[i])return!0;n++}for(let i in t)r++;return n!=r}function YD(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var qo={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},zp={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},jZ=typeof navigator<"u"&&/Mac/.test(navigator.platform),OZ=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var Wn=0;Wn<10;Wn++)qo[48+Wn]=qo[96+Wn]=String(Wn);for(var Wn=1;Wn<=24;Wn++)qo[Wn+111]="F"+Wn;for(var Wn=65;Wn<=90;Wn++)qo[Wn]=String.fromCharCode(Wn+32),zp[Wn]=String.fromCharCode(Wn);for(var bb in qo)zp.hasOwnProperty(bb)||(zp[bb]=qo[bb]);function LZ(e){var t=jZ&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||OZ&&e.shiftKey&&e.key&&e.key.length==1||e.key=="Unidentified",n=!t&&e.key||(e.shiftKey?zp:qo)[e.keyCode]||e.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const PZ=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),IZ=typeof navigator<"u"&&/Win/.test(navigator.platform);function BZ(e){let t=e.split(/-(?!$)/),n=t[t.length-1];n=="Space"&&(n=" ");let r,i,s,o;for(let l=0;l<t.length-1;l++){let u=t[l];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))i=!0;else if(/^s(hift)?$/i.test(u))s=!0;else if(/^mod$/i.test(u))PZ?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+u)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function zZ(e){let t=Object.create(null);for(let n in e)t[BZ(n)]=e[n];return t}function xb(e,t,n=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function VZ(e){return new sn({props:{handleKeyDown:_B(e)}})}function _B(e){let t=zZ(e);return function(n,r){let i=LZ(r),s,o=t[xb(i,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let l=t[xb(i,r,!1)];if(l&&l(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(IZ&&r.ctrlKey&&r.altKey)&&(s=qo[r.keyCode])&&s!=i){let l=t[xb(s,r)];if(l&&l(n.state,n.dispatch,n))return!0}}return!1}}const PE=(e,t)=>e.selection.empty?!1:(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function DB(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}const RB=(e,t,n)=>{let r=DB(e,n);if(!r)return!1;let i=IE(r);if(!i){let o=r.blockRange(),l=o&&Mc(o);return l==null?!1:(t&&t(e.tr.lift(o,l).scrollIntoView()),!0)}let s=i.nodeBefore;if(qB(e,i,t,-1))return!0;if(r.parent.content.size==0&&(yc(s,"end")||Ve.isSelectable(s)))for(let o=r.depth;;o--){let l=Um(e.doc,r.before(o),r.after(o),Ne.empty);if(l&&l.slice.size<l.to-l.from){if(t){let u=e.tr.step(l);u.setSelection(yc(s,"end")?Je.findFrom(u.doc.resolve(u.mapping.map(i.pos,-1)),-1):Ve.create(u.doc,i.pos-s.nodeSize)),t(u.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(t&&t(e.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},qZ=(e,t,n)=>{let r=DB(e,n);if(!r)return!1;let i=IE(r);return i?jB(e,i,t):!1},HZ=(e,t,n)=>{let r=LB(e,n);if(!r)return!1;let i=BE(r);return i?jB(e,i,t):!1};function jB(e,t,n){let r=t.nodeBefore,i=r,s=t.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let h=i.lastChild;if(!h)return!1;i=h}let o=t.nodeAfter,l=o,u=t.pos+1;for(;!l.isTextblock;u++){if(l.type.spec.isolating)return!1;let h=l.firstChild;if(!h)return!1;l=h}let d=Um(e.doc,s,u,Ne.empty);if(!d||d.from!=s||d instanceof On&&d.slice.size>=u-s)return!1;if(n){let h=e.tr.step(d);h.setSelection(Ye.create(h.doc,s)),n(h.scrollIntoView())}return!0}function yc(e,t,n=!1){for(let r=e;r;r=t=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const OB=(e,t,n)=>{let{$head:r,empty:i}=e.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;s=IE(r)}let o=s&&s.nodeBefore;return!o||!Ve.isSelectable(o)?!1:(t&&t(e.tr.setSelection(Ve.create(e.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function IE(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function LB(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}const PB=(e,t,n)=>{let r=LB(e,n);if(!r)return!1;let i=BE(r);if(!i)return!1;let s=i.nodeAfter;if(qB(e,i,t,1))return!0;if(r.parent.content.size==0&&(yc(s,"start")||Ve.isSelectable(s))){let o=Um(e.doc,r.before(),r.after(),Ne.empty);if(o&&o.slice.size<o.to-o.from){if(t){let l=e.tr.step(o);l.setSelection(yc(s,"start")?Je.findFrom(l.doc.resolve(l.mapping.map(i.pos)),1):Ve.create(l.doc,l.mapping.map(i.pos))),t(l.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(t&&t(e.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},IB=(e,t,n)=>{let{$head:r,empty:i}=e.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;s=BE(r)}let o=s&&s.nodeAfter;return!o||!Ve.isSelectable(o)?!1:(t&&t(e.tr.setSelection(Ve.create(e.doc,s.pos)).scrollIntoView()),!0)};function BE(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const FZ=(e,t)=>{let n=e.selection,r=n instanceof Ve,i;if(r){if(n.node.isTextblock||!$o(e.doc,n.from))return!1;i=n.from}else if(i=Fm(e.doc,n.from,-1),i==null)return!1;if(t){let s=e.tr.join(i);r&&s.setSelection(Ve.create(s.doc,i-e.doc.resolve(i).nodeBefore.nodeSize)),t(s.scrollIntoView())}return!0},UZ=(e,t)=>{let n=e.selection,r;if(n instanceof Ve){if(n.node.isTextblock||!$o(e.doc,n.to))return!1;r=n.to}else if(r=Fm(e.doc,n.to,1),r==null)return!1;return t&&t(e.tr.join(r).scrollIntoView()),!0},$Z=(e,t)=>{let{$from:n,$to:r}=e.selection,i=n.blockRange(r),s=i&&Mc(i);return s==null?!1:(t&&t(e.tr.lift(i,s).scrollIntoView()),!0)},BB=(e,t)=>{let{$head:n,$anchor:r}=e.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(t&&t(e.tr.insertText(`
`).scrollIntoView()),!0)};function zE(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const GZ=(e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=zE(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(t){let l=n.after(),u=e.tr.replaceWith(l,l,o.createAndFill());u.setSelection(Je.near(u.doc.resolve(l),1)),t(u.scrollIntoView())}return!0},zB=(e,t)=>{let n=e.selection,{$from:r,$to:i}=n;if(n instanceof Wr||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=zE(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(t){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,l=e.tr.insert(o,s.createAndFill());l.setSelection(Ye.create(l.doc,o+1)),t(l.scrollIntoView())}return!0},VB=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(js(e.doc,s))return t&&t(e.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&Mc(r);return i==null?!1:(t&&t(e.tr.lift(r,i).scrollIntoView()),!0)};function WZ(e){return(t,n)=>{let{$from:r,$to:i}=t.selection;if(t.selection instanceof Ve&&t.selection.node.isBlock)return!r.parentOffset||!js(t.doc,r.pos)?!1:(n&&n(t.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],o,l,u=!1,d=!1;for(let b=r.depth;;b--)if(r.node(b).isBlock){u=r.end(b)==r.pos+(r.depth-b),d=r.start(b)==r.pos-(r.depth-b),l=zE(r.node(b-1).contentMatchAt(r.indexAfter(b-1))),s.unshift(u&&l?{type:l}:null),o=b;break}else{if(b==1)return!1;s.unshift(null)}let h=t.tr;(t.selection instanceof Ye||t.selection instanceof Wr)&&h.deleteSelection();let p=h.mapping.map(r.pos),g=js(h.doc,p,s.length,s);if(g||(s[0]=l?{type:l}:null,g=js(h.doc,p,s.length,s)),!g)return!1;if(h.split(p,s.length,s),!u&&d&&r.node(o).type!=l){let b=h.mapping.map(r.before(o)),v=h.doc.resolve(b);l&&r.node(o-1).canReplaceWith(v.index(),v.index()+1,l)&&h.setNodeMarkup(h.mapping.map(r.before(o)),l)}return n&&n(h.scrollIntoView()),!0}}const KZ=WZ(),YZ=(e,t)=>{let{$from:n,to:r}=e.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),t&&t(e.tr.setSelection(Ve.create(e.doc,i))),!0)};function XZ(e,t,n){let r=t.nodeBefore,i=t.nodeAfter,s=t.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&t.parent.canReplace(s-1,s)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(s,s+1)||!(i.isTextblock||$o(e.doc,t.pos))?!1:(n&&n(e.tr.join(t.pos).scrollIntoView()),!0)}function qB(e,t,n,r){let i=t.nodeBefore,s=t.nodeAfter,o,l,u=i.type.spec.isolating||s.type.spec.isolating;if(!u&&XZ(e,t,n))return!0;let d=!u&&t.parent.canReplace(t.index(),t.index()+1);if(d&&(o=(l=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&l.matchType(o[0]||s.type).validEnd){if(n){let b=t.pos+s.nodeSize,v=ye.empty;for(let k=o.length-1;k>=0;k--)v=ye.from(o[k].create(null,v));v=ye.from(i.copy(v));let S=e.tr.step(new Ln(t.pos-1,b,t.pos,b,new Ne(v,1,0),o.length,!0)),w=S.doc.resolve(b+2*o.length);w.nodeAfter&&w.nodeAfter.type==i.type&&$o(S.doc,w.pos)&&S.join(w.pos),n(S.scrollIntoView())}return!0}let h=s.type.spec.isolating||r>0&&u?null:Je.findFrom(t,1),p=h&&h.$from.blockRange(h.$to),g=p&&Mc(p);if(g!=null&&g>=t.depth)return n&&n(e.tr.lift(p,g).scrollIntoView()),!0;if(d&&yc(s,"start",!0)&&yc(i,"end")){let b=i,v=[];for(;v.push(b),!b.isTextblock;)b=b.lastChild;let S=s,w=1;for(;!S.isTextblock;S=S.firstChild)w++;if(b.canReplace(b.childCount,b.childCount,S.content)){if(n){let k=ye.empty;for(let E=v.length-1;E>=0;E--)k=ye.from(v[E].copy(k));let T=e.tr.step(new Ln(t.pos-v.length,t.pos+s.nodeSize,t.pos+w,t.pos+s.nodeSize-w,new Ne(k,v.length,0),0,!0));n(T.scrollIntoView())}return!0}}return!1}function HB(e){return function(t,n){let r=t.selection,i=e<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(t.tr.setSelection(Ye.create(t.doc,e<0?i.start(s):i.end(s)))),!0):!1}}const ZZ=HB(-1),QZ=HB(1);function JZ(e,t=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),l=o&&EE(o,e,t);return l?(r&&r(n.tr.wrap(o,l).scrollIntoView()),!0):!1}}function XD(e,t=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:l}}=n.selection.ranges[s];n.doc.nodesBetween(o,l,(u,d)=>{if(i)return!1;if(!(!u.isTextblock||u.hasMarkup(e,t)))if(u.type==e)i=!0;else{let h=n.doc.resolve(d),p=h.index();i=h.parent.canReplaceWith(p,p+1,e)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:l},$to:{pos:u}}=n.selection.ranges[o];s.setBlockType(l,u,e,t)}r(s.scrollIntoView())}return!0}}function VE(...e){return function(t,n,r){for(let i=0;i<e.length;i++)if(e[i](t,n,r))return!0;return!1}}VE(PE,RB,OB);VE(PE,PB,IB);VE(BB,zB,VB,KZ);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function eQ(e,t=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s);if(!o)return!1;let l=r?n.tr:null;return tQ(l,o,e,t)?(r&&r(l.scrollIntoView()),!0):!1}}function tQ(e,t,n,r=null){let i=!1,s=t,o=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(n)&&t.startIndex==0){if(t.$from.index(t.depth-1)==0)return!1;let u=o.resolve(t.start-2);s=new Rp(u,u,t.depth),t.endIndex<t.parent.childCount&&(t=new Rp(t.$from,o.resolve(t.$to.end(t.depth)),t.depth)),i=!0}let l=EE(s,n,r,t);return l?(e&&nQ(e,t,l,i,n),!0):!1}function nQ(e,t,n,r,i){let s=ye.empty;for(let h=n.length-1;h>=0;h--)s=ye.from(n[h].type.create(n[h].attrs,s));e.step(new Ln(t.start-(r?2:0),t.end,t.start,t.end,new Ne(s,0,0),n.length,!0));let o=0;for(let h=0;h<n.length;h++)n[h].type==i&&(o=h+1);let l=n.length-o,u=t.start+n.length-(r?2:0),d=t.parent;for(let h=t.startIndex,p=t.endIndex,g=!0;h<p;h++,g=!1)!g&&js(e.doc,u,l)&&(e.split(u,l),u+=2*l),u+=d.child(h).nodeSize;return e}function rQ(e){return function(t,n){let{$from:r,$to:i}=t.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==e);return s?n?r.node(s.depth-1).type==e?iQ(t,n,e,s):sQ(t,n,s):!0:!1}}function iQ(e,t,n,r){let i=e.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new Ln(s-1,o,s,o,new Ne(ye.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new Rp(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const l=Mc(r);if(l==null)return!1;i.lift(r,l);let u=i.doc.resolve(i.mapping.map(s,-1)-1);return $o(i.doc,u.pos)&&u.nodeBefore.type==u.nodeAfter.type&&i.join(u.pos),t(i.scrollIntoView()),!0}function sQ(e,t,n){let r=e.tr,i=n.parent;for(let b=n.end,v=n.endIndex-1,S=n.startIndex;v>S;v--)b-=i.child(v).nodeSize,r.delete(b-1,b+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let l=n.startIndex==0,u=n.endIndex==i.childCount,d=s.node(-1),h=s.index(-1);if(!d.canReplace(h+(l?0:1),h+1,o.content.append(u?ye.empty:ye.from(i))))return!1;let p=s.pos,g=p+o.nodeSize;return r.step(new Ln(p-(l?1:0),g+(u?1:0),p+1,g-1,new Ne((l?ye.empty:ye.from(i.copy(ye.empty))).append(u?ye.empty:ye.from(i.copy(ye.empty))),l?0:1,u?0:1),l?0:1)),t(r.scrollIntoView()),!0}function oQ(e){return function(t,n){let{$from:r,$to:i}=t.selection,s=r.blockRange(i,d=>d.childCount>0&&d.firstChild.type==e);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let l=s.parent,u=l.child(o-1);if(u.type!=e)return!1;if(n){let d=u.lastChild&&u.lastChild.type==l.type,h=ye.from(d?e.create():null),p=new Ne(ye.from(e.create(null,ye.from(l.type.create(null,h)))),d?3:1,0),g=s.start,b=s.end;n(t.tr.step(new Ln(g-(d?3:1),b,g,b,p,1,!0)).scrollIntoView())}return!0}}var aQ=Object.defineProperty,FB=(e,t)=>{for(var n in t)aQ(e,n,{get:t[n],enumerable:!0})};function Ym(e){const{state:t,transaction:n}=e;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}var Xm=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:n}=this,{view:r}=t,{tr:i}=n,s=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(([o,l])=>[o,(...d)=>{const h=l(...d)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),h}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,o=[],l=!!e,u=e||i.tr,d=()=>(!l&&t&&!u.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(u),o.every(p=>p===!0)),h={...Object.fromEntries(Object.entries(n).map(([p,g])=>[p,(...v)=>{const S=this.buildProps(u,t),w=g(...v)(S);return o.push(w),h}])),run:d};return h}createCan(e){const{rawCommands:t,state:n}=this,r=!1,i=e||n.tr,s=this.buildProps(i,r);return{...Object.fromEntries(Object.entries(t).map(([l,u])=>[l,(...d)=>u(...d)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,r)}}buildProps(e,t=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,o={tr:e,editor:r,view:s,state:Ym({state:i,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map(([l,u])=>[l,(...d)=>u(...d)(o)]))}};return o}},lQ=class{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const n=this.callbacks[e];return n&&n.forEach(r=>r.apply(this,t)),this}off(e,t){const n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter(r=>r!==t):delete this.callbacks[e]),this}once(e,t){const n=(...r)=>{this.off(e,n),t.apply(this,r)};return this.on(e,n)}removeAllListeners(){this.callbacks={}}};function UB(e,t){const n=new W6(e);return t.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}var $B=e=>{const t=e.childNodes;for(let n=t.length-1;n>=0;n-=1){const r=t[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?e.removeChild(r):r.nodeType===1&&$B(r)}return e};function Bh(e){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const t=`<body>${e}</body>`,n=new window.DOMParser().parseFromString(t,"text/html").body;return $B(n)}function Rd(e,t,n){if(e instanceof jo||e instanceof ye)return e;n={slice:!0,parseOptions:{},...n};const r=typeof e=="object"&&e!==null,i=typeof e=="string";if(r)try{if(Array.isArray(e)&&e.length>0)return ye.fromArray(e.map(l=>t.nodeFromJSON(l)));const o=t.nodeFromJSON(e);return n.errorOnInvalidContent&&o.check(),o}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",s),Rd("",t,n)}if(i){if(n.errorOnInvalidContent){let o=!1,l="";const u=new D6({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:d=>(o=!0,l=typeof d=="string"?d:d.outerHTML,null)}]}})});if(n.slice?sd.fromSchema(u).parseSlice(Bh(e),n.parseOptions):sd.fromSchema(u).parse(Bh(e),n.parseOptions),n.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${l}`)})}const s=sd.fromSchema(t);return n.slice?s.parseSlice(Bh(e),n.parseOptions).content:s.parse(Bh(e),n.parseOptions)}return Rd("",t,n)}function ak(e,t,n={},r={}){return Rd(e,t,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}function cQ(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function uQ(e,t,n){const r=[];return e.nodesBetween(t.from,t.to,(i,s)=>{n(i)&&r.push({node:i,pos:s})}),r}function dQ(e,t){for(let n=e.depth;n>0;n-=1){const r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}function Zm(e){return t=>dQ(t.$from,e)}function ze(e,t,n){return e.config[t]===void 0&&e.parent?ze(e.parent,t,n):typeof e.config[t]=="function"?e.config[t].bind({...n,parent:e.parent?ze(e.parent,t,n):null}):e.config[t]}function qE(e){return e.map(t=>{const n={name:t.name,options:t.options,storage:t.storage},r=ze(t,"addExtensions",n);return r?[t,...qE(r())]:t}).flat(10)}function HE(e,t){const n=Qa.fromSchema(t).serializeFragment(e),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function GB(e){return typeof e=="function"}function St(e,t=void 0,...n){return GB(e)?t?e.bind(t)(...n):e(...n):e}function fQ(e={}){return Object.keys(e).length===0&&e.constructor===Object}function jd(e){const t=e.filter(i=>i.type==="extension"),n=e.filter(i=>i.type==="node"),r=e.filter(i=>i.type==="mark");return{baseExtensions:t,nodeExtensions:n,markExtensions:r}}function WB(e){const t=[],{nodeExtensions:n,markExtensions:r}=jd(e),i=[...n,...r],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage,extensions:i},u=ze(o,"addGlobalAttributes",l);if(!u)return;u().forEach(h=>{h.types.forEach(p=>{Object.entries(h.attributes).forEach(([g,b])=>{t.push({type:p,name:g,attribute:{...s,...b}})})})})}),i.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage},u=ze(o,"addAttributes",l);if(!u)return;const d=u();Object.entries(d).forEach(([h,p])=>{const g={...s,...p};typeof g?.default=="function"&&(g.default=g.default()),g?.isRequired&&g?.default===void 0&&delete g.default,t.push({type:o.name,name:h,attribute:g})})}),t}function vn(...e){return e.filter(t=>!!t).reduce((t,n)=>{const r={...t};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const l=s?String(s).split(" "):[],u=r[i]?r[i].split(" "):[],d=l.filter(h=>!u.includes(h));r[i]=[...u,...d].join(" ")}else if(i==="style"){const l=s?s.split(";").map(h=>h.trim()).filter(Boolean):[],u=r[i]?r[i].split(";").map(h=>h.trim()).filter(Boolean):[],d=new Map;u.forEach(h=>{const[p,g]=h.split(":").map(b=>b.trim());d.set(p,g)}),l.forEach(h=>{const[p,g]=h.split(":").map(b=>b.trim());d.set(p,g)}),r[i]=Array.from(d.entries()).map(([h,p])=>`${h}: ${p}`).join("; ")}else r[i]=s}),r},{})}function Vp(e,t){return t.filter(n=>n.type===e.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(e.attrs)||{}:{[n.name]:e.attrs[n.name]}).reduce((n,r)=>vn(n,r),{})}function hQ(e){return typeof e!="string"?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):e==="true"?!0:e==="false"?!1:e}function ZD(e,t){return"style"in e?e:{...e,getAttrs:n=>{const r=e.getAttrs?e.getAttrs(n):e.attrs;if(r===!1)return!1;const i=t.reduce((s,o)=>{const l=o.attribute.parseHTML?o.attribute.parseHTML(n):hQ(n.getAttribute(o.name));return l==null?s:{...s,[o.name]:l}},{});return{...r,...i}}}}function QD(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>t==="attrs"&&fQ(n)?!1:n!=null))}function pQ(e,t){var n;const r=WB(e),{nodeExtensions:i,markExtensions:s}=jd(e),o=(n=i.find(d=>ze(d,"topNode")))==null?void 0:n.name,l=Object.fromEntries(i.map(d=>{const h=r.filter(k=>k.type===d.name),p={name:d.name,options:d.options,storage:d.storage,editor:t},g=e.reduce((k,T)=>{const E=ze(T,"extendNodeSchema",p);return{...k,...E?E(d):{}}},{}),b=QD({...g,content:St(ze(d,"content",p)),marks:St(ze(d,"marks",p)),group:St(ze(d,"group",p)),inline:St(ze(d,"inline",p)),atom:St(ze(d,"atom",p)),selectable:St(ze(d,"selectable",p)),draggable:St(ze(d,"draggable",p)),code:St(ze(d,"code",p)),whitespace:St(ze(d,"whitespace",p)),linebreakReplacement:St(ze(d,"linebreakReplacement",p)),defining:St(ze(d,"defining",p)),isolating:St(ze(d,"isolating",p)),attrs:Object.fromEntries(h.map(k=>{var T,E;return[k.name,{default:(T=k?.attribute)==null?void 0:T.default,validate:(E=k?.attribute)==null?void 0:E.validate}]}))}),v=St(ze(d,"parseHTML",p));v&&(b.parseDOM=v.map(k=>ZD(k,h)));const S=ze(d,"renderHTML",p);S&&(b.toDOM=k=>S({node:k,HTMLAttributes:Vp(k,h)}));const w=ze(d,"renderText",p);return w&&(b.toText=w),[d.name,b]})),u=Object.fromEntries(s.map(d=>{const h=r.filter(w=>w.type===d.name),p={name:d.name,options:d.options,storage:d.storage,editor:t},g=e.reduce((w,k)=>{const T=ze(k,"extendMarkSchema",p);return{...w,...T?T(d):{}}},{}),b=QD({...g,inclusive:St(ze(d,"inclusive",p)),excludes:St(ze(d,"excludes",p)),group:St(ze(d,"group",p)),spanning:St(ze(d,"spanning",p)),code:St(ze(d,"code",p)),attrs:Object.fromEntries(h.map(w=>{var k,T;return[w.name,{default:(k=w?.attribute)==null?void 0:k.default,validate:(T=w?.attribute)==null?void 0:T.validate}]}))}),v=St(ze(d,"parseHTML",p));v&&(b.parseDOM=v.map(w=>ZD(w,h)));const S=ze(d,"renderHTML",p);return S&&(b.toDOM=w=>S({mark:w,HTMLAttributes:Vp(w,h)})),[d.name,b]}));return new D6({topNode:o,nodes:l,marks:u})}function mQ(e){const t=e.filter((n,r)=>e.indexOf(n)!==r);return Array.from(new Set(t))}function FE(e){return e.sort((n,r)=>{const i=ze(n,"priority")||100,s=ze(r,"priority")||100;return i>s?-1:i<s?1:0})}function KB(e){const t=FE(qE(e)),n=mQ(t.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),t}function YB(e,t,n){const{from:r,to:i}=t,{blockSeparator:s=`

`,textSerializers:o={}}=n||{};let l="";return e.nodesBetween(r,i,(u,d,h,p)=>{var g;u.isBlock&&d>r&&(l+=s);const b=o?.[u.type.name];if(b)return h&&(l+=b({node:u,pos:d,parent:h,index:p,range:t})),!1;u.isText&&(l+=(g=u?.text)==null?void 0:g.slice(Math.max(r,d)-d,i-d))}),l}function gQ(e,t){const n={from:0,to:e.content.size};return YB(e,n,t)}function XB(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,t])=>t.spec.toText).map(([t,n])=>[t,n.spec.toText]))}function zs(e,t){if(typeof e=="string"){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}function ZB(e,t){const n=zs(t,e.schema),{from:r,to:i,empty:s}=e.selection,o=[];s?(e.storedMarks&&o.push(...e.storedMarks),o.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,i,u=>{o.push(...u.marks)});const l=o.find(u=>u.type.name===n.name);return l?{...l.attrs}:{}}function wn(e,t){if(typeof e=="string"){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}function yQ(e,t){const n=wn(t,e.schema),{from:r,to:i}=e.selection,s=[];e.doc.nodesBetween(r,i,l=>{s.push(l)});const o=s.reverse().find(l=>l.type.name===n.name);return o?{...o.attrs}:{}}function Qm(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function QB(e,t){const n=Qm(typeof t=="string"?t:t.name,e.schema);return n==="node"?yQ(e,t):n==="mark"?ZB(e,t):{}}function bQ(e,t=JSON.stringify){const n={};return e.filter(r=>{const i=t(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function xQ(e){const t=bQ(e);return t.length===1?t:t.filter((n,r)=>!t.filter((s,o)=>o!==r).some(s=>n.oldRange.from>=s.oldRange.from&&n.oldRange.to<=s.oldRange.to&&n.newRange.from>=s.newRange.from&&n.newRange.to<=s.newRange.to))}function JB(e){const{mapping:t,steps:n}=e,r=[];return t.maps.forEach((i,s)=>{const o=[];if(i.ranges.length)i.forEach((l,u)=>{o.push({from:l,to:u})});else{const{from:l,to:u}=n[s];if(l===void 0||u===void 0)return;o.push({from:l,to:u})}o.forEach(({from:l,to:u})=>{const d=t.slice(s).map(l,-1),h=t.slice(s).map(u),p=t.invert().map(d,-1),g=t.invert().map(h);r.push({oldRange:{from:p,to:g},newRange:{from:d,to:h}})})}),xQ(r)}function UE(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function qp(e,t,n={strict:!0}){const r=Object.keys(t);return r.length?r.every(i=>n.strict?t[i]===e[i]:UE(t[i])?t[i].test(e[i]):t[i]===e[i]):!0}function ez(e,t,n={}){return e.find(r=>r.type===t&&qp(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function JD(e,t,n={}){return!!ez(e,t,n)}function $E(e,t,n){var r;if(!e||!t)return;let i=e.parent.childAfter(e.parentOffset);if((!i.node||!i.node.marks.some(h=>h.type===t))&&(i=e.parent.childBefore(e.parentOffset)),!i.node||!i.node.marks.some(h=>h.type===t)||(n=n||((r=i.node.marks[0])==null?void 0:r.attrs),!ez([...i.node.marks],t,n)))return;let o=i.index,l=e.start()+i.offset,u=o+1,d=l+i.node.nodeSize;for(;o>0&&JD([...e.parent.child(o-1).marks],t,n);)o-=1,l-=e.parent.child(o).nodeSize;for(;u<e.parent.childCount&&JD([...e.parent.child(u).marks],t,n);)d+=e.parent.child(u).nodeSize,u+=1;return{from:l,to:d}}function GE(e,t,n){const r=[];return e===t?n.resolve(e).marks().forEach(i=>{const s=n.resolve(e),o=$E(s,i.type);o&&r.push({mark:i,...o})}):n.nodesBetween(e,t,(i,s)=>{!i||i?.nodeSize===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}var vQ=(e,t,n,r=20)=>{const i=e.doc.resolve(n);let s=r,o=null;for(;s>0&&o===null;){const l=i.node(s);l?.type.name===t?o=l:s-=1}return[o,s]};function vb(e,t){return t.nodes[e]||t.marks[e]||null}function up(e,t,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=e.find(s=>s.type===t&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}var wQ=(e,t=500)=>{let n="";const r=e.parentOffset;return e.parent.nodesBetween(Math.max(0,r-t),r,(i,s,o,l)=>{var u,d;const h=((d=(u=i.type.spec).toText)==null?void 0:d.call(u,{node:i,pos:s,parent:o,index:l}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?h:h.slice(0,Math.max(0,r-s))}),n};function lk(e,t,n={}){const{empty:r,ranges:i}=e.selection,s=t?zs(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter(p=>s?s.name===p.type.name:!0).find(p=>qp(p.attrs,n,{strict:!1}));let o=0;const l=[];if(i.forEach(({$from:p,$to:g})=>{const b=p.pos,v=g.pos;e.doc.nodesBetween(b,v,(S,w)=>{if(!S.isText&&!S.marks.length)return;const k=Math.max(b,w),T=Math.min(v,w+S.nodeSize),E=T-k;o+=E,l.push(...S.marks.map(N=>({mark:N,from:k,to:T})))})}),o===0)return!1;const u=l.filter(p=>s?s.name===p.mark.type.name:!0).filter(p=>qp(p.mark.attrs,n,{strict:!1})).reduce((p,g)=>p+g.to-g.from,0),d=l.filter(p=>s?p.mark.type!==s&&p.mark.type.excludes(s):!0).reduce((p,g)=>p+g.to-g.from,0);return(u>0?u+d:u)>=o}function Ho(e,t,n={}){const{from:r,to:i,empty:s}=e.selection,o=t?wn(t,e.schema):null,l=[];e.doc.nodesBetween(r,i,(p,g)=>{if(p.isText)return;const b=Math.max(r,g),v=Math.min(i,g+p.nodeSize);l.push({node:p,from:b,to:v})});const u=i-r,d=l.filter(p=>o?o.name===p.node.type.name:!0).filter(p=>qp(p.node.attrs,n,{strict:!1}));return s?!!d.length:d.reduce((p,g)=>p+g.to-g.from,0)>=u}function SQ(e,t,n={}){if(!t)return Ho(e,null,n)||lk(e,null,n);const r=Qm(t,e.schema);return r==="node"?Ho(e,t,n):r==="mark"?lk(e,t,n):!1}var CQ=(e,t)=>{const{$from:n,$to:r,$anchor:i}=e.selection;if(t){const s=Zm(l=>l.type.name===t)(e.selection);if(!s)return!1;const o=e.doc.resolve(s.pos+1);return i.pos+1===o.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},kQ=e=>{const{$from:t,$to:n}=e.selection;return!(t.parentOffset>0||t.pos!==n.pos)};function eR(e,t){return Array.isArray(t)?t.some(n=>(typeof n=="string"?n:n.name)===e.name):t}function tR(e,t){const{nodeExtensions:n}=jd(t),r=n.find(o=>o.name===e);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=St(ze(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function Jm(e,{checkChildren:t=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(e.type.name==="hardBreak")return!0;if(e.isText)return/^\s*$/m.test((r=e.text)!=null?r:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(e.content.childCount===0)return!0;if(t){let i=!0;return e.content.forEach(s=>{i!==!1&&(Jm(s,{ignoreWhitespace:n,checkChildren:t})||(i=!1))}),i}return!1}function tz(e){return e instanceof Ve}function nz(e){return e instanceof Ye}function Na(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function rz(e,t=null){if(!t)return null;const n=Je.atStart(e),r=Je.atEnd(e);if(t==="start"||t===!0)return n;if(t==="end")return r;const i=n.from,s=r.to;return t==="all"?Ye.create(e,Na(0,i,s),Na(e.content.size,i,s)):Ye.create(e,Na(t,i,s),Na(t,i,s))}function EQ(e,t,n){const r=e.steps.length-1;if(r<t)return;const i=e.steps[r];if(!(i instanceof On||i instanceof Ln))return;const s=e.mapping.maps[r];let o=0;s.forEach((l,u,d,h)=>{o===0&&(o=h)}),e.setSelection(Je.near(e.doc.resolve(o),n))}var eg=class{constructor(e){var t;this.find=e.find,this.handler=e.handler,this.undoable=(t=e.undoable)!=null?t:!0}},NQ=(e,t)=>{if(UE(t))return t.exec(e);const n=t(e);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=e,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function zh(e){var t;const{editor:n,from:r,to:i,text:s,rules:o,plugin:l}=e,{view:u}=n;if(u.composing)return!1;const d=u.state.doc.resolve(r);if(d.parent.type.spec.code||(t=d.nodeBefore||d.nodeAfter)!=null&&t.marks.find(g=>g.type.spec.code))return!1;let h=!1;const p=wQ(d)+s;return o.forEach(g=>{if(h)return;const b=NQ(p,g.find);if(!b)return;const v=u.state.tr,S=Ym({state:u.state,transaction:v}),w={from:r-(b[0].length-s.length),to:i},{commands:k,chain:T,can:E}=new Xm({editor:n,state:S});g.handler({state:S,range:w,match:b,commands:k,chain:T,can:E})===null||!v.steps.length||(g.undoable&&v.setMeta(l,{transform:v,from:r,to:i,text:s}),u.dispatch(v),h=!0)}),h}function TQ(e){const{editor:t,rules:n}=e,r=new sn({state:{init(){return null},apply(i,s,o){const l=i.getMeta(r);if(l)return l;const u=i.getMeta("applyInputRules");return!!u&&setTimeout(()=>{let{text:h}=u;typeof h=="string"?h=h:h=HE(ye.from(h),o.schema);const{from:p}=u,g=p+h.length;zh({editor:t,from:p,to:g,text:h,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,l){return zh({editor:t,from:s,to:o,text:l,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&zh({editor:t,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?zh({editor:t,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function AQ(e){return Object.prototype.toString.call(e).slice(8,-1)}function Vh(e){return AQ(e)!=="Object"?!1:e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function iz(e,t){const n={...e};return Vh(e)&&Vh(t)&&Object.keys(t).forEach(r=>{Vh(t[r])&&Vh(e[r])?n[r]=iz(e[r],t[r]):n[r]=t[r]}),n}var WE=class{constructor(e={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...e},this.name=this.config.name}get options(){return{...St(ze(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...St(ze(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(e={}){const t=this.extend({...this.config,addOptions:()=>iz(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new this.constructor({...this.config,...e});return t.parent=this,this.child=t,t.name="name"in e?e.name:t.parent.name,t}},Ja=class sz extends WE{constructor(){super(...arguments),this.type="mark"}static create(t={}){const n=typeof t=="function"?t():t;return new sz(n)}static handleExit({editor:t,mark:n}){const{tr:r}=t.state,i=t.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(d=>d?.type.name===n.name))return!1;const u=o.find(d=>d?.type.name===n.name);return u&&r.removeStoredMark(u),r.insertText(" ",i.pos),t.view.dispatch(r),!0}return!1}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}};function MQ(e){return typeof e=="number"}var _Q=class{constructor(e){this.find=e.find,this.handler=e.handler}},DQ=(e,t,n)=>{if(UE(t))return[...e.matchAll(t)];const r=t(e,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=e,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function RQ(e){const{editor:t,state:n,from:r,to:i,rule:s,pasteEvent:o,dropEvent:l}=e,{commands:u,chain:d,can:h}=new Xm({editor:t,state:n}),p=[];return n.doc.nodesBetween(r,i,(b,v)=>{var S,w,k,T,E;if((w=(S=b.type)==null?void 0:S.spec)!=null&&w.code||!(b.isText||b.isTextblock||b.isInline))return;const N=(E=(T=(k=b.content)==null?void 0:k.size)!=null?T:b.nodeSize)!=null?E:0,A=Math.max(r,v),_=Math.min(i,v+N);if(A>=_)return;const j=b.isText?b.text||"":b.textBetween(A-v,_-v,void 0,"");DQ(j,s.find,o).forEach(I=>{if(I.index===void 0)return;const B=A+I.index+1,U=B+I[0].length,V={from:n.tr.mapping.map(B),to:n.tr.mapping.map(U)},F=s.handler({state:n,range:V,match:I,commands:u,chain:d,can:h,pasteEvent:o,dropEvent:l});p.push(F)})}),p.every(b=>b!==null)}var qh=null,jQ=e=>{var t;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(t=n.clipboardData)==null||t.setData("text/html",e),n};function OQ(e){const{editor:t,rules:n}=e;let r=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,l;try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}const u=({state:h,from:p,to:g,rule:b,pasteEvt:v})=>{const S=h.tr,w=Ym({state:h,transaction:S});if(!(!RQ({editor:t,state:w,from:Math.max(p-1,0),to:g.b-1,rule:b,pasteEvent:v,dropEvent:l})||!S.steps.length)){try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,S}};return n.map(h=>new sn({view(p){const g=v=>{var S;r=(S=p.dom.parentElement)!=null&&S.contains(v.target)?p.dom.parentElement:null,r&&(qh=t)},b=()=>{qh&&(qh=null)};return window.addEventListener("dragstart",g),window.addEventListener("dragend",b),{destroy(){window.removeEventListener("dragstart",g),window.removeEventListener("dragend",b)}}},props:{handleDOMEvents:{drop:(p,g)=>{if(s=r===p.dom.parentElement,l=g,!s){const b=qh;b?.isEditable&&setTimeout(()=>{const v=b.state.selection;v&&b.commands.deleteRange({from:v.from,to:v.to})},10)}return!1},paste:(p,g)=>{var b;const v=(b=g.clipboardData)==null?void 0:b.getData("text/html");return o=g,i=!!v?.includes("data-pm-slice"),!1}}},appendTransaction:(p,g,b)=>{const v=p[0],S=v.getMeta("uiEvent")==="paste"&&!i,w=v.getMeta("uiEvent")==="drop"&&!s,k=v.getMeta("applyPasteRules"),T=!!k;if(!S&&!w&&!T)return;if(T){let{text:A}=k;typeof A=="string"?A=A:A=HE(ye.from(A),b.schema);const{from:_}=k,j=_+A.length,R=jQ(A);return u({rule:h,state:b,from:_,to:{b:j},pasteEvt:R})}const E=g.doc.content.findDiffStart(b.doc.content),N=g.doc.content.findDiffEnd(b.doc.content);if(!(!MQ(E)||!N||E===N.b))return u({rule:h,state:b,from:E,to:N,pasteEvt:o})}}))}var tg=class{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=KB(e),this.schema=pQ(this.extensions,t),this.setupExtensions()}get commands(){return this.extensions.reduce((e,t)=>{const n={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:vb(t.name,this.schema)},r=ze(t,"addCommands",n);return r?{...e,...r()}:e},{})}get plugins(){const{editor:e}=this;return FE([...this.extensions].reverse()).flatMap(r=>{const i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:e,type:vb(r.name,this.schema)},s=[],o=ze(r,"addKeyboardShortcuts",i);let l={};if(r.type==="mark"&&ze(r,"exitable",i)&&(l.ArrowRight=()=>Ja.handleExit({editor:e,mark:r})),o){const g=Object.fromEntries(Object.entries(o()).map(([b,v])=>[b,()=>v({editor:e})]));l={...l,...g}}const u=VZ(l);s.push(u);const d=ze(r,"addInputRules",i);if(eR(r,e.options.enableInputRules)&&d){const g=d();if(g&&g.length){const b=TQ({editor:e,rules:g}),v=Array.isArray(b)?b:[b];s.push(...v)}}const h=ze(r,"addPasteRules",i);if(eR(r,e.options.enablePasteRules)&&h){const g=h();if(g&&g.length){const b=OQ({editor:e,rules:g});s.push(...b)}}const p=ze(r,"addProseMirrorPlugins",i);if(p){const g=p();s.push(...g)}return s})}get attributes(){return WB(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=jd(this.extensions);return Object.fromEntries(t.filter(n=>!!ze(n,"addNodeView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:wn(n.name,this.schema)},s=ze(n,"addNodeView",i);if(!s)return[];const o=(l,u,d,h,p)=>{const g=Vp(l,r);return s()({node:l,view:u,getPos:d,decorations:h,innerDecorations:p,editor:e,extension:n,HTMLAttributes:g})};return[n.name,o]}))}get markViews(){const{editor:e}=this,{markExtensions:t}=jd(this.extensions);return Object.fromEntries(t.filter(n=>!!ze(n,"addMarkView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:zs(n.name,this.schema)},s=ze(n,"addMarkView",i);if(!s)return[];const o=(l,u,d)=>{const h=Vp(l,r);return s()({mark:l,view:u,inline:d,editor:e,extension:n,HTMLAttributes:h,updateAttributes:p=>{XJ(l,e,p)}})};return[n.name,o]}))}setupExtensions(){const e=this.extensions;this.editor.extensionStorage=Object.fromEntries(e.map(t=>[t.name,t.storage])),e.forEach(t=>{var n;const r={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:vb(t.name,this.schema)};t.type==="mark"&&((n=St(ze(t,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(t.name);const i=ze(t,"onBeforeCreate",r),s=ze(t,"onCreate",r),o=ze(t,"onUpdate",r),l=ze(t,"onSelectionUpdate",r),u=ze(t,"onTransaction",r),d=ze(t,"onFocus",r),h=ze(t,"onBlur",r),p=ze(t,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),l&&this.editor.on("selectionUpdate",l),u&&this.editor.on("transaction",u),d&&this.editor.on("focus",d),h&&this.editor.on("blur",h),p&&this.editor.on("destroy",p)})}};tg.resolve=KB;tg.sort=FE;tg.flatten=qE;var LQ={};FB(LQ,{ClipboardTextSerializer:()=>az,Commands:()=>uz,Delete:()=>dz,Drop:()=>fz,Editable:()=>hz,FocusEvents:()=>mz,Keymap:()=>gz,Paste:()=>yz,Tabindex:()=>bz,focusEventsPluginKey:()=>pz});var cn=class oz extends WE{constructor(){super(...arguments),this.type="extension"}static create(t={}){const n=typeof t=="function"?t():t;return new oz(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}},az=cn.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new sn({key:new In("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:i}=t,{ranges:s}=i,o=Math.min(...s.map(h=>h.$from.pos)),l=Math.max(...s.map(h=>h.$to.pos)),u=XB(n);return YB(r,{from:o,to:l},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:u})}}})]}}),lz={};FB(lz,{blur:()=>PQ,clearContent:()=>IQ,clearNodes:()=>BQ,command:()=>zQ,createParagraphNear:()=>VQ,cut:()=>qQ,deleteCurrentNode:()=>HQ,deleteNode:()=>FQ,deleteRange:()=>UQ,deleteSelection:()=>$Q,enter:()=>GQ,exitCode:()=>WQ,extendMarkRange:()=>KQ,first:()=>YQ,focus:()=>ZQ,forEach:()=>QQ,insertContent:()=>JQ,insertContentAt:()=>tJ,joinBackward:()=>iJ,joinDown:()=>rJ,joinForward:()=>sJ,joinItemBackward:()=>oJ,joinItemForward:()=>aJ,joinTextblockBackward:()=>lJ,joinTextblockForward:()=>cJ,joinUp:()=>nJ,keyboardShortcut:()=>dJ,lift:()=>fJ,liftEmptyBlock:()=>hJ,liftListItem:()=>pJ,newlineInCode:()=>mJ,resetAttributes:()=>gJ,scrollIntoView:()=>yJ,selectAll:()=>bJ,selectNodeBackward:()=>xJ,selectNodeForward:()=>vJ,selectParentNode:()=>wJ,selectTextblockEnd:()=>SJ,selectTextblockStart:()=>CJ,setContent:()=>kJ,setMark:()=>NJ,setMeta:()=>TJ,setNode:()=>AJ,setNodeSelection:()=>MJ,setTextSelection:()=>_J,sinkListItem:()=>DJ,splitBlock:()=>RJ,splitListItem:()=>jJ,toggleList:()=>OJ,toggleMark:()=>LJ,toggleNode:()=>PJ,toggleWrap:()=>IJ,undoInputRule:()=>BJ,unsetAllMarks:()=>zJ,unsetMark:()=>VJ,updateAttributes:()=>qJ,wrapIn:()=>HJ,wrapInList:()=>FJ});var PQ=()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var n;e.isDestroyed||(t.dom.blur(),(n=window?.getSelection())==null||n.removeAllRanges())}),!0),IQ=(e=!0)=>({commands:t})=>t.setContent("",{emitUpdate:e}),BQ=()=>({state:e,tr:t,dispatch:n})=>{const{selection:r}=t,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:o})=>{e.doc.nodesBetween(s.pos,o.pos,(l,u)=>{if(l.type.isText)return;const{doc:d,mapping:h}=t,p=d.resolve(h.map(u)),g=d.resolve(h.map(u+l.nodeSize)),b=p.blockRange(g);if(!b)return;const v=Mc(b);if(l.type.isTextblock){const{defaultType:S}=p.parent.contentMatchAt(p.index());t.setNodeMarkup(b.start,S)}(v||v===0)&&t.lift(b,v)})}),!0},zQ=e=>t=>e(t),VQ=()=>({state:e,dispatch:t})=>zB(e,t),qQ=(e,t)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(e.from,e.to);r.deleteRange(e.from,e.to);const o=r.mapping.map(t);return r.insert(o,s.content),r.setSelection(new Ye(r.doc.resolve(Math.max(o-1,0)))),!0},HQ=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,r=n.$anchor.node();if(r.content.size>0)return!1;const i=e.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(t){const l=i.before(s),u=i.after(s);e.delete(l,u).scrollIntoView()}return!0}return!1},FQ=e=>({tr:t,state:n,dispatch:r})=>{const i=wn(e,n.schema),s=t.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const u=s.before(o),d=s.after(o);t.delete(u,d).scrollIntoView()}return!0}return!1},UQ=e=>({tr:t,dispatch:n})=>{const{from:r,to:i}=e;return n&&t.delete(r,i),!0},$Q=()=>({state:e,dispatch:t})=>PE(e,t),GQ=()=>({commands:e})=>e.keyboardShortcut("Enter"),WQ=()=>({state:e,dispatch:t})=>GZ(e,t),KQ=(e,t={})=>({tr:n,state:r,dispatch:i})=>{const s=zs(e,r.schema),{doc:o,selection:l}=n,{$from:u,from:d,to:h}=l;if(i){const p=$E(u,s,t);if(p&&p.from<=d&&p.to>=h){const g=Ye.create(o,p.from,p.to);n.setSelection(g)}}return!0},YQ=e=>t=>{const n=typeof e=="function"?e(t):e;for(let r=0;r<n.length;r+=1)if(n[r](t))return!0;return!1};function XQ(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function KE(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var ZQ=(e=null,t={})=>({editor:n,view:r,tr:i,dispatch:s})=>{t={scrollIntoView:!0,...t};const o=()=>{(KE()||XQ())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),t?.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&e===null||e===!1)return!0;if(s&&e===null&&!nz(n.state.selection))return o(),!0;const l=rz(i.doc,e)||n.state.selection,u=n.state.selection.eq(l);return s&&(u||i.setSelection(l),u&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},QQ=(e,t)=>n=>e.every((r,i)=>t(r,{...n,index:i})),JQ=(e,t)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},e,t),eJ=e=>!("type"in e),tJ=(e,t,n)=>({tr:r,dispatch:i,editor:s})=>{var o;if(i){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let l;const u=w=>{s.emit("contentError",{editor:s,error:w,disableCollaboration:()=>{"collaboration"in s.storage&&typeof s.storage.collaboration=="object"&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},d={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{Rd(t,s.schema,{parseOptions:d,errorOnInvalidContent:!0})}catch(w){u(w)}try{l=Rd(t,s.schema,{parseOptions:d,errorOnInvalidContent:(o=n.errorOnInvalidContent)!=null?o:s.options.enableContentCheck})}catch(w){return u(w),!1}let{from:h,to:p}=typeof e=="number"?{from:e,to:e}:{from:e.from,to:e.to},g=!0,b=!0;if((eJ(l)?l:[l]).forEach(w=>{w.check(),g=g?w.isText&&w.marks.length===0:!1,b=b?w.isBlock:!1}),h===p&&b){const{parent:w}=r.doc.resolve(h);w.isTextblock&&!w.type.spec.code&&!w.childCount&&(h-=1,p+=1)}let S;if(g){if(Array.isArray(t))S=t.map(w=>w.text||"").join("");else if(t instanceof ye){let w="";t.forEach(k=>{k.text&&(w+=k.text)}),S=w}else typeof t=="object"&&t&&t.text?S=t.text:S=t;r.insertText(S,h,p)}else{S=l;const w=r.doc.resolve(h),k=w.node(),T=w.parentOffset===0,E=k.isText||k.isTextblock,N=k.content.size>0;T&&E&&N&&(h=Math.max(0,h-1)),r.replaceWith(h,p,S)}n.updateSelection&&EQ(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:h,text:S}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:h,text:S})}return!0},nJ=()=>({state:e,dispatch:t})=>FZ(e,t),rJ=()=>({state:e,dispatch:t})=>UZ(e,t),iJ=()=>({state:e,dispatch:t})=>RB(e,t),sJ=()=>({state:e,dispatch:t})=>PB(e,t),oJ=()=>({state:e,dispatch:t,tr:n})=>{try{const r=Fm(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},aJ=()=>({state:e,dispatch:t,tr:n})=>{try{const r=Fm(e.doc,e.selection.$from.pos,1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},lJ=()=>({state:e,dispatch:t})=>qZ(e,t),cJ=()=>({state:e,dispatch:t})=>HZ(e,t);function cz(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function uJ(e){const t=e.split(/-(?!$)/);let n=t[t.length-1];n==="Space"&&(n=" ");let r,i,s,o;for(let l=0;l<t.length-1;l+=1){const u=t[l];if(/^(cmd|meta|m)$/i.test(u))o=!0;else if(/^a(lt)?$/i.test(u))r=!0;else if(/^(c|ctrl|control)$/i.test(u))i=!0;else if(/^s(hift)?$/i.test(u))s=!0;else if(/^mod$/i.test(u))KE()||cz()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${u}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}var dJ=e=>({editor:t,view:n,tr:r,dispatch:i})=>{const s=uJ(e).split(/-(?!$)/),o=s.find(d=>!["Alt","Ctrl","Meta","Shift"].includes(d)),l=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),u=t.captureTransaction(()=>{n.someProp("handleKeyDown",d=>d(n,l))});return u?.steps.forEach(d=>{const h=d.map(r.mapping);h&&i&&r.maybeStep(h)}),!0},fJ=(e,t={})=>({state:n,dispatch:r})=>{const i=wn(e,n.schema);return Ho(n,i,t)?$Z(n,r):!1},hJ=()=>({state:e,dispatch:t})=>VB(e,t),pJ=e=>({state:t,dispatch:n})=>{const r=wn(e,t.schema);return rQ(r)(t,n)},mJ=()=>({state:e,dispatch:t})=>BB(e,t);function nR(e,t){const n=typeof t=="string"?[t]:t;return Object.keys(e).reduce((r,i)=>(n.includes(i)||(r[i]=e[i]),r),{})}var gJ=(e,t)=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const l=Qm(typeof e=="string"?e:e.name,r.schema);return l?(l==="node"&&(s=wn(e,r.schema)),l==="mark"&&(o=zs(e,r.schema)),i&&n.selection.ranges.forEach(u=>{r.doc.nodesBetween(u.$from.pos,u.$to.pos,(d,h)=>{s&&s===d.type&&n.setNodeMarkup(h,void 0,nR(d.attrs,t)),o&&d.marks.length&&d.marks.forEach(p=>{o===p.type&&n.addMark(h,h+d.nodeSize,o.create(nR(p.attrs,t)))})})}),!0):!1},yJ=()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),bJ=()=>({tr:e,dispatch:t})=>{if(t){const n=new Wr(e.doc);e.setSelection(n)}return!0},xJ=()=>({state:e,dispatch:t})=>OB(e,t),vJ=()=>({state:e,dispatch:t})=>IB(e,t),wJ=()=>({state:e,dispatch:t})=>YZ(e,t),SJ=()=>({state:e,dispatch:t})=>QZ(e,t),CJ=()=>({state:e,dispatch:t})=>ZZ(e,t),kJ=(e,{errorOnInvalidContent:t,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:i,tr:s,dispatch:o,commands:l})=>{const{doc:u}=s;if(r.preserveWhitespace!=="full"){const d=ak(e,i.schema,r,{errorOnInvalidContent:t??i.options.enableContentCheck});return o&&s.replaceWith(0,u.content.size,d).setMeta("preventUpdate",!n),!0}return o&&s.setMeta("preventUpdate",!n),l.insertContentAt({from:0,to:u.content.size},e,{parseOptions:r,errorOnInvalidContent:t??i.options.enableContentCheck})};function EJ(e,t,n){var r;const{selection:i}=t;let s=null;if(nz(i)&&(s=i.$cursor),s){const l=(r=e.storedMarks)!=null?r:s.marks();return s.parent.type.allowsMarkType(n)&&(!!n.isInSet(l)||!l.some(d=>d.type.excludes(n)))}const{ranges:o}=i;return o.some(({$from:l,$to:u})=>{let d=l.depth===0?e.doc.inlineContent&&e.doc.type.allowsMarkType(n):!1;return e.doc.nodesBetween(l.pos,u.pos,(h,p,g)=>{if(d)return!1;if(h.isInline){const b=!g||g.type.allowsMarkType(n),v=!!n.isInSet(h.marks)||!h.marks.some(S=>S.type.excludes(n));d=b&&v}return!d}),d})}var NJ=(e,t={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:o,ranges:l}=s,u=zs(e,r.schema);if(i)if(o){const d=ZB(r,u);n.addStoredMark(u.create({...d,...t}))}else l.forEach(d=>{const h=d.$from.pos,p=d.$to.pos;r.doc.nodesBetween(h,p,(g,b)=>{const v=Math.max(b,h),S=Math.min(b+g.nodeSize,p);g.marks.find(k=>k.type===u)?g.marks.forEach(k=>{u===k.type&&n.addMark(v,S,u.create({...k.attrs,...t}))}):n.addMark(v,S,u.create(t))})});return EJ(r,n,u)},TJ=(e,t)=>({tr:n})=>(n.setMeta(e,t),!0),AJ=(e,t={})=>({state:n,dispatch:r,chain:i})=>{const s=wn(e,n.schema);let o;return n.selection.$anchor.sameParent(n.selection.$head)&&(o=n.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:l})=>XD(s,{...o,...t})(n)?!0:l.clearNodes()).command(({state:l})=>XD(s,{...o,...t})(l,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},MJ=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,i=Na(e,0,r.content.size),s=Ve.create(r,i);t.setSelection(s)}return!0},_J=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,{from:i,to:s}=typeof e=="number"?{from:e,to:e}:e,o=Ye.atStart(r).from,l=Ye.atEnd(r).to,u=Na(i,o,l),d=Na(s,o,l),h=Ye.create(r,u,d);t.setSelection(h)}return!0},DJ=e=>({state:t,dispatch:n})=>{const r=wn(e,t.schema);return oQ(r)(t,n)};function rR(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const r=n.filter(i=>t?.includes(i.type.name));e.tr.ensureMarks(r)}}var RJ=({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:o}=t,{$from:l,$to:u}=s,d=i.extensionManager.attributes,h=up(d,l.node().type.name,l.node().attrs);if(s instanceof Ve&&s.node.isBlock)return!l.parentOffset||!js(o,l.pos)?!1:(r&&(e&&rR(n,i.extensionManager.splittableMarks),t.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;const p=u.parentOffset===u.parent.content.size,g=l.depth===0?void 0:cQ(l.node(-1).contentMatchAt(l.indexAfter(-1)));let b=p&&g?[{type:g,attrs:h}]:void 0,v=js(t.doc,t.mapping.map(l.pos),1,b);if(!b&&!v&&js(t.doc,t.mapping.map(l.pos),1,g?[{type:g}]:void 0)&&(v=!0,b=g?[{type:g,attrs:h}]:void 0),r){if(v&&(s instanceof Ye&&t.deleteSelection(),t.split(t.mapping.map(l.pos),1,b),g&&!p&&!l.parentOffset&&l.parent.type!==g)){const S=t.mapping.map(l.before()),w=t.doc.resolve(S);l.node(-1).canReplaceWith(w.index(),w.index()+1,g)&&t.setNodeMarkup(t.mapping.map(l.before()),g)}e&&rR(n,i.extensionManager.splittableMarks),t.scrollIntoView()}return v},jJ=(e,t={})=>({tr:n,state:r,dispatch:i,editor:s})=>{var o;const l=wn(e,r.schema),{$from:u,$to:d}=r.selection,h=r.selection.node;if(h&&h.isBlock||u.depth<2||!u.sameParent(d))return!1;const p=u.node(-1);if(p.type!==l)return!1;const g=s.extensionManager.attributes;if(u.parent.content.size===0&&u.node(-1).childCount===u.indexAfter(-1)){if(u.depth===2||u.node(-3).type!==l||u.index(-2)!==u.node(-2).childCount-1)return!1;if(i){let k=ye.empty;const T=u.index(-1)?1:u.index(-2)?2:3;for(let R=u.depth-T;R>=u.depth-3;R-=1)k=ye.from(u.node(R).copy(k));const E=u.indexAfter(-1)<u.node(-2).childCount?1:u.indexAfter(-2)<u.node(-3).childCount?2:3,N={...up(g,u.node().type.name,u.node().attrs),...t},A=((o=l.contentMatch.defaultType)==null?void 0:o.createAndFill(N))||void 0;k=k.append(ye.from(l.createAndFill(null,A)||void 0));const _=u.before(u.depth-(T-1));n.replace(_,u.after(-E),new Ne(k,4-T,0));let j=-1;n.doc.nodesBetween(_,n.doc.content.size,(R,I)=>{if(j>-1)return!1;R.isTextblock&&R.content.size===0&&(j=I+1)}),j>-1&&n.setSelection(Ye.near(n.doc.resolve(j))),n.scrollIntoView()}return!0}const b=d.pos===u.end()?p.contentMatchAt(0).defaultType:null,v={...up(g,p.type.name,p.attrs),...t},S={...up(g,u.node().type.name,u.node().attrs),...t};n.delete(u.pos,d.pos);const w=b?[{type:l,attrs:v},{type:b,attrs:S}]:[{type:l,attrs:v}];if(!js(n.doc,u.pos,2))return!1;if(i){const{selection:k,storedMarks:T}=r,{splittableMarks:E}=s.extensionManager,N=T||k.$to.parentOffset&&k.$from.marks();if(n.split(u.pos,2,w).scrollIntoView(),!N||!i)return!0;const A=N.filter(_=>E.includes(_.type.name));n.ensureMarks(A)}return!0},wb=(e,t)=>{const n=Zm(o=>o.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=e.doc.nodeAt(r);return n.node.type===i?.type&&$o(e.doc,n.pos)&&e.join(n.pos),!0},Sb=(e,t)=>{const n=Zm(o=>o.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=e.doc.nodeAt(r);return n.node.type===i?.type&&$o(e.doc,r)&&e.join(r),!0},OJ=(e,t,n,r={})=>({editor:i,tr:s,state:o,dispatch:l,chain:u,commands:d,can:h})=>{const{extensions:p,splittableMarks:g}=i.extensionManager,b=wn(e,o.schema),v=wn(t,o.schema),{selection:S,storedMarks:w}=o,{$from:k,$to:T}=S,E=k.blockRange(T),N=w||S.$to.parentOffset&&S.$from.marks();if(!E)return!1;const A=Zm(_=>tR(_.type.name,p))(S);if(E.depth>=1&&A&&E.depth-A.depth<=1){if(A.node.type===b)return d.liftListItem(v);if(tR(A.node.type.name,p)&&b.validContent(A.node.content)&&l)return u().command(()=>(s.setNodeMarkup(A.pos,b),!0)).command(()=>wb(s,b)).command(()=>Sb(s,b)).run()}return!n||!N||!l?u().command(()=>h().wrapInList(b,r)?!0:d.clearNodes()).wrapInList(b,r).command(()=>wb(s,b)).command(()=>Sb(s,b)).run():u().command(()=>{const _=h().wrapInList(b,r),j=N.filter(R=>g.includes(R.type.name));return s.ensureMarks(j),_?!0:d.clearNodes()}).wrapInList(b,r).command(()=>wb(s,b)).command(()=>Sb(s,b)).run()},LJ=(e,t={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,o=zs(e,r.schema);return lk(r,o,t)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,t)},PJ=(e,t,n={})=>({state:r,commands:i})=>{const s=wn(e,r.schema),o=wn(t,r.schema),l=Ho(r,s,n);let u;return r.selection.$anchor.sameParent(r.selection.$head)&&(u=r.selection.$anchor.parent.attrs),l?i.setNode(o,u):i.setNode(s,{...u,...n})},IJ=(e,t={})=>({state:n,commands:r})=>{const i=wn(e,n.schema);return Ho(n,i,t)?r.lift(i):r.wrapIn(i,t)},BJ=()=>({state:e,dispatch:t})=>{const n=e.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(e))){if(t){const o=e.tr,l=s.transform;for(let u=l.steps.length-1;u>=0;u-=1)o.step(l.steps[u].invert(l.docs[u]));if(s.text){const u=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,e.schema.text(s.text,u))}else o.delete(s.from,s.to)}return!0}}return!1},zJ=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,{empty:r,ranges:i}=n;return r||t&&i.forEach(s=>{e.removeMark(s.$from.pos,s.$to.pos)}),!0},VJ=(e,t={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=t,{selection:l}=n,u=zs(e,r.schema),{$from:d,empty:h,ranges:p}=l;if(!i)return!0;if(h&&o){let{from:g,to:b}=l;const v=(s=d.marks().find(w=>w.type===u))==null?void 0:s.attrs,S=$E(d,u,v);S&&(g=S.from,b=S.to),n.removeMark(g,b,u)}else p.forEach(g=>{n.removeMark(g.$from.pos,g.$to.pos,u)});return n.removeStoredMark(u),!0},qJ=(e,t={})=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const l=Qm(typeof e=="string"?e:e.name,r.schema);return l?(l==="node"&&(s=wn(e,r.schema)),l==="mark"&&(o=zs(e,r.schema)),i&&n.selection.ranges.forEach(u=>{const d=u.$from.pos,h=u.$to.pos;let p,g,b,v;n.selection.empty?r.doc.nodesBetween(d,h,(S,w)=>{s&&s===S.type&&(b=Math.max(w,d),v=Math.min(w+S.nodeSize,h),p=w,g=S)}):r.doc.nodesBetween(d,h,(S,w)=>{w<d&&s&&s===S.type&&(b=Math.max(w,d),v=Math.min(w+S.nodeSize,h),p=w,g=S),w>=d&&w<=h&&(s&&s===S.type&&n.setNodeMarkup(w,void 0,{...S.attrs,...t}),o&&S.marks.length&&S.marks.forEach(k=>{if(o===k.type){const T=Math.max(w,d),E=Math.min(w+S.nodeSize,h);n.addMark(T,E,o.create({...k.attrs,...t}))}}))}),g&&(p!==void 0&&n.setNodeMarkup(p,void 0,{...g.attrs,...t}),o&&g.marks.length&&g.marks.forEach(S=>{o===S.type&&n.addMark(b,v,o.create({...S.attrs,...t}))}))}),!0):!1},HJ=(e,t={})=>({state:n,dispatch:r})=>{const i=wn(e,n.schema);return JZ(i,t)(n,r)},FJ=(e,t={})=>({state:n,dispatch:r})=>{const i=wn(e,n.schema);return eQ(i,t)(n,r)},uz=cn.create({name:"commands",addCommands(){return{...lz}}}),dz=cn.create({name:"delete",onUpdate({transaction:e,appendedTransactions:t}){var n,r,i;const s=()=>{var o,l,u,d;if((d=(u=(l=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:l.filterTransaction)==null?void 0:u.call(l,e))!=null?d:e.getMeta("y-sync$"))return;const h=UB(e.before,[e,...t]);JB(h).forEach(b=>{h.mapping.mapResult(b.oldRange.from).deletedAfter&&h.mapping.mapResult(b.oldRange.to).deletedBefore&&h.before.nodesBetween(b.oldRange.from,b.oldRange.to,(v,S)=>{const w=S+v.nodeSize-2,k=b.oldRange.from<=S&&w<=b.oldRange.to;this.editor.emit("delete",{type:"node",node:v,from:S,to:w,newFrom:h.mapping.map(S),newTo:h.mapping.map(w),deletedRange:b.oldRange,newRange:b.newRange,partial:!k,editor:this.editor,transaction:e,combinedTransform:h})})});const g=h.mapping;h.steps.forEach((b,v)=>{var S,w;if(b instanceof Ri){const k=g.slice(v).map(b.from,-1),T=g.slice(v).map(b.to),E=g.invert().map(k,-1),N=g.invert().map(T),A=(S=h.doc.nodeAt(k-1))==null?void 0:S.marks.some(j=>j.eq(b.mark)),_=(w=h.doc.nodeAt(T))==null?void 0:w.marks.some(j=>j.eq(b.mark));this.editor.emit("delete",{type:"mark",mark:b.mark,from:b.from,to:b.to,deletedRange:{from:E,to:N},newRange:{from:k,to:T},partial:!!(_||A),editor:this.editor,transaction:e,combinedTransform:h})}})};(i=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||i?setTimeout(s,0):s()}}),fz=cn.create({name:"drop",addProseMirrorPlugins(){return[new sn({key:new In("tiptapDrop"),props:{handleDrop:(e,t,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:n,moved:r})}}})]}}),hz=cn.create({name:"editable",addProseMirrorPlugins(){return[new sn({key:new In("editable"),props:{editable:()=>this.editor.options.editable}})]}}),pz=new In("focusEvents"),mz=cn.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new sn({key:pz,props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;const r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),gz=cn.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:l})=>{const{selection:u,doc:d}=l,{empty:h,$anchor:p}=u,{pos:g,parent:b}=p,v=p.parent.isTextblock&&g>0?l.doc.resolve(g-1):p,S=v.parent.type.spec.isolating,w=p.pos-p.parentOffset,k=S&&v.parent.childCount===1?w===p.pos:Je.atStart(d).from===g;return!h||!b.type.isTextblock||b.textContent.length||!k||k&&p.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return KE()||cz()?s:i},addProseMirrorPlugins(){return[new sn({key:new In("clearDocument"),appendTransaction:(e,t,n)=>{if(e.some(S=>S.getMeta("composition")))return;const r=e.some(S=>S.docChanged)&&!t.doc.eq(n.doc),i=e.some(S=>S.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:o,to:l}=t.selection,u=Je.atStart(t.doc).from,d=Je.atEnd(t.doc).to;if(s||!(o===u&&l===d)||!Jm(n.doc))return;const g=n.tr,b=Ym({state:n,transaction:g}),{commands:v}=new Xm({editor:this.editor,state:b});if(v.clearNodes(),!!g.steps.length)return g}})]}}),yz=cn.create({name:"paste",addProseMirrorPlugins(){return[new sn({key:new In("tiptapPaste"),props:{handlePaste:(e,t,n)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:n})}}})]}}),bz=cn.create({name:"tabindex",addProseMirrorPlugins(){return[new sn({key:new In("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),UJ=class Wl{constructor(t,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=t,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var t;return(t=this.actualDepth)!=null?t:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(t){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You cant set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},t)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const t=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(t);return new Wl(n,this.editor)}get before(){let t=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.from-3)),new Wl(t,this.editor)}get after(){let t=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.to+3)),new Wl(t,this.editor)}get children(){const t=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,o=this.pos+r+(s?0:1);if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;const l=this.resolvedPos.doc.resolve(o);if(!i&&l.depth<=this.depth)return;const u=new Wl(l,this.editor,i,i?n:null);i&&(u.actualDepth=this.depth+1),t.push(new Wl(l,this.editor,i,i?n:null))}),t}get firstChild(){return this.children[0]||null}get lastChild(){const t=this.children;return t[t.length-1]||null}closest(t,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===t)if(Object.keys(n).length>0){const s=i.node.attrs,o=Object.keys(n);for(let l=0;l<o.length;l+=1){const u=o[l];if(s[u]!==n[u])break}}else r=i;i=i.parent}return r}querySelector(t,n={}){return this.querySelectorAll(t,n,!0)[0]||null}querySelectorAll(t,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(n);return this.children.forEach(o=>{r&&i.length>0||(o.node.type.name===t&&s.every(u=>n[u]===o.node.attrs[u])&&i.push(o),!(r&&i.length>0)&&(i=i.concat(o.querySelectorAll(t,n,r))))}),i}setAttribute(t){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...t}),this.editor.view.dispatch(n)}},$J=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function GJ(e,t,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return t&&i.setAttribute("nonce",t),i.setAttribute("data-tiptap-style",""),i.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(i),i}var WJ=class extends lQ{constructor(e={}){super(),this.css=null,this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:i,moved:s})=>this.options.onDrop(r,i,s)),this.on("paste",({event:r,slice:i})=>this.options.onPaste(r,i)),this.on("delete",this.options.onDelete);const t=this.createDoc(),n=rz(t,this.options.autofocus);this.editorState=tc.create({doc:t,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(e){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(e),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const e=this.editorView.dom;e?.editor&&delete e.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(e){console.warn("Failed to remove CSS element:",e)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=GJ($J,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:e=>{this.editorState=e},dispatch:e=>{this.dispatchTransaction(e)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(e,t)=>{if(t==="state")return this.editorState;if(t in e)return Reflect.get(e,t);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${t}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(e,t){const n=GB(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let n=t;if([].concat(e).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;n=n.filter(o=>!o.key.startsWith(s))}),t.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var e,t;const r=[...this.options.enableCoreExtensions?[hz,az.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)==null?void 0:e.clipboardTextSerializer)==null?void 0:t.blockSeparator}),uz,mz,gz,bz,fz,yz,dz].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i?.type));this.extensionManager=new tg(r,this)}createCommandManager(){this.commandManager=new Xm({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let e;try{e=ak(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(t){if(!(t instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(t.message))throw t;this.emit("contentError",{editor:this,error:t,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),e=ak(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return e}createView(e){var t;this.editorView=new MB(e,{...this.options.editorProps,attributes:{role:"textbox",...(t=this.options.editorProps)==null?void 0:t.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.prependClass(),this.injectCSS();const r=this.view.dom;r.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(d=>{var h;return(h=this.capturedTransaction)==null?void 0:h.step(d)});return}const{state:t,transactions:n}=this.state.applyTransaction(e),r=!this.state.selection.eq(t.selection),i=n.includes(e),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),!i)return;this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const o=n.findLast(d=>d.getMeta("focus")||d.getMeta("blur")),l=o?.getMeta("focus"),u=o?.getMeta("blur");l&&this.emit("focus",{editor:this,event:l.event,transaction:o}),u&&this.emit("blur",{editor:this,event:u.event,transaction:o}),!(e.getMeta("preventUpdate")||!n.some(d=>d.docChanged)||s.doc.eq(t.doc))&&this.emit("update",{editor:this,transaction:e,appendedTransactions:n.slice(1)})}getAttributes(e){return QB(this.state,e)}isActive(e,t){const n=typeof e=="string"?e:null,r=typeof e=="string"?t:e;return SQ(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return HE(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:n={}}=e||{};return gQ(this.state.doc,{blockSeparator:t,textSerializers:{...XB(this.schema),...n}})}get isEmpty(){return Jm(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var e,t;return(t=(e=this.editorView)==null?void 0:e.isDestroyed)!=null?t:!0}$node(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelector(e,t))||null}$nodes(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new UJ(t,this)}get $doc(){return this.$pos(0)}};function bc(e){return new eg({find:e.find,handler:({state:t,range:n,match:r})=>{const i=St(e.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=t,o=r[r.length-1],l=r[0];if(o){const u=l.search(/\S/),d=n.from+l.indexOf(o),h=d+o.length;if(GE(n.from,n.to,t.doc).filter(b=>b.mark.type.excluded.find(S=>S===e.type&&S!==b.mark.type)).filter(b=>b.to>d).length)return null;h<n.to&&s.delete(h,n.to),d>n.from&&s.delete(n.from+u,d);const g=n.from+u+o.length;s.addMark(n.from+u,g,e.type.create(i||{})),s.removeStoredMark(e.type)}},undoable:e.undoable})}function KJ(e){return new eg({find:e.find,handler:({state:t,range:n,match:r})=>{const i=St(e.getAttributes,void 0,r)||{},{tr:s}=t,o=n.from;let l=n.to;const u=e.type.create(i);if(r[1]){const d=r[0].lastIndexOf(r[1]);let h=o+d;h>l?h=l:l=h+r[1].length;const p=r[0][r[0].length-1];s.insertText(p,o+r[0].length-1),s.replaceWith(h,l,u)}else if(r[0]){const d=e.type.isInline?o:o-1;s.insert(d,e.type.create(i)).delete(s.mapping.map(o),s.mapping.map(l))}s.scrollIntoView()},undoable:e.undoable})}function ck(e){return new eg({find:e.find,handler:({state:t,range:n,match:r})=>{const i=t.doc.resolve(n.from),s=St(e.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),e.type))return null;t.tr.delete(n.from,n.to).setBlockType(n.from,n.from,e.type,s)},undoable:e.undoable})}function xc(e){return new eg({find:e.find,handler:({state:t,range:n,match:r,chain:i})=>{const s=St(e.getAttributes,void 0,r)||{},o=t.tr.delete(n.from,n.to),u=o.doc.resolve(n.from).blockRange(),d=u&&EE(u,e.type,s);if(!d)return null;if(o.wrap(u,d),e.keepMarks&&e.editor){const{selection:p,storedMarks:g}=t,{splittableMarks:b}=e.editor.extensionManager,v=g||p.$to.parentOffset&&p.$from.marks();if(v){const S=v.filter(w=>b.includes(w.type.name));o.ensureMarks(S)}}if(e.keepAttributes){const p=e.type.name==="bulletList"||e.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(p,s).run()}const h=o.doc.resolve(n.from-1).nodeBefore;h&&h.type===e.type&&$o(o.doc,n.from-1)&&(!e.joinPredicate||e.joinPredicate(r,h))&&o.join(n.from-1)},undoable:e.undoable})}function YJ(e,t){const{selection:n}=e,{$from:r}=n;if(n instanceof Ve){const s=r.index();return r.parent.canReplaceWith(s,s+1,t)}let i=r.depth;for(;i>=0;){const s=r.index(i);if(r.node(i).contentMatchAt(s).matchType(t))return!0;i-=1}return!1}function XJ(e,t,n={}){const{state:r}=t,{doc:i,tr:s}=r,o=e;i.descendants((l,u)=>{const d=s.mapping.map(u),h=s.mapping.map(u)+l.nodeSize;let p=null;if(l.marks.forEach(b=>{if(b!==o)return!1;p=b}),!p)return;let g=!1;if(Object.keys(n).forEach(b=>{n[b]!==p.attrs[b]&&(g=!0)}),g){const b=e.type.create({...e.attrs,...n});s.removeMark(d,h,e.type),s.addMark(d,h,b)}}),s.docChanged&&t.view.dispatch(s)}var Yr=class xz extends WE{constructor(){super(...arguments),this.type="node"}static create(t={}){const n=typeof t=="function"?t():t;return new xz(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}};function Fa(e){return new _Q({find:e.find,handler:({state:t,range:n,match:r,pasteEvent:i})=>{const s=St(e.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=t,l=r[r.length-1],u=r[0];let d=n.to;if(l){const h=u.search(/\S/),p=n.from+u.indexOf(l),g=p+l.length;if(GE(n.from,n.to,t.doc).filter(v=>v.mark.type.excluded.find(w=>w===e.type&&w!==v.mark.type)).filter(v=>v.to>p).length)return null;g<n.to&&o.delete(g,n.to),p>n.from&&o.delete(n.from+h,p),d=n.from+h+l.length,o.addMark(n.from+h,d,e.type.create(s||{})),o.removeStoredMark(e.type)}}})}var Cb,iR;function ZJ(){return iR||(iR=1,Cb=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t instanceof Map&&n instanceof Map){if(t.size!==n.size)return!1;for(i of t.entries())if(!n.has(i[0]))return!1;for(i of t.entries())if(!e(i[1],n.get(i[0])))return!1;return!0}if(t instanceof Set&&n instanceof Set){if(t.size!==n.size)return!1;for(i of t.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(n)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(t[i]!==n[i])return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!(o==="_owner"&&t.$$typeof)&&!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n}),Cb}var QJ=ZJ();const JJ=Wd(QJ);var kb={exports:{}},Eb={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var sR;function eee(){if(sR)return Eb;sR=1;var e=Kd(),t=p6();function n(d,h){return d===h&&(d!==0||1/d===1/h)||d!==d&&h!==h}var r=typeof Object.is=="function"?Object.is:n,i=t.useSyncExternalStore,s=e.useRef,o=e.useEffect,l=e.useMemo,u=e.useDebugValue;return Eb.useSyncExternalStoreWithSelector=function(d,h,p,g,b){var v=s(null);if(v.current===null){var S={hasValue:!1,value:null};v.current=S}else S=v.current;v=l(function(){function k(_){if(!T){if(T=!0,E=_,_=g(_),b!==void 0&&S.hasValue){var j=S.value;if(b(j,_))return N=j}return N=_}if(j=N,r(E,_))return j;var R=g(_);return b!==void 0&&b(j,R)?(E=_,j):(E=_,N=R)}var T=!1,E,N,A=p===void 0?null:p;return[function(){return k(h())},A===null?void 0:function(){return k(A())}]},[h,p,g,b]);var w=i(d,v[0],v[1]);return o(function(){S.hasValue=!0,S.value=w},[w]),u(w),w},Eb}var oR;function tee(){return oR||(oR=1,kb.exports=eee()),kb.exports}var vz=tee();const nee=Wd(vz);var ree=(...e)=>t=>{e.forEach(n=>{typeof n=="function"?n(t):n&&(n.current=t)})},iee=({contentComponent:e})=>{const t=m6.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getServerSnapshot);return m.jsx(m.Fragment,{children:Object.values(t)})};function see(){const e=new Set;let t={};return{subscribe(n){return e.add(n),()=>{e.delete(n)}},getSnapshot(){return t},getServerSnapshot(){return t},setRenderer(n,r){t={...t,[n]:Yd.createPortal(r.reactElement,r.element,n)},e.forEach(i=>i())},removeRenderer(n){const r={...t};delete r[n],t=r,e.forEach(i=>i())}}}var oee=class extends Ce.Component{constructor(e){var t;super(e),this.editorContentRef=Ce.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((t=e.editor)!=null&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(e.view.dom),e.setOptions({element:t}),e.contentComponent=see(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var e;const t=this.props.editor;if(t){this.initialized=!1,t.isDestroyed||t.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),t.contentComponent=null;try{if(!((e=t.view.dom)!=null&&e.firstChild))return;const n=document.createElement("div");n.append(t.view.dom),t.setOptions({element:n})}catch{}}}render(){const{editor:e,innerRef:t,...n}=this.props;return m.jsxs(m.Fragment,{children:[m.jsx("div",{ref:ree(t,this.editorContentRef),...n}),e?.contentComponent&&m.jsx(iee,{contentComponent:e.contentComponent})]})}},aee=M.forwardRef((e,t)=>{const n=Ce.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[e.editor]);return Ce.createElement(oee,{key:n,innerRef:t,...e})}),aR=Ce.memo(aee),lee=typeof window<"u"?M.useLayoutEffect:M.useEffect,cee=class{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",t),()=>{n.off("transaction",t)}}}};function uee(e){var t;const[n]=M.useState(()=>new cee(e.editor)),r=vz.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,e.selector,(t=e.equalityFn)!=null?t:JJ);return lee(()=>n.watch(e.editor),[e.editor,n]),M.useDebugValue(r),r}var dee=!1,uk=typeof window>"u",fee=uk||!!(typeof window<"u"&&window.next),hee=class wz{constructor(t){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=t,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(t){this.editor=t,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?uk||fee?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const t={...this.options.current,onBeforeCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)==null?void 0:s.call(i,...r)},onBlur:(...r)=>{var i,s;return(s=(i=this.options.current).onBlur)==null?void 0:s.call(i,...r)},onCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onCreate)==null?void 0:s.call(i,...r)},onDestroy:(...r)=>{var i,s;return(s=(i=this.options.current).onDestroy)==null?void 0:s.call(i,...r)},onFocus:(...r)=>{var i,s;return(s=(i=this.options.current).onFocus)==null?void 0:s.call(i,...r)},onSelectionUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)==null?void 0:s.call(i,...r)},onTransaction:(...r)=>{var i,s;return(s=(i=this.options.current).onTransaction)==null?void 0:s.call(i,...r)},onUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onUpdate)==null?void 0:s.call(i,...r)},onContentError:(...r)=>{var i,s;return(s=(i=this.options.current).onContentError)==null?void 0:s.call(i,...r)},onDrop:(...r)=>{var i,s;return(s=(i=this.options.current).onDrop)==null?void 0:s.call(i,...r)},onPaste:(...r)=>{var i,s;return(s=(i=this.options.current).onPaste)==null?void 0:s.call(i,...r)},onDelete:(...r)=>{var i,s;return(s=(i=this.options.current).onDelete)==null?void 0:s.call(i,...r)}};return new WJ(t)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(t){return this.subscriptions.add(t),()=>{this.subscriptions.delete(t)}}static compareOptions(t,n){return Object.keys(t).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&t.extensions&&n.extensions?t.extensions.length!==n.extensions.length?!1:t.extensions.every((i,s)=>{var o;return i===((o=n.extensions)==null?void 0:o[s])}):t[r]===n[r])}onRender(t){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&t.length===0?wz.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(t),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(t){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=t;return}if(this.previousDeps.length===t.length&&this.previousDeps.every((r,i)=>r===t[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=t}scheduleDestroy(){const t=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===t){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===t&&this.setEditor(null))},1)}};function pee(e={},t=[]){const n=M.useRef(e);n.current=e;const[r]=M.useState(()=>new hee(n)),i=m6.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return M.useDebugValue(i),M.useEffect(r.onRender(t)),uee({editor:i,selector:({transactionNumber:s})=>e.shouldRerenderOnTransaction===!1||e.shouldRerenderOnTransaction===void 0?null:e.immediatelyRender&&s===0?0:s+1}),i}var mee=M.createContext({editor:null});mee.Consumer;var gee=M.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),yee=()=>M.useContext(gee);Ce.forwardRef((e,t)=>{const{onDragStart:n}=yee(),r=e.as||"div";return m.jsx(r,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...e.style}})});Ce.createContext({markViewContentRef:()=>{}});var Hp=(e,t)=>{if(e==="slot")return 0;if(e instanceof Function)return e(t);const{children:n,...r}=t??{};if(e==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[e,r,n]},bee=/^\s*>\s$/,xee=Yr.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:e}){return Hp("blockquote",{...vn(this.options.HTMLAttributes,e),children:Hp("slot",{})})},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[xc({find:bee,type:this.type})]}}),vee=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,wee=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,See=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,Cee=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,kee=Ja.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return Hp("strong",{...vn(this.options.HTMLAttributes,e),children:Hp("slot",{})})},addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[bc({find:vee,type:this.type}),bc({find:See,type:this.type})]},addPasteRules(){return[Fa({find:wee,type:this.type}),Fa({find:Cee,type:this.type})]}}),Eee=/(^|[^`])`([^`]+)`(?!`)$/,Nee=/(^|[^`])`([^`]+)`(?!`)/g,Tee=Ja.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:e}){return["code",vn(this.options.HTMLAttributes,e),0]},addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[bc({find:Eee,type:this.type})]},addPasteRules(){return[Fa({find:Nee,type:this.type})]}}),Aee=/^```([a-z]+)?[\s\n]$/,Mee=/^~~~([a-z]+)?[\s\n]$/,_ee=Yr.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:4,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var t;const{languageClassPrefix:n}=this.options,s=[...((t=e.firstElementChild)==null?void 0:t.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:e,HTMLAttributes:t}){return["pre",vn(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,n=t.pos===1;return!e||t.parent.type.name!==this.name?!1:n||!t.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:e})=>{if(!this.options.enableTabIndentation)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:i}=n;if(r.parent.type!==this.type)return!1;const s=" ".repeat(this.options.tabSize);return i?e.commands.insertContent(s):e.commands.command(({tr:o})=>{const{from:l,to:u}=n,p=t.doc.textBetween(l,u,`
`,`
`).split(`
`).map(g=>s+g).join(`
`);return o.replaceWith(l,u,t.schema.text(p)),!0})},"Shift-Tab":({editor:e})=>{if(!this.options.enableTabIndentation)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:i}=n;return r.parent.type!==this.type?!1:i?e.commands.command(({tr:s})=>{var o;const{pos:l}=r,u=r.start(),d=r.end(),p=t.doc.textBetween(u,d,`
`,`
`).split(`
`);let g=0,b=0;const v=l-u;for(let N=0;N<p.length;N+=1){if(b+p[N].length>=v){g=N;break}b+=p[N].length+1}const w=((o=p[g].match(/^ */))==null?void 0:o[0])||"",k=Math.min(w.length,this.options.tabSize);if(k===0)return!0;let T=u;for(let N=0;N<g;N+=1)T+=p[N].length+1;return s.delete(T,T+k),l-T<=k&&s.setSelection(Ye.create(s.doc,T)),!0}):e.commands.command(({tr:s})=>{const{from:o,to:l}=n,h=t.doc.textBetween(o,l,`
`,`
`).split(`
`).map(p=>{var g;const b=((g=p.match(/^ */))==null?void 0:g[0])||"",v=Math.min(b.length,this.options.tabSize);return p.slice(v)}).join(`
`);return s.replaceWith(o,l,t.schema.text(h)),!0})},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:e.chain().command(({tr:l})=>(l.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:n,doc:r}=t,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const l=i.after();return l===void 0?!1:r.nodeAt(l)?e.commands.command(({tr:d})=>(d.setSelection(Je.near(r.resolve(l))),!0)):e.commands.exitCode()}}},addInputRules(){return[ck({find:Aee,type:this.type,getAttributes:e=>({language:e[1]})}),ck({find:Mee,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new sn({key:new In("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;const n=t.clipboardData.getData("text/plain"),r=t.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i?.mode;if(!n||!s)return!1;const{tr:o,schema:l}=e.state,u=l.text(n.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},u)),o.selection.$from.parent.type!==this.type&&o.setSelection(Ye.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),e.dispatch(o),!0}}})]}}),Dee=Yr.create({name:"doc",topNode:!0,content:"block+"}),Ree=Yr.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",vn(this.options.HTMLAttributes,e)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:r})=>e.first([()=>e.exitCode(),()=>e.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:l}=r.extensionManager,u=s||i.$to.parentOffset&&i.$from.marks();return t().insertContent({type:this.name}).command(({tr:d,dispatch:h})=>{if(h&&u&&o){const p=u.filter(g=>l.includes(g.type.name));d.ensureMarks(p)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),Sz=Yr.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,vn(this.options.HTMLAttributes,t),0]},addCommands(){return{setHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.setNode(this.name,e):!1,toggleHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.toggleNode(this.name,"paragraph",e):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>ck({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}}),jee=Sz,Oee=Yr.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:e}){return["hr",vn(this.options.HTMLAttributes,e)]},addCommands(){return{setHorizontalRule:()=>({chain:e,state:t})=>{if(!YJ(t,t.schema.nodes[this.name]))return!1;const{selection:n}=t,{$to:r}=n,i=e();return tz(n)?i.insertContentAt(r.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({tr:s,dispatch:o})=>{var l;if(o){const{$to:u}=s.selection,d=u.end();if(u.nodeAfter)u.nodeAfter.isTextblock?s.setSelection(Ye.create(s.doc,u.pos+1)):u.nodeAfter.isBlock?s.setSelection(Ve.create(s.doc,u.pos)):s.setSelection(Ye.create(s.doc,u.pos));else{const h=(l=u.parent.type.contentMatch.defaultType)==null?void 0:l.create();h&&(s.insert(d,h),s.setSelection(Ye.create(s.doc,d+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[KJ({find:/^(?:---|-|___\s|\*\*\*\s)$/,type:this.type})]}}),Lee=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,Pee=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,Iee=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,Bee=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,zee=Ja.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>e.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",vn(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[bc({find:Lee,type:this.type}),bc({find:Iee,type:this.type})]},addPasteRules(){return[Fa({find:Pee,type:this.type}),Fa({find:Bee,type:this.type})]}});const Vee="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mgensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",qee="121342632165322333335355455655552435435422463632574574330355524444661154543332344423364211133222221212112052232222232212222223222241112222224322321222",dk="numeric",fk="ascii",hk="alpha",cd="asciinumeric",Wu="alphanumeric",pk="domain",Cz="emoji",Hee="scheme",Fee="slashscheme",Nb="whitespace";function Uee(e,t){return e in t||(t[e]=[]),t[e]}function Ta(e,t,n){t[dk]&&(t[cd]=!0,t[Wu]=!0),t[fk]&&(t[cd]=!0,t[hk]=!0),t[cd]&&(t[Wu]=!0),t[hk]&&(t[Wu]=!0),t[Wu]&&(t[pk]=!0),t[Cz]&&(t[pk]=!0);for(const r in t){const i=Uee(r,n);i.indexOf(e)<0&&i.push(e)}}function $ee(e,t){const n={};for(const r in t)t[r].indexOf(e)>=0&&(n[r]=!0);return n}function Sr(e=null){this.j={},this.jr=[],this.jd=null,this.t=e}Sr.groups={};Sr.prototype={accepts(){return!!this.t},go(e){const t=this,n=t.j[e];if(n)return n;for(let r=0;r<t.jr.length;r++){const i=t.jr[r][0],s=t.jr[r][1];if(s&&i.test(e))return s}return t.jd},has(e,t=!1){return t?e in this.j:!!this.go(e)},ta(e,t,n,r){for(let i=0;i<e.length;i++)this.tt(e[i],t,n,r)},tr(e,t,n,r){r=r||Sr.groups;let i;return t&&t.j?i=t:(i=new Sr(t),n&&r&&Ta(t,n,r)),this.jr.push([e,i]),i},ts(e,t,n,r){let i=this;const s=e.length;if(!s)return i;for(let o=0;o<s-1;o++)i=i.tt(e[o]);return i.tt(e[s-1],t,n,r)},tt(e,t,n,r){r=r||Sr.groups;const i=this;if(t&&t.j)return i.j[e]=t,t;const s=t;let o,l=i.go(e);if(l?(o=new Sr,Object.assign(o.j,l.j),o.jr.push.apply(o.jr,l.jr),o.jd=l.jd,o.t=l.t):o=new Sr,s){if(r)if(o.t&&typeof o.t=="string"){const u=Object.assign($ee(o.t,r),n);Ta(s,u,r)}else n&&Ta(s,n,r);o.t=s}return i.j[e]=o,o}};const et=(e,t,n,r,i)=>e.ta(t,n,r,i),en=(e,t,n,r,i)=>e.tr(t,n,r,i),lR=(e,t,n,r,i)=>e.ts(t,n,r,i),ve=(e,t,n,r,i)=>e.tt(t,n,r,i),As="WORD",mk="UWORD",kz="ASCIINUMERICAL",Ez="ALPHANUMERICAL",Od="LOCALHOST",gk="TLD",yk="UTLD",dp="SCHEME",Kl="SLASH_SCHEME",YE="NUM",bk="WS",XE="NL",ud="OPENBRACE",dd="CLOSEBRACE",Fp="OPENBRACKET",Up="CLOSEBRACKET",$p="OPENPAREN",Gp="CLOSEPAREN",Wp="OPENANGLEBRACKET",Kp="CLOSEANGLEBRACKET",Yp="FULLWIDTHLEFTPAREN",Xp="FULLWIDTHRIGHTPAREN",Zp="LEFTCORNERBRACKET",Qp="RIGHTCORNERBRACKET",Jp="LEFTWHITECORNERBRACKET",em="RIGHTWHITECORNERBRACKET",tm="FULLWIDTHLESSTHAN",nm="FULLWIDTHGREATERTHAN",rm="AMPERSAND",im="APOSTROPHE",sm="ASTERISK",ko="AT",om="BACKSLASH",am="BACKTICK",lm="CARET",To="COLON",ZE="COMMA",cm="DOLLAR",Yi="DOT",um="EQUALS",QE="EXCLAMATION",ui="HYPHEN",fd="PERCENT",dm="PIPE",fm="PLUS",hm="POUND",hd="QUERY",JE="QUOTE",Nz="FULLWIDTHMIDDLEDOT",e2="SEMI",Xi="SLASH",pd="TILDE",pm="UNDERSCORE",Tz="EMOJI",mm="SYM";var Az=Object.freeze({__proto__:null,ALPHANUMERICAL:Ez,AMPERSAND:rm,APOSTROPHE:im,ASCIINUMERICAL:kz,ASTERISK:sm,AT:ko,BACKSLASH:om,BACKTICK:am,CARET:lm,CLOSEANGLEBRACKET:Kp,CLOSEBRACE:dd,CLOSEBRACKET:Up,CLOSEPAREN:Gp,COLON:To,COMMA:ZE,DOLLAR:cm,DOT:Yi,EMOJI:Tz,EQUALS:um,EXCLAMATION:QE,FULLWIDTHGREATERTHAN:nm,FULLWIDTHLEFTPAREN:Yp,FULLWIDTHLESSTHAN:tm,FULLWIDTHMIDDLEDOT:Nz,FULLWIDTHRIGHTPAREN:Xp,HYPHEN:ui,LEFTCORNERBRACKET:Zp,LEFTWHITECORNERBRACKET:Jp,LOCALHOST:Od,NL:XE,NUM:YE,OPENANGLEBRACKET:Wp,OPENBRACE:ud,OPENBRACKET:Fp,OPENPAREN:$p,PERCENT:fd,PIPE:dm,PLUS:fm,POUND:hm,QUERY:hd,QUOTE:JE,RIGHTCORNERBRACKET:Qp,RIGHTWHITECORNERBRACKET:em,SCHEME:dp,SEMI:e2,SLASH:Xi,SLASH_SCHEME:Kl,SYM:mm,TILDE:pd,TLD:gk,UNDERSCORE:pm,UTLD:yk,UWORD:mk,WORD:As,WS:bk});const Es=/[a-z]/,Ou=new RegExp("\\p{L}","u"),Tb=new RegExp("\\p{Emoji}","u"),Ns=/\d/,Ab=/\s/,cR="\r",Mb=`
`,Gee="",Wee="",_b="";let Hh=null,Fh=null;function Kee(e=[]){const t={};Sr.groups=t;const n=new Sr;Hh==null&&(Hh=uR(Vee)),Fh==null&&(Fh=uR(qee)),ve(n,"'",im),ve(n,"{",ud),ve(n,"}",dd),ve(n,"[",Fp),ve(n,"]",Up),ve(n,"(",$p),ve(n,")",Gp),ve(n,"<",Wp),ve(n,">",Kp),ve(n,"",Yp),ve(n,"",Xp),ve(n,"",Zp),ve(n,"",Qp),ve(n,"",Jp),ve(n,"",em),ve(n,"",tm),ve(n,"",nm),ve(n,"&",rm),ve(n,"*",sm),ve(n,"@",ko),ve(n,"`",am),ve(n,"^",lm),ve(n,":",To),ve(n,",",ZE),ve(n,"$",cm),ve(n,".",Yi),ve(n,"=",um),ve(n,"!",QE),ve(n,"-",ui),ve(n,"%",fd),ve(n,"|",dm),ve(n,"+",fm),ve(n,"#",hm),ve(n,"?",hd),ve(n,'"',JE),ve(n,"/",Xi),ve(n,";",e2),ve(n,"~",pd),ve(n,"_",pm),ve(n,"\\",om),ve(n,"",Nz);const r=en(n,Ns,YE,{[dk]:!0});en(r,Ns,r);const i=en(r,Es,kz,{[cd]:!0}),s=en(r,Ou,Ez,{[Wu]:!0}),o=en(n,Es,As,{[fk]:!0});en(o,Ns,i),en(o,Es,o),en(i,Ns,i),en(i,Es,i);const l=en(n,Ou,mk,{[hk]:!0});en(l,Es),en(l,Ns,s),en(l,Ou,l),en(s,Ns,s),en(s,Es),en(s,Ou,s);const u=ve(n,Mb,XE,{[Nb]:!0}),d=ve(n,cR,bk,{[Nb]:!0}),h=en(n,Ab,bk,{[Nb]:!0});ve(n,_b,h),ve(d,Mb,u),ve(d,_b,h),en(d,Ab,h),ve(h,cR),ve(h,Mb),en(h,Ab,h),ve(h,_b,h);const p=en(n,Tb,Tz,{[Cz]:!0});ve(p,"#"),en(p,Tb,p),ve(p,Gee,p);const g=ve(p,Wee);ve(g,"#"),en(g,Tb,p);const b=[[Es,o],[Ns,i]],v=[[Es,null],[Ou,l],[Ns,s]];for(let S=0;S<Hh.length;S++)bo(n,Hh[S],gk,As,b);for(let S=0;S<Fh.length;S++)bo(n,Fh[S],yk,mk,v);Ta(gk,{tld:!0,ascii:!0},t),Ta(yk,{utld:!0,alpha:!0},t),bo(n,"file",dp,As,b),bo(n,"mailto",dp,As,b),bo(n,"http",Kl,As,b),bo(n,"https",Kl,As,b),bo(n,"ftp",Kl,As,b),bo(n,"ftps",Kl,As,b),Ta(dp,{scheme:!0,ascii:!0},t),Ta(Kl,{slashscheme:!0,ascii:!0},t),e=e.sort((S,w)=>S[0]>w[0]?1:-1);for(let S=0;S<e.length;S++){const w=e[S][0],T=e[S][1]?{[Hee]:!0}:{[Fee]:!0};w.indexOf("-")>=0?T[pk]=!0:Es.test(w)?Ns.test(w)?T[cd]=!0:T[fk]=!0:T[dk]=!0,lR(n,w,w,T)}return lR(n,"localhost",Od,{ascii:!0}),n.jd=new Sr(mm),{start:n,tokens:Object.assign({groups:t},Az)}}function Mz(e,t){const n=Yee(t.replace(/[A-Z]/g,l=>l.toLowerCase())),r=n.length,i=[];let s=0,o=0;for(;o<r;){let l=e,u=null,d=0,h=null,p=-1,g=-1;for(;o<r&&(u=l.go(n[o]));)l=u,l.accepts()?(p=0,g=0,h=l):p>=0&&(p+=n[o].length,g++),d+=n[o].length,s+=n[o].length,o++;s-=p,o-=g,d-=p,i.push({t:h.t,v:t.slice(s-d,s),s:s-d,e:s})}return i}function Yee(e){const t=[],n=e.length;let r=0;for(;r<n;){let i=e.charCodeAt(r),s,o=i<55296||i>56319||r+1===n||(s=e.charCodeAt(r+1))<56320||s>57343?e[r]:e.slice(r,r+2);t.push(o),r+=o.length}return t}function bo(e,t,n,r,i){let s;const o=t.length;for(let l=0;l<o-1;l++){const u=t[l];e.j[u]?s=e.j[u]:(s=new Sr(r),s.jr=i.slice(),e.j[u]=s),e=s}return s=new Sr(n),s.jr=i.slice(),e.j[t[o-1]]=s,s}function uR(e){const t=[],n=[];let r=0,i="0123456789";for(;r<e.length;){let s=0;for(;i.indexOf(e[r+s])>=0;)s++;if(s>0){t.push(n.join(""));for(let o=parseInt(e.substring(r,r+s),10);o>0;o--)n.pop();r+=s}else n.push(e[r]),r++}return t}const Ld={defaultProtocol:"http",events:null,format:dR,formatHref:dR,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function t2(e,t=null){let n=Object.assign({},Ld);e&&(n=Object.assign(n,e instanceof t2?e.o:e));const r=n.ignoreTags,i=[];for(let s=0;s<r.length;s++)i.push(r[s].toUpperCase());this.o=n,t&&(this.defaultRender=t),this.ignoreTags=i}t2.prototype={o:Ld,ignoreTags:[],defaultRender(e){return e},check(e){return this.get("validate",e.toString(),e)},get(e,t,n){const r=t!=null;let i=this.o[e];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:Ld[e],typeof i=="function"&&r&&(i=i(t,n))):typeof i=="function"&&r&&(i=i(t,n.t,n)),i)},getObj(e,t,n){let r=this.o[e];return typeof r=="function"&&t!=null&&(r=r(t,n.t,n)),r},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}};function dR(e){return e}function _z(e,t){this.t="token",this.v=e,this.tk=t}_z.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),n=e.get("truncate",t,this),r=e.get("format",t,this);return n&&r.length>n?r.substring(0,n)+"":r},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e=Ld.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,n=this.toHref(e.get("defaultProtocol")),r=e.get("formatHref",n,this),i=e.get("tagName",n,t),s=this.toFormattedString(e),o={},l=e.get("className",n,t),u=e.get("target",n,t),d=e.get("rel",n,t),h=e.getObj("attributes",n,t),p=e.getObj("events",n,t);return o.href=r,l&&(o.class=l),u&&(o.target=u),d&&(o.rel=d),h&&Object.assign(o,h),{tagName:i,attributes:o,content:s,eventListeners:p}}};function ng(e,t){class n extends _z{constructor(i,s){super(i,s),this.t=e}}for(const r in t)n.prototype[r]=t[r];return n.t=e,n}const fR=ng("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),hR=ng("text"),Xee=ng("nl"),Uh=ng("url",{isLink:!0,toHref(e=Ld.defaultProtocol){return this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==Od&&e[1].t===To}}),li=e=>new Sr(e);function Zee({groups:e}){const t=e.domain.concat([rm,sm,ko,om,am,lm,cm,um,ui,YE,fd,dm,fm,hm,Xi,mm,pd,pm]),n=[im,To,ZE,Yi,QE,fd,hd,JE,e2,Wp,Kp,ud,dd,Up,Fp,$p,Gp,Yp,Xp,Zp,Qp,Jp,em,tm,nm],r=[rm,im,sm,om,am,lm,cm,um,ui,ud,dd,fd,dm,fm,hm,hd,Xi,mm,pd,pm],i=li(),s=ve(i,pd);et(s,r,s),et(s,e.domain,s);const o=li(),l=li(),u=li();et(i,e.domain,o),et(i,e.scheme,l),et(i,e.slashscheme,u),et(o,r,s),et(o,e.domain,o);const d=ve(o,ko);ve(s,ko,d),ve(l,ko,d),ve(u,ko,d);const h=ve(s,Yi);et(h,r,s),et(h,e.domain,s);const p=li();et(d,e.domain,p),et(p,e.domain,p);const g=ve(p,Yi);et(g,e.domain,p);const b=li(fR);et(g,e.tld,b),et(g,e.utld,b),ve(d,Od,b);const v=ve(p,ui);ve(v,ui,v),et(v,e.domain,p),et(b,e.domain,p),ve(b,Yi,g),ve(b,ui,v);const S=ve(b,To);et(S,e.numeric,fR);const w=ve(o,ui),k=ve(o,Yi);ve(w,ui,w),et(w,e.domain,o),et(k,r,s),et(k,e.domain,o);const T=li(Uh);et(k,e.tld,T),et(k,e.utld,T),et(T,e.domain,o),et(T,r,s),ve(T,Yi,k),ve(T,ui,w),ve(T,ko,d);const E=ve(T,To),N=li(Uh);et(E,e.numeric,N);const A=li(Uh),_=li();et(A,t,A),et(A,n,_),et(_,t,A),et(_,n,_),ve(T,Xi,A),ve(N,Xi,A);const j=ve(l,To),R=ve(u,To),I=ve(R,Xi),B=ve(I,Xi);et(l,e.domain,o),ve(l,Yi,k),ve(l,ui,w),et(u,e.domain,o),ve(u,Yi,k),ve(u,ui,w),et(j,e.domain,A),ve(j,Xi,A),ve(j,hd,A),et(B,e.domain,A),et(B,t,A),ve(B,Xi,A);const U=[[ud,dd],[Fp,Up],[$p,Gp],[Wp,Kp],[Yp,Xp],[Zp,Qp],[Jp,em],[tm,nm]];for(let V=0;V<U.length;V++){const[F,L]=U[V],H=ve(A,F);ve(_,F,H),ve(H,L,A);const O=li(Uh);et(H,t,O);const q=li();et(H,n),et(O,t,O),et(O,n,q),et(q,t,O),et(q,n,q),ve(O,L,A),ve(q,L,A)}return ve(i,Od,T),ve(i,XE,Xee),{start:i,tokens:Az}}function Qee(e,t,n){let r=n.length,i=0,s=[],o=[];for(;i<r;){let l=e,u=null,d=null,h=0,p=null,g=-1;for(;i<r&&!(u=l.go(n[i].t));)o.push(n[i++]);for(;i<r&&(d=u||l.go(n[i].t));)u=null,l=d,l.accepts()?(g=0,p=l):g>=0&&g++,i++,h++;if(g<0)i-=h,i<r&&(o.push(n[i]),i++);else{o.length>0&&(s.push(Db(hR,t,o)),o=[]),i-=g,h-=g;const b=p.t,v=n.slice(i-h,i);s.push(Db(b,t,v))}}return o.length>0&&s.push(Db(hR,t,o)),s}function Db(e,t,n){const r=n[0].s,i=n[n.length-1].e,s=t.slice(r,i);return new e(s,n)}const Jee=typeof console<"u"&&console&&console.warn||(()=>{}),ete="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",Bt={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function tte(){return Sr.groups={},Bt.scanner=null,Bt.parser=null,Bt.tokenQueue=[],Bt.pluginQueue=[],Bt.customSchemes=[],Bt.initialized=!1,Bt}function pR(e,t=!1){if(Bt.initialized&&Jee(`linkifyjs: already initialized - will not register custom scheme "${e}" ${ete}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);Bt.customSchemes.push([e,t])}function nte(){Bt.scanner=Kee(Bt.customSchemes);for(let e=0;e<Bt.tokenQueue.length;e++)Bt.tokenQueue[e][1]({scanner:Bt.scanner});Bt.parser=Zee(Bt.scanner.tokens);for(let e=0;e<Bt.pluginQueue.length;e++)Bt.pluginQueue[e][1]({scanner:Bt.scanner,parser:Bt.parser});return Bt.initialized=!0,Bt}function n2(e){return Bt.initialized||nte(),Qee(Bt.parser.start,e,Mz(Bt.scanner.start,e))}n2.scan=Mz;function Dz(e,t=null,n=null){if(t&&typeof t=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);n=t,t=null}const r=new t2(n),i=n2(e),s=[];for(let o=0;o<i.length;o++){const l=i[o];l.isLink&&(!t||l.t===t)&&r.check(l)&&s.push(l.toFormattedObject(r))}return s}var r2="[\0- -\u2029]",rte=new RegExp(r2),ite=new RegExp(`${r2}$`),ste=new RegExp(r2,"g");function ote(e){return e.length===1?e[0].isLink:e.length===3&&e[1].isLink?["()","[]"].includes(e[0].value+e[2].value):!1}function ate(e){return new sn({key:new In("autolink"),appendTransaction:(t,n,r)=>{const i=t.some(d=>d.docChanged)&&!n.doc.eq(r.doc),s=t.some(d=>d.getMeta("preventAutolink"));if(!i||s)return;const{tr:o}=r,l=UB(n.doc,[...t]);if(JB(l).forEach(({newRange:d})=>{const h=uQ(r.doc,d,b=>b.isTextblock);let p,g;if(h.length>1)p=h[0],g=r.doc.textBetween(p.pos,p.pos+p.node.nodeSize,void 0," ");else if(h.length){const b=r.doc.textBetween(d.from,d.to," "," ");if(!ite.test(b))return;p=h[0],g=r.doc.textBetween(p.pos,d.to,void 0," ")}if(p&&g){const b=g.split(rte).filter(Boolean);if(b.length<=0)return!1;const v=b[b.length-1],S=p.pos+g.lastIndexOf(v);if(!v)return!1;const w=n2(v).map(k=>k.toObject(e.defaultProtocol));if(!ote(w))return!1;w.filter(k=>k.isLink).map(k=>({...k,from:S+k.start+1,to:S+k.end+1})).filter(k=>r.schema.marks.code?!r.doc.rangeHasMark(k.from,k.to,r.schema.marks.code):!0).filter(k=>e.validate(k.value)).filter(k=>e.shouldAutoLink(k.value)).forEach(k=>{GE(k.from,k.to,r.doc).some(T=>T.mark.type===e.type)||o.addMark(k.from,k.to,e.type.create({href:k.href}))})}}),!!o.steps.length)return o}})}function lte(e){return new sn({key:new In("handleClickLink"),props:{handleClick:(t,n,r)=>{var i,s;if(r.button!==0||!t.editable)return!1;let o=null;if(r.target instanceof HTMLAnchorElement)o=r.target;else{let h=r.target;const p=[];for(;h.nodeName!=="DIV";)p.push(h),h=h.parentNode;o=p.find(g=>g.nodeName==="A")}if(!o)return!1;const l=QB(t.state,e.type.name),u=(i=o?.href)!=null?i:l.href,d=(s=o?.target)!=null?s:l.target;return e.enableClickSelection&&e.editor.commands.extendMarkRange(e.type.name),o&&u?(window.open(u,d),!0):!1}}})}function cte(e){return new sn({key:new In("handlePasteLink"),props:{handlePaste:(t,n,r)=>{const{state:i}=t,{selection:s}=i,{empty:o}=s;if(o)return!1;let l="";r.content.forEach(d=>{l+=d.textContent});const u=Dz(l,{defaultProtocol:e.defaultProtocol}).find(d=>d.isLink&&d.value===l);return!l||!u?!1:e.editor.commands.setMark(e.type,{href:u.href})}}})}function ga(e,t){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return t&&t.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&n.push(i)}),!e||e.replace(ste,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var Rz=Ja.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(e=>{if(typeof e=="string"){pR(e);return}pR(e.scheme,e.optionalSlashes)})},onDestroy(){tte()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(e,t)=>!!ga(e,t.protocols),validate:e=>!!e,shouldAutoLink:e=>!!e}},addAttributes(){return{href:{default:null,parseHTML(e){return e.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:e=>{const t=e.getAttribute("href");return!t||!this.options.isAllowedUri(t,{defaultValidate:n=>!!ga(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:e}){return this.options.isAllowedUri(e.href,{defaultValidate:t=>!!ga(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",vn(this.options.HTMLAttributes,e),0]:["a",vn(this.options.HTMLAttributes,{...e,href:""}),0]},addCommands(){return{setLink:e=>({chain:t})=>{const{href:n}=e;return this.options.isAllowedUri(n,{defaultValidate:r=>!!ga(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?t().setMark(this.name,e).setMeta("preventAutolink",!0).run():!1},toggleLink:e=>({chain:t})=>{const{href:n}=e||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!ga(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:t().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Fa({find:e=>{const t=[];if(e){const{protocols:n,defaultProtocol:r}=this.options,i=Dz(e).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:o=>!!ga(o,n),protocols:n,defaultProtocol:r}));i.length&&i.forEach(s=>t.push({text:s.value,data:{href:s.href},index:s.start}))}return t},type:this.type,getAttributes:e=>{var t;return{href:(t=e.data)==null?void 0:t.href}}})]},addProseMirrorPlugins(){const e=[],{protocols:t,defaultProtocol:n}=this.options;return this.options.autolink&&e.push(ate({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!ga(i,t),protocols:t,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&e.push(lte({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&e.push(cte({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),e}}),ute=Rz,dte=Object.defineProperty,fte=(e,t)=>{for(var n in t)dte(e,n,{get:t[n],enumerable:!0})},hte="listItem",mR="textStyle",gR=/^\s*([-+*])\s$/,i2=Yr.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:e}){return["ul",vn(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(hte,this.editor.getAttributes(mR)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=xc({find:gR,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=xc({find:gR,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(mR),editor:this.editor})),[e]}}),s2=Yr.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",vn(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),pte={};fte(pte,{findListItemPos:()=>af,getNextListDepth:()=>o2,handleBackspace:()=>xk,handleDelete:()=>vk,hasListBefore:()=>jz,hasListItemAfter:()=>mte,hasListItemBefore:()=>Oz,listItemHasSubList:()=>Lz,nextListIsDeeper:()=>Pz,nextListIsHigher:()=>Iz});var af=(e,t)=>{const{$from:n}=t.selection,r=wn(e,t.schema);let i=null,s=n.depth,o=n.pos,l=null;for(;s>0&&l===null;)i=n.node(s),i.type===r?l=s:(s-=1,o-=1);return l===null?null:{$pos:t.doc.resolve(o),depth:l}},o2=(e,t)=>{const n=af(e,t);if(!n)return!1;const[,r]=vQ(t,e,n.$pos.pos+4);return r},jz=(e,t,n)=>{const{$anchor:r}=e.selection,i=Math.max(0,r.pos-2),s=e.doc.resolve(i).node();return!(!s||!n.includes(s.type.name))},Oz=(e,t)=>{var n;const{$anchor:r}=t.selection,i=t.doc.resolve(r.pos-2);return!(i.index()===0||((n=i.nodeBefore)==null?void 0:n.type.name)!==e)},Lz=(e,t,n)=>{if(!n)return!1;const r=wn(e,t.schema);let i=!1;return n.descendants(s=>{s.type===r&&(i=!0)}),i},xk=(e,t,n)=>{if(e.commands.undoInputRule())return!0;if(e.state.selection.from!==e.state.selection.to)return!1;if(!Ho(e.state,t)&&jz(e.state,t,n)){const{$anchor:l}=e.state.selection,u=e.state.doc.resolve(l.before()-1),d=[];u.node().descendants((g,b)=>{g.type.name===t&&d.push({node:g,pos:b})});const h=d.at(-1);if(!h)return!1;const p=e.state.doc.resolve(u.start()+h.pos+1);return e.chain().cut({from:l.start()-1,to:l.end()+1},p.end()).joinForward().run()}if(!Ho(e.state,t)||!kQ(e.state))return!1;const r=af(t,e.state);if(!r)return!1;const s=e.state.doc.resolve(r.$pos.pos-2).node(r.depth),o=Lz(t,e.state,s);return Oz(t,e.state)&&!o?e.commands.joinItemBackward():e.chain().liftListItem(t).run()},Pz=(e,t)=>{const n=o2(e,t),r=af(e,t);return!r||!n?!1:n>r.depth},Iz=(e,t)=>{const n=o2(e,t),r=af(e,t);return!r||!n?!1:n<r.depth},vk=(e,t)=>{if(!Ho(e.state,t)||!CQ(e.state,t))return!1;const{selection:n}=e.state,{$from:r,$to:i}=n;return!n.empty&&r.sameParent(i)?!1:Pz(t,e.state)?e.chain().focus(e.state.selection.from+4).lift(t).joinBackward().run():Iz(t,e.state)?e.chain().joinForward().joinBackward().run():e.commands.joinItemForward()},mte=(e,t)=>{var n;const{$anchor:r}=t.selection,i=t.doc.resolve(r.pos-r.parentOffset-2);return!(i.index()===i.parent.childCount-1||((n=i.nodeAfter)==null?void 0:n.type.name)!==e)},Bz=cn.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&vk(e,n)&&(t=!0)}),t},"Mod-Delete":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&vk(e,n)&&(t=!0)}),t},Backspace:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{e.state.schema.nodes[n]!==void 0&&xk(e,n,r)&&(t=!0)}),t},"Mod-Backspace":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{e.state.schema.nodes[n]!==void 0&&xk(e,n,r)&&(t=!0)}),t}}}}),gte="listItem",yR="textStyle",bR=/^(\d+)\.\s$/,a2=Yr.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1},type:{default:null,parseHTML:e=>e.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:e}){const{start:t,...n}=e;return t===1?["ol",vn(this.options.HTMLAttributes,n),0]:["ol",vn(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(gte,this.editor.getAttributes(yR)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=xc({find:bR,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=xc({find:bR,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:t=>({start:+t[1],...this.editor.getAttributes(yR)}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1],editor:this.editor})),[e]}}),yte=/^\s*(\[([( |x])?\])\s$/,bte=Yr.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:e=>{const t=e.getAttribute("data-checked");return t===""||t==="true"},renderHTML:e=>({"data-checked":e.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:e,HTMLAttributes:t}){return["li",vn(this.options.HTMLAttributes,t,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:e.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const e={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...e,Tab:()=>this.editor.commands.sinkListItem(this.name)}:e},addNodeView(){return({node:e,HTMLAttributes:t,getPos:n,editor:r})=>{const i=document.createElement("li"),s=document.createElement("label"),o=document.createElement("span"),l=document.createElement("input"),u=document.createElement("div"),d=h=>{var p,g;l.ariaLabel=((g=(p=this.options.a11y)==null?void 0:p.checkboxLabel)==null?void 0:g.call(p,h,l.checked))||`Task item checkbox for ${h.textContent||"empty task item"}`};return d(e),s.contentEditable="false",l.type="checkbox",l.addEventListener("mousedown",h=>h.preventDefault()),l.addEventListener("change",h=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){l.checked=!l.checked;return}const{checked:p}=h.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:g})=>{const b=n();if(typeof b!="number")return!1;const v=g.doc.nodeAt(b);return g.setNodeMarkup(b,void 0,{...v?.attrs,checked:p}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(e,p)||(l.checked=!l.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([h,p])=>{i.setAttribute(h,p)}),i.dataset.checked=e.attrs.checked,l.checked=e.attrs.checked,s.append(l,o),i.append(s,u),Object.entries(t).forEach(([h,p])=>{i.setAttribute(h,p)}),{dom:i,contentDOM:u,update:h=>h.type!==this.type?!1:(i.dataset.checked=h.attrs.checked,l.checked=h.attrs.checked,d(h),!0)}}},addInputRules(){return[xc({find:yte,type:this.type,getAttributes:e=>({checked:e[e.length-1]==="x"})})]}}),xte=Yr.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:e}){return["ul",vn(this.options.HTMLAttributes,e,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});cn.create({name:"listKit",addExtensions(){const e=[];return this.options.bulletList!==!1&&e.push(i2.configure(this.options.bulletList)),this.options.listItem!==!1&&e.push(s2.configure(this.options.listItem)),this.options.listKeymap!==!1&&e.push(Bz.configure(this.options.listKeymap)),this.options.orderedList!==!1&&e.push(a2.configure(this.options.orderedList)),this.options.taskItem!==!1&&e.push(bte.configure(this.options.taskItem)),this.options.taskList!==!1&&e.push(xte.configure(this.options.taskList)),e}});var vte=Yr.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:e}){return["p",vn(this.options.HTMLAttributes,e),0]},addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),wte=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,Ste=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,Cte=Ja.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["s",vn(this.options.HTMLAttributes,e),0]},addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[bc({find:wte,type:this.type})]},addPasteRules(){return[Fa({find:Ste,type:this.type})]}}),kte=Yr.create({name:"text",group:"inline"}),zz=Ja.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["u",vn(this.options.HTMLAttributes,e),0]},addCommands(){return{setUnderline:()=>({commands:e})=>e.setMark(this.name),toggleUnderline:()=>({commands:e})=>e.toggleMark(this.name),unsetUnderline:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),Ete=zz;function Nte(e={}){return new sn({view(t){return new Tte(t,e)}})}class Tte{constructor(t,n){var r;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return t.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:t,handler:n})=>this.editorView.dom.removeEventListener(t,n))}update(t,n){this.cursorPos!=null&&n.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent,r,i=this.editorView.dom,s=i.getBoundingClientRect(),o=s.width/i.offsetWidth,l=s.height/i.offsetHeight;if(n){let p=t.nodeBefore,g=t.nodeAfter;if(p||g){let b=this.editorView.nodeDOM(this.cursorPos-(p?p.nodeSize:0));if(b){let v=b.getBoundingClientRect(),S=p?v.bottom:v.top;p&&g&&(S=(S+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let w=this.width/2*l;r={left:v.left,right:v.right,top:S-w,bottom:S+w}}}}if(!r){let p=this.editorView.coordsAtPos(this.cursorPos),g=this.width/2*o;r={left:p.left-g,right:p.left+g,top:p.top,bottom:p.bottom}}let u=this.editorView.dom.offsetParent;this.element||(this.element=u.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let d,h;if(!u||u==document.body&&getComputedStyle(u).position=="static")d=-pageXOffset,h=-pageYOffset;else{let p=u.getBoundingClientRect(),g=p.width/u.offsetWidth,b=p.height/u.offsetHeight;d=p.left-u.scrollLeft*g,h=p.top-u.scrollTop*b}this.element.style.left=(r.left-d)/o+"px",this.element.style.top=(r.top-h)/l+"px",this.element.style.width=(r.right-r.left)/o+"px",this.element.style.height=(r.bottom-r.top)/l+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,t):i;if(n&&!s){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=H6(this.editorView.state.doc,o,this.editorView.dragging.slice);l!=null&&(o=l)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}}class rn extends Je{constructor(t){super(t,t)}map(t,n){let r=t.resolve(n.map(this.head));return rn.valid(r)?new rn(r):Je.near(r)}content(){return Ne.empty}eq(t){return t instanceof rn&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new rn(t.resolve(n.pos))}getBookmark(){return new l2(this.anchor)}static valid(t){let n=t.parent;if(n.isTextblock||!Ate(t)||!Mte(t))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(t.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(t,n,r=!1){e:for(;;){if(!r&&rn.valid(t))return t;let i=t.pos,s=null;for(let o=t.depth;;o--){let l=t.node(o);if(n>0?t.indexAfter(o)<l.childCount:t.index(o)>0){s=l.child(n>0?t.indexAfter(o):t.index(o)-1);break}else if(o==0)return null;i+=n;let u=t.doc.resolve(i);if(rn.valid(u))return u}for(;;){let o=n>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!Ve.isSelectable(s)){t=t.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=o,i+=n;let l=t.doc.resolve(i);if(rn.valid(l))return l}return null}}}rn.prototype.visible=!1;rn.findFrom=rn.findGapCursorFrom;Je.jsonID("gapcursor",rn);class l2{constructor(t){this.pos=t}map(t){return new l2(t.map(this.pos))}resolve(t){let n=t.resolve(this.pos);return rn.valid(n)?new rn(n):Je.near(n)}}function Ate(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function Mte(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function _te(){return new sn({props:{decorations:Ote,createSelectionBetween(e,t,n){return t.pos==n.pos&&rn.valid(n)?new rn(n):null},handleClick:Rte,handleKeyDown:Dte,handleDOMEvents:{beforeinput:jte}}})}const Dte=_B({ArrowLeft:$h("horiz",-1),ArrowRight:$h("horiz",1),ArrowUp:$h("vert",-1),ArrowDown:$h("vert",1)});function $h(e,t){const n=e=="vert"?t>0?"down":"up":t>0?"right":"left";return function(r,i,s){let o=r.selection,l=t>0?o.$to:o.$from,u=o.empty;if(o instanceof Ye){if(!s.endOfTextblock(n)||l.depth==0)return!1;u=!1,l=r.doc.resolve(t>0?l.after():l.before())}let d=rn.findGapCursorFrom(l,t,u);return d?(i&&i(r.tr.setSelection(new rn(d))),!0):!1}}function Rte(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!rn.valid(r))return!1;let i=e.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&Ve.isSelectable(e.state.doc.nodeAt(i.inside))?!1:(e.dispatch(e.state.tr.setSelection(new rn(r))),!0)}function jte(e,t){if(t.inputType!="insertCompositionText"||!(e.state.selection instanceof rn))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let i=ye.empty;for(let o=r.length-1;o>=0;o--)i=ye.from(r[o].createAndFill(null,i));let s=e.state.tr.replace(n.pos,n.pos,new Ne(i,0,0));return s.setSelection(Ye.near(s.doc.resolve(n.pos+1))),e.dispatch(s),!1}function Ote(e){if(!(e.selection instanceof rn))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",Kt.create(e.doc,[dr.widget(e.selection.head,t,{key:"gapcursor"})])}var gm=200,Pn=function(){};Pn.prototype.append=function(t){return t.length?(t=Pn.from(t),!this.length&&t||t.length<gm&&this.leafAppend(t)||this.length<gm&&t.leafPrepend(this)||this.appendInner(t)):this};Pn.prototype.prepend=function(t){return t.length?Pn.from(t).append(this):this};Pn.prototype.appendInner=function(t){return new Lte(this,t)};Pn.prototype.slice=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=this.length),t>=n?Pn.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,n))};Pn.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};Pn.prototype.forEach=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(t,n,r,0):this.forEachInvertedInner(t,n,r,0)};Pn.prototype.map=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(t(s,o))},n,r),i};Pn.from=function(t){return t instanceof Pn?t:t&&t.length?new Vz(t):Pn.empty};var Vz=(function(e){function t(r){e.call(this),this.values=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new t(this.values.slice(i,s))},t.prototype.getInner=function(i){return this.values[i]},t.prototype.forEachInner=function(i,s,o,l){for(var u=s;u<o;u++)if(i(this.values[u],l+u)===!1)return!1},t.prototype.forEachInvertedInner=function(i,s,o,l){for(var u=s-1;u>=o;u--)if(i(this.values[u],l+u)===!1)return!1},t.prototype.leafAppend=function(i){if(this.length+i.length<=gm)return new t(this.values.concat(i.flatten()))},t.prototype.leafPrepend=function(i){if(this.length+i.length<=gm)return new t(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t})(Pn);Pn.empty=new Vz([]);var Lte=(function(e){function t(n,r){e.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},t.prototype.forEachInner=function(r,i,s,o){var l=this.left.length;if(i<l&&this.left.forEachInner(r,i,Math.min(s,l),o)===!1||s>l&&this.right.forEachInner(r,Math.max(i-l,0),Math.min(this.length,s)-l,o+l)===!1)return!1},t.prototype.forEachInvertedInner=function(r,i,s,o){var l=this.left.length;if(i>l&&this.right.forEachInvertedInner(r,i-l,Math.max(s,l)-l,o+l)===!1||s<l&&this.left.forEachInvertedInner(r,Math.min(i,l),s,o)===!1)return!1},t.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},t.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new t(this.left,i)},t.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new t(i,this.right)},t.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new t(this.left,new t(this.right,r)):new t(this,r)},t})(Pn);const Pte=500;class _i{constructor(t,n){this.items=t,this.eventCount=n}popEvent(t,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=t.tr,l,u,d=[],h=[];return this.items.forEach((p,g)=>{if(!p.step){i||(i=this.remapping(r,g+1),s=i.maps.length),s--,h.push(p);return}if(i){h.push(new Zi(p.map));let b=p.step.map(i.slice(s)),v;b&&o.maybeStep(b).doc&&(v=o.mapping.maps[o.mapping.maps.length-1],d.push(new Zi(v,void 0,void 0,d.length+h.length))),s--,v&&i.appendMap(v,s)}else o.maybeStep(p.step);if(p.selection)return l=i?p.selection.map(i.slice(s)):p.selection,u=new _i(this.items.slice(0,r).append(h.reverse().concat(d)),this.eventCount-1),!1},this.items.length,0),{remaining:u,transform:o,selection:l}}addTransform(t,n,r,i){let s=[],o=this.eventCount,l=this.items,u=!i&&l.length?l.get(l.length-1):null;for(let h=0;h<t.steps.length;h++){let p=t.steps[h].invert(t.docs[h]),g=new Zi(t.mapping.maps[h],p,n),b;(b=u&&u.merge(g))&&(g=b,h?s.pop():l=l.slice(0,l.length-1)),s.push(g),n&&(o++,n=void 0),i||(u=g)}let d=o-r.depth;return d>Bte&&(l=Ite(l,d),o-=d),new _i(l.append(s),o)}remapping(t,n){let r=new Td;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=t?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},t,n),r}addMaps(t){return this.eventCount==0?this:new _i(this.items.append(t.map(n=>new Zi(n))),this.eventCount)}rebased(t,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=t.mapping,o=t.steps.length,l=this.eventCount;this.items.forEach(g=>{g.selection&&l--},i);let u=n;this.items.forEach(g=>{let b=s.getMirror(--u);if(b==null)return;o=Math.min(o,b);let v=s.maps[b];if(g.step){let S=t.steps[b].invert(t.docs[b]),w=g.selection&&g.selection.map(s.slice(u+1,b));w&&l++,r.push(new Zi(v,S,w))}else r.push(new Zi(v))},i);let d=[];for(let g=n;g<o;g++)d.push(new Zi(s.maps[g]));let h=this.items.slice(0,i).append(d).append(r),p=new _i(h,l);return p.emptyItemCount()>Pte&&(p=p.compress(this.items.length-r.length)),p}emptyItemCount(){let t=0;return this.items.forEach(n=>{n.step||t++}),t}compress(t=this.items.length){let n=this.remapping(0,t),r=n.maps.length,i=[],s=0;return this.items.forEach((o,l)=>{if(l>=t)i.push(o),o.selection&&s++;else if(o.step){let u=o.step.map(n.slice(r)),d=u&&u.getMap();if(r--,d&&n.appendMap(d,r),u){let h=o.selection&&o.selection.map(n.slice(r));h&&s++;let p=new Zi(d.invert(),u,h),g,b=i.length-1;(g=i.length&&i[b].merge(p))?i[b]=g:i.push(p)}}else o.map&&r--},this.items.length,0),new _i(Pn.from(i.reverse()),s)}}_i.empty=new _i(Pn.empty,0);function Ite(e,t){let n;return e.forEach((r,i)=>{if(r.selection&&t--==0)return n=i,!1}),e.slice(n)}class Zi{constructor(t,n,r,i){this.map=t,this.step=n,this.selection=r,this.mirrorOffset=i}merge(t){if(this.step&&t.step&&!t.selection){let n=t.step.merge(this.step);if(n)return new Zi(n.getMap().invert(),n,this.selection)}}}class Eo{constructor(t,n,r,i,s){this.done=t,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const Bte=20;function zte(e,t,n,r){let i=n.getMeta(Pa),s;if(i)return i.historyState;n.getMeta(Hte)&&(e=new Eo(e.done,e.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return e;if(o&&o.getMeta(Pa))return o.getMeta(Pa).redo?new Eo(e.done.addTransform(n,void 0,r,fp(t)),e.undone,xR(n.mapping.maps),e.prevTime,e.prevComposition):new Eo(e.done,e.undone.addTransform(n,void 0,r,fp(t)),null,e.prevTime,e.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let l=n.getMeta("composition"),u=e.prevTime==0||!o&&e.prevComposition!=l&&(e.prevTime<(n.time||0)-r.newGroupDelay||!Vte(n,e.prevRanges)),d=o?Rb(e.prevRanges,n.mapping):xR(n.mapping.maps);return new Eo(e.done.addTransform(n,u?t.selection.getBookmark():void 0,r,fp(t)),_i.empty,d,n.time,l??e.prevComposition)}else return(s=n.getMeta("rebased"))?new Eo(e.done.rebased(n,s),e.undone.rebased(n,s),Rb(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new Eo(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),Rb(e.prevRanges,n.mapping),e.prevTime,e.prevComposition)}function Vte(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<t.length;s+=2)r<=t[s+1]&&i>=t[s]&&(n=!0)}),n}function xR(e){let t=[];for(let n=e.length-1;n>=0&&t.length==0;n--)e[n].forEach((r,i,s,o)=>t.push(s,o));return t}function Rb(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let i=t.map(e[r],1),s=t.map(e[r+1],-1);i<=s&&n.push(i,s)}return n}function qte(e,t,n){let r=fp(t),i=Pa.get(t).spec.config,s=(n?e.undone:e.done).popEvent(t,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),l=(n?e.done:e.undone).addTransform(s.transform,t.selection.getBookmark(),i,r),u=new Eo(n?l:s.remaining,n?s.remaining:l,null,0,-1);return s.transform.setSelection(o).setMeta(Pa,{redo:n,historyState:u})}let jb=!1,vR=null;function fp(e){let t=e.plugins;if(vR!=t){jb=!1,vR=t;for(let n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){jb=!0;break}}return jb}const Pa=new In("history"),Hte=new In("closeHistory");function Fte(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new sn({key:Pa,state:{init(){return new Eo(_i.empty,_i.empty,null,0,-1)},apply(t,n,r){return zte(n,r,t,e)}},config:e,props:{handleDOMEvents:{beforeinput(t,n){let r=n.inputType,i=r=="historyUndo"?Hz:r=="historyRedo"?Fz:null;return i?(n.preventDefault(),i(t.state,t.dispatch)):!1}}}})}function qz(e,t){return(n,r)=>{let i=Pa.getState(n);if(!i||(e?i.undone:i.done).eventCount==0)return!1;if(r){let s=qte(i,n,e);s&&r(t?s.scrollIntoView():s)}return!0}}const Hz=qz(!1,!0),Fz=qz(!0,!0);cn.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:e=>e.length,wordCounter:e=>e.split(" ").filter(t=>t!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=e=>{const t=e?.node||this.editor.state.doc;if((e?.mode||this.options.mode)==="textSize"){const r=t.textBetween(0,t.content.size,void 0," ");return this.options.textCounter(r)}return t.nodeSize},this.storage.words=e=>{const t=e?.node||this.editor.state.doc,n=t.textBetween(0,t.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let e=!1;return[new sn({key:new In("characterCount"),appendTransaction:(t,n,r)=>{if(e)return;const i=this.options.limit;if(i==null||i===0){e=!0;return}const s=this.storage.characters({node:r.doc});if(s>i){const o=s-i,l=0,u=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const d=r.tr.deleteRange(l,u);return e=!0,d}e=!0},filterTransaction:(t,n)=>{const r=this.options.limit;if(!t.docChanged||r===0||r===null||r===void 0)return!0;const i=this.storage.characters({node:n.doc}),s=this.storage.characters({node:t.doc});if(s<=r||i>r&&s>r&&s<=i)return!0;if(i>r&&s>r&&s>i||!t.getMeta("paste"))return!1;const l=t.selection.$head.pos,u=s-r,d=l-u,h=l;return t.deleteRange(d,h),!(this.storage.characters({node:t.doc})>r)}})]}});var Ute=cn.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[Nte(this.options)]}});cn.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new sn({key:new In("focus"),props:{decorations:({doc:e,selection:t})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:i}=t,s=[];if(!n||!r)return Kt.create(e,[]);let o=0;this.options.mode==="deepest"&&e.descendants((u,d)=>{if(u.isText)return;if(!(i>=d&&i<=d+u.nodeSize-1))return!1;o+=1});let l=0;return e.descendants((u,d)=>{if(u.isText||!(i>=d&&i<=d+u.nodeSize-1))return!1;if(l+=1,this.options.mode==="deepest"&&o-l>0||this.options.mode==="shallowest"&&l>1)return this.options.mode==="deepest";s.push(dr.node(d,d+u.nodeSize,{class:this.options.className}))}),Kt.create(e,s)}}})]}});var $te=cn.create({name:"gapCursor",addProseMirrorPlugins(){return[_te()]},extendNodeSchema(e){var t;const n={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:(t=St(ze(e,"allowGapCursor",n)))!=null?t:null}}}),Gte=cn.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something ",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new sn({key:new In("placeholder"),props:{decorations:({doc:e,selection:t})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=t,i=[];if(!n)return null;const s=this.editor.isEmpty;return e.descendants((o,l)=>{const u=r>=l&&r<=l+o.nodeSize,d=!o.isLeaf&&Jm(o);if((u||!this.options.showOnlyCurrent)&&d){const h=[this.options.emptyNodeClass];s&&h.push(this.options.emptyEditorClass);const p=dr.node(l,l+o.nodeSize,{class:h.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:l,hasAnchor:u}):this.options.placeholder});i.push(p)}return this.options.includeChildren}),Kt.create(e,i)}}})]}});cn.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:e,options:t}=this;return[new sn({key:new In("selection"),props:{decorations(n){return n.selection.empty||e.isFocused||!e.isEditable||tz(n.selection)||e.view.dragging?null:Kt.create(n.doc,[dr.inline(n.selection.from,n.selection.to,{class:t.className})])}}})]}});function wR({types:e,node:t}){return t&&Array.isArray(e)&&e.includes(t.type)||t?.type===e}var Wte=cn.create({name:"trailingNode",addOptions(){return{node:"paragraph",notAfter:[]}},addProseMirrorPlugins(){const e=new In(this.name),t=Object.entries(this.editor.schema.nodes).map(([,n])=>n).filter(n=>(this.options.notAfter||[]).concat(this.options.node).includes(n.name));return[new sn({key:e,appendTransaction:(n,r,i)=>{const{doc:s,tr:o,schema:l}=i,u=e.getState(i),d=s.content.size,h=l.nodes[this.options.node];if(u)return o.insert(d,h.create())},state:{init:(n,r)=>{const i=r.tr.doc.lastChild;return!wR({node:i,types:t})},apply:(n,r)=>{if(!n.docChanged)return r;const i=n.doc.lastChild;return!wR({node:i,types:t})}}})]}}),Kte=cn.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:e,dispatch:t})=>Hz(e,t),redo:()=>({state:e,dispatch:t})=>Fz(e,t)}},addProseMirrorPlugins(){return[Fte(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-":()=>this.editor.commands.undo(),"Shift-Mod-":()=>this.editor.commands.redo()}}}),Yte=cn.create({name:"starterKit",addExtensions(){var e,t,n,r;const i=[];return this.options.bold!==!1&&i.push(kee.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(xee.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(i2.configure(this.options.bulletList)),this.options.code!==!1&&i.push(Tee.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(_ee.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(Dee.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(Ute.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push($te.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(Ree.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(Sz.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(Kte.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(Oee.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(zee.configure(this.options.italic)),this.options.listItem!==!1&&i.push(s2.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(Bz.configure((e=this.options)==null?void 0:e.listKeymap)),this.options.link!==!1&&i.push(Rz.configure((t=this.options)==null?void 0:t.link)),this.options.orderedList!==!1&&i.push(a2.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(vte.configure(this.options.paragraph)),this.options.strike!==!1&&i.push(Cte.configure(this.options.strike)),this.options.text!==!1&&i.push(kte.configure(this.options.text)),this.options.underline!==!1&&i.push(zz.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&i.push(Wte.configure((r=this.options)==null?void 0:r.trailingNode)),i}}),Xte=Yte,Zte=cn.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:e=>{const t=e.style.textAlign;return this.options.alignments.includes(t)?t:this.options.defaultAlignment},renderHTML:e=>e.textAlign?{style:`text-align: ${e.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:e=>({commands:t})=>this.options.alignments.includes(e)?this.options.types.map(n=>t.updateAttributes(n,{textAlign:e})).every(n=>n):!1,unsetTextAlign:()=>({commands:e})=>this.options.types.map(t=>e.resetAttributes(t,"textAlign")).every(t=>t),toggleTextAlign:e=>({editor:t,commands:n})=>this.options.alignments.includes(e)?t.isActive({textAlign:e})?n.unsetTextAlign():n.setTextAlign(e):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),Qte=Zte,Jte=Gte,ene=i2,tne=a2,nne=s2;const rg=({label:e,id:t,children:n,focused:r,containerClassName:i})=>{const s=`${t}-label`;return m.jsxs(ft.div,{initial:{opacity:0,y:-4,scale:.98},animate:{opacity:1,y:0,scale:1},transition:{type:"spring",stiffness:260,damping:24},className:`flex flex-col gap-1 ${i||""}`,children:[e&&m.jsx(ft.label,{id:s,htmlFor:t,className:"text-xs text-muted",animate:{color:r?"var(--brand)":"var(--muted)"},transition:{duration:.25},children:e}),n]})},ig=()=>{const[e,t]=Ce.useState(!1);return{focused:e,onFocus:()=>t(!0),onBlur:()=>t(!1)}},ql=({onClick:e,disabled:t,active:n,title:r,children:i})=>m.jsx("button",{onClick:e,disabled:t,title:r,className:`px-2 py-1 rounded transition-colors ${n?"bg-[var(--brand)] text-white":"hover:bg-[var(--bg-hover)] text-theme"} ${t?"opacity-50 cursor-not-allowed":""}`,children:i}),SR=({editor:e,disabled:t})=>{let n="0";return e.isActive("heading",{level:1})?n="1":e.isActive("heading",{level:2})?n="2":e.isActive("heading",{level:3})&&(n="3"),m.jsxs("select",{title:"Heading level",value:n,onChange:r=>{const i=parseInt(r.target.value,10);i===0?e.chain().focus().setParagraph().run():e.chain().focus().toggleHeading({level:i}).run()},className:"rounded border px-1 py-0.5 bg-[var(--surface)] text-theme",disabled:t,children:[m.jsx("option",{value:"0",children:"P"}),m.jsx("option",{value:"1",children:"H1"}),m.jsx("option",{value:"2",children:"H2"}),m.jsx("option",{value:"3",children:"H3"})]})},ym=({id:e,label:t,value:n,onChange:r,placeholder:i="Start typing",disabled:s=!1,className:o="",containerClassName:l})=>{const[,u]=M.useState(0),[d,h]=M.useState(!1),{focused:p,onFocus:g,onBlur:b}=ig(),v=()=>u(Date.now()),S=()=>{h(!d)},w=pee({extensions:[Xte.configure({bulletList:!1,orderedList:!1,listItem:!1}),ene.configure({HTMLAttributes:{class:"bullet-list"}}),tne.configure({HTMLAttributes:{class:"ordered-list"}}),nne.configure({HTMLAttributes:{class:"list-item"}}),Ete,ute.configure({openOnClick:!1}),Qte.configure({types:["heading","paragraph"]}),jee.configure({levels:[1,2,3]}),Jte.configure({placeholder:i})],content:n,editable:!s,onUpdate:({editor:N})=>{r(N.getHTML())},onFocus:g,onBlur:b,onSelectionUpdate:()=>{v()},onTransaction:()=>{v()}});if(M.useEffect(()=>{w&&(n!==w.getHTML()&&w.commands.setContent(n,{emitUpdate:!1}),w.setEditable(!s))},[n,s,w]),M.useEffect(()=>{const N=A=>{A.key==="Escape"&&d&&h(!1)};return d?(document.addEventListener("keydown",N),document.body.style.overflow="hidden"):document.body.style.overflow="",()=>{document.removeEventListener("keydown",N),document.body.style.overflow=""}},[d]),!w)return null;const k=[{key:"bold",title:"Bold",onClick:()=>w.chain().focus().toggleBold().run(),active:w.isActive("bold"),node:m.jsx(rK,{size:16})},{key:"italic",title:"Italic",onClick:()=>w.chain().focus().toggleItalic().run(),active:w.isActive("italic"),node:m.jsx(iK,{size:16})},{key:"underline",title:"Underline",onClick:()=>w.chain().focus().toggleUnderline().run(),active:w.isActive("underline"),node:m.jsx(lK,{size:16})},{key:"strike",title:"Strikethrough",onClick:()=>w.chain().focus().toggleStrike().run(),active:w.isActive("strike"),node:m.jsx(m.Fragment,{children:"S"})},{key:"bulletList",title:"Bullet List",onClick:()=>w.chain().focus().toggleBulletList().run(),active:w.isActive("bulletList"),node:m.jsx(sK,{size:16})},{key:"orderedList",title:"Numbered List",onClick:()=>w.chain().focus().toggleOrderedList().run(),active:w.isActive("orderedList"),node:m.jsx(oK,{size:16})},{key:"blockquote",title:"Quote",onClick:()=>w.chain().focus().toggleBlockquote().run(),active:w.isActive("blockquote"),node:m.jsx(aK,{size:16})},{key:"codeBlock",title:"Code Block",onClick:()=>w.chain().focus().toggleCodeBlock().run(),active:w.isActive("codeBlock"),node:m.jsx(YW,{size:16})}],T=[{key:"align-left",title:"Align Left",onClick:()=>w.chain().focus().setTextAlign("left").run(),active:w.isActive({textAlign:"left"}),node:m.jsx(tK,{size:16})},{key:"align-center",title:"Align Center",onClick:()=>w.chain().focus().setTextAlign("center").run(),active:w.isActive({textAlign:"center"}),node:m.jsx(eK,{size:16})},{key:"align-right",title:"Align Right",onClick:()=>w.chain().focus().setTextAlign("right").run(),active:w.isActive({textAlign:"right"}),node:m.jsx(nK,{size:16})}],E=[{key:"fullscreen",title:d?"Exit Fullscreen":"Enter Fullscreen",onClick:S,active:d,node:d?m.jsx(fK,{size:16}):m.jsx(hK,{size:16})}];return m.jsx("div",{className:d?"fixed inset-0 z-50 bg-[var(--bg)] flex flex-col":"",children:d?m.jsxs(ft.div,{className:"h-full flex flex-col rounded-lg border border-[var(--border)] bg-[var(--surface)] text-theme m-4",animate:{boxShadow:p?"0 0 0 2px var(--brand)":"0 0 0 1px var(--border)"},transition:{type:"spring",stiffness:300,damping:30},children:[m.jsxs("div",{className:"flex flex-wrap items-center gap-1 border-b border-[var(--border)] p-2 text-sm shrink-0",children:[m.jsx("div",{className:"flex items-center gap-2 mr-4",children:t&&m.jsx("span",{className:"font-medium text-theme",children:t})}),m.jsx(SR,{editor:w,disabled:s}),k.map(N=>m.jsx(ql,{onClick:N.onClick,disabled:s,active:N.active,title:N.title,children:N.node},N.key)),T.map(N=>m.jsx(ql,{onClick:N.onClick,disabled:s,active:N.active,title:N.title,children:N.node},N.key)),m.jsx("div",{className:"w-px h-6 bg-[var(--border)] mx-1"}),E.map(N=>m.jsx(ql,{onClick:N.onClick,disabled:s,active:N.active,title:N.title,children:N.node},N.key))]}),m.jsx("div",{className:"flex-1 overflow-hidden",children:m.jsx("div",{className:"h-full overflow-y-auto p-4",children:m.jsx("div",{className:"prose prose-invert max-w-none min-h-full",children:m.jsx(aR,{editor:w,className:"focus:outline-none h-full"})})})})]}):m.jsx(rg,{id:e,label:t,focused:p,containerClassName:l,children:m.jsxs(ft.div,{className:`rounded-lg border border-[var(--border)] bg-[var(--surface)] text-theme ${o} ${s?"opacity-60 cursor-not-allowed":""}`,animate:{boxShadow:p?"0 0 0 2px var(--brand)":"0 0 0 1px var(--border)"},transition:{type:"spring",stiffness:300,damping:30},children:[m.jsxs("div",{className:"flex flex-wrap items-center gap-1 border-b border-[var(--border)] p-1 text-sm",children:[m.jsx(SR,{editor:w,disabled:s}),k.map(N=>m.jsx(ql,{onClick:N.onClick,disabled:s,active:N.active,title:N.title,children:N.node},N.key)),T.map(N=>m.jsx(ql,{onClick:N.onClick,disabled:s,active:N.active,title:N.title,children:N.node},N.key)),m.jsx("div",{className:"w-px h-6 bg-[var(--border)] mx-1"}),E.map(N=>m.jsx(ql,{onClick:N.onClick,disabled:s,active:N.active,title:N.title,children:N.node},N.key))]}),m.jsx("div",{className:"p-3 min-h-[8rem] prose prose-invert max-w-none",children:m.jsx(aR,{editor:w,className:"focus:outline-none"})})]})})})},rne=()=>{Xa();const e=Xd(),[t,n]=M.useState(!1),r=M.useRef(0),i=()=>(r.current+=1,`item-${Date.now()}-${r.current}`),[s,o]=M.useState({title:"",description:"",difficulty:"Medium",category:"Web Application",estimatedTime:"30 minutes",requirements:[{id:i(),value:""}],constraints:[{id:i(),value:""}],hints:[{id:i(),value:""}],tags:[{id:i(),value:""}]}),l=(g,b)=>{o(v=>({...v,[g]:b}))},u=(g,b,v)=>{const S=s[g].map(w=>w.id===b?{...w,value:v}:w);o(w=>({...w,[g]:S}))},d=g=>{o(b=>({...b,[g]:[...b[g],{id:i(),value:""}]}))},h=(g,b)=>{const v=s[g].filter(S=>S.id!==b);o(S=>({...S,[g]:v.length>0?v:[{id:i(),value:""}]}))},p=()=>{n(!0);const g={id:`custom-${Date.now()}`,title:s.title,description:s.description,difficulty:s.difficulty,category:s.category,estimated_time:s.estimatedTime,requirements:s.requirements.map(b=>b.value).filter(b=>b.trim()!==""),constraints:s.constraints.map(b=>b.value).filter(b=>b.trim()!==""),hints:s.hints.map(b=>b.value).filter(b=>b.trim()!==""),tags:s.tags.map(b=>b.value).filter(b=>b.trim()!=="")};localStorage.setItem(`custom-problem-${g.id}`,JSON.stringify(g)),setTimeout(()=>{e(`/playground/${g.id}`)},300)};return m.jsxs(m.Fragment,{children:[m.jsx(Qd,{title:"Create Custom System Design Problem | Diagrammatic",description:"Create and share custom system design problems with your students or team. Define requirements, constraints, and evaluation criteria for personalized learning experiences.",keywords:"create system design problem, custom architecture challenge, teaching system design, system design assignment creator",url:"https://satya00089.github.io/diagrammatic/#/create-problem"}),m.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[var(--surface)] via-[var(--bg)] to-[var(--surface)] text-theme relative grid-pattern-overlay",children:[m.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] transition-all duration-300 shadow-lg",children:m.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:m.jsxs("div",{className:"flex items-center justify-between h-16",children:[m.jsxs("button",{type:"button",onClick:()=>e("/"),className:"flex items-center space-x-3 group cursor-pointer",children:[m.jsx("img",{src:"/logo.png",alt:"Logo",className:"h-10 transition-transform group-hover:scale-110 duration-300"}),m.jsx("span",{className:"text-xl font-bold text-white",children:"Diagrammatic"})]}),m.jsx("div",{className:"flex items-center gap-4",children:m.jsx(Zd,{})})]})})}),m.jsx("div",{className:"pt-16 relative z-10",children:m.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[m.jsxs("div",{className:"text-center mb-12",children:[m.jsx("div",{className:"inline-block mb-4",children:m.jsx("span",{className:"px-4 py-2 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] text-white text-sm font-semibold rounded-full shadow-lg",children:" Custom Problem Creator"})}),m.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Create Custom Problem"}),m.jsx("p",{className:"text-muted text-lg max-w-2xl mx-auto",children:"Define your own system design challenge and start solving"})]}),m.jsx("div",{className:"elevated-card-bg backdrop-blur-md rounded-3xl shadow-2xl p-8 md:p-12",children:m.jsxs("div",{className:"space-y-8",children:[m.jsxs("div",{children:[m.jsxs("label",{htmlFor:"title",className:"text-sm font-bold text-theme mb-3 flex items-center gap-2",children:[m.jsx("span",{className:"text-xl",children:""})," Problem Title *"]}),m.jsx("input",{id:"title",type:"text",value:s.title,onChange:g=>l("title",g.target.value),placeholder:"e.g., Design a URL Shortener",className:"w-full px-5 py-4 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme text-lg transition-all duration-300 hover:border-[var(--brand)]/30"})]}),m.jsx("div",{children:m.jsx(ym,{id:"description",label:" Description *",value:s.description,onChange:g=>l("description",g),placeholder:"Describe the problem in detail..."})}),m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[m.jsxs("div",{children:[m.jsxs("label",{htmlFor:"difficulty",className:"text-sm font-bold text-theme mb-3 flex items-center gap-2",children:[m.jsx("span",{className:"text-xl",children:""})," Difficulty"]}),m.jsxs("select",{id:"difficulty",value:s.difficulty,onChange:g=>l("difficulty",g.target.value),className:"w-full px-5 py-4 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme cursor-pointer transition-all duration-300 hover:border-[var(--brand)]/30",children:[m.jsx("option",{value:"Easy",children:"Easy"}),m.jsx("option",{value:"Medium",children:"Medium"}),m.jsx("option",{value:"Hard",children:"Hard"})]})]}),m.jsxs("div",{children:[m.jsxs("label",{htmlFor:"category",className:"text-sm font-bold text-theme mb-3 flex items-center gap-2",children:[m.jsx("span",{className:"text-xl",children:""})," Category"]}),m.jsx("input",{id:"category",type:"text",value:s.category,onChange:g=>l("category",g.target.value),placeholder:"e.g., Web Application",className:"w-full px-5 py-4 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"})]}),m.jsxs("div",{children:[m.jsxs("label",{htmlFor:"estimatedTime",className:"text-sm font-bold text-theme mb-3 flex items-center gap-2",children:[m.jsx("span",{className:"text-xl",children:""})," Estimated Time"]}),m.jsx("input",{id:"estimatedTime",type:"text",value:s.estimatedTime,onChange:g=>l("estimatedTime",g.target.value),placeholder:"e.g., 30 minutes",className:"w-full px-5 py-4 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"})]})]}),m.jsxs("div",{className:"rounded-2xl bg-[var(--surface)]/50",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsxs("div",{className:"text-sm font-bold text-theme flex items-center gap-2",children:[m.jsx("span",{className:"text-xl",children:""})," Requirements"]}),m.jsx("button",{type:"button",onClick:()=>d("requirements"),className:"px-4 py-2 text-sm text-white bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-lg hover:shadow-lg transition-all duration-300 cursor-pointer font-semibold",children:"+ Add"})]}),s.requirements.map((g,b)=>m.jsx("div",{className:"mb-4",children:m.jsxs("div",{className:"flex gap-3 items-start",children:[m.jsx("div",{className:"flex-1",children:m.jsx(ym,{id:`requirement-${g.id}`,label:`Requirement ${b+1}`,value:g.value,onChange:v=>u("requirements",g.id,v),placeholder:"Enter a requirement (supports rich text formatting)"})}),s.requirements.length>1&&m.jsx("button",{type:"button",onClick:()=>h("requirements",g.id),className:"px-4 py-3 text-red-500 hover:bg-red-500/10 rounded-xl transition-colors cursor-pointer font-bold text-lg mt-8",children:""})]})},g.id))]}),m.jsxs("div",{className:"rounded-2xl bg-[var(--surface)]/50",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsxs("div",{className:"text-sm font-bold text-theme flex items-center gap-2",children:[m.jsx("span",{className:"text-xl",children:""})," Constraints"]}),m.jsx("button",{type:"button",onClick:()=>d("constraints"),className:"px-4 py-2 text-sm text-white bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-lg hover:shadow-lg transition-all duration-300 cursor-pointer font-semibold",children:"+ Add"})]}),s.constraints.map(g=>m.jsxs("div",{className:"flex gap-3 mb-3",children:[m.jsx("input",{type:"text",value:g.value,onChange:b=>u("constraints",g.id,b.target.value),placeholder:"Enter a constraint",className:"flex-1 px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300"}),s.constraints.length>1&&m.jsx("button",{type:"button",onClick:()=>h("constraints",g.id),className:"px-4 py-3 text-red-500 hover:bg-red-500/10 rounded-xl transition-colors cursor-pointer font-bold text-lg",children:""})]},g.id))]}),m.jsxs("div",{className:"rounded-2xl bg-[var(--surface)]/50",children:[m.jsxs("div",{className:"flex items-center justify-between mb-4",children:[m.jsxs("div",{className:"text-sm font-bold text-theme flex items-center gap-2",children:[m.jsx("span",{className:"text-xl",children:""})," Hints (Optional)"]}),m.jsx("button",{type:"button",onClick:()=>d("hints"),className:"px-4 py-2 text-sm text-white bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-lg hover:shadow-lg transition-all duration-300 cursor-pointer font-semibold",children:"+ Add"})]}),s.hints.map(g=>m.jsxs("div",{className:"flex gap-3 mb-3",children:[m.jsx("input",{type:"text",value:g.value,onChange:b=>u("hints",g.id,b.target.value),placeholder:"Enter a helpful hint",className:"flex-1 px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300"}),s.hints.length>1&&m.jsx("button",{type:"button",onClick:()=>h("hints",g.id),className:"px-4 py-3 text-red-500 hover:bg-red-500/10 rounded-xl transition-colors cursor-pointer font-bold text-lg",children:""})]},g.id))]}),m.jsxs("div",{className:"rounded-2xl bg-[var(--surface)]/50",children:[m.jsx("div",{className:"flex items-center justify-between mb-4",children:m.jsxs("div",{className:"text-sm font-bold text-theme flex items-center gap-2",children:[m.jsx("span",{className:"text-xl",children:""})," Tags"]})}),s.tags.some(g=>g.value.trim())&&m.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:s.tags.filter(g=>g.value.trim()).map(g=>m.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] text-white rounded-full text-sm font-semibold shadow-md hover:shadow-lg transition-all duration-300 group",children:[m.jsx("span",{children:g.value}),m.jsx("button",{type:"button",onClick:()=>h("tags",g.id),className:"hover:bg-white/20 rounded-full p-1 transition-colors","aria-label":"Remove tag",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:m.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]},g.id))}),m.jsxs("div",{className:"flex gap-3",children:[m.jsx("input",{type:"text",value:s.tags.at(-1)?.value||"",onChange:g=>u("tags",s.tags.at(-1)?.id||"",g.target.value),onKeyDown:g=>{g.key==="Enter"&&g.currentTarget.value.trim()&&(g.preventDefault(),d("tags"))},placeholder:"Type a tag and press Enter (e.g., caching, scalability)",className:"flex-1 px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"}),m.jsx("button",{type:"button",onClick:()=>{s.tags.at(-1)?.value.trim()&&d("tags")},className:"px-6 py-3 text-white bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-xl hover:shadow-lg transition-all duration-300 cursor-pointer font-semibold",children:"Add"})]})]}),m.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-8 border-t-2 border-[var(--theme)]/10",children:[m.jsx("button",{type:"button",onClick:p,disabled:!s.title||!s.description||t,className:"flex-1 px-8 py-4 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] text-white font-bold rounded-xl hover:shadow-2xl disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 cursor-pointer flex items-center justify-center gap-3 text-lg hover:scale-105",children:t?m.jsxs(m.Fragment,{children:[m.jsx("span",{className:"inline-block w-5 h-5 border-3 border-white border-t-transparent rounded-full animate-spin"})," ","Creating..."]}):m.jsx(m.Fragment,{children:" Create & Start Designing"})}),m.jsx("button",{type:"button",onClick:()=>e("/"),disabled:t,className:"px-8 py-4 elevated-card-bg border-2 border-[var(--theme)]/10 text-theme font-bold rounded-xl hover:border-[var(--brand)]/30 transition-all duration-300 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed hover:scale-105",children:"Cancel"})]})]})})]})})]})]})},ine=()=>{Xa();const e=Xd(),[t,n]=M.useState([]),[r,i]=M.useState(!1),[s,o]=M.useState(""),[l,u]=M.useState("updated"),[d,h]=M.useState("all"),[p,g]=M.useState(!1),[b,v]=M.useState(!1),[S,w]=M.useState(!1),[k,T]=M.useState(null),{user:E,isAuthenticated:N,login:A,signup:_,googleLogin:j,logout:R}=Lm();M.useEffect(()=>{N||e("/")},[N,e]),M.useEffect(()=>{(async()=>{if(!N){n([]);return}i(!0);try{const q=await tn.getUserDiagrams();n(q)}catch(q){console.error("Failed to load diagrams:",q)}finally{i(!1)}})()},[N]);const I=O=>{e(`/playground/free?diagramId=${O}`)},B=async(O,q)=>{q.stopPropagation(),O.isOwner&&(T(O),w(!0))},U=async()=>{if(k)try{await tn.deleteDiagram(k.id),n(O=>O.filter(q=>q.id!==k.id)),w(!1),T(null)}catch(O){console.error("Failed to delete diagram:",O),alert("Failed to delete diagram. Please try again.")}},V=()=>{w(!1),T(null)},F=t.filter(O=>{if(d==="owned"&&!O.isOwner||d==="shared"&&O.isOwner)return!1;const q=s.toLowerCase();return O.title.toLowerCase().includes(q)||O.description?.toLowerCase().includes(q)||O.owner.name.toLowerCase().includes(q)||O.owner.email.toLowerCase().includes(q)||!1}).sort((O,q)=>{switch(l){case"title":return O.title.localeCompare(q.title);case"created":return new Date(q.createdAt).getTime()-new Date(O.createdAt).getTime();case"updated":default:return new Date(q.updatedAt).getTime()-new Date(O.updatedAt).getTime()}}),L=t.filter(O=>O.isOwner).length,H=t.filter(O=>!O.isOwner).length;return m.jsxs(m.Fragment,{children:[m.jsx(Qd,{title:"My Designs | Diagrammatic",description:"View and manage your saved system design projects and diagrams shared with you",url:"https://satya00089.github.io/diagrammatic/#/diagrams"}),m.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[var(--surface)] via-[var(--bg)] to-[var(--surface)] text-theme relative grid-pattern-overlay",children:[m.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] transition-all duration-300",children:m.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:m.jsxs("div",{className:"flex items-center justify-between h-16",children:[m.jsxs("button",{type:"button",onClick:()=>e("/"),className:"flex items-center space-x-3 group cursor-pointer",children:[m.jsx("img",{src:"/logo.png",alt:"Logo",className:"h-10 transition-transform group-hover:scale-110 duration-300"}),m.jsx("span",{className:"text-xl font-bold text-white",children:"Diagrammatic"})]}),m.jsxs("div",{className:"flex items-center gap-4",children:[N&&m.jsx("button",{type:"button",onClick:()=>e("/problems"),className:"hidden md:block px-4 py-2 text-sm font-medium text-white hover:text-white/80 transition-colors cursor-pointer",children:"Problems"}),m.jsx("div",{className:"hidden md:block text-sm text-white/90",children:r?"Loading...":`${L} owned  ${H} shared`}),m.jsx("button",{type:"button",onClick:()=>e("/playground/free"),className:"px-4 py-2 bg-white/20 text-white text-sm font-semibold rounded-lg hover:bg-white/30 transition-all cursor-pointer",children:"New Design"}),m.jsx(Zd,{}),m.jsx("div",{className:"relative",children:N?m.jsxs(m.Fragment,{children:[m.jsxs("button",{type:"button",onClick:()=>g(!p),className:"flex items-center gap-2 px-3 py-2 rounded-md text-white hover:bg-white/10 transition-colors cursor-pointer",children:[E?.picture?m.jsx("img",{src:E.picture,alt:E.name||"User",className:"w-8 h-8 rounded-full object-cover border-2 border-white/30"}):m.jsx("div",{className:"h-8 w-8 rounded-full bg-white/20 flex items-center justify-center text-sm font-medium",children:E?.name?.[0]?.toUpperCase()||"U"}),m.jsx("span",{className:"hidden sm:inline text-sm",children:E?.name||E?.email}),m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),p&&m.jsx("div",{className:"absolute right-0 mt-2 w-56 rounded-md shadow-lg bg-[var(--elevated)] backdrop-blur-sm ring-1 ring-black/5 border border-[var(--border)]",children:m.jsxs("div",{className:"py-1",children:[m.jsxs("div",{className:"px-4 py-3 border-b border-[var(--border)]",children:[m.jsx("p",{className:"text-sm font-medium text-theme",children:E?.name}),m.jsx("p",{className:"text-sm text-muted truncate",children:E?.email})]}),m.jsx("button",{type:"button",onClick:()=>{g(!1),R()},className:"w-full text-left px-4 py-2 text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors cursor-pointer",children:"Sign Out"})]})})]}):m.jsx("button",{type:"button",onClick:()=>v(!0),className:"px-4 py-2 bg-white/20 text-white text-sm font-medium rounded-md hover:bg-white/30 transition-all cursor-pointer",children:"Sign In"})})]})]})})}),m.jsx("div",{className:"pt-16 relative z-10",children:m.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[m.jsxs("div",{className:"text-center mb-12",children:[m.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"My Designs"}),m.jsx("p",{className:"text-muted text-lg max-w-2xl mx-auto",children:"View and manage your saved projects and diagrams shared with you"})]}),!r&&m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"flex gap-2 mb-6 justify-center",children:[m.jsxs("button",{type:"button",onClick:()=>h("all"),className:`px-6 py-2.5 rounded-xl font-semibold transition-all duration-300 ${d==="all"?"bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white shadow-lg":"bg-[var(--surface)] text-muted hover:bg-[var(--theme)]/5 border border-[var(--theme)]/10"}`,children:["All Designs (",t.length,")"]}),m.jsxs("button",{type:"button",onClick:()=>h("owned"),className:`px-6 py-2.5 rounded-xl font-semibold transition-all duration-300 ${d==="owned"?"bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white shadow-lg":"bg-[var(--surface)] text-muted hover:bg-[var(--theme)]/5 border border-[var(--theme)]/10"}`,children:["My Designs (",L,")"]}),m.jsxs("button",{type:"button",onClick:()=>h("shared"),className:`px-6 py-2.5 rounded-xl font-semibold transition-all duration-300 ${d==="shared"?"bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white shadow-lg":"bg-[var(--surface)] text-muted hover:bg-[var(--theme)]/5 border border-[var(--theme)]/10"}`,children:["Shared with Me (",H,")"]})]}),m.jsx("div",{className:"elevated-card-bg backdrop-blur-md rounded-2xl shadow-lg p-6 mb-8",children:m.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"search-input",className:"block text-sm font-semibold text-theme mb-2",children:" Search"}),m.jsx("input",{id:"search-input",type:"text",placeholder:"Search designs...",value:s,onChange:O=>o(O.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"sort-select",className:"block text-sm font-semibold text-theme mb-2",children:" Sort By"}),m.jsxs("select",{id:"sort-select",value:l,onChange:O=>u(O.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme appearance-none cursor-pointer transition-all duration-300 hover:border-[var(--brand)]/30",children:[m.jsx("option",{value:"updated",children:"Last Updated"}),m.jsx("option",{value:"created",children:"Date Created"}),m.jsx("option",{value:"title",children:"Title (A-Z)"})]})]})]})}),r&&m.jsxs("div",{className:"text-center py-20",children:[m.jsx("div",{className:"inline-block w-16 h-16 border-4 border-[var(--brand)] border-t-transparent rounded-full animate-spin mb-4"}),m.jsx("div",{className:"text-theme text-xl mb-2",children:"Loading designs..."}),m.jsx("div",{className:"text-muted text-sm",children:"Please wait while we fetch your designs"})]}),!r&&F.length===0&&m.jsxs("div",{className:"text-center py-20",children:[m.jsx("div",{className:"text-7xl mb-6",children:s?"":d==="shared"?"":""}),m.jsx("div",{className:"text-theme text-2xl font-bold mb-2",children:s?"No designs found":d==="shared"?"No shared designs yet":d==="owned"?"No designs created yet":"No designs yet"}),m.jsx("div",{className:"text-muted text-lg mb-6",children:s?"Try adjusting your search terms":d==="shared"?"Diagrams shared with you will appear here":"Start creating your first system design project"}),!s&&d!=="shared"&&m.jsx("button",{type:"button",onClick:()=>e("/playground/free"),className:"px-6 py-3 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white font-semibold rounded-xl hover:shadow-lg hover:scale-105 transition-all duration-300 cursor-pointer",children:"Create Your First Design "})]}),!r&&F.length>0&&m.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 pb-12",children:F.map((O,q)=>m.jsxs("div",{className:`group elevated-card-bg backdrop-blur-md rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-500 hover:-translate-y-2 overflow-hidden ${q===0?"delay-0":q===1?"delay-100":q===2?"delay-200":""}`,children:[m.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] rounded-2xl opacity-0 group-hover:opacity-20 blur-xl transition-opacity duration-500"}),m.jsxs("div",{className:"relative p-6",children:[O.isOwner&&m.jsx("button",{type:"button",onClick:K=>B(O,K),className:"absolute top-4 right-4 opacity-0 group-hover:opacity-100 transition-opacity p-2 hover:bg-red-500/10 rounded-lg z-10",title:"Delete diagram",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})}),m.jsxs("div",{className:"cursor-pointer",onClick:()=>I(O.id),children:[m.jsxs("div",{className:"flex items-start justify-between mb-4",children:[m.jsxs("div",{className:"flex-1 pr-8",children:[m.jsx("div",{className:"flex items-start gap-2 mb-2",children:m.jsx("h3",{className:"text-lg font-bold text-theme group-hover:text-[var(--brand)] transition-colors duration-300 line-clamp-2 flex-1",children:O.title})}),!O.isOwner&&m.jsxs("div",{className:"mb-2 flex items-center gap-2 flex-wrap",children:[m.jsxs("div",{className:"group/owner relative overflow-hidden rounded-lg bg-gradient-to-r from-purple-50 to-blue-50 dark:from-purple-900/20 dark:to-blue-900/20 px-2.5 py-1.5 border border-purple-200/60 dark:border-purple-700/40 hover:border-purple-300 dark:hover:border-purple-600 transition-all duration-300 inline-flex items-center gap-2",children:[m.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-purple-400/0 via-blue-400/10 to-purple-400/0 opacity-0 group-hover/owner:opacity-100 transition-opacity duration-500"}),m.jsxs("div",{className:"relative flex items-center gap-1.5",children:[m.jsxs("div",{className:"relative flex-shrink-0",children:[O.owner.pictureUrl?m.jsx("img",{src:O.owner.pictureUrl,alt:O.owner.name,className:"w-5 h-5 rounded-full object-cover ring-1 ring-purple-300 dark:ring-purple-600"}):m.jsx("div",{className:"w-5 h-5 rounded-full bg-gradient-to-br from-purple-500 to-blue-600 flex items-center justify-center text-[9px] text-white font-bold",children:O.owner.name[0]?.toUpperCase()}),m.jsx("div",{className:"absolute -bottom-0.5 -right-0.5 w-2 h-2 bg-green-500 rounded-full border border-white dark:border-gray-900"})]}),m.jsxs("div",{className:"flex items-center gap-1",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-2.5 w-2.5 text-purple-600 dark:text-purple-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:3,children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.368 2.684 3 3 0 00-5.368-2.684z"})}),m.jsx("span",{className:"text-xs font-bold text-purple-800 dark:text-purple-300",children:O.owner.name})]})]})]}),m.jsxs("div",{className:`inline-flex items-center gap-1.5 px-2.5 py-1.5 rounded-lg font-bold text-xs shadow-sm transition-all duration-300 ${O.permission==="edit"?"bg-gradient-to-r from-emerald-500 to-green-600 text-white hover:shadow-md hover:shadow-emerald-500/30":"bg-gradient-to-r from-slate-400 to-gray-500 text-white hover:shadow-md hover:shadow-slate-400/30"}`,children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-3.5 w-3.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2.5,children:O.permission==="edit"?m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"}):m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})}),m.jsx("span",{children:O.permission==="edit"?"Can Edit":"View Only"})]})]}),O.description&&m.jsx("p",{className:"text-muted text-sm line-clamp-2 leading-relaxed",children:O.description})]}),m.jsx("div",{className:"text-3xl",children:""})]}),m.jsxs("div",{className:"flex items-center justify-between text-sm text-muted mb-4 pb-4 border-b border-[var(--theme)]/10",children:[m.jsxs("span",{className:"flex items-center gap-1",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21a4 4 0 01-4-4V5a2 2 0 012-2h4a2 2 0 012 2v12a4 4 0 01-4 4zm0 0h12a2 2 0 002-2v-4a2 2 0 00-2-2h-2.343M11 7.343l1.657-1.657a2 2 0 012.828 0l2.829 2.829a2 2 0 010 2.828l-8.486 8.485M7 17h.01"})}),O.nodes.length," node",O.nodes.length===1?"":"s"]}),m.jsxs("span",{className:"flex items-center gap-1",children:[m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.828 10.172a4 4 0 00-5.656 0l-4 4a4 4 0 105.656 5.656l1.102-1.101m-.758-4.899a4 4 0 005.656 0l4-4a4 4 0 00-5.656-5.656l-1.1 1.1"})}),O.edges.length," connection",O.edges.length===1?"":"s"]})]}),m.jsxs("div",{className:"flex items-center justify-between text-xs text-muted mb-6",children:[m.jsxs("span",{children:["Updated"," ",new Date(O.updatedAt).toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})]}),m.jsxs("span",{children:["Created"," ",new Date(O.createdAt).toLocaleDateString("en-US",{month:"short",day:"numeric"})]})]}),m.jsx("button",{type:"button",onClick:K=>{K.stopPropagation(),I(O.id)},className:"w-full px-6 py-3 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white font-semibold rounded-xl hover:shadow-lg hover:scale-105 transition-all duration-300 cursor-pointer group-hover:shadow-xl",children:"Open Design "})]})]})]},O.id))})]})]})})]}),b&&m.jsx(qm,{isOpen:b,onClose:()=>v(!1),onLogin:async(O,q)=>{await A({email:O,password:q})},onSignup:async(O,q,K)=>{await _({email:O,password:q,name:K})},onGoogleLogin:async O=>{await j(O)}}),S&&k&&m.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-[var(--surface)] rounded-2xl shadow-2xl p-6 max-w-md w-full mx-4 border border-[var(--theme)]/10",children:[m.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[m.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 dark:bg-red-900/20 flex items-center justify-center",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-bold text-[var(--theme)]",children:"Delete Design?"}),m.jsx("p",{className:"text-sm text-muted",children:"This action cannot be undone"})]})]}),m.jsxs("p",{className:"text-muted mb-6",children:["Are you sure you want to delete ",m.jsxs("strong",{children:['"',k.title,'"']}),"? This will permanently remove the design and all its data."]}),m.jsxs("div",{className:"flex space-x-3",children:[m.jsx("button",{type:"button",onClick:V,className:"flex-1 px-4 py-2 bg-[var(--theme)]/5 hover:bg-[var(--theme)]/10 text-[var(--theme)] font-medium rounded-lg transition-colors cursor-pointer",children:"Cancel"}),m.jsx("button",{type:"button",onClick:U,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-bold rounded-lg transition-colors cursor-pointer",children:"Delete Design"})]})]})})]})};function sne(e){return at({attr:{version:"1",viewBox:"0 0 48 48",enableBackground:"new 0 0 48 48"},child:[{tag:"polygon",attr:{fill:"#CFD8DC",points:"35,36 39,36 39,22 26,22 26,13 22,13 22,22 9,22 9,36 13,36 13,26 22,26 22,36 26,36 26,26 35,26"},child:[]},{tag:"rect",attr:{x:"17",y:"6",fill:"#3F51B5",width:"14",height:"10"},child:[]},{tag:"rect",attr:{x:"32",y:"32",fill:"#00BCD4",width:"10",height:"10"},child:[]},{tag:"rect",attr:{x:"6",y:"32",fill:"#00BCD4",width:"10",height:"10"},child:[]},{tag:"rect",attr:{x:"19",y:"32",fill:"#00BCD4",width:"10",height:"10"},child:[]}]})(e)}const Uz=({id:e,checked:t,onChange:n,label:r,disabled:i=!1,className:s=""})=>m.jsxs("label",{htmlFor:e,className:`inline-flex items-center gap-2 text-sm cursor-pointer select-none ${i?"opacity-60 cursor-not-allowed":""} ${s}`,children:[m.jsxs("span",{className:"relative inline-flex items-center justify-center",children:[m.jsx("input",{id:e,type:"checkbox",checked:t,disabled:i,onChange:o=>n(o.target.checked),className:"peer w-4 h-4 cursor-pointer appearance-none rounded border border-theme bg-[var(--surface)] focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:ring-offset-1 transition-colors disabled:cursor-not-allowed"}),m.jsx(uc,{children:t&&m.jsx(ft.span,{initial:{scale:0,opacity:0,rotate:-45},animate:{scale:1,opacity:1,rotate:0},exit:{scale:.4,opacity:0,rotate:45},transition:{type:"spring",stiffness:400,damping:30},className:"pointer-events-none absolute w-3 h-3 flex items-center justify-center text-[10px] font-semibold text-white bg-[var(--brand)] rounded-sm shadow-sm",children:""},"check")})]}),r&&m.jsx("span",{className:"text-sm text-theme",children:r})]}),$z=({id:e,label:t,value:n,onChange:r,min:i,max:s,step:o,disabled:l,className:u="",containerClassName:d})=>{const{focused:h,onFocus:p,onBlur:g}=ig();return m.jsx(rg,{id:e,label:t,focused:h,containerClassName:d,children:m.jsx(ft.input,{id:e,type:"number",value:n??"",onChange:b=>r(Number(b.target.value)),onFocus:p,onBlur:g,disabled:l,min:i,max:s,step:o,className:`w-full border p-1 px-2 rounded bg-[var(--surface)] text-theme outline-none ${l?"opacity-60 cursor-not-allowed":""} ${u}`,animate:{boxShadow:h?"0 0 0 2px var(--brand)":"0 0 0 1px var(--border)"},transition:{type:"spring",stiffness:300,damping:30}})})},hp=({id:e,label:t,value:n,onChange:r,placeholder:i,disabled:s,className:o="",containerClassName:l})=>{const{focused:u,onFocus:d,onBlur:h}=ig();return m.jsx(rg,{id:e,label:t,focused:u,containerClassName:l,children:m.jsx(ft.input,{id:e,type:"text",value:n,placeholder:i,onChange:p=>r(p.target.value),onFocus:d,onBlur:h,disabled:s,className:`w-full border p-1 px-2 rounded bg-[var(--surface)] text-theme outline-none ${s?"opacity-60 cursor-not-allowed":""} ${o}`,animate:{boxShadow:u?"0 0 0 2px var(--brand)":"0 0 0 1px var(--border)"},transition:{type:"spring",stiffness:300,damping:30}})})},Gz=({id:e,label:t,value:n,onChange:r,options:i,disabled:s,className:o="",containerClassName:l})=>{const{focused:u,onFocus:d,onBlur:h}=ig(),p=`${e}-label`;return m.jsxs(rg,{id:e,label:t,focused:u,containerClassName:l,children:[!t&&m.jsx("label",{id:p,htmlFor:e,className:"sr-only",children:e}),m.jsx(ft.div,{initial:{opacity:0,y:-4,scale:.98},animate:{opacity:1,y:0,scale:1},transition:{type:"spring",stiffness:260,damping:24},className:"w-full",children:m.jsx("select",{id:e,value:n??"",onChange:g=>r(g.target.value),onFocus:d,onBlur:h,disabled:s,"aria-labelledby":t?p:void 0,"aria-label":t||e,title:t||e,className:`w-full border p-1 px-2 rounded bg-[var(--surface)] text-theme outline-none ${s?"opacity-60 cursor-not-allowed":""} ${o}`,children:i.map(g=>m.jsx("option",{value:g,children:g},g))})})]})};function one(e,t=50){const[n,r]=M.useState({past:[],present:e,future:[]}),i=M.useRef(!1),s=M.useCallback(d=>{r(h=>{const p=typeof d=="function"?d(h.present):d;if(i.current)return i.current=!1,{...h,present:p};if(JSON.stringify(p)===JSON.stringify(h.present))return h;const g=[...h.past,h.present];return g.length>t&&g.shift(),{past:g,present:p,future:[]}})},[t]),o=M.useCallback(()=>{r(d=>{if(d.past.length===0)return d;const h=d.past[d.past.length-1],p=d.past.slice(0,-1);return i.current=!0,{past:p,present:h,future:[d.present,...d.future]}})},[]),l=M.useCallback(()=>{r(d=>{if(d.future.length===0)return d;const h=d.future[0],p=d.future.slice(1);return i.current=!0,{past:[...d.past,d.present],present:h,future:p}})},[]),u=M.useCallback(()=>{r({past:[],present:n.present,future:[]})},[n.present]);return{state:n.present,setState:s,undo:o,redo:l,canUndo:n.past.length>0,canRedo:n.future.length>0,clearHistory:u}}function Sn(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=Sn(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var ane={value:()=>{}};function sg(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new pp(n)}function pp(e){this._=e}function lne(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}pp.prototype=sg.prototype={constructor:pp,on:function(e,t){var n=this._,r=lne(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=cne(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=CR(n[i],e.name,t);else if(t==null)for(i in n)n[i]=CR(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new pp(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function cne(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function CR(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=ane,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var wk="http://www.w3.org/1999/xhtml";const kR={svg:"http://www.w3.org/2000/svg",xhtml:wk,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function og(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),kR.hasOwnProperty(t)?{space:kR[t],local:e}:e}function une(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===wk&&t.documentElement.namespaceURI===wk?t.createElement(e):t.createElementNS(n,e)}}function dne(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Wz(e){var t=og(e);return(t.local?dne:une)(t)}function fne(){}function c2(e){return e==null?fne:function(){return this.querySelector(e)}}function hne(e){typeof e!="function"&&(e=c2(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,l=r[i]=new Array(o),u,d,h=0;h<o;++h)(u=s[h])&&(d=e.call(u,u.__data__,h,s))&&("__data__"in u&&(d.__data__=u.__data__),l[h]=d);return new Kr(r,this._parents)}function pne(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function mne(){return[]}function Kz(e){return e==null?mne:function(){return this.querySelectorAll(e)}}function gne(e){return function(){return pne(e.apply(this,arguments))}}function yne(e){typeof e=="function"?e=gne(e):e=Kz(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],l=o.length,u,d=0;d<l;++d)(u=o[d])&&(r.push(e.call(u,u.__data__,d,o)),i.push(u));return new Kr(r,i)}function Yz(e){return function(){return this.matches(e)}}function Xz(e){return function(t){return t.matches(e)}}var bne=Array.prototype.find;function xne(e){return function(){return bne.call(this.children,e)}}function vne(){return this.firstElementChild}function wne(e){return this.select(e==null?vne:xne(typeof e=="function"?e:Xz(e)))}var Sne=Array.prototype.filter;function Cne(){return Array.from(this.children)}function kne(e){return function(){return Sne.call(this.children,e)}}function Ene(e){return this.selectAll(e==null?Cne:kne(typeof e=="function"?e:Xz(e)))}function Nne(e){typeof e!="function"&&(e=Yz(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,l=r[i]=[],u,d=0;d<o;++d)(u=s[d])&&e.call(u,u.__data__,d,s)&&l.push(u);return new Kr(r,this._parents)}function Zz(e){return new Array(e.length)}function Tne(){return new Kr(this._enter||this._groups.map(Zz),this._parents)}function bm(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}bm.prototype={constructor:bm,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function Ane(e){return function(){return e}}function Mne(e,t,n,r,i,s){for(var o=0,l,u=t.length,d=s.length;o<d;++o)(l=t[o])?(l.__data__=s[o],r[o]=l):n[o]=new bm(e,s[o]);for(;o<u;++o)(l=t[o])&&(i[o]=l)}function _ne(e,t,n,r,i,s,o){var l,u,d=new Map,h=t.length,p=s.length,g=new Array(h),b;for(l=0;l<h;++l)(u=t[l])&&(g[l]=b=o.call(u,u.__data__,l,t)+"",d.has(b)?i[l]=u:d.set(b,u));for(l=0;l<p;++l)b=o.call(e,s[l],l,s)+"",(u=d.get(b))?(r[l]=u,u.__data__=s[l],d.delete(b)):n[l]=new bm(e,s[l]);for(l=0;l<h;++l)(u=t[l])&&d.get(g[l])===u&&(i[l]=u)}function Dne(e){return e.__data__}function Rne(e,t){if(!arguments.length)return Array.from(this,Dne);var n=t?_ne:Mne,r=this._parents,i=this._groups;typeof e!="function"&&(e=Ane(e));for(var s=i.length,o=new Array(s),l=new Array(s),u=new Array(s),d=0;d<s;++d){var h=r[d],p=i[d],g=p.length,b=jne(e.call(h,h&&h.__data__,d,r)),v=b.length,S=l[d]=new Array(v),w=o[d]=new Array(v),k=u[d]=new Array(g);n(h,p,S,w,k,b,t);for(var T=0,E=0,N,A;T<v;++T)if(N=S[T]){for(T>=E&&(E=T+1);!(A=w[E])&&++E<v;);N._next=A||null}}return o=new Kr(o,r),o._enter=l,o._exit=u,o}function jne(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function One(){return new Kr(this._exit||this._groups.map(Zz),this._parents)}function Lne(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function Pne(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),l=new Array(i),u=0;u<o;++u)for(var d=n[u],h=r[u],p=d.length,g=l[u]=new Array(p),b,v=0;v<p;++v)(b=d[v]||h[v])&&(g[v]=b);for(;u<i;++u)l[u]=n[u];return new Kr(l,this._parents)}function Ine(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function Bne(e){e||(e=zne);function t(p,g){return p&&g?e(p.__data__,g.__data__):!p-!g}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],l=o.length,u=i[s]=new Array(l),d,h=0;h<l;++h)(d=o[h])&&(u[h]=d);u.sort(t)}return new Kr(i,this._parents).order()}function zne(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Vne(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function qne(){return Array.from(this)}function Hne(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function Fne(){let e=0;for(const t of this)++e;return e}function Une(){return!this.node()}function $ne(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,l;s<o;++s)(l=i[s])&&e.call(l,l.__data__,s,i);return this}function Gne(e){return function(){this.removeAttribute(e)}}function Wne(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Kne(e,t){return function(){this.setAttribute(e,t)}}function Yne(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Xne(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Zne(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function Qne(e,t){var n=og(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Wne:Gne:typeof t=="function"?n.local?Zne:Xne:n.local?Yne:Kne)(n,t))}function Qz(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Jne(e){return function(){this.style.removeProperty(e)}}function ere(e,t,n){return function(){this.style.setProperty(e,t,n)}}function tre(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function nre(e,t,n){return arguments.length>1?this.each((t==null?Jne:typeof t=="function"?tre:ere)(e,t,n??"")):vc(this.node(),e)}function vc(e,t){return e.style.getPropertyValue(t)||Qz(e).getComputedStyle(e,null).getPropertyValue(t)}function rre(e){return function(){delete this[e]}}function ire(e,t){return function(){this[e]=t}}function sre(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function ore(e,t){return arguments.length>1?this.each((t==null?rre:typeof t=="function"?sre:ire)(e,t)):this.node()[e]}function Jz(e){return e.trim().split(/^|\s+/)}function u2(e){return e.classList||new e8(e)}function e8(e){this._node=e,this._names=Jz(e.getAttribute("class")||"")}e8.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function t8(e,t){for(var n=u2(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function n8(e,t){for(var n=u2(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function are(e){return function(){t8(this,e)}}function lre(e){return function(){n8(this,e)}}function cre(e,t){return function(){(t.apply(this,arguments)?t8:n8)(this,e)}}function ure(e,t){var n=Jz(e+"");if(arguments.length<2){for(var r=u2(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?cre:t?are:lre)(n,t))}function dre(){this.textContent=""}function fre(e){return function(){this.textContent=e}}function hre(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function pre(e){return arguments.length?this.each(e==null?dre:(typeof e=="function"?hre:fre)(e)):this.node().textContent}function mre(){this.innerHTML=""}function gre(e){return function(){this.innerHTML=e}}function yre(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function bre(e){return arguments.length?this.each(e==null?mre:(typeof e=="function"?yre:gre)(e)):this.node().innerHTML}function xre(){this.nextSibling&&this.parentNode.appendChild(this)}function vre(){return this.each(xre)}function wre(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function Sre(){return this.each(wre)}function Cre(e){var t=typeof e=="function"?e:Wz(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function kre(){return null}function Ere(e,t){var n=typeof e=="function"?e:Wz(e),r=t==null?kre:typeof t=="function"?t:c2(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function Nre(){var e=this.parentNode;e&&e.removeChild(this)}function Tre(){return this.each(Nre)}function Are(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function Mre(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function _re(e){return this.select(e?Mre:Are)}function Dre(e){return arguments.length?this.property("__data__",e):this.node().__data__}function Rre(e){return function(t){e.call(this,t,this.__data__)}}function jre(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function Ore(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function Lre(e,t,n){return function(){var r=this.__on,i,s=Rre(t);if(r){for(var o=0,l=r.length;o<l;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function Pre(e,t,n){var r=jre(e+""),i,s=r.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var u=0,d=l.length,h;u<d;++u)for(i=0,h=l[u];i<s;++i)if((o=r[i]).type===h.type&&o.name===h.name)return h.value}return}for(l=t?Lre:Ore,i=0;i<s;++i)this.each(l(r[i],t,n));return this}function r8(e,t,n){var r=Qz(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function Ire(e,t){return function(){return r8(this,e,t)}}function Bre(e,t){return function(){return r8(this,e,t.apply(this,arguments))}}function zre(e,t){return this.each((typeof t=="function"?Bre:Ire)(e,t))}function*Vre(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var i8=[null];function Kr(e,t){this._groups=e,this._parents=t}function lf(){return new Kr([[document.documentElement]],i8)}function qre(){return this}Kr.prototype=lf.prototype={constructor:Kr,select:hne,selectAll:yne,selectChild:wne,selectChildren:Ene,filter:Nne,data:Rne,enter:Tne,exit:One,join:Lne,merge:Pne,selection:qre,order:Ine,sort:Bne,call:Vne,nodes:qne,node:Hne,size:Fne,empty:Une,each:$ne,attr:Qne,style:nre,property:ore,classed:ure,text:pre,html:bre,raise:vre,lower:Sre,append:Cre,insert:Ere,remove:Tre,clone:_re,datum:Dre,on:Pre,dispatch:zre,[Symbol.iterator]:Vre};function Gr(e){return typeof e=="string"?new Kr([[document.querySelector(e)]],[document.documentElement]):new Kr([[e]],i8)}function Hre(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Mi(e,t){if(e=Hre(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const Fre={passive:!1},Pd={capture:!0,passive:!1};function Ob(e){e.stopImmediatePropagation()}function ac(e){e.preventDefault(),e.stopImmediatePropagation()}function s8(e){var t=e.document.documentElement,n=Gr(e).on("dragstart.drag",ac,Pd);"onselectstart"in t?n.on("selectstart.drag",ac,Pd):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function o8(e,t){var n=e.document.documentElement,r=Gr(e).on("dragstart.drag",null);t&&(r.on("click.drag",ac,Pd),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Gh=e=>()=>e;function Sk(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:s,x:o,y:l,dx:u,dy:d,dispatch:h}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:u,enumerable:!0,configurable:!0},dy:{value:d,enumerable:!0,configurable:!0},_:{value:h}})}Sk.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Ure(e){return!e.ctrlKey&&!e.button}function $re(){return this.parentNode}function Gre(e,t){return t??{x:e.x,y:e.y}}function Wre(){return navigator.maxTouchPoints||"ontouchstart"in this}function a8(){var e=Ure,t=$re,n=Gre,r=Wre,i={},s=sg("start","drag","end"),o=0,l,u,d,h,p=0;function g(N){N.on("mousedown.drag",b).filter(r).on("touchstart.drag",w).on("touchmove.drag",k,Fre).on("touchend.drag touchcancel.drag",T).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function b(N,A){if(!(h||!e.call(this,N,A))){var _=E(this,t.call(this,N,A),N,A,"mouse");_&&(Gr(N.view).on("mousemove.drag",v,Pd).on("mouseup.drag",S,Pd),s8(N.view),Ob(N),d=!1,l=N.clientX,u=N.clientY,_("start",N))}}function v(N){if(ac(N),!d){var A=N.clientX-l,_=N.clientY-u;d=A*A+_*_>p}i.mouse("drag",N)}function S(N){Gr(N.view).on("mousemove.drag mouseup.drag",null),o8(N.view,d),ac(N),i.mouse("end",N)}function w(N,A){if(e.call(this,N,A)){var _=N.changedTouches,j=t.call(this,N,A),R=_.length,I,B;for(I=0;I<R;++I)(B=E(this,j,N,A,_[I].identifier,_[I]))&&(Ob(N),B("start",N,_[I]))}}function k(N){var A=N.changedTouches,_=A.length,j,R;for(j=0;j<_;++j)(R=i[A[j].identifier])&&(ac(N),R("drag",N,A[j]))}function T(N){var A=N.changedTouches,_=A.length,j,R;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),j=0;j<_;++j)(R=i[A[j].identifier])&&(Ob(N),R("end",N,A[j]))}function E(N,A,_,j,R,I){var B=s.copy(),U=Mi(I||_,A),V,F,L;if((L=n.call(N,new Sk("beforestart",{sourceEvent:_,target:g,identifier:R,active:o,x:U[0],y:U[1],dx:0,dy:0,dispatch:B}),j))!=null)return V=L.x-U[0]||0,F=L.y-U[1]||0,function H(O,q,K){var te=U,z;switch(O){case"start":i[R]=H,z=o++;break;case"end":delete i[R],--o;case"drag":U=Mi(K||q,A),z=o;break}B.call(O,N,new Sk(O,{sourceEvent:q,subject:L,target:g,identifier:R,active:z,x:U[0]+V,y:U[1]+F,dx:U[0]-te[0],dy:U[1]-te[1],dispatch:B}),j)}}return g.filter=function(N){return arguments.length?(e=typeof N=="function"?N:Gh(!!N),g):e},g.container=function(N){return arguments.length?(t=typeof N=="function"?N:Gh(N),g):t},g.subject=function(N){return arguments.length?(n=typeof N=="function"?N:Gh(N),g):n},g.touchable=function(N){return arguments.length?(r=typeof N=="function"?N:Gh(!!N),g):r},g.on=function(){var N=s.on.apply(s,arguments);return N===s?g:N},g.clickDistance=function(N){return arguments.length?(p=(N=+N)*N,g):Math.sqrt(p)},g}function d2(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function l8(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function cf(){}var Id=.7,xm=1/Id,lc="\\s*([+-]?\\d+)\\s*",Bd="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",rs="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",Kre=/^#([0-9a-f]{3,8})$/,Yre=new RegExp(`^rgb\\(${lc},${lc},${lc}\\)$`),Xre=new RegExp(`^rgb\\(${rs},${rs},${rs}\\)$`),Zre=new RegExp(`^rgba\\(${lc},${lc},${lc},${Bd}\\)$`),Qre=new RegExp(`^rgba\\(${rs},${rs},${rs},${Bd}\\)$`),Jre=new RegExp(`^hsl\\(${Bd},${rs},${rs}\\)$`),eie=new RegExp(`^hsla\\(${Bd},${rs},${rs},${Bd}\\)$`),ER={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};d2(cf,Ua,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:NR,formatHex:NR,formatHex8:tie,formatHsl:nie,formatRgb:TR,toString:TR});function NR(){return this.rgb().formatHex()}function tie(){return this.rgb().formatHex8()}function nie(){return c8(this).formatHsl()}function TR(){return this.rgb().formatRgb()}function Ua(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=Kre.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?AR(t):n===3?new kr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Wh(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Wh(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Yre.exec(e))?new kr(t[1],t[2],t[3],1):(t=Xre.exec(e))?new kr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=Zre.exec(e))?Wh(t[1],t[2],t[3],t[4]):(t=Qre.exec(e))?Wh(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Jre.exec(e))?DR(t[1],t[2]/100,t[3]/100,1):(t=eie.exec(e))?DR(t[1],t[2]/100,t[3]/100,t[4]):ER.hasOwnProperty(e)?AR(ER[e]):e==="transparent"?new kr(NaN,NaN,NaN,0):null}function AR(e){return new kr(e>>16&255,e>>8&255,e&255,1)}function Wh(e,t,n,r){return r<=0&&(e=t=n=NaN),new kr(e,t,n,r)}function rie(e){return e instanceof cf||(e=Ua(e)),e?(e=e.rgb(),new kr(e.r,e.g,e.b,e.opacity)):new kr}function Ck(e,t,n,r){return arguments.length===1?rie(e):new kr(e,t,n,r??1)}function kr(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}d2(kr,Ck,l8(cf,{brighter(e){return e=e==null?xm:Math.pow(xm,e),new kr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Id:Math.pow(Id,e),new kr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new kr(Ia(this.r),Ia(this.g),Ia(this.b),vm(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:MR,formatHex:MR,formatHex8:iie,formatRgb:_R,toString:_R}));function MR(){return`#${Aa(this.r)}${Aa(this.g)}${Aa(this.b)}`}function iie(){return`#${Aa(this.r)}${Aa(this.g)}${Aa(this.b)}${Aa((isNaN(this.opacity)?1:this.opacity)*255)}`}function _R(){const e=vm(this.opacity);return`${e===1?"rgb(":"rgba("}${Ia(this.r)}, ${Ia(this.g)}, ${Ia(this.b)}${e===1?")":`, ${e})`}`}function vm(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Ia(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Aa(e){return e=Ia(e),(e<16?"0":"")+e.toString(16)}function DR(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Di(e,t,n,r)}function c8(e){if(e instanceof Di)return new Di(e.h,e.s,e.l,e.opacity);if(e instanceof cf||(e=Ua(e)),!e)return new Di;if(e instanceof Di)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,l=s-i,u=(s+i)/2;return l?(t===s?o=(n-r)/l+(n<r)*6:n===s?o=(r-t)/l+2:o=(t-n)/l+4,l/=u<.5?s+i:2-s-i,o*=60):l=u>0&&u<1?0:o,new Di(o,l,u,e.opacity)}function sie(e,t,n,r){return arguments.length===1?c8(e):new Di(e,t,n,r??1)}function Di(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}d2(Di,sie,l8(cf,{brighter(e){return e=e==null?xm:Math.pow(xm,e),new Di(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Id:Math.pow(Id,e),new Di(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new kr(Lb(e>=240?e-240:e+120,i,r),Lb(e,i,r),Lb(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Di(RR(this.h),Kh(this.s),Kh(this.l),vm(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=vm(this.opacity);return`${e===1?"hsl(":"hsla("}${RR(this.h)}, ${Kh(this.s)*100}%, ${Kh(this.l)*100}%${e===1?")":`, ${e})`}`}}));function RR(e){return e=(e||0)%360,e<0?e+360:e}function Kh(e){return Math.max(0,Math.min(1,e||0))}function Lb(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const f2=e=>()=>e;function oie(e,t){return function(n){return e+n*t}}function aie(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function lie(e){return(e=+e)==1?u8:function(t,n){return n-t?aie(t,n,e):f2(isNaN(t)?n:t)}}function u8(e,t){var n=t-e;return n?oie(e,n):f2(isNaN(e)?t:e)}const wm=(function e(t){var n=lie(t);function r(i,s){var o=n((i=Ck(i)).r,(s=Ck(s)).r),l=n(i.g,s.g),u=n(i.b,s.b),d=u8(i.opacity,s.opacity);return function(h){return i.r=o(h),i.g=l(h),i.b=u(h),i.opacity=d(h),i+""}}return r.gamma=e,r})(1);function cie(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function uie(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function die(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=md(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(l){for(o=0;o<r;++o)s[o]=i[o](l);return s}}function fie(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Qi(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function hie(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=md(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var kk=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Pb=new RegExp(kk.source,"g");function pie(e){return function(){return e}}function mie(e){return function(t){return e(t)+""}}function d8(e,t){var n=kk.lastIndex=Pb.lastIndex=0,r,i,s,o=-1,l=[],u=[];for(e=e+"",t=t+"";(r=kk.exec(e))&&(i=Pb.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),l[o]?l[o]+=s:l[++o]=s),(r=r[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,u.push({i:o,x:Qi(r,i)})),n=Pb.lastIndex;return n<t.length&&(s=t.slice(n),l[o]?l[o]+=s:l[++o]=s),l.length<2?u[0]?mie(u[0].x):pie(t):(t=u.length,function(d){for(var h=0,p;h<t;++h)l[(p=u[h]).i]=p.x(d);return l.join("")})}function md(e,t){var n=typeof t,r;return t==null||n==="boolean"?f2(t):(n==="number"?Qi:n==="string"?(r=Ua(t))?(t=r,wm):d8:t instanceof Ua?wm:t instanceof Date?fie:uie(t)?cie:Array.isArray(t)?die:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?hie:Qi)(e,t)}var jR=180/Math.PI,Ek={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function f8(e,t,n,r,i,s){var o,l,u;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(u=e*n+t*r)&&(n-=e*u,r-=t*u),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,u/=l),e*r<t*n&&(e=-e,t=-t,u=-u,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*jR,skewX:Math.atan(u)*jR,scaleX:o,scaleY:l}}var Yh;function gie(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?Ek:f8(t.a,t.b,t.c,t.d,t.e,t.f)}function yie(e){return e==null||(Yh||(Yh=document.createElementNS("http://www.w3.org/2000/svg","g")),Yh.setAttribute("transform",e),!(e=Yh.transform.baseVal.consolidate()))?Ek:(e=e.matrix,f8(e.a,e.b,e.c,e.d,e.e,e.f))}function h8(e,t,n,r){function i(d){return d.length?d.pop()+" ":""}function s(d,h,p,g,b,v){if(d!==p||h!==g){var S=b.push("translate(",null,t,null,n);v.push({i:S-4,x:Qi(d,p)},{i:S-2,x:Qi(h,g)})}else(p||g)&&b.push("translate("+p+t+g+n)}function o(d,h,p,g){d!==h?(d-h>180?h+=360:h-d>180&&(d+=360),g.push({i:p.push(i(p)+"rotate(",null,r)-2,x:Qi(d,h)})):h&&p.push(i(p)+"rotate("+h+r)}function l(d,h,p,g){d!==h?g.push({i:p.push(i(p)+"skewX(",null,r)-2,x:Qi(d,h)}):h&&p.push(i(p)+"skewX("+h+r)}function u(d,h,p,g,b,v){if(d!==p||h!==g){var S=b.push(i(b)+"scale(",null,",",null,")");v.push({i:S-4,x:Qi(d,p)},{i:S-2,x:Qi(h,g)})}else(p!==1||g!==1)&&b.push(i(b)+"scale("+p+","+g+")")}return function(d,h){var p=[],g=[];return d=e(d),h=e(h),s(d.translateX,d.translateY,h.translateX,h.translateY,p,g),o(d.rotate,h.rotate,p,g),l(d.skewX,h.skewX,p,g),u(d.scaleX,d.scaleY,h.scaleX,h.scaleY,p,g),d=h=null,function(b){for(var v=-1,S=g.length,w;++v<S;)p[(w=g[v]).i]=w.x(b);return p.join("")}}}var bie=h8(gie,"px, ","px)","deg)"),xie=h8(yie,", ",")",")"),vie=1e-12;function OR(e){return((e=Math.exp(e))+1/e)/2}function wie(e){return((e=Math.exp(e))-1/e)/2}function Sie(e){return((e=Math.exp(2*e))-1)/(e+1)}const mp=(function e(t,n,r){function i(s,o){var l=s[0],u=s[1],d=s[2],h=o[0],p=o[1],g=o[2],b=h-l,v=p-u,S=b*b+v*v,w,k;if(S<vie)k=Math.log(g/d)/t,w=function(j){return[l+j*b,u+j*v,d*Math.exp(t*j*k)]};else{var T=Math.sqrt(S),E=(g*g-d*d+r*S)/(2*d*n*T),N=(g*g-d*d-r*S)/(2*g*n*T),A=Math.log(Math.sqrt(E*E+1)-E),_=Math.log(Math.sqrt(N*N+1)-N);k=(_-A)/t,w=function(j){var R=j*k,I=OR(A),B=d/(n*T)*(I*Sie(t*R+A)-wie(A));return[l+B*b,u+B*v,d*I/OR(t*R+A)]}}return w.duration=k*1e3*t/Math.SQRT2,w}return i.rho=function(s){var o=Math.max(.001,+s),l=o*o,u=l*l;return e(o,l,u)},i})(Math.SQRT2,2,4);var wc=0,Ku=0,Lu=0,p8=1e3,Sm,Yu,Cm=0,$a=0,ag=0,zd=typeof performance=="object"&&performance.now?performance:Date,m8=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function h2(){return $a||(m8(Cie),$a=zd.now()+ag)}function Cie(){$a=0}function km(){this._call=this._time=this._next=null}km.prototype=g8.prototype={constructor:km,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?h2():+n)+(t==null?0:+t),!this._next&&Yu!==this&&(Yu?Yu._next=this:Sm=this,Yu=this),this._call=e,this._time=n,Nk()},stop:function(){this._call&&(this._call=null,this._time=1/0,Nk())}};function g8(e,t,n){var r=new km;return r.restart(e,t,n),r}function kie(){h2(),++wc;for(var e=Sm,t;e;)(t=$a-e._time)>=0&&e._call.call(void 0,t),e=e._next;--wc}function LR(){$a=(Cm=zd.now())+ag,wc=Ku=0;try{kie()}finally{wc=0,Nie(),$a=0}}function Eie(){var e=zd.now(),t=e-Cm;t>p8&&(ag-=t,Cm=e)}function Nie(){for(var e,t=Sm,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:Sm=n);Yu=e,Nk(r)}function Nk(e){if(!wc){Ku&&(Ku=clearTimeout(Ku));var t=e-$a;t>24?(e<1/0&&(Ku=setTimeout(LR,e-zd.now()-ag)),Lu&&(Lu=clearInterval(Lu))):(Lu||(Cm=zd.now(),Lu=setInterval(Eie,p8)),wc=1,m8(LR))}}function PR(e,t,n){var r=new km;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var Tie=sg("start","end","cancel","interrupt"),Aie=[],y8=0,IR=1,Tk=2,gp=3,BR=4,Ak=5,yp=6;function lg(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;Mie(e,n,{name:t,index:r,group:i,on:Tie,tween:Aie,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:y8})}function p2(e,t){var n=Li(e,t);if(n.state>y8)throw new Error("too late; already scheduled");return n}function ls(e,t){var n=Li(e,t);if(n.state>gp)throw new Error("too late; already running");return n}function Li(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function Mie(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=g8(s,0,n.time);function s(d){n.state=IR,n.timer.restart(o,n.delay,n.time),n.delay<=d&&o(d-n.delay)}function o(d){var h,p,g,b;if(n.state!==IR)return u();for(h in r)if(b=r[h],b.name===n.name){if(b.state===gp)return PR(o);b.state===BR?(b.state=yp,b.timer.stop(),b.on.call("interrupt",e,e.__data__,b.index,b.group),delete r[h]):+h<t&&(b.state=yp,b.timer.stop(),b.on.call("cancel",e,e.__data__,b.index,b.group),delete r[h])}if(PR(function(){n.state===gp&&(n.state=BR,n.timer.restart(l,n.delay,n.time),l(d))}),n.state=Tk,n.on.call("start",e,e.__data__,n.index,n.group),n.state===Tk){for(n.state=gp,i=new Array(g=n.tween.length),h=0,p=-1;h<g;++h)(b=n.tween[h].value.call(e,e.__data__,n.index,n.group))&&(i[++p]=b);i.length=p+1}}function l(d){for(var h=d<n.duration?n.ease.call(null,d/n.duration):(n.timer.restart(u),n.state=Ak,1),p=-1,g=i.length;++p<g;)i[p].call(e,h);n.state===Ak&&(n.on.call("end",e,e.__data__,n.index,n.group),u())}function u(){n.state=yp,n.timer.stop(),delete r[t];for(var d in r)return;delete e.__transition}}function bp(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>Tk&&r.state<Ak,r.state=yp,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function _ie(e){return this.each(function(){bp(this,e)})}function Die(e,t){var n,r;return function(){var i=ls(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,l=r.length;o<l;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function Rie(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=ls(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var l={name:t,value:n},u=0,d=i.length;u<d;++u)if(i[u].name===t){i[u]=l;break}u===d&&i.push(l)}s.tween=i}}function jie(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=Li(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?Die:Rie)(n,e,t))}function m2(e,t,n){var r=e._id;return e.each(function(){var i=ls(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return Li(i,r).value[t]}}function b8(e,t){var n;return(typeof t=="number"?Qi:t instanceof Ua?wm:(n=Ua(t))?(t=n,wm):d8)(e,t)}function Oie(e){return function(){this.removeAttribute(e)}}function Lie(e){return function(){this.removeAttributeNS(e.space,e.local)}}function Pie(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function Iie(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function Bie(e,t,n){var r,i,s;return function(){var o,l=n(this),u;return l==null?void this.removeAttribute(e):(o=this.getAttribute(e),u=l+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,l)))}}function zie(e,t,n){var r,i,s;return function(){var o,l=n(this),u;return l==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),u=l+"",o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,l)))}}function Vie(e,t){var n=og(e),r=n==="transform"?xie:b8;return this.attrTween(e,typeof t=="function"?(n.local?zie:Bie)(n,r,m2(this,"attr."+e,t)):t==null?(n.local?Lie:Oie)(n):(n.local?Iie:Pie)(n,r,t))}function qie(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Hie(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function Fie(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Hie(e,s)),n}return i._value=t,i}function Uie(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&qie(e,s)),n}return i._value=t,i}function $ie(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=og(e);return this.tween(n,(r.local?Fie:Uie)(r,t))}function Gie(e,t){return function(){p2(this,e).delay=+t.apply(this,arguments)}}function Wie(e,t){return t=+t,function(){p2(this,e).delay=t}}function Kie(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Gie:Wie)(t,e)):Li(this.node(),t).delay}function Yie(e,t){return function(){ls(this,e).duration=+t.apply(this,arguments)}}function Xie(e,t){return t=+t,function(){ls(this,e).duration=t}}function Zie(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Yie:Xie)(t,e)):Li(this.node(),t).duration}function Qie(e,t){if(typeof t!="function")throw new Error;return function(){ls(this,e).ease=t}}function Jie(e){var t=this._id;return arguments.length?this.each(Qie(t,e)):Li(this.node(),t).ease}function ese(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;ls(this,e).ease=n}}function tse(e){if(typeof e!="function")throw new Error;return this.each(ese(this._id,e))}function nse(e){typeof e!="function"&&(e=Yz(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,l=r[i]=[],u,d=0;d<o;++d)(u=s[d])&&e.call(u,u.__data__,d,s)&&l.push(u);return new Bs(r,this._parents,this._name,this._id)}function rse(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),l=0;l<s;++l)for(var u=t[l],d=n[l],h=u.length,p=o[l]=new Array(h),g,b=0;b<h;++b)(g=u[b]||d[b])&&(p[b]=g);for(;l<r;++l)o[l]=t[l];return new Bs(o,this._parents,this._name,this._id)}function ise(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function sse(e,t,n){var r,i,s=ise(t)?p2:ls;return function(){var o=s(this,e),l=o.on;l!==r&&(i=(r=l).copy()).on(t,n),o.on=i}}function ose(e,t){var n=this._id;return arguments.length<2?Li(this.node(),n).on.on(e):this.each(sse(n,e,t))}function ase(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function lse(){return this.on("end.remove",ase(this._id))}function cse(e){var t=this._name,n=this._id;typeof e!="function"&&(e=c2(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var l=r[o],u=l.length,d=s[o]=new Array(u),h,p,g=0;g<u;++g)(h=l[g])&&(p=e.call(h,h.__data__,g,l))&&("__data__"in h&&(p.__data__=h.__data__),d[g]=p,lg(d[g],t,n,g,d,Li(h,n)));return new Bs(s,this._parents,t,n)}function use(e){var t=this._name,n=this._id;typeof e!="function"&&(e=Kz(e));for(var r=this._groups,i=r.length,s=[],o=[],l=0;l<i;++l)for(var u=r[l],d=u.length,h,p=0;p<d;++p)if(h=u[p]){for(var g=e.call(h,h.__data__,p,u),b,v=Li(h,n),S=0,w=g.length;S<w;++S)(b=g[S])&&lg(b,t,n,S,g,v);s.push(g),o.push(h)}return new Bs(s,o,t,n)}var dse=lf.prototype.constructor;function fse(){return new dse(this._groups,this._parents)}function hse(e,t){var n,r,i;return function(){var s=vc(this,e),o=(this.style.removeProperty(e),vc(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function x8(e){return function(){this.style.removeProperty(e)}}function pse(e,t,n){var r,i=n+"",s;return function(){var o=vc(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function mse(e,t,n){var r,i,s;return function(){var o=vc(this,e),l=n(this),u=l+"";return l==null&&(u=l=(this.style.removeProperty(e),vc(this,e))),o===u?null:o===r&&u===i?s:(i=u,s=t(r=o,l))}}function gse(e,t){var n,r,i,s="style."+t,o="end."+s,l;return function(){var u=ls(this,e),d=u.on,h=u.value[s]==null?l||(l=x8(t)):void 0;(d!==n||i!==h)&&(r=(n=d).copy()).on(o,i=h),u.on=r}}function yse(e,t,n){var r=(e+="")=="transform"?bie:b8;return t==null?this.styleTween(e,hse(e,r)).on("end.style."+e,x8(e)):typeof t=="function"?this.styleTween(e,mse(e,r,m2(this,"style."+e,t))).each(gse(this._id,e)):this.styleTween(e,pse(e,r,t),n).on("end.style."+e,null)}function bse(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function xse(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&bse(e,o,n)),r}return s._value=t,s}function vse(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,xse(e,t,n??""))}function wse(e){return function(){this.textContent=e}}function Sse(e){return function(){var t=e(this);this.textContent=t??""}}function Cse(e){return this.tween("text",typeof e=="function"?Sse(m2(this,"text",e)):wse(e==null?"":e+""))}function kse(e){return function(t){this.textContent=e.call(this,t)}}function Ese(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&kse(i)),t}return r._value=e,r}function Nse(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,Ese(e))}function Tse(){for(var e=this._name,t=this._id,n=v8(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],l=o.length,u,d=0;d<l;++d)if(u=o[d]){var h=Li(u,t);lg(u,e,n,d,o,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new Bs(r,this._parents,e,n)}function Ase(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var l={value:o},u={value:function(){--i===0&&s()}};n.each(function(){var d=ls(this,r),h=d.on;h!==e&&(t=(e=h).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(u)),d.on=t}),i===0&&s()})}var Mse=0;function Bs(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function v8(){return++Mse}var Ts=lf.prototype;Bs.prototype={constructor:Bs,select:cse,selectAll:use,selectChild:Ts.selectChild,selectChildren:Ts.selectChildren,filter:nse,merge:rse,selection:fse,transition:Tse,call:Ts.call,nodes:Ts.nodes,node:Ts.node,size:Ts.size,empty:Ts.empty,each:Ts.each,on:ose,attr:Vie,attrTween:$ie,style:yse,styleTween:vse,text:Cse,textTween:Nse,remove:lse,tween:jie,delay:Kie,duration:Zie,ease:Jie,easeVarying:tse,end:Ase,[Symbol.iterator]:Ts[Symbol.iterator]};function _se(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var Dse={time:null,delay:0,duration:250,ease:_se};function Rse(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function jse(e){var t,n;e instanceof Bs?(t=e._id,e=e._name):(t=v8(),(n=Dse).time=h2(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],l=o.length,u,d=0;d<l;++d)(u=o[d])&&lg(u,e,t,d,o,n||Rse(u,t));return new Bs(r,this._parents,e,t)}lf.prototype.interrupt=_ie;lf.prototype.transition=jse;const Xh=e=>()=>e;function Ose(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Rs(e,t,n){this.k=e,this.x=t,this.y=n}Rs.prototype={constructor:Rs,scale:function(e){return e===1?this:new Rs(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Rs(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var cg=new Rs(1,0,0);w8.prototype=Rs.prototype;function w8(e){for(;!e.__zoom;)if(!(e=e.parentNode))return cg;return e.__zoom}function Ib(e){e.stopImmediatePropagation()}function Pu(e){e.preventDefault(),e.stopImmediatePropagation()}function Lse(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function Pse(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function zR(){return this.__zoom||cg}function Ise(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function Bse(){return navigator.maxTouchPoints||"ontouchstart"in this}function zse(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function S8(){var e=Lse,t=Pse,n=zse,r=Ise,i=Bse,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,u=mp,d=sg("start","zoom","end"),h,p,g,b=500,v=150,S=0,w=10;function k(L){L.property("__zoom",zR).on("wheel.zoom",R,{passive:!1}).on("mousedown.zoom",I).on("dblclick.zoom",B).filter(i).on("touchstart.zoom",U).on("touchmove.zoom",V).on("touchend.zoom touchcancel.zoom",F).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}k.transform=function(L,H,O,q){var K=L.selection?L.selection():L;K.property("__zoom",zR),L!==K?A(L,H,O,q):K.interrupt().each(function(){_(this,arguments).event(q).start().zoom(null,typeof H=="function"?H.apply(this,arguments):H).end()})},k.scaleBy=function(L,H,O,q){k.scaleTo(L,function(){var K=this.__zoom.k,te=typeof H=="function"?H.apply(this,arguments):H;return K*te},O,q)},k.scaleTo=function(L,H,O,q){k.transform(L,function(){var K=t.apply(this,arguments),te=this.__zoom,z=O==null?N(K):typeof O=="function"?O.apply(this,arguments):O,G=te.invert(z),oe=typeof H=="function"?H.apply(this,arguments):H;return n(E(T(te,oe),z,G),K,o)},O,q)},k.translateBy=function(L,H,O,q){k.transform(L,function(){return n(this.__zoom.translate(typeof H=="function"?H.apply(this,arguments):H,typeof O=="function"?O.apply(this,arguments):O),t.apply(this,arguments),o)},null,q)},k.translateTo=function(L,H,O,q,K){k.transform(L,function(){var te=t.apply(this,arguments),z=this.__zoom,G=q==null?N(te):typeof q=="function"?q.apply(this,arguments):q;return n(cg.translate(G[0],G[1]).scale(z.k).translate(typeof H=="function"?-H.apply(this,arguments):-H,typeof O=="function"?-O.apply(this,arguments):-O),te,o)},q,K)};function T(L,H){return H=Math.max(s[0],Math.min(s[1],H)),H===L.k?L:new Rs(H,L.x,L.y)}function E(L,H,O){var q=H[0]-O[0]*L.k,K=H[1]-O[1]*L.k;return q===L.x&&K===L.y?L:new Rs(L.k,q,K)}function N(L){return[(+L[0][0]+ +L[1][0])/2,(+L[0][1]+ +L[1][1])/2]}function A(L,H,O,q){L.on("start.zoom",function(){_(this,arguments).event(q).start()}).on("interrupt.zoom end.zoom",function(){_(this,arguments).event(q).end()}).tween("zoom",function(){var K=this,te=arguments,z=_(K,te).event(q),G=t.apply(K,te),oe=O==null?N(G):typeof O=="function"?O.apply(K,te):O,ae=Math.max(G[1][0]-G[0][0],G[1][1]-G[0][1]),$=K.__zoom,Q=typeof H=="function"?H.apply(K,te):H,ee=u($.invert(oe).concat(ae/$.k),Q.invert(oe).concat(ae/Q.k));return function(de){if(de===1)de=Q;else{var le=ee(de),xe=ae/le[2];de=new Rs(xe,oe[0]-le[0]*xe,oe[1]-le[1]*xe)}z.zoom(null,de)}})}function _(L,H,O){return!O&&L.__zooming||new j(L,H)}function j(L,H){this.that=L,this.args=H,this.active=0,this.sourceEvent=null,this.extent=t.apply(L,H),this.taps=0}j.prototype={event:function(L){return L&&(this.sourceEvent=L),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(L,H){return this.mouse&&L!=="mouse"&&(this.mouse[1]=H.invert(this.mouse[0])),this.touch0&&L!=="touch"&&(this.touch0[1]=H.invert(this.touch0[0])),this.touch1&&L!=="touch"&&(this.touch1[1]=H.invert(this.touch1[0])),this.that.__zoom=H,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(L){var H=Gr(this.that).datum();d.call(L,this.that,new Ose(L,{sourceEvent:this.sourceEvent,target:k,transform:this.that.__zoom,dispatch:d}),H)}};function R(L,...H){if(!e.apply(this,arguments))return;var O=_(this,H).event(L),q=this.__zoom,K=Math.max(s[0],Math.min(s[1],q.k*Math.pow(2,r.apply(this,arguments)))),te=Mi(L);if(O.wheel)(O.mouse[0][0]!==te[0]||O.mouse[0][1]!==te[1])&&(O.mouse[1]=q.invert(O.mouse[0]=te)),clearTimeout(O.wheel);else{if(q.k===K)return;O.mouse=[te,q.invert(te)],bp(this),O.start()}Pu(L),O.wheel=setTimeout(z,v),O.zoom("mouse",n(E(T(q,K),O.mouse[0],O.mouse[1]),O.extent,o));function z(){O.wheel=null,O.end()}}function I(L,...H){if(g||!e.apply(this,arguments))return;var O=L.currentTarget,q=_(this,H,!0).event(L),K=Gr(L.view).on("mousemove.zoom",oe,!0).on("mouseup.zoom",ae,!0),te=Mi(L,O),z=L.clientX,G=L.clientY;s8(L.view),Ib(L),q.mouse=[te,this.__zoom.invert(te)],bp(this),q.start();function oe($){if(Pu($),!q.moved){var Q=$.clientX-z,ee=$.clientY-G;q.moved=Q*Q+ee*ee>S}q.event($).zoom("mouse",n(E(q.that.__zoom,q.mouse[0]=Mi($,O),q.mouse[1]),q.extent,o))}function ae($){K.on("mousemove.zoom mouseup.zoom",null),o8($.view,q.moved),Pu($),q.event($).end()}}function B(L,...H){if(e.apply(this,arguments)){var O=this.__zoom,q=Mi(L.changedTouches?L.changedTouches[0]:L,this),K=O.invert(q),te=O.k*(L.shiftKey?.5:2),z=n(E(T(O,te),q,K),t.apply(this,H),o);Pu(L),l>0?Gr(this).transition().duration(l).call(A,z,q,L):Gr(this).call(k.transform,z,q,L)}}function U(L,...H){if(e.apply(this,arguments)){var O=L.touches,q=O.length,K=_(this,H,L.changedTouches.length===q).event(L),te,z,G,oe;for(Ib(L),z=0;z<q;++z)G=O[z],oe=Mi(G,this),oe=[oe,this.__zoom.invert(oe),G.identifier],K.touch0?!K.touch1&&K.touch0[2]!==oe[2]&&(K.touch1=oe,K.taps=0):(K.touch0=oe,te=!0,K.taps=1+!!h);h&&(h=clearTimeout(h)),te&&(K.taps<2&&(p=oe[0],h=setTimeout(function(){h=null},b)),bp(this),K.start())}}function V(L,...H){if(this.__zooming){var O=_(this,H).event(L),q=L.changedTouches,K=q.length,te,z,G,oe;for(Pu(L),te=0;te<K;++te)z=q[te],G=Mi(z,this),O.touch0&&O.touch0[2]===z.identifier?O.touch0[0]=G:O.touch1&&O.touch1[2]===z.identifier&&(O.touch1[0]=G);if(z=O.that.__zoom,O.touch1){var ae=O.touch0[0],$=O.touch0[1],Q=O.touch1[0],ee=O.touch1[1],de=(de=Q[0]-ae[0])*de+(de=Q[1]-ae[1])*de,le=(le=ee[0]-$[0])*le+(le=ee[1]-$[1])*le;z=T(z,Math.sqrt(de/le)),G=[(ae[0]+Q[0])/2,(ae[1]+Q[1])/2],oe=[($[0]+ee[0])/2,($[1]+ee[1])/2]}else if(O.touch0)G=O.touch0[0],oe=O.touch0[1];else return;O.zoom("touch",n(E(z,G,oe),O.extent,o))}}function F(L,...H){if(this.__zooming){var O=_(this,H).event(L),q=L.changedTouches,K=q.length,te,z;for(Ib(L),g&&clearTimeout(g),g=setTimeout(function(){g=null},b),te=0;te<K;++te)z=q[te],O.touch0&&O.touch0[2]===z.identifier?delete O.touch0:O.touch1&&O.touch1[2]===z.identifier&&delete O.touch1;if(O.touch1&&!O.touch0&&(O.touch0=O.touch1,delete O.touch1),O.touch0)O.touch0[1]=this.__zoom.invert(O.touch0[0]);else if(O.end(),O.taps===2&&(z=Mi(z,this),Math.hypot(p[0]-z[0],p[1]-z[1])<w)){var G=Gr(this).on("dblclick.zoom");G&&G.apply(this,arguments)}}}return k.wheelDelta=function(L){return arguments.length?(r=typeof L=="function"?L:Xh(+L),k):r},k.filter=function(L){return arguments.length?(e=typeof L=="function"?L:Xh(!!L),k):e},k.touchable=function(L){return arguments.length?(i=typeof L=="function"?L:Xh(!!L),k):i},k.extent=function(L){return arguments.length?(t=typeof L=="function"?L:Xh([[+L[0][0],+L[0][1]],[+L[1][0],+L[1][1]]]),k):t},k.scaleExtent=function(L){return arguments.length?(s[0]=+L[0],s[1]=+L[1],k):[s[0],s[1]]},k.translateExtent=function(L){return arguments.length?(o[0][0]=+L[0][0],o[1][0]=+L[1][0],o[0][1]=+L[0][1],o[1][1]=+L[1][1],k):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},k.constrain=function(L){return arguments.length?(n=L,k):n},k.duration=function(L){return arguments.length?(l=+L,k):l},k.interpolate=function(L){return arguments.length?(u=L,k):u},k.on=function(){var L=d.on.apply(d,arguments);return L===d?k:L},k.clickDistance=function(L){return arguments.length?(S=(L=+L)*L,k):Math.sqrt(S)},k.tapDistance=function(L){return arguments.length?(w=+L,k):w},k}const as={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Vd=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],C8=["Enter"," ","Escape"],k8={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Ga;(function(e){e.Strict="strict",e.Loose="loose"})(Ga||(Ga={}));var Ba;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(Ba||(Ba={}));var qd;(function(e){e.Partial="partial",e.Full="full"})(qd||(qd={}));const E8={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Ao;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Ao||(Ao={}));var Em;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Em||(Em={}));var Ae;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Ae||(Ae={}));const VR={[Ae.Left]:Ae.Right,[Ae.Right]:Ae.Left,[Ae.Top]:Ae.Bottom,[Ae.Bottom]:Ae.Top};function N8(e){return e===null?null:e?"valid":"invalid"}const T8=e=>"id"in e&&"source"in e&&"target"in e,Vse=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),g2=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),uf=(e,t=[0,0])=>{const{width:n,height:r}=Vs(e),i=e.origin??t,s=n*i[0],o=r*i[1];return{x:e.position.x-s,y:e.position.y-o}},A8=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const s=typeof i=="string";let o=!t.nodeLookup&&!s?i:void 0;t.nodeLookup&&(o=s?t.nodeLookup.get(i):g2(i)?i:t.nodeLookup.get(i.id));const l=o?Nm(o,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return ug(r,l)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return dg(n)},df=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(r=>{if(t.filter===void 0||t.filter(r)){const i=Nm(r);n=ug(n,i)}}),dg(n)},y2=(e,t,[n,r,i]=[0,0,1],s=!1,o=!1)=>{const l={...hf(t,[n,r,i]),width:t.width/i,height:t.height/i},u=[];for(const d of e.values()){const{measured:h,selectable:p=!0,hidden:g=!1}=d;if(o&&!p||g)continue;const b=h.width??d.width??d.initialWidth??null,v=h.height??d.height??d.initialHeight??null,S=Hd(l,Cc(d)),w=(b??0)*(v??0),k=s&&S>0;(!d.internals.handleBounds||k||S>=w||d.dragging)&&u.push(d)}return u},qse=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function Hse(e,t){const n=new Map,r=t?.nodes?new Set(t.nodes.map(i=>i.id)):null;return e.forEach(i=>{i.measured.width&&i.measured.height&&(t?.includeHiddenNodes||!i.hidden)&&(!r||r.has(i.id))&&n.set(i.id,i)}),n}async function Fse({nodes:e,width:t,height:n,panZoom:r,minZoom:i,maxZoom:s},o){if(e.size===0)return Promise.resolve(!0);const l=Hse(e,o),u=df(l),d=fg(u,t,n,o?.minZoom??i,o?.maxZoom??s,o?.padding??.1);return await r.setViewport(d,{duration:o?.duration,ease:o?.ease,interpolate:o?.interpolate}),Promise.resolve(!0)}function M8({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:s}){const o=n.get(e),l=o.parentId?n.get(o.parentId):void 0,{x:u,y:d}=l?l.internals.positionAbsolute:{x:0,y:0},h=o.origin??r;let p=o.extent||i;if(o.extent==="parent"&&!o.expandParent)if(!l)s?.("005",as.error005());else{const b=l.measured.width,v=l.measured.height;b&&v&&(p=[[u,d],[u+b,d+v]])}else l&&kc(o.extent)&&(p=[[o.extent[0][0]+u,o.extent[0][1]+d],[o.extent[1][0]+u,o.extent[1][1]+d]]);const g=kc(p)?Wa(t,p,o.measured):t;return(o.measured.width===void 0||o.measured.height===void 0)&&s?.("015",as.error015()),{position:{x:g.x-u+(o.measured.width??0)*h[0],y:g.y-d+(o.measured.height??0)*h[1]},positionAbsolute:g}}async function Use({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:i}){const s=new Set(e.map(g=>g.id)),o=[];for(const g of n){if(g.deletable===!1)continue;const b=s.has(g.id),v=!b&&g.parentId&&o.find(S=>S.id===g.parentId);(b||v)&&o.push(g)}const l=new Set(t.map(g=>g.id)),u=r.filter(g=>g.deletable!==!1),h=qse(o,u);for(const g of u)l.has(g.id)&&!h.find(v=>v.id===g.id)&&h.push(g);if(!i)return{edges:h,nodes:o};const p=await i({nodes:o,edges:h});return typeof p=="boolean"?p?{edges:h,nodes:o}:{edges:[],nodes:[]}:p}const Sc=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Wa=(e={x:0,y:0},t,n)=>({x:Sc(e.x,t[0][0],t[1][0]-(n?.width??0)),y:Sc(e.y,t[0][1],t[1][1]-(n?.height??0))});function _8(e,t,n){const{width:r,height:i}=Vs(n),{x:s,y:o}=n.internals.positionAbsolute;return Wa(e,[[s,o],[s+r,o+i]],t)}const qR=(e,t,n)=>e<t?Sc(Math.abs(e-t),1,t)/t:e>n?-Sc(Math.abs(e-n),1,t)/t:0,D8=(e,t,n=15,r=40)=>{const i=qR(e.x,r,t.width-r)*n,s=qR(e.y,r,t.height-r)*n;return[i,s]},ug=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),Mk=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),dg=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Cc=(e,t=[0,0])=>{const{x:n,y:r}=g2(e)?e.internals.positionAbsolute:uf(e,t);return{x:n,y:r,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},Nm=(e,t=[0,0])=>{const{x:n,y:r}=g2(e)?e.internals.positionAbsolute:uf(e,t);return{x:n,y:r,x2:n+(e.measured?.width??e.width??e.initialWidth??0),y2:r+(e.measured?.height??e.height??e.initialHeight??0)}},R8=(e,t)=>dg(ug(Mk(e),Mk(t))),Hd=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},HR=e=>ji(e.width)&&ji(e.height)&&ji(e.x)&&ji(e.y),ji=e=>!isNaN(e)&&isFinite(e),$se=(e,t)=>{},ff=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),hf=({x:e,y:t},[n,r,i],s=!1,o=[1,1])=>{const l={x:(e-n)/i,y:(t-r)/i};return s?ff(l,o):l},Tm=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r});function Hl(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function Gse(e,t,n){if(typeof e=="string"||typeof e=="number"){const r=Hl(e,n),i=Hl(e,t);return{top:r,right:i,bottom:r,left:i,x:i*2,y:r*2}}if(typeof e=="object"){const r=Hl(e.top??e.y??0,n),i=Hl(e.bottom??e.y??0,n),s=Hl(e.left??e.x??0,t),o=Hl(e.right??e.x??0,t);return{top:r,right:o,bottom:i,left:s,x:s+o,y:r+i}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function Wse(e,t,n,r,i,s){const{x:o,y:l}=Tm(e,[t,n,r]),{x:u,y:d}=Tm({x:e.x+e.width,y:e.y+e.height},[t,n,r]),h=i-u,p=s-d;return{left:Math.floor(o),top:Math.floor(l),right:Math.floor(h),bottom:Math.floor(p)}}const fg=(e,t,n,r,i,s)=>{const o=Gse(s,t,n),l=(t-o.x)/e.width,u=(n-o.y)/e.height,d=Math.min(l,u),h=Sc(d,r,i),p=e.x+e.width/2,g=e.y+e.height/2,b=t/2-p*h,v=n/2-g*h,S=Wse(e,b,v,h,t,n),w={left:Math.min(S.left-o.left,0),top:Math.min(S.top-o.top,0),right:Math.min(S.right-o.right,0),bottom:Math.min(S.bottom-o.bottom,0)};return{x:b-w.left+w.right,y:v-w.top+w.bottom,zoom:h}},Fd=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function kc(e){return e!=null&&e!=="parent"}function Vs(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function j8(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function O8(e,t={width:0,height:0},n,r,i){const s={...e},o=r.get(n);if(o){const l=o.origin||i;s.x+=o.internals.positionAbsolute.x-(t.width??0)*l[0],s.y+=o.internals.positionAbsolute.y-(t.height??0)*l[1]}return s}function FR(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function Kse(){let e,t;return{promise:new Promise((r,i)=>{e=r,t=i}),resolve:e,reject:t}}function Yse(e){return{...k8,...e||{}}}function gd(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){const{x:s,y:o}=es(e),l=hf({x:s-(i?.left??0),y:o-(i?.top??0)},r),{x:u,y:d}=n?ff(l,t):l;return{xSnapped:u,ySnapped:d,...l}}const b2=e=>({width:e.offsetWidth,height:e.offsetHeight}),L8=e=>e?.getRootNode?.()||window?.document,Xse=["INPUT","SELECT","TEXTAREA"];function P8(e){const t=e.composedPath?.()?.[0]||e.target;return t?.nodeType!==1?!1:Xse.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const I8=e=>"clientX"in e,es=(e,t)=>{const n=I8(e),r=n?e.clientX:e.touches?.[0].clientX,i=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:i-(t?.top??0)}},UR=(e,t,n,r,i)=>{const s=t.querySelectorAll(`.${e}`);return!s||!s.length?null:Array.from(s).map(o=>{const l=o.getBoundingClientRect();return{id:o.getAttribute("data-handleid"),type:e,nodeId:i,position:o.getAttribute("data-handlepos"),x:(l.left-n.left)/r,y:(l.top-n.top)/r,...b2(o)}})};function B8({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:s,targetControlX:o,targetControlY:l}){const u=e*.125+i*.375+o*.375+n*.125,d=t*.125+s*.375+l*.375+r*.125,h=Math.abs(u-e),p=Math.abs(d-t);return[u,d,h,p]}function Zh(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function $R({pos:e,x1:t,y1:n,x2:r,y2:i,c:s}){switch(e){case Ae.Left:return[t-Zh(t-r,s),n];case Ae.Right:return[t+Zh(r-t,s),n];case Ae.Top:return[t,n-Zh(n-i,s)];case Ae.Bottom:return[t,n+Zh(i-n,s)]}}function hg({sourceX:e,sourceY:t,sourcePosition:n=Ae.Bottom,targetX:r,targetY:i,targetPosition:s=Ae.Top,curvature:o=.25}){const[l,u]=$R({pos:n,x1:e,y1:t,x2:r,y2:i,c:o}),[d,h]=$R({pos:s,x1:r,y1:i,x2:e,y2:t,c:o}),[p,g,b,v]=B8({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:l,sourceControlY:u,targetControlX:d,targetControlY:h});return[`M${e},${t} C${l},${u} ${d},${h} ${r},${i}`,p,g,b,v]}function pg({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,s=n<e?n+i:n-i,o=Math.abs(r-t)/2,l=r<t?r+o:r-o;return[s,l,i,o]}function Zse({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r,elevateOnSelect:i=!1}){if(r!==void 0)return r;const s=i&&n?1e3:0,o=Math.max(e.parentId?e.internals.z:0,t.parentId?t.internals.z:0);return s+o}function Qse({sourceNode:e,targetNode:t,width:n,height:r,transform:i}){const s=ug(Nm(e),Nm(t));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const o={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return Hd(o,dg(s))>0}const Jse=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,eoe=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),z8=(e,t)=>{if(!e.source||!e.target)return t;let n;return T8(e)?n={...e}:n={...e,id:Jse(e)},eoe(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function V8({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,s,o,l]=pg({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,s,o,l]}const GR={[Ae.Left]:{x:-1,y:0},[Ae.Right]:{x:1,y:0},[Ae.Top]:{x:0,y:-1},[Ae.Bottom]:{x:0,y:1}},toe=({source:e,sourcePosition:t=Ae.Bottom,target:n})=>t===Ae.Left||t===Ae.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},WR=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function noe({source:e,sourcePosition:t=Ae.Bottom,target:n,targetPosition:r=Ae.Top,center:i,offset:s,stepPosition:o}){const l=GR[t],u=GR[r],d={x:e.x+l.x*s,y:e.y+l.y*s},h={x:n.x+u.x*s,y:n.y+u.y*s},p=toe({source:d,sourcePosition:t,target:h}),g=p.x!==0?"x":"y",b=p[g];let v=[],S,w;const k={x:0,y:0},T={x:0,y:0},[,,E,N]=pg({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(l[g]*u[g]===-1){g==="x"?(S=i.x??d.x+(h.x-d.x)*o,w=i.y??(d.y+h.y)/2):(S=i.x??(d.x+h.x)/2,w=i.y??d.y+(h.y-d.y)*o);const _=[{x:S,y:d.y},{x:S,y:h.y}],j=[{x:d.x,y:w},{x:h.x,y:w}];l[g]===b?v=g==="x"?_:j:v=g==="x"?j:_}else{const _=[{x:d.x,y:h.y}],j=[{x:h.x,y:d.y}];if(g==="x"?v=l.x===b?j:_:v=l.y===b?_:j,t===r){const V=Math.abs(e[g]-n[g]);if(V<=s){const F=Math.min(s-1,s-V);l[g]===b?k[g]=(d[g]>e[g]?-1:1)*F:T[g]=(h[g]>n[g]?-1:1)*F}}if(t!==r){const V=g==="x"?"y":"x",F=l[g]===u[V],L=d[V]>h[V],H=d[V]<h[V];(l[g]===1&&(!F&&L||F&&H)||l[g]!==1&&(!F&&H||F&&L))&&(v=g==="x"?_:j)}const R={x:d.x+k.x,y:d.y+k.y},I={x:h.x+T.x,y:h.y+T.y},B=Math.max(Math.abs(R.x-v[0].x),Math.abs(I.x-v[0].x)),U=Math.max(Math.abs(R.y-v[0].y),Math.abs(I.y-v[0].y));B>=U?(S=(R.x+I.x)/2,w=v[0].y):(S=v[0].x,w=(R.y+I.y)/2)}return[[e,{x:d.x+k.x,y:d.y+k.y},...v,{x:h.x+T.x,y:h.y+T.y},n],S,w,E,N]}function roe(e,t,n,r){const i=Math.min(WR(e,t)/2,WR(t,n)/2,r),{x:s,y:o}=t;if(e.x===s&&s===n.x||e.y===o&&o===n.y)return`L${s} ${o}`;if(e.y===o){const d=e.x<n.x?-1:1,h=e.y<n.y?1:-1;return`L ${s+i*d},${o}Q ${s},${o} ${s},${o+i*h}`}const l=e.x<n.x?1:-1,u=e.y<n.y?-1:1;return`L ${s},${o+i*u}Q ${s},${o} ${s+i*l},${o}`}function _k({sourceX:e,sourceY:t,sourcePosition:n=Ae.Bottom,targetX:r,targetY:i,targetPosition:s=Ae.Top,borderRadius:o=5,centerX:l,centerY:u,offset:d=20,stepPosition:h=.5}){const[p,g,b,v,S]=noe({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:s,center:{x:l,y:u},offset:d,stepPosition:h});return[p.reduce((k,T,E)=>{let N="";return E>0&&E<p.length-1?N=roe(p[E-1],T,p[E+1],o):N=`${E===0?"M":"L"}${T.x} ${T.y}`,k+=N,k},""),g,b,v,S]}function KR(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function ioe(e){const{sourceNode:t,targetNode:n}=e;if(!KR(t)||!KR(n))return null;const r=t.internals.handleBounds||YR(t.handles),i=n.internals.handleBounds||YR(n.handles),s=XR(r?.source??[],e.sourceHandle),o=XR(e.connectionMode===Ga.Strict?i?.target??[]:(i?.target??[]).concat(i?.source??[]),e.targetHandle);if(!s||!o)return e.onError?.("008",as.error008(s?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const l=s?.position||Ae.Bottom,u=o?.position||Ae.Top,d=Ud(t,s,l),h=Ud(n,o,u);return{sourceX:d.x,sourceY:d.y,targetX:h.x,targetY:h.y,sourcePosition:l,targetPosition:u}}function YR(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function Ud(e,t,n=Ae.Left,r=!1){const i=(t?.x??0)+e.internals.positionAbsolute.x,s=(t?.y??0)+e.internals.positionAbsolute.y,{width:o,height:l}=t??Vs(e);if(r)return{x:i+o/2,y:s+l/2};switch(t?.position??n){case Ae.Top:return{x:i+o/2,y:s};case Ae.Right:return{x:i+o,y:s+l/2};case Ae.Bottom:return{x:i+o/2,y:s+l};case Ae.Left:return{x:i,y:s+l/2}}}function XR(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function Dk(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function soe(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const s=new Set;return e.reduce((o,l)=>([l.markerStart||r,l.markerEnd||i].forEach(u=>{if(u&&typeof u=="object"){const d=Dk(u,t);s.has(d)||(o.push({id:d,color:u.color||n,...u}),s.add(d))}}),o),[]).sort((o,l)=>o.id.localeCompare(l.id))}const x2={nodeOrigin:[0,0],nodeExtent:Vd,elevateNodesOnSelect:!0,defaults:{}},ooe={...x2,checkEquality:!0};function v2(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function aoe(e,t,n){const r=v2(x2,n);for(const i of e.values())if(i.parentId)w2(i,e,t,r);else{const s=uf(i,r.nodeOrigin),o=kc(i.extent)?i.extent:r.nodeExtent,l=Wa(s,o,Vs(i));i.internals.positionAbsolute=l}}function Rk(e,t,n,r){const i=v2(ooe,r);let s=e.length>0;const o=new Map(t),l=i?.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const u of e){let d=o.get(u.id);if(i.checkEquality&&u===d?.internals.userNode)t.set(u.id,d);else{const h=uf(u,i.nodeOrigin),p=kc(u.extent)?u.extent:i.nodeExtent,g=Wa(h,p,Vs(u));d={...i.defaults,...u,measured:{width:u.measured?.width,height:u.measured?.height},internals:{positionAbsolute:g,handleBounds:u.measured?d?.internals.handleBounds:void 0,z:q8(u,l),userNode:u}},t.set(u.id,d)}(d.measured===void 0||d.measured.width===void 0||d.measured.height===void 0)&&!d.hidden&&(s=!1),u.parentId&&w2(d,t,n,r)}return s}function loe(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function w2(e,t,n,r){const{elevateNodesOnSelect:i,nodeOrigin:s,nodeExtent:o}=v2(x2,r),l=e.parentId,u=t.get(l);if(!u){console.warn(`Parent node ${l} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}loe(e,n);const d=i?1e3:0,{x:h,y:p,z:g}=coe(e,u,s,o,d),{positionAbsolute:b}=e.internals,v=h!==b.x||p!==b.y;(v||g!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:v?{x:h,y:p}:b,z:g}})}function q8(e,t){return(ji(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function coe(e,t,n,r,i){const{x:s,y:o}=t.internals.positionAbsolute,l=Vs(e),u=uf(e,n),d=kc(e.extent)?Wa(u,e.extent,l):u;let h=Wa({x:s+d.x,y:o+d.y},r,l);e.extent==="parent"&&(h=_8(h,l,t));const p=q8(e,i),g=t.internals.z??0;return{x:h.x,y:h.y,z:g>=p?g+1:p}}function S2(e,t,n,r=[0,0]){const i=[],s=new Map;for(const o of e){const l=t.get(o.parentId);if(!l)continue;const u=s.get(o.parentId)?.expandedRect??Cc(l),d=R8(u,o.rect);s.set(o.parentId,{expandedRect:d,parent:l})}return s.size>0&&s.forEach(({expandedRect:o,parent:l},u)=>{const d=l.internals.positionAbsolute,h=Vs(l),p=l.origin??r,g=o.x<d.x?Math.round(Math.abs(d.x-o.x)):0,b=o.y<d.y?Math.round(Math.abs(d.y-o.y)):0,v=Math.max(h.width,Math.round(o.width)),S=Math.max(h.height,Math.round(o.height)),w=(v-h.width)*p[0],k=(S-h.height)*p[1];(g>0||b>0||w||k)&&(i.push({id:u,type:"position",position:{x:l.position.x-g+w,y:l.position.y-b+k}}),n.get(u)?.forEach(T=>{e.some(E=>E.id===T.id)||i.push({id:T.id,type:"position",position:{x:T.position.x+g,y:T.position.y+b}})})),(h.width<o.width||h.height<o.height||g||b)&&i.push({id:u,type:"dimensions",setAttributes:!0,dimensions:{width:v+(g?p[0]*g-w:0),height:S+(b?p[1]*b-k:0)}})}),i}function uoe(e,t,n,r,i,s){const o=r?.querySelector(".xyflow__viewport");let l=!1;if(!o)return{changes:[],updatedInternals:l};const u=[],d=window.getComputedStyle(o),{m22:h}=new window.DOMMatrixReadOnly(d.transform),p=[];for(const g of e.values()){const b=t.get(g.id);if(!b)continue;if(b.hidden){t.set(b.id,{...b,internals:{...b.internals,handleBounds:void 0}}),l=!0;continue}const v=b2(g.nodeElement),S=b.measured.width!==v.width||b.measured.height!==v.height;if(!!(v.width&&v.height&&(S||!b.internals.handleBounds||g.force))){const k=g.nodeElement.getBoundingClientRect(),T=kc(b.extent)?b.extent:s;let{positionAbsolute:E}=b.internals;b.parentId&&b.extent==="parent"?E=_8(E,v,t.get(b.parentId)):T&&(E=Wa(E,T,v));const N={...b,measured:v,internals:{...b.internals,positionAbsolute:E,handleBounds:{source:UR("source",g.nodeElement,k,h,b.id),target:UR("target",g.nodeElement,k,h,b.id)}}};t.set(b.id,N),b.parentId&&w2(N,t,n,{nodeOrigin:i}),l=!0,S&&(u.push({id:b.id,type:"dimensions",dimensions:v}),b.expandParent&&b.parentId&&p.push({id:b.id,parentId:b.parentId,rect:Cc(N,i)}))}}if(p.length>0){const g=S2(p,t,n,i);u.push(...g)}return{changes:u,updatedInternals:l}}async function doe({delta:e,panZoom:t,transform:n,translateExtent:r,width:i,height:s}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const o=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[i,s]],r),l=!!o&&(o.x!==n[0]||o.y!==n[1]||o.k!==n[2]);return Promise.resolve(l)}function ZR(e,t,n,r,i,s){let o=i;const l=r.get(o)||new Map;r.set(o,l.set(n,t)),o=`${i}-${e}`;const u=r.get(o)||new Map;if(r.set(o,u.set(n,t)),s){o=`${i}-${e}-${s}`;const d=r.get(o)||new Map;r.set(o,d.set(n,t))}}function H8(e,t,n){e.clear(),t.clear();for(const r of n){const{source:i,target:s,sourceHandle:o=null,targetHandle:l=null}=r,u={edgeId:r.id,source:i,target:s,sourceHandle:o,targetHandle:l},d=`${i}-${o}--${s}-${l}`,h=`${s}-${l}--${i}-${o}`;ZR("source",u,h,e,i,o),ZR("target",u,d,e,s,l),t.set(r.id,r)}}function F8(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:F8(n,t):!1}function QR(e,t,n){let r=e;do{if(r?.matches?.(t))return!0;if(r===n)return!1;r=r?.parentElement}while(r);return!1}function foe(e,t,n,r){const i=new Map;for(const[s,o]of e)if((o.selected||o.id===r)&&(!o.parentId||!F8(o,e))&&(o.draggable||t&&typeof o.draggable>"u")){const l=e.get(s);l&&i.set(s,{id:s,position:l.position||{x:0,y:0},distance:{x:n.x-l.internals.positionAbsolute.x,y:n.y-l.internals.positionAbsolute.y},extent:l.extent,parentId:l.parentId,origin:l.origin,expandParent:l.expandParent,internals:{positionAbsolute:l.internals.positionAbsolute||{x:0,y:0}},measured:{width:l.measured.width??0,height:l.measured.height??0}})}return i}function Bb({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){const i=[];for(const[o,l]of t){const u=n.get(o)?.internals.userNode;u&&i.push({...u,position:l.position,dragging:r})}if(!e)return[i[0],i];const s=n.get(e)?.internals.userNode;return[s?{...s,position:t.get(e)?.position||s.position,dragging:r}:i[0],i]}function hoe({dragItems:e,snapGrid:t,x:n,y:r}){const i=e.values().next().value;if(!i)return null;const s={x:n-i.distance.x,y:r-i.distance.y},o=ff(s,t);return{x:o.x-s.x,y:o.y-s.y}}function poe({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:i}){let s={x:null,y:null},o=0,l=new Map,u=!1,d={x:0,y:0},h=null,p=!1,g=null,b=!1,v=!1,S=null;function w({noDragClassName:T,handleSelector:E,domNode:N,isSelectable:A,nodeId:_,nodeClickDistance:j=0}){g=Gr(N);function R({x:V,y:F}){const{nodeLookup:L,nodeExtent:H,snapGrid:O,snapToGrid:q,nodeOrigin:K,onNodeDrag:te,onSelectionDrag:z,onError:G,updateNodePositions:oe}=t();s={x:V,y:F};let ae=!1;const $=l.size>1,Q=$&&H?Mk(df(l)):null,ee=$&&q?hoe({dragItems:l,snapGrid:O,x:V,y:F}):null;for(const[de,le]of l){if(!L.has(de))continue;let xe={x:V-le.distance.x,y:F-le.distance.y};q&&(xe=ee?{x:Math.round(xe.x+ee.x),y:Math.round(xe.y+ee.y)}:ff(xe,O));let _e=null;if($&&H&&!le.extent&&Q){const{positionAbsolute:Te}=le.internals,ke=Te.x-Q.x+H[0][0],Ee=Te.x+le.measured.width-Q.x2+H[1][0],ht=Te.y-Q.y+H[0][1],Oe=Te.y+le.measured.height-Q.y2+H[1][1];_e=[[ke,ht],[Ee,Oe]]}const{position:Be,positionAbsolute:Pe}=M8({nodeId:de,nextPosition:xe,nodeLookup:L,nodeExtent:_e||H,nodeOrigin:K,onError:G});ae=ae||le.position.x!==Be.x||le.position.y!==Be.y,le.position=Be,le.internals.positionAbsolute=Pe}if(v=v||ae,!!ae&&(oe(l,!0),S&&(r||te||!_&&z))){const[de,le]=Bb({nodeId:_,dragItems:l,nodeLookup:L});r?.(S,l,de,le),te?.(S,de,le),_||z?.(S,le)}}async function I(){if(!h)return;const{transform:V,panBy:F,autoPanSpeed:L,autoPanOnNodeDrag:H}=t();if(!H){u=!1,cancelAnimationFrame(o);return}const[O,q]=D8(d,h,L);(O!==0||q!==0)&&(s.x=(s.x??0)-O/V[2],s.y=(s.y??0)-q/V[2],await F({x:O,y:q})&&R(s)),o=requestAnimationFrame(I)}function B(V){const{nodeLookup:F,multiSelectionActive:L,nodesDraggable:H,transform:O,snapGrid:q,snapToGrid:K,selectNodesOnDrag:te,onNodeDragStart:z,onSelectionDragStart:G,unselectNodesAndEdges:oe}=t();p=!0,(!te||!A)&&!L&&_&&(F.get(_)?.selected||oe()),A&&te&&_&&e?.(_);const ae=gd(V.sourceEvent,{transform:O,snapGrid:q,snapToGrid:K,containerBounds:h});if(s=ae,l=foe(F,H,ae,_),l.size>0&&(n||z||!_&&G)){const[$,Q]=Bb({nodeId:_,dragItems:l,nodeLookup:F});n?.(V.sourceEvent,l,$,Q),z?.(V.sourceEvent,$,Q),_||G?.(V.sourceEvent,Q)}}const U=a8().clickDistance(j).on("start",V=>{const{domNode:F,nodeDragThreshold:L,transform:H,snapGrid:O,snapToGrid:q}=t();h=F?.getBoundingClientRect()||null,b=!1,v=!1,S=V.sourceEvent,L===0&&B(V),s=gd(V.sourceEvent,{transform:H,snapGrid:O,snapToGrid:q,containerBounds:h}),d=es(V.sourceEvent,h)}).on("drag",V=>{const{autoPanOnNodeDrag:F,transform:L,snapGrid:H,snapToGrid:O,nodeDragThreshold:q,nodeLookup:K}=t(),te=gd(V.sourceEvent,{transform:L,snapGrid:H,snapToGrid:O,containerBounds:h});if(S=V.sourceEvent,(V.sourceEvent.type==="touchmove"&&V.sourceEvent.touches.length>1||_&&!K.has(_))&&(b=!0),!b){if(!u&&F&&p&&(u=!0,I()),!p){const z=te.xSnapped-(s.x??0),G=te.ySnapped-(s.y??0);Math.sqrt(z*z+G*G)>q&&B(V)}(s.x!==te.xSnapped||s.y!==te.ySnapped)&&l&&p&&(d=es(V.sourceEvent,h),R(te))}}).on("end",V=>{if(!(!p||b)&&(u=!1,p=!1,cancelAnimationFrame(o),l.size>0)){const{nodeLookup:F,updateNodePositions:L,onNodeDragStop:H,onSelectionDragStop:O}=t();if(v&&(L(l,!1),v=!1),i||H||!_&&O){const[q,K]=Bb({nodeId:_,dragItems:l,nodeLookup:F,dragging:!1});i?.(V.sourceEvent,l,q,K),H?.(V.sourceEvent,q,K),_||O?.(V.sourceEvent,K)}}}).filter(V=>{const F=V.target;return!V.button&&(!T||!QR(F,`.${T}`,N))&&(!E||QR(F,E,N))});g.call(U)}function k(){g?.on(".drag",null)}return{update:w,destroy:k}}function moe(e,t,n){const r=[],i={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const s of t.values())Hd(i,Cc(s))>0&&r.push(s);return r}const goe=250;function yoe(e,t,n,r){let i=[],s=1/0;const o=moe(e,n,t+goe);for(const l of o){const u=[...l.internals.handleBounds?.source??[],...l.internals.handleBounds?.target??[]];for(const d of u){if(r.nodeId===d.nodeId&&r.type===d.type&&r.id===d.id)continue;const{x:h,y:p}=Ud(l,d,d.position,!0),g=Math.sqrt(Math.pow(h-e.x,2)+Math.pow(p-e.y,2));g>t||(g<s?(i=[{...d,x:h,y:p}],s=g):g===s&&i.push({...d,x:h,y:p}))}}if(!i.length)return null;if(i.length>1){const l=r.type==="source"?"target":"source";return i.find(u=>u.type===l)??i[0]}return i[0]}function U8(e,t,n,r,i,s=!1){const o=r.get(e);if(!o)return null;const l=i==="strict"?o.internals.handleBounds?.[t]:[...o.internals.handleBounds?.source??[],...o.internals.handleBounds?.target??[]],u=(n?l?.find(d=>d.id===n):l?.[0])??null;return u&&s?{...u,...Ud(o,u,u.position,!0)}:u}function $8(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function boe(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const G8=()=>!0;function xoe(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:s,isTarget:o,domNode:l,nodeLookup:u,lib:d,autoPanOnConnect:h,flowId:p,panBy:g,cancelConnection:b,onConnectStart:v,onConnect:S,onConnectEnd:w,isValidConnection:k=G8,onReconnectEnd:T,updateConnection:E,getTransform:N,getFromHandle:A,autoPanSpeed:_,dragThreshold:j=1,handleDomNode:R}){const I=L8(e.target);let B=0,U;const{x:V,y:F}=es(e),L=$8(s,R),H=l?.getBoundingClientRect();let O=!1;if(!H||!L)return;const q=U8(i,L,r,u,t);if(!q)return;let K=es(e,H),te=!1,z=null,G=!1,oe=null;function ae(){if(!h||!H)return;const[Be,Pe]=D8(K,H,_);g({x:Be,y:Pe}),B=requestAnimationFrame(ae)}const $={...q,nodeId:i,type:L,position:q.position},Q=u.get(i);let de={inProgress:!0,isValid:null,from:Ud(Q,$,Ae.Left,!0),fromHandle:$,fromPosition:$.position,fromNode:Q,to:K,toHandle:null,toPosition:VR[$.position],toNode:null};function le(){O=!0,E(de),v?.(e,{nodeId:i,handleId:r,handleType:L})}j===0&&le();function xe(Be){if(!O){const{x:Ee,y:ht}=es(Be),Oe=Ee-V,mt=ht-F;if(!(Oe*Oe+mt*mt>j*j))return;le()}if(!A()||!$){_e(Be);return}const Pe=N();K=es(Be,H),U=yoe(hf(K,Pe,!1,[1,1]),n,u,$),te||(ae(),te=!0);const Te=W8(Be,{handle:U,connectionMode:t,fromNodeId:i,fromHandleId:r,fromType:o?"target":"source",isValidConnection:k,doc:I,lib:d,flowId:p,nodeLookup:u});oe=Te.handleDomNode,z=Te.connection,G=boe(!!U,Te.isValid);const ke={...de,isValid:G,to:Te.toHandle&&G?Tm({x:Te.toHandle.x,y:Te.toHandle.y},Pe):K,toHandle:Te.toHandle,toPosition:G&&Te.toHandle?Te.toHandle.position:VR[$.position],toNode:Te.toHandle?u.get(Te.toHandle.nodeId):null};G&&U&&de.toHandle&&ke.toHandle&&de.toHandle.type===ke.toHandle.type&&de.toHandle.nodeId===ke.toHandle.nodeId&&de.toHandle.id===ke.toHandle.id&&de.to.x===ke.to.x&&de.to.y===ke.to.y||(E(ke),de=ke)}function _e(Be){if(O){(U||oe)&&z&&G&&S?.(z);const{inProgress:Pe,...Te}=de,ke={...Te,toPosition:de.toHandle?de.toPosition:null};w?.(Be,ke),s&&T?.(Be,ke)}b(),cancelAnimationFrame(B),te=!1,G=!1,z=null,oe=null,I.removeEventListener("mousemove",xe),I.removeEventListener("mouseup",_e),I.removeEventListener("touchmove",xe),I.removeEventListener("touchend",_e)}I.addEventListener("mousemove",xe),I.addEventListener("mouseup",_e),I.addEventListener("touchmove",xe),I.addEventListener("touchend",_e)}function W8(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:s,doc:o,lib:l,flowId:u,isValidConnection:d=G8,nodeLookup:h}){const p=s==="target",g=t?o.querySelector(`.${l}-flow__handle[data-id="${u}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:b,y:v}=es(e),S=o.elementFromPoint(b,v),w=S?.classList.contains(`${l}-flow__handle`)?S:g,k={handleDomNode:w,isValid:!1,connection:null,toHandle:null};if(w){const T=$8(void 0,w),E=w.getAttribute("data-nodeid"),N=w.getAttribute("data-handleid"),A=w.classList.contains("connectable"),_=w.classList.contains("connectableend");if(!E||!T)return k;const j={source:p?E:r,sourceHandle:p?N:i,target:p?r:E,targetHandle:p?i:N};k.connection=j;const I=A&&_&&(n===Ga.Strict?p&&T==="source"||!p&&T==="target":E!==r||N!==i);k.isValid=I&&d(j),k.toHandle=U8(E,T,N,h,n,!0)}return k}const jk={onPointerDown:xoe,isValid:W8};function voe({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const i=Gr(e);function s({translateExtent:l,width:u,height:d,zoomStep:h=1,pannable:p=!0,zoomable:g=!0,inversePan:b=!1}){const v=E=>{if(E.sourceEvent.type!=="wheel"||!t)return;const N=n(),A=E.sourceEvent.ctrlKey&&Fd()?10:1,_=-E.sourceEvent.deltaY*(E.sourceEvent.deltaMode===1?.05:E.sourceEvent.deltaMode?1:.002)*h,j=N[2]*Math.pow(2,_*A);t.scaleTo(j)};let S=[0,0];const w=E=>{(E.sourceEvent.type==="mousedown"||E.sourceEvent.type==="touchstart")&&(S=[E.sourceEvent.clientX??E.sourceEvent.touches[0].clientX,E.sourceEvent.clientY??E.sourceEvent.touches[0].clientY])},k=E=>{const N=n();if(E.sourceEvent.type!=="mousemove"&&E.sourceEvent.type!=="touchmove"||!t)return;const A=[E.sourceEvent.clientX??E.sourceEvent.touches[0].clientX,E.sourceEvent.clientY??E.sourceEvent.touches[0].clientY],_=[A[0]-S[0],A[1]-S[1]];S=A;const j=r()*Math.max(N[2],Math.log(N[2]))*(b?-1:1),R={x:N[0]-_[0]*j,y:N[1]-_[1]*j},I=[[0,0],[u,d]];t.setViewportConstrained({x:R.x,y:R.y,zoom:N[2]},I,l)},T=S8().on("start",w).on("zoom",p?k:null).on("zoom.wheel",g?v:null);i.call(T,{})}function o(){i.on("zoom",null)}return{update:s,destroy:o,pointer:Mi}}const woe=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,mg=e=>({x:e.x,y:e.y,zoom:e.k}),zb=({x:e,y:t,zoom:n})=>cg.translate(e,t).scale(n),nc=(e,t)=>e.target.closest(`.${t}`),K8=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),Soe=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,Vb=(e,t=0,n=Soe,r=()=>{})=>{const i=typeof t=="number"&&t>0;return i||r(),i?e.transition().duration(t).ease(n).on("end",r):e},Y8=e=>{const t=e.ctrlKey&&Fd()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function Coe({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:s,zoomOnPinch:o,onPanZoomStart:l,onPanZoom:u,onPanZoomEnd:d}){return h=>{if(nc(h,t))return!1;h.preventDefault(),h.stopImmediatePropagation();const p=n.property("__zoom").k||1;if(h.ctrlKey&&o){const w=Mi(h),k=Y8(h),T=p*Math.pow(2,k);r.scaleTo(n,T,w,h);return}const g=h.deltaMode===1?20:1;let b=i===Ba.Vertical?0:h.deltaX*g,v=i===Ba.Horizontal?0:h.deltaY*g;!Fd()&&h.shiftKey&&i!==Ba.Vertical&&(b=h.deltaY*g,v=0),r.translateBy(n,-(b/p)*s,-(v/p)*s,{internal:!0});const S=mg(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,l?.(h,S)),e.isPanScrolling&&(u?.(h,S),e.panScrollTimeout=setTimeout(()=>{d?.(h,S),e.isPanScrolling=!1},150))}}function koe({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,i){const s=r.type==="wheel",o=!t&&s&&!r.ctrlKey,l=nc(r,e);if(r.ctrlKey&&s&&l&&r.preventDefault(),o||l)return null;r.preventDefault(),n.call(this,r,i)}}function Eoe({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{if(r.sourceEvent?.internal)return;const i=mg(r.transform);e.mouseButton=r.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=i,r.sourceEvent?.type==="mousedown"&&t(!0),n&&n?.(r.sourceEvent,i)}}function Noe({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return s=>{e.usedRightMouseButton=!!(n&&K8(t,e.mouseButton??0)),s.sourceEvent?.sync||r([s.transform.x,s.transform.y,s.transform.k]),i&&!s.sourceEvent?.internal&&i?.(s.sourceEvent,mg(s.transform))}}function Toe({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:s}){return o=>{if(!o.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,s&&K8(t,e.mouseButton??0)&&!e.usedRightMouseButton&&o.sourceEvent&&s(o.sourceEvent),e.usedRightMouseButton=!1,r(!1),i&&woe(e.prevViewport,o.transform))){const l=mg(o.transform);e.prevViewport=l,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{i?.(o.sourceEvent,l)},n?150:0)}}}function Aoe({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:s,userSelectionActive:o,noWheelClassName:l,noPanClassName:u,lib:d}){return h=>{const p=e||t,g=n&&h.ctrlKey;if(h.button===1&&h.type==="mousedown"&&(nc(h,`${d}-flow__node`)||nc(h,`${d}-flow__edge`)))return!0;if(!r&&!p&&!i&&!s&&!n||o||nc(h,l)&&h.type==="wheel"||nc(h,u)&&(h.type!=="wheel"||i&&h.type==="wheel"&&!e)||!n&&h.ctrlKey&&h.type==="wheel")return!1;if(!n&&h.type==="touchstart"&&h.touches?.length>1)return h.preventDefault(),!1;if(!p&&!i&&!g&&h.type==="wheel"||!r&&(h.type==="mousedown"||h.type==="touchstart")||Array.isArray(r)&&!r.includes(h.button)&&h.type==="mousedown")return!1;const b=Array.isArray(r)&&r.includes(h.button)||!h.button||h.button<=1;return(!h.ctrlKey||h.type==="wheel")&&b}}function Moe({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:r,translateExtent:i,viewport:s,onPanZoom:o,onPanZoomStart:l,onPanZoomEnd:u,onDraggingChange:d}){const h={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},p=e.getBoundingClientRect(),g=S8().clickDistance(!ji(r)||r<0?0:r).scaleExtent([t,n]).translateExtent(i),b=Gr(e).call(g);E({x:s.x,y:s.y,zoom:Sc(s.zoom,t,n)},[[0,0],[p.width,p.height]],i);const v=b.on("wheel.zoom"),S=b.on("dblclick.zoom");g.wheelDelta(Y8);function w(V,F){return b?new Promise(L=>{g?.interpolate(F?.interpolate==="linear"?md:mp).transform(Vb(b,F?.duration,F?.ease,()=>L(!0)),V)}):Promise.resolve(!1)}function k({noWheelClassName:V,noPanClassName:F,onPaneContextMenu:L,userSelectionActive:H,panOnScroll:O,panOnDrag:q,panOnScrollMode:K,panOnScrollSpeed:te,preventScrolling:z,zoomOnPinch:G,zoomOnScroll:oe,zoomOnDoubleClick:ae,zoomActivationKeyPressed:$,lib:Q,onTransformChange:ee}){H&&!h.isZoomingOrPanning&&T();const le=O&&!$&&!H?Coe({zoomPanValues:h,noWheelClassName:V,d3Selection:b,d3Zoom:g,panOnScrollMode:K,panOnScrollSpeed:te,zoomOnPinch:G,onPanZoomStart:l,onPanZoom:o,onPanZoomEnd:u}):koe({noWheelClassName:V,preventScrolling:z,d3ZoomHandler:v});if(b.on("wheel.zoom",le,{passive:!1}),!H){const _e=Eoe({zoomPanValues:h,onDraggingChange:d,onPanZoomStart:l});g.on("start",_e);const Be=Noe({zoomPanValues:h,panOnDrag:q,onPaneContextMenu:!!L,onPanZoom:o,onTransformChange:ee});g.on("zoom",Be);const Pe=Toe({zoomPanValues:h,panOnDrag:q,panOnScroll:O,onPaneContextMenu:L,onPanZoomEnd:u,onDraggingChange:d});g.on("end",Pe)}const xe=Aoe({zoomActivationKeyPressed:$,panOnDrag:q,zoomOnScroll:oe,panOnScroll:O,zoomOnDoubleClick:ae,zoomOnPinch:G,userSelectionActive:H,noPanClassName:F,noWheelClassName:V,lib:Q});g.filter(xe),ae?b.on("dblclick.zoom",S):b.on("dblclick.zoom",null)}function T(){g.on("zoom",null)}async function E(V,F,L){const H=zb(V),O=g?.constrain()(H,F,L);return O&&await w(O),new Promise(q=>q(O))}async function N(V,F){const L=zb(V);return await w(L,F),new Promise(H=>H(L))}function A(V){if(b){const F=zb(V),L=b.property("__zoom");(L.k!==V.zoom||L.x!==V.x||L.y!==V.y)&&g?.transform(b,F,null,{sync:!0})}}function _(){const V=b?w8(b.node()):{x:0,y:0,k:1};return{x:V.x,y:V.y,zoom:V.k}}function j(V,F){return b?new Promise(L=>{g?.interpolate(F?.interpolate==="linear"?md:mp).scaleTo(Vb(b,F?.duration,F?.ease,()=>L(!0)),V)}):Promise.resolve(!1)}function R(V,F){return b?new Promise(L=>{g?.interpolate(F?.interpolate==="linear"?md:mp).scaleBy(Vb(b,F?.duration,F?.ease,()=>L(!0)),V)}):Promise.resolve(!1)}function I(V){g?.scaleExtent(V)}function B(V){g?.translateExtent(V)}function U(V){const F=!ji(V)||V<0?0:V;g?.clickDistance(F)}return{update:k,destroy:T,setViewport:N,setViewportConstrained:E,getViewport:_,scaleTo:j,scaleBy:R,setScaleExtent:I,setTranslateExtent:B,syncViewport:A,setClickDistance:U}}var Ka;(function(e){e.Line="line",e.Handle="handle"})(Ka||(Ka={}));const _oe=["top-left","top-right","bottom-left","bottom-right"],Doe=["top","right","bottom","left"];function Roe({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:i,affectsY:s}){const o=e-t,l=n-r,u=[o>0?1:o<0?-1:0,l>0?1:l<0?-1:0];return o&&i&&(u[0]=u[0]*-1),l&&s&&(u[1]=u[1]*-1),u}function joe(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),i=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:i}}function xo(e,t){return Math.max(0,t-e)}function vo(e,t){return Math.max(0,e-t)}function Qh(e,t,n){return Math.max(0,t-e,e-n)}function JR(e,t){return e?!t:t}function Ooe(e,t,n,r,i,s,o,l){let{affectsX:u,affectsY:d}=t;const{isHorizontal:h,isVertical:p}=t,g=h&&p,{xSnapped:b,ySnapped:v}=n,{minWidth:S,maxWidth:w,minHeight:k,maxHeight:T}=r,{x:E,y:N,width:A,height:_,aspectRatio:j}=e;let R=Math.floor(h?b-e.pointerX:0),I=Math.floor(p?v-e.pointerY:0);const B=A+(u?-R:R),U=_+(d?-I:I),V=-s[0]*A,F=-s[1]*_;let L=Qh(B,S,w),H=Qh(U,k,T);if(o){let K=0,te=0;u&&R<0?K=xo(E+R+V,o[0][0]):!u&&R>0&&(K=vo(E+B+V,o[1][0])),d&&I<0?te=xo(N+I+F,o[0][1]):!d&&I>0&&(te=vo(N+U+F,o[1][1])),L=Math.max(L,K),H=Math.max(H,te)}if(l){let K=0,te=0;u&&R>0?K=vo(E+R,l[0][0]):!u&&R<0&&(K=xo(E+B,l[1][0])),d&&I>0?te=vo(N+I,l[0][1]):!d&&I<0&&(te=xo(N+U,l[1][1])),L=Math.max(L,K),H=Math.max(H,te)}if(i){if(h){const K=Qh(B/j,k,T)*j;if(L=Math.max(L,K),o){let te=0;!u&&!d||u&&!d&&g?te=vo(N+F+B/j,o[1][1])*j:te=xo(N+F+(u?R:-R)/j,o[0][1])*j,L=Math.max(L,te)}if(l){let te=0;!u&&!d||u&&!d&&g?te=xo(N+B/j,l[1][1])*j:te=vo(N+(u?R:-R)/j,l[0][1])*j,L=Math.max(L,te)}}if(p){const K=Qh(U*j,S,w)/j;if(H=Math.max(H,K),o){let te=0;!u&&!d||d&&!u&&g?te=vo(E+U*j+V,o[1][0])/j:te=xo(E+(d?I:-I)*j+V,o[0][0])/j,H=Math.max(H,te)}if(l){let te=0;!u&&!d||d&&!u&&g?te=xo(E+U*j,l[1][0])/j:te=vo(E+(d?I:-I)*j,l[0][0])/j,H=Math.max(H,te)}}}I=I+(I<0?H:-H),R=R+(R<0?L:-L),i&&(g?B>U*j?I=(JR(u,d)?-R:R)/j:R=(JR(u,d)?-I:I)*j:h?(I=R/j,d=u):(R=I*j,u=d));const O=u?E+R:E,q=d?N+I:N;return{width:A+(u?-R:R),height:_+(d?-I:I),x:s[0]*R*(u?-1:1)+O,y:s[1]*I*(d?-1:1)+q}}const X8={width:0,height:0,x:0,y:0},Loe={...X8,pointerX:0,pointerY:0,aspectRatio:1};function Poe(e){return[[0,0],[e.measured.width,e.measured.height]]}function Ioe(e,t,n){const r=t.position.x+e.position.x,i=t.position.y+e.position.y,s=e.measured.width??0,o=e.measured.height??0,l=n[0]*s,u=n[1]*o;return[[r-l,i-u],[r+s-l,i+o-u]]}function Boe({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:i}){const s=Gr(e);function o({controlPosition:u,boundaries:d,keepAspectRatio:h,resizeDirection:p,onResizeStart:g,onResize:b,onResizeEnd:v,shouldResize:S}){let w={...X8},k={...Loe};const T=joe(u);let E,N=null,A=[],_,j,R;const I=a8().on("start",B=>{const{nodeLookup:U,transform:V,snapGrid:F,snapToGrid:L,nodeOrigin:H,paneDomNode:O}=n();if(E=U.get(t),!E)return;N=O?.getBoundingClientRect()??null;const{xSnapped:q,ySnapped:K}=gd(B.sourceEvent,{transform:V,snapGrid:F,snapToGrid:L,containerBounds:N});w={width:E.measured.width??0,height:E.measured.height??0,x:E.position.x??0,y:E.position.y??0},k={...w,pointerX:q,pointerY:K,aspectRatio:w.width/w.height},_=void 0,E.parentId&&(E.extent==="parent"||E.expandParent)&&(_=U.get(E.parentId),j=_&&E.extent==="parent"?Poe(_):void 0),A=[],R=void 0;for(const[te,z]of U)if(z.parentId===t&&(A.push({id:te,position:{...z.position},extent:z.extent}),z.extent==="parent"||z.expandParent)){const G=Ioe(z,E,z.origin??H);R?R=[[Math.min(G[0][0],R[0][0]),Math.min(G[0][1],R[0][1])],[Math.max(G[1][0],R[1][0]),Math.max(G[1][1],R[1][1])]]:R=G}g?.(B,{...w})}).on("drag",B=>{const{transform:U,snapGrid:V,snapToGrid:F,nodeOrigin:L}=n(),H=gd(B.sourceEvent,{transform:U,snapGrid:V,snapToGrid:F,containerBounds:N}),O=[];if(!E)return;const{x:q,y:K,width:te,height:z}=w,G={},oe=E.origin??L,{width:ae,height:$,x:Q,y:ee}=Ooe(k,T,H,d,h,oe,j,R),de=ae!==te,le=$!==z,xe=Q!==q&&de,_e=ee!==K&&le;if(!xe&&!_e&&!de&&!le)return;if((xe||_e||oe[0]===1||oe[1]===1)&&(G.x=xe?Q:w.x,G.y=_e?ee:w.y,w.x=G.x,w.y=G.y,A.length>0)){const ke=Q-q,Ee=ee-K;for(const ht of A)ht.position={x:ht.position.x-ke+oe[0]*(ae-te),y:ht.position.y-Ee+oe[1]*($-z)},O.push(ht)}if((de||le)&&(G.width=de&&(!p||p==="horizontal")?ae:w.width,G.height=le&&(!p||p==="vertical")?$:w.height,w.width=G.width,w.height=G.height),_&&E.expandParent){const ke=oe[0]*(G.width??0);G.x&&G.x<ke&&(w.x=ke,k.x=k.x-(G.x-ke));const Ee=oe[1]*(G.height??0);G.y&&G.y<Ee&&(w.y=Ee,k.y=k.y-(G.y-Ee))}const Be=Roe({width:w.width,prevWidth:te,height:w.height,prevHeight:z,affectsX:T.affectsX,affectsY:T.affectsY}),Pe={...w,direction:Be};S?.(B,Pe)!==!1&&(b?.(B,Pe),r(G,O))}).on("end",B=>{v?.(B,{...w}),i?.({...w})});s.call(I)}function l(){s.on(".drag",null)}return{update:o,destroy:l}}const zoe={},ej=e=>{let t;const n=new Set,r=(h,p)=>{const g=typeof h=="function"?h(t):h;if(!Object.is(g,t)){const b=t;t=p??(typeof g!="object"||g===null)?g:Object.assign({},t,g),n.forEach(v=>v(t,b))}},i=()=>t,u={setState:r,getState:i,getInitialState:()=>d,subscribe:h=>(n.add(h),()=>n.delete(h)),destroy:()=>{(zoe?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},d=t=e(r,i,u);return u},Voe=e=>e?ej(e):ej,{useDebugValue:qoe}=Ce,{useSyncExternalStoreWithSelector:Hoe}=nee,Foe=e=>e;function Z8(e,t=Foe,n){const r=Hoe(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return qoe(r),r}const tj=(e,t)=>{const n=Voe(e),r=(i,s=t)=>Z8(n,i,s);return Object.assign(r,n),r},Uoe=(e,t)=>e?tj(e,t):tj;function Xt(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,i]of e)if(!Object.is(i,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const gg=M.createContext(null),$oe=gg.Provider,Q8=as.error001();function ot(e,t){const n=M.useContext(gg);if(n===null)throw new Error(Q8);return Z8(n,e,t)}function Ft(){const e=M.useContext(gg);if(e===null)throw new Error(Q8);return M.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const nj={display:"none"},Goe={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},J8="react-flow__node-desc",eV="react-flow__edge-desc",Woe="react-flow__aria-live",Koe=e=>e.ariaLiveMessage,Yoe=e=>e.ariaLabelConfig;function Xoe({rfId:e}){const t=ot(Koe);return m.jsx("div",{id:`${Woe}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Goe,children:t})}function Zoe({rfId:e,disableKeyboardA11y:t}){const n=ot(Yoe);return m.jsxs(m.Fragment,{children:[m.jsx("div",{id:`${J8}-${e}`,style:nj,children:t?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),m.jsx("div",{id:`${eV}-${e}`,style:nj,children:n["edge.a11yDescription.default"]}),!t&&m.jsx(Xoe,{rfId:e})]})}const yg=M.forwardRef(({position:e="top-left",children:t,className:n,style:r,...i},s)=>{const o=`${e}`.split("-");return m.jsx("div",{className:Sn(["react-flow__panel",n,...o]),style:r,ref:s,...i,children:t})});yg.displayName="Panel";function Qoe({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:m.jsx(yg,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:m.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const Joe=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},Jh=e=>e.id;function eae(e,t){return Xt(e.selectedNodes.map(Jh),t.selectedNodes.map(Jh))&&Xt(e.selectedEdges.map(Jh),t.selectedEdges.map(Jh))}function tae({onSelectionChange:e}){const t=Ft(),{selectedNodes:n,selectedEdges:r}=ot(Joe,eae);return M.useEffect(()=>{const i={nodes:n,edges:r};e?.(i),t.getState().onSelectionChangeHandlers.forEach(s=>s(i))},[n,r,e]),null}const nae=e=>!!e.onSelectionChangeHandlers;function rae({onSelectionChange:e}){const t=ot(nae);return e||t?m.jsx(tae,{onSelectionChange:e}):null}const tV=[0,0],iae={x:0,y:0,zoom:1},sae=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance","ariaLabelConfig"],rj=[...sae,"rfId"],oae=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),ij={translateExtent:Vd,nodeOrigin:tV,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function aae(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:i,setTranslateExtent:s,setNodeExtent:o,reset:l,setDefaultNodesAndEdges:u,setPaneClickDistance:d}=ot(oae,Xt),h=Ft();M.useEffect(()=>(u(e.defaultNodes,e.defaultEdges),()=>{p.current=ij,l()}),[]);const p=M.useRef(ij);return M.useEffect(()=>{for(const g of rj){const b=e[g],v=p.current[g];b!==v&&(typeof e[g]>"u"||(g==="nodes"?t(b):g==="edges"?n(b):g==="minZoom"?r(b):g==="maxZoom"?i(b):g==="translateExtent"?s(b):g==="nodeExtent"?o(b):g==="paneClickDistance"?d(b):g==="ariaLabelConfig"?h.setState({ariaLabelConfig:Yse(b)}):g==="fitView"?h.setState({fitViewQueued:b}):g==="fitViewOptions"?h.setState({fitViewOptions:b}):h.setState({[g]:b})))}p.current=e},rj.map(g=>e[g])),null}function sj(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function lae(e){const[t,n]=M.useState(e==="system"?null:e);return M.useEffect(()=>{if(e!=="system"){n(e);return}const r=sj(),i=()=>n(r?.matches?"dark":"light");return i(),r?.addEventListener("change",i),()=>{r?.removeEventListener("change",i)}},[e]),t!==null?t:sj()?.matches?"dark":"light"}const oj=typeof document<"u"?document:null;function $d(e=null,t={target:oj,actInsideInputWithModifier:!0}){const[n,r]=M.useState(!1),i=M.useRef(!1),s=M.useRef(new Set([])),[o,l]=M.useMemo(()=>{if(e!==null){const d=(Array.isArray(e)?e:[e]).filter(p=>typeof p=="string").map(p=>p.replace("+",`
`).replace(`

`,`
+`).split(`
`)),h=d.reduce((p,g)=>p.concat(...g),[]);return[d,h]}return[[],[]]},[e]);return M.useEffect(()=>{const u=t?.target??oj,d=t?.actInsideInputWithModifier??!0;if(e!==null){const h=b=>{if(i.current=b.ctrlKey||b.metaKey||b.shiftKey||b.altKey,(!i.current||i.current&&!d)&&P8(b))return!1;const S=lj(b.code,l);if(s.current.add(b[S]),aj(o,s.current,!1)){const w=b.composedPath?.()?.[0]||b.target,k=w?.nodeName==="BUTTON"||w?.nodeName==="A";t.preventDefault!==!1&&(i.current||!k)&&b.preventDefault(),r(!0)}},p=b=>{const v=lj(b.code,l);aj(o,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(b[v]),b.key==="Meta"&&s.current.clear(),i.current=!1},g=()=>{s.current.clear(),r(!1)};return u?.addEventListener("keydown",h),u?.addEventListener("keyup",p),window.addEventListener("blur",g),window.addEventListener("contextmenu",g),()=>{u?.removeEventListener("keydown",h),u?.removeEventListener("keyup",p),window.removeEventListener("blur",g),window.removeEventListener("contextmenu",g)}}},[e,r]),n}function aj(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(i=>t.has(i)))}function lj(e,t){return t.includes(e)?"code":"key"}const cae=()=>{const e=Ft();return M.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[r,i,s],panZoom:o}=e.getState();return o?(await o.setViewport({x:t.x??r,y:t.y??i,zoom:t.zoom??s},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},setCenter:async(t,n,r)=>e.getState().setCenter(t,n,r),fitBounds:async(t,n)=>{const{width:r,height:i,minZoom:s,maxZoom:o,panZoom:l}=e.getState(),u=fg(t,r,i,s,o,n?.padding??.1);return l?(await l.setViewport(u,{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{const{transform:r,snapGrid:i,snapToGrid:s,domNode:o}=e.getState();if(!o)return t;const{x:l,y:u}=o.getBoundingClientRect(),d={x:t.x-l,y:t.y-u},h=n.snapGrid??i,p=n.snapToGrid??s;return hf(d,r,p,h)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:i,y:s}=r.getBoundingClientRect(),o=Tm(t,n);return{x:o.x+i,y:o.y+s}}}),[])};function nV(e,t){const n=[],r=new Map,i=[];for(const s of e)if(s.type==="add"){i.push(s);continue}else if(s.type==="remove"||s.type==="replace")r.set(s.id,[s]);else{const o=r.get(s.id);o?o.push(s):r.set(s.id,[s])}for(const s of t){const o=r.get(s.id);if(!o){n.push(s);continue}if(o[0].type==="remove")continue;if(o[0].type==="replace"){n.push({...o[0].item});continue}const l={...s};for(const u of o)uae(u,l);n.push(l)}return i.length&&i.forEach(s=>{s.index!==void 0?n.splice(s.index,0,{...s.item}):n.push({...s.item})}),n}function uae(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured??={},t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function rV(e,t){return nV(e,t)}function iV(e,t){return nV(e,t)}function xa(e,t){return{id:e,type:"select",selected:t}}function rc(e,t=new Set,n=!1){const r=[];for(const[i,s]of e){const o=t.has(i);!(s.selected===void 0&&!o)&&s.selected!==o&&(n&&(s.selected=o),r.push(xa(s.id,o)))}return r}function cj({items:e=[],lookup:t}){const n=[],r=new Map(e.map(i=>[i.id,i]));for(const[i,s]of e.entries()){const o=t.get(s.id),l=o?.internals?.userNode??o;l!==void 0&&l!==s&&n.push({id:s.id,item:s,type:"replace"}),l===void 0&&n.push({item:s,type:"add",index:i})}for(const[i]of t)r.get(i)===void 0&&n.push({id:i,type:"remove"});return n}function uj(e){return{id:e.id,type:"remove"}}const dj=e=>Vse(e),dae=e=>T8(e);function sV(e){return M.forwardRef(e)}const fae=typeof window<"u"?M.useLayoutEffect:M.useEffect;function fj(e){const[t,n]=M.useState(BigInt(0)),[r]=M.useState(()=>hae(()=>n(i=>i+BigInt(1))));return fae(()=>{const i=r.get();i.length&&(e(i),r.reset())},[t]),r}function hae(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const oV=M.createContext(null);function pae({children:e}){const t=Ft(),n=M.useCallback(l=>{const{nodes:u=[],setNodes:d,hasDefaultNodes:h,onNodesChange:p,nodeLookup:g,fitViewQueued:b}=t.getState();let v=u;for(const w of l)v=typeof w=="function"?w(v):w;const S=cj({items:v,lookup:g});h&&d(v),S.length>0?p?.(S):b&&window.requestAnimationFrame(()=>{const{fitViewQueued:w,nodes:k,setNodes:T}=t.getState();w&&T(k)})},[]),r=fj(n),i=M.useCallback(l=>{const{edges:u=[],setEdges:d,hasDefaultEdges:h,onEdgesChange:p,edgeLookup:g}=t.getState();let b=u;for(const v of l)b=typeof v=="function"?v(b):v;h?d(b):p&&p(cj({items:b,lookup:g}))},[]),s=fj(i),o=M.useMemo(()=>({nodeQueue:r,edgeQueue:s}),[]);return m.jsx(oV.Provider,{value:o,children:e})}function mae(){const e=M.useContext(oV);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const gae=e=>!!e.panZoom;function Gd(){const e=cae(),t=Ft(),n=mae(),r=ot(gae),i=M.useMemo(()=>{const s=p=>t.getState().nodeLookup.get(p),o=p=>{n.nodeQueue.push(p)},l=p=>{n.edgeQueue.push(p)},u=p=>{const{nodeLookup:g,nodeOrigin:b}=t.getState(),v=dj(p)?p:g.get(p.id),S=v.parentId?O8(v.position,v.measured,v.parentId,g,b):v.position,w={...v,position:S,width:v.measured?.width??v.width,height:v.measured?.height??v.height};return Cc(w)},d=(p,g,b={replace:!1})=>{o(v=>v.map(S=>{if(S.id===p){const w=typeof g=="function"?g(S):g;return b.replace&&dj(w)?w:{...S,...w}}return S}))},h=(p,g,b={replace:!1})=>{l(v=>v.map(S=>{if(S.id===p){const w=typeof g=="function"?g(S):g;return b.replace&&dae(w)?w:{...S,...w}}return S}))};return{getNodes:()=>t.getState().nodes.map(p=>({...p})),getNode:p=>s(p)?.internals.userNode,getInternalNode:s,getEdges:()=>{const{edges:p=[]}=t.getState();return p.map(g=>({...g}))},getEdge:p=>t.getState().edgeLookup.get(p),setNodes:o,setEdges:l,addNodes:p=>{const g=Array.isArray(p)?p:[p];n.nodeQueue.push(b=>[...b,...g])},addEdges:p=>{const g=Array.isArray(p)?p:[p];n.edgeQueue.push(b=>[...b,...g])},toObject:()=>{const{nodes:p=[],edges:g=[],transform:b}=t.getState(),[v,S,w]=b;return{nodes:p.map(k=>({...k})),edges:g.map(k=>({...k})),viewport:{x:v,y:S,zoom:w}}},deleteElements:async({nodes:p=[],edges:g=[]})=>{const{nodes:b,edges:v,onNodesDelete:S,onEdgesDelete:w,triggerNodeChanges:k,triggerEdgeChanges:T,onDelete:E,onBeforeDelete:N}=t.getState(),{nodes:A,edges:_}=await Use({nodesToRemove:p,edgesToRemove:g,nodes:b,edges:v,onBeforeDelete:N}),j=_.length>0,R=A.length>0;if(j){const I=_.map(uj);w?.(_),T(I)}if(R){const I=A.map(uj);S?.(A),k(I)}return(R||j)&&E?.({nodes:A,edges:_}),{deletedNodes:A,deletedEdges:_}},getIntersectingNodes:(p,g=!0,b)=>{const v=HR(p),S=v?p:u(p),w=b!==void 0;return S?(b||t.getState().nodes).filter(k=>{const T=t.getState().nodeLookup.get(k.id);if(T&&!v&&(k.id===p.id||!T.internals.positionAbsolute))return!1;const E=Cc(w?k:T),N=Hd(E,S);return g&&N>0||N>=E.width*E.height||N>=S.width*S.height}):[]},isNodeIntersecting:(p,g,b=!0)=>{const S=HR(p)?p:u(p);if(!S)return!1;const w=Hd(S,g);return b&&w>0||w>=S.width*S.height},updateNode:d,updateNodeData:(p,g,b={replace:!1})=>{d(p,v=>{const S=typeof g=="function"?g(v):g;return b.replace?{...v,data:S}:{...v,data:{...v.data,...S}}},b)},updateEdge:h,updateEdgeData:(p,g,b={replace:!1})=>{h(p,v=>{const S=typeof g=="function"?g(v):g;return b.replace?{...v,data:S}:{...v,data:{...v.data,...S}}},b)},getNodesBounds:p=>{const{nodeLookup:g,nodeOrigin:b}=t.getState();return A8(p,{nodeLookup:g,nodeOrigin:b})},getHandleConnections:({type:p,id:g,nodeId:b})=>Array.from(t.getState().connectionLookup.get(`${b}-${p}${g?`-${g}`:""}`)?.values()??[]),getNodeConnections:({type:p,handleId:g,nodeId:b})=>Array.from(t.getState().connectionLookup.get(`${b}${p?g?`-${p}-${g}`:`-${p}`:""}`)?.values()??[]),fitView:async p=>{const g=t.getState().fitViewResolver??Kse();return t.setState({fitViewQueued:!0,fitViewOptions:p,fitViewResolver:g}),n.nodeQueue.push(b=>[...b]),g.promise}}},[]);return M.useMemo(()=>({...i,...e,viewportInitialized:r}),[r])}const hj=e=>e.selected,yae=typeof window<"u"?window:void 0;function bae({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=Ft(),{deleteElements:r}=Gd(),i=$d(e,{actInsideInputWithModifier:!1}),s=$d(t,{target:yae});M.useEffect(()=>{if(i){const{edges:o,nodes:l}=n.getState();r({nodes:l.filter(hj),edges:o.filter(hj)}),n.setState({nodesSelectionActive:!1})}},[i]),M.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])}function xae(e){const t=Ft();M.useEffect(()=>{const n=()=>{if(!e.current)return!1;const r=b2(e.current);(r.height===0||r.width===0)&&t.getState().onError?.("004",as.error004()),t.setState({width:r.width||500,height:r.height||500})};if(e.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(e.current),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}}},[])}const bg={position:"absolute",width:"100%",height:"100%",top:0,left:0},vae=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function wae({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:i=.5,panOnScrollMode:s=Ba.Free,zoomOnDoubleClick:o=!0,panOnDrag:l=!0,defaultViewport:u,translateExtent:d,minZoom:h,maxZoom:p,zoomActivationKeyCode:g,preventScrolling:b=!0,children:v,noWheelClassName:S,noPanClassName:w,onViewportChange:k,isControlledViewport:T,paneClickDistance:E}){const N=Ft(),A=M.useRef(null),{userSelectionActive:_,lib:j}=ot(vae,Xt),R=$d(g),I=M.useRef();xae(A);const B=M.useCallback(U=>{k?.({x:U[0],y:U[1],zoom:U[2]}),T||N.setState({transform:U})},[k,T]);return M.useEffect(()=>{if(A.current){I.current=Moe({domNode:A.current,minZoom:h,maxZoom:p,translateExtent:d,viewport:u,paneClickDistance:E,onDraggingChange:L=>N.setState({paneDragging:L}),onPanZoomStart:(L,H)=>{const{onViewportChangeStart:O,onMoveStart:q}=N.getState();q?.(L,H),O?.(H)},onPanZoom:(L,H)=>{const{onViewportChange:O,onMove:q}=N.getState();q?.(L,H),O?.(H)},onPanZoomEnd:(L,H)=>{const{onViewportChangeEnd:O,onMoveEnd:q}=N.getState();q?.(L,H),O?.(H)}});const{x:U,y:V,zoom:F}=I.current.getViewport();return N.setState({panZoom:I.current,transform:[U,V,F],domNode:A.current.closest(".react-flow")}),()=>{I.current?.destroy()}}},[]),M.useEffect(()=>{I.current?.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:i,panOnScrollMode:s,zoomOnDoubleClick:o,panOnDrag:l,zoomActivationKeyPressed:R,preventScrolling:b,noPanClassName:w,userSelectionActive:_,noWheelClassName:S,lib:j,onTransformChange:B})},[e,t,n,r,i,s,o,l,R,b,w,_,S,j,B]),m.jsx("div",{className:"react-flow__renderer",ref:A,style:bg,children:v})}const Sae=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function Cae(){const{userSelectionActive:e,userSelectionRect:t}=ot(Sae,Xt);return e&&t?m.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const qb=(e,t)=>n=>{n.target===t.current&&e?.(n)},kae=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function Eae({isSelecting:e,selectionKeyPressed:t,selectionMode:n=qd.Full,panOnDrag:r,selectionOnDrag:i,onSelectionStart:s,onSelectionEnd:o,onPaneClick:l,onPaneContextMenu:u,onPaneScroll:d,onPaneMouseEnter:h,onPaneMouseMove:p,onPaneMouseLeave:g,children:b}){const v=Ft(),{userSelectionActive:S,elementsSelectable:w,dragging:k,connectionInProgress:T}=ot(kae,Xt),E=w&&(e||S),N=M.useRef(null),A=M.useRef(),_=M.useRef(new Set),j=M.useRef(new Set),R=M.useRef(!1),I=M.useRef(!1),B=q=>{if(R.current||T){R.current=!1;return}l?.(q),v.getState().resetSelectedElements(),v.setState({nodesSelectionActive:!1})},U=q=>{if(Array.isArray(r)&&r?.includes(2)){q.preventDefault();return}u?.(q)},V=d?q=>d(q):void 0,F=q=>{const{resetSelectedElements:K,domNode:te}=v.getState();if(A.current=te?.getBoundingClientRect(),!w||!e||q.button!==0||q.target!==N.current||!A.current)return;q.target?.setPointerCapture?.(q.pointerId),I.current=!0,R.current=!1;const{x:z,y:G}=es(q.nativeEvent,A.current);K(),v.setState({userSelectionRect:{width:0,height:0,startX:z,startY:G,x:z,y:G}}),s?.(q)},L=q=>{const{userSelectionRect:K,transform:te,nodeLookup:z,edgeLookup:G,connectionLookup:oe,triggerNodeChanges:ae,triggerEdgeChanges:$,defaultEdgeOptions:Q}=v.getState();if(!A.current||!K)return;R.current=!0;const{x:ee,y:de}=es(q.nativeEvent,A.current),{startX:le,startY:xe}=K,_e={startX:le,startY:xe,x:ee<le?ee:le,y:de<xe?de:xe,width:Math.abs(ee-le),height:Math.abs(de-xe)},Be=_.current,Pe=j.current;_.current=new Set(y2(z,_e,te,n===qd.Partial,!0).map(ke=>ke.id)),j.current=new Set;const Te=Q?.selectable??!0;for(const ke of _.current){const Ee=oe.get(ke);if(Ee)for(const{edgeId:ht}of Ee.values()){const Oe=G.get(ht);Oe&&(Oe.selectable??Te)&&j.current.add(ht)}}if(!FR(Be,_.current)){const ke=rc(z,_.current,!0);ae(ke)}if(!FR(Pe,j.current)){const ke=rc(G,j.current);$(ke)}v.setState({userSelectionRect:_e,userSelectionActive:!0,nodesSelectionActive:!1})},H=q=>{if(q.button!==0||!I.current)return;q.target?.releasePointerCapture?.(q.pointerId);const{userSelectionRect:K}=v.getState();!S&&K&&q.target===N.current&&B?.(q),v.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:_.current.size>0}),o?.(q),(t||i)&&(R.current=!1),I.current=!1},O=r===!0||Array.isArray(r)&&r.includes(0);return m.jsxs("div",{className:Sn(["react-flow__pane",{draggable:O,dragging:k,selection:e}]),onClick:E?void 0:qb(B,N),onContextMenu:qb(U,N),onWheel:qb(V,N),onPointerEnter:E?void 0:h,onPointerDown:E?F:p,onPointerMove:E?L:p,onPointerUp:E?H:void 0,onPointerLeave:g,ref:N,style:bg,children:[b,m.jsx(Cae,{})]})}function Ok({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:s,multiSelectionActive:o,nodeLookup:l,onError:u}=t.getState(),d=l.get(e);if(!d){u?.("012",as.error012(e));return}t.setState({nodesSelectionActive:!1}),d.selected?(n||d.selected&&o)&&(s({nodes:[d],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):i([e])}function aV({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:s,nodeClickDistance:o}){const l=Ft(),[u,d]=M.useState(!1),h=M.useRef();return M.useEffect(()=>{h.current=poe({getStoreItems:()=>l.getState(),onNodeMouseDown:p=>{Ok({id:p,store:l,nodeRef:e})},onDragStart:()=>{d(!0)},onDragStop:()=>{d(!1)}})},[]),M.useEffect(()=>{if(t)h.current?.destroy();else if(e.current)return h.current?.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:s,nodeId:i,nodeClickDistance:o}),()=>{h.current?.destroy()}},[n,r,t,s,e,i]),u}const Nae=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function lV(){const e=Ft();return M.useCallback(n=>{const{nodeExtent:r,snapToGrid:i,snapGrid:s,nodesDraggable:o,onError:l,updateNodePositions:u,nodeLookup:d,nodeOrigin:h}=e.getState(),p=new Map,g=Nae(o),b=i?s[0]:5,v=i?s[1]:5,S=n.direction.x*b*n.factor,w=n.direction.y*v*n.factor;for(const[,k]of d){if(!g(k))continue;let T={x:k.internals.positionAbsolute.x+S,y:k.internals.positionAbsolute.y+w};i&&(T=ff(T,s));const{position:E,positionAbsolute:N}=M8({nodeId:k.id,nextPosition:T,nodeLookup:d,nodeExtent:r,nodeOrigin:h,onError:l});k.position=E,k.internals.positionAbsolute=N,p.set(k.id,k)}u(p)},[])}const C2=M.createContext(null),Tae=C2.Provider;C2.Consumer;const cV=()=>M.useContext(C2),Aae=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),Mae=(e,t,n)=>r=>{const{connectionClickStartHandle:i,connectionMode:s,connection:o}=r,{fromHandle:l,toHandle:u,isValid:d}=o,h=u?.nodeId===e&&u?.id===t&&u?.type===n;return{connectingFrom:l?.nodeId===e&&l?.id===t&&l?.type===n,connectingTo:h,clickConnecting:i?.nodeId===e&&i?.id===t&&i?.type===n,isPossibleEndHandle:s===Ga.Strict?l?.type!==n:e!==l?.nodeId||t!==l?.id,connectionInProcess:!!l,clickConnectionInProcess:!!i,valid:h&&d}};function _ae({type:e="source",position:t=Ae.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:s=!0,id:o,onConnect:l,children:u,className:d,onMouseDown:h,onTouchStart:p,...g},b){const v=o||null,S=e==="target",w=Ft(),k=cV(),{connectOnClick:T,noPanClassName:E,rfId:N}=ot(Aae,Xt),{connectingFrom:A,connectingTo:_,clickConnecting:j,isPossibleEndHandle:R,connectionInProcess:I,clickConnectionInProcess:B,valid:U}=ot(Mae(k,v,e),Xt);k||w.getState().onError?.("010",as.error010());const V=H=>{const{defaultEdgeOptions:O,onConnect:q,hasDefaultEdges:K}=w.getState(),te={...O,...H};if(K){const{edges:z,setEdges:G}=w.getState();G(z8(te,z))}q?.(te),l?.(te)},F=H=>{if(!k)return;const O=I8(H.nativeEvent);if(i&&(O&&H.button===0||!O)){const q=w.getState();jk.onPointerDown(H.nativeEvent,{handleDomNode:H.currentTarget,autoPanOnConnect:q.autoPanOnConnect,connectionMode:q.connectionMode,connectionRadius:q.connectionRadius,domNode:q.domNode,nodeLookup:q.nodeLookup,lib:q.lib,isTarget:S,handleId:v,nodeId:k,flowId:q.rfId,panBy:q.panBy,cancelConnection:q.cancelConnection,onConnectStart:q.onConnectStart,onConnectEnd:q.onConnectEnd,updateConnection:q.updateConnection,onConnect:V,isValidConnection:n||q.isValidConnection,getTransform:()=>w.getState().transform,getFromHandle:()=>w.getState().connection.fromHandle,autoPanSpeed:q.autoPanSpeed,dragThreshold:q.connectionDragThreshold})}O?h?.(H):p?.(H)},L=H=>{const{onClickConnectStart:O,onClickConnectEnd:q,connectionClickStartHandle:K,connectionMode:te,isValidConnection:z,lib:G,rfId:oe,nodeLookup:ae,connection:$}=w.getState();if(!k||!K&&!i)return;if(!K){O?.(H.nativeEvent,{nodeId:k,handleId:v,handleType:e}),w.setState({connectionClickStartHandle:{nodeId:k,type:e,id:v}});return}const Q=L8(H.target),ee=n||z,{connection:de,isValid:le}=jk.isValid(H.nativeEvent,{handle:{nodeId:k,id:v,type:e},connectionMode:te,fromNodeId:K.nodeId,fromHandleId:K.id||null,fromType:K.type,isValidConnection:ee,flowId:oe,doc:Q,lib:G,nodeLookup:ae});le&&de&&V(de);const xe=structuredClone($);delete xe.inProgress,xe.toPosition=xe.toHandle?xe.toHandle.position:null,q?.(H,xe),w.setState({connectionClickStartHandle:null})};return m.jsx("div",{"data-handleid":v,"data-nodeid":k,"data-handlepos":t,"data-id":`${N}-${k}-${v}-${e}`,className:Sn(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",E,d,{source:!S,target:S,connectable:r,connectablestart:i,connectableend:s,clickconnecting:j,connectingfrom:A,connectingto:_,valid:U,connectionindicator:r&&(!I||R)&&(I||B?s:i)}]),onMouseDown:F,onTouchStart:F,onClick:T?L:void 0,ref:b,...g,children:u})}const xn=M.memo(sV(_ae));function Dae({data:e,isConnectable:t,sourcePosition:n=Ae.Bottom}){return m.jsxs(m.Fragment,{children:[e?.label,m.jsx(xn,{type:"source",position:n,isConnectable:t})]})}function Rae({data:e,isConnectable:t,targetPosition:n=Ae.Top,sourcePosition:r=Ae.Bottom}){return m.jsxs(m.Fragment,{children:[m.jsx(xn,{type:"target",position:n,isConnectable:t}),e?.label,m.jsx(xn,{type:"source",position:r,isConnectable:t})]})}function jae(){return null}function Oae({data:e,isConnectable:t,targetPosition:n=Ae.Top}){return m.jsxs(m.Fragment,{children:[m.jsx(xn,{type:"target",position:n,isConnectable:t}),e?.label]})}const Am={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},pj={input:Dae,default:Rae,output:Oae,group:jae};function Lae(e){return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??e.style?.width,height:e.height??e.initialHeight??e.style?.height}:{width:e.width??e.style?.width,height:e.height??e.style?.height}}const Pae=e=>{const{width:t,height:n,x:r,y:i}=df(e.nodeLookup,{filter:s=>!!s.selected});return{width:ji(t)?t:null,height:ji(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${i}px)`}};function Iae({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=Ft(),{width:i,height:s,transformString:o,userSelectionActive:l}=ot(Pae,Xt),u=lV(),d=M.useRef(null);if(M.useEffect(()=>{n||d.current?.focus({preventScroll:!0})},[n]),aV({nodeRef:d}),l||!i||!s)return null;const h=e?g=>{const b=r.getState().nodes.filter(v=>v.selected);e(g,b)}:void 0,p=g=>{Object.prototype.hasOwnProperty.call(Am,g.key)&&(g.preventDefault(),u({direction:Am[g.key],factor:g.shiftKey?4:1}))};return m.jsx("div",{className:Sn(["react-flow__nodesselection","react-flow__container",t]),style:{transform:o},children:m.jsx("div",{ref:d,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:n?void 0:-1,onKeyDown:n?void 0:p,style:{width:i,height:s}})})}const mj=typeof window<"u"?window:void 0,Bae=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function uV({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,paneClickDistance:l,deleteKeyCode:u,selectionKeyCode:d,selectionOnDrag:h,selectionMode:p,onSelectionStart:g,onSelectionEnd:b,multiSelectionKeyCode:v,panActivationKeyCode:S,zoomActivationKeyCode:w,elementsSelectable:k,zoomOnScroll:T,zoomOnPinch:E,panOnScroll:N,panOnScrollSpeed:A,panOnScrollMode:_,zoomOnDoubleClick:j,panOnDrag:R,defaultViewport:I,translateExtent:B,minZoom:U,maxZoom:V,preventScrolling:F,onSelectionContextMenu:L,noWheelClassName:H,noPanClassName:O,disableKeyboardA11y:q,onViewportChange:K,isControlledViewport:te}){const{nodesSelectionActive:z,userSelectionActive:G}=ot(Bae),oe=$d(d,{target:mj}),ae=$d(S,{target:mj}),$=ae||R,Q=ae||N,ee=h&&$!==!0,de=oe||G||ee;return bae({deleteKeyCode:u,multiSelectionKeyCode:v}),m.jsx(wae,{onPaneContextMenu:s,elementsSelectable:k,zoomOnScroll:T,zoomOnPinch:E,panOnScroll:Q,panOnScrollSpeed:A,panOnScrollMode:_,zoomOnDoubleClick:j,panOnDrag:!oe&&$,defaultViewport:I,translateExtent:B,minZoom:U,maxZoom:V,zoomActivationKeyCode:w,preventScrolling:F,noWheelClassName:H,noPanClassName:O,onViewportChange:K,isControlledViewport:te,paneClickDistance:l,children:m.jsxs(Eae,{onSelectionStart:g,onSelectionEnd:b,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,panOnDrag:$,isSelecting:!!de,selectionMode:p,selectionKeyPressed:oe,selectionOnDrag:ee,children:[e,z&&m.jsx(Iae,{onSelectionContextMenu:L,noPanClassName:O,disableKeyboardA11y:q})]})})}uV.displayName="FlowRenderer";const zae=M.memo(uV),Vae=e=>t=>e?y2(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function qae(e){return ot(M.useCallback(Vae(e),[e]),Xt)}const Hae=e=>e.updateNodeInternals;function Fae(){const e=ot(Hae),[t]=M.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(i=>{const s=i.target.getAttribute("data-id");r.set(s,{id:s,nodeElement:i.target,force:!0})}),e(r)}));return M.useEffect(()=>()=>{t?.disconnect()},[t]),t}function Uae({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const i=Ft(),s=M.useRef(null),o=M.useRef(null),l=M.useRef(e.sourcePosition),u=M.useRef(e.targetPosition),d=M.useRef(t),h=n&&!!e.internals.handleBounds;return M.useEffect(()=>{s.current&&!e.hidden&&(!h||o.current!==s.current)&&(o.current&&r?.unobserve(o.current),r?.observe(s.current),o.current=s.current)},[h,e.hidden]),M.useEffect(()=>()=>{o.current&&(r?.unobserve(o.current),o.current=null)},[]),M.useEffect(()=>{if(s.current){const p=d.current!==t,g=l.current!==e.sourcePosition,b=u.current!==e.targetPosition;(p||g||b)&&(d.current=t,l.current=e.sourcePosition,u.current=e.targetPosition,i.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:s.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),s}function $ae({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:i,onContextMenu:s,onDoubleClick:o,nodesDraggable:l,elementsSelectable:u,nodesConnectable:d,nodesFocusable:h,resizeObserver:p,noDragClassName:g,noPanClassName:b,disableKeyboardA11y:v,rfId:S,nodeTypes:w,nodeClickDistance:k,onError:T}){const{node:E,internals:N,isParent:A}=ot(le=>{const xe=le.nodeLookup.get(e),_e=le.parentLookup.has(e);return{node:xe,internals:xe.internals,isParent:_e}},Xt);let _=E.type||"default",j=w?.[_]||pj[_];j===void 0&&(T?.("003",as.error003(_)),_="default",j=w?.default||pj.default);const R=!!(E.draggable||l&&typeof E.draggable>"u"),I=!!(E.selectable||u&&typeof E.selectable>"u"),B=!!(E.connectable||d&&typeof E.connectable>"u"),U=!!(E.focusable||h&&typeof E.focusable>"u"),V=Ft(),F=j8(E),L=Uae({node:E,nodeType:_,hasDimensions:F,resizeObserver:p}),H=aV({nodeRef:L,disabled:E.hidden||!R,noDragClassName:g,handleSelector:E.dragHandle,nodeId:e,isSelectable:I,nodeClickDistance:k}),O=lV();if(E.hidden)return null;const q=Vs(E),K=Lae(E),te=I||R||t||n||r||i,z=n?le=>n(le,{...N.userNode}):void 0,G=r?le=>r(le,{...N.userNode}):void 0,oe=i?le=>i(le,{...N.userNode}):void 0,ae=s?le=>s(le,{...N.userNode}):void 0,$=o?le=>o(le,{...N.userNode}):void 0,Q=le=>{const{selectNodesOnDrag:xe,nodeDragThreshold:_e}=V.getState();I&&(!xe||!R||_e>0)&&Ok({id:e,store:V,nodeRef:L}),t&&t(le,{...N.userNode})},ee=le=>{if(!(P8(le.nativeEvent)||v)){if(C8.includes(le.key)&&I){const xe=le.key==="Escape";Ok({id:e,store:V,unselect:xe,nodeRef:L})}else if(R&&E.selected&&Object.prototype.hasOwnProperty.call(Am,le.key)){le.preventDefault();const{ariaLabelConfig:xe}=V.getState();V.setState({ariaLiveMessage:xe["node.a11yDescription.ariaLiveMessage"]({direction:le.key.replace("Arrow","").toLowerCase(),x:~~N.positionAbsolute.x,y:~~N.positionAbsolute.y})}),O({direction:Am[le.key],factor:le.shiftKey?4:1})}}},de=()=>{if(v||!L.current?.matches(":focus-visible"))return;const{transform:le,width:xe,height:_e,autoPanOnNodeFocus:Be,setCenter:Pe}=V.getState();if(!Be)return;y2(new Map([[e,E]]),{x:0,y:0,width:xe,height:_e},le,!0).length>0||Pe(E.position.x+q.width/2,E.position.y+q.height/2,{zoom:le[2]})};return m.jsx("div",{className:Sn(["react-flow__node",`react-flow__node-${_}`,{[b]:R},E.className,{selected:E.selected,selectable:I,parent:A,draggable:R,dragging:H}]),ref:L,style:{zIndex:N.z,transform:`translate(${N.positionAbsolute.x}px,${N.positionAbsolute.y}px)`,pointerEvents:te?"all":"none",visibility:F?"visible":"hidden",...E.style,...K},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:z,onMouseMove:G,onMouseLeave:oe,onContextMenu:ae,onClick:Q,onDoubleClick:$,onKeyDown:U?ee:void 0,tabIndex:U?0:void 0,onFocus:U?de:void 0,role:E.ariaRole??(U?"group":void 0),"aria-roledescription":"node","aria-describedby":v?void 0:`${J8}-${S}`,"aria-label":E.ariaLabel,...E.domAttributes,children:m.jsx(Tae,{value:e,children:m.jsx(j,{id:e,data:E.data,type:_,positionAbsoluteX:N.positionAbsolute.x,positionAbsoluteY:N.positionAbsolute.y,selected:E.selected??!1,selectable:I,draggable:R,deletable:E.deletable??!0,isConnectable:B,sourcePosition:E.sourcePosition,targetPosition:E.targetPosition,dragging:H,dragHandle:E.dragHandle,zIndex:N.z,parentId:E.parentId,...q})})})}const Gae=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function dV(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,onError:s}=ot(Gae,Xt),o=qae(e.onlyRenderVisibleElements),l=Fae();return m.jsx("div",{className:"react-flow__nodes",style:bg,children:o.map(u=>m.jsx($ae,{id:u,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:l,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,nodeClickDistance:e.nodeClickDistance,onError:s},u))})}dV.displayName="NodeRenderer";const Wae=M.memo(dV);function Kae(e){return ot(M.useCallback(n=>{if(!e)return n.edges.map(i=>i.id);const r=[];if(n.width&&n.height)for(const i of n.edges){const s=n.nodeLookup.get(i.source),o=n.nodeLookup.get(i.target);s&&o&&Qse({sourceNode:s,targetNode:o,width:n.width,height:n.height,transform:n.transform})&&r.push(i.id)}return r},[e]),Xt)}const Yae=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e}};return m.jsx("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},Xae=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e,fill:e}};return m.jsx("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},gj={[Em.Arrow]:Yae,[Em.ArrowClosed]:Xae};function Zae(e){const t=Ft();return M.useMemo(()=>Object.prototype.hasOwnProperty.call(gj,e)?gj[e]:(t.getState().onError?.("009",as.error009(e)),null),[e])}const Qae=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:s="strokeWidth",strokeWidth:o,orient:l="auto-start-reverse"})=>{const u=Zae(t);return u?m.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:l,refX:"0",refY:"0",children:m.jsx(u,{color:n,strokeWidth:o})}):null},fV=({defaultColor:e,rfId:t})=>{const n=ot(s=>s.edges),r=ot(s=>s.defaultEdgeOptions),i=M.useMemo(()=>soe(n,{id:t,defaultColor:e,defaultMarkerStart:r?.markerStart,defaultMarkerEnd:r?.markerEnd}),[n,r,t,e]);return i.length?m.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:m.jsx("defs",{children:i.map(s=>m.jsx(Qae,{id:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient},s.id))})}):null};fV.displayName="MarkerDefinitions";var Jae=M.memo(fV);function hV({x:e,y:t,label:n,labelStyle:r,labelShowBg:i=!0,labelBgStyle:s,labelBgPadding:o=[2,4],labelBgBorderRadius:l=2,children:u,className:d,...h}){const[p,g]=M.useState({x:1,y:0,width:0,height:0}),b=Sn(["react-flow__edge-textwrapper",d]),v=M.useRef(null);return M.useEffect(()=>{if(v.current){const S=v.current.getBBox();g({x:S.x,y:S.y,width:S.width,height:S.height})}},[n]),n?m.jsxs("g",{transform:`translate(${e-p.width/2} ${t-p.height/2})`,className:b,visibility:p.width?"visible":"hidden",...h,children:[i&&m.jsx("rect",{width:p.width+2*o[0],x:-o[0],y:-o[1],height:p.height+2*o[1],className:"react-flow__edge-textbg",style:s,rx:l,ry:l}),m.jsx("text",{className:"react-flow__edge-text",y:p.height/2,dy:"0.3em",ref:v,style:r,children:n}),u]}):null}hV.displayName="EdgeText";const ele=M.memo(hV);function xg({path:e,labelX:t,labelY:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u,interactionWidth:d=20,...h}){return m.jsxs(m.Fragment,{children:[m.jsx("path",{...h,d:e,fill:"none",className:Sn(["react-flow__edge-path",h.className])}),d?m.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:d,className:"react-flow__edge-interaction"}):null,r&&ji(t)&&ji(n)?m.jsx(ele,{x:t,y:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:u}):null]})}function yj({pos:e,x1:t,y1:n,x2:r,y2:i}){return e===Ae.Left||e===Ae.Right?[.5*(t+r),n]:[t,.5*(n+i)]}function pV({sourceX:e,sourceY:t,sourcePosition:n=Ae.Bottom,targetX:r,targetY:i,targetPosition:s=Ae.Top}){const[o,l]=yj({pos:n,x1:e,y1:t,x2:r,y2:i}),[u,d]=yj({pos:s,x1:r,y1:i,x2:e,y2:t}),[h,p,g,b]=B8({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:o,sourceControlY:l,targetControlX:u,targetControlY:d});return[`M${e},${t} C${o},${l} ${u},${d} ${r},${i}`,h,p,g,b]}function mV(e){return M.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o,targetPosition:l,label:u,labelStyle:d,labelShowBg:h,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:b,style:v,markerEnd:S,markerStart:w,interactionWidth:k})=>{const[T,E,N]=pV({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:l}),A=e.isInternal?void 0:t;return m.jsx(xg,{id:A,path:T,labelX:E,labelY:N,label:u,labelStyle:d,labelShowBg:h,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:b,style:v,markerEnd:S,markerStart:w,interactionWidth:k})})}const tle=mV({isInternal:!1}),gV=mV({isInternal:!0});tle.displayName="SimpleBezierEdge";gV.displayName="SimpleBezierEdgeInternal";function yV(e){return M.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p,style:g,sourcePosition:b=Ae.Bottom,targetPosition:v=Ae.Top,markerEnd:S,markerStart:w,pathOptions:k,interactionWidth:T})=>{const[E,N,A]=_k({sourceX:n,sourceY:r,sourcePosition:b,targetX:i,targetY:s,targetPosition:v,borderRadius:k?.borderRadius,offset:k?.offset,stepPosition:k?.stepPosition}),_=e.isInternal?void 0:t;return m.jsx(xg,{id:_,path:E,labelX:N,labelY:A,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p,style:g,markerEnd:S,markerStart:w,interactionWidth:T})})}const bV=yV({isInternal:!1}),xV=yV({isInternal:!0});bV.displayName="SmoothStepEdge";xV.displayName="SmoothStepEdgeInternal";function vV(e){return M.memo(({id:t,...n})=>{const r=e.isInternal?void 0:t;return m.jsx(bV,{...n,id:r,pathOptions:M.useMemo(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}const nle=vV({isInternal:!1}),wV=vV({isInternal:!0});nle.displayName="StepEdge";wV.displayName="StepEdgeInternal";function SV(e){return M.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p,style:g,markerEnd:b,markerStart:v,interactionWidth:S})=>{const[w,k,T]=V8({sourceX:n,sourceY:r,targetX:i,targetY:s}),E=e.isInternal?void 0:t;return m.jsx(xg,{id:E,path:w,labelX:k,labelY:T,label:o,labelStyle:l,labelShowBg:u,labelBgStyle:d,labelBgPadding:h,labelBgBorderRadius:p,style:g,markerEnd:b,markerStart:v,interactionWidth:S})})}const rle=SV({isInternal:!1}),CV=SV({isInternal:!0});rle.displayName="StraightEdge";CV.displayName="StraightEdgeInternal";function kV(e){return M.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o=Ae.Bottom,targetPosition:l=Ae.Top,label:u,labelStyle:d,labelShowBg:h,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:b,style:v,markerEnd:S,markerStart:w,pathOptions:k,interactionWidth:T})=>{const[E,N,A]=hg({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:l,curvature:k?.curvature}),_=e.isInternal?void 0:t;return m.jsx(xg,{id:_,path:E,labelX:N,labelY:A,label:u,labelStyle:d,labelShowBg:h,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:b,style:v,markerEnd:S,markerStart:w,interactionWidth:T})})}const ile=kV({isInternal:!1}),EV=kV({isInternal:!0});ile.displayName="BezierEdge";EV.displayName="BezierEdgeInternal";const bj={default:EV,straight:CV,step:wV,smoothstep:xV,simplebezier:gV},xj={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},sle=(e,t,n)=>n===Ae.Left?e-t:n===Ae.Right?e+t:e,ole=(e,t,n)=>n===Ae.Top?e-t:n===Ae.Bottom?e+t:e,vj="react-flow__edgeupdater";function wj({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:s,onMouseOut:o,type:l}){return m.jsx("circle",{onMouseDown:i,onMouseEnter:s,onMouseOut:o,className:Sn([vj,`${vj}-${l}`]),cx:sle(t,r,e),cy:ole(n,r,e),r,stroke:"transparent",fill:"transparent"})}function ale({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:i,targetX:s,targetY:o,sourcePosition:l,targetPosition:u,onReconnect:d,onReconnectStart:h,onReconnectEnd:p,setReconnecting:g,setUpdateHover:b}){const v=Ft(),S=(N,A)=>{if(N.button!==0)return;const{autoPanOnConnect:_,domNode:j,isValidConnection:R,connectionMode:I,connectionRadius:B,lib:U,onConnectStart:V,onConnectEnd:F,cancelConnection:L,nodeLookup:H,rfId:O,panBy:q,updateConnection:K}=v.getState(),te=A.type==="target",z=(ae,$)=>{g(!1),p?.(ae,n,A.type,$)},G=ae=>d?.(n,ae),oe=(ae,$)=>{g(!0),h?.(N,n,A.type),V?.(ae,$)};jk.onPointerDown(N.nativeEvent,{autoPanOnConnect:_,connectionMode:I,connectionRadius:B,domNode:j,handleId:A.id,nodeId:A.nodeId,nodeLookup:H,isTarget:te,edgeUpdaterType:A.type,lib:U,flowId:O,cancelConnection:L,panBy:q,isValidConnection:R,onConnect:G,onConnectStart:oe,onConnectEnd:F,onReconnectEnd:z,updateConnection:K,getTransform:()=>v.getState().transform,getFromHandle:()=>v.getState().connection.fromHandle,dragThreshold:v.getState().connectionDragThreshold,handleDomNode:N.currentTarget})},w=N=>S(N,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),k=N=>S(N,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),T=()=>b(!0),E=()=>b(!1);return m.jsxs(m.Fragment,{children:[(e===!0||e==="source")&&m.jsx(wj,{position:l,centerX:r,centerY:i,radius:t,onMouseDown:w,onMouseEnter:T,onMouseOut:E,type:"source"}),(e===!0||e==="target")&&m.jsx(wj,{position:u,centerX:s,centerY:o,radius:t,onMouseDown:k,onMouseEnter:T,onMouseOut:E,type:"target"})]})}function lle({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:i,onDoubleClick:s,onContextMenu:o,onMouseEnter:l,onMouseMove:u,onMouseLeave:d,reconnectRadius:h,onReconnect:p,onReconnectStart:g,onReconnectEnd:b,rfId:v,edgeTypes:S,noPanClassName:w,onError:k,disableKeyboardA11y:T}){let E=ot(Pe=>Pe.edgeLookup.get(e));const N=ot(Pe=>Pe.defaultEdgeOptions);E=N?{...N,...E}:E;let A=E.type||"default",_=S?.[A]||bj[A];_===void 0&&(k?.("011",as.error011(A)),A="default",_=S?.default||bj.default);const j=!!(E.focusable||t&&typeof E.focusable>"u"),R=typeof p<"u"&&(E.reconnectable||n&&typeof E.reconnectable>"u"),I=!!(E.selectable||r&&typeof E.selectable>"u"),B=M.useRef(null),[U,V]=M.useState(!1),[F,L]=M.useState(!1),H=Ft(),{zIndex:O,sourceX:q,sourceY:K,targetX:te,targetY:z,sourcePosition:G,targetPosition:oe}=ot(M.useCallback(Pe=>{const Te=Pe.nodeLookup.get(E.source),ke=Pe.nodeLookup.get(E.target);if(!Te||!ke)return{zIndex:E.zIndex,...xj};const Ee=ioe({id:e,sourceNode:Te,targetNode:ke,sourceHandle:E.sourceHandle||null,targetHandle:E.targetHandle||null,connectionMode:Pe.connectionMode,onError:k});return{zIndex:Zse({selected:E.selected,zIndex:E.zIndex,sourceNode:Te,targetNode:ke,elevateOnSelect:Pe.elevateEdgesOnSelect}),...Ee||xj}},[E.source,E.target,E.sourceHandle,E.targetHandle,E.selected,E.zIndex]),Xt),ae=M.useMemo(()=>E.markerStart?`url('#${Dk(E.markerStart,v)}')`:void 0,[E.markerStart,v]),$=M.useMemo(()=>E.markerEnd?`url('#${Dk(E.markerEnd,v)}')`:void 0,[E.markerEnd,v]);if(E.hidden||q===null||K===null||te===null||z===null)return null;const Q=Pe=>{const{addSelectedEdges:Te,unselectNodesAndEdges:ke,multiSelectionActive:Ee}=H.getState();I&&(H.setState({nodesSelectionActive:!1}),E.selected&&Ee?(ke({nodes:[],edges:[E]}),B.current?.blur()):Te([e])),i&&i(Pe,E)},ee=s?Pe=>{s(Pe,{...E})}:void 0,de=o?Pe=>{o(Pe,{...E})}:void 0,le=l?Pe=>{l(Pe,{...E})}:void 0,xe=u?Pe=>{u(Pe,{...E})}:void 0,_e=d?Pe=>{d(Pe,{...E})}:void 0,Be=Pe=>{if(!T&&C8.includes(Pe.key)&&I){const{unselectNodesAndEdges:Te,addSelectedEdges:ke}=H.getState();Pe.key==="Escape"?(B.current?.blur(),Te({edges:[E]})):ke([e])}};return m.jsx("svg",{style:{zIndex:O},children:m.jsxs("g",{className:Sn(["react-flow__edge",`react-flow__edge-${A}`,E.className,w,{selected:E.selected,animated:E.animated,inactive:!I&&!i,updating:U,selectable:I}]),onClick:Q,onDoubleClick:ee,onContextMenu:de,onMouseEnter:le,onMouseMove:xe,onMouseLeave:_e,onKeyDown:j?Be:void 0,tabIndex:j?0:void 0,role:E.ariaRole??(j?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":E.ariaLabel===null?void 0:E.ariaLabel||`Edge from ${E.source} to ${E.target}`,"aria-describedby":j?`${eV}-${v}`:void 0,ref:B,...E.domAttributes,children:[!F&&m.jsx(_,{id:e,source:E.source,target:E.target,type:E.type,selected:E.selected,animated:E.animated,selectable:I,deletable:E.deletable??!0,label:E.label,labelStyle:E.labelStyle,labelShowBg:E.labelShowBg,labelBgStyle:E.labelBgStyle,labelBgPadding:E.labelBgPadding,labelBgBorderRadius:E.labelBgBorderRadius,sourceX:q,sourceY:K,targetX:te,targetY:z,sourcePosition:G,targetPosition:oe,data:E.data,style:E.style,sourceHandleId:E.sourceHandle,targetHandleId:E.targetHandle,markerStart:ae,markerEnd:$,pathOptions:"pathOptions"in E?E.pathOptions:void 0,interactionWidth:E.interactionWidth}),R&&m.jsx(ale,{edge:E,isReconnectable:R,reconnectRadius:h,onReconnect:p,onReconnectStart:g,onReconnectEnd:b,sourceX:q,sourceY:K,targetX:te,targetY:z,sourcePosition:G,targetPosition:oe,setUpdateHover:V,setReconnecting:L})]})})}const cle=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function NV({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:i,onReconnect:s,onEdgeContextMenu:o,onEdgeMouseEnter:l,onEdgeMouseMove:u,onEdgeMouseLeave:d,onEdgeClick:h,reconnectRadius:p,onEdgeDoubleClick:g,onReconnectStart:b,onReconnectEnd:v,disableKeyboardA11y:S}){const{edgesFocusable:w,edgesReconnectable:k,elementsSelectable:T,onError:E}=ot(cle,Xt),N=Kae(t);return m.jsxs("div",{className:"react-flow__edges",children:[m.jsx(Jae,{defaultColor:e,rfId:n}),N.map(A=>m.jsx(lle,{id:A,edgesFocusable:w,edgesReconnectable:k,elementsSelectable:T,noPanClassName:i,onReconnect:s,onContextMenu:o,onMouseEnter:l,onMouseMove:u,onMouseLeave:d,onClick:h,reconnectRadius:p,onDoubleClick:g,onReconnectStart:b,onReconnectEnd:v,rfId:n,onError:E,edgeTypes:r,disableKeyboardA11y:S},A))]})}NV.displayName="EdgeRenderer";const ule=M.memo(NV),dle=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function fle({children:e}){const t=ot(dle);return m.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function hle(e){const t=Gd(),n=M.useRef(!1);M.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const ple=e=>e.panZoom?.syncViewport;function mle(e){const t=ot(ple),n=Ft();return M.useEffect(()=>{e&&(t?.(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function gle(e){return e.connection.inProgress?{...e.connection,to:hf(e.connection.to,e.transform)}:{...e.connection}}function yle(e){return gle}function ble(e){const t=yle();return ot(t,Xt)}const xle=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function vle({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:i,width:s,height:o,isValid:l,inProgress:u}=ot(xle,Xt);return!(s&&i&&u)?null:m.jsx("svg",{style:e,width:s,height:o,className:"react-flow__connectionline react-flow__container",children:m.jsx("g",{className:Sn(["react-flow__connection",N8(l)]),children:m.jsx(TV,{style:t,type:n,CustomComponent:r,isValid:l})})})}const TV=({style:e,type:t=Ao.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:i,from:s,fromNode:o,fromHandle:l,fromPosition:u,to:d,toNode:h,toHandle:p,toPosition:g}=ble();if(!i)return;if(n)return m.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:o,fromHandle:l,fromX:s.x,fromY:s.y,toX:d.x,toY:d.y,fromPosition:u,toPosition:g,connectionStatus:N8(r),toNode:h,toHandle:p});let b="";const v={sourceX:s.x,sourceY:s.y,sourcePosition:u,targetX:d.x,targetY:d.y,targetPosition:g};switch(t){case Ao.Bezier:[b]=hg(v);break;case Ao.SimpleBezier:[b]=pV(v);break;case Ao.Step:[b]=_k({...v,borderRadius:0});break;case Ao.SmoothStep:[b]=_k(v);break;default:[b]=V8(v)}return m.jsx("path",{d:b,fill:"none",className:"react-flow__connection-path",style:e})};TV.displayName="ConnectionLine";const wle={};function Sj(e=wle){M.useRef(e),Ft(),M.useEffect(()=>{},[e])}function Sle(){Ft(),M.useRef(!1),M.useEffect(()=>{},[])}function AV({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:i,onNodeDoubleClick:s,onEdgeDoubleClick:o,onNodeMouseEnter:l,onNodeMouseMove:u,onNodeMouseLeave:d,onNodeContextMenu:h,onSelectionContextMenu:p,onSelectionStart:g,onSelectionEnd:b,connectionLineType:v,connectionLineStyle:S,connectionLineComponent:w,connectionLineContainerStyle:k,selectionKeyCode:T,selectionOnDrag:E,selectionMode:N,multiSelectionKeyCode:A,panActivationKeyCode:_,zoomActivationKeyCode:j,deleteKeyCode:R,onlyRenderVisibleElements:I,elementsSelectable:B,defaultViewport:U,translateExtent:V,minZoom:F,maxZoom:L,preventScrolling:H,defaultMarkerColor:O,zoomOnScroll:q,zoomOnPinch:K,panOnScroll:te,panOnScrollSpeed:z,panOnScrollMode:G,zoomOnDoubleClick:oe,panOnDrag:ae,onPaneClick:$,onPaneMouseEnter:Q,onPaneMouseMove:ee,onPaneMouseLeave:de,onPaneScroll:le,onPaneContextMenu:xe,paneClickDistance:_e,nodeClickDistance:Be,onEdgeContextMenu:Pe,onEdgeMouseEnter:Te,onEdgeMouseMove:ke,onEdgeMouseLeave:Ee,reconnectRadius:ht,onReconnect:Oe,onReconnectStart:mt,onReconnectEnd:bt,noDragClassName:$t,noWheelClassName:un,noPanClassName:zt,disableKeyboardA11y:Nt,nodeExtent:kn,rfId:dn,viewport:Ot,onViewportChange:ut}){return Sj(e),Sj(t),Sle(),hle(n),mle(Ot),m.jsx(zae,{onPaneClick:$,onPaneMouseEnter:Q,onPaneMouseMove:ee,onPaneMouseLeave:de,onPaneContextMenu:xe,onPaneScroll:le,paneClickDistance:_e,deleteKeyCode:R,selectionKeyCode:T,selectionOnDrag:E,selectionMode:N,onSelectionStart:g,onSelectionEnd:b,multiSelectionKeyCode:A,panActivationKeyCode:_,zoomActivationKeyCode:j,elementsSelectable:B,zoomOnScroll:q,zoomOnPinch:K,zoomOnDoubleClick:oe,panOnScroll:te,panOnScrollSpeed:z,panOnScrollMode:G,panOnDrag:ae,defaultViewport:U,translateExtent:V,minZoom:F,maxZoom:L,onSelectionContextMenu:p,preventScrolling:H,noDragClassName:$t,noWheelClassName:un,noPanClassName:zt,disableKeyboardA11y:Nt,onViewportChange:ut,isControlledViewport:!!Ot,children:m.jsxs(fle,{children:[m.jsx(ule,{edgeTypes:t,onEdgeClick:i,onEdgeDoubleClick:o,onReconnect:Oe,onReconnectStart:mt,onReconnectEnd:bt,onlyRenderVisibleElements:I,onEdgeContextMenu:Pe,onEdgeMouseEnter:Te,onEdgeMouseMove:ke,onEdgeMouseLeave:Ee,reconnectRadius:ht,defaultMarkerColor:O,noPanClassName:zt,disableKeyboardA11y:Nt,rfId:dn}),m.jsx(vle,{style:S,type:v,component:w,containerStyle:k}),m.jsx("div",{className:"react-flow__edgelabel-renderer"}),m.jsx(Wae,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:s,onNodeMouseEnter:l,onNodeMouseMove:u,onNodeMouseLeave:d,onNodeContextMenu:h,nodeClickDistance:Be,onlyRenderVisibleElements:I,noPanClassName:zt,noDragClassName:$t,disableKeyboardA11y:Nt,nodeExtent:kn,rfId:dn}),m.jsx("div",{className:"react-flow__viewport-portal"})]})})}AV.displayName="GraphView";const Cle=M.memo(AV),Cj=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,fitViewOptions:l,minZoom:u=.5,maxZoom:d=2,nodeOrigin:h,nodeExtent:p}={})=>{const g=new Map,b=new Map,v=new Map,S=new Map,w=r??t??[],k=n??e??[],T=h??[0,0],E=p??Vd;H8(v,S,w);const N=Rk(k,g,b,{nodeOrigin:T,nodeExtent:E,elevateNodesOnSelect:!1});let A=[0,0,1];if(o&&i&&s){const _=df(g,{filter:B=>!!((B.width||B.initialWidth)&&(B.height||B.initialHeight))}),{x:j,y:R,zoom:I}=fg(_,i,s,u,d,l?.padding??.1);A=[j,R,I]}return{rfId:"1",width:0,height:0,transform:A,nodes:k,nodesInitialized:N,nodeLookup:g,parentLookup:b,edges:w,edgeLookup:S,connectionLookup:v,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:u,maxZoom:d,translateExtent:Vd,nodeExtent:E,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Ga.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:T,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:o??!1,fitViewOptions:l,fitViewResolver:null,connection:{...E8},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:$se,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:k8}},kle=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,fitViewOptions:l,minZoom:u,maxZoom:d,nodeOrigin:h,nodeExtent:p})=>Uoe((g,b)=>{async function v(){const{nodeLookup:S,panZoom:w,fitViewOptions:k,fitViewResolver:T,width:E,height:N,minZoom:A,maxZoom:_}=b();w&&(await Fse({nodes:S,width:E,height:N,panZoom:w,minZoom:A,maxZoom:_},k),T?.resolve(!0),g({fitViewResolver:null}))}return{...Cj({nodes:e,edges:t,width:i,height:s,fitView:o,fitViewOptions:l,minZoom:u,maxZoom:d,nodeOrigin:h,nodeExtent:p,defaultNodes:n,defaultEdges:r}),setNodes:S=>{const{nodeLookup:w,parentLookup:k,nodeOrigin:T,elevateNodesOnSelect:E,fitViewQueued:N}=b(),A=Rk(S,w,k,{nodeOrigin:T,nodeExtent:p,elevateNodesOnSelect:E,checkEquality:!0});N&&A?(v(),g({nodes:S,nodesInitialized:A,fitViewQueued:!1,fitViewOptions:void 0})):g({nodes:S,nodesInitialized:A})},setEdges:S=>{const{connectionLookup:w,edgeLookup:k}=b();H8(w,k,S),g({edges:S})},setDefaultNodesAndEdges:(S,w)=>{if(S){const{setNodes:k}=b();k(S),g({hasDefaultNodes:!0})}if(w){const{setEdges:k}=b();k(w),g({hasDefaultEdges:!0})}},updateNodeInternals:S=>{const{triggerNodeChanges:w,nodeLookup:k,parentLookup:T,domNode:E,nodeOrigin:N,nodeExtent:A,debug:_,fitViewQueued:j}=b(),{changes:R,updatedInternals:I}=uoe(S,k,T,E,N,A);I&&(aoe(k,T,{nodeOrigin:N,nodeExtent:A}),j?(v(),g({fitViewQueued:!1,fitViewOptions:void 0})):g({}),R?.length>0&&(_&&console.log("React Flow: trigger node changes",R),w?.(R)))},updateNodePositions:(S,w=!1)=>{const k=[],T=[],{nodeLookup:E,triggerNodeChanges:N}=b();for(const[A,_]of S){const j=E.get(A),R=!!(j?.expandParent&&j?.parentId&&_?.position),I={id:A,type:"position",position:R?{x:Math.max(0,_.position.x),y:Math.max(0,_.position.y)}:_.position,dragging:w};R&&j.parentId&&k.push({id:A,parentId:j.parentId,rect:{..._.internals.positionAbsolute,width:_.measured.width??0,height:_.measured.height??0}}),T.push(I)}if(k.length>0){const{parentLookup:A,nodeOrigin:_}=b(),j=S2(k,E,A,_);T.push(...j)}N(T)},triggerNodeChanges:S=>{const{onNodesChange:w,setNodes:k,nodes:T,hasDefaultNodes:E,debug:N}=b();if(S?.length){if(E){const A=rV(S,T);k(A)}N&&console.log("React Flow: trigger node changes",S),w?.(S)}},triggerEdgeChanges:S=>{const{onEdgesChange:w,setEdges:k,edges:T,hasDefaultEdges:E,debug:N}=b();if(S?.length){if(E){const A=iV(S,T);k(A)}N&&console.log("React Flow: trigger edge changes",S),w?.(S)}},addSelectedNodes:S=>{const{multiSelectionActive:w,edgeLookup:k,nodeLookup:T,triggerNodeChanges:E,triggerEdgeChanges:N}=b();if(w){const A=S.map(_=>xa(_,!0));E(A);return}E(rc(T,new Set([...S]),!0)),N(rc(k))},addSelectedEdges:S=>{const{multiSelectionActive:w,edgeLookup:k,nodeLookup:T,triggerNodeChanges:E,triggerEdgeChanges:N}=b();if(w){const A=S.map(_=>xa(_,!0));N(A);return}N(rc(k,new Set([...S]))),E(rc(T,new Set,!0))},unselectNodesAndEdges:({nodes:S,edges:w}={})=>{const{edges:k,nodes:T,nodeLookup:E,triggerNodeChanges:N,triggerEdgeChanges:A}=b(),_=S||T,j=w||k,R=_.map(B=>{const U=E.get(B.id);return U&&(U.selected=!1),xa(B.id,!1)}),I=j.map(B=>xa(B.id,!1));N(R),A(I)},setMinZoom:S=>{const{panZoom:w,maxZoom:k}=b();w?.setScaleExtent([S,k]),g({minZoom:S})},setMaxZoom:S=>{const{panZoom:w,minZoom:k}=b();w?.setScaleExtent([k,S]),g({maxZoom:S})},setTranslateExtent:S=>{b().panZoom?.setTranslateExtent(S),g({translateExtent:S})},setPaneClickDistance:S=>{b().panZoom?.setClickDistance(S)},resetSelectedElements:()=>{const{edges:S,nodes:w,triggerNodeChanges:k,triggerEdgeChanges:T,elementsSelectable:E}=b();if(!E)return;const N=w.reduce((_,j)=>j.selected?[..._,xa(j.id,!1)]:_,[]),A=S.reduce((_,j)=>j.selected?[..._,xa(j.id,!1)]:_,[]);k(N),T(A)},setNodeExtent:S=>{const{nodes:w,nodeLookup:k,parentLookup:T,nodeOrigin:E,elevateNodesOnSelect:N,nodeExtent:A}=b();S[0][0]===A[0][0]&&S[0][1]===A[0][1]&&S[1][0]===A[1][0]&&S[1][1]===A[1][1]||(Rk(w,k,T,{nodeOrigin:E,nodeExtent:S,elevateNodesOnSelect:N,checkEquality:!1}),g({nodeExtent:S}))},panBy:S=>{const{transform:w,width:k,height:T,panZoom:E,translateExtent:N}=b();return doe({delta:S,panZoom:E,transform:w,translateExtent:N,width:k,height:T})},setCenter:async(S,w,k)=>{const{width:T,height:E,maxZoom:N,panZoom:A}=b();if(!A)return Promise.resolve(!1);const _=typeof k?.zoom<"u"?k.zoom:N;return await A.setViewport({x:T/2-S*_,y:E/2-w*_,zoom:_},{duration:k?.duration,ease:k?.ease,interpolate:k?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{g({connection:{...E8}})},updateConnection:S=>{g({connection:S})},reset:()=>g({...Cj()})}},Object.is);function MV({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:i,initialHeight:s,initialMinZoom:o,initialMaxZoom:l,initialFitViewOptions:u,fitView:d,nodeOrigin:h,nodeExtent:p,children:g}){const[b]=M.useState(()=>kle({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:d,minZoom:o,maxZoom:l,fitViewOptions:u,nodeOrigin:h,nodeExtent:p}));return m.jsx($oe,{value:b,children:m.jsx(pae,{children:g})})}function Ele({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:i,width:s,height:o,fitView:l,fitViewOptions:u,minZoom:d,maxZoom:h,nodeOrigin:p,nodeExtent:g}){return M.useContext(gg)?m.jsx(m.Fragment,{children:e}):m.jsx(MV,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:i,initialWidth:s,initialHeight:o,fitView:l,initialFitViewOptions:u,initialMinZoom:d,initialMaxZoom:h,nodeOrigin:p,nodeExtent:g,children:e})}const Nle={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function Tle({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:s,edgeTypes:o,onNodeClick:l,onEdgeClick:u,onInit:d,onMove:h,onMoveStart:p,onMoveEnd:g,onConnect:b,onConnectStart:v,onConnectEnd:S,onClickConnectStart:w,onClickConnectEnd:k,onNodeMouseEnter:T,onNodeMouseMove:E,onNodeMouseLeave:N,onNodeContextMenu:A,onNodeDoubleClick:_,onNodeDragStart:j,onNodeDrag:R,onNodeDragStop:I,onNodesDelete:B,onEdgesDelete:U,onDelete:V,onSelectionChange:F,onSelectionDragStart:L,onSelectionDrag:H,onSelectionDragStop:O,onSelectionContextMenu:q,onSelectionStart:K,onSelectionEnd:te,onBeforeDelete:z,connectionMode:G,connectionLineType:oe=Ao.Bezier,connectionLineStyle:ae,connectionLineComponent:$,connectionLineContainerStyle:Q,deleteKeyCode:ee="Backspace",selectionKeyCode:de="Shift",selectionOnDrag:le=!1,selectionMode:xe=qd.Full,panActivationKeyCode:_e="Space",multiSelectionKeyCode:Be=Fd()?"Meta":"Control",zoomActivationKeyCode:Pe=Fd()?"Meta":"Control",snapToGrid:Te,snapGrid:ke,onlyRenderVisibleElements:Ee=!1,selectNodesOnDrag:ht,nodesDraggable:Oe,autoPanOnNodeFocus:mt,nodesConnectable:bt,nodesFocusable:$t,nodeOrigin:un=tV,edgesFocusable:zt,edgesReconnectable:Nt,elementsSelectable:kn=!0,defaultViewport:dn=iae,minZoom:Ot=.5,maxZoom:ut=2,translateExtent:Tt=Vd,preventScrolling:At=!0,nodeExtent:sr,defaultMarkerColor:Ar="#b1b1b7",zoomOnScroll:vi=!0,zoomOnPinch:Zt=!0,panOnScroll:Le=!1,panOnScrollSpeed:Fe=.5,panOnScrollMode:or=Ba.Free,zoomOnDoubleClick:dt=!0,panOnDrag:fn=!0,onPaneClick:Fs,onPaneMouseEnter:wi,onPaneMouseMove:Mr,onPaneMouseLeave:_r,onPaneScroll:ar,onPaneContextMenu:yr,paneClickDistance:Dr=0,nodeClickDistance:xt=0,children:Bn,onReconnect:Us,onReconnectStart:Si,onReconnectEnd:Kn,onEdgeContextMenu:Gt,onEdgeDoubleClick:Lt,onEdgeMouseEnter:br,onEdgeMouseMove:En,onEdgeMouseLeave:Rr,reconnectRadius:Ii=10,onNodesChange:us,onEdgesChange:jr,noDragClassName:Bi="nodrag",noWheelClassName:hn="nowheel",noPanClassName:qe="nopan",fitView:Yn,fitViewOptions:Xn,connectOnClick:Rt,attributionPosition:zi,proOptions:De,defaultEdgeOptions:Z,elevateNodesOnSelect:ge,elevateEdgesOnSelect:Me,disableKeyboardA11y:lt=!1,autoPanOnConnect:Pt,autoPanOnNodeDrag:Mt,autoPanSpeed:Vt,connectionRadius:_n,isValidConnection:pn,onError:Xr,style:It,id:zn,nodeDragThreshold:Vi,connectionDragThreshold:Ko,viewport:il,onViewportChange:sl,width:Zn,height:ol,colorMode:Lc="light",debug:$s,onScroll:qi,ariaLabelConfig:Hi,...Gs},Qn){const Or=zn||"1",Yo=lae(Lc),Ws=M.useCallback(Zr=>{Zr.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),qi?.(Zr)},[qi]);return m.jsx("div",{"data-testid":"rf__wrapper",...Gs,onScroll:Ws,style:{...It,...Nle},ref:Qn,className:Sn(["react-flow",i,Yo]),id:zn,role:"application",children:m.jsxs(Ele,{nodes:e,edges:t,width:Zn,height:ol,fitView:Yn,fitViewOptions:Xn,minZoom:Ot,maxZoom:ut,nodeOrigin:un,nodeExtent:sr,children:[m.jsx(Cle,{onInit:d,onNodeClick:l,onEdgeClick:u,onNodeMouseEnter:T,onNodeMouseMove:E,onNodeMouseLeave:N,onNodeContextMenu:A,onNodeDoubleClick:_,nodeTypes:s,edgeTypes:o,connectionLineType:oe,connectionLineStyle:ae,connectionLineComponent:$,connectionLineContainerStyle:Q,selectionKeyCode:de,selectionOnDrag:le,selectionMode:xe,deleteKeyCode:ee,multiSelectionKeyCode:Be,panActivationKeyCode:_e,zoomActivationKeyCode:Pe,onlyRenderVisibleElements:Ee,defaultViewport:dn,translateExtent:Tt,minZoom:Ot,maxZoom:ut,preventScrolling:At,zoomOnScroll:vi,zoomOnPinch:Zt,zoomOnDoubleClick:dt,panOnScroll:Le,panOnScrollSpeed:Fe,panOnScrollMode:or,panOnDrag:fn,onPaneClick:Fs,onPaneMouseEnter:wi,onPaneMouseMove:Mr,onPaneMouseLeave:_r,onPaneScroll:ar,onPaneContextMenu:yr,paneClickDistance:Dr,nodeClickDistance:xt,onSelectionContextMenu:q,onSelectionStart:K,onSelectionEnd:te,onReconnect:Us,onReconnectStart:Si,onReconnectEnd:Kn,onEdgeContextMenu:Gt,onEdgeDoubleClick:Lt,onEdgeMouseEnter:br,onEdgeMouseMove:En,onEdgeMouseLeave:Rr,reconnectRadius:Ii,defaultMarkerColor:Ar,noDragClassName:Bi,noWheelClassName:hn,noPanClassName:qe,rfId:Or,disableKeyboardA11y:lt,nodeExtent:sr,viewport:il,onViewportChange:sl}),m.jsx(aae,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:b,onConnectStart:v,onConnectEnd:S,onClickConnectStart:w,onClickConnectEnd:k,nodesDraggable:Oe,autoPanOnNodeFocus:mt,nodesConnectable:bt,nodesFocusable:$t,edgesFocusable:zt,edgesReconnectable:Nt,elementsSelectable:kn,elevateNodesOnSelect:ge,elevateEdgesOnSelect:Me,minZoom:Ot,maxZoom:ut,nodeExtent:sr,onNodesChange:us,onEdgesChange:jr,snapToGrid:Te,snapGrid:ke,connectionMode:G,translateExtent:Tt,connectOnClick:Rt,defaultEdgeOptions:Z,fitView:Yn,fitViewOptions:Xn,onNodesDelete:B,onEdgesDelete:U,onDelete:V,onNodeDragStart:j,onNodeDrag:R,onNodeDragStop:I,onSelectionDrag:H,onSelectionDragStart:L,onSelectionDragStop:O,onMove:h,onMoveStart:p,onMoveEnd:g,noPanClassName:qe,nodeOrigin:un,rfId:Or,autoPanOnConnect:Pt,autoPanOnNodeDrag:Mt,autoPanSpeed:Vt,onError:Xr,connectionRadius:_n,isValidConnection:pn,selectNodesOnDrag:ht,nodeDragThreshold:Vi,connectionDragThreshold:Ko,onBeforeDelete:z,paneClickDistance:Dr,debug:$s,ariaLabelConfig:Hi}),m.jsx(rae,{onSelectionChange:F}),Bn,m.jsx(Qoe,{proOptions:De,position:zi}),m.jsx(Zoe,{rfId:Or,disableKeyboardA11y:lt})]})})}var Ale=sV(Tle);function Mle(e){const[t,n]=M.useState(e),r=M.useCallback(i=>n(s=>rV(i,s)),[]);return[t,n,r]}function _le(e){const[t,n]=M.useState(e),r=M.useCallback(i=>n(s=>iV(i,s)),[]);return[t,n,r]}function Dle({dimensions:e,lineWidth:t,variant:n,className:r}){return m.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:Sn(["react-flow__background-pattern",n,r])})}function Rle({radius:e,className:t}){return m.jsx("circle",{cx:e,cy:e,r:e,className:Sn(["react-flow__background-pattern","dots",t])})}var Io;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(Io||(Io={}));const jle={[Io.Dots]:1,[Io.Lines]:1,[Io.Cross]:6},Ole=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function _V({id:e,variant:t=Io.Dots,gap:n=20,size:r,lineWidth:i=1,offset:s=0,color:o,bgColor:l,style:u,className:d,patternClassName:h}){const p=M.useRef(null),{transform:g,patternId:b}=ot(Ole,Xt),v=r||jle[t],S=t===Io.Dots,w=t===Io.Cross,k=Array.isArray(n)?n:[n,n],T=[k[0]*g[2]||1,k[1]*g[2]||1],E=v*g[2],N=Array.isArray(s)?s:[s,s],A=w?[E,E]:T,_=[N[0]*g[2]||1+A[0]/2,N[1]*g[2]||1+A[1]/2],j=`${b}${e||""}`;return m.jsxs("svg",{className:Sn(["react-flow__background",d]),style:{...u,...bg,"--xy-background-color-props":l,"--xy-background-pattern-color-props":o},ref:p,"data-testid":"rf__background",children:[m.jsx("pattern",{id:j,x:g[0]%T[0],y:g[1]%T[1],width:T[0],height:T[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${_[0]},-${_[1]})`,children:S?m.jsx(Rle,{radius:E/2,className:h}):m.jsx(Dle,{dimensions:A,lineWidth:i,variant:t,className:h})}),m.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${j})`})]})}_V.displayName="Background";const Lle=M.memo(_V);function Ple(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:m.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function Ile(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:m.jsx("path",{d:"M0 0h32v4.2H0z"})})}function Ble(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:m.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function zle(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:m.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function Vle(){return m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:m.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function ep({children:e,className:t,...n}){return m.jsx("button",{type:"button",className:Sn(["react-flow__controls-button",t]),...n,children:e})}const qle=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function DV({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:s,onZoomOut:o,onFitView:l,onInteractiveChange:u,className:d,children:h,position:p="bottom-left",orientation:g="vertical","aria-label":b}){const v=Ft(),{isInteractive:S,minZoomReached:w,maxZoomReached:k,ariaLabelConfig:T}=ot(qle,Xt),{zoomIn:E,zoomOut:N,fitView:A}=Gd(),_=()=>{E(),s?.()},j=()=>{N(),o?.()},R=()=>{A(i),l?.()},I=()=>{v.setState({nodesDraggable:!S,nodesConnectable:!S,elementsSelectable:!S}),u?.(!S)},B=g==="horizontal"?"horizontal":"vertical";return m.jsxs(yg,{className:Sn(["react-flow__controls",B,d]),position:p,style:e,"data-testid":"rf__controls","aria-label":b??T["controls.ariaLabel"],children:[t&&m.jsxs(m.Fragment,{children:[m.jsx(ep,{onClick:_,className:"react-flow__controls-zoomin",title:T["controls.zoomIn.ariaLabel"],"aria-label":T["controls.zoomIn.ariaLabel"],disabled:k,children:m.jsx(Ple,{})}),m.jsx(ep,{onClick:j,className:"react-flow__controls-zoomout",title:T["controls.zoomOut.ariaLabel"],"aria-label":T["controls.zoomOut.ariaLabel"],disabled:w,children:m.jsx(Ile,{})})]}),n&&m.jsx(ep,{className:"react-flow__controls-fitview",onClick:R,title:T["controls.fitView.ariaLabel"],"aria-label":T["controls.fitView.ariaLabel"],children:m.jsx(Ble,{})}),r&&m.jsx(ep,{className:"react-flow__controls-interactive",onClick:I,title:T["controls.interactive.ariaLabel"],"aria-label":T["controls.interactive.ariaLabel"],children:S?m.jsx(Vle,{}):m.jsx(zle,{})}),h]})}DV.displayName="Controls";const Hle=M.memo(DV);function Fle({id:e,x:t,y:n,width:r,height:i,style:s,color:o,strokeColor:l,strokeWidth:u,className:d,borderRadius:h,shapeRendering:p,selected:g,onClick:b}){const{background:v,backgroundColor:S}=s||{},w=o||v||S;return m.jsx("rect",{className:Sn(["react-flow__minimap-node",{selected:g},d]),x:t,y:n,rx:h,ry:h,width:r,height:i,style:{fill:w,stroke:l,strokeWidth:u},shapeRendering:p,onClick:b?k=>b(k,e):void 0})}const Ule=M.memo(Fle),$le=e=>e.nodes.map(t=>t.id),Hb=e=>e instanceof Function?e:()=>e;function Gle({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:s=Ule,onClick:o}){const l=ot($le,Xt),u=Hb(t),d=Hb(e),h=Hb(n),p=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return m.jsx(m.Fragment,{children:l.map(g=>m.jsx(Kle,{id:g,nodeColorFunc:u,nodeStrokeColorFunc:d,nodeClassNameFunc:h,nodeBorderRadius:r,nodeStrokeWidth:i,NodeComponent:s,onClick:o,shapeRendering:p},g))})}function Wle({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:i,nodeStrokeWidth:s,shapeRendering:o,NodeComponent:l,onClick:u}){const{node:d,x:h,y:p,width:g,height:b}=ot(v=>{const{internals:S}=v.nodeLookup.get(e),w=S.userNode,{x:k,y:T}=S.positionAbsolute,{width:E,height:N}=Vs(w);return{node:w,x:k,y:T,width:E,height:N}},Xt);return!d||d.hidden||!j8(d)?null:m.jsx(l,{x:h,y:p,width:g,height:b,style:d.style,selected:!!d.selected,className:r(d),color:t(d),borderRadius:i,strokeColor:n(d),strokeWidth:s,shapeRendering:o,onClick:u,id:d.id})}const Kle=M.memo(Wle);var Yle=M.memo(Gle);const Xle=200,Zle=150,Qle=e=>!e.hidden,Jle=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?R8(df(e.nodeLookup,{filter:Qle}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},ece="react-flow__minimap-desc";function RV({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:i="",nodeBorderRadius:s=5,nodeStrokeWidth:o,nodeComponent:l,bgColor:u,maskColor:d,maskStrokeColor:h,maskStrokeWidth:p,position:g="bottom-right",onClick:b,onNodeClick:v,pannable:S=!1,zoomable:w=!1,ariaLabel:k,inversePan:T,zoomStep:E=1,offsetScale:N=5}){const A=Ft(),_=M.useRef(null),{boundingRect:j,viewBB:R,rfId:I,panZoom:B,translateExtent:U,flowWidth:V,flowHeight:F,ariaLabelConfig:L}=ot(Jle,Xt),H=e?.width??Xle,O=e?.height??Zle,q=j.width/H,K=j.height/O,te=Math.max(q,K),z=te*H,G=te*O,oe=N*te,ae=j.x-(z-j.width)/2-oe,$=j.y-(G-j.height)/2-oe,Q=z+oe*2,ee=G+oe*2,de=`${ece}-${I}`,le=M.useRef(0),xe=M.useRef();le.current=te,M.useEffect(()=>{if(_.current&&B)return xe.current=voe({domNode:_.current,panZoom:B,getTransform:()=>A.getState().transform,getViewScale:()=>le.current}),()=>{xe.current?.destroy()}},[B]),M.useEffect(()=>{xe.current?.update({translateExtent:U,width:V,height:F,inversePan:T,pannable:S,zoomStep:E,zoomable:w})},[S,w,T,E,U,V,F]);const _e=b?Te=>{const[ke,Ee]=xe.current?.pointer(Te)||[0,0];b(Te,{x:ke,y:Ee})}:void 0,Be=v?M.useCallback((Te,ke)=>{const Ee=A.getState().nodeLookup.get(ke).internals.userNode;v(Te,Ee)},[]):void 0,Pe=k??L["minimap.ariaLabel"];return m.jsx(yg,{position:g,style:{...e,"--xy-minimap-background-color-props":typeof u=="string"?u:void 0,"--xy-minimap-mask-background-color-props":typeof d=="string"?d:void 0,"--xy-minimap-mask-stroke-color-props":typeof h=="string"?h:void 0,"--xy-minimap-mask-stroke-width-props":typeof p=="number"?p*te:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof o=="number"?o:void 0},className:Sn(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:m.jsxs("svg",{width:H,height:O,viewBox:`${ae} ${$} ${Q} ${ee}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":de,ref:_,onClick:_e,children:[Pe&&m.jsx("title",{id:de,children:Pe}),m.jsx(Yle,{onClick:Be,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:i,nodeStrokeWidth:o,nodeComponent:l}),m.jsx("path",{className:"react-flow__minimap-mask",d:`M${ae-oe},${$-oe}h${Q+oe*2}v${ee+oe*2}h${-Q-oe*2}z
        M${R.x},${R.y}h${R.width}v${R.height}h${-R.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}RV.displayName="MiniMap";const tce=M.memo(RV),nce=e=>t=>e?`${Math.max(1/t.transform[2],1)}`:void 0,rce={[Ka.Line]:"right",[Ka.Handle]:"bottom-right"};function ice({nodeId:e,position:t,variant:n=Ka.Handle,className:r,style:i=void 0,children:s,color:o,minWidth:l=10,minHeight:u=10,maxWidth:d=Number.MAX_VALUE,maxHeight:h=Number.MAX_VALUE,keepAspectRatio:p=!1,resizeDirection:g,autoScale:b=!0,shouldResize:v,onResizeStart:S,onResize:w,onResizeEnd:k}){const T=cV(),E=typeof e=="string"?e:T,N=Ft(),A=M.useRef(null),_=n===Ka.Handle,j=ot(M.useCallback(nce(_&&b),[_,b]),Xt),R=M.useRef(null),I=t??rce[n];M.useEffect(()=>{if(!(!A.current||!E))return R.current||(R.current=Boe({domNode:A.current,nodeId:E,getStoreItems:()=>{const{nodeLookup:U,transform:V,snapGrid:F,snapToGrid:L,nodeOrigin:H,domNode:O}=N.getState();return{nodeLookup:U,transform:V,snapGrid:F,snapToGrid:L,nodeOrigin:H,paneDomNode:O}},onChange:(U,V)=>{const{triggerNodeChanges:F,nodeLookup:L,parentLookup:H,nodeOrigin:O}=N.getState(),q=[],K={x:U.x,y:U.y},te=L.get(E);if(te&&te.expandParent&&te.parentId){const z=te.origin??O,G=U.width??te.measured.width??0,oe=U.height??te.measured.height??0,ae={id:te.id,parentId:te.parentId,rect:{width:G,height:oe,...O8({x:U.x??te.position.x,y:U.y??te.position.y},{width:G,height:oe},te.parentId,L,z)}},$=S2([ae],L,H,O);q.push(...$),K.x=U.x?Math.max(z[0]*G,U.x):void 0,K.y=U.y?Math.max(z[1]*oe,U.y):void 0}if(K.x!==void 0&&K.y!==void 0){const z={id:E,type:"position",position:{...K}};q.push(z)}if(U.width!==void 0&&U.height!==void 0){const G={id:E,type:"dimensions",resizing:!0,setAttributes:g?g==="horizontal"?"width":"height":!0,dimensions:{width:U.width,height:U.height}};q.push(G)}for(const z of V){const G={...z,type:"position"};q.push(G)}F(q)},onEnd:({width:U,height:V})=>{const F={id:E,type:"dimensions",resizing:!1,dimensions:{width:U,height:V}};N.getState().triggerNodeChanges([F])}})),R.current.update({controlPosition:I,boundaries:{minWidth:l,minHeight:u,maxWidth:d,maxHeight:h},keepAspectRatio:p,resizeDirection:g,onResizeStart:S,onResize:w,onResizeEnd:k,shouldResize:v}),()=>{R.current?.destroy()}},[I,l,u,d,h,p,S,w,k,v]);const B=I.split("-");return m.jsx("div",{className:Sn(["react-flow__resize-control","nodrag",...B,n,r]),ref:A,style:{...i,scale:j,...o&&{[_?"backgroundColor":"borderColor"]:o}},children:s})}const kj=M.memo(ice);function sce({nodeId:e,isVisible:t=!0,handleClassName:n,handleStyle:r,lineClassName:i,lineStyle:s,color:o,minWidth:l=10,minHeight:u=10,maxWidth:d=Number.MAX_VALUE,maxHeight:h=Number.MAX_VALUE,keepAspectRatio:p=!1,autoScale:g=!0,shouldResize:b,onResizeStart:v,onResize:S,onResizeEnd:w}){return t?m.jsxs(m.Fragment,{children:[Doe.map(k=>m.jsx(kj,{className:i,style:s,nodeId:e,position:k,variant:Ka.Line,color:o,minWidth:l,minHeight:u,maxWidth:d,maxHeight:h,onResizeStart:v,keepAspectRatio:p,autoScale:g,shouldResize:b,onResize:S,onResizeEnd:w},k)),_oe.map(k=>m.jsx(kj,{className:n,style:r,nodeId:e,position:k,color:o,minWidth:l,minHeight:u,maxWidth:d,maxHeight:h,onResizeStart:v,keepAspectRatio:p,autoScale:g,shouldResize:b,onResize:S,onResizeEnd:w},k))]}):null}function oce(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(i),t&&(r.href=t),i.href=e,i.href}const ace=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function Bo(e){const t=[];for(let n=0,r=e.length;n<r;n++)t.push(e[n]);return t}let Fl=null;function jV(e={}){return Fl||(e.includeStyleProperties?(Fl=e.includeStyleProperties,Fl):(Fl=Bo(window.getComputedStyle(document.documentElement)),Fl))}function Mm(e,t){const r=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return r?parseFloat(r.replace("px","")):0}function lce(e){const t=Mm(e,"border-left-width"),n=Mm(e,"border-right-width");return e.clientWidth+t+n}function cce(e){const t=Mm(e,"border-top-width"),n=Mm(e,"border-bottom-width");return e.clientHeight+t+n}function OV(e,t={}){const n=t.width||lce(e),r=t.height||cce(e);return{width:n,height:r}}function uce(){let e,t;try{t=process}catch{}const n=t&&t.env?t.env.devicePixelRatio:null;return n&&(e=parseInt(n,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const Fr=16384;function dce(e){(e.width>Fr||e.height>Fr)&&(e.width>Fr&&e.height>Fr?e.width>e.height?(e.height*=Fr/e.width,e.width=Fr):(e.width*=Fr/e.height,e.height=Fr):e.width>Fr?(e.height*=Fr/e.width,e.width=Fr):(e.width*=Fr/e.height,e.height=Fr))}function _m(e){return new Promise((t,n)=>{const r=new Image;r.onload=()=>{r.decode().then(()=>{requestAnimationFrame(()=>t(r))})},r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=e})}async function fce(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function hce(e,t,n){const r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg"),s=document.createElementNS(r,"foreignObject");return i.setAttribute("width",`${t}`),i.setAttribute("height",`${n}`),i.setAttribute("viewBox",`0 0 ${t} ${n}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),i.appendChild(s),s.appendChild(e),fce(i)}const Nr=(e,t)=>{if(e instanceof t)return!0;const n=Object.getPrototypeOf(e);return n===null?!1:n.constructor.name===t.name||Nr(n,t)};function pce(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function mce(e,t){return jV(t).map(n=>{const r=e.getPropertyValue(n),i=e.getPropertyPriority(n);return`${n}: ${r}${i?" !important":""};`}).join(" ")}function gce(e,t,n,r){const i=`.${e}:${t}`,s=n.cssText?pce(n):mce(n,r);return document.createTextNode(`${i}{${s}}`)}function Ej(e,t,n,r){const i=window.getComputedStyle(e,n),s=i.getPropertyValue("content");if(s===""||s==="none")return;const o=ace();try{t.className=`${t.className} ${o}`}catch{return}const l=document.createElement("style");l.appendChild(gce(o,n,i,r)),t.appendChild(l)}function yce(e,t,n){Ej(e,t,":before",n),Ej(e,t,":after",n)}const Nj="application/font-woff",Tj="image/jpeg",bce={woff:Nj,woff2:Nj,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:Tj,jpeg:Tj,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function xce(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function k2(e){const t=xce(e).toLowerCase();return bce[t]||""}function vce(e){return e.split(/,/)[1]}function Lk(e){return e.search(/^(data:)/)!==-1}function wce(e,t){return`data:${t};base64,${e}`}async function LV(e,t,n){const r=await fetch(e,t);if(r.status===404)throw new Error(`Resource "${r.url}" not found`);const i=await r.blob();return new Promise((s,o)=>{const l=new FileReader;l.onerror=o,l.onloadend=()=>{try{s(n({res:r,result:l.result}))}catch(u){o(u)}},l.readAsDataURL(i)})}const Fb={};function Sce(e,t,n){let r=e.replace(/\?.*/,"");return n&&(r=e),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),t?`[${t}]${r}`:r}async function E2(e,t,n){const r=Sce(e,t,n.includeQueryParams);if(Fb[r]!=null)return Fb[r];n.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let i;try{const s=await LV(e,n.fetchRequestInit,({res:o,result:l})=>(t||(t=o.headers.get("Content-Type")||""),vce(l)));i=wce(s,t)}catch(s){i=n.imagePlaceholder||"";let o=`Failed to fetch resource: ${e}`;s&&(o=typeof s=="string"?s:s.message),o&&console.warn(o)}return Fb[r]=i,i}async function Cce(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):_m(t)}async function kce(e,t){if(e.currentSrc){const s=document.createElement("canvas"),o=s.getContext("2d");s.width=e.clientWidth,s.height=e.clientHeight,o?.drawImage(e,0,0,s.width,s.height);const l=s.toDataURL();return _m(l)}const n=e.poster,r=k2(n),i=await E2(n,r,t);return _m(i)}async function Ece(e,t){var n;try{if(!((n=e?.contentDocument)===null||n===void 0)&&n.body)return await vg(e.contentDocument.body,t,!0)}catch{}return e.cloneNode(!1)}async function Nce(e,t){return Nr(e,HTMLCanvasElement)?Cce(e):Nr(e,HTMLVideoElement)?kce(e,t):Nr(e,HTMLIFrameElement)?Ece(e,t):e.cloneNode(PV(e))}const Tce=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",PV=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function Ace(e,t,n){var r,i;if(PV(t))return t;let s=[];return Tce(e)&&e.assignedNodes?s=Bo(e.assignedNodes()):Nr(e,HTMLIFrameElement)&&(!((r=e.contentDocument)===null||r===void 0)&&r.body)?s=Bo(e.contentDocument.body.childNodes):s=Bo(((i=e.shadowRoot)!==null&&i!==void 0?i:e).childNodes),s.length===0||Nr(e,HTMLVideoElement)||await s.reduce((o,l)=>o.then(()=>vg(l,n)).then(u=>{u&&t.appendChild(u)}),Promise.resolve()),t}function Mce(e,t,n){const r=t.style;if(!r)return;const i=window.getComputedStyle(e);i.cssText?(r.cssText=i.cssText,r.transformOrigin=i.transformOrigin):jV(n).forEach(s=>{let o=i.getPropertyValue(s);s==="font-size"&&o.endsWith("px")&&(o=`${Math.floor(parseFloat(o.substring(0,o.length-2)))-.1}px`),Nr(e,HTMLIFrameElement)&&s==="display"&&o==="inline"&&(o="block"),s==="d"&&t.getAttribute("d")&&(o=`path(${t.getAttribute("d")})`),r.setProperty(s,o,i.getPropertyPriority(s))})}function _ce(e,t){Nr(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),Nr(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function Dce(e,t){if(Nr(e,HTMLSelectElement)){const n=t,r=Array.from(n.children).find(i=>e.value===i.getAttribute("value"));r&&r.setAttribute("selected","")}}function Rce(e,t,n){return Nr(t,Element)&&(Mce(e,t,n),yce(e,t,n),_ce(e,t),Dce(e,t)),t}async function jce(e,t){const n=e.querySelectorAll?e.querySelectorAll("use"):[];if(n.length===0)return e;const r={};for(let s=0;s<n.length;s++){const l=n[s].getAttribute("xlink:href");if(l){const u=e.querySelector(l),d=document.querySelector(l);!u&&d&&!r[l]&&(r[l]=await vg(d,t,!0))}}const i=Object.values(r);if(i.length){const s="http://www.w3.org/1999/xhtml",o=document.createElementNS(s,"svg");o.setAttribute("xmlns",s),o.style.position="absolute",o.style.width="0",o.style.height="0",o.style.overflow="hidden",o.style.display="none";const l=document.createElementNS(s,"defs");o.appendChild(l);for(let u=0;u<i.length;u++)l.appendChild(i[u]);e.appendChild(o)}return e}async function vg(e,t,n){return!n&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(r=>Nce(r,t)).then(r=>Ace(e,r,t)).then(r=>Rce(e,r,t)).then(r=>jce(r,t))}const IV=/url\((['"]?)([^'"]+?)\1\)/g,Oce=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,Lce=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function Pce(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function Ice(e){const t=[];return e.replace(IV,(n,r,i)=>(t.push(i),n)),t.filter(n=>!Lk(n))}async function Bce(e,t,n,r,i){try{const s=n?oce(t,n):t,o=k2(t);let l;return i||(l=await E2(s,o,r)),e.replace(Pce(t),`$1${l}$3`)}catch{}return e}function zce(e,{preferredFontFormat:t}){return t?e.replace(Lce,n=>{for(;;){const[r,,i]=Oce.exec(n)||[];if(!i)return"";if(i===t)return`src: ${r};`}}):e}function BV(e){return e.search(IV)!==-1}async function zV(e,t,n){if(!BV(e))return e;const r=zce(e,n);return Ice(r).reduce((s,o)=>s.then(l=>Bce(l,o,t,n)),Promise.resolve(r))}async function Ul(e,t,n){var r;const i=(r=t.style)===null||r===void 0?void 0:r.getPropertyValue(e);if(i){const s=await zV(i,null,n);return t.style.setProperty(e,s,t.style.getPropertyPriority(e)),!0}return!1}async function Vce(e,t){await Ul("background",e,t)||await Ul("background-image",e,t),await Ul("mask",e,t)||await Ul("-webkit-mask",e,t)||await Ul("mask-image",e,t)||await Ul("-webkit-mask-image",e,t)}async function qce(e,t){const n=Nr(e,HTMLImageElement);if(!(n&&!Lk(e.src))&&!(Nr(e,SVGImageElement)&&!Lk(e.href.baseVal)))return;const r=n?e.src:e.href.baseVal,i=await E2(r,k2(r),t);await new Promise((s,o)=>{e.onload=s,e.onerror=t.onImageErrorHandler?(...u)=>{try{s(t.onImageErrorHandler(...u))}catch(d){o(d)}}:o;const l=e;l.decode&&(l.decode=s),l.loading==="lazy"&&(l.loading="eager"),n?(e.srcset="",e.src=i):e.href.baseVal=i})}async function Hce(e,t){const r=Bo(e.childNodes).map(i=>VV(i,t));await Promise.all(r).then(()=>e)}async function VV(e,t){Nr(e,Element)&&(await Vce(e,t),await qce(e,t),await Hce(e,t))}function Fce(e,t){const{style:n}=e;t.backgroundColor&&(n.backgroundColor=t.backgroundColor),t.width&&(n.width=`${t.width}px`),t.height&&(n.height=`${t.height}px`);const r=t.style;return r!=null&&Object.keys(r).forEach(i=>{n[i]=r[i]}),e}const Aj={};async function Mj(e){let t=Aj[e];if(t!=null)return t;const r=await(await fetch(e)).text();return t={url:e,cssText:r},Aj[e]=t,t}async function _j(e,t){let n=e.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,s=(n.match(/url\([^)]+\)/g)||[]).map(async o=>{let l=o.replace(r,"$1");return l.startsWith("https://")||(l=new URL(l,e.url).href),LV(l,t.fetchRequestInit,({result:u})=>(n=n.replace(o,`url(${u})`),[o,u]))});return Promise.all(s).then(()=>n)}function Dj(e){if(e==null)return[];const t=[],n=/(\/\*[\s\S]*?\*\/)/gi;let r=e.replace(n,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const u=i.exec(r);if(u===null)break;t.push(u[0])}r=r.replace(i,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,o="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",l=new RegExp(o,"gi");for(;;){let u=s.exec(r);if(u===null){if(u=l.exec(r),u===null)break;s.lastIndex=l.lastIndex}else l.lastIndex=s.lastIndex;t.push(u[0])}return t}async function Uce(e,t){const n=[],r=[];return e.forEach(i=>{if("cssRules"in i)try{Bo(i.cssRules||[]).forEach((s,o)=>{if(s.type===CSSRule.IMPORT_RULE){let l=o+1;const u=s.href,d=Mj(u).then(h=>_j(h,t)).then(h=>Dj(h).forEach(p=>{try{i.insertRule(p,p.startsWith("@import")?l+=1:i.cssRules.length)}catch(g){console.error("Error inserting rule from remote css",{rule:p,error:g})}})).catch(h=>{console.error("Error loading remote css",h.toString())});r.push(d)}})}catch(s){const o=e.find(l=>l.href==null)||document.styleSheets[0];i.href!=null&&r.push(Mj(i.href).then(l=>_j(l,t)).then(l=>Dj(l).forEach(u=>{o.insertRule(u,o.cssRules.length)})).catch(l=>{console.error("Error loading remote stylesheet",l)})),console.error("Error inlining remote css file",s)}}),Promise.all(r).then(()=>(e.forEach(i=>{if("cssRules"in i)try{Bo(i.cssRules||[]).forEach(s=>{n.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${i.href}`,s)}}),n))}function $ce(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>BV(t.style.getPropertyValue("src")))}async function Gce(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const n=Bo(e.ownerDocument.styleSheets),r=await Uce(n,t);return $ce(r)}function qV(e){return e.trim().replace(/["']/g,"")}function Wce(e){const t=new Set;function n(r){(r.style.fontFamily||getComputedStyle(r).fontFamily).split(",").forEach(s=>{t.add(qV(s))}),Array.from(r.children).forEach(s=>{s instanceof HTMLElement&&n(s)})}return n(e),t}async function Kce(e,t){const n=await Gce(e,t),r=Wce(e);return(await Promise.all(n.filter(s=>r.has(qV(s.style.fontFamily))).map(s=>{const o=s.parentStyleSheet?s.parentStyleSheet.href:null;return zV(s.cssText,o,t)}))).join(`
`)}async function Yce(e,t){const n=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await Kce(e,t);if(n){const r=document.createElement("style"),i=document.createTextNode(n);r.appendChild(i),e.firstChild?e.insertBefore(r,e.firstChild):e.appendChild(r)}}async function HV(e,t={}){const{width:n,height:r}=OV(e,t),i=await vg(e,t,!0);return await Yce(i,t),await VV(i,t),Fce(i,t),await hce(i,n,r)}async function FV(e,t={}){const{width:n,height:r}=OV(e,t),i=await HV(e,t),s=await _m(i),o=document.createElement("canvas"),l=o.getContext("2d"),u=t.pixelRatio||uce(),d=t.canvasWidth||n,h=t.canvasHeight||r;return o.width=d*u,o.height=h*u,t.skipAutoScale||dce(o),o.style.width=`${d}`,o.style.height=`${h}`,t.backgroundColor&&(l.fillStyle=t.backgroundColor,l.fillRect(0,0,o.width,o.height)),l.drawImage(s,0,0,o.width,o.height),o}async function Xce(e,t={}){return(await FV(e,t)).toDataURL()}async function Zce(e,t={}){return(await FV(e,t)).toDataURL("image/jpeg",t.quality||1)}function N2(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Ub,Rj;function Qce(){if(Rj)return Ub;Rj=1;function e(){this.__data__=[],this.size=0}return Ub=e,Ub}var $b,jj;function _c(){if(jj)return $b;jj=1;function e(t,n){return t===n||t!==t&&n!==n}return $b=e,$b}var Gb,Oj;function wg(){if(Oj)return Gb;Oj=1;var e=_c();function t(n,r){for(var i=n.length;i--;)if(e(n[i][0],r))return i;return-1}return Gb=t,Gb}var Wb,Lj;function Jce(){if(Lj)return Wb;Lj=1;var e=wg(),t=Array.prototype,n=t.splice;function r(i){var s=this.__data__,o=e(s,i);if(o<0)return!1;var l=s.length-1;return o==l?s.pop():n.call(s,o,1),--this.size,!0}return Wb=r,Wb}var Kb,Pj;function eue(){if(Pj)return Kb;Pj=1;var e=wg();function t(n){var r=this.__data__,i=e(r,n);return i<0?void 0:r[i][1]}return Kb=t,Kb}var Yb,Ij;function tue(){if(Ij)return Yb;Ij=1;var e=wg();function t(n){return e(this.__data__,n)>-1}return Yb=t,Yb}var Xb,Bj;function nue(){if(Bj)return Xb;Bj=1;var e=wg();function t(n,r){var i=this.__data__,s=e(i,n);return s<0?(++this.size,i.push([n,r])):i[s][1]=r,this}return Xb=t,Xb}var Zb,zj;function Sg(){if(zj)return Zb;zj=1;var e=Qce(),t=Jce(),n=eue(),r=tue(),i=nue();function s(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var d=o[l];this.set(d[0],d[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,Zb=s,Zb}var Qb,Vj;function rue(){if(Vj)return Qb;Vj=1;var e=Sg();function t(){this.__data__=new e,this.size=0}return Qb=t,Qb}var Jb,qj;function iue(){if(qj)return Jb;qj=1;function e(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}return Jb=e,Jb}var ex,Hj;function sue(){if(Hj)return ex;Hj=1;function e(t){return this.__data__.get(t)}return ex=e,ex}var tx,Fj;function oue(){if(Fj)return tx;Fj=1;function e(t){return this.__data__.has(t)}return tx=e,tx}var nx,Uj;function UV(){if(Uj)return nx;Uj=1;var e=typeof Mh=="object"&&Mh&&Mh.Object===Object&&Mh;return nx=e,nx}var rx,$j;function Pi(){if($j)return rx;$j=1;var e=UV(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return rx=n,rx}var ix,Gj;function Dc(){if(Gj)return ix;Gj=1;var e=Pi(),t=e.Symbol;return ix=t,ix}var sx,Wj;function aue(){if(Wj)return sx;Wj=1;var e=Dc(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,i=e?e.toStringTag:void 0;function s(o){var l=n.call(o,i),u=o[i];try{o[i]=void 0;var d=!0}catch{}var h=r.call(o);return d&&(l?o[i]=u:delete o[i]),h}return sx=s,sx}var ox,Kj;function lue(){if(Kj)return ox;Kj=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return ox=n,ox}var ax,Yj;function el(){if(Yj)return ax;Yj=1;var e=Dc(),t=aue(),n=lue(),r="[object Null]",i="[object Undefined]",s=e?e.toStringTag:void 0;function o(l){return l==null?l===void 0?i:r:s&&s in Object(l)?t(l):n(l)}return ax=o,ax}var lx,Xj;function bi(){if(Xj)return lx;Xj=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return lx=e,lx}var cx,Zj;function pf(){if(Zj)return cx;Zj=1;var e=el(),t=bi(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function o(l){if(!t(l))return!1;var u=e(l);return u==r||u==i||u==n||u==s}return cx=o,cx}var ux,Qj;function cue(){if(Qj)return ux;Qj=1;var e=Pi(),t=e["__core-js_shared__"];return ux=t,ux}var dx,Jj;function uue(){if(Jj)return dx;Jj=1;var e=cue(),t=(function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""})();function n(r){return!!t&&t in r}return dx=n,dx}var fx,eO;function $V(){if(eO)return fx;eO=1;var e=Function.prototype,t=e.toString;function n(r){if(r!=null){try{return t.call(r)}catch{}try{return r+""}catch{}}return""}return fx=n,fx}var hx,tO;function due(){if(tO)return hx;tO=1;var e=pf(),t=uue(),n=bi(),r=$V(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,u=o.toString,d=l.hasOwnProperty,h=RegExp("^"+u.call(d).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(g){if(!n(g)||t(g))return!1;var b=e(g)?h:s;return b.test(r(g))}return hx=p,hx}var px,nO;function fue(){if(nO)return px;nO=1;function e(t,n){return t?.[n]}return px=e,px}var mx,rO;function tl(){if(rO)return mx;rO=1;var e=due(),t=fue();function n(r,i){var s=t(r,i);return e(s)?s:void 0}return mx=n,mx}var gx,iO;function T2(){if(iO)return gx;iO=1;var e=tl(),t=Pi(),n=e(t,"Map");return gx=n,gx}var yx,sO;function Cg(){if(sO)return yx;sO=1;var e=tl(),t=e(Object,"create");return yx=t,yx}var bx,oO;function hue(){if(oO)return bx;oO=1;var e=Cg();function t(){this.__data__=e?e(null):{},this.size=0}return bx=t,bx}var xx,aO;function pue(){if(aO)return xx;aO=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return xx=e,xx}var vx,lO;function mue(){if(lO)return vx;lO=1;var e=Cg(),t="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(s){var o=this.__data__;if(e){var l=o[s];return l===t?void 0:l}return r.call(o,s)?o[s]:void 0}return vx=i,vx}var wx,cO;function gue(){if(cO)return wx;cO=1;var e=Cg(),t=Object.prototype,n=t.hasOwnProperty;function r(i){var s=this.__data__;return e?s[i]!==void 0:n.call(s,i)}return wx=r,wx}var Sx,uO;function yue(){if(uO)return Sx;uO=1;var e=Cg(),t="__lodash_hash_undefined__";function n(r,i){var s=this.__data__;return this.size+=this.has(r)?0:1,s[r]=e&&i===void 0?t:i,this}return Sx=n,Sx}var Cx,dO;function bue(){if(dO)return Cx;dO=1;var e=hue(),t=pue(),n=mue(),r=gue(),i=yue();function s(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var d=o[l];this.set(d[0],d[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,Cx=s,Cx}var kx,fO;function xue(){if(fO)return kx;fO=1;var e=bue(),t=Sg(),n=T2();function r(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return kx=r,kx}var Ex,hO;function vue(){if(hO)return Ex;hO=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return Ex=e,Ex}var Nx,pO;function kg(){if(pO)return Nx;pO=1;var e=vue();function t(n,r){var i=n.__data__;return e(r)?i[typeof r=="string"?"string":"hash"]:i.map}return Nx=t,Nx}var Tx,mO;function wue(){if(mO)return Tx;mO=1;var e=kg();function t(n){var r=e(this,n).delete(n);return this.size-=r?1:0,r}return Tx=t,Tx}var Ax,gO;function Sue(){if(gO)return Ax;gO=1;var e=kg();function t(n){return e(this,n).get(n)}return Ax=t,Ax}var Mx,yO;function Cue(){if(yO)return Mx;yO=1;var e=kg();function t(n){return e(this,n).has(n)}return Mx=t,Mx}var _x,bO;function kue(){if(bO)return _x;bO=1;var e=kg();function t(n,r){var i=e(this,n),s=i.size;return i.set(n,r),this.size+=i.size==s?0:1,this}return _x=t,_x}var Dx,xO;function A2(){if(xO)return Dx;xO=1;var e=xue(),t=wue(),n=Sue(),r=Cue(),i=kue();function s(o){var l=-1,u=o==null?0:o.length;for(this.clear();++l<u;){var d=o[l];this.set(d[0],d[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,Dx=s,Dx}var Rx,vO;function Eue(){if(vO)return Rx;vO=1;var e=Sg(),t=T2(),n=A2(),r=200;function i(s,o){var l=this.__data__;if(l instanceof e){var u=l.__data__;if(!t||u.length<r-1)return u.push([s,o]),this.size=++l.size,this;l=this.__data__=new n(u)}return l.set(s,o),this.size=l.size,this}return Rx=i,Rx}var jx,wO;function Eg(){if(wO)return jx;wO=1;var e=Sg(),t=rue(),n=iue(),r=sue(),i=oue(),s=Eue();function o(l){var u=this.__data__=new e(l);this.size=u.size}return o.prototype.clear=t,o.prototype.delete=n,o.prototype.get=r,o.prototype.has=i,o.prototype.set=s,jx=o,jx}var Ox,SO;function M2(){if(SO)return Ox;SO=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i&&n(t[r],r,t)!==!1;);return t}return Ox=e,Ox}var Lx,CO;function GV(){if(CO)return Lx;CO=1;var e=tl(),t=(function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}})();return Lx=t,Lx}var Px,kO;function Ng(){if(kO)return Px;kO=1;var e=GV();function t(n,r,i){r=="__proto__"&&e?e(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return Px=t,Px}var Ix,EO;function Tg(){if(EO)return Ix;EO=1;var e=Ng(),t=_c(),n=Object.prototype,r=n.hasOwnProperty;function i(s,o,l){var u=s[o];(!(r.call(s,o)&&t(u,l))||l===void 0&&!(o in s))&&e(s,o,l)}return Ix=i,Ix}var Bx,NO;function mf(){if(NO)return Bx;NO=1;var e=Tg(),t=Ng();function n(r,i,s,o){var l=!s;s||(s={});for(var u=-1,d=i.length;++u<d;){var h=i[u],p=o?o(s[h],r[h],h,s,r):void 0;p===void 0&&(p=r[h]),l?t(s,h,p):e(s,h,p)}return s}return Bx=n,Bx}var zx,TO;function Nue(){if(TO)return zx;TO=1;function e(t,n){for(var r=-1,i=Array(t);++r<t;)i[r]=n(r);return i}return zx=e,zx}var Vx,AO;function cs(){if(AO)return Vx;AO=1;function e(t){return t!=null&&typeof t=="object"}return Vx=e,Vx}var qx,MO;function Tue(){if(MO)return qx;MO=1;var e=el(),t=cs(),n="[object Arguments]";function r(i){return t(i)&&e(i)==n}return qx=r,qx}var Hx,_O;function gf(){if(_O)return Hx;_O=1;var e=Tue(),t=cs(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,s=e((function(){return arguments})())?e:function(o){return t(o)&&r.call(o,"callee")&&!i.call(o,"callee")};return Hx=s,Hx}var Fx,DO;function Cn(){if(DO)return Fx;DO=1;var e=Array.isArray;return Fx=e,Fx}var Xu={exports:{}},Ux,RO;function Aue(){if(RO)return Ux;RO=1;function e(){return!1}return Ux=e,Ux}Xu.exports;var jO;function Rc(){return jO||(jO=1,(function(e,t){var n=Pi(),r=Aue(),i=t&&!t.nodeType&&t,s=i&&!0&&e&&!e.nodeType&&e,o=s&&s.exports===i,l=o?n.Buffer:void 0,u=l?l.isBuffer:void 0,d=u||r;e.exports=d})(Xu,Xu.exports)),Xu.exports}var $x,OO;function Ag(){if(OO)return $x;OO=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(r,i){var s=typeof r;return i=i??e,!!i&&(s=="number"||s!="symbol"&&t.test(r))&&r>-1&&r%1==0&&r<i}return $x=n,$x}var Gx,LO;function _2(){if(LO)return Gx;LO=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return Gx=t,Gx}var Wx,PO;function Mue(){if(PO)return Wx;PO=1;var e=el(),t=_2(),n=cs(),r="[object Arguments]",i="[object Array]",s="[object Boolean]",o="[object Date]",l="[object Error]",u="[object Function]",d="[object Map]",h="[object Number]",p="[object Object]",g="[object RegExp]",b="[object Set]",v="[object String]",S="[object WeakMap]",w="[object ArrayBuffer]",k="[object DataView]",T="[object Float32Array]",E="[object Float64Array]",N="[object Int8Array]",A="[object Int16Array]",_="[object Int32Array]",j="[object Uint8Array]",R="[object Uint8ClampedArray]",I="[object Uint16Array]",B="[object Uint32Array]",U={};U[T]=U[E]=U[N]=U[A]=U[_]=U[j]=U[R]=U[I]=U[B]=!0,U[r]=U[i]=U[w]=U[s]=U[k]=U[o]=U[l]=U[u]=U[d]=U[h]=U[p]=U[g]=U[b]=U[v]=U[S]=!1;function V(F){return n(F)&&t(F.length)&&!!U[e(F)]}return Wx=V,Wx}var Kx,IO;function Mg(){if(IO)return Kx;IO=1;function e(t){return function(n){return t(n)}}return Kx=e,Kx}var Zu={exports:{}};Zu.exports;var BO;function D2(){return BO||(BO=1,(function(e,t){var n=UV(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===r,o=s&&n.process,l=(function(){try{var u=i&&i.require&&i.require("util").types;return u||o&&o.binding&&o.binding("util")}catch{}})();e.exports=l})(Zu,Zu.exports)),Zu.exports}var Yx,zO;function yf(){if(zO)return Yx;zO=1;var e=Mue(),t=Mg(),n=D2(),r=n&&n.isTypedArray,i=r?t(r):e;return Yx=i,Yx}var Xx,VO;function WV(){if(VO)return Xx;VO=1;var e=Nue(),t=gf(),n=Cn(),r=Rc(),i=Ag(),s=yf(),o=Object.prototype,l=o.hasOwnProperty;function u(d,h){var p=n(d),g=!p&&t(d),b=!p&&!g&&r(d),v=!p&&!g&&!b&&s(d),S=p||g||b||v,w=S?e(d.length,String):[],k=w.length;for(var T in d)(h||l.call(d,T))&&!(S&&(T=="length"||b&&(T=="offset"||T=="parent")||v&&(T=="buffer"||T=="byteLength"||T=="byteOffset")||i(T,k)))&&w.push(T);return w}return Xx=u,Xx}var Zx,qO;function _g(){if(qO)return Zx;qO=1;var e=Object.prototype;function t(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||e;return n===i}return Zx=t,Zx}var Qx,HO;function KV(){if(HO)return Qx;HO=1;function e(t,n){return function(r){return t(n(r))}}return Qx=e,Qx}var Jx,FO;function _ue(){if(FO)return Jx;FO=1;var e=KV(),t=e(Object.keys,Object);return Jx=t,Jx}var ev,UO;function R2(){if(UO)return ev;UO=1;var e=_g(),t=_ue(),n=Object.prototype,r=n.hasOwnProperty;function i(s){if(!e(s))return t(s);var o=[];for(var l in Object(s))r.call(s,l)&&l!="constructor"&&o.push(l);return o}return ev=i,ev}var tv,$O;function qs(){if($O)return tv;$O=1;var e=pf(),t=_2();function n(r){return r!=null&&t(r.length)&&!e(r)}return tv=n,tv}var nv,GO;function Wo(){if(GO)return nv;GO=1;var e=WV(),t=R2(),n=qs();function r(i){return n(i)?e(i):t(i)}return nv=r,nv}var rv,WO;function Due(){if(WO)return rv;WO=1;var e=mf(),t=Wo();function n(r,i){return r&&e(i,t(i),r)}return rv=n,rv}var iv,KO;function Rue(){if(KO)return iv;KO=1;function e(t){var n=[];if(t!=null)for(var r in Object(t))n.push(r);return n}return iv=e,iv}var sv,YO;function jue(){if(YO)return sv;YO=1;var e=bi(),t=_g(),n=Rue(),r=Object.prototype,i=r.hasOwnProperty;function s(o){if(!e(o))return n(o);var l=t(o),u=[];for(var d in o)d=="constructor"&&(l||!i.call(o,d))||u.push(d);return u}return sv=s,sv}var ov,XO;function nl(){if(XO)return ov;XO=1;var e=WV(),t=jue(),n=qs();function r(i){return n(i)?e(i,!0):t(i)}return ov=r,ov}var av,ZO;function Oue(){if(ZO)return av;ZO=1;var e=mf(),t=nl();function n(r,i){return r&&e(i,t(i),r)}return av=n,av}var Qu={exports:{}};Qu.exports;var QO;function YV(){return QO||(QO=1,(function(e,t){var n=Pi(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===r,o=s?n.Buffer:void 0,l=o?o.allocUnsafe:void 0;function u(d,h){if(h)return d.slice();var p=d.length,g=l?l(p):new d.constructor(p);return d.copy(g),g}e.exports=u})(Qu,Qu.exports)),Qu.exports}var lv,JO;function XV(){if(JO)return lv;JO=1;function e(t,n){var r=-1,i=t.length;for(n||(n=Array(i));++r<i;)n[r]=t[r];return n}return lv=e,lv}var cv,e3;function ZV(){if(e3)return cv;e3=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,s=0,o=[];++r<i;){var l=t[r];n(l,r,t)&&(o[s++]=l)}return o}return cv=e,cv}var uv,t3;function QV(){if(t3)return uv;t3=1;function e(){return[]}return uv=e,uv}var dv,n3;function j2(){if(n3)return dv;n3=1;var e=ZV(),t=QV(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(o){return o==null?[]:(o=Object(o),e(i(o),function(l){return r.call(o,l)}))}:t;return dv=s,dv}var fv,r3;function Lue(){if(r3)return fv;r3=1;var e=mf(),t=j2();function n(r,i){return e(r,t(r),i)}return fv=n,fv}var hv,i3;function O2(){if(i3)return hv;i3=1;function e(t,n){for(var r=-1,i=n.length,s=t.length;++r<i;)t[s+r]=n[r];return t}return hv=e,hv}var pv,s3;function Dg(){if(s3)return pv;s3=1;var e=KV(),t=e(Object.getPrototypeOf,Object);return pv=t,pv}var mv,o3;function JV(){if(o3)return mv;o3=1;var e=O2(),t=Dg(),n=j2(),r=QV(),i=Object.getOwnPropertySymbols,s=i?function(o){for(var l=[];o;)e(l,n(o)),o=t(o);return l}:r;return mv=s,mv}var gv,a3;function Pue(){if(a3)return gv;a3=1;var e=mf(),t=JV();function n(r,i){return e(r,t(r),i)}return gv=n,gv}var yv,l3;function eq(){if(l3)return yv;l3=1;var e=O2(),t=Cn();function n(r,i,s){var o=i(r);return t(r)?o:e(o,s(r))}return yv=n,yv}var bv,c3;function tq(){if(c3)return bv;c3=1;var e=eq(),t=j2(),n=Wo();function r(i){return e(i,n,t)}return bv=r,bv}var xv,u3;function Iue(){if(u3)return xv;u3=1;var e=eq(),t=JV(),n=nl();function r(i){return e(i,n,t)}return xv=r,xv}var vv,d3;function Bue(){if(d3)return vv;d3=1;var e=tl(),t=Pi(),n=e(t,"DataView");return vv=n,vv}var wv,f3;function zue(){if(f3)return wv;f3=1;var e=tl(),t=Pi(),n=e(t,"Promise");return wv=n,wv}var Sv,h3;function nq(){if(h3)return Sv;h3=1;var e=tl(),t=Pi(),n=e(t,"Set");return Sv=n,Sv}var Cv,p3;function Vue(){if(p3)return Cv;p3=1;var e=tl(),t=Pi(),n=e(t,"WeakMap");return Cv=n,Cv}var kv,m3;function jc(){if(m3)return kv;m3=1;var e=Bue(),t=T2(),n=zue(),r=nq(),i=Vue(),s=el(),o=$V(),l="[object Map]",u="[object Object]",d="[object Promise]",h="[object Set]",p="[object WeakMap]",g="[object DataView]",b=o(e),v=o(t),S=o(n),w=o(r),k=o(i),T=s;return(e&&T(new e(new ArrayBuffer(1)))!=g||t&&T(new t)!=l||n&&T(n.resolve())!=d||r&&T(new r)!=h||i&&T(new i)!=p)&&(T=function(E){var N=s(E),A=N==u?E.constructor:void 0,_=A?o(A):"";if(_)switch(_){case b:return g;case v:return l;case S:return d;case w:return h;case k:return p}return N}),kv=T,kv}var Ev,g3;function que(){if(g3)return Ev;g3=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r){var i=r.length,s=new r.constructor(i);return i&&typeof r[0]=="string"&&t.call(r,"index")&&(s.index=r.index,s.input=r.input),s}return Ev=n,Ev}var Nv,y3;function rq(){if(y3)return Nv;y3=1;var e=Pi(),t=e.Uint8Array;return Nv=t,Nv}var Tv,b3;function L2(){if(b3)return Tv;b3=1;var e=rq();function t(n){var r=new n.constructor(n.byteLength);return new e(r).set(new e(n)),r}return Tv=t,Tv}var Av,x3;function Hue(){if(x3)return Av;x3=1;var e=L2();function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.byteLength)}return Av=t,Av}var Mv,v3;function Fue(){if(v3)return Mv;v3=1;var e=/\w*$/;function t(n){var r=new n.constructor(n.source,e.exec(n));return r.lastIndex=n.lastIndex,r}return Mv=t,Mv}var _v,w3;function Uue(){if(w3)return _v;w3=1;var e=Dc(),t=e?e.prototype:void 0,n=t?t.valueOf:void 0;function r(i){return n?Object(n.call(i)):{}}return _v=r,_v}var Dv,S3;function iq(){if(S3)return Dv;S3=1;var e=L2();function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.length)}return Dv=t,Dv}var Rv,C3;function $ue(){if(C3)return Rv;C3=1;var e=L2(),t=Hue(),n=Fue(),r=Uue(),i=iq(),s="[object Boolean]",o="[object Date]",l="[object Map]",u="[object Number]",d="[object RegExp]",h="[object Set]",p="[object String]",g="[object Symbol]",b="[object ArrayBuffer]",v="[object DataView]",S="[object Float32Array]",w="[object Float64Array]",k="[object Int8Array]",T="[object Int16Array]",E="[object Int32Array]",N="[object Uint8Array]",A="[object Uint8ClampedArray]",_="[object Uint16Array]",j="[object Uint32Array]";function R(I,B,U){var V=I.constructor;switch(B){case b:return e(I);case s:case o:return new V(+I);case v:return t(I,U);case S:case w:case k:case T:case E:case N:case A:case _:case j:return i(I,U);case l:return new V;case u:case p:return new V(I);case d:return n(I);case h:return new V;case g:return r(I)}}return Rv=R,Rv}var jv,k3;function sq(){if(k3)return jv;k3=1;var e=bi(),t=Object.create,n=(function(){function r(){}return function(i){if(!e(i))return{};if(t)return t(i);r.prototype=i;var s=new r;return r.prototype=void 0,s}})();return jv=n,jv}var Ov,E3;function oq(){if(E3)return Ov;E3=1;var e=sq(),t=Dg(),n=_g();function r(i){return typeof i.constructor=="function"&&!n(i)?e(t(i)):{}}return Ov=r,Ov}var Lv,N3;function Gue(){if(N3)return Lv;N3=1;var e=jc(),t=cs(),n="[object Map]";function r(i){return t(i)&&e(i)==n}return Lv=r,Lv}var Pv,T3;function Wue(){if(T3)return Pv;T3=1;var e=Gue(),t=Mg(),n=D2(),r=n&&n.isMap,i=r?t(r):e;return Pv=i,Pv}var Iv,A3;function Kue(){if(A3)return Iv;A3=1;var e=jc(),t=cs(),n="[object Set]";function r(i){return t(i)&&e(i)==n}return Iv=r,Iv}var Bv,M3;function Yue(){if(M3)return Bv;M3=1;var e=Kue(),t=Mg(),n=D2(),r=n&&n.isSet,i=r?t(r):e;return Bv=i,Bv}var zv,_3;function aq(){if(_3)return zv;_3=1;var e=Eg(),t=M2(),n=Tg(),r=Due(),i=Oue(),s=YV(),o=XV(),l=Lue(),u=Pue(),d=tq(),h=Iue(),p=jc(),g=que(),b=$ue(),v=oq(),S=Cn(),w=Rc(),k=Wue(),T=bi(),E=Yue(),N=Wo(),A=nl(),_=1,j=2,R=4,I="[object Arguments]",B="[object Array]",U="[object Boolean]",V="[object Date]",F="[object Error]",L="[object Function]",H="[object GeneratorFunction]",O="[object Map]",q="[object Number]",K="[object Object]",te="[object RegExp]",z="[object Set]",G="[object String]",oe="[object Symbol]",ae="[object WeakMap]",$="[object ArrayBuffer]",Q="[object DataView]",ee="[object Float32Array]",de="[object Float64Array]",le="[object Int8Array]",xe="[object Int16Array]",_e="[object Int32Array]",Be="[object Uint8Array]",Pe="[object Uint8ClampedArray]",Te="[object Uint16Array]",ke="[object Uint32Array]",Ee={};Ee[I]=Ee[B]=Ee[$]=Ee[Q]=Ee[U]=Ee[V]=Ee[ee]=Ee[de]=Ee[le]=Ee[xe]=Ee[_e]=Ee[O]=Ee[q]=Ee[K]=Ee[te]=Ee[z]=Ee[G]=Ee[oe]=Ee[Be]=Ee[Pe]=Ee[Te]=Ee[ke]=!0,Ee[F]=Ee[L]=Ee[ae]=!1;function ht(Oe,mt,bt,$t,un,zt){var Nt,kn=mt&_,dn=mt&j,Ot=mt&R;if(bt&&(Nt=un?bt(Oe,$t,un,zt):bt(Oe)),Nt!==void 0)return Nt;if(!T(Oe))return Oe;var ut=S(Oe);if(ut){if(Nt=g(Oe),!kn)return o(Oe,Nt)}else{var Tt=p(Oe),At=Tt==L||Tt==H;if(w(Oe))return s(Oe,kn);if(Tt==K||Tt==I||At&&!un){if(Nt=dn||At?{}:v(Oe),!kn)return dn?u(Oe,i(Nt,Oe)):l(Oe,r(Nt,Oe))}else{if(!Ee[Tt])return un?Oe:{};Nt=b(Oe,Tt,kn)}}zt||(zt=new e);var sr=zt.get(Oe);if(sr)return sr;zt.set(Oe,Nt),E(Oe)?Oe.forEach(function(Zt){Nt.add(ht(Zt,mt,bt,Zt,Oe,zt))}):k(Oe)&&Oe.forEach(function(Zt,Le){Nt.set(Le,ht(Zt,mt,bt,Le,Oe,zt))});var Ar=Ot?dn?h:d:dn?A:N,vi=ut?void 0:Ar(Oe);return t(vi||Oe,function(Zt,Le){vi&&(Le=Zt,Zt=Oe[Le]),n(Nt,Le,ht(Zt,mt,bt,Le,Oe,zt))}),Nt}return zv=ht,zv}var Vv,D3;function Xue(){if(D3)return Vv;D3=1;var e=aq(),t=4;function n(r){return e(r,t)}return Vv=n,Vv}var qv,R3;function P2(){if(R3)return qv;R3=1;function e(t){return function(){return t}}return qv=e,qv}var Hv,j3;function Zue(){if(j3)return Hv;j3=1;function e(t){return function(n,r,i){for(var s=-1,o=Object(n),l=i(n),u=l.length;u--;){var d=l[t?u:++s];if(r(o[d],d,o)===!1)break}return n}}return Hv=e,Hv}var Fv,O3;function I2(){if(O3)return Fv;O3=1;var e=Zue(),t=e();return Fv=t,Fv}var Uv,L3;function B2(){if(L3)return Uv;L3=1;var e=I2(),t=Wo();function n(r,i){return r&&e(r,i,t)}return Uv=n,Uv}var $v,P3;function Que(){if(P3)return $v;P3=1;var e=qs();function t(n,r){return function(i,s){if(i==null)return i;if(!e(i))return n(i,s);for(var o=i.length,l=r?o:-1,u=Object(i);(r?l--:++l<o)&&s(u[l],l,u)!==!1;);return i}}return $v=t,$v}var Gv,I3;function Rg(){if(I3)return Gv;I3=1;var e=B2(),t=Que(),n=t(e);return Gv=n,Gv}var Wv,B3;function rl(){if(B3)return Wv;B3=1;function e(t){return t}return Wv=e,Wv}var Kv,z3;function lq(){if(z3)return Kv;z3=1;var e=rl();function t(n){return typeof n=="function"?n:e}return Kv=t,Kv}var Yv,V3;function cq(){if(V3)return Yv;V3=1;var e=M2(),t=Rg(),n=lq(),r=Cn();function i(s,o){var l=r(s)?e:t;return l(s,n(o))}return Yv=i,Yv}var Xv,q3;function uq(){return q3||(q3=1,Xv=cq()),Xv}var Zv,H3;function Jue(){if(H3)return Zv;H3=1;var e=Rg();function t(n,r){var i=[];return e(n,function(s,o,l){r(s,o,l)&&i.push(s)}),i}return Zv=t,Zv}var Qv,F3;function ede(){if(F3)return Qv;F3=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return Qv=t,Qv}var Jv,U3;function tde(){if(U3)return Jv;U3=1;function e(t){return this.__data__.has(t)}return Jv=e,Jv}var e1,$3;function dq(){if($3)return e1;$3=1;var e=A2(),t=ede(),n=tde();function r(i){var s=-1,o=i==null?0:i.length;for(this.__data__=new e;++s<o;)this.add(i[s])}return r.prototype.add=r.prototype.push=t,r.prototype.has=n,e1=r,e1}var t1,G3;function nde(){if(G3)return t1;G3=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(t[r],r,t))return!0;return!1}return t1=e,t1}var n1,W3;function fq(){if(W3)return n1;W3=1;function e(t,n){return t.has(n)}return n1=e,n1}var r1,K3;function hq(){if(K3)return r1;K3=1;var e=dq(),t=nde(),n=fq(),r=1,i=2;function s(o,l,u,d,h,p){var g=u&r,b=o.length,v=l.length;if(b!=v&&!(g&&v>b))return!1;var S=p.get(o),w=p.get(l);if(S&&w)return S==l&&w==o;var k=-1,T=!0,E=u&i?new e:void 0;for(p.set(o,l),p.set(l,o);++k<b;){var N=o[k],A=l[k];if(d)var _=g?d(A,N,k,l,o,p):d(N,A,k,o,l,p);if(_!==void 0){if(_)continue;T=!1;break}if(E){if(!t(l,function(j,R){if(!n(E,R)&&(N===j||h(N,j,u,d,p)))return E.push(R)})){T=!1;break}}else if(!(N===A||h(N,A,u,d,p))){T=!1;break}}return p.delete(o),p.delete(l),T}return r1=s,r1}var i1,Y3;function rde(){if(Y3)return i1;Y3=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i,s){r[++n]=[s,i]}),r}return i1=e,i1}var s1,X3;function z2(){if(X3)return s1;X3=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i){r[++n]=i}),r}return s1=e,s1}var o1,Z3;function ide(){if(Z3)return o1;Z3=1;var e=Dc(),t=rq(),n=_c(),r=hq(),i=rde(),s=z2(),o=1,l=2,u="[object Boolean]",d="[object Date]",h="[object Error]",p="[object Map]",g="[object Number]",b="[object RegExp]",v="[object Set]",S="[object String]",w="[object Symbol]",k="[object ArrayBuffer]",T="[object DataView]",E=e?e.prototype:void 0,N=E?E.valueOf:void 0;function A(_,j,R,I,B,U,V){switch(R){case T:if(_.byteLength!=j.byteLength||_.byteOffset!=j.byteOffset)return!1;_=_.buffer,j=j.buffer;case k:return!(_.byteLength!=j.byteLength||!U(new t(_),new t(j)));case u:case d:case g:return n(+_,+j);case h:return _.name==j.name&&_.message==j.message;case b:case S:return _==j+"";case p:var F=i;case v:var L=I&o;if(F||(F=s),_.size!=j.size&&!L)return!1;var H=V.get(_);if(H)return H==j;I|=l,V.set(_,j);var O=r(F(_),F(j),I,B,U,V);return V.delete(_),O;case w:if(N)return N.call(_)==N.call(j)}return!1}return o1=A,o1}var a1,Q3;function sde(){if(Q3)return a1;Q3=1;var e=tq(),t=1,n=Object.prototype,r=n.hasOwnProperty;function i(s,o,l,u,d,h){var p=l&t,g=e(s),b=g.length,v=e(o),S=v.length;if(b!=S&&!p)return!1;for(var w=b;w--;){var k=g[w];if(!(p?k in o:r.call(o,k)))return!1}var T=h.get(s),E=h.get(o);if(T&&E)return T==o&&E==s;var N=!0;h.set(s,o),h.set(o,s);for(var A=p;++w<b;){k=g[w];var _=s[k],j=o[k];if(u)var R=p?u(j,_,k,o,s,h):u(_,j,k,s,o,h);if(!(R===void 0?_===j||d(_,j,l,u,h):R)){N=!1;break}A||(A=k=="constructor")}if(N&&!A){var I=s.constructor,B=o.constructor;I!=B&&"constructor"in s&&"constructor"in o&&!(typeof I=="function"&&I instanceof I&&typeof B=="function"&&B instanceof B)&&(N=!1)}return h.delete(s),h.delete(o),N}return a1=i,a1}var l1,J3;function ode(){if(J3)return l1;J3=1;var e=Eg(),t=hq(),n=ide(),r=sde(),i=jc(),s=Cn(),o=Rc(),l=yf(),u=1,d="[object Arguments]",h="[object Array]",p="[object Object]",g=Object.prototype,b=g.hasOwnProperty;function v(S,w,k,T,E,N){var A=s(S),_=s(w),j=A?h:i(S),R=_?h:i(w);j=j==d?p:j,R=R==d?p:R;var I=j==p,B=R==p,U=j==R;if(U&&o(S)){if(!o(w))return!1;A=!0,I=!1}if(U&&!I)return N||(N=new e),A||l(S)?t(S,w,k,T,E,N):n(S,w,j,k,T,E,N);if(!(k&u)){var V=I&&b.call(S,"__wrapped__"),F=B&&b.call(w,"__wrapped__");if(V||F){var L=V?S.value():S,H=F?w.value():w;return N||(N=new e),E(L,H,k,T,N)}}return U?(N||(N=new e),r(S,w,k,T,E,N)):!1}return l1=v,l1}var c1,eL;function pq(){if(eL)return c1;eL=1;var e=ode(),t=cs();function n(r,i,s,o,l){return r===i?!0:r==null||i==null||!t(r)&&!t(i)?r!==r&&i!==i:e(r,i,s,o,n,l)}return c1=n,c1}var u1,tL;function ade(){if(tL)return u1;tL=1;var e=Eg(),t=pq(),n=1,r=2;function i(s,o,l,u){var d=l.length,h=d,p=!u;if(s==null)return!h;for(s=Object(s);d--;){var g=l[d];if(p&&g[2]?g[1]!==s[g[0]]:!(g[0]in s))return!1}for(;++d<h;){g=l[d];var b=g[0],v=s[b],S=g[1];if(p&&g[2]){if(v===void 0&&!(b in s))return!1}else{var w=new e;if(u)var k=u(v,S,b,s,o,w);if(!(k===void 0?t(S,v,n|r,u,w):k))return!1}}return!0}return u1=i,u1}var d1,nL;function mq(){if(nL)return d1;nL=1;var e=bi();function t(n){return n===n&&!e(n)}return d1=t,d1}var f1,rL;function lde(){if(rL)return f1;rL=1;var e=mq(),t=Wo();function n(r){for(var i=t(r),s=i.length;s--;){var o=i[s],l=r[o];i[s]=[o,l,e(l)]}return i}return f1=n,f1}var h1,iL;function gq(){if(iL)return h1;iL=1;function e(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}return h1=e,h1}var p1,sL;function cde(){if(sL)return p1;sL=1;var e=ade(),t=lde(),n=gq();function r(i){var s=t(i);return s.length==1&&s[0][2]?n(s[0][0],s[0][1]):function(o){return o===i||e(o,i,s)}}return p1=r,p1}var m1,oL;function Oc(){if(oL)return m1;oL=1;var e=el(),t=cs(),n="[object Symbol]";function r(i){return typeof i=="symbol"||t(i)&&e(i)==n}return m1=r,m1}var g1,aL;function V2(){if(aL)return g1;aL=1;var e=Cn(),t=Oc(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,o){if(e(s))return!1;var l=typeof s;return l=="number"||l=="symbol"||l=="boolean"||s==null||t(s)?!0:r.test(s)||!n.test(s)||o!=null&&s in Object(o)}return g1=i,g1}var y1,lL;function ude(){if(lL)return y1;lL=1;var e=A2(),t="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var s=function(){var o=arguments,l=i?i.apply(this,o):o[0],u=s.cache;if(u.has(l))return u.get(l);var d=r.apply(this,o);return s.cache=u.set(l,d)||u,d};return s.cache=new(n.Cache||e),s}return n.Cache=e,y1=n,y1}var b1,cL;function dde(){if(cL)return b1;cL=1;var e=ude(),t=500;function n(r){var i=e(r,function(o){return s.size===t&&s.clear(),o}),s=i.cache;return i}return b1=n,b1}var x1,uL;function fde(){if(uL)return x1;uL=1;var e=dde(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(t,function(o,l,u,d){s.push(u?d.replace(n,"$1"):l||o)}),s});return x1=r,x1}var v1,dL;function jg(){if(dL)return v1;dL=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,s=Array(i);++r<i;)s[r]=n(t[r],r,t);return s}return v1=e,v1}var w1,fL;function hde(){if(fL)return w1;fL=1;var e=Dc(),t=jg(),n=Cn(),r=Oc(),i=e?e.prototype:void 0,s=i?i.toString:void 0;function o(l){if(typeof l=="string")return l;if(n(l))return t(l,o)+"";if(r(l))return s?s.call(l):"";var u=l+"";return u=="0"&&1/l==-1/0?"-0":u}return w1=o,w1}var S1,hL;function yq(){if(hL)return S1;hL=1;var e=hde();function t(n){return n==null?"":e(n)}return S1=t,S1}var C1,pL;function Og(){if(pL)return C1;pL=1;var e=Cn(),t=V2(),n=fde(),r=yq();function i(s,o){return e(s)?s:t(s,o)?[s]:n(r(s))}return C1=i,C1}var k1,mL;function bf(){if(mL)return k1;mL=1;var e=Oc();function t(n){if(typeof n=="string"||e(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return k1=t,k1}var E1,gL;function Lg(){if(gL)return E1;gL=1;var e=Og(),t=bf();function n(r,i){i=e(i,r);for(var s=0,o=i.length;r!=null&&s<o;)r=r[t(i[s++])];return s&&s==o?r:void 0}return E1=n,E1}var N1,yL;function pde(){if(yL)return N1;yL=1;var e=Lg();function t(n,r,i){var s=n==null?void 0:e(n,r);return s===void 0?i:s}return N1=t,N1}var T1,bL;function mde(){if(bL)return T1;bL=1;function e(t,n){return t!=null&&n in Object(t)}return T1=e,T1}var A1,xL;function bq(){if(xL)return A1;xL=1;var e=Og(),t=gf(),n=Cn(),r=Ag(),i=_2(),s=bf();function o(l,u,d){u=e(u,l);for(var h=-1,p=u.length,g=!1;++h<p;){var b=s(u[h]);if(!(g=l!=null&&d(l,b)))break;l=l[b]}return g||++h!=p?g:(p=l==null?0:l.length,!!p&&i(p)&&r(b,p)&&(n(l)||t(l)))}return A1=o,A1}var M1,vL;function xq(){if(vL)return M1;vL=1;var e=mde(),t=bq();function n(r,i){return r!=null&&t(r,i,e)}return M1=n,M1}var _1,wL;function gde(){if(wL)return _1;wL=1;var e=pq(),t=pde(),n=xq(),r=V2(),i=mq(),s=gq(),o=bf(),l=1,u=2;function d(h,p){return r(h)&&i(p)?s(o(h),p):function(g){var b=t(g,h);return b===void 0&&b===p?n(g,h):e(p,b,l|u)}}return _1=d,_1}var D1,SL;function vq(){if(SL)return D1;SL=1;function e(t){return function(n){return n?.[t]}}return D1=e,D1}var R1,CL;function yde(){if(CL)return R1;CL=1;var e=Lg();function t(n){return function(r){return e(r,n)}}return R1=t,R1}var j1,kL;function bde(){if(kL)return j1;kL=1;var e=vq(),t=yde(),n=V2(),r=bf();function i(s){return n(s)?e(r(s)):t(s)}return j1=i,j1}var O1,EL;function Hs(){if(EL)return O1;EL=1;var e=cde(),t=gde(),n=rl(),r=Cn(),i=bde();function s(o){return typeof o=="function"?o:o==null?n:typeof o=="object"?r(o)?t(o[0],o[1]):e(o):i(o)}return O1=s,O1}var L1,NL;function wq(){if(NL)return L1;NL=1;var e=ZV(),t=Jue(),n=Hs(),r=Cn();function i(s,o){var l=r(s)?e:t;return l(s,n(o,3))}return L1=i,L1}var P1,TL;function xde(){if(TL)return P1;TL=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r,i){return r!=null&&t.call(r,i)}return P1=n,P1}var I1,AL;function Sq(){if(AL)return I1;AL=1;var e=xde(),t=bq();function n(r,i){return r!=null&&t(r,i,e)}return I1=n,I1}var B1,ML;function vde(){if(ML)return B1;ML=1;var e=R2(),t=jc(),n=gf(),r=Cn(),i=qs(),s=Rc(),o=_g(),l=yf(),u="[object Map]",d="[object Set]",h=Object.prototype,p=h.hasOwnProperty;function g(b){if(b==null)return!0;if(i(b)&&(r(b)||typeof b=="string"||typeof b.splice=="function"||s(b)||l(b)||n(b)))return!b.length;var v=t(b);if(v==u||v==d)return!b.size;if(o(b))return!e(b).length;for(var S in b)if(p.call(b,S))return!1;return!0}return B1=g,B1}var z1,_L;function Cq(){if(_L)return z1;_L=1;function e(t){return t===void 0}return z1=e,z1}var V1,DL;function kq(){if(DL)return V1;DL=1;var e=Rg(),t=qs();function n(r,i){var s=-1,o=t(r)?Array(r.length):[];return e(r,function(l,u,d){o[++s]=i(l,u,d)}),o}return V1=n,V1}var q1,RL;function Eq(){if(RL)return q1;RL=1;var e=jg(),t=Hs(),n=kq(),r=Cn();function i(s,o){var l=r(s)?e:n;return l(s,t(o,3))}return q1=i,q1}var H1,jL;function wde(){if(jL)return H1;jL=1;function e(t,n,r,i){var s=-1,o=t==null?0:t.length;for(i&&o&&(r=t[++s]);++s<o;)r=n(r,t[s],s,t);return r}return H1=e,H1}var F1,OL;function Sde(){if(OL)return F1;OL=1;function e(t,n,r,i,s){return s(t,function(o,l,u){r=i?(i=!1,o):n(r,o,l,u)}),r}return F1=e,F1}var U1,LL;function Nq(){if(LL)return U1;LL=1;var e=wde(),t=Rg(),n=Hs(),r=Sde(),i=Cn();function s(o,l,u){var d=i(o)?e:r,h=arguments.length<3;return d(o,n(l,4),u,h,t)}return U1=s,U1}var $1,PL;function Cde(){if(PL)return $1;PL=1;var e=el(),t=Cn(),n=cs(),r="[object String]";function i(s){return typeof s=="string"||!t(s)&&n(s)&&e(s)==r}return $1=i,$1}var G1,IL;function kde(){if(IL)return G1;IL=1;var e=vq(),t=e("length");return G1=t,G1}var W1,BL;function Ede(){if(BL)return W1;BL=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,s="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+e+i+s+"]");function u(d){return l.test(d)}return W1=u,W1}var K1,zL;function Nde(){if(zL)return K1;zL=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,s="\\ufe0e\\ufe0f",o="["+e+"]",l="["+i+"]",u="\\ud83c[\\udffb-\\udfff]",d="(?:"+l+"|"+u+")",h="[^"+e+"]",p="(?:\\ud83c[\\udde6-\\uddff]){2}",g="[\\ud800-\\udbff][\\udc00-\\udfff]",b="\\u200d",v=d+"?",S="["+s+"]?",w="(?:"+b+"(?:"+[h,p,g].join("|")+")"+S+v+")*",k=S+v+w,T="(?:"+[h+l+"?",l,p,g,o].join("|")+")",E=RegExp(u+"(?="+u+")|"+T+k,"g");function N(A){for(var _=E.lastIndex=0;E.test(A);)++_;return _}return K1=N,K1}var Y1,VL;function Tde(){if(VL)return Y1;VL=1;var e=kde(),t=Ede(),n=Nde();function r(i){return t(i)?n(i):e(i)}return Y1=r,Y1}var X1,qL;function Ade(){if(qL)return X1;qL=1;var e=R2(),t=jc(),n=qs(),r=Cde(),i=Tde(),s="[object Map]",o="[object Set]";function l(u){if(u==null)return 0;if(n(u))return r(u)?i(u):u.length;var d=t(u);return d==s||d==o?u.size:e(u).length}return X1=l,X1}var Z1,HL;function Mde(){if(HL)return Z1;HL=1;var e=M2(),t=sq(),n=B2(),r=Hs(),i=Dg(),s=Cn(),o=Rc(),l=pf(),u=bi(),d=yf();function h(p,g,b){var v=s(p),S=v||o(p)||d(p);if(g=r(g,4),b==null){var w=p&&p.constructor;S?b=v?new w:[]:u(p)?b=l(w)?t(i(p)):{}:b={}}return(S?e:n)(p,function(k,T,E){return g(b,k,T,E)}),b}return Z1=h,Z1}var Q1,FL;function _de(){if(FL)return Q1;FL=1;var e=Dc(),t=gf(),n=Cn(),r=e?e.isConcatSpreadable:void 0;function i(s){return n(s)||t(s)||!!(r&&s&&s[r])}return Q1=i,Q1}var J1,UL;function q2(){if(UL)return J1;UL=1;var e=O2(),t=_de();function n(r,i,s,o,l){var u=-1,d=r.length;for(s||(s=t),l||(l=[]);++u<d;){var h=r[u];i>0&&s(h)?i>1?n(h,i-1,s,o,l):e(l,h):o||(l[l.length]=h)}return l}return J1=n,J1}var ew,$L;function Dde(){if($L)return ew;$L=1;function e(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}return ew=e,ew}var tw,GL;function Tq(){if(GL)return tw;GL=1;var e=Dde(),t=Math.max;function n(r,i,s){return i=t(i===void 0?r.length-1:i,0),function(){for(var o=arguments,l=-1,u=t(o.length-i,0),d=Array(u);++l<u;)d[l]=o[i+l];l=-1;for(var h=Array(i+1);++l<i;)h[l]=o[l];return h[i]=s(d),e(r,this,h)}}return tw=n,tw}var nw,WL;function Rde(){if(WL)return nw;WL=1;var e=P2(),t=GV(),n=rl(),r=t?function(i,s){return t(i,"toString",{configurable:!0,enumerable:!1,value:e(s),writable:!0})}:n;return nw=r,nw}var rw,KL;function jde(){if(KL)return rw;KL=1;var e=800,t=16,n=Date.now;function r(i){var s=0,o=0;return function(){var l=n(),u=t-(l-o);if(o=l,u>0){if(++s>=e)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return rw=r,rw}var iw,YL;function Aq(){if(YL)return iw;YL=1;var e=Rde(),t=jde(),n=t(e);return iw=n,iw}var sw,XL;function Pg(){if(XL)return sw;XL=1;var e=rl(),t=Tq(),n=Aq();function r(i,s){return n(t(i,s,e),i+"")}return sw=r,sw}var ow,ZL;function Mq(){if(ZL)return ow;ZL=1;function e(t,n,r,i){for(var s=t.length,o=r+(i?1:-1);i?o--:++o<s;)if(n(t[o],o,t))return o;return-1}return ow=e,ow}var aw,QL;function Ode(){if(QL)return aw;QL=1;function e(t){return t!==t}return aw=e,aw}var lw,JL;function Lde(){if(JL)return lw;JL=1;function e(t,n,r){for(var i=r-1,s=t.length;++i<s;)if(t[i]===n)return i;return-1}return lw=e,lw}var cw,e4;function Pde(){if(e4)return cw;e4=1;var e=Mq(),t=Ode(),n=Lde();function r(i,s,o){return s===s?n(i,s,o):e(i,t,o)}return cw=r,cw}var uw,t4;function Ide(){if(t4)return uw;t4=1;var e=Pde();function t(n,r){var i=n==null?0:n.length;return!!i&&e(n,r,0)>-1}return uw=t,uw}var dw,n4;function Bde(){if(n4)return dw;n4=1;function e(t,n,r){for(var i=-1,s=t==null?0:t.length;++i<s;)if(r(n,t[i]))return!0;return!1}return dw=e,dw}var fw,r4;function zde(){if(r4)return fw;r4=1;function e(){}return fw=e,fw}var hw,i4;function Vde(){if(i4)return hw;i4=1;var e=nq(),t=zde(),n=z2(),r=1/0,i=e&&1/n(new e([,-0]))[1]==r?function(s){return new e(s)}:t;return hw=i,hw}var pw,s4;function qde(){if(s4)return pw;s4=1;var e=dq(),t=Ide(),n=Bde(),r=fq(),i=Vde(),s=z2(),o=200;function l(u,d,h){var p=-1,g=t,b=u.length,v=!0,S=[],w=S;if(h)v=!1,g=n;else if(b>=o){var k=d?null:i(u);if(k)return s(k);v=!1,g=r,w=new e}else w=d?[]:S;e:for(;++p<b;){var T=u[p],E=d?d(T):T;if(T=h||T!==0?T:0,v&&E===E){for(var N=w.length;N--;)if(w[N]===E)continue e;d&&w.push(E),S.push(T)}else g(w,E,h)||(w!==S&&w.push(E),S.push(T))}return S}return pw=l,pw}var mw,o4;function _q(){if(o4)return mw;o4=1;var e=qs(),t=cs();function n(r){return t(r)&&e(r)}return mw=n,mw}var gw,a4;function Hde(){if(a4)return gw;a4=1;var e=q2(),t=Pg(),n=qde(),r=_q(),i=t(function(s){return n(e(s,1,r,!0))});return gw=i,gw}var yw,l4;function Fde(){if(l4)return yw;l4=1;var e=jg();function t(n,r){return e(r,function(i){return n[i]})}return yw=t,yw}var bw,c4;function Dq(){if(c4)return bw;c4=1;var e=Fde(),t=Wo();function n(r){return r==null?[]:e(r,t(r))}return bw=n,bw}var xw,u4;function xi(){if(u4)return xw;u4=1;var e;if(typeof N2=="function")try{e={clone:Xue(),constant:P2(),each:uq(),filter:wq(),has:Sq(),isArray:Cn(),isEmpty:vde(),isFunction:pf(),isUndefined:Cq(),keys:Wo(),map:Eq(),reduce:Nq(),size:Ade(),transform:Mde(),union:Hde(),values:Dq()}}catch{}return e||(e=window._),xw=e,xw}var vw,d4;function H2(){if(d4)return vw;d4=1;var e=xi();vw=i;var t="\0",n="\0",r="";function i(h){this._isDirected=e.has(h,"directed")?h.directed:!0,this._isMultigraph=e.has(h,"multigraph")?h.multigraph:!1,this._isCompound=e.has(h,"compound")?h.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(h){return this._label=h,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(h){return e.isFunction(h)||(h=e.constant(h)),this._defaultNodeLabelFn=h,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return e.keys(this._nodes)},i.prototype.sources=function(){var h=this;return e.filter(this.nodes(),function(p){return e.isEmpty(h._in[p])})},i.prototype.sinks=function(){var h=this;return e.filter(this.nodes(),function(p){return e.isEmpty(h._out[p])})},i.prototype.setNodes=function(h,p){var g=arguments,b=this;return e.each(h,function(v){g.length>1?b.setNode(v,p):b.setNode(v)}),this},i.prototype.setNode=function(h,p){return e.has(this._nodes,h)?(arguments.length>1&&(this._nodes[h]=p),this):(this._nodes[h]=arguments.length>1?p:this._defaultNodeLabelFn(h),this._isCompound&&(this._parent[h]=n,this._children[h]={},this._children[n][h]=!0),this._in[h]={},this._preds[h]={},this._out[h]={},this._sucs[h]={},++this._nodeCount,this)},i.prototype.node=function(h){return this._nodes[h]},i.prototype.hasNode=function(h){return e.has(this._nodes,h)},i.prototype.removeNode=function(h){var p=this;if(e.has(this._nodes,h)){var g=function(b){p.removeEdge(p._edgeObjs[b])};delete this._nodes[h],this._isCompound&&(this._removeFromParentsChildList(h),delete this._parent[h],e.each(this.children(h),function(b){p.setParent(b)}),delete this._children[h]),e.each(e.keys(this._in[h]),g),delete this._in[h],delete this._preds[h],e.each(e.keys(this._out[h]),g),delete this._out[h],delete this._sucs[h],--this._nodeCount}return this},i.prototype.setParent=function(h,p){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(p))p=n;else{p+="";for(var g=p;!e.isUndefined(g);g=this.parent(g))if(g===h)throw new Error("Setting "+p+" as parent of "+h+" would create a cycle");this.setNode(p)}return this.setNode(h),this._removeFromParentsChildList(h),this._parent[h]=p,this._children[p][h]=!0,this},i.prototype._removeFromParentsChildList=function(h){delete this._children[this._parent[h]][h]},i.prototype.parent=function(h){if(this._isCompound){var p=this._parent[h];if(p!==n)return p}},i.prototype.children=function(h){if(e.isUndefined(h)&&(h=n),this._isCompound){var p=this._children[h];if(p)return e.keys(p)}else{if(h===n)return this.nodes();if(this.hasNode(h))return[]}},i.prototype.predecessors=function(h){var p=this._preds[h];if(p)return e.keys(p)},i.prototype.successors=function(h){var p=this._sucs[h];if(p)return e.keys(p)},i.prototype.neighbors=function(h){var p=this.predecessors(h);if(p)return e.union(p,this.successors(h))},i.prototype.isLeaf=function(h){var p;return this.isDirected()?p=this.successors(h):p=this.neighbors(h),p.length===0},i.prototype.filterNodes=function(h){var p=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});p.setGraph(this.graph());var g=this;e.each(this._nodes,function(S,w){h(w)&&p.setNode(w,S)}),e.each(this._edgeObjs,function(S){p.hasNode(S.v)&&p.hasNode(S.w)&&p.setEdge(S,g.edge(S))});var b={};function v(S){var w=g.parent(S);return w===void 0||p.hasNode(w)?(b[S]=w,w):w in b?b[w]:v(w)}return this._isCompound&&e.each(p.nodes(),function(S){p.setParent(S,v(S))}),p},i.prototype.setDefaultEdgeLabel=function(h){return e.isFunction(h)||(h=e.constant(h)),this._defaultEdgeLabelFn=h,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return e.values(this._edgeObjs)},i.prototype.setPath=function(h,p){var g=this,b=arguments;return e.reduce(h,function(v,S){return b.length>1?g.setEdge(v,S,p):g.setEdge(v,S),S}),this},i.prototype.setEdge=function(){var h,p,g,b,v=!1,S=arguments[0];typeof S=="object"&&S!==null&&"v"in S?(h=S.v,p=S.w,g=S.name,arguments.length===2&&(b=arguments[1],v=!0)):(h=S,p=arguments[1],g=arguments[3],arguments.length>2&&(b=arguments[2],v=!0)),h=""+h,p=""+p,e.isUndefined(g)||(g=""+g);var w=l(this._isDirected,h,p,g);if(e.has(this._edgeLabels,w))return v&&(this._edgeLabels[w]=b),this;if(!e.isUndefined(g)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(h),this.setNode(p),this._edgeLabels[w]=v?b:this._defaultEdgeLabelFn(h,p,g);var k=u(this._isDirected,h,p,g);return h=k.v,p=k.w,Object.freeze(k),this._edgeObjs[w]=k,s(this._preds[p],h),s(this._sucs[h],p),this._in[p][w]=k,this._out[h][w]=k,this._edgeCount++,this},i.prototype.edge=function(h,p,g){var b=arguments.length===1?d(this._isDirected,arguments[0]):l(this._isDirected,h,p,g);return this._edgeLabels[b]},i.prototype.hasEdge=function(h,p,g){var b=arguments.length===1?d(this._isDirected,arguments[0]):l(this._isDirected,h,p,g);return e.has(this._edgeLabels,b)},i.prototype.removeEdge=function(h,p,g){var b=arguments.length===1?d(this._isDirected,arguments[0]):l(this._isDirected,h,p,g),v=this._edgeObjs[b];return v&&(h=v.v,p=v.w,delete this._edgeLabels[b],delete this._edgeObjs[b],o(this._preds[p],h),o(this._sucs[h],p),delete this._in[p][b],delete this._out[h][b],this._edgeCount--),this},i.prototype.inEdges=function(h,p){var g=this._in[h];if(g){var b=e.values(g);return p?e.filter(b,function(v){return v.v===p}):b}},i.prototype.outEdges=function(h,p){var g=this._out[h];if(g){var b=e.values(g);return p?e.filter(b,function(v){return v.w===p}):b}},i.prototype.nodeEdges=function(h,p){var g=this.inEdges(h,p);if(g)return g.concat(this.outEdges(h,p))};function s(h,p){h[p]?h[p]++:h[p]=1}function o(h,p){--h[p]||delete h[p]}function l(h,p,g,b){var v=""+p,S=""+g;if(!h&&v>S){var w=v;v=S,S=w}return v+r+S+r+(e.isUndefined(b)?t:b)}function u(h,p,g,b){var v=""+p,S=""+g;if(!h&&v>S){var w=v;v=S,S=w}var k={v,w:S};return b&&(k.name=b),k}function d(h,p){return l(h,p.v,p.w,p.name)}return vw}var ww,f4;function Ude(){return f4||(f4=1,ww="2.1.8"),ww}var Sw,h4;function $de(){return h4||(h4=1,Sw={Graph:H2(),version:Ude()}),Sw}var Cw,p4;function Gde(){if(p4)return Cw;p4=1;var e=xi(),t=H2();Cw={write:n,read:s};function n(o){var l={options:{directed:o.isDirected(),multigraph:o.isMultigraph(),compound:o.isCompound()},nodes:r(o),edges:i(o)};return e.isUndefined(o.graph())||(l.value=e.clone(o.graph())),l}function r(o){return e.map(o.nodes(),function(l){var u=o.node(l),d=o.parent(l),h={v:l};return e.isUndefined(u)||(h.value=u),e.isUndefined(d)||(h.parent=d),h})}function i(o){return e.map(o.edges(),function(l){var u=o.edge(l),d={v:l.v,w:l.w};return e.isUndefined(l.name)||(d.name=l.name),e.isUndefined(u)||(d.value=u),d})}function s(o){var l=new t(o.options).setGraph(o.value);return e.each(o.nodes,function(u){l.setNode(u.v,u.value),u.parent&&l.setParent(u.v,u.parent)}),e.each(o.edges,function(u){l.setEdge({v:u.v,w:u.w,name:u.name},u.value)}),l}return Cw}var kw,m4;function Wde(){if(m4)return kw;m4=1;var e=xi();kw=t;function t(n){var r={},i=[],s;function o(l){e.has(r,l)||(r[l]=!0,s.push(l),e.each(n.successors(l),o),e.each(n.predecessors(l),o))}return e.each(n.nodes(),function(l){s=[],o(l),s.length&&i.push(s)}),i}return kw}var Ew,g4;function Rq(){if(g4)return Ew;g4=1;var e=xi();Ew=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,r){var i=this._keyIndices;if(n=String(n),!e.has(i,n)){var s=this._arr,o=s.length;return i[n]=o,s.push({key:n,priority:r}),this._decrease(o),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)},t.prototype._heapify=function(n){var r=this._arr,i=2*n,s=i+1,o=n;i<r.length&&(o=r[i].priority<r[o].priority?i:o,s<r.length&&(o=r[s].priority<r[o].priority?s:o),o!==n&&(this._swap(n,o),this._heapify(o)))},t.prototype._decrease=function(n){for(var r=this._arr,i=r[n].priority,s;n!==0&&(s=n>>1,!(r[s].priority<i));)this._swap(n,s),n=s},t.prototype._swap=function(n,r){var i=this._arr,s=this._keyIndices,o=i[n],l=i[r];i[n]=l,i[r]=o,s[l.key]=n,s[o.key]=r},Ew}var Nw,y4;function jq(){if(y4)return Nw;y4=1;var e=xi(),t=Rq();Nw=r;var n=e.constant(1);function r(s,o,l,u){return i(s,String(o),l||n,u||function(d){return s.outEdges(d)})}function i(s,o,l,u){var d={},h=new t,p,g,b=function(v){var S=v.v!==p?v.v:v.w,w=d[S],k=l(v),T=g.distance+k;if(k<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+v+" Weight: "+k);T<w.distance&&(w.distance=T,w.predecessor=p,h.decrease(S,T))};for(s.nodes().forEach(function(v){var S=v===o?0:Number.POSITIVE_INFINITY;d[v]={distance:S},h.add(v,S)});h.size()>0&&(p=h.removeMin(),g=d[p],g.distance!==Number.POSITIVE_INFINITY);)u(p).forEach(b);return d}return Nw}var Tw,b4;function Kde(){if(b4)return Tw;b4=1;var e=jq(),t=xi();Tw=n;function n(r,i,s){return t.transform(r.nodes(),function(o,l){o[l]=e(r,l,i,s)},{})}return Tw}var Aw,x4;function Oq(){if(x4)return Aw;x4=1;var e=xi();Aw=t;function t(n){var r=0,i=[],s={},o=[];function l(u){var d=s[u]={onStack:!0,lowlink:r,index:r++};if(i.push(u),n.successors(u).forEach(function(g){e.has(s,g)?s[g].onStack&&(d.lowlink=Math.min(d.lowlink,s[g].index)):(l(g),d.lowlink=Math.min(d.lowlink,s[g].lowlink))}),d.lowlink===d.index){var h=[],p;do p=i.pop(),s[p].onStack=!1,h.push(p);while(u!==p);o.push(h)}}return n.nodes().forEach(function(u){e.has(s,u)||l(u)}),o}return Aw}var Mw,v4;function Yde(){if(v4)return Mw;v4=1;var e=xi(),t=Oq();Mw=n;function n(r){return e.filter(t(r),function(i){return i.length>1||i.length===1&&r.hasEdge(i[0],i[0])})}return Mw}var _w,w4;function Xde(){if(w4)return _w;w4=1;var e=xi();_w=n;var t=e.constant(1);function n(i,s,o){return r(i,s||t,o||function(l){return i.outEdges(l)})}function r(i,s,o){var l={},u=i.nodes();return u.forEach(function(d){l[d]={},l[d][d]={distance:0},u.forEach(function(h){d!==h&&(l[d][h]={distance:Number.POSITIVE_INFINITY})}),o(d).forEach(function(h){var p=h.v===d?h.w:h.v,g=s(h);l[d][p]={distance:g,predecessor:d}})}),u.forEach(function(d){var h=l[d];u.forEach(function(p){var g=l[p];u.forEach(function(b){var v=g[d],S=h[b],w=g[b],k=v.distance+S.distance;k<w.distance&&(w.distance=k,w.predecessor=S.predecessor)})})}),l}return _w}var Dw,S4;function Lq(){if(S4)return Dw;S4=1;var e=xi();Dw=t,t.CycleException=n;function t(r){var i={},s={},o=[];function l(u){if(e.has(s,u))throw new n;e.has(i,u)||(s[u]=!0,i[u]=!0,e.each(r.predecessors(u),l),delete s[u],o.push(u))}if(e.each(r.sinks(),l),e.size(i)!==r.nodeCount())throw new n;return o}function n(){}return n.prototype=new Error,Dw}var Rw,C4;function Zde(){if(C4)return Rw;C4=1;var e=Lq();Rw=t;function t(n){try{e(n)}catch(r){if(r instanceof e.CycleException)return!1;throw r}return!0}return Rw}var jw,k4;function Pq(){if(k4)return jw;k4=1;var e=xi();jw=t;function t(r,i,s){e.isArray(i)||(i=[i]);var o=(r.isDirected()?r.successors:r.neighbors).bind(r),l=[],u={};return e.each(i,function(d){if(!r.hasNode(d))throw new Error("Graph does not have node: "+d);n(r,d,s==="post",u,o,l)}),l}function n(r,i,s,o,l,u){e.has(o,i)||(o[i]=!0,s||u.push(i),e.each(l(i),function(d){n(r,d,s,o,l,u)}),s&&u.push(i))}return jw}var Ow,E4;function Qde(){if(E4)return Ow;E4=1;var e=Pq();Ow=t;function t(n,r){return e(n,r,"post")}return Ow}var Lw,N4;function Jde(){if(N4)return Lw;N4=1;var e=Pq();Lw=t;function t(n,r){return e(n,r,"pre")}return Lw}var Pw,T4;function efe(){if(T4)return Pw;T4=1;var e=xi(),t=H2(),n=Rq();Pw=r;function r(i,s){var o=new t,l={},u=new n,d;function h(g){var b=g.v===d?g.w:g.v,v=u.priority(b);if(v!==void 0){var S=s(g);S<v&&(l[b]=d,u.decrease(b,S))}}if(i.nodeCount()===0)return o;e.each(i.nodes(),function(g){u.add(g,Number.POSITIVE_INFINITY),o.setNode(g)}),u.decrease(i.nodes()[0],0);for(var p=!1;u.size()>0;){if(d=u.removeMin(),e.has(l,d))o.setEdge(d,l[d]);else{if(p)throw new Error("Input graph is not connected: "+i);p=!0}i.nodeEdges(d).forEach(h)}return o}return Pw}var Iw,A4;function tfe(){return A4||(A4=1,Iw={components:Wde(),dijkstra:jq(),dijkstraAll:Kde(),findCycles:Yde(),floydWarshall:Xde(),isAcyclic:Zde(),postorder:Qde(),preorder:Jde(),prim:efe(),tarjan:Oq(),topsort:Lq()}),Iw}var Bw,M4;function nfe(){if(M4)return Bw;M4=1;var e=$de();return Bw={Graph:e.Graph,json:Gde(),alg:tfe(),version:e.version},Bw}var zw,_4;function Oi(){if(_4)return zw;_4=1;var e;if(typeof N2=="function")try{e=nfe()}catch{}return e||(e=window.graphlib),zw=e,zw}var Vw,D4;function rfe(){if(D4)return Vw;D4=1;var e=aq(),t=1,n=4;function r(i){return e(i,t|n)}return Vw=r,Vw}var qw,R4;function Ig(){if(R4)return qw;R4=1;var e=_c(),t=qs(),n=Ag(),r=bi();function i(s,o,l){if(!r(l))return!1;var u=typeof o;return(u=="number"?t(l)&&n(o,l.length):u=="string"&&o in l)?e(l[o],s):!1}return qw=i,qw}var Hw,j4;function ife(){if(j4)return Hw;j4=1;var e=Pg(),t=_c(),n=Ig(),r=nl(),i=Object.prototype,s=i.hasOwnProperty,o=e(function(l,u){l=Object(l);var d=-1,h=u.length,p=h>2?u[2]:void 0;for(p&&n(u[0],u[1],p)&&(h=1);++d<h;)for(var g=u[d],b=r(g),v=-1,S=b.length;++v<S;){var w=b[v],k=l[w];(k===void 0||t(k,i[w])&&!s.call(l,w))&&(l[w]=g[w])}return l});return Hw=o,Hw}var Fw,O4;function sfe(){if(O4)return Fw;O4=1;var e=Hs(),t=qs(),n=Wo();function r(i){return function(s,o,l){var u=Object(s);if(!t(s)){var d=e(o,3);s=n(s),o=function(p){return d(u[p],p,u)}}var h=i(s,o,l);return h>-1?u[d?s[h]:h]:void 0}}return Fw=r,Fw}var Uw,L4;function ofe(){if(L4)return Uw;L4=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return Uw=t,Uw}var $w,P4;function afe(){if(P4)return $w;P4=1;var e=ofe(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return $w=n,$w}var Gw,I4;function lfe(){if(I4)return Gw;I4=1;var e=afe(),t=bi(),n=Oc(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function u(d){if(typeof d=="number")return d;if(n(d))return r;if(t(d)){var h=typeof d.valueOf=="function"?d.valueOf():d;d=t(h)?h+"":h}if(typeof d!="string")return d===0?d:+d;d=e(d);var p=s.test(d);return p||o.test(d)?l(d.slice(2),p?2:8):i.test(d)?r:+d}return Gw=u,Gw}var Ww,B4;function Iq(){if(B4)return Ww;B4=1;var e=lfe(),t=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=e(i),i===t||i===-t){var s=i<0?-1:1;return s*n}return i===i?i:0}return Ww=r,Ww}var Kw,z4;function cfe(){if(z4)return Kw;z4=1;var e=Iq();function t(n){var r=e(n),i=r%1;return r===r?i?r-i:r:0}return Kw=t,Kw}var Yw,V4;function ufe(){if(V4)return Yw;V4=1;var e=Mq(),t=Hs(),n=cfe(),r=Math.max;function i(s,o,l){var u=s==null?0:s.length;if(!u)return-1;var d=l==null?0:n(l);return d<0&&(d=r(u+d,0)),e(s,t(o,3),d)}return Yw=i,Yw}var Xw,q4;function dfe(){if(q4)return Xw;q4=1;var e=sfe(),t=ufe(),n=e(t);return Xw=n,Xw}var Zw,H4;function Bq(){if(H4)return Zw;H4=1;var e=q2();function t(n){var r=n==null?0:n.length;return r?e(n,1):[]}return Zw=t,Zw}var Qw,F4;function ffe(){if(F4)return Qw;F4=1;var e=I2(),t=lq(),n=nl();function r(i,s){return i==null?i:e(i,t(s),n)}return Qw=r,Qw}var Jw,U4;function hfe(){if(U4)return Jw;U4=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return Jw=e,Jw}var eS,$4;function pfe(){if($4)return eS;$4=1;var e=Ng(),t=B2(),n=Hs();function r(i,s){var o={};return s=n(s,3),t(i,function(l,u,d){e(o,u,s(l,u,d))}),o}return eS=r,eS}var tS,G4;function F2(){if(G4)return tS;G4=1;var e=Oc();function t(n,r,i){for(var s=-1,o=n.length;++s<o;){var l=n[s],u=r(l);if(u!=null&&(d===void 0?u===u&&!e(u):i(u,d)))var d=u,h=l}return h}return tS=t,tS}var nS,W4;function mfe(){if(W4)return nS;W4=1;function e(t,n){return t>n}return nS=e,nS}var rS,K4;function gfe(){if(K4)return rS;K4=1;var e=F2(),t=mfe(),n=rl();function r(i){return i&&i.length?e(i,n,t):void 0}return rS=r,rS}var iS,Y4;function zq(){if(Y4)return iS;Y4=1;var e=Ng(),t=_c();function n(r,i,s){(s!==void 0&&!t(r[i],s)||s===void 0&&!(i in r))&&e(r,i,s)}return iS=n,iS}var sS,X4;function yfe(){if(X4)return sS;X4=1;var e=el(),t=Dg(),n=cs(),r="[object Object]",i=Function.prototype,s=Object.prototype,o=i.toString,l=s.hasOwnProperty,u=o.call(Object);function d(h){if(!n(h)||e(h)!=r)return!1;var p=t(h);if(p===null)return!0;var g=l.call(p,"constructor")&&p.constructor;return typeof g=="function"&&g instanceof g&&o.call(g)==u}return sS=d,sS}var oS,Z4;function Vq(){if(Z4)return oS;Z4=1;function e(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}return oS=e,oS}var aS,Q4;function bfe(){if(Q4)return aS;Q4=1;var e=mf(),t=nl();function n(r){return e(r,t(r))}return aS=n,aS}var lS,J4;function xfe(){if(J4)return lS;J4=1;var e=zq(),t=YV(),n=iq(),r=XV(),i=oq(),s=gf(),o=Cn(),l=_q(),u=Rc(),d=pf(),h=bi(),p=yfe(),g=yf(),b=Vq(),v=bfe();function S(w,k,T,E,N,A,_){var j=b(w,T),R=b(k,T),I=_.get(R);if(I){e(w,T,I);return}var B=A?A(j,R,T+"",w,k,_):void 0,U=B===void 0;if(U){var V=o(R),F=!V&&u(R),L=!V&&!F&&g(R);B=R,V||F||L?o(j)?B=j:l(j)?B=r(j):F?(U=!1,B=t(R,!0)):L?(U=!1,B=n(R,!0)):B=[]:p(R)||s(R)?(B=j,s(j)?B=v(j):(!h(j)||d(j))&&(B=i(R))):U=!1}U&&(_.set(R,B),N(B,R,E,A,_),_.delete(R)),e(w,T,B)}return lS=S,lS}var cS,e5;function vfe(){if(e5)return cS;e5=1;var e=Eg(),t=zq(),n=I2(),r=xfe(),i=bi(),s=nl(),o=Vq();function l(u,d,h,p,g){u!==d&&n(d,function(b,v){if(g||(g=new e),i(b))r(u,d,v,h,l,p,g);else{var S=p?p(o(u,v),b,v+"",u,d,g):void 0;S===void 0&&(S=b),t(u,v,S)}},s)}return cS=l,cS}var uS,t5;function wfe(){if(t5)return uS;t5=1;var e=Pg(),t=Ig();function n(r){return e(function(i,s){var o=-1,l=s.length,u=l>1?s[l-1]:void 0,d=l>2?s[2]:void 0;for(u=r.length>3&&typeof u=="function"?(l--,u):void 0,d&&t(s[0],s[1],d)&&(u=l<3?void 0:u,l=1),i=Object(i);++o<l;){var h=s[o];h&&r(i,h,o,u)}return i})}return uS=n,uS}var dS,n5;function Sfe(){if(n5)return dS;n5=1;var e=vfe(),t=wfe(),n=t(function(r,i,s){e(r,i,s)});return dS=n,dS}var fS,r5;function qq(){if(r5)return fS;r5=1;function e(t,n){return t<n}return fS=e,fS}var hS,i5;function Cfe(){if(i5)return hS;i5=1;var e=F2(),t=qq(),n=rl();function r(i){return i&&i.length?e(i,n,t):void 0}return hS=r,hS}var pS,s5;function kfe(){if(s5)return pS;s5=1;var e=F2(),t=Hs(),n=qq();function r(i,s){return i&&i.length?e(i,t(s,2),n):void 0}return pS=r,pS}var mS,o5;function Efe(){if(o5)return mS;o5=1;var e=Pi(),t=function(){return e.Date.now()};return mS=t,mS}var gS,a5;function Nfe(){if(a5)return gS;a5=1;var e=Tg(),t=Og(),n=Ag(),r=bi(),i=bf();function s(o,l,u,d){if(!r(o))return o;l=t(l,o);for(var h=-1,p=l.length,g=p-1,b=o;b!=null&&++h<p;){var v=i(l[h]),S=u;if(v==="__proto__"||v==="constructor"||v==="prototype")return o;if(h!=g){var w=b[v];S=d?d(w,v,b):void 0,S===void 0&&(S=r(w)?w:n(l[h+1])?[]:{})}e(b,v,S),b=b[v]}return o}return gS=s,gS}var yS,l5;function Tfe(){if(l5)return yS;l5=1;var e=Lg(),t=Nfe(),n=Og();function r(i,s,o){for(var l=-1,u=s.length,d={};++l<u;){var h=s[l],p=e(i,h);o(p,h)&&t(d,n(h,i),p)}return d}return yS=r,yS}var bS,c5;function Afe(){if(c5)return bS;c5=1;var e=Tfe(),t=xq();function n(r,i){return e(r,i,function(s,o){return t(r,o)})}return bS=n,bS}var xS,u5;function Mfe(){if(u5)return xS;u5=1;var e=Bq(),t=Tq(),n=Aq();function r(i){return n(t(i,void 0,e),i+"")}return xS=r,xS}var vS,d5;function _fe(){if(d5)return vS;d5=1;var e=Afe(),t=Mfe(),n=t(function(r,i){return r==null?{}:e(r,i)});return vS=n,vS}var wS,f5;function Dfe(){if(f5)return wS;f5=1;var e=Math.ceil,t=Math.max;function n(r,i,s,o){for(var l=-1,u=t(e((i-r)/(s||1)),0),d=Array(u);u--;)d[o?u:++l]=r,r+=s;return d}return wS=n,wS}var SS,h5;function Rfe(){if(h5)return SS;h5=1;var e=Dfe(),t=Ig(),n=Iq();function r(i){return function(s,o,l){return l&&typeof l!="number"&&t(s,o,l)&&(o=l=void 0),s=n(s),o===void 0?(o=s,s=0):o=n(o),l=l===void 0?s<o?1:-1:n(l),e(s,o,l,i)}}return SS=r,SS}var CS,p5;function jfe(){if(p5)return CS;p5=1;var e=Rfe(),t=e();return CS=t,CS}var kS,m5;function Ofe(){if(m5)return kS;m5=1;function e(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}return kS=e,kS}var ES,g5;function Lfe(){if(g5)return ES;g5=1;var e=Oc();function t(n,r){if(n!==r){var i=n!==void 0,s=n===null,o=n===n,l=e(n),u=r!==void 0,d=r===null,h=r===r,p=e(r);if(!d&&!p&&!l&&n>r||l&&u&&h&&!d&&!p||s&&u&&h||!i&&h||!o)return 1;if(!s&&!l&&!p&&n<r||p&&i&&o&&!s&&!l||d&&i&&o||!u&&o||!h)return-1}return 0}return ES=t,ES}var NS,y5;function Pfe(){if(y5)return NS;y5=1;var e=Lfe();function t(n,r,i){for(var s=-1,o=n.criteria,l=r.criteria,u=o.length,d=i.length;++s<u;){var h=e(o[s],l[s]);if(h){if(s>=d)return h;var p=i[s];return h*(p=="desc"?-1:1)}}return n.index-r.index}return NS=t,NS}var TS,b5;function Ife(){if(b5)return TS;b5=1;var e=jg(),t=Lg(),n=Hs(),r=kq(),i=Ofe(),s=Mg(),o=Pfe(),l=rl(),u=Cn();function d(h,p,g){p.length?p=e(p,function(S){return u(S)?function(w){return t(w,S.length===1?S[0]:S)}:S}):p=[l];var b=-1;p=e(p,s(n));var v=r(h,function(S,w,k){var T=e(p,function(E){return E(S)});return{criteria:T,index:++b,value:S}});return i(v,function(S,w){return o(S,w,g)})}return TS=d,TS}var AS,x5;function Bfe(){if(x5)return AS;x5=1;var e=q2(),t=Ife(),n=Pg(),r=Ig(),i=n(function(s,o){if(s==null)return[];var l=o.length;return l>1&&r(s,o[0],o[1])?o=[]:l>2&&r(o[0],o[1],o[2])&&(o=[o[0]]),t(s,e(o,1),[])});return AS=i,AS}var MS,v5;function zfe(){if(v5)return MS;v5=1;var e=yq(),t=0;function n(r){var i=++t;return e(r)+i}return MS=n,MS}var _S,w5;function Vfe(){if(w5)return _S;w5=1;function e(t,n,r){for(var i=-1,s=t.length,o=n.length,l={};++i<s;){var u=i<o?n[i]:void 0;r(l,t[i],u)}return l}return _S=e,_S}var DS,S5;function qfe(){if(S5)return DS;S5=1;var e=Tg(),t=Vfe();function n(r,i){return t(r||[],i||[],e)}return DS=n,DS}var RS,C5;function Ut(){if(C5)return RS;C5=1;var e;if(typeof N2=="function")try{e={cloneDeep:rfe(),constant:P2(),defaults:ife(),each:uq(),filter:wq(),find:dfe(),flatten:Bq(),forEach:cq(),forIn:ffe(),has:Sq(),isUndefined:Cq(),last:hfe(),map:Eq(),mapValues:pfe(),max:gfe(),merge:Sfe(),min:Cfe(),minBy:kfe(),now:Efe(),pick:_fe(),range:jfe(),reduce:Nq(),sortBy:Bfe(),uniqueId:zfe(),values:Dq(),zipObject:qfe()}}catch{}return e||(e=window._),RS=e,RS}var jS,k5;function Hfe(){if(k5)return jS;k5=1,jS=e;function e(){var r={};r._next=r._prev=r,this._sentinel=r}e.prototype.dequeue=function(){var r=this._sentinel,i=r._prev;if(i!==r)return t(i),i},e.prototype.enqueue=function(r){var i=this._sentinel;r._prev&&r._next&&t(r),r._next=i._next,i._next._prev=r,i._next=r,r._prev=i},e.prototype.toString=function(){for(var r=[],i=this._sentinel,s=i._prev;s!==i;)r.push(JSON.stringify(s,n)),s=s._prev;return"["+r.join(", ")+"]"};function t(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function n(r,i){if(r!=="_next"&&r!=="_prev")return i}return jS}var OS,E5;function Ffe(){if(E5)return OS;E5=1;var e=Ut(),t=Oi().Graph,n=Hfe();OS=i;var r=e.constant(1);function i(d,h){if(d.nodeCount()<=1)return[];var p=l(d,h||r),g=s(p.graph,p.buckets,p.zeroIdx);return e.flatten(e.map(g,function(b){return d.outEdges(b.v,b.w)}),!0)}function s(d,h,p){for(var g=[],b=h[h.length-1],v=h[0],S;d.nodeCount();){for(;S=v.dequeue();)o(d,h,p,S);for(;S=b.dequeue();)o(d,h,p,S);if(d.nodeCount()){for(var w=h.length-2;w>0;--w)if(S=h[w].dequeue(),S){g=g.concat(o(d,h,p,S,!0));break}}}return g}function o(d,h,p,g,b){var v=b?[]:void 0;return e.forEach(d.inEdges(g.v),function(S){var w=d.edge(S),k=d.node(S.v);b&&v.push({v:S.v,w:S.w}),k.out-=w,u(h,p,k)}),e.forEach(d.outEdges(g.v),function(S){var w=d.edge(S),k=S.w,T=d.node(k);T.in-=w,u(h,p,T)}),d.removeNode(g.v),v}function l(d,h){var p=new t,g=0,b=0;e.forEach(d.nodes(),function(w){p.setNode(w,{v:w,in:0,out:0})}),e.forEach(d.edges(),function(w){var k=p.edge(w.v,w.w)||0,T=h(w),E=k+T;p.setEdge(w.v,w.w,E),b=Math.max(b,p.node(w.v).out+=T),g=Math.max(g,p.node(w.w).in+=T)});var v=e.range(b+g+3).map(function(){return new n}),S=g+1;return e.forEach(p.nodes(),function(w){u(v,S,p.node(w))}),{graph:p,buckets:v,zeroIdx:S}}function u(d,h,p){p.out?p.in?d[p.out-p.in+h].enqueue(p):d[d.length-1].enqueue(p):d[0].enqueue(p)}return OS}var LS,N5;function Ufe(){if(N5)return LS;N5=1;var e=Ut(),t=Ffe();LS={run:n,undo:i};function n(s){var o=s.graph().acyclicer==="greedy"?t(s,l(s)):r(s);e.forEach(o,function(u){var d=s.edge(u);s.removeEdge(u),d.forwardName=u.name,d.reversed=!0,s.setEdge(u.w,u.v,d,e.uniqueId("rev"))});function l(u){return function(d){return u.edge(d).weight}}}function r(s){var o=[],l={},u={};function d(h){e.has(u,h)||(u[h]=!0,l[h]=!0,e.forEach(s.outEdges(h),function(p){e.has(l,p.w)?o.push(p):d(p.w)}),delete l[h])}return e.forEach(s.nodes(),d),o}function i(s){e.forEach(s.edges(),function(o){var l=s.edge(o);if(l.reversed){s.removeEdge(o);var u=l.forwardName;delete l.reversed,delete l.forwardName,s.setEdge(o.w,o.v,l,u)}})}return LS}var PS,T5;function Tr(){if(T5)return PS;T5=1;var e=Ut(),t=Oi().Graph;PS={addDummyNode:n,simplify:r,asNonCompoundGraph:i,successorWeights:s,predecessorWeights:o,intersectRect:l,buildLayerMatrix:u,normalizeRanks:d,removeEmptyRanks:h,addBorderNode:p,maxRank:g,partition:b,time:v,notime:S};function n(w,k,T,E){var N;do N=e.uniqueId(E);while(w.hasNode(N));return T.dummy=k,w.setNode(N,T),N}function r(w){var k=new t().setGraph(w.graph());return e.forEach(w.nodes(),function(T){k.setNode(T,w.node(T))}),e.forEach(w.edges(),function(T){var E=k.edge(T.v,T.w)||{weight:0,minlen:1},N=w.edge(T);k.setEdge(T.v,T.w,{weight:E.weight+N.weight,minlen:Math.max(E.minlen,N.minlen)})}),k}function i(w){var k=new t({multigraph:w.isMultigraph()}).setGraph(w.graph());return e.forEach(w.nodes(),function(T){w.children(T).length||k.setNode(T,w.node(T))}),e.forEach(w.edges(),function(T){k.setEdge(T,w.edge(T))}),k}function s(w){var k=e.map(w.nodes(),function(T){var E={};return e.forEach(w.outEdges(T),function(N){E[N.w]=(E[N.w]||0)+w.edge(N).weight}),E});return e.zipObject(w.nodes(),k)}function o(w){var k=e.map(w.nodes(),function(T){var E={};return e.forEach(w.inEdges(T),function(N){E[N.v]=(E[N.v]||0)+w.edge(N).weight}),E});return e.zipObject(w.nodes(),k)}function l(w,k){var T=w.x,E=w.y,N=k.x-T,A=k.y-E,_=w.width/2,j=w.height/2;if(!N&&!A)throw new Error("Not possible to find intersection inside of the rectangle");var R,I;return Math.abs(A)*_>Math.abs(N)*j?(A<0&&(j=-j),R=j*N/A,I=j):(N<0&&(_=-_),R=_,I=_*A/N),{x:T+R,y:E+I}}function u(w){var k=e.map(e.range(g(w)+1),function(){return[]});return e.forEach(w.nodes(),function(T){var E=w.node(T),N=E.rank;e.isUndefined(N)||(k[N][E.order]=T)}),k}function d(w){var k=e.min(e.map(w.nodes(),function(T){return w.node(T).rank}));e.forEach(w.nodes(),function(T){var E=w.node(T);e.has(E,"rank")&&(E.rank-=k)})}function h(w){var k=e.min(e.map(w.nodes(),function(A){return w.node(A).rank})),T=[];e.forEach(w.nodes(),function(A){var _=w.node(A).rank-k;T[_]||(T[_]=[]),T[_].push(A)});var E=0,N=w.graph().nodeRankFactor;e.forEach(T,function(A,_){e.isUndefined(A)&&_%N!==0?--E:E&&e.forEach(A,function(j){w.node(j).rank+=E})})}function p(w,k,T,E){var N={width:0,height:0};return arguments.length>=4&&(N.rank=T,N.order=E),n(w,"border",N,k)}function g(w){return e.max(e.map(w.nodes(),function(k){var T=w.node(k).rank;if(!e.isUndefined(T))return T}))}function b(w,k){var T={lhs:[],rhs:[]};return e.forEach(w,function(E){k(E)?T.lhs.push(E):T.rhs.push(E)}),T}function v(w,k){var T=e.now();try{return k()}finally{console.log(w+" time: "+(e.now()-T)+"ms")}}function S(w,k){return k()}return PS}var IS,A5;function $fe(){if(A5)return IS;A5=1;var e=Ut(),t=Tr();IS={run:n,undo:i};function n(s){s.graph().dummyChains=[],e.forEach(s.edges(),function(o){r(s,o)})}function r(s,o){var l=o.v,u=s.node(l).rank,d=o.w,h=s.node(d).rank,p=o.name,g=s.edge(o),b=g.labelRank;if(h!==u+1){s.removeEdge(o);var v,S,w;for(w=0,++u;u<h;++w,++u)g.points=[],S={width:0,height:0,edgeLabel:g,edgeObj:o,rank:u},v=t.addDummyNode(s,"edge",S,"_d"),u===b&&(S.width=g.width,S.height=g.height,S.dummy="edge-label",S.labelpos=g.labelpos),s.setEdge(l,v,{weight:g.weight},p),w===0&&s.graph().dummyChains.push(v),l=v;s.setEdge(l,d,{weight:g.weight},p)}}function i(s){e.forEach(s.graph().dummyChains,function(o){var l=s.node(o),u=l.edgeLabel,d;for(s.setEdge(l.edgeObj,u);l.dummy;)d=s.successors(o)[0],s.removeNode(o),u.points.push({x:l.x,y:l.y}),l.dummy==="edge-label"&&(u.x=l.x,u.y=l.y,u.width=l.width,u.height=l.height),o=d,l=s.node(o)})}return IS}var BS,M5;function Dm(){if(M5)return BS;M5=1;var e=Ut();BS={longestPath:t,slack:n};function t(r){var i={};function s(o){var l=r.node(o);if(e.has(i,o))return l.rank;i[o]=!0;var u=e.min(e.map(r.outEdges(o),function(d){return s(d.w)-r.edge(d).minlen}));return(u===Number.POSITIVE_INFINITY||u===void 0||u===null)&&(u=0),l.rank=u}e.forEach(r.sources(),s)}function n(r,i){return r.node(i.w).rank-r.node(i.v).rank-r.edge(i).minlen}return BS}var zS,_5;function Hq(){if(_5)return zS;_5=1;var e=Ut(),t=Oi().Graph,n=Dm().slack;zS=r;function r(l){var u=new t({directed:!1}),d=l.nodes()[0],h=l.nodeCount();u.setNode(d,{});for(var p,g;i(u,l)<h;)p=s(u,l),g=u.hasNode(p.v)?n(l,p):-n(l,p),o(u,l,g);return u}function i(l,u){function d(h){e.forEach(u.nodeEdges(h),function(p){var g=p.v,b=h===g?p.w:g;!l.hasNode(b)&&!n(u,p)&&(l.setNode(b,{}),l.setEdge(h,b,{}),d(b))})}return e.forEach(l.nodes(),d),l.nodeCount()}function s(l,u){return e.minBy(u.edges(),function(d){if(l.hasNode(d.v)!==l.hasNode(d.w))return n(u,d)})}function o(l,u,d){e.forEach(l.nodes(),function(h){u.node(h).rank+=d})}return zS}var VS,D5;function Gfe(){if(D5)return VS;D5=1;var e=Ut(),t=Hq(),n=Dm().slack,r=Dm().longestPath,i=Oi().alg.preorder,s=Oi().alg.postorder,o=Tr().simplify;VS=l,l.initLowLimValues=p,l.initCutValues=u,l.calcCutValue=h,l.leaveEdge=b,l.enterEdge=v,l.exchangeEdges=S;function l(E){E=o(E),r(E);var N=t(E);p(N),u(N,E);for(var A,_;A=b(N);)_=v(N,E,A),S(N,E,A,_)}function u(E,N){var A=s(E,E.nodes());A=A.slice(0,A.length-1),e.forEach(A,function(_){d(E,N,_)})}function d(E,N,A){var _=E.node(A),j=_.parent;E.edge(A,j).cutvalue=h(E,N,A)}function h(E,N,A){var _=E.node(A),j=_.parent,R=!0,I=N.edge(A,j),B=0;return I||(R=!1,I=N.edge(j,A)),B=I.weight,e.forEach(N.nodeEdges(A),function(U){var V=U.v===A,F=V?U.w:U.v;if(F!==j){var L=V===R,H=N.edge(U).weight;if(B+=L?H:-H,k(E,A,F)){var O=E.edge(A,F).cutvalue;B+=L?-O:O}}}),B}function p(E,N){arguments.length<2&&(N=E.nodes()[0]),g(E,{},1,N)}function g(E,N,A,_,j){var R=A,I=E.node(_);return N[_]=!0,e.forEach(E.neighbors(_),function(B){e.has(N,B)||(A=g(E,N,A,B,_))}),I.low=R,I.lim=A++,j?I.parent=j:delete I.parent,A}function b(E){return e.find(E.edges(),function(N){return E.edge(N).cutvalue<0})}function v(E,N,A){var _=A.v,j=A.w;N.hasEdge(_,j)||(_=A.w,j=A.v);var R=E.node(_),I=E.node(j),B=R,U=!1;R.lim>I.lim&&(B=I,U=!0);var V=e.filter(N.edges(),function(F){return U===T(E,E.node(F.v),B)&&U!==T(E,E.node(F.w),B)});return e.minBy(V,function(F){return n(N,F)})}function S(E,N,A,_){var j=A.v,R=A.w;E.removeEdge(j,R),E.setEdge(_.v,_.w,{}),p(E),u(E,N),w(E,N)}function w(E,N){var A=e.find(E.nodes(),function(j){return!N.node(j).parent}),_=i(E,A);_=_.slice(1),e.forEach(_,function(j){var R=E.node(j).parent,I=N.edge(j,R),B=!1;I||(I=N.edge(R,j),B=!0),N.node(j).rank=N.node(R).rank+(B?I.minlen:-I.minlen)})}function k(E,N,A){return E.hasEdge(N,A)}function T(E,N,A){return A.low<=N.lim&&N.lim<=A.lim}return VS}var qS,R5;function Wfe(){if(R5)return qS;R5=1;var e=Dm(),t=e.longestPath,n=Hq(),r=Gfe();qS=i;function i(u){switch(u.graph().ranker){case"network-simplex":l(u);break;case"tight-tree":o(u);break;case"longest-path":s(u);break;default:l(u)}}var s=t;function o(u){t(u),n(u)}function l(u){r(u)}return qS}var HS,j5;function Kfe(){if(j5)return HS;j5=1;var e=Ut();HS=t;function t(i){var s=r(i);e.forEach(i.graph().dummyChains,function(o){for(var l=i.node(o),u=l.edgeObj,d=n(i,s,u.v,u.w),h=d.path,p=d.lca,g=0,b=h[g],v=!0;o!==u.w;){if(l=i.node(o),v){for(;(b=h[g])!==p&&i.node(b).maxRank<l.rank;)g++;b===p&&(v=!1)}if(!v){for(;g<h.length-1&&i.node(b=h[g+1]).minRank<=l.rank;)g++;b=h[g]}i.setParent(o,b),o=i.successors(o)[0]}})}function n(i,s,o,l){var u=[],d=[],h=Math.min(s[o].low,s[l].low),p=Math.max(s[o].lim,s[l].lim),g,b;g=o;do g=i.parent(g),u.push(g);while(g&&(s[g].low>h||p>s[g].lim));for(b=g,g=l;(g=i.parent(g))!==b;)d.push(g);return{path:u.concat(d.reverse()),lca:b}}function r(i){var s={},o=0;function l(u){var d=o;e.forEach(i.children(u),l),s[u]={low:d,lim:o++}}return e.forEach(i.children(),l),s}return HS}var FS,O5;function Yfe(){if(O5)return FS;O5=1;var e=Ut(),t=Tr();FS={run:n,cleanup:o};function n(l){var u=t.addDummyNode(l,"root",{},"_root"),d=i(l),h=e.max(e.values(d))-1,p=2*h+1;l.graph().nestingRoot=u,e.forEach(l.edges(),function(b){l.edge(b).minlen*=p});var g=s(l)+1;e.forEach(l.children(),function(b){r(l,u,p,g,h,d,b)}),l.graph().nodeRankFactor=p}function r(l,u,d,h,p,g,b){var v=l.children(b);if(!v.length){b!==u&&l.setEdge(u,b,{weight:0,minlen:d});return}var S=t.addBorderNode(l,"_bt"),w=t.addBorderNode(l,"_bb"),k=l.node(b);l.setParent(S,b),k.borderTop=S,l.setParent(w,b),k.borderBottom=w,e.forEach(v,function(T){r(l,u,d,h,p,g,T);var E=l.node(T),N=E.borderTop?E.borderTop:T,A=E.borderBottom?E.borderBottom:T,_=E.borderTop?h:2*h,j=N!==A?1:p-g[b]+1;l.setEdge(S,N,{weight:_,minlen:j,nestingEdge:!0}),l.setEdge(A,w,{weight:_,minlen:j,nestingEdge:!0})}),l.parent(b)||l.setEdge(u,S,{weight:0,minlen:p+g[b]})}function i(l){var u={};function d(h,p){var g=l.children(h);g&&g.length&&e.forEach(g,function(b){d(b,p+1)}),u[h]=p}return e.forEach(l.children(),function(h){d(h,1)}),u}function s(l){return e.reduce(l.edges(),function(u,d){return u+l.edge(d).weight},0)}function o(l){var u=l.graph();l.removeNode(u.nestingRoot),delete u.nestingRoot,e.forEach(l.edges(),function(d){var h=l.edge(d);h.nestingEdge&&l.removeEdge(d)})}return FS}var US,L5;function Xfe(){if(L5)return US;L5=1;var e=Ut(),t=Tr();US=n;function n(i){function s(o){var l=i.children(o),u=i.node(o);if(l.length&&e.forEach(l,s),e.has(u,"minRank")){u.borderLeft=[],u.borderRight=[];for(var d=u.minRank,h=u.maxRank+1;d<h;++d)r(i,"borderLeft","_bl",o,u,d),r(i,"borderRight","_br",o,u,d)}}e.forEach(i.children(),s)}function r(i,s,o,l,u,d){var h={width:0,height:0,rank:d,borderType:s},p=u[s][d-1],g=t.addDummyNode(i,"border",h,o);u[s][d]=g,i.setParent(g,l),p&&i.setEdge(p,g,{weight:1})}return US}var $S,P5;function Zfe(){if(P5)return $S;P5=1;var e=Ut();$S={adjust:t,undo:n};function t(d){var h=d.graph().rankdir.toLowerCase();(h==="lr"||h==="rl")&&r(d)}function n(d){var h=d.graph().rankdir.toLowerCase();(h==="bt"||h==="rl")&&s(d),(h==="lr"||h==="rl")&&(l(d),r(d))}function r(d){e.forEach(d.nodes(),function(h){i(d.node(h))}),e.forEach(d.edges(),function(h){i(d.edge(h))})}function i(d){var h=d.width;d.width=d.height,d.height=h}function s(d){e.forEach(d.nodes(),function(h){o(d.node(h))}),e.forEach(d.edges(),function(h){var p=d.edge(h);e.forEach(p.points,o),e.has(p,"y")&&o(p)})}function o(d){d.y=-d.y}function l(d){e.forEach(d.nodes(),function(h){u(d.node(h))}),e.forEach(d.edges(),function(h){var p=d.edge(h);e.forEach(p.points,u),e.has(p,"x")&&u(p)})}function u(d){var h=d.x;d.x=d.y,d.y=h}return $S}var GS,I5;function Qfe(){if(I5)return GS;I5=1;var e=Ut();GS=t;function t(n){var r={},i=e.filter(n.nodes(),function(d){return!n.children(d).length}),s=e.max(e.map(i,function(d){return n.node(d).rank})),o=e.map(e.range(s+1),function(){return[]});function l(d){if(!e.has(r,d)){r[d]=!0;var h=n.node(d);o[h.rank].push(d),e.forEach(n.successors(d),l)}}var u=e.sortBy(i,function(d){return n.node(d).rank});return e.forEach(u,l),o}return GS}var WS,B5;function Jfe(){if(B5)return WS;B5=1;var e=Ut();WS=t;function t(r,i){for(var s=0,o=1;o<i.length;++o)s+=n(r,i[o-1],i[o]);return s}function n(r,i,s){for(var o=e.zipObject(s,e.map(s,function(g,b){return b})),l=e.flatten(e.map(i,function(g){return e.sortBy(e.map(r.outEdges(g),function(b){return{pos:o[b.w],weight:r.edge(b).weight}}),"pos")}),!0),u=1;u<s.length;)u<<=1;var d=2*u-1;u-=1;var h=e.map(new Array(d),function(){return 0}),p=0;return e.forEach(l.forEach(function(g){var b=g.pos+u;h[b]+=g.weight;for(var v=0;b>0;)b%2&&(v+=h[b+1]),b=b-1>>1,h[b]+=g.weight;p+=g.weight*v})),p}return WS}var KS,z5;function ehe(){if(z5)return KS;z5=1;var e=Ut();KS=t;function t(n,r){return e.map(r,function(i){var s=n.inEdges(i);if(s.length){var o=e.reduce(s,function(l,u){var d=n.edge(u),h=n.node(u.v);return{sum:l.sum+d.weight*h.order,weight:l.weight+d.weight}},{sum:0,weight:0});return{v:i,barycenter:o.sum/o.weight,weight:o.weight}}else return{v:i}})}return KS}var YS,V5;function the(){if(V5)return YS;V5=1;var e=Ut();YS=t;function t(i,s){var o={};e.forEach(i,function(u,d){var h=o[u.v]={indegree:0,in:[],out:[],vs:[u.v],i:d};e.isUndefined(u.barycenter)||(h.barycenter=u.barycenter,h.weight=u.weight)}),e.forEach(s.edges(),function(u){var d=o[u.v],h=o[u.w];!e.isUndefined(d)&&!e.isUndefined(h)&&(h.indegree++,d.out.push(o[u.w]))});var l=e.filter(o,function(u){return!u.indegree});return n(l)}function n(i){var s=[];function o(d){return function(h){h.merged||(e.isUndefined(h.barycenter)||e.isUndefined(d.barycenter)||h.barycenter>=d.barycenter)&&r(d,h)}}function l(d){return function(h){h.in.push(d),--h.indegree===0&&i.push(h)}}for(;i.length;){var u=i.pop();s.push(u),e.forEach(u.in.reverse(),o(u)),e.forEach(u.out,l(u))}return e.map(e.filter(s,function(d){return!d.merged}),function(d){return e.pick(d,["vs","i","barycenter","weight"])})}function r(i,s){var o=0,l=0;i.weight&&(o+=i.barycenter*i.weight,l+=i.weight),s.weight&&(o+=s.barycenter*s.weight,l+=s.weight),i.vs=s.vs.concat(i.vs),i.barycenter=o/l,i.weight=l,i.i=Math.min(s.i,i.i),s.merged=!0}return YS}var XS,q5;function nhe(){if(q5)return XS;q5=1;var e=Ut(),t=Tr();XS=n;function n(s,o){var l=t.partition(s,function(S){return e.has(S,"barycenter")}),u=l.lhs,d=e.sortBy(l.rhs,function(S){return-S.i}),h=[],p=0,g=0,b=0;u.sort(i(!!o)),b=r(h,d,b),e.forEach(u,function(S){b+=S.vs.length,h.push(S.vs),p+=S.barycenter*S.weight,g+=S.weight,b=r(h,d,b)});var v={vs:e.flatten(h,!0)};return g&&(v.barycenter=p/g,v.weight=g),v}function r(s,o,l){for(var u;o.length&&(u=e.last(o)).i<=l;)o.pop(),s.push(u.vs),l++;return l}function i(s){return function(o,l){return o.barycenter<l.barycenter?-1:o.barycenter>l.barycenter?1:s?l.i-o.i:o.i-l.i}}return XS}var ZS,H5;function rhe(){if(H5)return ZS;H5=1;var e=Ut(),t=ehe(),n=the(),r=nhe();ZS=i;function i(l,u,d,h){var p=l.children(u),g=l.node(u),b=g?g.borderLeft:void 0,v=g?g.borderRight:void 0,S={};b&&(p=e.filter(p,function(A){return A!==b&&A!==v}));var w=t(l,p);e.forEach(w,function(A){if(l.children(A.v).length){var _=i(l,A.v,d,h);S[A.v]=_,e.has(_,"barycenter")&&o(A,_)}});var k=n(w,d);s(k,S);var T=r(k,h);if(b&&(T.vs=e.flatten([b,T.vs,v],!0),l.predecessors(b).length)){var E=l.node(l.predecessors(b)[0]),N=l.node(l.predecessors(v)[0]);e.has(T,"barycenter")||(T.barycenter=0,T.weight=0),T.barycenter=(T.barycenter*T.weight+E.order+N.order)/(T.weight+2),T.weight+=2}return T}function s(l,u){e.forEach(l,function(d){d.vs=e.flatten(d.vs.map(function(h){return u[h]?u[h].vs:h}),!0)})}function o(l,u){e.isUndefined(l.barycenter)?(l.barycenter=u.barycenter,l.weight=u.weight):(l.barycenter=(l.barycenter*l.weight+u.barycenter*u.weight)/(l.weight+u.weight),l.weight+=u.weight)}return ZS}var QS,F5;function ihe(){if(F5)return QS;F5=1;var e=Ut(),t=Oi().Graph;QS=n;function n(i,s,o){var l=r(i),u=new t({compound:!0}).setGraph({root:l}).setDefaultNodeLabel(function(d){return i.node(d)});return e.forEach(i.nodes(),function(d){var h=i.node(d),p=i.parent(d);(h.rank===s||h.minRank<=s&&s<=h.maxRank)&&(u.setNode(d),u.setParent(d,p||l),e.forEach(i[o](d),function(g){var b=g.v===d?g.w:g.v,v=u.edge(b,d),S=e.isUndefined(v)?0:v.weight;u.setEdge(b,d,{weight:i.edge(g).weight+S})}),e.has(h,"minRank")&&u.setNode(d,{borderLeft:h.borderLeft[s],borderRight:h.borderRight[s]}))}),u}function r(i){for(var s;i.hasNode(s=e.uniqueId("_root")););return s}return QS}var JS,U5;function she(){if(U5)return JS;U5=1;var e=Ut();JS=t;function t(n,r,i){var s={},o;e.forEach(i,function(l){for(var u=n.parent(l),d,h;u;){if(d=n.parent(u),d?(h=s[d],s[d]=u):(h=o,o=u),h&&h!==u){r.setEdge(h,u);return}u=d}})}return JS}var eC,$5;function ohe(){if($5)return eC;$5=1;var e=Ut(),t=Qfe(),n=Jfe(),r=rhe(),i=ihe(),s=she(),o=Oi().Graph,l=Tr();eC=u;function u(g){var b=l.maxRank(g),v=d(g,e.range(1,b+1),"inEdges"),S=d(g,e.range(b-1,-1,-1),"outEdges"),w=t(g);p(g,w);for(var k=Number.POSITIVE_INFINITY,T,E=0,N=0;N<4;++E,++N){h(E%2?v:S,E%4>=2),w=l.buildLayerMatrix(g);var A=n(g,w);A<k&&(N=0,T=e.cloneDeep(w),k=A)}p(g,T)}function d(g,b,v){return e.map(b,function(S){return i(g,S,v)})}function h(g,b){var v=new o;e.forEach(g,function(S){var w=S.graph().root,k=r(S,w,v,b);e.forEach(k.vs,function(T,E){S.node(T).order=E}),s(S,v,k.vs)})}function p(g,b){e.forEach(b,function(v){e.forEach(v,function(S,w){g.node(S).order=w})})}return eC}var tC,G5;function ahe(){if(G5)return tC;G5=1;var e=Ut(),t=Oi().Graph,n=Tr();tC={positionX:v,findType1Conflicts:r,findType2Conflicts:i,addConflict:o,hasConflict:l,verticalAlignment:u,horizontalCompaction:d,alignCoordinates:g,findSmallestWidthAlignment:p,balance:b};function r(k,T){var E={};function N(A,_){var j=0,R=0,I=A.length,B=e.last(_);return e.forEach(_,function(U,V){var F=s(k,U),L=F?k.node(F).order:I;(F||U===B)&&(e.forEach(_.slice(R,V+1),function(H){e.forEach(k.predecessors(H),function(O){var q=k.node(O),K=q.order;(K<j||L<K)&&!(q.dummy&&k.node(H).dummy)&&o(E,O,H)})}),R=V+1,j=L)}),_}return e.reduce(T,N),E}function i(k,T){var E={};function N(_,j,R,I,B){var U;e.forEach(e.range(j,R),function(V){U=_[V],k.node(U).dummy&&e.forEach(k.predecessors(U),function(F){var L=k.node(F);L.dummy&&(L.order<I||L.order>B)&&o(E,F,U)})})}function A(_,j){var R=-1,I,B=0;return e.forEach(j,function(U,V){if(k.node(U).dummy==="border"){var F=k.predecessors(U);F.length&&(I=k.node(F[0]).order,N(j,B,V,R,I),B=V,R=I)}N(j,B,j.length,I,_.length)}),j}return e.reduce(T,A),E}function s(k,T){if(k.node(T).dummy)return e.find(k.predecessors(T),function(E){return k.node(E).dummy})}function o(k,T,E){if(T>E){var N=T;T=E,E=N}var A=k[T];A||(k[T]=A={}),A[E]=!0}function l(k,T,E){if(T>E){var N=T;T=E,E=N}return e.has(k[T],E)}function u(k,T,E,N){var A={},_={},j={};return e.forEach(T,function(R){e.forEach(R,function(I,B){A[I]=I,_[I]=I,j[I]=B})}),e.forEach(T,function(R){var I=-1;e.forEach(R,function(B){var U=N(B);if(U.length){U=e.sortBy(U,function(O){return j[O]});for(var V=(U.length-1)/2,F=Math.floor(V),L=Math.ceil(V);F<=L;++F){var H=U[F];_[B]===B&&I<j[H]&&!l(E,B,H)&&(_[H]=B,_[B]=A[B]=A[H],I=j[H])}}})}),{root:A,align:_}}function d(k,T,E,N,A){var _={},j=h(k,T,E,A),R=A?"borderLeft":"borderRight";function I(V,F){for(var L=j.nodes(),H=L.pop(),O={};H;)O[H]?V(H):(O[H]=!0,L.push(H),L=L.concat(F(H))),H=L.pop()}function B(V){_[V]=j.inEdges(V).reduce(function(F,L){return Math.max(F,_[L.v]+j.edge(L))},0)}function U(V){var F=j.outEdges(V).reduce(function(H,O){return Math.min(H,_[O.w]-j.edge(O))},Number.POSITIVE_INFINITY),L=k.node(V);F!==Number.POSITIVE_INFINITY&&L.borderType!==R&&(_[V]=Math.max(_[V],F))}return I(B,j.predecessors.bind(j)),I(U,j.successors.bind(j)),e.forEach(N,function(V){_[V]=_[E[V]]}),_}function h(k,T,E,N){var A=new t,_=k.graph(),j=S(_.nodesep,_.edgesep,N);return e.forEach(T,function(R){var I;e.forEach(R,function(B){var U=E[B];if(A.setNode(U),I){var V=E[I],F=A.edge(V,U);A.setEdge(V,U,Math.max(j(k,B,I),F||0))}I=B})}),A}function p(k,T){return e.minBy(e.values(T),function(E){var N=Number.NEGATIVE_INFINITY,A=Number.POSITIVE_INFINITY;return e.forIn(E,function(_,j){var R=w(k,j)/2;N=Math.max(_+R,N),A=Math.min(_-R,A)}),N-A})}function g(k,T){var E=e.values(T),N=e.min(E),A=e.max(E);e.forEach(["u","d"],function(_){e.forEach(["l","r"],function(j){var R=_+j,I=k[R],B;if(I!==T){var U=e.values(I);B=j==="l"?N-e.min(U):A-e.max(U),B&&(k[R]=e.mapValues(I,function(V){return V+B}))}})})}function b(k,T){return e.mapValues(k.ul,function(E,N){if(T)return k[T.toLowerCase()][N];var A=e.sortBy(e.map(k,N));return(A[1]+A[2])/2})}function v(k){var T=n.buildLayerMatrix(k),E=e.merge(r(k,T),i(k,T)),N={},A;e.forEach(["u","d"],function(j){A=j==="u"?T:e.values(T).reverse(),e.forEach(["l","r"],function(R){R==="r"&&(A=e.map(A,function(V){return e.values(V).reverse()}));var I=(j==="u"?k.predecessors:k.successors).bind(k),B=u(k,A,E,I),U=d(k,A,B.root,B.align,R==="r");R==="r"&&(U=e.mapValues(U,function(V){return-V})),N[j+R]=U})});var _=p(k,N);return g(N,_),b(N,k.graph().align)}function S(k,T,E){return function(N,A,_){var j=N.node(A),R=N.node(_),I=0,B;if(I+=j.width/2,e.has(j,"labelpos"))switch(j.labelpos.toLowerCase()){case"l":B=-j.width/2;break;case"r":B=j.width/2;break}if(B&&(I+=E?B:-B),B=0,I+=(j.dummy?T:k)/2,I+=(R.dummy?T:k)/2,I+=R.width/2,e.has(R,"labelpos"))switch(R.labelpos.toLowerCase()){case"l":B=R.width/2;break;case"r":B=-R.width/2;break}return B&&(I+=E?B:-B),B=0,I}}function w(k,T){return k.node(T).width}return tC}var nC,W5;function lhe(){if(W5)return nC;W5=1;var e=Ut(),t=Tr(),n=ahe().positionX;nC=r;function r(s){s=t.asNonCompoundGraph(s),i(s),e.forEach(n(s),function(o,l){s.node(l).x=o})}function i(s){var o=t.buildLayerMatrix(s),l=s.graph().ranksep,u=0;e.forEach(o,function(d){var h=e.max(e.map(d,function(p){return s.node(p).height}));e.forEach(d,function(p){s.node(p).y=u+h/2}),u+=h+l})}return nC}var rC,K5;function che(){if(K5)return rC;K5=1;var e=Ut(),t=Ufe(),n=$fe(),r=Wfe(),i=Tr().normalizeRanks,s=Kfe(),o=Tr().removeEmptyRanks,l=Yfe(),u=Xfe(),d=Zfe(),h=ohe(),p=lhe(),g=Tr(),b=Oi().Graph;rC=v;function v($,Q){var ee=Q&&Q.debugTiming?g.time:g.notime;ee("layout",function(){var de=ee("  buildLayoutGraph",function(){return I($)});ee("  runLayout",function(){S(de,ee)}),ee("  updateInputGraph",function(){w($,de)})})}function S($,Q){Q("    makeSpaceForEdgeLabels",function(){B($)}),Q("    removeSelfEdges",function(){te($)}),Q("    acyclic",function(){t.run($)}),Q("    nestingGraph.run",function(){l.run($)}),Q("    rank",function(){r(g.asNonCompoundGraph($))}),Q("    injectEdgeLabelProxies",function(){U($)}),Q("    removeEmptyRanks",function(){o($)}),Q("    nestingGraph.cleanup",function(){l.cleanup($)}),Q("    normalizeRanks",function(){i($)}),Q("    assignRankMinMax",function(){V($)}),Q("    removeEdgeLabelProxies",function(){F($)}),Q("    normalize.run",function(){n.run($)}),Q("    parentDummyChains",function(){s($)}),Q("    addBorderSegments",function(){u($)}),Q("    order",function(){h($)}),Q("    insertSelfEdges",function(){z($)}),Q("    adjustCoordinateSystem",function(){d.adjust($)}),Q("    position",function(){p($)}),Q("    positionSelfEdges",function(){G($)}),Q("    removeBorderNodes",function(){K($)}),Q("    normalize.undo",function(){n.undo($)}),Q("    fixupEdgeLabelCoords",function(){O($)}),Q("    undoCoordinateSystem",function(){d.undo($)}),Q("    translateGraph",function(){L($)}),Q("    assignNodeIntersects",function(){H($)}),Q("    reversePoints",function(){q($)}),Q("    acyclic.undo",function(){t.undo($)})}function w($,Q){e.forEach($.nodes(),function(ee){var de=$.node(ee),le=Q.node(ee);de&&(de.x=le.x,de.y=le.y,Q.children(ee).length&&(de.width=le.width,de.height=le.height))}),e.forEach($.edges(),function(ee){var de=$.edge(ee),le=Q.edge(ee);de.points=le.points,e.has(le,"x")&&(de.x=le.x,de.y=le.y)}),$.graph().width=Q.graph().width,$.graph().height=Q.graph().height}var k=["nodesep","edgesep","ranksep","marginx","marginy"],T={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},E=["acyclicer","ranker","rankdir","align"],N=["width","height"],A={width:0,height:0},_=["minlen","weight","width","height","labeloffset"],j={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},R=["labelpos"];function I($){var Q=new b({multigraph:!0,compound:!0}),ee=ae($.graph());return Q.setGraph(e.merge({},T,oe(ee,k),e.pick(ee,E))),e.forEach($.nodes(),function(de){var le=ae($.node(de));Q.setNode(de,e.defaults(oe(le,N),A)),Q.setParent(de,$.parent(de))}),e.forEach($.edges(),function(de){var le=ae($.edge(de));Q.setEdge(de,e.merge({},j,oe(le,_),e.pick(le,R)))}),Q}function B($){var Q=$.graph();Q.ranksep/=2,e.forEach($.edges(),function(ee){var de=$.edge(ee);de.minlen*=2,de.labelpos.toLowerCase()!=="c"&&(Q.rankdir==="TB"||Q.rankdir==="BT"?de.width+=de.labeloffset:de.height+=de.labeloffset)})}function U($){e.forEach($.edges(),function(Q){var ee=$.edge(Q);if(ee.width&&ee.height){var de=$.node(Q.v),le=$.node(Q.w),xe={rank:(le.rank-de.rank)/2+de.rank,e:Q};g.addDummyNode($,"edge-proxy",xe,"_ep")}})}function V($){var Q=0;e.forEach($.nodes(),function(ee){var de=$.node(ee);de.borderTop&&(de.minRank=$.node(de.borderTop).rank,de.maxRank=$.node(de.borderBottom).rank,Q=e.max(Q,de.maxRank))}),$.graph().maxRank=Q}function F($){e.forEach($.nodes(),function(Q){var ee=$.node(Q);ee.dummy==="edge-proxy"&&($.edge(ee.e).labelRank=ee.rank,$.removeNode(Q))})}function L($){var Q=Number.POSITIVE_INFINITY,ee=0,de=Number.POSITIVE_INFINITY,le=0,xe=$.graph(),_e=xe.marginx||0,Be=xe.marginy||0;function Pe(Te){var ke=Te.x,Ee=Te.y,ht=Te.width,Oe=Te.height;Q=Math.min(Q,ke-ht/2),ee=Math.max(ee,ke+ht/2),de=Math.min(de,Ee-Oe/2),le=Math.max(le,Ee+Oe/2)}e.forEach($.nodes(),function(Te){Pe($.node(Te))}),e.forEach($.edges(),function(Te){var ke=$.edge(Te);e.has(ke,"x")&&Pe(ke)}),Q-=_e,de-=Be,e.forEach($.nodes(),function(Te){var ke=$.node(Te);ke.x-=Q,ke.y-=de}),e.forEach($.edges(),function(Te){var ke=$.edge(Te);e.forEach(ke.points,function(Ee){Ee.x-=Q,Ee.y-=de}),e.has(ke,"x")&&(ke.x-=Q),e.has(ke,"y")&&(ke.y-=de)}),xe.width=ee-Q+_e,xe.height=le-de+Be}function H($){e.forEach($.edges(),function(Q){var ee=$.edge(Q),de=$.node(Q.v),le=$.node(Q.w),xe,_e;ee.points?(xe=ee.points[0],_e=ee.points[ee.points.length-1]):(ee.points=[],xe=le,_e=de),ee.points.unshift(g.intersectRect(de,xe)),ee.points.push(g.intersectRect(le,_e))})}function O($){e.forEach($.edges(),function(Q){var ee=$.edge(Q);if(e.has(ee,"x"))switch((ee.labelpos==="l"||ee.labelpos==="r")&&(ee.width-=ee.labeloffset),ee.labelpos){case"l":ee.x-=ee.width/2+ee.labeloffset;break;case"r":ee.x+=ee.width/2+ee.labeloffset;break}})}function q($){e.forEach($.edges(),function(Q){var ee=$.edge(Q);ee.reversed&&ee.points.reverse()})}function K($){e.forEach($.nodes(),function(Q){if($.children(Q).length){var ee=$.node(Q),de=$.node(ee.borderTop),le=$.node(ee.borderBottom),xe=$.node(e.last(ee.borderLeft)),_e=$.node(e.last(ee.borderRight));ee.width=Math.abs(_e.x-xe.x),ee.height=Math.abs(le.y-de.y),ee.x=xe.x+ee.width/2,ee.y=de.y+ee.height/2}}),e.forEach($.nodes(),function(Q){$.node(Q).dummy==="border"&&$.removeNode(Q)})}function te($){e.forEach($.edges(),function(Q){if(Q.v===Q.w){var ee=$.node(Q.v);ee.selfEdges||(ee.selfEdges=[]),ee.selfEdges.push({e:Q,label:$.edge(Q)}),$.removeEdge(Q)}})}function z($){var Q=g.buildLayerMatrix($);e.forEach(Q,function(ee){var de=0;e.forEach(ee,function(le,xe){var _e=$.node(le);_e.order=xe+de,e.forEach(_e.selfEdges,function(Be){g.addDummyNode($,"selfedge",{width:Be.label.width,height:Be.label.height,rank:_e.rank,order:xe+ ++de,e:Be.e,label:Be.label},"_se")}),delete _e.selfEdges})})}function G($){e.forEach($.nodes(),function(Q){var ee=$.node(Q);if(ee.dummy==="selfedge"){var de=$.node(ee.e.v),le=de.x+de.width/2,xe=de.y,_e=ee.x-le,Be=de.height/2;$.setEdge(ee.e,ee.label),$.removeNode(Q),ee.label.points=[{x:le+2*_e/3,y:xe-Be},{x:le+5*_e/6,y:xe-Be},{x:le+_e,y:xe},{x:le+5*_e/6,y:xe+Be},{x:le+2*_e/3,y:xe+Be}],ee.label.x=ee.x,ee.label.y=ee.y}})}function oe($,Q){return e.mapValues(e.pick($,Q),Number)}function ae($){var Q={};return e.forEach($,function(ee,de){Q[de.toLowerCase()]=ee}),Q}return rC}var iC,Y5;function uhe(){if(Y5)return iC;Y5=1;var e=Ut(),t=Tr(),n=Oi().Graph;iC={debugOrdering:r};function r(i){var s=t.buildLayerMatrix(i),o=new n({compound:!0,multigraph:!0}).setGraph({});return e.forEach(i.nodes(),function(l){o.setNode(l,{label:l}),o.setParent(l,"layer"+i.node(l).rank)}),e.forEach(i.edges(),function(l){o.setEdge(l.v,l.w,{},l.name)}),e.forEach(s,function(l,u){var d="layer"+u;o.setNode(d,{rank:"same"}),e.reduce(l,function(h,p){return o.setEdge(h,p,{style:"invis"}),p})}),o}return iC}var sC,X5;function dhe(){return X5||(X5=1,sC="0.8.5"),sC}var oC,Z5;function fhe(){return Z5||(Z5=1,oC={graphlib:Oi(),layout:che(),debug:uhe(),util:{time:Tr().time,notime:Tr().notime},version:dhe()}),oC}var hhe=fhe();const tp=Wd(hhe),Yl=[{id:"web-app",group:"Frontend",icon:"",label:"Web App",description:"Browser-based client",tags:["browser","client","frontend","spa","pwa","web application"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Web App",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"framework",label:"Framework",type:"select",default:"React",options:["React","Vue","Angular","Svelte"]},{key:"instances",label:"Instances",type:"number",default:3},{key:"cdn",label:"CDN Enabled",type:"boolean",default:!0},{key:"ssl",label:"SSL Enabled",type:"boolean",default:!0},{key:"staticAssets",label:"Static Assets (GB)",type:"number",default:50},{key:"logic",label:"Component Logic (Pseudo Code)",type:"textarea",placeholder:"submit -> validate -> call API -> show response",default:""}]},{id:"mobile-app",group:"Frontend",icon:"",label:"Mobile App",description:"iOS/Android client",tags:["ios","android","mobile","app","native","react native","flutter"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Mobile App",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",default:"",placeholder:"A brief description"},{key:"stack",label:"Tech Stack",type:"select",default:"React Native",options:["React Native","Flutter","Swift/Kotlin"]},{key:"pushNotifications",label:"Push Notifications",type:"boolean",default:!0},{key:"offlineSupport",label:"Offline Support",type:"boolean",default:!0},{key:"sessions",label:"Active Sessions (k)",type:"number",default:10}]},{id:"desktop-app",group:"Frontend",icon:"",label:"Desktop App",description:"Native / Electron client",tags:["desktop","electron","tauri","native","windows","mac","linux"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Desktop App",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",default:"",placeholder:"A brief description"},{key:"runtime",label:"Runtime",type:"select",default:"Electron",options:["Electron","Tauri","Native"]},{key:"autoUpdate",label:"Auto Update",type:"boolean",default:!0},{key:"bundledSizeMB",label:"Bundle Size (MB)",type:"number",default:120}]},{id:"database",group:"Data Layer",icon:"",label:"Database",description:"Relational/NoSQL data storage",tags:["db","rdbms","nosql","sql","postgres","mysql","mongodb","data","storage","persistence"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Database"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"type",label:"Database Type",type:"select",default:"RDBMS",options:["RDBMS","NoSQL","NewSQL","Time-Series","Graph"]},{key:"engine",label:"Engine",type:"select",default:"postgresql",options:["postgresql","mysql","mongodb","cassandra","dynamodb","cockroachdb"]},{key:"workload",label:"Workload Type",type:"select",default:"OLTP",options:["OLTP","OLAP","Hybrid"]},{key:"storageGB",label:"Storage (GB)",type:"number",default:100},{key:"sharding",label:"Sharding Strategy",type:"select",default:"None",options:["None","Hash-based","Range-based","Geographic"]},{key:"shards",label:"Number of Shards",type:"number",default:1},{key:"replication",label:"Replication Factor",type:"number",default:3},{key:"replicationMode",label:"Replication Mode",type:"select",default:"Async",options:["Sync","Async","Semi-Sync"]},{key:"multiAZ",label:"Multi-AZ",type:"boolean",default:!0},{key:"crossRegion",label:"Cross-Region Replication",type:"boolean",default:!1},{key:"backups",label:"Automatic Backups",type:"boolean",default:!0},{key:"pitr",label:"Point-in-Time Recovery",type:"boolean",default:!0},{key:"encryption",label:"Encryption at Rest",type:"boolean",default:!0},{key:"connectionPooling",label:"Connection Pooling",type:"boolean",default:!0},{key:"queryCache",label:"Query Cache Enabled",type:"boolean",default:!0},{key:"wal",label:"Write-Ahead Logging",type:"boolean",default:!0},{key:"rbac",label:"RBAC Enabled",type:"boolean",default:!0},{key:"auditLog",label:"Audit Trail",type:"boolean",default:!0}]},{id:"loadbalancer",group:"Networking",icon:"",label:"Load Balancer",description:"Traffic distribution & high availability",tags:["lb","alb","nlb","elb","traffic","distribution","nginx","haproxy","layer 4","layer 7"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Load Balancer"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"type",label:"Type",type:"select",default:"Layer 7 (Application)",options:["Layer 4 (Network)","Layer 7 (Application)","Global"]},{key:"algorithm",label:"Algorithm",type:"select",default:"round-robin",options:["round-robin","least-connections","ip-hash","weighted-round-robin","least-response-time"]},{key:"sslTermination",label:"SSL/TLS Termination",type:"boolean",default:!0},{key:"stickiness",label:"Session Stickiness",type:"boolean",default:!1},{key:"healthCheck",label:"Health Check",type:"boolean",default:!0},{key:"healthCheckInterval",label:"Health Check Interval (s)",type:"number",default:30},{key:"multiAZ",label:"Multi-AZ",type:"boolean",default:!0},{key:"accessLogs",label:"Access Logs",type:"boolean",default:!0},{key:"connectionDraining",label:"Connection Draining",type:"boolean",default:!0},{key:"ddosProtection",label:"DDoS Protection",type:"boolean",default:!0},{key:"waf",label:"WAF Enabled",type:"boolean",default:!1}]},{id:"cache",group:"Data Layer",icon:"",label:"Cache",description:"In-memory fast data access",tags:["redis","memcached","in-memory","caching","performance","speed"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Cache"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"engine",label:"Engine",type:"select",default:"redis",options:["redis","memcached","hazelcast","aerospike"]},{key:"cacheStrategy",label:"Cache Strategy",type:"select",default:"write-through",options:["write-through","write-around","write-back","cache-aside"]},{key:"ttl",label:"TTL (seconds)",type:"number",default:3600},{key:"inMemory",label:"In Memory",type:"boolean",default:!0},{key:"eviction",label:"Eviction Policy",type:"select",default:"lru",options:["lru","lfu","fifo","mru","random","ttl-based","volatile-lru"]},{key:"replication",label:"Replication",type:"boolean",default:!0},{key:"clusterMode",label:"Cluster Mode",type:"boolean",default:!1},{key:"persistence",label:"Persistence (AOF/RDB)",type:"boolean",default:!1},{key:"encryption",label:"Encryption in Transit",type:"boolean",default:!0},{key:"maxMemoryGB",label:"Max Memory (GB)",type:"number",default:16}]},{id:"webserver",group:"Compute",icon:"",label:"Web Server",description:"HTTP requests",tags:["http","server","nginx","apache","web","requests"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Web Server"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"instances",label:"Instances",type:"number",default:2},{key:"autoscale",label:"Autoscale",type:"boolean",default:!0},{key:"instanceType",label:"Instance Type",type:"select",default:"t3.medium",options:["t3.small","t3.medium","t3.large"]},{key:"gzip",label:"Gzip",type:"boolean",default:!0},{key:"connectionTimeout",label:"Connection Timeout (s)",type:"number",default:30}]},{id:"message-broker",group:"Messaging",icon:"",label:"Message Broker",description:"Pub/Sub message broker",tags:["kafka","rabbitmq","pubsub","messaging","broker","queue","mq"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Message Broker"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"partitions",label:"Partitions",type:"number",default:6},{key:"replication",label:"Replication Factor",type:"number",default:3},{key:"durable",label:"Durable (persist messages)",type:"boolean",default:!0},{key:"retention",label:"Retention (hours)",type:"number",default:168}]},{id:"auth-service",group:"Services",icon:"",label:"Auth Service",description:"Authentication & session management",tags:["authentication","authorization","auth","oauth","jwt","sso","login","security"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Auth Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"oauth",label:"OAuth Enabled",type:"boolean",default:!0},{key:"sessions",label:"Session Store",type:"select",default:"redis",options:["redis","database","none"]},{key:"tokenTTL",label:"Token TTL (minutes)",type:"number",default:60},{key:"mfa",label:"MFA Required",type:"boolean",default:!1}]},{id:"cdn",group:"Delivery",icon:"",label:"CDN",description:"Content delivery network",tags:["content delivery","cloudflare","akamai","fastly","edge","caching","cdn"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"CDN"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"Cloudflare",options:["Cloudflare","Akamai","Fastly","AWS CloudFront"]},{key:"ttl",label:"Edge TTL (seconds)",type:"number",default:3600},{key:"cacheInvalidation",label:"Cache Invalidation (manual)",type:"boolean",default:!0}]},{id:"search",group:"Services",icon:"",label:"Search",description:"Search engine & indexing",tags:["elasticsearch","opensearch","search engine","indexing","full-text","lucene"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Search"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"engine",label:"Engine",type:"select",default:"elasticsearch",options:["elasticsearch","opensearch","meilisearch"]},{key:"replicas",label:"Replicas",type:"number",default:2},{key:"indexing",label:"Real-time indexing",type:"boolean",default:!0},{key:"shards",label:"Shards",type:"number",default:5}]},{id:"queue",group:"Messaging",icon:"",label:"Queue",description:"Task queue",tags:["task queue","job queue","sqs","celery","worker queue","async"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Queue"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"visibilityTimeout",label:"Visibility Timeout (seconds)",type:"number",default:30},{key:"maxRetries",label:"Max Retries",type:"number",default:5},{key:"durable",label:"Durable (persist tasks)",type:"boolean",default:!0},{key:"backoff",label:"Backoff Strategy",type:"select",default:"exponential",options:["fixed","linear","exponential"]}]},{id:"analytics",group:"Data Layer",icon:"",label:"Analytics",description:"Event analytics pipeline",tags:["data analytics","metrics","events","tracking","bi","business intelligence"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Analytics"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"retentionDays",label:"Retention (days)",type:"number",default:90},{key:"samplingRate",label:"Sampling Rate (%)",type:"number",default:100},{key:"realTime",label:"Real-time processing",type:"boolean",default:!0},{key:"storage",label:"Storage",type:"select",default:"s3",options:["s3","gcs","azure_blob"]}]},{id:"root-nameserver",group:"DNS & Network",icon:"",label:"Root Nameserver",description:"Top-level DNS resolver",tags:["dns","nameserver","root","resolver","domain"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Root Nameserver"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"ttl",label:"TTL (seconds)",type:"number",default:172800},{key:"dnssec",label:"DNSSEC Enabled",type:"boolean",default:!0}]},{id:"tld-nameserver",group:"DNS & Network",icon:"",label:"TLD Nameserver",description:"Top-level domain nameserver",tags:["dns","tld","top-level domain","nameserver",".com",".org"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"TLD Nameserver"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"tld",label:"TLD",type:"select",default:".com",options:[".com",".org",".net",".io",".dev"]},{key:"ttl",label:"TTL (seconds)",type:"number",default:86400}]},{id:"authoritative-nameserver",group:"DNS & Network",icon:"",label:"Authoritative Nameserver",description:"Domain-specific DNS server",tags:["dns","authoritative","nameserver","domain","records"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Authoritative Nameserver"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"records",label:"DNS Records",type:"number",default:100},{key:"ttl",label:"TTL (seconds)",type:"number",default:3600},{key:"anycast",label:"Anycast Enabled",type:"boolean",default:!0}]},{id:"isp",group:"DNS & Network",icon:"",label:"ISP",description:"Internet Service Provider",tags:["internet","isp","network","provider","connectivity"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"ISP"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"dnsCache",label:"DNS Cache Enabled",type:"boolean",default:!0},{key:"bandwidth",label:"Bandwidth (Gbps)",type:"number",default:10}]},{id:"api-gateway",group:"Networking",icon:"",label:"API Gateway",description:"Central API entry point",tags:["api","gateway","rest","graphql","entry point","routing","kong","apigee"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"API Gateway"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"inputValidation",label:"Input Validation",type:"boolean",default:!0},{key:"authentication",label:"Authentication",type:"select",default:"OAuth 2.0",options:["OAuth 2.0","JWT","API Key","Basic Auth"]},{key:"rateLimiting",label:"Rate Limiting",type:"boolean",default:!0},{key:"requestsPerSecond",label:"Max Requests/Second",type:"number",default:1e3},{key:"tlsTermination",label:"TLS Termination",type:"boolean",default:!0},{key:"deduplication",label:"Request Deduplication",type:"boolean",default:!0},{key:"throttling",label:"Throttling Enabled",type:"boolean",default:!0}]},{id:"message-dispatcher",group:"Messaging",icon:"",label:"Message Dispatcher",description:"Message routing & distribution",tags:["message","dispatcher","routing","distribution","pub/sub"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Message Dispatcher"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"topics",label:"Topics",type:"number",default:10},{key:"loadBalancing",label:"Load Balancing",type:"select",default:"round-robin",options:["round-robin","least-load","hash-based"]},{key:"partitioning",label:"Partitioning Enabled",type:"boolean",default:!0}]},{id:"id-generator",group:"Services",icon:"",label:"ID Generator",description:"Distributed unique ID generation",tags:["id","uuid","snowflake","ulid","unique","generator","distributed"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"ID Generator"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"algorithm",label:"Algorithm",type:"select",default:"Snowflake",options:["Snowflake","UUID","ULID","Auto-Increment"]},{key:"shardId",label:"Shard ID",type:"number",default:1},{key:"distributed",label:"Distributed",type:"boolean",default:!0}]},{id:"distributed-lock",group:"Services",icon:"",label:"Distributed Lock",description:"Resource locking & coordination",tags:["lock","distributed","coordination","mutex","redis","etcd","zookeeper"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Distributed Lock"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"backend",label:"Backend",type:"select",default:"Redis",options:["Redis","Etcd","Zookeeper","Chubby"]},{key:"ttl",label:"Lock TTL (seconds)",type:"number",default:30},{key:"fairness",label:"Fair Locking",type:"boolean",default:!0}]},{id:"cold-storage",group:"Data Layer",icon:"",label:"Cold Storage",description:"Archive & backup storage",tags:["archive","backup","glacier","cold storage","long-term","s3 glacier"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Cold Storage"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"AWS Glacier",options:["AWS Glacier","Azure Archive","GCP Coldline"]},{key:"retentionDays",label:"Retention (days)",type:"number",default:2555},{key:"encryption",label:"Encryption at Rest",type:"boolean",default:!0}]},{id:"object-storage",group:"Data Layer",icon:"",label:"Object Storage",description:"S3-compatible object store",tags:["s3","blob","object storage","aws s3","azure blob","gcs","minio"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Object Storage"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"S3",options:["S3","Azure Blob","GCS","MinIO"]},{key:"versioning",label:"Versioning",type:"boolean",default:!0},{key:"checksumValidation",label:"Checksum Validation",type:"boolean",default:!0},{key:"storageGB",label:"Storage (GB)",type:"number",default:1e3}]},{id:"processing-worker",group:"Compute",icon:"",label:"Processing Worker",description:"Background job processor",tags:["worker","background job","async","task processor","celery","sidekiq"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Processing Worker"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"tasks",label:"Task Types",type:"select",default:"Media Encoding",options:["Media Encoding","Thumbnail Generation","Data Processing","ML Inference"]},{key:"concurrency",label:"Concurrent Jobs",type:"number",default:10},{key:"autoscale",label:"Auto-scale",type:"boolean",default:!0}]},{id:"notification-service",group:"Services",icon:"",label:"Notification Service",description:"Push notifications & alerts",tags:["notification","push","email","sms","alerts","fcm","apns"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Notification Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"channels",label:"Channels",type:"select",default:"Push + Email",options:["Push","Email","SMS","Push + Email","All"]},{key:"fanout",label:"Fan-out Support",type:"boolean",default:!0},{key:"batching",label:"Batch Notifications",type:"boolean",default:!0}]},{id:"recommendation-service",group:"Services",icon:"",label:"Recommendation",description:"ML-based recommendations",tags:["recommendation","ml","machine learning","collaborative filtering","personalization"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Recommendation"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"algorithm",label:"Algorithm",type:"select",default:"Collaborative Filtering",options:["Collaborative Filtering","Content-based","Hybrid"]},{key:"realTime",label:"Real-time",type:"boolean",default:!0},{key:"cacheResults",label:"Cache Results",type:"boolean",default:!0}]},{id:"payment-service",group:"Services",icon:"",label:"Payment Service",description:"Payment processing & gateway",tags:["payment","stripe","paypal","transaction","billing","checkout","pci"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Payment Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"gateway",label:"Gateway",type:"select",default:"Stripe",options:["Stripe","PayPal","Braintree","Square"]},{key:"pciDss",label:"PCI DSS Compliant",type:"boolean",default:!0},{key:"tokenization",label:"Card Tokenization",type:"boolean",default:!0},{key:"retry",label:"Auto-retry Failed",type:"boolean",default:!0}]},{id:"log-processing",group:"Services",icon:"",label:"Log Processing",description:"Log aggregation & analysis",tags:["logging","logs","elk","splunk","aggregation","analysis","kibana"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Log Processing"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"pipeline",label:"Pipeline",type:"select",default:"ELK Stack",options:["ELK Stack","Splunk","Datadog","CloudWatch"]},{key:"retentionDays",label:"Retention (days)",type:"number",default:30},{key:"indexing",label:"Real-time Indexing",type:"boolean",default:!0}]},{id:"pubsub",group:"Messaging",icon:"",label:"Pub/Sub",description:"Publish-subscribe messaging",tags:["pubsub","publish","subscribe","messaging","event","google pubsub","sns"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Pub/Sub"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"topics",label:"Topics",type:"number",default:20},{key:"fanout",label:"Fan-out Support",type:"boolean",default:!0},{key:"ordering",label:"Message Ordering",type:"boolean",default:!1},{key:"durable",label:"Durable Messages",type:"boolean",default:!0}]},{id:"frontend-server",group:"Compute",icon:"",label:"Frontend Server",description:"Client-facing server",tags:["frontend","server","websocket","connection","client-facing"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Frontend Server"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"inMemoryConnections",label:"In-Memory Connections",type:"boolean",default:!0},{key:"activeConnections",label:"Active Connections",type:"number",default:1e4},{key:"websockets",label:"WebSocket Support",type:"boolean",default:!0},{key:"instances",label:"Instances",type:"number",default:3}]},{id:"backend-server",group:"Compute",icon:"",label:"Backend Server",description:"Application logic & microservices",tags:["backend","server","microservices","api","business logic","application"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Backend Server"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"architecture",label:"Architecture",type:"select",default:"Microservices",options:["Monolith","Microservices","Serverless"]},{key:"instances",label:"Instances",type:"number",default:5},{key:"caching",label:"Caching Enabled",type:"boolean",default:!0},{key:"retry",label:"Retry Logic",type:"boolean",default:!0},{key:"bulkOps",label:"Bulk Operations",type:"boolean",default:!0}]},{id:"edge-server",group:"Delivery",icon:"",label:"Edge Server",description:"Edge computing & caching",tags:["edge","edge computing","edge network","cdn","streaming"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Edge Server"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"scope",label:"Scope",type:"select",default:"Regional",options:["Global","Regional","Local"]},{key:"streaming",label:"Streaming Support",type:"boolean",default:!0},{key:"abr",label:"ABR (Adaptive Bitrate)",type:"boolean",default:!0},{key:"staticCache",label:"Static Cache",type:"boolean",default:!0}]},{id:"service-mesh",group:"Networking",icon:"",label:"Service Mesh",description:"Microservices communication layer",tags:["service mesh","istio","linkerd","consul","mtls","traffic management"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Service Mesh"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"Istio",options:["Istio","Linkerd","Consul","AWS App Mesh"]},{key:"mtls",label:"Mutual TLS",type:"boolean",default:!0},{key:"tracing",label:"Distributed Tracing",type:"boolean",default:!0},{key:"circuitBreaker",label:"Circuit Breaker",type:"boolean",default:!0},{key:"retryPolicy",label:"Retry Policy",type:"boolean",default:!0},{key:"trafficSplitting",label:"Traffic Splitting",type:"boolean",default:!0}]},{id:"container-orchestrator",group:"Compute",icon:"",label:"Container Orchestrator",description:"Container management & orchestration",tags:["kubernetes","k8s","docker","container","orchestration","ecs","pods"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"K8s Cluster"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"platform",label:"Platform",type:"select",default:"Kubernetes",options:["Kubernetes","ECS","Docker Swarm","Nomad"]},{key:"nodes",label:"Worker Nodes",type:"number",default:3},{key:"autoscaling",label:"Auto-scaling (HPA)",type:"boolean",default:!0},{key:"ingress",label:"Ingress Controller",type:"boolean",default:!0},{key:"monitoring",label:"Monitoring (Prometheus)",type:"boolean",default:!0}]},{id:"serverless-function",group:"Compute",icon:"",label:"Serverless Function",description:"Event-driven compute",tags:["lambda","serverless","function app","cloud function","faas","azure functions","event-driven"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Lambda Function"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"runtime",label:"Runtime",type:"select",default:"Node.js",options:["Node.js","Python","Java","Go",".NET","Ruby"]},{key:"memoryMB",label:"Memory (MB)",type:"number",default:512},{key:"timeout",label:"Timeout (seconds)",type:"number",default:30},{key:"concurrency",label:"Concurrent Executions",type:"number",default:100},{key:"coldStart",label:"Cold Start Optimization",type:"boolean",default:!0}]},{id:"reverse-proxy",group:"Networking",icon:"",label:"Reverse Proxy",description:"Request routing & caching",tags:["reverse proxy","nginx","haproxy","envoy","traefik","proxy"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Reverse Proxy"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"server",label:"Server",type:"select",default:"Nginx",options:["Nginx","HAProxy","Envoy","Traefik"]},{key:"caching",label:"Response Caching",type:"boolean",default:!0},{key:"compression",label:"Compression (gzip/brotli)",type:"boolean",default:!0},{key:"ssl",label:"SSL/TLS",type:"boolean",default:!0},{key:"rateLimiting",label:"Rate Limiting",type:"boolean",default:!0}]},{id:"stream-processor",group:"Data Layer",icon:"",label:"Stream Processor",description:"Real-time data processing",tags:["stream","kafka streams","flink","spark streaming","kinesis","real-time"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Stream Processor"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"engine",label:"Engine",type:"select",default:"Kafka Streams",options:["Kafka Streams","Apache Flink","Spark Streaming","AWS Kinesis"]},{key:"throughput",label:"Throughput (events/sec)",type:"number",default:1e4},{key:"windowing",label:"Windowing Support",type:"boolean",default:!0},{key:"stateful",label:"Stateful Processing",type:"boolean",default:!0}]},{id:"data-warehouse",group:"Data Layer",icon:"",label:"Data Warehouse",description:"OLAP & analytics storage",tags:["data warehouse","snowflake","redshift","bigquery","olap","analytics"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Data Warehouse"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"platform",label:"Platform",type:"select",default:"Snowflake",options:["Snowflake","Redshift","BigQuery","Synapse"]},{key:"storageTB",label:"Storage (TB)",type:"number",default:10},{key:"compression",label:"Column Compression",type:"boolean",default:!0},{key:"partitioning",label:"Data Partitioning",type:"boolean",default:!0}]},{id:"monitoring",group:"Observability",icon:"",label:"Monitoring",description:"Metrics & alerting",tags:["monitoring","prometheus","grafana","datadog","metrics","alerts","observability"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Monitoring"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"stack",label:"Stack",type:"select",default:"Prometheus + Grafana",options:["Prometheus + Grafana","Datadog","New Relic","CloudWatch"]},{key:"metrics",label:"Metrics Collection",type:"boolean",default:!0},{key:"alerts",label:"Alerting",type:"boolean",default:!0},{key:"retention",label:"Retention (days)",type:"number",default:30}]},{id:"tracing",group:"Observability",icon:"",label:"Distributed Tracing",description:"Request flow tracking",tags:["tracing","jaeger","zipkin","distributed tracing","apm","x-ray"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Tracing"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"platform",label:"Platform",type:"select",default:"Jaeger",options:["Jaeger","Zipkin","AWS X-Ray","Datadog APM"]},{key:"sampling",label:"Sampling Rate (%)",type:"number",default:10},{key:"retention",label:"Retention (days)",type:"number",default:7}]},{id:"rate-limiter",group:"Services",icon:"",label:"Rate Limiter",description:"Request throttling service",tags:["rate limit","throttling","rate limiter","token bucket","quota"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Rate Limiter"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"algorithm",label:"Algorithm",type:"select",default:"Token Bucket",options:["Token Bucket","Leaky Bucket","Fixed Window","Sliding Window"]},{key:"requestsPerMinute",label:"Requests/Minute",type:"number",default:1e3},{key:"distributed",label:"Distributed",type:"boolean",default:!0},{key:"backend",label:"Backend",type:"select",default:"Redis",options:["Redis","In-Memory","Database"]}]},{id:"circuit-breaker",group:"Services",icon:"",label:"Circuit Breaker",description:"Fault tolerance & resilience",tags:["circuit breaker","fault tolerance","resilience","hystrix","fallback"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Circuit Breaker"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"failureThreshold",label:"Failure Threshold (%)",type:"number",default:50},{key:"timeout",label:"Timeout (ms)",type:"number",default:5e3},{key:"fallback",label:"Fallback Strategy",type:"boolean",default:!0}]},{id:"file-storage",group:"Data Layer",icon:"",label:"File Storage",description:"Shared file system",tags:["file storage","nfs","efs","shared storage","file system"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"File Storage"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"type",label:"Type",type:"select",default:"NFS",options:["NFS","EFS","Azure Files","GCP Filestore"]},{key:"storageTB",label:"Storage (TB)",type:"number",default:1},{key:"throughput",label:"Throughput (MB/s)",type:"number",default:100}]},{id:"vpn-gateway",group:"Networking",icon:"",label:"VPN Gateway",description:"Secure network connection",tags:["vpn","gateway","ipsec","openvpn","wireguard","secure connection"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"VPN Gateway"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"protocol",label:"Protocol",type:"select",default:"IPSec",options:["IPSec","OpenVPN","WireGuard"]},{key:"encryption",label:"Encryption",type:"select",default:"AES-256",options:["AES-128","AES-256","ChaCha20"]},{key:"tunnels",label:"Active Tunnels",type:"number",default:2}]},{id:"firewall",group:"Security",icon:"",label:"Firewall",description:"Network security & filtering",tags:["firewall","waf","security","ips","network firewall","filtering"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Firewall"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"type",label:"Type",type:"select",default:"WAF",options:["Network Firewall","WAF","Next-Gen Firewall"]},{key:"rules",label:"Active Rules",type:"number",default:50},{key:"ips",label:"IPS Enabled",type:"boolean",default:!0},{key:"logging",label:"Traffic Logging",type:"boolean",default:!0}]},{id:"secrets-manager",group:"Security",icon:"",label:"Secrets Manager",description:"Credentials & secrets storage",tags:["secrets","vault","credentials","key management","hashicorp vault","secrets manager"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Secrets Manager"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"HashiCorp Vault",options:["HashiCorp Vault","AWS Secrets Manager","Azure Key Vault"]},{key:"rotation",label:"Auto Rotation",type:"boolean",default:!0},{key:"encryption",label:"Encryption at Rest",type:"boolean",default:!0},{key:"audit",label:"Audit Logging",type:"boolean",default:!0}]},{id:"email-service",group:"Services",icon:"",label:"Email Service",description:"Transactional email delivery",tags:["email","sendgrid","ses","mailgun","smtp","transactional email"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Email Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"SendGrid",options:["SendGrid","AWS SES","Mailgun","Postmark"]},{key:"templates",label:"Template Support",type:"boolean",default:!0},{key:"tracking",label:"Open/Click Tracking",type:"boolean",default:!0},{key:"bounceHandling",label:"Bounce Handling",type:"boolean",default:!0}]},{id:"sms-service",group:"Services",icon:"",label:"SMS Service",description:"SMS notifications & OTP",tags:["sms","twilio","sns","text message","otp","vonage"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"SMS Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"Twilio",options:["Twilio","AWS SNS","Vonage","MessageBird"]},{key:"otp",label:"OTP Support",type:"boolean",default:!0},{key:"deliveryReports",label:"Delivery Reports",type:"boolean",default:!0}]},{id:"custom-component",group:"Custom",icon:"",label:"Custom Component",description:"Create your own custom component",tags:["custom","generic","user-defined","flexible","other"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Custom Component"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe what this component does",default:""},{key:"componentType",label:"Component Type",type:"text",placeholder:"e.g., Service, Database, Cache, etc.",default:""},{key:"technology",label:"Technology/Tool",type:"text",placeholder:"e.g., Redis, Kafka, Custom API, etc.",default:""},{key:"purpose",label:"Purpose",type:"textarea",placeholder:"What problem does this solve?",default:""},{key:"notes",label:"Additional Notes",type:"textarea",placeholder:"Any additional details or configuration",default:""}]},{id:"ml-model",group:"AI & ML",icon:"",label:"ML Model",description:"Machine Learning Model (inference/training)",tags:["ml","machine learning","model","ai","inference","training","neural network"],properties:[{key:"componentName",label:"Model Name",type:"text",default:"ML Model",placeholder:"Enter model name"},{key:"description",label:"Description",type:"textarea",placeholder:"Model description and purpose",default:""},{key:"modelType",label:"Model Type",type:"select",default:"Classification",options:["Classification","Regression","NLP","Computer Vision","Recommendation","Forecasting","Clustering","Anomaly Detection"]},{key:"framework",label:"Framework",type:"select",default:"TensorFlow",options:["TensorFlow","PyTorch","Scikit-learn","XGBoost","Keras","ONNX"]},{key:"version",label:"Model Version",type:"text",placeholder:"e.g., v1.0",default:"v1.0"}]},{id:"model-training",group:"AI & ML",icon:"",label:"Model Training",description:"ML model training pipeline",tags:["training","ml","pipeline","learning","dataset","batch training"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Model Training",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Training pipeline description",default:""},{key:"computeType",label:"Compute Type",type:"select",default:"GPU",options:["CPU","GPU","TPU","Distributed"]},{key:"batchSize",label:"Batch Size",type:"number",default:32},{key:"epochs",label:"Epochs",type:"number",default:100}]},{id:"model-serving",group:"AI & ML",icon:"",label:"Model Serving",description:"ML model serving/inference API",tags:["inference","serving","prediction","api","endpoint","model deployment"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Model Serving",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Model serving description",default:""},{key:"platform",label:"Serving Platform",type:"select",default:"TensorFlow Serving",options:["TensorFlow Serving","TorchServe","MLflow","Seldon Core","KServe","Custom API"]},{key:"instances",label:"Instances",type:"number",default:3},{key:"autoscaling",label:"Auto-scaling",type:"boolean",default:!0}]},{id:"feature-store",group:"AI & ML",icon:"",label:"Feature Store",description:"Centralized feature storage for ML",tags:["features","ml","data","store","feast","feature engineering"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Feature Store",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Feature store description",default:""},{key:"platform",label:"Platform",type:"select",default:"Feast",options:["Feast","Tecton","Hopsworks","AWS SageMaker","Custom"]},{key:"features",label:"Number of Features",type:"number",default:100}]},{id:"data-labeling",group:"AI & ML",icon:"",label:"Data Labeling",description:"Data annotation and labeling service",tags:["labeling","annotation","training data","ground truth","dataset"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Data Labeling",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Labeling service description",default:""},{key:"labelingType",label:"Labeling Type",type:"select",default:"Manual",options:["Manual","Semi-automated","Active Learning","Crowdsourced"]},{key:"dataType",label:"Data Type",type:"select",default:"Images",options:["Images","Text","Audio","Video","Tabular"]}]},{id:"mlops-pipeline",group:"AI & ML",icon:"",label:"MLOps Pipeline",description:"End-to-end ML operations pipeline",tags:["mlops","pipeline","ci/cd","automation","deployment","monitoring"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"MLOps Pipeline",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Pipeline description",default:""},{key:"platform",label:"Platform",type:"select",default:"Kubeflow",options:["Kubeflow","MLflow","AWS SageMaker","Azure ML","Vertex AI","Custom"]},{key:"stages",label:"Pipeline Stages",type:"text",placeholder:"e.g., train -> validate -> deploy",default:"train -> validate -> deploy"}]},{id:"model-registry",group:"AI & ML",icon:"",label:"Model Registry",description:"Centralized model versioning and registry",tags:["registry","versioning","models","metadata","tracking","mlflow"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Model Registry",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Registry description",default:""},{key:"platform",label:"Platform",type:"select",default:"MLflow",options:["MLflow","AWS SageMaker","Azure ML","Vertex AI","Custom"]},{key:"models",label:"Registered Models",type:"number",default:10}]},{id:"vector-database",group:"AI & ML",icon:"",label:"Vector Database",description:"Vector embeddings storage for similarity search",tags:["vector","embeddings","similarity","search","rag","retrieval"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Vector Database",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Vector DB description",default:""},{key:"engine",label:"Engine",type:"select",default:"Pinecone",options:["Pinecone","Weaviate","Milvus","Qdrant","Chroma","FAISS","pgvector"]},{key:"dimensions",label:"Vector Dimensions",type:"number",default:768},{key:"indexType",label:"Index Type",type:"select",default:"HNSW",options:["HNSW","IVF","Flat","LSH"]}]},{id:"llm-api",group:"AI & ML",icon:"",label:"LLM API",description:"Large Language Model API endpoint",tags:["llm","gpt","language model","openai","api","chatbot","ai"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"LLM API",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"LLM API description",default:""},{key:"provider",label:"Provider",type:"select",default:"OpenAI",options:["OpenAI","Anthropic","Google PaLM","Azure OpenAI","Hugging Face","Self-hosted"]},{key:"model",label:"Model",type:"text",placeholder:"e.g., gpt-4, claude-3",default:"gpt-4"},{key:"maxTokens",label:"Max Tokens",type:"number",default:4096}]},{id:"gpu-cluster",group:"AI & ML",icon:"",label:"GPU Cluster",description:"GPU computing cluster for ML workloads",tags:["gpu","compute","cluster","training","nvidia","cuda"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"GPU Cluster",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"GPU cluster description",default:""},{key:"gpuType",label:"GPU Type",type:"select",default:"NVIDIA A100",options:["NVIDIA A100","NVIDIA V100","NVIDIA T4","NVIDIA H100","AMD MI250"]},{key:"nodes",label:"Number of Nodes",type:"number",default:4},{key:"gpusPerNode",label:"GPUs per Node",type:"number",default:8}]},{id:"experiment-tracking",group:"AI & ML",icon:"",label:"Experiment Tracking",description:"ML experiment tracking and visualization",tags:["experiments","tracking","metrics","mlflow","wandb","monitoring"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Experiment Tracking",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"Experiment tracking description",default:""},{key:"platform",label:"Platform",type:"select",default:"MLflow",options:["MLflow","Weights & Biases","TensorBoard","Neptune.ai","Comet ML"]},{key:"experiments",label:"Active Experiments",type:"number",default:5}]},{id:"group-cluster",group:"Grouping",icon:"",label:"Cluster/Group",description:"Container for grouping multiple components",tags:["group","cluster","container","zone","boundary","region"],properties:[{key:"componentName",label:"Group Name",type:"text",placeholder:"e.g., Backend Cluster, Database Zone",default:"Cluster"},{key:"description",label:"Description",type:"textarea",placeholder:"Purpose of this cluster/group",default:""},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"e.g., rgba(100, 100, 255, 0.05)",default:"rgba(100, 100, 255, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"e.g., rgba(100, 100, 255, 0.3)",default:"rgba(100, 100, 255, 0.3)"}]},{id:"availability-zone",group:"Grouping",icon:"",label:"Availability Zone",description:"Isolated location within a region",tags:["az","availability zone","fault isolation","zone","region"],properties:[{key:"componentName",label:"Zone Name",type:"text",placeholder:"e.g., us-east-1a, AZ-1",default:"Availability Zone"},{key:"description",label:"Description",type:"textarea",placeholder:"Zone details",default:""},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"Zone background color",default:"rgba(34, 139, 34, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"Zone border color",default:"rgba(34, 139, 34, 0.3)"}]},{id:"vpc-network",group:"Grouping",icon:"",label:"VPC/Network",description:"Virtual private cloud boundary",tags:["vpc","network","subnet","private","isolated"],properties:[{key:"componentName",label:"VPC Name",type:"text",placeholder:"e.g., Production VPC",default:"VPC"},{key:"description",label:"Description",type:"textarea",placeholder:"Network details",default:""},{key:"cidr",label:"CIDR Block",type:"text",placeholder:"e.g., 10.0.0.0/16",default:"10.0.0.0/16"},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"VPC background color",default:"rgba(128, 0, 128, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"VPC border color",default:"rgba(128, 0, 128, 0.3)"}]},{id:"microservice-group",group:"Grouping",icon:"",label:"Microservice Group",description:"Related microservices cluster",tags:["microservices","service group","domain","bounded context"],properties:[{key:"componentName",label:"Service Group",type:"text",placeholder:"e.g., User Services, Payment Domain",default:"Service Group"},{key:"description",label:"Description",type:"textarea",placeholder:"Service group purpose",default:""},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"Group background color",default:"rgba(255, 165, 0, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"Group border color",default:"rgba(255, 165, 0, 0.3)"}]},{id:"security-boundary",group:"Grouping",icon:"",label:"Security Boundary",description:"Security zone/perimeter",tags:["security","dmz","firewall","boundary","zone"],properties:[{key:"componentName",label:"Security Zone",type:"text",placeholder:"e.g., DMZ, Internal, Restricted",default:"Security Boundary"},{key:"description",label:"Description",type:"textarea",placeholder:"Security zone details",default:""},{key:"level",label:"Security Level",type:"select",default:"Internal",options:["Public","DMZ","Internal","Restricted"]},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"Zone background color",default:"rgba(255, 0, 0, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"Zone border color",default:"rgba(255, 0, 0, 0.3)"}]},{id:"custom-group",group:"Grouping",icon:"",label:"Custom Group",description:"Create your own custom group/container",tags:["custom","group","container","user-defined","flexible","boundary"],properties:[{key:"componentName",label:"Group Name",type:"text",placeholder:"Enter custom group name",default:"Custom Group"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe the purpose of this group",default:""},{key:"groupType",label:"Group Type",type:"text",placeholder:"e.g., Region, Data Center, Team, etc.",default:""},{key:"icon",label:"Icon",type:"text",placeholder:"e.g., , , , etc.",default:""},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"e.g., rgba(100, 100, 255, 0.05)",default:"rgba(100, 100, 255, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"e.g., rgba(100, 100, 255, 0.3)",default:"rgba(100, 100, 255, 0.3)"},{key:"subtitle",label:"Subtitle",type:"text",placeholder:"Optional subtitle text",default:""},{key:"notes",label:"Additional Notes",type:"textarea",placeholder:"Any additional details",default:""}]},{id:"entity",group:"ER Diagram",icon:"",label:"Entity",description:"Database table/entity with attributes",nodeType:"tableNode",tags:["entity","table","database","erd","relation","schema","model"],properties:[{key:"componentName",label:"Entity Name",type:"text",placeholder:"e.g., User, Order, Product",default:"Entity"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe what this entity represents",default:""},{key:"tableType",label:"Table Type",type:"select",default:"Regular",options:["Regular","Junction","Audit","Archive","View","Materialized View"]}],data:{attributes:[{id:"attr-1",name:"id",type:"UUID",isPrimaryKey:!0,isNullable:!1},{id:"attr-2",name:"name",type:"VARCHAR(100)",isNullable:!1},{id:"attr-3",name:"created_at",type:"TIMESTAMP",isNullable:!1}]},renderConfig:{shape:"table",sections:[{type:"header",editable:!1},{type:"attributes",editable:!0}],columns:[{key:"isPrimaryKey",label:"PK",width:"w-6",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-yellow-600 dark:text-yellow-400",inactive:"text-gray-400"}},{key:"name",label:"Column Name",width:"flex-1",type:"text",editable:!0,color:{active:"font-semibold"}},{key:"type",label:"Data Type",width:"w-24",type:"text",editable:!0},{key:"isForeignKey",label:"FK",width:"w-6",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-blue-600 dark:text-blue-400",inactive:"text-gray-400"}},{key:"isUnique",label:"UQ",width:"w-6",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-purple-600 dark:text-purple-400",inactive:"text-gray-400"}},{key:"isNullable",label:"NULL",width:"w-8",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-gray-400",inactive:"text-red-600 dark:text-red-400"}},{key:"actions",label:"",width:"w-8",type:"readonly"}]}},{id:"weak-entity",group:"ER Diagram",icon:"",label:"Weak Entity",description:"Entity dependent on another entity for identification",nodeType:"tableNode",tags:["weak entity","dependent","erd","relationship","partial key"],properties:[{key:"componentName",label:"Entity Name",type:"text",placeholder:"e.g., OrderItem, Dependent, Comment",default:"Weak Entity"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe this weak entity",default:""},{key:"ownerEntity",label:"Owner Entity",type:"text",placeholder:"Parent entity that this depends on",default:""},{key:"tableType",label:"Table Type",type:"select",default:"Weak Entity",options:["Weak Entity","Junction","Dependent"]}],data:{attributes:[{id:"attr-1",name:"owner_id",type:"UUID",isForeignKey:!0,isNullable:!1},{id:"attr-2",name:"sequence_number",type:"INT",isPrimaryKey:!0,isNullable:!1},{id:"attr-3",name:"data",type:"VARCHAR(255)",isNullable:!1}]},renderConfig:{shape:"table",sections:[{type:"header",editable:!1},{type:"attributes",editable:!0}],columns:[{key:"isPrimaryKey",label:"PK",width:"w-6",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-yellow-600 dark:text-yellow-400",inactive:"text-gray-400"}},{key:"name",label:"Column Name",width:"flex-1",type:"text",editable:!0,color:{active:"font-semibold"}},{key:"type",label:"Data Type",width:"w-24",type:"text",editable:!0},{key:"isForeignKey",label:"FK",width:"w-6",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-blue-600 dark:text-blue-400",inactive:"text-gray-400"}},{key:"isUnique",label:"UQ",width:"w-6",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-purple-600 dark:text-purple-400",inactive:"text-gray-400"}},{key:"isNullable",label:"NULL",width:"w-8",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-gray-400",inactive:"text-red-600 dark:text-red-400"}},{key:"actions",label:"",width:"w-8",type:"readonly"}],borderStyle:"double",borderWidth:4}},{id:"er-trigger",group:"ER Diagram",nodeType:"erNode",icon:"",label:"Trigger",description:"Database trigger for automated actions on events",tags:["trigger","automation","event","database","erd"],properties:[{key:"nodeType",label:"Node Type",type:"text",default:"er-trigger"},{key:"componentName",label:"Trigger Name",type:"text",placeholder:"e.g., update_timestamp, log_changes, validate_data",default:"update_timestamp"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe what this trigger does",default:"Automatically updates the updated_at timestamp when a row is modified"},{key:"targetTable",label:"Target Table",type:"text",placeholder:"Table this trigger is attached to",default:"users"},{key:"timing",label:"Timing",type:"select",default:"BEFORE",options:["BEFORE","AFTER","INSTEAD OF"]},{key:"event",label:"Event",type:"select",default:"UPDATE",options:["INSERT","UPDATE","DELETE","TRUNCATE"]},{key:"level",label:"Level",type:"select",default:"ROW",options:["ROW","STATEMENT"]},{key:"condition",label:"Condition (WHEN)",type:"textarea",placeholder:"Optional condition: e.g., NEW.status != OLD.status",default:""}],renderConfig:{shape:"note",sections:[{type:"header",editable:!1},{type:"content",editable:!1}],minWidth:200,minHeight:100}},{id:"er-note",group:"ER Diagram",nodeType:"erNode",icon:"",label:"Note/Constraint",description:"Business rule, constraint, or annotation",tags:["note","constraint","rule","annotation","comment","documentation"],properties:[{key:"nodeType",label:"Node Type",type:"text",default:"er-note"},{key:"componentName",label:"Note Title",type:"text",placeholder:"e.g., Business Rule, Constraint, Assumption",default:"Business Rule"},{key:"description",label:"Note Content",type:"textarea",placeholder:`Describe the rule, constraint, or important note
e.g., Email must be unique across all users
Orders can only be placed by verified customers`,default:"Email addresses must be unique across all user accounts"},{key:"type",label:"Type",type:"select",default:"Business Rule",options:["Business Rule","Database Constraint","Assumption","Clarification","TODO","Warning","Best Practice"]},{key:"severity",label:"Severity",type:"select",default:"Info",options:["Critical","High","Medium","Low","Info"]},{key:"relatedEntity",label:"Related To",type:"text",placeholder:"Entity or relationship this applies to",default:""},{key:"sqlConstraint",label:"SQL Constraint",type:"textarea",placeholder:`SQL code for this constraint
e.g., CHECK (price > 0)
CHECK (start_date < end_date)`,default:""}],renderConfig:{shape:"note",sections:[{type:"header",editable:!1},{type:"content",editable:!1}],minWidth:200,minHeight:120,borderStyle:"dashed"}},{id:"er-use-case",group:"ER Diagram",nodeType:"erNode",icon:"",label:"Use Case",description:"Use case or functional requirement for the system",tags:["use case","requirement","functionality","scenario","note","annotation"],properties:[{key:"nodeType",label:"Node Type",type:"text",default:"uml-use-case"},{key:"componentName",label:"Use Case Name",type:"text",placeholder:"e.g., User Registration, Place Order, Generate Report",default:"Use Case"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe this use case or requirement",default:""},{key:"priority",label:"Priority",type:"select",default:"Medium",options:["High","Medium","Low"]},{key:"relatedEntities",label:"Related Entities",type:"text",placeholder:"Entities involved (comma-separated)",default:""}]},{id:"er-view",group:"ER Diagram",nodeType:"tableNode",icon:"",label:"View",description:"Database view or materialized view",tags:["view","query","virtual table","materialized","aggregation"],properties:[{key:"componentName",label:"View Name",type:"text",placeholder:"e.g., active_users_view, order_summary_view",default:"View"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe what this view provides",default:""},{key:"viewType",label:"View Type",type:"select",default:"Standard View",options:["Standard View","Materialized View","Indexed View","Updateable View"]},{key:"baseTables",label:"Base Tables",type:"text",placeholder:"Tables this view depends on (comma-separated)",default:""},{key:"tableType",label:"Table Type",type:"select",default:"View",options:["View","Materialized View","Indexed View"]}],data:{attributes:[{id:"attr-1",name:"id",type:"UUID",isPrimaryKey:!1,isNullable:!1},{id:"attr-2",name:"computed_field",type:"VARCHAR(100)",isNullable:!0},{id:"attr-3",name:"aggregate_value",type:"INT",isNullable:!0}]},renderConfig:{shape:"table",sections:[{type:"header",editable:!1},{type:"attributes",editable:!0}],columns:[{key:"isPrimaryKey",label:"PK",width:"w-6",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-yellow-600 dark:text-yellow-400",inactive:"text-gray-400"}},{key:"name",label:"Column Name",width:"flex-1",type:"text",editable:!0,color:{active:"font-semibold"}},{key:"type",label:"Data Type",width:"w-24",type:"text",editable:!0},{key:"isForeignKey",label:"FK",width:"w-6",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-blue-600 dark:text-blue-400",inactive:"text-gray-400"}},{key:"isUnique",label:"UQ",width:"w-6",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-purple-600 dark:text-purple-400",inactive:"text-gray-400"}},{key:"isNullable",label:"NULL",width:"w-8",type:"boolean",icon:{active:"",inactive:""},color:{active:"text-gray-400",inactive:"text-red-600 dark:text-red-400"}},{key:"actions",label:"",width:"w-8",type:"readonly"}],borderStyle:"dashed",borderWidth:1}},{id:"uml-class",group:"UML",icon:"",label:"Class",description:"UML Class with attributes and methods",nodeType:"tableNode",tags:["uml","class","object-oriented","oop","class diagram","blueprint"],properties:[{key:"componentName",label:"Class Name",type:"text",placeholder:"e.g., User, Product, Order",default:"Class"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe what this class represents",default:""},{key:"stereotype",label:"Stereotype",type:"select",default:"None",options:["None","<<abstract>>","<<interface>>","<<entity>>","<<controller>>","<<service>>","<<repository>>"]},{key:"visibility",label:"Default Visibility",type:"select",default:"public",options:["public","private","protected","package"]}],data:{attributes:[{id:"attr-1",name:"- id",type:"String",isPrimaryKey:!1,isNullable:!1},{id:"attr-2",name:"+ name",type:"String",isNullable:!1},{id:"attr-3",name:"# createdAt",type:"Date",isNullable:!1},{id:"attr-4",name:"+ getName()",type:"String",isNullable:!1},{id:"attr-5",name:"+ setName(name: String)",type:"void",isNullable:!1}]},renderConfig:{shape:"table",sections:[{type:"header",editable:!1},{type:"attributes",editable:!0}],columns:[{key:"name",label:"Member",width:"flex-1",type:"text",editable:!0,color:{active:"font-mono text-sm"}},{key:"type",label:"Type",width:"w-32",type:"text",editable:!0},{key:"actions",label:"",width:"w-8",type:"readonly"}]}},{id:"uml-interface",group:"UML",icon:"",label:"Interface",description:"UML Interface definition",nodeType:"tableNode",tags:["uml","interface","contract","abstraction","oop"],properties:[{key:"componentName",label:"Interface Name",type:"text",placeholder:"e.g., IRepository, IService, Serializable",default:"Interface"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe what this interface defines",default:""}],data:{attributes:[{id:"attr-1",name:"+ save()",type:"void",isNullable:!1},{id:"attr-2",name:"+ delete()",type:"void",isNullable:!1},{id:"attr-3",name:"+ findById(id: String)",type:"Object",isNullable:!1}]},renderConfig:{shape:"table",sections:[{type:"header",editable:!1},{type:"attributes",editable:!0}],columns:[{key:"name",label:"Method",width:"flex-1",type:"text",editable:!0,color:{active:"font-mono text-sm italic"}},{key:"type",label:"Return Type",width:"w-32",type:"text",editable:!0},{key:"actions",label:"",width:"w-8",type:"readonly"}],borderStyle:"dashed",borderWidth:2}},{id:"uml-abstract-class",group:"UML",icon:"",label:"Abstract Class",description:"Abstract class with abstract methods",nodeType:"tableNode",tags:["uml","abstract","base class","inheritance","oop"],properties:[{key:"componentName",label:"Class Name",type:"text",placeholder:"e.g., BaseRepository, AbstractService",default:"AbstractClass"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe this abstract class",default:""}],data:{attributes:[{id:"attr-1",name:"# data",type:"Object",isNullable:!1},{id:"attr-2",name:"+ process()",type:"void",isNullable:!1},{id:"attr-3",name:"+ validate()",type:"boolean",isNullable:!1}]},renderConfig:{shape:"table",sections:[{type:"header",editable:!1},{type:"attributes",editable:!0}],columns:[{key:"name",label:"Member",width:"flex-1",type:"text",editable:!0,color:{active:"font-mono text-sm"}},{key:"type",label:"Type",width:"w-32",type:"text",editable:!0},{key:"actions",label:"",width:"w-8",type:"readonly"}],borderStyle:"solid",borderWidth:2}},{id:"uml-enum",group:"UML",icon:"",label:"Enum",description:"Enumeration type",nodeType:"tableNode",tags:["uml","enum","enumeration","constants","type"],properties:[{key:"componentName",label:"Enum Name",type:"text",placeholder:"e.g., Status, Color, Role",default:"Enum"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe this enumeration",default:""}],data:{attributes:[{id:"attr-1",name:"ACTIVE",type:"",isNullable:!1},{id:"attr-2",name:"INACTIVE",type:"",isNullable:!1},{id:"attr-3",name:"PENDING",type:"",isNullable:!1}]},renderConfig:{shape:"table",sections:[{type:"header",editable:!1},{type:"attributes",editable:!0}],columns:[{key:"name",label:"Value",width:"flex-1",type:"text",editable:!0,color:{active:"font-mono text-sm uppercase"}},{key:"actions",label:"",width:"w-8",type:"readonly"}]}},{id:"uml-use-case",group:"UML",nodeType:"erNode",icon:"",label:"Use Case",description:"System use case or functionality",tags:["uml","use case","functionality","requirement","scenario","er diagram","note"],properties:[{key:"nodeType",label:"Node Type",type:"text",default:"uml-use-case"},{key:"componentName",label:"Use Case Name",type:"text",placeholder:"e.g., Login, Place Order, Generate Report",default:"Use Case"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe this use case",default:""},{key:"priority",label:"Priority",type:"select",default:"Medium",options:["High","Medium","Low"]},{key:"complexity",label:"Complexity",type:"select",default:"Medium",options:["Simple","Medium","Complex"]}]},{id:"uml-note",group:"UML",nodeType:"erNode",icon:"",label:"Note/Comment",description:"Annotation or comment",tags:["uml","note","comment","annotation","documentation"],properties:[{key:"nodeType",label:"Node Type",type:"text",default:"uml-note"},{key:"componentName",label:"Note Title",type:"text",placeholder:"Optional title",default:"Note"},{key:"description",label:"Content",type:"textarea",placeholder:"Add your note or comment here",default:""}]}];function Fq(e){return at({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M216.49,104.49l-80,80a12,12,0,0,1-17,0l-80-80a12,12,0,0,1,17-17L128,159l71.51-71.52a12,12,0,0,1,17,17Z"},child:[]}]})(e)}function Uq(e){return at({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M168.49,199.51a12,12,0,0,1-17,17l-80-80a12,12,0,0,1,0-17l80-80a12,12,0,0,1,17,17L97,128Z"},child:[]}]})(e)}function $q(e){return at({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M184.49,136.49l-80,80a12,12,0,0,1-17-17L159,128,87.51,56.49a12,12,0,1,1,17-17l80,80A12,12,0,0,1,184.49,136.49Z"},child:[]}]})(e)}function phe(e){return at({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M108,60A16,16,0,1,1,92,44,16,16,0,0,1,108,60Zm56,16a16,16,0,1,0-16-16A16,16,0,0,0,164,76ZM92,112a16,16,0,1,0,16,16A16,16,0,0,0,92,112Zm72,0a16,16,0,1,0,16,16A16,16,0,0,0,164,112ZM92,180a16,16,0,1,0,16,16A16,16,0,0,0,92,180Zm72,0a16,16,0,1,0,16,16A16,16,0,0,0,164,180Z"},child:[]}]})(e)}function mhe({components:e,onAdd:t}){const[n,r]=Ce.useState(!0),[i,s]=Ce.useState(new Set),[o,l]=Ce.useState(null),[u,d]=Ce.useState(""),h=Ce.useMemo(()=>new Za(Array.from(e),{keys:[{name:"label",weight:.4},{name:"tags",weight:.25},{name:"description",weight:.2},{name:"group",weight:.15}],threshold:.3,includeScore:!0}),[e]),p=Ce.useMemo(()=>{const v=u.trim();if(!v)return Array.from(e);const w=h.search(v).map(E=>E.item),k=e.find(E=>E.id==="custom-component"),T=w.some(E=>E.id==="custom-component");return k&&!T&&w.push(k),w},[e,h,u]),g=Ce.useMemo(()=>{const v=new Map;for(const S of p){const w=S.group??"Other";v.has(w)||v.set(w,[]),v.get(w).push(S)}return Array.from(v.entries()).sort((S,w)=>S[0].localeCompare(w[0]))},[p]);Ce.useEffect(()=>{g.length>0&&i.size===0&&s(new Set(g.map(([v])=>v)))},[g,i.size]);const b=v=>{s(S=>{const w=new Set(S);return w.has(v)?w.delete(v):w.add(v),w})};return m.jsxs("div",{className:"relative z-40",children:[m.jsx("button",{type:"button",onClick:()=>r(v=>!v),"aria-label":n?"Collapse component palette":"Expand component palette","aria-controls":"component-palette-panel",className:"absolute top-5 -right-3 h-6 w-6 flex items-center justify-center rounded-full border border-theme bg-surface text-theme shadow cursor-pointer hover:bg-[var(--bg-hover)] transition-colors z-50",children:n?m.jsx(Uq,{size:16}):m.jsx($q,{size:16})}),m.jsx("div",{className:`relative shrink-0 group h-full flex flex-col bg-surface border-r border-theme overflow-y-auto overflow-x-hidden component-palette transition-[width] duration-300 ease-in-out z-40 ${n?"w-56 p-3 pr-0":"w-6 p-1"}`,"aria-label":"Component palette",id:"component-palette-panel",children:n?m.jsxs(m.Fragment,{children:[m.jsx("h3",{className:"text-lg font-semibold text-theme mb-3",children:"Components"}),m.jsx("div",{className:"mr-3 mb-3",children:m.jsx("input",{type:"text",placeholder:"Search components...",value:u,onChange:v=>d(v.target.value),className:"w-full px-3 py-1.5 text-sm border border-theme rounded bg-[var(--bg)] text-theme placeholder:text-muted focus:outline-none focus:ring-1 focus:ring-[var(--brand)]"})}),m.jsxs("div",{className:"space-y-1 flex-1 overflow-y-auto",children:[g.length===0?m.jsx("div",{className:"text-center py-8 text-muted text-sm",children:"No components found"}):g.map(([v,S])=>{const w=i.has(v);return m.jsxs("div",{children:[m.jsxs("button",{type:"button",onClick:()=>b(v),className:"w-full flex items-center justify-between px-2 py-1.5 text-left hover:bg-[var(--bg-hover)] rounded transition-colors","aria-expanded":w,"aria-controls":`group-${v}`,children:[m.jsx("span",{className:"text-xs font-medium uppercase tracking-wide text-muted",children:v}),m.jsx(Fq,{size:12,className:`text-muted transition-transform duration-150 ${w?"rotate-0":"-rotate-90"}`})]}),w&&m.jsx("div",{id:`group-${v}`,className:"mt-1 mb-3 px-1",children:m.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:S.map(k=>m.jsxs("button",{type:"button",draggable:!0,"aria-label":`Add ${k.label} to canvas`,onMouseEnter:T=>{const E=T.currentTarget.getBoundingClientRect();l({label:k.label,description:k.description||"",rect:E})},onMouseLeave:()=>l(null),onDragStart:T=>{l(null),T.dataTransfer?.setData("application/reactflow",JSON.stringify({type:k.id})),T.dataTransfer?.setData("text/plain",k.id),T.dataTransfer&&(T.dataTransfer.effectAllowed="move")},onKeyDown:T=>{(T.key==="Enter"||T.key===" ")&&(T.preventDefault(),t(k.id))},className:"text-left p-2 border border-theme rounded-md cursor-grab select-none hover:border-[var(--brand)] hover:bg-[var(--bg-hover)] transition-all group/item",children:[m.jsx("div",{className:"text-center mb-1",children:m.jsx("span",{className:"text-2xl",children:k.icon})}),m.jsx("div",{className:"text-xs font-medium text-theme text-center group-hover/item:text-[var(--brand)] transition-colors line-clamp-1",children:k.label})]},k.id))})})]},v)}),m.jsxs("div",{className:"mt-4 px-2 py-2.5 rounded text-xs bg-[var(--bg-hover)]",children:[m.jsx("div",{className:"font-medium mb-1 text-theme",children:" Tip"}),m.jsx("div",{className:"text-muted",children:"Drag a component to the canvas to start designing"})]})]})]}):m.jsx("div",{className:"flex-1 flex items-center justify-center h-full",children:m.jsx("span",{className:"sr-only",children:"Component palette collapsed"})})}),o&&Yd.createPortal(m.jsxs("div",{className:"fixed px-3 py-2 bg-[var(--bg)] border border-theme rounded shadow-lg text-xs z-[9999] min-w-max max-w-xs pointer-events-none -translate-y-1/2",style:{left:`${o.rect.right+8}px`,top:`${o.rect.top+o.rect.height/2}px`},children:[m.jsx("div",{className:"font-semibold text-theme mb-0.5",children:o.label}),m.jsx("div",{className:"text-muted",children:o.description}),m.jsx("div",{className:"absolute right-full top-1/2 -translate-y-1/2 -mr-1 border-4 border-transparent border-r-[var(--bg)]"})]}),document.body)]})}const ghe=({reactFlowWrapperRef:e,nodes:t,edges:n,nodeTypes:r,edgeTypes:i,onNodesChange:s,onEdgesChange:o,onConnect:l,onDragOver:u,onDrop:d,onNodeDragStop:h,onMouseMove:p,children:g})=>m.jsx("div",{className:"flex-1 relative bg-theme min-h-0",children:m.jsx("section",{className:"w-full h-full",ref:e,onDragOver:u,onDrop:d,"aria-label":"Diagram canvas drop area",children:m.jsxs(Ale,{className:"w-full h-full",nodes:t,edges:n,nodeTypes:r,edgeTypes:i,onNodesChange:s,onEdgesChange:o,onConnect:l,onNodeDragStop:h,onMouseMove:p,connectionMode:Ga.Loose,fitView:!0,proOptions:{hideAttribution:!0},children:[m.jsx(tce,{nodeStrokeWidth:3}),m.jsx(Hle,{}),m.jsx(Lle,{gap:16}),g]})})}),yhe=({problem:e,activeTab:t,setActiveTab:n,inspectedNodeId:r,setInspectedNodeId:i,propertyElements:s,customPropertyElements:o,onAddCustomProperty:l,handleSave:u,assessmentResult:d,onDetachFromGroup:h,isNodeInGroup:p})=>{const[g,b]=Ce.useState(320),v=260,S=640,w=Ce.useRef(!1),k=Ce.useRef(null),[T,E]=Ce.useState(!1),[N,A]=Ce.useState(!0),_=Ce.useCallback(V=>{if(!w.current)return;const F=Math.min(Math.max(window.innerWidth-V.clientX,v),S);b(F)},[]),j=Ce.useCallback(()=>{w.current=!1,document.body.style.userSelect=""},[]),R=V=>{V.preventDefault(),w.current=!0,document.body.style.userSelect="none"};Ce.useEffect(()=>(globalThis.addEventListener("mousemove",_),globalThis.addEventListener("mouseup",j),()=>{globalThis.removeEventListener("mousemove",_),globalThis.removeEventListener("mouseup",j)}),[_,j]),Ce.useEffect(()=>{k.current&&(k.current.style.width=g+"px")},[g]);const I=e?.id==="free";if(Ce.useEffect(()=>{I&&!r&&A(!1)},[I,r]),Ce.useEffect(()=>{I&&r&&(n("inspector"),A(!0))},[I,r,n]),!e)return null;const B=async()=>{if(d)try{await navigator.clipboard.writeText(JSON.stringify(d,null,2))}catch{const V=document.createElement("textarea");V.value=JSON.stringify(d,null,2),V.style.position="fixed",V.style.opacity="0",document.body.appendChild(V),V.select();try{document.execCommand("copy")}catch{}V.remove()}},U=()=>{if(!d)return;const V=new Blob([JSON.stringify(d,null,2)],{type:"application/json"}),F=URL.createObjectURL(V),L=document.createElement("a");L.href=F,L.download=`assessment-${Date.now()}.json`,document.body.appendChild(L),L.click(),L.remove(),URL.revokeObjectURL(F)};return m.jsxs("div",{className:"relative z-40",children:[m.jsx("button",{type:"button",onClick:()=>A(V=>!V),"aria-label":N?"Collapse inspector panel":"Expand inspector panel","aria-controls":"inspector-panel",className:"absolute top-5 -left-3 h-6 w-6 flex items-center justify-center rounded-full border border-theme bg-surface text-theme shadow cursor-pointer hover:bg-[var(--bg-hover)] transition-colors z-50",children:N?m.jsx($q,{size:16}):m.jsx(Uq,{size:16})}),m.jsx("aside",{ref:k,id:"inspector-panel",className:`bg-surface border-l border-theme flex flex-col h-full relative inspector-resizable transition-[width] duration-300 ease-in-out ${N?"p-4":"w-6 p-1"}`,"data-width":g,style:{width:N?`${g}px`:"24px"},children:N&&m.jsxs(m.Fragment,{children:[m.jsxs("button",{type:"button",onMouseDown:R,"aria-label":"Resize inspector panel",className:"absolute left-0 top-0 h-full w-2 -ml-1 cursor-col-resize flex items-center justify-center group",children:[m.jsx("span",{className:"w-px h-full bg-transparent group-hover:bg-[var(--brand)]/40 transition-colors"}),m.jsx(phe,{"aria-hidden":!0,className:"absolute py-1 rounded-md bg-[var(--surface)] border border-theme text-[var(--muted)] opacity-90 group-hover:bg-[var(--brand)] group-hover:text-white shadow-sm pointer-events-none transition-colors",size:24})]}),m.jsxs("div",{className:"flex flex-wrap items-center justify-start gap-2",role:"tablist","aria-label":"Sidebar tabs",children:[!I&&m.jsxs("button",{type:"button",role:"tab",className:`flex items-center gap-2 px-3 py-2 rounded-t-md border-b-2 transition-colors ${t==="details"?"border-[var(--brand)] bg-[var(--brand)]/5 text-[var(--brand)]":"border-transparent text-theme hover:bg-[var(--bg-hover)]"}`,onClick:()=>n("details"),children:[m.jsx("span",{className:"text-sm",children:""}),m.jsx("span",{className:"text-sm font-medium",children:"Details"})]}),!I&&m.jsxs("button",{type:"button",role:"tab",className:`flex items-center gap-2 px-3 py-2 rounded-t-md border-b-2 transition-colors ${t==="assessment"?"border-[var(--brand)] bg-[var(--brand)]/5 text-[var(--brand)]":"border-transparent text-theme hover:bg-[var(--bg-hover)]"}`,onClick:()=>n("assessment"),children:[m.jsx("span",{className:"text-sm",children:""}),m.jsx("span",{className:"text-sm font-medium",children:"Assessment"}),d&&m.jsx("span",{className:"ml-1 px-1.5 py-0.5 text-xs font-semibold rounded-full bg-[var(--brand)] text-white",children:d.score})]}),m.jsxs("button",{type:"button",role:"tab",className:`flex items-center gap-2 px-3 py-2 rounded-t-md border-b-2 transition-colors ${t==="inspector"?"border-[var(--brand)] bg-[var(--brand)]/5 text-[var(--brand)]":"border-transparent text-theme hover:bg-[var(--bg-hover)]"}`,onClick:()=>n("inspector"),children:[m.jsx("span",{className:"text-sm",children:""}),m.jsx("span",{className:"text-sm font-medium",children:"Properties"})]})]}),m.jsx("div",{className:"w-full h-px bg-[var(--muted)]/20 mb-4","aria-hidden":"true"}),m.jsxs("div",{className:"overflow-y-auto component-palette flex-1",children:[t==="details"&&m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-theme mb-3",children:e.title}),m.jsx("p",{className:"text-muted text-sm leading-relaxed mb-4",children:e.description}),m.jsxs("div",{className:"mb-4",children:[m.jsx("h4",{className:"text-sm font-semibold text-theme mb-2",children:"Requirements"}),m.jsx("ul",{className:"space-y-1",children:e.requirements.map(V=>m.jsxs("li",{className:"flex items-start space-x-2",children:[m.jsx("span",{className:"text-green-500 mt-0.5 text-xs",children:""}),m.jsx("span",{className:"text-xs text-muted",children:V})]},V))})]}),m.jsxs("div",{className:"mb-4",children:[m.jsx("h4",{className:"text-sm font-semibold text-theme mb-2",children:"Constraints"}),m.jsx("ul",{className:"space-y-1",children:e.constraints.map(V=>m.jsxs("li",{className:"flex items-start space-x-2",children:[m.jsx("span",{className:"text-yellow-500 mt-0.5 text-xs",children:""}),m.jsx("span",{className:"text-xs text-muted",children:V})]},V))})]}),m.jsxs("div",{className:"mb-4",children:[m.jsxs("button",{type:"button",onClick:()=>E(!T),className:"w-full flex items-center justify-between mb-2 cursor-pointer hover:bg-[var(--bg-hover)] p-2 rounded-md transition-colors","aria-controls":"hints-content",children:[m.jsx("h4",{className:"text-sm font-semibold text-theme",children:" Hints"}),m.jsx(Fq,{size:14,className:`text-muted transition-transform duration-150 ${T?"rotate-0":"-rotate-90"}`})]}),T&&m.jsx("div",{id:"hints-content",className:"space-y-2",children:e.hints.map(V=>m.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900 border-l-4 border-yellow-400 dark:border-yellow-600 p-2 rounded-r-lg",children:m.jsx("div",{className:"text-xs text-white",children:V})},V))})]}),m.jsxs("div",{children:[m.jsx("h4",{className:"text-sm font-semibold text-theme mb-2",children:"Tags"}),m.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map(V=>m.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200 text-xs rounded-md",children:V},V))})]})]}),t==="inspector"&&m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-semibold text-theme mb-3",children:"Component Properties"}),!r&&m.jsx("div",{className:"text-sm text-muted",children:"Select a node settings () to view properties."}),r&&m.jsxs("div",{children:[m.jsxs("div",{className:"text-sm text-theme mb-3",children:["Node: ",r]}),s&&m.jsxs("div",{className:"mb-6",children:[m.jsx("div",{className:"text-xs font-semibold text-muted uppercase tracking-wide mb-2",children:"Standard Properties"}),m.jsx("div",{className:"space-y-2",children:s})]}),m.jsxs("div",{className:"mb-4",children:[m.jsxs("div",{className:"flex items-center justify-between mb-2",children:[m.jsx("div",{className:"text-xs font-semibold text-muted uppercase tracking-wide",children:"Custom Properties"}),m.jsxs("button",{type:"button",onClick:l,className:"flex items-center gap-1 px-2 py-1 text-xs font-medium text-[var(--brand)] hover:bg-[var(--brand)]/10 rounded-md transition-colors border border-[var(--brand)]/30 hover:border-[var(--brand)] cursor-pointer",title:"Add custom property",children:[m.jsx(IC,{size:14}),m.jsx("span",{children:"Add"})]})]}),m.jsx("div",{className:"space-y-2",children:o})]}),m.jsxs("div",{className:"mt-6 flex flex-col gap-2 pt-4 border-t border-theme",children:[p&&h&&m.jsxs("button",{type:"button",className:"w-full px-3 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-colors font-medium text-sm cursor-pointer flex items-center justify-center gap-2",onClick:h,title:"Remove this node from its parent group",children:[m.jsx("span",{children:""}),m.jsx("span",{children:"Detach from Group"})]}),m.jsxs("div",{className:"flex space-x-2",children:[m.jsx("button",{type:"button",className:"flex-1 px-3 py-2 bg-[var(--brand)] text-white rounded-md hover:bg-[var(--brand)]/90 transition-colors font-medium text-sm cursor-pointer",onClick:u,children:"Save Changes"}),m.jsx("button",{type:"button",className:"px-3 py-2 bg-theme border border-theme rounded-md hover:bg-[var(--bg-hover)] transition-colors text-sm cursor-pointer",onClick:()=>{i(null),n("details")},children:"Close"})]})]})]})]}),t==="assessment"&&m.jsx("div",{children:d?m.jsxs("div",{className:"space-y-4",children:[m.jsxs("div",{className:"p-4 border rounded-lg bg-[var(--surface)]",children:[m.jsxs("div",{className:"flex items-center justify-between mb-2",children:[m.jsx("div",{className:"text-lg font-semibold text-theme",children:"Assessment Score"}),m.jsxs("div",{className:"text-2xl font-bold text-[var(--brand)]",children:[d.score,"%"]})]}),m.jsx("div",{className:"text-sm text-muted",children:d.isValid?" Pass":" Needs Improvement"})]}),m.jsxs("div",{className:"p-4 border rounded-lg bg-[var(--surface)]",children:[m.jsxs("div",{className:"font-semibold text-theme mb-3 flex items-center gap-2",children:[m.jsx("span",{className:"text-green-500",children:""}),m.jsx("span",{children:"What Went Right"})]}),d.architectureStrengths.length>0?m.jsx("ul",{className:"space-y-2",children:d.architectureStrengths.map(V=>m.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[m.jsx("span",{className:"text-green-500 mt-0.5",children:""}),m.jsx("span",{className:"text-theme",children:V})]},V))}):m.jsx("div",{className:"text-sm text-muted",children:"No notable strengths detected."})]}),m.jsxs("div",{className:"p-4 border rounded-lg bg-[var(--surface)]",children:[m.jsxs("div",{className:"font-semibold text-theme mb-3 flex items-center gap-2",children:[m.jsx("span",{className:"text-orange-500",children:"!"}),m.jsx("span",{children:"What to Improve"})]}),d.improvements.length>0?m.jsx("ul",{className:"space-y-2",children:d.improvements.map(V=>m.jsxs("li",{className:"flex items-start gap-2 text-sm",children:[m.jsx("span",{className:"text-orange-500 mt-0.5",children:""}),m.jsx("span",{className:"text-theme",children:V})]},V))}):m.jsx("div",{className:"text-sm text-muted",children:"No specific improvements suggested."})]}),m.jsxs("div",{className:"p-4 border rounded-lg bg-[var(--surface)]",children:[m.jsx("div",{className:"font-semibold text-theme mb-3",children:"Detailed Feedback"}),m.jsx("div",{className:"space-y-3",children:d.feedback.map(V=>m.jsxs("div",{className:"border-l-2 border-[var(--brand)] pl-3 py-1",children:[m.jsx("div",{className:"font-medium text-xs text-[var(--brand)] uppercase mb-1",children:V.category}),m.jsx("div",{className:"text-sm text-theme",children:V.message})]},`${V.category}-${V.message}`))})]}),m.jsxs("div",{className:"flex gap-2",children:[m.jsx("button",{type:"button",onClick:B,className:"flex-1 px-3 py-2 bg-theme border border-theme rounded-md hover:bg-[var(--bg-hover)] transition-colors text-sm",children:" Copy JSON"}),m.jsx("button",{type:"button",onClick:U,className:"flex-1 px-3 py-2 bg-theme border border-theme rounded-md hover:bg-[var(--bg-hover)] transition-colors text-sm",children:" Download"})]})]}):m.jsxs("div",{className:"text-center py-12",children:[m.jsx("div",{className:"text-6xl mb-4",children:""}),m.jsx("div",{className:"text-lg font-semibold text-theme mb-2",children:"No Assessment Yet"}),m.jsx("div",{className:"text-sm text-muted",children:"Run an assessment to see your design evaluation and feedback."})]})})]})]})})]})},bhe=({isLoading:e,collaborators:t,onUpdatePermission:n,onRemove:r})=>e?m.jsxs("div",{className:"text-center py-4",children:[m.jsx("div",{className:"inline-block w-4 h-4 border border-accent/30 border-t-accent rounded-full animate-spin"}),m.jsx("p",{className:"text-sm text-muted mt-2",children:"Loading collaborators..."})]}):t.length===0?m.jsxs("div",{className:"text-center py-4 text-muted",children:[m.jsx("p",{className:"text-sm",children:"No collaborators yet"}),m.jsx("p",{className:"text-xs mt-1",children:"Share this diagram to start collaborating"})]}):m.jsx("div",{className:"space-y-2",children:t.map(i=>m.jsxs("div",{className:"flex items-center justify-between p-3 bg-theme/5 rounded-md",children:[m.jsxs("div",{className:"flex items-center space-x-3",children:[m.jsx("div",{className:"w-8 h-8 rounded-full bg-accent/20 flex items-center justify-center",children:m.jsx("span",{className:"text-sm font-medium text-accent",children:i.email[0].toUpperCase()})}),m.jsxs("div",{children:[m.jsx("p",{className:"text-sm font-medium text-theme",children:i.email}),m.jsxs("p",{className:"text-xs text-muted capitalize",children:[i.permission," access"]})]})]}),m.jsxs("div",{className:"flex items-center space-x-2",children:[m.jsxs("select",{value:i.permission,onChange:s=>n(i.id,s.target.value),className:"text-xs px-2 py-1 border border-theme/20 rounded bg-theme text-theme",children:[m.jsx("option",{value:"read",children:"Read"}),m.jsx("option",{value:"edit",children:"Edit"})]}),m.jsx("button",{type:"button",onClick:()=>r(i.id),className:"p-1 text-red-500 hover:text-red-700 hover:bg-red-50 dark:hover:bg-red-900/20 rounded transition-colors",title:"Remove collaborator",children:m.jsx(hc,{className:"h-4 w-4"})})]})]},i.id))});async function xhe(e,t){if(!e)return{isValid:!1,score:0,feedback:[{type:"error",message:"No solution provided.",category:"maintainability"}],suggestions:["Please add components to your design for assessment."],missingComponents:[],architectureStrengths:[],improvements:[]};const n="https://diagrammatic-api-production.up.railway.app";try{const r={components:e.components.map(o=>({id:o.id||`comp-${Date.now()}`,type:o.type,label:o.label,properties:o.properties||{},position:o.position})),connections:e.connections?.map(o=>({id:o.id||`conn-${Date.now()}`,source:o.source,target:o.target,label:o.label,type:o.type}))||[],explanation:e.explanation,keyPoints:e.keyPoints,problem:t?{title:t.title,description:t.description,requirements:Array.isArray(t.requirements)?t.requirements.join(`.
`):t.requirements,constraints:Array.isArray(t.constraints)?t.constraints.join(`.
`):t.constraints,difficulty:t.difficulty,category:t.category,estimatedTime:t.estimated_time}:null};console.log("Calling assessment API:",`${n}/api/v1/assess`),console.log("Request payload:",r);const i=await fetch(`${n}/api/v1/assess`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(r)});if(!i.ok){const o=await i.text();throw new Error(`Assessment API failed: ${i.status} ${i.statusText} - ${o}`)}const s=await i.json();return console.log("Assessment API response:",s),vhe(s)}catch(r){return console.error("AI Assessment failed:",r),{isValid:!1,score:0,feedback:[{type:"error",message:`Assessment service unavailable: ${r instanceof Error?r.message:"Unknown error"}`,category:"maintainability"}],suggestions:["Please ensure the assessment service is running and try again."],missingComponents:[],architectureStrengths:[],improvements:[]}}}function vhe(e){const t=e,n=(t.feedback||[]).map(r=>({type:r.type,message:r.message,category:r.category}));return{isValid:t.is_valid||!1,score:t.overall_score||0,feedback:n,suggestions:t.suggestions||[],missingComponents:t.missing_components||[],architectureStrengths:t.strengths||[],improvements:t.improvements||[]}}function U2(e){return at({attr:{viewBox:"0 0 512 512"},child:[{tag:"rect",attr:{width:"336",height:"336",x:"128",y:"128",fill:"none",strokeLinejoin:"round",strokeWidth:"32",rx:"57",ry:"57"},child:[]},{tag:"path",attr:{fill:"none",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"32",d:"m383.5 128 .5-24a56.16 56.16 0 0 0-56-56H112a64.19 64.19 0 0 0-64 64v216a56.16 56.16 0 0 0 56 56h24m168-168v160m80-80H216"},child:[]}]})(e)}const Gq=Ce.memo(({id:e,data:t,onCopy:n,isInGroup:r})=>{const[i,s]=Ce.useState({visible:!1,x:0,y:0}),o=t.componentName||t.label,l=Ce.useCallback(b=>{b.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-delete",{detail:{id:e}}))},[e]),u=Ce.useCallback(b=>{b.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-toggle",{detail:{id:e}}))},[e]),d=Ce.useCallback(b=>{b.stopPropagation(),n?.(e,t)},[e,t,n]),h=Ce.useCallback(b=>{b.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-detach",{detail:{id:e}}))},[e]),p=Ce.useCallback(b=>{b.preventDefault(),b.stopPropagation(),s({visible:!0,x:b.clientX,y:b.clientY})},[]),g=Ce.useCallback(()=>{s({visible:!1,x:0,y:0})},[]);return Ce.useEffect(()=>{if(i.visible){const b=v=>{const S=document.querySelector("[data-context-menu]");S&&!S.contains(v.target)&&g()};return document.addEventListener("click",b),document.addEventListener("contextmenu",b),()=>{document.removeEventListener("click",b),document.removeEventListener("contextmenu",b)}}},[i.visible,g]),m.jsxs(m.Fragment,{children:[m.jsxs(ft.fieldset,{initial:{y:0,opacity:1},whileHover:{y:-1,boxShadow:"0 12px 30px rgba(0,0,0,0.12)"},whileTap:{scale:.985},transition:{type:"spring",stiffness:320,damping:28},className:"min-w-[140px] w-full max-w-xs bg-surface border border-theme rounded-lg text-theme text-sm shadow-sm cursor-grab relative",onContextMenu:p,children:[m.jsx("legend",{className:"sr-only",children:o}),m.jsx(xn,{id:"top",type:"source",position:Ae.Top,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),m.jsx(xn,{id:"right",type:"source",position:Ae.Right,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),m.jsx(xn,{id:"bottom",type:"source",position:Ae.Bottom,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),m.jsx(xn,{id:"left",type:"source",position:Ae.Left,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),m.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 min-w-0 w-full py-2",children:[m.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-[var(--bg-hover)] flex items-center justify-center text-xl",children:t.icon??""}),m.jsxs("div",{className:"min-w-0 w-full text-center",children:[m.jsx("div",{className:"truncate font-medium text-sm",children:o}),t.subtitle&&m.jsx("div",{className:"text-xs text-muted truncate",children:t.subtitle})]})]})]}),i.visible&&Yd.createPortal(m.jsxs(ft.div,{"data-context-menu":!0,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{type:"spring",stiffness:400,damping:25},className:"fixed z-[10000] bg-[var(--surface)] border border-theme rounded-lg shadow-lg py-1 min-w-[140px] pointer-events-auto",style:{left:i.x,top:i.y,transform:"translate(-50%, -10px)"},children:[m.jsxs("button",{type:"button",onClick:b=>{b.stopPropagation(),u(b),g()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm",children:[m.jsx(Vm,{className:"w-4 h-4"}),"Settings"]}),r&&m.jsxs("button",{type:"button",onClick:b=>{b.stopPropagation(),h(b),g()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm text-orange-500",children:[m.jsx(qk,{className:"w-4 h-4"}),"Detach from Group"]}),m.jsxs("button",{type:"button",onClick:b=>{b.stopPropagation(),d(b),g()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm",children:[m.jsx(U2,{className:"w-4 h-4"}),"Duplicate"]}),m.jsxs("button",{type:"button",onClick:b=>{b.stopPropagation(),l(b),g()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm text-red-600",children:[m.jsx(fc,{className:"w-4 h-4"}),"Delete"]})]}),document.body)]})});Gq.displayName="Node";/*! @license DOMPurify 3.3.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.3.0/LICENSE */const{entries:Wq,setPrototypeOf:Q5,isFrozen:whe,getPrototypeOf:She,getOwnPropertyDescriptor:Che}=Object;let{freeze:mr,seal:yi,create:Pk}=Object,{apply:Ik,construct:Bk}=typeof Reflect<"u"&&Reflect;mr||(mr=function(t){return t});yi||(yi=function(t){return t});Ik||(Ik=function(t,n){for(var r=arguments.length,i=new Array(r>2?r-2:0),s=2;s<r;s++)i[s-2]=arguments[s];return t.apply(n,i)});Bk||(Bk=function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return new t(...r)});const np=gr(Array.prototype.forEach),khe=gr(Array.prototype.lastIndexOf),J5=gr(Array.prototype.pop),Iu=gr(Array.prototype.push),Ehe=gr(Array.prototype.splice),xp=gr(String.prototype.toLowerCase),aC=gr(String.prototype.toString),lC=gr(String.prototype.match),Bu=gr(String.prototype.replace),Nhe=gr(String.prototype.indexOf),The=gr(String.prototype.trim),Ai=gr(Object.prototype.hasOwnProperty),cr=gr(RegExp.prototype.test),zu=Ahe(TypeError);function gr(e){return function(t){t instanceof RegExp&&(t.lastIndex=0);for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return Ik(e,t,r)}}function Ahe(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return Bk(e,n)}}function st(e,t){let n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:xp;Q5&&Q5(e,null);let r=t.length;for(;r--;){let i=t[r];if(typeof i=="string"){const s=n(i);s!==i&&(whe(t)||(t[r]=s),i=s)}e[i]=!0}return e}function Mhe(e){for(let t=0;t<e.length;t++)Ai(e,t)||(e[t]=null);return e}function Ms(e){const t=Pk(null);for(const[n,r]of Wq(e))Ai(e,n)&&(Array.isArray(r)?t[n]=Mhe(r):r&&typeof r=="object"&&r.constructor===Object?t[n]=Ms(r):t[n]=r);return t}function Vu(e,t){for(;e!==null;){const r=Che(e,t);if(r){if(r.get)return gr(r.get);if(typeof r.value=="function")return gr(r.value)}e=She(e)}function n(){return null}return n}const eP=mr(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","search","section","select","shadow","slot","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),cC=mr(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","enterkeyhint","exportparts","filter","font","g","glyph","glyphref","hkern","image","inputmode","line","lineargradient","marker","mask","metadata","mpath","part","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),uC=mr(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),_he=mr(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),dC=mr(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),Dhe=mr(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),tP=mr(["#text"]),nP=mr(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","exportparts","face","for","headers","height","hidden","high","href","hreflang","id","inert","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","part","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","slot","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),fC=mr(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","mask-type","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),rP=mr(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),rp=mr(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Rhe=yi(/\{\{[\w\W]*|[\w\W]*\}\}/gm),jhe=yi(/<%[\w\W]*|[\w\W]*%>/gm),Ohe=yi(/\$\{[\w\W]*/gm),Lhe=yi(/^data-[\-\w.\u00B7-\uFFFF]+$/),Phe=yi(/^aria-[\-\w]+$/),Kq=yi(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp|matrix):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),Ihe=yi(/^(?:\w+script|data):/i),Bhe=yi(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),Yq=yi(/^html$/i),zhe=yi(/^[a-z][.\w]*(-[.\w]+)+$/i);var iP=Object.freeze({__proto__:null,ARIA_ATTR:Phe,ATTR_WHITESPACE:Bhe,CUSTOM_ELEMENT:zhe,DATA_ATTR:Lhe,DOCTYPE_NAME:Yq,ERB_EXPR:jhe,IS_ALLOWED_URI:Kq,IS_SCRIPT_OR_DATA:Ihe,MUSTACHE_EXPR:Rhe,TMPLIT_EXPR:Ohe});const qu={element:1,text:3,progressingInstruction:7,comment:8,document:9},Vhe=function(){return typeof window>"u"?null:window},qhe=function(t,n){if(typeof t!="object"||typeof t.createPolicy!="function")return null;let r=null;const i="data-tt-policy-suffix";n&&n.hasAttribute(i)&&(r=n.getAttribute(i));const s="dompurify"+(r?"#"+r:"");try{return t.createPolicy(s,{createHTML(o){return o},createScriptURL(o){return o}})}catch{return console.warn("TrustedTypes policy "+s+" could not be created."),null}},sP=function(){return{afterSanitizeAttributes:[],afterSanitizeElements:[],afterSanitizeShadowDOM:[],beforeSanitizeAttributes:[],beforeSanitizeElements:[],beforeSanitizeShadowDOM:[],uponSanitizeAttribute:[],uponSanitizeElement:[],uponSanitizeShadowNode:[]}};function Xq(){let e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:Vhe();const t=De=>Xq(De);if(t.version="3.3.0",t.removed=[],!e||!e.document||e.document.nodeType!==qu.document||!e.Element)return t.isSupported=!1,t;let{document:n}=e;const r=n,i=r.currentScript,{DocumentFragment:s,HTMLTemplateElement:o,Node:l,Element:u,NodeFilter:d,NamedNodeMap:h=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:p,DOMParser:g,trustedTypes:b}=e,v=u.prototype,S=Vu(v,"cloneNode"),w=Vu(v,"remove"),k=Vu(v,"nextSibling"),T=Vu(v,"childNodes"),E=Vu(v,"parentNode");if(typeof o=="function"){const De=n.createElement("template");De.content&&De.content.ownerDocument&&(n=De.content.ownerDocument)}let N,A="";const{implementation:_,createNodeIterator:j,createDocumentFragment:R,getElementsByTagName:I}=n,{importNode:B}=r;let U=sP();t.isSupported=typeof Wq=="function"&&typeof E=="function"&&_&&_.createHTMLDocument!==void 0;const{MUSTACHE_EXPR:V,ERB_EXPR:F,TMPLIT_EXPR:L,DATA_ATTR:H,ARIA_ATTR:O,IS_SCRIPT_OR_DATA:q,ATTR_WHITESPACE:K,CUSTOM_ELEMENT:te}=iP;let{IS_ALLOWED_URI:z}=iP,G=null;const oe=st({},[...eP,...cC,...uC,...dC,...tP]);let ae=null;const $=st({},[...nP,...fC,...rP,...rp]);let Q=Object.seal(Pk(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),ee=null,de=null;const le=Object.seal(Pk(null,{tagCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeCheck:{writable:!0,configurable:!1,enumerable:!0,value:null}}));let xe=!0,_e=!0,Be=!1,Pe=!0,Te=!1,ke=!0,Ee=!1,ht=!1,Oe=!1,mt=!1,bt=!1,$t=!1,un=!0,zt=!1;const Nt="user-content-";let kn=!0,dn=!1,Ot={},ut=null;const Tt=st({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let At=null;const sr=st({},["audio","video","img","source","image","track"]);let Ar=null;const vi=st({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),Zt="http://www.w3.org/1998/Math/MathML",Le="http://www.w3.org/2000/svg",Fe="http://www.w3.org/1999/xhtml";let or=Fe,dt=!1,fn=null;const Fs=st({},[Zt,Le,Fe],aC);let wi=st({},["mi","mo","mn","ms","mtext"]),Mr=st({},["annotation-xml"]);const _r=st({},["title","style","font","a","script"]);let ar=null;const yr=["application/xhtml+xml","text/html"],Dr="text/html";let xt=null,Bn=null;const Us=n.createElement("form"),Si=function(Z){return Z instanceof RegExp||Z instanceof Function},Kn=function(){let Z=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};if(!(Bn&&Bn===Z)){if((!Z||typeof Z!="object")&&(Z={}),Z=Ms(Z),ar=yr.indexOf(Z.PARSER_MEDIA_TYPE)===-1?Dr:Z.PARSER_MEDIA_TYPE,xt=ar==="application/xhtml+xml"?aC:xp,G=Ai(Z,"ALLOWED_TAGS")?st({},Z.ALLOWED_TAGS,xt):oe,ae=Ai(Z,"ALLOWED_ATTR")?st({},Z.ALLOWED_ATTR,xt):$,fn=Ai(Z,"ALLOWED_NAMESPACES")?st({},Z.ALLOWED_NAMESPACES,aC):Fs,Ar=Ai(Z,"ADD_URI_SAFE_ATTR")?st(Ms(vi),Z.ADD_URI_SAFE_ATTR,xt):vi,At=Ai(Z,"ADD_DATA_URI_TAGS")?st(Ms(sr),Z.ADD_DATA_URI_TAGS,xt):sr,ut=Ai(Z,"FORBID_CONTENTS")?st({},Z.FORBID_CONTENTS,xt):Tt,ee=Ai(Z,"FORBID_TAGS")?st({},Z.FORBID_TAGS,xt):Ms({}),de=Ai(Z,"FORBID_ATTR")?st({},Z.FORBID_ATTR,xt):Ms({}),Ot=Ai(Z,"USE_PROFILES")?Z.USE_PROFILES:!1,xe=Z.ALLOW_ARIA_ATTR!==!1,_e=Z.ALLOW_DATA_ATTR!==!1,Be=Z.ALLOW_UNKNOWN_PROTOCOLS||!1,Pe=Z.ALLOW_SELF_CLOSE_IN_ATTR!==!1,Te=Z.SAFE_FOR_TEMPLATES||!1,ke=Z.SAFE_FOR_XML!==!1,Ee=Z.WHOLE_DOCUMENT||!1,mt=Z.RETURN_DOM||!1,bt=Z.RETURN_DOM_FRAGMENT||!1,$t=Z.RETURN_TRUSTED_TYPE||!1,Oe=Z.FORCE_BODY||!1,un=Z.SANITIZE_DOM!==!1,zt=Z.SANITIZE_NAMED_PROPS||!1,kn=Z.KEEP_CONTENT!==!1,dn=Z.IN_PLACE||!1,z=Z.ALLOWED_URI_REGEXP||Kq,or=Z.NAMESPACE||Fe,wi=Z.MATHML_TEXT_INTEGRATION_POINTS||wi,Mr=Z.HTML_INTEGRATION_POINTS||Mr,Q=Z.CUSTOM_ELEMENT_HANDLING||{},Z.CUSTOM_ELEMENT_HANDLING&&Si(Z.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(Q.tagNameCheck=Z.CUSTOM_ELEMENT_HANDLING.tagNameCheck),Z.CUSTOM_ELEMENT_HANDLING&&Si(Z.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(Q.attributeNameCheck=Z.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),Z.CUSTOM_ELEMENT_HANDLING&&typeof Z.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements=="boolean"&&(Q.allowCustomizedBuiltInElements=Z.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Te&&(_e=!1),bt&&(mt=!0),Ot&&(G=st({},tP),ae=[],Ot.html===!0&&(st(G,eP),st(ae,nP)),Ot.svg===!0&&(st(G,cC),st(ae,fC),st(ae,rp)),Ot.svgFilters===!0&&(st(G,uC),st(ae,fC),st(ae,rp)),Ot.mathMl===!0&&(st(G,dC),st(ae,rP),st(ae,rp))),Z.ADD_TAGS&&(typeof Z.ADD_TAGS=="function"?le.tagCheck=Z.ADD_TAGS:(G===oe&&(G=Ms(G)),st(G,Z.ADD_TAGS,xt))),Z.ADD_ATTR&&(typeof Z.ADD_ATTR=="function"?le.attributeCheck=Z.ADD_ATTR:(ae===$&&(ae=Ms(ae)),st(ae,Z.ADD_ATTR,xt))),Z.ADD_URI_SAFE_ATTR&&st(Ar,Z.ADD_URI_SAFE_ATTR,xt),Z.FORBID_CONTENTS&&(ut===Tt&&(ut=Ms(ut)),st(ut,Z.FORBID_CONTENTS,xt)),kn&&(G["#text"]=!0),Ee&&st(G,["html","head","body"]),G.table&&(st(G,["tbody"]),delete ee.tbody),Z.TRUSTED_TYPES_POLICY){if(typeof Z.TRUSTED_TYPES_POLICY.createHTML!="function")throw zu('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if(typeof Z.TRUSTED_TYPES_POLICY.createScriptURL!="function")throw zu('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');N=Z.TRUSTED_TYPES_POLICY,A=N.createHTML("")}else N===void 0&&(N=qhe(b,i)),N!==null&&typeof A=="string"&&(A=N.createHTML(""));mr&&mr(Z),Bn=Z}},Gt=st({},[...cC,...uC,..._he]),Lt=st({},[...dC,...Dhe]),br=function(Z){let ge=E(Z);(!ge||!ge.tagName)&&(ge={namespaceURI:or,tagName:"template"});const Me=xp(Z.tagName),lt=xp(ge.tagName);return fn[Z.namespaceURI]?Z.namespaceURI===Le?ge.namespaceURI===Fe?Me==="svg":ge.namespaceURI===Zt?Me==="svg"&&(lt==="annotation-xml"||wi[lt]):!!Gt[Me]:Z.namespaceURI===Zt?ge.namespaceURI===Fe?Me==="math":ge.namespaceURI===Le?Me==="math"&&Mr[lt]:!!Lt[Me]:Z.namespaceURI===Fe?ge.namespaceURI===Le&&!Mr[lt]||ge.namespaceURI===Zt&&!wi[lt]?!1:!Lt[Me]&&(_r[Me]||!Gt[Me]):!!(ar==="application/xhtml+xml"&&fn[Z.namespaceURI]):!1},En=function(Z){Iu(t.removed,{element:Z});try{E(Z).removeChild(Z)}catch{w(Z)}},Rr=function(Z,ge){try{Iu(t.removed,{attribute:ge.getAttributeNode(Z),from:ge})}catch{Iu(t.removed,{attribute:null,from:ge})}if(ge.removeAttribute(Z),Z==="is")if(mt||bt)try{En(ge)}catch{}else try{ge.setAttribute(Z,"")}catch{}},Ii=function(Z){let ge=null,Me=null;if(Oe)Z="<remove></remove>"+Z;else{const Mt=lC(Z,/^[\r\n\t ]+/);Me=Mt&&Mt[0]}ar==="application/xhtml+xml"&&or===Fe&&(Z='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+Z+"</body></html>");const lt=N?N.createHTML(Z):Z;if(or===Fe)try{ge=new g().parseFromString(lt,ar)}catch{}if(!ge||!ge.documentElement){ge=_.createDocument(or,"template",null);try{ge.documentElement.innerHTML=dt?A:lt}catch{}}const Pt=ge.body||ge.documentElement;return Z&&Me&&Pt.insertBefore(n.createTextNode(Me),Pt.childNodes[0]||null),or===Fe?I.call(ge,Ee?"html":"body")[0]:Ee?ge.documentElement:Pt},us=function(Z){return j.call(Z.ownerDocument||Z,Z,d.SHOW_ELEMENT|d.SHOW_COMMENT|d.SHOW_TEXT|d.SHOW_PROCESSING_INSTRUCTION|d.SHOW_CDATA_SECTION,null)},jr=function(Z){return Z instanceof p&&(typeof Z.nodeName!="string"||typeof Z.textContent!="string"||typeof Z.removeChild!="function"||!(Z.attributes instanceof h)||typeof Z.removeAttribute!="function"||typeof Z.setAttribute!="function"||typeof Z.namespaceURI!="string"||typeof Z.insertBefore!="function"||typeof Z.hasChildNodes!="function")},Bi=function(Z){return typeof l=="function"&&Z instanceof l};function hn(De,Z,ge){np(De,Me=>{Me.call(t,Z,ge,Bn)})}const qe=function(Z){let ge=null;if(hn(U.beforeSanitizeElements,Z,null),jr(Z))return En(Z),!0;const Me=xt(Z.nodeName);if(hn(U.uponSanitizeElement,Z,{tagName:Me,allowedTags:G}),ke&&Z.hasChildNodes()&&!Bi(Z.firstElementChild)&&cr(/<[/\w!]/g,Z.innerHTML)&&cr(/<[/\w!]/g,Z.textContent)||Z.nodeType===qu.progressingInstruction||ke&&Z.nodeType===qu.comment&&cr(/<[/\w]/g,Z.data))return En(Z),!0;if(!(le.tagCheck instanceof Function&&le.tagCheck(Me))&&(!G[Me]||ee[Me])){if(!ee[Me]&&Xn(Me)&&(Q.tagNameCheck instanceof RegExp&&cr(Q.tagNameCheck,Me)||Q.tagNameCheck instanceof Function&&Q.tagNameCheck(Me)))return!1;if(kn&&!ut[Me]){const lt=E(Z)||Z.parentNode,Pt=T(Z)||Z.childNodes;if(Pt&&lt){const Mt=Pt.length;for(let Vt=Mt-1;Vt>=0;--Vt){const _n=S(Pt[Vt],!0);_n.__removalCount=(Z.__removalCount||0)+1,lt.insertBefore(_n,k(Z))}}}return En(Z),!0}return Z instanceof u&&!br(Z)||(Me==="noscript"||Me==="noembed"||Me==="noframes")&&cr(/<\/no(script|embed|frames)/i,Z.innerHTML)?(En(Z),!0):(Te&&Z.nodeType===qu.text&&(ge=Z.textContent,np([V,F,L],lt=>{ge=Bu(ge,lt," ")}),Z.textContent!==ge&&(Iu(t.removed,{element:Z.cloneNode()}),Z.textContent=ge)),hn(U.afterSanitizeElements,Z,null),!1)},Yn=function(Z,ge,Me){if(un&&(ge==="id"||ge==="name")&&(Me in n||Me in Us))return!1;if(!(_e&&!de[ge]&&cr(H,ge))){if(!(xe&&cr(O,ge))){if(!(le.attributeCheck instanceof Function&&le.attributeCheck(ge,Z))){if(!ae[ge]||de[ge]){if(!(Xn(Z)&&(Q.tagNameCheck instanceof RegExp&&cr(Q.tagNameCheck,Z)||Q.tagNameCheck instanceof Function&&Q.tagNameCheck(Z))&&(Q.attributeNameCheck instanceof RegExp&&cr(Q.attributeNameCheck,ge)||Q.attributeNameCheck instanceof Function&&Q.attributeNameCheck(ge,Z))||ge==="is"&&Q.allowCustomizedBuiltInElements&&(Q.tagNameCheck instanceof RegExp&&cr(Q.tagNameCheck,Me)||Q.tagNameCheck instanceof Function&&Q.tagNameCheck(Me))))return!1}else if(!Ar[ge]){if(!cr(z,Bu(Me,K,""))){if(!((ge==="src"||ge==="xlink:href"||ge==="href")&&Z!=="script"&&Nhe(Me,"data:")===0&&At[Z])){if(!(Be&&!cr(q,Bu(Me,K,"")))){if(Me)return!1}}}}}}}return!0},Xn=function(Z){return Z!=="annotation-xml"&&lC(Z,te)},Rt=function(Z){hn(U.beforeSanitizeAttributes,Z,null);const{attributes:ge}=Z;if(!ge||jr(Z))return;const Me={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:ae,forceKeepAttr:void 0};let lt=ge.length;for(;lt--;){const Pt=ge[lt],{name:Mt,namespaceURI:Vt,value:_n}=Pt,pn=xt(Mt),Xr=_n;let It=Mt==="value"?Xr:The(Xr);if(Me.attrName=pn,Me.attrValue=It,Me.keepAttr=!0,Me.forceKeepAttr=void 0,hn(U.uponSanitizeAttribute,Z,Me),It=Me.attrValue,zt&&(pn==="id"||pn==="name")&&(Rr(Mt,Z),It=Nt+It),ke&&cr(/((--!?|])>)|<\/(style|title|textarea)/i,It)){Rr(Mt,Z);continue}if(pn==="attributename"&&lC(It,"href")){Rr(Mt,Z);continue}if(Me.forceKeepAttr)continue;if(!Me.keepAttr){Rr(Mt,Z);continue}if(!Pe&&cr(/\/>/i,It)){Rr(Mt,Z);continue}Te&&np([V,F,L],Vi=>{It=Bu(It,Vi," ")});const zn=xt(Z.nodeName);if(!Yn(zn,pn,It)){Rr(Mt,Z);continue}if(N&&typeof b=="object"&&typeof b.getAttributeType=="function"&&!Vt)switch(b.getAttributeType(zn,pn)){case"TrustedHTML":{It=N.createHTML(It);break}case"TrustedScriptURL":{It=N.createScriptURL(It);break}}if(It!==Xr)try{Vt?Z.setAttributeNS(Vt,Mt,It):Z.setAttribute(Mt,It),jr(Z)?En(Z):J5(t.removed)}catch{Rr(Mt,Z)}}hn(U.afterSanitizeAttributes,Z,null)},zi=function De(Z){let ge=null;const Me=us(Z);for(hn(U.beforeSanitizeShadowDOM,Z,null);ge=Me.nextNode();)hn(U.uponSanitizeShadowNode,ge,null),qe(ge),Rt(ge),ge.content instanceof s&&De(ge.content);hn(U.afterSanitizeShadowDOM,Z,null)};return t.sanitize=function(De){let Z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},ge=null,Me=null,lt=null,Pt=null;if(dt=!De,dt&&(De="<!-->"),typeof De!="string"&&!Bi(De))if(typeof De.toString=="function"){if(De=De.toString(),typeof De!="string")throw zu("dirty is not a string, aborting")}else throw zu("toString is not a function");if(!t.isSupported)return De;if(ht||Kn(Z),t.removed=[],typeof De=="string"&&(dn=!1),dn){if(De.nodeName){const _n=xt(De.nodeName);if(!G[_n]||ee[_n])throw zu("root node is forbidden and cannot be sanitized in-place")}}else if(De instanceof l)ge=Ii("<!---->"),Me=ge.ownerDocument.importNode(De,!0),Me.nodeType===qu.element&&Me.nodeName==="BODY"||Me.nodeName==="HTML"?ge=Me:ge.appendChild(Me);else{if(!mt&&!Te&&!Ee&&De.indexOf("<")===-1)return N&&$t?N.createHTML(De):De;if(ge=Ii(De),!ge)return mt?null:$t?A:""}ge&&Oe&&En(ge.firstChild);const Mt=us(dn?De:ge);for(;lt=Mt.nextNode();)qe(lt),Rt(lt),lt.content instanceof s&&zi(lt.content);if(dn)return De;if(mt){if(bt)for(Pt=R.call(ge.ownerDocument);ge.firstChild;)Pt.appendChild(ge.firstChild);else Pt=ge;return(ae.shadowroot||ae.shadowrootmode)&&(Pt=B.call(r,Pt,!0)),Pt}let Vt=Ee?ge.outerHTML:ge.innerHTML;return Ee&&G["!doctype"]&&ge.ownerDocument&&ge.ownerDocument.doctype&&ge.ownerDocument.doctype.name&&cr(Yq,ge.ownerDocument.doctype.name)&&(Vt="<!DOCTYPE "+ge.ownerDocument.doctype.name+`>
`+Vt),Te&&np([V,F,L],_n=>{Vt=Bu(Vt,_n," ")}),N&&$t?N.createHTML(Vt):Vt},t.setConfig=function(){let De=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{};Kn(De),ht=!0},t.clearConfig=function(){Bn=null,ht=!1},t.isValidAttribute=function(De,Z,ge){Bn||Kn({});const Me=xt(De),lt=xt(Z);return Yn(Me,lt,ge)},t.addHook=function(De,Z){typeof Z=="function"&&Iu(U[De],Z)},t.removeHook=function(De,Z){if(Z!==void 0){const ge=khe(U[De],Z);return ge===-1?void 0:Ehe(U[De],ge,1)[0]}return J5(U[De])},t.removeHooks=function(De){U[De]=[]},t.removeAllHooks=function(){U=sP()},t}var hC=Xq();const Zq=Ce.memo(({id:e,data:t,onCopy:n,isInGroup:r})=>{const[i,s]=Ce.useState({visible:!1,x:0,y:0}),o=t.componentName||t.label,l=t.nodeType||"entity",u=Ce.useCallback(N=>{N.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-delete",{detail:{id:e}}))},[e]),d=Ce.useCallback(N=>{N.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-toggle",{detail:{id:e}}))},[e]),h=Ce.useCallback(N=>{N.stopPropagation(),n?.(e,t)},[e,t,n]),p=Ce.useCallback(N=>{N.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-detach",{detail:{id:e}}))},[e]),g=Ce.useCallback(N=>{N.preventDefault(),N.stopPropagation(),s({visible:!0,x:N.clientX,y:N.clientY})},[]),b=Ce.useCallback(()=>{s({visible:!1,x:0,y:0})},[]);Ce.useEffect(()=>{if(i.visible){const N=A=>{const _=document.querySelector("[data-context-menu]");_&&!_.contains(A.target)&&b()};return document.addEventListener("click",N),document.addEventListener("contextmenu",N),()=>{document.removeEventListener("click",N),document.removeEventListener("contextmenu",N)}}},[i.visible,b]);const v=t.attributes?t.attributes.split(`
`).filter(N=>N.trim()):[],w=(()=>{switch(l){case"weak-entity":return{border:"3px double var(--theme-color, #333)",borderRadius:"0.5rem",minWidth:"200px",maxWidth:"400px",height:"auto",maxHeight:"500px"};case"er-note":return{borderRadius:"0.25rem",minWidth:"180px",maxWidth:"400px",height:"auto",maxHeight:"300px",backgroundColor:"var(--note-bg, #fef3c7)",borderLeft:"4px solid var(--warning, #f59e0b)"};case"er-trigger":return{borderRadius:"0.5rem",minWidth:"200px",maxWidth:"400px",height:"auto",maxHeight:"300px",backgroundColor:"var(--accent-bg, #fef3e7)",borderLeft:"4px solid var(--accent, #f59e0b)"};case"er-view":return{borderRadius:"0.5rem",minWidth:"200px",maxWidth:"400px",height:"auto",maxHeight:"500px",borderStyle:"dashed",borderWidth:"2px"};case"uml-use-case":return{borderRadius:"0.25rem",minWidth:"180px",maxWidth:"400px",height:"auto",maxHeight:"300px",backgroundColor:"var(--note-bg, #fef3c7)",borderLeft:"4px solid var(--brand, #6366f1)"};case"uml-note":return{borderRadius:"0.25rem",minWidth:"160px",maxWidth:"450px",height:"auto",maxHeight:"300px",backgroundColor:"var(--note-bg, #fef3c7)",borderLeft:"4px solid var(--warning, #f59e0b)"};default:return{borderRadius:"0.5rem",minWidth:"200px",maxWidth:"400px",height:"auto",maxHeight:"500px"}}})(),k=l==="er-note"||l==="uml-note"||l==="uml-use-case",T=l==="er-trigger",E=["uml-use-case","uml-note"].includes(l);return m.jsxs(m.Fragment,{children:[m.jsxs(ft.div,{initial:{y:0,opacity:1},whileHover:{y:-1,boxShadow:"0 12px 30px rgba(0,0,0,0.12)"},whileTap:{scale:.985},transition:{type:"spring",stiffness:320,damping:28},className:`bg-surface border-2 border-theme text-sm shadow-sm cursor-grab relative overflow-y-auto er-node-scroll ${k?"bg-yellow-50 dark:bg-yellow-900/20 text-gray-900 dark:text-gray-100":""} ${T?"bg-orange-50 dark:bg-orange-900/20 text-gray-900 dark:text-gray-100":"text-theme"}`,style:w,onContextMenu:g,children:[m.jsx(xn,{id:"top",type:"source",position:Ae.Top,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),m.jsx(xn,{id:"right",type:"source",position:Ae.Right,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),m.jsx(xn,{id:"bottom",type:"source",position:Ae.Bottom,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),m.jsx(xn,{id:"left",type:"source",position:Ae.Left,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),!k&&!T&&m.jsxs("div",{className:"bg-[var(--brand)] text-white px-3 py-2 font-semibold text-center flex items-center justify-center gap-2",children:[t.icon&&m.jsx("span",{className:"text-lg",children:t.icon}),m.jsx("span",{children:o})]}),k&&m.jsxs("div",{className:"px-3 py-2",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.icon&&m.jsx("span",{className:"text-lg",children:t.icon}),m.jsx("span",{className:"font-semibold text-gray-700",children:o})]}),t.description&&m.jsx("div",{className:"text-xs text-gray-700 mt-1",dangerouslySetInnerHTML:{__html:hC.sanitize(t.description)}})]}),T&&m.jsxs("div",{className:"px-3 py-2",children:[m.jsxs("div",{className:"flex items-center gap-2 mb-1",children:[t.icon&&m.jsx("span",{className:"text-lg",children:t.icon}),m.jsx("span",{className:"font-semibold text-gray-700",children:o})]}),m.jsxs("div",{className:"text-xs space-y-1 mt-2",children:[t.timing&&t.event&&m.jsxs("div",{className:"font-mono text-[11px] text-orange-700",children:[t.timing," ",t.event]}),t.targetTable&&m.jsxs("div",{className:"text-gray-700",children:["ON ",m.jsx("span",{className:"font-semibold text-gray-700",children:t.targetTable})]}),t.level&&m.jsxs("div",{className:"text-gray-600 text-[10px]",children:["FOR EACH ",t.level]}),t.description&&m.jsx("div",{className:"text-gray-700 mt-1 pt-1 border-t border-gray-300",dangerouslySetInnerHTML:{__html:hC.sanitize(t.description)}})]})]}),E&&!k&&m.jsx("div",{className:"px-4 py-3",children:m.jsxs("div",{className:"flex flex-col items-center gap-2",children:[t.icon&&m.jsx("span",{className:"text-3xl",children:t.icon}),m.jsx("span",{className:"font-semibold text-theme text-center",children:o}),t.description&&m.jsx("div",{className:"text-xs text-muted mt-1 text-center",dangerouslySetInnerHTML:{__html:hC.sanitize(t.description)}})]})}),(l==="entity"||l==="weak-entity")&&v.length>0&&m.jsx("div",{className:"px-3 py-2 border-t border-theme/20",children:m.jsx("div",{className:"space-y-1 text-xs",children:v.map((N,A)=>{const _=t.primaryKey&&N.includes(t.primaryKey),j=t.foreignKeys&&t.foreignKeys.split(`
`).some(R=>N.includes(R));return m.jsx("div",{className:`font-mono ${_?"font-bold text-yellow-600 dark:text-yellow-400":j?"text-blue-600 dark:text-blue-400":""}`,children:N.trim().startsWith("+")?m.jsxs("span",{className:"text-yellow-600 dark:text-yellow-400",children:[" ",N.trim().substring(1).trim()]}):N.trim()},A)})})})]}),i.visible&&Yd.createPortal(m.jsxs(ft.div,{"data-context-menu":!0,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{type:"spring",stiffness:400,damping:25},className:"fixed z-[10000] bg-[var(--surface)] border border-theme rounded-lg shadow-lg py-1 min-w-[140px] pointer-events-auto",style:{left:i.x,top:i.y,transform:"translate(-50%, -10px)"},children:[m.jsxs("button",{type:"button",onClick:N=>{N.stopPropagation(),d(N),b()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm",children:[m.jsx(Vm,{className:"w-4 h-4"}),"Settings"]}),r&&m.jsxs("button",{type:"button",onClick:N=>{N.stopPropagation(),p(N),b()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm text-orange-500",children:[m.jsx(qk,{className:"w-4 h-4"}),"Detach from Group"]}),m.jsxs("button",{type:"button",onClick:N=>{N.stopPropagation(),h(N),b()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm",children:[m.jsx(U2,{className:"w-4 h-4"}),"Duplicate"]}),m.jsxs("button",{type:"button",onClick:N=>{N.stopPropagation(),u(N),b()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm text-red-600",children:[m.jsx(fc,{className:"w-4 h-4"}),"Delete"]})]}),document.body)]})});Zq.displayName="ERNode";const Qq=Ce.memo(({id:e,data:t,onCopy:n,isInGroup:r})=>{const[i,s]=M.useState({visible:!1,x:0,y:0}),[o,l]=M.useState(null),[u,d]=M.useState({name:"",type:""}),h=t.componentName||t.label,p=Ce.useMemo(()=>{if(!t.attributes)return[];if(Array.isArray(t.attributes))return t.attributes;if(typeof t.attributes=="string")try{const B=JSON.parse(t.attributes);return Array.isArray(B)?B:[]}catch{return[]}return[]},[t.attributes]),g=Ce.useMemo(()=>t.renderConfig?.columns&&t.renderConfig.columns.length>0?t.renderConfig.columns:[{key:"pk",label:"PK",width:"w-6"},{key:"name",label:"Column Name",width:"flex-1"},{key:"type",label:"Data Type",width:"w-24"},{key:"actions",label:"",width:"w-8"}],[t.renderConfig]),b=M.useCallback(B=>{B.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-delete",{detail:{id:e}}))},[e]),v=M.useCallback(B=>{B.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-toggle",{detail:{id:e}}))},[e]),S=M.useCallback(B=>{B.stopPropagation(),n?.(e,t)},[e,t,n]),w=M.useCallback(B=>{B.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-detach",{detail:{id:e}}))},[e]),k=M.useCallback(B=>{B.preventDefault(),B.stopPropagation(),s({visible:!0,x:B.clientX,y:B.clientY})},[]),T=M.useCallback(()=>{s({visible:!1,x:0,y:0})},[]),E=M.useCallback(B=>{globalThis.dispatchEvent(new CustomEvent("diagram:table-attribute-delete",{detail:{nodeId:e,attributeId:B}}))},[e]),N=M.useCallback(B=>{B.stopPropagation();const V=t.componentId?.startsWith("uml-")?{id:`attr-${Date.now()}`,name:"+ newMethod()",type:"void",isNullable:!1}:{id:`attr-${Date.now()}`,name:"newColumn",type:"VARCHAR(255)",isNullable:!0};globalThis.dispatchEvent(new CustomEvent("diagram:table-attribute-add",{detail:{nodeId:e,attribute:V}}))},[e,t.componentId]),A=M.useCallback((B,U)=>{U.stopPropagation(),l(B.id),d({name:B.name,type:B.type})},[]),_=M.useCallback(()=>{o&&(globalThis.dispatchEvent(new CustomEvent("diagram:table-attribute-update",{detail:{nodeId:e,attributeId:o,name:u.name,type:u.type}})),l(null))},[e,o,u]),j=M.useCallback(()=>{l(null)},[]),R=M.useCallback((B,U)=>{globalThis.dispatchEvent(new CustomEvent("diagram:table-attribute-toggle",{detail:{nodeId:e,attributeId:B,key:U}}))},[e]),I=M.useCallback((B,U,V)=>{const F=B.width||"flex-1",L=U[B.key];if(B.type==="boolean"){const H=!!L,q=B.key==="isNullable"?!H:H,K=q?B.icon?.active:B.icon?.inactive,te=q?B.color?.active:B.color?.inactive;return m.jsx("button",{type:"button",onClick:()=>R(U.id,B.key),className:`${F} flex items-center justify-center ${te||""}`,title:B.label,children:K?m.jsx("span",{className:"text-xs",children:K}):m.jsx("div",{className:"w-3 h-3 border border-theme/40 rounded"})},B.key)}if(B.type==="text"&&B.editable){if(V)return m.jsx("input",{type:"text",value:String(u[B.key]||L||""),onChange:O=>d({...u,[B.key]:O.target.value}),onKeyDown:O=>{O.key==="Enter"&&_(),O.key==="Escape"&&j()},className:`${F} px-1 py-0.5 bg-surface border border-theme/40 rounded text-xs`,autoFocus:B.key==="name",onClick:O=>O.stopPropagation()},B.key);let H="text-xs cursor-pointer";return B.key==="name"?U.isPrimaryKey?H+=" font-semibold text-yellow-600 dark:text-yellow-400":U.isForeignKey&&(H+=" text-blue-600 dark:text-blue-400"):B.key==="type"&&(H+=" text-muted"),m.jsx("span",{className:`${F} truncate ${H}`,onDoubleClick:O=>A(U,O),title:"Double-click to edit",role:"button",tabIndex:0,children:String(L||"")},B.key)}return B.type==="readonly"&&B.key==="actions"?V?m.jsx("button",{type:"button",onClick:_,className:`${F} text-green-600 hover:text-green-700 text-xs`,title:"Save",children:""},"actions"):m.jsx("button",{type:"button",onClick:()=>E(U.id),className:`${F} opacity-0 group-hover:opacity-100 text-red-600 hover:text-red-700 transition-opacity`,title:"Delete attribute",children:m.jsx(fc,{className:"w-3 h-3"})},"actions"):m.jsx("span",{className:F,children:String(L||"")},B.key)},[R,E,A,_,j,u]);return Ce.useEffect(()=>{if(i.visible){const B=U=>{const V=document.querySelector("[data-context-menu]");V&&!V.contains(U.target)&&T()};return document.addEventListener("click",B),document.addEventListener("contextmenu",B),()=>{document.removeEventListener("click",B),document.removeEventListener("contextmenu",B)}}},[i.visible,T]),m.jsxs(m.Fragment,{children:[m.jsxs(ft.div,{initial:{y:0,opacity:1},whileHover:{y:-1,boxShadow:"0 12px 30px rgba(0,0,0,0.12)"},whileTap:{scale:.985},transition:{type:"spring",stiffness:320,damping:28},className:"min-w-[220px] max-h-[500px] bg-surface border-2 border-theme text-theme text-sm shadow-lg cursor-grab relative rounded-lg overflow-hidden flex flex-col",onContextMenu:k,children:[m.jsx(xn,{id:"top",type:"source",position:Ae.Top,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),m.jsx(xn,{id:"right",type:"source",position:Ae.Right,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),m.jsx(xn,{id:"bottom",type:"source",position:Ae.Bottom,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),m.jsx(xn,{id:"left",type:"source",position:Ae.Left,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),m.jsxs("div",{className:"bg-[var(--brand)] text-white px-3 py-2 font-semibold flex items-center justify-between flex-shrink-0",children:[m.jsxs("div",{className:"flex items-center gap-2",children:[t.icon&&m.jsx("span",{className:"text-lg",children:t.icon}),m.jsx("span",{children:h})]}),m.jsx("button",{type:"button",onClick:N,className:"p-1 hover:bg-white/20 rounded transition-colors",title:"Add attribute",children:m.jsx(IC,{className:"w-4 h-4"})})]}),m.jsx("div",{className:"bg-[var(--bg-hover)] px-3 py-1 border-b border-theme/20 flex items-center gap-2 text-xs font-semibold flex-shrink-0",children:g.map(B=>m.jsx("span",{className:B.width||"flex-1",style:{textAlign:B.align||"left"},children:B.label},B.key))}),m.jsx("div",{className:"divide-y divide-theme/10 overflow-y-auto flex-1 table-node-scroll",children:p.map(B=>{const U=o===B.id;return m.jsx("div",{className:"flex items-center gap-2 px-3 py-2 hover:bg-[var(--bg-hover)] group",children:g.map(V=>I(V,B,U))},B.id)})}),p.length===0&&m.jsx("div",{className:"px-3 py-4 text-center text-xs text-muted",children:"Click + to add attributes"})]}),i.visible&&Yd.createPortal(m.jsxs(ft.div,{"data-context-menu":!0,initial:{opacity:0,scale:.8},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.8},transition:{type:"spring",stiffness:400,damping:25},className:"fixed z-[10000] bg-[var(--surface)] border border-theme rounded-lg shadow-lg py-1 min-w-[140px] pointer-events-auto",style:{left:i.x,top:i.y,transform:"translate(-50%, -10px)"},children:[m.jsxs("button",{type:"button",onClick:B=>{B.stopPropagation(),v(B),T()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm",children:[m.jsx(Vm,{className:"w-4 h-4"}),"Settings"]}),m.jsxs("button",{type:"button",onClick:B=>{B.stopPropagation(),N(B),T()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm",children:[m.jsx(IC,{className:"w-4 h-4"}),"Add Attribute"]}),r&&m.jsxs("button",{type:"button",onClick:B=>{B.stopPropagation(),w(B),T()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm text-orange-500",children:[m.jsx(qk,{className:"w-4 h-4"}),"Detach from Group"]}),m.jsxs("button",{type:"button",onClick:B=>{B.stopPropagation(),S(B),T()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm",children:[m.jsx(U2,{className:"w-4 h-4"}),"Duplicate"]}),m.jsxs("button",{type:"button",onClick:B=>{B.stopPropagation(),b(B),T()},className:"w-full px-3 py-2 text-left hover:bg-[var(--bg-hover)] transition-colors flex items-center gap-2 text-sm text-red-600",children:[m.jsx(fc,{className:"w-4 h-4"}),"Delete"]})]}),document.body)]})});Qq.displayName="TableNode";const Hhe=({sourceX:e,sourceY:t,targetX:n,targetY:r},i)=>{const s=(e+n)/2,o=(t+r)/2;return`M ${e} ${t} Q ${s} ${o+i} ${n} ${r}`},Fhe=(e,t)=>{const{sourceX:n,sourceY:r,targetX:i,targetY:s}=e;if(t){const d=n<i?25:-25,h=Hhe({sourceX:n,sourceY:r,targetX:i,targetY:s},d),p=(n+i)/2,g=(r+s)/2,b=p,v=g+d/2;return{edgePath:h,centerX:b,centerY:v}}const[o]=hg(e),[l,u]=pg({sourceX:n,sourceY:r,targetX:i,targetY:s});return{edgePath:o,centerX:l,centerY:u}},Uhe=e=>{const{id:t,source:n,target:r,sourceX:i,sourceY:s,targetX:o,targetY:l,sourcePosition:u,targetPosition:d,data:h,selected:p,markerEnd:g}=e,[b,v]=M.useState(!1),[S,w]=M.useState(h?.label??""),[k,T]=M.useState(h?.hasLabel??!1),E=M.useRef(null),N=ot(F=>{const L=F.edges.some(H=>H.id!==t&&H.source===r&&H.target===n);return L&&console.log(`Bi-directional edge detected: ${t} (${n} -> ${r})`),L}),A={sourceX:i,sourceY:s,sourcePosition:u,targetX:o,targetY:l,targetPosition:d},{edgePath:_,centerX:j,centerY:R}=Fhe(A,N),I=F=>{F.stopPropagation(),v(!0),setTimeout(()=>E.current?.focus(),0)},B=F=>{F.stopPropagation(),T(!0),v(!0),setTimeout(()=>E.current?.focus(),0)},U=F=>{F.stopPropagation(),T(!1),w(""),window.dispatchEvent(new CustomEvent("diagram:edge-label-change",{detail:{id:t,label:"",hasLabel:!1}}))},V=()=>{v(!1),window.dispatchEvent(new CustomEvent("diagram:edge-label-change",{detail:{id:t,label:S,hasLabel:k||S.trim().length>0}}))};return m.jsxs("g",{className:"react-flow__edge",children:[m.jsx("defs",{children:m.jsx("marker",{id:`arrow-${t}`,viewBox:"0 0 10 10",refX:"8",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto",children:m.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"var(--brand)"})})}),m.jsx("path",{id:t,d:_,fill:"none",stroke:p?"var(--brand)":"var(--muted)",strokeWidth:p?3:2,markerEnd:g||`url(#arrow-${t})`,className:"transition-colors"}),m.jsx("foreignObject",{x:j-75,y:R-12,width:150,height:24,className:"overflow-visible",children:m.jsx("div",{className:"flex items-center justify-center w-full h-full pointer-events-auto",children:k?m.jsx("div",{className:"flex items-center gap-1",children:b?m.jsx("input",{ref:E,value:S,onChange:F=>w(F.target.value),onBlur:V,onKeyDown:F=>{F.key==="Enter"&&V(),F.key==="Escape"&&(v(!1),w(h?.label??""))},className:"text-xs border rounded px-2 py-1 bg-[var(--surface)] text-theme w-24 text-center focus:outline-none focus:ring-1 focus:ring-[var(--brand)]",placeholder:"Label..."}):m.jsxs(m.Fragment,{children:[m.jsx("button",{onDoubleClick:I,className:`text-xs px-2 py-1 rounded cursor-text bg-[var(--surface)] text-theme border text-center min-w-[60px] hover:bg-[var(--bg-hover)] ${p?"ring-1 ring-[var(--brand)]":"border-theme"}`,title:"Double-click to edit",type:"button",children:S||"Label"}),p&&m.jsx("button",{onClick:U,className:"text-xs px-1 py-1 rounded bg-red-100 text-red-700 hover:bg-red-200 dark:bg-red-900 dark:text-red-200",title:"Remove label",children:""})]})}):p&&m.jsx("button",{onClick:B,className:"text-xs px-2 py-1 rounded bg-[var(--surface)] border border-dashed border-[var(--brand)] text-[var(--brand)] hover:bg-[var(--bg-hover)]",title:"Add label",children:"+ Label"})})})]})},$he=({sourceX:e,sourceY:t,targetX:n,targetY:r},i)=>{const s=(e+n)/2,o=(t+r)/2;return`M ${e} ${t} Q ${s} ${o+i} ${n} ${r}`},Ghe=(e,t)=>{const{sourceX:n,sourceY:r,targetX:i,targetY:s}=e;if(t){const d=n<i?25:-25,h=$he({sourceX:n,sourceY:r,targetX:i,targetY:s},d),p=(n+i)/2,g=(r+s)/2,b=p,v=g+d/2;return{edgePath:h,centerX:b,centerY:v}}const[o]=hg(e),[l,u]=pg({sourceX:n,sourceY:r,targetX:i,targetY:s});return{edgePath:o,centerX:l,centerY:u}},Whe=e=>{switch(e){case"one-to-one":case"one-to-many":case"zero-to-one":case"one-mandatory-many-optional":case"one-or-many":return"one";case"many-to-one":case"many-to-many":case"mandatory-many-to-many":case"optional-many-to-many":return"many";case"mandatory-one-to-one":case"mandatory-one-to-many":return"mandatory-one";case"optional-zero-to-one":case"optional-zero-to-many":case"zero-to-many":return"optional-zero";case"recursive-one-to-one":return"one";case"recursive-one-to-many":return"one";case"recursive-many-to-many":return"many";default:return"one"}},Khe=e=>{switch(e){case"one-to-one":case"many-to-one":case"zero-to-one":return"one";case"one-to-many":case"many-to-many":case"zero-to-many":case"one-mandatory-many-optional":case"one-or-many":return"many";case"mandatory-one-to-one":return"mandatory-one";case"mandatory-one-to-many":case"mandatory-many-to-many":return"mandatory-many";case"optional-zero-to-one":return"optional-one";case"optional-zero-to-many":case"optional-many-to-many":return"optional-many";case"recursive-one-to-one":return"one";case"recursive-one-to-many":return"many";case"recursive-many-to-many":return"many";default:return"many"}},Yhe=e=>{const{id:t,source:n,target:r,sourceX:i,sourceY:s,targetX:o,targetY:l,sourcePosition:u,targetPosition:d,data:h,selected:p}=e,g=h||{},[b,v]=M.useState(!1),[S,w]=M.useState(g.label??""),[k,T]=M.useState(g.hasLabel??!1),[E,N]=M.useState(g.cardinality??"one-to-many"),A=M.useRef(null),_=ot(K=>K.edges.some(z=>z.id!==t&&z.source===r&&z.target===n)),j={sourceX:i,sourceY:s,sourcePosition:u,targetX:o,targetY:l,targetPosition:d},{edgePath:R,centerX:I,centerY:B}=Ghe(j,_),U=K=>{K.stopPropagation(),v(!0),setTimeout(()=>A.current?.focus(),0)},V=K=>{K.stopPropagation(),T(!0),v(!0),setTimeout(()=>A.current?.focus(),0)},F=K=>{K.stopPropagation(),T(!1),w(""),globalThis.dispatchEvent(new CustomEvent("diagram:edge-label-change",{detail:{id:t,label:"",hasLabel:!1}}))},L=()=>{v(!1),globalThis.dispatchEvent(new CustomEvent("diagram:edge-label-change",{detail:{id:t,label:S,hasLabel:k||S.trim().length>0}}))},H=K=>{N(K),globalThis.dispatchEvent(new CustomEvent("diagram:edge-cardinality-change",{detail:{id:t,cardinality:K}}))},O=Whe(E),q=Khe(E);return m.jsxs("g",{className:"react-flow__edge",children:[m.jsxs("defs",{children:[m.jsx("marker",{id:`er-one-${t}`,viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"8",markerHeight:"8",orient:"auto",children:m.jsx("line",{x1:"0",y1:"0",x2:"0",y2:"10",stroke:"var(--brand)",strokeWidth:"2"})}),m.jsxs("marker",{id:`er-many-${t}`,viewBox:"0 0 20 20",refX:"18",refY:"10",markerWidth:"12",markerHeight:"12",orient:"auto",children:[m.jsx("line",{x1:"0",y1:"10",x2:"15",y2:"10",stroke:"var(--brand)",strokeWidth:"2"}),m.jsx("line",{x1:"15",y1:"10",x2:"20",y2:"5",stroke:"var(--brand)",strokeWidth:"2"}),m.jsx("line",{x1:"15",y1:"10",x2:"20",y2:"15",stroke:"var(--brand)",strokeWidth:"2"})]}),m.jsxs("marker",{id:`er-mandatory-one-${t}`,viewBox:"0 0 10 10",refX:"9",refY:"5",markerWidth:"8",markerHeight:"8",orient:"auto",children:[m.jsx("line",{x1:"0",y1:"0",x2:"0",y2:"10",stroke:"var(--brand)",strokeWidth:"2"}),m.jsx("line",{x1:"3",y1:"0",x2:"3",y2:"10",stroke:"var(--brand)",strokeWidth:"2"})]}),m.jsxs("marker",{id:`er-mandatory-many-${t}`,viewBox:"0 0 20 20",refX:"18",refY:"10",markerWidth:"12",markerHeight:"12",orient:"auto",children:[m.jsx("line",{x1:"0",y1:"10",x2:"12",y2:"10",stroke:"var(--brand)",strokeWidth:"2"}),m.jsx("line",{x1:"3",y1:"8",x2:"3",y2:"12",stroke:"var(--brand)",strokeWidth:"2"}),m.jsx("line",{x1:"12",y1:"10",x2:"20",y2:"5",stroke:"var(--brand)",strokeWidth:"2"}),m.jsx("line",{x1:"12",y1:"10",x2:"20",y2:"15",stroke:"var(--brand)",strokeWidth:"2"})]}),m.jsx("marker",{id:`er-optional-zero-${t}`,viewBox:"0 0 12 12",refX:"10",refY:"6",markerWidth:"10",markerHeight:"10",orient:"auto",children:m.jsx("circle",{cx:"6",cy:"6",r:"3",fill:"none",stroke:"var(--brand)",strokeWidth:"2"})}),m.jsxs("marker",{id:`er-optional-one-${t}`,viewBox:"0 0 15 12",refX:"14",refY:"6",markerWidth:"12",markerHeight:"10",orient:"auto",children:[m.jsx("circle",{cx:"4",cy:"6",r:"3",fill:"none",stroke:"var(--brand)",strokeWidth:"1.5"}),m.jsx("line",{x1:"10",y1:"0",x2:"10",y2:"12",stroke:"var(--brand)",strokeWidth:"2"})]}),m.jsxs("marker",{id:`er-optional-many-${t}`,viewBox:"0 0 25 20",refX:"23",refY:"10",markerWidth:"14",markerHeight:"12",orient:"auto",children:[m.jsx("circle",{cx:"4",cy:"10",r:"3",fill:"none",stroke:"var(--brand)",strokeWidth:"1.5"}),m.jsx("line",{x1:"10",y1:"10",x2:"18",y2:"10",stroke:"var(--brand)",strokeWidth:"2"}),m.jsx("line",{x1:"18",y1:"10",x2:"25",y2:"5",stroke:"var(--brand)",strokeWidth:"2"}),m.jsx("line",{x1:"18",y1:"10",x2:"25",y2:"15",stroke:"var(--brand)",strokeWidth:"2"})]}),m.jsx("marker",{id:`er-one-source-${t}`,viewBox:"0 0 10 10",refX:"1",refY:"5",markerWidth:"8",markerHeight:"8",orient:"auto",children:m.jsx("line",{x1:"10",y1:"0",x2:"10",y2:"10",stroke:"var(--brand)",strokeWidth:"2"})}),m.jsxs("marker",{id:`er-many-source-${t}`,viewBox:"0 0 20 20",refX:"2",refY:"10",markerWidth:"12",markerHeight:"12",orient:"auto",children:[m.jsx("line",{x1:"20",y1:"10",x2:"5",y2:"10",stroke:"var(--brand)",strokeWidth:"2"}),m.jsx("line",{x1:"5",y1:"10",x2:"0",y2:"5",stroke:"var(--brand)",strokeWidth:"2"}),m.jsx("line",{x1:"5",y1:"10",x2:"0",y2:"15",stroke:"var(--brand)",strokeWidth:"2"})]}),m.jsxs("marker",{id:`er-mandatory-one-source-${t}`,viewBox:"0 0 10 10",refX:"1",refY:"5",markerWidth:"8",markerHeight:"8",orient:"auto",children:[m.jsx("line",{x1:"10",y1:"0",x2:"10",y2:"10",stroke:"var(--brand)",strokeWidth:"2"}),m.jsx("line",{x1:"7",y1:"0",x2:"7",y2:"10",stroke:"var(--brand)",strokeWidth:"2"})]}),m.jsx("marker",{id:`er-optional-zero-source-${t}`,viewBox:"0 0 12 12",refX:"2",refY:"6",markerWidth:"10",markerHeight:"10",orient:"auto",children:m.jsx("circle",{cx:"6",cy:"6",r:"3",fill:"none",stroke:"var(--brand)",strokeWidth:"2"})})]}),m.jsx("path",{id:t,d:R,fill:"none",stroke:p?"var(--brand)":"var(--muted)",strokeWidth:p?3:2,markerEnd:`url(#er-${q}-${t})`,markerStart:`url(#er-${O}-source-${t})`,className:"transition-colors"}),m.jsx("foreignObject",{x:I-100,y:B-40,width:200,height:80,className:"overflow-visible",children:m.jsxs("div",{className:"flex flex-col items-center justify-center w-full h-full pointer-events-auto gap-2",children:[k?m.jsx("div",{className:"flex items-center gap-1",children:b?m.jsx("input",{ref:A,value:S,onChange:K=>w(K.target.value),onBlur:L,onKeyDown:K=>{K.key==="Enter"&&L(),K.key==="Escape"&&(v(!1),w(g.label??""))},className:"text-xs border rounded px-2 py-1 bg-[var(--surface)] text-theme w-24 text-center focus:outline-none focus:ring-1 focus:ring-[var(--brand)]",placeholder:"Label..."}):m.jsxs(m.Fragment,{children:[m.jsx("button",{onDoubleClick:U,className:`text-xs px-2 py-1 rounded cursor-text bg-[var(--surface)] text-theme border text-center min-w-[60px] hover:bg-[var(--bg-hover)] ${p?"ring-1 ring-[var(--brand)]":"border-theme"}`,title:"Double-click to edit",type:"button",children:S||"Label"}),p&&m.jsx("button",{onClick:F,className:"text-xs px-1 py-1 rounded bg-red-100 text-red-700 hover:bg-red-200 dark:bg-red-900 dark:text-red-200",title:"Remove label",type:"button",children:""})]})}):p&&m.jsx("button",{onClick:V,className:"text-xs px-2 py-1 rounded bg-[var(--surface)] border border-dashed border-[var(--brand)] text-[var(--brand)] hover:bg-[var(--bg-hover)]",title:"Add label",type:"button",children:"+ Label"}),p&&m.jsx("div",{className:"flex items-center gap-1 bg-[var(--surface)] border border-[var(--brand)] rounded px-2 py-1",children:m.jsxs("select",{value:E,onChange:K=>H(K.target.value),className:"text-xs bg-transparent text-theme focus:outline-none cursor-pointer",onClick:K=>K.stopPropagation(),children:[m.jsxs("optgroup",{label:" Basic Cardinality ",children:[m.jsx("option",{value:"one-to-one",children:"1:1 (One to One)"}),m.jsx("option",{value:"one-to-many",children:"1:N (One to Many)"}),m.jsx("option",{value:"many-to-one",children:"N:1 (Many to One)"}),m.jsx("option",{value:"many-to-many",children:"N:M (Many to Many)"})]}),m.jsxs("optgroup",{label:" Mandatory (Must Participate) ",children:[m.jsx("option",{value:"mandatory-one-to-one",children:"1:1 Mandatory (Both must exist)"}),m.jsx("option",{value:"mandatory-one-to-many",children:"1:N Mandatory (Both must exist)"}),m.jsx("option",{value:"mandatory-many-to-many",children:"M:N Mandatory (Both must exist)"})]}),m.jsxs("optgroup",{label:" Optional (May Participate) ",children:[m.jsx("option",{value:"optional-zero-to-one",children:"0:1 Optional (Zero or One)"}),m.jsx("option",{value:"optional-zero-to-many",children:"0:N Optional (Zero or Many)"}),m.jsx("option",{value:"optional-many-to-many",children:"0:M to 0:N Optional (Both optional)"})]}),m.jsxs("optgroup",{label:" Mixed Participation ",children:[m.jsx("option",{value:"one-mandatory-many-optional",children:"1 to 0..N (One mandatory, many optional)"}),m.jsx("option",{value:"zero-to-one",children:"0..1 (Zero or One)"}),m.jsx("option",{value:"zero-to-many",children:"0..N (Zero or Many)"}),m.jsx("option",{value:"one-or-many",children:"1..N (One or Many - at least one)"})]}),m.jsxs("optgroup",{label:" Recursive (Self-Referencing) ",children:[m.jsx("option",{value:"recursive-one-to-one",children:"Self 1:1 (Recursive One-to-One)"}),m.jsx("option",{value:"recursive-one-to-many",children:"Self 1:N (Recursive One-to-Many)"}),m.jsx("option",{value:"recursive-many-to-many",children:"Self M:N (Recursive Many-to-Many)"})]})]})})]})})]})},Xhe=({id:e,data:t})=>{const n=t.backgroundColor||"rgba(100, 100, 255, 0.05)",r=t.borderColor||"rgba(100, 100, 255, 0.3)",i=Ce.useCallback(o=>{o.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-delete",{detail:{id:e}}))},[e]),s=Ce.useCallback(o=>{o.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-toggle",{detail:{id:e}}))},[e]);return m.jsxs("div",{className:"group-node",style:{padding:"20px",borderRadius:"12px",border:`2px dashed ${r}`,backgroundColor:n,minWidth:"300px",minHeight:"200px",height:"100%",position:"relative"},children:[m.jsx(sce,{minWidth:300,minHeight:200,isVisible:!0,lineStyle:{borderColor:r,borderWidth:2,borderStyle:"dashed"},handleStyle:{width:8,height:8,borderRadius:"2px",backgroundColor:"var(--surface)",border:`2px solid ${r}`,boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}}),m.jsxs("div",{className:"absolute -top-3 right-2 flex items-center z-10 bg-[var(--surface)]/90 border border-theme rounded-full shadow-sm",children:[m.jsx(ft.button,{type:"button","aria-label":"Settings",onClick:s,className:"p-1 rounded-full hover:bg-[var(--bg-hover)] transition-colors flex items-center justify-center",title:"Group Settings",whileHover:{scale:1.1,y:-1,rotate:90},whileTap:{scale:.95},transition:{type:"spring",stiffness:400,damping:25},children:m.jsx(Vm,{className:"w-3 h-3"})}),m.jsx(ft.button,{type:"button","aria-label":"Delete Group",onClick:i,className:"p-1 text-red-600 rounded-full hover:bg-[var(--bg-hover)] transition-colors flex items-center justify-center",title:"Delete Group",whileHover:{scale:1.15,y:-2,rotate:5},whileTap:{scale:.9},transition:{type:"spring",stiffness:400,damping:25},children:m.jsx(fc,{className:"w-3 h-3"})})]}),m.jsxs("div",{className:"group-header",style:{position:"absolute",top:"-12px",left:"10px",padding:"4px 12px",borderRadius:"6px",backgroundColor:"var(--surface)",border:`1px solid ${r}`,display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",fontWeight:"600",color:"var(--theme)",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[t.icon&&m.jsx("span",{children:t.icon}),m.jsx("span",{children:t.label})]}),t.subtitle&&m.jsx("div",{style:{marginTop:"8px",fontSize:"12px",color:"var(--muted)",fontStyle:"italic"},children:t.subtitle}),m.jsx(xn,{id:"top",type:"source",position:Ae.Top,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),m.jsx(xn,{id:"right",type:"source",position:Ae.Right,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),m.jsx(xn,{id:"bottom",type:"source",position:Ae.Bottom,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),m.jsx(xn,{id:"left",type:"source",position:Ae.Left,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}})]})},Zhe=({property:e,onUpdate:t,onDelete:n,isNew:r=!1})=>{const[i,s]=M.useState(r),o=d=>{t(e.id,{value:d})},l=(d,h)=>{t(e.id,{[d]:h})},u=[{value:"text",label:"Text"},{value:"textarea",label:"Text Area"},{value:"number",label:"Number"},{value:"boolean",label:"Checkbox"}];return m.jsxs("div",{className:"border border-theme rounded-lg overflow-hidden bg-[var(--bg-hover)]/30",children:[m.jsxs("div",{className:"flex items-center justify-between p-2 bg-[var(--bg-hover)]/50",children:[m.jsxs("button",{type:"button",onClick:()=>s(!i),className:"flex items-center gap-2 flex-1 text-left hover:text-[var(--brand)] transition-colors",children:[i?m.jsx(dK,{size:18}):m.jsx(i6,{size:18}),m.jsx("span",{className:"text-sm font-medium text-theme truncate",children:e.label||"Unnamed Property"})]}),m.jsx("button",{type:"button",onClick:()=>n(e.id),className:"p-1 hover:bg-red-500/10 hover:text-red-500 rounded transition-colors",title:"Delete custom property",children:m.jsx(fc,{size:16})})]}),i&&m.jsxs("div",{className:"p-3 space-y-3 border-t border-theme",children:[m.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[m.jsx(hp,{id:`${e.id}-key`,label:"Key",value:e.key,onChange:d=>l("key",d),placeholder:"e.g., customField"}),m.jsx(hp,{id:`${e.id}-label`,label:"Label",value:e.label,onChange:d=>l("label",d),placeholder:"e.g., Custom Field"})]}),m.jsx(Gz,{id:`${e.id}-type`,label:"Type",value:e.type,options:u.map(d=>d.value),onChange:d=>{l("type",d),d==="boolean"?l("value",!1):d==="number"?l("value",0):l("value","")}}),m.jsxs("div",{className:"border-t border-theme pt-3",children:[m.jsx("div",{className:"text-xs font-semibold text-muted uppercase tracking-wide mb-2",children:"Current Value"}),e.type==="text"&&m.jsx(hp,{id:`${e.id}-value`,label:"",value:String(e.value),onChange:o,placeholder:"Enter value"}),e.type==="textarea"&&m.jsx(ym,{id:`${e.id}-value`,label:"",value:String(e.value),onChange:o,placeholder:"Enter value"}),e.type==="number"&&m.jsx($z,{id:`${e.id}-value`,label:"",value:Number(e.value)||0,onChange:d=>o(d)}),e.type==="boolean"&&m.jsx("div",{className:"pt-1",children:m.jsx(Uz,{id:`${e.id}-value`,checked:!!e.value,onChange:o,label:"Enabled"})})]})]})]})},Qhe=()=>{const[e,t]=M.useState([]),n=M.useCallback((u,d="info",h)=>{const g={id:`toast-${Date.now()}-${Math.random()}`,message:u,type:d,duration:h};t(b=>[...b,g])},[]),r=M.useCallback(u=>{t(d=>d.filter(h=>h.id!==u))},[]),i=M.useCallback((u,d)=>{n(u,"success",d)},[n]),s=M.useCallback((u,d)=>{n(u,"error",d)},[n]),o=M.useCallback((u,d)=>{n(u,"warning",d)},[n]),l=M.useCallback((u,d)=>{n(u,"info",d)},[n]);return{toasts:e,showToast:n,removeToast:r,success:i,error:s,warning:o,info:l}},Jhe=({toast:e,onClose:t})=>{M.useEffect(()=>{const i=setTimeout(()=>{t(e.id)},e.duration||5e3);return()=>clearTimeout(i)},[e.id,e.duration,t]);const n=()=>{switch(e.type){case"success":return"bg-green-500 text-white";case"error":return"bg-red-500 text-white";case"warning":return"bg-yellow-500 text-white";case"info":return"bg-blue-500 text-white";default:return"bg-gray-500 text-white"}},r=()=>{switch(e.type){case"success":return m.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})});case"error":return m.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})});case"warning":return m.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})});case"info":return m.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}};return m.jsxs(ft.div,{initial:{opacity:0,y:-50,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,scale:.95},className:`${n()} rounded-lg shadow-lg p-4 flex items-center gap-3 min-w-[300px] max-w-md`,children:[m.jsx("div",{className:"flex-shrink-0",children:r()}),m.jsx("div",{className:"flex-1 text-sm font-medium",children:e.message}),m.jsx("button",{type:"button",onClick:()=>t(e.id),className:"flex-shrink-0 hover:bg-white/20 rounded p-1 transition-colors","aria-label":"Close notification",title:"Close",children:m.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})},epe=({toasts:e,onClose:t})=>m.jsx("div",{className:"fixed top-4 right-4 z-[9999] flex flex-col gap-3 pointer-events-none",children:m.jsx(uc,{children:e.map(n=>m.jsx("div",{className:"pointer-events-auto",children:m.jsx(Jhe,{toast:n,onClose:t})},n.id))})}),tpe=({url:e,enabled:t=!0,onMessage:n,onOpen:r,onClose:i,onError:s,reconnect:o=!0,reconnectInterval:l=1e3,maxReconnectAttempts:u=5})=>{const d=M.useRef(null),h=M.useRef(null),p=M.useRef(0),g=M.useRef(!0),b=M.useRef(null),[v,S]=M.useState(!1),[w,k]=M.useState(!1),[T,E]=M.useState(0),N=M.useCallback(()=>{h.current&&(clearTimeout(h.current),h.current=null)},[]),A=M.useCallback(()=>{g.current=!1,N(),d.current&&(d.current.close(),d.current=null),S(!1),k(!1),p.current=0,E(0)},[N]),_=M.useCallback(()=>{if(!(d.current?.readyState===WebSocket.OPEN||d.current?.readyState===WebSocket.CONNECTING))try{k(!0),d.current=new WebSocket(e),d.current.onopen=()=>{console.log("WebSocket connected"),S(!0),k(!1),p.current=0,E(0),r?.()},d.current.onmessage=I=>{try{const B=JSON.parse(I.data);n?.(B)}catch(B){console.error("Failed to parse WebSocket message:",B)}},d.current.onclose=I=>{console.log("WebSocket disconnected",I.code,I.reason),S(!1),k(!1),d.current=null,i?.(),g.current&&o&&b.current&&b.current()},d.current.onerror=I=>{console.error("WebSocket error:",I),s?.(I)}}catch(I){console.error("Failed to create WebSocket connection:",I),k(!1),g.current&&o&&b.current&&b.current()}},[e,n,r,i,s,o]),j=M.useCallback(()=>{if(!o||!g.current)return;if(p.current>=u){console.error("Max reconnection attempts reached"),k(!1);return}N();const I=l*Math.pow(2,p.current),B=Math.random()*1e3,U=Math.min(I+B,3e4);console.log(`Reconnecting in ${Math.round(U/1e3)}s... (attempt ${p.current+1}/${u})`),h.current=setTimeout(()=>{p.current++,E(p.current),_()},U)},[o,l,u,N,_]);M.useEffect(()=>{b.current=j},[j]);const R=M.useCallback(I=>{if(d.current?.readyState===WebSocket.OPEN)try{d.current.send(JSON.stringify(I))}catch(B){console.error("Failed to send WebSocket message:",B)}else console.warn("WebSocket is not connected. Message not sent:",I)},[]);return M.useEffect(()=>{if(t)return g.current=!0,_(),()=>{g.current=!1,A()}},[_,A,t]),{sendMessage:R,disconnect:A,connect:_,isConnected:v,isConnecting:w,reconnectAttempts:T}},npe=e=>e.startsWith("https://")?e.replace("https://","wss://"):e.startsWith("http://")?e.replace("http://","ws://"):`ws://${e}`,rpe=npe("https://diagrammatic-api-production.up.railway.app"),ipe=({diagramId:e,token:t,enabled:n,onDiagramUpdate:r,onUserJoined:i,onUserLeft:s,onError:o})=>{const[l,u]=M.useState([]),[d,h]=M.useState([]),p=M.useRef(null),g=M.useRef(0),b=M.useRef(null),v=`${rpe}/api/v1/diagrams/${e}/collaborate?token=${t}`,S=M.useCallback(B=>{const U=B.type?.trim();switch(U){case"welcome":{const V=B.user;p.current=V.id,console.log("Welcome message received:",V.name);break}case"user_joined":{const V=B.user;u(F=>F.some(L=>L.id===V.id)?F:[...F,V]),i?.(V);break}case"user_left":{const V=B.user;u(F=>F.filter(L=>L.id!==V.id)),h(F=>F.filter(L=>L.userId!==V.id)),s?.(V);break}case"diagram_update":{const V=B.user,F=B.data;if(V.id===p.current)return;const L=Date.now();if(L-g.current<100)return;g.current=L,r?.(F,V.id);break}case"cursor_move":case"cursor_update":{const V=B.user,F=B.position,L=B.timestamp;if(V.id===p.current)return;h(H=>{const O=H.findIndex(K=>K.userId===V.id),q={userId:V.id,user:V,position:F,timestamp:L};if(O>=0){const K=[...H];return K[O]=q,K}return[...H,q]});break}case"pong":break;case"error":{const V=B.message||"Unknown error";console.error("WebSocket error:",V),o?.(V);break}default:console.warn("Unknown WebSocket message type:",U)}},[r,i,s,o]),w=M.useCallback(()=>{console.log("Collaboration WebSocket connected")},[]),k=M.useCallback(()=>{console.log("Collaboration WebSocket disconnected"),u([]),h([])},[]),T=M.useCallback(B=>{console.error("Collaboration WebSocket error:",B),o?.("Connection error. Retrying...")},[o]),{sendMessage:E,disconnect:N,isConnected:A,isConnecting:_,reconnectAttempts:j}=tpe({url:v,enabled:n,onMessage:S,onOpen:w,onClose:k,onError:T,reconnect:!0,reconnectInterval:1e3,maxReconnectAttempts:5}),R=M.useCallback(B=>{!n||!A||(b.current&&clearTimeout(b.current),b.current=setTimeout(()=>{E({type:"diagram_update",data:B,timestamp:new Date().toISOString()})},300))},[n,A,E]),I=M.useCallback(B=>{!n||!A||E({type:"cursor_move",position:B,timestamp:new Date().toISOString()})},[n,A,E]);return M.useEffect(()=>()=>{b.current&&clearTimeout(b.current)},[]),M.useEffect(()=>{if(!A||!n)return;const B=setInterval(()=>{E({type:"ping",timestamp:new Date().toISOString()})},3e4);return()=>clearInterval(B)},[A,n,E]),{sendDiagramUpdate:R,sendCursorPosition:I,collaborators:l,cursors:d,isConnected:A,isConnecting:_,reconnectAttempts:j,disconnect:N}},zk=e=>{const t=["#10b981","#3b82f6","#8b5cf6","#f59e0b","#ef4444","#ec4899","#06b6d4","#6366f1"];let n=0;for(let r=0;r<e.length;r++)n=e.charCodeAt(r)+((n<<5)-n);return t[Math.abs(n)%t.length]},spe=({isConnected:e,isConnecting:t,reconnectAttempts:n,collaborators:r,showCollaborators:i=!0})=>{const[s,o]=Ce.useState(!1),l=t||!e,u=i&&r.length>0;if(!l&&!u)return null;const d=()=>t?n>0?`Reconnecting... (${n})`:"Connecting...":"Connection lost",h=()=>t?m.jsx(pK,{className:"h-4 w-4 animate-spin"}):m.jsx(mK,{className:"h-4 w-4"}),p=()=>t?"text-yellow-600 dark:text-yellow-400":"text-red-600 dark:text-red-400";return m.jsxs("div",{className:"flex items-center gap-2",children:[l&&m.jsxs("div",{className:"relative",onMouseEnter:()=>o(!0),onMouseLeave:()=>o(!1),children:[m.jsxs("div",{className:`flex items-center gap-2 px-3 py-1.5 rounded-lg bg-surface border border-theme/10 ${p()} transition-colors`,children:[h(),m.jsx("span",{className:"text-xs font-medium",children:d()})]}),m.jsx(uc,{children:s&&m.jsx(ft.div,{initial:{opacity:0,y:5},animate:{opacity:1,y:0},exit:{opacity:0,y:5},className:"absolute top-full left-0 mt-2 p-2 bg-surface border border-theme/10 rounded-lg shadow-lg z-50 min-w-[200px]",children:m.jsxs("div",{className:"text-xs text-theme",children:[m.jsx("div",{className:"font-semibold mb-1",children:"Connection Status"}),m.jsx("div",{className:"text-muted",children:t?"Establishing connection...":"Collaboration unavailable"})]})})})]}),u&&m.jsxs("div",{className:"flex items-center gap-1 px-3 py-1.5 rounded-lg bg-surface border border-theme/10",children:[m.jsx(gK,{className:"h-4 w-4 text-theme"}),m.jsxs("div",{className:"flex -space-x-2",children:[r.slice(0,3).map(g=>m.jsx("div",{className:"relative group","data-tooltip":g.name,children:g.pictureUrl?m.jsx("img",{src:g.pictureUrl,alt:g.name,className:"w-6 h-6 rounded-full border-2 border-surface",style:{borderColor:zk(g.id)}}):m.jsx("div",{className:"w-6 h-6 rounded-full border-2 border-surface flex items-center justify-center text-xs font-bold text-white",style:{backgroundColor:zk(g.id)},children:g.name.charAt(0).toUpperCase()})},g.id)),r.length>3&&m.jsxs("div",{className:"w-6 h-6 rounded-full bg-theme/10 border-2 border-surface flex items-center justify-center text-xs font-bold text-theme",children:["+",r.length-3]})]})]})]})},ope=({name:e,color:t,position:n,pictureUrl:r})=>m.jsxs(ft.div,{className:"pointer-events-none absolute z-50",style:{left:n.x,top:n.y},initial:{opacity:0,scale:.5},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.5},transition:{duration:.2},children:[m.jsx("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",style:{filter:"drop-shadow(0 2px 4px rgba(0,0,0,0.2))"},children:m.jsx("path",{d:"M5.5 3.21V20.79L10.29 16L14 21.5L15.5 20.5L11.79 15L18.5 14L5.5 3.21Z",fill:t,stroke:"white",strokeWidth:"1.5",strokeLinejoin:"round"})}),m.jsxs("div",{className:"ml-6 -mt-2 px-2 py-1 rounded-md text-xs font-medium text-white whitespace-nowrap shadow-lg flex items-center gap-1.5",style:{backgroundColor:t},children:[r&&m.jsx("img",{src:r,alt:e,className:"w-4 h-4 rounded-full border border-white/50"}),m.jsx("span",{children:e})]})]}),ape=(e,t,n,r)=>{const i={version:"1.0",metadata:{title:n,description:r,createdAt:new Date().toISOString(),exportedAt:new Date().toISOString()},nodes:e,edges:t};return JSON.stringify(i,null,2)},lpe=(e,t,n,r)=>{const i=l=>l.replaceAll("&","&amp;").replaceAll("<","&lt;").replaceAll(">","&gt;").replaceAll('"',"&quot;").replaceAll("'","&apos;"),s=()=>"rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;";let o=`<?xml version="1.0" encoding="UTF-8"?>
`;o+='<mxfile host="Diagrammatic" modified="'+new Date().toISOString()+`" agent="Diagrammatic" version="1.0" type="device">
`,o+='  <diagram id="diagram1" name="'+i(n)+`">
`,o+=`    <mxGraphModel dx="1434" dy="844" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="827" pageHeight="1169" math="0" shadow="0">
`,o+=`      <root>
`,o+=`        <mxCell id="0"/>
`,o+=`        <mxCell id="1" parent="0"/>
`,r&&(o+="        <!-- Description: "+i(r)+` -->
`);for(let l=0;l<e.length;l++){const u=e[l],d=`node-${l+2}`,h=u.data?.label||u.id,p=u.position?.x||0,g=u.position?.y||0,b=u.style?.width||u.width||200,v=u.style?.height||u.height||80,S=s();o+=`        <mxCell id="${d}" value="${i(String(h))}" `,o+=`style="${S}" `,o+=`vertex="1" parent="1">
`,o+=`          <mxGeometry x="${p}" y="${g}" width="${b}" height="${v}" as="geometry"/>
`,o+=`        </mxCell>
`}for(let l=0;l<t.length;l++){const u=t[l],d=`edge-${l}`,h=e.findIndex(b=>b.id===u.source),p=e.findIndex(b=>b.id===u.target),g=u.label||u.data?.label||"";h!==-1&&p!==-1&&(o+=`        <mxCell id="${d}" value="${i(String(g))}" `,o+='style="edgeStyle=orthogonalEdgeStyle;rounded=0;orthogonalLoop=1;jettySize=auto;html=1;" ',o+=`edge="1" parent="1" source="node-${h+2}" target="node-${p+2}">
`,o+=`          <mxGeometry relative="1" as="geometry"/>
`,o+=`        </mxCell>
`)}return o+=`      </root>
`,o+=`    </mxGraphModel>
`,o+=`  </diagram>
`,o+=`</mxfile>
`,o},oP=e=>{try{const t=JSON.parse(e);if(!t.nodes||!Array.isArray(t.nodes))throw new Error("Invalid JSON format: missing or invalid nodes array");if(!t.edges||!Array.isArray(t.edges))throw new Error("Invalid JSON format: missing or invalid edges array");return{nodes:t.nodes,edges:t.edges}}catch(t){throw new Error(t instanceof Error?`Failed to import JSON: ${t.message}`:"Failed to import JSON: Invalid format")}},aP=e=>{try{const n=new DOMParser().parseFromString(e,"text/xml");if(n.querySelector("parsererror"))throw new Error("Invalid XML format");const i=[],s=[],o=new Map,l=n.querySelectorAll('mxCell[vertex="1"]');let u=0;for(const p of l){const g=p.getAttribute("id")||`cell-${u}`,b=p.getAttribute("value")||`Node ${u+1}`,v=p.querySelector("mxGeometry"),S=Number.parseFloat(v?.getAttribute("x")||"0"),w=Number.parseFloat(v?.getAttribute("y")||"0"),k=Number.parseFloat(v?.getAttribute("width")||"200"),T=Number.parseFloat(v?.getAttribute("height")||"80"),E=`imported-node-${Date.now()}-${u}`;o.set(g,E);const N={label:b},A=p.querySelector("mxData");if(A){const _=A.querySelectorAll("property");for(const j of _){const R=j.getAttribute("name"),I=j.getAttribute("value");if(R&&I)try{N[R]=JSON.parse(I)}catch{N[R]=I}}}i.push({id:E,type:"custom",position:{x:S,y:w},data:N,...k&&T?{style:{width:k,height:T}}:{}}),u++}const d=n.querySelectorAll('mxCell[edge="1"]');let h=0;for(const p of d){const g=p.getAttribute("source"),b=p.getAttribute("target"),v=p.getAttribute("value")||"";if(g&&b){const S=o.get(g),w=o.get(b);if(S&&w){const k={};v&&(k.label=v,k.hasLabel=!0);const T=p.querySelector("mxData");if(T){const E=T.querySelectorAll("property");for(const N of E){const A=N.getAttribute("name"),_=N.getAttribute("value");if(A&&_)try{k[A]=JSON.parse(_)}catch{k[A]=_}}}s.push({id:`imported-edge-${Date.now()}-${h}`,source:S,target:w,type:"customEdge",data:k,...v?{label:v}:{}})}}h++}if(i.length===0)throw new Error("No valid nodes found in XML file");return{nodes:i,edges:s}}catch(t){throw new Error(t instanceof Error?`Failed to import XML: ${t.message}`:"Failed to import XML: Invalid format")}},lP=(e,t,n)=>{const r=new Blob([e],{type:n}),i=URL.createObjectURL(r),s=document.createElement("a");s.href=i,s.download=t,document.body.appendChild(s),s.click(),s.remove(),URL.revokeObjectURL(i)},cpe=async e=>e.text(),cP={isOpen:!1,showWelcome:!0,userIntent:null,canvasContext:null,messages:[],currentSuggestions:[]},Jq=M.createContext(void 0),upe=({children:e})=>{const[t,n]=M.useState(cP),r=M.useCallback(()=>{n(h=>({...h,isOpen:!h.isOpen}))},[]),i=M.useCallback(h=>{n(p=>({...p,userIntent:h,showWelcome:!1}))},[]),s=M.useCallback(h=>{n(p=>({...p,canvasContext:h}))},[]),o=M.useCallback(h=>{const p={...h,id:`msg-${Date.now()}-${Math.random().toString(36).substring(2,11)}`,timestamp:new Date};n(g=>({...g,messages:[...g.messages,p]}))},[]),l=M.useCallback(()=>{n(h=>({...h,showWelcome:!1}))},[]),u=M.useCallback(()=>{n(cP)},[]),d=M.useMemo(()=>({...t,toggleChatBot:r,setUserIntent:i,updateCanvasContext:s,addMessage:o,dismissWelcome:l,resetChatBot:u}),[t,r,i,s,o,l,u]);return m.jsx(Jq.Provider,{value:d,children:e})},$2=()=>{const e=M.useContext(Jq);if(!e)throw new Error("useChatBot must be used within a ChatBotProvider");return e},dpe=(e,t)=>M.useMemo(()=>{const n=[];if(!e&&!t)return n;const r=e?`${e.title} ${e.description}`.toLowerCase():"";if((r.includes("database")||r.includes("schema")||r.includes("er "))&&(n.push({id:"er-entity",title:"Add Entity",description:"Create a database entity with attributes",action:()=>{},icon:"",category:"component",priority:10,componentId:"er-entity",actionType:"add-component"}),n.push({id:"er-relationship",title:"Add Relationship",description:"Connect entities with relationships",action:()=>{},icon:"",category:"component",priority:9,componentId:"er-relationship",actionType:"add-component"})),(r.includes("class")||r.includes("uml")||r.includes("oop")||r.includes("object-oriented"))&&(n.push({id:"uml-class",title:"Add Class",description:"Create a UML class with methods and properties",action:()=>{},icon:"",category:"component",priority:10,componentId:"uml-class",actionType:"add-component"}),n.push({id:"uml-interface",title:"Add Interface",description:"Define an interface for your design",action:()=>{},icon:"",category:"component",priority:8,componentId:"uml-interface",actionType:"add-component"})),(r.includes("system")||r.includes("architecture")||r.includes("microservice")||r.includes("api"))&&(n.push({id:"api-gateway",title:"Add API Gateway",description:"Central entry point for your services",action:()=>{},icon:"",category:"component",priority:10,componentId:"api-gateway",actionType:"add-component"}),n.push({id:"load-balancer",title:"Add Load Balancer",description:"Distribute traffic across servers",action:()=>{},icon:"",category:"component",priority:9,componentId:"loadbalancer",actionType:"add-component"}),n.push({id:"database",title:"Add Database",description:"Add a database to store your data",action:()=>{},icon:"",category:"component",priority:8,componentId:"database",actionType:"add-component"})),(r.includes("cache")||r.includes("redis")||r.includes("performance"))&&n.push({id:"cache",title:"Add Cache Layer",description:"Improve performance with caching",action:()=>{},icon:"",category:"component",priority:9,componentId:"cache",actionType:"add-component"}),(r.includes("queue")||r.includes("async")||r.includes("message")||r.includes("event"))&&n.push({id:"message-queue",title:"Add Message Queue",description:"Enable asynchronous communication",action:()=>{},icon:"",category:"component",priority:9,componentId:"queue",actionType:"add-component"}),t){const{nodeCount:i,componentTypes:s,isEmpty:o}=t;o&&n.push({id:"tip-start",title:"Start with a Component",description:"Drag a component from the palette to begin your design",action:()=>{},icon:"",category:"tip",priority:10,actionType:"info-only"}),i>1&&s.length>1&&n.push({id:"tip-connect",title:"Connect Components",description:"Click and drag from one component to another to create connections",action:()=>{},icon:"",category:"tip",priority:8,actionType:"info-only"}),i>5&&n.push({id:"group",title:"Organize with Groups",description:"Use group containers to organize related components",action:()=>{},icon:"",category:"pattern",priority:7,componentId:"cluster",actionType:"add-component"}),s.includes("database")&&!s.includes("cache")&&n.push({id:"pattern-cache",title:"Consider Adding Cache",description:"Reduce database load with a caching layer",action:()=>{},icon:"",category:"pattern",priority:8,componentId:"cache",actionType:"add-component"}),(s.includes("api-gateway")||s.includes("server"))&&!s.includes("load-balancer")&&n.push({id:"pattern-lb",title:"Add Load Balancing",description:"Scale your API with a load balancer",action:()=>{},icon:"",category:"pattern",priority:7,componentId:"loadbalancer",actionType:"add-component"})}return n.length===0&&(n.push({id:"tip-palette",title:"Explore Components",description:`Browse ${Yl.length}+ components in the palette`,action:()=>{},icon:"",category:"tip",priority:5,actionType:"info-only"}),n.push({id:"tip-export",title:"Export Your Design",description:"Save your work as PNG or JSON",action:()=>{},icon:"",category:"tip",priority:4,actionType:"info-only"})),n.sort((i,s)=>s.priority-i.priority).slice(0,5)},[e,t]),fpe=()=>{const{dismissWelcome:e}=$2();return m.jsx(ft.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:10},className:"bg-white dark:bg-gray-800 rounded-lg shadow-lg p-6",children:m.jsxs("div",{className:"text-center",children:[m.jsx("div",{className:"text-4xl mb-3",children:""}),m.jsx("h3",{className:"text-lg font-bold text-gray-900 dark:text-gray-100 mb-2",children:"Welcome to Design Assistant!"}),m.jsx("p",{className:"text-sm text-gray-600 dark:text-gray-400 mb-4",children:"I'm here to help you with smart suggestions based on what you're building. Start adding components to your canvas, and I'll provide contextual tips!"}),m.jsx("button",{onClick:e,className:`px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md
            transition-colors font-medium`,children:"Got it!"})]})})},hpe=({suggestion:e,wasAdded:t,onClick:n})=>{const r=e.actionType==="add-component"||e.actionType==="add-pattern",i=()=>{let o=`bg-theme/50 rounded-xl p-3.5
      transition-all duration-300 border shadow-sm`;return r?o+=` hover:shadow-md hover:scale-[1.02] hover:border-accent/40 
        hover:bg-accent/5 cursor-pointer transform`:o+=" border-theme/10",t?o+=" bg-green-500/10 border-green-500/30 shadow-green-500/20":o+=" border-theme/10",o},s=()=>r&&!t?m.jsx("span",{className:`text-xs px-2 py-1 bg-accent/10 text-accent rounded-full 
          font-medium border border-accent/20`,children:"Click to add"}):t?m.jsxs(ft.span,{initial:{scale:0},animate:{scale:1},className:`text-xs px-2 py-1 bg-green-500/10 text-green-600 dark:text-green-400 
            rounded-full font-medium border border-green-500/20 flex items-center gap-1`,children:[m.jsx("span",{children:""}),m.jsx("span",{children:"Added"})]}):null;return m.jsx(ft.div,{whileHover:r?{x:4}:{},className:i(),onClick:()=>n(e),children:m.jsxs("div",{className:"flex items-start gap-3",children:[e.icon&&m.jsx("div",{className:`w-8 h-8 flex-shrink-0 bg-accent/10 rounded-lg 
            flex items-center justify-center`,children:m.jsx("span",{className:"text-lg",children:e.icon})}),m.jsxs("div",{className:"flex-1 min-w-0",children:[m.jsxs("div",{className:"flex items-center justify-between gap-2 mb-1",children:[m.jsx("h5",{className:"font-semibold text-sm text-theme",children:e.title}),s()]}),m.jsx("p",{className:"text-xs text-muted leading-relaxed",children:e.description})]})]})})},ppe=({canvasContext:e,onAddComponent:t})=>{const{isOpen:n,showWelcome:r,userIntent:i,toggleChatBot:s,updateCanvasContext:o}=$2(),l=dpe(i,e??null),[u,d]=M.useState(null);M.useEffect(()=>{e&&o(e)},[e,o]);const h=p=>{if(p.actionType==="add-component"&&p.componentId&&t)t(p.componentId),d(p.id),setTimeout(()=>d(null),2e3);else if(p.actionType==="add-pattern"&&p.componentIds&&t){for(const g of p.componentIds)t(g);d(p.id),setTimeout(()=>d(null),2e3)}};return m.jsxs(m.Fragment,{children:[m.jsxs(ft.button,{onClick:s,className:`fixed bottom-6 right-6 w-16 h-16 bg-gradient-to-br from-[var(--brand)] to-[var(--accent)]
          text-white rounded-full shadow-xl flex items-center justify-center
          z-50 transition-all hover:shadow-2xl`,whileHover:{scale:1.1,rotate:5},whileTap:{scale:.95},"aria-label":"Toggle chat bot",children:[n?m.jsx(hc,{className:"w-8 h-8"}):m.jsx(XW,{className:"w-8 h-8"}),l.length>0&&!n&&m.jsx(ft.div,{initial:{scale:0},animate:{scale:1},className:`absolute -top-1 -right-1 w-5 h-5 bg-red-500 rounded-full 
              flex items-center justify-center text-xs font-bold`,children:l.length})]}),m.jsx(uc,{children:n&&m.jsxs(ft.div,{initial:{opacity:0,y:20,scale:.95},animate:{opacity:1,y:0,scale:1},exit:{opacity:0,y:20,scale:.95},className:`fixed bottom-24 right-6 w-96 max-h-[600px] 
              bg-[var(--surface)] rounded-2xl shadow-2xl
              border border-theme/10 backdrop-blur-sm
              flex flex-col z-50 overflow-hidden`,children:[m.jsxs("div",{className:`flex items-center justify-between px-5 py-4 
              bg-gradient-to-r from-[var(--brand)] to-[var(--accent)]`,children:[m.jsxs("div",{className:"flex items-center gap-3",children:[m.jsx("div",{className:"w-10 h-10 bg-white/20 rounded-full flex items-center justify-center backdrop-blur-sm",children:m.jsx("span",{className:"text-2xl",children:""})}),m.jsxs("div",{children:[m.jsx("h3",{className:"font-bold text-white text-lg",children:"Design Assistant"}),m.jsx("p",{className:"text-xs text-white/80",children:"Smart suggestions for you"})]})]}),m.jsx("button",{onClick:s,className:`text-white/80 hover:text-white transition-colors 
                  w-8 h-8 flex items-center justify-center rounded-full
                  hover:bg-white/10`,"aria-label":"Close chat bot",children:m.jsx(hc,{className:"w-5 h-5"})})]}),m.jsx("div",{className:"flex-1 overflow-y-auto p-5 bg-gradient-to-b from-transparent to-theme/5",children:m.jsx(uc,{mode:"wait",children:r?m.jsx(ft.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},children:m.jsx(fpe,{})},"welcome"):m.jsxs(ft.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},exit:{opacity:0,y:-10},className:"space-y-4",children:[i&&m.jsx(ft.div,{initial:{scale:.95,opacity:0},animate:{scale:1,opacity:1},className:`bg-gradient-to-br from-accent/10 to-accent/5 
                          border border-accent/20 rounded-xl p-4 mb-4 shadow-sm`,children:m.jsxs("div",{className:"flex items-start gap-3",children:[m.jsx("span",{className:"text-2xl",children:""}),m.jsxs("div",{className:"flex-1",children:[m.jsx("h4",{className:"font-bold text-theme text-base mb-1",children:i.title||"Your Project"}),i.description&&m.jsx("p",{className:"text-sm text-muted leading-relaxed",children:i.description})]})]})}),l.length>0?m.jsxs(m.Fragment,{children:[m.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[m.jsx("span",{className:"text-lg",children:""}),m.jsx("h4",{className:"text-sm font-bold text-theme",children:"Suggestions for you"}),m.jsx("span",{className:`ml-auto text-xs px-2 py-1 bg-accent/10 
                            text-accent rounded-full font-medium`,children:l.length})]}),m.jsx("div",{className:"space-y-2",children:l.map((p,g)=>m.jsx(ft.div,{initial:{opacity:0,x:-20},animate:{opacity:1,x:0},transition:{delay:g*.05},children:m.jsx(hpe,{suggestion:p,wasAdded:u===p.id,onClick:h})},p.id))})]}):m.jsxs(ft.div,{initial:{opacity:0},animate:{opacity:1},className:"text-center py-12",children:[m.jsx("div",{className:`w-16 h-16 mx-auto mb-4 bg-theme/5 rounded-full 
                          flex items-center justify-center`,children:m.jsx("span",{className:"text-4xl opacity-50",children:""})}),m.jsx("p",{className:"text-muted text-sm",children:"Start adding components to your canvas!"}),m.jsx("p",{className:"text-muted text-xs mt-1",children:"I'll provide smart suggestions as you design"})]}),e&&!e.isEmpty&&m.jsxs(ft.div,{initial:{opacity:0,y:10},animate:{opacity:1,y:0},className:"mt-5 pt-4 border-t border-theme/10",children:[m.jsxs("h5",{className:"text-xs font-bold text-muted uppercase tracking-wide mb-3 flex items-center gap-2",children:[m.jsx("span",{children:""}),m.jsx("span",{children:"Canvas Overview"})]}),m.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[m.jsxs("div",{className:`bg-gradient-to-br from-blue-500/10 to-blue-500/5 
                            border border-blue-500/20 rounded-lg p-3 text-center`,children:[m.jsx("div",{className:"text-2xl font-bold text-blue-600 dark:text-blue-400",children:e.nodeCount}),m.jsx("div",{className:"text-xs text-muted mt-1",children:"Components"})]}),m.jsxs("div",{className:`bg-gradient-to-br from-purple-500/10 to-purple-500/5 
                            border border-purple-500/20 rounded-lg p-3 text-center`,children:[m.jsx("div",{className:"text-2xl font-bold text-purple-600 dark:text-purple-400",children:e.edgeCount}),m.jsx("div",{className:"text-xs text-muted mt-1",children:"Connections"})]})]})]})]},"suggestions")})}),m.jsx("div",{className:"px-5 py-3 border-t border-theme/10 bg-theme/5",children:m.jsxs("div",{className:"flex items-center justify-center gap-2",children:[m.jsx("span",{className:"text-lg",children:""}),m.jsx("p",{className:"text-xs text-muted font-medium",children:"Suggestions adapt to your design"})]})})]})})]})},mpe=({onSubmit:e,onSkip:t})=>{const[n,r]=M.useState(""),[i,s]=M.useState(""),o=l=>{if(l.preventDefault(),n.trim()||i.trim()){const u={title:n.trim(),description:i.trim(),timestamp:new Date};e(u)}};return m.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 backdrop-blur-sm",children:m.jsx(ft.div,{initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},exit:{opacity:0,scale:.95},className:"bg-[var(--surface)] rounded-lg shadow-xl border border-theme/10 w-full max-w-lg mx-4",children:m.jsxs("form",{onSubmit:o,children:[m.jsxs("div",{className:"px-6 py-4 border-b border-theme/10",children:[m.jsx("h2",{className:"text-xl font-bold text-theme",children:" What are you designing today?"}),m.jsx("p",{className:"text-sm text-muted mt-1",children:"Help us provide better suggestions by sharing what you're building"})]}),m.jsxs("div",{className:"px-6 py-4 space-y-4",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"project-title",className:"block text-sm font-medium text-theme mb-2",children:"Project Title"}),m.jsx("input",{id:"project-title",type:"text",value:n,onChange:l=>r(l.target.value),placeholder:"e.g., E-commerce System, Blog Database, Microservices Architecture...",className:`w-full px-3 py-2 border border-theme/20 rounded-md 
                  bg-theme text-theme
                  focus:ring-2 focus:ring-accent/50 focus:border-transparent
                  placeholder:text-muted`,autoFocus:!0})]}),m.jsxs("div",{children:[m.jsxs("label",{htmlFor:"project-description",className:"block text-sm font-medium text-theme mb-2",children:["Description ",m.jsx("span",{className:"text-muted",children:"(Optional)"})]}),m.jsx("textarea",{id:"project-description",value:i,onChange:l=>s(l.target.value),placeholder:"Briefly describe what you want to design and its key features...",rows:4,className:`w-full px-3 py-2 border border-theme/20 rounded-md 
                  bg-theme text-theme
                  focus:ring-2 focus:ring-accent/50 focus:border-transparent
                  placeholder:text-muted
                  resize-none`})]}),m.jsx("div",{className:"bg-accent/10 border border-accent/20 rounded-lg p-3",children:m.jsxs("p",{className:"text-xs text-theme",children:[" ",m.jsx("strong",{children:"Tip:"})," This information will be used for auto-save and to provide you with smart, context-aware suggestions while you design."]})})]}),m.jsxs("div",{className:"px-6 py-4 border-t border-theme/10 flex justify-end gap-3",children:[m.jsx("button",{type:"button",onClick:t,className:`px-4 py-2 text-sm font-medium text-muted
                hover:text-theme hover:bg-[var(--bg-hover)] rounded-md transition-colors`,children:"Skip for now"}),m.jsx("button",{type:"submit",className:`px-4 py-2 text-sm font-medium bg-accent hover:brightness-90 
                text-white rounded-md transition-all`,children:"Continue"})]})]})})})},gpe={customEdge:Uhe,erRelationship:Yhe},ype=Ce.memo(e=>{const t=e.data;return m.jsx(Gq,{id:e.id,data:t,onCopy:(n,r)=>e.onCopy(n,r),isInGroup:e.isInGroup})}),bpe=Ce.memo(e=>{const t=e.data;return m.jsx(Zq,{id:e.id,data:t,onCopy:(n,r)=>e.onCopy(n,r),isInGroup:e.isInGroup})}),xpe=Ce.memo(e=>{const t=e.data;return m.jsx(Qq,{id:e.id,data:t,onCopy:(n,r)=>e.onCopy(n,r),isInGroup:e.isInGroup})}),vpe=(e,t)=>n=>{const r=t.current?.find(i=>i.id===n.id)?.parentId!==void 0;return m.jsx(ype,{...n,onCopy:e,isInGroup:r})},wpe=(e,t)=>n=>{const r=t.current?.find(i=>i.id===n.id)?.parentId!==void 0;return m.jsx(bpe,{...n,onCopy:e,isInGroup:r})},Spe=(e,t)=>n=>{const r=t.current.find(i=>i.id===n.id)?.parentId!==void 0;return m.jsx(xpe,{...n,onCopy:e,isInGroup:r})},Cpe=()=>{Xa();const e=Xd(),n=OU()?.id,{screenToFlowPosition:r,flowToScreenPosition:i}=Gd(),{user:s,isAuthenticated:o,login:l,signup:u,googleLogin:d,logout:h}=Lm(),{userIntent:p,setUserIntent:g,resetChatBot:b}=$2(),v=Qhe(),S=M.useRef(v);S.current=v;const w=M.useRef([]),k=M.useRef(!1),E=new URLSearchParams(globalThis.location.hash.split("?")[1]).get("diagramId"),[N,A]=M.useState(null),[_,j]=M.useState(!0),[R,I]=M.useState(null),[B,U]=M.useState(!1),[V,F]=M.useState(null),[L,H]=M.useState(null),[O,q]=M.useState(!1),[K,te]=M.useState(!1),[z,G]=M.useState(!1),[oe,ae]=M.useState(""),[$,Q]=M.useState(""),[ee,de]=M.useState(!1),[le,xe]=M.useState(""),[_e,Be]=M.useState("read"),[Pe,Te]=M.useState([]),[ke,Ee]=M.useState(!1),[ht,Oe]=M.useState(!1),[mt,bt]=M.useState("idle"),[$t,un]=M.useState(null),[zt,Nt]=M.useState(!1),[kn,dn]=M.useState(0),Ot=M.useRef(null);M.useEffect(()=>{if(!n){j(!1),I("No problem ID provided");return}if(n==="free"){A({id:"free",title:"Design Studio",description:"Create your own system design from scratch",difficulty:"Medium",category:"Custom",estimated_time:"Unlimited",requirements:[],constraints:[],hints:[],tags:["custom","free-design"]}),j(!1);return}if(n.startsWith("custom-")){const X=localStorage.getItem(`custom-problem-${n}`);if(X){A(JSON.parse(X)),j(!1);return}}(async()=>{try{j(!0),I(null);const ie=await fetch(`https://diagrammatic-api-production.up.railway.app/api/v1/problem/${n}`);if(!ie.ok)throw new Error(`Failed to fetch problem: ${ie.status} ${ie.statusText}`);const pe=await ie.json();A(pe)}catch(X){I(X instanceof Error?X.message:"An error occurred while fetching the problem"),console.error("Error fetching problem:",X)}finally{j(!1)}})()},[n]);const ut=()=>e("/"),{state:Tt,setState:At,undo:sr,redo:Ar,canUndo:vi,canRedo:Zt}=one({nodes:[],edges:[]}),[Le,Fe,or]=Mle(Tt.nodes),[dt,fn,Fs]=_le(Tt.edges),{getNodes:wi,fitView:Mr}=Gd(),_r=M.useRef(!1);M.useEffect(()=>{w.current=Le},[Le]),M.useEffect(()=>{if(n==="free"&&!_){const Y=!V&&!E&&Le.length===0;if(Y&&!k.current){b();const X=setTimeout(()=>{te(!0),k.current=!0},500);return()=>clearTimeout(X)}else Y||(k.current=!1)}},[n,_,V,E,Le.length,b]);const[ar,yr]=M.useState(!1),[Dr,xt]=M.useState(!1),Bn=M.useRef(null);M.useEffect(()=>{if(E)(async()=>{try{const X=o?await tn.getDiagram(E):await tn.getPublicDiagram(E),ie=X.nodes,pe=X.edges;Fe(ie),fn(pe),F(X.id),H(X),At({nodes:ie,edges:pe})}catch(X){console.error("Failed to load diagram:",X),v.error("Failed to load diagram. It may have been deleted or you don't have access to it.")}})();else if(n==="free"&&o){const Y=`last-diagram-${s?.id||"anonymous"}`,X=localStorage.getItem(Y);X&&(async()=>{try{const pe=await tn.getDiagram(X),be=pe.nodes,we=pe.edges;Fe(be),fn(we),F(pe.id),H(pe),At({nodes:be,edges:we}),v.success("Design restored from previous session")}catch(pe){console.error("Failed to load last diagram:",pe),localStorage.removeItem(Y),v.error("Failed to restore previous design. Starting fresh.")}})()}else n&&n!=="free"&&o&&(async()=>{try{const X=await tn.getAttemptByProblem(n);if(console.log("Loaded attempt:",X),X){const ie=X.nodes,pe=X.edges;Fe(ie),fn(pe),X.elapsedTime&&dn(X.elapsedTime),X.lastAssessment&&(console.log("Restoring assessment:",X.lastAssessment),Lt(X.lastAssessment),ge("assessment")),At({nodes:ie,edges:pe}),v.success("Progress restored from previous session")}}catch(X){console.error("Failed to load saved attempt:",X)}})()},[E,o,n,s?.id]),M.useEffect(()=>{Nt(o&&n!==void 0)},[o,n]),M.useEffect(()=>{if(!zt||Le.length===0)return;const X=setTimeout(async()=>{try{if(bt("saving"),n==="free")if(V){await tn.updateDiagram(V,{title:L?.title||"Auto-saved Design",description:L?.description||"Auto-saved design",nodes:Le,edges:dt});const be=`last-diagram-${s?.id||"anonymous"}`;localStorage.setItem(be,V)}else if(p&&(p.title||p.description)){const be=await tn.saveDiagram({title:p.title||"Untitled Design",description:p.description||"",nodes:Le,edges:dt});F(be.id),H(be);const we=`last-diagram-${s?.id||"anonymous"}`;localStorage.setItem(we,be.id)}else{G(!0),bt("idle");return}else{if(!n)return;await tn.saveAttempt({problemId:n,title:N?.title||"Unknown Problem",difficulty:N?.difficulty,category:N?.category,nodes:Le,edges:dt,elapsedTime:kn})}bt("saved"),un(new Date);const ie=localStorage.getItem("lastAutoSaveToast"),pe=Date.now();(!ie||pe-Number.parseInt(ie)>6e4)&&(v.success(n==="free"?"Design auto-saved successfully!":"Progress auto-saved successfully!"),localStorage.setItem("lastAutoSaveToast",pe.toString())),setTimeout(()=>bt("idle"),3e3)}catch(ie){console.error("Auto-save failed:",ie),bt("error"),setTimeout(()=>bt("idle"),5e3)}},3e3);return()=>clearTimeout(X)},[Le,dt,zt,n,V,s?.id,kn,N,p]),M.useEffect(()=>{_r.current=!0,Fe(Tt.nodes),fn(Tt.edges),setTimeout(()=>{_r.current=!1},0)},[Tt,Fe,fn]),M.useEffect(()=>{z&&p&&(p.title&&!oe&&ae(p.title),p.description&&!$&&Q(p.description))},[z,p,oe,$]),M.useEffect(()=>{_r.current||Le.length===0&&dt.length===0||At({nodes:Le,edges:dt})},[Le,dt,At]),M.useEffect(()=>{const Y=X=>{(X.ctrlKey||X.metaKey)&&X.key==="z"&&!X.shiftKey&&(X.preventDefault(),sr()),((X.ctrlKey||X.metaKey)&&X.shiftKey&&X.key==="z"||X.ctrlKey&&X.key==="y")&&(X.preventDefault(),Ar())};return globalThis.addEventListener("keydown",Y),()=>globalThis.removeEventListener("keydown",Y)},[sr,Ar]),M.useEffect(()=>{if(n!=="free")return Ot.current=setInterval(()=>{dn(Y=>Y+1)},1e3),()=>{Ot.current&&clearInterval(Ot.current)}},[n]),M.useEffect(()=>()=>{const Y=`last-diagram-${s?.id||"anonymous"}`;if(localStorage.removeItem(Y),n&&n!=="free"){const X=`problem-progress-${s?.id||"anonymous"}-${n}`;localStorage.removeItem(X)}},[s?.id,n]);const Us=Y=>{const X=Math.floor(Y/3600),ie=Math.floor(Y%3600/60),pe=Y%60;return X>0?`${X.toString().padStart(2,"0")}:${ie.toString().padStart(2,"0")}:${pe.toString().padStart(2,"0")}`:`${ie.toString().padStart(2,"0")}:${pe.toString().padStart(2,"0")}`},Si=Y=>{const ie=Math.floor((new Date().getTime()-Y.getTime())/1e3);if(ie<60)return"a moment ago";if(ie<1800)return`${Math.floor(ie/60)} min ago`;if(ie<3600)return"about an hour ago";if(ie<86400){const pe=Math.floor(ie/3600);return`${pe} hour${pe>1?"s":""} ago`}else return`at ${Y.toLocaleTimeString()}`};M.useEffect(()=>{const Y=X=>{ar&&(X.target.closest(".relative")||yr(!1))};if(ar)return document.addEventListener("click",Y),()=>document.removeEventListener("click",Y)},[ar]),M.useEffect(()=>{const Y=X=>{Dr&&(X.target.closest(".relative")||xt(!1))};if(Dr)return document.addEventListener("click",Y),()=>document.removeEventListener("click",Y)},[Dr]);const Kn=Y=>{const X=Le.find(Se=>Se.id===Y.source),ie=Le.find(Se=>Se.id===Y.target),pe=Se=>{const Ke=Se?.data?.componentId;return Ke==="entity"||Ke==="weak-entity"},be=pe(X)&&pe(ie),we={...Y,type:be?"erRelationship":"customEdge",data:be?{label:"",hasLabel:!1,cardinality:"one-to-many"}:{label:"",hasLabel:!1}};fn(Se=>z8(we,Se))},[Gt,Lt]=Ce.useState(null),[br,En]=M.useState(!1),Rr=async()=>{if(br)return;En(!0),Lt(null);const Y={components:Le.map(X=>{const ie=X.data??{},pe=ie.type;let be;typeof pe=="string"?be=pe:typeof X.type=="string"?be=X.type:be="microservice";const we=ie.label,Se=typeof we=="string"?we:String(X.id),Ke=ie&&typeof ie=="object"?{...ie}:{},{icon:Ze,subtitle:Re,...Xe}=Ke;return{id:X.id,type:be,label:Se,position:{x:X.position?.x??0,y:X.position?.y??0},properties:{...Xe,nodeData:{label:Se,icon:ie.icon,subtitle:ie.subtitle}}}}),connections:dt.map(X=>{const ie=X.data??{},pe=ie.type,be=typeof pe=="string"?pe:"api-call",we=ie.label,Se=typeof we=="string"?we:void 0;return{id:X.id??`${X.source}-${X.target}`,source:X.source,target:X.target,type:be,label:Se,properties:ie}}),explanation:"",keyPoints:[]};try{console.log("Running AI assessment with solution:",Y);const X=await xhe(Y,N);if(Lt(X),ge("assessment"),n&&n!=="free"&&o)try{console.log("Saving assessment to database:",X),await tn.saveAttempt({problemId:n,title:N?.title||"Unknown Problem",difficulty:N?.difficulty,category:N?.category,nodes:Le,edges:dt,elapsedTime:kn,lastAssessment:X}),console.log("Assessment saved successfully")}catch(ie){console.error("Failed to save assessment:",ie)}}catch(X){console.error("Assessment failed:",X),Lt({isValid:!1,score:0,feedback:[{type:"error",message:"Assessment failed. Please check your connection and try again.",category:"maintainability"}],suggestions:[],missingComponents:[],architectureStrengths:[],improvements:[]})}finally{En(!1)}},Ii=M.useRef(null),us=Y=>{Y.preventDefault(),Y.dataTransfer&&(Y.dataTransfer.dropEffect="move")},jr=Y=>{Y.preventDefault();const X=Y.dataTransfer?.getData("application/reactflow")||Y.dataTransfer?.getData("text/plain");let ie=X;try{X&&(ie=JSON.parse(X).type||X)}catch{}const pe=r({x:Y.clientX,y:Y.clientY}),be=`${ie}-${Date.now()}`,we=Yl.find(Re=>Re.id===ie),Se=we?.group==="Grouping",Ke=we?.nodeType||(Se?"group":"custom"),Ze={id:be,position:pe,type:Ke,style:Se?{width:400,height:300,zIndex:-1}:void 0,data:{label:we?.label??ie,componentId:we?.id,icon:we?.icon,subtitle:we?.description,backgroundColor:Se?"rgba(100, 100, 255, 0.05)":void 0,borderColor:Se?"rgba(100, 100, 255, 0.3)":void 0,...Ke==="tableNode"?{componentName:we?.label||"Entity",attributes:we?.data?.attributes||[{id:"attr-1",name:"id",type:"UUID",isPrimaryKey:!0},{id:"attr-2",name:"name",type:"VARCHAR(100)",isNullable:!1},{id:"attr-3",name:"created_at",type:"TIMESTAMP",isNullable:!1}],renderConfig:we?.renderConfig}:{},...Ke==="erNode"?we?.properties?.reduce((Re,Xe)=>(Xe.default!==void 0&&Xe.default!==""&&(Re[Xe.key]=Xe.default),Re),{}):{}}};Fe(Re=>[...Re,Ze])},Bi=(Y,X)=>{if(X.parentId)return;const ie=Le.filter(be=>be.type==="group");let pe;for(const be of ie){if(be.id===X.id)continue;const we=be.position.x,Se=be.position.y,Ke=be.style?.width||400,Ze=be.style?.height||300,Re=X.position.x,Xe=X.position.y,gt=10;if(Re>we+gt&&Re<we+Ke-gt&&Xe>Se+gt&&Xe<Se+Ze-gt){pe=be.id;break}}pe&&Fe(be=>be.map(we=>{if(we.id===X.id){const Se=be.find(Ze=>Ze.id===pe),Ke=Se?{x:X.position.x-Se.position.x,y:X.position.y-Se.position.y}:X.position;return{...we,position:Ke,parentId:pe,extent:"parent"}}return we}))},hn=M.useCallback(()=>{const Y=Pt.current;Y&&Fe(X=>X.map(ie=>{if(ie.id===Y&&ie.parentId){const pe=X.find(Se=>Se.id===ie.parentId);let be=ie.position.x,we=ie.position.y;return pe&&(be+=pe.position.x,we+=pe.position.y),{...ie,position:{x:be,y:we},parentId:void 0,extent:void 0}}return ie}))},[Fe]),[qe,Yn]=M.useState(null),[Xn,Rt]=M.useState({}),[zi,De]=M.useState({}),[Z,ge]=M.useState("details"),[Me,lt]=M.useState(!1),Pt=M.useRef(null);Ce.useEffect(()=>{Pt.current=qe},[qe]);const Mt=M.useRef(void 0);Mt.current=Y=>{const ie=Y.detail.id;Fe(pe=>pe.filter(be=>be.id!==ie)),Pt.current===ie&&(Yn(null),ge("details"))};const Vt=M.useRef(void 0);Vt.current=Y=>{const ie=Y.detail.id;Yn(pe=>{const be=pe===ie?null:ie;return ge(be?"inspector":"details"),be})};function _n(Y,X,ie,pe){return Y.map(be=>be.id===X?{...be,data:{...be.data,label:ie,hasLabel:pe},label:ie}:be)}function pn(Y,X,ie){return Y.map(pe=>pe.id===X?{...pe,data:{...pe.data,cardinality:ie}}:pe)}const Xr=Ce.useRef(void 0);Xr.current=Y=>{const X=Y,{id:ie,label:pe,hasLabel:be}=X.detail;fn(we=>_n(we,ie,pe,be))};const It=Ce.useRef(void 0);It.current=Y=>{const X=Y,{id:ie,cardinality:pe}=X.detail;fn(be=>pn(be,ie,pe))},Ce.useEffect(()=>{const Y=ie=>Xr.current?.(ie),X=ie=>It.current?.(ie);return globalThis.addEventListener("diagram:edge-label-change",Y),globalThis.addEventListener("diagram:edge-cardinality-change",X),()=>{globalThis.removeEventListener("diagram:edge-label-change",Y),globalThis.removeEventListener("diagram:edge-cardinality-change",X)}},[]),Ce.useEffect(()=>{const Y=pe=>Mt.current?.(pe),X=pe=>Vt.current?.(pe),ie=pe=>{const be=pe;Fe(we=>we.map(Se=>{if(Se.id===be.detail.id&&Se.parentId){const Ke=we.find(Xe=>Xe.id===Se.parentId);let Ze=Se.position.x,Re=Se.position.y;return Ke&&(Ze+=Ke.position.x,Re+=Ke.position.y),{...Se,position:{x:Ze,y:Re},parentId:void 0,extent:void 0}}return Se}))};return globalThis.addEventListener("diagram:node-delete",Y),globalThis.addEventListener("diagram:node-toggle",X),globalThis.addEventListener("diagram:node-detach",ie),()=>{globalThis.removeEventListener("diagram:node-delete",Y),globalThis.removeEventListener("diagram:node-toggle",X),globalThis.removeEventListener("diagram:node-detach",ie)}},[Fe]),Ce.useEffect(()=>{const Y=we=>{if(!we)return[];if(Array.isArray(we))return we;if(typeof we=="string")try{const Se=JSON.parse(we);return Array.isArray(Se)?Se:[]}catch{return[]}return[]},X=we=>{const Se=we;Fe(Ke=>Ke.map(Ze=>{if(Ze.id===Se.detail.nodeId){const Re=Ze.data,Xe=Y(Re.attributes);return{...Ze,data:{...Re,attributes:[...Xe,Se.detail.attribute]}}}return Ze}))},ie=we=>{const Se=we;Fe(Ke=>Ke.map(Ze=>{if(Ze.id===Se.detail.nodeId){const Re=Ze.data,Xe=Y(Re.attributes);return{...Ze,data:{...Re,attributes:Xe.filter(gt=>gt.id!==Se.detail.attributeId)}}}return Ze}))},pe=we=>{const Se=we;Fe(Ke=>Ke.map(Ze=>{if(Ze.id===Se.detail.nodeId){const Re=Ze.data,Xe=Y(Re.attributes);return{...Ze,data:{...Re,attributes:Xe.map(gt=>gt.id===Se.detail.attributeId?{...gt,[Se.detail.key]:!gt[Se.detail.key]}:gt)}}}return Ze}))},be=we=>{const Se=we;Fe(Ke=>Ke.map(Ze=>{if(Ze.id===Se.detail.nodeId){const Re=Ze.data,Xe=Y(Re.attributes);return{...Ze,data:{...Re,attributes:Xe.map(gt=>gt.id===Se.detail.attributeId?{...gt,name:Se.detail.name,type:Se.detail.type}:gt)}}}return Ze}))};return globalThis.addEventListener("diagram:table-attribute-add",X),globalThis.addEventListener("diagram:table-attribute-delete",ie),globalThis.addEventListener("diagram:table-attribute-toggle",pe),globalThis.addEventListener("diagram:table-attribute-update",be),()=>{globalThis.removeEventListener("diagram:table-attribute-add",X),globalThis.removeEventListener("diagram:table-attribute-delete",ie),globalThis.removeEventListener("diagram:table-attribute-toggle",pe),globalThis.removeEventListener("diagram:table-attribute-update",be)}},[Fe]),Ce.useEffect(()=>{if(!qe)return;const Y=Le.find(X=>X.id===qe);Rt(Y?.data??{})},[qe,Le]);const zn=(Y,X)=>{Rt(ie=>({...ie,[Y]:X})),qe&&Fe(ie=>ie.map(pe=>pe.id===qe?{...pe,data:{...pe.data,[Y]:X}}:pe))},Vi=(Y,X)=>zn(Y,X),Ko=(Y,X)=>zn(Y,X),il=(Y,X)=>zn(Y,X),sl=(Y,X)=>zn(Y,X),Zn=()=>{if(!qe)return;const Y={id:`custom-${Date.now()}-${Math.random().toString(36).substring(2,11)}`,key:`customProperty${(zi[qe]?.length||0)+1}`,label:`Custom Property ${(zi[qe]?.length||0)+1}`,type:"text",value:""};De(X=>{const ie={...X,[qe]:[...X[qe]||[],Y]};return Fe(pe=>pe.map(be=>be.id===qe?{...be,data:{...be.data,_customProperties:ie[qe]}}:be)),ie})},ol=(Y,X)=>{qe&&De(ie=>{const be=(ie[qe]||[]).map(we=>we.id===Y?{...we,...X}:we);return Fe(we=>we.map(Se=>Se.id===qe?{...Se,data:{...Se.data,_customProperties:be}}:Se)),{...ie,[qe]:be}})},Lc=Y=>{qe&&De(X=>{const pe=(X[qe]||[]).filter(be=>be.id!==Y);return Fe(be=>be.map(we=>we.id===qe?{...we,data:{...we.data,_customProperties:pe}}:we)),{...X,[qe]:pe}})};Ce.useEffect(()=>{if(!qe)return;const Y=Le.find(X=>X.id===qe);Y?.data?._customProperties&&De(X=>({...X,[qe]:Y.data._customProperties}))},[qe,Le]);const $s=Y=>{const X=`${qe}-${Y.key}`,ie=Xn[Y.key];let pe;typeof ie=="number"?pe=ie:typeof Y.default=="number"?pe=Y.default:pe=void 0;let be;typeof ie=="string"?be=ie:Y.default===null||Y.default===void 0?be="":be=String(Y.default);let we;typeof ie=="string"?we=ie:Y.default===null||Y.default===void 0?we=void 0:we=String(Y.default);const Se=!!ie;return m.jsxs("div",{className:"flex flex-col px-1",children:[Y.type==="boolean"&&m.jsx(Uz,{id:X,checked:Se,onChange:Ke=>Vi(Y.key,Ke),label:Y.label}),Y.type==="number"&&m.jsx($z,{id:X,label:Y.label,value:pe,onChange:Ke=>Ko(Y.key,Ke)}),Y.type==="text"&&m.jsx(hp,{id:X,label:Y.label,value:be,placeholder:Y.placeholder,onChange:Ke=>il(Y.key,Ke)}),Y.type==="textarea"&&m.jsx(ym,{id:X,label:Y.label,value:be,placeholder:Y.placeholder,onChange:Ke=>il(Y.key,Ke)}),Y.type==="select"&&m.jsx(Gz,{id:X,label:Y.label,value:we,options:Y.options||[],onChange:Ke=>sl(Y.key,Ke)})]},Y.key)};let qi=null;if(qe){const Y=Le.find(X=>X.id===qe);if(Y){const X=Y.data.componentId?Yl.find(ie=>ie.id===Y.data.componentId):Yl.find(ie=>ie.label===Y.data.label);X?.properties?qi=X.properties.map(ie=>$s(ie)):qi=m.jsx("div",{className:"text-sm text-muted",children:"No properties defined"})}else qi=m.jsx("div",{className:"text-sm text-muted",children:"Node not found"})}let Hi=null;if(qe){const Y=zi[qe]||[];Y.length>0?Hi=Y.map(X=>m.jsx(Zhe,{property:X,onUpdate:ol,onDelete:Lc},X.id)):Hi=m.jsx("div",{className:"text-xs text-muted text-center py-3",children:"No custom properties added yet"})}const Gs=M.useCallback((Y,X)=>{const ie=w.current.find(we=>we.id===Y);if(!ie)return;const pe=`${Y}-copy-${Date.now()}`,be={...ie,id:pe,position:{x:ie.position.x+200,y:ie.position.y+100},data:{...X},selected:!1};Fe(we=>[...we,be])},[Fe]),Qn=M.useMemo(()=>({custom:vpe(Gs,w),erNode:wpe(Gs,w),tableNode:Spe(Gs,w),group:Xhe}),[Gs]),Or=M.useCallback(async()=>{if(!(!V||!ee))try{Oe(!0);const Y=await tn.getCollaborators(V);Te(Y)}catch(Y){console.error("Failed to load collaborators:",Y),S.current.error("Failed to load collaborators.")}finally{Oe(!1)}},[V,ee]);M.useEffect(()=>{ee&&V?Or():ee||Te([])},[ee,V,Or]);const Yo=localStorage.getItem("auth_token")||"",{sendDiagramUpdate:Ws,sendCursorPosition:Zr,collaborators:xf,cursors:vf,isConnected:Qr,isConnecting:Bg,reconnectAttempts:wf}=ipe({diagramId:V||"",token:Yo,enabled:!!V&&o&&!!Yo,onDiagramUpdate:M.useCallback((Y,X)=>{console.log("Received diagram update from user:",X),Y.nodes&&Fe(Y.nodes),Y.edges&&fn(Y.edges),Y.title&&L&&H({...L,title:Y.title}),S.current.success("Diagram updated by collaborator")},[Fe,fn,L]),onUserJoined:M.useCallback(Y=>{S.current.success(`${Y.name} joined the collaboration`)},[]),onUserLeft:M.useCallback(Y=>{S.current.success(`${Y.name} left the collaboration`)},[]),onError:M.useCallback(Y=>{S.current.error(Y)},[])});M.useEffect(()=>{if(!Qr)return;const Y=setTimeout(()=>{Ws({nodes:Le,edges:dt,title:L?.title})},500);return()=>clearTimeout(Y)},[Le,dt,L?.title,Qr,Ws]);const Sf=M.useCallback(Y=>{if(!Qr||!Ii.current?.getBoundingClientRect())return;const ie=r({x:Y.clientX,y:Y.clientY});Zr(ie)},[Qr,Zr,r]),Pc=M.useMemo(()=>{if(n!=="free")return;const Y=Le.map(X=>X.data?.componentId).filter(Boolean);return{nodeCount:Le.length,edgeCount:dt.length,componentTypes:Y,isEmpty:Le.length===0}},[n,Le,dt]);if(_)return m.jsx("div",{className:"min-h-screen bg-theme flex items-center justify-center",children:m.jsxs("div",{className:"text-center",children:[m.jsx("h2",{className:"text-2xl font-bold text-theme mb-4",children:"Loading problem..."}),m.jsx("div",{className:"text-muted",children:"Please wait while we fetch the problem details"})]})});if(R)return m.jsx("div",{className:"min-h-screen bg-theme flex items-center justify-center",children:m.jsxs("div",{className:"text-center",children:[m.jsx("h2",{className:"text-2xl font-bold text-theme mb-4",children:"Error Loading Problem"}),m.jsx("div",{className:"text-muted mb-4",children:R}),m.jsxs("div",{className:"flex gap-3 justify-center",children:[m.jsx("button",{onClick:ut,className:"px-4 py-2 bg-accent text-white rounded-md hover:brightness-90",children:"Back to Dashboard"}),m.jsx("button",{onClick:()=>globalThis.location.reload(),className:"px-4 py-2 bg-surface border border-theme text-theme rounded-md hover:bg-[var(--bg-hover)]",children:"Retry"})]})]})});if(!N)return m.jsx("div",{className:"min-h-screen bg-theme flex items-center justify-center",children:m.jsxs("div",{className:"text-center",children:[m.jsx("h2",{className:"text-2xl font-bold text-theme mb-4",children:"Problem not found"}),m.jsx("div",{className:"text-muted mb-4",children:"The requested problem could not be found."}),m.jsx("button",{onClick:ut,className:"px-4 py-2 bg-accent text-white rounded-md hover:brightness-90",children:"Back to Dashboard"})]})});function Cf(Y){const X=Yl.find(Ze=>Ze.id===Y),ie=Ii.current?.getBoundingClientRect();if(!ie)return;const pe=r({x:ie.left+ie.width/2,y:ie.top+ie.height/2}),be=`${Y}-${Date.now()}`,we=X?.group==="Grouping",Se=X?.nodeType||(we?"group":"custom"),Ke={id:be,position:pe,type:Se,style:we?{width:400,height:300,zIndex:-1}:void 0,data:{label:X?.label??Y,componentId:X?.id,icon:X?.icon,subtitle:X?.description,backgroundColor:we?"rgba(100, 100, 255, 0.05)":void 0,borderColor:we?"rgba(100, 100, 255, 0.3)":void 0}};Fe(Ze=>[...Ze,Ke])}const zg=()=>{Le.length===0&&dt.length===0||lt(!0)},al=()=>{Fe([]),fn([]),Yn(null),Lt(null),lt(!1)},Ic=()=>{lt(!1)},Xo=(Y="png")=>{const X=A8(wi()),ie=fg(X,1024,768,.5,2,.2),pe=document.querySelector(".react-flow__viewport");if(!pe){console.error("Viewport element not found");return}let be,we;Y==="svg"?(be=HV,we="svg"):Y==="jpeg"?(be=Zce,we="jpg"):(be=Xce,we="png"),be(pe,{backgroundColor:Y==="png"?"transparent":"#ffffff",width:1024,height:768,style:{width:"1024px",height:"768px",transform:`translate(${ie.x}px, ${ie.y}px) scale(${ie.zoom})`}}).then(Se=>{const Ke=document.createElement("a");Ke.setAttribute("download",`system-design-${Date.now()}.${we}`),Ke.setAttribute("href",Se),Ke.click()}).catch(Se=>{console.error("Error generating image:",Se)})},Ks=()=>{try{const Y=N?.title||"System Design",X=N?.description,ie=ape(Le,dt,Y,X),pe=`${Y.replaceAll(/\s+/g,"-").toLowerCase()}-${Date.now()}.json`;lP(ie,pe,"application/json"),S.current.success("Design exported as JSON successfully!")}catch(Y){console.error("Export JSON error:",Y),S.current.error("Failed to export as JSON")}},Ys=()=>{try{const Y=N?.title||"System Design",X=N?.description,ie=lpe(Le,dt,Y,X),pe=`${Y.replaceAll(/\s+/g,"-").toLowerCase()}-${Date.now()}.drawio`;lP(ie,pe,"application/xml"),v.success("Design exported as XML successfully!")}catch(Y){console.error("Export XML error:",Y),v.error("Failed to export as XML")}},kf=async Y=>{const X=Y.target.files?.[0];if(X)try{const ie=await cpe(X);let pe;if(X.name.endsWith(".json"))pe=oP(ie),v.success("Design imported from JSON successfully!");else if(X.name.endsWith(".xml")||X.name.endsWith(".drawio"))pe=aP(ie),v.success("Design imported from XML successfully!");else{const be=ie.trim();if(be.startsWith("{")||be.startsWith("["))pe=oP(ie),v.success("Design imported from JSON successfully!");else if(be.startsWith("<?xml")||be.startsWith("<mxfile"))pe=aP(ie),v.success("Design imported from XML successfully!");else throw new Error("Unsupported file format. Please use JSON or XML/DrawIO files.")}Fe(pe.nodes),fn(pe.edges),F(null),setTimeout(()=>{Mr({padding:.2,duration:400})},100)}catch(ie){console.error("Import error:",ie),v.error(ie instanceof Error?ie.message:"Failed to import diagram")}finally{Bn.current&&(Bn.current.value="")}},Bc=()=>{Bn.current?.click()},Ef=async()=>{if(!(!le.trim()||!V))try{Ee(!0),await tn.addCollaborator(V,le.trim(),_e),S.current.success(`Diagram shared with ${le} successfully!`),xe(""),Be("read"),Or()}catch(Y){console.error("Failed to Share Design:",Y),S.current.error("Failed to Share Design. Please try again.")}finally{Ee(!1)}},Zo=async(Y,X)=>{if(V)try{await tn.updateCollaborator(V,Y,X),S.current.success("Permission updated successfully!"),Or()}catch(ie){console.error("Failed to update permission:",ie),S.current.error("Failed to update permission.")}},Ci=async Y=>{if(V)try{await tn.removeCollaborator(V,Y),S.current.success("Collaborator removed successfully!"),Or()}catch(X){console.error("Failed to remove collaborator:",X),S.current.error("Failed to remove collaborator.")}},zc=Y=>{g(Y),te(!1),v.success("Great! I'll provide suggestions based on your project.")},Qo=()=>{te(!1)},Fi=async Y=>{if(Y.preventDefault(),!!oe.trim())try{bt("saving");const X={title:oe.trim(),description:$.trim()||void 0,nodes:Le,edges:dt},ie=await tn.saveDiagram(X);F(ie.id),H(ie);const pe=`last-diagram-${s?.id||"anonymous"}`;localStorage.setItem(pe,ie.id),bt("saved"),un(new Date),G(!1),ae(""),Q(""),v.success("Design saved successfully!")}catch(X){console.error("Failed to save diagram:",X),bt("error"),v.error("Failed to save design. Please try again.")}},Vc=()=>{G(!1),bt("idle"),ae(""),Q("")},Jo=(Y="TB")=>{const X=Le.filter(Re=>Re.type==="group"),ie=Le.filter(Re=>Re.type!=="group"&&!Re.parentId),pe=Re=>Re.type==="tableNode"?{width:400,height:400}:Re.type==="erNode"?{width:400,height:300}:{width:200,height:80},be=new Map,we=new Map;for(const Re of X){const Xe=Le.filter(Vn=>Vn.parentId===Re.id);if(Xe.length===0)continue;const gt=new tp.graphlib.Graph;gt.setDefaultEdgeLabel(()=>({})),gt.setGraph({rankdir:Y,nodesep:Y==="LR"?80:60,ranksep:Y==="LR"?100:80,marginx:20,marginy:20});for(const Vn of Xe){const Jr=pe(Vn);be.set(Vn.id,Jr),gt.setNode(Vn.id,Jr)}const Vg=dt.filter(Vn=>Xe.some(Jr=>Jr.id===Vn.source)&&Xe.some(Jr=>Jr.id===Vn.target));for(const Vn of Vg)gt.setEdge(Vn.source,Vn.target);tp.layout(gt);const qg=30,qc=50,Tf=new Map;for(const Vn of Xe){const Jr=gt.node(Vn.id);if(Jr){const Af=be.get(Vn.id)||{width:200,height:80};Tf.set(Vn.id,{x:Jr.x-Af.width/2+qg,y:Jr.y-Af.height/2+qc})}}we.set(Re.id,Tf)}const Se=new tp.graphlib.Graph;Se.setDefaultEdgeLabel(()=>({})),Se.setGraph({rankdir:Y,nodesep:Y==="LR"?150:80,ranksep:Y==="LR"?200:100});for(const Re of ie){const Xe=pe(Re);be.set(Re.id,Xe),Se.setNode(Re.id,Xe)}const Ke=dt.filter(Re=>ie.some(Xe=>Xe.id===Re.source)&&ie.some(Xe=>Xe.id===Re.target));for(const Re of Ke)Se.setEdge(Re.source,Re.target);ie.length>0&&tp.layout(Se);const Ze=Le.map(Re=>{if(Re.type==="group")return Re;if(Re.parentId){const Xe=we.get(Re.parentId);if(Xe){const gt=Xe.get(Re.id);if(gt)return{...Re,position:{x:gt.x,y:gt.y}}}return Re}else{const Xe=Se.node(Re.id);if(Xe){const gt=be.get(Re.id)||{width:200,height:80};return{...Re,position:{x:Xe.x-gt.width/2,y:Xe.y-gt.height/2}}}}return Re});Fe(Ze),globalThis.requestAnimationFrame(()=>{Mr({padding:.2,duration:400})})},Nf=()=>{if(Fe(Y=>Y.map(X=>X.id===qe?{...X,data:{...X.data,...Xn}}:X)),qe){const Y=Le.find(X=>X.id===qe);console.log("Node properties saved:",{id:qe,data:Y?.data,nodeProps:Xn})}},ll=n==="free"?"Design Studio | Diagrammatic":`${N?.title||"System Design Challenge"} | Diagrammatic`,cl=n==="free"?"Create system architecture diagrams from scratch with our free interactive canvas. Design, prototype, and visualize your ideas with 45+ components.":`Solve the ${N?.title||"system design"} challenge. ${N?.description?.substring(0,150)||"Practice system design skills"}...`;return m.jsxs(m.Fragment,{children:[m.jsx(Qd,{title:ll,description:cl,keywords:`system design playground, ${N?.title||"free canvas"}, architecture diagram tool, ${N?.category||"design tool"}`,url:`https://satya00089.github.io/diagrammatic/#/playground/${n||"free"}`}),m.jsxs("div",{className:"h-screen flex flex-col bg-theme",children:[m.jsx("header",{className:"bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] shadow-lg overflow-visible",children:m.jsx("div",{className:"max-w-full mx-auto px-4 sm:px-6 lg:px-8 overflow-visible",children:m.jsxs("div",{className:"flex items-center justify-between h-12 overflow-visible",children:[m.jsxs("div",{className:"flex items-center space-x-4",children:[m.jsxs("button",{type:"button",onClick:ut,className:"flex items-center space-x-3 group cursor-pointer",children:[m.jsx("img",{src:"/logo.png",alt:"Logo",className:"h-8 transition-transform group-hover:scale-110 duration-300"}),m.jsx("span",{className:"text-lg font-bold text-white",children:"Diagrammatic"})]}),m.jsxs("div",{className:"hidden md:flex items-center space-x-3 border-l border-white/20 pl-4",children:[m.jsx("h1",{className:"text-sm font-semibold text-white max-w-[200px] truncate cursor-default","data-tooltip":N.title,children:N.title}),n!=="free"&&m.jsxs(m.Fragment,{children:[m.jsx("span",{className:`px-2 py-1 rounded text-xs font-medium ${N.difficulty==="Easy"?"bg-green-100 text-green-800 dark:bg-green-900/30 dark:text-green-300":N.difficulty==="Medium"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900/30 dark:text-yellow-300":"bg-red-100 text-red-800 dark:bg-red-900/30 dark:text-red-300"}`,children:N.difficulty}),N.estimated_time&&m.jsxs("span",{className:"px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300 flex items-center gap-1",children:[m.jsx(JW,{className:"h-3 w-3"}),N.estimated_time]})]}),n!=="free"&&m.jsx("div",{className:"flex items-center gap-1 border-l border-white/20 pl-3",children:m.jsx("span",{className:"px-2 py-1 rounded text-xs font-medium bg-gray-100 text-gray-800 dark:bg-gray-900/30 dark:text-gray-300 flex items-center gap-1 font-mono",children:Us(kn)})})]})]}),m.jsxs("div",{className:"flex items-center gap-2",children:[n==="free"&&m.jsx("div",{className:"hidden sm:flex items-center gap-2 border-white/20",children:zt&&m.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 text-xs text-white/80",children:[mt==="saving"&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"w-3 h-3 border border-white/60 border-t-transparent rounded-full animate-spin"}),m.jsx("span",{children:"Saving..."})]}),mt==="saved"&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full"}),m.jsxs("span",{children:["Saved"," ",$t&&Si($t)]})]}),mt==="error"&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"w-3 h-3 bg-red-400 rounded-full"}),m.jsx("span",{children:"Save failed"})]}),mt==="idle"&&$t&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"w-3 h-3 bg-white/40 rounded-full"}),m.jsxs("span",{children:["Saved ",Si($t)]})]})]})}),n&&n!=="free"&&zt&&m.jsx("div",{className:"hidden sm:flex items-center gap-2 border-white/20",children:m.jsxs("div",{className:"flex items-center gap-2 px-2 py-1 text-xs text-white/80",children:[mt==="saving"&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"w-3 h-3 border border-white/60 border-t-transparent rounded-full animate-spin"}),m.jsx("span",{children:"Saving progress..."})]}),mt==="saved"&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"w-3 h-3 bg-green-400 rounded-full"}),m.jsxs("span",{children:["Progress saved"," ",$t&&Si($t)]})]}),mt==="error"&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"w-3 h-3 bg-red-400 rounded-full"}),m.jsx("span",{children:"Save failed"})]}),mt==="idle"&&$t&&m.jsxs(m.Fragment,{children:[m.jsx("div",{className:"w-3 h-3 bg-white/40 rounded-full"}),m.jsxs("span",{children:["Progress saved ",Si($t)]})]})]})}),m.jsxs("div",{className:"hidden sm:flex items-center gap-1 border-l border-r border-white/20 pl-2 pr-2",children:[m.jsx("button",{type:"button",onClick:sr,disabled:!vi,className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer","data-tooltip":"Undo (Ctrl+Z)",children:m.jsx(QW,{className:"h-5 w-5"})}),m.jsx("button",{type:"button",onClick:Ar,disabled:!Zt,className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer","data-tooltip":"Redo (Ctrl+Y or Ctrl+Shift+Z)",children:m.jsx(ZW,{className:"h-5 w-5"})}),m.jsx("button",{type:"button",onClick:zg,disabled:Le.length===0&&dt.length===0,className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer","data-tooltip":"Clear Canvas",children:m.jsx(hc,{className:"h-5 w-5"})})]}),n==="free"&&m.jsxs(m.Fragment,{children:[m.jsx("button",{type:"button",onClick:Bc,className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors cursor-pointer","data-tooltip":"Import Design",children:m.jsx(uK,{className:"h-5 w-5"})}),m.jsx("input",{ref:Bn,type:"file",accept:".json,.xml,.drawio",onChange:kf,className:"hidden","aria-label":"Import diagram file"})]}),m.jsxs("div",{className:"relative",children:[m.jsx("button",{type:"button",onClick:()=>yr(!ar),disabled:Le.length===0,className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer","data-tooltip":"Export Design",children:m.jsx(cK,{className:"h-5 w-5"})}),ar&&m.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-[var(--surface)] shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[180px]",children:[m.jsx("div",{className:"px-3 py-1 text-xs font-semibold text-muted uppercase tracking-wider",children:"Images"}),m.jsx("button",{type:"button",onClick:()=>{Xo("png"),yr(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"PNG Image"}),m.jsx("button",{type:"button",onClick:()=>{Xo("jpeg"),yr(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"JPEG Image"}),m.jsx("button",{type:"button",onClick:()=>{Xo("svg"),yr(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"SVG Vector"}),m.jsx("div",{className:"border-t border-theme/10 my-1"}),m.jsx("div",{className:"px-3 py-1 text-xs font-semibold text-muted uppercase tracking-wider",children:"Data Files"}),m.jsx("button",{type:"button",onClick:()=>{Ks(),yr(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"JSON Format"}),m.jsx("button",{type:"button",onClick:()=>{Ys(),yr(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"XML/DrawIO"})]})]}),m.jsxs("div",{className:"relative",children:[m.jsx("button",{type:"button",onClick:()=>xt(!Dr),disabled:Le.length===0,className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer","data-tooltip":"Auto Layout",children:m.jsx(sne,{className:"h-5 w-5"})}),Dr&&m.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-[var(--surface)] shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[160px]",children:[m.jsx("button",{type:"button",onClick:()=>{Jo("TB"),xt(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"Vertical Layout"}),m.jsx("button",{type:"button",onClick:()=>{Jo("LR"),xt(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"Horizontal Layout"})]})]}),n==="free"&&o&&V&&m.jsxs(m.Fragment,{children:[m.jsx("button",{type:"button",onClick:()=>de(!0),className:"p-2 text-white hover:bg-white/20 rounded-md transition-colors cursor-pointer","data-tooltip":"Share Diagram",children:m.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8.684 13.342C8.886 12.938 9 12.482 9 12c0-.482-.114-.938-.316-1.342m0 2.684a3 3 0 110-2.684m0 2.684l6.632 3.316m-6.632-6l6.632-3.316m0 0a3 3 0 105.367-2.684 3 3 0 00-5.367 2.684zm0 9.316a3 3 0 105.367 2.684 3 3 0 00-5.367-2.684z"})})}),m.jsx(spe,{isConnected:Qr,isConnecting:Bg,reconnectAttempts:wf,collaborators:xf,showCollaborators:!0})]}),N?.id!=="free"&&m.jsx("button",{type:"button",onClick:Rr,disabled:br,className:"px-6 py-1 text-white font-bold rounded-md hover:bg-white/20 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer transition-colors","data-tooltip":"Run assessment on current design",children:br?"Assessing...":"Run Assessment"}),m.jsx(Zd,{}),m.jsx("div",{className:"relative",children:o?m.jsxs(m.Fragment,{children:[m.jsxs("button",{type:"button",onClick:()=>q(!O),className:"flex items-center gap-2 px-3 py-2 text-sm font-medium text-white hover:bg-white/20 rounded-md transition-colors",children:[s?.picture?m.jsx("img",{src:s.picture,alt:s.name||"User",className:"w-8 h-8 rounded-full object-cover border-2 border-white"}):m.jsx("div",{className:"w-8 h-8 rounded-full bg-white/20 text-white flex items-center justify-center font-bold",children:s?.name?.[0]?.toUpperCase()||s?.email?.[0]?.toUpperCase()||"U"}),m.jsx("span",{className:"hidden sm:inline",children:s?.name||s?.email}),m.jsx(i6,{className:"h-4 w-4"})]}),O&&m.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-[var(--surface)] shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[180px]",children:[m.jsxs("div",{className:"px-4 py-2 border-b border-theme/10",children:[m.jsx("p",{className:"text-sm font-medium text-theme",children:s?.name||"User"}),m.jsx("p",{className:"text-xs text-muted truncate",children:s?.email})]}),m.jsx("button",{type:"button",onClick:()=>{h(),q(!1),F(null)},className:"w-full px-4 py-2 text-left text-sm text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 transition-colors",children:"Sign Out"})]})]}):m.jsx("button",{type:"button",onClick:()=>U(!0),className:"px-4 py-2 text-sm font-medium text-white rounded-md hover:bg-white/20 transition-colors",children:"Sign In"})})]})]})})}),m.jsxs("div",{className:"flex-1 flex min-h-0",children:[m.jsx(mhe,{components:Yl,onAdd:Cf}),m.jsx(ghe,{reactFlowWrapperRef:Ii,nodes:Le,edges:dt,nodeTypes:Qn,edgeTypes:gpe,onNodesChange:or,onEdgesChange:Fs,onConnect:Kn,onDragOver:us,onDrop:jr,onNodeDragStop:Bi,onMouseMove:Sf,children:vf.map(Y=>{const X=i(Y.position);return m.jsx(ope,{name:Y.user.name,color:zk(Y.userId),position:X,pictureUrl:Y.user.pictureUrl},Y.userId)})}),m.jsx(yhe,{problem:N,activeTab:Z,setActiveTab:ge,inspectedNodeId:qe,setInspectedNodeId:Yn,propertyElements:qi,customPropertyElements:Hi,onAddCustomProperty:Zn,handleSave:Nf,assessmentResult:Gt,onDetachFromGroup:hn,isNodeInGroup:qe?Le.find(Y=>Y.id===qe)?.parentId!==void 0:!1})]}),Me&&m.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-surface rounded-2xl shadow-2xl p-6 max-w-md w-full mx-4 border border-theme/10",children:[m.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[m.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 dark:bg-red-900/20 flex items-center justify-center",children:m.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:m.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),m.jsxs("div",{children:[m.jsx("h3",{className:"text-lg font-bold text-theme",children:"Clear Canvas?"}),m.jsx("p",{className:"text-sm text-muted",children:"This action cannot be undone"})]})]}),m.jsx("p",{className:"text-muted mb-6",children:"Are you sure you want to clear all components and connections from the canvas? You will lose all your current work."}),m.jsxs("div",{className:"flex space-x-3",children:[m.jsx("button",{type:"button",onClick:Ic,className:"flex-1 px-4 py-2 bg-theme/5 hover:bg-theme/10 text-theme font-medium rounded-lg transition-colors cursor-pointer",children:"Cancel"}),m.jsx("button",{type:"button",onClick:al,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-bold rounded-lg transition-colors cursor-pointer",children:"Clear All"})]})]})}),m.jsx(qm,{isOpen:B,onClose:()=>U(!1),onLogin:async(Y,X)=>{await l({email:Y,password:X})},onSignup:async(Y,X,ie)=>{await u({email:Y,password:X,name:ie})},onGoogleLogin:d}),K&&m.jsx(mpe,{onSubmit:zc,onSkip:Qo}),z&&m.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:m.jsx("div",{className:"bg-surface rounded-lg shadow-xl border border-theme/10 w-full max-w-md mx-4",children:m.jsxs("form",{onSubmit:Fi,children:[m.jsx("div",{className:"px-6 py-4 border-b border-theme/10",children:m.jsx("h2",{className:"text-lg font-semibold text-theme",children:"Save Your Design"})}),m.jsxs("div",{className:"px-6 py-4 space-y-4",children:[m.jsxs("div",{children:[m.jsxs("label",{htmlFor:"title-input",className:"block text-sm font-medium text-theme mb-2",children:["Title ",m.jsx("span",{className:"text-red-500",children:"*"})]}),m.jsx("input",{id:"title-input",type:"text",value:oe,onChange:Y=>ae(Y.target.value),placeholder:"Enter a title for your design",className:"w-full px-3 py-2 border border-theme/20 rounded-md focus:outline-none focus:ring-2 focus:ring-accent/50 bg-theme text-theme",required:!0})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"description-input",className:"block text-sm font-medium text-theme mb-2",children:"Description"}),m.jsx("textarea",{id:"description-input",value:$,onChange:Y=>Q(Y.target.value),placeholder:"Describe your design (optional)",className:"w-full px-3 py-2 border border-theme/20 rounded-md focus:outline-none focus:ring-2 focus:ring-accent/50 bg-theme text-theme resize-none",rows:3})]})]}),m.jsxs("div",{className:"px-6 py-4 border-t border-theme/10 flex justify-end gap-3",children:[m.jsx("button",{type:"button",onClick:Vc,className:"px-4 py-2 text-sm font-medium text-muted hover:text-theme hover:bg-[var(--bg-hover)] rounded-md transition-colors",children:"Cancel"}),m.jsx("button",{type:"submit",disabled:!oe.trim(),className:"px-4 py-2 text-sm font-medium bg-accent text-white rounded-md hover:brightness-90 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Save Design"})]})]})})}),ee&&m.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:m.jsxs("div",{className:"bg-surface rounded-lg shadow-xl border border-theme/10 w-full max-w-lg mx-4 max-h-[90vh] overflow-y-auto",children:[m.jsxs("div",{className:"px-6 py-4 border-b border-theme/10",children:[m.jsxs("div",{className:"flex items-center justify-between",children:[m.jsx("h2",{className:"text-lg font-semibold text-theme",children:"Share Design"}),m.jsx("button",{type:"button",onClick:()=>de(!1),className:"p-1 text-muted hover:text-theme rounded-md transition-colors",children:m.jsx(hc,{className:"h-5 w-5"})})]}),m.jsxs("p",{className:"text-sm text-muted mt-1",children:['Share "',L?.title||"Untitled Design",'" with others']})]}),m.jsxs("div",{className:"px-6 py-4 space-y-6",children:[m.jsxs("div",{className:"space-y-4",children:[m.jsx("h3",{className:"text-sm font-medium text-theme",children:"Add Collaborator"}),m.jsxs("div",{className:"space-y-3",children:[m.jsxs("div",{children:[m.jsx("label",{htmlFor:"share-email",className:"block text-sm font-medium text-theme mb-2",children:"Email Address"}),m.jsx("input",{id:"share-email",type:"email",value:le,onChange:Y=>xe(Y.target.value),placeholder:"Enter email address",className:"w-full px-3 py-2 border border-theme/20 rounded-md focus:outline-none focus:ring-2 focus:ring-accent/50 bg-theme text-theme"})]}),m.jsxs("div",{children:[m.jsx("label",{htmlFor:"share-permission",className:"block text-sm font-medium text-theme mb-2",children:"Permission Level"}),m.jsxs("select",{id:"share-permission",value:_e,onChange:Y=>Be(Y.target.value),className:"w-full px-3 py-2 border border-theme/20 rounded-md focus:outline-none focus:ring-2 focus:ring-accent/50 bg-theme text-theme",children:[m.jsx("option",{value:"read",children:"Read Only - Can view the diagram"}),m.jsx("option",{value:"edit",children:"Read & Edit - Can view and modify the diagram"})]})]}),m.jsx("button",{type:"button",onClick:Ef,disabled:!le.trim()||ke,className:"w-full px-4 py-2 bg-accent text-white rounded-md hover:brightness-90 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:ke?"Sharing...":"Share Design"})]})]}),m.jsxs("div",{className:"space-y-4",children:[m.jsx("h3",{className:"text-sm font-medium text-theme",children:"Current Collaborators"}),m.jsx(bhe,{isLoading:ht,collaborators:Pe,onUpdatePermission:Zo,onRemove:Ci})]}),m.jsxs("div",{className:"space-y-3",children:[m.jsx("h3",{className:"text-sm font-medium text-theme",children:"Share Link"}),m.jsxs("div",{className:"flex space-x-2",children:[m.jsx("input",{type:"text",value:`${globalThis.location.origin}/#/playground/free?diagramId=${V}`,readOnly:!0,className:"flex-1 px-3 py-2 text-sm border border-theme/20 rounded-md bg-theme/50 text-theme"}),m.jsx("button",{type:"button",onClick:()=>{navigator.clipboard.writeText(`${globalThis.location.origin}/#/playground/free?diagramId=${V}`),v.success("Link copied to clipboard!")},className:"px-3 py-2 bg-theme/10 hover:bg-theme/20 text-theme rounded-md transition-colors",children:"Copy"})]}),m.jsx("p",{className:"text-xs text-muted",children:"Anyone with this link can access the diagram according to their permission level"})]})]})]})}),m.jsx(epe,{toasts:v.toasts,onClose:v.removeToast}),n==="free"&&m.jsx(ppe,{canvasContext:Pc,onAddComponent:Cf})]})]})},kpe=()=>m.jsx(MV,{children:m.jsx(Cpe,{})}),Epe=()=>(Xa(),m.jsx(p9,{children:m.jsx(upe,{children:m.jsx(JU,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:m.jsxs(XU,{children:[m.jsx(ya,{path:"/",element:m.jsx(U_,{})}),m.jsx(ya,{path:"/problems",element:m.jsx(nY,{})}),m.jsx(ya,{path:"/create-problem",element:m.jsx(rne,{})}),m.jsx(ya,{path:"/diagrams",element:m.jsx(ine,{})}),m.jsx(ya,{path:"/playground/:id",element:m.jsx(kpe,{})}),m.jsx(ya,{path:"*",element:m.jsx(U_,{})})]})})})}));nU.createRoot(document.getElementById("root")).render(m.jsx(M.StrictMode,{children:m.jsx(Epe,{})}));
