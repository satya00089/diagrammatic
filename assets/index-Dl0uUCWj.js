function z8(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const i in r)if(i!=="default"&&!(i in e)){const s=Object.getOwnPropertyDescriptor(r,i);s&&Object.defineProperty(e,i,s.get?s:{enumerable:!0,get:()=>r[i]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const i of document.querySelectorAll('link[rel="modulepreload"]'))r(i);new MutationObserver(i=>{for(const s of i)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&r(o)}).observe(document,{childList:!0,subtree:!0});function n(i){const s={};return i.integrity&&(s.integrity=i.integrity),i.referrerPolicy&&(s.referrerPolicy=i.referrerPolicy),i.crossOrigin==="use-credentials"?s.credentials="include":i.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function r(i){if(i.ep)return;i.ep=!0;const s=n(i);fetch(i.href,s)}})();var _d=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Yc(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Vy={exports:{}},Bu={};/**
 * @license React
 * react-jsx-runtime.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var mM;function q8(){if(mM)return Bu;mM=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.fragment");function n(r,i,s){var o=null;if(s!==void 0&&(o=""+s),i.key!==void 0&&(o=""+i.key),"key"in i){s={};for(var l in i)l!=="key"&&(s[l]=i[l])}else s=i;return i=s.ref,{$$typeof:e,type:r,key:o,ref:i!==void 0?i:null,props:s}}return Bu.Fragment=t,Bu.jsx=n,Bu.jsxs=n,Bu}var gM;function V8(){return gM||(gM=1,Vy.exports=q8()),Vy.exports}var w=V8(),Hy={exports:{}},Fe={};/**
 * @license React
 * react.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yM;function H8(){if(yM)return Fe;yM=1;var e=Symbol.for("react.transitional.element"),t=Symbol.for("react.portal"),n=Symbol.for("react.fragment"),r=Symbol.for("react.strict_mode"),i=Symbol.for("react.profiler"),s=Symbol.for("react.consumer"),o=Symbol.for("react.context"),l=Symbol.for("react.forward_ref"),c=Symbol.for("react.suspense"),f=Symbol.for("react.memo"),h=Symbol.for("react.lazy"),p=Symbol.iterator;function g(L){return L===null||typeof L!="object"?null:(L=p&&L[p]||L["@@iterator"],typeof L=="function"?L:null)}var y={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b=Object.assign,S={};function x(L,K,re){this.props=L,this.context=K,this.refs=S,this.updater=re||y}x.prototype.isReactComponent={},x.prototype.setState=function(L,K){if(typeof L!="object"&&typeof L!="function"&&L!=null)throw Error("takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,L,K,"setState")},x.prototype.forceUpdate=function(L){this.updater.enqueueForceUpdate(this,L,"forceUpdate")};function C(){}C.prototype=x.prototype;function T(L,K,re){this.props=L,this.context=K,this.refs=S,this.updater=re||y}var k=T.prototype=new C;k.constructor=T,b(k,x.prototype),k.isPureReactComponent=!0;var A=Array.isArray,M={H:null,A:null,T:null,S:null,V:null},_=Object.prototype.hasOwnProperty;function R(L,K,re,le,V,G){return re=G.ref,{$$typeof:e,type:L,key:K,ref:re!==void 0?re:null,props:G}}function O(L,K){return R(L.type,K,void 0,void 0,void 0,L.props)}function I(L){return typeof L=="object"&&L!==null&&L.$$typeof===e}function $(L){var K={"=":"=0",":":"=2"};return"$"+L.replace(/[=:]/g,function(re){return K[re]})}var q=/\/+/g;function U(L,K){return typeof L=="object"&&L!==null&&L.key!=null?$(""+L.key):K.toString(36)}function X(){}function B(L){switch(L.status){case"fulfilled":return L.value;case"rejected":throw L.reason;default:switch(typeof L.status=="string"?L.then(X,X):(L.status="pending",L.then(function(K){L.status==="pending"&&(L.status="fulfilled",L.value=K)},function(K){L.status==="pending"&&(L.status="rejected",L.reason=K)})),L.status){case"fulfilled":return L.value;case"rejected":throw L.reason}}throw L}function F(L,K,re,le,V){var G=typeof L;(G==="undefined"||G==="boolean")&&(L=null);var Q=!1;if(L===null)Q=!0;else switch(G){case"bigint":case"string":case"number":Q=!0;break;case"object":switch(L.$$typeof){case e:case t:Q=!0;break;case h:return Q=L._init,F(Q(L._payload),K,re,le,V)}}if(Q)return V=V(L),Q=le===""?"."+U(L,0):le,A(V)?(re="",Q!=null&&(re=Q.replace(q,"$&/")+"/"),F(V,K,re,"",function(ge){return ge})):V!=null&&(I(V)&&(V=O(V,re+(V.key==null||L&&L.key===V.key?"":(""+V.key).replace(q,"$&/")+"/")+Q)),K.push(V)),1;Q=0;var ae=le===""?".":le+":";if(A(L))for(var se=0;se<L.length;se++)le=L[se],G=ae+U(le,se),Q+=F(le,K,re,G,V);else if(se=g(L),typeof se=="function")for(L=se.call(L),se=0;!(le=L.next()).done;)le=le.value,G=ae+U(le,se++),Q+=F(le,K,re,G,V);else if(G==="object"){if(typeof L.then=="function")return F(B(L),K,re,le,V);throw K=String(L),Error("Objects are not valid as a React child (found: "+(K==="[object Object]"?"object with keys {"+Object.keys(L).join(", ")+"}":K)+"). If you meant to render a collection of children, use an array instead.")}return Q}function j(L,K,re){if(L==null)return L;var le=[],V=0;return F(L,le,"","",function(G){return K.call(re,G,V++)}),le}function z(L){if(L._status===-1){var K=L._result;K=K(),K.then(function(re){(L._status===0||L._status===-1)&&(L._status=1,L._result=re)},function(re){(L._status===0||L._status===-1)&&(L._status=2,L._result=re)}),L._status===-1&&(L._status=0,L._result=K)}if(L._status===1)return L._result.default;throw L._result}var W=typeof reportError=="function"?reportError:function(L){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var K=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof L=="object"&&L!==null&&typeof L.message=="string"?String(L.message):String(L),error:L});if(!window.dispatchEvent(K))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",L);return}console.error(L)};function J(){}return Fe.Children={map:j,forEach:function(L,K,re){j(L,function(){K.apply(this,arguments)},re)},count:function(L){var K=0;return j(L,function(){K++}),K},toArray:function(L){return j(L,function(K){return K})||[]},only:function(L){if(!I(L))throw Error("React.Children.only expected to receive a single React element child.");return L}},Fe.Component=x,Fe.Fragment=n,Fe.Profiler=i,Fe.PureComponent=T,Fe.StrictMode=r,Fe.Suspense=c,Fe.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=M,Fe.__COMPILER_RUNTIME={__proto__:null,c:function(L){return M.H.useMemoCache(L)}},Fe.cache=function(L){return function(){return L.apply(null,arguments)}},Fe.cloneElement=function(L,K,re){if(L==null)throw Error("The argument must be a React element, but you passed "+L+".");var le=b({},L.props),V=L.key,G=void 0;if(K!=null)for(Q in K.ref!==void 0&&(G=void 0),K.key!==void 0&&(V=""+K.key),K)!_.call(K,Q)||Q==="key"||Q==="__self"||Q==="__source"||Q==="ref"&&K.ref===void 0||(le[Q]=K[Q]);var Q=arguments.length-2;if(Q===1)le.children=re;else if(1<Q){for(var ae=Array(Q),se=0;se<Q;se++)ae[se]=arguments[se+2];le.children=ae}return R(L.type,V,void 0,void 0,G,le)},Fe.createContext=function(L){return L={$$typeof:o,_currentValue:L,_currentValue2:L,_threadCount:0,Provider:null,Consumer:null},L.Provider=L,L.Consumer={$$typeof:s,_context:L},L},Fe.createElement=function(L,K,re){var le,V={},G=null;if(K!=null)for(le in K.key!==void 0&&(G=""+K.key),K)_.call(K,le)&&le!=="key"&&le!=="__self"&&le!=="__source"&&(V[le]=K[le]);var Q=arguments.length-2;if(Q===1)V.children=re;else if(1<Q){for(var ae=Array(Q),se=0;se<Q;se++)ae[se]=arguments[se+2];V.children=ae}if(L&&L.defaultProps)for(le in Q=L.defaultProps,Q)V[le]===void 0&&(V[le]=Q[le]);return R(L,G,void 0,void 0,null,V)},Fe.createRef=function(){return{current:null}},Fe.forwardRef=function(L){return{$$typeof:l,render:L}},Fe.isValidElement=I,Fe.lazy=function(L){return{$$typeof:h,_payload:{_status:-1,_result:L},_init:z}},Fe.memo=function(L,K){return{$$typeof:f,type:L,compare:K===void 0?null:K}},Fe.startTransition=function(L){var K=M.T,re={};M.T=re;try{var le=L(),V=M.S;V!==null&&V(re,le),typeof le=="object"&&le!==null&&typeof le.then=="function"&&le.then(J,W)}catch(G){W(G)}finally{M.T=K}},Fe.unstable_useCacheRefresh=function(){return M.H.useCacheRefresh()},Fe.use=function(L){return M.H.use(L)},Fe.useActionState=function(L,K,re){return M.H.useActionState(L,K,re)},Fe.useCallback=function(L,K){return M.H.useCallback(L,K)},Fe.useContext=function(L){return M.H.useContext(L)},Fe.useDebugValue=function(){},Fe.useDeferredValue=function(L,K){return M.H.useDeferredValue(L,K)},Fe.useEffect=function(L,K,re){var le=M.H;if(typeof re=="function")throw Error("useEffect CRUD overload is not enabled in this build of React.");return le.useEffect(L,K)},Fe.useId=function(){return M.H.useId()},Fe.useImperativeHandle=function(L,K,re){return M.H.useImperativeHandle(L,K,re)},Fe.useInsertionEffect=function(L,K){return M.H.useInsertionEffect(L,K)},Fe.useLayoutEffect=function(L,K){return M.H.useLayoutEffect(L,K)},Fe.useMemo=function(L,K){return M.H.useMemo(L,K)},Fe.useOptimistic=function(L,K){return M.H.useOptimistic(L,K)},Fe.useReducer=function(L,K,re){return M.H.useReducer(L,K,re)},Fe.useRef=function(L){return M.H.useRef(L)},Fe.useState=function(L){return M.H.useState(L)},Fe.useSyncExternalStore=function(L,K,re){return M.H.useSyncExternalStore(L,K,re)},Fe.useTransition=function(){return M.H.useTransition()},Fe.version="19.1.1",Fe}var vM;function Wc(){return vM||(vM=1,Hy.exports=H8()),Hy.exports}var P=Wc();const Pe=Yc(P),F8=z8({__proto__:null,default:Pe},[P]);var Fy={exports:{}},Iu={},Uy={exports:{}},$y={};/**
 * @license React
 * scheduler.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bM;function U8(){return bM||(bM=1,(function(e){function t(j,z){var W=j.length;j.push(z);e:for(;0<W;){var J=W-1>>>1,L=j[J];if(0<i(L,z))j[J]=z,j[W]=L,W=J;else break e}}function n(j){return j.length===0?null:j[0]}function r(j){if(j.length===0)return null;var z=j[0],W=j.pop();if(W!==z){j[0]=W;e:for(var J=0,L=j.length,K=L>>>1;J<K;){var re=2*(J+1)-1,le=j[re],V=re+1,G=j[V];if(0>i(le,W))V<L&&0>i(G,le)?(j[J]=G,j[V]=W,J=V):(j[J]=le,j[re]=W,J=re);else if(V<L&&0>i(G,W))j[J]=G,j[V]=W,J=V;else break e}}return z}function i(j,z){var W=j.sortIndex-z.sortIndex;return W!==0?W:j.id-z.id}if(e.unstable_now=void 0,typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],f=[],h=1,p=null,g=3,y=!1,b=!1,S=!1,x=!1,C=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,k=typeof setImmediate<"u"?setImmediate:null;function A(j){for(var z=n(f);z!==null;){if(z.callback===null)r(f);else if(z.startTime<=j)r(f),z.sortIndex=z.expirationTime,t(c,z);else break;z=n(f)}}function M(j){if(S=!1,A(j),!b)if(n(c)!==null)b=!0,_||(_=!0,U());else{var z=n(f);z!==null&&F(M,z.startTime-j)}}var _=!1,R=-1,O=5,I=-1;function $(){return x?!0:!(e.unstable_now()-I<O)}function q(){if(x=!1,_){var j=e.unstable_now();I=j;var z=!0;try{e:{b=!1,S&&(S=!1,T(R),R=-1),y=!0;var W=g;try{t:{for(A(j),p=n(c);p!==null&&!(p.expirationTime>j&&$());){var J=p.callback;if(typeof J=="function"){p.callback=null,g=p.priorityLevel;var L=J(p.expirationTime<=j);if(j=e.unstable_now(),typeof L=="function"){p.callback=L,A(j),z=!0;break t}p===n(c)&&r(c),A(j)}else r(c);p=n(c)}if(p!==null)z=!0;else{var K=n(f);K!==null&&F(M,K.startTime-j),z=!1}}break e}finally{p=null,g=W,y=!1}z=void 0}}finally{z?U():_=!1}}}var U;if(typeof k=="function")U=function(){k(q)};else if(typeof MessageChannel<"u"){var X=new MessageChannel,B=X.port2;X.port1.onmessage=q,U=function(){B.postMessage(null)}}else U=function(){C(q,0)};function F(j,z){R=C(function(){j(e.unstable_now())},z)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(j){j.callback=null},e.unstable_forceFrameRate=function(j){0>j||125<j?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):O=0<j?Math.floor(1e3/j):5},e.unstable_getCurrentPriorityLevel=function(){return g},e.unstable_next=function(j){switch(g){case 1:case 2:case 3:var z=3;break;default:z=g}var W=g;g=z;try{return j()}finally{g=W}},e.unstable_requestPaint=function(){x=!0},e.unstable_runWithPriority=function(j,z){switch(j){case 1:case 2:case 3:case 4:case 5:break;default:j=3}var W=g;g=j;try{return z()}finally{g=W}},e.unstable_scheduleCallback=function(j,z,W){var J=e.unstable_now();switch(typeof W=="object"&&W!==null?(W=W.delay,W=typeof W=="number"&&0<W?J+W:J):W=J,j){case 1:var L=-1;break;case 2:L=250;break;case 5:L=1073741823;break;case 4:L=1e4;break;default:L=5e3}return L=W+L,j={id:h++,callback:z,priorityLevel:j,startTime:W,expirationTime:L,sortIndex:-1},W>J?(j.sortIndex=W,t(f,j),n(c)===null&&j===n(f)&&(S?(T(R),R=-1):S=!0,F(M,W-J))):(j.sortIndex=L,t(c,j),b||y||(b=!0,_||(_=!0,U()))),j},e.unstable_shouldYield=$,e.unstable_wrapCallback=function(j){var z=g;return function(){var W=g;g=z;try{return j.apply(this,arguments)}finally{g=W}}}})($y)),$y}var xM;function $8(){return xM||(xM=1,Uy.exports=U8()),Uy.exports}var Gy={exports:{}},vn={};/**
 * @license React
 * react-dom.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wM;function G8(){if(wM)return vn;wM=1;var e=Wc();function t(c){var f="https://react.dev/errors/"+c;if(1<arguments.length){f+="?args[]="+encodeURIComponent(arguments[1]);for(var h=2;h<arguments.length;h++)f+="&args[]="+encodeURIComponent(arguments[h])}return"Minified React error #"+c+"; visit "+f+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function n(){}var r={d:{f:n,r:function(){throw Error(t(522))},D:n,C:n,L:n,m:n,X:n,S:n,M:n},p:0,findDOMNode:null},i=Symbol.for("react.portal");function s(c,f,h){var p=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:i,key:p==null?null:""+p,children:c,containerInfo:f,implementation:h}}var o=e.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE;function l(c,f){if(c==="font")return"";if(typeof f=="string")return f==="use-credentials"?f:""}return vn.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE=r,vn.createPortal=function(c,f){var h=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!f||f.nodeType!==1&&f.nodeType!==9&&f.nodeType!==11)throw Error(t(299));return s(c,f,null,h)},vn.flushSync=function(c){var f=o.T,h=r.p;try{if(o.T=null,r.p=2,c)return c()}finally{o.T=f,r.p=h,r.d.f()}},vn.preconnect=function(c,f){typeof c=="string"&&(f?(f=f.crossOrigin,f=typeof f=="string"?f==="use-credentials"?f:"":void 0):f=null,r.d.C(c,f))},vn.prefetchDNS=function(c){typeof c=="string"&&r.d.D(c)},vn.preinit=function(c,f){if(typeof c=="string"&&f&&typeof f.as=="string"){var h=f.as,p=l(h,f.crossOrigin),g=typeof f.integrity=="string"?f.integrity:void 0,y=typeof f.fetchPriority=="string"?f.fetchPriority:void 0;h==="style"?r.d.S(c,typeof f.precedence=="string"?f.precedence:void 0,{crossOrigin:p,integrity:g,fetchPriority:y}):h==="script"&&r.d.X(c,{crossOrigin:p,integrity:g,fetchPriority:y,nonce:typeof f.nonce=="string"?f.nonce:void 0})}},vn.preinitModule=function(c,f){if(typeof c=="string")if(typeof f=="object"&&f!==null){if(f.as==null||f.as==="script"){var h=l(f.as,f.crossOrigin);r.d.M(c,{crossOrigin:h,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0})}}else f==null&&r.d.M(c)},vn.preload=function(c,f){if(typeof c=="string"&&typeof f=="object"&&f!==null&&typeof f.as=="string"){var h=f.as,p=l(h,f.crossOrigin);r.d.L(c,h,{crossOrigin:p,integrity:typeof f.integrity=="string"?f.integrity:void 0,nonce:typeof f.nonce=="string"?f.nonce:void 0,type:typeof f.type=="string"?f.type:void 0,fetchPriority:typeof f.fetchPriority=="string"?f.fetchPriority:void 0,referrerPolicy:typeof f.referrerPolicy=="string"?f.referrerPolicy:void 0,imageSrcSet:typeof f.imageSrcSet=="string"?f.imageSrcSet:void 0,imageSizes:typeof f.imageSizes=="string"?f.imageSizes:void 0,media:typeof f.media=="string"?f.media:void 0})}},vn.preloadModule=function(c,f){if(typeof c=="string")if(f){var h=l(f.as,f.crossOrigin);r.d.m(c,{as:typeof f.as=="string"&&f.as!=="script"?f.as:void 0,crossOrigin:h,integrity:typeof f.integrity=="string"?f.integrity:void 0})}else r.d.m(c)},vn.requestFormReset=function(c){r.d.r(c)},vn.unstable_batchedUpdates=function(c,f){return c(f)},vn.useFormState=function(c,f,h){return o.H.useFormState(c,f,h)},vn.useFormStatus=function(){return o.H.useHostTransitionStatus()},vn.version="19.1.1",vn}var SM;function n4(){if(SM)return Gy.exports;SM=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Gy.exports=G8(),Gy.exports}/**
 * @license React
 * react-dom-client.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var EM;function K8(){if(EM)return Iu;EM=1;var e=$8(),t=Wc(),n=n4();function r(a){var u="https://react.dev/errors/"+a;if(1<arguments.length){u+="?args[]="+encodeURIComponent(arguments[1]);for(var d=2;d<arguments.length;d++)u+="&args[]="+encodeURIComponent(arguments[d])}return"Minified React error #"+a+"; visit "+u+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}function i(a){return!(!a||a.nodeType!==1&&a.nodeType!==9&&a.nodeType!==11)}function s(a){var u=a,d=a;if(a.alternate)for(;u.return;)u=u.return;else{a=u;do u=a,(u.flags&4098)!==0&&(d=u.return),a=u.return;while(a)}return u.tag===3?d:null}function o(a){if(a.tag===13){var u=a.memoizedState;if(u===null&&(a=a.alternate,a!==null&&(u=a.memoizedState)),u!==null)return u.dehydrated}return null}function l(a){if(s(a)!==a)throw Error(r(188))}function c(a){var u=a.alternate;if(!u){if(u=s(a),u===null)throw Error(r(188));return u!==a?null:a}for(var d=a,m=u;;){var v=d.return;if(v===null)break;var E=v.alternate;if(E===null){if(m=v.return,m!==null){d=m;continue}break}if(v.child===E.child){for(E=v.child;E;){if(E===d)return l(v),a;if(E===m)return l(v),u;E=E.sibling}throw Error(r(188))}if(d.return!==m.return)d=v,m=E;else{for(var N=!1,D=v.child;D;){if(D===d){N=!0,d=v,m=E;break}if(D===m){N=!0,m=v,d=E;break}D=D.sibling}if(!N){for(D=E.child;D;){if(D===d){N=!0,d=E,m=v;break}if(D===m){N=!0,m=E,d=v;break}D=D.sibling}if(!N)throw Error(r(189))}}if(d.alternate!==m)throw Error(r(190))}if(d.tag!==3)throw Error(r(188));return d.stateNode.current===d?a:u}function f(a){var u=a.tag;if(u===5||u===26||u===27||u===6)return a;for(a=a.child;a!==null;){if(u=f(a),u!==null)return u;a=a.sibling}return null}var h=Object.assign,p=Symbol.for("react.element"),g=Symbol.for("react.transitional.element"),y=Symbol.for("react.portal"),b=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),x=Symbol.for("react.profiler"),C=Symbol.for("react.provider"),T=Symbol.for("react.consumer"),k=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),M=Symbol.for("react.suspense"),_=Symbol.for("react.suspense_list"),R=Symbol.for("react.memo"),O=Symbol.for("react.lazy"),I=Symbol.for("react.activity"),$=Symbol.for("react.memo_cache_sentinel"),q=Symbol.iterator;function U(a){return a===null||typeof a!="object"?null:(a=q&&a[q]||a["@@iterator"],typeof a=="function"?a:null)}var X=Symbol.for("react.client.reference");function B(a){if(a==null)return null;if(typeof a=="function")return a.$$typeof===X?null:a.displayName||a.name||null;if(typeof a=="string")return a;switch(a){case b:return"Fragment";case x:return"Profiler";case S:return"StrictMode";case M:return"Suspense";case _:return"SuspenseList";case I:return"Activity"}if(typeof a=="object")switch(a.$$typeof){case y:return"Portal";case k:return(a.displayName||"Context")+".Provider";case T:return(a._context.displayName||"Context")+".Consumer";case A:var u=a.render;return a=a.displayName,a||(a=u.displayName||u.name||"",a=a!==""?"ForwardRef("+a+")":"ForwardRef"),a;case R:return u=a.displayName||null,u!==null?u:B(a.type)||"Memo";case O:u=a._payload,a=a._init;try{return B(a(u))}catch{}}return null}var F=Array.isArray,j=t.__CLIENT_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,z=n.__DOM_INTERNALS_DO_NOT_USE_OR_WARN_USERS_THEY_CANNOT_UPGRADE,W={pending:!1,data:null,method:null,action:null},J=[],L=-1;function K(a){return{current:a}}function re(a){0>L||(a.current=J[L],J[L]=null,L--)}function le(a,u){L++,J[L]=a.current,a.current=u}var V=K(null),G=K(null),Q=K(null),ae=K(null);function se(a,u){switch(le(Q,u),le(G,a),le(V,null),u.nodeType){case 9:case 11:a=(a=u.documentElement)&&(a=a.namespaceURI)?F2(a):0;break;default:if(a=u.tagName,u=u.namespaceURI)u=F2(u),a=U2(u,a);else switch(a){case"svg":a=1;break;case"math":a=2;break;default:a=0}}re(V),le(V,a)}function ge(){re(V),re(G),re(Q)}function Ce(a){a.memoizedState!==null&&le(ae,a);var u=V.current,d=U2(u,a.type);u!==d&&(le(G,a),le(V,d))}function De(a){G.current===a&&(re(V),re(G)),ae.current===a&&(re(ae),Du._currentValue=W)}var ke=Object.prototype.hasOwnProperty,Te=e.unstable_scheduleCallback,be=e.unstable_cancelCallback,we=e.unstable_shouldYield,tt=e.unstable_requestPaint,Me=e.unstable_now,rn=e.unstable_getCurrentPriorityLevel,sn=e.unstable_ImmediatePriority,_n=e.unstable_UserBlockingPriority,pn=e.unstable_NormalPriority,Wt=e.unstable_LowPriority,ft=e.unstable_IdlePriority,sr=e.log,Fn=e.unstable_setDisableYieldValue,mn=null,gt=null;function Pt(a){if(typeof sr=="function"&&Fn(a),gt&&typeof gt.setStrictMode=="function")try{gt.setStrictMode(mn,a)}catch{}}var wt=Math.clz32?Math.clz32:Gi,or=Math.log,Xs=Math.LN2;function Gi(a){return a>>>=0,a===0?32:31-(or(a)/Xs|0)|0}var on=256,gn=4194304;function Ar(a){var u=a&42;if(u!==0)return u;switch(a&-a){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:return 64;case 128:return 128;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return a&4194048;case 4194304:case 8388608:case 16777216:case 33554432:return a&62914560;case 67108864:return 67108864;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 0;default:return a}}function Vr(a,u,d){var m=a.pendingLanes;if(m===0)return 0;var v=0,E=a.suspendedLanes,N=a.pingedLanes;a=a.warmLanes;var D=m&134217727;return D!==0?(m=D&~E,m!==0?v=Ar(m):(N&=D,N!==0?v=Ar(N):d||(d=D&~a,d!==0&&(v=Ar(d))))):(D=m&~E,D!==0?v=Ar(D):N!==0?v=Ar(N):d||(d=m&~a,d!==0&&(v=Ar(d)))),v===0?0:u!==0&&u!==v&&(u&E)===0&&(E=v&-v,d=u&-u,E>=d||E===32&&(d&4194048)!==0)?u:v}function Hr(a,u){return(a.pendingLanes&~(a.suspendedLanes&~a.pingedLanes)&u)===0}function Pl(a,u){switch(a){case 1:case 2:case 4:case 8:case 64:return u+250;case 16:case 32:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return u+5e3;case 4194304:case 8388608:case 16777216:case 33554432:return-1;case 67108864:case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function sa(){var a=on;return on<<=1,(on&4194048)===0&&(on=256),a}function oa(){var a=gn;return gn<<=1,(gn&62914560)===0&&(gn=4194304),a}function Zs(a){for(var u=[],d=0;31>d;d++)u.push(a);return u}function li(a,u){a.pendingLanes|=u,u!==268435456&&(a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0)}function ue(a,u,d,m,v,E){var N=a.pendingLanes;a.pendingLanes=d,a.suspendedLanes=0,a.pingedLanes=0,a.warmLanes=0,a.expiredLanes&=d,a.entangledLanes&=d,a.errorRecoveryDisabledLanes&=d,a.shellSuspendCounter=0;var D=a.entanglements,H=a.expirationTimes,te=a.hiddenUpdates;for(d=N&~d;0<d;){var ce=31-wt(d),de=1<<ce;D[ce]=0,H[ce]=-1;var ne=te[ce];if(ne!==null)for(te[ce]=null,ce=0;ce<ne.length;ce++){var ie=ne[ce];ie!==null&&(ie.lane&=-536870913)}d&=~de}m!==0&&oe(a,m,0),E!==0&&v===0&&a.tag!==0&&(a.suspendedLanes|=E&~(N&~u))}function oe(a,u,d){a.pendingLanes|=u,a.suspendedLanes&=~u;var m=31-wt(u);a.entangledLanes|=u,a.entanglements[m]=a.entanglements[m]|1073741824|d&4194090}function he(a,u){var d=a.entangledLanes|=u;for(a=a.entanglements;d;){var m=31-wt(d),v=1<<m;v&u|a[m]&u&&(a[m]|=u),d&=~v}}function xe(a){switch(a){case 2:a=1;break;case 8:a=4;break;case 32:a=16;break;case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:a=128;break;case 268435456:a=134217728;break;default:a=0}return a}function ye(a){return a&=-a,2<a?8<a?(a&134217727)!==0?32:268435456:8:2}function Se(){var a=z.p;return a!==0?a:(a=window.event,a===void 0?32:uM(a.type))}function je(a,u){var d=z.p;try{return z.p=a,u()}finally{z.p=d}}var He=Math.random().toString(36).slice(2),Ze="__reactFiber$"+He,ht="__reactProps$"+He,Ve="__reactContainer$"+He,st="__reactEvents$"+He,Bl="__reactListeners$"+He,jm="__reactHandles$"+He,gf="__reactResources$"+He,Qs="__reactMarker$"+He;function Il(a){delete a[Ze],delete a[ht],delete a[st],delete a[Bl],delete a[jm]}function Ki(a){var u=a[Ze];if(u)return u;for(var d=a.parentNode;d;){if(u=d[Ve]||d[Ze]){if(d=u.alternate,u.child!==null||d!==null&&d.child!==null)for(a=Y2(a);a!==null;){if(d=a[Ze])return d;a=Y2(a)}return u}a=d,d=a.parentNode}return null}function ui(a){if(a=a[Ze]||a[Ve]){var u=a.tag;if(u===5||u===6||u===13||u===26||u===27||u===3)return a}return null}function Yi(a){var u=a.tag;if(u===5||u===26||u===27||u===6)return a.stateNode;throw Error(r(33))}function ci(a){var u=a[gf];return u||(u=a[gf]={hoistableStyles:new Map,hoistableScripts:new Map}),u}function Bt(a){a[Qs]=!0}var yf=new Set,vf={};function fi(a,u){Wi(a,u),Wi(a+"Capture",u)}function Wi(a,u){for(vf[a]=u,a=0;a<u.length;a++)yf.add(u[a])}var Lm=RegExp("^[:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD][:A-Z_a-z\\u00C0-\\u00D6\\u00D8-\\u00F6\\u00F8-\\u02FF\\u0370-\\u037D\\u037F-\\u1FFF\\u200C-\\u200D\\u2070-\\u218F\\u2C00-\\u2FEF\\u3001-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFFD\\-.0-9\\u00B7\\u0300-\\u036F\\u203F-\\u2040]*$"),zl={},bf={};function Pm(a){return ke.call(bf,a)?!0:ke.call(zl,a)?!1:Lm.test(a)?bf[a]=!0:(zl[a]=!0,!1)}function aa(a,u,d){if(Pm(u))if(d===null)a.removeAttribute(u);else{switch(typeof d){case"undefined":case"function":case"symbol":a.removeAttribute(u);return;case"boolean":var m=u.toLowerCase().slice(0,5);if(m!=="data-"&&m!=="aria-"){a.removeAttribute(u);return}}a.setAttribute(u,""+d)}}function la(a,u,d){if(d===null)a.removeAttribute(u);else{switch(typeof d){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(u);return}a.setAttribute(u,""+d)}}function Mr(a,u,d,m){if(m===null)a.removeAttribute(d);else{switch(typeof m){case"undefined":case"function":case"symbol":case"boolean":a.removeAttribute(d);return}a.setAttributeNS(u,d,""+m)}}var ql,xf;function di(a){if(ql===void 0)try{throw Error()}catch(d){var u=d.stack.trim().match(/\n( *(at )?)/);ql=u&&u[1]||"",xf=-1<d.stack.indexOf(`
    at`)?" (<anonymous>)":-1<d.stack.indexOf("@")?"@unknown:0:0":""}return`
`+ql+a+xf}var Vl=!1;function Hl(a,u){if(!a||Vl)return"";Vl=!0;var d=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{var m={DetermineComponentFrameRoot:function(){try{if(u){var de=function(){throw Error()};if(Object.defineProperty(de.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(de,[])}catch(ie){var ne=ie}Reflect.construct(a,[],de)}else{try{de.call()}catch(ie){ne=ie}a.call(de.prototype)}}else{try{throw Error()}catch(ie){ne=ie}(de=a())&&typeof de.catch=="function"&&de.catch(function(){})}}catch(ie){if(ie&&ne&&typeof ie.stack=="string")return[ie.stack,ne.stack]}return[null,null]}};m.DetermineComponentFrameRoot.displayName="DetermineComponentFrameRoot";var v=Object.getOwnPropertyDescriptor(m.DetermineComponentFrameRoot,"name");v&&v.configurable&&Object.defineProperty(m.DetermineComponentFrameRoot,"name",{value:"DetermineComponentFrameRoot"});var E=m.DetermineComponentFrameRoot(),N=E[0],D=E[1];if(N&&D){var H=N.split(`
`),te=D.split(`
`);for(v=m=0;m<H.length&&!H[m].includes("DetermineComponentFrameRoot");)m++;for(;v<te.length&&!te[v].includes("DetermineComponentFrameRoot");)v++;if(m===H.length||v===te.length)for(m=H.length-1,v=te.length-1;1<=m&&0<=v&&H[m]!==te[v];)v--;for(;1<=m&&0<=v;m--,v--)if(H[m]!==te[v]){if(m!==1||v!==1)do if(m--,v--,0>v||H[m]!==te[v]){var ce=`
`+H[m].replace(" at new "," at ");return a.displayName&&ce.includes("<anonymous>")&&(ce=ce.replace("<anonymous>",a.displayName)),ce}while(1<=m&&0<=v);break}}}finally{Vl=!1,Error.prepareStackTrace=d}return(d=a?a.displayName||a.name:"")?di(d):""}function Bm(a){switch(a.tag){case 26:case 27:case 5:return di(a.type);case 16:return di("Lazy");case 13:return di("Suspense");case 19:return di("SuspenseList");case 0:case 15:return Hl(a.type,!1);case 11:return Hl(a.type.render,!1);case 1:return Hl(a.type,!0);case 31:return di("Activity");default:return""}}function wf(a){try{var u="";do u+=Bm(a),a=a.return;while(a);return u}catch(d){return`
Error generating stack: `+d.message+`
`+d.stack}}function Rn(a){switch(typeof a){case"bigint":case"boolean":case"number":case"string":case"undefined":return a;case"object":return a;default:return""}}function Sf(a){var u=a.type;return(a=a.nodeName)&&a.toLowerCase()==="input"&&(u==="checkbox"||u==="radio")}function Im(a){var u=Sf(a)?"checked":"value",d=Object.getOwnPropertyDescriptor(a.constructor.prototype,u),m=""+a[u];if(!a.hasOwnProperty(u)&&typeof d<"u"&&typeof d.get=="function"&&typeof d.set=="function"){var v=d.get,E=d.set;return Object.defineProperty(a,u,{configurable:!0,get:function(){return v.call(this)},set:function(N){m=""+N,E.call(this,N)}}),Object.defineProperty(a,u,{enumerable:d.enumerable}),{getValue:function(){return m},setValue:function(N){m=""+N},stopTracking:function(){a._valueTracker=null,delete a[u]}}}}function ua(a){a._valueTracker||(a._valueTracker=Im(a))}function Fl(a){if(!a)return!1;var u=a._valueTracker;if(!u)return!0;var d=u.getValue(),m="";return a&&(m=Sf(a)?a.checked?"true":"false":a.value),a=m,a!==d?(u.setValue(a),!0):!1}function ca(a){if(a=a||(typeof document<"u"?document:void 0),typeof a>"u")return null;try{return a.activeElement||a.body}catch{return a.body}}var zm=/[\n"\\]/g;function Dn(a){return a.replace(zm,function(u){return"\\"+u.charCodeAt(0).toString(16)+" "})}function Js(a,u,d,m,v,E,N,D){a.name="",N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"?a.type=N:a.removeAttribute("type"),u!=null?N==="number"?(u===0&&a.value===""||a.value!=u)&&(a.value=""+Rn(u)):a.value!==""+Rn(u)&&(a.value=""+Rn(u)):N!=="submit"&&N!=="reset"||a.removeAttribute("value"),u!=null?Ul(a,N,Rn(u)):d!=null?Ul(a,N,Rn(d)):m!=null&&a.removeAttribute("value"),v==null&&E!=null&&(a.defaultChecked=!!E),v!=null&&(a.checked=v&&typeof v!="function"&&typeof v!="symbol"),D!=null&&typeof D!="function"&&typeof D!="symbol"&&typeof D!="boolean"?a.name=""+Rn(D):a.removeAttribute("name")}function Ef(a,u,d,m,v,E,N,D){if(E!=null&&typeof E!="function"&&typeof E!="symbol"&&typeof E!="boolean"&&(a.type=E),u!=null||d!=null){if(!(E!=="submit"&&E!=="reset"||u!=null))return;d=d!=null?""+Rn(d):"",u=u!=null?""+Rn(u):d,D||u===a.value||(a.value=u),a.defaultValue=u}m=m??v,m=typeof m!="function"&&typeof m!="symbol"&&!!m,a.checked=D?a.checked:!!m,a.defaultChecked=!!m,N!=null&&typeof N!="function"&&typeof N!="symbol"&&typeof N!="boolean"&&(a.name=N)}function Ul(a,u,d){u==="number"&&ca(a.ownerDocument)===a||a.defaultValue===""+d||(a.defaultValue=""+d)}function hi(a,u,d,m){if(a=a.options,u){u={};for(var v=0;v<d.length;v++)u["$"+d[v]]=!0;for(d=0;d<a.length;d++)v=u.hasOwnProperty("$"+a[d].value),a[d].selected!==v&&(a[d].selected=v),v&&m&&(a[d].defaultSelected=!0)}else{for(d=""+Rn(d),u=null,v=0;v<a.length;v++){if(a[v].value===d){a[v].selected=!0,m&&(a[v].defaultSelected=!0);return}u!==null||a[v].disabled||(u=a[v])}u!==null&&(u.selected=!0)}}function Vk(a,u,d){if(u!=null&&(u=""+Rn(u),u!==a.value&&(a.value=u),d==null)){a.defaultValue!==u&&(a.defaultValue=u);return}a.defaultValue=d!=null?""+Rn(d):""}function Hk(a,u,d,m){if(u==null){if(m!=null){if(d!=null)throw Error(r(92));if(F(m)){if(1<m.length)throw Error(r(93));m=m[0]}d=m}d==null&&(d=""),u=d}d=Rn(u),a.defaultValue=d,m=a.textContent,m===d&&m!==""&&m!==null&&(a.value=m)}function fa(a,u){if(u){var d=a.firstChild;if(d&&d===a.lastChild&&d.nodeType===3){d.nodeValue=u;return}}a.textContent=u}var PV=new Set("animationIterationCount aspectRatio borderImageOutset borderImageSlice borderImageWidth boxFlex boxFlexGroup boxOrdinalGroup columnCount columns flex flexGrow flexPositive flexShrink flexNegative flexOrder gridArea gridRow gridRowEnd gridRowSpan gridRowStart gridColumn gridColumnEnd gridColumnSpan gridColumnStart fontWeight lineClamp lineHeight opacity order orphans scale tabSize widows zIndex zoom fillOpacity floodOpacity stopOpacity strokeDasharray strokeDashoffset strokeMiterlimit strokeOpacity strokeWidth MozAnimationIterationCount MozBoxFlex MozBoxFlexGroup MozLineClamp msAnimationIterationCount msFlex msZoom msFlexGrow msFlexNegative msFlexOrder msFlexPositive msFlexShrink msGridColumn msGridColumnSpan msGridRow msGridRowSpan WebkitAnimationIterationCount WebkitBoxFlex WebKitBoxFlexGroup WebkitBoxOrdinalGroup WebkitColumnCount WebkitColumns WebkitFlex WebkitFlexGrow WebkitFlexPositive WebkitFlexShrink WebkitLineClamp".split(" "));function Fk(a,u,d){var m=u.indexOf("--")===0;d==null||typeof d=="boolean"||d===""?m?a.setProperty(u,""):u==="float"?a.cssFloat="":a[u]="":m?a.setProperty(u,d):typeof d!="number"||d===0||PV.has(u)?u==="float"?a.cssFloat=d:a[u]=(""+d).trim():a[u]=d+"px"}function Uk(a,u,d){if(u!=null&&typeof u!="object")throw Error(r(62));if(a=a.style,d!=null){for(var m in d)!d.hasOwnProperty(m)||u!=null&&u.hasOwnProperty(m)||(m.indexOf("--")===0?a.setProperty(m,""):m==="float"?a.cssFloat="":a[m]="");for(var v in u)m=u[v],u.hasOwnProperty(v)&&d[v]!==m&&Fk(a,v,m)}else for(var E in u)u.hasOwnProperty(E)&&Fk(a,E,u[E])}function qm(a){if(a.indexOf("-")===-1)return!1;switch(a){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var BV=new Map([["acceptCharset","accept-charset"],["htmlFor","for"],["httpEquiv","http-equiv"],["crossOrigin","crossorigin"],["accentHeight","accent-height"],["alignmentBaseline","alignment-baseline"],["arabicForm","arabic-form"],["baselineShift","baseline-shift"],["capHeight","cap-height"],["clipPath","clip-path"],["clipRule","clip-rule"],["colorInterpolation","color-interpolation"],["colorInterpolationFilters","color-interpolation-filters"],["colorProfile","color-profile"],["colorRendering","color-rendering"],["dominantBaseline","dominant-baseline"],["enableBackground","enable-background"],["fillOpacity","fill-opacity"],["fillRule","fill-rule"],["floodColor","flood-color"],["floodOpacity","flood-opacity"],["fontFamily","font-family"],["fontSize","font-size"],["fontSizeAdjust","font-size-adjust"],["fontStretch","font-stretch"],["fontStyle","font-style"],["fontVariant","font-variant"],["fontWeight","font-weight"],["glyphName","glyph-name"],["glyphOrientationHorizontal","glyph-orientation-horizontal"],["glyphOrientationVertical","glyph-orientation-vertical"],["horizAdvX","horiz-adv-x"],["horizOriginX","horiz-origin-x"],["imageRendering","image-rendering"],["letterSpacing","letter-spacing"],["lightingColor","lighting-color"],["markerEnd","marker-end"],["markerMid","marker-mid"],["markerStart","marker-start"],["overlinePosition","overline-position"],["overlineThickness","overline-thickness"],["paintOrder","paint-order"],["panose-1","panose-1"],["pointerEvents","pointer-events"],["renderingIntent","rendering-intent"],["shapeRendering","shape-rendering"],["stopColor","stop-color"],["stopOpacity","stop-opacity"],["strikethroughPosition","strikethrough-position"],["strikethroughThickness","strikethrough-thickness"],["strokeDasharray","stroke-dasharray"],["strokeDashoffset","stroke-dashoffset"],["strokeLinecap","stroke-linecap"],["strokeLinejoin","stroke-linejoin"],["strokeMiterlimit","stroke-miterlimit"],["strokeOpacity","stroke-opacity"],["strokeWidth","stroke-width"],["textAnchor","text-anchor"],["textDecoration","text-decoration"],["textRendering","text-rendering"],["transformOrigin","transform-origin"],["underlinePosition","underline-position"],["underlineThickness","underline-thickness"],["unicodeBidi","unicode-bidi"],["unicodeRange","unicode-range"],["unitsPerEm","units-per-em"],["vAlphabetic","v-alphabetic"],["vHanging","v-hanging"],["vIdeographic","v-ideographic"],["vMathematical","v-mathematical"],["vectorEffect","vector-effect"],["vertAdvY","vert-adv-y"],["vertOriginX","vert-origin-x"],["vertOriginY","vert-origin-y"],["wordSpacing","word-spacing"],["writingMode","writing-mode"],["xmlnsXlink","xmlns:xlink"],["xHeight","x-height"]]),IV=/^[\u0000-\u001F ]*j[\r\n\t]*a[\r\n\t]*v[\r\n\t]*a[\r\n\t]*s[\r\n\t]*c[\r\n\t]*r[\r\n\t]*i[\r\n\t]*p[\r\n\t]*t[\r\n\t]*:/i;function Cf(a){return IV.test(""+a)?"javascript:throw new Error('React has blocked a javascript: URL as a security precaution.')":a}var Vm=null;function Hm(a){return a=a.target||a.srcElement||window,a.correspondingUseElement&&(a=a.correspondingUseElement),a.nodeType===3?a.parentNode:a}var da=null,ha=null;function $k(a){var u=ui(a);if(u&&(a=u.stateNode)){var d=a[ht]||null;e:switch(a=u.stateNode,u.type){case"input":if(Js(a,d.value,d.defaultValue,d.defaultValue,d.checked,d.defaultChecked,d.type,d.name),u=d.name,d.type==="radio"&&u!=null){for(d=a;d.parentNode;)d=d.parentNode;for(d=d.querySelectorAll('input[name="'+Dn(""+u)+'"][type="radio"]'),u=0;u<d.length;u++){var m=d[u];if(m!==a&&m.form===a.form){var v=m[ht]||null;if(!v)throw Error(r(90));Js(m,v.value,v.defaultValue,v.defaultValue,v.checked,v.defaultChecked,v.type,v.name)}}for(u=0;u<d.length;u++)m=d[u],m.form===a.form&&Fl(m)}break e;case"textarea":Vk(a,d.value,d.defaultValue);break e;case"select":u=d.value,u!=null&&hi(a,!!d.multiple,u,!1)}}}var Fm=!1;function Gk(a,u,d){if(Fm)return a(u,d);Fm=!0;try{var m=a(u);return m}finally{if(Fm=!1,(da!==null||ha!==null)&&(ud(),da&&(u=da,a=ha,ha=da=null,$k(u),a)))for(u=0;u<a.length;u++)$k(a[u])}}function $l(a,u){var d=a.stateNode;if(d===null)return null;var m=d[ht]||null;if(m===null)return null;d=m[u];e:switch(u){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(m=!m.disabled)||(a=a.type,m=!(a==="button"||a==="input"||a==="select"||a==="textarea")),a=!m;break e;default:a=!1}if(a)return null;if(d&&typeof d!="function")throw Error(r(231,u,typeof d));return d}var pi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Um=!1;if(pi)try{var Gl={};Object.defineProperty(Gl,"passive",{get:function(){Um=!0}}),window.addEventListener("test",Gl,Gl),window.removeEventListener("test",Gl,Gl)}catch{Um=!1}var Xi=null,$m=null,kf=null;function Kk(){if(kf)return kf;var a,u=$m,d=u.length,m,v="value"in Xi?Xi.value:Xi.textContent,E=v.length;for(a=0;a<d&&u[a]===v[a];a++);var N=d-a;for(m=1;m<=N&&u[d-m]===v[E-m];m++);return kf=v.slice(a,1<m?1-m:void 0)}function Tf(a){var u=a.keyCode;return"charCode"in a?(a=a.charCode,a===0&&u===13&&(a=13)):a=u,a===10&&(a=13),32<=a||a===13?a:0}function Af(){return!0}function Yk(){return!1}function On(a){function u(d,m,v,E,N){this._reactName=d,this._targetInst=v,this.type=m,this.nativeEvent=E,this.target=N,this.currentTarget=null;for(var D in a)a.hasOwnProperty(D)&&(d=a[D],this[D]=d?d(E):E[D]);return this.isDefaultPrevented=(E.defaultPrevented!=null?E.defaultPrevented:E.returnValue===!1)?Af:Yk,this.isPropagationStopped=Yk,this}return h(u.prototype,{preventDefault:function(){this.defaultPrevented=!0;var d=this.nativeEvent;d&&(d.preventDefault?d.preventDefault():typeof d.returnValue!="unknown"&&(d.returnValue=!1),this.isDefaultPrevented=Af)},stopPropagation:function(){var d=this.nativeEvent;d&&(d.stopPropagation?d.stopPropagation():typeof d.cancelBubble!="unknown"&&(d.cancelBubble=!0),this.isPropagationStopped=Af)},persist:function(){},isPersistent:Af}),u}var eo={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(a){return a.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Mf=On(eo),Kl=h({},eo,{view:0,detail:0}),zV=On(Kl),Gm,Km,Yl,Nf=h({},Kl,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Wm,button:0,buttons:0,relatedTarget:function(a){return a.relatedTarget===void 0?a.fromElement===a.srcElement?a.toElement:a.fromElement:a.relatedTarget},movementX:function(a){return"movementX"in a?a.movementX:(a!==Yl&&(Yl&&a.type==="mousemove"?(Gm=a.screenX-Yl.screenX,Km=a.screenY-Yl.screenY):Km=Gm=0,Yl=a),Gm)},movementY:function(a){return"movementY"in a?a.movementY:Km}}),Wk=On(Nf),qV=h({},Nf,{dataTransfer:0}),VV=On(qV),HV=h({},Kl,{relatedTarget:0}),Ym=On(HV),FV=h({},eo,{animationName:0,elapsedTime:0,pseudoElement:0}),UV=On(FV),$V=h({},eo,{clipboardData:function(a){return"clipboardData"in a?a.clipboardData:window.clipboardData}}),GV=On($V),KV=h({},eo,{data:0}),Xk=On(KV),YV={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},WV={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},XV={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function ZV(a){var u=this.nativeEvent;return u.getModifierState?u.getModifierState(a):(a=XV[a])?!!u[a]:!1}function Wm(){return ZV}var QV=h({},Kl,{key:function(a){if(a.key){var u=YV[a.key]||a.key;if(u!=="Unidentified")return u}return a.type==="keypress"?(a=Tf(a),a===13?"Enter":String.fromCharCode(a)):a.type==="keydown"||a.type==="keyup"?WV[a.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Wm,charCode:function(a){return a.type==="keypress"?Tf(a):0},keyCode:function(a){return a.type==="keydown"||a.type==="keyup"?a.keyCode:0},which:function(a){return a.type==="keypress"?Tf(a):a.type==="keydown"||a.type==="keyup"?a.keyCode:0}}),JV=On(QV),eH=h({},Nf,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Zk=On(eH),tH=h({},Kl,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Wm}),nH=On(tH),rH=h({},eo,{propertyName:0,elapsedTime:0,pseudoElement:0}),iH=On(rH),sH=h({},Nf,{deltaX:function(a){return"deltaX"in a?a.deltaX:"wheelDeltaX"in a?-a.wheelDeltaX:0},deltaY:function(a){return"deltaY"in a?a.deltaY:"wheelDeltaY"in a?-a.wheelDeltaY:"wheelDelta"in a?-a.wheelDelta:0},deltaZ:0,deltaMode:0}),oH=On(sH),aH=h({},eo,{newState:0,oldState:0}),lH=On(aH),uH=[9,13,27,32],Xm=pi&&"CompositionEvent"in window,Wl=null;pi&&"documentMode"in document&&(Wl=document.documentMode);var cH=pi&&"TextEvent"in window&&!Wl,Qk=pi&&(!Xm||Wl&&8<Wl&&11>=Wl),Jk=" ",eT=!1;function tT(a,u){switch(a){case"keyup":return uH.indexOf(u.keyCode)!==-1;case"keydown":return u.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function nT(a){return a=a.detail,typeof a=="object"&&"data"in a?a.data:null}var pa=!1;function fH(a,u){switch(a){case"compositionend":return nT(u);case"keypress":return u.which!==32?null:(eT=!0,Jk);case"textInput":return a=u.data,a===Jk&&eT?null:a;default:return null}}function dH(a,u){if(pa)return a==="compositionend"||!Xm&&tT(a,u)?(a=Kk(),kf=$m=Xi=null,pa=!1,a):null;switch(a){case"paste":return null;case"keypress":if(!(u.ctrlKey||u.altKey||u.metaKey)||u.ctrlKey&&u.altKey){if(u.char&&1<u.char.length)return u.char;if(u.which)return String.fromCharCode(u.which)}return null;case"compositionend":return Qk&&u.locale!=="ko"?null:u.data;default:return null}}var hH={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function rT(a){var u=a&&a.nodeName&&a.nodeName.toLowerCase();return u==="input"?!!hH[a.type]:u==="textarea"}function iT(a,u,d,m){da?ha?ha.push(m):ha=[m]:da=m,u=md(u,"onChange"),0<u.length&&(d=new Mf("onChange","change",null,d,m),a.push({event:d,listeners:u}))}var Xl=null,Zl=null;function pH(a){I2(a,0)}function _f(a){var u=Yi(a);if(Fl(u))return a}function sT(a,u){if(a==="change")return u}var oT=!1;if(pi){var Zm;if(pi){var Qm="oninput"in document;if(!Qm){var aT=document.createElement("div");aT.setAttribute("oninput","return;"),Qm=typeof aT.oninput=="function"}Zm=Qm}else Zm=!1;oT=Zm&&(!document.documentMode||9<document.documentMode)}function lT(){Xl&&(Xl.detachEvent("onpropertychange",uT),Zl=Xl=null)}function uT(a){if(a.propertyName==="value"&&_f(Zl)){var u=[];iT(u,Zl,a,Hm(a)),Gk(pH,u)}}function mH(a,u,d){a==="focusin"?(lT(),Xl=u,Zl=d,Xl.attachEvent("onpropertychange",uT)):a==="focusout"&&lT()}function gH(a){if(a==="selectionchange"||a==="keyup"||a==="keydown")return _f(Zl)}function yH(a,u){if(a==="click")return _f(u)}function vH(a,u){if(a==="input"||a==="change")return _f(u)}function bH(a,u){return a===u&&(a!==0||1/a===1/u)||a!==a&&u!==u}var Un=typeof Object.is=="function"?Object.is:bH;function Ql(a,u){if(Un(a,u))return!0;if(typeof a!="object"||a===null||typeof u!="object"||u===null)return!1;var d=Object.keys(a),m=Object.keys(u);if(d.length!==m.length)return!1;for(m=0;m<d.length;m++){var v=d[m];if(!ke.call(u,v)||!Un(a[v],u[v]))return!1}return!0}function cT(a){for(;a&&a.firstChild;)a=a.firstChild;return a}function fT(a,u){var d=cT(a);a=0;for(var m;d;){if(d.nodeType===3){if(m=a+d.textContent.length,a<=u&&m>=u)return{node:d,offset:u-a};a=m}e:{for(;d;){if(d.nextSibling){d=d.nextSibling;break e}d=d.parentNode}d=void 0}d=cT(d)}}function dT(a,u){return a&&u?a===u?!0:a&&a.nodeType===3?!1:u&&u.nodeType===3?dT(a,u.parentNode):"contains"in a?a.contains(u):a.compareDocumentPosition?!!(a.compareDocumentPosition(u)&16):!1:!1}function hT(a){a=a!=null&&a.ownerDocument!=null&&a.ownerDocument.defaultView!=null?a.ownerDocument.defaultView:window;for(var u=ca(a.document);u instanceof a.HTMLIFrameElement;){try{var d=typeof u.contentWindow.location.href=="string"}catch{d=!1}if(d)a=u.contentWindow;else break;u=ca(a.document)}return u}function Jm(a){var u=a&&a.nodeName&&a.nodeName.toLowerCase();return u&&(u==="input"&&(a.type==="text"||a.type==="search"||a.type==="tel"||a.type==="url"||a.type==="password")||u==="textarea"||a.contentEditable==="true")}var xH=pi&&"documentMode"in document&&11>=document.documentMode,ma=null,eg=null,Jl=null,tg=!1;function pT(a,u,d){var m=d.window===d?d.document:d.nodeType===9?d:d.ownerDocument;tg||ma==null||ma!==ca(m)||(m=ma,"selectionStart"in m&&Jm(m)?m={start:m.selectionStart,end:m.selectionEnd}:(m=(m.ownerDocument&&m.ownerDocument.defaultView||window).getSelection(),m={anchorNode:m.anchorNode,anchorOffset:m.anchorOffset,focusNode:m.focusNode,focusOffset:m.focusOffset}),Jl&&Ql(Jl,m)||(Jl=m,m=md(eg,"onSelect"),0<m.length&&(u=new Mf("onSelect","select",null,u,d),a.push({event:u,listeners:m}),u.target=ma)))}function to(a,u){var d={};return d[a.toLowerCase()]=u.toLowerCase(),d["Webkit"+a]="webkit"+u,d["Moz"+a]="moz"+u,d}var ga={animationend:to("Animation","AnimationEnd"),animationiteration:to("Animation","AnimationIteration"),animationstart:to("Animation","AnimationStart"),transitionrun:to("Transition","TransitionRun"),transitionstart:to("Transition","TransitionStart"),transitioncancel:to("Transition","TransitionCancel"),transitionend:to("Transition","TransitionEnd")},ng={},mT={};pi&&(mT=document.createElement("div").style,"AnimationEvent"in window||(delete ga.animationend.animation,delete ga.animationiteration.animation,delete ga.animationstart.animation),"TransitionEvent"in window||delete ga.transitionend.transition);function no(a){if(ng[a])return ng[a];if(!ga[a])return a;var u=ga[a],d;for(d in u)if(u.hasOwnProperty(d)&&d in mT)return ng[a]=u[d];return a}var gT=no("animationend"),yT=no("animationiteration"),vT=no("animationstart"),wH=no("transitionrun"),SH=no("transitionstart"),EH=no("transitioncancel"),bT=no("transitionend"),xT=new Map,rg="abort auxClick beforeToggle cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");rg.push("scrollEnd");function Nr(a,u){xT.set(a,u),fi(u,[a])}var wT=new WeakMap;function ar(a,u){if(typeof a=="object"&&a!==null){var d=wT.get(a);return d!==void 0?d:(u={value:a,source:u,stack:wf(u)},wT.set(a,u),u)}return{value:a,source:u,stack:wf(u)}}var lr=[],ya=0,ig=0;function Rf(){for(var a=ya,u=ig=ya=0;u<a;){var d=lr[u];lr[u++]=null;var m=lr[u];lr[u++]=null;var v=lr[u];lr[u++]=null;var E=lr[u];if(lr[u++]=null,m!==null&&v!==null){var N=m.pending;N===null?v.next=v:(v.next=N.next,N.next=v),m.pending=v}E!==0&&ST(d,v,E)}}function Df(a,u,d,m){lr[ya++]=a,lr[ya++]=u,lr[ya++]=d,lr[ya++]=m,ig|=m,a.lanes|=m,a=a.alternate,a!==null&&(a.lanes|=m)}function sg(a,u,d,m){return Df(a,u,d,m),Of(a)}function va(a,u){return Df(a,null,null,u),Of(a)}function ST(a,u,d){a.lanes|=d;var m=a.alternate;m!==null&&(m.lanes|=d);for(var v=!1,E=a.return;E!==null;)E.childLanes|=d,m=E.alternate,m!==null&&(m.childLanes|=d),E.tag===22&&(a=E.stateNode,a===null||a._visibility&1||(v=!0)),a=E,E=E.return;return a.tag===3?(E=a.stateNode,v&&u!==null&&(v=31-wt(d),a=E.hiddenUpdates,m=a[v],m===null?a[v]=[u]:m.push(u),u.lane=d|536870912),E):null}function Of(a){if(50<Cu)throw Cu=0,fy=null,Error(r(185));for(var u=a.return;u!==null;)a=u,u=a.return;return a.tag===3?a.stateNode:null}var ba={};function CH(a,u,d,m){this.tag=a,this.key=d,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.refCleanup=this.ref=null,this.pendingProps=u,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=m,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function $n(a,u,d,m){return new CH(a,u,d,m)}function og(a){return a=a.prototype,!(!a||!a.isReactComponent)}function mi(a,u){var d=a.alternate;return d===null?(d=$n(a.tag,u,a.key,a.mode),d.elementType=a.elementType,d.type=a.type,d.stateNode=a.stateNode,d.alternate=a,a.alternate=d):(d.pendingProps=u,d.type=a.type,d.flags=0,d.subtreeFlags=0,d.deletions=null),d.flags=a.flags&65011712,d.childLanes=a.childLanes,d.lanes=a.lanes,d.child=a.child,d.memoizedProps=a.memoizedProps,d.memoizedState=a.memoizedState,d.updateQueue=a.updateQueue,u=a.dependencies,d.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext},d.sibling=a.sibling,d.index=a.index,d.ref=a.ref,d.refCleanup=a.refCleanup,d}function ET(a,u){a.flags&=65011714;var d=a.alternate;return d===null?(a.childLanes=0,a.lanes=u,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=d.childLanes,a.lanes=d.lanes,a.child=d.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=d.memoizedProps,a.memoizedState=d.memoizedState,a.updateQueue=d.updateQueue,a.type=d.type,u=d.dependencies,a.dependencies=u===null?null:{lanes:u.lanes,firstContext:u.firstContext}),a}function jf(a,u,d,m,v,E){var N=0;if(m=a,typeof a=="function")og(a)&&(N=1);else if(typeof a=="string")N=T8(a,d,V.current)?26:a==="html"||a==="head"||a==="body"?27:5;else e:switch(a){case I:return a=$n(31,d,u,v),a.elementType=I,a.lanes=E,a;case b:return ro(d.children,v,E,u);case S:N=8,v|=24;break;case x:return a=$n(12,d,u,v|2),a.elementType=x,a.lanes=E,a;case M:return a=$n(13,d,u,v),a.elementType=M,a.lanes=E,a;case _:return a=$n(19,d,u,v),a.elementType=_,a.lanes=E,a;default:if(typeof a=="object"&&a!==null)switch(a.$$typeof){case C:case k:N=10;break e;case T:N=9;break e;case A:N=11;break e;case R:N=14;break e;case O:N=16,m=null;break e}N=29,d=Error(r(130,a===null?"null":typeof a,"")),m=null}return u=$n(N,d,u,v),u.elementType=a,u.type=m,u.lanes=E,u}function ro(a,u,d,m){return a=$n(7,a,m,u),a.lanes=d,a}function ag(a,u,d){return a=$n(6,a,null,u),a.lanes=d,a}function lg(a,u,d){return u=$n(4,a.children!==null?a.children:[],a.key,u),u.lanes=d,u.stateNode={containerInfo:a.containerInfo,pendingChildren:null,implementation:a.implementation},u}var xa=[],wa=0,Lf=null,Pf=0,ur=[],cr=0,io=null,gi=1,yi="";function so(a,u){xa[wa++]=Pf,xa[wa++]=Lf,Lf=a,Pf=u}function CT(a,u,d){ur[cr++]=gi,ur[cr++]=yi,ur[cr++]=io,io=a;var m=gi;a=yi;var v=32-wt(m)-1;m&=~(1<<v),d+=1;var E=32-wt(u)+v;if(30<E){var N=v-v%5;E=(m&(1<<N)-1).toString(32),m>>=N,v-=N,gi=1<<32-wt(u)+v|d<<v|m,yi=E+a}else gi=1<<E|d<<v|m,yi=a}function ug(a){a.return!==null&&(so(a,1),CT(a,1,0))}function cg(a){for(;a===Lf;)Lf=xa[--wa],xa[wa]=null,Pf=xa[--wa],xa[wa]=null;for(;a===io;)io=ur[--cr],ur[cr]=null,yi=ur[--cr],ur[cr]=null,gi=ur[--cr],ur[cr]=null}var En=null,Tt=null,et=!1,oo=null,Fr=!1,fg=Error(r(519));function ao(a){var u=Error(r(418,""));throw nu(ar(u,a)),fg}function kT(a){var u=a.stateNode,d=a.type,m=a.memoizedProps;switch(u[Ze]=a,u[ht]=m,d){case"dialog":We("cancel",u),We("close",u);break;case"iframe":case"object":case"embed":We("load",u);break;case"video":case"audio":for(d=0;d<Tu.length;d++)We(Tu[d],u);break;case"source":We("error",u);break;case"img":case"image":case"link":We("error",u),We("load",u);break;case"details":We("toggle",u);break;case"input":We("invalid",u),Ef(u,m.value,m.defaultValue,m.checked,m.defaultChecked,m.type,m.name,!0),ua(u);break;case"select":We("invalid",u);break;case"textarea":We("invalid",u),Hk(u,m.value,m.defaultValue,m.children),ua(u)}d=m.children,typeof d!="string"&&typeof d!="number"&&typeof d!="bigint"||u.textContent===""+d||m.suppressHydrationWarning===!0||H2(u.textContent,d)?(m.popover!=null&&(We("beforetoggle",u),We("toggle",u)),m.onScroll!=null&&We("scroll",u),m.onScrollEnd!=null&&We("scrollend",u),m.onClick!=null&&(u.onclick=gd),u=!0):u=!1,u||ao(a)}function TT(a){for(En=a.return;En;)switch(En.tag){case 5:case 13:Fr=!1;return;case 27:case 3:Fr=!0;return;default:En=En.return}}function eu(a){if(a!==En)return!1;if(!et)return TT(a),et=!0,!1;var u=a.tag,d;if((d=u!==3&&u!==27)&&((d=u===5)&&(d=a.type,d=!(d!=="form"&&d!=="button")||Ay(a.type,a.memoizedProps)),d=!d),d&&Tt&&ao(a),TT(a),u===13){if(a=a.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(r(317));e:{for(a=a.nextSibling,u=0;a;){if(a.nodeType===8)if(d=a.data,d==="/$"){if(u===0){Tt=Rr(a.nextSibling);break e}u--}else d!=="$"&&d!=="$!"&&d!=="$?"||u++;a=a.nextSibling}Tt=null}}else u===27?(u=Tt,hs(a.type)?(a=Ry,Ry=null,Tt=a):Tt=u):Tt=En?Rr(a.stateNode.nextSibling):null;return!0}function tu(){Tt=En=null,et=!1}function AT(){var a=oo;return a!==null&&(Pn===null?Pn=a:Pn.push.apply(Pn,a),oo=null),a}function nu(a){oo===null?oo=[a]:oo.push(a)}var dg=K(null),lo=null,vi=null;function Zi(a,u,d){le(dg,u._currentValue),u._currentValue=d}function bi(a){a._currentValue=dg.current,re(dg)}function hg(a,u,d){for(;a!==null;){var m=a.alternate;if((a.childLanes&u)!==u?(a.childLanes|=u,m!==null&&(m.childLanes|=u)):m!==null&&(m.childLanes&u)!==u&&(m.childLanes|=u),a===d)break;a=a.return}}function pg(a,u,d,m){var v=a.child;for(v!==null&&(v.return=a);v!==null;){var E=v.dependencies;if(E!==null){var N=v.child;E=E.firstContext;e:for(;E!==null;){var D=E;E=v;for(var H=0;H<u.length;H++)if(D.context===u[H]){E.lanes|=d,D=E.alternate,D!==null&&(D.lanes|=d),hg(E.return,d,a),m||(N=null);break e}E=D.next}}else if(v.tag===18){if(N=v.return,N===null)throw Error(r(341));N.lanes|=d,E=N.alternate,E!==null&&(E.lanes|=d),hg(N,d,a),N=null}else N=v.child;if(N!==null)N.return=v;else for(N=v;N!==null;){if(N===a){N=null;break}if(v=N.sibling,v!==null){v.return=N.return,N=v;break}N=N.return}v=N}}function ru(a,u,d,m){a=null;for(var v=u,E=!1;v!==null;){if(!E){if((v.flags&524288)!==0)E=!0;else if((v.flags&262144)!==0)break}if(v.tag===10){var N=v.alternate;if(N===null)throw Error(r(387));if(N=N.memoizedProps,N!==null){var D=v.type;Un(v.pendingProps.value,N.value)||(a!==null?a.push(D):a=[D])}}else if(v===ae.current){if(N=v.alternate,N===null)throw Error(r(387));N.memoizedState.memoizedState!==v.memoizedState.memoizedState&&(a!==null?a.push(Du):a=[Du])}v=v.return}a!==null&&pg(u,a,d,m),u.flags|=262144}function Bf(a){for(a=a.firstContext;a!==null;){if(!Un(a.context._currentValue,a.memoizedValue))return!0;a=a.next}return!1}function uo(a){lo=a,vi=null,a=a.dependencies,a!==null&&(a.firstContext=null)}function yn(a){return MT(lo,a)}function If(a,u){return lo===null&&uo(a),MT(a,u)}function MT(a,u){var d=u._currentValue;if(u={context:u,memoizedValue:d,next:null},vi===null){if(a===null)throw Error(r(308));vi=u,a.dependencies={lanes:0,firstContext:u},a.flags|=524288}else vi=vi.next=u;return d}var kH=typeof AbortController<"u"?AbortController:function(){var a=[],u=this.signal={aborted:!1,addEventListener:function(d,m){a.push(m)}};this.abort=function(){u.aborted=!0,a.forEach(function(d){return d()})}},TH=e.unstable_scheduleCallback,AH=e.unstable_NormalPriority,Gt={$$typeof:k,Consumer:null,Provider:null,_currentValue:null,_currentValue2:null,_threadCount:0};function mg(){return{controller:new kH,data:new Map,refCount:0}}function iu(a){a.refCount--,a.refCount===0&&TH(AH,function(){a.controller.abort()})}var su=null,gg=0,Sa=0,Ea=null;function MH(a,u){if(su===null){var d=su=[];gg=0,Sa=vy(),Ea={status:"pending",value:void 0,then:function(m){d.push(m)}}}return gg++,u.then(NT,NT),u}function NT(){if(--gg===0&&su!==null){Ea!==null&&(Ea.status="fulfilled");var a=su;su=null,Sa=0,Ea=null;for(var u=0;u<a.length;u++)(0,a[u])()}}function NH(a,u){var d=[],m={status:"pending",value:null,reason:null,then:function(v){d.push(v)}};return a.then(function(){m.status="fulfilled",m.value=u;for(var v=0;v<d.length;v++)(0,d[v])(u)},function(v){for(m.status="rejected",m.reason=v,v=0;v<d.length;v++)(0,d[v])(void 0)}),m}var _T=j.S;j.S=function(a,u){typeof u=="object"&&u!==null&&typeof u.then=="function"&&MH(a,u),_T!==null&&_T(a,u)};var co=K(null);function yg(){var a=co.current;return a!==null?a:dt.pooledCache}function zf(a,u){u===null?le(co,co.current):le(co,u.pool)}function RT(){var a=yg();return a===null?null:{parent:Gt._currentValue,pool:a}}var ou=Error(r(460)),DT=Error(r(474)),qf=Error(r(542)),vg={then:function(){}};function OT(a){return a=a.status,a==="fulfilled"||a==="rejected"}function Vf(){}function jT(a,u,d){switch(d=a[d],d===void 0?a.push(u):d!==u&&(u.then(Vf,Vf),u=d),u.status){case"fulfilled":return u.value;case"rejected":throw a=u.reason,PT(a),a;default:if(typeof u.status=="string")u.then(Vf,Vf);else{if(a=dt,a!==null&&100<a.shellSuspendCounter)throw Error(r(482));a=u,a.status="pending",a.then(function(m){if(u.status==="pending"){var v=u;v.status="fulfilled",v.value=m}},function(m){if(u.status==="pending"){var v=u;v.status="rejected",v.reason=m}})}switch(u.status){case"fulfilled":return u.value;case"rejected":throw a=u.reason,PT(a),a}throw au=u,ou}}var au=null;function LT(){if(au===null)throw Error(r(459));var a=au;return au=null,a}function PT(a){if(a===ou||a===qf)throw Error(r(483))}var Qi=!1;function bg(a){a.updateQueue={baseState:a.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,lanes:0,hiddenCallbacks:null},callbacks:null}}function xg(a,u){a=a.updateQueue,u.updateQueue===a&&(u.updateQueue={baseState:a.baseState,firstBaseUpdate:a.firstBaseUpdate,lastBaseUpdate:a.lastBaseUpdate,shared:a.shared,callbacks:null})}function Ji(a){return{lane:a,tag:0,payload:null,callback:null,next:null}}function es(a,u,d){var m=a.updateQueue;if(m===null)return null;if(m=m.shared,(nt&2)!==0){var v=m.pending;return v===null?u.next=u:(u.next=v.next,v.next=u),m.pending=u,u=Of(a),ST(a,null,d),u}return Df(a,m,u,d),Of(a)}function lu(a,u,d){if(u=u.updateQueue,u!==null&&(u=u.shared,(d&4194048)!==0)){var m=u.lanes;m&=a.pendingLanes,d|=m,u.lanes=d,he(a,d)}}function wg(a,u){var d=a.updateQueue,m=a.alternate;if(m!==null&&(m=m.updateQueue,d===m)){var v=null,E=null;if(d=d.firstBaseUpdate,d!==null){do{var N={lane:d.lane,tag:d.tag,payload:d.payload,callback:null,next:null};E===null?v=E=N:E=E.next=N,d=d.next}while(d!==null);E===null?v=E=u:E=E.next=u}else v=E=u;d={baseState:m.baseState,firstBaseUpdate:v,lastBaseUpdate:E,shared:m.shared,callbacks:m.callbacks},a.updateQueue=d;return}a=d.lastBaseUpdate,a===null?d.firstBaseUpdate=u:a.next=u,d.lastBaseUpdate=u}var Sg=!1;function uu(){if(Sg){var a=Ea;if(a!==null)throw a}}function cu(a,u,d,m){Sg=!1;var v=a.updateQueue;Qi=!1;var E=v.firstBaseUpdate,N=v.lastBaseUpdate,D=v.shared.pending;if(D!==null){v.shared.pending=null;var H=D,te=H.next;H.next=null,N===null?E=te:N.next=te,N=H;var ce=a.alternate;ce!==null&&(ce=ce.updateQueue,D=ce.lastBaseUpdate,D!==N&&(D===null?ce.firstBaseUpdate=te:D.next=te,ce.lastBaseUpdate=H))}if(E!==null){var de=v.baseState;N=0,ce=te=H=null,D=E;do{var ne=D.lane&-536870913,ie=ne!==D.lane;if(ie?(Qe&ne)===ne:(m&ne)===ne){ne!==0&&ne===Sa&&(Sg=!0),ce!==null&&(ce=ce.next={lane:0,tag:D.tag,payload:D.payload,callback:null,next:null});e:{var Be=a,Oe=D;ne=u;var lt=d;switch(Oe.tag){case 1:if(Be=Oe.payload,typeof Be=="function"){de=Be.call(lt,de,ne);break e}de=Be;break e;case 3:Be.flags=Be.flags&-65537|128;case 0:if(Be=Oe.payload,ne=typeof Be=="function"?Be.call(lt,de,ne):Be,ne==null)break e;de=h({},de,ne);break e;case 2:Qi=!0}}ne=D.callback,ne!==null&&(a.flags|=64,ie&&(a.flags|=8192),ie=v.callbacks,ie===null?v.callbacks=[ne]:ie.push(ne))}else ie={lane:ne,tag:D.tag,payload:D.payload,callback:D.callback,next:null},ce===null?(te=ce=ie,H=de):ce=ce.next=ie,N|=ne;if(D=D.next,D===null){if(D=v.shared.pending,D===null)break;ie=D,D=ie.next,ie.next=null,v.lastBaseUpdate=ie,v.shared.pending=null}}while(!0);ce===null&&(H=de),v.baseState=H,v.firstBaseUpdate=te,v.lastBaseUpdate=ce,E===null&&(v.shared.lanes=0),us|=N,a.lanes=N,a.memoizedState=de}}function BT(a,u){if(typeof a!="function")throw Error(r(191,a));a.call(u)}function IT(a,u){var d=a.callbacks;if(d!==null)for(a.callbacks=null,a=0;a<d.length;a++)BT(d[a],u)}var Ca=K(null),Hf=K(0);function zT(a,u){a=Ti,le(Hf,a),le(Ca,u),Ti=a|u.baseLanes}function Eg(){le(Hf,Ti),le(Ca,Ca.current)}function Cg(){Ti=Hf.current,re(Ca),re(Hf)}var ts=0,Ge=null,ot=null,It=null,Ff=!1,ka=!1,fo=!1,Uf=0,fu=0,Ta=null,_H=0;function Dt(){throw Error(r(321))}function kg(a,u){if(u===null)return!1;for(var d=0;d<u.length&&d<a.length;d++)if(!Un(a[d],u[d]))return!1;return!0}function Tg(a,u,d,m,v,E){return ts=E,Ge=u,u.memoizedState=null,u.updateQueue=null,u.lanes=0,j.H=a===null||a.memoizedState===null?SA:EA,fo=!1,E=d(m,v),fo=!1,ka&&(E=VT(u,d,m,v)),qT(a),E}function qT(a){j.H=Xf;var u=ot!==null&&ot.next!==null;if(ts=0,It=ot=Ge=null,Ff=!1,fu=0,Ta=null,u)throw Error(r(300));a===null||Xt||(a=a.dependencies,a!==null&&Bf(a)&&(Xt=!0))}function VT(a,u,d,m){Ge=a;var v=0;do{if(ka&&(Ta=null),fu=0,ka=!1,25<=v)throw Error(r(301));if(v+=1,It=ot=null,a.updateQueue!=null){var E=a.updateQueue;E.lastEffect=null,E.events=null,E.stores=null,E.memoCache!=null&&(E.memoCache.index=0)}j.H=BH,E=u(d,m)}while(ka);return E}function RH(){var a=j.H,u=a.useState()[0];return u=typeof u.then=="function"?du(u):u,a=a.useState()[0],(ot!==null?ot.memoizedState:null)!==a&&(Ge.flags|=1024),u}function Ag(){var a=Uf!==0;return Uf=0,a}function Mg(a,u,d){u.updateQueue=a.updateQueue,u.flags&=-2053,a.lanes&=~d}function Ng(a){if(Ff){for(a=a.memoizedState;a!==null;){var u=a.queue;u!==null&&(u.pending=null),a=a.next}Ff=!1}ts=0,It=ot=Ge=null,ka=!1,fu=Uf=0,Ta=null}function jn(){var a={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return It===null?Ge.memoizedState=It=a:It=It.next=a,It}function zt(){if(ot===null){var a=Ge.alternate;a=a!==null?a.memoizedState:null}else a=ot.next;var u=It===null?Ge.memoizedState:It.next;if(u!==null)It=u,ot=a;else{if(a===null)throw Ge.alternate===null?Error(r(467)):Error(r(310));ot=a,a={memoizedState:ot.memoizedState,baseState:ot.baseState,baseQueue:ot.baseQueue,queue:ot.queue,next:null},It===null?Ge.memoizedState=It=a:It=It.next=a}return It}function _g(){return{lastEffect:null,events:null,stores:null,memoCache:null}}function du(a){var u=fu;return fu+=1,Ta===null&&(Ta=[]),a=jT(Ta,a,u),u=Ge,(It===null?u.memoizedState:It.next)===null&&(u=u.alternate,j.H=u===null||u.memoizedState===null?SA:EA),a}function $f(a){if(a!==null&&typeof a=="object"){if(typeof a.then=="function")return du(a);if(a.$$typeof===k)return yn(a)}throw Error(r(438,String(a)))}function Rg(a){var u=null,d=Ge.updateQueue;if(d!==null&&(u=d.memoCache),u==null){var m=Ge.alternate;m!==null&&(m=m.updateQueue,m!==null&&(m=m.memoCache,m!=null&&(u={data:m.data.map(function(v){return v.slice()}),index:0})))}if(u==null&&(u={data:[],index:0}),d===null&&(d=_g(),Ge.updateQueue=d),d.memoCache=u,d=u.data[u.index],d===void 0)for(d=u.data[u.index]=Array(a),m=0;m<a;m++)d[m]=$;return u.index++,d}function xi(a,u){return typeof u=="function"?u(a):u}function Gf(a){var u=zt();return Dg(u,ot,a)}function Dg(a,u,d){var m=a.queue;if(m===null)throw Error(r(311));m.lastRenderedReducer=d;var v=a.baseQueue,E=m.pending;if(E!==null){if(v!==null){var N=v.next;v.next=E.next,E.next=N}u.baseQueue=v=E,m.pending=null}if(E=a.baseState,v===null)a.memoizedState=E;else{u=v.next;var D=N=null,H=null,te=u,ce=!1;do{var de=te.lane&-536870913;if(de!==te.lane?(Qe&de)===de:(ts&de)===de){var ne=te.revertLane;if(ne===0)H!==null&&(H=H.next={lane:0,revertLane:0,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null}),de===Sa&&(ce=!0);else if((ts&ne)===ne){te=te.next,ne===Sa&&(ce=!0);continue}else de={lane:0,revertLane:te.revertLane,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},H===null?(D=H=de,N=E):H=H.next=de,Ge.lanes|=ne,us|=ne;de=te.action,fo&&d(E,de),E=te.hasEagerState?te.eagerState:d(E,de)}else ne={lane:de,revertLane:te.revertLane,action:te.action,hasEagerState:te.hasEagerState,eagerState:te.eagerState,next:null},H===null?(D=H=ne,N=E):H=H.next=ne,Ge.lanes|=de,us|=de;te=te.next}while(te!==null&&te!==u);if(H===null?N=E:H.next=D,!Un(E,a.memoizedState)&&(Xt=!0,ce&&(d=Ea,d!==null)))throw d;a.memoizedState=E,a.baseState=N,a.baseQueue=H,m.lastRenderedState=E}return v===null&&(m.lanes=0),[a.memoizedState,m.dispatch]}function Og(a){var u=zt(),d=u.queue;if(d===null)throw Error(r(311));d.lastRenderedReducer=a;var m=d.dispatch,v=d.pending,E=u.memoizedState;if(v!==null){d.pending=null;var N=v=v.next;do E=a(E,N.action),N=N.next;while(N!==v);Un(E,u.memoizedState)||(Xt=!0),u.memoizedState=E,u.baseQueue===null&&(u.baseState=E),d.lastRenderedState=E}return[E,m]}function HT(a,u,d){var m=Ge,v=zt(),E=et;if(E){if(d===void 0)throw Error(r(407));d=d()}else d=u();var N=!Un((ot||v).memoizedState,d);N&&(v.memoizedState=d,Xt=!0),v=v.queue;var D=$T.bind(null,m,v,a);if(hu(2048,8,D,[a]),v.getSnapshot!==u||N||It!==null&&It.memoizedState.tag&1){if(m.flags|=2048,Aa(9,Kf(),UT.bind(null,m,v,d,u),null),dt===null)throw Error(r(349));E||(ts&124)!==0||FT(m,u,d)}return d}function FT(a,u,d){a.flags|=16384,a={getSnapshot:u,value:d},u=Ge.updateQueue,u===null?(u=_g(),Ge.updateQueue=u,u.stores=[a]):(d=u.stores,d===null?u.stores=[a]:d.push(a))}function UT(a,u,d,m){u.value=d,u.getSnapshot=m,GT(u)&&KT(a)}function $T(a,u,d){return d(function(){GT(u)&&KT(a)})}function GT(a){var u=a.getSnapshot;a=a.value;try{var d=u();return!Un(a,d)}catch{return!0}}function KT(a){var u=va(a,2);u!==null&&Xn(u,a,2)}function jg(a){var u=jn();if(typeof a=="function"){var d=a;if(a=d(),fo){Pt(!0);try{d()}finally{Pt(!1)}}}return u.memoizedState=u.baseState=a,u.queue={pending:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:a},u}function YT(a,u,d,m){return a.baseState=d,Dg(a,ot,typeof m=="function"?m:xi)}function DH(a,u,d,m,v){if(Wf(a))throw Error(r(485));if(a=u.action,a!==null){var E={payload:v,action:a,next:null,isTransition:!0,status:"pending",value:null,reason:null,listeners:[],then:function(N){E.listeners.push(N)}};j.T!==null?d(!0):E.isTransition=!1,m(E),d=u.pending,d===null?(E.next=u.pending=E,WT(u,E)):(E.next=d.next,u.pending=d.next=E)}}function WT(a,u){var d=u.action,m=u.payload,v=a.state;if(u.isTransition){var E=j.T,N={};j.T=N;try{var D=d(v,m),H=j.S;H!==null&&H(N,D),XT(a,u,D)}catch(te){Lg(a,u,te)}finally{j.T=E}}else try{E=d(v,m),XT(a,u,E)}catch(te){Lg(a,u,te)}}function XT(a,u,d){d!==null&&typeof d=="object"&&typeof d.then=="function"?d.then(function(m){ZT(a,u,m)},function(m){return Lg(a,u,m)}):ZT(a,u,d)}function ZT(a,u,d){u.status="fulfilled",u.value=d,QT(u),a.state=d,u=a.pending,u!==null&&(d=u.next,d===u?a.pending=null:(d=d.next,u.next=d,WT(a,d)))}function Lg(a,u,d){var m=a.pending;if(a.pending=null,m!==null){m=m.next;do u.status="rejected",u.reason=d,QT(u),u=u.next;while(u!==m)}a.action=null}function QT(a){a=a.listeners;for(var u=0;u<a.length;u++)(0,a[u])()}function JT(a,u){return u}function eA(a,u){if(et){var d=dt.formState;if(d!==null){e:{var m=Ge;if(et){if(Tt){t:{for(var v=Tt,E=Fr;v.nodeType!==8;){if(!E){v=null;break t}if(v=Rr(v.nextSibling),v===null){v=null;break t}}E=v.data,v=E==="F!"||E==="F"?v:null}if(v){Tt=Rr(v.nextSibling),m=v.data==="F!";break e}}ao(m)}m=!1}m&&(u=d[0])}}return d=jn(),d.memoizedState=d.baseState=u,m={pending:null,lanes:0,dispatch:null,lastRenderedReducer:JT,lastRenderedState:u},d.queue=m,d=bA.bind(null,Ge,m),m.dispatch=d,m=jg(!1),E=qg.bind(null,Ge,!1,m.queue),m=jn(),v={state:u,dispatch:null,action:a,pending:null},m.queue=v,d=DH.bind(null,Ge,v,E,d),v.dispatch=d,m.memoizedState=a,[u,d,!1]}function tA(a){var u=zt();return nA(u,ot,a)}function nA(a,u,d){if(u=Dg(a,u,JT)[0],a=Gf(xi)[0],typeof u=="object"&&u!==null&&typeof u.then=="function")try{var m=du(u)}catch(N){throw N===ou?qf:N}else m=u;u=zt();var v=u.queue,E=v.dispatch;return d!==u.memoizedState&&(Ge.flags|=2048,Aa(9,Kf(),OH.bind(null,v,d),null)),[m,E,a]}function OH(a,u){a.action=u}function rA(a){var u=zt(),d=ot;if(d!==null)return nA(u,d,a);zt(),u=u.memoizedState,d=zt();var m=d.queue.dispatch;return d.memoizedState=a,[u,m,!1]}function Aa(a,u,d,m){return a={tag:a,create:d,deps:m,inst:u,next:null},u=Ge.updateQueue,u===null&&(u=_g(),Ge.updateQueue=u),d=u.lastEffect,d===null?u.lastEffect=a.next=a:(m=d.next,d.next=a,a.next=m,u.lastEffect=a),a}function Kf(){return{destroy:void 0,resource:void 0}}function iA(){return zt().memoizedState}function Yf(a,u,d,m){var v=jn();m=m===void 0?null:m,Ge.flags|=a,v.memoizedState=Aa(1|u,Kf(),d,m)}function hu(a,u,d,m){var v=zt();m=m===void 0?null:m;var E=v.memoizedState.inst;ot!==null&&m!==null&&kg(m,ot.memoizedState.deps)?v.memoizedState=Aa(u,E,d,m):(Ge.flags|=a,v.memoizedState=Aa(1|u,E,d,m))}function sA(a,u){Yf(8390656,8,a,u)}function oA(a,u){hu(2048,8,a,u)}function aA(a,u){return hu(4,2,a,u)}function lA(a,u){return hu(4,4,a,u)}function uA(a,u){if(typeof u=="function"){a=a();var d=u(a);return function(){typeof d=="function"?d():u(null)}}if(u!=null)return a=a(),u.current=a,function(){u.current=null}}function cA(a,u,d){d=d!=null?d.concat([a]):null,hu(4,4,uA.bind(null,u,a),d)}function Pg(){}function fA(a,u){var d=zt();u=u===void 0?null:u;var m=d.memoizedState;return u!==null&&kg(u,m[1])?m[0]:(d.memoizedState=[a,u],a)}function dA(a,u){var d=zt();u=u===void 0?null:u;var m=d.memoizedState;if(u!==null&&kg(u,m[1]))return m[0];if(m=a(),fo){Pt(!0);try{a()}finally{Pt(!1)}}return d.memoizedState=[m,u],m}function Bg(a,u,d){return d===void 0||(ts&1073741824)!==0?a.memoizedState=u:(a.memoizedState=d,a=m2(),Ge.lanes|=a,us|=a,d)}function hA(a,u,d,m){return Un(d,u)?d:Ca.current!==null?(a=Bg(a,d,m),Un(a,u)||(Xt=!0),a):(ts&42)===0?(Xt=!0,a.memoizedState=d):(a=m2(),Ge.lanes|=a,us|=a,u)}function pA(a,u,d,m,v){var E=z.p;z.p=E!==0&&8>E?E:8;var N=j.T,D={};j.T=D,qg(a,!1,u,d);try{var H=v(),te=j.S;if(te!==null&&te(D,H),H!==null&&typeof H=="object"&&typeof H.then=="function"){var ce=NH(H,m);pu(a,u,ce,Wn(a))}else pu(a,u,m,Wn(a))}catch(de){pu(a,u,{then:function(){},status:"rejected",reason:de},Wn())}finally{z.p=E,j.T=N}}function jH(){}function Ig(a,u,d,m){if(a.tag!==5)throw Error(r(476));var v=mA(a).queue;pA(a,v,u,W,d===null?jH:function(){return gA(a),d(m)})}function mA(a){var u=a.memoizedState;if(u!==null)return u;u={memoizedState:W,baseState:W,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:W},next:null};var d={};return u.next={memoizedState:d,baseState:d,baseQueue:null,queue:{pending:null,lanes:0,dispatch:null,lastRenderedReducer:xi,lastRenderedState:d},next:null},a.memoizedState=u,a=a.alternate,a!==null&&(a.memoizedState=u),u}function gA(a){var u=mA(a).next.queue;pu(a,u,{},Wn())}function zg(){return yn(Du)}function yA(){return zt().memoizedState}function vA(){return zt().memoizedState}function LH(a){for(var u=a.return;u!==null;){switch(u.tag){case 24:case 3:var d=Wn();a=Ji(d);var m=es(u,a,d);m!==null&&(Xn(m,u,d),lu(m,u,d)),u={cache:mg()},a.payload=u;return}u=u.return}}function PH(a,u,d){var m=Wn();d={lane:m,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null},Wf(a)?xA(u,d):(d=sg(a,u,d,m),d!==null&&(Xn(d,a,m),wA(d,u,m)))}function bA(a,u,d){var m=Wn();pu(a,u,d,m)}function pu(a,u,d,m){var v={lane:m,revertLane:0,action:d,hasEagerState:!1,eagerState:null,next:null};if(Wf(a))xA(u,v);else{var E=a.alternate;if(a.lanes===0&&(E===null||E.lanes===0)&&(E=u.lastRenderedReducer,E!==null))try{var N=u.lastRenderedState,D=E(N,d);if(v.hasEagerState=!0,v.eagerState=D,Un(D,N))return Df(a,u,v,0),dt===null&&Rf(),!1}catch{}finally{}if(d=sg(a,u,v,m),d!==null)return Xn(d,a,m),wA(d,u,m),!0}return!1}function qg(a,u,d,m){if(m={lane:2,revertLane:vy(),action:m,hasEagerState:!1,eagerState:null,next:null},Wf(a)){if(u)throw Error(r(479))}else u=sg(a,d,m,2),u!==null&&Xn(u,a,2)}function Wf(a){var u=a.alternate;return a===Ge||u!==null&&u===Ge}function xA(a,u){ka=Ff=!0;var d=a.pending;d===null?u.next=u:(u.next=d.next,d.next=u),a.pending=u}function wA(a,u,d){if((d&4194048)!==0){var m=u.lanes;m&=a.pendingLanes,d|=m,u.lanes=d,he(a,d)}}var Xf={readContext:yn,use:$f,useCallback:Dt,useContext:Dt,useEffect:Dt,useImperativeHandle:Dt,useLayoutEffect:Dt,useInsertionEffect:Dt,useMemo:Dt,useReducer:Dt,useRef:Dt,useState:Dt,useDebugValue:Dt,useDeferredValue:Dt,useTransition:Dt,useSyncExternalStore:Dt,useId:Dt,useHostTransitionStatus:Dt,useFormState:Dt,useActionState:Dt,useOptimistic:Dt,useMemoCache:Dt,useCacheRefresh:Dt},SA={readContext:yn,use:$f,useCallback:function(a,u){return jn().memoizedState=[a,u===void 0?null:u],a},useContext:yn,useEffect:sA,useImperativeHandle:function(a,u,d){d=d!=null?d.concat([a]):null,Yf(4194308,4,uA.bind(null,u,a),d)},useLayoutEffect:function(a,u){return Yf(4194308,4,a,u)},useInsertionEffect:function(a,u){Yf(4,2,a,u)},useMemo:function(a,u){var d=jn();u=u===void 0?null:u;var m=a();if(fo){Pt(!0);try{a()}finally{Pt(!1)}}return d.memoizedState=[m,u],m},useReducer:function(a,u,d){var m=jn();if(d!==void 0){var v=d(u);if(fo){Pt(!0);try{d(u)}finally{Pt(!1)}}}else v=u;return m.memoizedState=m.baseState=v,a={pending:null,lanes:0,dispatch:null,lastRenderedReducer:a,lastRenderedState:v},m.queue=a,a=a.dispatch=PH.bind(null,Ge,a),[m.memoizedState,a]},useRef:function(a){var u=jn();return a={current:a},u.memoizedState=a},useState:function(a){a=jg(a);var u=a.queue,d=bA.bind(null,Ge,u);return u.dispatch=d,[a.memoizedState,d]},useDebugValue:Pg,useDeferredValue:function(a,u){var d=jn();return Bg(d,a,u)},useTransition:function(){var a=jg(!1);return a=pA.bind(null,Ge,a.queue,!0,!1),jn().memoizedState=a,[!1,a]},useSyncExternalStore:function(a,u,d){var m=Ge,v=jn();if(et){if(d===void 0)throw Error(r(407));d=d()}else{if(d=u(),dt===null)throw Error(r(349));(Qe&124)!==0||FT(m,u,d)}v.memoizedState=d;var E={value:d,getSnapshot:u};return v.queue=E,sA($T.bind(null,m,E,a),[a]),m.flags|=2048,Aa(9,Kf(),UT.bind(null,m,E,d,u),null),d},useId:function(){var a=jn(),u=dt.identifierPrefix;if(et){var d=yi,m=gi;d=(m&~(1<<32-wt(m)-1)).toString(32)+d,u="«"+u+"R"+d,d=Uf++,0<d&&(u+="H"+d.toString(32)),u+="»"}else d=_H++,u="«"+u+"r"+d.toString(32)+"»";return a.memoizedState=u},useHostTransitionStatus:zg,useFormState:eA,useActionState:eA,useOptimistic:function(a){var u=jn();u.memoizedState=u.baseState=a;var d={pending:null,lanes:0,dispatch:null,lastRenderedReducer:null,lastRenderedState:null};return u.queue=d,u=qg.bind(null,Ge,!0,d),d.dispatch=u,[a,u]},useMemoCache:Rg,useCacheRefresh:function(){return jn().memoizedState=LH.bind(null,Ge)}},EA={readContext:yn,use:$f,useCallback:fA,useContext:yn,useEffect:oA,useImperativeHandle:cA,useInsertionEffect:aA,useLayoutEffect:lA,useMemo:dA,useReducer:Gf,useRef:iA,useState:function(){return Gf(xi)},useDebugValue:Pg,useDeferredValue:function(a,u){var d=zt();return hA(d,ot.memoizedState,a,u)},useTransition:function(){var a=Gf(xi)[0],u=zt().memoizedState;return[typeof a=="boolean"?a:du(a),u]},useSyncExternalStore:HT,useId:yA,useHostTransitionStatus:zg,useFormState:tA,useActionState:tA,useOptimistic:function(a,u){var d=zt();return YT(d,ot,a,u)},useMemoCache:Rg,useCacheRefresh:vA},BH={readContext:yn,use:$f,useCallback:fA,useContext:yn,useEffect:oA,useImperativeHandle:cA,useInsertionEffect:aA,useLayoutEffect:lA,useMemo:dA,useReducer:Og,useRef:iA,useState:function(){return Og(xi)},useDebugValue:Pg,useDeferredValue:function(a,u){var d=zt();return ot===null?Bg(d,a,u):hA(d,ot.memoizedState,a,u)},useTransition:function(){var a=Og(xi)[0],u=zt().memoizedState;return[typeof a=="boolean"?a:du(a),u]},useSyncExternalStore:HT,useId:yA,useHostTransitionStatus:zg,useFormState:rA,useActionState:rA,useOptimistic:function(a,u){var d=zt();return ot!==null?YT(d,ot,a,u):(d.baseState=a,[a,d.queue.dispatch])},useMemoCache:Rg,useCacheRefresh:vA},Ma=null,mu=0;function Zf(a){var u=mu;return mu+=1,Ma===null&&(Ma=[]),jT(Ma,a,u)}function gu(a,u){u=u.props.ref,a.ref=u!==void 0?u:null}function Qf(a,u){throw u.$$typeof===p?Error(r(525)):(a=Object.prototype.toString.call(u),Error(r(31,a==="[object Object]"?"object with keys {"+Object.keys(u).join(", ")+"}":a)))}function CA(a){var u=a._init;return u(a._payload)}function kA(a){function u(Z,Y){if(a){var ee=Z.deletions;ee===null?(Z.deletions=[Y],Z.flags|=16):ee.push(Y)}}function d(Z,Y){if(!a)return null;for(;Y!==null;)u(Z,Y),Y=Y.sibling;return null}function m(Z){for(var Y=new Map;Z!==null;)Z.key!==null?Y.set(Z.key,Z):Y.set(Z.index,Z),Z=Z.sibling;return Y}function v(Z,Y){return Z=mi(Z,Y),Z.index=0,Z.sibling=null,Z}function E(Z,Y,ee){return Z.index=ee,a?(ee=Z.alternate,ee!==null?(ee=ee.index,ee<Y?(Z.flags|=67108866,Y):ee):(Z.flags|=67108866,Y)):(Z.flags|=1048576,Y)}function N(Z){return a&&Z.alternate===null&&(Z.flags|=67108866),Z}function D(Z,Y,ee,fe){return Y===null||Y.tag!==6?(Y=ag(ee,Z.mode,fe),Y.return=Z,Y):(Y=v(Y,ee),Y.return=Z,Y)}function H(Z,Y,ee,fe){var Ee=ee.type;return Ee===b?ce(Z,Y,ee.props.children,fe,ee.key):Y!==null&&(Y.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===O&&CA(Ee)===Y.type)?(Y=v(Y,ee.props),gu(Y,ee),Y.return=Z,Y):(Y=jf(ee.type,ee.key,ee.props,null,Z.mode,fe),gu(Y,ee),Y.return=Z,Y)}function te(Z,Y,ee,fe){return Y===null||Y.tag!==4||Y.stateNode.containerInfo!==ee.containerInfo||Y.stateNode.implementation!==ee.implementation?(Y=lg(ee,Z.mode,fe),Y.return=Z,Y):(Y=v(Y,ee.children||[]),Y.return=Z,Y)}function ce(Z,Y,ee,fe,Ee){return Y===null||Y.tag!==7?(Y=ro(ee,Z.mode,fe,Ee),Y.return=Z,Y):(Y=v(Y,ee),Y.return=Z,Y)}function de(Z,Y,ee){if(typeof Y=="string"&&Y!==""||typeof Y=="number"||typeof Y=="bigint")return Y=ag(""+Y,Z.mode,ee),Y.return=Z,Y;if(typeof Y=="object"&&Y!==null){switch(Y.$$typeof){case g:return ee=jf(Y.type,Y.key,Y.props,null,Z.mode,ee),gu(ee,Y),ee.return=Z,ee;case y:return Y=lg(Y,Z.mode,ee),Y.return=Z,Y;case O:var fe=Y._init;return Y=fe(Y._payload),de(Z,Y,ee)}if(F(Y)||U(Y))return Y=ro(Y,Z.mode,ee,null),Y.return=Z,Y;if(typeof Y.then=="function")return de(Z,Zf(Y),ee);if(Y.$$typeof===k)return de(Z,If(Z,Y),ee);Qf(Z,Y)}return null}function ne(Z,Y,ee,fe){var Ee=Y!==null?Y.key:null;if(typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint")return Ee!==null?null:D(Z,Y,""+ee,fe);if(typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case g:return ee.key===Ee?H(Z,Y,ee,fe):null;case y:return ee.key===Ee?te(Z,Y,ee,fe):null;case O:return Ee=ee._init,ee=Ee(ee._payload),ne(Z,Y,ee,fe)}if(F(ee)||U(ee))return Ee!==null?null:ce(Z,Y,ee,fe,null);if(typeof ee.then=="function")return ne(Z,Y,Zf(ee),fe);if(ee.$$typeof===k)return ne(Z,Y,If(Z,ee),fe);Qf(Z,ee)}return null}function ie(Z,Y,ee,fe,Ee){if(typeof fe=="string"&&fe!==""||typeof fe=="number"||typeof fe=="bigint")return Z=Z.get(ee)||null,D(Y,Z,""+fe,Ee);if(typeof fe=="object"&&fe!==null){switch(fe.$$typeof){case g:return Z=Z.get(fe.key===null?ee:fe.key)||null,H(Y,Z,fe,Ee);case y:return Z=Z.get(fe.key===null?ee:fe.key)||null,te(Y,Z,fe,Ee);case O:var Ke=fe._init;return fe=Ke(fe._payload),ie(Z,Y,ee,fe,Ee)}if(F(fe)||U(fe))return Z=Z.get(ee)||null,ce(Y,Z,fe,Ee,null);if(typeof fe.then=="function")return ie(Z,Y,ee,Zf(fe),Ee);if(fe.$$typeof===k)return ie(Z,Y,ee,If(Y,fe),Ee);Qf(Y,fe)}return null}function Be(Z,Y,ee,fe){for(var Ee=null,Ke=null,Ne=Y,Le=Y=0,Qt=null;Ne!==null&&Le<ee.length;Le++){Ne.index>Le?(Qt=Ne,Ne=null):Qt=Ne.sibling;var Je=ne(Z,Ne,ee[Le],fe);if(Je===null){Ne===null&&(Ne=Qt);break}a&&Ne&&Je.alternate===null&&u(Z,Ne),Y=E(Je,Y,Le),Ke===null?Ee=Je:Ke.sibling=Je,Ke=Je,Ne=Qt}if(Le===ee.length)return d(Z,Ne),et&&so(Z,Le),Ee;if(Ne===null){for(;Le<ee.length;Le++)Ne=de(Z,ee[Le],fe),Ne!==null&&(Y=E(Ne,Y,Le),Ke===null?Ee=Ne:Ke.sibling=Ne,Ke=Ne);return et&&so(Z,Le),Ee}for(Ne=m(Ne);Le<ee.length;Le++)Qt=ie(Ne,Z,Le,ee[Le],fe),Qt!==null&&(a&&Qt.alternate!==null&&Ne.delete(Qt.key===null?Le:Qt.key),Y=E(Qt,Y,Le),Ke===null?Ee=Qt:Ke.sibling=Qt,Ke=Qt);return a&&Ne.forEach(function(vs){return u(Z,vs)}),et&&so(Z,Le),Ee}function Oe(Z,Y,ee,fe){if(ee==null)throw Error(r(151));for(var Ee=null,Ke=null,Ne=Y,Le=Y=0,Qt=null,Je=ee.next();Ne!==null&&!Je.done;Le++,Je=ee.next()){Ne.index>Le?(Qt=Ne,Ne=null):Qt=Ne.sibling;var vs=ne(Z,Ne,Je.value,fe);if(vs===null){Ne===null&&(Ne=Qt);break}a&&Ne&&vs.alternate===null&&u(Z,Ne),Y=E(vs,Y,Le),Ke===null?Ee=vs:Ke.sibling=vs,Ke=vs,Ne=Qt}if(Je.done)return d(Z,Ne),et&&so(Z,Le),Ee;if(Ne===null){for(;!Je.done;Le++,Je=ee.next())Je=de(Z,Je.value,fe),Je!==null&&(Y=E(Je,Y,Le),Ke===null?Ee=Je:Ke.sibling=Je,Ke=Je);return et&&so(Z,Le),Ee}for(Ne=m(Ne);!Je.done;Le++,Je=ee.next())Je=ie(Ne,Z,Le,Je.value,fe),Je!==null&&(a&&Je.alternate!==null&&Ne.delete(Je.key===null?Le:Je.key),Y=E(Je,Y,Le),Ke===null?Ee=Je:Ke.sibling=Je,Ke=Je);return a&&Ne.forEach(function(I8){return u(Z,I8)}),et&&so(Z,Le),Ee}function lt(Z,Y,ee,fe){if(typeof ee=="object"&&ee!==null&&ee.type===b&&ee.key===null&&(ee=ee.props.children),typeof ee=="object"&&ee!==null){switch(ee.$$typeof){case g:e:{for(var Ee=ee.key;Y!==null;){if(Y.key===Ee){if(Ee=ee.type,Ee===b){if(Y.tag===7){d(Z,Y.sibling),fe=v(Y,ee.props.children),fe.return=Z,Z=fe;break e}}else if(Y.elementType===Ee||typeof Ee=="object"&&Ee!==null&&Ee.$$typeof===O&&CA(Ee)===Y.type){d(Z,Y.sibling),fe=v(Y,ee.props),gu(fe,ee),fe.return=Z,Z=fe;break e}d(Z,Y);break}else u(Z,Y);Y=Y.sibling}ee.type===b?(fe=ro(ee.props.children,Z.mode,fe,ee.key),fe.return=Z,Z=fe):(fe=jf(ee.type,ee.key,ee.props,null,Z.mode,fe),gu(fe,ee),fe.return=Z,Z=fe)}return N(Z);case y:e:{for(Ee=ee.key;Y!==null;){if(Y.key===Ee)if(Y.tag===4&&Y.stateNode.containerInfo===ee.containerInfo&&Y.stateNode.implementation===ee.implementation){d(Z,Y.sibling),fe=v(Y,ee.children||[]),fe.return=Z,Z=fe;break e}else{d(Z,Y);break}else u(Z,Y);Y=Y.sibling}fe=lg(ee,Z.mode,fe),fe.return=Z,Z=fe}return N(Z);case O:return Ee=ee._init,ee=Ee(ee._payload),lt(Z,Y,ee,fe)}if(F(ee))return Be(Z,Y,ee,fe);if(U(ee)){if(Ee=U(ee),typeof Ee!="function")throw Error(r(150));return ee=Ee.call(ee),Oe(Z,Y,ee,fe)}if(typeof ee.then=="function")return lt(Z,Y,Zf(ee),fe);if(ee.$$typeof===k)return lt(Z,Y,If(Z,ee),fe);Qf(Z,ee)}return typeof ee=="string"&&ee!==""||typeof ee=="number"||typeof ee=="bigint"?(ee=""+ee,Y!==null&&Y.tag===6?(d(Z,Y.sibling),fe=v(Y,ee),fe.return=Z,Z=fe):(d(Z,Y),fe=ag(ee,Z.mode,fe),fe.return=Z,Z=fe),N(Z)):d(Z,Y)}return function(Z,Y,ee,fe){try{mu=0;var Ee=lt(Z,Y,ee,fe);return Ma=null,Ee}catch(Ne){if(Ne===ou||Ne===qf)throw Ne;var Ke=$n(29,Ne,null,Z.mode);return Ke.lanes=fe,Ke.return=Z,Ke}finally{}}}var Na=kA(!0),TA=kA(!1),fr=K(null),Ur=null;function ns(a){var u=a.alternate;le(Kt,Kt.current&1),le(fr,a),Ur===null&&(u===null||Ca.current!==null||u.memoizedState!==null)&&(Ur=a)}function AA(a){if(a.tag===22){if(le(Kt,Kt.current),le(fr,a),Ur===null){var u=a.alternate;u!==null&&u.memoizedState!==null&&(Ur=a)}}else rs()}function rs(){le(Kt,Kt.current),le(fr,fr.current)}function wi(a){re(fr),Ur===a&&(Ur=null),re(Kt)}var Kt=K(0);function Jf(a){for(var u=a;u!==null;){if(u.tag===13){var d=u.memoizedState;if(d!==null&&(d=d.dehydrated,d===null||d.data==="$?"||_y(d)))return u}else if(u.tag===19&&u.memoizedProps.revealOrder!==void 0){if((u.flags&128)!==0)return u}else if(u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return null;u=u.return}u.sibling.return=u.return,u=u.sibling}return null}function Vg(a,u,d,m){u=a.memoizedState,d=d(m,u),d=d==null?u:h({},u,d),a.memoizedState=d,a.lanes===0&&(a.updateQueue.baseState=d)}var Hg={enqueueSetState:function(a,u,d){a=a._reactInternals;var m=Wn(),v=Ji(m);v.payload=u,d!=null&&(v.callback=d),u=es(a,v,m),u!==null&&(Xn(u,a,m),lu(u,a,m))},enqueueReplaceState:function(a,u,d){a=a._reactInternals;var m=Wn(),v=Ji(m);v.tag=1,v.payload=u,d!=null&&(v.callback=d),u=es(a,v,m),u!==null&&(Xn(u,a,m),lu(u,a,m))},enqueueForceUpdate:function(a,u){a=a._reactInternals;var d=Wn(),m=Ji(d);m.tag=2,u!=null&&(m.callback=u),u=es(a,m,d),u!==null&&(Xn(u,a,d),lu(u,a,d))}};function MA(a,u,d,m,v,E,N){return a=a.stateNode,typeof a.shouldComponentUpdate=="function"?a.shouldComponentUpdate(m,E,N):u.prototype&&u.prototype.isPureReactComponent?!Ql(d,m)||!Ql(v,E):!0}function NA(a,u,d,m){a=u.state,typeof u.componentWillReceiveProps=="function"&&u.componentWillReceiveProps(d,m),typeof u.UNSAFE_componentWillReceiveProps=="function"&&u.UNSAFE_componentWillReceiveProps(d,m),u.state!==a&&Hg.enqueueReplaceState(u,u.state,null)}function ho(a,u){var d=u;if("ref"in u){d={};for(var m in u)m!=="ref"&&(d[m]=u[m])}if(a=a.defaultProps){d===u&&(d=h({},d));for(var v in a)d[v]===void 0&&(d[v]=a[v])}return d}var ed=typeof reportError=="function"?reportError:function(a){if(typeof window=="object"&&typeof window.ErrorEvent=="function"){var u=new window.ErrorEvent("error",{bubbles:!0,cancelable:!0,message:typeof a=="object"&&a!==null&&typeof a.message=="string"?String(a.message):String(a),error:a});if(!window.dispatchEvent(u))return}else if(typeof process=="object"&&typeof process.emit=="function"){process.emit("uncaughtException",a);return}console.error(a)};function _A(a){ed(a)}function RA(a){console.error(a)}function DA(a){ed(a)}function td(a,u){try{var d=a.onUncaughtError;d(u.value,{componentStack:u.stack})}catch(m){setTimeout(function(){throw m})}}function OA(a,u,d){try{var m=a.onCaughtError;m(d.value,{componentStack:d.stack,errorBoundary:u.tag===1?u.stateNode:null})}catch(v){setTimeout(function(){throw v})}}function Fg(a,u,d){return d=Ji(d),d.tag=3,d.payload={element:null},d.callback=function(){td(a,u)},d}function jA(a){return a=Ji(a),a.tag=3,a}function LA(a,u,d,m){var v=d.type.getDerivedStateFromError;if(typeof v=="function"){var E=m.value;a.payload=function(){return v(E)},a.callback=function(){OA(u,d,m)}}var N=d.stateNode;N!==null&&typeof N.componentDidCatch=="function"&&(a.callback=function(){OA(u,d,m),typeof v!="function"&&(cs===null?cs=new Set([this]):cs.add(this));var D=m.stack;this.componentDidCatch(m.value,{componentStack:D!==null?D:""})})}function IH(a,u,d,m,v){if(d.flags|=32768,m!==null&&typeof m=="object"&&typeof m.then=="function"){if(u=d.alternate,u!==null&&ru(u,d,v,!0),d=fr.current,d!==null){switch(d.tag){case 13:return Ur===null?hy():d.alternate===null&&At===0&&(At=3),d.flags&=-257,d.flags|=65536,d.lanes=v,m===vg?d.flags|=16384:(u=d.updateQueue,u===null?d.updateQueue=new Set([m]):u.add(m),my(a,m,v)),!1;case 22:return d.flags|=65536,m===vg?d.flags|=16384:(u=d.updateQueue,u===null?(u={transitions:null,markerInstances:null,retryQueue:new Set([m])},d.updateQueue=u):(d=u.retryQueue,d===null?u.retryQueue=new Set([m]):d.add(m)),my(a,m,v)),!1}throw Error(r(435,d.tag))}return my(a,m,v),hy(),!1}if(et)return u=fr.current,u!==null?((u.flags&65536)===0&&(u.flags|=256),u.flags|=65536,u.lanes=v,m!==fg&&(a=Error(r(422),{cause:m}),nu(ar(a,d)))):(m!==fg&&(u=Error(r(423),{cause:m}),nu(ar(u,d))),a=a.current.alternate,a.flags|=65536,v&=-v,a.lanes|=v,m=ar(m,d),v=Fg(a.stateNode,m,v),wg(a,v),At!==4&&(At=2)),!1;var E=Error(r(520),{cause:m});if(E=ar(E,d),Eu===null?Eu=[E]:Eu.push(E),At!==4&&(At=2),u===null)return!0;m=ar(m,d),d=u;do{switch(d.tag){case 3:return d.flags|=65536,a=v&-v,d.lanes|=a,a=Fg(d.stateNode,m,a),wg(d,a),!1;case 1:if(u=d.type,E=d.stateNode,(d.flags&128)===0&&(typeof u.getDerivedStateFromError=="function"||E!==null&&typeof E.componentDidCatch=="function"&&(cs===null||!cs.has(E))))return d.flags|=65536,v&=-v,d.lanes|=v,v=jA(v),LA(v,a,d,m),wg(d,v),!1}d=d.return}while(d!==null);return!1}var PA=Error(r(461)),Xt=!1;function an(a,u,d,m){u.child=a===null?TA(u,null,d,m):Na(u,a.child,d,m)}function BA(a,u,d,m,v){d=d.render;var E=u.ref;if("ref"in m){var N={};for(var D in m)D!=="ref"&&(N[D]=m[D])}else N=m;return uo(u),m=Tg(a,u,d,N,E,v),D=Ag(),a!==null&&!Xt?(Mg(a,u,v),Si(a,u,v)):(et&&D&&ug(u),u.flags|=1,an(a,u,m,v),u.child)}function IA(a,u,d,m,v){if(a===null){var E=d.type;return typeof E=="function"&&!og(E)&&E.defaultProps===void 0&&d.compare===null?(u.tag=15,u.type=E,zA(a,u,E,m,v)):(a=jf(d.type,null,m,u,u.mode,v),a.ref=u.ref,a.return=u,u.child=a)}if(E=a.child,!Zg(a,v)){var N=E.memoizedProps;if(d=d.compare,d=d!==null?d:Ql,d(N,m)&&a.ref===u.ref)return Si(a,u,v)}return u.flags|=1,a=mi(E,m),a.ref=u.ref,a.return=u,u.child=a}function zA(a,u,d,m,v){if(a!==null){var E=a.memoizedProps;if(Ql(E,m)&&a.ref===u.ref)if(Xt=!1,u.pendingProps=m=E,Zg(a,v))(a.flags&131072)!==0&&(Xt=!0);else return u.lanes=a.lanes,Si(a,u,v)}return Ug(a,u,d,m,v)}function qA(a,u,d){var m=u.pendingProps,v=m.children,E=a!==null?a.memoizedState:null;if(m.mode==="hidden"){if((u.flags&128)!==0){if(m=E!==null?E.baseLanes|d:d,a!==null){for(v=u.child=a.child,E=0;v!==null;)E=E|v.lanes|v.childLanes,v=v.sibling;u.childLanes=E&~m}else u.childLanes=0,u.child=null;return VA(a,u,m,d)}if((d&536870912)!==0)u.memoizedState={baseLanes:0,cachePool:null},a!==null&&zf(u,E!==null?E.cachePool:null),E!==null?zT(u,E):Eg(),AA(u);else return u.lanes=u.childLanes=536870912,VA(a,u,E!==null?E.baseLanes|d:d,d)}else E!==null?(zf(u,E.cachePool),zT(u,E),rs(),u.memoizedState=null):(a!==null&&zf(u,null),Eg(),rs());return an(a,u,v,d),u.child}function VA(a,u,d,m){var v=yg();return v=v===null?null:{parent:Gt._currentValue,pool:v},u.memoizedState={baseLanes:d,cachePool:v},a!==null&&zf(u,null),Eg(),AA(u),a!==null&&ru(a,u,m,!0),null}function nd(a,u){var d=u.ref;if(d===null)a!==null&&a.ref!==null&&(u.flags|=4194816);else{if(typeof d!="function"&&typeof d!="object")throw Error(r(284));(a===null||a.ref!==d)&&(u.flags|=4194816)}}function Ug(a,u,d,m,v){return uo(u),d=Tg(a,u,d,m,void 0,v),m=Ag(),a!==null&&!Xt?(Mg(a,u,v),Si(a,u,v)):(et&&m&&ug(u),u.flags|=1,an(a,u,d,v),u.child)}function HA(a,u,d,m,v,E){return uo(u),u.updateQueue=null,d=VT(u,m,d,v),qT(a),m=Ag(),a!==null&&!Xt?(Mg(a,u,E),Si(a,u,E)):(et&&m&&ug(u),u.flags|=1,an(a,u,d,E),u.child)}function FA(a,u,d,m,v){if(uo(u),u.stateNode===null){var E=ba,N=d.contextType;typeof N=="object"&&N!==null&&(E=yn(N)),E=new d(m,E),u.memoizedState=E.state!==null&&E.state!==void 0?E.state:null,E.updater=Hg,u.stateNode=E,E._reactInternals=u,E=u.stateNode,E.props=m,E.state=u.memoizedState,E.refs={},bg(u),N=d.contextType,E.context=typeof N=="object"&&N!==null?yn(N):ba,E.state=u.memoizedState,N=d.getDerivedStateFromProps,typeof N=="function"&&(Vg(u,d,N,m),E.state=u.memoizedState),typeof d.getDerivedStateFromProps=="function"||typeof E.getSnapshotBeforeUpdate=="function"||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(N=E.state,typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount(),N!==E.state&&Hg.enqueueReplaceState(E,E.state,null),cu(u,m,E,v),uu(),E.state=u.memoizedState),typeof E.componentDidMount=="function"&&(u.flags|=4194308),m=!0}else if(a===null){E=u.stateNode;var D=u.memoizedProps,H=ho(d,D);E.props=H;var te=E.context,ce=d.contextType;N=ba,typeof ce=="object"&&ce!==null&&(N=yn(ce));var de=d.getDerivedStateFromProps;ce=typeof de=="function"||typeof E.getSnapshotBeforeUpdate=="function",D=u.pendingProps!==D,ce||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(D||te!==N)&&NA(u,E,m,N),Qi=!1;var ne=u.memoizedState;E.state=ne,cu(u,m,E,v),uu(),te=u.memoizedState,D||ne!==te||Qi?(typeof de=="function"&&(Vg(u,d,de,m),te=u.memoizedState),(H=Qi||MA(u,d,H,m,ne,te,N))?(ce||typeof E.UNSAFE_componentWillMount!="function"&&typeof E.componentWillMount!="function"||(typeof E.componentWillMount=="function"&&E.componentWillMount(),typeof E.UNSAFE_componentWillMount=="function"&&E.UNSAFE_componentWillMount()),typeof E.componentDidMount=="function"&&(u.flags|=4194308)):(typeof E.componentDidMount=="function"&&(u.flags|=4194308),u.memoizedProps=m,u.memoizedState=te),E.props=m,E.state=te,E.context=N,m=H):(typeof E.componentDidMount=="function"&&(u.flags|=4194308),m=!1)}else{E=u.stateNode,xg(a,u),N=u.memoizedProps,ce=ho(d,N),E.props=ce,de=u.pendingProps,ne=E.context,te=d.contextType,H=ba,typeof te=="object"&&te!==null&&(H=yn(te)),D=d.getDerivedStateFromProps,(te=typeof D=="function"||typeof E.getSnapshotBeforeUpdate=="function")||typeof E.UNSAFE_componentWillReceiveProps!="function"&&typeof E.componentWillReceiveProps!="function"||(N!==de||ne!==H)&&NA(u,E,m,H),Qi=!1,ne=u.memoizedState,E.state=ne,cu(u,m,E,v),uu();var ie=u.memoizedState;N!==de||ne!==ie||Qi||a!==null&&a.dependencies!==null&&Bf(a.dependencies)?(typeof D=="function"&&(Vg(u,d,D,m),ie=u.memoizedState),(ce=Qi||MA(u,d,ce,m,ne,ie,H)||a!==null&&a.dependencies!==null&&Bf(a.dependencies))?(te||typeof E.UNSAFE_componentWillUpdate!="function"&&typeof E.componentWillUpdate!="function"||(typeof E.componentWillUpdate=="function"&&E.componentWillUpdate(m,ie,H),typeof E.UNSAFE_componentWillUpdate=="function"&&E.UNSAFE_componentWillUpdate(m,ie,H)),typeof E.componentDidUpdate=="function"&&(u.flags|=4),typeof E.getSnapshotBeforeUpdate=="function"&&(u.flags|=1024)):(typeof E.componentDidUpdate!="function"||N===a.memoizedProps&&ne===a.memoizedState||(u.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||N===a.memoizedProps&&ne===a.memoizedState||(u.flags|=1024),u.memoizedProps=m,u.memoizedState=ie),E.props=m,E.state=ie,E.context=H,m=ce):(typeof E.componentDidUpdate!="function"||N===a.memoizedProps&&ne===a.memoizedState||(u.flags|=4),typeof E.getSnapshotBeforeUpdate!="function"||N===a.memoizedProps&&ne===a.memoizedState||(u.flags|=1024),m=!1)}return E=m,nd(a,u),m=(u.flags&128)!==0,E||m?(E=u.stateNode,d=m&&typeof d.getDerivedStateFromError!="function"?null:E.render(),u.flags|=1,a!==null&&m?(u.child=Na(u,a.child,null,v),u.child=Na(u,null,d,v)):an(a,u,d,v),u.memoizedState=E.state,a=u.child):a=Si(a,u,v),a}function UA(a,u,d,m){return tu(),u.flags|=256,an(a,u,d,m),u.child}var $g={dehydrated:null,treeContext:null,retryLane:0,hydrationErrors:null};function Gg(a){return{baseLanes:a,cachePool:RT()}}function Kg(a,u,d){return a=a!==null?a.childLanes&~d:0,u&&(a|=dr),a}function $A(a,u,d){var m=u.pendingProps,v=!1,E=(u.flags&128)!==0,N;if((N=E)||(N=a!==null&&a.memoizedState===null?!1:(Kt.current&2)!==0),N&&(v=!0,u.flags&=-129),N=(u.flags&32)!==0,u.flags&=-33,a===null){if(et){if(v?ns(u):rs(),et){var D=Tt,H;if(H=D){e:{for(H=D,D=Fr;H.nodeType!==8;){if(!D){D=null;break e}if(H=Rr(H.nextSibling),H===null){D=null;break e}}D=H}D!==null?(u.memoizedState={dehydrated:D,treeContext:io!==null?{id:gi,overflow:yi}:null,retryLane:536870912,hydrationErrors:null},H=$n(18,null,null,0),H.stateNode=D,H.return=u,u.child=H,En=u,Tt=null,H=!0):H=!1}H||ao(u)}if(D=u.memoizedState,D!==null&&(D=D.dehydrated,D!==null))return _y(D)?u.lanes=32:u.lanes=536870912,null;wi(u)}return D=m.children,m=m.fallback,v?(rs(),v=u.mode,D=rd({mode:"hidden",children:D},v),m=ro(m,v,d,null),D.return=u,m.return=u,D.sibling=m,u.child=D,v=u.child,v.memoizedState=Gg(d),v.childLanes=Kg(a,N,d),u.memoizedState=$g,m):(ns(u),Yg(u,D))}if(H=a.memoizedState,H!==null&&(D=H.dehydrated,D!==null)){if(E)u.flags&256?(ns(u),u.flags&=-257,u=Wg(a,u,d)):u.memoizedState!==null?(rs(),u.child=a.child,u.flags|=128,u=null):(rs(),v=m.fallback,D=u.mode,m=rd({mode:"visible",children:m.children},D),v=ro(v,D,d,null),v.flags|=2,m.return=u,v.return=u,m.sibling=v,u.child=m,Na(u,a.child,null,d),m=u.child,m.memoizedState=Gg(d),m.childLanes=Kg(a,N,d),u.memoizedState=$g,u=v);else if(ns(u),_y(D)){if(N=D.nextSibling&&D.nextSibling.dataset,N)var te=N.dgst;N=te,m=Error(r(419)),m.stack="",m.digest=N,nu({value:m,source:null,stack:null}),u=Wg(a,u,d)}else if(Xt||ru(a,u,d,!1),N=(d&a.childLanes)!==0,Xt||N){if(N=dt,N!==null&&(m=d&-d,m=(m&42)!==0?1:xe(m),m=(m&(N.suspendedLanes|d))!==0?0:m,m!==0&&m!==H.retryLane))throw H.retryLane=m,va(a,m),Xn(N,a,m),PA;D.data==="$?"||hy(),u=Wg(a,u,d)}else D.data==="$?"?(u.flags|=192,u.child=a.child,u=null):(a=H.treeContext,Tt=Rr(D.nextSibling),En=u,et=!0,oo=null,Fr=!1,a!==null&&(ur[cr++]=gi,ur[cr++]=yi,ur[cr++]=io,gi=a.id,yi=a.overflow,io=u),u=Yg(u,m.children),u.flags|=4096);return u}return v?(rs(),v=m.fallback,D=u.mode,H=a.child,te=H.sibling,m=mi(H,{mode:"hidden",children:m.children}),m.subtreeFlags=H.subtreeFlags&65011712,te!==null?v=mi(te,v):(v=ro(v,D,d,null),v.flags|=2),v.return=u,m.return=u,m.sibling=v,u.child=m,m=v,v=u.child,D=a.child.memoizedState,D===null?D=Gg(d):(H=D.cachePool,H!==null?(te=Gt._currentValue,H=H.parent!==te?{parent:te,pool:te}:H):H=RT(),D={baseLanes:D.baseLanes|d,cachePool:H}),v.memoizedState=D,v.childLanes=Kg(a,N,d),u.memoizedState=$g,m):(ns(u),d=a.child,a=d.sibling,d=mi(d,{mode:"visible",children:m.children}),d.return=u,d.sibling=null,a!==null&&(N=u.deletions,N===null?(u.deletions=[a],u.flags|=16):N.push(a)),u.child=d,u.memoizedState=null,d)}function Yg(a,u){return u=rd({mode:"visible",children:u},a.mode),u.return=a,a.child=u}function rd(a,u){return a=$n(22,a,null,u),a.lanes=0,a.stateNode={_visibility:1,_pendingMarkers:null,_retryCache:null,_transitions:null},a}function Wg(a,u,d){return Na(u,a.child,null,d),a=Yg(u,u.pendingProps.children),a.flags|=2,u.memoizedState=null,a}function GA(a,u,d){a.lanes|=u;var m=a.alternate;m!==null&&(m.lanes|=u),hg(a.return,u,d)}function Xg(a,u,d,m,v){var E=a.memoizedState;E===null?a.memoizedState={isBackwards:u,rendering:null,renderingStartTime:0,last:m,tail:d,tailMode:v}:(E.isBackwards=u,E.rendering=null,E.renderingStartTime=0,E.last=m,E.tail=d,E.tailMode=v)}function KA(a,u,d){var m=u.pendingProps,v=m.revealOrder,E=m.tail;if(an(a,u,m.children,d),m=Kt.current,(m&2)!==0)m=m&1|2,u.flags|=128;else{if(a!==null&&(a.flags&128)!==0)e:for(a=u.child;a!==null;){if(a.tag===13)a.memoizedState!==null&&GA(a,d,u);else if(a.tag===19)GA(a,d,u);else if(a.child!==null){a.child.return=a,a=a.child;continue}if(a===u)break e;for(;a.sibling===null;){if(a.return===null||a.return===u)break e;a=a.return}a.sibling.return=a.return,a=a.sibling}m&=1}switch(le(Kt,m),v){case"forwards":for(d=u.child,v=null;d!==null;)a=d.alternate,a!==null&&Jf(a)===null&&(v=d),d=d.sibling;d=v,d===null?(v=u.child,u.child=null):(v=d.sibling,d.sibling=null),Xg(u,!1,v,d,E);break;case"backwards":for(d=null,v=u.child,u.child=null;v!==null;){if(a=v.alternate,a!==null&&Jf(a)===null){u.child=v;break}a=v.sibling,v.sibling=d,d=v,v=a}Xg(u,!0,d,null,E);break;case"together":Xg(u,!1,null,null,void 0);break;default:u.memoizedState=null}return u.child}function Si(a,u,d){if(a!==null&&(u.dependencies=a.dependencies),us|=u.lanes,(d&u.childLanes)===0)if(a!==null){if(ru(a,u,d,!1),(d&u.childLanes)===0)return null}else return null;if(a!==null&&u.child!==a.child)throw Error(r(153));if(u.child!==null){for(a=u.child,d=mi(a,a.pendingProps),u.child=d,d.return=u;a.sibling!==null;)a=a.sibling,d=d.sibling=mi(a,a.pendingProps),d.return=u;d.sibling=null}return u.child}function Zg(a,u){return(a.lanes&u)!==0?!0:(a=a.dependencies,!!(a!==null&&Bf(a)))}function zH(a,u,d){switch(u.tag){case 3:se(u,u.stateNode.containerInfo),Zi(u,Gt,a.memoizedState.cache),tu();break;case 27:case 5:Ce(u);break;case 4:se(u,u.stateNode.containerInfo);break;case 10:Zi(u,u.type,u.memoizedProps.value);break;case 13:var m=u.memoizedState;if(m!==null)return m.dehydrated!==null?(ns(u),u.flags|=128,null):(d&u.child.childLanes)!==0?$A(a,u,d):(ns(u),a=Si(a,u,d),a!==null?a.sibling:null);ns(u);break;case 19:var v=(a.flags&128)!==0;if(m=(d&u.childLanes)!==0,m||(ru(a,u,d,!1),m=(d&u.childLanes)!==0),v){if(m)return KA(a,u,d);u.flags|=128}if(v=u.memoizedState,v!==null&&(v.rendering=null,v.tail=null,v.lastEffect=null),le(Kt,Kt.current),m)break;return null;case 22:case 23:return u.lanes=0,qA(a,u,d);case 24:Zi(u,Gt,a.memoizedState.cache)}return Si(a,u,d)}function YA(a,u,d){if(a!==null)if(a.memoizedProps!==u.pendingProps)Xt=!0;else{if(!Zg(a,d)&&(u.flags&128)===0)return Xt=!1,zH(a,u,d);Xt=(a.flags&131072)!==0}else Xt=!1,et&&(u.flags&1048576)!==0&&CT(u,Pf,u.index);switch(u.lanes=0,u.tag){case 16:e:{a=u.pendingProps;var m=u.elementType,v=m._init;if(m=v(m._payload),u.type=m,typeof m=="function")og(m)?(a=ho(m,a),u.tag=1,u=FA(null,u,m,a,d)):(u.tag=0,u=Ug(null,u,m,a,d));else{if(m!=null){if(v=m.$$typeof,v===A){u.tag=11,u=BA(null,u,m,a,d);break e}else if(v===R){u.tag=14,u=IA(null,u,m,a,d);break e}}throw u=B(m)||m,Error(r(306,u,""))}}return u;case 0:return Ug(a,u,u.type,u.pendingProps,d);case 1:return m=u.type,v=ho(m,u.pendingProps),FA(a,u,m,v,d);case 3:e:{if(se(u,u.stateNode.containerInfo),a===null)throw Error(r(387));m=u.pendingProps;var E=u.memoizedState;v=E.element,xg(a,u),cu(u,m,null,d);var N=u.memoizedState;if(m=N.cache,Zi(u,Gt,m),m!==E.cache&&pg(u,[Gt],d,!0),uu(),m=N.element,E.isDehydrated)if(E={element:m,isDehydrated:!1,cache:N.cache},u.updateQueue.baseState=E,u.memoizedState=E,u.flags&256){u=UA(a,u,m,d);break e}else if(m!==v){v=ar(Error(r(424)),u),nu(v),u=UA(a,u,m,d);break e}else{switch(a=u.stateNode.containerInfo,a.nodeType){case 9:a=a.body;break;default:a=a.nodeName==="HTML"?a.ownerDocument.body:a}for(Tt=Rr(a.firstChild),En=u,et=!0,oo=null,Fr=!0,d=TA(u,null,m,d),u.child=d;d;)d.flags=d.flags&-3|4096,d=d.sibling}else{if(tu(),m===v){u=Si(a,u,d);break e}an(a,u,m,d)}u=u.child}return u;case 26:return nd(a,u),a===null?(d=Q2(u.type,null,u.pendingProps,null))?u.memoizedState=d:et||(d=u.type,a=u.pendingProps,m=yd(Q.current).createElement(d),m[Ze]=u,m[ht]=a,un(m,d,a),Bt(m),u.stateNode=m):u.memoizedState=Q2(u.type,a.memoizedProps,u.pendingProps,a.memoizedState),null;case 27:return Ce(u),a===null&&et&&(m=u.stateNode=W2(u.type,u.pendingProps,Q.current),En=u,Fr=!0,v=Tt,hs(u.type)?(Ry=v,Tt=Rr(m.firstChild)):Tt=v),an(a,u,u.pendingProps.children,d),nd(a,u),a===null&&(u.flags|=4194304),u.child;case 5:return a===null&&et&&((v=m=Tt)&&(m=h8(m,u.type,u.pendingProps,Fr),m!==null?(u.stateNode=m,En=u,Tt=Rr(m.firstChild),Fr=!1,v=!0):v=!1),v||ao(u)),Ce(u),v=u.type,E=u.pendingProps,N=a!==null?a.memoizedProps:null,m=E.children,Ay(v,E)?m=null:N!==null&&Ay(v,N)&&(u.flags|=32),u.memoizedState!==null&&(v=Tg(a,u,RH,null,null,d),Du._currentValue=v),nd(a,u),an(a,u,m,d),u.child;case 6:return a===null&&et&&((a=d=Tt)&&(d=p8(d,u.pendingProps,Fr),d!==null?(u.stateNode=d,En=u,Tt=null,a=!0):a=!1),a||ao(u)),null;case 13:return $A(a,u,d);case 4:return se(u,u.stateNode.containerInfo),m=u.pendingProps,a===null?u.child=Na(u,null,m,d):an(a,u,m,d),u.child;case 11:return BA(a,u,u.type,u.pendingProps,d);case 7:return an(a,u,u.pendingProps,d),u.child;case 8:return an(a,u,u.pendingProps.children,d),u.child;case 12:return an(a,u,u.pendingProps.children,d),u.child;case 10:return m=u.pendingProps,Zi(u,u.type,m.value),an(a,u,m.children,d),u.child;case 9:return v=u.type._context,m=u.pendingProps.children,uo(u),v=yn(v),m=m(v),u.flags|=1,an(a,u,m,d),u.child;case 14:return IA(a,u,u.type,u.pendingProps,d);case 15:return zA(a,u,u.type,u.pendingProps,d);case 19:return KA(a,u,d);case 31:return m=u.pendingProps,d=u.mode,m={mode:m.mode,children:m.children},a===null?(d=rd(m,d),d.ref=u.ref,u.child=d,d.return=u,u=d):(d=mi(a.child,m),d.ref=u.ref,u.child=d,d.return=u,u=d),u;case 22:return qA(a,u,d);case 24:return uo(u),m=yn(Gt),a===null?(v=yg(),v===null&&(v=dt,E=mg(),v.pooledCache=E,E.refCount++,E!==null&&(v.pooledCacheLanes|=d),v=E),u.memoizedState={parent:m,cache:v},bg(u),Zi(u,Gt,v)):((a.lanes&d)!==0&&(xg(a,u),cu(u,null,null,d),uu()),v=a.memoizedState,E=u.memoizedState,v.parent!==m?(v={parent:m,cache:m},u.memoizedState=v,u.lanes===0&&(u.memoizedState=u.updateQueue.baseState=v),Zi(u,Gt,m)):(m=E.cache,Zi(u,Gt,m),m!==v.cache&&pg(u,[Gt],d,!0))),an(a,u,u.pendingProps.children,d),u.child;case 29:throw u.pendingProps}throw Error(r(156,u.tag))}function Ei(a){a.flags|=4}function WA(a,u){if(u.type!=="stylesheet"||(u.state.loading&4)!==0)a.flags&=-16777217;else if(a.flags|=16777216,!rM(u)){if(u=fr.current,u!==null&&((Qe&4194048)===Qe?Ur!==null:(Qe&62914560)!==Qe&&(Qe&536870912)===0||u!==Ur))throw au=vg,DT;a.flags|=8192}}function id(a,u){u!==null&&(a.flags|=4),a.flags&16384&&(u=a.tag!==22?oa():536870912,a.lanes|=u,Oa|=u)}function yu(a,u){if(!et)switch(a.tailMode){case"hidden":u=a.tail;for(var d=null;u!==null;)u.alternate!==null&&(d=u),u=u.sibling;d===null?a.tail=null:d.sibling=null;break;case"collapsed":d=a.tail;for(var m=null;d!==null;)d.alternate!==null&&(m=d),d=d.sibling;m===null?u||a.tail===null?a.tail=null:a.tail.sibling=null:m.sibling=null}}function St(a){var u=a.alternate!==null&&a.alternate.child===a.child,d=0,m=0;if(u)for(var v=a.child;v!==null;)d|=v.lanes|v.childLanes,m|=v.subtreeFlags&65011712,m|=v.flags&65011712,v.return=a,v=v.sibling;else for(v=a.child;v!==null;)d|=v.lanes|v.childLanes,m|=v.subtreeFlags,m|=v.flags,v.return=a,v=v.sibling;return a.subtreeFlags|=m,a.childLanes=d,u}function qH(a,u,d){var m=u.pendingProps;switch(cg(u),u.tag){case 31:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return St(u),null;case 1:return St(u),null;case 3:return d=u.stateNode,m=null,a!==null&&(m=a.memoizedState.cache),u.memoizedState.cache!==m&&(u.flags|=2048),bi(Gt),ge(),d.pendingContext&&(d.context=d.pendingContext,d.pendingContext=null),(a===null||a.child===null)&&(eu(u)?Ei(u):a===null||a.memoizedState.isDehydrated&&(u.flags&256)===0||(u.flags|=1024,AT())),St(u),null;case 26:return d=u.memoizedState,a===null?(Ei(u),d!==null?(St(u),WA(u,d)):(St(u),u.flags&=-16777217)):d?d!==a.memoizedState?(Ei(u),St(u),WA(u,d)):(St(u),u.flags&=-16777217):(a.memoizedProps!==m&&Ei(u),St(u),u.flags&=-16777217),null;case 27:De(u),d=Q.current;var v=u.type;if(a!==null&&u.stateNode!=null)a.memoizedProps!==m&&Ei(u);else{if(!m){if(u.stateNode===null)throw Error(r(166));return St(u),null}a=V.current,eu(u)?kT(u):(a=W2(v,m,d),u.stateNode=a,Ei(u))}return St(u),null;case 5:if(De(u),d=u.type,a!==null&&u.stateNode!=null)a.memoizedProps!==m&&Ei(u);else{if(!m){if(u.stateNode===null)throw Error(r(166));return St(u),null}if(a=V.current,eu(u))kT(u);else{switch(v=yd(Q.current),a){case 1:a=v.createElementNS("http://www.w3.org/2000/svg",d);break;case 2:a=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;default:switch(d){case"svg":a=v.createElementNS("http://www.w3.org/2000/svg",d);break;case"math":a=v.createElementNS("http://www.w3.org/1998/Math/MathML",d);break;case"script":a=v.createElement("div"),a.innerHTML="<script><\/script>",a=a.removeChild(a.firstChild);break;case"select":a=typeof m.is=="string"?v.createElement("select",{is:m.is}):v.createElement("select"),m.multiple?a.multiple=!0:m.size&&(a.size=m.size);break;default:a=typeof m.is=="string"?v.createElement(d,{is:m.is}):v.createElement(d)}}a[Ze]=u,a[ht]=m;e:for(v=u.child;v!==null;){if(v.tag===5||v.tag===6)a.appendChild(v.stateNode);else if(v.tag!==4&&v.tag!==27&&v.child!==null){v.child.return=v,v=v.child;continue}if(v===u)break e;for(;v.sibling===null;){if(v.return===null||v.return===u)break e;v=v.return}v.sibling.return=v.return,v=v.sibling}u.stateNode=a;e:switch(un(a,d,m),d){case"button":case"input":case"select":case"textarea":a=!!m.autoFocus;break e;case"img":a=!0;break e;default:a=!1}a&&Ei(u)}}return St(u),u.flags&=-16777217,null;case 6:if(a&&u.stateNode!=null)a.memoizedProps!==m&&Ei(u);else{if(typeof m!="string"&&u.stateNode===null)throw Error(r(166));if(a=Q.current,eu(u)){if(a=u.stateNode,d=u.memoizedProps,m=null,v=En,v!==null)switch(v.tag){case 27:case 5:m=v.memoizedProps}a[Ze]=u,a=!!(a.nodeValue===d||m!==null&&m.suppressHydrationWarning===!0||H2(a.nodeValue,d)),a||ao(u)}else a=yd(a).createTextNode(m),a[Ze]=u,u.stateNode=a}return St(u),null;case 13:if(m=u.memoizedState,a===null||a.memoizedState!==null&&a.memoizedState.dehydrated!==null){if(v=eu(u),m!==null&&m.dehydrated!==null){if(a===null){if(!v)throw Error(r(318));if(v=u.memoizedState,v=v!==null?v.dehydrated:null,!v)throw Error(r(317));v[Ze]=u}else tu(),(u.flags&128)===0&&(u.memoizedState=null),u.flags|=4;St(u),v=!1}else v=AT(),a!==null&&a.memoizedState!==null&&(a.memoizedState.hydrationErrors=v),v=!0;if(!v)return u.flags&256?(wi(u),u):(wi(u),null)}if(wi(u),(u.flags&128)!==0)return u.lanes=d,u;if(d=m!==null,a=a!==null&&a.memoizedState!==null,d){m=u.child,v=null,m.alternate!==null&&m.alternate.memoizedState!==null&&m.alternate.memoizedState.cachePool!==null&&(v=m.alternate.memoizedState.cachePool.pool);var E=null;m.memoizedState!==null&&m.memoizedState.cachePool!==null&&(E=m.memoizedState.cachePool.pool),E!==v&&(m.flags|=2048)}return d!==a&&d&&(u.child.flags|=8192),id(u,u.updateQueue),St(u),null;case 4:return ge(),a===null&&Sy(u.stateNode.containerInfo),St(u),null;case 10:return bi(u.type),St(u),null;case 19:if(re(Kt),v=u.memoizedState,v===null)return St(u),null;if(m=(u.flags&128)!==0,E=v.rendering,E===null)if(m)yu(v,!1);else{if(At!==0||a!==null&&(a.flags&128)!==0)for(a=u.child;a!==null;){if(E=Jf(a),E!==null){for(u.flags|=128,yu(v,!1),a=E.updateQueue,u.updateQueue=a,id(u,a),u.subtreeFlags=0,a=d,d=u.child;d!==null;)ET(d,a),d=d.sibling;return le(Kt,Kt.current&1|2),u.child}a=a.sibling}v.tail!==null&&Me()>ad&&(u.flags|=128,m=!0,yu(v,!1),u.lanes=4194304)}else{if(!m)if(a=Jf(E),a!==null){if(u.flags|=128,m=!0,a=a.updateQueue,u.updateQueue=a,id(u,a),yu(v,!0),v.tail===null&&v.tailMode==="hidden"&&!E.alternate&&!et)return St(u),null}else 2*Me()-v.renderingStartTime>ad&&d!==536870912&&(u.flags|=128,m=!0,yu(v,!1),u.lanes=4194304);v.isBackwards?(E.sibling=u.child,u.child=E):(a=v.last,a!==null?a.sibling=E:u.child=E,v.last=E)}return v.tail!==null?(u=v.tail,v.rendering=u,v.tail=u.sibling,v.renderingStartTime=Me(),u.sibling=null,a=Kt.current,le(Kt,m?a&1|2:a&1),u):(St(u),null);case 22:case 23:return wi(u),Cg(),m=u.memoizedState!==null,a!==null?a.memoizedState!==null!==m&&(u.flags|=8192):m&&(u.flags|=8192),m?(d&536870912)!==0&&(u.flags&128)===0&&(St(u),u.subtreeFlags&6&&(u.flags|=8192)):St(u),d=u.updateQueue,d!==null&&id(u,d.retryQueue),d=null,a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),m=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(m=u.memoizedState.cachePool.pool),m!==d&&(u.flags|=2048),a!==null&&re(co),null;case 24:return d=null,a!==null&&(d=a.memoizedState.cache),u.memoizedState.cache!==d&&(u.flags|=2048),bi(Gt),St(u),null;case 25:return null;case 30:return null}throw Error(r(156,u.tag))}function VH(a,u){switch(cg(u),u.tag){case 1:return a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 3:return bi(Gt),ge(),a=u.flags,(a&65536)!==0&&(a&128)===0?(u.flags=a&-65537|128,u):null;case 26:case 27:case 5:return De(u),null;case 13:if(wi(u),a=u.memoizedState,a!==null&&a.dehydrated!==null){if(u.alternate===null)throw Error(r(340));tu()}return a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 19:return re(Kt),null;case 4:return ge(),null;case 10:return bi(u.type),null;case 22:case 23:return wi(u),Cg(),a!==null&&re(co),a=u.flags,a&65536?(u.flags=a&-65537|128,u):null;case 24:return bi(Gt),null;case 25:return null;default:return null}}function XA(a,u){switch(cg(u),u.tag){case 3:bi(Gt),ge();break;case 26:case 27:case 5:De(u);break;case 4:ge();break;case 13:wi(u);break;case 19:re(Kt);break;case 10:bi(u.type);break;case 22:case 23:wi(u),Cg(),a!==null&&re(co);break;case 24:bi(Gt)}}function vu(a,u){try{var d=u.updateQueue,m=d!==null?d.lastEffect:null;if(m!==null){var v=m.next;d=v;do{if((d.tag&a)===a){m=void 0;var E=d.create,N=d.inst;m=E(),N.destroy=m}d=d.next}while(d!==v)}}catch(D){ut(u,u.return,D)}}function is(a,u,d){try{var m=u.updateQueue,v=m!==null?m.lastEffect:null;if(v!==null){var E=v.next;m=E;do{if((m.tag&a)===a){var N=m.inst,D=N.destroy;if(D!==void 0){N.destroy=void 0,v=u;var H=d,te=D;try{te()}catch(ce){ut(v,H,ce)}}}m=m.next}while(m!==E)}}catch(ce){ut(u,u.return,ce)}}function ZA(a){var u=a.updateQueue;if(u!==null){var d=a.stateNode;try{IT(u,d)}catch(m){ut(a,a.return,m)}}}function QA(a,u,d){d.props=ho(a.type,a.memoizedProps),d.state=a.memoizedState;try{d.componentWillUnmount()}catch(m){ut(a,u,m)}}function bu(a,u){try{var d=a.ref;if(d!==null){switch(a.tag){case 26:case 27:case 5:var m=a.stateNode;break;case 30:m=a.stateNode;break;default:m=a.stateNode}typeof d=="function"?a.refCleanup=d(m):d.current=m}}catch(v){ut(a,u,v)}}function $r(a,u){var d=a.ref,m=a.refCleanup;if(d!==null)if(typeof m=="function")try{m()}catch(v){ut(a,u,v)}finally{a.refCleanup=null,a=a.alternate,a!=null&&(a.refCleanup=null)}else if(typeof d=="function")try{d(null)}catch(v){ut(a,u,v)}else d.current=null}function JA(a){var u=a.type,d=a.memoizedProps,m=a.stateNode;try{e:switch(u){case"button":case"input":case"select":case"textarea":d.autoFocus&&m.focus();break e;case"img":d.src?m.src=d.src:d.srcSet&&(m.srcset=d.srcSet)}}catch(v){ut(a,a.return,v)}}function Qg(a,u,d){try{var m=a.stateNode;l8(m,a.type,d,u),m[ht]=u}catch(v){ut(a,a.return,v)}}function e2(a){return a.tag===5||a.tag===3||a.tag===26||a.tag===27&&hs(a.type)||a.tag===4}function Jg(a){e:for(;;){for(;a.sibling===null;){if(a.return===null||e2(a.return))return null;a=a.return}for(a.sibling.return=a.return,a=a.sibling;a.tag!==5&&a.tag!==6&&a.tag!==18;){if(a.tag===27&&hs(a.type)||a.flags&2||a.child===null||a.tag===4)continue e;a.child.return=a,a=a.child}if(!(a.flags&2))return a.stateNode}}function ey(a,u,d){var m=a.tag;if(m===5||m===6)a=a.stateNode,u?(d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d).insertBefore(a,u):(u=d.nodeType===9?d.body:d.nodeName==="HTML"?d.ownerDocument.body:d,u.appendChild(a),d=d._reactRootContainer,d!=null||u.onclick!==null||(u.onclick=gd));else if(m!==4&&(m===27&&hs(a.type)&&(d=a.stateNode,u=null),a=a.child,a!==null))for(ey(a,u,d),a=a.sibling;a!==null;)ey(a,u,d),a=a.sibling}function sd(a,u,d){var m=a.tag;if(m===5||m===6)a=a.stateNode,u?d.insertBefore(a,u):d.appendChild(a);else if(m!==4&&(m===27&&hs(a.type)&&(d=a.stateNode),a=a.child,a!==null))for(sd(a,u,d),a=a.sibling;a!==null;)sd(a,u,d),a=a.sibling}function t2(a){var u=a.stateNode,d=a.memoizedProps;try{for(var m=a.type,v=u.attributes;v.length;)u.removeAttributeNode(v[0]);un(u,m,d),u[Ze]=a,u[ht]=d}catch(E){ut(a,a.return,E)}}var Ci=!1,Ot=!1,ty=!1,n2=typeof WeakSet=="function"?WeakSet:Set,Zt=null;function HH(a,u){if(a=a.containerInfo,ky=Ed,a=hT(a),Jm(a)){if("selectionStart"in a)var d={start:a.selectionStart,end:a.selectionEnd};else e:{d=(d=a.ownerDocument)&&d.defaultView||window;var m=d.getSelection&&d.getSelection();if(m&&m.rangeCount!==0){d=m.anchorNode;var v=m.anchorOffset,E=m.focusNode;m=m.focusOffset;try{d.nodeType,E.nodeType}catch{d=null;break e}var N=0,D=-1,H=-1,te=0,ce=0,de=a,ne=null;t:for(;;){for(var ie;de!==d||v!==0&&de.nodeType!==3||(D=N+v),de!==E||m!==0&&de.nodeType!==3||(H=N+m),de.nodeType===3&&(N+=de.nodeValue.length),(ie=de.firstChild)!==null;)ne=de,de=ie;for(;;){if(de===a)break t;if(ne===d&&++te===v&&(D=N),ne===E&&++ce===m&&(H=N),(ie=de.nextSibling)!==null)break;de=ne,ne=de.parentNode}de=ie}d=D===-1||H===-1?null:{start:D,end:H}}else d=null}d=d||{start:0,end:0}}else d=null;for(Ty={focusedElem:a,selectionRange:d},Ed=!1,Zt=u;Zt!==null;)if(u=Zt,a=u.child,(u.subtreeFlags&1024)!==0&&a!==null)a.return=u,Zt=a;else for(;Zt!==null;){switch(u=Zt,E=u.alternate,a=u.flags,u.tag){case 0:break;case 11:case 15:break;case 1:if((a&1024)!==0&&E!==null){a=void 0,d=u,v=E.memoizedProps,E=E.memoizedState,m=d.stateNode;try{var Be=ho(d.type,v,d.elementType===d.type);a=m.getSnapshotBeforeUpdate(Be,E),m.__reactInternalSnapshotBeforeUpdate=a}catch(Oe){ut(d,d.return,Oe)}}break;case 3:if((a&1024)!==0){if(a=u.stateNode.containerInfo,d=a.nodeType,d===9)Ny(a);else if(d===1)switch(a.nodeName){case"HEAD":case"HTML":case"BODY":Ny(a);break;default:a.textContent=""}}break;case 5:case 26:case 27:case 6:case 4:case 17:break;default:if((a&1024)!==0)throw Error(r(163))}if(a=u.sibling,a!==null){a.return=u.return,Zt=a;break}Zt=u.return}}function r2(a,u,d){var m=d.flags;switch(d.tag){case 0:case 11:case 15:ss(a,d),m&4&&vu(5,d);break;case 1:if(ss(a,d),m&4)if(a=d.stateNode,u===null)try{a.componentDidMount()}catch(N){ut(d,d.return,N)}else{var v=ho(d.type,u.memoizedProps);u=u.memoizedState;try{a.componentDidUpdate(v,u,a.__reactInternalSnapshotBeforeUpdate)}catch(N){ut(d,d.return,N)}}m&64&&ZA(d),m&512&&bu(d,d.return);break;case 3:if(ss(a,d),m&64&&(a=d.updateQueue,a!==null)){if(u=null,d.child!==null)switch(d.child.tag){case 27:case 5:u=d.child.stateNode;break;case 1:u=d.child.stateNode}try{IT(a,u)}catch(N){ut(d,d.return,N)}}break;case 27:u===null&&m&4&&t2(d);case 26:case 5:ss(a,d),u===null&&m&4&&JA(d),m&512&&bu(d,d.return);break;case 12:ss(a,d);break;case 13:ss(a,d),m&4&&o2(a,d),m&64&&(a=d.memoizedState,a!==null&&(a=a.dehydrated,a!==null&&(d=ZH.bind(null,d),m8(a,d))));break;case 22:if(m=d.memoizedState!==null||Ci,!m){u=u!==null&&u.memoizedState!==null||Ot,v=Ci;var E=Ot;Ci=m,(Ot=u)&&!E?as(a,d,(d.subtreeFlags&8772)!==0):ss(a,d),Ci=v,Ot=E}break;case 30:break;default:ss(a,d)}}function i2(a){var u=a.alternate;u!==null&&(a.alternate=null,i2(u)),a.child=null,a.deletions=null,a.sibling=null,a.tag===5&&(u=a.stateNode,u!==null&&Il(u)),a.stateNode=null,a.return=null,a.dependencies=null,a.memoizedProps=null,a.memoizedState=null,a.pendingProps=null,a.stateNode=null,a.updateQueue=null}var yt=null,Ln=!1;function ki(a,u,d){for(d=d.child;d!==null;)s2(a,u,d),d=d.sibling}function s2(a,u,d){if(gt&&typeof gt.onCommitFiberUnmount=="function")try{gt.onCommitFiberUnmount(mn,d)}catch{}switch(d.tag){case 26:Ot||$r(d,u),ki(a,u,d),d.memoizedState?d.memoizedState.count--:d.stateNode&&(d=d.stateNode,d.parentNode.removeChild(d));break;case 27:Ot||$r(d,u);var m=yt,v=Ln;hs(d.type)&&(yt=d.stateNode,Ln=!1),ki(a,u,d),Mu(d.stateNode),yt=m,Ln=v;break;case 5:Ot||$r(d,u);case 6:if(m=yt,v=Ln,yt=null,ki(a,u,d),yt=m,Ln=v,yt!==null)if(Ln)try{(yt.nodeType===9?yt.body:yt.nodeName==="HTML"?yt.ownerDocument.body:yt).removeChild(d.stateNode)}catch(E){ut(d,u,E)}else try{yt.removeChild(d.stateNode)}catch(E){ut(d,u,E)}break;case 18:yt!==null&&(Ln?(a=yt,K2(a.nodeType===9?a.body:a.nodeName==="HTML"?a.ownerDocument.body:a,d.stateNode),Pu(a)):K2(yt,d.stateNode));break;case 4:m=yt,v=Ln,yt=d.stateNode.containerInfo,Ln=!0,ki(a,u,d),yt=m,Ln=v;break;case 0:case 11:case 14:case 15:Ot||is(2,d,u),Ot||is(4,d,u),ki(a,u,d);break;case 1:Ot||($r(d,u),m=d.stateNode,typeof m.componentWillUnmount=="function"&&QA(d,u,m)),ki(a,u,d);break;case 21:ki(a,u,d);break;case 22:Ot=(m=Ot)||d.memoizedState!==null,ki(a,u,d),Ot=m;break;default:ki(a,u,d)}}function o2(a,u){if(u.memoizedState===null&&(a=u.alternate,a!==null&&(a=a.memoizedState,a!==null&&(a=a.dehydrated,a!==null))))try{Pu(a)}catch(d){ut(u,u.return,d)}}function FH(a){switch(a.tag){case 13:case 19:var u=a.stateNode;return u===null&&(u=a.stateNode=new n2),u;case 22:return a=a.stateNode,u=a._retryCache,u===null&&(u=a._retryCache=new n2),u;default:throw Error(r(435,a.tag))}}function ny(a,u){var d=FH(a);u.forEach(function(m){var v=QH.bind(null,a,m);d.has(m)||(d.add(m),m.then(v,v))})}function Gn(a,u){var d=u.deletions;if(d!==null)for(var m=0;m<d.length;m++){var v=d[m],E=a,N=u,D=N;e:for(;D!==null;){switch(D.tag){case 27:if(hs(D.type)){yt=D.stateNode,Ln=!1;break e}break;case 5:yt=D.stateNode,Ln=!1;break e;case 3:case 4:yt=D.stateNode.containerInfo,Ln=!0;break e}D=D.return}if(yt===null)throw Error(r(160));s2(E,N,v),yt=null,Ln=!1,E=v.alternate,E!==null&&(E.return=null),v.return=null}if(u.subtreeFlags&13878)for(u=u.child;u!==null;)a2(u,a),u=u.sibling}var _r=null;function a2(a,u){var d=a.alternate,m=a.flags;switch(a.tag){case 0:case 11:case 14:case 15:Gn(u,a),Kn(a),m&4&&(is(3,a,a.return),vu(3,a),is(5,a,a.return));break;case 1:Gn(u,a),Kn(a),m&512&&(Ot||d===null||$r(d,d.return)),m&64&&Ci&&(a=a.updateQueue,a!==null&&(m=a.callbacks,m!==null&&(d=a.shared.hiddenCallbacks,a.shared.hiddenCallbacks=d===null?m:d.concat(m))));break;case 26:var v=_r;if(Gn(u,a),Kn(a),m&512&&(Ot||d===null||$r(d,d.return)),m&4){var E=d!==null?d.memoizedState:null;if(m=a.memoizedState,d===null)if(m===null)if(a.stateNode===null){e:{m=a.type,d=a.memoizedProps,v=v.ownerDocument||v;t:switch(m){case"title":E=v.getElementsByTagName("title")[0],(!E||E[Qs]||E[Ze]||E.namespaceURI==="http://www.w3.org/2000/svg"||E.hasAttribute("itemprop"))&&(E=v.createElement(m),v.head.insertBefore(E,v.querySelector("head > title"))),un(E,m,d),E[Ze]=a,Bt(E),m=E;break e;case"link":var N=tM("link","href",v).get(m+(d.href||""));if(N){for(var D=0;D<N.length;D++)if(E=N[D],E.getAttribute("href")===(d.href==null||d.href===""?null:d.href)&&E.getAttribute("rel")===(d.rel==null?null:d.rel)&&E.getAttribute("title")===(d.title==null?null:d.title)&&E.getAttribute("crossorigin")===(d.crossOrigin==null?null:d.crossOrigin)){N.splice(D,1);break t}}E=v.createElement(m),un(E,m,d),v.head.appendChild(E);break;case"meta":if(N=tM("meta","content",v).get(m+(d.content||""))){for(D=0;D<N.length;D++)if(E=N[D],E.getAttribute("content")===(d.content==null?null:""+d.content)&&E.getAttribute("name")===(d.name==null?null:d.name)&&E.getAttribute("property")===(d.property==null?null:d.property)&&E.getAttribute("http-equiv")===(d.httpEquiv==null?null:d.httpEquiv)&&E.getAttribute("charset")===(d.charSet==null?null:d.charSet)){N.splice(D,1);break t}}E=v.createElement(m),un(E,m,d),v.head.appendChild(E);break;default:throw Error(r(468,m))}E[Ze]=a,Bt(E),m=E}a.stateNode=m}else nM(v,a.type,a.stateNode);else a.stateNode=eM(v,m,a.memoizedProps);else E!==m?(E===null?d.stateNode!==null&&(d=d.stateNode,d.parentNode.removeChild(d)):E.count--,m===null?nM(v,a.type,a.stateNode):eM(v,m,a.memoizedProps)):m===null&&a.stateNode!==null&&Qg(a,a.memoizedProps,d.memoizedProps)}break;case 27:Gn(u,a),Kn(a),m&512&&(Ot||d===null||$r(d,d.return)),d!==null&&m&4&&Qg(a,a.memoizedProps,d.memoizedProps);break;case 5:if(Gn(u,a),Kn(a),m&512&&(Ot||d===null||$r(d,d.return)),a.flags&32){v=a.stateNode;try{fa(v,"")}catch(ie){ut(a,a.return,ie)}}m&4&&a.stateNode!=null&&(v=a.memoizedProps,Qg(a,v,d!==null?d.memoizedProps:v)),m&1024&&(ty=!0);break;case 6:if(Gn(u,a),Kn(a),m&4){if(a.stateNode===null)throw Error(r(162));m=a.memoizedProps,d=a.stateNode;try{d.nodeValue=m}catch(ie){ut(a,a.return,ie)}}break;case 3:if(xd=null,v=_r,_r=vd(u.containerInfo),Gn(u,a),_r=v,Kn(a),m&4&&d!==null&&d.memoizedState.isDehydrated)try{Pu(u.containerInfo)}catch(ie){ut(a,a.return,ie)}ty&&(ty=!1,l2(a));break;case 4:m=_r,_r=vd(a.stateNode.containerInfo),Gn(u,a),Kn(a),_r=m;break;case 12:Gn(u,a),Kn(a);break;case 13:Gn(u,a),Kn(a),a.child.flags&8192&&a.memoizedState!==null!=(d!==null&&d.memoizedState!==null)&&(ly=Me()),m&4&&(m=a.updateQueue,m!==null&&(a.updateQueue=null,ny(a,m)));break;case 22:v=a.memoizedState!==null;var H=d!==null&&d.memoizedState!==null,te=Ci,ce=Ot;if(Ci=te||v,Ot=ce||H,Gn(u,a),Ot=ce,Ci=te,Kn(a),m&8192)e:for(u=a.stateNode,u._visibility=v?u._visibility&-2:u._visibility|1,v&&(d===null||H||Ci||Ot||po(a)),d=null,u=a;;){if(u.tag===5||u.tag===26){if(d===null){H=d=u;try{if(E=H.stateNode,v)N=E.style,typeof N.setProperty=="function"?N.setProperty("display","none","important"):N.display="none";else{D=H.stateNode;var de=H.memoizedProps.style,ne=de!=null&&de.hasOwnProperty("display")?de.display:null;D.style.display=ne==null||typeof ne=="boolean"?"":(""+ne).trim()}}catch(ie){ut(H,H.return,ie)}}}else if(u.tag===6){if(d===null){H=u;try{H.stateNode.nodeValue=v?"":H.memoizedProps}catch(ie){ut(H,H.return,ie)}}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===a)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===a)break e;for(;u.sibling===null;){if(u.return===null||u.return===a)break e;d===u&&(d=null),u=u.return}d===u&&(d=null),u.sibling.return=u.return,u=u.sibling}m&4&&(m=a.updateQueue,m!==null&&(d=m.retryQueue,d!==null&&(m.retryQueue=null,ny(a,d))));break;case 19:Gn(u,a),Kn(a),m&4&&(m=a.updateQueue,m!==null&&(a.updateQueue=null,ny(a,m)));break;case 30:break;case 21:break;default:Gn(u,a),Kn(a)}}function Kn(a){var u=a.flags;if(u&2){try{for(var d,m=a.return;m!==null;){if(e2(m)){d=m;break}m=m.return}if(d==null)throw Error(r(160));switch(d.tag){case 27:var v=d.stateNode,E=Jg(a);sd(a,E,v);break;case 5:var N=d.stateNode;d.flags&32&&(fa(N,""),d.flags&=-33);var D=Jg(a);sd(a,D,N);break;case 3:case 4:var H=d.stateNode.containerInfo,te=Jg(a);ey(a,te,H);break;default:throw Error(r(161))}}catch(ce){ut(a,a.return,ce)}a.flags&=-3}u&4096&&(a.flags&=-4097)}function l2(a){if(a.subtreeFlags&1024)for(a=a.child;a!==null;){var u=a;l2(u),u.tag===5&&u.flags&1024&&u.stateNode.reset(),a=a.sibling}}function ss(a,u){if(u.subtreeFlags&8772)for(u=u.child;u!==null;)r2(a,u.alternate,u),u=u.sibling}function po(a){for(a=a.child;a!==null;){var u=a;switch(u.tag){case 0:case 11:case 14:case 15:is(4,u,u.return),po(u);break;case 1:$r(u,u.return);var d=u.stateNode;typeof d.componentWillUnmount=="function"&&QA(u,u.return,d),po(u);break;case 27:Mu(u.stateNode);case 26:case 5:$r(u,u.return),po(u);break;case 22:u.memoizedState===null&&po(u);break;case 30:po(u);break;default:po(u)}a=a.sibling}}function as(a,u,d){for(d=d&&(u.subtreeFlags&8772)!==0,u=u.child;u!==null;){var m=u.alternate,v=a,E=u,N=E.flags;switch(E.tag){case 0:case 11:case 15:as(v,E,d),vu(4,E);break;case 1:if(as(v,E,d),m=E,v=m.stateNode,typeof v.componentDidMount=="function")try{v.componentDidMount()}catch(te){ut(m,m.return,te)}if(m=E,v=m.updateQueue,v!==null){var D=m.stateNode;try{var H=v.shared.hiddenCallbacks;if(H!==null)for(v.shared.hiddenCallbacks=null,v=0;v<H.length;v++)BT(H[v],D)}catch(te){ut(m,m.return,te)}}d&&N&64&&ZA(E),bu(E,E.return);break;case 27:t2(E);case 26:case 5:as(v,E,d),d&&m===null&&N&4&&JA(E),bu(E,E.return);break;case 12:as(v,E,d);break;case 13:as(v,E,d),d&&N&4&&o2(v,E);break;case 22:E.memoizedState===null&&as(v,E,d),bu(E,E.return);break;case 30:break;default:as(v,E,d)}u=u.sibling}}function ry(a,u){var d=null;a!==null&&a.memoizedState!==null&&a.memoizedState.cachePool!==null&&(d=a.memoizedState.cachePool.pool),a=null,u.memoizedState!==null&&u.memoizedState.cachePool!==null&&(a=u.memoizedState.cachePool.pool),a!==d&&(a!=null&&a.refCount++,d!=null&&iu(d))}function iy(a,u){a=null,u.alternate!==null&&(a=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==a&&(u.refCount++,a!=null&&iu(a))}function Gr(a,u,d,m){if(u.subtreeFlags&10256)for(u=u.child;u!==null;)u2(a,u,d,m),u=u.sibling}function u2(a,u,d,m){var v=u.flags;switch(u.tag){case 0:case 11:case 15:Gr(a,u,d,m),v&2048&&vu(9,u);break;case 1:Gr(a,u,d,m);break;case 3:Gr(a,u,d,m),v&2048&&(a=null,u.alternate!==null&&(a=u.alternate.memoizedState.cache),u=u.memoizedState.cache,u!==a&&(u.refCount++,a!=null&&iu(a)));break;case 12:if(v&2048){Gr(a,u,d,m),a=u.stateNode;try{var E=u.memoizedProps,N=E.id,D=E.onPostCommit;typeof D=="function"&&D(N,u.alternate===null?"mount":"update",a.passiveEffectDuration,-0)}catch(H){ut(u,u.return,H)}}else Gr(a,u,d,m);break;case 13:Gr(a,u,d,m);break;case 23:break;case 22:E=u.stateNode,N=u.alternate,u.memoizedState!==null?E._visibility&2?Gr(a,u,d,m):xu(a,u):E._visibility&2?Gr(a,u,d,m):(E._visibility|=2,_a(a,u,d,m,(u.subtreeFlags&10256)!==0)),v&2048&&ry(N,u);break;case 24:Gr(a,u,d,m),v&2048&&iy(u.alternate,u);break;default:Gr(a,u,d,m)}}function _a(a,u,d,m,v){for(v=v&&(u.subtreeFlags&10256)!==0,u=u.child;u!==null;){var E=a,N=u,D=d,H=m,te=N.flags;switch(N.tag){case 0:case 11:case 15:_a(E,N,D,H,v),vu(8,N);break;case 23:break;case 22:var ce=N.stateNode;N.memoizedState!==null?ce._visibility&2?_a(E,N,D,H,v):xu(E,N):(ce._visibility|=2,_a(E,N,D,H,v)),v&&te&2048&&ry(N.alternate,N);break;case 24:_a(E,N,D,H,v),v&&te&2048&&iy(N.alternate,N);break;default:_a(E,N,D,H,v)}u=u.sibling}}function xu(a,u){if(u.subtreeFlags&10256)for(u=u.child;u!==null;){var d=a,m=u,v=m.flags;switch(m.tag){case 22:xu(d,m),v&2048&&ry(m.alternate,m);break;case 24:xu(d,m),v&2048&&iy(m.alternate,m);break;default:xu(d,m)}u=u.sibling}}var wu=8192;function Ra(a){if(a.subtreeFlags&wu)for(a=a.child;a!==null;)c2(a),a=a.sibling}function c2(a){switch(a.tag){case 26:Ra(a),a.flags&wu&&a.memoizedState!==null&&M8(_r,a.memoizedState,a.memoizedProps);break;case 5:Ra(a);break;case 3:case 4:var u=_r;_r=vd(a.stateNode.containerInfo),Ra(a),_r=u;break;case 22:a.memoizedState===null&&(u=a.alternate,u!==null&&u.memoizedState!==null?(u=wu,wu=16777216,Ra(a),wu=u):Ra(a));break;default:Ra(a)}}function f2(a){var u=a.alternate;if(u!==null&&(a=u.child,a!==null)){u.child=null;do u=a.sibling,a.sibling=null,a=u;while(a!==null)}}function Su(a){var u=a.deletions;if((a.flags&16)!==0){if(u!==null)for(var d=0;d<u.length;d++){var m=u[d];Zt=m,h2(m,a)}f2(a)}if(a.subtreeFlags&10256)for(a=a.child;a!==null;)d2(a),a=a.sibling}function d2(a){switch(a.tag){case 0:case 11:case 15:Su(a),a.flags&2048&&is(9,a,a.return);break;case 3:Su(a);break;case 12:Su(a);break;case 22:var u=a.stateNode;a.memoizedState!==null&&u._visibility&2&&(a.return===null||a.return.tag!==13)?(u._visibility&=-3,od(a)):Su(a);break;default:Su(a)}}function od(a){var u=a.deletions;if((a.flags&16)!==0){if(u!==null)for(var d=0;d<u.length;d++){var m=u[d];Zt=m,h2(m,a)}f2(a)}for(a=a.child;a!==null;){switch(u=a,u.tag){case 0:case 11:case 15:is(8,u,u.return),od(u);break;case 22:d=u.stateNode,d._visibility&2&&(d._visibility&=-3,od(u));break;default:od(u)}a=a.sibling}}function h2(a,u){for(;Zt!==null;){var d=Zt;switch(d.tag){case 0:case 11:case 15:is(8,d,u);break;case 23:case 22:if(d.memoizedState!==null&&d.memoizedState.cachePool!==null){var m=d.memoizedState.cachePool.pool;m!=null&&m.refCount++}break;case 24:iu(d.memoizedState.cache)}if(m=d.child,m!==null)m.return=d,Zt=m;else e:for(d=a;Zt!==null;){m=Zt;var v=m.sibling,E=m.return;if(i2(m),m===d){Zt=null;break e}if(v!==null){v.return=E,Zt=v;break e}Zt=E}}}var UH={getCacheForType:function(a){var u=yn(Gt),d=u.data.get(a);return d===void 0&&(d=a(),u.data.set(a,d)),d}},$H=typeof WeakMap=="function"?WeakMap:Map,nt=0,dt=null,Ye=null,Qe=0,rt=0,Yn=null,ls=!1,Da=!1,sy=!1,Ti=0,At=0,us=0,mo=0,oy=0,dr=0,Oa=0,Eu=null,Pn=null,ay=!1,ly=0,ad=1/0,ld=null,cs=null,ln=0,fs=null,ja=null,La=0,uy=0,cy=null,p2=null,Cu=0,fy=null;function Wn(){if((nt&2)!==0&&Qe!==0)return Qe&-Qe;if(j.T!==null){var a=Sa;return a!==0?a:vy()}return Se()}function m2(){dr===0&&(dr=(Qe&536870912)===0||et?sa():536870912);var a=fr.current;return a!==null&&(a.flags|=32),dr}function Xn(a,u,d){(a===dt&&(rt===2||rt===9)||a.cancelPendingCommit!==null)&&(Pa(a,0),ds(a,Qe,dr,!1)),li(a,d),((nt&2)===0||a!==dt)&&(a===dt&&((nt&2)===0&&(mo|=d),At===4&&ds(a,Qe,dr,!1)),Kr(a))}function g2(a,u,d){if((nt&6)!==0)throw Error(r(327));var m=!d&&(u&124)===0&&(u&a.expiredLanes)===0||Hr(a,u),v=m?YH(a,u):py(a,u,!0),E=m;do{if(v===0){Da&&!m&&ds(a,u,0,!1);break}else{if(d=a.current.alternate,E&&!GH(d)){v=py(a,u,!1),E=!1;continue}if(v===2){if(E=u,a.errorRecoveryDisabledLanes&E)var N=0;else N=a.pendingLanes&-536870913,N=N!==0?N:N&536870912?536870912:0;if(N!==0){u=N;e:{var D=a;v=Eu;var H=D.current.memoizedState.isDehydrated;if(H&&(Pa(D,N).flags|=256),N=py(D,N,!1),N!==2){if(sy&&!H){D.errorRecoveryDisabledLanes|=E,mo|=E,v=4;break e}E=Pn,Pn=v,E!==null&&(Pn===null?Pn=E:Pn.push.apply(Pn,E))}v=N}if(E=!1,v!==2)continue}}if(v===1){Pa(a,0),ds(a,u,0,!0);break}e:{switch(m=a,E=v,E){case 0:case 1:throw Error(r(345));case 4:if((u&4194048)!==u)break;case 6:ds(m,u,dr,!ls);break e;case 2:Pn=null;break;case 3:case 5:break;default:throw Error(r(329))}if((u&62914560)===u&&(v=ly+300-Me(),10<v)){if(ds(m,u,dr,!ls),Vr(m,0,!0)!==0)break e;m.timeoutHandle=$2(y2.bind(null,m,d,Pn,ld,ay,u,dr,mo,Oa,ls,E,2,-0,0),v);break e}y2(m,d,Pn,ld,ay,u,dr,mo,Oa,ls,E,0,-0,0)}}break}while(!0);Kr(a)}function y2(a,u,d,m,v,E,N,D,H,te,ce,de,ne,ie){if(a.timeoutHandle=-1,de=u.subtreeFlags,(de&8192||(de&16785408)===16785408)&&(Ru={stylesheets:null,count:0,unsuspend:A8},c2(u),de=N8(),de!==null)){a.cancelPendingCommit=de(C2.bind(null,a,u,E,d,m,v,N,D,H,ce,1,ne,ie)),ds(a,E,N,!te);return}C2(a,u,E,d,m,v,N,D,H)}function GH(a){for(var u=a;;){var d=u.tag;if((d===0||d===11||d===15)&&u.flags&16384&&(d=u.updateQueue,d!==null&&(d=d.stores,d!==null)))for(var m=0;m<d.length;m++){var v=d[m],E=v.getSnapshot;v=v.value;try{if(!Un(E(),v))return!1}catch{return!1}}if(d=u.child,u.subtreeFlags&16384&&d!==null)d.return=u,u=d;else{if(u===a)break;for(;u.sibling===null;){if(u.return===null||u.return===a)return!0;u=u.return}u.sibling.return=u.return,u=u.sibling}}return!0}function ds(a,u,d,m){u&=~oy,u&=~mo,a.suspendedLanes|=u,a.pingedLanes&=~u,m&&(a.warmLanes|=u),m=a.expirationTimes;for(var v=u;0<v;){var E=31-wt(v),N=1<<E;m[E]=-1,v&=~N}d!==0&&oe(a,d,u)}function ud(){return(nt&6)===0?(ku(0),!1):!0}function dy(){if(Ye!==null){if(rt===0)var a=Ye.return;else a=Ye,vi=lo=null,Ng(a),Ma=null,mu=0,a=Ye;for(;a!==null;)XA(a.alternate,a),a=a.return;Ye=null}}function Pa(a,u){var d=a.timeoutHandle;d!==-1&&(a.timeoutHandle=-1,c8(d)),d=a.cancelPendingCommit,d!==null&&(a.cancelPendingCommit=null,d()),dy(),dt=a,Ye=d=mi(a.current,null),Qe=u,rt=0,Yn=null,ls=!1,Da=Hr(a,u),sy=!1,Oa=dr=oy=mo=us=At=0,Pn=Eu=null,ay=!1,(u&8)!==0&&(u|=u&32);var m=a.entangledLanes;if(m!==0)for(a=a.entanglements,m&=u;0<m;){var v=31-wt(m),E=1<<v;u|=a[v],m&=~E}return Ti=u,Rf(),d}function v2(a,u){Ge=null,j.H=Xf,u===ou||u===qf?(u=LT(),rt=3):u===DT?(u=LT(),rt=4):rt=u===PA?8:u!==null&&typeof u=="object"&&typeof u.then=="function"?6:1,Yn=u,Ye===null&&(At=1,td(a,ar(u,a.current)))}function b2(){var a=j.H;return j.H=Xf,a===null?Xf:a}function x2(){var a=j.A;return j.A=UH,a}function hy(){At=4,ls||(Qe&4194048)!==Qe&&fr.current!==null||(Da=!0),(us&134217727)===0&&(mo&134217727)===0||dt===null||ds(dt,Qe,dr,!1)}function py(a,u,d){var m=nt;nt|=2;var v=b2(),E=x2();(dt!==a||Qe!==u)&&(ld=null,Pa(a,u)),u=!1;var N=At;e:do try{if(rt!==0&&Ye!==null){var D=Ye,H=Yn;switch(rt){case 8:dy(),N=6;break e;case 3:case 2:case 9:case 6:fr.current===null&&(u=!0);var te=rt;if(rt=0,Yn=null,Ba(a,D,H,te),d&&Da){N=0;break e}break;default:te=rt,rt=0,Yn=null,Ba(a,D,H,te)}}KH(),N=At;break}catch(ce){v2(a,ce)}while(!0);return u&&a.shellSuspendCounter++,vi=lo=null,nt=m,j.H=v,j.A=E,Ye===null&&(dt=null,Qe=0,Rf()),N}function KH(){for(;Ye!==null;)w2(Ye)}function YH(a,u){var d=nt;nt|=2;var m=b2(),v=x2();dt!==a||Qe!==u?(ld=null,ad=Me()+500,Pa(a,u)):Da=Hr(a,u);e:do try{if(rt!==0&&Ye!==null){u=Ye;var E=Yn;t:switch(rt){case 1:rt=0,Yn=null,Ba(a,u,E,1);break;case 2:case 9:if(OT(E)){rt=0,Yn=null,S2(u);break}u=function(){rt!==2&&rt!==9||dt!==a||(rt=7),Kr(a)},E.then(u,u);break e;case 3:rt=7;break e;case 4:rt=5;break e;case 7:OT(E)?(rt=0,Yn=null,S2(u)):(rt=0,Yn=null,Ba(a,u,E,7));break;case 5:var N=null;switch(Ye.tag){case 26:N=Ye.memoizedState;case 5:case 27:var D=Ye;if(!N||rM(N)){rt=0,Yn=null;var H=D.sibling;if(H!==null)Ye=H;else{var te=D.return;te!==null?(Ye=te,cd(te)):Ye=null}break t}}rt=0,Yn=null,Ba(a,u,E,5);break;case 6:rt=0,Yn=null,Ba(a,u,E,6);break;case 8:dy(),At=6;break e;default:throw Error(r(462))}}WH();break}catch(ce){v2(a,ce)}while(!0);return vi=lo=null,j.H=m,j.A=v,nt=d,Ye!==null?0:(dt=null,Qe=0,Rf(),At)}function WH(){for(;Ye!==null&&!we();)w2(Ye)}function w2(a){var u=YA(a.alternate,a,Ti);a.memoizedProps=a.pendingProps,u===null?cd(a):Ye=u}function S2(a){var u=a,d=u.alternate;switch(u.tag){case 15:case 0:u=HA(d,u,u.pendingProps,u.type,void 0,Qe);break;case 11:u=HA(d,u,u.pendingProps,u.type.render,u.ref,Qe);break;case 5:Ng(u);default:XA(d,u),u=Ye=ET(u,Ti),u=YA(d,u,Ti)}a.memoizedProps=a.pendingProps,u===null?cd(a):Ye=u}function Ba(a,u,d,m){vi=lo=null,Ng(u),Ma=null,mu=0;var v=u.return;try{if(IH(a,v,u,d,Qe)){At=1,td(a,ar(d,a.current)),Ye=null;return}}catch(E){if(v!==null)throw Ye=v,E;At=1,td(a,ar(d,a.current)),Ye=null;return}u.flags&32768?(et||m===1?a=!0:Da||(Qe&536870912)!==0?a=!1:(ls=a=!0,(m===2||m===9||m===3||m===6)&&(m=fr.current,m!==null&&m.tag===13&&(m.flags|=16384))),E2(u,a)):cd(u)}function cd(a){var u=a;do{if((u.flags&32768)!==0){E2(u,ls);return}a=u.return;var d=qH(u.alternate,u,Ti);if(d!==null){Ye=d;return}if(u=u.sibling,u!==null){Ye=u;return}Ye=u=a}while(u!==null);At===0&&(At=5)}function E2(a,u){do{var d=VH(a.alternate,a);if(d!==null){d.flags&=32767,Ye=d;return}if(d=a.return,d!==null&&(d.flags|=32768,d.subtreeFlags=0,d.deletions=null),!u&&(a=a.sibling,a!==null)){Ye=a;return}Ye=a=d}while(a!==null);At=6,Ye=null}function C2(a,u,d,m,v,E,N,D,H){a.cancelPendingCommit=null;do fd();while(ln!==0);if((nt&6)!==0)throw Error(r(327));if(u!==null){if(u===a.current)throw Error(r(177));if(E=u.lanes|u.childLanes,E|=ig,ue(a,d,E,N,D,H),a===dt&&(Ye=dt=null,Qe=0),ja=u,fs=a,La=d,uy=E,cy=v,p2=m,(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?(a.callbackNode=null,a.callbackPriority=0,JH(pn,function(){return N2(),null})):(a.callbackNode=null,a.callbackPriority=0),m=(u.flags&13878)!==0,(u.subtreeFlags&13878)!==0||m){m=j.T,j.T=null,v=z.p,z.p=2,N=nt,nt|=4;try{HH(a,u,d)}finally{nt=N,z.p=v,j.T=m}}ln=1,k2(),T2(),A2()}}function k2(){if(ln===1){ln=0;var a=fs,u=ja,d=(u.flags&13878)!==0;if((u.subtreeFlags&13878)!==0||d){d=j.T,j.T=null;var m=z.p;z.p=2;var v=nt;nt|=4;try{a2(u,a);var E=Ty,N=hT(a.containerInfo),D=E.focusedElem,H=E.selectionRange;if(N!==D&&D&&D.ownerDocument&&dT(D.ownerDocument.documentElement,D)){if(H!==null&&Jm(D)){var te=H.start,ce=H.end;if(ce===void 0&&(ce=te),"selectionStart"in D)D.selectionStart=te,D.selectionEnd=Math.min(ce,D.value.length);else{var de=D.ownerDocument||document,ne=de&&de.defaultView||window;if(ne.getSelection){var ie=ne.getSelection(),Be=D.textContent.length,Oe=Math.min(H.start,Be),lt=H.end===void 0?Oe:Math.min(H.end,Be);!ie.extend&&Oe>lt&&(N=lt,lt=Oe,Oe=N);var Z=fT(D,Oe),Y=fT(D,lt);if(Z&&Y&&(ie.rangeCount!==1||ie.anchorNode!==Z.node||ie.anchorOffset!==Z.offset||ie.focusNode!==Y.node||ie.focusOffset!==Y.offset)){var ee=de.createRange();ee.setStart(Z.node,Z.offset),ie.removeAllRanges(),Oe>lt?(ie.addRange(ee),ie.extend(Y.node,Y.offset)):(ee.setEnd(Y.node,Y.offset),ie.addRange(ee))}}}}for(de=[],ie=D;ie=ie.parentNode;)ie.nodeType===1&&de.push({element:ie,left:ie.scrollLeft,top:ie.scrollTop});for(typeof D.focus=="function"&&D.focus(),D=0;D<de.length;D++){var fe=de[D];fe.element.scrollLeft=fe.left,fe.element.scrollTop=fe.top}}Ed=!!ky,Ty=ky=null}finally{nt=v,z.p=m,j.T=d}}a.current=u,ln=2}}function T2(){if(ln===2){ln=0;var a=fs,u=ja,d=(u.flags&8772)!==0;if((u.subtreeFlags&8772)!==0||d){d=j.T,j.T=null;var m=z.p;z.p=2;var v=nt;nt|=4;try{r2(a,u.alternate,u)}finally{nt=v,z.p=m,j.T=d}}ln=3}}function A2(){if(ln===4||ln===3){ln=0,tt();var a=fs,u=ja,d=La,m=p2;(u.subtreeFlags&10256)!==0||(u.flags&10256)!==0?ln=5:(ln=0,ja=fs=null,M2(a,a.pendingLanes));var v=a.pendingLanes;if(v===0&&(cs=null),ye(d),u=u.stateNode,gt&&typeof gt.onCommitFiberRoot=="function")try{gt.onCommitFiberRoot(mn,u,void 0,(u.current.flags&128)===128)}catch{}if(m!==null){u=j.T,v=z.p,z.p=2,j.T=null;try{for(var E=a.onRecoverableError,N=0;N<m.length;N++){var D=m[N];E(D.value,{componentStack:D.stack})}}finally{j.T=u,z.p=v}}(La&3)!==0&&fd(),Kr(a),v=a.pendingLanes,(d&4194090)!==0&&(v&42)!==0?a===fy?Cu++:(Cu=0,fy=a):Cu=0,ku(0)}}function M2(a,u){(a.pooledCacheLanes&=u)===0&&(u=a.pooledCache,u!=null&&(a.pooledCache=null,iu(u)))}function fd(a){return k2(),T2(),A2(),N2()}function N2(){if(ln!==5)return!1;var a=fs,u=uy;uy=0;var d=ye(La),m=j.T,v=z.p;try{z.p=32>d?32:d,j.T=null,d=cy,cy=null;var E=fs,N=La;if(ln=0,ja=fs=null,La=0,(nt&6)!==0)throw Error(r(331));var D=nt;if(nt|=4,d2(E.current),u2(E,E.current,N,d),nt=D,ku(0,!1),gt&&typeof gt.onPostCommitFiberRoot=="function")try{gt.onPostCommitFiberRoot(mn,E)}catch{}return!0}finally{z.p=v,j.T=m,M2(a,u)}}function _2(a,u,d){u=ar(d,u),u=Fg(a.stateNode,u,2),a=es(a,u,2),a!==null&&(li(a,2),Kr(a))}function ut(a,u,d){if(a.tag===3)_2(a,a,d);else for(;u!==null;){if(u.tag===3){_2(u,a,d);break}else if(u.tag===1){var m=u.stateNode;if(typeof u.type.getDerivedStateFromError=="function"||typeof m.componentDidCatch=="function"&&(cs===null||!cs.has(m))){a=ar(d,a),d=jA(2),m=es(u,d,2),m!==null&&(LA(d,m,u,a),li(m,2),Kr(m));break}}u=u.return}}function my(a,u,d){var m=a.pingCache;if(m===null){m=a.pingCache=new $H;var v=new Set;m.set(u,v)}else v=m.get(u),v===void 0&&(v=new Set,m.set(u,v));v.has(d)||(sy=!0,v.add(d),a=XH.bind(null,a,u,d),u.then(a,a))}function XH(a,u,d){var m=a.pingCache;m!==null&&m.delete(u),a.pingedLanes|=a.suspendedLanes&d,a.warmLanes&=~d,dt===a&&(Qe&d)===d&&(At===4||At===3&&(Qe&62914560)===Qe&&300>Me()-ly?(nt&2)===0&&Pa(a,0):oy|=d,Oa===Qe&&(Oa=0)),Kr(a)}function R2(a,u){u===0&&(u=oa()),a=va(a,u),a!==null&&(li(a,u),Kr(a))}function ZH(a){var u=a.memoizedState,d=0;u!==null&&(d=u.retryLane),R2(a,d)}function QH(a,u){var d=0;switch(a.tag){case 13:var m=a.stateNode,v=a.memoizedState;v!==null&&(d=v.retryLane);break;case 19:m=a.stateNode;break;case 22:m=a.stateNode._retryCache;break;default:throw Error(r(314))}m!==null&&m.delete(u),R2(a,d)}function JH(a,u){return Te(a,u)}var dd=null,Ia=null,gy=!1,hd=!1,yy=!1,go=0;function Kr(a){a!==Ia&&a.next===null&&(Ia===null?dd=Ia=a:Ia=Ia.next=a),hd=!0,gy||(gy=!0,t8())}function ku(a,u){if(!yy&&hd){yy=!0;do for(var d=!1,m=dd;m!==null;){if(a!==0){var v=m.pendingLanes;if(v===0)var E=0;else{var N=m.suspendedLanes,D=m.pingedLanes;E=(1<<31-wt(42|a)+1)-1,E&=v&~(N&~D),E=E&201326741?E&201326741|1:E?E|2:0}E!==0&&(d=!0,L2(m,E))}else E=Qe,E=Vr(m,m===dt?E:0,m.cancelPendingCommit!==null||m.timeoutHandle!==-1),(E&3)===0||Hr(m,E)||(d=!0,L2(m,E));m=m.next}while(d);yy=!1}}function e8(){D2()}function D2(){hd=gy=!1;var a=0;go!==0&&(u8()&&(a=go),go=0);for(var u=Me(),d=null,m=dd;m!==null;){var v=m.next,E=O2(m,u);E===0?(m.next=null,d===null?dd=v:d.next=v,v===null&&(Ia=d)):(d=m,(a!==0||(E&3)!==0)&&(hd=!0)),m=v}ku(a)}function O2(a,u){for(var d=a.suspendedLanes,m=a.pingedLanes,v=a.expirationTimes,E=a.pendingLanes&-62914561;0<E;){var N=31-wt(E),D=1<<N,H=v[N];H===-1?((D&d)===0||(D&m)!==0)&&(v[N]=Pl(D,u)):H<=u&&(a.expiredLanes|=D),E&=~D}if(u=dt,d=Qe,d=Vr(a,a===u?d:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),m=a.callbackNode,d===0||a===u&&(rt===2||rt===9)||a.cancelPendingCommit!==null)return m!==null&&m!==null&&be(m),a.callbackNode=null,a.callbackPriority=0;if((d&3)===0||Hr(a,d)){if(u=d&-d,u===a.callbackPriority)return u;switch(m!==null&&be(m),ye(d)){case 2:case 8:d=_n;break;case 32:d=pn;break;case 268435456:d=ft;break;default:d=pn}return m=j2.bind(null,a),d=Te(d,m),a.callbackPriority=u,a.callbackNode=d,u}return m!==null&&m!==null&&be(m),a.callbackPriority=2,a.callbackNode=null,2}function j2(a,u){if(ln!==0&&ln!==5)return a.callbackNode=null,a.callbackPriority=0,null;var d=a.callbackNode;if(fd()&&a.callbackNode!==d)return null;var m=Qe;return m=Vr(a,a===dt?m:0,a.cancelPendingCommit!==null||a.timeoutHandle!==-1),m===0?null:(g2(a,m,u),O2(a,Me()),a.callbackNode!=null&&a.callbackNode===d?j2.bind(null,a):null)}function L2(a,u){if(fd())return null;g2(a,u,!0)}function t8(){f8(function(){(nt&6)!==0?Te(sn,e8):D2()})}function vy(){return go===0&&(go=sa()),go}function P2(a){return a==null||typeof a=="symbol"||typeof a=="boolean"?null:typeof a=="function"?a:Cf(""+a)}function B2(a,u){var d=u.ownerDocument.createElement("input");return d.name=u.name,d.value=u.value,a.id&&d.setAttribute("form",a.id),u.parentNode.insertBefore(d,u),a=new FormData(a),d.parentNode.removeChild(d),a}function n8(a,u,d,m,v){if(u==="submit"&&d&&d.stateNode===v){var E=P2((v[ht]||null).action),N=m.submitter;N&&(u=(u=N[ht]||null)?P2(u.formAction):N.getAttribute("formAction"),u!==null&&(E=u,N=null));var D=new Mf("action","action",null,m,v);a.push({event:D,listeners:[{instance:null,listener:function(){if(m.defaultPrevented){if(go!==0){var H=N?B2(v,N):new FormData(v);Ig(d,{pending:!0,data:H,method:v.method,action:E},null,H)}}else typeof E=="function"&&(D.preventDefault(),H=N?B2(v,N):new FormData(v),Ig(d,{pending:!0,data:H,method:v.method,action:E},E,H))},currentTarget:v}]})}}for(var by=0;by<rg.length;by++){var xy=rg[by],r8=xy.toLowerCase(),i8=xy[0].toUpperCase()+xy.slice(1);Nr(r8,"on"+i8)}Nr(gT,"onAnimationEnd"),Nr(yT,"onAnimationIteration"),Nr(vT,"onAnimationStart"),Nr("dblclick","onDoubleClick"),Nr("focusin","onFocus"),Nr("focusout","onBlur"),Nr(wH,"onTransitionRun"),Nr(SH,"onTransitionStart"),Nr(EH,"onTransitionCancel"),Nr(bT,"onTransitionEnd"),Wi("onMouseEnter",["mouseout","mouseover"]),Wi("onMouseLeave",["mouseout","mouseover"]),Wi("onPointerEnter",["pointerout","pointerover"]),Wi("onPointerLeave",["pointerout","pointerover"]),fi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" ")),fi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" ")),fi("onBeforeInput",["compositionend","keypress","textInput","paste"]),fi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" ")),fi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" ")),fi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Tu="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),s8=new Set("beforetoggle cancel close invalid load scroll scrollend toggle".split(" ").concat(Tu));function I2(a,u){u=(u&4)!==0;for(var d=0;d<a.length;d++){var m=a[d],v=m.event;m=m.listeners;e:{var E=void 0;if(u)for(var N=m.length-1;0<=N;N--){var D=m[N],H=D.instance,te=D.currentTarget;if(D=D.listener,H!==E&&v.isPropagationStopped())break e;E=D,v.currentTarget=te;try{E(v)}catch(ce){ed(ce)}v.currentTarget=null,E=H}else for(N=0;N<m.length;N++){if(D=m[N],H=D.instance,te=D.currentTarget,D=D.listener,H!==E&&v.isPropagationStopped())break e;E=D,v.currentTarget=te;try{E(v)}catch(ce){ed(ce)}v.currentTarget=null,E=H}}}}function We(a,u){var d=u[st];d===void 0&&(d=u[st]=new Set);var m=a+"__bubble";d.has(m)||(z2(u,a,2,!1),d.add(m))}function wy(a,u,d){var m=0;u&&(m|=4),z2(d,a,m,u)}var pd="_reactListening"+Math.random().toString(36).slice(2);function Sy(a){if(!a[pd]){a[pd]=!0,yf.forEach(function(d){d!=="selectionchange"&&(s8.has(d)||wy(d,!1,a),wy(d,!0,a))});var u=a.nodeType===9?a:a.ownerDocument;u===null||u[pd]||(u[pd]=!0,wy("selectionchange",!1,u))}}function z2(a,u,d,m){switch(uM(u)){case 2:var v=D8;break;case 8:v=O8;break;default:v=Py}d=v.bind(null,u,d,a),v=void 0,!Um||u!=="touchstart"&&u!=="touchmove"&&u!=="wheel"||(v=!0),m?v!==void 0?a.addEventListener(u,d,{capture:!0,passive:v}):a.addEventListener(u,d,!0):v!==void 0?a.addEventListener(u,d,{passive:v}):a.addEventListener(u,d,!1)}function Ey(a,u,d,m,v){var E=m;if((u&1)===0&&(u&2)===0&&m!==null)e:for(;;){if(m===null)return;var N=m.tag;if(N===3||N===4){var D=m.stateNode.containerInfo;if(D===v)break;if(N===4)for(N=m.return;N!==null;){var H=N.tag;if((H===3||H===4)&&N.stateNode.containerInfo===v)return;N=N.return}for(;D!==null;){if(N=Ki(D),N===null)return;if(H=N.tag,H===5||H===6||H===26||H===27){m=E=N;continue e}D=D.parentNode}}m=m.return}Gk(function(){var te=E,ce=Hm(d),de=[];e:{var ne=xT.get(a);if(ne!==void 0){var ie=Mf,Be=a;switch(a){case"keypress":if(Tf(d)===0)break e;case"keydown":case"keyup":ie=JV;break;case"focusin":Be="focus",ie=Ym;break;case"focusout":Be="blur",ie=Ym;break;case"beforeblur":case"afterblur":ie=Ym;break;case"click":if(d.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":ie=Wk;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":ie=VV;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":ie=nH;break;case gT:case yT:case vT:ie=UV;break;case bT:ie=iH;break;case"scroll":case"scrollend":ie=zV;break;case"wheel":ie=oH;break;case"copy":case"cut":case"paste":ie=GV;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":ie=Zk;break;case"toggle":case"beforetoggle":ie=lH}var Oe=(u&4)!==0,lt=!Oe&&(a==="scroll"||a==="scrollend"),Z=Oe?ne!==null?ne+"Capture":null:ne;Oe=[];for(var Y=te,ee;Y!==null;){var fe=Y;if(ee=fe.stateNode,fe=fe.tag,fe!==5&&fe!==26&&fe!==27||ee===null||Z===null||(fe=$l(Y,Z),fe!=null&&Oe.push(Au(Y,fe,ee))),lt)break;Y=Y.return}0<Oe.length&&(ne=new ie(ne,Be,null,d,ce),de.push({event:ne,listeners:Oe}))}}if((u&7)===0){e:{if(ne=a==="mouseover"||a==="pointerover",ie=a==="mouseout"||a==="pointerout",ne&&d!==Vm&&(Be=d.relatedTarget||d.fromElement)&&(Ki(Be)||Be[Ve]))break e;if((ie||ne)&&(ne=ce.window===ce?ce:(ne=ce.ownerDocument)?ne.defaultView||ne.parentWindow:window,ie?(Be=d.relatedTarget||d.toElement,ie=te,Be=Be?Ki(Be):null,Be!==null&&(lt=s(Be),Oe=Be.tag,Be!==lt||Oe!==5&&Oe!==27&&Oe!==6)&&(Be=null)):(ie=null,Be=te),ie!==Be)){if(Oe=Wk,fe="onMouseLeave",Z="onMouseEnter",Y="mouse",(a==="pointerout"||a==="pointerover")&&(Oe=Zk,fe="onPointerLeave",Z="onPointerEnter",Y="pointer"),lt=ie==null?ne:Yi(ie),ee=Be==null?ne:Yi(Be),ne=new Oe(fe,Y+"leave",ie,d,ce),ne.target=lt,ne.relatedTarget=ee,fe=null,Ki(ce)===te&&(Oe=new Oe(Z,Y+"enter",Be,d,ce),Oe.target=ee,Oe.relatedTarget=lt,fe=Oe),lt=fe,ie&&Be)t:{for(Oe=ie,Z=Be,Y=0,ee=Oe;ee;ee=za(ee))Y++;for(ee=0,fe=Z;fe;fe=za(fe))ee++;for(;0<Y-ee;)Oe=za(Oe),Y--;for(;0<ee-Y;)Z=za(Z),ee--;for(;Y--;){if(Oe===Z||Z!==null&&Oe===Z.alternate)break t;Oe=za(Oe),Z=za(Z)}Oe=null}else Oe=null;ie!==null&&q2(de,ne,ie,Oe,!1),Be!==null&&lt!==null&&q2(de,lt,Be,Oe,!0)}}e:{if(ne=te?Yi(te):window,ie=ne.nodeName&&ne.nodeName.toLowerCase(),ie==="select"||ie==="input"&&ne.type==="file")var Ee=sT;else if(rT(ne))if(oT)Ee=vH;else{Ee=gH;var Ke=mH}else ie=ne.nodeName,!ie||ie.toLowerCase()!=="input"||ne.type!=="checkbox"&&ne.type!=="radio"?te&&qm(te.elementType)&&(Ee=sT):Ee=yH;if(Ee&&(Ee=Ee(a,te))){iT(de,Ee,d,ce);break e}Ke&&Ke(a,ne,te),a==="focusout"&&te&&ne.type==="number"&&te.memoizedProps.value!=null&&Ul(ne,"number",ne.value)}switch(Ke=te?Yi(te):window,a){case"focusin":(rT(Ke)||Ke.contentEditable==="true")&&(ma=Ke,eg=te,Jl=null);break;case"focusout":Jl=eg=ma=null;break;case"mousedown":tg=!0;break;case"contextmenu":case"mouseup":case"dragend":tg=!1,pT(de,d,ce);break;case"selectionchange":if(xH)break;case"keydown":case"keyup":pT(de,d,ce)}var Ne;if(Xm)e:{switch(a){case"compositionstart":var Le="onCompositionStart";break e;case"compositionend":Le="onCompositionEnd";break e;case"compositionupdate":Le="onCompositionUpdate";break e}Le=void 0}else pa?tT(a,d)&&(Le="onCompositionEnd"):a==="keydown"&&d.keyCode===229&&(Le="onCompositionStart");Le&&(Qk&&d.locale!=="ko"&&(pa||Le!=="onCompositionStart"?Le==="onCompositionEnd"&&pa&&(Ne=Kk()):(Xi=ce,$m="value"in Xi?Xi.value:Xi.textContent,pa=!0)),Ke=md(te,Le),0<Ke.length&&(Le=new Xk(Le,a,null,d,ce),de.push({event:Le,listeners:Ke}),Ne?Le.data=Ne:(Ne=nT(d),Ne!==null&&(Le.data=Ne)))),(Ne=cH?fH(a,d):dH(a,d))&&(Le=md(te,"onBeforeInput"),0<Le.length&&(Ke=new Xk("onBeforeInput","beforeinput",null,d,ce),de.push({event:Ke,listeners:Le}),Ke.data=Ne)),n8(de,a,te,d,ce)}I2(de,u)})}function Au(a,u,d){return{instance:a,listener:u,currentTarget:d}}function md(a,u){for(var d=u+"Capture",m=[];a!==null;){var v=a,E=v.stateNode;if(v=v.tag,v!==5&&v!==26&&v!==27||E===null||(v=$l(a,d),v!=null&&m.unshift(Au(a,v,E)),v=$l(a,u),v!=null&&m.push(Au(a,v,E))),a.tag===3)return m;a=a.return}return[]}function za(a){if(a===null)return null;do a=a.return;while(a&&a.tag!==5&&a.tag!==27);return a||null}function q2(a,u,d,m,v){for(var E=u._reactName,N=[];d!==null&&d!==m;){var D=d,H=D.alternate,te=D.stateNode;if(D=D.tag,H!==null&&H===m)break;D!==5&&D!==26&&D!==27||te===null||(H=te,v?(te=$l(d,E),te!=null&&N.unshift(Au(d,te,H))):v||(te=$l(d,E),te!=null&&N.push(Au(d,te,H)))),d=d.return}N.length!==0&&a.push({event:u,listeners:N})}var o8=/\r\n?/g,a8=/\u0000|\uFFFD/g;function V2(a){return(typeof a=="string"?a:""+a).replace(o8,`
`).replace(a8,"")}function H2(a,u){return u=V2(u),V2(a)===u}function gd(){}function at(a,u,d,m,v,E){switch(d){case"children":typeof m=="string"?u==="body"||u==="textarea"&&m===""||fa(a,m):(typeof m=="number"||typeof m=="bigint")&&u!=="body"&&fa(a,""+m);break;case"className":la(a,"class",m);break;case"tabIndex":la(a,"tabindex",m);break;case"dir":case"role":case"viewBox":case"width":case"height":la(a,d,m);break;case"style":Uk(a,m,E);break;case"data":if(u!=="object"){la(a,"data",m);break}case"src":case"href":if(m===""&&(u!=="a"||d!=="href")){a.removeAttribute(d);break}if(m==null||typeof m=="function"||typeof m=="symbol"||typeof m=="boolean"){a.removeAttribute(d);break}m=Cf(""+m),a.setAttribute(d,m);break;case"action":case"formAction":if(typeof m=="function"){a.setAttribute(d,"javascript:throw new Error('A React form was unexpectedly submitted. If you called form.submit() manually, consider using form.requestSubmit() instead. If you\\'re trying to use event.stopPropagation() in a submit event handler, consider also calling event.preventDefault().')");break}else typeof E=="function"&&(d==="formAction"?(u!=="input"&&at(a,u,"name",v.name,v,null),at(a,u,"formEncType",v.formEncType,v,null),at(a,u,"formMethod",v.formMethod,v,null),at(a,u,"formTarget",v.formTarget,v,null)):(at(a,u,"encType",v.encType,v,null),at(a,u,"method",v.method,v,null),at(a,u,"target",v.target,v,null)));if(m==null||typeof m=="symbol"||typeof m=="boolean"){a.removeAttribute(d);break}m=Cf(""+m),a.setAttribute(d,m);break;case"onClick":m!=null&&(a.onclick=gd);break;case"onScroll":m!=null&&We("scroll",a);break;case"onScrollEnd":m!=null&&We("scrollend",a);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(d=m.__html,d!=null){if(v.children!=null)throw Error(r(60));a.innerHTML=d}}break;case"multiple":a.multiple=m&&typeof m!="function"&&typeof m!="symbol";break;case"muted":a.muted=m&&typeof m!="function"&&typeof m!="symbol";break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"defaultValue":case"defaultChecked":case"innerHTML":case"ref":break;case"autoFocus":break;case"xlinkHref":if(m==null||typeof m=="function"||typeof m=="boolean"||typeof m=="symbol"){a.removeAttribute("xlink:href");break}d=Cf(""+m),a.setAttributeNS("http://www.w3.org/1999/xlink","xlink:href",d);break;case"contentEditable":case"spellCheck":case"draggable":case"value":case"autoReverse":case"externalResourcesRequired":case"focusable":case"preserveAlpha":m!=null&&typeof m!="function"&&typeof m!="symbol"?a.setAttribute(d,""+m):a.removeAttribute(d);break;case"inert":case"allowFullScreen":case"async":case"autoPlay":case"controls":case"default":case"defer":case"disabled":case"disablePictureInPicture":case"disableRemotePlayback":case"formNoValidate":case"hidden":case"loop":case"noModule":case"noValidate":case"open":case"playsInline":case"readOnly":case"required":case"reversed":case"scoped":case"seamless":case"itemScope":m&&typeof m!="function"&&typeof m!="symbol"?a.setAttribute(d,""):a.removeAttribute(d);break;case"capture":case"download":m===!0?a.setAttribute(d,""):m!==!1&&m!=null&&typeof m!="function"&&typeof m!="symbol"?a.setAttribute(d,m):a.removeAttribute(d);break;case"cols":case"rows":case"size":case"span":m!=null&&typeof m!="function"&&typeof m!="symbol"&&!isNaN(m)&&1<=m?a.setAttribute(d,m):a.removeAttribute(d);break;case"rowSpan":case"start":m==null||typeof m=="function"||typeof m=="symbol"||isNaN(m)?a.removeAttribute(d):a.setAttribute(d,m);break;case"popover":We("beforetoggle",a),We("toggle",a),aa(a,"popover",m);break;case"xlinkActuate":Mr(a,"http://www.w3.org/1999/xlink","xlink:actuate",m);break;case"xlinkArcrole":Mr(a,"http://www.w3.org/1999/xlink","xlink:arcrole",m);break;case"xlinkRole":Mr(a,"http://www.w3.org/1999/xlink","xlink:role",m);break;case"xlinkShow":Mr(a,"http://www.w3.org/1999/xlink","xlink:show",m);break;case"xlinkTitle":Mr(a,"http://www.w3.org/1999/xlink","xlink:title",m);break;case"xlinkType":Mr(a,"http://www.w3.org/1999/xlink","xlink:type",m);break;case"xmlBase":Mr(a,"http://www.w3.org/XML/1998/namespace","xml:base",m);break;case"xmlLang":Mr(a,"http://www.w3.org/XML/1998/namespace","xml:lang",m);break;case"xmlSpace":Mr(a,"http://www.w3.org/XML/1998/namespace","xml:space",m);break;case"is":aa(a,"is",m);break;case"innerText":case"textContent":break;default:(!(2<d.length)||d[0]!=="o"&&d[0]!=="O"||d[1]!=="n"&&d[1]!=="N")&&(d=BV.get(d)||d,aa(a,d,m))}}function Cy(a,u,d,m,v,E){switch(d){case"style":Uk(a,m,E);break;case"dangerouslySetInnerHTML":if(m!=null){if(typeof m!="object"||!("__html"in m))throw Error(r(61));if(d=m.__html,d!=null){if(v.children!=null)throw Error(r(60));a.innerHTML=d}}break;case"children":typeof m=="string"?fa(a,m):(typeof m=="number"||typeof m=="bigint")&&fa(a,""+m);break;case"onScroll":m!=null&&We("scroll",a);break;case"onScrollEnd":m!=null&&We("scrollend",a);break;case"onClick":m!=null&&(a.onclick=gd);break;case"suppressContentEditableWarning":case"suppressHydrationWarning":case"innerHTML":case"ref":break;case"innerText":case"textContent":break;default:if(!vf.hasOwnProperty(d))e:{if(d[0]==="o"&&d[1]==="n"&&(v=d.endsWith("Capture"),u=d.slice(2,v?d.length-7:void 0),E=a[ht]||null,E=E!=null?E[d]:null,typeof E=="function"&&a.removeEventListener(u,E,v),typeof m=="function")){typeof E!="function"&&E!==null&&(d in a?a[d]=null:a.hasAttribute(d)&&a.removeAttribute(d)),a.addEventListener(u,m,v);break e}d in a?a[d]=m:m===!0?a.setAttribute(d,""):aa(a,d,m)}}}function un(a,u,d){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"img":We("error",a),We("load",a);var m=!1,v=!1,E;for(E in d)if(d.hasOwnProperty(E)){var N=d[E];if(N!=null)switch(E){case"src":m=!0;break;case"srcSet":v=!0;break;case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:at(a,u,E,N,d,null)}}v&&at(a,u,"srcSet",d.srcSet,d,null),m&&at(a,u,"src",d.src,d,null);return;case"input":We("invalid",a);var D=E=N=v=null,H=null,te=null;for(m in d)if(d.hasOwnProperty(m)){var ce=d[m];if(ce!=null)switch(m){case"name":v=ce;break;case"type":N=ce;break;case"checked":H=ce;break;case"defaultChecked":te=ce;break;case"value":E=ce;break;case"defaultValue":D=ce;break;case"children":case"dangerouslySetInnerHTML":if(ce!=null)throw Error(r(137,u));break;default:at(a,u,m,ce,d,null)}}Ef(a,E,D,H,te,N,v,!1),ua(a);return;case"select":We("invalid",a),m=N=E=null;for(v in d)if(d.hasOwnProperty(v)&&(D=d[v],D!=null))switch(v){case"value":E=D;break;case"defaultValue":N=D;break;case"multiple":m=D;default:at(a,u,v,D,d,null)}u=E,d=N,a.multiple=!!m,u!=null?hi(a,!!m,u,!1):d!=null&&hi(a,!!m,d,!0);return;case"textarea":We("invalid",a),E=v=m=null;for(N in d)if(d.hasOwnProperty(N)&&(D=d[N],D!=null))switch(N){case"value":m=D;break;case"defaultValue":v=D;break;case"children":E=D;break;case"dangerouslySetInnerHTML":if(D!=null)throw Error(r(91));break;default:at(a,u,N,D,d,null)}Hk(a,m,v,E),ua(a);return;case"option":for(H in d)if(d.hasOwnProperty(H)&&(m=d[H],m!=null))switch(H){case"selected":a.selected=m&&typeof m!="function"&&typeof m!="symbol";break;default:at(a,u,H,m,d,null)}return;case"dialog":We("beforetoggle",a),We("toggle",a),We("cancel",a),We("close",a);break;case"iframe":case"object":We("load",a);break;case"video":case"audio":for(m=0;m<Tu.length;m++)We(Tu[m],a);break;case"image":We("error",a),We("load",a);break;case"details":We("toggle",a);break;case"embed":case"source":case"link":We("error",a),We("load",a);case"area":case"base":case"br":case"col":case"hr":case"keygen":case"meta":case"param":case"track":case"wbr":case"menuitem":for(te in d)if(d.hasOwnProperty(te)&&(m=d[te],m!=null))switch(te){case"children":case"dangerouslySetInnerHTML":throw Error(r(137,u));default:at(a,u,te,m,d,null)}return;default:if(qm(u)){for(ce in d)d.hasOwnProperty(ce)&&(m=d[ce],m!==void 0&&Cy(a,u,ce,m,d,void 0));return}}for(D in d)d.hasOwnProperty(D)&&(m=d[D],m!=null&&at(a,u,D,m,d,null))}function l8(a,u,d,m){switch(u){case"div":case"span":case"svg":case"path":case"a":case"g":case"p":case"li":break;case"input":var v=null,E=null,N=null,D=null,H=null,te=null,ce=null;for(ie in d){var de=d[ie];if(d.hasOwnProperty(ie)&&de!=null)switch(ie){case"checked":break;case"value":break;case"defaultValue":H=de;default:m.hasOwnProperty(ie)||at(a,u,ie,null,m,de)}}for(var ne in m){var ie=m[ne];if(de=d[ne],m.hasOwnProperty(ne)&&(ie!=null||de!=null))switch(ne){case"type":E=ie;break;case"name":v=ie;break;case"checked":te=ie;break;case"defaultChecked":ce=ie;break;case"value":N=ie;break;case"defaultValue":D=ie;break;case"children":case"dangerouslySetInnerHTML":if(ie!=null)throw Error(r(137,u));break;default:ie!==de&&at(a,u,ne,ie,m,de)}}Js(a,N,D,H,te,ce,E,v);return;case"select":ie=N=D=ne=null;for(E in d)if(H=d[E],d.hasOwnProperty(E)&&H!=null)switch(E){case"value":break;case"multiple":ie=H;default:m.hasOwnProperty(E)||at(a,u,E,null,m,H)}for(v in m)if(E=m[v],H=d[v],m.hasOwnProperty(v)&&(E!=null||H!=null))switch(v){case"value":ne=E;break;case"defaultValue":D=E;break;case"multiple":N=E;default:E!==H&&at(a,u,v,E,m,H)}u=D,d=N,m=ie,ne!=null?hi(a,!!d,ne,!1):!!m!=!!d&&(u!=null?hi(a,!!d,u,!0):hi(a,!!d,d?[]:"",!1));return;case"textarea":ie=ne=null;for(D in d)if(v=d[D],d.hasOwnProperty(D)&&v!=null&&!m.hasOwnProperty(D))switch(D){case"value":break;case"children":break;default:at(a,u,D,null,m,v)}for(N in m)if(v=m[N],E=d[N],m.hasOwnProperty(N)&&(v!=null||E!=null))switch(N){case"value":ne=v;break;case"defaultValue":ie=v;break;case"children":break;case"dangerouslySetInnerHTML":if(v!=null)throw Error(r(91));break;default:v!==E&&at(a,u,N,v,m,E)}Vk(a,ne,ie);return;case"option":for(var Be in d)if(ne=d[Be],d.hasOwnProperty(Be)&&ne!=null&&!m.hasOwnProperty(Be))switch(Be){case"selected":a.selected=!1;break;default:at(a,u,Be,null,m,ne)}for(H in m)if(ne=m[H],ie=d[H],m.hasOwnProperty(H)&&ne!==ie&&(ne!=null||ie!=null))switch(H){case"selected":a.selected=ne&&typeof ne!="function"&&typeof ne!="symbol";break;default:at(a,u,H,ne,m,ie)}return;case"img":case"link":case"area":case"base":case"br":case"col":case"embed":case"hr":case"keygen":case"meta":case"param":case"source":case"track":case"wbr":case"menuitem":for(var Oe in d)ne=d[Oe],d.hasOwnProperty(Oe)&&ne!=null&&!m.hasOwnProperty(Oe)&&at(a,u,Oe,null,m,ne);for(te in m)if(ne=m[te],ie=d[te],m.hasOwnProperty(te)&&ne!==ie&&(ne!=null||ie!=null))switch(te){case"children":case"dangerouslySetInnerHTML":if(ne!=null)throw Error(r(137,u));break;default:at(a,u,te,ne,m,ie)}return;default:if(qm(u)){for(var lt in d)ne=d[lt],d.hasOwnProperty(lt)&&ne!==void 0&&!m.hasOwnProperty(lt)&&Cy(a,u,lt,void 0,m,ne);for(ce in m)ne=m[ce],ie=d[ce],!m.hasOwnProperty(ce)||ne===ie||ne===void 0&&ie===void 0||Cy(a,u,ce,ne,m,ie);return}}for(var Z in d)ne=d[Z],d.hasOwnProperty(Z)&&ne!=null&&!m.hasOwnProperty(Z)&&at(a,u,Z,null,m,ne);for(de in m)ne=m[de],ie=d[de],!m.hasOwnProperty(de)||ne===ie||ne==null&&ie==null||at(a,u,de,ne,m,ie)}var ky=null,Ty=null;function yd(a){return a.nodeType===9?a:a.ownerDocument}function F2(a){switch(a){case"http://www.w3.org/2000/svg":return 1;case"http://www.w3.org/1998/Math/MathML":return 2;default:return 0}}function U2(a,u){if(a===0)switch(u){case"svg":return 1;case"math":return 2;default:return 0}return a===1&&u==="foreignObject"?0:a}function Ay(a,u){return a==="textarea"||a==="noscript"||typeof u.children=="string"||typeof u.children=="number"||typeof u.children=="bigint"||typeof u.dangerouslySetInnerHTML=="object"&&u.dangerouslySetInnerHTML!==null&&u.dangerouslySetInnerHTML.__html!=null}var My=null;function u8(){var a=window.event;return a&&a.type==="popstate"?a===My?!1:(My=a,!0):(My=null,!1)}var $2=typeof setTimeout=="function"?setTimeout:void 0,c8=typeof clearTimeout=="function"?clearTimeout:void 0,G2=typeof Promise=="function"?Promise:void 0,f8=typeof queueMicrotask=="function"?queueMicrotask:typeof G2<"u"?function(a){return G2.resolve(null).then(a).catch(d8)}:$2;function d8(a){setTimeout(function(){throw a})}function hs(a){return a==="head"}function K2(a,u){var d=u,m=0,v=0;do{var E=d.nextSibling;if(a.removeChild(d),E&&E.nodeType===8)if(d=E.data,d==="/$"){if(0<m&&8>m){d=m;var N=a.ownerDocument;if(d&1&&Mu(N.documentElement),d&2&&Mu(N.body),d&4)for(d=N.head,Mu(d),N=d.firstChild;N;){var D=N.nextSibling,H=N.nodeName;N[Qs]||H==="SCRIPT"||H==="STYLE"||H==="LINK"&&N.rel.toLowerCase()==="stylesheet"||d.removeChild(N),N=D}}if(v===0){a.removeChild(E),Pu(u);return}v--}else d==="$"||d==="$?"||d==="$!"?v++:m=d.charCodeAt(0)-48;else m=0;d=E}while(d);Pu(u)}function Ny(a){var u=a.firstChild;for(u&&u.nodeType===10&&(u=u.nextSibling);u;){var d=u;switch(u=u.nextSibling,d.nodeName){case"HTML":case"HEAD":case"BODY":Ny(d),Il(d);continue;case"SCRIPT":case"STYLE":continue;case"LINK":if(d.rel.toLowerCase()==="stylesheet")continue}a.removeChild(d)}}function h8(a,u,d,m){for(;a.nodeType===1;){var v=d;if(a.nodeName.toLowerCase()!==u.toLowerCase()){if(!m&&(a.nodeName!=="INPUT"||a.type!=="hidden"))break}else if(m){if(!a[Qs])switch(u){case"meta":if(!a.hasAttribute("itemprop"))break;return a;case"link":if(E=a.getAttribute("rel"),E==="stylesheet"&&a.hasAttribute("data-precedence"))break;if(E!==v.rel||a.getAttribute("href")!==(v.href==null||v.href===""?null:v.href)||a.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin)||a.getAttribute("title")!==(v.title==null?null:v.title))break;return a;case"style":if(a.hasAttribute("data-precedence"))break;return a;case"script":if(E=a.getAttribute("src"),(E!==(v.src==null?null:v.src)||a.getAttribute("type")!==(v.type==null?null:v.type)||a.getAttribute("crossorigin")!==(v.crossOrigin==null?null:v.crossOrigin))&&E&&a.hasAttribute("async")&&!a.hasAttribute("itemprop"))break;return a;default:return a}}else if(u==="input"&&a.type==="hidden"){var E=v.name==null?null:""+v.name;if(v.type==="hidden"&&a.getAttribute("name")===E)return a}else return a;if(a=Rr(a.nextSibling),a===null)break}return null}function p8(a,u,d){if(u==="")return null;for(;a.nodeType!==3;)if((a.nodeType!==1||a.nodeName!=="INPUT"||a.type!=="hidden")&&!d||(a=Rr(a.nextSibling),a===null))return null;return a}function _y(a){return a.data==="$!"||a.data==="$?"&&a.ownerDocument.readyState==="complete"}function m8(a,u){var d=a.ownerDocument;if(a.data!=="$?"||d.readyState==="complete")u();else{var m=function(){u(),d.removeEventListener("DOMContentLoaded",m)};d.addEventListener("DOMContentLoaded",m),a._reactRetry=m}}function Rr(a){for(;a!=null;a=a.nextSibling){var u=a.nodeType;if(u===1||u===3)break;if(u===8){if(u=a.data,u==="$"||u==="$!"||u==="$?"||u==="F!"||u==="F")break;if(u==="/$")return null}}return a}var Ry=null;function Y2(a){a=a.previousSibling;for(var u=0;a;){if(a.nodeType===8){var d=a.data;if(d==="$"||d==="$!"||d==="$?"){if(u===0)return a;u--}else d==="/$"&&u++}a=a.previousSibling}return null}function W2(a,u,d){switch(u=yd(d),a){case"html":if(a=u.documentElement,!a)throw Error(r(452));return a;case"head":if(a=u.head,!a)throw Error(r(453));return a;case"body":if(a=u.body,!a)throw Error(r(454));return a;default:throw Error(r(451))}}function Mu(a){for(var u=a.attributes;u.length;)a.removeAttributeNode(u[0]);Il(a)}var hr=new Map,X2=new Set;function vd(a){return typeof a.getRootNode=="function"?a.getRootNode():a.nodeType===9?a:a.ownerDocument}var Ai=z.d;z.d={f:g8,r:y8,D:v8,C:b8,L:x8,m:w8,X:E8,S:S8,M:C8};function g8(){var a=Ai.f(),u=ud();return a||u}function y8(a){var u=ui(a);u!==null&&u.tag===5&&u.type==="form"?gA(u):Ai.r(a)}var qa=typeof document>"u"?null:document;function Z2(a,u,d){var m=qa;if(m&&typeof u=="string"&&u){var v=Dn(u);v='link[rel="'+a+'"][href="'+v+'"]',typeof d=="string"&&(v+='[crossorigin="'+d+'"]'),X2.has(v)||(X2.add(v),a={rel:a,crossOrigin:d,href:u},m.querySelector(v)===null&&(u=m.createElement("link"),un(u,"link",a),Bt(u),m.head.appendChild(u)))}}function v8(a){Ai.D(a),Z2("dns-prefetch",a,null)}function b8(a,u){Ai.C(a,u),Z2("preconnect",a,u)}function x8(a,u,d){Ai.L(a,u,d);var m=qa;if(m&&a&&u){var v='link[rel="preload"][as="'+Dn(u)+'"]';u==="image"&&d&&d.imageSrcSet?(v+='[imagesrcset="'+Dn(d.imageSrcSet)+'"]',typeof d.imageSizes=="string"&&(v+='[imagesizes="'+Dn(d.imageSizes)+'"]')):v+='[href="'+Dn(a)+'"]';var E=v;switch(u){case"style":E=Va(a);break;case"script":E=Ha(a)}hr.has(E)||(a=h({rel:"preload",href:u==="image"&&d&&d.imageSrcSet?void 0:a,as:u},d),hr.set(E,a),m.querySelector(v)!==null||u==="style"&&m.querySelector(Nu(E))||u==="script"&&m.querySelector(_u(E))||(u=m.createElement("link"),un(u,"link",a),Bt(u),m.head.appendChild(u)))}}function w8(a,u){Ai.m(a,u);var d=qa;if(d&&a){var m=u&&typeof u.as=="string"?u.as:"script",v='link[rel="modulepreload"][as="'+Dn(m)+'"][href="'+Dn(a)+'"]',E=v;switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":E=Ha(a)}if(!hr.has(E)&&(a=h({rel:"modulepreload",href:a},u),hr.set(E,a),d.querySelector(v)===null)){switch(m){case"audioworklet":case"paintworklet":case"serviceworker":case"sharedworker":case"worker":case"script":if(d.querySelector(_u(E)))return}m=d.createElement("link"),un(m,"link",a),Bt(m),d.head.appendChild(m)}}}function S8(a,u,d){Ai.S(a,u,d);var m=qa;if(m&&a){var v=ci(m).hoistableStyles,E=Va(a);u=u||"default";var N=v.get(E);if(!N){var D={loading:0,preload:null};if(N=m.querySelector(Nu(E)))D.loading=5;else{a=h({rel:"stylesheet",href:a,"data-precedence":u},d),(d=hr.get(E))&&Dy(a,d);var H=N=m.createElement("link");Bt(H),un(H,"link",a),H._p=new Promise(function(te,ce){H.onload=te,H.onerror=ce}),H.addEventListener("load",function(){D.loading|=1}),H.addEventListener("error",function(){D.loading|=2}),D.loading|=4,bd(N,u,m)}N={type:"stylesheet",instance:N,count:1,state:D},v.set(E,N)}}}function E8(a,u){Ai.X(a,u);var d=qa;if(d&&a){var m=ci(d).hoistableScripts,v=Ha(a),E=m.get(v);E||(E=d.querySelector(_u(v)),E||(a=h({src:a,async:!0},u),(u=hr.get(v))&&Oy(a,u),E=d.createElement("script"),Bt(E),un(E,"link",a),d.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},m.set(v,E))}}function C8(a,u){Ai.M(a,u);var d=qa;if(d&&a){var m=ci(d).hoistableScripts,v=Ha(a),E=m.get(v);E||(E=d.querySelector(_u(v)),E||(a=h({src:a,async:!0,type:"module"},u),(u=hr.get(v))&&Oy(a,u),E=d.createElement("script"),Bt(E),un(E,"link",a),d.head.appendChild(E)),E={type:"script",instance:E,count:1,state:null},m.set(v,E))}}function Q2(a,u,d,m){var v=(v=Q.current)?vd(v):null;if(!v)throw Error(r(446));switch(a){case"meta":case"title":return null;case"style":return typeof d.precedence=="string"&&typeof d.href=="string"?(u=Va(d.href),d=ci(v).hoistableStyles,m=d.get(u),m||(m={type:"style",instance:null,count:0,state:null},d.set(u,m)),m):{type:"void",instance:null,count:0,state:null};case"link":if(d.rel==="stylesheet"&&typeof d.href=="string"&&typeof d.precedence=="string"){a=Va(d.href);var E=ci(v).hoistableStyles,N=E.get(a);if(N||(v=v.ownerDocument||v,N={type:"stylesheet",instance:null,count:0,state:{loading:0,preload:null}},E.set(a,N),(E=v.querySelector(Nu(a)))&&!E._p&&(N.instance=E,N.state.loading=5),hr.has(a)||(d={rel:"preload",as:"style",href:d.href,crossOrigin:d.crossOrigin,integrity:d.integrity,media:d.media,hrefLang:d.hrefLang,referrerPolicy:d.referrerPolicy},hr.set(a,d),E||k8(v,a,d,N.state))),u&&m===null)throw Error(r(528,""));return N}if(u&&m!==null)throw Error(r(529,""));return null;case"script":return u=d.async,d=d.src,typeof d=="string"&&u&&typeof u!="function"&&typeof u!="symbol"?(u=Ha(d),d=ci(v).hoistableScripts,m=d.get(u),m||(m={type:"script",instance:null,count:0,state:null},d.set(u,m)),m):{type:"void",instance:null,count:0,state:null};default:throw Error(r(444,a))}}function Va(a){return'href="'+Dn(a)+'"'}function Nu(a){return'link[rel="stylesheet"]['+a+"]"}function J2(a){return h({},a,{"data-precedence":a.precedence,precedence:null})}function k8(a,u,d,m){a.querySelector('link[rel="preload"][as="style"]['+u+"]")?m.loading=1:(u=a.createElement("link"),m.preload=u,u.addEventListener("load",function(){return m.loading|=1}),u.addEventListener("error",function(){return m.loading|=2}),un(u,"link",d),Bt(u),a.head.appendChild(u))}function Ha(a){return'[src="'+Dn(a)+'"]'}function _u(a){return"script[async]"+a}function eM(a,u,d){if(u.count++,u.instance===null)switch(u.type){case"style":var m=a.querySelector('style[data-href~="'+Dn(d.href)+'"]');if(m)return u.instance=m,Bt(m),m;var v=h({},d,{"data-href":d.href,"data-precedence":d.precedence,href:null,precedence:null});return m=(a.ownerDocument||a).createElement("style"),Bt(m),un(m,"style",v),bd(m,d.precedence,a),u.instance=m;case"stylesheet":v=Va(d.href);var E=a.querySelector(Nu(v));if(E)return u.state.loading|=4,u.instance=E,Bt(E),E;m=J2(d),(v=hr.get(v))&&Dy(m,v),E=(a.ownerDocument||a).createElement("link"),Bt(E);var N=E;return N._p=new Promise(function(D,H){N.onload=D,N.onerror=H}),un(E,"link",m),u.state.loading|=4,bd(E,d.precedence,a),u.instance=E;case"script":return E=Ha(d.src),(v=a.querySelector(_u(E)))?(u.instance=v,Bt(v),v):(m=d,(v=hr.get(E))&&(m=h({},d),Oy(m,v)),a=a.ownerDocument||a,v=a.createElement("script"),Bt(v),un(v,"link",m),a.head.appendChild(v),u.instance=v);case"void":return null;default:throw Error(r(443,u.type))}else u.type==="stylesheet"&&(u.state.loading&4)===0&&(m=u.instance,u.state.loading|=4,bd(m,d.precedence,a));return u.instance}function bd(a,u,d){for(var m=d.querySelectorAll('link[rel="stylesheet"][data-precedence],style[data-precedence]'),v=m.length?m[m.length-1]:null,E=v,N=0;N<m.length;N++){var D=m[N];if(D.dataset.precedence===u)E=D;else if(E!==v)break}E?E.parentNode.insertBefore(a,E.nextSibling):(u=d.nodeType===9?d.head:d,u.insertBefore(a,u.firstChild))}function Dy(a,u){a.crossOrigin==null&&(a.crossOrigin=u.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=u.referrerPolicy),a.title==null&&(a.title=u.title)}function Oy(a,u){a.crossOrigin==null&&(a.crossOrigin=u.crossOrigin),a.referrerPolicy==null&&(a.referrerPolicy=u.referrerPolicy),a.integrity==null&&(a.integrity=u.integrity)}var xd=null;function tM(a,u,d){if(xd===null){var m=new Map,v=xd=new Map;v.set(d,m)}else v=xd,m=v.get(d),m||(m=new Map,v.set(d,m));if(m.has(a))return m;for(m.set(a,null),d=d.getElementsByTagName(a),v=0;v<d.length;v++){var E=d[v];if(!(E[Qs]||E[Ze]||a==="link"&&E.getAttribute("rel")==="stylesheet")&&E.namespaceURI!=="http://www.w3.org/2000/svg"){var N=E.getAttribute(u)||"";N=a+N;var D=m.get(N);D?D.push(E):m.set(N,[E])}}return m}function nM(a,u,d){a=a.ownerDocument||a,a.head.insertBefore(d,u==="title"?a.querySelector("head > title"):null)}function T8(a,u,d){if(d===1||u.itemProp!=null)return!1;switch(a){case"meta":case"title":return!0;case"style":if(typeof u.precedence!="string"||typeof u.href!="string"||u.href==="")break;return!0;case"link":if(typeof u.rel!="string"||typeof u.href!="string"||u.href===""||u.onLoad||u.onError)break;switch(u.rel){case"stylesheet":return a=u.disabled,typeof u.precedence=="string"&&a==null;default:return!0}case"script":if(u.async&&typeof u.async!="function"&&typeof u.async!="symbol"&&!u.onLoad&&!u.onError&&u.src&&typeof u.src=="string")return!0}return!1}function rM(a){return!(a.type==="stylesheet"&&(a.state.loading&3)===0)}var Ru=null;function A8(){}function M8(a,u,d){if(Ru===null)throw Error(r(475));var m=Ru;if(u.type==="stylesheet"&&(typeof d.media!="string"||matchMedia(d.media).matches!==!1)&&(u.state.loading&4)===0){if(u.instance===null){var v=Va(d.href),E=a.querySelector(Nu(v));if(E){a=E._p,a!==null&&typeof a=="object"&&typeof a.then=="function"&&(m.count++,m=wd.bind(m),a.then(m,m)),u.state.loading|=4,u.instance=E,Bt(E);return}E=a.ownerDocument||a,d=J2(d),(v=hr.get(v))&&Dy(d,v),E=E.createElement("link"),Bt(E);var N=E;N._p=new Promise(function(D,H){N.onload=D,N.onerror=H}),un(E,"link",d),u.instance=E}m.stylesheets===null&&(m.stylesheets=new Map),m.stylesheets.set(u,a),(a=u.state.preload)&&(u.state.loading&3)===0&&(m.count++,u=wd.bind(m),a.addEventListener("load",u),a.addEventListener("error",u))}}function N8(){if(Ru===null)throw Error(r(475));var a=Ru;return a.stylesheets&&a.count===0&&jy(a,a.stylesheets),0<a.count?function(u){var d=setTimeout(function(){if(a.stylesheets&&jy(a,a.stylesheets),a.unsuspend){var m=a.unsuspend;a.unsuspend=null,m()}},6e4);return a.unsuspend=u,function(){a.unsuspend=null,clearTimeout(d)}}:null}function wd(){if(this.count--,this.count===0){if(this.stylesheets)jy(this,this.stylesheets);else if(this.unsuspend){var a=this.unsuspend;this.unsuspend=null,a()}}}var Sd=null;function jy(a,u){a.stylesheets=null,a.unsuspend!==null&&(a.count++,Sd=new Map,u.forEach(_8,a),Sd=null,wd.call(a))}function _8(a,u){if(!(u.state.loading&4)){var d=Sd.get(a);if(d)var m=d.get(null);else{d=new Map,Sd.set(a,d);for(var v=a.querySelectorAll("link[data-precedence],style[data-precedence]"),E=0;E<v.length;E++){var N=v[E];(N.nodeName==="LINK"||N.getAttribute("media")!=="not all")&&(d.set(N.dataset.precedence,N),m=N)}m&&d.set(null,m)}v=u.instance,N=v.getAttribute("data-precedence"),E=d.get(N)||m,E===m&&d.set(null,v),d.set(N,v),this.count++,m=wd.bind(this),v.addEventListener("load",m),v.addEventListener("error",m),E?E.parentNode.insertBefore(v,E.nextSibling):(a=a.nodeType===9?a.head:a,a.insertBefore(v,a.firstChild)),u.state.loading|=4}}var Du={$$typeof:k,Provider:null,Consumer:null,_currentValue:W,_currentValue2:W,_threadCount:0};function R8(a,u,d,m,v,E,N,D){this.tag=1,this.containerInfo=a,this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.next=this.pendingContext=this.context=this.cancelPendingCommit=null,this.callbackPriority=0,this.expirationTimes=Zs(-1),this.entangledLanes=this.shellSuspendCounter=this.errorRecoveryDisabledLanes=this.expiredLanes=this.warmLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Zs(0),this.hiddenUpdates=Zs(null),this.identifierPrefix=m,this.onUncaughtError=v,this.onCaughtError=E,this.onRecoverableError=N,this.pooledCache=null,this.pooledCacheLanes=0,this.formState=D,this.incompleteTransitions=new Map}function iM(a,u,d,m,v,E,N,D,H,te,ce,de){return a=new R8(a,u,d,N,D,H,te,de),u=1,E===!0&&(u|=24),E=$n(3,null,null,u),a.current=E,E.stateNode=a,u=mg(),u.refCount++,a.pooledCache=u,u.refCount++,E.memoizedState={element:m,isDehydrated:d,cache:u},bg(E),a}function sM(a){return a?(a=ba,a):ba}function oM(a,u,d,m,v,E){v=sM(v),m.context===null?m.context=v:m.pendingContext=v,m=Ji(u),m.payload={element:d},E=E===void 0?null:E,E!==null&&(m.callback=E),d=es(a,m,u),d!==null&&(Xn(d,a,u),lu(d,a,u))}function aM(a,u){if(a=a.memoizedState,a!==null&&a.dehydrated!==null){var d=a.retryLane;a.retryLane=d!==0&&d<u?d:u}}function Ly(a,u){aM(a,u),(a=a.alternate)&&aM(a,u)}function lM(a){if(a.tag===13){var u=va(a,67108864);u!==null&&Xn(u,a,67108864),Ly(a,67108864)}}var Ed=!0;function D8(a,u,d,m){var v=j.T;j.T=null;var E=z.p;try{z.p=2,Py(a,u,d,m)}finally{z.p=E,j.T=v}}function O8(a,u,d,m){var v=j.T;j.T=null;var E=z.p;try{z.p=8,Py(a,u,d,m)}finally{z.p=E,j.T=v}}function Py(a,u,d,m){if(Ed){var v=By(m);if(v===null)Ey(a,u,m,Cd,d),cM(a,m);else if(L8(v,a,u,d,m))m.stopPropagation();else if(cM(a,m),u&4&&-1<j8.indexOf(a)){for(;v!==null;){var E=ui(v);if(E!==null)switch(E.tag){case 3:if(E=E.stateNode,E.current.memoizedState.isDehydrated){var N=Ar(E.pendingLanes);if(N!==0){var D=E;for(D.pendingLanes|=2,D.entangledLanes|=2;N;){var H=1<<31-wt(N);D.entanglements[1]|=H,N&=~H}Kr(E),(nt&6)===0&&(ad=Me()+500,ku(0))}}break;case 13:D=va(E,2),D!==null&&Xn(D,E,2),ud(),Ly(E,2)}if(E=By(m),E===null&&Ey(a,u,m,Cd,d),E===v)break;v=E}v!==null&&m.stopPropagation()}else Ey(a,u,m,null,d)}}function By(a){return a=Hm(a),Iy(a)}var Cd=null;function Iy(a){if(Cd=null,a=Ki(a),a!==null){var u=s(a);if(u===null)a=null;else{var d=u.tag;if(d===13){if(a=o(u),a!==null)return a;a=null}else if(d===3){if(u.stateNode.current.memoizedState.isDehydrated)return u.tag===3?u.stateNode.containerInfo:null;a=null}else u!==a&&(a=null)}}return Cd=a,null}function uM(a){switch(a){case"beforetoggle":case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"toggle":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 2;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 8;case"message":switch(rn()){case sn:return 2;case _n:return 8;case pn:case Wt:return 32;case ft:return 268435456;default:return 32}default:return 32}}var zy=!1,ps=null,ms=null,gs=null,Ou=new Map,ju=new Map,ys=[],j8="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset".split(" ");function cM(a,u){switch(a){case"focusin":case"focusout":ps=null;break;case"dragenter":case"dragleave":ms=null;break;case"mouseover":case"mouseout":gs=null;break;case"pointerover":case"pointerout":Ou.delete(u.pointerId);break;case"gotpointercapture":case"lostpointercapture":ju.delete(u.pointerId)}}function Lu(a,u,d,m,v,E){return a===null||a.nativeEvent!==E?(a={blockedOn:u,domEventName:d,eventSystemFlags:m,nativeEvent:E,targetContainers:[v]},u!==null&&(u=ui(u),u!==null&&lM(u)),a):(a.eventSystemFlags|=m,u=a.targetContainers,v!==null&&u.indexOf(v)===-1&&u.push(v),a)}function L8(a,u,d,m,v){switch(u){case"focusin":return ps=Lu(ps,a,u,d,m,v),!0;case"dragenter":return ms=Lu(ms,a,u,d,m,v),!0;case"mouseover":return gs=Lu(gs,a,u,d,m,v),!0;case"pointerover":var E=v.pointerId;return Ou.set(E,Lu(Ou.get(E)||null,a,u,d,m,v)),!0;case"gotpointercapture":return E=v.pointerId,ju.set(E,Lu(ju.get(E)||null,a,u,d,m,v)),!0}return!1}function fM(a){var u=Ki(a.target);if(u!==null){var d=s(u);if(d!==null){if(u=d.tag,u===13){if(u=o(d),u!==null){a.blockedOn=u,je(a.priority,function(){if(d.tag===13){var m=Wn();m=xe(m);var v=va(d,m);v!==null&&Xn(v,d,m),Ly(d,m)}});return}}else if(u===3&&d.stateNode.current.memoizedState.isDehydrated){a.blockedOn=d.tag===3?d.stateNode.containerInfo:null;return}}}a.blockedOn=null}function kd(a){if(a.blockedOn!==null)return!1;for(var u=a.targetContainers;0<u.length;){var d=By(a.nativeEvent);if(d===null){d=a.nativeEvent;var m=new d.constructor(d.type,d);Vm=m,d.target.dispatchEvent(m),Vm=null}else return u=ui(d),u!==null&&lM(u),a.blockedOn=d,!1;u.shift()}return!0}function dM(a,u,d){kd(a)&&d.delete(u)}function P8(){zy=!1,ps!==null&&kd(ps)&&(ps=null),ms!==null&&kd(ms)&&(ms=null),gs!==null&&kd(gs)&&(gs=null),Ou.forEach(dM),ju.forEach(dM)}function Td(a,u){a.blockedOn===u&&(a.blockedOn=null,zy||(zy=!0,e.unstable_scheduleCallback(e.unstable_NormalPriority,P8)))}var Ad=null;function hM(a){Ad!==a&&(Ad=a,e.unstable_scheduleCallback(e.unstable_NormalPriority,function(){Ad===a&&(Ad=null);for(var u=0;u<a.length;u+=3){var d=a[u],m=a[u+1],v=a[u+2];if(typeof m!="function"){if(Iy(m||d)===null)continue;break}var E=ui(d);E!==null&&(a.splice(u,3),u-=3,Ig(E,{pending:!0,data:v,method:d.method,action:m},m,v))}}))}function Pu(a){function u(H){return Td(H,a)}ps!==null&&Td(ps,a),ms!==null&&Td(ms,a),gs!==null&&Td(gs,a),Ou.forEach(u),ju.forEach(u);for(var d=0;d<ys.length;d++){var m=ys[d];m.blockedOn===a&&(m.blockedOn=null)}for(;0<ys.length&&(d=ys[0],d.blockedOn===null);)fM(d),d.blockedOn===null&&ys.shift();if(d=(a.ownerDocument||a).$$reactFormReplay,d!=null)for(m=0;m<d.length;m+=3){var v=d[m],E=d[m+1],N=v[ht]||null;if(typeof E=="function")N||hM(d);else if(N){var D=null;if(E&&E.hasAttribute("formAction")){if(v=E,N=E[ht]||null)D=N.formAction;else if(Iy(v)!==null)continue}else D=N.action;typeof D=="function"?d[m+1]=D:(d.splice(m,3),m-=3),hM(d)}}}function qy(a){this._internalRoot=a}Md.prototype.render=qy.prototype.render=function(a){var u=this._internalRoot;if(u===null)throw Error(r(409));var d=u.current,m=Wn();oM(d,m,a,u,null,null)},Md.prototype.unmount=qy.prototype.unmount=function(){var a=this._internalRoot;if(a!==null){this._internalRoot=null;var u=a.containerInfo;oM(a.current,2,null,a,null,null),ud(),u[Ve]=null}};function Md(a){this._internalRoot=a}Md.prototype.unstable_scheduleHydration=function(a){if(a){var u=Se();a={blockedOn:null,target:a,priority:u};for(var d=0;d<ys.length&&u!==0&&u<ys[d].priority;d++);ys.splice(d,0,a),d===0&&fM(a)}};var pM=t.version;if(pM!=="19.1.1")throw Error(r(527,pM,"19.1.1"));z.findDOMNode=function(a){var u=a._reactInternals;if(u===void 0)throw typeof a.render=="function"?Error(r(188)):(a=Object.keys(a).join(","),Error(r(268,a)));return a=c(u),a=a!==null?f(a):null,a=a===null?null:a.stateNode,a};var B8={bundleType:0,version:"19.1.1",rendererPackageName:"react-dom",currentDispatcherRef:j,reconcilerVersion:"19.1.1"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Nd=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Nd.isDisabled&&Nd.supportsFiber)try{mn=Nd.inject(B8),gt=Nd}catch{}}return Iu.createRoot=function(a,u){if(!i(a))throw Error(r(299));var d=!1,m="",v=_A,E=RA,N=DA,D=null;return u!=null&&(u.unstable_strictMode===!0&&(d=!0),u.identifierPrefix!==void 0&&(m=u.identifierPrefix),u.onUncaughtError!==void 0&&(v=u.onUncaughtError),u.onCaughtError!==void 0&&(E=u.onCaughtError),u.onRecoverableError!==void 0&&(N=u.onRecoverableError),u.unstable_transitionCallbacks!==void 0&&(D=u.unstable_transitionCallbacks)),u=iM(a,1,!1,null,null,d,m,v,E,N,D,null),a[Ve]=u.current,Sy(a),new qy(u)},Iu.hydrateRoot=function(a,u,d){if(!i(a))throw Error(r(299));var m=!1,v="",E=_A,N=RA,D=DA,H=null,te=null;return d!=null&&(d.unstable_strictMode===!0&&(m=!0),d.identifierPrefix!==void 0&&(v=d.identifierPrefix),d.onUncaughtError!==void 0&&(E=d.onUncaughtError),d.onCaughtError!==void 0&&(N=d.onCaughtError),d.onRecoverableError!==void 0&&(D=d.onRecoverableError),d.unstable_transitionCallbacks!==void 0&&(H=d.unstable_transitionCallbacks),d.formState!==void 0&&(te=d.formState)),u=iM(a,1,!0,u,d??null,m,v,E,N,D,H,te),u.context=sM(null),d=u.current,m=Wn(),m=xe(m),v=Ji(m),v.callback=null,es(d,v,m),d=m,u.current.lanes=d,li(u,d),Kr(u),a[Ve]=u.current,Sy(a),new Md(u)},Iu.version="19.1.1",Iu}var CM;function Y8(){if(CM)return Fy.exports;CM=1;function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(t){console.error(t)}}return e(),Fy.exports=K8(),Fy.exports}var W8=Y8(),X8=n4();const r4=Yc(X8);/**
 * @remix-run/router v1.23.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vc(){return vc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vc.apply(this,arguments)}var _s;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(_s||(_s={}));const kM="popstate";function Z8(e){e===void 0&&(e={});function t(i,s){let{pathname:o="/",search:l="",hash:c=""}=Xo(i.location.hash.substr(1));return!o.startsWith("/")&&!o.startsWith(".")&&(o="/"+o),pS("",{pathname:o,search:l,hash:c},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(i,s){let o=i.document.querySelector("base"),l="";if(o&&o.getAttribute("href")){let c=i.location.href,f=c.indexOf("#");l=f===-1?c:c.slice(0,f)}return l+"#"+(typeof s=="string"?s:i4(s))}function r(i,s){jE(i.pathname.charAt(0)==="/","relative pathnames are not supported in hash history.push("+JSON.stringify(s)+")")}return J8(t,n,r,e)}function Yt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function jE(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Q8(){return Math.random().toString(36).substr(2,8)}function TM(e,t){return{usr:e.state,key:e.key,idx:t}}function pS(e,t,n,r){return n===void 0&&(n=null),vc({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?Xo(t):t,{state:n,key:t&&t.key||r||Q8()})}function i4(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function Xo(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function J8(e,t,n,r){r===void 0&&(r={});let{window:i=document.defaultView,v5Compat:s=!1}=r,o=i.history,l=_s.Pop,c=null,f=h();f==null&&(f=0,o.replaceState(vc({},o.state,{idx:f}),""));function h(){return(o.state||{idx:null}).idx}function p(){l=_s.Pop;let x=h(),C=x==null?null:x-f;f=x,c&&c({action:l,location:S.location,delta:C})}function g(x,C){l=_s.Push;let T=pS(S.location,x,C);n&&n(T,x),f=h()+1;let k=TM(T,f),A=S.createHref(T);try{o.pushState(k,"",A)}catch(M){if(M instanceof DOMException&&M.name==="DataCloneError")throw M;i.location.assign(A)}s&&c&&c({action:l,location:S.location,delta:1})}function y(x,C){l=_s.Replace;let T=pS(S.location,x,C);n&&n(T,x),f=h();let k=TM(T,f),A=S.createHref(T);o.replaceState(k,"",A),s&&c&&c({action:l,location:S.location,delta:0})}function b(x){let C=i.location.origin!=="null"?i.location.origin:i.location.href,T=typeof x=="string"?x:i4(x);return T=T.replace(/ $/,"%20"),Yt(C,"No window.location.(origin|href) available to create URL for href: "+T),new URL(T,C)}let S={get action(){return l},get location(){return e(i,o)},listen(x){if(c)throw new Error("A history only accepts one active listener");return i.addEventListener(kM,p),c=x,()=>{i.removeEventListener(kM,p),c=null}},createHref(x){return t(i,x)},createURL:b,encodeLocation(x){let C=b(x);return{pathname:C.pathname,search:C.search,hash:C.hash}},push:g,replace:y,go(x){return o.go(x)}};return S}var AM;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(AM||(AM={}));function eF(e,t,n){return n===void 0&&(n="/"),tF(e,t,n)}function tF(e,t,n,r){let i=typeof t=="string"?Xo(t):t,s=a4(i.pathname||"/",n);if(s==null)return null;let o=s4(e);nF(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let f=pF(s);l=fF(o[c],f)}return l}function s4(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let i=(s,o,l)=>{let c={relativePath:l===void 0?s.path||"":l,caseSensitive:s.caseSensitive===!0,childrenIndex:o,route:s};c.relativePath.startsWith("/")&&(Yt(c.relativePath.startsWith(r),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(r.length));let f=_o([r,c.relativePath]),h=n.concat(c);s.children&&s.children.length>0&&(Yt(s.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+f+'".')),s4(s.children,t,h,f)),!(s.path==null&&!s.index)&&t.push({path:f,score:uF(f,s.index),routesMeta:h})};return e.forEach((s,o)=>{var l;if(s.path===""||!((l=s.path)!=null&&l.includes("?")))i(s,o);else for(let c of o4(s.path))i(s,o,c)}),t}function o4(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,i=n.endsWith("?"),s=n.replace(/\?$/,"");if(r.length===0)return i?[s,""]:[s];let o=o4(r.join("/")),l=[];return l.push(...o.map(c=>c===""?s:[s,c].join("/"))),i&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function nF(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:cF(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const rF=/^:[\w-]+$/,iF=3,sF=2,oF=1,aF=10,lF=-2,MM=e=>e==="*";function uF(e,t){let n=e.split("/"),r=n.length;return n.some(MM)&&(r+=lF),t&&(r+=sF),n.filter(i=>!MM(i)).reduce((i,s)=>i+(rF.test(s)?iF:s===""?oF:aF),r)}function cF(e,t){return e.length===t.length&&e.slice(0,-1).every((r,i)=>r===t[i])?e[e.length-1]-t[t.length-1]:0}function fF(e,t,n){let{routesMeta:r}=e,i={},s="/",o=[];for(let l=0;l<r.length;++l){let c=r[l],f=l===r.length-1,h=s==="/"?t:t.slice(s.length)||"/",p=dF({path:c.relativePath,caseSensitive:c.caseSensitive,end:f},h),g=c.route;if(!p)return null;Object.assign(i,p.params),o.push({params:i,pathname:_o([s,p.pathname]),pathnameBase:xF(_o([s,p.pathnameBase])),route:g}),p.pathnameBase!=="/"&&(s=_o([s,p.pathnameBase]))}return o}function dF(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=hF(e.path,e.caseSensitive,e.end),i=t.match(n);if(!i)return null;let s=i[0],o=s.replace(/(.)\/+$/,"$1"),l=i.slice(1);return{params:r.reduce((f,h,p)=>{let{paramName:g,isOptional:y}=h;if(g==="*"){let S=l[p]||"";o=s.slice(0,s.length-S.length).replace(/(.)\/+$/,"$1")}const b=l[p];return y&&!b?f[g]=void 0:f[g]=(b||"").replace(/%2F/g,"/"),f},{}),pathname:s,pathnameBase:o,pattern:e}}function hF(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),jE(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],i="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(r.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),i+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?i+="\\/*$":e!==""&&e!=="/"&&(i+="(?:(?=\\/|$))"),[new RegExp(i,t?void 0:"i"),r]}function pF(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return jE(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function a4(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function mF(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:i=""}=typeof e=="string"?Xo(e):e;return{pathname:n?n.startsWith("/")?n:gF(n,t):t,search:wF(r),hash:SF(i)}}function gF(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(i=>{i===".."?n.length>1&&n.pop():i!=="."&&n.push(i)}),n.length>1?n.join("/"):"/"}function Ky(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function yF(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function vF(e,t){let n=yF(e);return t?n.map((r,i)=>i===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function bF(e,t,n,r){r===void 0&&(r=!1);let i;typeof e=="string"?i=Xo(e):(i=vc({},e),Yt(!i.pathname||!i.pathname.includes("?"),Ky("?","pathname","search",i)),Yt(!i.pathname||!i.pathname.includes("#"),Ky("#","pathname","hash",i)),Yt(!i.search||!i.search.includes("#"),Ky("#","search","hash",i)));let s=e===""||i.pathname==="",o=s?"/":i.pathname,l;if(o==null)l=n;else{let p=t.length-1;if(!r&&o.startsWith("..")){let g=o.split("/");for(;g[0]==="..";)g.shift(),p-=1;i.pathname=g.join("/")}l=p>=0?t[p]:"/"}let c=mF(i,l),f=o&&o!=="/"&&o.endsWith("/"),h=(s||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(f||h)&&(c.pathname+="/"),c}const _o=e=>e.join("/").replace(/\/\/+/g,"/"),xF=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),wF=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,SF=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function EF(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const l4=["post","put","patch","delete"];new Set(l4);const CF=["get",...l4];new Set(CF);/**
 * React Router v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function bc(){return bc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bc.apply(this,arguments)}const LE=P.createContext(null),kF=P.createContext(null),_p=P.createContext(null),Rp=P.createContext(null),Zo=P.createContext({outlet:null,matches:[],isDataRoute:!1}),u4=P.createContext(null);function Dp(){return P.useContext(Rp)!=null}function c4(){return Dp()||Yt(!1),P.useContext(Rp).location}function f4(e){P.useContext(_p).static||P.useLayoutEffect(e)}function Op(){let{isDataRoute:e}=P.useContext(Zo);return e?zF():TF()}function TF(){Dp()||Yt(!1);let e=P.useContext(LE),{basename:t,future:n,navigator:r}=P.useContext(_p),{matches:i}=P.useContext(Zo),{pathname:s}=c4(),o=JSON.stringify(vF(i,n.v7_relativeSplatPath)),l=P.useRef(!1);return f4(()=>{l.current=!0}),P.useCallback(function(f,h){if(h===void 0&&(h={}),!l.current)return;if(typeof f=="number"){r.go(f);return}let p=bF(f,JSON.parse(o),s,h.relative==="path");e==null&&t!=="/"&&(p.pathname=p.pathname==="/"?t:_o([t,p.pathname])),(h.replace?r.replace:r.push)(p,h.state,h)},[t,r,o,s,e])}function AF(){let{matches:e}=P.useContext(Zo),t=e[e.length-1];return t?t.params:{}}function MF(e,t){return NF(e,t)}function NF(e,t,n,r){Dp()||Yt(!1);let{navigator:i}=P.useContext(_p),{matches:s}=P.useContext(Zo),o=s[s.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let f=c4(),h;if(t){var p;let x=typeof t=="string"?Xo(t):t;c==="/"||(p=x.pathname)!=null&&p.startsWith(c)||Yt(!1),h=x}else h=f;let g=h.pathname||"/",y=g;if(c!=="/"){let x=c.replace(/^\//,"").split("/");y="/"+g.replace(/^\//,"").split("/").slice(x.length).join("/")}let b=eF(e,{pathname:y}),S=jF(b&&b.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:_o([c,i.encodeLocation?i.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?c:_o([c,i.encodeLocation?i.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),s,n,r);return t&&S?P.createElement(Rp.Provider,{value:{location:bc({pathname:"/",search:"",hash:"",state:null,key:"default"},h),navigationType:_s.Pop}},S):S}function _F(){let e=IF(),t=EF(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,i={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return P.createElement(P.Fragment,null,P.createElement("h2",null,"Unexpected Application Error!"),P.createElement("h3",{style:{fontStyle:"italic"}},t),n?P.createElement("pre",{style:i},n):null,null)}const RF=P.createElement(_F,null);class DF extends P.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?P.createElement(Zo.Provider,{value:this.props.routeContext},P.createElement(u4.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function OF(e){let{routeContext:t,match:n,children:r}=e,i=P.useContext(LE);return i&&i.static&&i.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(i.staticContext._deepestRenderedBoundaryId=n.route.id),P.createElement(Zo.Provider,{value:t},r)}function jF(e,t,n,r){var i;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var s;if(!n)return null;if(n.errors)e=n.matches;else if((s=r)!=null&&s.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,l=(i=n)==null?void 0:i.errors;if(l!=null){let h=o.findIndex(p=>p.route.id&&l?.[p.route.id]!==void 0);h>=0||Yt(!1),o=o.slice(0,Math.min(o.length,h+1))}let c=!1,f=-1;if(n&&r&&r.v7_partialHydration)for(let h=0;h<o.length;h++){let p=o[h];if((p.route.HydrateFallback||p.route.hydrateFallbackElement)&&(f=h),p.route.id){let{loaderData:g,errors:y}=n,b=p.route.loader&&g[p.route.id]===void 0&&(!y||y[p.route.id]===void 0);if(p.route.lazy||b){c=!0,f>=0?o=o.slice(0,f+1):o=[o[0]];break}}}return o.reduceRight((h,p,g)=>{let y,b=!1,S=null,x=null;n&&(y=l&&p.route.id?l[p.route.id]:void 0,S=p.route.errorElement||RF,c&&(f<0&&g===0?(qF("route-fallback"),b=!0,x=null):f===g&&(b=!0,x=p.route.hydrateFallbackElement||null)));let C=t.concat(o.slice(0,g+1)),T=()=>{let k;return y?k=S:b?k=x:p.route.Component?k=P.createElement(p.route.Component,null):p.route.element?k=p.route.element:k=h,P.createElement(OF,{match:p,routeContext:{outlet:h,matches:C,isDataRoute:n!=null},children:k})};return n&&(p.route.ErrorBoundary||p.route.errorElement||g===0)?P.createElement(DF,{location:n.location,revalidation:n.revalidation,component:S,error:y,children:T(),routeContext:{outlet:null,matches:C,isDataRoute:!0}}):T()},null)}var d4=(function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e})(d4||{}),h4=(function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e})(h4||{});function LF(e){let t=P.useContext(LE);return t||Yt(!1),t}function PF(e){let t=P.useContext(kF);return t||Yt(!1),t}function BF(e){let t=P.useContext(Zo);return t||Yt(!1),t}function p4(e){let t=BF(),n=t.matches[t.matches.length-1];return n.route.id||Yt(!1),n.route.id}function IF(){var e;let t=P.useContext(u4),n=PF(),r=p4();return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function zF(){let{router:e}=LF(d4.UseNavigateStable),t=p4(h4.UseNavigateStable),n=P.useRef(!1);return f4(()=>{n.current=!0}),P.useCallback(function(i,s){s===void 0&&(s={}),n.current&&(typeof i=="number"?e.navigate(i):e.navigate(i,bc({fromRouteId:t},s)))},[e,t])}const NM={};function qF(e,t,n){NM[e]||(NM[e]=!0)}function VF(e,t){e?.v7_startTransition,e?.v7_relativeSplatPath}function Wa(e){Yt(!1)}function HF(e){let{basename:t="/",children:n=null,location:r,navigationType:i=_s.Pop,navigator:s,static:o=!1,future:l}=e;Dp()&&Yt(!1);let c=t.replace(/^\/*/,"/"),f=P.useMemo(()=>({basename:c,navigator:s,static:o,future:bc({v7_relativeSplatPath:!1},l)}),[c,l,s,o]);typeof r=="string"&&(r=Xo(r));let{pathname:h="/",search:p="",hash:g="",state:y=null,key:b="default"}=r,S=P.useMemo(()=>{let x=a4(h,c);return x==null?null:{location:{pathname:x,search:p,hash:g,state:y,key:b},navigationType:i}},[c,h,p,g,y,b,i]);return S==null?null:P.createElement(_p.Provider,{value:f},P.createElement(Rp.Provider,{children:n,value:S}))}function FF(e){let{children:t,location:n}=e;return MF(mS(t),n)}new Promise(()=>{});function mS(e,t){t===void 0&&(t=[]);let n=[];return P.Children.forEach(e,(r,i)=>{if(!P.isValidElement(r))return;let s=[...t,i];if(r.type===P.Fragment){n.push.apply(n,mS(r.props.children,s));return}r.type!==Wa&&Yt(!1),!r.props.index||!r.props.children||Yt(!1);let o={id:r.props.id||s.join("-"),caseSensitive:r.props.caseSensitive,element:r.props.element,Component:r.props.Component,index:r.props.index,path:r.props.path,loader:r.props.loader,action:r.props.action,errorElement:r.props.errorElement,ErrorBoundary:r.props.ErrorBoundary,hasErrorBoundary:r.props.ErrorBoundary!=null||r.props.errorElement!=null,shouldRevalidate:r.props.shouldRevalidate,handle:r.props.handle,lazy:r.props.lazy};r.props.children&&(o.children=mS(r.props.children,s)),n.push(o)}),n}/**
 * React Router DOM v6.30.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */const UF="6";try{window.__reactRouterVersion=UF}catch{}const $F="startTransition",_M=F8[$F];function GF(e){let{basename:t,children:n,future:r,window:i}=e,s=P.useRef();s.current==null&&(s.current=Z8({window:i,v5Compat:!0}));let o=s.current,[l,c]=P.useState({action:o.action,location:o.location}),{v7_startTransition:f}=r||{},h=P.useCallback(p=>{f&&_M?_M(()=>c(p)):c(p)},[c,f]);return P.useLayoutEffect(()=>o.listen(h),[o,h]),P.useEffect(()=>VF(r),[r]),P.createElement(HF,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o,future:r})}var RM;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(RM||(RM={}));var DM;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(DM||(DM={}));var m4={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},OM=Pe.createContext&&Pe.createContext(m4),KF=["attr","size","title"];function YF(e,t){if(e==null)return{};var n=WF(e,t),r,i;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(i=0;i<s.length;i++)r=s[i],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function WF(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function vh(){return vh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vh.apply(this,arguments)}function jM(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(i){return Object.getOwnPropertyDescriptor(e,i).enumerable})),n.push.apply(n,r)}return n}function bh(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jM(Object(n),!0).forEach(function(r){XF(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jM(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function XF(e,t,n){return t=ZF(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ZF(e){var t=QF(e,"string");return typeof t=="symbol"?t:t+""}function QF(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t);if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function g4(e){return e&&e.map((t,n)=>Pe.createElement(t.tag,bh({key:n},t.attr),g4(t.child)))}function mt(e){return t=>Pe.createElement(JF,vh({attr:bh({},e.attr)},t),g4(e.child))}function JF(e){var t=n=>{var{attr:r,size:i,title:s}=e,o=YF(e,KF),l=i||n.size||"1em",c;return n.className&&(c=n.className),e.className&&(c=(c?c+" ":"")+e.className),Pe.createElement("svg",vh({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,o,{className:c,style:bh(bh({color:e.color||n.color},n.style),e.style),height:l,width:l,xmlns:"http://www.w3.org/2000/svg"}),s&&Pe.createElement("title",null,s),e.children)};return OM!==void 0?Pe.createElement(OM.Consumer,null,n=>t(n)):t(m4)}function eU(e){return mt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 12.79A9 9 0 1 1 11.21 3 7 7 0 0 0 21 12.79z"},child:[]}]})(e)}function tU(e){return mt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"circle",attr:{cx:"12",cy:"12",r:"5"},child:[]},{tag:"line",attr:{x1:"12",y1:"1",x2:"12",y2:"3"},child:[]},{tag:"line",attr:{x1:"12",y1:"21",x2:"12",y2:"23"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"4.22",x2:"5.64",y2:"5.64"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"18.36",x2:"19.78",y2:"19.78"},child:[]},{tag:"line",attr:{x1:"1",y1:"12",x2:"3",y2:"12"},child:[]},{tag:"line",attr:{x1:"21",y1:"12",x2:"23",y2:"12"},child:[]},{tag:"line",attr:{x1:"4.22",y1:"19.78",x2:"5.64",y2:"18.36"},child:[]},{tag:"line",attr:{x1:"18.36",y1:"5.64",x2:"19.78",y2:"4.22"},child:[]}]})(e)}function nU(e){return mt({attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"rect",attr:{x:"3",y:"11",width:"18",height:"11",rx:"2",ry:"2"},child:[]},{tag:"path",attr:{d:"M7 11V7a5 5 0 0 1 9.9-1"},child:[]}]})(e)}const rU=e=>e==="system"||e==="light"||e==="dark";function Tl(){const[e,t]=P.useState(()=>{if(typeof window>"u")return"light";const s=localStorage.getItem("theme");return rU(s)?s:"light"}),[n,r]=P.useState(()=>typeof window>"u"?!1:window.matchMedia&&window.matchMedia("(prefers-color-scheme: dark)").matches);return P.useLayoutEffect(()=>{const s=document.documentElement;(l=>{l==="system"?s.classList.toggle("dark",n):s.classList.toggle("dark",l==="dark")})(e);try{localStorage.setItem("theme",e)}catch{}},[e,n]),P.useEffect(()=>{if(typeof window>"u")return;const s=window.matchMedia("(prefers-color-scheme: dark)"),o=l=>{r(l.matches)};return s.addEventListener("change",o),()=>s.removeEventListener("change",o)},[]),{theme:e,setTheme:t,flowColorMode:e==="system"?n?"dark":"light":e}}const jp=()=>{const{theme:e,setTheme:t}=Tl();return w.jsx("button",{onClick:()=>t(e==="light"?"dark":"light"),className:"p-2 rounded-full bg-[var(--bg)] text-[var(--text)] cursor-pointer",children:e==="light"?w.jsx(eU,{size:18}):w.jsx(tU,{size:18})})},Zn={title:"Diagrammatic — Interactive System Design Playground | Learn Architecture Design",description:"Master system design with Diagrammatic - an interactive playground featuring 45+ components, AI assessment, and real-world practice problems. Free system architecture tool for students, professionals, and educators.",keywords:"system design, architecture diagram, system design interview, software architecture, distributed systems, scalable architecture",image:"https://satya00089.github.io/diagrammatic/logo.png",url:"https://satya00089.github.io/diagrammatic/"},Lp=({title:e,description:t,keywords:n,image:r,url:i,type:s="website"})=>(P.useEffect(()=>{document.title=e||Zn.title;const o=(c,f,h=!1)=>{const p=h?"property":"name";let g=document.querySelector(`meta[${p}="${c}"]`);g?g.content=f:(g=document.createElement("meta"),g.setAttribute(p,c),g.content=f,document.head.appendChild(g))};o("description",t||Zn.description),o("keywords",n||Zn.keywords),o("og:title",e||Zn.title,!0),o("og:description",t||Zn.description,!0),o("og:image",r||Zn.image,!0),o("og:url",i||Zn.url,!0),o("og:type",s,!0),o("twitter:title",e||Zn.title),o("twitter:description",t||Zn.description),o("twitter:image",r||Zn.image),o("twitter:url",i||Zn.url);let l=document.querySelector('link[rel="canonical"]');l?l.href=i||Zn.url:(l=document.createElement("link"),l.rel="canonical",l.href=i||Zn.url,document.head.appendChild(l))},[e,t,n,r,i,s]),null),LM=()=>{Tl();const e=Op(),[t,n]=P.useState(!1),[r,i]=P.useState(!1);P.useEffect(()=>{n(!0)},[]),P.useEffect(()=>{const f=()=>{i(window.scrollY>100)};return window.addEventListener("scroll",f),()=>window.removeEventListener("scroll",f)},[]);const s=[{icon:"🎯",title:"Practice Problems",description:"Master system design through curated problems with real-world scenarios",action:"Browse Problems",route:"/problems",gradient:"from-blue-500 to-cyan-500"},{icon:"🎨",title:"Free Design Canvas",description:"Create your own system designs from scratch. Perfect for planning your next project",action:"Start Designing",route:"/playground/free",gradient:"from-purple-500 to-pink-500"},{icon:"📝",title:"Custom Problems",description:"Bring your own problem statements and design solutions in an interactive environment",action:"Create Problem",route:"/create-problem",gradient:"from-orange-500 to-red-500"}],o=[{icon:"🧩",title:"45+ Components",description:"Databases, APIs, caches, queues, and more"},{icon:"🔗",title:"Smart Connections",description:"Define data flow and relationships visually"},{icon:"⚡",title:"Custom Properties",description:"Add metadata to any component"},{icon:"🎯",title:"AI Assessment",description:"Get feedback on your designs"},{icon:"🌓",title:"Dark Mode",description:"Beautiful themes for any preference"},{icon:"💾",title:"Export & Share",description:"Save and share your designs"}],l=[{value:"45+",label:"Components",icon:"🧩"},{value:"1000+",label:"Users",icon:"👥"},{value:"∞",label:"Possibilities",icon:"✨"}],c=[{quote:"This tool transformed how I prepare for system design interviews.",author:"Software Engineer",role:"FAANG Company"},{quote:"Perfect for teaching distributed systems to my students.",author:"Professor",role:"University CS Dept"},{quote:"I use it daily to plan architecture for client projects.",author:"Solutions Architect",role:"Tech Consulting"}];return w.jsxs(w.Fragment,{children:[w.jsx(Lp,{title:"Diagrammatic — Interactive System Design Playground | Learn Architecture Design",description:"Master system design with Diagrammatic - an interactive playground featuring 45+ components, AI assessment, and real-world practice problems. Free system architecture tool for students, professionals, and educators.",keywords:"system design, architecture diagram, system design interview, software architecture, distributed systems, scalable architecture, system design tool, architecture playground, cloud architecture, microservices design",url:"https://satya00089.github.io/diagrammatic/"}),w.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[var(--surface)] via-[var(--bg)] to-[var(--surface)] text-theme relative grid-pattern-overlay",children:[w.jsxs("div",{className:"absolute inset-0 pointer-events-none opacity-[0.16] z-0 min-h-full",children:[w.jsxs("svg",{className:"absolute inset-0 w-full h-full",xmlns:"http://www.w3.org/2000/svg",preserveAspectRatio:"none",children:[w.jsx("line",{x1:"10%",y1:"15%",x2:"25%",y2:"15%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme",opacity:"0.6"}),w.jsx("line",{x1:"25%",y1:"15%",x2:"40%",y2:"25%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-200",opacity:"0.6"}),w.jsx("line",{x1:"40%",y1:"25%",x2:"60%",y2:"20%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-400",opacity:"0.6"}),w.jsx("line",{x1:"60%",y1:"20%",x2:"75%",y2:"25%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-600",opacity:"0.6"}),w.jsx("line",{x1:"75%",y1:"25%",x2:"90%",y2:"15%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-800",opacity:"0.6"}),w.jsx("line",{x1:"15%",y1:"40%",x2:"30%",y2:"45%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-300",opacity:"0.6"}),w.jsx("line",{x1:"30%",y1:"45%",x2:"50%",y2:"50%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-500",opacity:"0.6"}),w.jsx("line",{x1:"50%",y1:"50%",x2:"70%",y2:"45%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-700",opacity:"0.6"}),w.jsx("line",{x1:"70%",y1:"45%",x2:"85%",y2:"40%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-900",opacity:"0.6"}),w.jsx("line",{x1:"20%",y1:"70%",x2:"35%",y2:"75%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-400",opacity:"0.6"}),w.jsx("line",{x1:"35%",y1:"75%",x2:"50%",y2:"80%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-600",opacity:"0.6"}),w.jsx("line",{x1:"50%",y1:"80%",x2:"65%",y2:"75%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-800",opacity:"0.6"}),w.jsx("line",{x1:"65%",y1:"75%",x2:"80%",y2:"70%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-1000",opacity:"0.6"}),w.jsx("line",{x1:"25%",y1:"15%",x2:"30%",y2:"45%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-500",opacity:"0.6"}),w.jsx("line",{x1:"50%",y1:"20%",x2:"50%",y2:"50%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-700",opacity:"0.6"}),w.jsx("line",{x1:"75%",y1:"25%",x2:"70%",y2:"45%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-900",opacity:"0.6"}),w.jsx("line",{x1:"50%",y1:"50%",x2:"50%",y2:"80%",stroke:"currentColor",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse text-theme delay-1100",opacity:"0.6"})]}),w.jsx("div",{className:"absolute top-[15%] left-[10%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg",children:"🗄️"}),w.jsx("div",{className:"absolute top-[15%] left-[25%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:"🔐"}),w.jsx("div",{className:"absolute top-[25%] left-[40%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-300",children:"⚡"}),w.jsx("div",{className:"absolute top-[20%] left-[60%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:"🌐"}),w.jsx("div",{className:"absolute top-[25%] left-[75%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-600",children:"⚙️"}),w.jsx("div",{className:"absolute top-[15%] left-[90%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:"📡"}),w.jsx("div",{className:"absolute top-[40%] left-[15%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-400",children:"🔗"}),w.jsx("div",{className:"absolute top-[45%] left-[30%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:"💾"}),w.jsx("div",{className:"absolute top-[50%] left-[50%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float shadow-lg delay-500",children:"🎯"}),w.jsx("div",{className:"absolute top-[45%] left-[70%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:"📊"}),w.jsx("div",{className:"absolute top-[40%] left-[85%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-700",children:"🔄"}),w.jsx("div",{className:"absolute top-[69%] left-[17%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl shadow-lg",children:"🎨"}),w.jsx("div",{className:"absolute top-[75%] left-[35%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:"💡"}),w.jsx("div",{className:"absolute top-[80%] left-[48%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl shadow-lg",children:"✨"}),w.jsx("div",{className:"absolute top-[74%] left-[65%] w-20 h-20 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:"🚀"}),w.jsx("div",{className:"absolute top-[70%] left-[79%] w-16 h-16 bg-[var(--theme)]/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-1000",children:"🌟"})]}),w.jsx("header",{className:`fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-[var(--brand)] to-[var(--header-gradient-end)] transition-all duration-300 ${r?"shadow-lg":""}`,children:w.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:w.jsxs("div",{className:"flex items-center justify-between h-16",children:[w.jsxs("button",{type:"button",onClick:()=>e("/"),className:"flex items-center space-x-3 group cursor-pointer",children:[w.jsx("img",{src:"./logo.png",alt:"Logo",className:"h-10 transition-transform group-hover:scale-110 duration-300"}),w.jsx("span",{className:"text-xl font-bold text-white",children:"Diagrammatic"})]}),w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsx("button",{type:"button",onClick:()=>e("/problems"),className:"hidden md:block px-4 py-2 text-sm font-medium text-white hover:text-white/80 transition-colors cursor-pointer",children:"Problems"}),w.jsx(jp,{})]})]})})}),w.jsx("section",{className:"relative pt-16 pb-20",children:w.jsxs("div",{className:"relative overflow-hidden bg-gradient-to-br from-[var(--brand)] to-[var(--accent)]",children:[w.jsxs("div",{className:"absolute inset-0 opacity-10 pointer-events-none",children:[w.jsxs("svg",{className:"absolute inset-0 w-full h-full",xmlns:"http://www.w3.org/2000/svg",children:[w.jsx("line",{x1:"10%",y1:"20%",x2:"30%",y2:"40%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse",opacity:"0.6"}),w.jsx("line",{x1:"30%",y1:"40%",x2:"50%",y2:"30%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-500",opacity:"0.6"}),w.jsx("line",{x1:"50%",y1:"30%",x2:"70%",y2:"45%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-1000",opacity:"0.6"}),w.jsx("line",{x1:"70%",y1:"45%",x2:"90%",y2:"25%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-1500",opacity:"0.6"}),w.jsx("line",{x1:"30%",y1:"40%",x2:"50%",y2:"70%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-700",opacity:"0.6"}),w.jsx("line",{x1:"50%",y1:"70%",x2:"70%",y2:"45%",stroke:"white",strokeWidth:"2",strokeDasharray:"5,5",className:"animate-pulse delay-1200",opacity:"0.6"})]}),w.jsx("div",{className:"absolute top-[20%] left-[10%] w-16 h-16 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg",children:"🗄️"}),w.jsx("div",{className:"absolute top-[40%] left-[30%] w-20 h-20 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:"⚡"}),w.jsx("div",{className:"absolute top-[30%] left-[50%] w-16 h-16 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-500",children:"🔗"}),w.jsx("div",{className:"absolute top-[45%] left-[70%] w-20 h-20 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-3xl animate-float-delayed shadow-lg",children:"💾"}),w.jsx("div",{className:"absolute top-[25%] left-[90%] w-16 h-16 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float shadow-lg delay-1000",children:"📊"}),w.jsx("div",{className:"absolute top-[70%] left-[50%] w-16 h-16 bg-white/20 backdrop-blur-sm rounded-xl flex items-center justify-center text-2xl animate-float-delayed shadow-lg delay-300",children:"🚀"})]}),w.jsx("div",{className:"absolute inset-0 opacity-[0.03] hero-grid-overlay"}),w.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 md:py-24",children:w.jsxs("div",{className:`relative z-10 text-center transition-all duration-1000 ${t?"opacity-100 translate-y-0":"opacity-0 translate-y-10"}`,children:[w.jsx("div",{className:"inline-block mb-6",children:w.jsx("span",{className:"px-4 py-2 bg-white/20 backdrop-blur-sm text-white text-sm font-semibold rounded-full shadow-lg",children:"✨ Now with 45+ Components & AI Assessment"})}),w.jsxs("h1",{className:"text-5xl md:text-7xl font-bold mb-6 leading-tight text-white",children:[w.jsx("span",{className:"inline-block animate-gradient bg-gradient-to-r from-white via-white/90 to-white bg-clip-text",children:"System Design"}),w.jsx("br",{}),w.jsx("span",{className:"text-white/95",children:"Visually, Intuitively"})]}),w.jsx("p",{className:"text-xl md:text-2xl text-white/90 max-w-3xl mx-auto mb-8 leading-relaxed",children:"The interactive playground for system design — practice, learn, and create architecture diagrams with ease"}),w.jsx("div",{className:"flex flex-wrap justify-center gap-8 mb-12",children:l.map((f,h)=>w.jsxs("div",{className:`text-center transition-all duration-500 bg-white/10 backdrop-blur-sm rounded-2xl px-6 py-4 hover:bg-white/20 hover:scale-105 ${t?"fade-in-up":"opacity-0 translate-y-5"} ${h===0?"fade-in-up-delay-100":h===1?"fade-in-up-delay-200":"fade-in-up-delay-300"}`,children:[w.jsx("div",{className:"text-3xl mb-1",children:f.icon}),w.jsx("div",{className:"text-3xl font-bold text-white",children:f.value}),w.jsx("div",{className:"text-sm text-white/80",children:f.label})]},f.label))}),w.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[w.jsxs("button",{type:"button",onClick:()=>e("/playground/free"),className:"group relative px-8 py-4 bg-white text-[var(--brand)] text-lg font-bold rounded-xl hover:shadow-2xl hover:scale-105 transition-all duration-300 cursor-pointer overflow-hidden",children:[w.jsxs("span",{className:"relative z-10 flex items-center gap-2",children:["Get Started Free"," ",w.jsx("span",{className:"group-hover:translate-x-1 transition-transform",children:"→"})]}),w.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-white to-white/90 opacity-0 group-hover:opacity-100 transition-opacity duration-300"})]}),w.jsxs("button",{type:"button",onClick:()=>e("/problems"),className:"group px-8 py-4 bg-white/10 backdrop-blur-sm border-2 border-white/30 text-white text-lg font-semibold rounded-xl hover:bg-white/20 hover:border-white/50 hover:scale-105 transition-all duration-300 cursor-pointer",children:["Explore Problems"," ",w.jsx("span",{className:"inline-block group-hover:translate-x-1 transition-transform",children:"→"})]})]}),w.jsx("p",{className:"mt-6 text-sm text-white/80",children:"No signup required • Free forever • 45+ components"})]})})]})}),w.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 relative",children:w.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[w.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-4",children:"Choose Your Path"}),w.jsx("p",{className:"text-muted text-center mb-16 text-lg max-w-2xl mx-auto",children:"Whether you're learning, building, or teaching — we've got you covered"}),w.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:s.map((f,h)=>w.jsxs("div",{className:`group relative backdrop-blur-md rounded-3xl shadow-[0_8px_30px_rgba(0,0,0,0.12)] p-8 hover:shadow-[0_20px_60px_rgba(0,0,0,0.25)] hover:scale-[1.02] cursor-pointer overflow-hidden transition-all duration-500 elevated-card-bg ${h===0?"delay-0":h===1?"delay-100":"delay-200"}`,onClick:()=>e(f.route),onKeyDown:p=>p.key==="Enter"&&e(f.route),role:"button",tabIndex:0,children:[w.jsx("div",{className:`absolute inset-0 bg-gradient-to-br ${f.gradient} opacity-0 group-hover:opacity-[0.03] transition-opacity duration-500`}),w.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-3xl opacity-0 group-hover:opacity-20 blur-xl transition-opacity duration-500"}),w.jsxs("div",{className:"relative z-10",children:[w.jsx("div",{className:"text-6xl mb-6 transform group-hover:scale-110 transition-transform duration-300",children:f.icon}),w.jsx("h3",{className:"text-2xl font-bold mb-4 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:f.title}),w.jsx("p",{className:"text-muted mb-8 leading-relaxed text-[15px]",children:f.description}),w.jsxs("div",{className:"inline-flex items-center gap-2 text-[var(--brand)] font-semibold text-sm group-hover:gap-3 transition-all duration-300",children:[f.action,w.jsx("span",{className:"text-lg group-hover:translate-x-1 transition-transform duration-300",children:"→"})]})]})]},f.title))})]})}),w.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-transparent via-surface/30 to-transparent relative",children:w.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[w.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-4",children:"Powerful Features"}),w.jsx("p",{className:"text-muted text-center mb-16 text-lg max-w-2xl mx-auto",children:"Everything you need to design, document, and share system architectures"}),w.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-6",children:o.map((f,h)=>w.jsxs("div",{className:`group backdrop-blur-md rounded-2xl shadow-[0_4px_20px_rgba(0,0,0,0.08)] p-6 hover:shadow-[0_12px_40px_rgba(0,0,0,0.15)] transition-all duration-300 hover:-translate-y-1 elevated-card-bg ${h===0?"delay-0":h===1?"delay-[50ms]":h===2?"delay-[100ms]":h===3?"delay-[150ms]":h===4?"delay-[200ms]":"delay-[250ms]"}`,children:[w.jsx("div",{className:"text-4xl mb-4 transform group-hover:scale-110 group-hover:rotate-6 transition-all duration-300",children:f.icon}),w.jsx("h3",{className:"text-lg font-semibold mb-2 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:f.title}),w.jsx("p",{className:"text-muted text-sm leading-relaxed",children:f.description})]},f.title))})]})}),w.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 relative",children:w.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[w.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-4",children:"Loved by Designers Worldwide"}),w.jsx("p",{className:"text-muted text-center mb-16 text-lg max-w-2xl mx-auto",children:"Join thousands who trust Diagrammatic for their system design needs"}),w.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:c.map((f,h)=>w.jsxs("div",{className:"group relative backdrop-blur-md rounded-3xl shadow-[0_8px_30px_rgba(0,0,0,0.12)] p-8 hover:shadow-[0_20px_60px_rgba(0,0,0,0.2)] transition-all duration-500 hover:-translate-y-2 elevated-card-bg",children:[w.jsx("div",{className:"absolute top-6 right-6 text-7xl text-[var(--brand)]/5 font-serif leading-none",children:'"'}),w.jsxs("div",{className:"relative z-10",children:[w.jsx("div",{className:"text-5xl mb-6 text-[var(--brand)]/20 font-serif",children:'"'}),w.jsx("p",{className:"text-theme mb-8 leading-relaxed text-[15px] italic",children:f.quote}),w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsx("div",{className:"w-12 h-12 rounded-full bg-gradient-to-br from-[var(--brand)] to-[var(--accent)] flex items-center justify-center text-white font-bold text-lg shadow-lg group-hover:scale-110 transition-transform duration-300",children:f.author.charAt(0)}),w.jsxs("div",{children:[w.jsx("div",{className:"font-semibold text-theme",children:f.author}),w.jsx("div",{className:"text-muted text-sm",children:f.role})]})]})]})]},`testimonial-${h}`))})]})}),w.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 bg-gradient-to-b from-transparent via-surface/20 to-transparent relative",children:w.jsxs("div",{className:"max-w-7xl mx-auto relative z-10",children:[w.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-center mb-16",children:"Perfect For Every Role"}),w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-10",children:[w.jsxs("div",{className:"group text-center p-8 rounded-3xl hover:elevated-card-bg hover:backdrop-blur-md hover:shadow-[0_20px_60px_rgba(0,0,0,0.15)] transition-all duration-500 hover:-translate-y-2",role:"button",tabIndex:0,children:[w.jsxs("div",{className:"relative inline-block mb-6",children:[w.jsx("div",{className:"absolute inset-0 gradient-icon-blue-cyan rounded-full blur-xl opacity-50 group-hover:opacity-70 transition-opacity duration-500"}),w.jsx("div",{className:"relative w-20 h-20 mx-auto gradient-icon-blue-cyan rounded-full flex items-center justify-center text-4xl shadow-lg group-hover:scale-110 group-hover:rotate-12 transition-all duration-500",children:"🎓"})]}),w.jsx("h3",{className:"text-2xl font-bold mb-4 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:"Students"}),w.jsx("p",{className:"text-muted leading-relaxed mb-6",children:"Learn system design concepts through hands-on practice with real-world problems"}),w.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-[var(--brand)] font-semibold opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-2 group-hover:translate-y-0",children:["Start practicing"," ",w.jsx("span",{className:"group-hover:translate-x-1 transition-transform duration-300",children:"→"})]})]}),w.jsxs("div",{className:"group text-center p-8 rounded-3xl hover:elevated-card-bg hover:backdrop-blur-md hover:shadow-[0_20px_60px_rgba(0,0,0,0.15)] transition-all duration-500 hover:-translate-y-2",role:"button",tabIndex:0,children:[w.jsxs("div",{className:"relative inline-block mb-6",children:[w.jsx("div",{className:"absolute inset-0 gradient-icon-purple-pink rounded-full blur-xl opacity-50 group-hover:opacity-70 transition-opacity duration-500"}),w.jsx("div",{className:"relative w-20 h-20 mx-auto gradient-icon-purple-pink rounded-full flex items-center justify-center text-4xl shadow-lg group-hover:scale-110 group-hover:rotate-12 transition-all duration-500",children:"💼"})]}),w.jsx("h3",{className:"text-2xl font-bold mb-4 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:"Professionals"}),w.jsx("p",{className:"text-muted leading-relaxed mb-6",children:"Plan and document architecture for your projects with a visual approach"}),w.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-[var(--brand)] font-semibold opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-2 group-hover:translate-y-0",children:["Start designing"," ",w.jsx("span",{className:"group-hover:translate-x-1 transition-transform duration-300",children:"→"})]})]}),w.jsxs("div",{className:"group text-center p-8 rounded-3xl hover:elevated-card-bg hover:backdrop-blur-md hover:shadow-[0_20px_60px_rgba(0,0,0,0.15)] transition-all duration-500 hover:-translate-y-2",role:"button",tabIndex:0,children:[w.jsxs("div",{className:"relative inline-block mb-6",children:[w.jsx("div",{className:"absolute inset-0 gradient-icon-orange-red rounded-full blur-xl opacity-50 group-hover:opacity-70 transition-opacity duration-500"}),w.jsx("div",{className:"relative w-20 h-20 mx-auto gradient-icon-orange-red rounded-full flex items-center justify-center text-4xl shadow-lg group-hover:scale-110 group-hover:rotate-12 transition-all duration-500",children:"👨‍🏫"})]}),w.jsx("h3",{className:"text-2xl font-bold mb-4 text-theme group-hover:text-[var(--brand)] transition-colors duration-300",children:"Educators"}),w.jsx("p",{className:"text-muted leading-relaxed mb-6",children:"Create custom problems and assignments for your students to solve"}),w.jsxs("div",{className:"inline-flex items-center gap-2 text-sm text-[var(--brand)] font-semibold opacity-0 group-hover:opacity-100 transition-all duration-300 transform translate-y-2 group-hover:translate-y-0",children:["Create problem"," ",w.jsx("span",{className:"group-hover:translate-x-1 transition-transform duration-300",children:"→"})]})]})]})]})}),w.jsx("section",{className:"py-20 px-4 sm:px-6 lg:px-8 relative",children:w.jsxs("div",{className:"max-w-4xl mx-auto text-center bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-3xl p-12 relative overflow-hidden",children:[w.jsx("div",{className:"absolute top-0 left-0 w-40 h-40 bg-white/10 rounded-full -translate-x-1/2 -translate-y-1/2"}),w.jsx("div",{className:"absolute bottom-0 right-0 w-60 h-60 bg-white/10 rounded-full translate-x-1/3 translate-y-1/3"}),w.jsxs("div",{className:"relative z-10",children:[w.jsx("h2",{className:"text-3xl md:text-4xl font-bold text-white mb-4",children:"Ready to Start Designing?"}),w.jsx("p",{className:"text-white/90 text-lg mb-8 max-w-2xl mx-auto",children:"Join thousands of developers and architects who trust Diagrammatic for their system design needs"}),w.jsx("button",{type:"button",onClick:()=>e("/playground/free"),className:"px-8 py-4 bg-white text-[var(--brand)] text-lg font-bold rounded-xl hover:shadow-2xl hover:scale-105 transition-all duration-300 cursor-pointer",children:"Launch Free Canvas"})]})]})}),w.jsx("footer",{className:"py-12 px-4 sm:px-6 lg:px-8 shadow-[0_-4px_20px_rgba(0,0,0,0.08)]",children:w.jsx("div",{className:"max-w-7xl mx-auto",children:w.jsxs("div",{className:"flex flex-col md:flex-row justify-between items-center gap-4",children:[w.jsxs("div",{className:"flex items-center space-x-3",children:[w.jsx("img",{src:"./logo.png",alt:"Logo",className:"h-8"}),w.jsx("span",{className:"font-semibold text-theme",children:"Diagrammatic"})]}),w.jsx("p",{className:"text-muted text-sm",children:"© 2025 Diagrammatic. Built with ❤️ for system designers"})]})})}),w.jsx("style",{children:`
        @keyframes gradient {
          0%, 100% { background-position: 0% 50%; }
          50% { background-position: 100% 50%; }
        }
        .animate-gradient {
          background-size: 200% auto;
          animation: gradient 3s ease infinite;
        }
        @keyframes float {
          0%, 100% { transform: translateY(0px) rotate(0deg); }
          50% { transform: translateY(-20px) rotate(5deg); }
        }
        .animate-float {
          animation: float 6s ease-in-out infinite;
        }
        .animate-float-delayed {
          animation: float 8s ease-in-out infinite;
          animation-delay: 1s;
        }
      `})]})]})};function Ii(e){return Array.isArray?Array.isArray(e):b4(e)==="[object Array]"}function iU(e){if(typeof e=="string")return e;let t=e+"";return t=="0"&&1/e==-1/0?"-0":t}function sU(e){return e==null?"":iU(e)}function Qr(e){return typeof e=="string"}function y4(e){return typeof e=="number"}function oU(e){return e===!0||e===!1||aU(e)&&b4(e)=="[object Boolean]"}function v4(e){return typeof e=="object"}function aU(e){return v4(e)&&e!==null}function Jn(e){return e!=null}function Yy(e){return!e.trim().length}function b4(e){return e==null?e===void 0?"[object Undefined]":"[object Null]":Object.prototype.toString.call(e)}const lU="Incorrect 'index' type",uU=e=>`Invalid value for key ${e}`,cU=e=>`Pattern length exceeds max of ${e}.`,fU=e=>`Missing ${e} property in key`,dU=e=>`Property 'weight' in key '${e}' must be a positive integer`,PM=Object.prototype.hasOwnProperty;class hU{constructor(t){this._keys=[],this._keyMap={};let n=0;t.forEach(r=>{let i=x4(r);this._keys.push(i),this._keyMap[i.id]=i,n+=i.weight}),this._keys.forEach(r=>{r.weight/=n})}get(t){return this._keyMap[t]}keys(){return this._keys}toJSON(){return JSON.stringify(this._keys)}}function x4(e){let t=null,n=null,r=null,i=1,s=null;if(Qr(e)||Ii(e))r=e,t=BM(e),n=gS(e);else{if(!PM.call(e,"name"))throw new Error(fU("name"));const o=e.name;if(r=o,PM.call(e,"weight")&&(i=e.weight,i<=0))throw new Error(dU(o));t=BM(o),n=gS(o),s=e.getFn}return{path:t,id:n,weight:i,src:r,getFn:s}}function BM(e){return Ii(e)?e:e.split(".")}function gS(e){return Ii(e)?e.join("."):e}function pU(e,t){let n=[],r=!1;const i=(s,o,l)=>{if(Jn(s))if(!o[l])n.push(s);else{let c=o[l];const f=s[c];if(!Jn(f))return;if(l===o.length-1&&(Qr(f)||y4(f)||oU(f)))n.push(sU(f));else if(Ii(f)){r=!0;for(let h=0,p=f.length;h<p;h+=1)i(f[h],o,l+1)}else o.length&&i(f,o,l+1)}};return i(e,Qr(t)?t.split("."):t,0),r?n:n[0]}const mU={includeMatches:!1,findAllMatches:!1,minMatchCharLength:1},gU={isCaseSensitive:!1,ignoreDiacritics:!1,includeScore:!1,keys:[],shouldSort:!0,sortFn:(e,t)=>e.score===t.score?e.idx<t.idx?-1:1:e.score<t.score?-1:1},yU={location:0,threshold:.6,distance:100},vU={useExtendedSearch:!1,getFn:pU,ignoreLocation:!1,ignoreFieldNorm:!1,fieldNormWeight:1};var ze={...gU,...mU,...yU,...vU};const bU=/[^ ]+/g;function xU(e=1,t=3){const n=new Map,r=Math.pow(10,t);return{get(i){const s=i.match(bU).length;if(n.has(s))return n.get(s);const o=1/Math.pow(s,.5*e),l=parseFloat(Math.round(o*r)/r);return n.set(s,l),l},clear(){n.clear()}}}class PE{constructor({getFn:t=ze.getFn,fieldNormWeight:n=ze.fieldNormWeight}={}){this.norm=xU(n,3),this.getFn=t,this.isCreated=!1,this.setIndexRecords()}setSources(t=[]){this.docs=t}setIndexRecords(t=[]){this.records=t}setKeys(t=[]){this.keys=t,this._keysMap={},t.forEach((n,r)=>{this._keysMap[n.id]=r})}create(){this.isCreated||!this.docs.length||(this.isCreated=!0,Qr(this.docs[0])?this.docs.forEach((t,n)=>{this._addString(t,n)}):this.docs.forEach((t,n)=>{this._addObject(t,n)}),this.norm.clear())}add(t){const n=this.size();Qr(t)?this._addString(t,n):this._addObject(t,n)}removeAt(t){this.records.splice(t,1);for(let n=t,r=this.size();n<r;n+=1)this.records[n].i-=1}getValueForItemAtKeyId(t,n){return t[this._keysMap[n]]}size(){return this.records.length}_addString(t,n){if(!Jn(t)||Yy(t))return;let r={v:t,i:n,n:this.norm.get(t)};this.records.push(r)}_addObject(t,n){let r={i:n,$:{}};this.keys.forEach((i,s)=>{let o=i.getFn?i.getFn(t):this.getFn(t,i.path);if(Jn(o)){if(Ii(o)){let l=[];const c=[{nestedArrIndex:-1,value:o}];for(;c.length;){const{nestedArrIndex:f,value:h}=c.pop();if(Jn(h))if(Qr(h)&&!Yy(h)){let p={v:h,i:f,n:this.norm.get(h)};l.push(p)}else Ii(h)&&h.forEach((p,g)=>{c.push({nestedArrIndex:g,value:p})})}r.$[s]=l}else if(Qr(o)&&!Yy(o)){let l={v:o,n:this.norm.get(o)};r.$[s]=l}}}),this.records.push(r)}toJSON(){return{keys:this.keys,records:this.records}}}function w4(e,t,{getFn:n=ze.getFn,fieldNormWeight:r=ze.fieldNormWeight}={}){const i=new PE({getFn:n,fieldNormWeight:r});return i.setKeys(e.map(x4)),i.setSources(t),i.create(),i}function wU(e,{getFn:t=ze.getFn,fieldNormWeight:n=ze.fieldNormWeight}={}){const{keys:r,records:i}=e,s=new PE({getFn:t,fieldNormWeight:n});return s.setKeys(r),s.setIndexRecords(i),s}function Rd(e,{errors:t=0,currentLocation:n=0,expectedLocation:r=0,distance:i=ze.distance,ignoreLocation:s=ze.ignoreLocation}={}){const o=t/e.length;if(s)return o;const l=Math.abs(r-n);return i?o+l/i:l?1:o}function SU(e=[],t=ze.minMatchCharLength){let n=[],r=-1,i=-1,s=0;for(let o=e.length;s<o;s+=1){let l=e[s];l&&r===-1?r=s:!l&&r!==-1&&(i=s-1,i-r+1>=t&&n.push([r,i]),r=-1)}return e[s-1]&&s-r>=t&&n.push([r,s-1]),n}const wo=32;function EU(e,t,n,{location:r=ze.location,distance:i=ze.distance,threshold:s=ze.threshold,findAllMatches:o=ze.findAllMatches,minMatchCharLength:l=ze.minMatchCharLength,includeMatches:c=ze.includeMatches,ignoreLocation:f=ze.ignoreLocation}={}){if(t.length>wo)throw new Error(cU(wo));const h=t.length,p=e.length,g=Math.max(0,Math.min(r,p));let y=s,b=g;const S=l>1||c,x=S?Array(p):[];let C;for(;(C=e.indexOf(t,b))>-1;){let R=Rd(t,{currentLocation:C,expectedLocation:g,distance:i,ignoreLocation:f});if(y=Math.min(R,y),b=C+h,S){let O=0;for(;O<h;)x[C+O]=1,O+=1}}b=-1;let T=[],k=1,A=h+p;const M=1<<h-1;for(let R=0;R<h;R+=1){let O=0,I=A;for(;O<I;)Rd(t,{errors:R,currentLocation:g+I,expectedLocation:g,distance:i,ignoreLocation:f})<=y?O=I:A=I,I=Math.floor((A-O)/2+O);A=I;let $=Math.max(1,g-I+1),q=o?p:Math.min(g+I,p)+h,U=Array(q+2);U[q+1]=(1<<R)-1;for(let B=q;B>=$;B-=1){let F=B-1,j=n[e.charAt(F)];if(S&&(x[F]=+!!j),U[B]=(U[B+1]<<1|1)&j,R&&(U[B]|=(T[B+1]|T[B])<<1|1|T[B+1]),U[B]&M&&(k=Rd(t,{errors:R,currentLocation:F,expectedLocation:g,distance:i,ignoreLocation:f}),k<=y)){if(y=k,b=F,b<=g)break;$=Math.max(1,2*g-b)}}if(Rd(t,{errors:R+1,currentLocation:g,expectedLocation:g,distance:i,ignoreLocation:f})>y)break;T=U}const _={isMatch:b>=0,score:Math.max(.001,k)};if(S){const R=SU(x,l);R.length?c&&(_.indices=R):_.isMatch=!1}return _}function CU(e){let t={};for(let n=0,r=e.length;n<r;n+=1){const i=e.charAt(n);t[i]=(t[i]||0)|1<<r-n-1}return t}const xh=String.prototype.normalize?(e=>e.normalize("NFD").replace(/[\u0300-\u036F\u0483-\u0489\u0591-\u05BD\u05BF\u05C1\u05C2\u05C4\u05C5\u05C7\u0610-\u061A\u064B-\u065F\u0670\u06D6-\u06DC\u06DF-\u06E4\u06E7\u06E8\u06EA-\u06ED\u0711\u0730-\u074A\u07A6-\u07B0\u07EB-\u07F3\u07FD\u0816-\u0819\u081B-\u0823\u0825-\u0827\u0829-\u082D\u0859-\u085B\u08D3-\u08E1\u08E3-\u0903\u093A-\u093C\u093E-\u094F\u0951-\u0957\u0962\u0963\u0981-\u0983\u09BC\u09BE-\u09C4\u09C7\u09C8\u09CB-\u09CD\u09D7\u09E2\u09E3\u09FE\u0A01-\u0A03\u0A3C\u0A3E-\u0A42\u0A47\u0A48\u0A4B-\u0A4D\u0A51\u0A70\u0A71\u0A75\u0A81-\u0A83\u0ABC\u0ABE-\u0AC5\u0AC7-\u0AC9\u0ACB-\u0ACD\u0AE2\u0AE3\u0AFA-\u0AFF\u0B01-\u0B03\u0B3C\u0B3E-\u0B44\u0B47\u0B48\u0B4B-\u0B4D\u0B56\u0B57\u0B62\u0B63\u0B82\u0BBE-\u0BC2\u0BC6-\u0BC8\u0BCA-\u0BCD\u0BD7\u0C00-\u0C04\u0C3E-\u0C44\u0C46-\u0C48\u0C4A-\u0C4D\u0C55\u0C56\u0C62\u0C63\u0C81-\u0C83\u0CBC\u0CBE-\u0CC4\u0CC6-\u0CC8\u0CCA-\u0CCD\u0CD5\u0CD6\u0CE2\u0CE3\u0D00-\u0D03\u0D3B\u0D3C\u0D3E-\u0D44\u0D46-\u0D48\u0D4A-\u0D4D\u0D57\u0D62\u0D63\u0D82\u0D83\u0DCA\u0DCF-\u0DD4\u0DD6\u0DD8-\u0DDF\u0DF2\u0DF3\u0E31\u0E34-\u0E3A\u0E47-\u0E4E\u0EB1\u0EB4-\u0EB9\u0EBB\u0EBC\u0EC8-\u0ECD\u0F18\u0F19\u0F35\u0F37\u0F39\u0F3E\u0F3F\u0F71-\u0F84\u0F86\u0F87\u0F8D-\u0F97\u0F99-\u0FBC\u0FC6\u102B-\u103E\u1056-\u1059\u105E-\u1060\u1062-\u1064\u1067-\u106D\u1071-\u1074\u1082-\u108D\u108F\u109A-\u109D\u135D-\u135F\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17B4-\u17D3\u17DD\u180B-\u180D\u1885\u1886\u18A9\u1920-\u192B\u1930-\u193B\u1A17-\u1A1B\u1A55-\u1A5E\u1A60-\u1A7C\u1A7F\u1AB0-\u1ABE\u1B00-\u1B04\u1B34-\u1B44\u1B6B-\u1B73\u1B80-\u1B82\u1BA1-\u1BAD\u1BE6-\u1BF3\u1C24-\u1C37\u1CD0-\u1CD2\u1CD4-\u1CE8\u1CED\u1CF2-\u1CF4\u1CF7-\u1CF9\u1DC0-\u1DF9\u1DFB-\u1DFF\u20D0-\u20F0\u2CEF-\u2CF1\u2D7F\u2DE0-\u2DFF\u302A-\u302F\u3099\u309A\uA66F-\uA672\uA674-\uA67D\uA69E\uA69F\uA6F0\uA6F1\uA802\uA806\uA80B\uA823-\uA827\uA880\uA881\uA8B4-\uA8C5\uA8E0-\uA8F1\uA8FF\uA926-\uA92D\uA947-\uA953\uA980-\uA983\uA9B3-\uA9C0\uA9E5\uAA29-\uAA36\uAA43\uAA4C\uAA4D\uAA7B-\uAA7D\uAAB0\uAAB2-\uAAB4\uAAB7\uAAB8\uAABE\uAABF\uAAC1\uAAEB-\uAAEF\uAAF5\uAAF6\uABE3-\uABEA\uABEC\uABED\uFB1E\uFE00-\uFE0F\uFE20-\uFE2F]/g,"")):(e=>e);class S4{constructor(t,{location:n=ze.location,threshold:r=ze.threshold,distance:i=ze.distance,includeMatches:s=ze.includeMatches,findAllMatches:o=ze.findAllMatches,minMatchCharLength:l=ze.minMatchCharLength,isCaseSensitive:c=ze.isCaseSensitive,ignoreDiacritics:f=ze.ignoreDiacritics,ignoreLocation:h=ze.ignoreLocation}={}){if(this.options={location:n,threshold:r,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:c,ignoreDiacritics:f,ignoreLocation:h},t=c?t:t.toLowerCase(),t=f?xh(t):t,this.pattern=t,this.chunks=[],!this.pattern.length)return;const p=(y,b)=>{this.chunks.push({pattern:y,alphabet:CU(y),startIndex:b})},g=this.pattern.length;if(g>wo){let y=0;const b=g%wo,S=g-b;for(;y<S;)p(this.pattern.substr(y,wo),y),y+=wo;if(b){const x=g-wo;p(this.pattern.substr(x),x)}}else p(this.pattern,0)}searchIn(t){const{isCaseSensitive:n,ignoreDiacritics:r,includeMatches:i}=this.options;if(t=n?t:t.toLowerCase(),t=r?xh(t):t,this.pattern===t){let S={isMatch:!0,score:0};return i&&(S.indices=[[0,t.length-1]]),S}const{location:s,distance:o,threshold:l,findAllMatches:c,minMatchCharLength:f,ignoreLocation:h}=this.options;let p=[],g=0,y=!1;this.chunks.forEach(({pattern:S,alphabet:x,startIndex:C})=>{const{isMatch:T,score:k,indices:A}=EU(t,S,x,{location:s+C,distance:o,threshold:l,findAllMatches:c,minMatchCharLength:f,includeMatches:i,ignoreLocation:h});T&&(y=!0),g+=k,T&&A&&(p=[...p,...A])});let b={isMatch:y,score:y?g/this.chunks.length:1};return y&&i&&(b.indices=p),b}}class $s{constructor(t){this.pattern=t}static isMultiMatch(t){return IM(t,this.multiRegex)}static isSingleMatch(t){return IM(t,this.singleRegex)}search(){}}function IM(e,t){const n=e.match(t);return n?n[1]:null}class kU extends $s{constructor(t){super(t)}static get type(){return"exact"}static get multiRegex(){return/^="(.*)"$/}static get singleRegex(){return/^=(.*)$/}search(t){const n=t===this.pattern;return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class TU extends $s{constructor(t){super(t)}static get type(){return"inverse-exact"}static get multiRegex(){return/^!"(.*)"$/}static get singleRegex(){return/^!(.*)$/}search(t){const r=t.indexOf(this.pattern)===-1;return{isMatch:r,score:r?0:1,indices:[0,t.length-1]}}}class AU extends $s{constructor(t){super(t)}static get type(){return"prefix-exact"}static get multiRegex(){return/^\^"(.*)"$/}static get singleRegex(){return/^\^(.*)$/}search(t){const n=t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,this.pattern.length-1]}}}class MU extends $s{constructor(t){super(t)}static get type(){return"inverse-prefix-exact"}static get multiRegex(){return/^!\^"(.*)"$/}static get singleRegex(){return/^!\^(.*)$/}search(t){const n=!t.startsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class NU extends $s{constructor(t){super(t)}static get type(){return"suffix-exact"}static get multiRegex(){return/^"(.*)"\$$/}static get singleRegex(){return/^(.*)\$$/}search(t){const n=t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[t.length-this.pattern.length,t.length-1]}}}class _U extends $s{constructor(t){super(t)}static get type(){return"inverse-suffix-exact"}static get multiRegex(){return/^!"(.*)"\$$/}static get singleRegex(){return/^!(.*)\$$/}search(t){const n=!t.endsWith(this.pattern);return{isMatch:n,score:n?0:1,indices:[0,t.length-1]}}}class E4 extends $s{constructor(t,{location:n=ze.location,threshold:r=ze.threshold,distance:i=ze.distance,includeMatches:s=ze.includeMatches,findAllMatches:o=ze.findAllMatches,minMatchCharLength:l=ze.minMatchCharLength,isCaseSensitive:c=ze.isCaseSensitive,ignoreDiacritics:f=ze.ignoreDiacritics,ignoreLocation:h=ze.ignoreLocation}={}){super(t),this._bitapSearch=new S4(t,{location:n,threshold:r,distance:i,includeMatches:s,findAllMatches:o,minMatchCharLength:l,isCaseSensitive:c,ignoreDiacritics:f,ignoreLocation:h})}static get type(){return"fuzzy"}static get multiRegex(){return/^"(.*)"$/}static get singleRegex(){return/^(.*)$/}search(t){return this._bitapSearch.searchIn(t)}}class C4 extends $s{constructor(t){super(t)}static get type(){return"include"}static get multiRegex(){return/^'"(.*)"$/}static get singleRegex(){return/^'(.*)$/}search(t){let n=0,r;const i=[],s=this.pattern.length;for(;(r=t.indexOf(this.pattern,n))>-1;)n=r+s,i.push([r,n-1]);const o=!!i.length;return{isMatch:o,score:o?0:1,indices:i}}}const yS=[kU,C4,AU,MU,_U,NU,TU,E4],zM=yS.length,RU=/ +(?=(?:[^\"]*\"[^\"]*\")*[^\"]*$)/,DU="|";function OU(e,t={}){return e.split(DU).map(n=>{let r=n.trim().split(RU).filter(s=>s&&!!s.trim()),i=[];for(let s=0,o=r.length;s<o;s+=1){const l=r[s];let c=!1,f=-1;for(;!c&&++f<zM;){const h=yS[f];let p=h.isMultiMatch(l);p&&(i.push(new h(p,t)),c=!0)}if(!c)for(f=-1;++f<zM;){const h=yS[f];let p=h.isSingleMatch(l);if(p){i.push(new h(p,t));break}}}return i})}const jU=new Set([E4.type,C4.type]);class LU{constructor(t,{isCaseSensitive:n=ze.isCaseSensitive,ignoreDiacritics:r=ze.ignoreDiacritics,includeMatches:i=ze.includeMatches,minMatchCharLength:s=ze.minMatchCharLength,ignoreLocation:o=ze.ignoreLocation,findAllMatches:l=ze.findAllMatches,location:c=ze.location,threshold:f=ze.threshold,distance:h=ze.distance}={}){this.query=null,this.options={isCaseSensitive:n,ignoreDiacritics:r,includeMatches:i,minMatchCharLength:s,findAllMatches:l,ignoreLocation:o,location:c,threshold:f,distance:h},t=n?t:t.toLowerCase(),t=r?xh(t):t,this.pattern=t,this.query=OU(this.pattern,this.options)}static condition(t,n){return n.useExtendedSearch}searchIn(t){const n=this.query;if(!n)return{isMatch:!1,score:1};const{includeMatches:r,isCaseSensitive:i,ignoreDiacritics:s}=this.options;t=i?t:t.toLowerCase(),t=s?xh(t):t;let o=0,l=[],c=0;for(let f=0,h=n.length;f<h;f+=1){const p=n[f];l.length=0,o=0;for(let g=0,y=p.length;g<y;g+=1){const b=p[g],{isMatch:S,indices:x,score:C}=b.search(t);if(S){if(o+=1,c+=C,r){const T=b.constructor.type;jU.has(T)?l=[...l,...x]:l.push(x)}}else{c=0,o=0,l.length=0;break}}if(o){let g={isMatch:!0,score:c/o};return r&&(g.indices=l),g}}return{isMatch:!1,score:1}}}const vS=[];function PU(...e){vS.push(...e)}function bS(e,t){for(let n=0,r=vS.length;n<r;n+=1){let i=vS[n];if(i.condition(e,t))return new i(e,t)}return new S4(e,t)}const wh={AND:"$and",OR:"$or"},xS={PATH:"$path",PATTERN:"$val"},wS=e=>!!(e[wh.AND]||e[wh.OR]),BU=e=>!!e[xS.PATH],IU=e=>!Ii(e)&&v4(e)&&!wS(e),qM=e=>({[wh.AND]:Object.keys(e).map(t=>({[t]:e[t]}))});function k4(e,t,{auto:n=!0}={}){const r=i=>{let s=Object.keys(i);const o=BU(i);if(!o&&s.length>1&&!wS(i))return r(qM(i));if(IU(i)){const c=o?i[xS.PATH]:s[0],f=o?i[xS.PATTERN]:i[c];if(!Qr(f))throw new Error(uU(c));const h={keyId:gS(c),pattern:f};return n&&(h.searcher=bS(f,t)),h}let l={children:[],operator:s[0]};return s.forEach(c=>{const f=i[c];Ii(f)&&f.forEach(h=>{l.children.push(r(h))})}),l};return wS(e)||(e=qM(e)),r(e)}function zU(e,{ignoreFieldNorm:t=ze.ignoreFieldNorm}){e.forEach(n=>{let r=1;n.matches.forEach(({key:i,norm:s,score:o})=>{const l=i?i.weight:null;r*=Math.pow(o===0&&l?Number.EPSILON:o,(l||1)*(t?1:s))}),n.score=r})}function qU(e,t){const n=e.matches;t.matches=[],Jn(n)&&n.forEach(r=>{if(!Jn(r.indices)||!r.indices.length)return;const{indices:i,value:s}=r;let o={indices:i,value:s};r.key&&(o.key=r.key.src),r.idx>-1&&(o.refIndex=r.idx),t.matches.push(o)})}function VU(e,t){t.score=e.score}function HU(e,t,{includeMatches:n=ze.includeMatches,includeScore:r=ze.includeScore}={}){const i=[];return n&&i.push(qU),r&&i.push(VU),e.map(s=>{const{idx:o}=s,l={item:t[o],refIndex:o};return i.length&&i.forEach(c=>{c(s,l)}),l})}class Qo{constructor(t,n={},r){this.options={...ze,...n},this.options.useExtendedSearch,this._keyStore=new hU(this.options.keys),this.setCollection(t,r)}setCollection(t,n){if(this._docs=t,n&&!(n instanceof PE))throw new Error(lU);this._myIndex=n||w4(this.options.keys,this._docs,{getFn:this.options.getFn,fieldNormWeight:this.options.fieldNormWeight})}add(t){Jn(t)&&(this._docs.push(t),this._myIndex.add(t))}remove(t=()=>!1){const n=[];for(let r=0,i=this._docs.length;r<i;r+=1){const s=this._docs[r];t(s,r)&&(this.removeAt(r),r-=1,i-=1,n.push(s))}return n}removeAt(t){this._docs.splice(t,1),this._myIndex.removeAt(t)}getIndex(){return this._myIndex}search(t,{limit:n=-1}={}){const{includeMatches:r,includeScore:i,shouldSort:s,sortFn:o,ignoreFieldNorm:l}=this.options;let c=Qr(t)?Qr(this._docs[0])?this._searchStringList(t):this._searchObjectList(t):this._searchLogical(t);return zU(c,{ignoreFieldNorm:l}),s&&c.sort(o),y4(n)&&n>-1&&(c=c.slice(0,n)),HU(c,this._docs,{includeMatches:r,includeScore:i})}_searchStringList(t){const n=bS(t,this.options),{records:r}=this._myIndex,i=[];return r.forEach(({v:s,i:o,n:l})=>{if(!Jn(s))return;const{isMatch:c,score:f,indices:h}=n.searchIn(s);c&&i.push({item:s,idx:o,matches:[{score:f,value:s,norm:l,indices:h}]})}),i}_searchLogical(t){const n=k4(t,this.options),r=(l,c,f)=>{if(!l.children){const{keyId:p,searcher:g}=l,y=this._findMatches({key:this._keyStore.get(p),value:this._myIndex.getValueForItemAtKeyId(c,p),searcher:g});return y&&y.length?[{idx:f,item:c,matches:y}]:[]}const h=[];for(let p=0,g=l.children.length;p<g;p+=1){const y=l.children[p],b=r(y,c,f);if(b.length)h.push(...b);else if(l.operator===wh.AND)return[]}return h},i=this._myIndex.records,s={},o=[];return i.forEach(({$:l,i:c})=>{if(Jn(l)){let f=r(n,l,c);f.length&&(s[c]||(s[c]={idx:c,item:l,matches:[]},o.push(s[c])),f.forEach(({matches:h})=>{s[c].matches.push(...h)}))}}),o}_searchObjectList(t){const n=bS(t,this.options),{keys:r,records:i}=this._myIndex,s=[];return i.forEach(({$:o,i:l})=>{if(!Jn(o))return;let c=[];r.forEach((f,h)=>{c.push(...this._findMatches({key:f,value:o[h],searcher:n}))}),c.length&&s.push({idx:l,item:o,matches:c})}),s}_findMatches({key:t,value:n,searcher:r}){if(!Jn(n))return[];let i=[];if(Ii(n))n.forEach(({v:s,i:o,n:l})=>{if(!Jn(s))return;const{isMatch:c,score:f,indices:h}=r.searchIn(s);c&&i.push({score:f,key:t,value:s,idx:o,norm:l,indices:h})});else{const{v:s,n:o}=n,{isMatch:l,score:c,indices:f}=r.searchIn(s);l&&i.push({score:c,key:t,value:s,norm:o,indices:f})}return i}}Qo.version="7.1.0";Qo.createIndex=w4;Qo.parseIndex=wU;Qo.config=ze;Qo.parseQuery=k4;PU(LU);const FU=()=>{Tl();const e=Op(),[t,n]=P.useState("All"),[r,i]=P.useState("All"),[s,o]=P.useState(""),[l,c]=P.useState([]),[f,h]=P.useState(!0),[p,g]=P.useState(null);P.useEffect(()=>{(async()=>{try{h(!0),g(null);const k=await fetch("https://diagrammatic-api.vercel.app/api/v1/all-problems");if(!k.ok)throw new Error(`Failed to fetch problems: ${k.status} ${k.statusText}`);const A=await k.json();c(A)}catch(T){g(T instanceof Error?T.message:"An error occurred while fetching problems"),console.error("Error fetching problems:",T)}finally{h(!1)}})()},[]);const y=P.useMemo(()=>{const C=s?.trim()??"";let T=l;return C.length>0&&(T=new Qo(l,{keys:[{name:"title",weight:.6},{name:"description",weight:.25},{name:"tags",weight:.15}],includeScore:!0,threshold:.45}).search(C).map(A=>A.item)),T.filter(k=>{const A=t==="All"||k.difficulty===t,M=r==="All"||k.category===r;return A&&M})},[t,r,s,l]),b=["All",...Array.from(new Set(l.map(C=>C.category)))],S=["All","Easy","Medium","Hard"],x=C=>{switch(C){case"Easy":return"bg-green-100 text-green-800";case"Medium":return"bg-yellow-100 text-yellow-800";case"Hard":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}};return w.jsxs(w.Fragment,{children:[w.jsx(Lp,{title:"System Design Practice Problems | Diagrammatic",description:"Browse and solve curated system design problems with real-world scenarios. Master distributed systems, scalable architectures, and ace your tech interviews with hands-on practice.",keywords:"system design problems, architecture challenges, distributed systems practice, system design interview prep, scalable architecture exercises",url:"https://satya00089.github.io/diagrammatic/#/problems"}),w.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[var(--surface)] via-[var(--bg)] to-[var(--surface)] text-theme relative grid-pattern-overlay",children:[w.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] transition-all duration-300",children:w.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:w.jsxs("div",{className:"flex items-center justify-between h-16",children:[w.jsxs("button",{type:"button",onClick:()=>e("/"),className:"flex items-center space-x-3 group cursor-pointer",children:[w.jsx("img",{src:"./logo.png",alt:"Logo",className:"h-10 transition-transform group-hover:scale-110 duration-300"}),w.jsx("span",{className:"text-xl font-bold text-white",children:"Diagrammatic"})]}),w.jsxs("div",{className:"flex items-center gap-4",children:[w.jsx("div",{className:"hidden md:block text-sm text-white/90",children:f?"Loading...":`${y.length} problems available`}),w.jsx(jp,{})]})]})})}),w.jsx("div",{className:"pt-16 relative z-10",children:w.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[w.jsxs("div",{className:"text-center mb-12",children:[w.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"System Design Problems"}),w.jsx("p",{className:"text-muted text-lg max-w-2xl mx-auto",children:"Master system design through interactive problem solving"})]}),f&&w.jsxs("div",{className:"text-center py-20",children:[w.jsx("div",{className:"inline-block w-16 h-16 border-4 border-[var(--brand)] border-t-transparent rounded-full animate-spin mb-4"}),w.jsx("div",{className:"text-theme text-xl mb-2",children:"Loading problems..."}),w.jsx("div",{className:"text-muted text-sm",children:"Please wait while we fetch the latest problems"})]}),p&&w.jsx("div",{className:"elevated-card-bg backdrop-blur-md rounded-2xl p-8 mb-6 border-2 border-red-500/20 shadow-lg max-w-2xl mx-auto",children:w.jsxs("div",{className:"text-center",children:[w.jsx("div",{className:"text-6xl mb-4",children:"⚠️"}),w.jsx("div",{className:"text-theme text-xl font-semibold mb-2",children:"Error Loading Problems"}),w.jsx("div",{className:"text-muted text-sm mb-6",children:p}),w.jsx("button",{type:"button",onClick:()=>globalThis.location.reload(),className:"px-6 py-3 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white font-semibold rounded-xl hover:shadow-lg hover:scale-105 transition-all duration-300 cursor-pointer",children:"Retry"})]})}),!f&&!p&&w.jsxs(w.Fragment,{children:[w.jsx("div",{className:"elevated-card-bg backdrop-blur-md rounded-2xl shadow-lg p-6 mb-8",children:w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[w.jsxs("div",{children:[w.jsx("label",{htmlFor:"search-input",className:"block text-sm font-semibold text-theme mb-2",children:"🔍 Search"}),w.jsx("input",{id:"search-input",type:"text",placeholder:"Search problems...",value:s,onChange:C=>o(C.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"difficulty-select",className:"block text-sm font-semibold text-theme mb-2",children:"📊 Difficulty"}),w.jsx("select",{id:"difficulty-select",value:t,onChange:C=>n(C.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme appearance-none cursor-pointer transition-all duration-300 hover:border-[var(--brand)]/30",children:S.map(C=>w.jsx("option",{value:C,children:C},C))})]}),w.jsxs("div",{children:[w.jsx("label",{htmlFor:"category-select",className:"block text-sm font-semibold text-theme mb-2",children:"🏷️ Category"}),w.jsx("select",{id:"category-select",value:r,onChange:C=>i(C.target.value),className:"w-full px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--surface)] text-theme appearance-none cursor-pointer transition-all duration-300 hover:border-[var(--brand)]/30",children:b.map(C=>w.jsx("option",{value:C,children:C},C))})]})]})}),w.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 pb-12",children:y.map((C,T)=>w.jsxs("div",{className:`group elevated-card-bg backdrop-blur-md rounded-2xl shadow-lg hover:shadow-2xl transition-all duration-500 hover:-translate-y-2 overflow-hidden ${T===0?"delay-0":T===1?"delay-100":T===2?"delay-200":""}`,children:[w.jsx("div",{className:"absolute -inset-1 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] rounded-2xl opacity-0 group-hover:opacity-20 blur-xl transition-opacity duration-500"}),w.jsxs("div",{className:"relative p-6",children:[w.jsxs("div",{className:"flex items-start justify-between mb-4",children:[w.jsx("h3",{className:"text-lg font-bold text-theme group-hover:text-[var(--brand)] transition-colors duration-300 line-clamp-2 flex-1",children:C.title}),w.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ml-2 ${x(C.difficulty)}`,children:C.difficulty})]}),w.jsx("p",{className:"text-muted text-sm mb-4 line-clamp-3 leading-relaxed",children:C.description}),w.jsxs("div",{className:"flex items-center justify-between text-sm text-muted mb-4 pb-4 border-b border-[var(--theme)]/10",children:[w.jsxs("span",{className:"flex items-center gap-1",children:[w.jsx("span",{children:"🏷️"})," ",C.category]}),w.jsxs("span",{className:"flex items-center gap-1",children:[w.jsx("span",{children:"⏱️"})," ",C.estimated_time]})]}),w.jsxs("div",{className:"flex flex-wrap gap-2 mb-6",children:[C.tags.slice(0,3).map(k=>w.jsx("span",{className:"px-3 py-1 bg-[var(--brand)]/10 text-[var(--brand)] text-xs font-semibold rounded-full",children:k},k)),C.tags.length>3&&w.jsxs("span",{className:"px-3 py-1 bg-[var(--theme)]/5 text-muted text-xs font-medium rounded-full",children:["+",C.tags.length-3," more"]})]}),w.jsx("button",{type:"button",onClick:k=>{k.stopPropagation(),e(`/playground/${C.id}`)},"aria-label":`Start ${C.title}`,className:"w-full px-6 py-3 bg-gradient-to-r from-[var(--brand)] to-[#BD6CD5] text-white font-semibold rounded-xl hover:shadow-lg hover:scale-105 transition-all duration-300 cursor-pointer group-hover:shadow-xl",children:"Start Problem →"})]})]},C.id))}),y.length===0&&!f&&w.jsxs("div",{className:"text-center py-20",children:[w.jsx("div",{className:"text-7xl mb-6",children:"🔍"}),w.jsx("div",{className:"text-theme text-2xl font-bold mb-2",children:"No problems found"}),w.jsx("div",{className:"text-muted text-lg",children:"Try adjusting your filters or search terms"})]})]})]})})]})]})},BE=P.createContext({});function IE(e){const t=P.useRef(null);return t.current===null&&(t.current=e()),t.current}const zE=typeof window<"u",T4=zE?P.useLayoutEffect:P.useEffect,Pp=P.createContext(null);function qE(e,t){e.indexOf(t)===-1&&e.push(t)}function VE(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}const zi=(e,t,n)=>n>t?t:n<e?e:n;let HE=()=>{};const qi={},A4=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e);function M4(e){return typeof e=="object"&&e!==null}const N4=e=>/^0[^.\s]+$/u.test(e);function FE(e){let t;return()=>(t===void 0&&(t=e()),t)}const Sr=e=>e,UU=(e,t)=>n=>t(e(n)),Xc=(...e)=>e.reduce(UU),xc=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class UE{constructor(){this.subscriptions=[]}add(t){return qE(this.subscriptions,t),()=>VE(this.subscriptions,t)}notify(t,n,r){const i=this.subscriptions.length;if(i)if(i===1)this.subscriptions[0](t,n,r);else for(let s=0;s<i;s++){const o=this.subscriptions[s];o&&o(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const ei=e=>e*1e3,xr=e=>e/1e3;function _4(e,t){return t?e*(1e3/t):0}const R4=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,$U=1e-7,GU=12;function KU(e,t,n,r,i){let s,o,l=0;do o=t+(n-t)/2,s=R4(o,r,i)-e,s>0?n=o:t=o;while(Math.abs(s)>$U&&++l<GU);return o}function Zc(e,t,n,r){if(e===t&&n===r)return Sr;const i=s=>KU(s,0,1,e,n);return s=>s===0||s===1?s:R4(i(s),t,r)}const D4=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,O4=e=>t=>1-e(1-t),j4=Zc(.33,1.53,.69,.99),$E=O4(j4),L4=D4($E),P4=e=>(e*=2)<1?.5*$E(e):.5*(2-Math.pow(2,-10*(e-1))),GE=e=>1-Math.sin(Math.acos(e)),B4=O4(GE),I4=D4(GE),YU=Zc(.42,0,1,1),WU=Zc(0,0,.58,1),z4=Zc(.42,0,.58,1),XU=e=>Array.isArray(e)&&typeof e[0]!="number",q4=e=>Array.isArray(e)&&typeof e[0]=="number",ZU={linear:Sr,easeIn:YU,easeInOut:z4,easeOut:WU,circIn:GE,circInOut:I4,circOut:B4,backIn:$E,backInOut:L4,backOut:j4,anticipate:P4},QU=e=>typeof e=="string",VM=e=>{if(q4(e)){HE(e.length===4);const[t,n,r,i]=e;return Zc(t,n,r,i)}else if(QU(e))return ZU[e];return e},Dd=["setup","read","resolveKeyframes","preUpdate","update","preRender","render","postRender"];function JU(e,t){let n=new Set,r=new Set,i=!1,s=!1;const o=new WeakSet;let l={delta:0,timestamp:0,isProcessing:!1};function c(h){o.has(h)&&(f.schedule(h),e()),h(l)}const f={schedule:(h,p=!1,g=!1)=>{const b=g&&i?n:r;return p&&o.add(h),b.has(h)||b.add(h),h},cancel:h=>{r.delete(h),o.delete(h)},process:h=>{if(l=h,i){s=!0;return}i=!0,[n,r]=[r,n],n.forEach(c),n.clear(),i=!1,s&&(s=!1,f.process(h))}};return f}const e$=40;function V4(e,t){let n=!1,r=!0;const i={delta:0,timestamp:0,isProcessing:!1},s=()=>n=!0,o=Dd.reduce((k,A)=>(k[A]=JU(s),k),{}),{setup:l,read:c,resolveKeyframes:f,preUpdate:h,update:p,preRender:g,render:y,postRender:b}=o,S=()=>{const k=qi.useManualTiming?i.timestamp:performance.now();n=!1,qi.useManualTiming||(i.delta=r?1e3/60:Math.max(Math.min(k-i.timestamp,e$),1)),i.timestamp=k,i.isProcessing=!0,l.process(i),c.process(i),f.process(i),h.process(i),p.process(i),g.process(i),y.process(i),b.process(i),i.isProcessing=!1,n&&t&&(r=!1,e(S))},x=()=>{n=!0,r=!0,i.isProcessing||e(S)};return{schedule:Dd.reduce((k,A)=>{const M=o[A];return k[A]=(_,R=!1,O=!1)=>(n||x(),M.schedule(_,R,O)),k},{}),cancel:k=>{for(let A=0;A<Dd.length;A++)o[Dd[A]].cancel(k)},state:i,steps:o}}const{schedule:vt,cancel:Vs,state:fn,steps:Wy}=V4(typeof requestAnimationFrame<"u"?requestAnimationFrame:Sr,!0);let rh;function t$(){rh=void 0}const In={now:()=>(rh===void 0&&In.set(fn.isProcessing||qi.useManualTiming?fn.timestamp:performance.now()),rh),set:e=>{rh=e,queueMicrotask(t$)}},H4=e=>t=>typeof t=="string"&&t.startsWith(e),KE=H4("--"),n$=H4("var(--"),YE=e=>n$(e)?r$.test(e.split("/*")[0].trim()):!1,r$=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,Al={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},wc={...Al,transform:e=>zi(0,1,e)},Od={...Al,default:1},tc=e=>Math.round(e*1e5)/1e5,WE=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function i$(e){return e==null}const s$=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,XE=(e,t)=>n=>!!(typeof n=="string"&&s$.test(n)&&n.startsWith(e)||t&&!i$(n)&&Object.prototype.hasOwnProperty.call(n,t)),F4=(e,t,n)=>r=>{if(typeof r!="string")return r;const[i,s,o,l]=r.match(WE);return{[e]:parseFloat(i),[t]:parseFloat(s),[n]:parseFloat(o),alpha:l!==void 0?parseFloat(l):1}},o$=e=>zi(0,255,e),Xy={...Al,transform:e=>Math.round(o$(e))},Eo={test:XE("rgb","red"),parse:F4("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+Xy.transform(e)+", "+Xy.transform(t)+", "+Xy.transform(n)+", "+tc(wc.transform(r))+")"};function a$(e){let t="",n="",r="",i="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),i=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),i=e.substring(4,5),t+=t,n+=n,r+=r,i+=i),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:i?parseInt(i,16)/255:1}}const SS={test:XE("#"),parse:a$,transform:Eo.transform},Qc=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),Ss=Qc("deg"),ti=Qc("%"),Ie=Qc("px"),l$=Qc("vh"),u$=Qc("vw"),HM={...ti,parse:e=>ti.parse(e)/100,transform:e=>ti.transform(e*100)},el={test:XE("hsl","hue"),parse:F4("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+ti.transform(tc(t))+", "+ti.transform(tc(n))+", "+tc(wc.transform(r))+")"},qt={test:e=>Eo.test(e)||SS.test(e)||el.test(e),parse:e=>Eo.test(e)?Eo.parse(e):el.test(e)?el.parse(e):SS.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?Eo.transform(e):el.transform(e),getAnimatableNone:e=>{const t=qt.parse(e);return t.alpha=0,qt.transform(t)}},c$=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function f$(e){return isNaN(e)&&typeof e=="string"&&(e.match(WE)?.length||0)+(e.match(c$)?.length||0)>0}const U4="number",$4="color",d$="var",h$="var(",FM="${}",p$=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function Sc(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},i=[];let s=0;const l=t.replace(p$,c=>(qt.test(c)?(r.color.push(s),i.push($4),n.push(qt.parse(c))):c.startsWith(h$)?(r.var.push(s),i.push(d$),n.push(c)):(r.number.push(s),i.push(U4),n.push(parseFloat(c))),++s,FM)).split(FM);return{values:n,split:l,indexes:r,types:i}}function G4(e){return Sc(e).values}function K4(e){const{split:t,types:n}=Sc(e),r=t.length;return i=>{let s="";for(let o=0;o<r;o++)if(s+=t[o],i[o]!==void 0){const l=n[o];l===U4?s+=tc(i[o]):l===$4?s+=qt.transform(i[o]):s+=i[o]}return s}}const m$=e=>typeof e=="number"?0:qt.test(e)?qt.getAnimatableNone(e):e;function g$(e){const t=G4(e);return K4(e)(t.map(m$))}const Hs={test:f$,parse:G4,createTransformer:K4,getAnimatableNone:g$};function Zy(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function y$({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let i=0,s=0,o=0;if(!t)i=s=o=n;else{const l=n<.5?n*(1+t):n+t-n*t,c=2*n-l;i=Zy(c,l,e+1/3),s=Zy(c,l,e),o=Zy(c,l,e-1/3)}return{red:Math.round(i*255),green:Math.round(s*255),blue:Math.round(o*255),alpha:r}}function Sh(e,t){return n=>n>0?t:e}const Ct=(e,t,n)=>e+(t-e)*n,Qy=(e,t,n)=>{const r=e*e,i=n*(t*t-r)+r;return i<0?0:Math.sqrt(i)},v$=[SS,Eo,el],b$=e=>v$.find(t=>t.test(e));function UM(e){const t=b$(e);if(!t)return!1;let n=t.parse(e);return t===el&&(n=y$(n)),n}const $M=(e,t)=>{const n=UM(e),r=UM(t);if(!n||!r)return Sh(e,t);const i={...n};return s=>(i.red=Qy(n.red,r.red,s),i.green=Qy(n.green,r.green,s),i.blue=Qy(n.blue,r.blue,s),i.alpha=Ct(n.alpha,r.alpha,s),Eo.transform(i))},ES=new Set(["none","hidden"]);function x$(e,t){return ES.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function w$(e,t){return n=>Ct(e,t,n)}function ZE(e){return typeof e=="number"?w$:typeof e=="string"?YE(e)?Sh:qt.test(e)?$M:C$:Array.isArray(e)?Y4:typeof e=="object"?qt.test(e)?$M:S$:Sh}function Y4(e,t){const n=[...e],r=n.length,i=e.map((s,o)=>ZE(s)(s,t[o]));return s=>{for(let o=0;o<r;o++)n[o]=i[o](s);return n}}function S$(e,t){const n={...e,...t},r={};for(const i in n)e[i]!==void 0&&t[i]!==void 0&&(r[i]=ZE(e[i])(e[i],t[i]));return i=>{for(const s in r)n[s]=r[s](i);return n}}function E$(e,t){const n=[],r={color:0,var:0,number:0};for(let i=0;i<t.values.length;i++){const s=t.types[i],o=e.indexes[s][r[s]],l=e.values[o]??0;n[i]=l,r[s]++}return n}const C$=(e,t)=>{const n=Hs.createTransformer(t),r=Sc(e),i=Sc(t);return r.indexes.var.length===i.indexes.var.length&&r.indexes.color.length===i.indexes.color.length&&r.indexes.number.length>=i.indexes.number.length?ES.has(e)&&!i.values.length||ES.has(t)&&!r.values.length?x$(e,t):Xc(Y4(E$(r,i),i.values),n):Sh(e,t)};function W4(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Ct(e,t,n):ZE(e)(e,t)}const k$=e=>{const t=({timestamp:n})=>e(n);return{start:(n=!0)=>vt.update(t,n),stop:()=>Vs(t),now:()=>fn.isProcessing?fn.timestamp:In.now()}},X4=(e,t,n=10)=>{let r="";const i=Math.max(Math.round(t/n),2);for(let s=0;s<i;s++)r+=Math.round(e(s/(i-1))*1e4)/1e4+", ";return`linear(${r.substring(0,r.length-2)})`},Eh=2e4;function QE(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<Eh;)t+=n,r=e.next(t);return t>=Eh?1/0:t}function T$(e,t=100,n){const r=n({...e,keyframes:[0,t]}),i=Math.min(QE(r),Eh);return{type:"keyframes",ease:s=>r.next(i*s).value/t,duration:xr(i)}}const A$=5;function Z4(e,t,n){const r=Math.max(t-A$,0);return _4(n-e(r),t-r)}const Nt={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},Jy=.001;function M$({duration:e=Nt.duration,bounce:t=Nt.bounce,velocity:n=Nt.velocity,mass:r=Nt.mass}){let i,s,o=1-t;o=zi(Nt.minDamping,Nt.maxDamping,o),e=zi(Nt.minDuration,Nt.maxDuration,xr(e)),o<1?(i=f=>{const h=f*o,p=h*e,g=h-n,y=CS(f,o),b=Math.exp(-p);return Jy-g/y*b},s=f=>{const p=f*o*e,g=p*n+n,y=Math.pow(o,2)*Math.pow(f,2)*e,b=Math.exp(-p),S=CS(Math.pow(f,2),o);return(-i(f)+Jy>0?-1:1)*((g-y)*b)/S}):(i=f=>{const h=Math.exp(-f*e),p=(f-n)*e+1;return-Jy+h*p},s=f=>{const h=Math.exp(-f*e),p=(n-f)*(e*e);return h*p});const l=5/e,c=_$(i,s,l);if(e=ei(e),isNaN(c))return{stiffness:Nt.stiffness,damping:Nt.damping,duration:e};{const f=Math.pow(c,2)*r;return{stiffness:f,damping:o*2*Math.sqrt(r*f),duration:e}}}const N$=12;function _$(e,t,n){let r=n;for(let i=1;i<N$;i++)r=r-e(r)/t(r);return r}function CS(e,t){return e*Math.sqrt(1-t*t)}const R$=["duration","bounce"],D$=["stiffness","damping","mass"];function GM(e,t){return t.some(n=>e[n]!==void 0)}function O$(e){let t={velocity:Nt.velocity,stiffness:Nt.stiffness,damping:Nt.damping,mass:Nt.mass,isResolvedFromDuration:!1,...e};if(!GM(e,D$)&&GM(e,R$))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),i=r*r,s=2*zi(.05,1,1-(e.bounce||0))*Math.sqrt(i);t={...t,mass:Nt.mass,stiffness:i,damping:s}}else{const n=M$(e);t={...t,...n,mass:Nt.mass},t.isResolvedFromDuration=!0}return t}function Ch(e=Nt.visualDuration,t=Nt.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:i}=n;const s=n.keyframes[0],o=n.keyframes[n.keyframes.length-1],l={done:!1,value:s},{stiffness:c,damping:f,mass:h,duration:p,velocity:g,isResolvedFromDuration:y}=O$({...n,velocity:-xr(n.velocity||0)}),b=g||0,S=f/(2*Math.sqrt(c*h)),x=o-s,C=xr(Math.sqrt(c/h)),T=Math.abs(x)<5;r||(r=T?Nt.restSpeed.granular:Nt.restSpeed.default),i||(i=T?Nt.restDelta.granular:Nt.restDelta.default);let k;if(S<1){const M=CS(C,S);k=_=>{const R=Math.exp(-S*C*_);return o-R*((b+S*C*x)/M*Math.sin(M*_)+x*Math.cos(M*_))}}else if(S===1)k=M=>o-Math.exp(-C*M)*(x+(b+C*x)*M);else{const M=C*Math.sqrt(S*S-1);k=_=>{const R=Math.exp(-S*C*_),O=Math.min(M*_,300);return o-R*((b+S*C*x)*Math.sinh(O)+M*x*Math.cosh(O))/M}}const A={calculatedDuration:y&&p||null,next:M=>{const _=k(M);if(y)l.done=M>=p;else{let R=M===0?b:0;S<1&&(R=M===0?ei(b):Z4(k,M,_));const O=Math.abs(R)<=r,I=Math.abs(o-_)<=i;l.done=O&&I}return l.value=l.done?o:_,l},toString:()=>{const M=Math.min(QE(A),Eh),_=X4(R=>A.next(M*R).value,M,30);return M+"ms "+_},toTransition:()=>{}};return A}Ch.applyToOptions=e=>{const t=T$(e,100,Ch);return e.ease=t.ease,e.duration=ei(t.duration),e.type="keyframes",e};function kS({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:i=10,bounceStiffness:s=500,modifyTarget:o,min:l,max:c,restDelta:f=.5,restSpeed:h}){const p=e[0],g={done:!1,value:p},y=O=>l!==void 0&&O<l||c!==void 0&&O>c,b=O=>l===void 0?c:c===void 0||Math.abs(l-O)<Math.abs(c-O)?l:c;let S=n*t;const x=p+S,C=o===void 0?x:o(x);C!==x&&(S=C-p);const T=O=>-S*Math.exp(-O/r),k=O=>C+T(O),A=O=>{const I=T(O),$=k(O);g.done=Math.abs(I)<=f,g.value=g.done?C:$};let M,_;const R=O=>{y(g.value)&&(M=O,_=Ch({keyframes:[g.value,b(g.value)],velocity:Z4(k,O,g.value),damping:i,stiffness:s,restDelta:f,restSpeed:h}))};return R(0),{calculatedDuration:null,next:O=>{let I=!1;return!_&&M===void 0&&(I=!0,A(O),R(O)),M!==void 0&&O>=M?_.next(O-M):(!I&&A(O),g)}}}function j$(e,t,n){const r=[],i=n||qi.mix||W4,s=e.length-1;for(let o=0;o<s;o++){let l=i(e[o],e[o+1]);if(t){const c=Array.isArray(t)?t[o]||Sr:t;l=Xc(c,l)}r.push(l)}return r}function L$(e,t,{clamp:n=!0,ease:r,mixer:i}={}){const s=e.length;if(HE(s===t.length),s===1)return()=>t[0];if(s===2&&t[0]===t[1])return()=>t[1];const o=e[0]===e[1];e[0]>e[s-1]&&(e=[...e].reverse(),t=[...t].reverse());const l=j$(t,r,i),c=l.length,f=h=>{if(o&&h<e[0])return t[0];let p=0;if(c>1)for(;p<e.length-2&&!(h<e[p+1]);p++);const g=xc(e[p],e[p+1],h);return l[p](g)};return n?h=>f(zi(e[0],e[s-1],h)):f}function P$(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const i=xc(0,t,r);e.push(Ct(n,1,i))}}function B$(e){const t=[0];return P$(t,e.length-1),t}function I$(e,t){return e.map(n=>n*t)}function z$(e,t){return e.map(()=>t||z4).splice(0,e.length-1)}function nc({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const i=XU(r)?r.map(VM):VM(r),s={done:!1,value:t[0]},o=I$(n&&n.length===t.length?n:B$(t),e),l=L$(o,t,{ease:Array.isArray(i)?i:z$(t,i)});return{calculatedDuration:e,next:c=>(s.value=l(c),s.done=c>=e,s)}}const q$=e=>e!==null;function JE(e,{repeat:t,repeatType:n="loop"},r,i=1){const s=e.filter(q$),l=i<0||t&&n!=="loop"&&t%2===1?0:s.length-1;return!l||r===void 0?s[l]:r}const V$={decay:kS,inertia:kS,tween:nc,keyframes:nc,spring:Ch};function Q4(e){typeof e.type=="string"&&(e.type=V$[e.type])}class eC{constructor(){this.updateFinished()}get finished(){return this._finished}updateFinished(){this._finished=new Promise(t=>{this.resolve=t})}notifyFinished(){this.resolve()}then(t,n){return this.finished.then(t,n)}}const H$=e=>e/100;class tC extends eC{constructor(t){super(),this.state="idle",this.startTime=null,this.isStopped=!1,this.currentTime=0,this.holdTime=null,this.playbackSpeed=1,this.stop=()=>{const{motionValue:n}=this.options;n&&n.updatedAt!==In.now()&&this.tick(In.now()),this.isStopped=!0,this.state!=="idle"&&(this.teardown(),this.options.onStop?.())},this.options=t,this.initAnimation(),this.play(),t.autoplay===!1&&this.pause()}initAnimation(){const{options:t}=this;Q4(t);const{type:n=nc,repeat:r=0,repeatDelay:i=0,repeatType:s,velocity:o=0}=t;let{keyframes:l}=t;const c=n||nc;c!==nc&&typeof l[0]!="number"&&(this.mixKeyframes=Xc(H$,W4(l[0],l[1])),l=[0,100]);const f=c({...t,keyframes:l});s==="mirror"&&(this.mirroredGenerator=c({...t,keyframes:[...l].reverse(),velocity:-o})),f.calculatedDuration===null&&(f.calculatedDuration=QE(f));const{calculatedDuration:h}=f;this.calculatedDuration=h,this.resolvedDuration=h+i,this.totalDuration=this.resolvedDuration*(r+1)-i,this.generator=f}updateTime(t){const n=Math.round(t-this.startTime)*this.playbackSpeed;this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=n}tick(t,n=!1){const{generator:r,totalDuration:i,mixKeyframes:s,mirroredGenerator:o,resolvedDuration:l,calculatedDuration:c}=this;if(this.startTime===null)return r.next(0);const{delay:f=0,keyframes:h,repeat:p,repeatType:g,repeatDelay:y,type:b,onUpdate:S,finalKeyframe:x}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-i/this.speed,this.startTime)),n?this.currentTime=t:this.updateTime(t);const C=this.currentTime-f*(this.playbackSpeed>=0?1:-1),T=this.playbackSpeed>=0?C<0:C>i;this.currentTime=Math.max(C,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=i);let k=this.currentTime,A=r;if(p){const O=Math.min(this.currentTime,i)/l;let I=Math.floor(O),$=O%1;!$&&O>=1&&($=1),$===1&&I--,I=Math.min(I,p+1),!!(I%2)&&(g==="reverse"?($=1-$,y&&($-=y/l)):g==="mirror"&&(A=o)),k=zi(0,1,$)*l}const M=T?{done:!1,value:h[0]}:A.next(k);s&&(M.value=s(M.value));let{done:_}=M;!T&&c!==null&&(_=this.playbackSpeed>=0?this.currentTime>=i:this.currentTime<=0);const R=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&_);return R&&b!==kS&&(M.value=JE(h,this.options,x,this.speed)),S&&S(M.value),R&&this.finish(),M}then(t,n){return this.finished.then(t,n)}get duration(){return xr(this.calculatedDuration)}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+xr(t)}get time(){return xr(this.currentTime)}set time(t){t=ei(t),this.currentTime=t,this.startTime===null||this.holdTime!==null||this.playbackSpeed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.playbackSpeed),this.driver?.start(!1)}get speed(){return this.playbackSpeed}set speed(t){this.updateTime(In.now());const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=xr(this.currentTime))}play(){if(this.isStopped)return;const{driver:t=k$,startTime:n}=this.options;this.driver||(this.driver=t(i=>this.tick(i))),this.options.onPlay?.();const r=this.driver.now();this.state==="finished"?(this.updateFinished(),this.startTime=r):this.holdTime!==null?this.startTime=r-this.holdTime:this.startTime||(this.startTime=n??r),this.state==="finished"&&this.speed<0&&(this.startTime+=this.calculatedDuration),this.holdTime=null,this.state="running",this.driver.start()}pause(){this.state="paused",this.updateTime(In.now()),this.holdTime=this.currentTime}complete(){this.state!=="running"&&this.play(),this.state="finished",this.holdTime=null}finish(){this.notifyFinished(),this.teardown(),this.state="finished",this.options.onComplete?.()}cancel(){this.holdTime=null,this.startTime=0,this.tick(0),this.teardown(),this.options.onCancel?.()}teardown(){this.state="idle",this.stopDriver(),this.startTime=this.holdTime=null}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}attachTimeline(t){return this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear",this.initAnimation()),this.driver?.stop(),t.observe(this)}}function F$(e){for(let t=1;t<e.length;t++)e[t]??(e[t]=e[t-1])}const Co=e=>e*180/Math.PI,TS=e=>{const t=Co(Math.atan2(e[1],e[0]));return AS(t)},U$={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:TS,rotateZ:TS,skewX:e=>Co(Math.atan(e[1])),skewY:e=>Co(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},AS=e=>(e=e%360,e<0&&(e+=360),e),KM=TS,YM=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),WM=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),$$={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:YM,scaleY:WM,scale:e=>(YM(e)+WM(e))/2,rotateX:e=>AS(Co(Math.atan2(e[6],e[5]))),rotateY:e=>AS(Co(Math.atan2(-e[2],e[0]))),rotateZ:KM,rotate:KM,skewX:e=>Co(Math.atan(e[4])),skewY:e=>Co(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function MS(e){return e.includes("scale")?1:0}function NS(e,t){if(!e||e==="none")return MS(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,i;if(n)r=$$,i=n;else{const l=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=U$,i=l}if(!i)return MS(t);const s=r[t],o=i[1].split(",").map(K$);return typeof s=="function"?s(o):o[s]}const G$=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return NS(n,t)};function K$(e){return parseFloat(e.trim())}const Ml=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Nl=new Set(Ml),XM=e=>e===Al||e===Ie,Y$=new Set(["x","y","z"]),W$=Ml.filter(e=>!Y$.has(e));function X$(e){const t=[];return W$.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const Ro={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>NS(t,"x"),y:(e,{transform:t})=>NS(t,"y")};Ro.translateX=Ro.x;Ro.translateY=Ro.y;const Do=new Set;let _S=!1,RS=!1,DS=!1;function J4(){if(RS){const e=Array.from(Do).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const i=X$(r);i.length&&(n.set(r,i),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const i=n.get(r);i&&i.forEach(([s,o])=>{r.getValue(s)?.set(o)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}RS=!1,_S=!1,Do.forEach(e=>e.complete(DS)),Do.clear()}function e5(){Do.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(RS=!0)})}function Z$(){DS=!0,e5(),J4(),DS=!1}class nC{constructor(t,n,r,i,s,o=!1){this.state="pending",this.isAsync=!1,this.needsMeasurement=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=i,this.element=s,this.isAsync=o}scheduleResolve(){this.state="scheduled",this.isAsync?(Do.add(this),_S||(_S=!0,vt.read(e5),vt.resolveKeyframes(J4))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:i}=this;if(t[0]===null){const s=i?.get(),o=t[t.length-1];if(s!==void 0)t[0]=s;else if(r&&n){const l=r.readValue(n,o);l!=null&&(t[0]=l)}t[0]===void 0&&(t[0]=o),i&&s===void 0&&i.set(t[0])}F$(t)}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(t=!1){this.state="complete",this.onComplete(this.unresolvedKeyframes,this.finalKeyframe,t),Do.delete(this)}cancel(){this.state==="scheduled"&&(Do.delete(this),this.state="pending")}resume(){this.state==="pending"&&this.scheduleResolve()}}const Q$=e=>e.startsWith("--");function J$(e,t,n){Q$(t)?e.style.setProperty(t,n):e.style[t]=n}const e9=FE(()=>window.ScrollTimeline!==void 0),t9={};function n9(e,t){const n=FE(e);return()=>t9[t]??n()}const t5=n9(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),$u=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,ZM={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:$u([0,.65,.55,1]),circOut:$u([.55,0,1,.45]),backIn:$u([.31,.01,.66,-.59]),backOut:$u([.33,1.53,.69,.99])};function n5(e,t){if(e)return typeof e=="function"?t5()?X4(e,t):"ease-out":q4(e)?$u(e):Array.isArray(e)?e.map(n=>n5(n,t)||ZM.easeOut):ZM[e]}function r9(e,t,n,{delay:r=0,duration:i=300,repeat:s=0,repeatType:o="loop",ease:l="easeOut",times:c}={},f=void 0){const h={[t]:n};c&&(h.offset=c);const p=n5(l,i);Array.isArray(p)&&(h.easing=p);const g={delay:r,duration:i,easing:Array.isArray(p)?"linear":p,fill:"both",iterations:s+1,direction:o==="reverse"?"alternate":"normal"};return f&&(g.pseudoElement=f),e.animate(h,g)}function r5(e){return typeof e=="function"&&"applyToOptions"in e}function i9({type:e,...t}){return r5(e)&&t5()?e.applyToOptions(t):(t.duration??(t.duration=300),t.ease??(t.ease="easeOut"),t)}class s9 extends eC{constructor(t){if(super(),this.finishedTime=null,this.isStopped=!1,!t)return;const{element:n,name:r,keyframes:i,pseudoElement:s,allowFlatten:o=!1,finalKeyframe:l,onComplete:c}=t;this.isPseudoElement=!!s,this.allowFlatten=o,this.options=t,HE(typeof t.type!="string");const f=i9(t);this.animation=r9(n,r,i,f,s),f.autoplay===!1&&this.animation.pause(),this.animation.onfinish=()=>{if(this.finishedTime=this.time,!s){const h=JE(i,this.options,l,this.speed);this.updateMotionValue?this.updateMotionValue(h):J$(n,r,h),this.animation.cancel()}c?.(),this.notifyFinished()}}play(){this.isStopped||(this.animation.play(),this.state==="finished"&&this.updateFinished())}pause(){this.animation.pause()}complete(){this.animation.finish?.()}cancel(){try{this.animation.cancel()}catch{}}stop(){if(this.isStopped)return;this.isStopped=!0;const{state:t}=this;t==="idle"||t==="finished"||(this.updateMotionValue?this.updateMotionValue():this.commitStyles(),this.isPseudoElement||this.cancel())}commitStyles(){this.isPseudoElement||this.animation.commitStyles?.()}get duration(){const t=this.animation.effect?.getComputedTiming?.().duration||0;return xr(Number(t))}get iterationDuration(){const{delay:t=0}=this.options||{};return this.duration+xr(t)}get time(){return xr(Number(this.animation.currentTime)||0)}set time(t){this.finishedTime=null,this.animation.currentTime=ei(t)}get speed(){return this.animation.playbackRate}set speed(t){t<0&&(this.finishedTime=null),this.animation.playbackRate=t}get state(){return this.finishedTime!==null?"finished":this.animation.playState}get startTime(){return Number(this.animation.startTime)}set startTime(t){this.animation.startTime=t}attachTimeline({timeline:t,observe:n}){return this.allowFlatten&&this.animation.effect?.updateTiming({easing:"linear"}),this.animation.onfinish=null,t&&e9()?(this.animation.timeline=t,Sr):n(this)}}const i5={anticipate:P4,backInOut:L4,circInOut:I4};function o9(e){return e in i5}function a9(e){typeof e.ease=="string"&&o9(e.ease)&&(e.ease=i5[e.ease])}const QM=10;class l9 extends s9{constructor(t){a9(t),Q4(t),super(t),t.startTime&&(this.startTime=t.startTime),this.options=t}updateMotionValue(t){const{motionValue:n,onUpdate:r,onComplete:i,element:s,...o}=this.options;if(!n)return;if(t!==void 0){n.set(t);return}const l=new tC({...o,autoplay:!1}),c=ei(this.finishedTime??this.time);n.setWithVelocity(l.sample(c-QM).value,l.sample(c).value,QM),l.stop()}}const JM=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Hs.test(e)||e==="0")&&!e.startsWith("url("));function u9(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function c9(e,t,n,r){const i=e[0];if(i===null)return!1;if(t==="display"||t==="visibility")return!0;const s=e[e.length-1],o=JM(i,t),l=JM(s,t);return!o||!l?!1:u9(e)||(n==="spring"||r5(n))&&r}function OS(e){e.duration=0,e.type="keyframes"}const f9=new Set(["opacity","clipPath","filter","transform"]),d9=FE(()=>Object.hasOwnProperty.call(Element.prototype,"animate"));function h9(e){const{motionValue:t,name:n,repeatDelay:r,repeatType:i,damping:s,type:o}=e;if(!(t?.owner?.current instanceof HTMLElement))return!1;const{onUpdate:c,transformTemplate:f}=t.owner.getProps();return d9()&&n&&f9.has(n)&&(n!=="transform"||!f)&&!c&&!r&&i!=="mirror"&&s!==0&&o!=="inertia"}const p9=40;class m9 extends eC{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:i=0,repeatDelay:s=0,repeatType:o="loop",keyframes:l,name:c,motionValue:f,element:h,...p}){super(),this.stop=()=>{this._animation&&(this._animation.stop(),this.stopTimeline?.()),this.keyframeResolver?.cancel()},this.createdAt=In.now();const g={autoplay:t,delay:n,type:r,repeat:i,repeatDelay:s,repeatType:o,name:c,motionValue:f,element:h,...p},y=h?.KeyframeResolver||nC;this.keyframeResolver=new y(l,(b,S,x)=>this.onKeyframesResolved(b,S,g,!x),c,f,h),this.keyframeResolver?.scheduleResolve()}onKeyframesResolved(t,n,r,i){this.keyframeResolver=void 0;const{name:s,type:o,velocity:l,delay:c,isHandoff:f,onUpdate:h}=r;this.resolvedAt=In.now(),c9(t,s,o,l)||((qi.instantAnimations||!c)&&h?.(JE(t,r,n)),t[0]=t[t.length-1],OS(r),r.repeat=0);const g={startTime:i?this.resolvedAt?this.resolvedAt-this.createdAt>p9?this.resolvedAt:this.createdAt:this.createdAt:void 0,finalKeyframe:n,...r,keyframes:t},y=!f&&h9(g)?new l9({...g,element:g.motionValue.owner.current}):new tC(g);y.finished.then(()=>this.notifyFinished()).catch(Sr),this.pendingTimeline&&(this.stopTimeline=y.attachTimeline(this.pendingTimeline),this.pendingTimeline=void 0),this._animation=y}get finished(){return this._animation?this.animation.finished:this._finished}then(t,n){return this.finished.finally(t).then(()=>{})}get animation(){return this._animation||(this.keyframeResolver?.resume(),Z$()),this._animation}get duration(){return this.animation.duration}get iterationDuration(){return this.animation.iterationDuration}get time(){return this.animation.time}set time(t){this.animation.time=t}get speed(){return this.animation.speed}get state(){return this.animation.state}set speed(t){this.animation.speed=t}get startTime(){return this.animation.startTime}attachTimeline(t){return this._animation?this.stopTimeline=this.animation.attachTimeline(t):this.pendingTimeline=t,()=>this.stop()}play(){this.animation.play()}pause(){this.animation.pause()}complete(){this.animation.complete()}cancel(){this._animation&&this.animation.cancel(),this.keyframeResolver?.cancel()}}const g9=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function y9(e){const t=g9.exec(e);if(!t)return[,];const[,n,r,i]=t;return[`--${n??r}`,i]}function s5(e,t,n=1){const[r,i]=y9(e);if(!r)return;const s=window.getComputedStyle(t).getPropertyValue(r);if(s){const o=s.trim();return A4(o)?parseFloat(o):o}return YE(i)?s5(i,t,n+1):i}function rC(e,t){return e?.[t]??e?.default??e}const o5=new Set(["width","height","top","left","right","bottom",...Ml]),v9={test:e=>e==="auto",parse:e=>e},a5=e=>t=>t.test(e),l5=[Al,Ie,ti,Ss,u$,l$,v9],eN=e=>l5.find(a5(e));function b9(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||N4(e):!0}const x9=new Set(["brightness","contrast","saturate","opacity"]);function w9(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(WE)||[];if(!r)return e;const i=n.replace(r,"");let s=x9.has(t)?1:0;return r!==n&&(s*=100),t+"("+s+i+")"}const S9=/\b([a-z-]*)\(.*?\)/gu,jS={...Hs,getAnimatableNone:e=>{const t=e.match(S9);return t?t.map(w9).join(" "):e}},tN={...Al,transform:Math.round},E9={rotate:Ss,rotateX:Ss,rotateY:Ss,rotateZ:Ss,scale:Od,scaleX:Od,scaleY:Od,scaleZ:Od,skew:Ss,skewX:Ss,skewY:Ss,distance:Ie,translateX:Ie,translateY:Ie,translateZ:Ie,x:Ie,y:Ie,z:Ie,perspective:Ie,transformPerspective:Ie,opacity:wc,originX:HM,originY:HM,originZ:Ie},iC={borderWidth:Ie,borderTopWidth:Ie,borderRightWidth:Ie,borderBottomWidth:Ie,borderLeftWidth:Ie,borderRadius:Ie,radius:Ie,borderTopLeftRadius:Ie,borderTopRightRadius:Ie,borderBottomRightRadius:Ie,borderBottomLeftRadius:Ie,width:Ie,maxWidth:Ie,height:Ie,maxHeight:Ie,top:Ie,right:Ie,bottom:Ie,left:Ie,padding:Ie,paddingTop:Ie,paddingRight:Ie,paddingBottom:Ie,paddingLeft:Ie,margin:Ie,marginTop:Ie,marginRight:Ie,marginBottom:Ie,marginLeft:Ie,backgroundPositionX:Ie,backgroundPositionY:Ie,...E9,zIndex:tN,fillOpacity:wc,strokeOpacity:wc,numOctaves:tN},C9={...iC,color:qt,backgroundColor:qt,outlineColor:qt,fill:qt,stroke:qt,borderColor:qt,borderTopColor:qt,borderRightColor:qt,borderBottomColor:qt,borderLeftColor:qt,filter:jS,WebkitFilter:jS},u5=e=>C9[e];function c5(e,t){let n=u5(e);return n!==jS&&(n=Hs),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const k9=new Set(["auto","none","0"]);function T9(e,t,n){let r=0,i;for(;r<e.length&&!i;){const s=e[r];typeof s=="string"&&!k9.has(s)&&Sc(s).values.length&&(i=e[r]),r++}if(i&&n)for(const s of t)e[s]=c5(n,i)}class A9 extends nC{constructor(t,n,r,i,s){super(t,n,r,i,s,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let c=0;c<t.length;c++){let f=t[c];if(typeof f=="string"&&(f=f.trim(),YE(f))){const h=s5(f,n.current);h!==void 0&&(t[c]=h),c===t.length-1&&(this.finalKeyframe=f)}}if(this.resolveNoneKeyframes(),!o5.has(r)||t.length!==2)return;const[i,s]=t,o=eN(i),l=eN(s);if(o!==l)if(XM(o)&&XM(l))for(let c=0;c<t.length;c++){const f=t[c];typeof f=="string"&&(t[c]=parseFloat(f))}else Ro[r]&&(this.needsMeasurement=!0)}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let i=0;i<t.length;i++)(t[i]===null||b9(t[i]))&&r.push(i);r.length&&T9(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=Ro[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const i=n[n.length-1];i!==void 0&&t.getValue(r,i).jump(i,!1)}measureEndState(){const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const i=t.getValue(n);i&&i.jump(this.measuredOrigin,!1);const s=r.length-1,o=r[s];r[s]=Ro[n](t.measureViewportBox(),window.getComputedStyle(t.current)),o!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=o),this.removedTransforms?.length&&this.removedTransforms.forEach(([l,c])=>{t.getValue(l).set(c)}),this.resolveNoneKeyframes()}}function M9(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){let r=document;const i=n?.[e]??r.querySelectorAll(e);return i?Array.from(i):[]}return Array.from(e)}const f5=(e,t)=>t&&typeof e=="number"?t.transform(e):e;function d5(e){return M4(e)&&"offsetHeight"in e}const nN=30,N9=e=>!isNaN(parseFloat(e));class _9{constructor(t,n={}){this.canTrackVelocity=null,this.events={},this.updateAndNotify=r=>{const i=In.now();if(this.updatedAt!==i&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&(this.events.change?.notify(this.current),this.dependents))for(const s of this.dependents)s.dirty()},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=In.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=N9(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new UE);const r=this.events[t].add(n);return t==="change"?()=>{r(),vt.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t){this.passiveEffect?this.passiveEffect(t,this.updateAndNotify):this.updateAndNotify(t)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}dirty(){this.events.change?.notify(this.current)}addDependent(t){this.dependents||(this.dependents=new Set),this.dependents.add(t)}removeDependent(t){this.dependents&&this.dependents.delete(t)}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=In.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>nN)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,nN);return _4(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.dependents?.clear(),this.events.destroy?.notify(),this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function hl(e,t){return new _9(e,t)}const{schedule:sC}=V4(queueMicrotask,!1),Dr={x:!1,y:!1};function h5(){return Dr.x||Dr.y}function R9(e){return e==="x"||e==="y"?Dr[e]?null:(Dr[e]=!0,()=>{Dr[e]=!1}):Dr.x||Dr.y?null:(Dr.x=Dr.y=!0,()=>{Dr.x=Dr.y=!1})}function p5(e,t){const n=M9(e),r=new AbortController,i={passive:!0,...t,signal:r.signal};return[n,i,()=>r.abort()]}function rN(e){return!(e.pointerType==="touch"||h5())}function D9(e,t,n={}){const[r,i,s]=p5(e,n),o=l=>{if(!rN(l))return;const{target:c}=l,f=t(c,l);if(typeof f!="function"||!c)return;const h=p=>{rN(p)&&(f(p),c.removeEventListener("pointerleave",h))};c.addEventListener("pointerleave",h,i)};return r.forEach(l=>{l.addEventListener("pointerenter",o,i)}),s}const m5=(e,t)=>t?e===t?!0:m5(e,t.parentElement):!1,oC=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,O9=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function j9(e){return O9.has(e.tagName)||e.tabIndex!==-1}const ih=new WeakSet;function iN(e){return t=>{t.key==="Enter"&&e(t)}}function e0(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const L9=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=iN(()=>{if(ih.has(n))return;e0(n,"down");const i=iN(()=>{e0(n,"up")}),s=()=>e0(n,"cancel");n.addEventListener("keyup",i,t),n.addEventListener("blur",s,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function sN(e){return oC(e)&&!h5()}function P9(e,t,n={}){const[r,i,s]=p5(e,n),o=l=>{const c=l.currentTarget;if(!sN(l))return;ih.add(c);const f=t(c,l),h=(y,b)=>{window.removeEventListener("pointerup",p),window.removeEventListener("pointercancel",g),ih.has(c)&&ih.delete(c),sN(y)&&typeof f=="function"&&f(y,{success:b})},p=y=>{h(y,c===window||c===document||n.useGlobalTarget||m5(c,y.target))},g=y=>{h(y,!1)};window.addEventListener("pointerup",p,i),window.addEventListener("pointercancel",g,i)};return r.forEach(l=>{(n.useGlobalTarget?window:l).addEventListener("pointerdown",o,i),d5(l)&&(l.addEventListener("focus",f=>L9(f,i)),!j9(l)&&!l.hasAttribute("tabindex")&&(l.tabIndex=0))}),s}function g5(e){return M4(e)&&"ownerSVGElement"in e}function B9(e){return g5(e)&&e.tagName==="svg"}const xn=e=>!!(e&&e.getVelocity),I9=[...l5,qt,Hs],z9=e=>I9.find(a5(e)),aC=P.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});function oN(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function q9(...e){return t=>{let n=!1;const r=e.map(i=>{const s=oN(i,t);return!n&&typeof s=="function"&&(n=!0),s});if(n)return()=>{for(let i=0;i<r.length;i++){const s=r[i];typeof s=="function"?s():oN(e[i],null)}}}}function V9(...e){return P.useCallback(q9(...e),e)}class H9 extends P.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,i=d5(r)&&r.offsetWidth||0,s=this.props.sizeRef.current;s.height=n.offsetHeight||0,s.width=n.offsetWidth||0,s.top=n.offsetTop,s.left=n.offsetLeft,s.right=i-s.width-s.left}return null}componentDidUpdate(){}render(){return this.props.children}}function F9({children:e,isPresent:t,anchorX:n,root:r}){const i=P.useId(),s=P.useRef(null),o=P.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:l}=P.useContext(aC),c=V9(s,e?.ref);return P.useInsertionEffect(()=>{const{width:f,height:h,top:p,left:g,right:y}=o.current;if(t||!s.current||!f||!h)return;const b=n==="left"?`left: ${g}`:`right: ${y}`;s.current.dataset.motionPopId=i;const S=document.createElement("style");l&&(S.nonce=l);const x=r??document.head;return x.appendChild(S),S.sheet&&S.sheet.insertRule(`
          [data-motion-pop-id="${i}"] {
            position: absolute !important;
            width: ${f}px !important;
            height: ${h}px !important;
            ${b}px !important;
            top: ${p}px !important;
          }
        `),()=>{x.contains(S)&&x.removeChild(S)}},[t]),w.jsx(H9,{isPresent:t,childRef:s,sizeRef:o,children:P.cloneElement(e,{ref:c})})}const U9=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:i,presenceAffectsLayout:s,mode:o,anchorX:l,root:c})=>{const f=IE($9),h=P.useId();let p=!0,g=P.useMemo(()=>(p=!1,{id:h,initial:t,isPresent:n,custom:i,onExitComplete:y=>{f.set(y,!0);for(const b of f.values())if(!b)return;r&&r()},register:y=>(f.set(y,!1),()=>f.delete(y))}),[n,f,r]);return s&&p&&(g={...g}),P.useMemo(()=>{f.forEach((y,b)=>f.set(b,!1))},[n]),P.useEffect(()=>{!n&&!f.size&&r&&r()},[n]),o==="popLayout"&&(e=w.jsx(F9,{isPresent:n,anchorX:l,root:c,children:e})),w.jsx(Pp.Provider,{value:g,children:e})};function $9(){return new Map}function y5(e=!0){const t=P.useContext(Pp);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:i}=t,s=P.useId();P.useEffect(()=>{if(e)return i(s)},[e]);const o=P.useCallback(()=>e&&r&&r(s),[s,r,e]);return!n&&r?[!1,o]:[!0]}const jd=e=>e.key||"";function aN(e){const t=[];return P.Children.forEach(e,n=>{P.isValidElement(n)&&t.push(n)}),t}const G9=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:i=!0,mode:s="sync",propagate:o=!1,anchorX:l="left",root:c})=>{const[f,h]=y5(o),p=P.useMemo(()=>aN(e),[e]),g=o&&!f?[]:p.map(jd),y=P.useRef(!0),b=P.useRef(p),S=IE(()=>new Map),[x,C]=P.useState(p),[T,k]=P.useState(p);T4(()=>{y.current=!1,b.current=p;for(let _=0;_<T.length;_++){const R=jd(T[_]);g.includes(R)?S.delete(R):S.get(R)!==!0&&S.set(R,!1)}},[T,g.length,g.join("-")]);const A=[];if(p!==x){let _=[...p];for(let R=0;R<T.length;R++){const O=T[R],I=jd(O);g.includes(I)||(_.splice(R,0,O),A.push(O))}return s==="wait"&&A.length&&(_=A),k(aN(_)),C(p),null}const{forceRender:M}=P.useContext(BE);return w.jsx(w.Fragment,{children:T.map(_=>{const R=jd(_),O=o&&!f?!1:p===T||g.includes(R),I=()=>{if(S.has(R))S.set(R,!0);else return;let $=!0;S.forEach(q=>{q||($=!1)}),$&&(M?.(),k(b.current),o&&h?.(),r&&r())};return w.jsx(U9,{isPresent:O,initial:!y.current||n?void 0:!1,custom:t,presenceAffectsLayout:i,mode:s,root:c,onExitComplete:O?void 0:I,anchorX:l,children:_},R)})})},v5=P.createContext({strict:!1}),lN={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},pl={};for(const e in lN)pl[e]={isEnabled:t=>lN[e].some(n=>!!t[n])};function K9(e){for(const t in e)pl[t]={...pl[t],...e[t]}}const Y9=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function kh(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Y9.has(e)}let b5=e=>!kh(e);function W9(e){typeof e=="function"&&(b5=t=>t.startsWith("on")?!kh(t):e(t))}try{W9(require("@emotion/is-prop-valid").default)}catch{}function X9(e,t,n){const r={};for(const i in e)i==="values"&&typeof e.values=="object"||(b5(i)||n===!0&&kh(i)||!t&&!kh(i)||e.draggable&&i.startsWith("onDrag"))&&(r[i]=e[i]);return r}const Bp=P.createContext({});function Ip(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function Ec(e){return typeof e=="string"||Array.isArray(e)}const lC=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],uC=["initial",...lC];function zp(e){return Ip(e.animate)||uC.some(t=>Ec(e[t]))}function x5(e){return!!(zp(e)||e.variants)}function Z9(e,t){if(zp(e)){const{initial:n,animate:r}=e;return{initial:n===!1||Ec(n)?n:void 0,animate:Ec(r)?r:void 0}}return e.inherit!==!1?t:{}}function Q9(e){const{initial:t,animate:n}=Z9(e,P.useContext(Bp));return P.useMemo(()=>({initial:t,animate:n}),[uN(t),uN(n)])}function uN(e){return Array.isArray(e)?e.join(" "):e}const Cc={};function J9(e){for(const t in e)Cc[t]=e[t],KE(t)&&(Cc[t].isCSSVariable=!0)}function w5(e,{layout:t,layoutId:n}){return Nl.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!Cc[e]||e==="opacity")}const e7={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},t7=Ml.length;function n7(e,t,n){let r="",i=!0;for(let s=0;s<t7;s++){const o=Ml[s],l=e[o];if(l===void 0)continue;let c=!0;if(typeof l=="number"?c=l===(o.startsWith("scale")?1:0):c=parseFloat(l)===0,!c||n){const f=f5(l,iC[o]);if(!c){i=!1;const h=e7[o]||o;r+=`${h}(${f}) `}n&&(t[o]=f)}}return r=r.trim(),n?r=n(t,i?"":r):i&&(r="none"),r}function cC(e,t,n){const{style:r,vars:i,transformOrigin:s}=e;let o=!1,l=!1;for(const c in t){const f=t[c];if(Nl.has(c)){o=!0;continue}else if(KE(c)){i[c]=f;continue}else{const h=f5(f,iC[c]);c.startsWith("origin")?(l=!0,s[c]=h):r[c]=h}}if(t.transform||(o||n?r.transform=n7(t,e.transform,n):r.transform&&(r.transform="none")),l){const{originX:c="50%",originY:f="50%",originZ:h=0}=s;r.transformOrigin=`${c} ${f} ${h}`}}const fC=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function S5(e,t,n){for(const r in t)!xn(t[r])&&!w5(r,n)&&(e[r]=t[r])}function r7({transformTemplate:e},t){return P.useMemo(()=>{const n=fC();return cC(n,t,e),Object.assign({},n.vars,n.style)},[t])}function i7(e,t){const n=e.style||{},r={};return S5(r,n,e),Object.assign(r,r7(e,t)),r}function s7(e,t){const n={},r=i7(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const o7={offset:"stroke-dashoffset",array:"stroke-dasharray"},a7={offset:"strokeDashoffset",array:"strokeDasharray"};function l7(e,t,n=1,r=0,i=!0){e.pathLength=1;const s=i?o7:a7;e[s.offset]=Ie.transform(-r);const o=Ie.transform(t),l=Ie.transform(n);e[s.array]=`${o} ${l}`}function E5(e,{attrX:t,attrY:n,attrScale:r,pathLength:i,pathSpacing:s=1,pathOffset:o=0,...l},c,f,h){if(cC(e,l,f),c){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:p,style:g}=e;p.transform&&(g.transform=p.transform,delete p.transform),(g.transform||p.transformOrigin)&&(g.transformOrigin=p.transformOrigin??"50% 50%",delete p.transformOrigin),g.transform&&(g.transformBox=h?.transformBox??"fill-box",delete p.transformBox),t!==void 0&&(p.x=t),n!==void 0&&(p.y=n),r!==void 0&&(p.scale=r),i!==void 0&&l7(p,i,s,o,!1)}const C5=()=>({...fC(),attrs:{}}),k5=e=>typeof e=="string"&&e.toLowerCase()==="svg";function u7(e,t,n,r){const i=P.useMemo(()=>{const s=C5();return E5(s,t,k5(r),e.transformTemplate,e.style),{...s.attrs,style:{...s.style}}},[t]);if(e.style){const s={};S5(s,e.style,e),i.style={...s,...i.style}}return i}const c7=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function dC(e){return typeof e!="string"||e.includes("-")?!1:!!(c7.indexOf(e)>-1||/[A-Z]/u.test(e))}function f7(e,t,n,{latestValues:r},i,s=!1){const l=(dC(e)?u7:s7)(t,r,i,e),c=X9(t,typeof e=="string",s),f=e!==P.Fragment?{...c,...l,ref:n}:{},{children:h}=t,p=P.useMemo(()=>xn(h)?h.get():h,[h]);return P.createElement(e,{...f,children:p})}function cN(e){const t=[{},{}];return e?.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function hC(e,t,n,r){if(typeof t=="function"){const[i,s]=cN(r);t=t(n!==void 0?n:e.custom,i,s)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[i,s]=cN(r);t=t(n!==void 0?n:e.custom,i,s)}return t}function sh(e){return xn(e)?e.get():e}function d7({scrapeMotionValuesFromProps:e,createRenderState:t},n,r,i){return{latestValues:h7(n,r,i,e),renderState:t()}}function h7(e,t,n,r){const i={},s=r(e,{});for(const g in s)i[g]=sh(s[g]);let{initial:o,animate:l}=e;const c=zp(e),f=x5(e);t&&f&&!c&&e.inherit!==!1&&(o===void 0&&(o=t.initial),l===void 0&&(l=t.animate));let h=n?n.initial===!1:!1;h=h||o===!1;const p=h?l:o;if(p&&typeof p!="boolean"&&!Ip(p)){const g=Array.isArray(p)?p:[p];for(let y=0;y<g.length;y++){const b=hC(e,g[y]);if(b){const{transitionEnd:S,transition:x,...C}=b;for(const T in C){let k=C[T];if(Array.isArray(k)){const A=h?k.length-1:0;k=k[A]}k!==null&&(i[T]=k)}for(const T in S)i[T]=S[T]}}}return i}const T5=e=>(t,n)=>{const r=P.useContext(Bp),i=P.useContext(Pp),s=()=>d7(e,t,r,i);return n?s():IE(s)};function pC(e,t,n){const{style:r}=e,i={};for(const s in r)(xn(r[s])||t.style&&xn(t.style[s])||w5(s,e)||n?.getValue(s)?.liveStyle!==void 0)&&(i[s]=r[s]);return i}const p7=T5({scrapeMotionValuesFromProps:pC,createRenderState:fC});function A5(e,t,n){const r=pC(e,t,n);for(const i in e)if(xn(e[i])||xn(t[i])){const s=Ml.indexOf(i)!==-1?"attr"+i.charAt(0).toUpperCase()+i.substring(1):i;r[s]=e[i]}return r}const m7=T5({scrapeMotionValuesFromProps:A5,createRenderState:C5}),g7=Symbol.for("motionComponentSymbol");function tl(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function y7(e,t,n){return P.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):tl(n)&&(n.current=r))},[t])}const mC=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),v7="framerAppearId",M5="data-"+mC(v7),N5=P.createContext({});function b7(e,t,n,r,i){const{visualElement:s}=P.useContext(Bp),o=P.useContext(v5),l=P.useContext(Pp),c=P.useContext(aC).reducedMotion,f=P.useRef(null);r=r||o.renderer,!f.current&&r&&(f.current=r(e,{visualState:t,parent:s,props:n,presenceContext:l,blockInitialAnimation:l?l.initial===!1:!1,reducedMotionConfig:c}));const h=f.current,p=P.useContext(N5);h&&!h.projection&&i&&(h.type==="html"||h.type==="svg")&&x7(f.current,n,i,p);const g=P.useRef(!1);P.useInsertionEffect(()=>{h&&g.current&&h.update(n,l)});const y=n[M5],b=P.useRef(!!y&&!window.MotionHandoffIsComplete?.(y)&&window.MotionHasOptimisedAnimation?.(y));return T4(()=>{h&&(g.current=!0,window.MotionIsMounted=!0,h.updateFeatures(),h.scheduleRenderMicrotask(),b.current&&h.animationState&&h.animationState.animateChanges())}),P.useEffect(()=>{h&&(!b.current&&h.animationState&&h.animationState.animateChanges(),b.current&&(queueMicrotask(()=>{window.MotionHandoffMarkAsComplete?.(y)}),b.current=!1),h.enteringChildren=void 0)}),h}function x7(e,t,n,r){const{layoutId:i,layout:s,drag:o,dragConstraints:l,layoutScroll:c,layoutRoot:f,layoutCrossfade:h}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:_5(e.parent)),e.projection.setOptions({layoutId:i,layout:s,alwaysMeasureLayout:!!o||l&&tl(l),visualElement:e,animationType:typeof s=="string"?s:"both",initialPromotionConfig:r,crossfade:h,layoutScroll:c,layoutRoot:f})}function _5(e){if(e)return e.options.allowProjection!==!1?e.projection:_5(e.parent)}function t0(e,{forwardMotionProps:t=!1}={},n,r){n&&K9(n);const i=dC(e)?m7:p7;function s(l,c){let f;const h={...P.useContext(aC),...l,layoutId:w7(l)},{isStatic:p}=h,g=Q9(l),y=i(l,p);if(!p&&zE){S7();const b=E7(h);f=b.MeasureLayout,g.visualElement=b7(e,y,h,r,b.ProjectionNode)}return w.jsxs(Bp.Provider,{value:g,children:[f&&g.visualElement?w.jsx(f,{visualElement:g.visualElement,...h}):null,f7(e,l,y7(y,g.visualElement,c),y,p,t)]})}s.displayName=`motion.${typeof e=="string"?e:`create(${e.displayName??e.name??""})`}`;const o=P.forwardRef(s);return o[g7]=e,o}function w7({layoutId:e}){const t=P.useContext(BE).id;return t&&e!==void 0?t+"-"+e:e}function S7(e,t){P.useContext(v5).strict}function E7(e){const{drag:t,layout:n}=pl;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t?.isEnabled(e)||n?.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}function C7(e,t){if(typeof Proxy>"u")return t0;const n=new Map,r=(s,o)=>t0(s,o,e,t),i=(s,o)=>r(s,o);return new Proxy(i,{get:(s,o)=>o==="create"?r:(n.has(o)||n.set(o,t0(o,void 0,e,t)),n.get(o))})}function R5({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function k7({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function T7(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}function n0(e){return e===void 0||e===1}function LS({scale:e,scaleX:t,scaleY:n}){return!n0(e)||!n0(t)||!n0(n)}function bo(e){return LS(e)||D5(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function D5(e){return fN(e.x)||fN(e.y)}function fN(e){return e&&e!=="0%"}function Th(e,t,n){const r=e-n,i=t*r;return n+i}function dN(e,t,n,r,i){return i!==void 0&&(e=Th(e,i,r)),Th(e,n,r)+t}function PS(e,t=0,n=1,r,i){e.min=dN(e.min,t,n,r,i),e.max=dN(e.max,t,n,r,i)}function O5(e,{x:t,y:n}){PS(e.x,t.translate,t.scale,t.originPoint),PS(e.y,n.translate,n.scale,n.originPoint)}const hN=.999999999999,pN=1.0000000000001;function A7(e,t,n,r=!1){const i=n.length;if(!i)return;t.x=t.y=1;let s,o;for(let l=0;l<i;l++){s=n[l],o=s.projectionDelta;const{visualElement:c}=s.options;c&&c.props.style&&c.props.style.display==="contents"||(r&&s.options.layoutScroll&&s.scroll&&s!==s.root&&rl(e,{x:-s.scroll.offset.x,y:-s.scroll.offset.y}),o&&(t.x*=o.x.scale,t.y*=o.y.scale,O5(e,o)),r&&bo(s.latestValues)&&rl(e,s.latestValues))}t.x<pN&&t.x>hN&&(t.x=1),t.y<pN&&t.y>hN&&(t.y=1)}function nl(e,t){e.min=e.min+t,e.max=e.max+t}function mN(e,t,n,r,i=.5){const s=Ct(e.min,e.max,i);PS(e,t,n,s,r)}function rl(e,t){mN(e.x,t.x,t.scaleX,t.scale,t.originX),mN(e.y,t.y,t.scaleY,t.scale,t.originY)}function j5(e,t){return R5(T7(e.getBoundingClientRect(),t))}function M7(e,t,n){const r=j5(e,n),{scroll:i}=t;return i&&(nl(r.x,i.offset.x),nl(r.y,i.offset.y)),r}const gN=()=>({translate:0,scale:1,origin:0,originPoint:0}),il=()=>({x:gN(),y:gN()}),yN=()=>({min:0,max:0}),jt=()=>({x:yN(),y:yN()}),BS={current:null},L5={current:!1};function N7(){if(L5.current=!0,!!zE)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>BS.current=e.matches;e.addEventListener("change",t),t()}else BS.current=!1}const _7=new WeakMap;function R7(e,t,n){for(const r in t){const i=t[r],s=n[r];if(xn(i))e.addValue(r,i);else if(xn(s))e.addValue(r,hl(i,{owner:e}));else if(s!==i)if(e.hasValue(r)){const o=e.getValue(r);o.liveStyle===!0?o.jump(i):o.hasAnimated||o.set(i)}else{const o=e.getStaticValue(r);e.addValue(r,hl(o!==void 0?o:i,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const vN=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class D7{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:i,blockInitialAnimation:s,visualState:o},l={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=nC,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const g=In.now();this.renderScheduledAt<g&&(this.renderScheduledAt=g,vt.render(this.render,!1,!0))};const{latestValues:c,renderState:f}=o;this.latestValues=c,this.baseTarget={...c},this.initialValues=n.initial?{...c}:{},this.renderState=f,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=i,this.options=l,this.blockInitialAnimation=!!s,this.isControllingVariants=zp(n),this.isVariantNode=x5(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:h,...p}=this.scrapeMotionValuesFromProps(n,{},this);for(const g in p){const y=p[g];c[g]!==void 0&&xn(y)&&y.set(c[g])}}mount(t){this.current=t,_7.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),L5.current||N7(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:BS.current,this.parent?.addChild(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),Vs(this.notifyUpdate),Vs(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent?.removeChild(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}addChild(t){this.children.add(t),this.enteringChildren??(this.enteringChildren=new Set),this.enteringChildren.add(t)}removeChild(t){this.children.delete(t),this.enteringChildren&&this.enteringChildren.delete(t)}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Nl.has(t);r&&this.onBindTransform&&this.onBindTransform();const i=n.on("change",o=>{this.latestValues[t]=o,this.props.onUpdate&&vt.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0),this.scheduleRender()});let s;window.MotionCheckAppearSync&&(s=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{i(),s&&s(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in pl){const n=pl[t];if(!n)continue;const{isEnabled:r,Feature:i}=n;if(!this.features[t]&&i&&r(this.props)&&(this.features[t]=new i(this)),this.features[t]){const s=this.features[t];s.isMounted?s.update():(s.mount(),s.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):jt()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<vN.length;r++){const i=vN[r];this.propEventSubscriptions[i]&&(this.propEventSubscriptions[i](),delete this.propEventSubscriptions[i]);const s="on"+i,o=t[s];o&&(this.propEventSubscriptions[i]=this.on(i,o))}this.prevMotionValues=R7(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue()}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=hl(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(A4(r)||N4(r))?r=parseFloat(r):!z9(r)&&Hs.test(n)&&(r=c5(t,n)),this.setBaseTarget(t,xn(r)?r.get():r)),xn(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const s=hC(this.props,n,this.presenceContext?.custom);s&&(r=s[t])}if(n&&r!==void 0)return r;const i=this.getBaseTargetFromProps(this.props,t);return i!==void 0&&!xn(i)?i:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new UE),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}scheduleRenderMicrotask(){sC.render(this.render)}}class P5 extends D7{constructor(){super(...arguments),this.KeyframeResolver=A9}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;xn(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function B5(e,{style:t,vars:n},r,i){const s=e.style;let o;for(o in t)s[o]=t[o];i?.applyProjectionStyles(s,r);for(o in n)s.setProperty(o,n[o])}function O7(e){return window.getComputedStyle(e)}class j7 extends P5{constructor(){super(...arguments),this.type="html",this.renderInstance=B5}readValueFromInstance(t,n){if(Nl.has(n))return this.projection?.isProjecting?MS(n):G$(t,n);{const r=O7(t),i=(KE(n)?r.getPropertyValue(n):r[n])||0;return typeof i=="string"?i.trim():i}}measureInstanceViewportBox(t,{transformPagePoint:n}){return j5(t,n)}build(t,n,r){cC(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return pC(t,n,r)}}const I5=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function L7(e,t,n,r){B5(e,t,void 0,r);for(const i in t.attrs)e.setAttribute(I5.has(i)?i:mC(i),t.attrs[i])}class P7 extends P5{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=jt}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Nl.has(n)){const r=u5(n);return r&&r.default||0}return n=I5.has(n)?n:mC(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return A5(t,n,r)}build(t,n,r){E5(t,n,this.isSVGTag,r.transformTemplate,r.style)}renderInstance(t,n,r,i){L7(t,n,r,i)}mount(t){this.isSVGTag=k5(t.tagName),super.mount(t)}}const B7=(e,t)=>dC(e)?new P7(t):new j7(t,{allowProjection:e!==P.Fragment});function ll(e,t,n){const r=e.getProps();return hC(r,t,n!==void 0?n:r.custom,e)}const IS=e=>Array.isArray(e);function I7(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,hl(n))}function z7(e){return IS(e)?e[e.length-1]||0:e}function q7(e,t){const n=ll(e,t);let{transitionEnd:r={},transition:i={},...s}=n||{};s={...s,...r};for(const o in s){const l=z7(s[o]);I7(e,o,l)}}function V7(e){return!!(xn(e)&&e.add)}function zS(e,t){const n=e.getValue("willChange");if(V7(n))return n.add(t);if(!n&&qi.WillChange){const r=new qi.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function z5(e){return e.props[M5]}const H7=e=>e!==null;function F7(e,{repeat:t,repeatType:n="loop"},r){const i=e.filter(H7),s=t&&n!=="loop"&&t%2===1?0:i.length-1;return i[s]}const U7={type:"spring",stiffness:500,damping:25,restSpeed:10},$7=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),G7={type:"keyframes",duration:.8},K7={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},Y7=(e,{keyframes:t})=>t.length>2?G7:Nl.has(e)?e.startsWith("scale")?$7(t[1]):U7:K7;function W7({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:i,repeat:s,repeatType:o,repeatDelay:l,from:c,elapsed:f,...h}){return!!Object.keys(h).length}const gC=(e,t,n,r={},i,s)=>o=>{const l=rC(r,e)||{},c=l.delay||r.delay||0;let{elapsed:f=0}=r;f=f-ei(c);const h={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...l,delay:-f,onUpdate:g=>{t.set(g),l.onUpdate&&l.onUpdate(g)},onComplete:()=>{o(),l.onComplete&&l.onComplete()},name:e,motionValue:t,element:s?void 0:i};W7(l)||Object.assign(h,Y7(e,h)),h.duration&&(h.duration=ei(h.duration)),h.repeatDelay&&(h.repeatDelay=ei(h.repeatDelay)),h.from!==void 0&&(h.keyframes[0]=h.from);let p=!1;if((h.type===!1||h.duration===0&&!h.repeatDelay)&&(OS(h),h.delay===0&&(p=!0)),(qi.instantAnimations||qi.skipAnimations)&&(p=!0,OS(h),h.delay=0),h.allowFlatten=!l.type&&!l.ease,p&&!s&&t.get()!==void 0){const g=F7(h.keyframes,l);if(g!==void 0){vt.update(()=>{h.onUpdate(g),h.onComplete()});return}}return l.isSync?new tC(h):new m9(h)};function X7({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function q5(e,t,{delay:n=0,transitionOverride:r,type:i}={}){let{transition:s=e.getDefaultTransition(),transitionEnd:o,...l}=t;r&&(s=r);const c=[],f=i&&e.animationState&&e.animationState.getState()[i];for(const h in l){const p=e.getValue(h,e.latestValues[h]??null),g=l[h];if(g===void 0||f&&X7(f,h))continue;const y={delay:n,...rC(s||{},h)},b=p.get();if(b!==void 0&&!p.isAnimating&&!Array.isArray(g)&&g===b&&!y.velocity)continue;let S=!1;if(window.MotionHandoffAnimation){const C=z5(e);if(C){const T=window.MotionHandoffAnimation(C,h,vt);T!==null&&(y.startTime=T,S=!0)}}zS(e,h),p.start(gC(h,p,g,e.shouldReduceMotion&&o5.has(h)?{type:!1}:y,e,S));const x=p.animation;x&&c.push(x)}return o&&Promise.all(c).then(()=>{vt.update(()=>{o&&q7(e,o)})}),c}function V5(e,t,n,r=0,i=1){const s=Array.from(e).sort((f,h)=>f.sortNodePosition(h)).indexOf(t),o=e.size,l=(o-1)*r;return typeof n=="function"?n(s,o):i===1?s*r:l-s*r}function qS(e,t,n={}){const r=ll(e,t,n.type==="exit"?e.presenceContext?.custom:void 0);let{transition:i=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(i=n.transitionOverride);const s=r?()=>Promise.all(q5(e,r,n)):()=>Promise.resolve(),o=e.variantChildren&&e.variantChildren.size?(c=0)=>{const{delayChildren:f=0,staggerChildren:h,staggerDirection:p}=i;return Z7(e,t,c,f,h,p,n)}:()=>Promise.resolve(),{when:l}=i;if(l){const[c,f]=l==="beforeChildren"?[s,o]:[o,s];return c().then(()=>f())}else return Promise.all([s(),o(n.delay)])}function Z7(e,t,n=0,r=0,i=0,s=1,o){const l=[];for(const c of e.variantChildren)c.notify("AnimationStart",t),l.push(qS(c,t,{...o,delay:n+(typeof r=="function"?0:r)+V5(e.variantChildren,c,r,i,s)}).then(()=>c.notify("AnimationComplete",t)));return Promise.all(l)}function Q7(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const i=t.map(s=>qS(e,s,n));r=Promise.all(i)}else if(typeof t=="string")r=qS(e,t,n);else{const i=typeof t=="function"?ll(e,t,n.custom):t;r=Promise.all(q5(e,i,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function H5(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const J7=uC.length;function F5(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?F5(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<J7;n++){const r=uC[n],i=e.props[r];(Ec(i)||i===!1)&&(t[r]=i)}return t}const eG=[...lC].reverse(),tG=lC.length;function nG(e){return t=>Promise.all(t.map(({animation:n,options:r})=>Q7(e,n,r)))}function rG(e){let t=nG(e),n=bN(),r=!0;const i=c=>(f,h)=>{const p=ll(e,h,c==="exit"?e.presenceContext?.custom:void 0);if(p){const{transition:g,transitionEnd:y,...b}=p;f={...f,...b,...y}}return f};function s(c){t=c(e)}function o(c){const{props:f}=e,h=F5(e.parent)||{},p=[],g=new Set;let y={},b=1/0;for(let x=0;x<tG;x++){const C=eG[x],T=n[C],k=f[C]!==void 0?f[C]:h[C],A=Ec(k),M=C===c?T.isActive:null;M===!1&&(b=x);let _=k===h[C]&&k!==f[C]&&A;if(_&&r&&e.manuallyAnimateOnMount&&(_=!1),T.protectedKeys={...y},!T.isActive&&M===null||!k&&!T.prevProp||Ip(k)||typeof k=="boolean")continue;const R=iG(T.prevProp,k);let O=R||C===c&&T.isActive&&!_&&A||x>b&&A,I=!1;const $=Array.isArray(k)?k:[k];let q=$.reduce(i(C),{});M===!1&&(q={});const{prevResolvedValues:U={}}=T,X={...U,...q},B=z=>{O=!0,g.has(z)&&(I=!0,g.delete(z)),T.needsAnimating[z]=!0;const W=e.getValue(z);W&&(W.liveStyle=!1)};for(const z in X){const W=q[z],J=U[z];if(y.hasOwnProperty(z))continue;let L=!1;IS(W)&&IS(J)?L=!H5(W,J):L=W!==J,L?W!=null?B(z):g.add(z):W!==void 0&&g.has(z)?B(z):T.protectedKeys[z]=!0}T.prevProp=k,T.prevResolvedValues=q,T.isActive&&(y={...y,...q}),r&&e.blockInitialAnimation&&(O=!1);const F=_&&R;O&&(!F||I)&&p.push(...$.map(z=>{const W={type:C};if(typeof z=="string"&&r&&!F&&e.manuallyAnimateOnMount&&e.parent){const{parent:J}=e,L=ll(J,z);if(J.enteringChildren&&L){const{delayChildren:K}=L.transition||{};W.delay=V5(J.enteringChildren,e,K)}}return{animation:z,options:W}}))}if(g.size){const x={};if(typeof f.initial!="boolean"){const C=ll(e,Array.isArray(f.initial)?f.initial[0]:f.initial);C&&C.transition&&(x.transition=C.transition)}g.forEach(C=>{const T=e.getBaseTarget(C),k=e.getValue(C);k&&(k.liveStyle=!0),x[C]=T??null}),p.push({animation:x})}let S=!!p.length;return r&&(f.initial===!1||f.initial===f.animate)&&!e.manuallyAnimateOnMount&&(S=!1),r=!1,S?t(p):Promise.resolve()}function l(c,f){if(n[c].isActive===f)return Promise.resolve();e.variantChildren?.forEach(p=>p.animationState?.setActive(c,f)),n[c].isActive=f;const h=o(c);for(const p in n)n[p].protectedKeys={};return h}return{animateChanges:o,setActive:l,setAnimateFunction:s,getState:()=>n,reset:()=>{n=bN(),r=!0}}}function iG(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!H5(t,e):!1}function yo(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function bN(){return{animate:yo(!0),whileInView:yo(),whileHover:yo(),whileTap:yo(),whileDrag:yo(),whileFocus:yo(),exit:yo()}}class Gs{constructor(t){this.isMounted=!1,this.node=t}update(){}}class sG extends Gs{constructor(t){super(t),t.animationState||(t.animationState=rG(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();Ip(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){this.node.animationState.reset(),this.unmountControls?.()}}let oG=0;class aG extends Gs{constructor(){super(...arguments),this.id=oG++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const i=this.node.animationState.setActive("exit",!t);n&&!t&&i.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const lG={animation:{Feature:sG},exit:{Feature:aG}};function kc(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function Jc(e){return{point:{x:e.pageX,y:e.pageY}}}const uG=e=>t=>oC(t)&&e(t,Jc(t));function rc(e,t,n,r){return kc(e,t,uG(n),r)}const U5=1e-4,cG=1-U5,fG=1+U5,$5=.01,dG=0-$5,hG=0+$5;function kn(e){return e.max-e.min}function pG(e,t,n){return Math.abs(e-t)<=n}function xN(e,t,n,r=.5){e.origin=r,e.originPoint=Ct(t.min,t.max,e.origin),e.scale=kn(n)/kn(t),e.translate=Ct(n.min,n.max,e.origin)-e.originPoint,(e.scale>=cG&&e.scale<=fG||isNaN(e.scale))&&(e.scale=1),(e.translate>=dG&&e.translate<=hG||isNaN(e.translate))&&(e.translate=0)}function ic(e,t,n,r){xN(e.x,t.x,n.x,r?r.originX:void 0),xN(e.y,t.y,n.y,r?r.originY:void 0)}function wN(e,t,n){e.min=n.min+t.min,e.max=e.min+kn(t)}function mG(e,t,n){wN(e.x,t.x,n.x),wN(e.y,t.y,n.y)}function SN(e,t,n){e.min=t.min-n.min,e.max=e.min+kn(t)}function sc(e,t,n){SN(e.x,t.x,n.x),SN(e.y,t.y,n.y)}function gr(e){return[e("x"),e("y")]}const G5=({current:e})=>e?e.ownerDocument.defaultView:null,EN=(e,t)=>Math.abs(e-t);function gG(e,t){const n=EN(e.x,t.x),r=EN(e.y,t.y);return Math.sqrt(n**2+r**2)}class K5{constructor(t,n,{transformPagePoint:r,contextWindow:i=window,dragSnapToOrigin:s=!1,distanceThreshold:o=3}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const g=i0(this.lastMoveEventInfo,this.history),y=this.startEvent!==null,b=gG(g.offset,{x:0,y:0})>=this.distanceThreshold;if(!y&&!b)return;const{point:S}=g,{timestamp:x}=fn;this.history.push({...S,timestamp:x});const{onStart:C,onMove:T}=this.handlers;y||(C&&C(this.lastMoveEvent,g),this.startEvent=this.lastMoveEvent),T&&T(this.lastMoveEvent,g)},this.handlePointerMove=(g,y)=>{this.lastMoveEvent=g,this.lastMoveEventInfo=r0(y,this.transformPagePoint),vt.update(this.updatePoint,!0)},this.handlePointerUp=(g,y)=>{this.end();const{onEnd:b,onSessionEnd:S,resumeAnimation:x}=this.handlers;if(this.dragSnapToOrigin&&x&&x(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const C=i0(g.type==="pointercancel"?this.lastMoveEventInfo:r0(y,this.transformPagePoint),this.history);this.startEvent&&b&&b(g,C),S&&S(g,C)},!oC(t))return;this.dragSnapToOrigin=s,this.handlers=n,this.transformPagePoint=r,this.distanceThreshold=o,this.contextWindow=i||window;const l=Jc(t),c=r0(l,this.transformPagePoint),{point:f}=c,{timestamp:h}=fn;this.history=[{...f,timestamp:h}];const{onSessionStart:p}=n;p&&p(t,i0(c,this.history)),this.removeListeners=Xc(rc(this.contextWindow,"pointermove",this.handlePointerMove),rc(this.contextWindow,"pointerup",this.handlePointerUp),rc(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),Vs(this.updatePoint)}}function r0(e,t){return t?{point:t(e.point)}:e}function CN(e,t){return{x:e.x-t.x,y:e.y-t.y}}function i0({point:e},t){return{point:e,delta:CN(e,Y5(t)),offset:CN(e,yG(t)),velocity:vG(t,.1)}}function yG(e){return e[0]}function Y5(e){return e[e.length-1]}function vG(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const i=Y5(e);for(;n>=0&&(r=e[n],!(i.timestamp-r.timestamp>ei(t)));)n--;if(!r)return{x:0,y:0};const s=xr(i.timestamp-r.timestamp);if(s===0)return{x:0,y:0};const o={x:(i.x-r.x)/s,y:(i.y-r.y)/s};return o.x===1/0&&(o.x=0),o.y===1/0&&(o.y=0),o}function bG(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Ct(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Ct(n,e,r.max):Math.min(e,n)),e}function kN(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function xG(e,{top:t,left:n,bottom:r,right:i}){return{x:kN(e.x,n,i),y:kN(e.y,t,r)}}function TN(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function wG(e,t){return{x:TN(e.x,t.x),y:TN(e.y,t.y)}}function SG(e,t){let n=.5;const r=kn(e),i=kn(t);return i>r?n=xc(t.min,t.max-r,e.min):r>i&&(n=xc(e.min,e.max-i,t.min)),zi(0,1,n)}function EG(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const VS=.35;function CG(e=VS){return e===!1?e=0:e===!0&&(e=VS),{x:AN(e,"left","right"),y:AN(e,"top","bottom")}}function AN(e,t,n){return{min:MN(e,t),max:MN(e,n)}}function MN(e,t){return typeof e=="number"?e:e[t]||0}const kG=new WeakMap;class TG{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=jt(),this.latestPointerEvent=null,this.latestPanInfo=null,this.visualElement=t}start(t,{snapToCursor:n=!1,distanceThreshold:r}={}){const{presenceContext:i}=this.visualElement;if(i&&i.isPresent===!1)return;const s=p=>{const{dragSnapToOrigin:g}=this.getProps();g?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(Jc(p).point)},o=(p,g)=>{const{drag:y,dragPropagation:b,onDragStart:S}=this.getProps();if(y&&!b&&(this.openDragLock&&this.openDragLock(),this.openDragLock=R9(y),!this.openDragLock))return;this.latestPointerEvent=p,this.latestPanInfo=g,this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),gr(C=>{let T=this.getAxisMotionValue(C).get()||0;if(ti.test(T)){const{projection:k}=this.visualElement;if(k&&k.layout){const A=k.layout.layoutBox[C];A&&(T=kn(A)*(parseFloat(T)/100))}}this.originPoint[C]=T}),S&&vt.postRender(()=>S(p,g)),zS(this.visualElement,"transform");const{animationState:x}=this.visualElement;x&&x.setActive("whileDrag",!0)},l=(p,g)=>{this.latestPointerEvent=p,this.latestPanInfo=g;const{dragPropagation:y,dragDirectionLock:b,onDirectionLock:S,onDrag:x}=this.getProps();if(!y&&!this.openDragLock)return;const{offset:C}=g;if(b&&this.currentDirection===null){this.currentDirection=AG(C),this.currentDirection!==null&&S&&S(this.currentDirection);return}this.updateAxis("x",g.point,C),this.updateAxis("y",g.point,C),this.visualElement.render(),x&&x(p,g)},c=(p,g)=>{this.latestPointerEvent=p,this.latestPanInfo=g,this.stop(p,g),this.latestPointerEvent=null,this.latestPanInfo=null},f=()=>gr(p=>this.getAnimationState(p)==="paused"&&this.getAxisMotionValue(p).animation?.play()),{dragSnapToOrigin:h}=this.getProps();this.panSession=new K5(t,{onSessionStart:s,onStart:o,onMove:l,onSessionEnd:c,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:h,distanceThreshold:r,contextWindow:G5(this.visualElement)})}stop(t,n){const r=t||this.latestPointerEvent,i=n||this.latestPanInfo,s=this.isDragging;if(this.cancel(),!s||!i||!r)return;const{velocity:o}=i;this.startAnimation(o);const{onDragEnd:l}=this.getProps();l&&vt.postRender(()=>l(r,i))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:i}=this.getProps();if(!r||!Ld(t,i,this.currentDirection))return;const s=this.getAxisMotionValue(t);let o=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(o=bG(o,this.constraints[t],this.elastic[t])),s.set(o)}resolveConstraints(){const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):this.visualElement.projection?.layout,i=this.constraints;t&&tl(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=xG(r.layoutBox,t):this.constraints=!1,this.elastic=CG(n),i!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&gr(s=>{this.constraints!==!1&&this.getAxisMotionValue(s)&&(this.constraints[s]=EG(r.layoutBox[s],this.constraints[s]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!tl(t))return!1;const r=t.current,{projection:i}=this.visualElement;if(!i||!i.layout)return!1;const s=M7(r,i.root,this.visualElement.getTransformPagePoint());let o=wG(i.layout.layoutBox,s);if(n){const l=n(k7(o));this.hasMutatedConstraints=!!l,l&&(o=R5(l))}return o}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:i,dragTransition:s,dragSnapToOrigin:o,onDragTransitionEnd:l}=this.getProps(),c=this.constraints||{},f=gr(h=>{if(!Ld(h,n,this.currentDirection))return;let p=c&&c[h]||{};o&&(p={min:0,max:0});const g=i?200:1e6,y=i?40:1e7,b={type:"inertia",velocity:r?t[h]:0,bounceStiffness:g,bounceDamping:y,timeConstant:750,restDelta:1,restSpeed:10,...s,...p};return this.startAxisValueAnimation(h,b)});return Promise.all(f).then(l)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return zS(this.visualElement,t),r.start(gC(t,r,0,n,this.visualElement,!1))}stopAnimation(){gr(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){gr(t=>this.getAxisMotionValue(t).animation?.pause())}getAnimationState(t){return this.getAxisMotionValue(t).animation?.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),i=r[n];return i||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){gr(n=>{const{drag:r}=this.getProps();if(!Ld(n,r,this.currentDirection))return;const{projection:i}=this.visualElement,s=this.getAxisMotionValue(n);if(i&&i.layout){const{min:o,max:l}=i.layout.layoutBox[n];s.set(t[n]-Ct(o,l,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!tl(n)||!r||!this.constraints)return;this.stopAnimation();const i={x:0,y:0};gr(o=>{const l=this.getAxisMotionValue(o);if(l&&this.constraints!==!1){const c=l.get();i[o]=SG({min:c,max:c},this.constraints[o])}});const{transformTemplate:s}=this.visualElement.getProps();this.visualElement.current.style.transform=s?s({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),gr(o=>{if(!Ld(o,t,null))return;const l=this.getAxisMotionValue(o),{min:c,max:f}=this.constraints[o];l.set(Ct(c,f,i[o]))})}addListeners(){if(!this.visualElement.current)return;kG.set(this.visualElement,this);const t=this.visualElement.current,n=rc(t,"pointerdown",c=>{const{drag:f,dragListener:h=!0}=this.getProps();f&&h&&this.start(c)}),r=()=>{const{dragConstraints:c}=this.getProps();tl(c)&&c.current&&(this.constraints=this.resolveRefConstraints())},{projection:i}=this.visualElement,s=i.addEventListener("measure",r);i&&!i.layout&&(i.root&&i.root.updateScroll(),i.updateLayout()),vt.read(r);const o=kc(window,"resize",()=>this.scalePositionWithinConstraints()),l=i.addEventListener("didUpdate",(({delta:c,hasLayoutChanged:f})=>{this.isDragging&&f&&(gr(h=>{const p=this.getAxisMotionValue(h);p&&(this.originPoint[h]+=c[h].translate,p.set(p.get()+c[h].translate))}),this.visualElement.render())}));return()=>{o(),n(),s(),l&&l()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:i=!1,dragConstraints:s=!1,dragElastic:o=VS,dragMomentum:l=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:i,dragConstraints:s,dragElastic:o,dragMomentum:l}}}function Ld(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function AG(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class MG extends Gs{constructor(t){super(t),this.removeGroupControls=Sr,this.removeListeners=Sr,this.controls=new TG(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Sr}unmount(){this.removeGroupControls(),this.removeListeners()}}const NN=e=>(t,n)=>{e&&vt.postRender(()=>e(t,n))};class NG extends Gs{constructor(){super(...arguments),this.removePointerDownListener=Sr}onPointerDown(t){this.session=new K5(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:G5(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:i}=this.node.getProps();return{onSessionStart:NN(t),onStart:NN(n),onMove:r,onEnd:(s,o)=>{delete this.session,i&&vt.postRender(()=>i(s,o))}}}mount(){this.removePointerDownListener=rc(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const oh={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function _N(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const zu={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(Ie.test(e))e=parseFloat(e);else return e;const n=_N(e,t.target.x),r=_N(e,t.target.y);return`${n}% ${r}%`}},_G={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,i=Hs.parse(e);if(i.length>5)return r;const s=Hs.createTransformer(e),o=typeof i[0]!="number"?1:0,l=n.x.scale*t.x,c=n.y.scale*t.y;i[0+o]/=l,i[1+o]/=c;const f=Ct(l,c,.5);return typeof i[2+o]=="number"&&(i[2+o]/=f),typeof i[3+o]=="number"&&(i[3+o]/=f),s(i)}};let s0=!1;class RG extends P.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:i}=this.props,{projection:s}=t;J9(DG),s&&(n.group&&n.group.add(s),r&&r.register&&i&&r.register(s),s0&&s.root.didUpdate(),s.addEventListener("animationComplete",()=>{this.safeToRemove()}),s.setOptions({...s.options,onExitComplete:()=>this.safeToRemove()})),oh.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:i,isPresent:s}=this.props,{projection:o}=r;return o&&(o.isPresent=s,s0=!0,i||t.layoutDependency!==n||n===void 0||t.isPresent!==s?o.willUpdate():this.safeToRemove(),t.isPresent!==s&&(s?o.promote():o.relegate()||vt.postRender(()=>{const l=o.getStack();(!l||!l.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),sC.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:i}=t;s0=!0,i&&(i.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(i),r&&r.deregister&&r.deregister(i))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function W5(e){const[t,n]=y5(),r=P.useContext(BE);return w.jsx(RG,{...e,layoutGroup:r,switchLayoutGroup:P.useContext(N5),isPresent:t,safeToRemove:n})}const DG={borderRadius:{...zu,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:zu,borderTopRightRadius:zu,borderBottomLeftRadius:zu,borderBottomRightRadius:zu,boxShadow:_G};function OG(e,t,n){const r=xn(e)?e:hl(e);return r.start(gC("",r,t,n)),r.animation}const jG=(e,t)=>e.depth-t.depth;class LG{constructor(){this.children=[],this.isDirty=!1}add(t){qE(this.children,t),this.isDirty=!0}remove(t){VE(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(jG),this.isDirty=!1,this.children.forEach(t)}}function PG(e,t){const n=In.now(),r=({timestamp:i})=>{const s=i-n;s>=t&&(Vs(r),e(s-t))};return vt.setup(r,!0),()=>Vs(r)}const X5=["TopLeft","TopRight","BottomLeft","BottomRight"],BG=X5.length,RN=e=>typeof e=="string"?parseFloat(e):e,DN=e=>typeof e=="number"||Ie.test(e);function IG(e,t,n,r,i,s){i?(e.opacity=Ct(0,n.opacity??1,zG(r)),e.opacityExit=Ct(t.opacity??1,0,qG(r))):s&&(e.opacity=Ct(t.opacity??1,n.opacity??1,r));for(let o=0;o<BG;o++){const l=`border${X5[o]}Radius`;let c=ON(t,l),f=ON(n,l);if(c===void 0&&f===void 0)continue;c||(c=0),f||(f=0),c===0||f===0||DN(c)===DN(f)?(e[l]=Math.max(Ct(RN(c),RN(f),r),0),(ti.test(f)||ti.test(c))&&(e[l]+="%")):e[l]=f}(t.rotate||n.rotate)&&(e.rotate=Ct(t.rotate||0,n.rotate||0,r))}function ON(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const zG=Z5(0,.5,B4),qG=Z5(.5,.95,Sr);function Z5(e,t,n){return r=>r<e?0:r>t?1:n(xc(e,t,r))}function jN(e,t){e.min=t.min,e.max=t.max}function pr(e,t){jN(e.x,t.x),jN(e.y,t.y)}function LN(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function PN(e,t,n,r,i){return e-=t,e=Th(e,1/n,r),i!==void 0&&(e=Th(e,1/i,r)),e}function VG(e,t=0,n=1,r=.5,i,s=e,o=e){if(ti.test(t)&&(t=parseFloat(t),t=Ct(o.min,o.max,t/100)-o.min),typeof t!="number")return;let l=Ct(s.min,s.max,r);e===s&&(l-=t),e.min=PN(e.min,t,n,l,i),e.max=PN(e.max,t,n,l,i)}function BN(e,t,[n,r,i],s,o){VG(e,t[n],t[r],t[i],t.scale,s,o)}const HG=["x","scaleX","originX"],FG=["y","scaleY","originY"];function IN(e,t,n,r){BN(e.x,t,HG,n?n.x:void 0,r?r.x:void 0),BN(e.y,t,FG,n?n.y:void 0,r?r.y:void 0)}function zN(e){return e.translate===0&&e.scale===1}function Q5(e){return zN(e.x)&&zN(e.y)}function qN(e,t){return e.min===t.min&&e.max===t.max}function UG(e,t){return qN(e.x,t.x)&&qN(e.y,t.y)}function VN(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function J5(e,t){return VN(e.x,t.x)&&VN(e.y,t.y)}function HN(e){return kn(e.x)/kn(e.y)}function FN(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class $G{constructor(){this.members=[]}add(t){qE(this.members,t),t.scheduleRender()}remove(t){if(VE(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(i=>t===i);if(n===0)return!1;let r;for(let i=n;i>=0;i--){const s=this.members[i];if(s.isPresent!==!1){r=s;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:i}=t.options;i===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function GG(e,t,n){let r="";const i=e.x.translate/t.x,s=e.y.translate/t.y,o=n?.z||0;if((i||s||o)&&(r=`translate3d(${i}px, ${s}px, ${o}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:f,rotate:h,rotateX:p,rotateY:g,skewX:y,skewY:b}=n;f&&(r=`perspective(${f}px) ${r}`),h&&(r+=`rotate(${h}deg) `),p&&(r+=`rotateX(${p}deg) `),g&&(r+=`rotateY(${g}deg) `),y&&(r+=`skewX(${y}deg) `),b&&(r+=`skewY(${b}deg) `)}const l=e.x.scale*t.x,c=e.y.scale*t.y;return(l!==1||c!==1)&&(r+=`scale(${l}, ${c})`),r||"none"}const o0=["","X","Y","Z"],KG=1e3;let YG=0;function a0(e,t,n,r){const{latestValues:i}=t;i[e]&&(n[e]=i[e],t.setStaticValue(e,0),r&&(r[e]=0))}function eB(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=z5(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:i,layoutId:s}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",vt,!(i||s))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&eB(r)}function tB({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:i}){return class{constructor(o={},l=t?.()){this.id=YG++,this.animationId=0,this.animationCommitId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(ZG),this.nodes.forEach(tK),this.nodes.forEach(nK),this.nodes.forEach(QG)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=o,this.root=l?l.root||l:this,this.path=l?[...l.path,l]:[],this.parent=l,this.depth=l?l.depth+1:0;for(let c=0;c<this.path.length;c++)this.path[c].shouldResetTransform=!0;this.root===this&&(this.nodes=new LG)}addEventListener(o,l){return this.eventHandlers.has(o)||this.eventHandlers.set(o,new UE),this.eventHandlers.get(o).add(l)}notifyListeners(o,...l){const c=this.eventHandlers.get(o);c&&c.notify(...l)}hasListeners(o){return this.eventHandlers.has(o)}mount(o){if(this.instance)return;this.isSVG=g5(o)&&!B9(o),this.instance=o;const{layoutId:l,layout:c,visualElement:f}=this.options;if(f&&!f.current&&f.mount(o),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),this.root.hasTreeAnimated&&(c||l)&&(this.isLayoutDirty=!0),e){let h,p=0;const g=()=>this.root.updateBlockedByResize=!1;vt.read(()=>{p=window.innerWidth}),e(o,()=>{const y=window.innerWidth;y!==p&&(p=y,this.root.updateBlockedByResize=!0,h&&h(),h=PG(g,250),oh.hasAnimatedSinceResize&&(oh.hasAnimatedSinceResize=!1,this.nodes.forEach(GN)))})}l&&this.root.registerSharedNode(l,this),this.options.animate!==!1&&f&&(l||c)&&this.addEventListener("didUpdate",({delta:h,hasLayoutChanged:p,hasRelativeLayoutChanged:g,layout:y})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const b=this.options.transition||f.getDefaultTransition()||aK,{onLayoutAnimationStart:S,onLayoutAnimationComplete:x}=f.getProps(),C=!this.targetLayout||!J5(this.targetLayout,y),T=!p&&g;if(this.options.layoutRoot||this.resumeFrom||T||p&&(C||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0);const k={...rC(b,"layout"),onPlay:S,onComplete:x};(f.shouldReduceMotion||this.options.layoutRoot)&&(k.delay=0,k.type=!1),this.startAnimation(k),this.setAnimationOrigin(h,T)}else p||GN(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=y})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const o=this.getStack();o&&o.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,this.eventHandlers.clear(),Vs(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(rK),this.animationId++)}getTransformTemplate(){const{visualElement:o}=this.options;return o&&o.getProps().transformTemplate}willUpdate(o=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&eB(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let h=0;h<this.path.length;h++){const p=this.path[h];p.shouldResetTransform=!0,p.updateScroll("snapshot"),p.options.layoutRoot&&p.willUpdate(!1)}const{layoutId:l,layout:c}=this.options;if(l===void 0&&!c)return;const f=this.getTransformTemplate();this.prevTransformTemplateValue=f?f(this.latestValues,""):void 0,this.updateSnapshot(),o&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(UN);return}if(this.animationId<=this.animationCommitId){this.nodes.forEach($N);return}this.animationCommitId=this.animationId,this.isUpdating?(this.isUpdating=!1,this.nodes.forEach(eK),this.nodes.forEach(WG),this.nodes.forEach(XG)):this.nodes.forEach($N),this.clearAllSnapshots();const l=In.now();fn.delta=zi(0,1e3/60,l-fn.timestamp),fn.timestamp=l,fn.isProcessing=!0,Wy.update.process(fn),Wy.preRender.process(fn),Wy.render.process(fn),fn.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,sC.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(JG),this.sharedNodes.forEach(iK)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,vt.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){vt.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!kn(this.snapshot.measuredBox.x)&&!kn(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let c=0;c<this.path.length;c++)this.path[c].updateScroll();const o=this.layout;this.layout=this.measure(!1),this.layoutCorrected=jt(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:l}=this.options;l&&l.notify("LayoutMeasure",this.layout.layoutBox,o?o.layoutBox:void 0)}updateScroll(o="measure"){let l=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===o&&(l=!1),l&&this.instance){const c=r(this.instance);this.scroll={animationId:this.root.animationId,phase:o,isRoot:c,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:c}}}resetTransform(){if(!i)return;const o=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,l=this.projectionDelta&&!Q5(this.projectionDelta),c=this.getTransformTemplate(),f=c?c(this.latestValues,""):void 0,h=f!==this.prevTransformTemplateValue;o&&this.instance&&(l||bo(this.latestValues)||h)&&(i(this.instance,f),this.shouldResetTransform=!1,this.scheduleRender())}measure(o=!0){const l=this.measurePageBox();let c=this.removeElementScroll(l);return o&&(c=this.removeTransform(c)),lK(c),{animationId:this.root.animationId,measuredBox:l,layoutBox:c,latestValues:{},source:this.id}}measurePageBox(){const{visualElement:o}=this.options;if(!o)return jt();const l=o.measureViewportBox();if(!(this.scroll?.wasRoot||this.path.some(uK))){const{scroll:f}=this.root;f&&(nl(l.x,f.offset.x),nl(l.y,f.offset.y))}return l}removeElementScroll(o){const l=jt();if(pr(l,o),this.scroll?.wasRoot)return l;for(let c=0;c<this.path.length;c++){const f=this.path[c],{scroll:h,options:p}=f;f!==this.root&&h&&p.layoutScroll&&(h.wasRoot&&pr(l,o),nl(l.x,h.offset.x),nl(l.y,h.offset.y))}return l}applyTransform(o,l=!1){const c=jt();pr(c,o);for(let f=0;f<this.path.length;f++){const h=this.path[f];!l&&h.options.layoutScroll&&h.scroll&&h!==h.root&&rl(c,{x:-h.scroll.offset.x,y:-h.scroll.offset.y}),bo(h.latestValues)&&rl(c,h.latestValues)}return bo(this.latestValues)&&rl(c,this.latestValues),c}removeTransform(o){const l=jt();pr(l,o);for(let c=0;c<this.path.length;c++){const f=this.path[c];if(!f.instance||!bo(f.latestValues))continue;LS(f.latestValues)&&f.updateSnapshot();const h=jt(),p=f.measurePageBox();pr(h,p),IN(l,f.latestValues,f.snapshot?f.snapshot.layoutBox:void 0,h)}return bo(this.latestValues)&&IN(l,this.latestValues),l}setTargetDelta(o){this.targetDelta=o,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(o){this.options={...this.options,...o,crossfade:o.crossfade!==void 0?o.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==fn.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(o=!1){const l=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=l.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=l.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=l.isSharedProjectionDirty);const c=!!this.resumingFrom||this!==l;if(!(o||c&&this.isSharedProjectionDirty||this.isProjectionDirty||this.parent?.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:h,layoutId:p}=this.options;if(!(!this.layout||!(h||p))){if(this.resolvedRelativeTargetAt=fn.timestamp,!this.targetDelta&&!this.relativeTarget){const g=this.getClosestProjectingParent();g&&g.layout&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=jt(),this.relativeTargetOrigin=jt(),sc(this.relativeTargetOrigin,this.layout.layoutBox,g.layout.layoutBox),pr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=jt(),this.targetWithTransforms=jt()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),mG(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):pr(this.target,this.layout.layoutBox),O5(this.target,this.targetDelta)):pr(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const g=this.getClosestProjectingParent();g&&!!g.resumingFrom==!!this.resumingFrom&&!g.options.layoutScroll&&g.target&&this.animationProgress!==1?(this.relativeParent=g,this.forceRelativeParentToResolveTarget(),this.relativeTarget=jt(),this.relativeTargetOrigin=jt(),sc(this.relativeTargetOrigin,this.target,g.target),pr(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||LS(this.parent.latestValues)||D5(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){const o=this.getLead(),l=!!this.resumingFrom||this!==o;let c=!0;if((this.isProjectionDirty||this.parent?.isProjectionDirty)&&(c=!1),l&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(c=!1),this.resolvedRelativeTargetAt===fn.timestamp&&(c=!1),c)return;const{layout:f,layoutId:h}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(f||h))return;pr(this.layoutCorrected,this.layout.layoutBox);const p=this.treeScale.x,g=this.treeScale.y;A7(this.layoutCorrected,this.treeScale,this.path,l),o.layout&&!o.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(o.target=o.layout.layoutBox,o.targetWithTransforms=jt());const{target:y}=o;if(!y){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(LN(this.prevProjectionDelta.x,this.projectionDelta.x),LN(this.prevProjectionDelta.y,this.projectionDelta.y)),ic(this.projectionDelta,this.layoutCorrected,y,this.latestValues),(this.treeScale.x!==p||this.treeScale.y!==g||!FN(this.projectionDelta.x,this.prevProjectionDelta.x)||!FN(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",y))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(o=!0){if(this.options.visualElement?.scheduleRender(),o){const l=this.getStack();l&&l.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=il(),this.projectionDelta=il(),this.projectionDeltaWithTransform=il()}setAnimationOrigin(o,l=!1){const c=this.snapshot,f=c?c.latestValues:{},h={...this.latestValues},p=il();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!l;const g=jt(),y=c?c.source:void 0,b=this.layout?this.layout.source:void 0,S=y!==b,x=this.getStack(),C=!x||x.members.length<=1,T=!!(S&&!C&&this.options.crossfade===!0&&!this.path.some(oK));this.animationProgress=0;let k;this.mixTargetDelta=A=>{const M=A/1e3;KN(p.x,o.x,M),KN(p.y,o.y,M),this.setTargetDelta(p),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(sc(g,this.layout.layoutBox,this.relativeParent.layout.layoutBox),sK(this.relativeTarget,this.relativeTargetOrigin,g,M),k&&UG(this.relativeTarget,k)&&(this.isProjectionDirty=!1),k||(k=jt()),pr(k,this.relativeTarget)),S&&(this.animationValues=h,IG(h,f,this.latestValues,M,T,C)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=M},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(o){this.notifyListeners("animationStart"),this.currentAnimation?.stop(),this.resumingFrom?.currentAnimation?.stop(),this.pendingAnimation&&(Vs(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=vt.update(()=>{oh.hasAnimatedSinceResize=!0,this.motionValue||(this.motionValue=hl(0)),this.currentAnimation=OG(this.motionValue,[0,1e3],{...o,velocity:0,isSync:!0,onUpdate:l=>{this.mixTargetDelta(l),o.onUpdate&&o.onUpdate(l)},onStop:()=>{},onComplete:()=>{o.onComplete&&o.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const o=this.getStack();o&&o.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(KG),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const o=this.getLead();let{targetWithTransforms:l,target:c,layout:f,latestValues:h}=o;if(!(!l||!c||!f)){if(this!==o&&this.layout&&f&&nB(this.options.animationType,this.layout.layoutBox,f.layoutBox)){c=this.target||jt();const p=kn(this.layout.layoutBox.x);c.x.min=o.target.x.min,c.x.max=c.x.min+p;const g=kn(this.layout.layoutBox.y);c.y.min=o.target.y.min,c.y.max=c.y.min+g}pr(l,c),rl(l,h),ic(this.projectionDeltaWithTransform,this.layoutCorrected,l,h)}}registerSharedNode(o,l){this.sharedNodes.has(o)||this.sharedNodes.set(o,new $G),this.sharedNodes.get(o).add(l);const f=l.options.initialPromotionConfig;l.promote({transition:f?f.transition:void 0,preserveFollowOpacity:f&&f.shouldPreserveFollowOpacity?f.shouldPreserveFollowOpacity(l):void 0})}isLead(){const o=this.getStack();return o?o.lead===this:!0}getLead(){const{layoutId:o}=this.options;return o?this.getStack()?.lead||this:this}getPrevLead(){const{layoutId:o}=this.options;return o?this.getStack()?.prevLead:void 0}getStack(){const{layoutId:o}=this.options;if(o)return this.root.sharedNodes.get(o)}promote({needsReset:o,transition:l,preserveFollowOpacity:c}={}){const f=this.getStack();f&&f.promote(this,c),o&&(this.projectionDelta=void 0,this.needsReset=!0),l&&this.setOptions({transition:l})}relegate(){const o=this.getStack();return o?o.relegate(this):!1}resetSkewAndRotation(){const{visualElement:o}=this.options;if(!o)return;let l=!1;const{latestValues:c}=o;if((c.z||c.rotate||c.rotateX||c.rotateY||c.rotateZ||c.skewX||c.skewY)&&(l=!0),!l)return;const f={};c.z&&a0("z",o,f,this.animationValues);for(let h=0;h<o0.length;h++)a0(`rotate${o0[h]}`,o,f,this.animationValues),a0(`skew${o0[h]}`,o,f,this.animationValues);o.render();for(const h in f)o.setStaticValue(h,f[h]),this.animationValues&&(this.animationValues[h]=f[h]);o.scheduleRender()}applyProjectionStyles(o,l){if(!this.instance||this.isSVG)return;if(!this.isVisible){o.visibility="hidden";return}const c=this.getTransformTemplate();if(this.needsReset){this.needsReset=!1,o.visibility="",o.opacity="",o.pointerEvents=sh(l?.pointerEvents)||"",o.transform=c?c(this.latestValues,""):"none";return}const f=this.getLead();if(!this.projectionDelta||!this.layout||!f.target){this.options.layoutId&&(o.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,o.pointerEvents=sh(l?.pointerEvents)||""),this.hasProjected&&!bo(this.latestValues)&&(o.transform=c?c({},""):"none",this.hasProjected=!1);return}o.visibility="";const h=f.animationValues||f.latestValues;this.applyTransformsToTarget();let p=GG(this.projectionDeltaWithTransform,this.treeScale,h);c&&(p=c(h,p)),o.transform=p;const{x:g,y}=this.projectionDelta;o.transformOrigin=`${g.origin*100}% ${y.origin*100}% 0`,f.animationValues?o.opacity=f===this?h.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:h.opacityExit:o.opacity=f===this?h.opacity!==void 0?h.opacity:"":h.opacityExit!==void 0?h.opacityExit:0;for(const b in Cc){if(h[b]===void 0)continue;const{correct:S,applyTo:x,isCSSVariable:C}=Cc[b],T=p==="none"?h[b]:S(h[b],f);if(x){const k=x.length;for(let A=0;A<k;A++)o[x[A]]=T}else C?this.options.visualElement.renderState.vars[b]=T:o[b]=T}this.options.layoutId&&(o.pointerEvents=f===this?sh(l?.pointerEvents)||"":"none")}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(o=>o.currentAnimation?.stop()),this.root.nodes.forEach(UN),this.root.sharedNodes.clear()}}}function WG(e){e.updateLayout()}function XG(e){const t=e.resumeFrom?.snapshot||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:n,measuredBox:r}=e.layout,{animationType:i}=e.options,s=t.source!==e.layout.source;i==="size"?gr(h=>{const p=s?t.measuredBox[h]:t.layoutBox[h],g=kn(p);p.min=n[h].min,p.max=p.min+g}):nB(i,t.layoutBox,n)&&gr(h=>{const p=s?t.measuredBox[h]:t.layoutBox[h],g=kn(n[h]);p.max=p.min+g,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[h].max=e.relativeTarget[h].min+g)});const o=il();ic(o,n,t.layoutBox);const l=il();s?ic(l,e.applyTransform(r,!0),t.measuredBox):ic(l,n,t.layoutBox);const c=!Q5(o);let f=!1;if(!e.resumeFrom){const h=e.getClosestProjectingParent();if(h&&!h.resumeFrom){const{snapshot:p,layout:g}=h;if(p&&g){const y=jt();sc(y,t.layoutBox,p.layoutBox);const b=jt();sc(b,n,g.layoutBox),J5(y,b)||(f=!0),h.options.layoutRoot&&(e.relativeTarget=b,e.relativeTargetOrigin=y,e.relativeParent=h)}}}e.notifyListeners("didUpdate",{layout:n,snapshot:t,delta:l,layoutDelta:o,hasLayoutChanged:c,hasRelativeLayoutChanged:f})}else if(e.isLead()){const{onExitComplete:n}=e.options;n&&n()}e.options.transition=void 0}function ZG(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function QG(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function JG(e){e.clearSnapshot()}function UN(e){e.clearMeasurements()}function $N(e){e.isLayoutDirty=!1}function eK(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function GN(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function tK(e){e.resolveTargetDelta()}function nK(e){e.calcProjection()}function rK(e){e.resetSkewAndRotation()}function iK(e){e.removeLeadSnapshot()}function KN(e,t,n){e.translate=Ct(t.translate,0,n),e.scale=Ct(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function YN(e,t,n,r){e.min=Ct(t.min,n.min,r),e.max=Ct(t.max,n.max,r)}function sK(e,t,n,r){YN(e.x,t.x,n.x,r),YN(e.y,t.y,n.y,r)}function oK(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const aK={duration:.45,ease:[.4,0,.1,1]},WN=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),XN=WN("applewebkit/")&&!WN("chrome/")?Math.round:Sr;function ZN(e){e.min=XN(e.min),e.max=XN(e.max)}function lK(e){ZN(e.x),ZN(e.y)}function nB(e,t,n){return e==="position"||e==="preserve-aspect"&&!pG(HN(t),HN(n),.2)}function uK(e){return e!==e.root&&e.scroll?.wasRoot}const cK=tB({attachResizeListener:(e,t)=>kc(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),l0={current:void 0},rB=tB({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!l0.current){const e=new cK({});e.mount(window),e.setOptions({layoutScroll:!0}),l0.current=e}return l0.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),fK={pan:{Feature:NG},drag:{Feature:MG,ProjectionNode:rB,MeasureLayout:W5}};function QN(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const i="onHover"+n,s=r[i];s&&vt.postRender(()=>s(t,Jc(t)))}class dK extends Gs{mount(){const{current:t}=this.node;t&&(this.unmount=D9(t,(n,r)=>(QN(this.node,r,"Start"),i=>QN(this.node,i,"End"))))}unmount(){}}class hK extends Gs{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=Xc(kc(this.node.current,"focus",()=>this.onFocus()),kc(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function JN(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const i="onTap"+(n==="End"?"":n),s=r[i];s&&vt.postRender(()=>s(t,Jc(t)))}class pK extends Gs{mount(){const{current:t}=this.node;t&&(this.unmount=P9(t,(n,r)=>(JN(this.node,r,"Start"),(i,{success:s})=>JN(this.node,i,s?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const HS=new WeakMap,u0=new WeakMap,mK=e=>{const t=HS.get(e.target);t&&t(e)},gK=e=>{e.forEach(mK)};function yK({root:e,...t}){const n=e||document;u0.has(n)||u0.set(n,{});const r=u0.get(n),i=JSON.stringify(t);return r[i]||(r[i]=new IntersectionObserver(gK,{root:e,...t})),r[i]}function vK(e,t,n){const r=yK(t);return HS.set(e,n),r.observe(e),()=>{HS.delete(e),r.unobserve(e)}}const bK={some:0,all:1};class xK extends Gs{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:i="some",once:s}=t,o={root:n?n.current:void 0,rootMargin:r,threshold:typeof i=="number"?i:bK[i]},l=c=>{const{isIntersecting:f}=c;if(this.isInView===f||(this.isInView=f,s&&!f&&this.hasEnteredView))return;f&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",f);const{onViewportEnter:h,onViewportLeave:p}=this.node.getProps(),g=f?h:p;g&&g(c)};return vK(this.node.current,o,l)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(wK(t,n))&&this.startObserver()}unmount(){}}function wK({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const SK={inView:{Feature:xK},tap:{Feature:pK},focus:{Feature:hK},hover:{Feature:dK}},EK={layout:{ProjectionNode:rB,MeasureLayout:W5}},CK={...lG,...SK,...fK,...EK},Cn=C7(CK,B7);var c0={exports:{}},f0={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var e_;function kK(){if(e_)return f0;e_=1;var e=Wc();function t(p,g){return p===g&&(p!==0||1/p===1/g)||p!==p&&g!==g}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,i=e.useEffect,s=e.useLayoutEffect,o=e.useDebugValue;function l(p,g){var y=g(),b=r({inst:{value:y,getSnapshot:g}}),S=b[0].inst,x=b[1];return s(function(){S.value=y,S.getSnapshot=g,c(S)&&x({inst:S})},[p,y,g]),i(function(){return c(S)&&x({inst:S}),p(function(){c(S)&&x({inst:S})})},[p]),o(y),y}function c(p){var g=p.getSnapshot;p=p.value;try{var y=g();return!n(p,y)}catch{return!0}}function f(p,g){return g()}var h=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?f:l;return f0.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:h,f0}var t_;function iB(){return t_||(t_=1,c0.exports=kK()),c0.exports}var sB=iB();function cn(e){this.content=e}cn.prototype={constructor:cn,find:function(e){for(var t=0;t<this.content.length;t+=2)if(this.content[t]===e)return t;return-1},get:function(e){var t=this.find(e);return t==-1?void 0:this.content[t+1]},update:function(e,t,n){var r=n&&n!=e?this.remove(n):this,i=r.find(e),s=r.content.slice();return i==-1?s.push(n||e,t):(s[i+1]=t,n&&(s[i]=n)),new cn(s)},remove:function(e){var t=this.find(e);if(t==-1)return this;var n=this.content.slice();return n.splice(t,2),new cn(n)},addToStart:function(e,t){return new cn([e,t].concat(this.remove(e).content))},addToEnd:function(e,t){var n=this.remove(e).content.slice();return n.push(e,t),new cn(n)},addBefore:function(e,t,n){var r=this.remove(t),i=r.content.slice(),s=r.find(e);return i.splice(s==-1?i.length:s,0,t,n),new cn(i)},forEach:function(e){for(var t=0;t<this.content.length;t+=2)e(this.content[t],this.content[t+1])},prepend:function(e){return e=cn.from(e),e.size?new cn(e.content.concat(this.subtract(e).content)):this},append:function(e){return e=cn.from(e),e.size?new cn(this.subtract(e).content.concat(e.content)):this},subtract:function(e){var t=this;e=cn.from(e);for(var n=0;n<e.content.length;n+=2)t=t.remove(e.content[n]);return t},toObject:function(){var e={};return this.forEach(function(t,n){e[t]=n}),e},get size(){return this.content.length>>1}};cn.from=function(e){if(e instanceof cn)return e;var t=[];if(e)for(var n in e)t.push(n,e[n]);return new cn(t)};function oB(e,t,n){for(let r=0;;r++){if(r==e.childCount||r==t.childCount)return e.childCount==t.childCount?null:n;let i=e.child(r),s=t.child(r);if(i==s){n+=i.nodeSize;continue}if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(let o=0;i.text[o]==s.text[o];o++)n++;return n}if(i.content.size||s.content.size){let o=oB(i.content,s.content,n+1);if(o!=null)return o}n+=i.nodeSize}}function aB(e,t,n,r){for(let i=e.childCount,s=t.childCount;;){if(i==0||s==0)return i==s?null:{a:n,b:r};let o=e.child(--i),l=t.child(--s),c=o.nodeSize;if(o==l){n-=c,r-=c;continue}if(!o.sameMarkup(l))return{a:n,b:r};if(o.isText&&o.text!=l.text){let f=0,h=Math.min(o.text.length,l.text.length);for(;f<h&&o.text[o.text.length-f-1]==l.text[l.text.length-f-1];)f++,n--,r--;return{a:n,b:r}}if(o.content.size||l.content.size){let f=aB(o.content,l.content,n-1,r-1);if(f)return f}n-=c,r-=c}}class pe{constructor(t,n){if(this.content=t,this.size=n||0,n==null)for(let r=0;r<t.length;r++)this.size+=t[r].nodeSize}nodesBetween(t,n,r,i=0,s){for(let o=0,l=0;l<n;o++){let c=this.content[o],f=l+c.nodeSize;if(f>t&&r(c,i+l,s||null,o)!==!1&&c.content.size){let h=l+1;c.nodesBetween(Math.max(0,t-h),Math.min(c.content.size,n-h),r,i+h)}l=f}}descendants(t){this.nodesBetween(0,this.size,t)}textBetween(t,n,r,i){let s="",o=!0;return this.nodesBetween(t,n,(l,c)=>{let f=l.isText?l.text.slice(Math.max(t,c)-c,n-c):l.isLeaf?i?typeof i=="function"?i(l):i:l.type.spec.leafText?l.type.spec.leafText(l):"":"";l.isBlock&&(l.isLeaf&&f||l.isTextblock)&&r&&(o?o=!1:s+=r),s+=f},0),s}append(t){if(!t.size)return this;if(!this.size)return t;let n=this.lastChild,r=t.firstChild,i=this.content.slice(),s=0;for(n.isText&&n.sameMarkup(r)&&(i[i.length-1]=n.withText(n.text+r.text),s=1);s<t.content.length;s++)i.push(t.content[s]);return new pe(i,this.size+t.size)}cut(t,n=this.size){if(t==0&&n==this.size)return this;let r=[],i=0;if(n>t)for(let s=0,o=0;o<n;s++){let l=this.content[s],c=o+l.nodeSize;c>t&&((o<t||c>n)&&(l.isText?l=l.cut(Math.max(0,t-o),Math.min(l.text.length,n-o)):l=l.cut(Math.max(0,t-o-1),Math.min(l.content.size,n-o-1))),r.push(l),i+=l.nodeSize),o=c}return new pe(r,i)}cutByIndex(t,n){return t==n?pe.empty:t==0&&n==this.content.length?this:new pe(this.content.slice(t,n))}replaceChild(t,n){let r=this.content[t];if(r==n)return this;let i=this.content.slice(),s=this.size+n.nodeSize-r.nodeSize;return i[t]=n,new pe(i,s)}addToStart(t){return new pe([t].concat(this.content),this.size+t.nodeSize)}addToEnd(t){return new pe(this.content.concat(t),this.size+t.nodeSize)}eq(t){if(this.content.length!=t.content.length)return!1;for(let n=0;n<this.content.length;n++)if(!this.content[n].eq(t.content[n]))return!1;return!0}get firstChild(){return this.content.length?this.content[0]:null}get lastChild(){return this.content.length?this.content[this.content.length-1]:null}get childCount(){return this.content.length}child(t){let n=this.content[t];if(!n)throw new RangeError("Index "+t+" out of range for "+this);return n}maybeChild(t){return this.content[t]||null}forEach(t){for(let n=0,r=0;n<this.content.length;n++){let i=this.content[n];t(i,r,n),r+=i.nodeSize}}findDiffStart(t,n=0){return oB(this,t,n)}findDiffEnd(t,n=this.size,r=t.size){return aB(this,t,n,r)}findIndex(t){if(t==0)return Pd(0,t);if(t==this.size)return Pd(this.content.length,t);if(t>this.size||t<0)throw new RangeError(`Position ${t} outside of fragment (${this})`);for(let n=0,r=0;;n++){let i=this.child(n),s=r+i.nodeSize;if(s>=t)return s==t?Pd(n+1,s):Pd(n,r);r=s}}toString(){return"<"+this.toStringInner()+">"}toStringInner(){return this.content.join(", ")}toJSON(){return this.content.length?this.content.map(t=>t.toJSON()):null}static fromJSON(t,n){if(!n)return pe.empty;if(!Array.isArray(n))throw new RangeError("Invalid input for Fragment.fromJSON");return new pe(n.map(t.nodeFromJSON))}static fromArray(t){if(!t.length)return pe.empty;let n,r=0;for(let i=0;i<t.length;i++){let s=t[i];r+=s.nodeSize,i&&s.isText&&t[i-1].sameMarkup(s)?(n||(n=t.slice(0,i)),n[n.length-1]=s.withText(n[n.length-1].text+s.text)):n&&n.push(s)}return new pe(n||t,r)}static from(t){if(!t)return pe.empty;if(t instanceof pe)return t;if(Array.isArray(t))return this.fromArray(t);if(t.attrs)return new pe([t],t.nodeSize);throw new RangeError("Can not convert "+t+" to a Fragment"+(t.nodesBetween?" (looks like multiple versions of prosemirror-model were loaded)":""))}}pe.empty=new pe([],0);const d0={index:0,offset:0};function Pd(e,t){return d0.index=e,d0.offset=t,d0}function Ah(e,t){if(e===t)return!0;if(!(e&&typeof e=="object")||!(t&&typeof t=="object"))return!1;let n=Array.isArray(e);if(Array.isArray(t)!=n)return!1;if(n){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!Ah(e[r],t[r]))return!1}else{for(let r in e)if(!(r in t)||!Ah(e[r],t[r]))return!1;for(let r in t)if(!(r in e))return!1}return!0}let ct=class FS{constructor(t,n){this.type=t,this.attrs=n}addToSet(t){let n,r=!1;for(let i=0;i<t.length;i++){let s=t[i];if(this.eq(s))return t;if(this.type.excludes(s.type))n||(n=t.slice(0,i));else{if(s.type.excludes(this.type))return t;!r&&s.type.rank>this.type.rank&&(n||(n=t.slice(0,i)),n.push(this),r=!0),n&&n.push(s)}}return n||(n=t.slice()),r||n.push(this),n}removeFromSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return t.slice(0,n).concat(t.slice(n+1));return t}isInSet(t){for(let n=0;n<t.length;n++)if(this.eq(t[n]))return!0;return!1}eq(t){return this==t||this.type==t.type&&Ah(this.attrs,t.attrs)}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Mark.fromJSON");let r=t.marks[n.type];if(!r)throw new RangeError(`There is no mark type ${n.type} in this schema`);let i=r.create(n.attrs);return r.checkAttrs(i.attrs),i}static sameSet(t,n){if(t==n)return!0;if(t.length!=n.length)return!1;for(let r=0;r<t.length;r++)if(!t[r].eq(n[r]))return!1;return!0}static setFrom(t){if(!t||Array.isArray(t)&&t.length==0)return FS.none;if(t instanceof FS)return[t];let n=t.slice();return n.sort((r,i)=>r.type.rank-i.type.rank),n}};ct.none=[];class Mh extends Error{}class ve{constructor(t,n,r){this.content=t,this.openStart=n,this.openEnd=r}get size(){return this.content.size-this.openStart-this.openEnd}insertAt(t,n){let r=uB(this.content,t+this.openStart,n);return r&&new ve(r,this.openStart,this.openEnd)}removeBetween(t,n){return new ve(lB(this.content,t+this.openStart,n+this.openStart),this.openStart,this.openEnd)}eq(t){return this.content.eq(t.content)&&this.openStart==t.openStart&&this.openEnd==t.openEnd}toString(){return this.content+"("+this.openStart+","+this.openEnd+")"}toJSON(){if(!this.content.size)return null;let t={content:this.content.toJSON()};return this.openStart>0&&(t.openStart=this.openStart),this.openEnd>0&&(t.openEnd=this.openEnd),t}static fromJSON(t,n){if(!n)return ve.empty;let r=n.openStart||0,i=n.openEnd||0;if(typeof r!="number"||typeof i!="number")throw new RangeError("Invalid input for Slice.fromJSON");return new ve(pe.fromJSON(t,n.content),r,i)}static maxOpen(t,n=!0){let r=0,i=0;for(let s=t.firstChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.firstChild)r++;for(let s=t.lastChild;s&&!s.isLeaf&&(n||!s.type.spec.isolating);s=s.lastChild)i++;return new ve(t,r,i)}}ve.empty=new ve(pe.empty,0,0);function lB(e,t,n){let{index:r,offset:i}=e.findIndex(t),s=e.maybeChild(r),{index:o,offset:l}=e.findIndex(n);if(i==t||s.isText){if(l!=n&&!e.child(o).isText)throw new RangeError("Removing non-flat range");return e.cut(0,t).append(e.cut(n))}if(r!=o)throw new RangeError("Removing non-flat range");return e.replaceChild(r,s.copy(lB(s.content,t-i-1,n-i-1)))}function uB(e,t,n,r){let{index:i,offset:s}=e.findIndex(t),o=e.maybeChild(i);if(s==t||o.isText)return r&&!r.canReplace(i,i,n)?null:e.cut(0,t).append(n).append(e.cut(t));let l=uB(o.content,t-s-1,n,o);return l&&e.replaceChild(i,o.copy(l))}function TK(e,t,n){if(n.openStart>e.depth)throw new Mh("Inserted content deeper than insertion position");if(e.depth-n.openStart!=t.depth-n.openEnd)throw new Mh("Inconsistent open depths");return cB(e,t,n,0)}function cB(e,t,n,r){let i=e.index(r),s=e.node(r);if(i==t.index(r)&&r<e.depth-n.openStart){let o=cB(e,t,n,r+1);return s.copy(s.content.replaceChild(i,o))}else if(n.content.size)if(!n.openStart&&!n.openEnd&&e.depth==r&&t.depth==r){let o=e.parent,l=o.content;return jo(o,l.cut(0,e.parentOffset).append(n.content).append(l.cut(t.parentOffset)))}else{let{start:o,end:l}=AK(n,e);return jo(s,dB(e,o,l,t,r))}else return jo(s,Nh(e,t,r))}function fB(e,t){if(!t.type.compatibleContent(e.type))throw new Mh("Cannot join "+t.type.name+" onto "+e.type.name)}function US(e,t,n){let r=e.node(n);return fB(r,t.node(n)),r}function Oo(e,t){let n=t.length-1;n>=0&&e.isText&&e.sameMarkup(t[n])?t[n]=e.withText(t[n].text+e.text):t.push(e)}function oc(e,t,n,r){let i=(t||e).node(n),s=0,o=t?t.index(n):i.childCount;e&&(s=e.index(n),e.depth>n?s++:e.textOffset&&(Oo(e.nodeAfter,r),s++));for(let l=s;l<o;l++)Oo(i.child(l),r);t&&t.depth==n&&t.textOffset&&Oo(t.nodeBefore,r)}function jo(e,t){return e.type.checkContent(t),e.copy(t)}function dB(e,t,n,r,i){let s=e.depth>i&&US(e,t,i+1),o=r.depth>i&&US(n,r,i+1),l=[];return oc(null,e,i,l),s&&o&&t.index(i)==n.index(i)?(fB(s,o),Oo(jo(s,dB(e,t,n,r,i+1)),l)):(s&&Oo(jo(s,Nh(e,t,i+1)),l),oc(t,n,i,l),o&&Oo(jo(o,Nh(n,r,i+1)),l)),oc(r,null,i,l),new pe(l)}function Nh(e,t,n){let r=[];if(oc(null,e,n,r),e.depth>n){let i=US(e,t,n+1);Oo(jo(i,Nh(e,t,n+1)),r)}return oc(t,null,n,r),new pe(r)}function AK(e,t){let n=t.depth-e.openStart,i=t.node(n).copy(e.content);for(let s=n-1;s>=0;s--)i=t.node(s).copy(pe.from(i));return{start:i.resolveNoCache(e.openStart+n),end:i.resolveNoCache(i.content.size-e.openEnd-n)}}class Tc{constructor(t,n,r){this.pos=t,this.path=n,this.parentOffset=r,this.depth=n.length/3-1}resolveDepth(t){return t==null?this.depth:t<0?this.depth+t:t}get parent(){return this.node(this.depth)}get doc(){return this.node(0)}node(t){return this.path[this.resolveDepth(t)*3]}index(t){return this.path[this.resolveDepth(t)*3+1]}indexAfter(t){return t=this.resolveDepth(t),this.index(t)+(t==this.depth&&!this.textOffset?0:1)}start(t){return t=this.resolveDepth(t),t==0?0:this.path[t*3-1]+1}end(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size}before(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]}after(t){if(t=this.resolveDepth(t),!t)throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[t*3-1]+this.path[t*3].nodeSize}get textOffset(){return this.pos-this.path[this.path.length-1]}get nodeAfter(){let t=this.parent,n=this.index(this.depth);if(n==t.childCount)return null;let r=this.pos-this.path[this.path.length-1],i=t.child(n);return r?t.child(n).cut(r):i}get nodeBefore(){let t=this.index(this.depth),n=this.pos-this.path[this.path.length-1];return n?this.parent.child(t).cut(0,n):t==0?null:this.parent.child(t-1)}posAtIndex(t,n){n=this.resolveDepth(n);let r=this.path[n*3],i=n==0?0:this.path[n*3-1]+1;for(let s=0;s<t;s++)i+=r.child(s).nodeSize;return i}marks(){let t=this.parent,n=this.index();if(t.content.size==0)return ct.none;if(this.textOffset)return t.child(n).marks;let r=t.maybeChild(n-1),i=t.maybeChild(n);if(!r){let l=r;r=i,i=l}let s=r.marks;for(var o=0;o<s.length;o++)s[o].type.spec.inclusive===!1&&(!i||!s[o].isInSet(i.marks))&&(s=s[o--].removeFromSet(s));return s}marksAcross(t){let n=this.parent.maybeChild(this.index());if(!n||!n.isInline)return null;let r=n.marks,i=t.parent.maybeChild(t.index());for(var s=0;s<r.length;s++)r[s].type.spec.inclusive===!1&&(!i||!r[s].isInSet(i.marks))&&(r=r[s--].removeFromSet(r));return r}sharedDepth(t){for(let n=this.depth;n>0;n--)if(this.start(n)<=t&&this.end(n)>=t)return n;return 0}blockRange(t=this,n){if(t.pos<this.pos)return t.blockRange(this);for(let r=this.depth-(this.parent.inlineContent||this.pos==t.pos?1:0);r>=0;r--)if(t.pos<=this.end(r)&&(!n||n(this.node(r))))return new _h(this,t,r);return null}sameParent(t){return this.pos-this.parentOffset==t.pos-t.parentOffset}max(t){return t.pos>this.pos?t:this}min(t){return t.pos<this.pos?t:this}toString(){let t="";for(let n=1;n<=this.depth;n++)t+=(t?"/":"")+this.node(n).type.name+"_"+this.index(n-1);return t+":"+this.parentOffset}static resolve(t,n){if(!(n>=0&&n<=t.content.size))throw new RangeError("Position "+n+" out of range");let r=[],i=0,s=n;for(let o=t;;){let{index:l,offset:c}=o.content.findIndex(s),f=s-c;if(r.push(o,l,i+c),!f||(o=o.child(l),o.isText))break;s=f-1,i+=c+1}return new Tc(n,r,s)}static resolveCached(t,n){let r=n_.get(t);if(r)for(let s=0;s<r.elts.length;s++){let o=r.elts[s];if(o.pos==n)return o}else n_.set(t,r=new MK);let i=r.elts[r.i]=Tc.resolve(t,n);return r.i=(r.i+1)%NK,i}}class MK{constructor(){this.elts=[],this.i=0}}const NK=12,n_=new WeakMap;class _h{constructor(t,n,r){this.$from=t,this.$to=n,this.depth=r}get start(){return this.$from.before(this.depth+1)}get end(){return this.$to.after(this.depth+1)}get parent(){return this.$from.node(this.depth)}get startIndex(){return this.$from.index(this.depth)}get endIndex(){return this.$to.indexAfter(this.depth)}}const _K=Object.create(null);let js=class $S{constructor(t,n,r,i=ct.none){this.type=t,this.attrs=n,this.marks=i,this.content=r||pe.empty}get children(){return this.content.content}get nodeSize(){return this.isLeaf?1:2+this.content.size}get childCount(){return this.content.childCount}child(t){return this.content.child(t)}maybeChild(t){return this.content.maybeChild(t)}forEach(t){this.content.forEach(t)}nodesBetween(t,n,r,i=0){this.content.nodesBetween(t,n,r,i,this)}descendants(t){this.nodesBetween(0,this.content.size,t)}get textContent(){return this.isLeaf&&this.type.spec.leafText?this.type.spec.leafText(this):this.textBetween(0,this.content.size,"")}textBetween(t,n,r,i){return this.content.textBetween(t,n,r,i)}get firstChild(){return this.content.firstChild}get lastChild(){return this.content.lastChild}eq(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)}sameMarkup(t){return this.hasMarkup(t.type,t.attrs,t.marks)}hasMarkup(t,n,r){return this.type==t&&Ah(this.attrs,n||t.defaultAttrs||_K)&&ct.sameSet(this.marks,r||ct.none)}copy(t=null){return t==this.content?this:new $S(this.type,this.attrs,t,this.marks)}mark(t){return t==this.marks?this:new $S(this.type,this.attrs,this.content,t)}cut(t,n=this.content.size){return t==0&&n==this.content.size?this:this.copy(this.content.cut(t,n))}slice(t,n=this.content.size,r=!1){if(t==n)return ve.empty;let i=this.resolve(t),s=this.resolve(n),o=r?0:i.sharedDepth(n),l=i.start(o),f=i.node(o).content.cut(i.pos-l,s.pos-l);return new ve(f,i.depth-o,s.depth-o)}replace(t,n,r){return TK(this.resolve(t),this.resolve(n),r)}nodeAt(t){for(let n=this;;){let{index:r,offset:i}=n.content.findIndex(t);if(n=n.maybeChild(r),!n)return null;if(i==t||n.isText)return n;t-=i+1}}childAfter(t){let{index:n,offset:r}=this.content.findIndex(t);return{node:this.content.maybeChild(n),index:n,offset:r}}childBefore(t){if(t==0)return{node:null,index:0,offset:0};let{index:n,offset:r}=this.content.findIndex(t);if(r<t)return{node:this.content.child(n),index:n,offset:r};let i=this.content.child(n-1);return{node:i,index:n-1,offset:r-i.nodeSize}}resolve(t){return Tc.resolveCached(this,t)}resolveNoCache(t){return Tc.resolve(this,t)}rangeHasMark(t,n,r){let i=!1;return n>t&&this.nodesBetween(t,n,s=>(r.isInSet(s.marks)&&(i=!0),!i)),i}get isBlock(){return this.type.isBlock}get isTextblock(){return this.type.isTextblock}get inlineContent(){return this.type.inlineContent}get isInline(){return this.type.isInline}get isText(){return this.type.isText}get isLeaf(){return this.type.isLeaf}get isAtom(){return this.type.isAtom}toString(){if(this.type.spec.toDebugString)return this.type.spec.toDebugString(this);let t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),hB(this.marks,t)}contentMatchAt(t){let n=this.type.contentMatch.matchFragment(this.content,0,t);if(!n)throw new Error("Called contentMatchAt on a node with invalid content");return n}canReplace(t,n,r=pe.empty,i=0,s=r.childCount){let o=this.contentMatchAt(t).matchFragment(r,i,s),l=o&&o.matchFragment(this.content,n);if(!l||!l.validEnd)return!1;for(let c=i;c<s;c++)if(!this.type.allowsMarks(r.child(c).marks))return!1;return!0}canReplaceWith(t,n,r,i){if(i&&!this.type.allowsMarks(i))return!1;let s=this.contentMatchAt(t).matchType(r),o=s&&s.matchFragment(this.content,n);return o?o.validEnd:!1}canAppend(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)}check(){this.type.checkContent(this.content),this.type.checkAttrs(this.attrs);let t=ct.none;for(let n=0;n<this.marks.length;n++){let r=this.marks[n];r.type.checkAttrs(r.attrs),t=r.addToSet(t)}if(!ct.sameSet(t,this.marks))throw new RangeError(`Invalid collection of marks for node ${this.type.name}: ${this.marks.map(n=>n.type.name)}`);this.content.forEach(n=>n.check())}toJSON(){let t={type:this.type.name};for(let n in this.attrs){t.attrs=this.attrs;break}return this.content.size&&(t.content=this.content.toJSON()),this.marks.length&&(t.marks=this.marks.map(n=>n.toJSON())),t}static fromJSON(t,n){if(!n)throw new RangeError("Invalid input for Node.fromJSON");let r;if(n.marks){if(!Array.isArray(n.marks))throw new RangeError("Invalid mark data for Node.fromJSON");r=n.marks.map(t.markFromJSON)}if(n.type=="text"){if(typeof n.text!="string")throw new RangeError("Invalid text node in JSON");return t.text(n.text,r)}let i=pe.fromJSON(t,n.content),s=t.nodeType(n.type).create(n.attrs,i,r);return s.type.checkAttrs(s.attrs),s}};js.prototype.text=void 0;class Rh extends js{constructor(t,n,r,i){if(super(t,n,null,i),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}toString(){return this.type.spec.toDebugString?this.type.spec.toDebugString(this):hB(this.marks,JSON.stringify(this.text))}get textContent(){return this.text}textBetween(t,n){return this.text.slice(t,n)}get nodeSize(){return this.text.length}mark(t){return t==this.marks?this:new Rh(this.type,this.attrs,this.text,t)}withText(t){return t==this.text?this:new Rh(this.type,this.attrs,t,this.marks)}cut(t=0,n=this.text.length){return t==0&&n==this.text.length?this:this.withText(this.text.slice(t,n))}eq(t){return this.sameMarkup(t)&&this.text==t.text}toJSON(){let t=super.toJSON();return t.text=this.text,t}}function hB(e,t){for(let n=e.length-1;n>=0;n--)t=e[n].type.name+"("+t+")";return t}class qo{constructor(t){this.validEnd=t,this.next=[],this.wrapCache=[]}static parse(t,n){let r=new RK(t,n);if(r.next==null)return qo.empty;let i=pB(r);r.next&&r.err("Unexpected trailing text");let s=IK(BK(i));return zK(s,r),s}matchType(t){for(let n=0;n<this.next.length;n++)if(this.next[n].type==t)return this.next[n].next;return null}matchFragment(t,n=0,r=t.childCount){let i=this;for(let s=n;i&&s<r;s++)i=i.matchType(t.child(s).type);return i}get inlineContent(){return this.next.length!=0&&this.next[0].type.isInline}get defaultType(){for(let t=0;t<this.next.length;t++){let{type:n}=this.next[t];if(!(n.isText||n.hasRequiredAttrs()))return n}return null}compatible(t){for(let n=0;n<this.next.length;n++)for(let r=0;r<t.next.length;r++)if(this.next[n].type==t.next[r].type)return!0;return!1}fillBefore(t,n=!1,r=0){let i=[this];function s(o,l){let c=o.matchFragment(t,r);if(c&&(!n||c.validEnd))return pe.from(l.map(f=>f.createAndFill()));for(let f=0;f<o.next.length;f++){let{type:h,next:p}=o.next[f];if(!(h.isText||h.hasRequiredAttrs())&&i.indexOf(p)==-1){i.push(p);let g=s(p,l.concat(h));if(g)return g}}return null}return s(this,[])}findWrapping(t){for(let r=0;r<this.wrapCache.length;r+=2)if(this.wrapCache[r]==t)return this.wrapCache[r+1];let n=this.computeWrapping(t);return this.wrapCache.push(t,n),n}computeWrapping(t){let n=Object.create(null),r=[{match:this,type:null,via:null}];for(;r.length;){let i=r.shift(),s=i.match;if(s.matchType(t)){let o=[];for(let l=i;l.type;l=l.via)o.push(l.type);return o.reverse()}for(let o=0;o<s.next.length;o++){let{type:l,next:c}=s.next[o];!l.isLeaf&&!l.hasRequiredAttrs()&&!(l.name in n)&&(!i.type||c.validEnd)&&(r.push({match:l.contentMatch,type:l,via:i}),n[l.name]=!0)}}return null}get edgeCount(){return this.next.length}edge(t){if(t>=this.next.length)throw new RangeError(`There's no ${t}th edge in this content match`);return this.next[t]}toString(){let t=[];function n(r){t.push(r);for(let i=0;i<r.next.length;i++)t.indexOf(r.next[i].next)==-1&&n(r.next[i].next)}return n(this),t.map((r,i)=>{let s=i+(r.validEnd?"*":" ")+" ";for(let o=0;o<r.next.length;o++)s+=(o?", ":"")+r.next[o].type.name+"->"+t.indexOf(r.next[o].next);return s}).join(`
`)}}qo.empty=new qo(!0);class RK{constructor(t,n){this.string=t,this.nodeTypes=n,this.inline=null,this.pos=0,this.tokens=t.split(/\s*(?=\b|\W|$)/),this.tokens[this.tokens.length-1]==""&&this.tokens.pop(),this.tokens[0]==""&&this.tokens.shift()}get next(){return this.tokens[this.pos]}eat(t){return this.next==t&&(this.pos++||!0)}err(t){throw new SyntaxError(t+" (in content expression '"+this.string+"')")}}function pB(e){let t=[];do t.push(DK(e));while(e.eat("|"));return t.length==1?t[0]:{type:"choice",exprs:t}}function DK(e){let t=[];do t.push(OK(e));while(e.next&&e.next!=")"&&e.next!="|");return t.length==1?t[0]:{type:"seq",exprs:t}}function OK(e){let t=PK(e);for(;;)if(e.eat("+"))t={type:"plus",expr:t};else if(e.eat("*"))t={type:"star",expr:t};else if(e.eat("?"))t={type:"opt",expr:t};else if(e.eat("{"))t=jK(e,t);else break;return t}function r_(e){/\D/.test(e.next)&&e.err("Expected number, got '"+e.next+"'");let t=Number(e.next);return e.pos++,t}function jK(e,t){let n=r_(e),r=n;return e.eat(",")&&(e.next!="}"?r=r_(e):r=-1),e.eat("}")||e.err("Unclosed braced range"),{type:"range",min:n,max:r,expr:t}}function LK(e,t){let n=e.nodeTypes,r=n[t];if(r)return[r];let i=[];for(let s in n){let o=n[s];o.isInGroup(t)&&i.push(o)}return i.length==0&&e.err("No node type or group '"+t+"' found"),i}function PK(e){if(e.eat("(")){let t=pB(e);return e.eat(")")||e.err("Missing closing paren"),t}else if(/\W/.test(e.next))e.err("Unexpected token '"+e.next+"'");else{let t=LK(e,e.next).map(n=>(e.inline==null?e.inline=n.isInline:e.inline!=n.isInline&&e.err("Mixing inline and block content"),{type:"name",value:n}));return e.pos++,t.length==1?t[0]:{type:"choice",exprs:t}}}function BK(e){let t=[[]];return i(s(e,0),n()),t;function n(){return t.push([])-1}function r(o,l,c){let f={term:c,to:l};return t[o].push(f),f}function i(o,l){o.forEach(c=>c.to=l)}function s(o,l){if(o.type=="choice")return o.exprs.reduce((c,f)=>c.concat(s(f,l)),[]);if(o.type=="seq")for(let c=0;;c++){let f=s(o.exprs[c],l);if(c==o.exprs.length-1)return f;i(f,l=n())}else if(o.type=="star"){let c=n();return r(l,c),i(s(o.expr,c),c),[r(c)]}else if(o.type=="plus"){let c=n();return i(s(o.expr,l),c),i(s(o.expr,c),c),[r(c)]}else{if(o.type=="opt")return[r(l)].concat(s(o.expr,l));if(o.type=="range"){let c=l;for(let f=0;f<o.min;f++){let h=n();i(s(o.expr,c),h),c=h}if(o.max==-1)i(s(o.expr,c),c);else for(let f=o.min;f<o.max;f++){let h=n();r(c,h),i(s(o.expr,c),h),c=h}return[r(c)]}else{if(o.type=="name")return[r(l,void 0,o.value)];throw new Error("Unknown expr type")}}}}function mB(e,t){return t-e}function i_(e,t){let n=[];return r(t),n.sort(mB);function r(i){let s=e[i];if(s.length==1&&!s[0].term)return r(s[0].to);n.push(i);for(let o=0;o<s.length;o++){let{term:l,to:c}=s[o];!l&&n.indexOf(c)==-1&&r(c)}}}function IK(e){let t=Object.create(null);return n(i_(e,0));function n(r){let i=[];r.forEach(o=>{e[o].forEach(({term:l,to:c})=>{if(!l)return;let f;for(let h=0;h<i.length;h++)i[h][0]==l&&(f=i[h][1]);i_(e,c).forEach(h=>{f||i.push([l,f=[]]),f.indexOf(h)==-1&&f.push(h)})})});let s=t[r.join(",")]=new qo(r.indexOf(e.length-1)>-1);for(let o=0;o<i.length;o++){let l=i[o][1].sort(mB);s.next.push({type:i[o][0],next:t[l.join(",")]||n(l)})}return s}}function zK(e,t){for(let n=0,r=[e];n<r.length;n++){let i=r[n],s=!i.validEnd,o=[];for(let l=0;l<i.next.length;l++){let{type:c,next:f}=i.next[l];o.push(c.name),s&&!(c.isText||c.hasRequiredAttrs())&&(s=!1),r.indexOf(f)==-1&&r.push(f)}s&&t.err("Only non-generatable nodes ("+o.join(", ")+") in a required position (see https://prosemirror.net/docs/guide/#generatable)")}}function gB(e){let t=Object.create(null);for(let n in e){let r=e[n];if(!r.hasDefault)return null;t[n]=r.default}return t}function yB(e,t){let n=Object.create(null);for(let r in e){let i=t&&t[r];if(i===void 0){let s=e[r];if(s.hasDefault)i=s.default;else throw new RangeError("No value supplied for attribute "+r)}n[r]=i}return n}function vB(e,t,n,r){for(let i in t)if(!(i in e))throw new RangeError(`Unsupported attribute ${i} for ${n} of type ${i}`);for(let i in e){let s=e[i];s.validate&&s.validate(t[i])}}function bB(e,t){let n=Object.create(null);if(t)for(let r in t)n[r]=new VK(e,r,t[r]);return n}let s_=class xB{constructor(t,n,r){this.name=t,this.schema=n,this.spec=r,this.markSet=null,this.groups=r.group?r.group.split(" "):[],this.attrs=bB(t,r.attrs),this.defaultAttrs=gB(this.attrs),this.contentMatch=null,this.inlineContent=null,this.isBlock=!(r.inline||t=="text"),this.isText=t=="text"}get isInline(){return!this.isBlock}get isTextblock(){return this.isBlock&&this.inlineContent}get isLeaf(){return this.contentMatch==qo.empty}get isAtom(){return this.isLeaf||!!this.spec.atom}isInGroup(t){return this.groups.indexOf(t)>-1}get whitespace(){return this.spec.whitespace||(this.spec.code?"pre":"normal")}hasRequiredAttrs(){for(let t in this.attrs)if(this.attrs[t].isRequired)return!0;return!1}compatibleContent(t){return this==t||this.contentMatch.compatible(t.contentMatch)}computeAttrs(t){return!t&&this.defaultAttrs?this.defaultAttrs:yB(this.attrs,t)}create(t=null,n,r){if(this.isText)throw new Error("NodeType.create can't construct text nodes");return new js(this,this.computeAttrs(t),pe.from(n),ct.setFrom(r))}createChecked(t=null,n,r){return n=pe.from(n),this.checkContent(n),new js(this,this.computeAttrs(t),n,ct.setFrom(r))}createAndFill(t=null,n,r){if(t=this.computeAttrs(t),n=pe.from(n),n.size){let o=this.contentMatch.fillBefore(n);if(!o)return null;n=o.append(n)}let i=this.contentMatch.matchFragment(n),s=i&&i.fillBefore(pe.empty,!0);return s?new js(this,t,n.append(s),ct.setFrom(r)):null}validContent(t){let n=this.contentMatch.matchFragment(t);if(!n||!n.validEnd)return!1;for(let r=0;r<t.childCount;r++)if(!this.allowsMarks(t.child(r).marks))return!1;return!0}checkContent(t){if(!this.validContent(t))throw new RangeError(`Invalid content for node ${this.name}: ${t.toString().slice(0,50)}`)}checkAttrs(t){vB(this.attrs,t,"node",this.name)}allowsMarkType(t){return this.markSet==null||this.markSet.indexOf(t)>-1}allowsMarks(t){if(this.markSet==null)return!0;for(let n=0;n<t.length;n++)if(!this.allowsMarkType(t[n].type))return!1;return!0}allowedMarks(t){if(this.markSet==null)return t;let n;for(let r=0;r<t.length;r++)this.allowsMarkType(t[r].type)?n&&n.push(t[r]):n||(n=t.slice(0,r));return n?n.length?n:ct.none:t}static compile(t,n){let r=Object.create(null);t.forEach((s,o)=>r[s]=new xB(s,n,o));let i=n.spec.topNode||"doc";if(!r[i])throw new RangeError("Schema is missing its top node type ('"+i+"')");if(!r.text)throw new RangeError("Every schema needs a 'text' type");for(let s in r.text.attrs)throw new RangeError("The text node type should not have attributes");return r}};function qK(e,t,n){let r=n.split("|");return i=>{let s=i===null?"null":typeof i;if(r.indexOf(s)<0)throw new RangeError(`Expected value of type ${r} for attribute ${t} on type ${e}, got ${s}`)}}class VK{constructor(t,n,r){this.hasDefault=Object.prototype.hasOwnProperty.call(r,"default"),this.default=r.default,this.validate=typeof r.validate=="string"?qK(t,n,r.validate):r.validate}get isRequired(){return!this.hasDefault}}class qp{constructor(t,n,r,i){this.name=t,this.rank=n,this.schema=r,this.spec=i,this.attrs=bB(t,i.attrs),this.excluded=null;let s=gB(this.attrs);this.instance=s?new ct(this,s):null}create(t=null){return!t&&this.instance?this.instance:new ct(this,yB(this.attrs,t))}static compile(t,n){let r=Object.create(null),i=0;return t.forEach((s,o)=>r[s]=new qp(s,i++,n,o)),r}removeFromSet(t){for(var n=0;n<t.length;n++)t[n].type==this&&(t=t.slice(0,n).concat(t.slice(n+1)),n--);return t}isInSet(t){for(let n=0;n<t.length;n++)if(t[n].type==this)return t[n]}checkAttrs(t){vB(this.attrs,t,"mark",this.name)}excludes(t){return this.excluded.indexOf(t)>-1}}class wB{constructor(t){this.linebreakReplacement=null,this.cached=Object.create(null);let n=this.spec={};for(let i in t)n[i]=t[i];n.nodes=cn.from(t.nodes),n.marks=cn.from(t.marks||{}),this.nodes=s_.compile(this.spec.nodes,this),this.marks=qp.compile(this.spec.marks,this);let r=Object.create(null);for(let i in this.nodes){if(i in this.marks)throw new RangeError(i+" can not be both a node and a mark");let s=this.nodes[i],o=s.spec.content||"",l=s.spec.marks;if(s.contentMatch=r[o]||(r[o]=qo.parse(o,this.nodes)),s.inlineContent=s.contentMatch.inlineContent,s.spec.linebreakReplacement){if(this.linebreakReplacement)throw new RangeError("Multiple linebreak nodes defined");if(!s.isInline||!s.isLeaf)throw new RangeError("Linebreak replacement nodes must be inline leaf nodes");this.linebreakReplacement=s}s.markSet=l=="_"?null:l?o_(this,l.split(" ")):l==""||!s.inlineContent?[]:null}for(let i in this.marks){let s=this.marks[i],o=s.spec.excludes;s.excluded=o==null?[s]:o==""?[]:o_(this,o.split(" "))}this.nodeFromJSON=i=>js.fromJSON(this,i),this.markFromJSON=i=>ct.fromJSON(this,i),this.topNodeType=this.nodes[this.spec.topNode||"doc"],this.cached.wrappings=Object.create(null)}node(t,n=null,r,i){if(typeof t=="string")t=this.nodeType(t);else if(t instanceof s_){if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}else throw new RangeError("Invalid node type: "+t);return t.createChecked(n,r,i)}text(t,n){let r=this.nodes.text;return new Rh(r,r.defaultAttrs,t,ct.setFrom(n))}mark(t,n){return typeof t=="string"&&(t=this.marks[t]),t.create(n)}nodeType(t){let n=this.nodes[t];if(!n)throw new RangeError("Unknown node type: "+t);return n}}function o_(e,t){let n=[];for(let r=0;r<t.length;r++){let i=t[r],s=e.marks[i],o=s;if(s)n.push(s);else for(let l in e.marks){let c=e.marks[l];(i=="_"||c.spec.group&&c.spec.group.split(" ").indexOf(i)>-1)&&n.push(o=c)}if(!o)throw new SyntaxError("Unknown mark type: '"+t[r]+"'")}return n}function HK(e){return e.tag!=null}function FK(e){return e.style!=null}class Ls{constructor(t,n){this.schema=t,this.rules=n,this.tags=[],this.styles=[];let r=this.matchedStyles=[];n.forEach(i=>{if(HK(i))this.tags.push(i);else if(FK(i)){let s=/[^=]*/.exec(i.style)[0];r.indexOf(s)<0&&r.push(s),this.styles.push(i)}}),this.normalizeLists=!this.tags.some(i=>{if(!/^(ul|ol)\b/.test(i.tag)||!i.node)return!1;let s=t.nodes[i.node];return s.contentMatch.matchType(s)})}parse(t,n={}){let r=new l_(this,n,!1);return r.addAll(t,ct.none,n.from,n.to),r.finish()}parseSlice(t,n={}){let r=new l_(this,n,!0);return r.addAll(t,ct.none,n.from,n.to),ve.maxOpen(r.finish())}matchTag(t,n,r){for(let i=r?this.tags.indexOf(r)+1:0;i<this.tags.length;i++){let s=this.tags[i];if(GK(t,s.tag)&&(s.namespace===void 0||t.namespaceURI==s.namespace)&&(!s.context||n.matchesContext(s.context))){if(s.getAttrs){let o=s.getAttrs(t);if(o===!1)continue;s.attrs=o||void 0}return s}}}matchStyle(t,n,r,i){for(let s=i?this.styles.indexOf(i)+1:0;s<this.styles.length;s++){let o=this.styles[s],l=o.style;if(!(l.indexOf(t)!=0||o.context&&!r.matchesContext(o.context)||l.length>t.length&&(l.charCodeAt(t.length)!=61||l.slice(t.length+1)!=n))){if(o.getAttrs){let c=o.getAttrs(n);if(c===!1)continue;o.attrs=c||void 0}return o}}}static schemaRules(t){let n=[];function r(i){let s=i.priority==null?50:i.priority,o=0;for(;o<n.length;o++){let l=n[o];if((l.priority==null?50:l.priority)<s)break}n.splice(o,0,i)}for(let i in t.marks){let s=t.marks[i].spec.parseDOM;s&&s.forEach(o=>{r(o=u_(o)),o.mark||o.ignore||o.clearMark||(o.mark=i)})}for(let i in t.nodes){let s=t.nodes[i].spec.parseDOM;s&&s.forEach(o=>{r(o=u_(o)),o.node||o.ignore||o.mark||(o.node=i)})}return n}static fromSchema(t){return t.cached.domParser||(t.cached.domParser=new Ls(t,Ls.schemaRules(t)))}}const SB={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},UK={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},EB={ol:!0,ul:!0},Ac=1,GS=2,ac=4;function a_(e,t,n){return t!=null?(t?Ac:0)|(t==="full"?GS:0):e&&e.whitespace=="pre"?Ac|GS:n&~ac}class Bd{constructor(t,n,r,i,s,o){this.type=t,this.attrs=n,this.marks=r,this.solid=i,this.options=o,this.content=[],this.activeMarks=ct.none,this.match=s||(o&ac?null:t.contentMatch)}findWrapping(t){if(!this.match){if(!this.type)return[];let n=this.type.contentMatch.fillBefore(pe.from(t));if(n)this.match=this.type.contentMatch.matchFragment(n);else{let r=this.type.contentMatch,i;return(i=r.findWrapping(t.type))?(this.match=r,i):null}}return this.match.findWrapping(t.type)}finish(t){if(!(this.options&Ac)){let r=this.content[this.content.length-1],i;if(r&&r.isText&&(i=/[ \t\r\n\u000c]+$/.exec(r.text))){let s=r;r.text.length==i[0].length?this.content.pop():this.content[this.content.length-1]=s.withText(s.text.slice(0,s.text.length-i[0].length))}}let n=pe.from(this.content);return!t&&this.match&&(n=n.append(this.match.fillBefore(pe.empty,!0))),this.type?this.type.create(this.attrs,n,this.marks):n}inlineContext(t){return this.type?this.type.inlineContent:this.content.length?this.content[0].isInline:t.parentNode&&!SB.hasOwnProperty(t.parentNode.nodeName.toLowerCase())}}class l_{constructor(t,n,r){this.parser=t,this.options=n,this.isOpen=r,this.open=0,this.localPreserveWS=!1;let i=n.topNode,s,o=a_(null,n.preserveWhitespace,0)|(r?ac:0);i?s=new Bd(i.type,i.attrs,ct.none,!0,n.topMatch||i.type.contentMatch,o):r?s=new Bd(null,null,ct.none,!0,null,o):s=new Bd(t.schema.topNodeType,null,ct.none,!0,null,o),this.nodes=[s],this.find=n.findPositions,this.needsBlock=!1}get top(){return this.nodes[this.open]}addDOM(t,n){t.nodeType==3?this.addTextNode(t,n):t.nodeType==1&&this.addElement(t,n)}addTextNode(t,n){let r=t.nodeValue,i=this.top,s=i.options&GS?"full":this.localPreserveWS||(i.options&Ac)>0;if(s==="full"||i.inlineContext(t)||/[^ \t\r\n\u000c]/.test(r)){if(s)s!=="full"?r=r.replace(/\r?\n|\r/g," "):r=r.replace(/\r\n?/g,`
`);else if(r=r.replace(/[ \t\r\n\u000c]+/g," "),/^[ \t\r\n\u000c]/.test(r)&&this.open==this.nodes.length-1){let o=i.content[i.content.length-1],l=t.previousSibling;(!o||l&&l.nodeName=="BR"||o.isText&&/[ \t\r\n\u000c]$/.test(o.text))&&(r=r.slice(1))}r&&this.insertNode(this.parser.schema.text(r),n,!/\S/.test(r)),this.findInText(t)}else this.findInside(t)}addElement(t,n,r){let i=this.localPreserveWS,s=this.top;(t.tagName=="PRE"||/pre/.test(t.style&&t.style.whiteSpace))&&(this.localPreserveWS=!0);let o=t.nodeName.toLowerCase(),l;EB.hasOwnProperty(o)&&this.parser.normalizeLists&&$K(t);let c=this.options.ruleFromNode&&this.options.ruleFromNode(t)||(l=this.parser.matchTag(t,this,r));e:if(c?c.ignore:UK.hasOwnProperty(o))this.findInside(t),this.ignoreFallback(t,n);else if(!c||c.skip||c.closeParent){c&&c.closeParent?this.open=Math.max(0,this.open-1):c&&c.skip.nodeType&&(t=c.skip);let f,h=this.needsBlock;if(SB.hasOwnProperty(o))s.content.length&&s.content[0].isInline&&this.open&&(this.open--,s=this.top),f=!0,s.type||(this.needsBlock=!0);else if(!t.firstChild){this.leafFallback(t,n);break e}let p=c&&c.skip?n:this.readStyles(t,n);p&&this.addAll(t,p),f&&this.sync(s),this.needsBlock=h}else{let f=this.readStyles(t,n);f&&this.addElementByRule(t,c,f,c.consuming===!1?l:void 0)}this.localPreserveWS=i}leafFallback(t,n){t.nodeName=="BR"&&this.top.type&&this.top.type.inlineContent&&this.addTextNode(t.ownerDocument.createTextNode(`
`),n)}ignoreFallback(t,n){t.nodeName=="BR"&&(!this.top.type||!this.top.type.inlineContent)&&this.findPlace(this.parser.schema.text("-"),n,!0)}readStyles(t,n){let r=t.style;if(r&&r.length)for(let i=0;i<this.parser.matchedStyles.length;i++){let s=this.parser.matchedStyles[i],o=r.getPropertyValue(s);if(o)for(let l=void 0;;){let c=this.parser.matchStyle(s,o,this,l);if(!c)break;if(c.ignore)return null;if(c.clearMark?n=n.filter(f=>!c.clearMark(f)):n=n.concat(this.parser.schema.marks[c.mark].create(c.attrs)),c.consuming===!1)l=c;else break}}return n}addElementByRule(t,n,r,i){let s,o;if(n.node)if(o=this.parser.schema.nodes[n.node],o.isLeaf)this.insertNode(o.create(n.attrs),r,t.nodeName=="BR")||this.leafFallback(t,r);else{let c=this.enter(o,n.attrs||null,r,n.preserveWhitespace);c&&(s=!0,r=c)}else{let c=this.parser.schema.marks[n.mark];r=r.concat(c.create(n.attrs))}let l=this.top;if(o&&o.isLeaf)this.findInside(t);else if(i)this.addElement(t,r,i);else if(n.getContent)this.findInside(t),n.getContent(t,this.parser.schema).forEach(c=>this.insertNode(c,r,!1));else{let c=t;typeof n.contentElement=="string"?c=t.querySelector(n.contentElement):typeof n.contentElement=="function"?c=n.contentElement(t):n.contentElement&&(c=n.contentElement),this.findAround(t,c,!0),this.addAll(c,r),this.findAround(t,c,!1)}s&&this.sync(l)&&this.open--}addAll(t,n,r,i){let s=r||0;for(let o=r?t.childNodes[r]:t.firstChild,l=i==null?null:t.childNodes[i];o!=l;o=o.nextSibling,++s)this.findAtPoint(t,s),this.addDOM(o,n);this.findAtPoint(t,s)}findPlace(t,n,r){let i,s;for(let o=this.open,l=0;o>=0;o--){let c=this.nodes[o],f=c.findWrapping(t);if(f&&(!i||i.length>f.length+l)&&(i=f,s=c,!f.length))break;if(c.solid){if(r)break;l+=2}}if(!i)return null;this.sync(s);for(let o=0;o<i.length;o++)n=this.enterInner(i[o],null,n,!1);return n}insertNode(t,n,r){if(t.isInline&&this.needsBlock&&!this.top.type){let s=this.textblockFromContext();s&&(n=this.enterInner(s,null,n))}let i=this.findPlace(t,n,r);if(i){this.closeExtra();let s=this.top;s.match&&(s.match=s.match.matchType(t.type));let o=ct.none;for(let l of i.concat(t.marks))(s.type?s.type.allowsMarkType(l.type):c_(l.type,t.type))&&(o=l.addToSet(o));return s.content.push(t.mark(o)),!0}return!1}enter(t,n,r,i){let s=this.findPlace(t.create(n),r,!1);return s&&(s=this.enterInner(t,n,r,!0,i)),s}enterInner(t,n,r,i=!1,s){this.closeExtra();let o=this.top;o.match=o.match&&o.match.matchType(t);let l=a_(t,s,o.options);o.options&ac&&o.content.length==0&&(l|=ac);let c=ct.none;return r=r.filter(f=>(o.type?o.type.allowsMarkType(f.type):c_(f.type,t))?(c=f.addToSet(c),!1):!0),this.nodes.push(new Bd(t,n,c,i,null,l)),this.open++,r}closeExtra(t=!1){let n=this.nodes.length-1;if(n>this.open){for(;n>this.open;n--)this.nodes[n-1].content.push(this.nodes[n].finish(t));this.nodes.length=this.open+1}}finish(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(!!(this.isOpen||this.options.topOpen))}sync(t){for(let n=this.open;n>=0;n--){if(this.nodes[n]==t)return this.open=n,!0;this.localPreserveWS&&(this.nodes[n].options|=Ac)}return!1}get currentPos(){this.closeExtra();let t=0;for(let n=this.open;n>=0;n--){let r=this.nodes[n].content;for(let i=r.length-1;i>=0;i--)t+=r[i].nodeSize;n&&t++}return t}findAtPoint(t,n){if(this.find)for(let r=0;r<this.find.length;r++)this.find[r].node==t&&this.find[r].offset==n&&(this.find[r].pos=this.currentPos)}findInside(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].pos==null&&t.nodeType==1&&t.contains(this.find[n].node)&&(this.find[n].pos=this.currentPos)}findAround(t,n,r){if(t!=n&&this.find)for(let i=0;i<this.find.length;i++)this.find[i].pos==null&&t.nodeType==1&&t.contains(this.find[i].node)&&n.compareDocumentPosition(this.find[i].node)&(r?2:4)&&(this.find[i].pos=this.currentPos)}findInText(t){if(this.find)for(let n=0;n<this.find.length;n++)this.find[n].node==t&&(this.find[n].pos=this.currentPos-(t.nodeValue.length-this.find[n].offset))}matchesContext(t){if(t.indexOf("|")>-1)return t.split(/\s*\|\s*/).some(this.matchesContext,this);let n=t.split("/"),r=this.options.context,i=!this.isOpen&&(!r||r.parent.type==this.nodes[0].type),s=-(r?r.depth+1:0)+(i?0:1),o=(l,c)=>{for(;l>=0;l--){let f=n[l];if(f==""){if(l==n.length-1||l==0)continue;for(;c>=s;c--)if(o(l-1,c))return!0;return!1}else{let h=c>0||c==0&&i?this.nodes[c].type:r&&c>=s?r.node(c-s).type:null;if(!h||h.name!=f&&!h.isInGroup(f))return!1;c--}}return!0};return o(n.length-1,this.open)}textblockFromContext(){let t=this.options.context;if(t)for(let n=t.depth;n>=0;n--){let r=t.node(n).contentMatchAt(t.indexAfter(n)).defaultType;if(r&&r.isTextblock&&r.defaultAttrs)return r}for(let n in this.parser.schema.nodes){let r=this.parser.schema.nodes[n];if(r.isTextblock&&r.defaultAttrs)return r}}}function $K(e){for(let t=e.firstChild,n=null;t;t=t.nextSibling){let r=t.nodeType==1?t.nodeName.toLowerCase():null;r&&EB.hasOwnProperty(r)&&n?(n.appendChild(t),t=n):r=="li"?n=t:r&&(n=null)}}function GK(e,t){return(e.matches||e.msMatchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector).call(e,t)}function u_(e){let t={};for(let n in e)t[n]=e[n];return t}function c_(e,t){let n=t.schema.nodes;for(let r in n){let i=n[r];if(!i.allowsMarkType(e))continue;let s=[],o=l=>{s.push(l);for(let c=0;c<l.edgeCount;c++){let{type:f,next:h}=l.edge(c);if(f==t||s.indexOf(h)<0&&o(h))return!0}};if(o(i.contentMatch))return!0}}class Jo{constructor(t,n){this.nodes=t,this.marks=n}serializeFragment(t,n={},r){r||(r=h0(n).createDocumentFragment());let i=r,s=[];return t.forEach(o=>{if(s.length||o.marks.length){let l=0,c=0;for(;l<s.length&&c<o.marks.length;){let f=o.marks[c];if(!this.marks[f.type.name]){c++;continue}if(!f.eq(s[l][0])||f.type.spec.spanning===!1)break;l++,c++}for(;l<s.length;)i=s.pop()[1];for(;c<o.marks.length;){let f=o.marks[c++],h=this.serializeMark(f,o.isInline,n);h&&(s.push([f,i]),i.appendChild(h.dom),i=h.contentDOM||h.dom)}}i.appendChild(this.serializeNodeInner(o,n))}),r}serializeNodeInner(t,n){let{dom:r,contentDOM:i}=ah(h0(n),this.nodes[t.type.name](t),null,t.attrs);if(i){if(t.isLeaf)throw new RangeError("Content hole not allowed in a leaf node spec");this.serializeFragment(t.content,n,i)}return r}serializeNode(t,n={}){let r=this.serializeNodeInner(t,n);for(let i=t.marks.length-1;i>=0;i--){let s=this.serializeMark(t.marks[i],t.isInline,n);s&&((s.contentDOM||s.dom).appendChild(r),r=s.dom)}return r}serializeMark(t,n,r={}){let i=this.marks[t.type.name];return i&&ah(h0(r),i(t,n),null,t.attrs)}static renderSpec(t,n,r=null,i){return ah(t,n,r,i)}static fromSchema(t){return t.cached.domSerializer||(t.cached.domSerializer=new Jo(this.nodesFromSchema(t),this.marksFromSchema(t)))}static nodesFromSchema(t){let n=f_(t.nodes);return n.text||(n.text=r=>r.text),n}static marksFromSchema(t){return f_(t.marks)}}function f_(e){let t={};for(let n in e){let r=e[n].spec.toDOM;r&&(t[n]=r)}return t}function h0(e){return e.document||window.document}const d_=new WeakMap;function KK(e){let t=d_.get(e);return t===void 0&&d_.set(e,t=YK(e)),t}function YK(e){let t=null;function n(r){if(r&&typeof r=="object")if(Array.isArray(r))if(typeof r[0]=="string")t||(t=[]),t.push(r);else for(let i=0;i<r.length;i++)n(r[i]);else for(let i in r)n(r[i])}return n(e),t}function ah(e,t,n,r){if(typeof t=="string")return{dom:e.createTextNode(t)};if(t.nodeType!=null)return{dom:t};if(t.dom&&t.dom.nodeType!=null)return t;let i=t[0],s;if(typeof i!="string")throw new RangeError("Invalid array passed to renderSpec");if(r&&(s=KK(r))&&s.indexOf(t)>-1)throw new RangeError("Using an array from an attribute object as a DOM spec. This may be an attempted cross site scripting attack.");let o=i.indexOf(" ");o>0&&(n=i.slice(0,o),i=i.slice(o+1));let l,c=n?e.createElementNS(n,i):e.createElement(i),f=t[1],h=1;if(f&&typeof f=="object"&&f.nodeType==null&&!Array.isArray(f)){h=2;for(let p in f)if(f[p]!=null){let g=p.indexOf(" ");g>0?c.setAttributeNS(p.slice(0,g),p.slice(g+1),f[p]):p=="style"&&c.style?c.style.cssText=f[p]:c.setAttribute(p,f[p])}}for(let p=h;p<t.length;p++){let g=t[p];if(g===0){if(p<t.length-1||p>h)throw new RangeError("Content hole must be the only child of its parent node");return{dom:c,contentDOM:c}}else{let{dom:y,contentDOM:b}=ah(e,g,n,r);if(c.appendChild(y),b){if(l)throw new RangeError("Multiple content holes");l=b}}}return{dom:c,contentDOM:l}}const CB=65535,kB=Math.pow(2,16);function WK(e,t){return e+t*kB}function h_(e){return e&CB}function XK(e){return(e-(e&CB))/kB}const TB=1,AB=2,lh=4,MB=8;class KS{constructor(t,n,r){this.pos=t,this.delInfo=n,this.recover=r}get deleted(){return(this.delInfo&MB)>0}get deletedBefore(){return(this.delInfo&(TB|lh))>0}get deletedAfter(){return(this.delInfo&(AB|lh))>0}get deletedAcross(){return(this.delInfo&lh)>0}}class er{constructor(t,n=!1){if(this.ranges=t,this.inverted=n,!t.length&&er.empty)return er.empty}recover(t){let n=0,r=h_(t);if(!this.inverted)for(let i=0;i<r;i++)n+=this.ranges[i*3+2]-this.ranges[i*3+1];return this.ranges[r*3]+n+XK(t)}mapResult(t,n=1){return this._map(t,n,!1)}map(t,n=1){return this._map(t,n,!0)}_map(t,n,r){let i=0,s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let c=this.ranges[l]-(this.inverted?i:0);if(c>t)break;let f=this.ranges[l+s],h=this.ranges[l+o],p=c+f;if(t<=p){let g=f?t==c?-1:t==p?1:n:n,y=c+i+(g<0?0:h);if(r)return y;let b=t==(n<0?c:p)?null:WK(l/3,t-c),S=t==c?AB:t==p?TB:lh;return(n<0?t!=c:t!=p)&&(S|=MB),new KS(y,S,b)}i+=h-f}return r?t+i:new KS(t+i,0,null)}touches(t,n){let r=0,i=h_(n),s=this.inverted?2:1,o=this.inverted?1:2;for(let l=0;l<this.ranges.length;l+=3){let c=this.ranges[l]-(this.inverted?r:0);if(c>t)break;let f=this.ranges[l+s],h=c+f;if(t<=h&&l==i*3)return!0;r+=this.ranges[l+o]-f}return!1}forEach(t){let n=this.inverted?2:1,r=this.inverted?1:2;for(let i=0,s=0;i<this.ranges.length;i+=3){let o=this.ranges[i],l=o-(this.inverted?s:0),c=o+(this.inverted?0:s),f=this.ranges[i+n],h=this.ranges[i+r];t(l,l+f,c,c+h),s+=h-f}}invert(){return new er(this.ranges,!this.inverted)}toString(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)}static offset(t){return t==0?er.empty:new er(t<0?[0,-t,0]:[0,0,t])}}er.empty=new er([]);class Mc{constructor(t,n,r=0,i=t?t.length:0){this.mirror=n,this.from=r,this.to=i,this._maps=t||[],this.ownData=!(t||n)}get maps(){return this._maps}slice(t=0,n=this.maps.length){return new Mc(this._maps,this.mirror,t,n)}appendMap(t,n){this.ownData||(this._maps=this._maps.slice(),this.mirror=this.mirror&&this.mirror.slice(),this.ownData=!0),this.to=this._maps.push(t),n!=null&&this.setMirror(this._maps.length-1,n)}appendMapping(t){for(let n=0,r=this._maps.length;n<t._maps.length;n++){let i=t.getMirror(n);this.appendMap(t._maps[n],i!=null&&i<n?r+i:void 0)}}getMirror(t){if(this.mirror){for(let n=0;n<this.mirror.length;n++)if(this.mirror[n]==t)return this.mirror[n+(n%2?-1:1)]}}setMirror(t,n){this.mirror||(this.mirror=[]),this.mirror.push(t,n)}appendMappingInverted(t){for(let n=t.maps.length-1,r=this._maps.length+t._maps.length;n>=0;n--){let i=t.getMirror(n);this.appendMap(t._maps[n].invert(),i!=null&&i>n?r-i-1:void 0)}}invert(){let t=new Mc;return t.appendMappingInverted(this),t}map(t,n=1){if(this.mirror)return this._map(t,n,!0);for(let r=this.from;r<this.to;r++)t=this._maps[r].map(t,n);return t}mapResult(t,n=1){return this._map(t,n,!1)}_map(t,n,r){let i=0;for(let s=this.from;s<this.to;s++){let o=this._maps[s],l=o.mapResult(t,n);if(l.recover!=null){let c=this.getMirror(s);if(c!=null&&c>s&&c<this.to){s=c,t=this._maps[c].recover(l.recover);continue}}i|=l.delInfo,t=l.pos}return r?t:new KS(t,i,null)}}const p0=Object.create(null);class Sn{getMap(){return er.empty}merge(t){return null}static fromJSON(t,n){if(!n||!n.stepType)throw new RangeError("Invalid input for Step.fromJSON");let r=p0[n.stepType];if(!r)throw new RangeError(`No step type ${n.stepType} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in p0)throw new RangeError("Duplicate use of step JSON ID "+t);return p0[t]=n,n.prototype.jsonID=t,n}}class Vt{constructor(t,n){this.doc=t,this.failed=n}static ok(t){return new Vt(t,null)}static fail(t){return new Vt(null,t)}static fromReplace(t,n,r,i){try{return Vt.ok(t.replace(n,r,i))}catch(s){if(s instanceof Mh)return Vt.fail(s.message);throw s}}}function yC(e,t,n){let r=[];for(let i=0;i<e.childCount;i++){let s=e.child(i);s.content.size&&(s=s.copy(yC(s.content,t,s))),s.isInline&&(s=t(s,n,i)),r.push(s)}return pe.fromArray(r)}class Rs extends Sn{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=t.resolve(this.from),i=r.node(r.sharedDepth(this.to)),s=new ve(yC(n.content,(o,l)=>!o.isAtom||!l.type.allowsMarkType(this.mark.type)?o:o.mark(this.mark.addToSet(o.marks)),i),n.openStart,n.openEnd);return Vt.fromReplace(t,this.from,this.to,s)}invert(){return new Pr(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Rs(n.pos,r.pos,this.mark)}merge(t){return t instanceof Rs&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Rs(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"addMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for AddMarkStep.fromJSON");return new Rs(n.from,n.to,t.markFromJSON(n.mark))}}Sn.jsonID("addMark",Rs);class Pr extends Sn{constructor(t,n,r){super(),this.from=t,this.to=n,this.mark=r}apply(t){let n=t.slice(this.from,this.to),r=new ve(yC(n.content,i=>i.mark(this.mark.removeFromSet(i.marks)),t),n.openStart,n.openEnd);return Vt.fromReplace(t,this.from,this.to,r)}invert(){return new Rs(this.from,this.to,this.mark)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new Pr(n.pos,r.pos,this.mark)}merge(t){return t instanceof Pr&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from?new Pr(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark):null}toJSON(){return{stepType:"removeMark",mark:this.mark.toJSON(),from:this.from,to:this.to}}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for RemoveMarkStep.fromJSON");return new Pr(n.from,n.to,t.markFromJSON(n.mark))}}Sn.jsonID("removeMark",Pr);class Ds extends Sn{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return Vt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.addToSet(n.marks));return Vt.fromReplace(t,this.pos,this.pos+1,new ve(pe.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);if(n){let r=this.mark.addToSet(n.marks);if(r.length==n.marks.length){for(let i=0;i<n.marks.length;i++)if(!n.marks[i].isInSet(r))return new Ds(this.pos,n.marks[i]);return new Ds(this.pos,this.mark)}}return new Vo(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new Ds(n.pos,this.mark)}toJSON(){return{stepType:"addNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for AddNodeMarkStep.fromJSON");return new Ds(n.pos,t.markFromJSON(n.mark))}}Sn.jsonID("addNodeMark",Ds);class Vo extends Sn{constructor(t,n){super(),this.pos=t,this.mark=n}apply(t){let n=t.nodeAt(this.pos);if(!n)return Vt.fail("No node at mark step's position");let r=n.type.create(n.attrs,null,this.mark.removeFromSet(n.marks));return Vt.fromReplace(t,this.pos,this.pos+1,new ve(pe.from(r),0,n.isLeaf?0:1))}invert(t){let n=t.nodeAt(this.pos);return!n||!this.mark.isInSet(n.marks)?this:new Ds(this.pos,this.mark)}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new Vo(n.pos,this.mark)}toJSON(){return{stepType:"removeNodeMark",pos:this.pos,mark:this.mark.toJSON()}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for RemoveNodeMarkStep.fromJSON");return new Vo(n.pos,t.markFromJSON(n.mark))}}Sn.jsonID("removeNodeMark",Vo);class Jt extends Sn{constructor(t,n,r,i=!1){super(),this.from=t,this.to=n,this.slice=r,this.structure=i}apply(t){return this.structure&&YS(t,this.from,this.to)?Vt.fail("Structure replace would overwrite content"):Vt.fromReplace(t,this.from,this.to,this.slice)}getMap(){return new er([this.from,this.to-this.from,this.slice.size])}invert(t){return new Jt(this.from,this.from+this.slice.size,t.slice(this.from,this.to))}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deletedAcross&&r.deletedAcross?null:new Jt(n.pos,Math.max(n.pos,r.pos),this.slice,this.structure)}merge(t){if(!(t instanceof Jt)||t.structure||this.structure)return null;if(this.from+this.slice.size==t.from&&!this.slice.openEnd&&!t.slice.openStart){let n=this.slice.size+t.slice.size==0?ve.empty:new ve(this.slice.content.append(t.slice.content),this.slice.openStart,t.slice.openEnd);return new Jt(this.from,this.to+(t.to-t.from),n,this.structure)}else if(t.to==this.from&&!this.slice.openStart&&!t.slice.openEnd){let n=this.slice.size+t.slice.size==0?ve.empty:new ve(t.slice.content.append(this.slice.content),t.slice.openStart,this.slice.openEnd);return new Jt(t.from,this.to,n,this.structure)}else return null}toJSON(){let t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number")throw new RangeError("Invalid input for ReplaceStep.fromJSON");return new Jt(n.from,n.to,ve.fromJSON(t,n.slice),!!n.structure)}}Sn.jsonID("replace",Jt);class en extends Sn{constructor(t,n,r,i,s,o,l=!1){super(),this.from=t,this.to=n,this.gapFrom=r,this.gapTo=i,this.slice=s,this.insert=o,this.structure=l}apply(t){if(this.structure&&(YS(t,this.from,this.gapFrom)||YS(t,this.gapTo,this.to)))return Vt.fail("Structure gap-replace would overwrite content");let n=t.slice(this.gapFrom,this.gapTo);if(n.openStart||n.openEnd)return Vt.fail("Gap is not a flat range");let r=this.slice.insertAt(this.insert,n.content);return r?Vt.fromReplace(t,this.from,this.to,r):Vt.fail("Content does not fit in gap")}getMap(){return new er([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])}invert(t){let n=this.gapTo-this.gapFrom;return new en(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)}map(t){let n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),i=this.from==this.gapFrom?n.pos:t.map(this.gapFrom,-1),s=this.to==this.gapTo?r.pos:t.map(this.gapTo,1);return n.deletedAcross&&r.deletedAcross||i<n.pos||s>r.pos?null:new en(n.pos,r.pos,i,s,this.slice,this.insert,this.structure)}toJSON(){let t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,insert:this.insert};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t}static fromJSON(t,n){if(typeof n.from!="number"||typeof n.to!="number"||typeof n.gapFrom!="number"||typeof n.gapTo!="number"||typeof n.insert!="number")throw new RangeError("Invalid input for ReplaceAroundStep.fromJSON");return new en(n.from,n.to,n.gapFrom,n.gapTo,ve.fromJSON(t,n.slice),n.insert,!!n.structure)}}Sn.jsonID("replaceAround",en);function YS(e,t,n){let r=e.resolve(t),i=n-t,s=r.depth;for(;i>0&&s>0&&r.indexAfter(s)==r.node(s).childCount;)s--,i--;if(i>0){let o=r.node(s).maybeChild(r.indexAfter(s));for(;i>0;){if(!o||o.isLeaf)return!0;o=o.firstChild,i--}}return!1}function ZK(e,t,n,r){let i=[],s=[],o,l;e.doc.nodesBetween(t,n,(c,f,h)=>{if(!c.isInline)return;let p=c.marks;if(!r.isInSet(p)&&h.type.allowsMarkType(r.type)){let g=Math.max(f,t),y=Math.min(f+c.nodeSize,n),b=r.addToSet(p);for(let S=0;S<p.length;S++)p[S].isInSet(b)||(o&&o.to==g&&o.mark.eq(p[S])?o.to=y:i.push(o=new Pr(g,y,p[S])));l&&l.to==g?l.to=y:s.push(l=new Rs(g,y,r))}}),i.forEach(c=>e.step(c)),s.forEach(c=>e.step(c))}function QK(e,t,n,r){let i=[],s=0;e.doc.nodesBetween(t,n,(o,l)=>{if(!o.isInline)return;s++;let c=null;if(r instanceof qp){let f=o.marks,h;for(;h=r.isInSet(f);)(c||(c=[])).push(h),f=h.removeFromSet(f)}else r?r.isInSet(o.marks)&&(c=[r]):c=o.marks;if(c&&c.length){let f=Math.min(l+o.nodeSize,n);for(let h=0;h<c.length;h++){let p=c[h],g;for(let y=0;y<i.length;y++){let b=i[y];b.step==s-1&&p.eq(i[y].style)&&(g=b)}g?(g.to=f,g.step=s):i.push({style:p,from:Math.max(l,t),to:f,step:s})}}}),i.forEach(o=>e.step(new Pr(o.from,o.to,o.style)))}function vC(e,t,n,r=n.contentMatch,i=!0){let s=e.doc.nodeAt(t),o=[],l=t+1;for(let c=0;c<s.childCount;c++){let f=s.child(c),h=l+f.nodeSize,p=r.matchType(f.type);if(!p)o.push(new Jt(l,h,ve.empty));else{r=p;for(let g=0;g<f.marks.length;g++)n.allowsMarkType(f.marks[g].type)||e.step(new Pr(l,h,f.marks[g]));if(i&&f.isText&&n.whitespace!="pre"){let g,y=/\r?\n|\r/g,b;for(;g=y.exec(f.text);)b||(b=new ve(pe.from(n.schema.text(" ",n.allowedMarks(f.marks))),0,0)),o.push(new Jt(l+g.index,l+g.index+g[0].length,b))}}l=h}if(!r.validEnd){let c=r.fillBefore(pe.empty,!0);e.replace(l,l,new ve(c,0,0))}for(let c=o.length-1;c>=0;c--)e.step(o[c])}function JK(e,t,n){return(t==0||e.canReplace(t,e.childCount))&&(n==e.childCount||e.canReplace(0,n))}function _l(e){let n=e.parent.content.cutByIndex(e.startIndex,e.endIndex);for(let r=e.depth;;--r){let i=e.$from.node(r),s=e.$from.index(r),o=e.$to.indexAfter(r);if(r<e.depth&&i.canReplace(s,o,n))return r;if(r==0||i.type.spec.isolating||!JK(i,s,o))break}return null}function eY(e,t,n){let{$from:r,$to:i,depth:s}=t,o=r.before(s+1),l=i.after(s+1),c=o,f=l,h=pe.empty,p=0;for(let b=s,S=!1;b>n;b--)S||r.index(b)>0?(S=!0,h=pe.from(r.node(b).copy(h)),p++):c--;let g=pe.empty,y=0;for(let b=s,S=!1;b>n;b--)S||i.after(b+1)<i.end(b)?(S=!0,g=pe.from(i.node(b).copy(g)),y++):f++;e.step(new en(c,f,o,l,new ve(h.append(g),p,y),h.size-p,!0))}function bC(e,t,n=null,r=e){let i=tY(e,t),s=i&&nY(r,t);return s?i.map(p_).concat({type:t,attrs:n}).concat(s.map(p_)):null}function p_(e){return{type:e,attrs:null}}function tY(e,t){let{parent:n,startIndex:r,endIndex:i}=e,s=n.contentMatchAt(r).findWrapping(t);if(!s)return null;let o=s.length?s[0]:t;return n.canReplaceWith(r,i,o)?s:null}function nY(e,t){let{parent:n,startIndex:r,endIndex:i}=e,s=n.child(r),o=t.contentMatch.findWrapping(s.type);if(!o)return null;let c=(o.length?o[o.length-1]:t).contentMatch;for(let f=r;c&&f<i;f++)c=c.matchType(n.child(f).type);return!c||!c.validEnd?null:o}function rY(e,t,n){let r=pe.empty;for(let o=n.length-1;o>=0;o--){if(r.size){let l=n[o].type.contentMatch.matchFragment(r);if(!l||!l.validEnd)throw new RangeError("Wrapper type given to Transform.wrap does not form valid content of its parent wrapper")}r=pe.from(n[o].type.create(n[o].attrs,r))}let i=t.start,s=t.end;e.step(new en(i,s,i,s,new ve(r,0,0),n.length,!0))}function iY(e,t,n,r,i){if(!r.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");let s=e.steps.length;e.doc.nodesBetween(t,n,(o,l)=>{let c=typeof i=="function"?i(o):i;if(o.isTextblock&&!o.hasMarkup(r,c)&&sY(e.doc,e.mapping.slice(s).map(l),r)){let f=null;if(r.schema.linebreakReplacement){let y=r.whitespace=="pre",b=!!r.contentMatch.matchType(r.schema.linebreakReplacement);y&&!b?f=!1:!y&&b&&(f=!0)}f===!1&&_B(e,o,l,s),vC(e,e.mapping.slice(s).map(l,1),r,void 0,f===null);let h=e.mapping.slice(s),p=h.map(l,1),g=h.map(l+o.nodeSize,1);return e.step(new en(p,g,p+1,g-1,new ve(pe.from(r.create(c,null,o.marks)),0,0),1,!0)),f===!0&&NB(e,o,l,s),!1}})}function NB(e,t,n,r){t.forEach((i,s)=>{if(i.isText){let o,l=/\r?\n|\r/g;for(;o=l.exec(i.text);){let c=e.mapping.slice(r).map(n+1+s+o.index);e.replaceWith(c,c+1,t.type.schema.linebreakReplacement.create())}}})}function _B(e,t,n,r){t.forEach((i,s)=>{if(i.type==i.type.schema.linebreakReplacement){let o=e.mapping.slice(r).map(n+1+s);e.replaceWith(o,o+1,t.type.schema.text(`
`))}})}function sY(e,t,n){let r=e.resolve(t),i=r.index();return r.parent.canReplaceWith(i,i+1,n)}function oY(e,t,n,r,i){let s=e.doc.nodeAt(t);if(!s)throw new RangeError("No node at given position");n||(n=s.type);let o=n.create(r,null,i||s.marks);if(s.isLeaf)return e.replaceWith(t,t+s.nodeSize,o);if(!n.validContent(s.content))throw new RangeError("Invalid content for node type "+n.name);e.step(new en(t,t+s.nodeSize,t+1,t+s.nodeSize-1,new ve(pe.from(o),0,0),1,!0))}function Pi(e,t,n=1,r){let i=e.resolve(t),s=i.depth-n,o=r&&r[r.length-1]||i.parent;if(s<0||i.parent.type.spec.isolating||!i.parent.canReplace(i.index(),i.parent.childCount)||!o.type.validContent(i.parent.content.cutByIndex(i.index(),i.parent.childCount)))return!1;for(let f=i.depth-1,h=n-2;f>s;f--,h--){let p=i.node(f),g=i.index(f);if(p.type.spec.isolating)return!1;let y=p.content.cutByIndex(g,p.childCount),b=r&&r[h+1];b&&(y=y.replaceChild(0,b.type.create(b.attrs)));let S=r&&r[h]||p;if(!p.canReplace(g+1,p.childCount)||!S.type.validContent(y))return!1}let l=i.indexAfter(s),c=r&&r[0];return i.node(s).canReplaceWith(l,l,c?c.type:i.node(s+1).type)}function aY(e,t,n=1,r){let i=e.doc.resolve(t),s=pe.empty,o=pe.empty;for(let l=i.depth,c=i.depth-n,f=n-1;l>c;l--,f--){s=pe.from(i.node(l).copy(s));let h=r&&r[f];o=pe.from(h?h.type.create(h.attrs,o):i.node(l).copy(o))}e.step(new Jt(t,t,new ve(s.append(o),n,n),!0))}function Ks(e,t){let n=e.resolve(t),r=n.index();return RB(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function lY(e,t){t.content.size||e.type.compatibleContent(t.type);let n=e.contentMatchAt(e.childCount),{linebreakReplacement:r}=e.type.schema;for(let i=0;i<t.childCount;i++){let s=t.child(i),o=s.type==r?e.type.schema.nodes.text:s.type;if(n=n.matchType(o),!n||!e.type.allowsMarks(s.marks))return!1}return n.validEnd}function RB(e,t){return!!(e&&t&&!e.isLeaf&&lY(e,t))}function Vp(e,t,n=-1){let r=e.resolve(t);for(let i=r.depth;;i--){let s,o,l=r.index(i);if(i==r.depth?(s=r.nodeBefore,o=r.nodeAfter):n>0?(s=r.node(i+1),l++,o=r.node(i).maybeChild(l)):(s=r.node(i).maybeChild(l-1),o=r.node(i+1)),s&&!s.isTextblock&&RB(s,o)&&r.node(i).canReplace(l,l+1))return t;if(i==0)break;t=n<0?r.before(i):r.after(i)}}function uY(e,t,n){let r=null,{linebreakReplacement:i}=e.doc.type.schema,s=e.doc.resolve(t-n),o=s.node().type;if(i&&o.inlineContent){let h=o.whitespace=="pre",p=!!o.contentMatch.matchType(i);h&&!p?r=!1:!h&&p&&(r=!0)}let l=e.steps.length;if(r===!1){let h=e.doc.resolve(t+n);_B(e,h.node(),h.before(),l)}o.inlineContent&&vC(e,t+n-1,o,s.node().contentMatchAt(s.index()),r==null);let c=e.mapping.slice(l),f=c.map(t-n);if(e.step(new Jt(f,c.map(t+n,-1),ve.empty,!0)),r===!0){let h=e.doc.resolve(f);NB(e,h.node(),h.before(),e.steps.length)}return e}function cY(e,t,n){let r=e.resolve(t);if(r.parent.canReplaceWith(r.index(),r.index(),n))return t;if(r.parentOffset==0)for(let i=r.depth-1;i>=0;i--){let s=r.index(i);if(r.node(i).canReplaceWith(s,s,n))return r.before(i+1);if(s>0)return null}if(r.parentOffset==r.parent.content.size)for(let i=r.depth-1;i>=0;i--){let s=r.indexAfter(i);if(r.node(i).canReplaceWith(s,s,n))return r.after(i+1);if(s<r.node(i).childCount)return null}return null}function DB(e,t,n){let r=e.resolve(t);if(!n.content.size)return t;let i=n.content;for(let s=0;s<n.openStart;s++)i=i.firstChild.content;for(let s=1;s<=(n.openStart==0&&n.size?2:1);s++)for(let o=r.depth;o>=0;o--){let l=o==r.depth?0:r.pos<=(r.start(o+1)+r.end(o+1))/2?-1:1,c=r.index(o)+(l>0?1:0),f=r.node(o),h=!1;if(s==1)h=f.canReplace(c,c,i);else{let p=f.contentMatchAt(c).findWrapping(i.firstChild.type);h=p&&f.canReplaceWith(c,c,p[0])}if(h)return l==0?r.pos:l<0?r.before(o+1):r.after(o+1)}return null}function Hp(e,t,n=t,r=ve.empty){if(t==n&&!r.size)return null;let i=e.resolve(t),s=e.resolve(n);return OB(i,s,r)?new Jt(t,n,r):new fY(i,s,r).fit()}function OB(e,t,n){return!n.openStart&&!n.openEnd&&e.start()==t.start()&&e.parent.canReplace(e.index(),t.index(),n.content)}class fY{constructor(t,n,r){this.$from=t,this.$to=n,this.unplaced=r,this.frontier=[],this.placed=pe.empty;for(let i=0;i<=t.depth;i++){let s=t.node(i);this.frontier.push({type:s.type,match:s.contentMatchAt(t.indexAfter(i))})}for(let i=t.depth;i>0;i--)this.placed=pe.from(t.node(i).copy(this.placed))}get depth(){return this.frontier.length-1}fit(){for(;this.unplaced.size;){let f=this.findFittable();f?this.placeNodes(f):this.openMore()||this.dropNode()}let t=this.mustMoveInline(),n=this.placed.size-this.depth-this.$from.depth,r=this.$from,i=this.close(t<0?this.$to:r.doc.resolve(t));if(!i)return null;let s=this.placed,o=r.depth,l=i.depth;for(;o&&l&&s.childCount==1;)s=s.firstChild.content,o--,l--;let c=new ve(s,o,l);return t>-1?new en(r.pos,t,this.$to.pos,this.$to.end(),c,n):c.size||r.pos!=this.$to.pos?new Jt(r.pos,i.pos,c):null}findFittable(){let t=this.unplaced.openStart;for(let n=this.unplaced.content,r=0,i=this.unplaced.openEnd;r<t;r++){let s=n.firstChild;if(n.childCount>1&&(i=0),s.type.spec.isolating&&i<=r){t=r;break}n=s.content}for(let n=1;n<=2;n++)for(let r=n==1?t:this.unplaced.openStart;r>=0;r--){let i,s=null;r?(s=m0(this.unplaced.content,r-1).firstChild,i=s.content):i=this.unplaced.content;let o=i.firstChild;for(let l=this.depth;l>=0;l--){let{type:c,match:f}=this.frontier[l],h,p=null;if(n==1&&(o?f.matchType(o.type)||(p=f.fillBefore(pe.from(o),!1)):s&&c.compatibleContent(s.type)))return{sliceDepth:r,frontierDepth:l,parent:s,inject:p};if(n==2&&o&&(h=f.findWrapping(o.type)))return{sliceDepth:r,frontierDepth:l,parent:s,wrap:h};if(s&&f.matchType(s.type))break}}}openMore(){let{content:t,openStart:n,openEnd:r}=this.unplaced,i=m0(t,n);return!i.childCount||i.firstChild.isLeaf?!1:(this.unplaced=new ve(t,n+1,Math.max(r,i.size+n>=t.size-r?n+1:0)),!0)}dropNode(){let{content:t,openStart:n,openEnd:r}=this.unplaced,i=m0(t,n);if(i.childCount<=1&&n>0){let s=t.size-n<=n+i.size;this.unplaced=new ve(Gu(t,n-1,1),n-1,s?n-1:r)}else this.unplaced=new ve(Gu(t,n,1),n,r)}placeNodes({sliceDepth:t,frontierDepth:n,parent:r,inject:i,wrap:s}){for(;this.depth>n;)this.closeFrontierNode();if(s)for(let S=0;S<s.length;S++)this.openFrontierNode(s[S]);let o=this.unplaced,l=r?r.content:o.content,c=o.openStart-t,f=0,h=[],{match:p,type:g}=this.frontier[n];if(i){for(let S=0;S<i.childCount;S++)h.push(i.child(S));p=p.matchFragment(i)}let y=l.size+t-(o.content.size-o.openEnd);for(;f<l.childCount;){let S=l.child(f),x=p.matchType(S.type);if(!x)break;f++,(f>1||c==0||S.content.size)&&(p=x,h.push(jB(S.mark(g.allowedMarks(S.marks)),f==1?c:0,f==l.childCount?y:-1)))}let b=f==l.childCount;b||(y=-1),this.placed=Ku(this.placed,n,pe.from(h)),this.frontier[n].match=p,b&&y<0&&r&&r.type==this.frontier[this.depth].type&&this.frontier.length>1&&this.closeFrontierNode();for(let S=0,x=l;S<y;S++){let C=x.lastChild;this.frontier.push({type:C.type,match:C.contentMatchAt(C.childCount)}),x=C.content}this.unplaced=b?t==0?ve.empty:new ve(Gu(o.content,t-1,1),t-1,y<0?o.openEnd:t-1):new ve(Gu(o.content,t,f),o.openStart,o.openEnd)}mustMoveInline(){if(!this.$to.parent.isTextblock)return-1;let t=this.frontier[this.depth],n;if(!t.type.isTextblock||!g0(this.$to,this.$to.depth,t.type,t.match,!1)||this.$to.depth==this.depth&&(n=this.findCloseLevel(this.$to))&&n.depth==this.depth)return-1;let{depth:r}=this.$to,i=this.$to.after(r);for(;r>1&&i==this.$to.end(--r);)++i;return i}findCloseLevel(t){e:for(let n=Math.min(this.depth,t.depth);n>=0;n--){let{match:r,type:i}=this.frontier[n],s=n<t.depth&&t.end(n+1)==t.pos+(t.depth-(n+1)),o=g0(t,n,i,r,s);if(o){for(let l=n-1;l>=0;l--){let{match:c,type:f}=this.frontier[l],h=g0(t,l,f,c,!0);if(!h||h.childCount)continue e}return{depth:n,fit:o,move:s?t.doc.resolve(t.after(n+1)):t}}}}close(t){let n=this.findCloseLevel(t);if(!n)return null;for(;this.depth>n.depth;)this.closeFrontierNode();n.fit.childCount&&(this.placed=Ku(this.placed,n.depth,n.fit)),t=n.move;for(let r=n.depth+1;r<=t.depth;r++){let i=t.node(r),s=i.type.contentMatch.fillBefore(i.content,!0,t.index(r));this.openFrontierNode(i.type,i.attrs,s)}return t}openFrontierNode(t,n=null,r){let i=this.frontier[this.depth];i.match=i.match.matchType(t),this.placed=Ku(this.placed,this.depth,pe.from(t.create(n,r))),this.frontier.push({type:t,match:t.contentMatch})}closeFrontierNode(){let n=this.frontier.pop().match.fillBefore(pe.empty,!0);n.childCount&&(this.placed=Ku(this.placed,this.frontier.length,n))}}function Gu(e,t,n){return t==0?e.cutByIndex(n,e.childCount):e.replaceChild(0,e.firstChild.copy(Gu(e.firstChild.content,t-1,n)))}function Ku(e,t,n){return t==0?e.append(n):e.replaceChild(e.childCount-1,e.lastChild.copy(Ku(e.lastChild.content,t-1,n)))}function m0(e,t){for(let n=0;n<t;n++)e=e.firstChild.content;return e}function jB(e,t,n){if(t<=0)return e;let r=e.content;return t>1&&(r=r.replaceChild(0,jB(r.firstChild,t-1,r.childCount==1?n-1:0))),t>0&&(r=e.type.contentMatch.fillBefore(r).append(r),n<=0&&(r=r.append(e.type.contentMatch.matchFragment(r).fillBefore(pe.empty,!0)))),e.copy(r)}function g0(e,t,n,r,i){let s=e.node(t),o=i?e.indexAfter(t):e.index(t);if(o==s.childCount&&!n.compatibleContent(s.type))return null;let l=r.fillBefore(s.content,!0,o);return l&&!dY(n,s.content,o)?l:null}function dY(e,t,n){for(let r=n;r<t.childCount;r++)if(!e.allowsMarks(t.child(r).marks))return!0;return!1}function hY(e){return e.spec.defining||e.spec.definingForContent}function pY(e,t,n,r){if(!r.size)return e.deleteRange(t,n);let i=e.doc.resolve(t),s=e.doc.resolve(n);if(OB(i,s,r))return e.step(new Jt(t,n,r));let o=PB(i,e.doc.resolve(n));o[o.length-1]==0&&o.pop();let l=-(i.depth+1);o.unshift(l);for(let g=i.depth,y=i.pos-1;g>0;g--,y--){let b=i.node(g).type.spec;if(b.defining||b.definingAsContext||b.isolating)break;o.indexOf(g)>-1?l=g:i.before(g)==y&&o.splice(1,0,-g)}let c=o.indexOf(l),f=[],h=r.openStart;for(let g=r.content,y=0;;y++){let b=g.firstChild;if(f.push(b),y==r.openStart)break;g=b.content}for(let g=h-1;g>=0;g--){let y=f[g],b=hY(y.type);if(b&&!y.sameMarkup(i.node(Math.abs(l)-1)))h=g;else if(b||!y.type.isTextblock)break}for(let g=r.openStart;g>=0;g--){let y=(g+h+1)%(r.openStart+1),b=f[y];if(b)for(let S=0;S<o.length;S++){let x=o[(S+c)%o.length],C=!0;x<0&&(C=!1,x=-x);let T=i.node(x-1),k=i.index(x-1);if(T.canReplaceWith(k,k,b.type,b.marks))return e.replace(i.before(x),C?s.after(x):n,new ve(LB(r.content,0,r.openStart,y),y,r.openEnd))}}let p=e.steps.length;for(let g=o.length-1;g>=0&&(e.replace(t,n,r),!(e.steps.length>p));g--){let y=o[g];y<0||(t=i.before(y),n=s.after(y))}}function LB(e,t,n,r,i){if(t<n){let s=e.firstChild;e=e.replaceChild(0,s.copy(LB(s.content,t+1,n,r,s)))}if(t>r){let s=i.contentMatchAt(0),o=s.fillBefore(e).append(e);e=o.append(s.matchFragment(o).fillBefore(pe.empty,!0))}return e}function mY(e,t,n,r){if(!r.isInline&&t==n&&e.doc.resolve(t).parent.content.size){let i=cY(e.doc,t,r.type);i!=null&&(t=n=i)}e.replaceRange(t,n,new ve(pe.from(r),0,0))}function gY(e,t,n){let r=e.doc.resolve(t),i=e.doc.resolve(n),s=PB(r,i);for(let o=0;o<s.length;o++){let l=s[o],c=o==s.length-1;if(c&&l==0||r.node(l).type.contentMatch.validEnd)return e.delete(r.start(l),i.end(l));if(l>0&&(c||r.node(l-1).canReplace(r.index(l-1),i.indexAfter(l-1))))return e.delete(r.before(l),i.after(l))}for(let o=1;o<=r.depth&&o<=i.depth;o++)if(t-r.start(o)==r.depth-o&&n>r.end(o)&&i.end(o)-n!=i.depth-o&&r.start(o-1)==i.start(o-1)&&r.node(o-1).canReplace(r.index(o-1),i.index(o-1)))return e.delete(r.before(o),n);e.delete(t,n)}function PB(e,t){let n=[],r=Math.min(e.depth,t.depth);for(let i=r;i>=0;i--){let s=e.start(i);if(s<e.pos-(e.depth-i)||t.end(i)>t.pos+(t.depth-i)||e.node(i).type.spec.isolating||t.node(i).type.spec.isolating)break;(s==t.start(i)||i==e.depth&&i==t.depth&&e.parent.inlineContent&&t.parent.inlineContent&&i&&t.start(i-1)==s-1)&&n.push(i)}return n}class ul extends Sn{constructor(t,n,r){super(),this.pos=t,this.attr=n,this.value=r}apply(t){let n=t.nodeAt(this.pos);if(!n)return Vt.fail("No node at attribute step's position");let r=Object.create(null);for(let s in n.attrs)r[s]=n.attrs[s];r[this.attr]=this.value;let i=n.type.create(r,null,n.marks);return Vt.fromReplace(t,this.pos,this.pos+1,new ve(pe.from(i),0,n.isLeaf?0:1))}getMap(){return er.empty}invert(t){return new ul(this.pos,this.attr,t.nodeAt(this.pos).attrs[this.attr])}map(t){let n=t.mapResult(this.pos,1);return n.deletedAfter?null:new ul(n.pos,this.attr,this.value)}toJSON(){return{stepType:"attr",pos:this.pos,attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.pos!="number"||typeof n.attr!="string")throw new RangeError("Invalid input for AttrStep.fromJSON");return new ul(n.pos,n.attr,n.value)}}Sn.jsonID("attr",ul);class Nc extends Sn{constructor(t,n){super(),this.attr=t,this.value=n}apply(t){let n=Object.create(null);for(let i in t.attrs)n[i]=t.attrs[i];n[this.attr]=this.value;let r=t.type.create(n,t.content,t.marks);return Vt.ok(r)}getMap(){return er.empty}invert(t){return new Nc(this.attr,t.attrs[this.attr])}map(t){return this}toJSON(){return{stepType:"docAttr",attr:this.attr,value:this.value}}static fromJSON(t,n){if(typeof n.attr!="string")throw new RangeError("Invalid input for DocAttrStep.fromJSON");return new Nc(n.attr,n.value)}}Sn.jsonID("docAttr",Nc);let ml=class extends Error{};ml=function e(t){let n=Error.call(this,t);return n.__proto__=e.prototype,n};ml.prototype=Object.create(Error.prototype);ml.prototype.constructor=ml;ml.prototype.name="TransformError";let BB=class{constructor(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new Mc}get before(){return this.docs.length?this.docs[0]:this.doc}step(t){let n=this.maybeStep(t);if(n.failed)throw new ml(n.failed);return this}maybeStep(t){let n=t.apply(this.doc);return n.failed||this.addStep(t,n.doc),n}get docChanged(){return this.steps.length>0}addStep(t,n){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=n}replace(t,n=t,r=ve.empty){let i=Hp(this.doc,t,n,r);return i&&this.step(i),this}replaceWith(t,n,r){return this.replace(t,n,new ve(pe.from(r),0,0))}delete(t,n){return this.replace(t,n,ve.empty)}insert(t,n){return this.replaceWith(t,t,n)}replaceRange(t,n,r){return pY(this,t,n,r),this}replaceRangeWith(t,n,r){return mY(this,t,n,r),this}deleteRange(t,n){return gY(this,t,n),this}lift(t,n){return eY(this,t,n),this}join(t,n=1){return uY(this,t,n),this}wrap(t,n){return rY(this,t,n),this}setBlockType(t,n=t,r,i=null){return iY(this,t,n,r,i),this}setNodeMarkup(t,n,r=null,i){return oY(this,t,n,r,i),this}setNodeAttribute(t,n,r){return this.step(new ul(t,n,r)),this}setDocAttribute(t,n){return this.step(new Nc(t,n)),this}addNodeMark(t,n){return this.step(new Ds(t,n)),this}removeNodeMark(t,n){let r=this.doc.nodeAt(t);if(!r)throw new RangeError("No node at position "+t);if(n instanceof ct)n.isInSet(r.marks)&&this.step(new Vo(t,n));else{let i=r.marks,s,o=[];for(;s=n.isInSet(i);)o.push(new Vo(t,s)),i=s.removeFromSet(i);for(let l=o.length-1;l>=0;l--)this.step(o[l])}return this}split(t,n=1,r){return aY(this,t,n,r),this}addMark(t,n,r){return ZK(this,t,n,r),this}removeMark(t,n,r){return QK(this,t,n,r),this}clearIncompatible(t,n,r){return vC(this,t,n,r),this}};const y0=Object.create(null);let Ue=class{constructor(t,n,r){this.$anchor=t,this.$head=n,this.ranges=r||[new yY(t.min(n),t.max(n))]}get anchor(){return this.$anchor.pos}get head(){return this.$head.pos}get from(){return this.$from.pos}get to(){return this.$to.pos}get $from(){return this.ranges[0].$from}get $to(){return this.ranges[0].$to}get empty(){let t=this.ranges;for(let n=0;n<t.length;n++)if(t[n].$from.pos!=t[n].$to.pos)return!1;return!0}content(){return this.$from.doc.slice(this.from,this.to,!0)}replace(t,n=ve.empty){let r=n.content.lastChild,i=null;for(let l=0;l<n.openEnd;l++)i=r,r=r.lastChild;let s=t.steps.length,o=this.ranges;for(let l=0;l<o.length;l++){let{$from:c,$to:f}=o[l],h=t.mapping.slice(s);t.replaceRange(h.map(c.pos),h.map(f.pos),l?ve.empty:n),l==0&&y_(t,s,(r?r.isInline:i&&i.isTextblock)?-1:1)}}replaceWith(t,n){let r=t.steps.length,i=this.ranges;for(let s=0;s<i.length;s++){let{$from:o,$to:l}=i[s],c=t.mapping.slice(r),f=c.map(o.pos),h=c.map(l.pos);s?t.deleteRange(f,h):(t.replaceRangeWith(f,h,n),y_(t,r,n.isInline?-1:1))}}static findFrom(t,n,r=!1){let i=t.parent.inlineContent?new qe(t):Xa(t.node(0),t.parent,t.pos,t.index(),n,r);if(i)return i;for(let s=t.depth-1;s>=0;s--){let o=n<0?Xa(t.node(0),t.node(s),t.before(s+1),t.index(s),n,r):Xa(t.node(0),t.node(s),t.after(s+1),t.index(s)+1,n,r);if(o)return o}return null}static near(t,n=1){return this.findFrom(t,n)||this.findFrom(t,-n)||new nr(t.node(0))}static atStart(t){return Xa(t,t,0,0,1)||new nr(t)}static atEnd(t){return Xa(t,t,t.content.size,t.childCount,-1)||new nr(t)}static fromJSON(t,n){if(!n||!n.type)throw new RangeError("Invalid input for Selection.fromJSON");let r=y0[n.type];if(!r)throw new RangeError(`No selection type ${n.type} defined`);return r.fromJSON(t,n)}static jsonID(t,n){if(t in y0)throw new RangeError("Duplicate use of selection JSON ID "+t);return y0[t]=n,n.prototype.jsonID=t,n}getBookmark(){return qe.between(this.$anchor,this.$head).getBookmark()}};Ue.prototype.visible=!0;class yY{constructor(t,n){this.$from=t,this.$to=n}}let m_=!1;function g_(e){!m_&&!e.parent.inlineContent&&(m_=!0,console.warn("TextSelection endpoint not pointing into a node with inline content ("+e.parent.type.name+")"))}class qe extends Ue{constructor(t,n=t){g_(t),g_(n),super(t,n)}get $cursor(){return this.$anchor.pos==this.$head.pos?this.$head:null}map(t,n){let r=t.resolve(n.map(this.head));if(!r.parent.inlineContent)return Ue.near(r);let i=t.resolve(n.map(this.anchor));return new qe(i.parent.inlineContent?i:r,r)}replace(t,n=ve.empty){if(super.replace(t,n),n==ve.empty){let r=this.$from.marksAcross(this.$to);r&&t.ensureMarks(r)}}eq(t){return t instanceof qe&&t.anchor==this.anchor&&t.head==this.head}getBookmark(){return new Fp(this.anchor,this.head)}toJSON(){return{type:"text",anchor:this.anchor,head:this.head}}static fromJSON(t,n){if(typeof n.anchor!="number"||typeof n.head!="number")throw new RangeError("Invalid input for TextSelection.fromJSON");return new qe(t.resolve(n.anchor),t.resolve(n.head))}static create(t,n,r=n){let i=t.resolve(n);return new this(i,r==n?i:t.resolve(r))}static between(t,n,r){let i=t.pos-n.pos;if((!r||i)&&(r=i>=0?1:-1),!n.parent.inlineContent){let s=Ue.findFrom(n,r,!0)||Ue.findFrom(n,-r,!0);if(s)n=s.$head;else return Ue.near(n,r)}return t.parent.inlineContent||(i==0?t=n:(t=(Ue.findFrom(t,-r,!0)||Ue.findFrom(t,r,!0)).$anchor,t.pos<n.pos!=i<0&&(t=n))),new qe(t,n)}}Ue.jsonID("text",qe);class Fp{constructor(t,n){this.anchor=t,this.head=n}map(t){return new Fp(t.map(this.anchor),t.map(this.head))}resolve(t){return qe.between(t.resolve(this.anchor),t.resolve(this.head))}}class Re extends Ue{constructor(t){let n=t.nodeAfter,r=t.node(0).resolve(t.pos+n.nodeSize);super(t,r),this.node=n}map(t,n){let{deleted:r,pos:i}=n.mapResult(this.anchor),s=t.resolve(i);return r?Ue.near(s):new Re(s)}content(){return new ve(pe.from(this.node),0,0)}eq(t){return t instanceof Re&&t.anchor==this.anchor}toJSON(){return{type:"node",anchor:this.anchor}}getBookmark(){return new xC(this.anchor)}static fromJSON(t,n){if(typeof n.anchor!="number")throw new RangeError("Invalid input for NodeSelection.fromJSON");return new Re(t.resolve(n.anchor))}static create(t,n){return new Re(t.resolve(n))}static isSelectable(t){return!t.isText&&t.type.spec.selectable!==!1}}Re.prototype.visible=!1;Ue.jsonID("node",Re);class xC{constructor(t){this.anchor=t}map(t){let{deleted:n,pos:r}=t.mapResult(this.anchor);return n?new Fp(r,r):new xC(r)}resolve(t){let n=t.resolve(this.anchor),r=n.nodeAfter;return r&&Re.isSelectable(r)?new Re(n):Ue.near(n)}}class nr extends Ue{constructor(t){super(t.resolve(0),t.resolve(t.content.size))}replace(t,n=ve.empty){if(n==ve.empty){t.delete(0,t.doc.content.size);let r=Ue.atStart(t.doc);r.eq(t.selection)||t.setSelection(r)}else super.replace(t,n)}toJSON(){return{type:"all"}}static fromJSON(t){return new nr(t)}map(t){return new nr(t)}eq(t){return t instanceof nr}getBookmark(){return vY}}Ue.jsonID("all",nr);const vY={map(){return this},resolve(e){return new nr(e)}};function Xa(e,t,n,r,i,s=!1){if(t.inlineContent)return qe.create(e,n);for(let o=r-(i>0?0:1);i>0?o<t.childCount:o>=0;o+=i){let l=t.child(o);if(l.isAtom){if(!s&&Re.isSelectable(l))return Re.create(e,n-(i<0?l.nodeSize:0))}else{let c=Xa(e,l,n+i,i<0?l.childCount:0,i,s);if(c)return c}n+=l.nodeSize*i}return null}function y_(e,t,n){let r=e.steps.length-1;if(r<t)return;let i=e.steps[r];if(!(i instanceof Jt||i instanceof en))return;let s=e.mapping.maps[r],o;s.forEach((l,c,f,h)=>{o==null&&(o=h)}),e.setSelection(Ue.near(e.doc.resolve(o),n))}const v_=1,Id=2,b_=4;class bY extends BB{constructor(t){super(t.doc),this.curSelectionFor=0,this.updated=0,this.meta=Object.create(null),this.time=Date.now(),this.curSelection=t.selection,this.storedMarks=t.storedMarks}get selection(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection}setSelection(t){if(t.$from.doc!=this.doc)throw new RangeError("Selection passed to setSelection must point at the current document");return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|v_)&~Id,this.storedMarks=null,this}get selectionSet(){return(this.updated&v_)>0}setStoredMarks(t){return this.storedMarks=t,this.updated|=Id,this}ensureMarks(t){return ct.sameSet(this.storedMarks||this.selection.$from.marks(),t)||this.setStoredMarks(t),this}addStoredMark(t){return this.ensureMarks(t.addToSet(this.storedMarks||this.selection.$head.marks()))}removeStoredMark(t){return this.ensureMarks(t.removeFromSet(this.storedMarks||this.selection.$head.marks()))}get storedMarksSet(){return(this.updated&Id)>0}addStep(t,n){super.addStep(t,n),this.updated=this.updated&~Id,this.storedMarks=null}setTime(t){return this.time=t,this}replaceSelection(t){return this.selection.replace(this,t),this}replaceSelectionWith(t,n=!0){let r=this.selection;return n&&(t=t.mark(this.storedMarks||(r.empty?r.$from.marks():r.$from.marksAcross(r.$to)||ct.none))),r.replaceWith(this,t),this}deleteSelection(){return this.selection.replace(this),this}insertText(t,n,r){let i=this.doc.type.schema;if(n==null)return t?this.replaceSelectionWith(i.text(t),!0):this.deleteSelection();{if(r==null&&(r=n),r=r??n,!t)return this.deleteRange(n,r);let s=this.storedMarks;if(!s){let o=this.doc.resolve(n);s=r==n?o.marks():o.marksAcross(this.doc.resolve(r))}return this.replaceRangeWith(n,r,i.text(t,s)),this.selection.empty||this.setSelection(Ue.near(this.selection.$to)),this}}setMeta(t,n){return this.meta[typeof t=="string"?t:t.key]=n,this}getMeta(t){return this.meta[typeof t=="string"?t:t.key]}get isGeneric(){for(let t in this.meta)return!1;return!0}scrollIntoView(){return this.updated|=b_,this}get scrolledIntoView(){return(this.updated&b_)>0}}function x_(e,t){return!t||!e?e:e.bind(t)}class Yu{constructor(t,n,r){this.name=t,this.init=x_(n.init,r),this.apply=x_(n.apply,r)}}const xY=[new Yu("doc",{init(e){return e.doc||e.schema.topNodeType.createAndFill()},apply(e){return e.doc}}),new Yu("selection",{init(e,t){return e.selection||Ue.atStart(t.doc)},apply(e){return e.selection}}),new Yu("storedMarks",{init(e){return e.storedMarks||null},apply(e,t,n,r){return r.selection.$cursor?e.storedMarks:null}}),new Yu("scrollToSelection",{init(){return 0},apply(e,t){return e.scrolledIntoView?t+1:t}})];class v0{constructor(t,n){this.schema=t,this.plugins=[],this.pluginsByKey=Object.create(null),this.fields=xY.slice(),n&&n.forEach(r=>{if(this.pluginsByKey[r.key])throw new RangeError("Adding different instances of a keyed plugin ("+r.key+")");this.plugins.push(r),this.pluginsByKey[r.key]=r,r.spec.state&&this.fields.push(new Yu(r.key,r.spec.state,r))})}}class sl{constructor(t){this.config=t}get schema(){return this.config.schema}get plugins(){return this.config.plugins}apply(t){return this.applyTransaction(t).state}filterTransaction(t,n=-1){for(let r=0;r<this.config.plugins.length;r++)if(r!=n){let i=this.config.plugins[r];if(i.spec.filterTransaction&&!i.spec.filterTransaction.call(i,t,this))return!1}return!0}applyTransaction(t){if(!this.filterTransaction(t))return{state:this,transactions:[]};let n=[t],r=this.applyInner(t),i=null;for(;;){let s=!1;for(let o=0;o<this.config.plugins.length;o++){let l=this.config.plugins[o];if(l.spec.appendTransaction){let c=i?i[o].n:0,f=i?i[o].state:this,h=c<n.length&&l.spec.appendTransaction.call(l,c?n.slice(c):n,f,r);if(h&&r.filterTransaction(h,o)){if(h.setMeta("appendedTransaction",t),!i){i=[];for(let p=0;p<this.config.plugins.length;p++)i.push(p<o?{state:r,n:n.length}:{state:this,n:0})}n.push(h),r=r.applyInner(h),s=!0}i&&(i[o]={state:r,n:n.length})}}if(!s)return{state:r,transactions:n}}}applyInner(t){if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");let n=new sl(this.config),r=this.config.fields;for(let i=0;i<r.length;i++){let s=r[i];n[s.name]=s.apply(t,this[s.name],this,n)}return n}get tr(){return new bY(this)}static create(t){let n=new v0(t.doc?t.doc.type.schema:t.schema,t.plugins),r=new sl(n);for(let i=0;i<n.fields.length;i++)r[n.fields[i].name]=n.fields[i].init(t,r);return r}reconfigure(t){let n=new v0(this.schema,t.plugins),r=n.fields,i=new sl(n);for(let s=0;s<r.length;s++){let o=r[s].name;i[o]=this.hasOwnProperty(o)?this[o]:r[s].init(t,i)}return i}toJSON(t){let n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(this.storedMarks&&(n.storedMarks=this.storedMarks.map(r=>r.toJSON())),t&&typeof t=="object")for(let r in t){if(r=="doc"||r=="selection")throw new RangeError("The JSON fields `doc` and `selection` are reserved");let i=t[r],s=i.spec.state;s&&s.toJSON&&(n[r]=s.toJSON.call(i,this[i.key]))}return n}static fromJSON(t,n,r){if(!n)throw new RangeError("Invalid input for EditorState.fromJSON");if(!t.schema)throw new RangeError("Required config field 'schema' missing");let i=new v0(t.schema,t.plugins),s=new sl(i);return i.fields.forEach(o=>{if(o.name=="doc")s.doc=js.fromJSON(t.schema,n.doc);else if(o.name=="selection")s.selection=Ue.fromJSON(s.doc,n.selection);else if(o.name=="storedMarks")n.storedMarks&&(s.storedMarks=n.storedMarks.map(t.schema.markFromJSON));else{if(r)for(let l in r){let c=r[l],f=c.spec.state;if(c.key==o.name&&f&&f.fromJSON&&Object.prototype.hasOwnProperty.call(n,l)){s[o.name]=f.fromJSON.call(c,t,n[l],s);return}}s[o.name]=o.init(t,s)}}),s}}function IB(e,t,n){for(let r in e){let i=e[r];i instanceof Function?i=i.bind(t):r=="handleDOMEvents"&&(i=IB(i,t,{})),n[r]=i}return n}class Rt{constructor(t){this.spec=t,this.props={},t.props&&IB(t.props,this,this.props),this.key=t.key?t.key.key:zB("plugin")}getState(t){return t[this.key]}}const b0=Object.create(null);function zB(e){return e in b0?e+"$"+ ++b0[e]:(b0[e]=0,e+"$")}class nn{constructor(t="key"){this.key=zB(t)}get(t){return t.config.pluginsByKey[this.key]}getState(t){return t[this.key]}}const dn=function(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t},gl=function(e){let t=e.assignedSlot||e.parentNode;return t&&t.nodeType==11?t.host:t};let WS=null;const Oi=function(e,t,n){let r=WS||(WS=document.createRange());return r.setEnd(e,n??e.nodeValue.length),r.setStart(e,t||0),r},wY=function(){WS=null},Ho=function(e,t,n,r){return n&&(w_(e,t,n,r,-1)||w_(e,t,n,r,1))},SY=/^(img|br|input|textarea|hr)$/i;function w_(e,t,n,r,i){for(var s;;){if(e==n&&t==r)return!0;if(t==(i<0?0:br(e))){let o=e.parentNode;if(!o||o.nodeType!=1||ef(e)||SY.test(e.nodeName)||e.contentEditable=="false")return!1;t=dn(e)+(i<0?0:1),e=o}else if(e.nodeType==1){let o=e.childNodes[t+(i<0?-1:0)];if(o.nodeType==1&&o.contentEditable=="false")if(!((s=o.pmViewDesc)===null||s===void 0)&&s.ignoreForSelection)t+=i;else return!1;else e=o,t=i<0?br(e):0}else return!1}}function br(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function EY(e,t){for(;;){if(e.nodeType==3&&t)return e;if(e.nodeType==1&&t>0){if(e.contentEditable=="false")return null;e=e.childNodes[t-1],t=br(e)}else if(e.parentNode&&!ef(e))t=dn(e),e=e.parentNode;else return null}}function CY(e,t){for(;;){if(e.nodeType==3&&t<e.nodeValue.length)return e;if(e.nodeType==1&&t<e.childNodes.length){if(e.contentEditable=="false")return null;e=e.childNodes[t],t=0}else if(e.parentNode&&!ef(e))t=dn(e)+1,e=e.parentNode;else return null}}function kY(e,t,n){for(let r=t==0,i=t==br(e);r||i;){if(e==n)return!0;let s=dn(e);if(e=e.parentNode,!e)return!1;r=r&&s==0,i=i&&s==br(e)}}function ef(e){let t;for(let n=e;n&&!(t=n.pmViewDesc);n=n.parentNode);return t&&t.node&&t.node.isBlock&&(t.dom==e||t.contentDOM==e)}const Up=function(e){return e.focusNode&&Ho(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)};function So(e,t){let n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=e,n.key=n.code=t,n}function TY(e){let t=e.activeElement;for(;t&&t.shadowRoot;)t=t.shadowRoot.activeElement;return t}function AY(e,t,n){if(e.caretPositionFromPoint)try{let r=e.caretPositionFromPoint(t,n);if(r)return{node:r.offsetNode,offset:Math.min(br(r.offsetNode),r.offset)}}catch{}if(e.caretRangeFromPoint){let r=e.caretRangeFromPoint(t,n);if(r)return{node:r.startContainer,offset:Math.min(br(r.startContainer),r.startOffset)}}}const ri=typeof navigator<"u"?navigator:null,S_=typeof document<"u"?document:null,Ys=ri&&ri.userAgent||"",XS=/Edge\/(\d+)/.exec(Ys),qB=/MSIE \d/.exec(Ys),ZS=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(Ys),qn=!!(qB||ZS||XS),Ps=qB?document.documentMode:ZS?+ZS[1]:XS?+XS[1]:0,Er=!qn&&/gecko\/(\d+)/i.test(Ys);Er&&+(/Firefox\/(\d+)/.exec(Ys)||[0,0])[1];const QS=!qn&&/Chrome\/(\d+)/.exec(Ys),wn=!!QS,VB=QS?+QS[1]:0,An=!qn&&!!ri&&/Apple Computer/.test(ri.vendor),yl=An&&(/Mobile\/\w+/.test(Ys)||!!ri&&ri.maxTouchPoints>2),vr=yl||(ri?/Mac/.test(ri.platform):!1),MY=ri?/Win/.test(ri.platform):!1,ji=/Android \d/.test(Ys),tf=!!S_&&"webkitFontSmoothing"in S_.documentElement.style,NY=tf?+(/\bAppleWebKit\/(\d+)/.exec(navigator.userAgent)||[0,0])[1]:0;function _Y(e){let t=e.defaultView&&e.defaultView.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.documentElement.clientWidth,top:0,bottom:e.documentElement.clientHeight}}function Mi(e,t){return typeof e=="number"?e:e[t]}function RY(e){let t=e.getBoundingClientRect(),n=t.width/e.offsetWidth||1,r=t.height/e.offsetHeight||1;return{left:t.left,right:t.left+e.clientWidth*n,top:t.top,bottom:t.top+e.clientHeight*r}}function E_(e,t,n){let r=e.someProp("scrollThreshold")||0,i=e.someProp("scrollMargin")||5,s=e.dom.ownerDocument;for(let o=n||e.dom;o;){if(o.nodeType!=1){o=gl(o);continue}let l=o,c=l==s.body,f=c?_Y(s):RY(l),h=0,p=0;if(t.top<f.top+Mi(r,"top")?p=-(f.top-t.top+Mi(i,"top")):t.bottom>f.bottom-Mi(r,"bottom")&&(p=t.bottom-t.top>f.bottom-f.top?t.top+Mi(i,"top")-f.top:t.bottom-f.bottom+Mi(i,"bottom")),t.left<f.left+Mi(r,"left")?h=-(f.left-t.left+Mi(i,"left")):t.right>f.right-Mi(r,"right")&&(h=t.right-f.right+Mi(i,"right")),h||p)if(c)s.defaultView.scrollBy(h,p);else{let y=l.scrollLeft,b=l.scrollTop;p&&(l.scrollTop+=p),h&&(l.scrollLeft+=h);let S=l.scrollLeft-y,x=l.scrollTop-b;t={left:t.left-S,top:t.top-x,right:t.right-S,bottom:t.bottom-x}}let g=c?"fixed":getComputedStyle(o).position;if(/^(fixed|sticky)$/.test(g))break;o=g=="absolute"?o.offsetParent:gl(o)}}function DY(e){let t=e.dom.getBoundingClientRect(),n=Math.max(0,t.top),r,i;for(let s=(t.left+t.right)/2,o=n+1;o<Math.min(innerHeight,t.bottom);o+=5){let l=e.root.elementFromPoint(s,o);if(!l||l==e.dom||!e.dom.contains(l))continue;let c=l.getBoundingClientRect();if(c.top>=n-20){r=l,i=c.top;break}}return{refDOM:r,refTop:i,stack:HB(e.dom)}}function HB(e){let t=[],n=e.ownerDocument;for(let r=e;r&&(t.push({dom:r,top:r.scrollTop,left:r.scrollLeft}),e!=n);r=gl(r));return t}function OY({refDOM:e,refTop:t,stack:n}){let r=e?e.getBoundingClientRect().top:0;FB(n,r==0?0:r-t)}function FB(e,t){for(let n=0;n<e.length;n++){let{dom:r,top:i,left:s}=e[n];r.scrollTop!=i+t&&(r.scrollTop=i+t),r.scrollLeft!=s&&(r.scrollLeft=s)}}let Fa=null;function jY(e){if(e.setActive)return e.setActive();if(Fa)return e.focus(Fa);let t=HB(e);e.focus(Fa==null?{get preventScroll(){return Fa={preventScroll:!0},!0}}:void 0),Fa||(Fa=!1,FB(t,0))}function UB(e,t){let n,r=2e8,i,s=0,o=t.top,l=t.top,c,f;for(let h=e.firstChild,p=0;h;h=h.nextSibling,p++){let g;if(h.nodeType==1)g=h.getClientRects();else if(h.nodeType==3)g=Oi(h).getClientRects();else continue;for(let y=0;y<g.length;y++){let b=g[y];if(b.top<=o&&b.bottom>=l){o=Math.max(b.bottom,o),l=Math.min(b.top,l);let S=b.left>t.left?b.left-t.left:b.right<t.left?t.left-b.right:0;if(S<r){n=h,r=S,i=S&&n.nodeType==3?{left:b.right<t.left?b.right:b.left,top:t.top}:t,h.nodeType==1&&S&&(s=p+(t.left>=(b.left+b.right)/2?1:0));continue}}else b.top>t.top&&!c&&b.left<=t.left&&b.right>=t.left&&(c=h,f={left:Math.max(b.left,Math.min(b.right,t.left)),top:b.top});!n&&(t.left>=b.right&&t.top>=b.top||t.left>=b.left&&t.top>=b.bottom)&&(s=p+1)}}return!n&&c&&(n=c,i=f,r=0),n&&n.nodeType==3?LY(n,i):!n||r&&n.nodeType==1?{node:e,offset:s}:UB(n,i)}function LY(e,t){let n=e.nodeValue.length,r=document.createRange();for(let i=0;i<n;i++){r.setEnd(e,i+1),r.setStart(e,i);let s=Es(r,1);if(s.top!=s.bottom&&wC(t,s))return{node:e,offset:i+(t.left>=(s.left+s.right)/2?1:0)}}return{node:e,offset:0}}function wC(e,t){return e.left>=t.left-1&&e.left<=t.right+1&&e.top>=t.top-1&&e.top<=t.bottom+1}function PY(e,t){let n=e.parentNode;return n&&/^li$/i.test(n.nodeName)&&t.left<e.getBoundingClientRect().left?n:e}function BY(e,t,n){let{node:r,offset:i}=UB(t,n),s=-1;if(r.nodeType==1&&!r.firstChild){let o=r.getBoundingClientRect();s=o.left!=o.right&&n.left>(o.left+o.right)/2?1:-1}return e.docView.posFromDOM(r,i,s)}function IY(e,t,n,r){let i=-1;for(let s=t,o=!1;s!=e.dom;){let l=e.docView.nearestDesc(s,!0),c;if(!l)return null;if(l.dom.nodeType==1&&(l.node.isBlock&&l.parent||!l.contentDOM)&&((c=l.dom.getBoundingClientRect()).width||c.height)&&(l.node.isBlock&&l.parent&&!/^T(R|BODY|HEAD|FOOT)$/.test(l.dom.nodeName)&&(!o&&c.left>r.left||c.top>r.top?i=l.posBefore:(!o&&c.right<r.left||c.bottom<r.top)&&(i=l.posAfter),o=!0),!l.contentDOM&&i<0&&!l.node.isText))return(l.node.isBlock?r.top<(c.top+c.bottom)/2:r.left<(c.left+c.right)/2)?l.posBefore:l.posAfter;s=l.dom.parentNode}return i>-1?i:e.docView.posFromDOM(t,n,-1)}function $B(e,t,n){let r=e.childNodes.length;if(r&&n.top<n.bottom)for(let i=Math.max(0,Math.min(r-1,Math.floor(r*(t.top-n.top)/(n.bottom-n.top))-2)),s=i;;){let o=e.childNodes[s];if(o.nodeType==1){let l=o.getClientRects();for(let c=0;c<l.length;c++){let f=l[c];if(wC(t,f))return $B(o,t,f)}}if((s=(s+1)%r)==i)break}return e}function zY(e,t){let n=e.dom.ownerDocument,r,i=0,s=AY(n,t.left,t.top);s&&({node:r,offset:i}=s);let o=(e.root.elementFromPoint?e.root:n).elementFromPoint(t.left,t.top),l;if(!o||!e.dom.contains(o.nodeType!=1?o.parentNode:o)){let f=e.dom.getBoundingClientRect();if(!wC(t,f)||(o=$B(e.dom,t,f),!o))return null}if(An)for(let f=o;r&&f;f=gl(f))f.draggable&&(r=void 0);if(o=PY(o,t),r){if(Er&&r.nodeType==1&&(i=Math.min(i,r.childNodes.length),i<r.childNodes.length)){let h=r.childNodes[i],p;h.nodeName=="IMG"&&(p=h.getBoundingClientRect()).right<=t.left&&p.bottom>t.top&&i++}let f;tf&&i&&r.nodeType==1&&(f=r.childNodes[i-1]).nodeType==1&&f.contentEditable=="false"&&f.getBoundingClientRect().top>=t.top&&i--,r==e.dom&&i==r.childNodes.length-1&&r.lastChild.nodeType==1&&t.top>r.lastChild.getBoundingClientRect().bottom?l=e.state.doc.content.size:(i==0||r.nodeType!=1||r.childNodes[i-1].nodeName!="BR")&&(l=IY(e,r,i,t))}l==null&&(l=BY(e,o,t));let c=e.docView.nearestDesc(o,!0);return{pos:l,inside:c?c.posAtStart-c.border:-1}}function C_(e){return e.top<e.bottom||e.left<e.right}function Es(e,t){let n=e.getClientRects();if(n.length){let r=n[t<0?0:n.length-1];if(C_(r))return r}return Array.prototype.find.call(n,C_)||e.getBoundingClientRect()}const qY=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac]/;function GB(e,t,n){let{node:r,offset:i,atom:s}=e.docView.domFromPos(t,n<0?-1:1),o=tf||Er;if(r.nodeType==3)if(o&&(qY.test(r.nodeValue)||(n<0?!i:i==r.nodeValue.length))){let c=Es(Oi(r,i,i),n);if(Er&&i&&/\s/.test(r.nodeValue[i-1])&&i<r.nodeValue.length){let f=Es(Oi(r,i-1,i-1),-1);if(f.top==c.top){let h=Es(Oi(r,i,i+1),-1);if(h.top!=c.top)return qu(h,h.left<f.left)}}return c}else{let c=i,f=i,h=n<0?1:-1;return n<0&&!i?(f++,h=-1):n>=0&&i==r.nodeValue.length?(c--,h=1):n<0?c--:f++,qu(Es(Oi(r,c,f),h),h<0)}if(!e.state.doc.resolve(t-(s||0)).parent.inlineContent){if(s==null&&i&&(n<0||i==br(r))){let c=r.childNodes[i-1];if(c.nodeType==1)return x0(c.getBoundingClientRect(),!1)}if(s==null&&i<br(r)){let c=r.childNodes[i];if(c.nodeType==1)return x0(c.getBoundingClientRect(),!0)}return x0(r.getBoundingClientRect(),n>=0)}if(s==null&&i&&(n<0||i==br(r))){let c=r.childNodes[i-1],f=c.nodeType==3?Oi(c,br(c)-(o?0:1)):c.nodeType==1&&(c.nodeName!="BR"||!c.nextSibling)?c:null;if(f)return qu(Es(f,1),!1)}if(s==null&&i<br(r)){let c=r.childNodes[i];for(;c.pmViewDesc&&c.pmViewDesc.ignoreForCoords;)c=c.nextSibling;let f=c?c.nodeType==3?Oi(c,0,o?0:1):c.nodeType==1?c:null:null;if(f)return qu(Es(f,-1),!0)}return qu(Es(r.nodeType==3?Oi(r):r,-n),n>=0)}function qu(e,t){if(e.width==0)return e;let n=t?e.left:e.right;return{top:e.top,bottom:e.bottom,left:n,right:n}}function x0(e,t){if(e.height==0)return e;let n=t?e.top:e.bottom;return{top:n,bottom:n,left:e.left,right:e.right}}function KB(e,t,n){let r=e.state,i=e.root.activeElement;r!=t&&e.updateState(t),i!=e.dom&&e.focus();try{return n()}finally{r!=t&&e.updateState(r),i!=e.dom&&i&&i.focus()}}function VY(e,t,n){let r=t.selection,i=n=="up"?r.$from:r.$to;return KB(e,t,()=>{let{node:s}=e.docView.domFromPos(i.pos,n=="up"?-1:1);for(;;){let l=e.docView.nearestDesc(s,!0);if(!l)break;if(l.node.isBlock){s=l.contentDOM||l.dom;break}s=l.dom.parentNode}let o=GB(e,i.pos,1);for(let l=s.firstChild;l;l=l.nextSibling){let c;if(l.nodeType==1)c=l.getClientRects();else if(l.nodeType==3)c=Oi(l,0,l.nodeValue.length).getClientRects();else continue;for(let f=0;f<c.length;f++){let h=c[f];if(h.bottom>h.top+1&&(n=="up"?o.top-h.top>(h.bottom-o.top)*2:h.bottom-o.bottom>(o.bottom-h.top)*2))return!1}}return!0})}const HY=/[\u0590-\u08ac]/;function FY(e,t,n){let{$head:r}=t.selection;if(!r.parent.isTextblock)return!1;let i=r.parentOffset,s=!i,o=i==r.parent.content.size,l=e.domSelection();return l?!HY.test(r.parent.textContent)||!l.modify?n=="left"||n=="backward"?s:o:KB(e,t,()=>{let{focusNode:c,focusOffset:f,anchorNode:h,anchorOffset:p}=e.domSelectionRange(),g=l.caretBidiLevel;l.modify("move",n,"character");let y=r.depth?e.docView.domAfterPos(r.before()):e.dom,{focusNode:b,focusOffset:S}=e.domSelectionRange(),x=b&&!y.contains(b.nodeType==1?b:b.parentNode)||c==b&&f==S;try{l.collapse(h,p),c&&(c!=h||f!=p)&&l.extend&&l.extend(c,f)}catch{}return g!=null&&(l.caretBidiLevel=g),x}):r.pos==r.start()||r.pos==r.end()}let k_=null,T_=null,A_=!1;function UY(e,t,n){return k_==t&&T_==n?A_:(k_=t,T_=n,A_=n=="up"||n=="down"?VY(e,t,n):FY(e,t,n))}const Cr=0,M_=1,ko=2,ii=3;class nf{constructor(t,n,r,i){this.parent=t,this.children=n,this.dom=r,this.contentDOM=i,this.dirty=Cr,r.pmViewDesc=this}matchesWidget(t){return!1}matchesMark(t){return!1}matchesNode(t,n,r){return!1}matchesHack(t){return!1}parseRule(){return null}stopEvent(t){return!1}get size(){let t=0;for(let n=0;n<this.children.length;n++)t+=this.children[n].size;return t}get border(){return 0}destroy(){this.parent=void 0,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=void 0);for(let t=0;t<this.children.length;t++)this.children[t].destroy()}posBeforeChild(t){for(let n=0,r=this.posAtStart;;n++){let i=this.children[n];if(i==t)return r;r+=i.size}}get posBefore(){return this.parent.posBeforeChild(this)}get posAtStart(){return this.parent?this.parent.posBeforeChild(this)+this.border:0}get posAfter(){return this.posBefore+this.size}get posAtEnd(){return this.posAtStart+this.size-2*this.border}localPosFromDOM(t,n,r){if(this.contentDOM&&this.contentDOM.contains(t.nodeType==1?t:t.parentNode))if(r<0){let s,o;if(t==this.contentDOM)s=t.childNodes[n-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.previousSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.previousSibling;return s?this.posBeforeChild(o)+o.size:this.posAtStart}else{let s,o;if(t==this.contentDOM)s=t.childNodes[n];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.nextSibling}for(;s&&!((o=s.pmViewDesc)&&o.parent==this);)s=s.nextSibling;return s?this.posBeforeChild(o):this.posAtEnd}let i;if(t==this.dom&&this.contentDOM)i=n>dn(this.contentDOM);else if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))i=t.compareDocumentPosition(this.contentDOM)&2;else if(this.dom.firstChild){if(n==0)for(let s=t;;s=s.parentNode){if(s==this.dom){i=!1;break}if(s.previousSibling)break}if(i==null&&n==t.childNodes.length)for(let s=t;;s=s.parentNode){if(s==this.dom){i=!0;break}if(s.nextSibling)break}}return i??r>0?this.posAtEnd:this.posAtStart}nearestDesc(t,n=!1){for(let r=!0,i=t;i;i=i.parentNode){let s=this.getDesc(i),o;if(s&&(!n||s.node))if(r&&(o=s.nodeDOM)&&!(o.nodeType==1?o.contains(t.nodeType==1?t:t.parentNode):o==t))r=!1;else return s}}getDesc(t){let n=t.pmViewDesc;for(let r=n;r;r=r.parent)if(r==this)return n}posFromDOM(t,n,r){for(let i=t;i;i=i.parentNode){let s=this.getDesc(i);if(s)return s.localPosFromDOM(t,n,r)}return-1}descAt(t){for(let n=0,r=0;n<this.children.length;n++){let i=this.children[n],s=r+i.size;if(r==t&&s!=r){for(;!i.border&&i.children.length;)for(let o=0;o<i.children.length;o++){let l=i.children[o];if(l.size){i=l;break}}return i}if(t<s)return i.descAt(t-r-i.border);r=s}}domFromPos(t,n){if(!this.contentDOM)return{node:this.dom,offset:0,atom:t+1};let r=0,i=0;for(let s=0;r<this.children.length;r++){let o=this.children[r],l=s+o.size;if(l>t||o instanceof WB){i=t-s;break}s=l}if(i)return this.children[r].domFromPos(i-this.children[r].border,n);for(let s;r&&!(s=this.children[r-1]).size&&s instanceof YB&&s.side>=0;r--);if(n<=0){let s,o=!0;for(;s=r?this.children[r-1]:null,!(!s||s.dom.parentNode==this.contentDOM);r--,o=!1);return s&&n&&o&&!s.border&&!s.domAtom?s.domFromPos(s.size,n):{node:this.contentDOM,offset:s?dn(s.dom)+1:0}}else{let s,o=!0;for(;s=r<this.children.length?this.children[r]:null,!(!s||s.dom.parentNode==this.contentDOM);r++,o=!1);return s&&o&&!s.border&&!s.domAtom?s.domFromPos(0,n):{node:this.contentDOM,offset:s?dn(s.dom):this.contentDOM.childNodes.length}}}parseRange(t,n,r=0){if(this.children.length==0)return{node:this.contentDOM,from:t,to:n,fromOffset:0,toOffset:this.contentDOM.childNodes.length};let i=-1,s=-1;for(let o=r,l=0;;l++){let c=this.children[l],f=o+c.size;if(i==-1&&t<=f){let h=o+c.border;if(t>=h&&n<=f-c.border&&c.node&&c.contentDOM&&this.contentDOM.contains(c.contentDOM))return c.parseRange(t,n,h);t=o;for(let p=l;p>0;p--){let g=this.children[p-1];if(g.size&&g.dom.parentNode==this.contentDOM&&!g.emptyChildAt(1)){i=dn(g.dom)+1;break}t-=g.size}i==-1&&(i=0)}if(i>-1&&(f>n||l==this.children.length-1)){n=f;for(let h=l+1;h<this.children.length;h++){let p=this.children[h];if(p.size&&p.dom.parentNode==this.contentDOM&&!p.emptyChildAt(-1)){s=dn(p.dom);break}n+=p.size}s==-1&&(s=this.contentDOM.childNodes.length);break}o=f}return{node:this.contentDOM,from:t,to:n,fromOffset:i,toOffset:s}}emptyChildAt(t){if(this.border||!this.contentDOM||!this.children.length)return!1;let n=this.children[t<0?0:this.children.length-1];return n.size==0||n.emptyChildAt(t)}domAfterPos(t){let{node:n,offset:r}=this.domFromPos(t,0);if(n.nodeType!=1||r==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[r]}setSelection(t,n,r,i=!1){let s=Math.min(t,n),o=Math.max(t,n);for(let y=0,b=0;y<this.children.length;y++){let S=this.children[y],x=b+S.size;if(s>b&&o<x)return S.setSelection(t-b-S.border,n-b-S.border,r,i);b=x}let l=this.domFromPos(t,t?-1:1),c=n==t?l:this.domFromPos(n,n?-1:1),f=r.root.getSelection(),h=r.domSelectionRange(),p=!1;if((Er||An)&&t==n){let{node:y,offset:b}=l;if(y.nodeType==3){if(p=!!(b&&y.nodeValue[b-1]==`
`),p&&b==y.nodeValue.length)for(let S=y,x;S;S=S.parentNode){if(x=S.nextSibling){x.nodeName=="BR"&&(l=c={node:x.parentNode,offset:dn(x)+1});break}let C=S.pmViewDesc;if(C&&C.node&&C.node.isBlock)break}}else{let S=y.childNodes[b-1];p=S&&(S.nodeName=="BR"||S.contentEditable=="false")}}if(Er&&h.focusNode&&h.focusNode!=c.node&&h.focusNode.nodeType==1){let y=h.focusNode.childNodes[h.focusOffset];y&&y.contentEditable=="false"&&(i=!0)}if(!(i||p&&An)&&Ho(l.node,l.offset,h.anchorNode,h.anchorOffset)&&Ho(c.node,c.offset,h.focusNode,h.focusOffset))return;let g=!1;if((f.extend||t==n)&&!(p&&Er)){f.collapse(l.node,l.offset);try{t!=n&&f.extend(c.node,c.offset),g=!0}catch{}}if(!g){if(t>n){let b=l;l=c,c=b}let y=document.createRange();y.setEnd(c.node,c.offset),y.setStart(l.node,l.offset),f.removeAllRanges(),f.addRange(y)}}ignoreMutation(t){return!this.contentDOM&&t.type!="selection"}get contentLost(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)}markDirty(t,n){for(let r=0,i=0;i<this.children.length;i++){let s=this.children[i],o=r+s.size;if(r==o?t<=o&&n>=r:t<o&&n>r){let l=r+s.border,c=o-s.border;if(t>=l&&n<=c){this.dirty=t==r||n==o?ko:M_,t==l&&n==c&&(s.contentLost||s.dom.parentNode!=this.contentDOM)?s.dirty=ii:s.markDirty(t-l,n-l);return}else s.dirty=s.dom==s.contentDOM&&s.dom.parentNode==this.contentDOM&&!s.children.length?ko:ii}r=o}this.dirty=ko}markParentsDirty(){let t=1;for(let n=this.parent;n;n=n.parent,t++){let r=t==1?ko:M_;n.dirty<r&&(n.dirty=r)}}get domAtom(){return!1}get ignoreForCoords(){return!1}get ignoreForSelection(){return!1}isText(t){return!1}}class YB extends nf{constructor(t,n,r,i){let s,o=n.type.toDOM;if(typeof o=="function"&&(o=o(r,()=>{if(!s)return i;if(s.parent)return s.parent.posBeforeChild(s)})),!n.type.spec.raw){if(o.nodeType!=1){let l=document.createElement("span");l.appendChild(o),o=l}o.contentEditable="false",o.classList.add("ProseMirror-widget")}super(t,[],o,null),this.widget=n,this.widget=n,s=this}matchesWidget(t){return this.dirty==Cr&&t.type.eq(this.widget.type)}parseRule(){return{ignore:!0}}stopEvent(t){let n=this.widget.spec.stopEvent;return n?n(t):!1}ignoreMutation(t){return t.type!="selection"||this.widget.spec.ignoreSelection}destroy(){this.widget.type.destroy(this.dom),super.destroy()}get domAtom(){return!0}get ignoreForSelection(){return!!this.widget.type.spec.relaxedSide}get side(){return this.widget.type.side}}class $Y extends nf{constructor(t,n,r,i){super(t,[],n,null),this.textDOM=r,this.text=i}get size(){return this.text.length}localPosFromDOM(t,n){return t!=this.textDOM?this.posAtStart+(n?this.size:0):this.posAtStart+n}domFromPos(t){return{node:this.textDOM,offset:t}}ignoreMutation(t){return t.type==="characterData"&&t.target.nodeValue==t.oldValue}}class Fo extends nf{constructor(t,n,r,i,s){super(t,[],r,i),this.mark=n,this.spec=s}static create(t,n,r,i){let s=i.nodeViews[n.type.name],o=s&&s(n,i,r);return(!o||!o.dom)&&(o=Jo.renderSpec(document,n.type.spec.toDOM(n,r),null,n.attrs)),new Fo(t,n,o.dom,o.contentDOM||o.dom,o)}parseRule(){return this.dirty&ii||this.mark.type.spec.reparseInView?null:{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}}matchesMark(t){return this.dirty!=ii&&this.mark.eq(t)}markDirty(t,n){if(super.markDirty(t,n),this.dirty!=Cr){let r=this.parent;for(;!r.node;)r=r.parent;r.dirty<this.dirty&&(r.dirty=this.dirty),this.dirty=Cr}}slice(t,n,r){let i=Fo.create(this.parent,this.mark,!0,r),s=this.children,o=this.size;n<o&&(s=eE(s,n,o,r)),t>0&&(s=eE(s,0,t,r));for(let l=0;l<s.length;l++)s[l].parent=i;return i.children=s,i}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}}class Bs extends nf{constructor(t,n,r,i,s,o,l,c,f){super(t,[],s,o),this.node=n,this.outerDeco=r,this.innerDeco=i,this.nodeDOM=l}static create(t,n,r,i,s,o){let l=s.nodeViews[n.type.name],c,f=l&&l(n,s,()=>{if(!c)return o;if(c.parent)return c.parent.posBeforeChild(c)},r,i),h=f&&f.dom,p=f&&f.contentDOM;if(n.isText){if(!h)h=document.createTextNode(n.text);else if(h.nodeType!=3)throw new RangeError("Text must be rendered as a DOM text node")}else h||({dom:h,contentDOM:p}=Jo.renderSpec(document,n.type.spec.toDOM(n),null,n.attrs));!p&&!n.isText&&h.nodeName!="BR"&&(h.hasAttribute("contenteditable")||(h.contentEditable="false"),n.type.spec.draggable&&(h.draggable=!0));let g=h;return h=QB(h,r,n),f?c=new GY(t,n,r,i,h,p||null,g,f,s,o+1):n.isText?new $p(t,n,r,i,h,g,s):new Bs(t,n,r,i,h,p||null,g,s,o+1)}parseRule(){if(this.node.type.spec.reparseInView)return null;let t={node:this.node.type.name,attrs:this.node.attrs};if(this.node.type.whitespace=="pre"&&(t.preserveWhitespace="full"),!this.contentDOM)t.getContent=()=>this.node.content;else if(!this.contentLost)t.contentElement=this.contentDOM;else{for(let n=this.children.length-1;n>=0;n--){let r=this.children[n];if(this.dom.contains(r.dom.parentNode)){t.contentElement=r.dom.parentNode;break}}t.contentElement||(t.getContent=()=>pe.empty)}return t}matchesNode(t,n,r){return this.dirty==Cr&&t.eq(this.node)&&Dh(n,this.outerDeco)&&r.eq(this.innerDeco)}get size(){return this.node.nodeSize}get border(){return this.node.isLeaf?0:1}updateChildren(t,n){let r=this.node.inlineContent,i=n,s=t.composing?this.localCompositionInfo(t,n):null,o=s&&s.pos>-1?s:null,l=s&&s.pos<0,c=new YY(this,o&&o.node,t);ZY(this.node,this.innerDeco,(f,h,p)=>{f.spec.marks?c.syncToMarks(f.spec.marks,r,t):f.type.side>=0&&!p&&c.syncToMarks(h==this.node.childCount?ct.none:this.node.child(h).marks,r,t),c.placeWidget(f,t,i)},(f,h,p,g)=>{c.syncToMarks(f.marks,r,t);let y;c.findNodeMatch(f,h,p,g)||l&&t.state.selection.from>i&&t.state.selection.to<i+f.nodeSize&&(y=c.findIndexWithChild(s.node))>-1&&c.updateNodeAt(f,h,p,y,t)||c.updateNextNode(f,h,p,t,g,i)||c.addNode(f,h,p,t,i),i+=f.nodeSize}),c.syncToMarks([],r,t),this.node.isTextblock&&c.addTextblockHacks(),c.destroyRest(),(c.changed||this.dirty==ko)&&(o&&this.protectLocalComposition(t,o),XB(this.contentDOM,this.children,t),yl&&QY(this.dom))}localCompositionInfo(t,n){let{from:r,to:i}=t.state.selection;if(!(t.state.selection instanceof qe)||r<n||i>n+this.node.content.size)return null;let s=t.input.compositionNode;if(!s||!this.dom.contains(s.parentNode))return null;if(this.node.inlineContent){let o=s.nodeValue,l=JY(this.node.content,o,r-n,i-n);return l<0?null:{node:s,pos:l,text:o}}else return{node:s,pos:-1,text:""}}protectLocalComposition(t,{node:n,pos:r,text:i}){if(this.getDesc(n))return;let s=n;for(;s.parentNode!=this.contentDOM;s=s.parentNode){for(;s.previousSibling;)s.parentNode.removeChild(s.previousSibling);for(;s.nextSibling;)s.parentNode.removeChild(s.nextSibling);s.pmViewDesc&&(s.pmViewDesc=void 0)}let o=new $Y(this,s,n,i);t.input.compositionNodes.push(o),this.children=eE(this.children,r,r+i.length,t,o)}update(t,n,r,i){return this.dirty==ii||!t.sameMarkup(this.node)?!1:(this.updateInner(t,n,r,i),!0)}updateInner(t,n,r,i){this.updateOuterDeco(n),this.node=t,this.innerDeco=r,this.contentDOM&&this.updateChildren(i,this.posAtStart),this.dirty=Cr}updateOuterDeco(t){if(Dh(t,this.outerDeco))return;let n=this.nodeDOM.nodeType!=1,r=this.dom;this.dom=ZB(this.dom,this.nodeDOM,JS(this.outerDeco,this.node,n),JS(t,this.node,n)),this.dom!=r&&(r.pmViewDesc=void 0,this.dom.pmViewDesc=this),this.outerDeco=t}selectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.add("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&(this.nodeDOM.draggable=!0))}deselectNode(){this.nodeDOM.nodeType==1&&(this.nodeDOM.classList.remove("ProseMirror-selectednode"),(this.contentDOM||!this.node.type.spec.draggable)&&this.nodeDOM.removeAttribute("draggable"))}get domAtom(){return this.node.isAtom}}function N_(e,t,n,r,i){QB(r,t,e);let s=new Bs(void 0,e,t,n,r,r,r,i,0);return s.contentDOM&&s.updateChildren(i,0),s}class $p extends Bs{constructor(t,n,r,i,s,o,l){super(t,n,r,i,s,null,o,l,0)}parseRule(){let t=this.nodeDOM.parentNode;for(;t&&t!=this.dom&&!t.pmIsDeco;)t=t.parentNode;return{skip:t||!0}}update(t,n,r,i){return this.dirty==ii||this.dirty!=Cr&&!this.inParent()||!t.sameMarkup(this.node)?!1:(this.updateOuterDeco(n),(this.dirty!=Cr||t.text!=this.node.text)&&t.text!=this.nodeDOM.nodeValue&&(this.nodeDOM.nodeValue=t.text,i.trackWrites==this.nodeDOM&&(i.trackWrites=null)),this.node=t,this.dirty=Cr,!0)}inParent(){let t=this.parent.contentDOM;for(let n=this.nodeDOM;n;n=n.parentNode)if(n==t)return!0;return!1}domFromPos(t){return{node:this.nodeDOM,offset:t}}localPosFromDOM(t,n,r){return t==this.nodeDOM?this.posAtStart+Math.min(n,this.node.text.length):super.localPosFromDOM(t,n,r)}ignoreMutation(t){return t.type!="characterData"&&t.type!="selection"}slice(t,n,r){let i=this.node.cut(t,n),s=document.createTextNode(i.text);return new $p(this.parent,i,this.outerDeco,this.innerDeco,s,s,r)}markDirty(t,n){super.markDirty(t,n),this.dom!=this.nodeDOM&&(t==0||n==this.nodeDOM.nodeValue.length)&&(this.dirty=ii)}get domAtom(){return!1}isText(t){return this.node.text==t}}class WB extends nf{parseRule(){return{ignore:!0}}matchesHack(t){return this.dirty==Cr&&this.dom.nodeName==t}get domAtom(){return!0}get ignoreForCoords(){return this.dom.nodeName=="IMG"}}class GY extends Bs{constructor(t,n,r,i,s,o,l,c,f,h){super(t,n,r,i,s,o,l,f,h),this.spec=c}update(t,n,r,i){if(this.dirty==ii)return!1;if(this.spec.update&&(this.node.type==t.type||this.spec.multiType)){let s=this.spec.update(t,n,r);return s&&this.updateInner(t,n,r,i),s}else return!this.contentDOM&&!t.isLeaf?!1:super.update(t,n,r,i)}selectNode(){this.spec.selectNode?this.spec.selectNode():super.selectNode()}deselectNode(){this.spec.deselectNode?this.spec.deselectNode():super.deselectNode()}setSelection(t,n,r,i){this.spec.setSelection?this.spec.setSelection(t,n,r.root):super.setSelection(t,n,r,i)}destroy(){this.spec.destroy&&this.spec.destroy(),super.destroy()}stopEvent(t){return this.spec.stopEvent?this.spec.stopEvent(t):!1}ignoreMutation(t){return this.spec.ignoreMutation?this.spec.ignoreMutation(t):super.ignoreMutation(t)}}function XB(e,t,n){let r=e.firstChild,i=!1;for(let s=0;s<t.length;s++){let o=t[s],l=o.dom;if(l.parentNode==e){for(;l!=r;)r=__(r),i=!0;r=r.nextSibling}else i=!0,e.insertBefore(l,r);if(o instanceof Fo){let c=r?r.previousSibling:e.lastChild;XB(o.contentDOM,o.children,n),r=c?c.nextSibling:e.firstChild}}for(;r;)r=__(r),i=!0;i&&n.trackWrites==e&&(n.trackWrites=null)}const lc=function(e){e&&(this.nodeName=e)};lc.prototype=Object.create(null);const To=[new lc];function JS(e,t,n){if(e.length==0)return To;let r=n?To[0]:new lc,i=[r];for(let s=0;s<e.length;s++){let o=e[s].type.attrs;if(o){o.nodeName&&i.push(r=new lc(o.nodeName));for(let l in o){let c=o[l];c!=null&&(n&&i.length==1&&i.push(r=new lc(t.isInline?"span":"div")),l=="class"?r.class=(r.class?r.class+" ":"")+c:l=="style"?r.style=(r.style?r.style+";":"")+c:l!="nodeName"&&(r[l]=c))}}}return i}function ZB(e,t,n,r){if(n==To&&r==To)return t;let i=t;for(let s=0;s<r.length;s++){let o=r[s],l=n[s];if(s){let c;l&&l.nodeName==o.nodeName&&i!=e&&(c=i.parentNode)&&c.nodeName.toLowerCase()==o.nodeName||(c=document.createElement(o.nodeName),c.pmIsDeco=!0,c.appendChild(i),l=To[0]),i=c}KY(i,l||To[0],o)}return i}function KY(e,t,n){for(let r in t)r!="class"&&r!="style"&&r!="nodeName"&&!(r in n)&&e.removeAttribute(r);for(let r in n)r!="class"&&r!="style"&&r!="nodeName"&&n[r]!=t[r]&&e.setAttribute(r,n[r]);if(t.class!=n.class){let r=t.class?t.class.split(" ").filter(Boolean):[],i=n.class?n.class.split(" ").filter(Boolean):[];for(let s=0;s<r.length;s++)i.indexOf(r[s])==-1&&e.classList.remove(r[s]);for(let s=0;s<i.length;s++)r.indexOf(i[s])==-1&&e.classList.add(i[s]);e.classList.length==0&&e.removeAttribute("class")}if(t.style!=n.style){if(t.style){let r=/\s*([\w\-\xa1-\uffff]+)\s*:(?:"(?:\\.|[^"])*"|'(?:\\.|[^'])*'|\(.*?\)|[^;])*/g,i;for(;i=r.exec(t.style);)e.style.removeProperty(i[1])}n.style&&(e.style.cssText+=n.style)}}function QB(e,t,n){return ZB(e,e,To,JS(t,n,e.nodeType!=1))}function Dh(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].type.eq(t[n].type))return!1;return!0}function __(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}class YY{constructor(t,n,r){this.lock=n,this.view=r,this.index=0,this.stack=[],this.changed=!1,this.top=t,this.preMatch=WY(t.node.content,t)}destroyBetween(t,n){if(t!=n){for(let r=t;r<n;r++)this.top.children[r].destroy();this.top.children.splice(t,n-t),this.changed=!0}}destroyRest(){this.destroyBetween(this.index,this.top.children.length)}syncToMarks(t,n,r){let i=0,s=this.stack.length>>1,o=Math.min(s,t.length);for(;i<o&&(i==s-1?this.top:this.stack[i+1<<1]).matchesMark(t[i])&&t[i].type.spec.spanning!==!1;)i++;for(;i<s;)this.destroyRest(),this.top.dirty=Cr,this.index=this.stack.pop(),this.top=this.stack.pop(),s--;for(;s<t.length;){this.stack.push(this.top,this.index+1);let l=-1;for(let c=this.index;c<Math.min(this.index+3,this.top.children.length);c++){let f=this.top.children[c];if(f.matchesMark(t[s])&&!this.isLocked(f.dom)){l=c;break}}if(l>-1)l>this.index&&(this.changed=!0,this.destroyBetween(this.index,l)),this.top=this.top.children[this.index];else{let c=Fo.create(this.top,t[s],n,r);this.top.children.splice(this.index,0,c),this.top=c,this.changed=!0}this.index=0,s++}}findNodeMatch(t,n,r,i){let s=-1,o;if(i>=this.preMatch.index&&(o=this.preMatch.matches[i-this.preMatch.index]).parent==this.top&&o.matchesNode(t,n,r))s=this.top.children.indexOf(o,this.index);else for(let l=this.index,c=Math.min(this.top.children.length,l+5);l<c;l++){let f=this.top.children[l];if(f.matchesNode(t,n,r)&&!this.preMatch.matched.has(f)){s=l;break}}return s<0?!1:(this.destroyBetween(this.index,s),this.index++,!0)}updateNodeAt(t,n,r,i,s){let o=this.top.children[i];return o.dirty==ii&&o.dom==o.contentDOM&&(o.dirty=ko),o.update(t,n,r,s)?(this.destroyBetween(this.index,i),this.index++,!0):!1}findIndexWithChild(t){for(;;){let n=t.parentNode;if(!n)return-1;if(n==this.top.contentDOM){let r=t.pmViewDesc;if(r){for(let i=this.index;i<this.top.children.length;i++)if(this.top.children[i]==r)return i}return-1}t=n}}updateNextNode(t,n,r,i,s,o){for(let l=this.index;l<this.top.children.length;l++){let c=this.top.children[l];if(c instanceof Bs){let f=this.preMatch.matched.get(c);if(f!=null&&f!=s)return!1;let h=c.dom,p,g=this.isLocked(h)&&!(t.isText&&c.node&&c.node.isText&&c.nodeDOM.nodeValue==t.text&&c.dirty!=ii&&Dh(n,c.outerDeco));if(!g&&c.update(t,n,r,i))return this.destroyBetween(this.index,l),c.dom!=h&&(this.changed=!0),this.index++,!0;if(!g&&(p=this.recreateWrapper(c,t,n,r,i,o)))return this.destroyBetween(this.index,l),this.top.children[this.index]=p,p.contentDOM&&(p.dirty=ko,p.updateChildren(i,o+1),p.dirty=Cr),this.changed=!0,this.index++,!0;break}}return!1}recreateWrapper(t,n,r,i,s,o){if(t.dirty||n.isAtom||!t.children.length||!t.node.content.eq(n.content)||!Dh(r,t.outerDeco)||!i.eq(t.innerDeco))return null;let l=Bs.create(this.top,n,r,i,s,o);if(l.contentDOM){l.children=t.children,t.children=[];for(let c of l.children)c.parent=l}return t.destroy(),l}addNode(t,n,r,i,s){let o=Bs.create(this.top,t,n,r,i,s);o.contentDOM&&o.updateChildren(i,s+1),this.top.children.splice(this.index++,0,o),this.changed=!0}placeWidget(t,n,r){let i=this.index<this.top.children.length?this.top.children[this.index]:null;if(i&&i.matchesWidget(t)&&(t==i.widget||!i.widget.type.toDOM.parentNode))this.index++;else{let s=new YB(this.top,t,n,r);this.top.children.splice(this.index++,0,s),this.changed=!0}}addTextblockHacks(){let t=this.top.children[this.index-1],n=this.top;for(;t instanceof Fo;)n=t,t=n.children[n.children.length-1];(!t||!(t instanceof $p)||/\n$/.test(t.node.text)||this.view.requiresGeckoHackNode&&/\s$/.test(t.node.text))&&((An||wn)&&t&&t.dom.contentEditable=="false"&&this.addHackNode("IMG",n),this.addHackNode("BR",this.top))}addHackNode(t,n){if(n==this.top&&this.index<n.children.length&&n.children[this.index].matchesHack(t))this.index++;else{let r=document.createElement(t);t=="IMG"&&(r.className="ProseMirror-separator",r.alt=""),t=="BR"&&(r.className="ProseMirror-trailingBreak");let i=new WB(this.top,[],r,null);n!=this.top?n.children.push(i):n.children.splice(this.index++,0,i),this.changed=!0}}isLocked(t){return this.lock&&(t==this.lock||t.nodeType==1&&t.contains(this.lock.parentNode))}}function WY(e,t){let n=t,r=n.children.length,i=e.childCount,s=new Map,o=[];e:for(;i>0;){let l;for(;;)if(r){let f=n.children[r-1];if(f instanceof Fo)n=f,r=f.children.length;else{l=f,r--;break}}else{if(n==t)break e;r=n.parent.children.indexOf(n),n=n.parent}let c=l.node;if(c){if(c!=e.child(i-1))break;--i,s.set(l,i),o.push(l)}}return{index:i,matched:s,matches:o.reverse()}}function XY(e,t){return e.type.side-t.type.side}function ZY(e,t,n,r){let i=t.locals(e),s=0;if(i.length==0){for(let f=0;f<e.childCount;f++){let h=e.child(f);r(h,i,t.forChild(s,h),f),s+=h.nodeSize}return}let o=0,l=[],c=null;for(let f=0;;){let h,p;for(;o<i.length&&i[o].to==s;){let x=i[o++];x.widget&&(h?(p||(p=[h])).push(x):h=x)}if(h)if(p){p.sort(XY);for(let x=0;x<p.length;x++)n(p[x],f,!!c)}else n(h,f,!!c);let g,y;if(c)y=-1,g=c,c=null;else if(f<e.childCount)y=f,g=e.child(f++);else break;for(let x=0;x<l.length;x++)l[x].to<=s&&l.splice(x--,1);for(;o<i.length&&i[o].from<=s&&i[o].to>s;)l.push(i[o++]);let b=s+g.nodeSize;if(g.isText){let x=b;o<i.length&&i[o].from<x&&(x=i[o].from);for(let C=0;C<l.length;C++)l[C].to<x&&(x=l[C].to);x<b&&(c=g.cut(x-s),g=g.cut(0,x-s),b=x,y=-1)}else for(;o<i.length&&i[o].to<b;)o++;let S=g.isInline&&!g.isLeaf?l.filter(x=>!x.inline):l.slice();r(g,S,t.forChild(s,g),y),s=b}}function QY(e){if(e.nodeName=="UL"||e.nodeName=="OL"){let t=e.style.cssText;e.style.cssText=t+"; list-style: square !important",window.getComputedStyle(e).listStyle,e.style.cssText=t}}function JY(e,t,n,r){for(let i=0,s=0;i<e.childCount&&s<=r;){let o=e.child(i++),l=s;if(s+=o.nodeSize,!o.isText)continue;let c=o.text;for(;i<e.childCount;){let f=e.child(i++);if(s+=f.nodeSize,!f.isText)break;c+=f.text}if(s>=n){if(s>=r&&c.slice(r-t.length-l,r-l)==t)return r-t.length;let f=l<r?c.lastIndexOf(t,r-l-1):-1;if(f>=0&&f+t.length+l>=n)return l+f;if(n==r&&c.length>=r+t.length-l&&c.slice(r-l,r-l+t.length)==t)return r}}return-1}function eE(e,t,n,r,i){let s=[];for(let o=0,l=0;o<e.length;o++){let c=e[o],f=l,h=l+=c.size;f>=n||h<=t?s.push(c):(f<t&&s.push(c.slice(0,t-f,r)),i&&(s.push(i),i=void 0),h>n&&s.push(c.slice(n-f,c.size,r)))}return s}function SC(e,t=null){let n=e.domSelectionRange(),r=e.state.doc;if(!n.focusNode)return null;let i=e.docView.nearestDesc(n.focusNode),s=i&&i.size==0,o=e.docView.posFromDOM(n.focusNode,n.focusOffset,1);if(o<0)return null;let l=r.resolve(o),c,f;if(Up(n)){for(c=o;i&&!i.node;)i=i.parent;let p=i.node;if(i&&p.isAtom&&Re.isSelectable(p)&&i.parent&&!(p.isInline&&kY(n.focusNode,n.focusOffset,i.dom))){let g=i.posBefore;f=new Re(o==g?l:r.resolve(g))}}else{if(n instanceof e.dom.ownerDocument.defaultView.Selection&&n.rangeCount>1){let p=o,g=o;for(let y=0;y<n.rangeCount;y++){let b=n.getRangeAt(y);p=Math.min(p,e.docView.posFromDOM(b.startContainer,b.startOffset,1)),g=Math.max(g,e.docView.posFromDOM(b.endContainer,b.endOffset,-1))}if(p<0)return null;[c,o]=g==e.state.selection.anchor?[g,p]:[p,g],l=r.resolve(o)}else c=e.docView.posFromDOM(n.anchorNode,n.anchorOffset,1);if(c<0)return null}let h=r.resolve(c);if(!f){let p=t=="pointer"||e.state.selection.head<l.pos&&!s?1:-1;f=EC(e,h,l,p)}return f}function JB(e){return e.editable?e.hasFocus():tI(e)&&document.activeElement&&document.activeElement.contains(e.dom)}function Bi(e,t=!1){let n=e.state.selection;if(eI(e,n),!!JB(e)){if(!t&&e.input.mouseDown&&e.input.mouseDown.allowDefault&&wn){let r=e.domSelectionRange(),i=e.domObserver.currentSelection;if(r.anchorNode&&i.anchorNode&&Ho(r.anchorNode,r.anchorOffset,i.anchorNode,i.anchorOffset)){e.input.mouseDown.delayedSelectionSync=!0,e.domObserver.setCurSelection();return}}if(e.domObserver.disconnectSelection(),e.cursorWrapper)tW(e);else{let{anchor:r,head:i}=n,s,o;R_&&!(n instanceof qe)&&(n.$from.parent.inlineContent||(s=D_(e,n.from)),!n.empty&&!n.$from.parent.inlineContent&&(o=D_(e,n.to))),e.docView.setSelection(r,i,e,t),R_&&(s&&O_(s),o&&O_(o)),n.visible?e.dom.classList.remove("ProseMirror-hideselection"):(e.dom.classList.add("ProseMirror-hideselection"),"onselectionchange"in document&&eW(e))}e.domObserver.setCurSelection(),e.domObserver.connectSelection()}}const R_=An||wn&&VB<63;function D_(e,t){let{node:n,offset:r}=e.docView.domFromPos(t,0),i=r<n.childNodes.length?n.childNodes[r]:null,s=r?n.childNodes[r-1]:null;if(An&&i&&i.contentEditable=="false")return w0(i);if((!i||i.contentEditable=="false")&&(!s||s.contentEditable=="false")){if(i)return w0(i);if(s)return w0(s)}}function w0(e){return e.contentEditable="true",An&&e.draggable&&(e.draggable=!1,e.wasDraggable=!0),e}function O_(e){e.contentEditable="false",e.wasDraggable&&(e.draggable=!0,e.wasDraggable=null)}function eW(e){let t=e.dom.ownerDocument;t.removeEventListener("selectionchange",e.input.hideSelectionGuard);let n=e.domSelectionRange(),r=n.anchorNode,i=n.anchorOffset;t.addEventListener("selectionchange",e.input.hideSelectionGuard=()=>{(n.anchorNode!=r||n.anchorOffset!=i)&&(t.removeEventListener("selectionchange",e.input.hideSelectionGuard),setTimeout(()=>{(!JB(e)||e.state.selection.visible)&&e.dom.classList.remove("ProseMirror-hideselection")},20))})}function tW(e){let t=e.domSelection();if(!t)return;let n=e.cursorWrapper.dom,r=n.nodeName=="IMG";r?t.collapse(n.parentNode,dn(n)+1):t.collapse(n,0),!r&&!e.state.selection.visible&&qn&&Ps<=11&&(n.disabled=!0,n.disabled=!1)}function eI(e,t){if(t instanceof Re){let n=e.docView.descAt(t.from);n!=e.lastSelectedViewDesc&&(j_(e),n&&n.selectNode(),e.lastSelectedViewDesc=n)}else j_(e)}function j_(e){e.lastSelectedViewDesc&&(e.lastSelectedViewDesc.parent&&e.lastSelectedViewDesc.deselectNode(),e.lastSelectedViewDesc=void 0)}function EC(e,t,n,r){return e.someProp("createSelectionBetween",i=>i(e,t,n))||qe.between(t,n,r)}function L_(e){return e.editable&&!e.hasFocus()?!1:tI(e)}function tI(e){let t=e.domSelectionRange();if(!t.anchorNode)return!1;try{return e.dom.contains(t.anchorNode.nodeType==3?t.anchorNode.parentNode:t.anchorNode)&&(e.editable||e.dom.contains(t.focusNode.nodeType==3?t.focusNode.parentNode:t.focusNode))}catch{return!1}}function nW(e){let t=e.docView.domFromPos(e.state.selection.anchor,0),n=e.domSelectionRange();return Ho(t.node,t.offset,n.anchorNode,n.anchorOffset)}function tE(e,t){let{$anchor:n,$head:r}=e.selection,i=t>0?n.max(r):n.min(r),s=i.parent.inlineContent?i.depth?e.doc.resolve(t>0?i.after():i.before()):null:i;return s&&Ue.findFrom(s,t)}function Cs(e,t){return e.dispatch(e.state.tr.setSelection(t).scrollIntoView()),!0}function P_(e,t,n){let r=e.state.selection;if(r instanceof qe)if(n.indexOf("s")>-1){let{$head:i}=r,s=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter;if(!s||s.isText||!s.isLeaf)return!1;let o=e.state.doc.resolve(i.pos+s.nodeSize*(t<0?-1:1));return Cs(e,new qe(r.$anchor,o))}else if(r.empty){if(e.endOfTextblock(t>0?"forward":"backward")){let i=tE(e.state,t);return i&&i instanceof Re?Cs(e,i):!1}else if(!(vr&&n.indexOf("m")>-1)){let i=r.$head,s=i.textOffset?null:t<0?i.nodeBefore:i.nodeAfter,o;if(!s||s.isText)return!1;let l=t<0?i.pos-s.nodeSize:i.pos;return s.isAtom||(o=e.docView.descAt(l))&&!o.contentDOM?Re.isSelectable(s)?Cs(e,new Re(t<0?e.state.doc.resolve(i.pos-s.nodeSize):i)):tf?Cs(e,new qe(e.state.doc.resolve(t<0?l:l+s.nodeSize))):!1:!1}}else return!1;else{if(r instanceof Re&&r.node.isInline)return Cs(e,new qe(t>0?r.$to:r.$from));{let i=tE(e.state,t);return i?Cs(e,i):!1}}}function Oh(e){return e.nodeType==3?e.nodeValue.length:e.childNodes.length}function uc(e,t){let n=e.pmViewDesc;return n&&n.size==0&&(t<0||e.nextSibling||e.nodeName!="BR")}function Ua(e,t){return t<0?rW(e):iW(e)}function rW(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i,s,o=!1;for(Er&&n.nodeType==1&&r<Oh(n)&&uc(n.childNodes[r],-1)&&(o=!0);;)if(r>0){if(n.nodeType!=1)break;{let l=n.childNodes[r-1];if(uc(l,-1))i=n,s=--r;else if(l.nodeType==3)n=l,r=n.nodeValue.length;else break}}else{if(nI(n))break;{let l=n.previousSibling;for(;l&&uc(l,-1);)i=n.parentNode,s=dn(l),l=l.previousSibling;if(l)n=l,r=Oh(n);else{if(n=n.parentNode,n==e.dom)break;r=0}}}o?nE(e,n,r):i&&nE(e,i,s)}function iW(e){let t=e.domSelectionRange(),n=t.focusNode,r=t.focusOffset;if(!n)return;let i=Oh(n),s,o;for(;;)if(r<i){if(n.nodeType!=1)break;let l=n.childNodes[r];if(uc(l,1))s=n,o=++r;else break}else{if(nI(n))break;{let l=n.nextSibling;for(;l&&uc(l,1);)s=l.parentNode,o=dn(l)+1,l=l.nextSibling;if(l)n=l,r=0,i=Oh(n);else{if(n=n.parentNode,n==e.dom)break;r=i=0}}}s&&nE(e,s,o)}function nI(e){let t=e.pmViewDesc;return t&&t.node&&t.node.isBlock}function sW(e,t){for(;e&&t==e.childNodes.length&&!ef(e);)t=dn(e)+1,e=e.parentNode;for(;e&&t<e.childNodes.length;){let n=e.childNodes[t];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=0}}function oW(e,t){for(;e&&!t&&!ef(e);)t=dn(e),e=e.parentNode;for(;e&&t;){let n=e.childNodes[t-1];if(n.nodeType==3)return n;if(n.nodeType==1&&n.contentEditable=="false")break;e=n,t=e.childNodes.length}}function nE(e,t,n){if(t.nodeType!=3){let s,o;(o=sW(t,n))?(t=o,n=0):(s=oW(t,n))&&(t=s,n=s.nodeValue.length)}let r=e.domSelection();if(!r)return;if(Up(r)){let s=document.createRange();s.setEnd(t,n),s.setStart(t,n),r.removeAllRanges(),r.addRange(s)}else r.extend&&r.extend(t,n);e.domObserver.setCurSelection();let{state:i}=e;setTimeout(()=>{e.state==i&&Bi(e)},50)}function B_(e,t){let n=e.state.doc.resolve(t);if(!(wn||MY)&&n.parent.inlineContent){let i=e.coordsAtPos(t);if(t>n.start()){let s=e.coordsAtPos(t-1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left<i.left?"ltr":"rtl"}if(t<n.end()){let s=e.coordsAtPos(t+1),o=(s.top+s.bottom)/2;if(o>i.top&&o<i.bottom&&Math.abs(s.left-i.left)>1)return s.left>i.left?"ltr":"rtl"}}return getComputedStyle(e.dom).direction=="rtl"?"rtl":"ltr"}function I_(e,t,n){let r=e.state.selection;if(r instanceof qe&&!r.empty||n.indexOf("s")>-1||vr&&n.indexOf("m")>-1)return!1;let{$from:i,$to:s}=r;if(!i.parent.inlineContent||e.endOfTextblock(t<0?"up":"down")){let o=tE(e.state,t);if(o&&o instanceof Re)return Cs(e,o)}if(!i.parent.inlineContent){let o=t<0?i:s,l=r instanceof nr?Ue.near(o,t):Ue.findFrom(o,t);return l?Cs(e,l):!1}return!1}function z_(e,t){if(!(e.state.selection instanceof qe))return!0;let{$head:n,$anchor:r,empty:i}=e.state.selection;if(!n.sameParent(r))return!0;if(!i)return!1;if(e.endOfTextblock(t>0?"forward":"backward"))return!0;let s=!n.textOffset&&(t<0?n.nodeBefore:n.nodeAfter);if(s&&!s.isText){let o=e.state.tr;return t<0?o.delete(n.pos-s.nodeSize,n.pos):o.delete(n.pos,n.pos+s.nodeSize),e.dispatch(o),!0}return!1}function q_(e,t,n){e.domObserver.stop(),t.contentEditable=n,e.domObserver.start()}function aW(e){if(!An||e.state.selection.$head.parentOffset>0)return!1;let{focusNode:t,focusOffset:n}=e.domSelectionRange();if(t&&t.nodeType==1&&n==0&&t.firstChild&&t.firstChild.contentEditable=="false"){let r=t.firstChild;q_(e,r,"true"),setTimeout(()=>q_(e,r,"false"),20)}return!1}function lW(e){let t="";return e.ctrlKey&&(t+="c"),e.metaKey&&(t+="m"),e.altKey&&(t+="a"),e.shiftKey&&(t+="s"),t}function uW(e,t){let n=t.keyCode,r=lW(t);if(n==8||vr&&n==72&&r=="c")return z_(e,-1)||Ua(e,-1);if(n==46&&!t.shiftKey||vr&&n==68&&r=="c")return z_(e,1)||Ua(e,1);if(n==13||n==27)return!0;if(n==37||vr&&n==66&&r=="c"){let i=n==37?B_(e,e.state.selection.from)=="ltr"?-1:1:-1;return P_(e,i,r)||Ua(e,i)}else if(n==39||vr&&n==70&&r=="c"){let i=n==39?B_(e,e.state.selection.from)=="ltr"?1:-1:1;return P_(e,i,r)||Ua(e,i)}else{if(n==38||vr&&n==80&&r=="c")return I_(e,-1,r)||Ua(e,-1);if(n==40||vr&&n==78&&r=="c")return aW(e)||I_(e,1,r)||Ua(e,1);if(r==(vr?"m":"c")&&(n==66||n==73||n==89||n==90))return!0}return!1}function CC(e,t){e.someProp("transformCopied",y=>{t=y(t,e)});let n=[],{content:r,openStart:i,openEnd:s}=t;for(;i>1&&s>1&&r.childCount==1&&r.firstChild.childCount==1;){i--,s--;let y=r.firstChild;n.push(y.type.name,y.attrs!=y.type.defaultAttrs?y.attrs:null),r=y.content}let o=e.someProp("clipboardSerializer")||Jo.fromSchema(e.state.schema),l=lI(),c=l.createElement("div");c.appendChild(o.serializeFragment(r,{document:l}));let f=c.firstChild,h,p=0;for(;f&&f.nodeType==1&&(h=aI[f.nodeName.toLowerCase()]);){for(let y=h.length-1;y>=0;y--){let b=l.createElement(h[y]);for(;c.firstChild;)b.appendChild(c.firstChild);c.appendChild(b),p++}f=c.firstChild}f&&f.nodeType==1&&f.setAttribute("data-pm-slice",`${i} ${s}${p?` -${p}`:""} ${JSON.stringify(n)}`);let g=e.someProp("clipboardTextSerializer",y=>y(t,e))||t.content.textBetween(0,t.content.size,`

`);return{dom:c,text:g,slice:t}}function rI(e,t,n,r,i){let s=i.parent.type.spec.code,o,l;if(!n&&!t)return null;let c=!!t&&(r||s||!n);if(c){if(e.someProp("transformPastedText",g=>{t=g(t,s||r,e)}),s)return l=new ve(pe.from(e.state.schema.text(t.replace(/\r\n?/g,`
`))),0,0),e.someProp("transformPasted",g=>{l=g(l,e,!0)}),l;let p=e.someProp("clipboardTextParser",g=>g(t,i,r,e));if(p)l=p;else{let g=i.marks(),{schema:y}=e.state,b=Jo.fromSchema(y);o=document.createElement("div"),t.split(/(?:\r\n?|\n)+/).forEach(S=>{let x=o.appendChild(document.createElement("p"));S&&x.appendChild(b.serializeNode(y.text(S,g)))})}}else e.someProp("transformPastedHTML",p=>{n=p(n,e)}),o=hW(n),tf&&pW(o);let f=o&&o.querySelector("[data-pm-slice]"),h=f&&/^(\d+) (\d+)(?: -(\d+))? (.*)/.exec(f.getAttribute("data-pm-slice")||"");if(h&&h[3])for(let p=+h[3];p>0;p--){let g=o.firstChild;for(;g&&g.nodeType!=1;)g=g.nextSibling;if(!g)break;o=g}if(l||(l=(e.someProp("clipboardParser")||e.someProp("domParser")||Ls.fromSchema(e.state.schema)).parseSlice(o,{preserveWhitespace:!!(c||h),context:i,ruleFromNode(g){return g.nodeName=="BR"&&!g.nextSibling&&g.parentNode&&!cW.test(g.parentNode.nodeName)?{ignore:!0}:null}})),h)l=mW(V_(l,+h[1],+h[2]),h[4]);else if(l=ve.maxOpen(fW(l.content,i),!0),l.openStart||l.openEnd){let p=0,g=0;for(let y=l.content.firstChild;p<l.openStart&&!y.type.spec.isolating;p++,y=y.firstChild);for(let y=l.content.lastChild;g<l.openEnd&&!y.type.spec.isolating;g++,y=y.lastChild);l=V_(l,p,g)}return e.someProp("transformPasted",p=>{l=p(l,e,c)}),l}const cW=/^(a|abbr|acronym|b|cite|code|del|em|i|ins|kbd|label|output|q|ruby|s|samp|span|strong|sub|sup|time|u|tt|var)$/i;function fW(e,t){if(e.childCount<2)return e;for(let n=t.depth;n>=0;n--){let i=t.node(n).contentMatchAt(t.index(n)),s,o=[];if(e.forEach(l=>{if(!o)return;let c=i.findWrapping(l.type),f;if(!c)return o=null;if(f=o.length&&s.length&&sI(c,s,l,o[o.length-1],0))o[o.length-1]=f;else{o.length&&(o[o.length-1]=oI(o[o.length-1],s.length));let h=iI(l,c);o.push(h),i=i.matchType(h.type),s=c}}),o)return pe.from(o)}return e}function iI(e,t,n=0){for(let r=t.length-1;r>=n;r--)e=t[r].create(null,pe.from(e));return e}function sI(e,t,n,r,i){if(i<e.length&&i<t.length&&e[i]==t[i]){let s=sI(e,t,n,r.lastChild,i+1);if(s)return r.copy(r.content.replaceChild(r.childCount-1,s));if(r.contentMatchAt(r.childCount).matchType(i==e.length-1?n.type:e[i+1]))return r.copy(r.content.append(pe.from(iI(n,e,i+1))))}}function oI(e,t){if(t==0)return e;let n=e.content.replaceChild(e.childCount-1,oI(e.lastChild,t-1)),r=e.contentMatchAt(e.childCount).fillBefore(pe.empty,!0);return e.copy(n.append(r))}function rE(e,t,n,r,i,s){let o=t<0?e.firstChild:e.lastChild,l=o.content;return e.childCount>1&&(s=0),i<r-1&&(l=rE(l,t,n,r,i+1,s)),i>=n&&(l=t<0?o.contentMatchAt(0).fillBefore(l,s<=i).append(l):l.append(o.contentMatchAt(o.childCount).fillBefore(pe.empty,!0))),e.replaceChild(t<0?0:e.childCount-1,o.copy(l))}function V_(e,t,n){return t<e.openStart&&(e=new ve(rE(e.content,-1,t,e.openStart,0,e.openEnd),t,e.openEnd)),n<e.openEnd&&(e=new ve(rE(e.content,1,n,e.openEnd,0,0),e.openStart,n)),e}const aI={thead:["table"],tbody:["table"],tfoot:["table"],caption:["table"],colgroup:["table"],col:["table","colgroup"],tr:["table","tbody"],td:["table","tbody","tr"],th:["table","tbody","tr"]};let H_=null;function lI(){return H_||(H_=document.implementation.createHTMLDocument("title"))}let S0=null;function dW(e){let t=window.trustedTypes;return t?(S0||(S0=t.defaultPolicy||t.createPolicy("ProseMirrorClipboard",{createHTML:n=>n})),S0.createHTML(e)):e}function hW(e){let t=/^(\s*<meta [^>]*>)*/.exec(e);t&&(e=e.slice(t[0].length));let n=lI().createElement("div"),r=/<([a-z][^>\s]+)/i.exec(e),i;if((i=r&&aI[r[1].toLowerCase()])&&(e=i.map(s=>"<"+s+">").join("")+e+i.map(s=>"</"+s+">").reverse().join("")),n.innerHTML=dW(e),i)for(let s=0;s<i.length;s++)n=n.querySelector(i[s])||n;return n}function pW(e){let t=e.querySelectorAll(wn?"span:not([class]):not([style])":"span.Apple-converted-space");for(let n=0;n<t.length;n++){let r=t[n];r.childNodes.length==1&&r.textContent==" "&&r.parentNode&&r.parentNode.replaceChild(e.ownerDocument.createTextNode(" "),r)}}function mW(e,t){if(!e.size)return e;let n=e.content.firstChild.type.schema,r;try{r=JSON.parse(t)}catch{return e}let{content:i,openStart:s,openEnd:o}=e;for(let l=r.length-2;l>=0;l-=2){let c=n.nodes[r[l]];if(!c||c.hasRequiredAttrs())break;i=pe.from(c.create(r[l+1],i)),s++,o++}return new ve(i,s,o)}const Mn={},Nn={},gW={touchstart:!0,touchmove:!0};class yW{constructor(){this.shiftKey=!1,this.mouseDown=null,this.lastKeyCode=null,this.lastKeyCodeTime=0,this.lastClick={time:0,x:0,y:0,type:"",button:0},this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastIOSEnter=0,this.lastIOSEnterFallbackTimeout=-1,this.lastFocus=0,this.lastTouch=0,this.lastChromeDelete=0,this.composing=!1,this.compositionNode=null,this.composingTimeout=-1,this.compositionNodes=[],this.compositionEndedAt=-2e8,this.compositionID=1,this.compositionPendingChanges=0,this.domChangeCount=0,this.eventHandlers=Object.create(null),this.hideSelectionGuard=null}}function vW(e){for(let t in Mn){let n=Mn[t];e.dom.addEventListener(t,e.input.eventHandlers[t]=r=>{xW(e,r)&&!kC(e,r)&&(e.editable||!(r.type in Nn))&&n(e,r)},gW[t]?{passive:!0}:void 0)}An&&e.dom.addEventListener("input",()=>null),iE(e)}function Os(e,t){e.input.lastSelectionOrigin=t,e.input.lastSelectionTime=Date.now()}function bW(e){e.domObserver.stop();for(let t in e.input.eventHandlers)e.dom.removeEventListener(t,e.input.eventHandlers[t]);clearTimeout(e.input.composingTimeout),clearTimeout(e.input.lastIOSEnterFallbackTimeout)}function iE(e){e.someProp("handleDOMEvents",t=>{for(let n in t)e.input.eventHandlers[n]||e.dom.addEventListener(n,e.input.eventHandlers[n]=r=>kC(e,r))})}function kC(e,t){return e.someProp("handleDOMEvents",n=>{let r=n[t.type];return r?r(e,t)||t.defaultPrevented:!1})}function xW(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n=t.target;n!=e.dom;n=n.parentNode)if(!n||n.nodeType==11||n.pmViewDesc&&n.pmViewDesc.stopEvent(t))return!1;return!0}function wW(e,t){!kC(e,t)&&Mn[t.type]&&(e.editable||!(t.type in Nn))&&Mn[t.type](e,t)}Nn.keydown=(e,t)=>{let n=t;if(e.input.shiftKey=n.keyCode==16||n.shiftKey,!cI(e,n)&&(e.input.lastKeyCode=n.keyCode,e.input.lastKeyCodeTime=Date.now(),!(ji&&wn&&n.keyCode==13)))if(n.keyCode!=229&&e.domObserver.forceFlush(),yl&&n.keyCode==13&&!n.ctrlKey&&!n.altKey&&!n.metaKey){let r=Date.now();e.input.lastIOSEnter=r,e.input.lastIOSEnterFallbackTimeout=setTimeout(()=>{e.input.lastIOSEnter==r&&(e.someProp("handleKeyDown",i=>i(e,So(13,"Enter"))),e.input.lastIOSEnter=0)},200)}else e.someProp("handleKeyDown",r=>r(e,n))||uW(e,n)?n.preventDefault():Os(e,"key")};Nn.keyup=(e,t)=>{t.keyCode==16&&(e.input.shiftKey=!1)};Nn.keypress=(e,t)=>{let n=t;if(cI(e,n)||!n.charCode||n.ctrlKey&&!n.altKey||vr&&n.metaKey)return;if(e.someProp("handleKeyPress",i=>i(e,n))){n.preventDefault();return}let r=e.state.selection;if(!(r instanceof qe)||!r.$from.sameParent(r.$to)){let i=String.fromCharCode(n.charCode),s=()=>e.state.tr.insertText(i).scrollIntoView();!/[\r\n]/.test(i)&&!e.someProp("handleTextInput",o=>o(e,r.$from.pos,r.$to.pos,i,s))&&e.dispatch(s()),n.preventDefault()}};function Gp(e){return{left:e.clientX,top:e.clientY}}function SW(e,t){let n=t.x-e.clientX,r=t.y-e.clientY;return n*n+r*r<100}function TC(e,t,n,r,i){if(r==-1)return!1;let s=e.state.doc.resolve(r);for(let o=s.depth+1;o>0;o--)if(e.someProp(t,l=>o>s.depth?l(e,n,s.nodeAfter,s.before(o),i,!0):l(e,n,s.node(o),s.before(o),i,!1)))return!0;return!1}function cl(e,t,n){if(e.focused||e.focus(),e.state.selection.eq(t))return;let r=e.state.tr.setSelection(t);r.setMeta("pointer",!0),e.dispatch(r)}function EW(e,t){if(t==-1)return!1;let n=e.state.doc.resolve(t),r=n.nodeAfter;return r&&r.isAtom&&Re.isSelectable(r)?(cl(e,new Re(n)),!0):!1}function CW(e,t){if(t==-1)return!1;let n=e.state.selection,r,i;n instanceof Re&&(r=n.node);let s=e.state.doc.resolve(t);for(let o=s.depth+1;o>0;o--){let l=o>s.depth?s.nodeAfter:s.node(o);if(Re.isSelectable(l)){r&&n.$from.depth>0&&o>=n.$from.depth&&s.before(n.$from.depth+1)==n.$from.pos?i=s.before(n.$from.depth):i=s.before(o);break}}return i!=null?(cl(e,Re.create(e.state.doc,i)),!0):!1}function kW(e,t,n,r,i){return TC(e,"handleClickOn",t,n,r)||e.someProp("handleClick",s=>s(e,t,r))||(i?CW(e,n):EW(e,n))}function TW(e,t,n,r){return TC(e,"handleDoubleClickOn",t,n,r)||e.someProp("handleDoubleClick",i=>i(e,t,r))}function AW(e,t,n,r){return TC(e,"handleTripleClickOn",t,n,r)||e.someProp("handleTripleClick",i=>i(e,t,r))||MW(e,n,r)}function MW(e,t,n){if(n.button!=0)return!1;let r=e.state.doc;if(t==-1)return r.inlineContent?(cl(e,qe.create(r,0,r.content.size)),!0):!1;let i=r.resolve(t);for(let s=i.depth+1;s>0;s--){let o=s>i.depth?i.nodeAfter:i.node(s),l=i.before(s);if(o.inlineContent)cl(e,qe.create(r,l+1,l+1+o.content.size));else if(Re.isSelectable(o))cl(e,Re.create(r,l));else continue;return!0}}function AC(e){return jh(e)}const uI=vr?"metaKey":"ctrlKey";Mn.mousedown=(e,t)=>{let n=t;e.input.shiftKey=n.shiftKey;let r=AC(e),i=Date.now(),s="singleClick";i-e.input.lastClick.time<500&&SW(n,e.input.lastClick)&&!n[uI]&&e.input.lastClick.button==n.button&&(e.input.lastClick.type=="singleClick"?s="doubleClick":e.input.lastClick.type=="doubleClick"&&(s="tripleClick")),e.input.lastClick={time:i,x:n.clientX,y:n.clientY,type:s,button:n.button};let o=e.posAtCoords(Gp(n));o&&(s=="singleClick"?(e.input.mouseDown&&e.input.mouseDown.done(),e.input.mouseDown=new NW(e,o,n,!!r)):(s=="doubleClick"?TW:AW)(e,o.pos,o.inside,n)?n.preventDefault():Os(e,"pointer"))};class NW{constructor(t,n,r,i){this.view=t,this.pos=n,this.event=r,this.flushed=i,this.delayedSelectionSync=!1,this.mightDrag=null,this.startDoc=t.state.doc,this.selectNode=!!r[uI],this.allowDefault=r.shiftKey;let s,o;if(n.inside>-1)s=t.state.doc.nodeAt(n.inside),o=n.inside;else{let h=t.state.doc.resolve(n.pos);s=h.parent,o=h.depth?h.before():0}const l=i?null:r.target,c=l?t.docView.nearestDesc(l,!0):null;this.target=c&&c.nodeDOM.nodeType==1?c.nodeDOM:null;let{selection:f}=t.state;(r.button==0&&s.type.spec.draggable&&s.type.spec.selectable!==!1||f instanceof Re&&f.from<=o&&f.to>o)&&(this.mightDrag={node:s,pos:o,addAttr:!!(this.target&&!this.target.draggable),setUneditable:!!(this.target&&Er&&!this.target.hasAttribute("contentEditable"))}),this.target&&this.mightDrag&&(this.mightDrag.addAttr||this.mightDrag.setUneditable)&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&(this.target.draggable=!0),this.mightDrag.setUneditable&&setTimeout(()=>{this.view.input.mouseDown==this&&this.target.setAttribute("contentEditable","false")},20),this.view.domObserver.start()),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),Os(t,"pointer")}done(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(this.view.domObserver.stop(),this.mightDrag.addAttr&&this.target.removeAttribute("draggable"),this.mightDrag.setUneditable&&this.target.removeAttribute("contentEditable"),this.view.domObserver.start()),this.delayedSelectionSync&&setTimeout(()=>Bi(this.view)),this.view.input.mouseDown=null}up(t){if(this.done(),!this.view.dom.contains(t.target))return;let n=this.pos;this.view.state.doc!=this.startDoc&&(n=this.view.posAtCoords(Gp(t))),this.updateAllowDefault(t),this.allowDefault||!n?Os(this.view,"pointer"):kW(this.view,n.pos,n.inside,t,this.selectNode)?t.preventDefault():t.button==0&&(this.flushed||An&&this.mightDrag&&!this.mightDrag.node.isAtom||wn&&!this.view.state.selection.visible&&Math.min(Math.abs(n.pos-this.view.state.selection.from),Math.abs(n.pos-this.view.state.selection.to))<=2)?(cl(this.view,Ue.near(this.view.state.doc.resolve(n.pos))),t.preventDefault()):Os(this.view,"pointer")}move(t){this.updateAllowDefault(t),Os(this.view,"pointer"),t.buttons==0&&this.done()}updateAllowDefault(t){!this.allowDefault&&(Math.abs(this.event.x-t.clientX)>4||Math.abs(this.event.y-t.clientY)>4)&&(this.allowDefault=!0)}}Mn.touchstart=e=>{e.input.lastTouch=Date.now(),AC(e),Os(e,"pointer")};Mn.touchmove=e=>{e.input.lastTouch=Date.now(),Os(e,"pointer")};Mn.contextmenu=e=>AC(e);function cI(e,t){return e.composing?!0:An&&Math.abs(t.timeStamp-e.input.compositionEndedAt)<500?(e.input.compositionEndedAt=-2e8,!0):!1}const _W=ji?5e3:-1;Nn.compositionstart=Nn.compositionupdate=e=>{if(!e.composing){e.domObserver.flush();let{state:t}=e,n=t.selection.$to;if(t.selection instanceof qe&&(t.storedMarks||!n.textOffset&&n.parentOffset&&n.nodeBefore.marks.some(r=>r.type.spec.inclusive===!1)))e.markCursor=e.state.storedMarks||n.marks(),jh(e,!0),e.markCursor=null;else if(jh(e,!t.selection.empty),Er&&t.selection.empty&&n.parentOffset&&!n.textOffset&&n.nodeBefore.marks.length){let r=e.domSelectionRange();for(let i=r.focusNode,s=r.focusOffset;i&&i.nodeType==1&&s!=0;){let o=s<0?i.lastChild:i.childNodes[s-1];if(!o)break;if(o.nodeType==3){let l=e.domSelection();l&&l.collapse(o,o.nodeValue.length);break}else i=o,s=-1}}e.input.composing=!0}fI(e,_W)};Nn.compositionend=(e,t)=>{e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=t.timeStamp,e.input.compositionPendingChanges=e.domObserver.pendingRecords().length?e.input.compositionID:0,e.input.compositionNode=null,e.input.compositionPendingChanges&&Promise.resolve().then(()=>e.domObserver.flush()),e.input.compositionID++,fI(e,20))};function fI(e,t){clearTimeout(e.input.composingTimeout),t>-1&&(e.input.composingTimeout=setTimeout(()=>jh(e),t))}function dI(e){for(e.composing&&(e.input.composing=!1,e.input.compositionEndedAt=DW());e.input.compositionNodes.length>0;)e.input.compositionNodes.pop().markParentsDirty()}function RW(e){let t=e.domSelectionRange();if(!t.focusNode)return null;let n=EY(t.focusNode,t.focusOffset),r=CY(t.focusNode,t.focusOffset);if(n&&r&&n!=r){let i=r.pmViewDesc,s=e.domObserver.lastChangedTextNode;if(n==s||r==s)return s;if(!i||!i.isText(r.nodeValue))return r;if(e.input.compositionNode==r){let o=n.pmViewDesc;if(!(!o||!o.isText(n.nodeValue)))return r}}return n||r}function DW(){let e=document.createEvent("Event");return e.initEvent("event",!0,!0),e.timeStamp}function jh(e,t=!1){if(!(ji&&e.domObserver.flushingSoon>=0)){if(e.domObserver.forceFlush(),dI(e),t||e.docView&&e.docView.dirty){let n=SC(e),r=e.state.selection;return n&&!n.eq(r)?e.dispatch(e.state.tr.setSelection(n)):(e.markCursor||t)&&!r.$from.node(r.$from.sharedDepth(r.to)).inlineContent?e.dispatch(e.state.tr.deleteSelection()):e.updateState(e.state),!0}return!1}}function OW(e,t){if(!e.dom.parentNode)return;let n=e.dom.parentNode.appendChild(document.createElement("div"));n.appendChild(t),n.style.cssText="position: fixed; left: -10000px; top: 10px";let r=getSelection(),i=document.createRange();i.selectNodeContents(t),e.dom.blur(),r.removeAllRanges(),r.addRange(i),setTimeout(()=>{n.parentNode&&n.parentNode.removeChild(n),e.focus()},50)}const _c=qn&&Ps<15||yl&&NY<604;Mn.copy=Nn.cut=(e,t)=>{let n=t,r=e.state.selection,i=n.type=="cut";if(r.empty)return;let s=_c?null:n.clipboardData,o=r.content(),{dom:l,text:c}=CC(e,o);s?(n.preventDefault(),s.clearData(),s.setData("text/html",l.innerHTML),s.setData("text/plain",c)):OW(e,l),i&&e.dispatch(e.state.tr.deleteSelection().scrollIntoView().setMeta("uiEvent","cut"))};function jW(e){return e.openStart==0&&e.openEnd==0&&e.content.childCount==1?e.content.firstChild:null}function LW(e,t){if(!e.dom.parentNode)return;let n=e.input.shiftKey||e.state.selection.$from.parent.type.spec.code,r=e.dom.parentNode.appendChild(document.createElement(n?"textarea":"div"));n||(r.contentEditable="true"),r.style.cssText="position: fixed; left: -10000px; top: 10px",r.focus();let i=e.input.shiftKey&&e.input.lastKeyCode!=45;setTimeout(()=>{e.focus(),r.parentNode&&r.parentNode.removeChild(r),n?Rc(e,r.value,null,i,t):Rc(e,r.textContent,r.innerHTML,i,t)},50)}function Rc(e,t,n,r,i){let s=rI(e,t,n,r,e.state.selection.$from);if(e.someProp("handlePaste",c=>c(e,i,s||ve.empty)))return!0;if(!s)return!1;let o=jW(s),l=o?e.state.tr.replaceSelectionWith(o,r):e.state.tr.replaceSelection(s);return e.dispatch(l.scrollIntoView().setMeta("paste",!0).setMeta("uiEvent","paste")),!0}function hI(e){let t=e.getData("text/plain")||e.getData("Text");if(t)return t;let n=e.getData("text/uri-list");return n?n.replace(/\r?\n/g," "):""}Nn.paste=(e,t)=>{let n=t;if(e.composing&&!ji)return;let r=_c?null:n.clipboardData,i=e.input.shiftKey&&e.input.lastKeyCode!=45;r&&Rc(e,hI(r),r.getData("text/html"),i,n)?n.preventDefault():LW(e,n)};class pI{constructor(t,n,r){this.slice=t,this.move=n,this.node=r}}const PW=vr?"altKey":"ctrlKey";function mI(e,t){let n=e.someProp("dragCopies",r=>!r(t));return n??!t[PW]}Mn.dragstart=(e,t)=>{let n=t,r=e.input.mouseDown;if(r&&r.done(),!n.dataTransfer)return;let i=e.state.selection,s=i.empty?null:e.posAtCoords(Gp(n)),o;if(!(s&&s.pos>=i.from&&s.pos<=(i instanceof Re?i.to-1:i.to))){if(r&&r.mightDrag)o=Re.create(e.state.doc,r.mightDrag.pos);else if(n.target&&n.target.nodeType==1){let p=e.docView.nearestDesc(n.target,!0);p&&p.node.type.spec.draggable&&p!=e.docView&&(o=Re.create(e.state.doc,p.posBefore))}}let l=(o||e.state.selection).content(),{dom:c,text:f,slice:h}=CC(e,l);(!n.dataTransfer.files.length||!wn||VB>120)&&n.dataTransfer.clearData(),n.dataTransfer.setData(_c?"Text":"text/html",c.innerHTML),n.dataTransfer.effectAllowed="copyMove",_c||n.dataTransfer.setData("text/plain",f),e.dragging=new pI(h,mI(e,n),o)};Mn.dragend=e=>{let t=e.dragging;window.setTimeout(()=>{e.dragging==t&&(e.dragging=null)},50)};Nn.dragover=Nn.dragenter=(e,t)=>t.preventDefault();Nn.drop=(e,t)=>{let n=t,r=e.dragging;if(e.dragging=null,!n.dataTransfer)return;let i=e.posAtCoords(Gp(n));if(!i)return;let s=e.state.doc.resolve(i.pos),o=r&&r.slice;o?e.someProp("transformPasted",b=>{o=b(o,e,!1)}):o=rI(e,hI(n.dataTransfer),_c?null:n.dataTransfer.getData("text/html"),!1,s);let l=!!(r&&mI(e,n));if(e.someProp("handleDrop",b=>b(e,n,o||ve.empty,l))){n.preventDefault();return}if(!o)return;n.preventDefault();let c=o?DB(e.state.doc,s.pos,o):s.pos;c==null&&(c=s.pos);let f=e.state.tr;if(l){let{node:b}=r;b?b.replace(f):f.deleteSelection()}let h=f.mapping.map(c),p=o.openStart==0&&o.openEnd==0&&o.content.childCount==1,g=f.doc;if(p?f.replaceRangeWith(h,h,o.content.firstChild):f.replaceRange(h,h,o),f.doc.eq(g))return;let y=f.doc.resolve(h);if(p&&Re.isSelectable(o.content.firstChild)&&y.nodeAfter&&y.nodeAfter.sameMarkup(o.content.firstChild))f.setSelection(new Re(y));else{let b=f.mapping.map(c);f.mapping.maps[f.mapping.maps.length-1].forEach((S,x,C,T)=>b=T),f.setSelection(EC(e,y,f.doc.resolve(b)))}e.focus(),e.dispatch(f.setMeta("uiEvent","drop"))};Mn.focus=e=>{e.input.lastFocus=Date.now(),e.focused||(e.domObserver.stop(),e.dom.classList.add("ProseMirror-focused"),e.domObserver.start(),e.focused=!0,setTimeout(()=>{e.docView&&e.hasFocus()&&!e.domObserver.currentSelection.eq(e.domSelectionRange())&&Bi(e)},20))};Mn.blur=(e,t)=>{let n=t;e.focused&&(e.domObserver.stop(),e.dom.classList.remove("ProseMirror-focused"),e.domObserver.start(),n.relatedTarget&&e.dom.contains(n.relatedTarget)&&e.domObserver.currentSelection.clear(),e.focused=!1)};Mn.beforeinput=(e,t)=>{if(wn&&ji&&t.inputType=="deleteContentBackward"){e.domObserver.flushSoon();let{domChangeCount:r}=e.input;setTimeout(()=>{if(e.input.domChangeCount!=r||(e.dom.blur(),e.focus(),e.someProp("handleKeyDown",s=>s(e,So(8,"Backspace")))))return;let{$cursor:i}=e.state.selection;i&&i.pos>0&&e.dispatch(e.state.tr.delete(i.pos-1,i.pos).scrollIntoView())},50)}};for(let e in Nn)Mn[e]=Nn[e];function Dc(e,t){if(e==t)return!0;for(let n in e)if(e[n]!==t[n])return!1;for(let n in t)if(!(n in e))return!1;return!0}class Lh{constructor(t,n){this.toDOM=t,this.spec=n||Lo,this.side=this.spec.side||0}map(t,n,r,i){let{pos:s,deleted:o}=t.mapResult(n.from+i,this.side<0?-1:1);return o?null:new Tn(s-r,s-r,this)}valid(){return!0}eq(t){return this==t||t instanceof Lh&&(this.spec.key&&this.spec.key==t.spec.key||this.toDOM==t.toDOM&&Dc(this.spec,t.spec))}destroy(t){this.spec.destroy&&this.spec.destroy(t)}}class Is{constructor(t,n){this.attrs=t,this.spec=n||Lo}map(t,n,r,i){let s=t.map(n.from+i,this.spec.inclusiveStart?-1:1)-r,o=t.map(n.to+i,this.spec.inclusiveEnd?1:-1)-r;return s>=o?null:new Tn(s,o,this)}valid(t,n){return n.from<n.to}eq(t){return this==t||t instanceof Is&&Dc(this.attrs,t.attrs)&&Dc(this.spec,t.spec)}static is(t){return t.type instanceof Is}destroy(){}}class MC{constructor(t,n){this.attrs=t,this.spec=n||Lo}map(t,n,r,i){let s=t.mapResult(n.from+i,1);if(s.deleted)return null;let o=t.mapResult(n.to+i,-1);return o.deleted||o.pos<=s.pos?null:new Tn(s.pos-r,o.pos-r,this)}valid(t,n){let{index:r,offset:i}=t.content.findIndex(n.from),s;return i==n.from&&!(s=t.child(r)).isText&&i+s.nodeSize==n.to}eq(t){return this==t||t instanceof MC&&Dc(this.attrs,t.attrs)&&Dc(this.spec,t.spec)}destroy(){}}class Tn{constructor(t,n,r){this.from=t,this.to=n,this.type=r}copy(t,n){return new Tn(t,n,this.type)}eq(t,n=0){return this.type.eq(t.type)&&this.from+n==t.from&&this.to+n==t.to}map(t,n,r){return this.type.map(t,this,n,r)}static widget(t,n,r){return new Tn(t,t,new Lh(n,r))}static inline(t,n,r,i){return new Tn(t,n,new Is(r,i))}static node(t,n,r,i){return new Tn(t,n,new MC(r,i))}get spec(){return this.type.spec}get inline(){return this.type instanceof Is}get widget(){return this.type instanceof Lh}}const Za=[],Lo={};class Et{constructor(t,n){this.local=t.length?t:Za,this.children=n.length?n:Za}static create(t,n){return n.length?Ph(n,t,0,Lo):bn}find(t,n,r){let i=[];return this.findInner(t??0,n??1e9,i,0,r),i}findInner(t,n,r,i,s){for(let o=0;o<this.local.length;o++){let l=this.local[o];l.from<=n&&l.to>=t&&(!s||s(l.spec))&&r.push(l.copy(l.from+i,l.to+i))}for(let o=0;o<this.children.length;o+=3)if(this.children[o]<n&&this.children[o+1]>t){let l=this.children[o]+1;this.children[o+2].findInner(t-l,n-l,r,i+l,s)}}map(t,n,r){return this==bn||t.maps.length==0?this:this.mapInner(t,n,0,0,r||Lo)}mapInner(t,n,r,i,s){let o;for(let l=0;l<this.local.length;l++){let c=this.local[l].map(t,r,i);c&&c.type.valid(n,c)?(o||(o=[])).push(c):s.onRemove&&s.onRemove(this.local[l].spec)}return this.children.length?BW(this.children,o||[],t,n,r,i,s):o?new Et(o.sort(Po),Za):bn}add(t,n){return n.length?this==bn?Et.create(t,n):this.addInner(t,n,0):this}addInner(t,n,r){let i,s=0;t.forEach((l,c)=>{let f=c+r,h;if(h=yI(n,l,f)){for(i||(i=this.children.slice());s<i.length&&i[s]<c;)s+=3;i[s]==c?i[s+2]=i[s+2].addInner(l,h,f+1):i.splice(s,0,c,c+l.nodeSize,Ph(h,l,f+1,Lo)),s+=3}});let o=gI(s?vI(n):n,-r);for(let l=0;l<o.length;l++)o[l].type.valid(t,o[l])||o.splice(l--,1);return new Et(o.length?this.local.concat(o).sort(Po):this.local,i||this.children)}remove(t){return t.length==0||this==bn?this:this.removeInner(t,0)}removeInner(t,n){let r=this.children,i=this.local;for(let s=0;s<r.length;s+=3){let o,l=r[s]+n,c=r[s+1]+n;for(let h=0,p;h<t.length;h++)(p=t[h])&&p.from>l&&p.to<c&&(t[h]=null,(o||(o=[])).push(p));if(!o)continue;r==this.children&&(r=this.children.slice());let f=r[s+2].removeInner(o,l+1);f!=bn?r[s+2]=f:(r.splice(s,3),s-=3)}if(i.length){for(let s=0,o;s<t.length;s++)if(o=t[s])for(let l=0;l<i.length;l++)i[l].eq(o,n)&&(i==this.local&&(i=this.local.slice()),i.splice(l--,1))}return r==this.children&&i==this.local?this:i.length||r.length?new Et(i,r):bn}forChild(t,n){if(this==bn)return this;if(n.isLeaf)return Et.empty;let r,i;for(let l=0;l<this.children.length;l+=3)if(this.children[l]>=t){this.children[l]==t&&(r=this.children[l+2]);break}let s=t+1,o=s+n.content.size;for(let l=0;l<this.local.length;l++){let c=this.local[l];if(c.from<o&&c.to>s&&c.type instanceof Is){let f=Math.max(s,c.from)-s,h=Math.min(o,c.to)-s;f<h&&(i||(i=[])).push(c.copy(f,h))}}if(i){let l=new Et(i.sort(Po),Za);return r?new As([l,r]):l}return r||bn}eq(t){if(this==t)return!0;if(!(t instanceof Et)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(let n=0;n<this.local.length;n++)if(!this.local[n].eq(t.local[n]))return!1;for(let n=0;n<this.children.length;n+=3)if(this.children[n]!=t.children[n]||this.children[n+1]!=t.children[n+1]||!this.children[n+2].eq(t.children[n+2]))return!1;return!0}locals(t){return NC(this.localsInner(t))}localsInner(t){if(this==bn)return Za;if(t.inlineContent||!this.local.some(Is.is))return this.local;let n=[];for(let r=0;r<this.local.length;r++)this.local[r].type instanceof Is||n.push(this.local[r]);return n}forEachSet(t){t(this)}}Et.empty=new Et([],[]);Et.removeOverlap=NC;const bn=Et.empty;class As{constructor(t){this.members=t}map(t,n){const r=this.members.map(i=>i.map(t,n,Lo));return As.from(r)}forChild(t,n){if(n.isLeaf)return Et.empty;let r=[];for(let i=0;i<this.members.length;i++){let s=this.members[i].forChild(t,n);s!=bn&&(s instanceof As?r=r.concat(s.members):r.push(s))}return As.from(r)}eq(t){if(!(t instanceof As)||t.members.length!=this.members.length)return!1;for(let n=0;n<this.members.length;n++)if(!this.members[n].eq(t.members[n]))return!1;return!0}locals(t){let n,r=!0;for(let i=0;i<this.members.length;i++){let s=this.members[i].localsInner(t);if(s.length)if(!n)n=s;else{r&&(n=n.slice(),r=!1);for(let o=0;o<s.length;o++)n.push(s[o])}}return n?NC(r?n:n.sort(Po)):Za}static from(t){switch(t.length){case 0:return bn;case 1:return t[0];default:return new As(t.every(n=>n instanceof Et)?t:t.reduce((n,r)=>n.concat(r instanceof Et?r:r.members),[]))}}forEachSet(t){for(let n=0;n<this.members.length;n++)this.members[n].forEachSet(t)}}function BW(e,t,n,r,i,s,o){let l=e.slice();for(let f=0,h=s;f<n.maps.length;f++){let p=0;n.maps[f].forEach((g,y,b,S)=>{let x=S-b-(y-g);for(let C=0;C<l.length;C+=3){let T=l[C+1];if(T<0||g>T+h-p)continue;let k=l[C]+h-p;y>=k?l[C+1]=g<=k?-2:-1:g>=h&&x&&(l[C]+=x,l[C+1]+=x)}p+=x}),h=n.maps[f].map(h,-1)}let c=!1;for(let f=0;f<l.length;f+=3)if(l[f+1]<0){if(l[f+1]==-2){c=!0,l[f+1]=-1;continue}let h=n.map(e[f]+s),p=h-i;if(p<0||p>=r.content.size){c=!0;continue}let g=n.map(e[f+1]+s,-1),y=g-i,{index:b,offset:S}=r.content.findIndex(p),x=r.maybeChild(b);if(x&&S==p&&S+x.nodeSize==y){let C=l[f+2].mapInner(n,x,h+1,e[f]+s+1,o);C!=bn?(l[f]=p,l[f+1]=y,l[f+2]=C):(l[f+1]=-2,c=!0)}else c=!0}if(c){let f=IW(l,e,t,n,i,s,o),h=Ph(f,r,0,o);t=h.local;for(let p=0;p<l.length;p+=3)l[p+1]<0&&(l.splice(p,3),p-=3);for(let p=0,g=0;p<h.children.length;p+=3){let y=h.children[p];for(;g<l.length&&l[g]<y;)g+=3;l.splice(g,0,h.children[p],h.children[p+1],h.children[p+2])}}return new Et(t.sort(Po),l)}function gI(e,t){if(!t||!e.length)return e;let n=[];for(let r=0;r<e.length;r++){let i=e[r];n.push(new Tn(i.from+t,i.to+t,i.type))}return n}function IW(e,t,n,r,i,s,o){function l(c,f){for(let h=0;h<c.local.length;h++){let p=c.local[h].map(r,i,f);p?n.push(p):o.onRemove&&o.onRemove(c.local[h].spec)}for(let h=0;h<c.children.length;h+=3)l(c.children[h+2],c.children[h]+f+1)}for(let c=0;c<e.length;c+=3)e[c+1]==-1&&l(e[c+2],t[c]+s+1);return n}function yI(e,t,n){if(t.isLeaf)return null;let r=n+t.nodeSize,i=null;for(let s=0,o;s<e.length;s++)(o=e[s])&&o.from>n&&o.to<r&&((i||(i=[])).push(o),e[s]=null);return i}function vI(e){let t=[];for(let n=0;n<e.length;n++)e[n]!=null&&t.push(e[n]);return t}function Ph(e,t,n,r){let i=[],s=!1;t.forEach((l,c)=>{let f=yI(e,l,c+n);if(f){s=!0;let h=Ph(f,l,n+c+1,r);h!=bn&&i.push(c,c+l.nodeSize,h)}});let o=gI(s?vI(e):e,-n).sort(Po);for(let l=0;l<o.length;l++)o[l].type.valid(t,o[l])||(r.onRemove&&r.onRemove(o[l].spec),o.splice(l--,1));return o.length||i.length?new Et(o,i):bn}function Po(e,t){return e.from-t.from||e.to-t.to}function NC(e){let t=e;for(let n=0;n<t.length-1;n++){let r=t[n];if(r.from!=r.to)for(let i=n+1;i<t.length;i++){let s=t[i];if(s.from==r.from){s.to!=r.to&&(t==e&&(t=e.slice()),t[i]=s.copy(s.from,r.to),F_(t,i+1,s.copy(r.to,s.to)));continue}else{s.from<r.to&&(t==e&&(t=e.slice()),t[n]=r.copy(r.from,s.from),F_(t,i,r.copy(s.from,r.to)));break}}}return t}function F_(e,t,n){for(;t<e.length&&Po(n,e[t])>0;)t++;e.splice(t,0,n)}function E0(e){let t=[];return e.someProp("decorations",n=>{let r=n(e.state);r&&r!=bn&&t.push(r)}),e.cursorWrapper&&t.push(Et.create(e.state.doc,[e.cursorWrapper.deco])),As.from(t)}const zW={childList:!0,characterData:!0,characterDataOldValue:!0,attributes:!0,attributeOldValue:!0,subtree:!0},qW=qn&&Ps<=11;class VW{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}set(t){this.anchorNode=t.anchorNode,this.anchorOffset=t.anchorOffset,this.focusNode=t.focusNode,this.focusOffset=t.focusOffset}clear(){this.anchorNode=this.focusNode=null}eq(t){return t.anchorNode==this.anchorNode&&t.anchorOffset==this.anchorOffset&&t.focusNode==this.focusNode&&t.focusOffset==this.focusOffset}}class HW{constructor(t,n){this.view=t,this.handleDOMChange=n,this.queue=[],this.flushingSoon=-1,this.observer=null,this.currentSelection=new VW,this.onCharData=null,this.suppressingSelectionUpdates=!1,this.lastChangedTextNode=null,this.observer=window.MutationObserver&&new window.MutationObserver(r=>{for(let i=0;i<r.length;i++)this.queue.push(r[i]);qn&&Ps<=11&&r.some(i=>i.type=="childList"&&i.removedNodes.length||i.type=="characterData"&&i.oldValue.length>i.target.nodeValue.length)?this.flushSoon():this.flush()}),qW&&(this.onCharData=r=>{this.queue.push({target:r.target,type:"characterData",oldValue:r.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this)}flushSoon(){this.flushingSoon<0&&(this.flushingSoon=window.setTimeout(()=>{this.flushingSoon=-1,this.flush()},20))}forceFlush(){this.flushingSoon>-1&&(window.clearTimeout(this.flushingSoon),this.flushingSoon=-1,this.flush())}start(){this.observer&&(this.observer.takeRecords(),this.observer.observe(this.view.dom,zW)),this.onCharData&&this.view.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.connectSelection()}stop(){if(this.observer){let t=this.observer.takeRecords();if(t.length){for(let n=0;n<t.length;n++)this.queue.push(t[n]);window.setTimeout(()=>this.flush(),20)}this.observer.disconnect()}this.onCharData&&this.view.dom.removeEventListener("DOMCharacterDataModified",this.onCharData),this.disconnectSelection()}connectSelection(){this.view.dom.ownerDocument.addEventListener("selectionchange",this.onSelectionChange)}disconnectSelection(){this.view.dom.ownerDocument.removeEventListener("selectionchange",this.onSelectionChange)}suppressSelectionUpdates(){this.suppressingSelectionUpdates=!0,setTimeout(()=>this.suppressingSelectionUpdates=!1,50)}onSelectionChange(){if(L_(this.view)){if(this.suppressingSelectionUpdates)return Bi(this.view);if(qn&&Ps<=11&&!this.view.state.selection.empty){let t=this.view.domSelectionRange();if(t.focusNode&&Ho(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset))return this.flushSoon()}this.flush()}}setCurSelection(){this.currentSelection.set(this.view.domSelectionRange())}ignoreSelectionChange(t){if(!t.focusNode)return!0;let n=new Set,r;for(let s=t.focusNode;s;s=gl(s))n.add(s);for(let s=t.anchorNode;s;s=gl(s))if(n.has(s)){r=s;break}let i=r&&this.view.docView.nearestDesc(r);if(i&&i.ignoreMutation({type:"selection",target:r.nodeType==3?r.parentNode:r}))return this.setCurSelection(),!0}pendingRecords(){if(this.observer)for(let t of this.observer.takeRecords())this.queue.push(t);return this.queue}flush(){let{view:t}=this;if(!t.docView||this.flushingSoon>-1)return;let n=this.pendingRecords();n.length&&(this.queue=[]);let r=t.domSelectionRange(),i=!this.suppressingSelectionUpdates&&!this.currentSelection.eq(r)&&L_(t)&&!this.ignoreSelectionChange(r),s=-1,o=-1,l=!1,c=[];if(t.editable)for(let h=0;h<n.length;h++){let p=this.registerMutation(n[h],c);p&&(s=s<0?p.from:Math.min(p.from,s),o=o<0?p.to:Math.max(p.to,o),p.typeOver&&(l=!0))}if(Er&&c.length){let h=c.filter(p=>p.nodeName=="BR");if(h.length==2){let[p,g]=h;p.parentNode&&p.parentNode.parentNode==g.parentNode?g.remove():p.remove()}else{let{focusNode:p}=this.currentSelection;for(let g of h){let y=g.parentNode;y&&y.nodeName=="LI"&&(!p||$W(t,p)!=y)&&g.remove()}}}let f=null;s<0&&i&&t.input.lastFocus>Date.now()-200&&Math.max(t.input.lastTouch,t.input.lastClick.time)<Date.now()-300&&Up(r)&&(f=SC(t))&&f.eq(Ue.near(t.state.doc.resolve(0),1))?(t.input.lastFocus=0,Bi(t),this.currentSelection.set(r),t.scrollToSelection()):(s>-1||i)&&(s>-1&&(t.docView.markDirty(s,o),FW(t)),this.handleDOMChange(s,o,l,c),t.docView&&t.docView.dirty?t.updateState(t.state):this.currentSelection.eq(r)||Bi(t),this.currentSelection.set(r))}registerMutation(t,n){if(n.indexOf(t.target)>-1)return null;let r=this.view.docView.nearestDesc(t.target);if(t.type=="attributes"&&(r==this.view.docView||t.attributeName=="contenteditable"||t.attributeName=="style"&&!t.oldValue&&!t.target.getAttribute("style"))||!r||r.ignoreMutation(t))return null;if(t.type=="childList"){for(let h=0;h<t.addedNodes.length;h++){let p=t.addedNodes[h];n.push(p),p.nodeType==3&&(this.lastChangedTextNode=p)}if(r.contentDOM&&r.contentDOM!=r.dom&&!r.contentDOM.contains(t.target))return{from:r.posBefore,to:r.posAfter};let i=t.previousSibling,s=t.nextSibling;if(qn&&Ps<=11&&t.addedNodes.length)for(let h=0;h<t.addedNodes.length;h++){let{previousSibling:p,nextSibling:g}=t.addedNodes[h];(!p||Array.prototype.indexOf.call(t.addedNodes,p)<0)&&(i=p),(!g||Array.prototype.indexOf.call(t.addedNodes,g)<0)&&(s=g)}let o=i&&i.parentNode==t.target?dn(i)+1:0,l=r.localPosFromDOM(t.target,o,-1),c=s&&s.parentNode==t.target?dn(s):t.target.childNodes.length,f=r.localPosFromDOM(t.target,c,1);return{from:l,to:f}}else return t.type=="attributes"?{from:r.posAtStart-r.border,to:r.posAtEnd+r.border}:(this.lastChangedTextNode=t.target,{from:r.posAtStart,to:r.posAtEnd,typeOver:t.target.nodeValue==t.oldValue})}}let U_=new WeakMap,$_=!1;function FW(e){if(!U_.has(e)&&(U_.set(e,null),["normal","nowrap","pre-line"].indexOf(getComputedStyle(e.dom).whiteSpace)!==-1)){if(e.requiresGeckoHackNode=Er,$_)return;console.warn("ProseMirror expects the CSS white-space property to be set, preferably to 'pre-wrap'. It is recommended to load style/prosemirror.css from the prosemirror-view package."),$_=!0}}function G_(e,t){let n=t.startContainer,r=t.startOffset,i=t.endContainer,s=t.endOffset,o=e.domAtPos(e.state.selection.anchor);return Ho(o.node,o.offset,i,s)&&([n,r,i,s]=[i,s,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:s}}function UW(e,t){if(t.getComposedRanges){let i=t.getComposedRanges(e.root)[0];if(i)return G_(e,i)}let n;function r(i){i.preventDefault(),i.stopImmediatePropagation(),n=i.getTargetRanges()[0]}return e.dom.addEventListener("beforeinput",r,!0),document.execCommand("indent"),e.dom.removeEventListener("beforeinput",r,!0),n?G_(e,n):null}function $W(e,t){for(let n=t.parentNode;n&&n!=e.dom;n=n.parentNode){let r=e.docView.nearestDesc(n,!0);if(r&&r.node.isBlock)return n}return null}function GW(e,t,n){let{node:r,fromOffset:i,toOffset:s,from:o,to:l}=e.docView.parseRange(t,n),c=e.domSelectionRange(),f,h=c.anchorNode;if(h&&e.dom.contains(h.nodeType==1?h:h.parentNode)&&(f=[{node:h,offset:c.anchorOffset}],Up(c)||f.push({node:c.focusNode,offset:c.focusOffset})),wn&&e.input.lastKeyCode===8)for(let x=s;x>i;x--){let C=r.childNodes[x-1],T=C.pmViewDesc;if(C.nodeName=="BR"&&!T){s=x;break}if(!T||T.size)break}let p=e.state.doc,g=e.someProp("domParser")||Ls.fromSchema(e.state.schema),y=p.resolve(o),b=null,S=g.parse(r,{topNode:y.parent,topMatch:y.parent.contentMatchAt(y.index()),topOpen:!0,from:i,to:s,preserveWhitespace:y.parent.type.whitespace=="pre"?"full":!0,findPositions:f,ruleFromNode:KW,context:y});if(f&&f[0].pos!=null){let x=f[0].pos,C=f[1]&&f[1].pos;C==null&&(C=x),b={anchor:x+o,head:C+o}}return{doc:S,sel:b,from:o,to:l}}function KW(e){let t=e.pmViewDesc;if(t)return t.parseRule();if(e.nodeName=="BR"&&e.parentNode){if(An&&/^(ul|ol)$/i.test(e.parentNode.nodeName)){let n=document.createElement("div");return n.appendChild(document.createElement("li")),{skip:n}}else if(e.parentNode.lastChild==e||An&&/^(tr|table)$/i.test(e.parentNode.nodeName))return{ignore:!0}}else if(e.nodeName=="IMG"&&e.getAttribute("mark-placeholder"))return{ignore:!0};return null}const YW=/^(a|abbr|acronym|b|bd[io]|big|br|button|cite|code|data(list)?|del|dfn|em|i|img|ins|kbd|label|map|mark|meter|output|q|ruby|s|samp|small|span|strong|su[bp]|time|u|tt|var)$/i;function WW(e,t,n,r,i){let s=e.input.compositionPendingChanges||(e.composing?e.input.compositionID:0);if(e.input.compositionPendingChanges=0,t<0){let O=e.input.lastSelectionTime>Date.now()-50?e.input.lastSelectionOrigin:null,I=SC(e,O);if(I&&!e.state.selection.eq(I)){if(wn&&ji&&e.input.lastKeyCode===13&&Date.now()-100<e.input.lastKeyCodeTime&&e.someProp("handleKeyDown",q=>q(e,So(13,"Enter"))))return;let $=e.state.tr.setSelection(I);O=="pointer"?$.setMeta("pointer",!0):O=="key"&&$.scrollIntoView(),s&&$.setMeta("composition",s),e.dispatch($)}return}let o=e.state.doc.resolve(t),l=o.sharedDepth(n);t=o.before(l+1),n=e.state.doc.resolve(n).after(l+1);let c=e.state.selection,f=GW(e,t,n),h=e.state.doc,p=h.slice(f.from,f.to),g,y;e.input.lastKeyCode===8&&Date.now()-100<e.input.lastKeyCodeTime?(g=e.state.selection.to,y="end"):(g=e.state.selection.from,y="start"),e.input.lastKeyCode=null;let b=QW(p.content,f.doc.content,f.from,g,y);if(b&&e.input.domChangeCount++,(yl&&e.input.lastIOSEnter>Date.now()-225||ji)&&i.some(O=>O.nodeType==1&&!YW.test(O.nodeName))&&(!b||b.endA>=b.endB)&&e.someProp("handleKeyDown",O=>O(e,So(13,"Enter")))){e.input.lastIOSEnter=0;return}if(!b)if(r&&c instanceof qe&&!c.empty&&c.$head.sameParent(c.$anchor)&&!e.composing&&!(f.sel&&f.sel.anchor!=f.sel.head))b={start:c.from,endA:c.to,endB:c.to};else{if(f.sel){let O=K_(e,e.state.doc,f.sel);if(O&&!O.eq(e.state.selection)){let I=e.state.tr.setSelection(O);s&&I.setMeta("composition",s),e.dispatch(I)}}return}e.state.selection.from<e.state.selection.to&&b.start==b.endB&&e.state.selection instanceof qe&&(b.start>e.state.selection.from&&b.start<=e.state.selection.from+2&&e.state.selection.from>=f.from?b.start=e.state.selection.from:b.endA<e.state.selection.to&&b.endA>=e.state.selection.to-2&&e.state.selection.to<=f.to&&(b.endB+=e.state.selection.to-b.endA,b.endA=e.state.selection.to)),qn&&Ps<=11&&b.endB==b.start+1&&b.endA==b.start&&b.start>f.from&&f.doc.textBetween(b.start-f.from-1,b.start-f.from+1)=="  "&&(b.start--,b.endA--,b.endB--);let S=f.doc.resolveNoCache(b.start-f.from),x=f.doc.resolveNoCache(b.endB-f.from),C=h.resolve(b.start),T=S.sameParent(x)&&S.parent.inlineContent&&C.end()>=b.endA,k;if((yl&&e.input.lastIOSEnter>Date.now()-225&&(!T||i.some(O=>O.nodeName=="DIV"||O.nodeName=="P"))||!T&&S.pos<f.doc.content.size&&(!S.sameParent(x)||!S.parent.inlineContent)&&!/\S/.test(f.doc.textBetween(S.pos,x.pos,"",""))&&(k=Ue.findFrom(f.doc.resolve(S.pos+1),1,!0))&&k.head>S.pos)&&e.someProp("handleKeyDown",O=>O(e,So(13,"Enter")))){e.input.lastIOSEnter=0;return}if(e.state.selection.anchor>b.start&&ZW(h,b.start,b.endA,S,x)&&e.someProp("handleKeyDown",O=>O(e,So(8,"Backspace")))){ji&&wn&&e.domObserver.suppressSelectionUpdates();return}wn&&b.endB==b.start&&(e.input.lastChromeDelete=Date.now()),ji&&!T&&S.start()!=x.start()&&x.parentOffset==0&&S.depth==x.depth&&f.sel&&f.sel.anchor==f.sel.head&&f.sel.head==b.endA&&(b.endB-=2,x=f.doc.resolveNoCache(b.endB-f.from),setTimeout(()=>{e.someProp("handleKeyDown",function(O){return O(e,So(13,"Enter"))})},20));let A=b.start,M=b.endA,_=O=>{let I=O||e.state.tr.replace(A,M,f.doc.slice(b.start-f.from,b.endB-f.from));if(f.sel){let $=K_(e,I.doc,f.sel);$&&!(wn&&e.composing&&$.empty&&(b.start!=b.endB||e.input.lastChromeDelete<Date.now()-100)&&($.head==A||$.head==I.mapping.map(M)-1)||qn&&$.empty&&$.head==A)&&I.setSelection($)}return s&&I.setMeta("composition",s),I.scrollIntoView()},R;if(T){if(S.pos==x.pos){qn&&Ps<=11&&S.parentOffset==0&&(e.domObserver.suppressSelectionUpdates(),setTimeout(()=>Bi(e),20));let O=_(e.state.tr.delete(A,M)),I=h.resolve(b.start).marksAcross(h.resolve(b.endA));I&&O.ensureMarks(I),e.dispatch(O)}else if(b.endA==b.endB&&(R=XW(S.parent.content.cut(S.parentOffset,x.parentOffset),C.parent.content.cut(C.parentOffset,b.endA-C.start())))){let O=_(e.state.tr);R.type=="add"?O.addMark(A,M,R.mark):O.removeMark(A,M,R.mark),e.dispatch(O)}else if(S.parent.child(S.index()).isText&&S.index()==x.index()-(x.textOffset?0:1)){let O=S.parent.textBetween(S.parentOffset,x.parentOffset),I=()=>_(e.state.tr.insertText(O,A,M));e.someProp("handleTextInput",$=>$(e,A,M,O,I))||e.dispatch(I())}}else e.dispatch(_())}function K_(e,t,n){return Math.max(n.anchor,n.head)>t.content.size?null:EC(e,t.resolve(n.anchor),t.resolve(n.head))}function XW(e,t){let n=e.firstChild.marks,r=t.firstChild.marks,i=n,s=r,o,l,c;for(let h=0;h<r.length;h++)i=r[h].removeFromSet(i);for(let h=0;h<n.length;h++)s=n[h].removeFromSet(s);if(i.length==1&&s.length==0)l=i[0],o="add",c=h=>h.mark(l.addToSet(h.marks));else if(i.length==0&&s.length==1)l=s[0],o="remove",c=h=>h.mark(l.removeFromSet(h.marks));else return null;let f=[];for(let h=0;h<t.childCount;h++)f.push(c(t.child(h)));if(pe.from(f).eq(e))return{mark:l,type:o}}function ZW(e,t,n,r,i){if(n-t<=i.pos-r.pos||C0(r,!0,!1)<i.pos)return!1;let s=e.resolve(t);if(!r.parent.isTextblock){let l=s.nodeAfter;return l!=null&&n==t+l.nodeSize}if(s.parentOffset<s.parent.content.size||!s.parent.isTextblock)return!1;let o=e.resolve(C0(s,!0,!0));return!o.parent.isTextblock||o.pos>n||C0(o,!0,!1)<n?!1:r.parent.content.cut(r.parentOffset).eq(o.parent.content)}function C0(e,t,n){let r=e.depth,i=t?e.end():e.pos;for(;r>0&&(t||e.indexAfter(r)==e.node(r).childCount);)r--,i++,t=!1;if(n){let s=e.node(r).maybeChild(e.indexAfter(r));for(;s&&!s.isLeaf;)s=s.firstChild,i++}return i}function QW(e,t,n,r,i){let s=e.findDiffStart(t,n);if(s==null)return null;let{a:o,b:l}=e.findDiffEnd(t,n+e.size,n+t.size);if(i=="end"){let c=Math.max(0,s-Math.min(o,l));r-=o+c-s}if(o<s&&e.size<t.size){let c=r<=s&&r>=o?s-r:0;s-=c,s&&s<t.size&&Y_(t.textBetween(s-1,s+1))&&(s+=c?1:-1),l=s+(l-o),o=s}else if(l<s){let c=r<=s&&r>=l?s-r:0;s-=c,s&&s<e.size&&Y_(e.textBetween(s-1,s+1))&&(s+=c?1:-1),o=s+(o-l),l=s}return{start:s,endA:o,endB:l}}function Y_(e){if(e.length!=2)return!1;let t=e.charCodeAt(0),n=e.charCodeAt(1);return t>=56320&&t<=57343&&n>=55296&&n<=56319}class bI{constructor(t,n){this._root=null,this.focused=!1,this.trackWrites=null,this.mounted=!1,this.markCursor=null,this.cursorWrapper=null,this.lastSelectedViewDesc=void 0,this.input=new yW,this.prevDirectPlugins=[],this.pluginViews=[],this.requiresGeckoHackNode=!1,this.dragging=null,this._props=n,this.state=n.state,this.directPlugins=n.plugins||[],this.directPlugins.forEach(J_),this.dispatch=this.dispatch.bind(this),this.dom=t&&t.mount||document.createElement("div"),t&&(t.appendChild?t.appendChild(this.dom):typeof t=="function"?t(this.dom):t.mount&&(this.mounted=!0)),this.editable=Z_(this),X_(this),this.nodeViews=Q_(this),this.docView=N_(this.state.doc,W_(this),E0(this),this.dom,this),this.domObserver=new HW(this,(r,i,s,o)=>WW(this,r,i,s,o)),this.domObserver.start(),vW(this),this.updatePluginViews()}get composing(){return this.input.composing}get props(){if(this._props.state!=this.state){let t=this._props;this._props={};for(let n in t)this._props[n]=t[n];this._props.state=this.state}return this._props}update(t){t.handleDOMEvents!=this._props.handleDOMEvents&&iE(this);let n=this._props;this._props=t,t.plugins&&(t.plugins.forEach(J_),this.directPlugins=t.plugins),this.updateStateInner(t.state,n)}setProps(t){let n={};for(let r in this._props)n[r]=this._props[r];n.state=this.state;for(let r in t)n[r]=t[r];this.update(n)}updateState(t){this.updateStateInner(t,this._props)}updateStateInner(t,n){var r;let i=this.state,s=!1,o=!1;t.storedMarks&&this.composing&&(dI(this),o=!0),this.state=t;let l=i.plugins!=t.plugins||this._props.plugins!=n.plugins;if(l||this._props.plugins!=n.plugins||this._props.nodeViews!=n.nodeViews){let y=Q_(this);eX(y,this.nodeViews)&&(this.nodeViews=y,s=!0)}(l||n.handleDOMEvents!=this._props.handleDOMEvents)&&iE(this),this.editable=Z_(this),X_(this);let c=E0(this),f=W_(this),h=i.plugins!=t.plugins&&!i.doc.eq(t.doc)?"reset":t.scrollToSelection>i.scrollToSelection?"to selection":"preserve",p=s||!this.docView.matchesNode(t.doc,f,c);(p||!t.selection.eq(i.selection))&&(o=!0);let g=h=="preserve"&&o&&this.dom.style.overflowAnchor==null&&DY(this);if(o){this.domObserver.stop();let y=p&&(qn||wn)&&!this.composing&&!i.selection.empty&&!t.selection.empty&&JW(i.selection,t.selection);if(p){let b=wn?this.trackWrites=this.domSelectionRange().focusNode:null;this.composing&&(this.input.compositionNode=RW(this)),(s||!this.docView.update(t.doc,f,c,this))&&(this.docView.updateOuterDeco(f),this.docView.destroy(),this.docView=N_(t.doc,f,c,this.dom,this)),b&&!this.trackWrites&&(y=!0)}y||!(this.input.mouseDown&&this.domObserver.currentSelection.eq(this.domSelectionRange())&&nW(this))?Bi(this,y):(eI(this,t.selection),this.domObserver.setCurSelection()),this.domObserver.start()}this.updatePluginViews(i),!((r=this.dragging)===null||r===void 0)&&r.node&&!i.doc.eq(t.doc)&&this.updateDraggedNode(this.dragging,i),h=="reset"?this.dom.scrollTop=0:h=="to selection"?this.scrollToSelection():g&&OY(g)}scrollToSelection(){let t=this.domSelectionRange().focusNode;if(!(!t||!this.dom.contains(t.nodeType==1?t:t.parentNode))){if(!this.someProp("handleScrollToSelection",n=>n(this)))if(this.state.selection instanceof Re){let n=this.docView.domAfterPos(this.state.selection.from);n.nodeType==1&&E_(this,n.getBoundingClientRect(),t)}else E_(this,this.coordsAtPos(this.state.selection.head,1),t)}}destroyPluginViews(){let t;for(;t=this.pluginViews.pop();)t.destroy&&t.destroy()}updatePluginViews(t){if(!t||t.plugins!=this.state.plugins||this.directPlugins!=this.prevDirectPlugins){this.prevDirectPlugins=this.directPlugins,this.destroyPluginViews();for(let n=0;n<this.directPlugins.length;n++){let r=this.directPlugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}for(let n=0;n<this.state.plugins.length;n++){let r=this.state.plugins[n];r.spec.view&&this.pluginViews.push(r.spec.view(this))}}else for(let n=0;n<this.pluginViews.length;n++){let r=this.pluginViews[n];r.update&&r.update(this,t)}}updateDraggedNode(t,n){let r=t.node,i=-1;if(this.state.doc.nodeAt(r.from)==r.node)i=r.from;else{let s=r.from+(this.state.doc.content.size-n.doc.content.size);(s>0&&this.state.doc.nodeAt(s))==r.node&&(i=s)}this.dragging=new pI(t.slice,t.move,i<0?void 0:Re.create(this.state.doc,i))}someProp(t,n){let r=this._props&&this._props[t],i;if(r!=null&&(i=n?n(r):r))return i;for(let o=0;o<this.directPlugins.length;o++){let l=this.directPlugins[o].props[t];if(l!=null&&(i=n?n(l):l))return i}let s=this.state.plugins;if(s)for(let o=0;o<s.length;o++){let l=s[o].props[t];if(l!=null&&(i=n?n(l):l))return i}}hasFocus(){if(qn){let t=this.root.activeElement;if(t==this.dom)return!0;if(!t||!this.dom.contains(t))return!1;for(;t&&this.dom!=t&&this.dom.contains(t);){if(t.contentEditable=="false")return!1;t=t.parentElement}return!0}return this.root.activeElement==this.dom}focus(){this.domObserver.stop(),this.editable&&jY(this.dom),Bi(this),this.domObserver.start()}get root(){let t=this._root;if(t==null){for(let n=this.dom.parentNode;n;n=n.parentNode)if(n.nodeType==9||n.nodeType==11&&n.host)return n.getSelection||(Object.getPrototypeOf(n).getSelection=()=>n.ownerDocument.getSelection()),this._root=n}return t||document}updateRoot(){this._root=null}posAtCoords(t){return zY(this,t)}coordsAtPos(t,n=1){return GB(this,t,n)}domAtPos(t,n=0){return this.docView.domFromPos(t,n)}nodeDOM(t){let n=this.docView.descAt(t);return n?n.nodeDOM:null}posAtDOM(t,n,r=-1){let i=this.docView.posFromDOM(t,n,r);if(i==null)throw new RangeError("DOM position not inside the editor");return i}endOfTextblock(t,n){return UY(this,n||this.state,t)}pasteHTML(t,n){return Rc(this,"",t,!1,n||new ClipboardEvent("paste"))}pasteText(t,n){return Rc(this,t,null,!0,n||new ClipboardEvent("paste"))}serializeForClipboard(t){return CC(this,t)}destroy(){this.docView&&(bW(this),this.destroyPluginViews(),this.mounted?(this.docView.update(this.state.doc,[],E0(this),this),this.dom.textContent=""):this.dom.parentNode&&this.dom.parentNode.removeChild(this.dom),this.docView.destroy(),this.docView=null,wY())}get isDestroyed(){return this.docView==null}dispatchEvent(t){return wW(this,t)}domSelectionRange(){let t=this.domSelection();return t?An&&this.root.nodeType===11&&TY(this.dom.ownerDocument)==this.dom&&UW(this,t)||t:{focusNode:null,focusOffset:0,anchorNode:null,anchorOffset:0}}domSelection(){return this.root.getSelection()}}bI.prototype.dispatch=function(e){let t=this._props.dispatchTransaction;t?t.call(this,e):this.updateState(this.state.apply(e))};function W_(e){let t=Object.create(null);return t.class="ProseMirror",t.contenteditable=String(e.editable),e.someProp("attributes",n=>{if(typeof n=="function"&&(n=n(e.state)),n)for(let r in n)r=="class"?t.class+=" "+n[r]:r=="style"?t.style=(t.style?t.style+";":"")+n[r]:!t[r]&&r!="contenteditable"&&r!="nodeName"&&(t[r]=String(n[r]))}),t.translate||(t.translate="no"),[Tn.node(0,e.state.doc.content.size,t)]}function X_(e){if(e.markCursor){let t=document.createElement("img");t.className="ProseMirror-separator",t.setAttribute("mark-placeholder","true"),t.setAttribute("alt",""),e.cursorWrapper={dom:t,deco:Tn.widget(e.state.selection.from,t,{raw:!0,marks:e.markCursor})}}else e.cursorWrapper=null}function Z_(e){return!e.someProp("editable",t=>t(e.state)===!1)}function JW(e,t){let n=Math.min(e.$anchor.sharedDepth(e.head),t.$anchor.sharedDepth(t.head));return e.$anchor.start(n)!=t.$anchor.start(n)}function Q_(e){let t=Object.create(null);function n(r){for(let i in r)Object.prototype.hasOwnProperty.call(t,i)||(t[i]=r[i])}return e.someProp("nodeViews",n),e.someProp("markViews",n),t}function eX(e,t){let n=0,r=0;for(let i in e){if(e[i]!=t[i])return!0;n++}for(let i in t)r++;return n!=r}function J_(e){if(e.spec.state||e.spec.filterTransaction||e.spec.appendTransaction)throw new RangeError("Plugins passed directly to the view must not have a state component")}var Fs={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},Bh={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},tX=typeof navigator<"u"&&/Mac/.test(navigator.platform),nX=typeof navigator<"u"&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);for(var hn=0;hn<10;hn++)Fs[48+hn]=Fs[96+hn]=String(hn);for(var hn=1;hn<=24;hn++)Fs[hn+111]="F"+hn;for(var hn=65;hn<=90;hn++)Fs[hn]=String.fromCharCode(hn+32),Bh[hn]=String.fromCharCode(hn);for(var k0 in Fs)Bh.hasOwnProperty(k0)||(Bh[k0]=Fs[k0]);function rX(e){var t=tX&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||nX&&e.shiftKey&&e.key&&e.key.length==1||e.key=="Unidentified",n=!t&&e.key||(e.shiftKey?Bh:Fs)[e.keyCode]||e.key||"Unidentified";return n=="Esc"&&(n="Escape"),n=="Del"&&(n="Delete"),n=="Left"&&(n="ArrowLeft"),n=="Up"&&(n="ArrowUp"),n=="Right"&&(n="ArrowRight"),n=="Down"&&(n="ArrowDown"),n}const iX=typeof navigator<"u"&&/Mac|iP(hone|[oa]d)/.test(navigator.platform),sX=typeof navigator<"u"&&/Win/.test(navigator.platform);function oX(e){let t=e.split(/-(?!$)/),n=t[t.length-1];n=="Space"&&(n=" ");let r,i,s,o;for(let l=0;l<t.length-1;l++){let c=t[l];if(/^(cmd|meta|m)$/i.test(c))o=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))i=!0;else if(/^s(hift)?$/i.test(c))s=!0;else if(/^mod$/i.test(c))iX?o=!0:i=!0;else throw new Error("Unrecognized modifier name: "+c)}return r&&(n="Alt-"+n),i&&(n="Ctrl-"+n),o&&(n="Meta-"+n),s&&(n="Shift-"+n),n}function aX(e){let t=Object.create(null);for(let n in e)t[oX(n)]=e[n];return t}function T0(e,t,n=!0){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),n&&t.shiftKey&&(e="Shift-"+e),e}function lX(e){return new Rt({props:{handleKeyDown:xI(e)}})}function xI(e){let t=aX(e);return function(n,r){let i=rX(r),s,o=t[T0(i,r)];if(o&&o(n.state,n.dispatch,n))return!0;if(i.length==1&&i!=" "){if(r.shiftKey){let l=t[T0(i,r,!1)];if(l&&l(n.state,n.dispatch,n))return!0}if((r.altKey||r.metaKey||r.ctrlKey)&&!(sX&&r.ctrlKey&&r.altKey)&&(s=Fs[r.keyCode])&&s!=i){let l=t[T0(s,r)];if(l&&l(n.state,n.dispatch,n))return!0}}return!1}}const _C=(e,t)=>e.selection.empty?!1:(t&&t(e.tr.deleteSelection().scrollIntoView()),!0);function wI(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("backward",e):n.parentOffset>0)?null:n}const SI=(e,t,n)=>{let r=wI(e,n);if(!r)return!1;let i=RC(r);if(!i){let o=r.blockRange(),l=o&&_l(o);return l==null?!1:(t&&t(e.tr.lift(o,l).scrollIntoView()),!0)}let s=i.nodeBefore;if(RI(e,i,t,-1))return!0;if(r.parent.content.size==0&&(vl(s,"end")||Re.isSelectable(s)))for(let o=r.depth;;o--){let l=Hp(e.doc,r.before(o),r.after(o),ve.empty);if(l&&l.slice.size<l.to-l.from){if(t){let c=e.tr.step(l);c.setSelection(vl(s,"end")?Ue.findFrom(c.doc.resolve(c.mapping.map(i.pos,-1)),-1):Re.create(c.doc,i.pos-s.nodeSize)),t(c.scrollIntoView())}return!0}if(o==1||r.node(o-1).childCount>1)break}return s.isAtom&&i.depth==r.depth-1?(t&&t(e.tr.delete(i.pos-s.nodeSize,i.pos).scrollIntoView()),!0):!1},uX=(e,t,n)=>{let r=wI(e,n);if(!r)return!1;let i=RC(r);return i?EI(e,i,t):!1},cX=(e,t,n)=>{let r=kI(e,n);if(!r)return!1;let i=DC(r);return i?EI(e,i,t):!1};function EI(e,t,n){let r=t.nodeBefore,i=r,s=t.pos-1;for(;!i.isTextblock;s--){if(i.type.spec.isolating)return!1;let h=i.lastChild;if(!h)return!1;i=h}let o=t.nodeAfter,l=o,c=t.pos+1;for(;!l.isTextblock;c++){if(l.type.spec.isolating)return!1;let h=l.firstChild;if(!h)return!1;l=h}let f=Hp(e.doc,s,c,ve.empty);if(!f||f.from!=s||f instanceof Jt&&f.slice.size>=c-s)return!1;if(n){let h=e.tr.step(f);h.setSelection(qe.create(h.doc,s)),n(h.scrollIntoView())}return!0}function vl(e,t,n=!1){for(let r=e;r;r=t=="start"?r.firstChild:r.lastChild){if(r.isTextblock)return!0;if(n&&r.childCount!=1)return!1}return!1}const CI=(e,t,n)=>{let{$head:r,empty:i}=e.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("backward",e):r.parentOffset>0)return!1;s=RC(r)}let o=s&&s.nodeBefore;return!o||!Re.isSelectable(o)?!1:(t&&t(e.tr.setSelection(Re.create(e.doc,s.pos-o.nodeSize)).scrollIntoView()),!0)};function RC(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){if(e.index(t)>0)return e.doc.resolve(e.before(t+1));if(e.node(t).type.spec.isolating)break}return null}function kI(e,t){let{$cursor:n}=e.selection;return!n||(t?!t.endOfTextblock("forward",e):n.parentOffset<n.parent.content.size)?null:n}const TI=(e,t,n)=>{let r=kI(e,n);if(!r)return!1;let i=DC(r);if(!i)return!1;let s=i.nodeAfter;if(RI(e,i,t,1))return!0;if(r.parent.content.size==0&&(vl(s,"start")||Re.isSelectable(s))){let o=Hp(e.doc,r.before(),r.after(),ve.empty);if(o&&o.slice.size<o.to-o.from){if(t){let l=e.tr.step(o);l.setSelection(vl(s,"start")?Ue.findFrom(l.doc.resolve(l.mapping.map(i.pos)),1):Re.create(l.doc,l.mapping.map(i.pos))),t(l.scrollIntoView())}return!0}}return s.isAtom&&i.depth==r.depth-1?(t&&t(e.tr.delete(i.pos,i.pos+s.nodeSize).scrollIntoView()),!0):!1},AI=(e,t,n)=>{let{$head:r,empty:i}=e.selection,s=r;if(!i)return!1;if(r.parent.isTextblock){if(n?!n.endOfTextblock("forward",e):r.parentOffset<r.parent.content.size)return!1;s=DC(r)}let o=s&&s.nodeAfter;return!o||!Re.isSelectable(o)?!1:(t&&t(e.tr.setSelection(Re.create(e.doc,s.pos)).scrollIntoView()),!0)};function DC(e){if(!e.parent.type.spec.isolating)for(let t=e.depth-1;t>=0;t--){let n=e.node(t);if(e.index(t)+1<n.childCount)return e.doc.resolve(e.after(t+1));if(n.type.spec.isolating)break}return null}const fX=(e,t)=>{let n=e.selection,r=n instanceof Re,i;if(r){if(n.node.isTextblock||!Ks(e.doc,n.from))return!1;i=n.from}else if(i=Vp(e.doc,n.from,-1),i==null)return!1;if(t){let s=e.tr.join(i);r&&s.setSelection(Re.create(s.doc,i-e.doc.resolve(i).nodeBefore.nodeSize)),t(s.scrollIntoView())}return!0},dX=(e,t)=>{let n=e.selection,r;if(n instanceof Re){if(n.node.isTextblock||!Ks(e.doc,n.to))return!1;r=n.to}else if(r=Vp(e.doc,n.to,1),r==null)return!1;return t&&t(e.tr.join(r).scrollIntoView()),!0},hX=(e,t)=>{let{$from:n,$to:r}=e.selection,i=n.blockRange(r),s=i&&_l(i);return s==null?!1:(t&&t(e.tr.lift(i,s).scrollIntoView()),!0)},MI=(e,t)=>{let{$head:n,$anchor:r}=e.selection;return!n.parent.type.spec.code||!n.sameParent(r)?!1:(t&&t(e.tr.insertText(`
`).scrollIntoView()),!0)};function OC(e){for(let t=0;t<e.edgeCount;t++){let{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}const pX=(e,t)=>{let{$head:n,$anchor:r}=e.selection;if(!n.parent.type.spec.code||!n.sameParent(r))return!1;let i=n.node(-1),s=n.indexAfter(-1),o=OC(i.contentMatchAt(s));if(!o||!i.canReplaceWith(s,s,o))return!1;if(t){let l=n.after(),c=e.tr.replaceWith(l,l,o.createAndFill());c.setSelection(Ue.near(c.doc.resolve(l),1)),t(c.scrollIntoView())}return!0},NI=(e,t)=>{let n=e.selection,{$from:r,$to:i}=n;if(n instanceof nr||r.parent.inlineContent||i.parent.inlineContent)return!1;let s=OC(i.parent.contentMatchAt(i.indexAfter()));if(!s||!s.isTextblock)return!1;if(t){let o=(!r.parentOffset&&i.index()<i.parent.childCount?r:i).pos,l=e.tr.insert(o,s.createAndFill());l.setSelection(qe.create(l.doc,o+1)),t(l.scrollIntoView())}return!0},_I=(e,t)=>{let{$cursor:n}=e.selection;if(!n||n.parent.content.size)return!1;if(n.depth>1&&n.after()!=n.end(-1)){let s=n.before();if(Pi(e.doc,s))return t&&t(e.tr.split(s).scrollIntoView()),!0}let r=n.blockRange(),i=r&&_l(r);return i==null?!1:(t&&t(e.tr.lift(r,i).scrollIntoView()),!0)};function mX(e){return(t,n)=>{let{$from:r,$to:i}=t.selection;if(t.selection instanceof Re&&t.selection.node.isBlock)return!r.parentOffset||!Pi(t.doc,r.pos)?!1:(n&&n(t.tr.split(r.pos).scrollIntoView()),!0);if(!r.depth)return!1;let s=[],o,l,c=!1,f=!1;for(let y=r.depth;;y--)if(r.node(y).isBlock){c=r.end(y)==r.pos+(r.depth-y),f=r.start(y)==r.pos-(r.depth-y),l=OC(r.node(y-1).contentMatchAt(r.indexAfter(y-1))),s.unshift(c&&l?{type:l}:null),o=y;break}else{if(y==1)return!1;s.unshift(null)}let h=t.tr;(t.selection instanceof qe||t.selection instanceof nr)&&h.deleteSelection();let p=h.mapping.map(r.pos),g=Pi(h.doc,p,s.length,s);if(g||(s[0]=l?{type:l}:null,g=Pi(h.doc,p,s.length,s)),!g)return!1;if(h.split(p,s.length,s),!c&&f&&r.node(o).type!=l){let y=h.mapping.map(r.before(o)),b=h.doc.resolve(y);l&&r.node(o-1).canReplaceWith(b.index(),b.index()+1,l)&&h.setNodeMarkup(h.mapping.map(r.before(o)),l)}return n&&n(h.scrollIntoView()),!0}}const gX=mX(),yX=(e,t)=>{let{$from:n,to:r}=e.selection,i,s=n.sharedDepth(r);return s==0?!1:(i=n.before(s),t&&t(e.tr.setSelection(Re.create(e.doc,i))),!0)};function vX(e,t,n){let r=t.nodeBefore,i=t.nodeAfter,s=t.index();return!r||!i||!r.type.compatibleContent(i.type)?!1:!r.content.size&&t.parent.canReplace(s-1,s)?(n&&n(e.tr.delete(t.pos-r.nodeSize,t.pos).scrollIntoView()),!0):!t.parent.canReplace(s,s+1)||!(i.isTextblock||Ks(e.doc,t.pos))?!1:(n&&n(e.tr.join(t.pos).scrollIntoView()),!0)}function RI(e,t,n,r){let i=t.nodeBefore,s=t.nodeAfter,o,l,c=i.type.spec.isolating||s.type.spec.isolating;if(!c&&vX(e,t,n))return!0;let f=!c&&t.parent.canReplace(t.index(),t.index()+1);if(f&&(o=(l=i.contentMatchAt(i.childCount)).findWrapping(s.type))&&l.matchType(o[0]||s.type).validEnd){if(n){let y=t.pos+s.nodeSize,b=pe.empty;for(let C=o.length-1;C>=0;C--)b=pe.from(o[C].create(null,b));b=pe.from(i.copy(b));let S=e.tr.step(new en(t.pos-1,y,t.pos,y,new ve(b,1,0),o.length,!0)),x=S.doc.resolve(y+2*o.length);x.nodeAfter&&x.nodeAfter.type==i.type&&Ks(S.doc,x.pos)&&S.join(x.pos),n(S.scrollIntoView())}return!0}let h=s.type.spec.isolating||r>0&&c?null:Ue.findFrom(t,1),p=h&&h.$from.blockRange(h.$to),g=p&&_l(p);if(g!=null&&g>=t.depth)return n&&n(e.tr.lift(p,g).scrollIntoView()),!0;if(f&&vl(s,"start",!0)&&vl(i,"end")){let y=i,b=[];for(;b.push(y),!y.isTextblock;)y=y.lastChild;let S=s,x=1;for(;!S.isTextblock;S=S.firstChild)x++;if(y.canReplace(y.childCount,y.childCount,S.content)){if(n){let C=pe.empty;for(let k=b.length-1;k>=0;k--)C=pe.from(b[k].copy(C));let T=e.tr.step(new en(t.pos-b.length,t.pos+s.nodeSize,t.pos+x,t.pos+s.nodeSize-x,new ve(C,b.length,0),0,!0));n(T.scrollIntoView())}return!0}}return!1}function DI(e){return function(t,n){let r=t.selection,i=e<0?r.$from:r.$to,s=i.depth;for(;i.node(s).isInline;){if(!s)return!1;s--}return i.node(s).isTextblock?(n&&n(t.tr.setSelection(qe.create(t.doc,e<0?i.start(s):i.end(s)))),!0):!1}}const bX=DI(-1),xX=DI(1);function wX(e,t=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s),l=o&&bC(o,e,t);return l?(r&&r(n.tr.wrap(o,l).scrollIntoView()),!0):!1}}function eR(e,t=null){return function(n,r){let i=!1;for(let s=0;s<n.selection.ranges.length&&!i;s++){let{$from:{pos:o},$to:{pos:l}}=n.selection.ranges[s];n.doc.nodesBetween(o,l,(c,f)=>{if(i)return!1;if(!(!c.isTextblock||c.hasMarkup(e,t)))if(c.type==e)i=!0;else{let h=n.doc.resolve(f),p=h.index();i=h.parent.canReplaceWith(p,p+1,e)}})}if(!i)return!1;if(r){let s=n.tr;for(let o=0;o<n.selection.ranges.length;o++){let{$from:{pos:l},$to:{pos:c}}=n.selection.ranges[o];s.setBlockType(l,c,e,t)}r(s.scrollIntoView())}return!0}}function jC(...e){return function(t,n,r){for(let i=0;i<e.length;i++)if(e[i](t,n,r))return!0;return!1}}jC(_C,SI,CI);jC(_C,TI,AI);jC(MI,NI,_I,gX);typeof navigator<"u"?/Mac|iP(hone|[oa]d)/.test(navigator.platform):typeof os<"u"&&os.platform&&os.platform()=="darwin";function SX(e,t=null){return function(n,r){let{$from:i,$to:s}=n.selection,o=i.blockRange(s);if(!o)return!1;let l=r?n.tr:null;return EX(l,o,e,t)?(r&&r(l.scrollIntoView()),!0):!1}}function EX(e,t,n,r=null){let i=!1,s=t,o=t.$from.doc;if(t.depth>=2&&t.$from.node(t.depth-1).type.compatibleContent(n)&&t.startIndex==0){if(t.$from.index(t.depth-1)==0)return!1;let c=o.resolve(t.start-2);s=new _h(c,c,t.depth),t.endIndex<t.parent.childCount&&(t=new _h(t.$from,o.resolve(t.$to.end(t.depth)),t.depth)),i=!0}let l=bC(s,n,r,t);return l?(e&&CX(e,t,l,i,n),!0):!1}function CX(e,t,n,r,i){let s=pe.empty;for(let h=n.length-1;h>=0;h--)s=pe.from(n[h].type.create(n[h].attrs,s));e.step(new en(t.start-(r?2:0),t.end,t.start,t.end,new ve(s,0,0),n.length,!0));let o=0;for(let h=0;h<n.length;h++)n[h].type==i&&(o=h+1);let l=n.length-o,c=t.start+n.length-(r?2:0),f=t.parent;for(let h=t.startIndex,p=t.endIndex,g=!0;h<p;h++,g=!1)!g&&Pi(e.doc,c,l)&&(e.split(c,l),c+=2*l),c+=f.child(h).nodeSize;return e}function kX(e){return function(t,n){let{$from:r,$to:i}=t.selection,s=r.blockRange(i,o=>o.childCount>0&&o.firstChild.type==e);return s?n?r.node(s.depth-1).type==e?TX(t,n,e,s):AX(t,n,s):!0:!1}}function TX(e,t,n,r){let i=e.tr,s=r.end,o=r.$to.end(r.depth);s<o&&(i.step(new en(s-1,o,s,o,new ve(pe.from(n.create(null,r.parent.copy())),1,0),1,!0)),r=new _h(i.doc.resolve(r.$from.pos),i.doc.resolve(o),r.depth));const l=_l(r);if(l==null)return!1;i.lift(r,l);let c=i.doc.resolve(i.mapping.map(s,-1)-1);return Ks(i.doc,c.pos)&&c.nodeBefore.type==c.nodeAfter.type&&i.join(c.pos),t(i.scrollIntoView()),!0}function AX(e,t,n){let r=e.tr,i=n.parent;for(let y=n.end,b=n.endIndex-1,S=n.startIndex;b>S;b--)y-=i.child(b).nodeSize,r.delete(y-1,y+1);let s=r.doc.resolve(n.start),o=s.nodeAfter;if(r.mapping.map(n.end)!=n.start+s.nodeAfter.nodeSize)return!1;let l=n.startIndex==0,c=n.endIndex==i.childCount,f=s.node(-1),h=s.index(-1);if(!f.canReplace(h+(l?0:1),h+1,o.content.append(c?pe.empty:pe.from(i))))return!1;let p=s.pos,g=p+o.nodeSize;return r.step(new en(p-(l?1:0),g+(c?1:0),p+1,g-1,new ve((l?pe.empty:pe.from(i.copy(pe.empty))).append(c?pe.empty:pe.from(i.copy(pe.empty))),l?0:1,c?0:1),l?0:1)),t(r.scrollIntoView()),!0}function MX(e){return function(t,n){let{$from:r,$to:i}=t.selection,s=r.blockRange(i,f=>f.childCount>0&&f.firstChild.type==e);if(!s)return!1;let o=s.startIndex;if(o==0)return!1;let l=s.parent,c=l.child(o-1);if(c.type!=e)return!1;if(n){let f=c.lastChild&&c.lastChild.type==l.type,h=pe.from(f?e.create():null),p=new ve(pe.from(e.create(null,pe.from(l.type.create(null,h)))),f?3:1,0),g=s.start,y=s.end;n(t.tr.step(new en(g-(f?3:1),y,g,y,p,1,!0)).scrollIntoView())}return!0}}var NX=Object.defineProperty,OI=(e,t)=>{for(var n in t)NX(e,n,{get:t[n],enumerable:!0})};function Kp(e){const{state:t,transaction:n}=e;let{selection:r}=n,{doc:i}=n,{storedMarks:s}=n;return{...t,apply:t.apply.bind(t),applyTransaction:t.applyTransaction.bind(t),plugins:t.plugins,schema:t.schema,reconfigure:t.reconfigure.bind(t),toJSON:t.toJSON.bind(t),get storedMarks(){return s},get selection(){return r},get doc(){return i},get tr(){return r=n.selection,i=n.doc,s=n.storedMarks,n}}}var Yp=class{constructor(e){this.editor=e.editor,this.rawCommands=this.editor.extensionManager.commands,this.customState=e.state}get hasCustomState(){return!!this.customState}get state(){return this.customState||this.editor.state}get commands(){const{rawCommands:e,editor:t,state:n}=this,{view:r}=t,{tr:i}=n,s=this.buildProps(i);return Object.fromEntries(Object.entries(e).map(([o,l])=>[o,(...f)=>{const h=l(...f)(s);return!i.getMeta("preventDispatch")&&!this.hasCustomState&&r.dispatch(i),h}]))}get chain(){return()=>this.createChain()}get can(){return()=>this.createCan()}createChain(e,t=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,o=[],l=!!e,c=e||i.tr,f=()=>(!l&&t&&!c.getMeta("preventDispatch")&&!this.hasCustomState&&s.dispatch(c),o.every(p=>p===!0)),h={...Object.fromEntries(Object.entries(n).map(([p,g])=>[p,(...b)=>{const S=this.buildProps(c,t),x=g(...b)(S);return o.push(x),h}])),run:f};return h}createCan(e){const{rawCommands:t,state:n}=this,r=!1,i=e||n.tr,s=this.buildProps(i,r);return{...Object.fromEntries(Object.entries(t).map(([l,c])=>[l,(...f)=>c(...f)({...s,dispatch:void 0})])),chain:()=>this.createChain(i,r)}}buildProps(e,t=!0){const{rawCommands:n,editor:r,state:i}=this,{view:s}=r,o={tr:e,editor:r,view:s,state:Kp({state:i,transaction:e}),dispatch:t?()=>{}:void 0,chain:()=>this.createChain(e,t),can:()=>this.createCan(e),get commands(){return Object.fromEntries(Object.entries(n).map(([l,c])=>[l,(...f)=>c(...f)(o)]))}};return o}},_X=class{constructor(){this.callbacks={}}on(e,t){return this.callbacks[e]||(this.callbacks[e]=[]),this.callbacks[e].push(t),this}emit(e,...t){const n=this.callbacks[e];return n&&n.forEach(r=>r.apply(this,t)),this}off(e,t){const n=this.callbacks[e];return n&&(t?this.callbacks[e]=n.filter(r=>r!==t):delete this.callbacks[e]),this}once(e,t){const n=(...r)=>{this.off(e,n),t.apply(this,r)};return this.on(e,n)}removeAllListeners(){this.callbacks={}}};function jI(e,t){const n=new BB(e);return t.forEach(r=>{r.steps.forEach(i=>{n.step(i)})}),n}var LI=e=>{const t=e.childNodes;for(let n=t.length-1;n>=0;n-=1){const r=t[n];r.nodeType===3&&r.nodeValue&&/^(\n\s\s|\n)$/.test(r.nodeValue)?e.removeChild(r):r.nodeType===1&&LI(r)}return e};function zd(e){if(typeof window>"u")throw new Error("[tiptap error]: there is no window object available, so this function cannot be used");const t=`<body>${e}</body>`,n=new window.DOMParser().parseFromString(t,"text/html").body;return LI(n)}function Oc(e,t,n){if(e instanceof js||e instanceof pe)return e;n={slice:!0,parseOptions:{},...n};const r=typeof e=="object"&&e!==null,i=typeof e=="string";if(r)try{if(Array.isArray(e)&&e.length>0)return pe.fromArray(e.map(l=>t.nodeFromJSON(l)));const o=t.nodeFromJSON(e);return n.errorOnInvalidContent&&o.check(),o}catch(s){if(n.errorOnInvalidContent)throw new Error("[tiptap error]: Invalid JSON content",{cause:s});return console.warn("[tiptap warn]: Invalid content.","Passed value:",e,"Error:",s),Oc("",t,n)}if(i){if(n.errorOnInvalidContent){let o=!1,l="";const c=new wB({topNode:t.spec.topNode,marks:t.spec.marks,nodes:t.spec.nodes.append({__tiptap__private__unknown__catch__all__node:{content:"inline*",group:"block",parseDOM:[{tag:"*",getAttrs:f=>(o=!0,l=typeof f=="string"?f:f.outerHTML,null)}]}})});if(n.slice?Ls.fromSchema(c).parseSlice(zd(e),n.parseOptions):Ls.fromSchema(c).parse(zd(e),n.parseOptions),n.errorOnInvalidContent&&o)throw new Error("[tiptap error]: Invalid HTML content",{cause:new Error(`Invalid element found: ${l}`)})}const s=Ls.fromSchema(t);return n.slice?s.parseSlice(zd(e),n.parseOptions).content:s.parse(zd(e),n.parseOptions)}return Oc("",t,n)}function sE(e,t,n={},r={}){return Oc(e,t,{slice:!1,parseOptions:n,errorOnInvalidContent:r.errorOnInvalidContent})}function RX(e){for(let t=0;t<e.edgeCount;t+=1){const{type:n}=e.edge(t);if(n.isTextblock&&!n.hasRequiredAttrs())return n}return null}function DX(e,t,n){const r=[];return e.nodesBetween(t.from,t.to,(i,s)=>{n(i)&&r.push({node:i,pos:s})}),r}function OX(e,t){for(let n=e.depth;n>0;n-=1){const r=e.node(n);if(t(r))return{pos:n>0?e.before(n):0,start:e.start(n),depth:n,node:r}}}function Wp(e){return t=>OX(t.$from,e)}function _e(e,t,n){return e.config[t]===void 0&&e.parent?_e(e.parent,t,n):typeof e.config[t]=="function"?e.config[t].bind({...n,parent:e.parent?_e(e.parent,t,n):null}):e.config[t]}function LC(e){return e.map(t=>{const n={name:t.name,options:t.options,storage:t.storage},r=_e(t,"addExtensions",n);return r?[t,...LC(r())]:t}).flat(10)}function PC(e,t){const n=Jo.fromSchema(t).serializeFragment(e),i=document.implementation.createHTMLDocument().createElement("div");return i.appendChild(n),i.innerHTML}function PI(e){return typeof e=="function"}function it(e,t=void 0,...n){return PI(e)?t?e.bind(t)(...n):e(...n):e}function jX(e={}){return Object.keys(e).length===0&&e.constructor===Object}function jc(e){const t=e.filter(i=>i.type==="extension"),n=e.filter(i=>i.type==="node"),r=e.filter(i=>i.type==="mark");return{baseExtensions:t,nodeExtensions:n,markExtensions:r}}function BI(e){const t=[],{nodeExtensions:n,markExtensions:r}=jc(e),i=[...n,...r],s={default:null,validate:void 0,rendered:!0,renderHTML:null,parseHTML:null,keepOnSplit:!0,isRequired:!1};return e.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage,extensions:i},c=_e(o,"addGlobalAttributes",l);if(!c)return;c().forEach(h=>{h.types.forEach(p=>{Object.entries(h.attributes).forEach(([g,y])=>{t.push({type:p,name:g,attribute:{...s,...y}})})})})}),i.forEach(o=>{const l={name:o.name,options:o.options,storage:o.storage},c=_e(o,"addAttributes",l);if(!c)return;const f=c();Object.entries(f).forEach(([h,p])=>{const g={...s,...p};typeof g?.default=="function"&&(g.default=g.default()),g?.isRequired&&g?.default===void 0&&delete g.default,t.push({type:o.name,name:h,attribute:g})})}),t}function Ht(...e){return e.filter(t=>!!t).reduce((t,n)=>{const r={...t};return Object.entries(n).forEach(([i,s])=>{if(!r[i]){r[i]=s;return}if(i==="class"){const l=s?String(s).split(" "):[],c=r[i]?r[i].split(" "):[],f=l.filter(h=>!c.includes(h));r[i]=[...c,...f].join(" ")}else if(i==="style"){const l=s?s.split(";").map(h=>h.trim()).filter(Boolean):[],c=r[i]?r[i].split(";").map(h=>h.trim()).filter(Boolean):[],f=new Map;c.forEach(h=>{const[p,g]=h.split(":").map(y=>y.trim());f.set(p,g)}),l.forEach(h=>{const[p,g]=h.split(":").map(y=>y.trim());f.set(p,g)}),r[i]=Array.from(f.entries()).map(([h,p])=>`${h}: ${p}`).join("; ")}else r[i]=s}),r},{})}function Ih(e,t){return t.filter(n=>n.type===e.type.name).filter(n=>n.attribute.rendered).map(n=>n.attribute.renderHTML?n.attribute.renderHTML(e.attrs)||{}:{[n.name]:e.attrs[n.name]}).reduce((n,r)=>Ht(n,r),{})}function LX(e){return typeof e!="string"?e:e.match(/^[+-]?(?:\d*\.)?\d+$/)?Number(e):e==="true"?!0:e==="false"?!1:e}function tR(e,t){return"style"in e?e:{...e,getAttrs:n=>{const r=e.getAttrs?e.getAttrs(n):e.attrs;if(r===!1)return!1;const i=t.reduce((s,o)=>{const l=o.attribute.parseHTML?o.attribute.parseHTML(n):LX(n.getAttribute(o.name));return l==null?s:{...s,[o.name]:l}},{});return{...r,...i}}}}function nR(e){return Object.fromEntries(Object.entries(e).filter(([t,n])=>t==="attrs"&&jX(n)?!1:n!=null))}function PX(e,t){var n;const r=BI(e),{nodeExtensions:i,markExtensions:s}=jc(e),o=(n=i.find(f=>_e(f,"topNode")))==null?void 0:n.name,l=Object.fromEntries(i.map(f=>{const h=r.filter(C=>C.type===f.name),p={name:f.name,options:f.options,storage:f.storage,editor:t},g=e.reduce((C,T)=>{const k=_e(T,"extendNodeSchema",p);return{...C,...k?k(f):{}}},{}),y=nR({...g,content:it(_e(f,"content",p)),marks:it(_e(f,"marks",p)),group:it(_e(f,"group",p)),inline:it(_e(f,"inline",p)),atom:it(_e(f,"atom",p)),selectable:it(_e(f,"selectable",p)),draggable:it(_e(f,"draggable",p)),code:it(_e(f,"code",p)),whitespace:it(_e(f,"whitespace",p)),linebreakReplacement:it(_e(f,"linebreakReplacement",p)),defining:it(_e(f,"defining",p)),isolating:it(_e(f,"isolating",p)),attrs:Object.fromEntries(h.map(C=>{var T,k;return[C.name,{default:(T=C?.attribute)==null?void 0:T.default,validate:(k=C?.attribute)==null?void 0:k.validate}]}))}),b=it(_e(f,"parseHTML",p));b&&(y.parseDOM=b.map(C=>tR(C,h)));const S=_e(f,"renderHTML",p);S&&(y.toDOM=C=>S({node:C,HTMLAttributes:Ih(C,h)}));const x=_e(f,"renderText",p);return x&&(y.toText=x),[f.name,y]})),c=Object.fromEntries(s.map(f=>{const h=r.filter(x=>x.type===f.name),p={name:f.name,options:f.options,storage:f.storage,editor:t},g=e.reduce((x,C)=>{const T=_e(C,"extendMarkSchema",p);return{...x,...T?T(f):{}}},{}),y=nR({...g,inclusive:it(_e(f,"inclusive",p)),excludes:it(_e(f,"excludes",p)),group:it(_e(f,"group",p)),spanning:it(_e(f,"spanning",p)),code:it(_e(f,"code",p)),attrs:Object.fromEntries(h.map(x=>{var C,T;return[x.name,{default:(C=x?.attribute)==null?void 0:C.default,validate:(T=x?.attribute)==null?void 0:T.validate}]}))}),b=it(_e(f,"parseHTML",p));b&&(y.parseDOM=b.map(x=>tR(x,h)));const S=_e(f,"renderHTML",p);return S&&(y.toDOM=x=>S({mark:x,HTMLAttributes:Ih(x,h)})),[f.name,y]}));return new wB({topNode:o,nodes:l,marks:c})}function BX(e){const t=e.filter((n,r)=>e.indexOf(n)!==r);return Array.from(new Set(t))}function BC(e){return e.sort((n,r)=>{const i=_e(n,"priority")||100,s=_e(r,"priority")||100;return i>s?-1:i<s?1:0})}function II(e){const t=BC(LC(e)),n=BX(t.map(r=>r.name));return n.length&&console.warn(`[tiptap warn]: Duplicate extension names found: [${n.map(r=>`'${r}'`).join(", ")}]. This can lead to issues.`),t}function zI(e,t,n){const{from:r,to:i}=t,{blockSeparator:s=`

`,textSerializers:o={}}=n||{};let l="";return e.nodesBetween(r,i,(c,f,h,p)=>{var g;c.isBlock&&f>r&&(l+=s);const y=o?.[c.type.name];if(y)return h&&(l+=y({node:c,pos:f,parent:h,index:p,range:t})),!1;c.isText&&(l+=(g=c?.text)==null?void 0:g.slice(Math.max(r,f)-f,i-f))}),l}function IX(e,t){const n={from:0,to:e.content.size};return zI(e,n,t)}function qI(e){return Object.fromEntries(Object.entries(e.nodes).filter(([,t])=>t.spec.toText).map(([t,n])=>[t,n.spec.toText]))}function Hi(e,t){if(typeof e=="string"){if(!t.marks[e])throw Error(`There is no mark type named '${e}'. Maybe you forgot to add the extension?`);return t.marks[e]}return e}function VI(e,t){const n=Hi(t,e.schema),{from:r,to:i,empty:s}=e.selection,o=[];s?(e.storedMarks&&o.push(...e.storedMarks),o.push(...e.selection.$head.marks())):e.doc.nodesBetween(r,i,c=>{o.push(...c.marks)});const l=o.find(c=>c.type.name===n.name);return l?{...l.attrs}:{}}function Ft(e,t){if(typeof e=="string"){if(!t.nodes[e])throw Error(`There is no node type named '${e}'. Maybe you forgot to add the extension?`);return t.nodes[e]}return e}function zX(e,t){const n=Ft(t,e.schema),{from:r,to:i}=e.selection,s=[];e.doc.nodesBetween(r,i,l=>{s.push(l)});const o=s.reverse().find(l=>l.type.name===n.name);return o?{...o.attrs}:{}}function Xp(e,t){return t.nodes[e]?"node":t.marks[e]?"mark":null}function HI(e,t){const n=Xp(typeof t=="string"?t:t.name,e.schema);return n==="node"?zX(e,t):n==="mark"?VI(e,t):{}}function qX(e,t=JSON.stringify){const n={};return e.filter(r=>{const i=t(r);return Object.prototype.hasOwnProperty.call(n,i)?!1:n[i]=!0})}function VX(e){const t=qX(e);return t.length===1?t:t.filter((n,r)=>!t.filter((s,o)=>o!==r).some(s=>n.oldRange.from>=s.oldRange.from&&n.oldRange.to<=s.oldRange.to&&n.newRange.from>=s.newRange.from&&n.newRange.to<=s.newRange.to))}function FI(e){const{mapping:t,steps:n}=e,r=[];return t.maps.forEach((i,s)=>{const o=[];if(i.ranges.length)i.forEach((l,c)=>{o.push({from:l,to:c})});else{const{from:l,to:c}=n[s];if(l===void 0||c===void 0)return;o.push({from:l,to:c})}o.forEach(({from:l,to:c})=>{const f=t.slice(s).map(l,-1),h=t.slice(s).map(c),p=t.invert().map(f,-1),g=t.invert().map(h);r.push({oldRange:{from:p,to:g},newRange:{from:f,to:h}})})}),VX(r)}function IC(e){return Object.prototype.toString.call(e)==="[object RegExp]"}function zh(e,t,n={strict:!0}){const r=Object.keys(t);return r.length?r.every(i=>n.strict?t[i]===e[i]:IC(t[i])?t[i].test(e[i]):t[i]===e[i]):!0}function UI(e,t,n={}){return e.find(r=>r.type===t&&zh(Object.fromEntries(Object.keys(n).map(i=>[i,r.attrs[i]])),n))}function rR(e,t,n={}){return!!UI(e,t,n)}function zC(e,t,n){var r;if(!e||!t)return;let i=e.parent.childAfter(e.parentOffset);if((!i.node||!i.node.marks.some(h=>h.type===t))&&(i=e.parent.childBefore(e.parentOffset)),!i.node||!i.node.marks.some(h=>h.type===t)||(n=n||((r=i.node.marks[0])==null?void 0:r.attrs),!UI([...i.node.marks],t,n)))return;let o=i.index,l=e.start()+i.offset,c=o+1,f=l+i.node.nodeSize;for(;o>0&&rR([...e.parent.child(o-1).marks],t,n);)o-=1,l-=e.parent.child(o).nodeSize;for(;c<e.parent.childCount&&rR([...e.parent.child(c).marks],t,n);)f+=e.parent.child(c).nodeSize,c+=1;return{from:l,to:f}}function qC(e,t,n){const r=[];return e===t?n.resolve(e).marks().forEach(i=>{const s=n.resolve(e),o=zC(s,i.type);o&&r.push({mark:i,...o})}):n.nodesBetween(e,t,(i,s)=>{!i||i?.nodeSize===void 0||r.push(...i.marks.map(o=>({from:s,to:s+i.nodeSize,mark:o})))}),r}var HX=(e,t,n,r=20)=>{const i=e.doc.resolve(n);let s=r,o=null;for(;s>0&&o===null;){const l=i.node(s);l?.type.name===t?o=l:s-=1}return[o,s]};function A0(e,t){return t.nodes[e]||t.marks[e]||null}function uh(e,t,n){return Object.fromEntries(Object.entries(n).filter(([r])=>{const i=e.find(s=>s.type===t&&s.name===r);return i?i.attribute.keepOnSplit:!1}))}var FX=(e,t=500)=>{let n="";const r=e.parentOffset;return e.parent.nodesBetween(Math.max(0,r-t),r,(i,s,o,l)=>{var c,f;const h=((f=(c=i.type.spec).toText)==null?void 0:f.call(c,{node:i,pos:s,parent:o,index:l}))||i.textContent||"%leaf%";n+=i.isAtom&&!i.isText?h:h.slice(0,Math.max(0,r-s))}),n};function oE(e,t,n={}){const{empty:r,ranges:i}=e.selection,s=t?Hi(t,e.schema):null;if(r)return!!(e.storedMarks||e.selection.$from.marks()).filter(p=>s?s.name===p.type.name:!0).find(p=>zh(p.attrs,n,{strict:!1}));let o=0;const l=[];if(i.forEach(({$from:p,$to:g})=>{const y=p.pos,b=g.pos;e.doc.nodesBetween(y,b,(S,x)=>{if(!S.isText&&!S.marks.length)return;const C=Math.max(y,x),T=Math.min(b,x+S.nodeSize),k=T-C;o+=k,l.push(...S.marks.map(A=>({mark:A,from:C,to:T})))})}),o===0)return!1;const c=l.filter(p=>s?s.name===p.mark.type.name:!0).filter(p=>zh(p.mark.attrs,n,{strict:!1})).reduce((p,g)=>p+g.to-g.from,0),f=l.filter(p=>s?p.mark.type!==s&&p.mark.type.excludes(s):!0).reduce((p,g)=>p+g.to-g.from,0);return(c>0?c+f:c)>=o}function Us(e,t,n={}){const{from:r,to:i,empty:s}=e.selection,o=t?Ft(t,e.schema):null,l=[];e.doc.nodesBetween(r,i,(p,g)=>{if(p.isText)return;const y=Math.max(r,g),b=Math.min(i,g+p.nodeSize);l.push({node:p,from:y,to:b})});const c=i-r,f=l.filter(p=>o?o.name===p.node.type.name:!0).filter(p=>zh(p.node.attrs,n,{strict:!1}));return s?!!f.length:f.reduce((p,g)=>p+g.to-g.from,0)>=c}function UX(e,t,n={}){if(!t)return Us(e,null,n)||oE(e,null,n);const r=Xp(t,e.schema);return r==="node"?Us(e,t,n):r==="mark"?oE(e,t,n):!1}var $X=(e,t)=>{const{$from:n,$to:r,$anchor:i}=e.selection;if(t){const s=Wp(l=>l.type.name===t)(e.selection);if(!s)return!1;const o=e.doc.resolve(s.pos+1);return i.pos+1===o.end()}return!(r.parentOffset<r.parent.nodeSize-2||n.pos!==r.pos)},GX=e=>{const{$from:t,$to:n}=e.selection;return!(t.parentOffset>0||t.pos!==n.pos)};function iR(e,t){return Array.isArray(t)?t.some(n=>(typeof n=="string"?n:n.name)===e.name):t}function sR(e,t){const{nodeExtensions:n}=jc(t),r=n.find(o=>o.name===e);if(!r)return!1;const i={name:r.name,options:r.options,storage:r.storage},s=it(_e(r,"group",i));return typeof s!="string"?!1:s.split(" ").includes("list")}function Zp(e,{checkChildren:t=!0,ignoreWhitespace:n=!1}={}){var r;if(n){if(e.type.name==="hardBreak")return!0;if(e.isText)return/^\s*$/m.test((r=e.text)!=null?r:"")}if(e.isText)return!e.text;if(e.isAtom||e.isLeaf)return!1;if(e.content.childCount===0)return!0;if(t){let i=!0;return e.content.forEach(s=>{i!==!1&&(Zp(s,{ignoreWhitespace:n,checkChildren:t})||(i=!1))}),i}return!1}function $I(e){return e instanceof Re}function GI(e){return e instanceof qe}function Ao(e=0,t=0,n=0){return Math.min(Math.max(e,t),n)}function KI(e,t=null){if(!t)return null;const n=Ue.atStart(e),r=Ue.atEnd(e);if(t==="start"||t===!0)return n;if(t==="end")return r;const i=n.from,s=r.to;return t==="all"?qe.create(e,Ao(0,i,s),Ao(e.content.size,i,s)):qe.create(e,Ao(t,i,s),Ao(t,i,s))}function KX(e,t,n){const r=e.steps.length-1;if(r<t)return;const i=e.steps[r];if(!(i instanceof Jt||i instanceof en))return;const s=e.mapping.maps[r];let o=0;s.forEach((l,c,f,h)=>{o===0&&(o=h)}),e.setSelection(Ue.near(e.doc.resolve(o),n))}var Qp=class{constructor(e){var t;this.find=e.find,this.handler=e.handler,this.undoable=(t=e.undoable)!=null?t:!0}},YX=(e,t)=>{if(IC(t))return t.exec(e);const n=t(e);if(!n)return null;const r=[n.text];return r.index=n.index,r.input=e,r.data=n.data,n.replaceWith&&(n.text.includes(n.replaceWith)||console.warn('[tiptap warn]: "inputRuleMatch.replaceWith" must be part of "inputRuleMatch.text".'),r.push(n.replaceWith)),r};function qd(e){var t;const{editor:n,from:r,to:i,text:s,rules:o,plugin:l}=e,{view:c}=n;if(c.composing)return!1;const f=c.state.doc.resolve(r);if(f.parent.type.spec.code||(t=f.nodeBefore||f.nodeAfter)!=null&&t.marks.find(g=>g.type.spec.code))return!1;let h=!1;const p=FX(f)+s;return o.forEach(g=>{if(h)return;const y=YX(p,g.find);if(!y)return;const b=c.state.tr,S=Kp({state:c.state,transaction:b}),x={from:r-(y[0].length-s.length),to:i},{commands:C,chain:T,can:k}=new Yp({editor:n,state:S});g.handler({state:S,range:x,match:y,commands:C,chain:T,can:k})===null||!b.steps.length||(g.undoable&&b.setMeta(l,{transform:b,from:r,to:i,text:s}),c.dispatch(b),h=!0)}),h}function WX(e){const{editor:t,rules:n}=e,r=new Rt({state:{init(){return null},apply(i,s,o){const l=i.getMeta(r);if(l)return l;const c=i.getMeta("applyInputRules");return!!c&&setTimeout(()=>{let{text:h}=c;typeof h=="string"?h=h:h=PC(pe.from(h),o.schema);const{from:p}=c,g=p+h.length;qd({editor:t,from:p,to:g,text:h,rules:n,plugin:r})}),i.selectionSet||i.docChanged?null:s}},props:{handleTextInput(i,s,o,l){return qd({editor:t,from:s,to:o,text:l,rules:n,plugin:r})},handleDOMEvents:{compositionend:i=>(setTimeout(()=>{const{$cursor:s}=i.state.selection;s&&qd({editor:t,from:s.pos,to:s.pos,text:"",rules:n,plugin:r})}),!1)},handleKeyDown(i,s){if(s.key!=="Enter")return!1;const{$cursor:o}=i.state.selection;return o?qd({editor:t,from:o.pos,to:o.pos,text:`
`,rules:n,plugin:r}):!1}},isInputRules:!0});return r}function XX(e){return Object.prototype.toString.call(e).slice(8,-1)}function Vd(e){return XX(e)!=="Object"?!1:e.constructor===Object&&Object.getPrototypeOf(e)===Object.prototype}function YI(e,t){const n={...e};return Vd(e)&&Vd(t)&&Object.keys(t).forEach(r=>{Vd(t[r])&&Vd(e[r])?n[r]=YI(e[r],t[r]):n[r]=t[r]}),n}var VC=class{constructor(e={}){this.type="extendable",this.parent=null,this.child=null,this.name="",this.config={name:this.name},this.config={...this.config,...e},this.name=this.config.name}get options(){return{...it(_e(this,"addOptions",{name:this.name}))||{}}}get storage(){return{...it(_e(this,"addStorage",{name:this.name,options:this.options}))||{}}}configure(e={}){const t=this.extend({...this.config,addOptions:()=>YI(this.options,e)});return t.name=this.name,t.parent=this.parent,t}extend(e={}){const t=new this.constructor({...this.config,...e});return t.parent=this,this.child=t,t.name="name"in e?e.name:t.parent.name,t}},ea=class WI extends VC{constructor(){super(...arguments),this.type="mark"}static create(t={}){const n=typeof t=="function"?t():t;return new WI(n)}static handleExit({editor:t,mark:n}){const{tr:r}=t.state,i=t.state.selection.$from;if(i.pos===i.end()){const o=i.marks();if(!!!o.find(f=>f?.type.name===n.name))return!1;const c=o.find(f=>f?.type.name===n.name);return c&&r.removeStoredMark(c),r.insertText(" ",i.pos),t.view.dispatch(r),!0}return!1}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}};function ZX(e){return typeof e=="number"}var QX=class{constructor(e){this.find=e.find,this.handler=e.handler}},JX=(e,t,n)=>{if(IC(t))return[...e.matchAll(t)];const r=t(e,n);return r?r.map(i=>{const s=[i.text];return s.index=i.index,s.input=e,s.data=i.data,i.replaceWith&&(i.text.includes(i.replaceWith)||console.warn('[tiptap warn]: "pasteRuleMatch.replaceWith" must be part of "pasteRuleMatch.text".'),s.push(i.replaceWith)),s}):[]};function eZ(e){const{editor:t,state:n,from:r,to:i,rule:s,pasteEvent:o,dropEvent:l}=e,{commands:c,chain:f,can:h}=new Yp({editor:t,state:n}),p=[];return n.doc.nodesBetween(r,i,(y,b)=>{var S,x,C,T,k;if((x=(S=y.type)==null?void 0:S.spec)!=null&&x.code||!(y.isText||y.isTextblock||y.isInline))return;const A=(k=(T=(C=y.content)==null?void 0:C.size)!=null?T:y.nodeSize)!=null?k:0,M=Math.max(r,b),_=Math.min(i,b+A);if(M>=_)return;const R=y.isText?y.text||"":y.textBetween(M-b,_-b,void 0,"￼");JX(R,s.find,o).forEach(I=>{if(I.index===void 0)return;const $=M+I.index+1,q=$+I[0].length,U={from:n.tr.mapping.map($),to:n.tr.mapping.map(q)},X=s.handler({state:n,range:U,match:I,commands:c,chain:f,can:h,pasteEvent:o,dropEvent:l});p.push(X)})}),p.every(y=>y!==null)}var Hd=null,tZ=e=>{var t;const n=new ClipboardEvent("paste",{clipboardData:new DataTransfer});return(t=n.clipboardData)==null||t.setData("text/html",e),n};function nZ(e){const{editor:t,rules:n}=e;let r=null,i=!1,s=!1,o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,l;try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}const c=({state:h,from:p,to:g,rule:y,pasteEvt:b})=>{const S=h.tr,x=Kp({state:h,transaction:S});if(!(!eZ({editor:t,state:x,from:Math.max(p-1,0),to:g.b-1,rule:y,pasteEvent:b,dropEvent:l})||!S.steps.length)){try{l=typeof DragEvent<"u"?new DragEvent("drop"):null}catch{l=null}return o=typeof ClipboardEvent<"u"?new ClipboardEvent("paste"):null,S}};return n.map(h=>new Rt({view(p){const g=b=>{var S;r=(S=p.dom.parentElement)!=null&&S.contains(b.target)?p.dom.parentElement:null,r&&(Hd=t)},y=()=>{Hd&&(Hd=null)};return window.addEventListener("dragstart",g),window.addEventListener("dragend",y),{destroy(){window.removeEventListener("dragstart",g),window.removeEventListener("dragend",y)}}},props:{handleDOMEvents:{drop:(p,g)=>{if(s=r===p.dom.parentElement,l=g,!s){const y=Hd;y?.isEditable&&setTimeout(()=>{const b=y.state.selection;b&&y.commands.deleteRange({from:b.from,to:b.to})},10)}return!1},paste:(p,g)=>{var y;const b=(y=g.clipboardData)==null?void 0:y.getData("text/html");return o=g,i=!!b?.includes("data-pm-slice"),!1}}},appendTransaction:(p,g,y)=>{const b=p[0],S=b.getMeta("uiEvent")==="paste"&&!i,x=b.getMeta("uiEvent")==="drop"&&!s,C=b.getMeta("applyPasteRules"),T=!!C;if(!S&&!x&&!T)return;if(T){let{text:M}=C;typeof M=="string"?M=M:M=PC(pe.from(M),y.schema);const{from:_}=C,R=_+M.length,O=tZ(M);return c({rule:h,state:y,from:_,to:{b:R},pasteEvt:O})}const k=g.doc.content.findDiffStart(y.doc.content),A=g.doc.content.findDiffEnd(y.doc.content);if(!(!ZX(k)||!A||k===A.b))return c({rule:h,state:y,from:k,to:A,pasteEvt:o})}}))}var Jp=class{constructor(e,t){this.splittableMarks=[],this.editor=t,this.extensions=II(e),this.schema=PX(this.extensions,t),this.setupExtensions()}get commands(){return this.extensions.reduce((e,t)=>{const n={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:A0(t.name,this.schema)},r=_e(t,"addCommands",n);return r?{...e,...r()}:e},{})}get plugins(){const{editor:e}=this;return BC([...this.extensions].reverse()).flatMap(r=>{const i={name:r.name,options:r.options,storage:this.editor.extensionStorage[r.name],editor:e,type:A0(r.name,this.schema)},s=[],o=_e(r,"addKeyboardShortcuts",i);let l={};if(r.type==="mark"&&_e(r,"exitable",i)&&(l.ArrowRight=()=>ea.handleExit({editor:e,mark:r})),o){const g=Object.fromEntries(Object.entries(o()).map(([y,b])=>[y,()=>b({editor:e})]));l={...l,...g}}const c=lX(l);s.push(c);const f=_e(r,"addInputRules",i);if(iR(r,e.options.enableInputRules)&&f){const g=f();if(g&&g.length){const y=WX({editor:e,rules:g}),b=Array.isArray(y)?y:[y];s.push(...b)}}const h=_e(r,"addPasteRules",i);if(iR(r,e.options.enablePasteRules)&&h){const g=h();if(g&&g.length){const y=nZ({editor:e,rules:g});s.push(...y)}}const p=_e(r,"addProseMirrorPlugins",i);if(p){const g=p();s.push(...g)}return s})}get attributes(){return BI(this.extensions)}get nodeViews(){const{editor:e}=this,{nodeExtensions:t}=jc(this.extensions);return Object.fromEntries(t.filter(n=>!!_e(n,"addNodeView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:Ft(n.name,this.schema)},s=_e(n,"addNodeView",i);if(!s)return[];const o=(l,c,f,h,p)=>{const g=Ih(l,r);return s()({node:l,view:c,getPos:f,decorations:h,innerDecorations:p,editor:e,extension:n,HTMLAttributes:g})};return[n.name,o]}))}get markViews(){const{editor:e}=this,{markExtensions:t}=jc(this.extensions);return Object.fromEntries(t.filter(n=>!!_e(n,"addMarkView")).map(n=>{const r=this.attributes.filter(l=>l.type===n.name),i={name:n.name,options:n.options,storage:this.editor.extensionStorage[n.name],editor:e,type:Hi(n.name,this.schema)},s=_e(n,"addMarkView",i);if(!s)return[];const o=(l,c,f)=>{const h=Ih(l,r);return s()({mark:l,view:c,inline:f,editor:e,extension:n,HTMLAttributes:h,updateAttributes:p=>{vQ(l,e,p)}})};return[n.name,o]}))}setupExtensions(){const e=this.extensions;this.editor.extensionStorage=Object.fromEntries(e.map(t=>[t.name,t.storage])),e.forEach(t=>{var n;const r={name:t.name,options:t.options,storage:this.editor.extensionStorage[t.name],editor:this.editor,type:A0(t.name,this.schema)};t.type==="mark"&&((n=it(_e(t,"keepOnSplit",r)))==null||n)&&this.splittableMarks.push(t.name);const i=_e(t,"onBeforeCreate",r),s=_e(t,"onCreate",r),o=_e(t,"onUpdate",r),l=_e(t,"onSelectionUpdate",r),c=_e(t,"onTransaction",r),f=_e(t,"onFocus",r),h=_e(t,"onBlur",r),p=_e(t,"onDestroy",r);i&&this.editor.on("beforeCreate",i),s&&this.editor.on("create",s),o&&this.editor.on("update",o),l&&this.editor.on("selectionUpdate",l),c&&this.editor.on("transaction",c),f&&this.editor.on("focus",f),h&&this.editor.on("blur",h),p&&this.editor.on("destroy",p)})}};Jp.resolve=II;Jp.sort=BC;Jp.flatten=LC;var rZ={};OI(rZ,{ClipboardTextSerializer:()=>ZI,Commands:()=>ez,Delete:()=>tz,Drop:()=>nz,Editable:()=>rz,FocusEvents:()=>sz,Keymap:()=>oz,Paste:()=>az,Tabindex:()=>lz,focusEventsPluginKey:()=>iz});var Lt=class XI extends VC{constructor(){super(...arguments),this.type="extension"}static create(t={}){const n=typeof t=="function"?t():t;return new XI(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}},ZI=Lt.create({name:"clipboardTextSerializer",addOptions(){return{blockSeparator:void 0}},addProseMirrorPlugins(){return[new Rt({key:new nn("clipboardTextSerializer"),props:{clipboardTextSerializer:()=>{const{editor:e}=this,{state:t,schema:n}=e,{doc:r,selection:i}=t,{ranges:s}=i,o=Math.min(...s.map(h=>h.$from.pos)),l=Math.max(...s.map(h=>h.$to.pos)),c=qI(n);return zI(r,{from:o,to:l},{...this.options.blockSeparator!==void 0?{blockSeparator:this.options.blockSeparator}:{},textSerializers:c})}}})]}}),QI={};OI(QI,{blur:()=>iZ,clearContent:()=>sZ,clearNodes:()=>oZ,command:()=>aZ,createParagraphNear:()=>lZ,cut:()=>uZ,deleteCurrentNode:()=>cZ,deleteNode:()=>fZ,deleteRange:()=>dZ,deleteSelection:()=>hZ,enter:()=>pZ,exitCode:()=>mZ,extendMarkRange:()=>gZ,first:()=>yZ,focus:()=>bZ,forEach:()=>xZ,insertContent:()=>wZ,insertContentAt:()=>EZ,joinBackward:()=>TZ,joinDown:()=>kZ,joinForward:()=>AZ,joinItemBackward:()=>MZ,joinItemForward:()=>NZ,joinTextblockBackward:()=>_Z,joinTextblockForward:()=>RZ,joinUp:()=>CZ,keyboardShortcut:()=>OZ,lift:()=>jZ,liftEmptyBlock:()=>LZ,liftListItem:()=>PZ,newlineInCode:()=>BZ,resetAttributes:()=>IZ,scrollIntoView:()=>zZ,selectAll:()=>qZ,selectNodeBackward:()=>VZ,selectNodeForward:()=>HZ,selectParentNode:()=>FZ,selectTextblockEnd:()=>UZ,selectTextblockStart:()=>$Z,setContent:()=>GZ,setMark:()=>YZ,setMeta:()=>WZ,setNode:()=>XZ,setNodeSelection:()=>ZZ,setTextSelection:()=>QZ,sinkListItem:()=>JZ,splitBlock:()=>eQ,splitListItem:()=>tQ,toggleList:()=>nQ,toggleMark:()=>rQ,toggleNode:()=>iQ,toggleWrap:()=>sQ,undoInputRule:()=>oQ,unsetAllMarks:()=>aQ,unsetMark:()=>lQ,updateAttributes:()=>uQ,wrapIn:()=>cQ,wrapInList:()=>fQ});var iZ=()=>({editor:e,view:t})=>(requestAnimationFrame(()=>{var n;e.isDestroyed||(t.dom.blur(),(n=window?.getSelection())==null||n.removeAllRanges())}),!0),sZ=(e=!0)=>({commands:t})=>t.setContent("",{emitUpdate:e}),oZ=()=>({state:e,tr:t,dispatch:n})=>{const{selection:r}=t,{ranges:i}=r;return n&&i.forEach(({$from:s,$to:o})=>{e.doc.nodesBetween(s.pos,o.pos,(l,c)=>{if(l.type.isText)return;const{doc:f,mapping:h}=t,p=f.resolve(h.map(c)),g=f.resolve(h.map(c+l.nodeSize)),y=p.blockRange(g);if(!y)return;const b=_l(y);if(l.type.isTextblock){const{defaultType:S}=p.parent.contentMatchAt(p.index());t.setNodeMarkup(y.start,S)}(b||b===0)&&t.lift(y,b)})}),!0},aZ=e=>t=>e(t),lZ=()=>({state:e,dispatch:t})=>NI(e,t),uZ=(e,t)=>({editor:n,tr:r})=>{const{state:i}=n,s=i.doc.slice(e.from,e.to);r.deleteRange(e.from,e.to);const o=r.mapping.map(t);return r.insert(o,s.content),r.setSelection(new qe(r.doc.resolve(Math.max(o-1,0)))),!0},cZ=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,r=n.$anchor.node();if(r.content.size>0)return!1;const i=e.selection.$anchor;for(let s=i.depth;s>0;s-=1)if(i.node(s).type===r.type){if(t){const l=i.before(s),c=i.after(s);e.delete(l,c).scrollIntoView()}return!0}return!1},fZ=e=>({tr:t,state:n,dispatch:r})=>{const i=Ft(e,n.schema),s=t.selection.$anchor;for(let o=s.depth;o>0;o-=1)if(s.node(o).type===i){if(r){const c=s.before(o),f=s.after(o);t.delete(c,f).scrollIntoView()}return!0}return!1},dZ=e=>({tr:t,dispatch:n})=>{const{from:r,to:i}=e;return n&&t.delete(r,i),!0},hZ=()=>({state:e,dispatch:t})=>_C(e,t),pZ=()=>({commands:e})=>e.keyboardShortcut("Enter"),mZ=()=>({state:e,dispatch:t})=>pX(e,t),gZ=(e,t={})=>({tr:n,state:r,dispatch:i})=>{const s=Hi(e,r.schema),{doc:o,selection:l}=n,{$from:c,from:f,to:h}=l;if(i){const p=zC(c,s,t);if(p&&p.from<=f&&p.to>=h){const g=qe.create(o,p.from,p.to);n.setSelection(g)}}return!0},yZ=e=>t=>{const n=typeof e=="function"?e(t):e;for(let r=0;r<n.length;r+=1)if(n[r](t))return!0;return!1};function vZ(){return navigator.platform==="Android"||/android/i.test(navigator.userAgent)}function HC(){return["iPad Simulator","iPhone Simulator","iPod Simulator","iPad","iPhone","iPod"].includes(navigator.platform)||navigator.userAgent.includes("Mac")&&"ontouchend"in document}var bZ=(e=null,t={})=>({editor:n,view:r,tr:i,dispatch:s})=>{t={scrollIntoView:!0,...t};const o=()=>{(HC()||vZ())&&r.dom.focus(),requestAnimationFrame(()=>{n.isDestroyed||(r.focus(),t?.scrollIntoView&&n.commands.scrollIntoView())})};if(r.hasFocus()&&e===null||e===!1)return!0;if(s&&e===null&&!GI(n.state.selection))return o(),!0;const l=KI(i.doc,e)||n.state.selection,c=n.state.selection.eq(l);return s&&(c||i.setSelection(l),c&&i.storedMarks&&i.setStoredMarks(i.storedMarks),o()),!0},xZ=(e,t)=>n=>e.every((r,i)=>t(r,{...n,index:i})),wZ=(e,t)=>({tr:n,commands:r})=>r.insertContentAt({from:n.selection.from,to:n.selection.to},e,t),SZ=e=>!("type"in e),EZ=(e,t,n)=>({tr:r,dispatch:i,editor:s})=>{var o;if(i){n={parseOptions:s.options.parseOptions,updateSelection:!0,applyInputRules:!1,applyPasteRules:!1,...n};let l;const c=x=>{s.emit("contentError",{editor:s,error:x,disableCollaboration:()=>{"collaboration"in s.storage&&typeof s.storage.collaboration=="object"&&s.storage.collaboration&&(s.storage.collaboration.isDisabled=!0)}})},f={preserveWhitespace:"full",...n.parseOptions};if(!n.errorOnInvalidContent&&!s.options.enableContentCheck&&s.options.emitContentError)try{Oc(t,s.schema,{parseOptions:f,errorOnInvalidContent:!0})}catch(x){c(x)}try{l=Oc(t,s.schema,{parseOptions:f,errorOnInvalidContent:(o=n.errorOnInvalidContent)!=null?o:s.options.enableContentCheck})}catch(x){return c(x),!1}let{from:h,to:p}=typeof e=="number"?{from:e,to:e}:{from:e.from,to:e.to},g=!0,y=!0;if((SZ(l)?l:[l]).forEach(x=>{x.check(),g=g?x.isText&&x.marks.length===0:!1,y=y?x.isBlock:!1}),h===p&&y){const{parent:x}=r.doc.resolve(h);x.isTextblock&&!x.type.spec.code&&!x.childCount&&(h-=1,p+=1)}let S;if(g){if(Array.isArray(t))S=t.map(x=>x.text||"").join("");else if(t instanceof pe){let x="";t.forEach(C=>{C.text&&(x+=C.text)}),S=x}else typeof t=="object"&&t&&t.text?S=t.text:S=t;r.insertText(S,h,p)}else{S=l;const x=r.doc.resolve(h),C=x.node(),T=x.parentOffset===0,k=C.isText||C.isTextblock,A=C.content.size>0;T&&k&&A&&(h=Math.max(0,h-1)),r.replaceWith(h,p,S)}n.updateSelection&&KX(r,r.steps.length-1,-1),n.applyInputRules&&r.setMeta("applyInputRules",{from:h,text:S}),n.applyPasteRules&&r.setMeta("applyPasteRules",{from:h,text:S})}return!0},CZ=()=>({state:e,dispatch:t})=>fX(e,t),kZ=()=>({state:e,dispatch:t})=>dX(e,t),TZ=()=>({state:e,dispatch:t})=>SI(e,t),AZ=()=>({state:e,dispatch:t})=>TI(e,t),MZ=()=>({state:e,dispatch:t,tr:n})=>{try{const r=Vp(e.doc,e.selection.$from.pos,-1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},NZ=()=>({state:e,dispatch:t,tr:n})=>{try{const r=Vp(e.doc,e.selection.$from.pos,1);return r==null?!1:(n.join(r,2),t&&t(n),!0)}catch{return!1}},_Z=()=>({state:e,dispatch:t})=>uX(e,t),RZ=()=>({state:e,dispatch:t})=>cX(e,t);function JI(){return typeof navigator<"u"?/Mac/.test(navigator.platform):!1}function DZ(e){const t=e.split(/-(?!$)/);let n=t[t.length-1];n==="Space"&&(n=" ");let r,i,s,o;for(let l=0;l<t.length-1;l+=1){const c=t[l];if(/^(cmd|meta|m)$/i.test(c))o=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))i=!0;else if(/^s(hift)?$/i.test(c))s=!0;else if(/^mod$/i.test(c))HC()||JI()?o=!0:i=!0;else throw new Error(`Unrecognized modifier name: ${c}`)}return r&&(n=`Alt-${n}`),i&&(n=`Ctrl-${n}`),o&&(n=`Meta-${n}`),s&&(n=`Shift-${n}`),n}var OZ=e=>({editor:t,view:n,tr:r,dispatch:i})=>{const s=DZ(e).split(/-(?!$)/),o=s.find(f=>!["Alt","Ctrl","Meta","Shift"].includes(f)),l=new KeyboardEvent("keydown",{key:o==="Space"?" ":o,altKey:s.includes("Alt"),ctrlKey:s.includes("Ctrl"),metaKey:s.includes("Meta"),shiftKey:s.includes("Shift"),bubbles:!0,cancelable:!0}),c=t.captureTransaction(()=>{n.someProp("handleKeyDown",f=>f(n,l))});return c?.steps.forEach(f=>{const h=f.map(r.mapping);h&&i&&r.maybeStep(h)}),!0},jZ=(e,t={})=>({state:n,dispatch:r})=>{const i=Ft(e,n.schema);return Us(n,i,t)?hX(n,r):!1},LZ=()=>({state:e,dispatch:t})=>_I(e,t),PZ=e=>({state:t,dispatch:n})=>{const r=Ft(e,t.schema);return kX(r)(t,n)},BZ=()=>({state:e,dispatch:t})=>MI(e,t);function oR(e,t){const n=typeof t=="string"?[t]:t;return Object.keys(e).reduce((r,i)=>(n.includes(i)||(r[i]=e[i]),r),{})}var IZ=(e,t)=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const l=Xp(typeof e=="string"?e:e.name,r.schema);return l?(l==="node"&&(s=Ft(e,r.schema)),l==="mark"&&(o=Hi(e,r.schema)),i&&n.selection.ranges.forEach(c=>{r.doc.nodesBetween(c.$from.pos,c.$to.pos,(f,h)=>{s&&s===f.type&&n.setNodeMarkup(h,void 0,oR(f.attrs,t)),o&&f.marks.length&&f.marks.forEach(p=>{o===p.type&&n.addMark(h,h+f.nodeSize,o.create(oR(p.attrs,t)))})})}),!0):!1},zZ=()=>({tr:e,dispatch:t})=>(t&&e.scrollIntoView(),!0),qZ=()=>({tr:e,dispatch:t})=>{if(t){const n=new nr(e.doc);e.setSelection(n)}return!0},VZ=()=>({state:e,dispatch:t})=>CI(e,t),HZ=()=>({state:e,dispatch:t})=>AI(e,t),FZ=()=>({state:e,dispatch:t})=>yX(e,t),UZ=()=>({state:e,dispatch:t})=>xX(e,t),$Z=()=>({state:e,dispatch:t})=>bX(e,t),GZ=(e,{errorOnInvalidContent:t,emitUpdate:n=!0,parseOptions:r={}}={})=>({editor:i,tr:s,dispatch:o,commands:l})=>{const{doc:c}=s;if(r.preserveWhitespace!=="full"){const f=sE(e,i.schema,r,{errorOnInvalidContent:t??i.options.enableContentCheck});return o&&s.replaceWith(0,c.content.size,f).setMeta("preventUpdate",!n),!0}return o&&s.setMeta("preventUpdate",!n),l.insertContentAt({from:0,to:c.content.size},e,{parseOptions:r,errorOnInvalidContent:t??i.options.enableContentCheck})};function KZ(e,t,n){var r;const{selection:i}=t;let s=null;if(GI(i)&&(s=i.$cursor),s){const l=(r=e.storedMarks)!=null?r:s.marks();return s.parent.type.allowsMarkType(n)&&(!!n.isInSet(l)||!l.some(f=>f.type.excludes(n)))}const{ranges:o}=i;return o.some(({$from:l,$to:c})=>{let f=l.depth===0?e.doc.inlineContent&&e.doc.type.allowsMarkType(n):!1;return e.doc.nodesBetween(l.pos,c.pos,(h,p,g)=>{if(f)return!1;if(h.isInline){const y=!g||g.type.allowsMarkType(n),b=!!n.isInSet(h.marks)||!h.marks.some(S=>S.type.excludes(n));f=y&&b}return!f}),f})}var YZ=(e,t={})=>({tr:n,state:r,dispatch:i})=>{const{selection:s}=n,{empty:o,ranges:l}=s,c=Hi(e,r.schema);if(i)if(o){const f=VI(r,c);n.addStoredMark(c.create({...f,...t}))}else l.forEach(f=>{const h=f.$from.pos,p=f.$to.pos;r.doc.nodesBetween(h,p,(g,y)=>{const b=Math.max(y,h),S=Math.min(y+g.nodeSize,p);g.marks.find(C=>C.type===c)?g.marks.forEach(C=>{c===C.type&&n.addMark(b,S,c.create({...C.attrs,...t}))}):n.addMark(b,S,c.create(t))})});return KZ(r,n,c)},WZ=(e,t)=>({tr:n})=>(n.setMeta(e,t),!0),XZ=(e,t={})=>({state:n,dispatch:r,chain:i})=>{const s=Ft(e,n.schema);let o;return n.selection.$anchor.sameParent(n.selection.$head)&&(o=n.selection.$anchor.parent.attrs),s.isTextblock?i().command(({commands:l})=>eR(s,{...o,...t})(n)?!0:l.clearNodes()).command(({state:l})=>eR(s,{...o,...t})(l,r)).run():(console.warn('[tiptap warn]: Currently "setNode()" only supports text block nodes.'),!1)},ZZ=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,i=Ao(e,0,r.content.size),s=Re.create(r,i);t.setSelection(s)}return!0},QZ=e=>({tr:t,dispatch:n})=>{if(n){const{doc:r}=t,{from:i,to:s}=typeof e=="number"?{from:e,to:e}:e,o=qe.atStart(r).from,l=qe.atEnd(r).to,c=Ao(i,o,l),f=Ao(s,o,l),h=qe.create(r,c,f);t.setSelection(h)}return!0},JZ=e=>({state:t,dispatch:n})=>{const r=Ft(e,t.schema);return MX(r)(t,n)};function aR(e,t){const n=e.storedMarks||e.selection.$to.parentOffset&&e.selection.$from.marks();if(n){const r=n.filter(i=>t?.includes(i.type.name));e.tr.ensureMarks(r)}}var eQ=({keepMarks:e=!0}={})=>({tr:t,state:n,dispatch:r,editor:i})=>{const{selection:s,doc:o}=t,{$from:l,$to:c}=s,f=i.extensionManager.attributes,h=uh(f,l.node().type.name,l.node().attrs);if(s instanceof Re&&s.node.isBlock)return!l.parentOffset||!Pi(o,l.pos)?!1:(r&&(e&&aR(n,i.extensionManager.splittableMarks),t.split(l.pos).scrollIntoView()),!0);if(!l.parent.isBlock)return!1;const p=c.parentOffset===c.parent.content.size,g=l.depth===0?void 0:RX(l.node(-1).contentMatchAt(l.indexAfter(-1)));let y=p&&g?[{type:g,attrs:h}]:void 0,b=Pi(t.doc,t.mapping.map(l.pos),1,y);if(!y&&!b&&Pi(t.doc,t.mapping.map(l.pos),1,g?[{type:g}]:void 0)&&(b=!0,y=g?[{type:g,attrs:h}]:void 0),r){if(b&&(s instanceof qe&&t.deleteSelection(),t.split(t.mapping.map(l.pos),1,y),g&&!p&&!l.parentOffset&&l.parent.type!==g)){const S=t.mapping.map(l.before()),x=t.doc.resolve(S);l.node(-1).canReplaceWith(x.index(),x.index()+1,g)&&t.setNodeMarkup(t.mapping.map(l.before()),g)}e&&aR(n,i.extensionManager.splittableMarks),t.scrollIntoView()}return b},tQ=(e,t={})=>({tr:n,state:r,dispatch:i,editor:s})=>{var o;const l=Ft(e,r.schema),{$from:c,$to:f}=r.selection,h=r.selection.node;if(h&&h.isBlock||c.depth<2||!c.sameParent(f))return!1;const p=c.node(-1);if(p.type!==l)return!1;const g=s.extensionManager.attributes;if(c.parent.content.size===0&&c.node(-1).childCount===c.indexAfter(-1)){if(c.depth===2||c.node(-3).type!==l||c.index(-2)!==c.node(-2).childCount-1)return!1;if(i){let C=pe.empty;const T=c.index(-1)?1:c.index(-2)?2:3;for(let O=c.depth-T;O>=c.depth-3;O-=1)C=pe.from(c.node(O).copy(C));const k=c.indexAfter(-1)<c.node(-2).childCount?1:c.indexAfter(-2)<c.node(-3).childCount?2:3,A={...uh(g,c.node().type.name,c.node().attrs),...t},M=((o=l.contentMatch.defaultType)==null?void 0:o.createAndFill(A))||void 0;C=C.append(pe.from(l.createAndFill(null,M)||void 0));const _=c.before(c.depth-(T-1));n.replace(_,c.after(-k),new ve(C,4-T,0));let R=-1;n.doc.nodesBetween(_,n.doc.content.size,(O,I)=>{if(R>-1)return!1;O.isTextblock&&O.content.size===0&&(R=I+1)}),R>-1&&n.setSelection(qe.near(n.doc.resolve(R))),n.scrollIntoView()}return!0}const y=f.pos===c.end()?p.contentMatchAt(0).defaultType:null,b={...uh(g,p.type.name,p.attrs),...t},S={...uh(g,c.node().type.name,c.node().attrs),...t};n.delete(c.pos,f.pos);const x=y?[{type:l,attrs:b},{type:y,attrs:S}]:[{type:l,attrs:b}];if(!Pi(n.doc,c.pos,2))return!1;if(i){const{selection:C,storedMarks:T}=r,{splittableMarks:k}=s.extensionManager,A=T||C.$to.parentOffset&&C.$from.marks();if(n.split(c.pos,2,x).scrollIntoView(),!A||!i)return!0;const M=A.filter(_=>k.includes(_.type.name));n.ensureMarks(M)}return!0},M0=(e,t)=>{const n=Wp(o=>o.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(Math.max(0,n.pos-1)).before(n.depth);if(r===void 0)return!0;const i=e.doc.nodeAt(r);return n.node.type===i?.type&&Ks(e.doc,n.pos)&&e.join(n.pos),!0},N0=(e,t)=>{const n=Wp(o=>o.type===t)(e.selection);if(!n)return!0;const r=e.doc.resolve(n.start).after(n.depth);if(r===void 0)return!0;const i=e.doc.nodeAt(r);return n.node.type===i?.type&&Ks(e.doc,r)&&e.join(r),!0},nQ=(e,t,n,r={})=>({editor:i,tr:s,state:o,dispatch:l,chain:c,commands:f,can:h})=>{const{extensions:p,splittableMarks:g}=i.extensionManager,y=Ft(e,o.schema),b=Ft(t,o.schema),{selection:S,storedMarks:x}=o,{$from:C,$to:T}=S,k=C.blockRange(T),A=x||S.$to.parentOffset&&S.$from.marks();if(!k)return!1;const M=Wp(_=>sR(_.type.name,p))(S);if(k.depth>=1&&M&&k.depth-M.depth<=1){if(M.node.type===y)return f.liftListItem(b);if(sR(M.node.type.name,p)&&y.validContent(M.node.content)&&l)return c().command(()=>(s.setNodeMarkup(M.pos,y),!0)).command(()=>M0(s,y)).command(()=>N0(s,y)).run()}return!n||!A||!l?c().command(()=>h().wrapInList(y,r)?!0:f.clearNodes()).wrapInList(y,r).command(()=>M0(s,y)).command(()=>N0(s,y)).run():c().command(()=>{const _=h().wrapInList(y,r),R=A.filter(O=>g.includes(O.type.name));return s.ensureMarks(R),_?!0:f.clearNodes()}).wrapInList(y,r).command(()=>M0(s,y)).command(()=>N0(s,y)).run()},rQ=(e,t={},n={})=>({state:r,commands:i})=>{const{extendEmptyMarkRange:s=!1}=n,o=Hi(e,r.schema);return oE(r,o,t)?i.unsetMark(o,{extendEmptyMarkRange:s}):i.setMark(o,t)},iQ=(e,t,n={})=>({state:r,commands:i})=>{const s=Ft(e,r.schema),o=Ft(t,r.schema),l=Us(r,s,n);let c;return r.selection.$anchor.sameParent(r.selection.$head)&&(c=r.selection.$anchor.parent.attrs),l?i.setNode(o,c):i.setNode(s,{...c,...n})},sQ=(e,t={})=>({state:n,commands:r})=>{const i=Ft(e,n.schema);return Us(n,i,t)?r.lift(i):r.wrapIn(i,t)},oQ=()=>({state:e,dispatch:t})=>{const n=e.plugins;for(let r=0;r<n.length;r+=1){const i=n[r];let s;if(i.spec.isInputRules&&(s=i.getState(e))){if(t){const o=e.tr,l=s.transform;for(let c=l.steps.length-1;c>=0;c-=1)o.step(l.steps[c].invert(l.docs[c]));if(s.text){const c=o.doc.resolve(s.from).marks();o.replaceWith(s.from,s.to,e.schema.text(s.text,c))}else o.delete(s.from,s.to)}return!0}}return!1},aQ=()=>({tr:e,dispatch:t})=>{const{selection:n}=e,{empty:r,ranges:i}=n;return r||t&&i.forEach(s=>{e.removeMark(s.$from.pos,s.$to.pos)}),!0},lQ=(e,t={})=>({tr:n,state:r,dispatch:i})=>{var s;const{extendEmptyMarkRange:o=!1}=t,{selection:l}=n,c=Hi(e,r.schema),{$from:f,empty:h,ranges:p}=l;if(!i)return!0;if(h&&o){let{from:g,to:y}=l;const b=(s=f.marks().find(x=>x.type===c))==null?void 0:s.attrs,S=zC(f,c,b);S&&(g=S.from,y=S.to),n.removeMark(g,y,c)}else p.forEach(g=>{n.removeMark(g.$from.pos,g.$to.pos,c)});return n.removeStoredMark(c),!0},uQ=(e,t={})=>({tr:n,state:r,dispatch:i})=>{let s=null,o=null;const l=Xp(typeof e=="string"?e:e.name,r.schema);return l?(l==="node"&&(s=Ft(e,r.schema)),l==="mark"&&(o=Hi(e,r.schema)),i&&n.selection.ranges.forEach(c=>{const f=c.$from.pos,h=c.$to.pos;let p,g,y,b;n.selection.empty?r.doc.nodesBetween(f,h,(S,x)=>{s&&s===S.type&&(y=Math.max(x,f),b=Math.min(x+S.nodeSize,h),p=x,g=S)}):r.doc.nodesBetween(f,h,(S,x)=>{x<f&&s&&s===S.type&&(y=Math.max(x,f),b=Math.min(x+S.nodeSize,h),p=x,g=S),x>=f&&x<=h&&(s&&s===S.type&&n.setNodeMarkup(x,void 0,{...S.attrs,...t}),o&&S.marks.length&&S.marks.forEach(C=>{if(o===C.type){const T=Math.max(x,f),k=Math.min(x+S.nodeSize,h);n.addMark(T,k,o.create({...C.attrs,...t}))}}))}),g&&(p!==void 0&&n.setNodeMarkup(p,void 0,{...g.attrs,...t}),o&&g.marks.length&&g.marks.forEach(S=>{o===S.type&&n.addMark(y,b,o.create({...S.attrs,...t}))}))}),!0):!1},cQ=(e,t={})=>({state:n,dispatch:r})=>{const i=Ft(e,n.schema);return wX(i,t)(n,r)},fQ=(e,t={})=>({state:n,dispatch:r})=>{const i=Ft(e,n.schema);return SX(i,t)(n,r)},ez=Lt.create({name:"commands",addCommands(){return{...QI}}}),tz=Lt.create({name:"delete",onUpdate({transaction:e,appendedTransactions:t}){var n,r,i;const s=()=>{var o,l,c,f;if((f=(c=(l=(o=this.editor.options.coreExtensionOptions)==null?void 0:o.delete)==null?void 0:l.filterTransaction)==null?void 0:c.call(l,e))!=null?f:e.getMeta("y-sync$"))return;const h=jI(e.before,[e,...t]);FI(h).forEach(y=>{h.mapping.mapResult(y.oldRange.from).deletedAfter&&h.mapping.mapResult(y.oldRange.to).deletedBefore&&h.before.nodesBetween(y.oldRange.from,y.oldRange.to,(b,S)=>{const x=S+b.nodeSize-2,C=y.oldRange.from<=S&&x<=y.oldRange.to;this.editor.emit("delete",{type:"node",node:b,from:S,to:x,newFrom:h.mapping.map(S),newTo:h.mapping.map(x),deletedRange:y.oldRange,newRange:y.newRange,partial:!C,editor:this.editor,transaction:e,combinedTransform:h})})});const g=h.mapping;h.steps.forEach((y,b)=>{var S,x;if(y instanceof Pr){const C=g.slice(b).map(y.from,-1),T=g.slice(b).map(y.to),k=g.invert().map(C,-1),A=g.invert().map(T),M=(S=h.doc.nodeAt(C-1))==null?void 0:S.marks.some(R=>R.eq(y.mark)),_=(x=h.doc.nodeAt(T))==null?void 0:x.marks.some(R=>R.eq(y.mark));this.editor.emit("delete",{type:"mark",mark:y.mark,from:y.from,to:y.to,deletedRange:{from:k,to:A},newRange:{from:C,to:T},partial:!!(_||M),editor:this.editor,transaction:e,combinedTransform:h})}})};(i=(r=(n=this.editor.options.coreExtensionOptions)==null?void 0:n.delete)==null?void 0:r.async)==null||i?setTimeout(s,0):s()}}),nz=Lt.create({name:"drop",addProseMirrorPlugins(){return[new Rt({key:new nn("tiptapDrop"),props:{handleDrop:(e,t,n,r)=>{this.editor.emit("drop",{editor:this.editor,event:t,slice:n,moved:r})}}})]}}),rz=Lt.create({name:"editable",addProseMirrorPlugins(){return[new Rt({key:new nn("editable"),props:{editable:()=>this.editor.options.editable}})]}}),iz=new nn("focusEvents"),sz=Lt.create({name:"focusEvents",addProseMirrorPlugins(){const{editor:e}=this;return[new Rt({key:iz,props:{handleDOMEvents:{focus:(t,n)=>{e.isFocused=!0;const r=e.state.tr.setMeta("focus",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1},blur:(t,n)=>{e.isFocused=!1;const r=e.state.tr.setMeta("blur",{event:n}).setMeta("addToHistory",!1);return t.dispatch(r),!1}}}})]}}),oz=Lt.create({name:"keymap",addKeyboardShortcuts(){const e=()=>this.editor.commands.first(({commands:o})=>[()=>o.undoInputRule(),()=>o.command(({tr:l})=>{const{selection:c,doc:f}=l,{empty:h,$anchor:p}=c,{pos:g,parent:y}=p,b=p.parent.isTextblock&&g>0?l.doc.resolve(g-1):p,S=b.parent.type.spec.isolating,x=p.pos-p.parentOffset,C=S&&b.parent.childCount===1?x===p.pos:Ue.atStart(f).from===g;return!h||!y.type.isTextblock||y.textContent.length||!C||C&&p.parent.type.name==="paragraph"?!1:o.clearNodes()}),()=>o.deleteSelection(),()=>o.joinBackward(),()=>o.selectNodeBackward()]),t=()=>this.editor.commands.first(({commands:o})=>[()=>o.deleteSelection(),()=>o.deleteCurrentNode(),()=>o.joinForward(),()=>o.selectNodeForward()]),r={Enter:()=>this.editor.commands.first(({commands:o})=>[()=>o.newlineInCode(),()=>o.createParagraphNear(),()=>o.liftEmptyBlock(),()=>o.splitBlock()]),"Mod-Enter":()=>this.editor.commands.exitCode(),Backspace:e,"Mod-Backspace":e,"Shift-Backspace":e,Delete:t,"Mod-Delete":t,"Mod-a":()=>this.editor.commands.selectAll()},i={...r},s={...r,"Ctrl-h":e,"Alt-Backspace":e,"Ctrl-d":t,"Ctrl-Alt-Backspace":t,"Alt-Delete":t,"Alt-d":t,"Ctrl-a":()=>this.editor.commands.selectTextblockStart(),"Ctrl-e":()=>this.editor.commands.selectTextblockEnd()};return HC()||JI()?s:i},addProseMirrorPlugins(){return[new Rt({key:new nn("clearDocument"),appendTransaction:(e,t,n)=>{if(e.some(S=>S.getMeta("composition")))return;const r=e.some(S=>S.docChanged)&&!t.doc.eq(n.doc),i=e.some(S=>S.getMeta("preventClearDocument"));if(!r||i)return;const{empty:s,from:o,to:l}=t.selection,c=Ue.atStart(t.doc).from,f=Ue.atEnd(t.doc).to;if(s||!(o===c&&l===f)||!Zp(n.doc))return;const g=n.tr,y=Kp({state:n,transaction:g}),{commands:b}=new Yp({editor:this.editor,state:y});if(b.clearNodes(),!!g.steps.length)return g}})]}}),az=Lt.create({name:"paste",addProseMirrorPlugins(){return[new Rt({key:new nn("tiptapPaste"),props:{handlePaste:(e,t,n)=>{this.editor.emit("paste",{editor:this.editor,event:t,slice:n})}}})]}}),lz=Lt.create({name:"tabindex",addProseMirrorPlugins(){return[new Rt({key:new nn("tabindex"),props:{attributes:()=>this.editor.isEditable?{tabindex:"0"}:{}}})]}}),dQ=class Qa{constructor(t,n,r=!1,i=null){this.currentNode=null,this.actualDepth=null,this.isBlock=r,this.resolvedPos=t,this.editor=n,this.currentNode=i}get name(){return this.node.type.name}get node(){return this.currentNode||this.resolvedPos.node()}get element(){return this.editor.view.domAtPos(this.pos).node}get depth(){var t;return(t=this.actualDepth)!=null?t:this.resolvedPos.depth}get pos(){return this.resolvedPos.pos}get content(){return this.node.content}set content(t){let n=this.from,r=this.to;if(this.isBlock){if(this.content.size===0){console.error(`You can’t set content on a block node. Tried to set content on ${this.name} at ${this.pos}`);return}n=this.from+1,r=this.to-1}this.editor.commands.insertContentAt({from:n,to:r},t)}get attributes(){return this.node.attrs}get textContent(){return this.node.textContent}get size(){return this.node.nodeSize}get from(){return this.isBlock?this.pos:this.resolvedPos.start(this.resolvedPos.depth)}get range(){return{from:this.from,to:this.to}}get to(){return this.isBlock?this.pos+this.size:this.resolvedPos.end(this.resolvedPos.depth)+(this.node.isText?0:1)}get parent(){if(this.depth===0)return null;const t=this.resolvedPos.start(this.resolvedPos.depth-1),n=this.resolvedPos.doc.resolve(t);return new Qa(n,this.editor)}get before(){let t=this.resolvedPos.doc.resolve(this.from-(this.isBlock?1:2));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.from-3)),new Qa(t,this.editor)}get after(){let t=this.resolvedPos.doc.resolve(this.to+(this.isBlock?2:1));return t.depth!==this.depth&&(t=this.resolvedPos.doc.resolve(this.to+3)),new Qa(t,this.editor)}get children(){const t=[];return this.node.content.forEach((n,r)=>{const i=n.isBlock&&!n.isTextblock,s=n.isAtom&&!n.isText,o=this.pos+r+(s?0:1);if(o<0||o>this.resolvedPos.doc.nodeSize-2)return;const l=this.resolvedPos.doc.resolve(o);if(!i&&l.depth<=this.depth)return;const c=new Qa(l,this.editor,i,i?n:null);i&&(c.actualDepth=this.depth+1),t.push(new Qa(l,this.editor,i,i?n:null))}),t}get firstChild(){return this.children[0]||null}get lastChild(){const t=this.children;return t[t.length-1]||null}closest(t,n={}){let r=null,i=this.parent;for(;i&&!r;){if(i.node.type.name===t)if(Object.keys(n).length>0){const s=i.node.attrs,o=Object.keys(n);for(let l=0;l<o.length;l+=1){const c=o[l];if(s[c]!==n[c])break}}else r=i;i=i.parent}return r}querySelector(t,n={}){return this.querySelectorAll(t,n,!0)[0]||null}querySelectorAll(t,n={},r=!1){let i=[];if(!this.children||this.children.length===0)return i;const s=Object.keys(n);return this.children.forEach(o=>{r&&i.length>0||(o.node.type.name===t&&s.every(c=>n[c]===o.node.attrs[c])&&i.push(o),!(r&&i.length>0)&&(i=i.concat(o.querySelectorAll(t,n,r))))}),i}setAttribute(t){const{tr:n}=this.editor.state;n.setNodeMarkup(this.from,void 0,{...this.node.attrs,...t}),this.editor.view.dispatch(n)}},hQ=`.ProseMirror {
  position: relative;
}

.ProseMirror {
  word-wrap: break-word;
  white-space: pre-wrap;
  white-space: break-spaces;
  -webkit-font-variant-ligatures: none;
  font-variant-ligatures: none;
  font-feature-settings: "liga" 0; /* the above doesn't seem to work in Edge */
}

.ProseMirror [contenteditable="false"] {
  white-space: normal;
}

.ProseMirror [contenteditable="false"] [contenteditable="true"] {
  white-space: pre-wrap;
}

.ProseMirror pre {
  white-space: pre-wrap;
}

img.ProseMirror-separator {
  display: inline !important;
  border: none !important;
  margin: 0 !important;
  width: 0 !important;
  height: 0 !important;
}

.ProseMirror-gapcursor {
  display: none;
  pointer-events: none;
  position: absolute;
  margin: 0;
}

.ProseMirror-gapcursor:after {
  content: "";
  display: block;
  position: absolute;
  top: -2px;
  width: 20px;
  border-top: 1px solid black;
  animation: ProseMirror-cursor-blink 1.1s steps(2, start) infinite;
}

@keyframes ProseMirror-cursor-blink {
  to {
    visibility: hidden;
  }
}

.ProseMirror-hideselection *::selection {
  background: transparent;
}

.ProseMirror-hideselection *::-moz-selection {
  background: transparent;
}

.ProseMirror-hideselection * {
  caret-color: transparent;
}

.ProseMirror-focused .ProseMirror-gapcursor {
  display: block;
}`;function pQ(e,t,n){const r=document.querySelector("style[data-tiptap-style]");if(r!==null)return r;const i=document.createElement("style");return t&&i.setAttribute("nonce",t),i.setAttribute("data-tiptap-style",""),i.innerHTML=e,document.getElementsByTagName("head")[0].appendChild(i),i}var mQ=class extends _X{constructor(e={}){super(),this.css=null,this.editorView=null,this.isFocused=!1,this.isInitialized=!1,this.extensionStorage={},this.instanceId=Math.random().toString(36).slice(2,9),this.options={element:typeof document<"u"?document.createElement("div"):null,content:"",injectCSS:!0,injectNonce:void 0,extensions:[],autofocus:!1,editable:!0,editorProps:{},parseOptions:{},coreExtensionOptions:{},enableInputRules:!0,enablePasteRules:!0,enableCoreExtensions:!0,enableContentCheck:!1,emitContentError:!1,onBeforeCreate:()=>null,onCreate:()=>null,onMount:()=>null,onUnmount:()=>null,onUpdate:()=>null,onSelectionUpdate:()=>null,onTransaction:()=>null,onFocus:()=>null,onBlur:()=>null,onDestroy:()=>null,onContentError:({error:r})=>{throw r},onPaste:()=>null,onDrop:()=>null,onDelete:()=>null},this.isCapturingTransaction=!1,this.capturedTransaction=null,this.setOptions(e),this.createExtensionManager(),this.createCommandManager(),this.createSchema(),this.on("beforeCreate",this.options.onBeforeCreate),this.emit("beforeCreate",{editor:this}),this.on("mount",this.options.onMount),this.on("unmount",this.options.onUnmount),this.on("contentError",this.options.onContentError),this.on("create",this.options.onCreate),this.on("update",this.options.onUpdate),this.on("selectionUpdate",this.options.onSelectionUpdate),this.on("transaction",this.options.onTransaction),this.on("focus",this.options.onFocus),this.on("blur",this.options.onBlur),this.on("destroy",this.options.onDestroy),this.on("drop",({event:r,slice:i,moved:s})=>this.options.onDrop(r,i,s)),this.on("paste",({event:r,slice:i})=>this.options.onPaste(r,i)),this.on("delete",this.options.onDelete);const t=this.createDoc(),n=KI(t,this.options.autofocus);this.editorState=sl.create({doc:t,schema:this.schema,selection:n||void 0}),this.options.element&&this.mount(this.options.element)}mount(e){if(typeof document>"u")throw new Error("[tiptap error]: The editor cannot be mounted because there is no 'document' defined in this environment.");this.createView(e),this.emit("mount",{editor:this}),this.css&&!document.head.contains(this.css)&&document.head.appendChild(this.css),window.setTimeout(()=>{this.isDestroyed||(this.commands.focus(this.options.autofocus),this.emit("create",{editor:this}),this.isInitialized=!0)},0)}unmount(){if(this.editorView){const e=this.editorView.dom;e?.editor&&delete e.editor,this.editorView.destroy()}if(this.editorView=null,this.isInitialized=!1,this.css)try{typeof this.css.remove=="function"?this.css.remove():this.css.parentNode&&this.css.parentNode.removeChild(this.css)}catch(e){console.warn("Failed to remove CSS element:",e)}this.css=null,this.emit("unmount",{editor:this})}get storage(){return this.extensionStorage}get commands(){return this.commandManager.commands}chain(){return this.commandManager.chain()}can(){return this.commandManager.can()}injectCSS(){this.options.injectCSS&&typeof document<"u"&&(this.css=pQ(hQ,this.options.injectNonce))}setOptions(e={}){this.options={...this.options,...e},!(!this.editorView||!this.state||this.isDestroyed)&&(this.options.editorProps&&this.view.setProps(this.options.editorProps),this.view.updateState(this.state))}setEditable(e,t=!0){this.setOptions({editable:e}),t&&this.emit("update",{editor:this,transaction:this.state.tr,appendedTransactions:[]})}get isEditable(){return this.options.editable&&this.view&&this.view.editable}get view(){return this.editorView?this.editorView:new Proxy({state:this.editorState,updateState:e=>{this.editorState=e},dispatch:e=>{this.dispatchTransaction(e)},composing:!1,dragging:null,editable:!0,isDestroyed:!1},{get:(e,t)=>{if(t==="state")return this.editorState;if(t in e)return Reflect.get(e,t);throw new Error(`[tiptap error]: The editor view is not available. Cannot access view['${t}']. The editor may not be mounted yet.`)}})}get state(){return this.editorView&&(this.editorState=this.view.state),this.editorState}registerPlugin(e,t){const n=PI(t)?t(e,[...this.state.plugins]):[...this.state.plugins,e],r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}unregisterPlugin(e){if(this.isDestroyed)return;const t=this.state.plugins;let n=t;if([].concat(e).forEach(i=>{const s=typeof i=="string"?`${i}$`:i.key;n=n.filter(o=>!o.key.startsWith(s))}),t.length===n.length)return;const r=this.state.reconfigure({plugins:n});return this.view.updateState(r),r}createExtensionManager(){var e,t;const r=[...this.options.enableCoreExtensions?[rz,ZI.configure({blockSeparator:(t=(e=this.options.coreExtensionOptions)==null?void 0:e.clipboardTextSerializer)==null?void 0:t.blockSeparator}),ez,sz,oz,lz,nz,az,tz].filter(i=>typeof this.options.enableCoreExtensions=="object"?this.options.enableCoreExtensions[i.name]!==!1:!0):[],...this.options.extensions].filter(i=>["extension","node","mark"].includes(i?.type));this.extensionManager=new Jp(r,this)}createCommandManager(){this.commandManager=new Yp({editor:this})}createSchema(){this.schema=this.extensionManager.schema}createDoc(){let e;try{e=sE(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:this.options.enableContentCheck})}catch(t){if(!(t instanceof Error)||!["[tiptap error]: Invalid JSON content","[tiptap error]: Invalid HTML content"].includes(t.message))throw t;this.emit("contentError",{editor:this,error:t,disableCollaboration:()=>{"collaboration"in this.storage&&typeof this.storage.collaboration=="object"&&this.storage.collaboration&&(this.storage.collaboration.isDisabled=!0),this.options.extensions=this.options.extensions.filter(n=>n.name!=="collaboration"),this.createExtensionManager()}}),e=sE(this.options.content,this.schema,this.options.parseOptions,{errorOnInvalidContent:!1})}return e}createView(e){var t;this.editorView=new bI(e,{...this.options.editorProps,attributes:{role:"textbox",...(t=this.options.editorProps)==null?void 0:t.attributes},dispatchTransaction:this.dispatchTransaction.bind(this),state:this.editorState,markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews});const n=this.state.reconfigure({plugins:this.extensionManager.plugins});this.view.updateState(n),this.prependClass(),this.injectCSS();const r=this.view.dom;r.editor=this}createNodeViews(){this.view.isDestroyed||this.view.setProps({markViews:this.extensionManager.markViews,nodeViews:this.extensionManager.nodeViews})}prependClass(){this.view.dom.className=`tiptap ${this.view.dom.className}`}captureTransaction(e){this.isCapturingTransaction=!0,e(),this.isCapturingTransaction=!1;const t=this.capturedTransaction;return this.capturedTransaction=null,t}dispatchTransaction(e){if(this.view.isDestroyed)return;if(this.isCapturingTransaction){if(!this.capturedTransaction){this.capturedTransaction=e;return}e.steps.forEach(f=>{var h;return(h=this.capturedTransaction)==null?void 0:h.step(f)});return}const{state:t,transactions:n}=this.state.applyTransaction(e),r=!this.state.selection.eq(t.selection),i=n.includes(e),s=this.state;if(this.emit("beforeTransaction",{editor:this,transaction:e,nextState:t}),!i)return;this.view.updateState(t),this.emit("transaction",{editor:this,transaction:e,appendedTransactions:n.slice(1)}),r&&this.emit("selectionUpdate",{editor:this,transaction:e});const o=n.findLast(f=>f.getMeta("focus")||f.getMeta("blur")),l=o?.getMeta("focus"),c=o?.getMeta("blur");l&&this.emit("focus",{editor:this,event:l.event,transaction:o}),c&&this.emit("blur",{editor:this,event:c.event,transaction:o}),!(e.getMeta("preventUpdate")||!n.some(f=>f.docChanged)||s.doc.eq(t.doc))&&this.emit("update",{editor:this,transaction:e,appendedTransactions:n.slice(1)})}getAttributes(e){return HI(this.state,e)}isActive(e,t){const n=typeof e=="string"?e:null,r=typeof e=="string"?t:e;return UX(this.state,n,r)}getJSON(){return this.state.doc.toJSON()}getHTML(){return PC(this.state.doc.content,this.schema)}getText(e){const{blockSeparator:t=`

`,textSerializers:n={}}=e||{};return IX(this.state.doc,{blockSeparator:t,textSerializers:{...qI(this.schema),...n}})}get isEmpty(){return Zp(this.state.doc)}destroy(){this.emit("destroy"),this.unmount(),this.removeAllListeners()}get isDestroyed(){var e,t;return(t=(e=this.editorView)==null?void 0:e.isDestroyed)!=null?t:!0}$node(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelector(e,t))||null}$nodes(e,t){var n;return((n=this.$doc)==null?void 0:n.querySelectorAll(e,t))||null}$pos(e){const t=this.state.doc.resolve(e);return new dQ(t,this)}get $doc(){return this.$pos(0)}};function bl(e){return new Qp({find:e.find,handler:({state:t,range:n,match:r})=>{const i=it(e.getAttributes,void 0,r);if(i===!1||i===null)return null;const{tr:s}=t,o=r[r.length-1],l=r[0];if(o){const c=l.search(/\S/),f=n.from+l.indexOf(o),h=f+o.length;if(qC(n.from,n.to,t.doc).filter(y=>y.mark.type.excluded.find(S=>S===e.type&&S!==y.mark.type)).filter(y=>y.to>f).length)return null;h<n.to&&s.delete(h,n.to),f>n.from&&s.delete(n.from+c,f);const g=n.from+c+o.length;s.addMark(n.from+c,g,e.type.create(i||{})),s.removeStoredMark(e.type)}},undoable:e.undoable})}function gQ(e){return new Qp({find:e.find,handler:({state:t,range:n,match:r})=>{const i=it(e.getAttributes,void 0,r)||{},{tr:s}=t,o=n.from;let l=n.to;const c=e.type.create(i);if(r[1]){const f=r[0].lastIndexOf(r[1]);let h=o+f;h>l?h=l:l=h+r[1].length;const p=r[0][r[0].length-1];s.insertText(p,o+r[0].length-1),s.replaceWith(h,l,c)}else if(r[0]){const f=e.type.isInline?o:o-1;s.insert(f,e.type.create(i)).delete(s.mapping.map(o),s.mapping.map(l))}s.scrollIntoView()},undoable:e.undoable})}function aE(e){return new Qp({find:e.find,handler:({state:t,range:n,match:r})=>{const i=t.doc.resolve(n.from),s=it(e.getAttributes,void 0,r)||{};if(!i.node(-1).canReplaceWith(i.index(-1),i.indexAfter(-1),e.type))return null;t.tr.delete(n.from,n.to).setBlockType(n.from,n.from,e.type,s)},undoable:e.undoable})}function xl(e){return new Qp({find:e.find,handler:({state:t,range:n,match:r,chain:i})=>{const s=it(e.getAttributes,void 0,r)||{},o=t.tr.delete(n.from,n.to),c=o.doc.resolve(n.from).blockRange(),f=c&&bC(c,e.type,s);if(!f)return null;if(o.wrap(c,f),e.keepMarks&&e.editor){const{selection:p,storedMarks:g}=t,{splittableMarks:y}=e.editor.extensionManager,b=g||p.$to.parentOffset&&p.$from.marks();if(b){const S=b.filter(x=>y.includes(x.type.name));o.ensureMarks(S)}}if(e.keepAttributes){const p=e.type.name==="bulletList"||e.type.name==="orderedList"?"listItem":"taskList";i().updateAttributes(p,s).run()}const h=o.doc.resolve(n.from-1).nodeBefore;h&&h.type===e.type&&Ks(o.doc,n.from-1)&&(!e.joinPredicate||e.joinPredicate(r,h))&&o.join(n.from-1)},undoable:e.undoable})}function yQ(e,t){const{selection:n}=e,{$from:r}=n;if(n instanceof Re){const s=r.index();return r.parent.canReplaceWith(s,s+1,t)}let i=r.depth;for(;i>=0;){const s=r.index(i);if(r.node(i).contentMatchAt(s).matchType(t))return!0;i-=1}return!1}function vQ(e,t,n={}){const{state:r}=t,{doc:i,tr:s}=r,o=e;i.descendants((l,c)=>{const f=s.mapping.map(c),h=s.mapping.map(c)+l.nodeSize;let p=null;if(l.marks.forEach(y=>{if(y!==o)return!1;p=y}),!p)return;let g=!1;if(Object.keys(n).forEach(y=>{n[y]!==p.attrs[y]&&(g=!0)}),g){const y=e.type.create({...e.attrs,...n});s.removeMark(f,h,e.type),s.addMark(f,h,y)}}),s.docChanged&&t.view.dispatch(s)}var ir=class uz extends VC{constructor(){super(...arguments),this.type="node"}static create(t={}){const n=typeof t=="function"?t():t;return new uz(n)}configure(t){return super.configure(t)}extend(t){const n=typeof t=="function"?t():t;return super.extend(n)}};function Uo(e){return new QX({find:e.find,handler:({state:t,range:n,match:r,pasteEvent:i})=>{const s=it(e.getAttributes,void 0,r,i);if(s===!1||s===null)return null;const{tr:o}=t,l=r[r.length-1],c=r[0];let f=n.to;if(l){const h=c.search(/\S/),p=n.from+c.indexOf(l),g=p+l.length;if(qC(n.from,n.to,t.doc).filter(b=>b.mark.type.excluded.find(x=>x===e.type&&x!==b.mark.type)).filter(b=>b.to>p).length)return null;g<n.to&&o.delete(g,n.to),p>n.from&&o.delete(n.from+h,p),f=n.from+h+l.length,o.addMark(n.from+h,f,e.type.create(s||{})),o.removeStoredMark(e.type)}}})}var _0,lR;function bQ(){return lR||(lR=1,_0=function e(t,n){if(t===n)return!0;if(t&&n&&typeof t=="object"&&typeof n=="object"){if(t.constructor!==n.constructor)return!1;var r,i,s;if(Array.isArray(t)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(!e(t[i],n[i]))return!1;return!0}if(t instanceof Map&&n instanceof Map){if(t.size!==n.size)return!1;for(i of t.entries())if(!n.has(i[0]))return!1;for(i of t.entries())if(!e(i[1],n.get(i[0])))return!1;return!0}if(t instanceof Set&&n instanceof Set){if(t.size!==n.size)return!1;for(i of t.entries())if(!n.has(i[0]))return!1;return!0}if(ArrayBuffer.isView(t)&&ArrayBuffer.isView(n)){if(r=t.length,r!=n.length)return!1;for(i=r;i--!==0;)if(t[i]!==n[i])return!1;return!0}if(t.constructor===RegExp)return t.source===n.source&&t.flags===n.flags;if(t.valueOf!==Object.prototype.valueOf)return t.valueOf()===n.valueOf();if(t.toString!==Object.prototype.toString)return t.toString()===n.toString();if(s=Object.keys(t),r=s.length,r!==Object.keys(n).length)return!1;for(i=r;i--!==0;)if(!Object.prototype.hasOwnProperty.call(n,s[i]))return!1;for(i=r;i--!==0;){var o=s[i];if(!(o==="_owner"&&t.$$typeof)&&!e(t[o],n[o]))return!1}return!0}return t!==t&&n!==n}),_0}var xQ=bQ();const wQ=Yc(xQ);var R0={exports:{}},D0={};/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uR;function SQ(){if(uR)return D0;uR=1;var e=Wc(),t=iB();function n(f,h){return f===h&&(f!==0||1/f===1/h)||f!==f&&h!==h}var r=typeof Object.is=="function"?Object.is:n,i=t.useSyncExternalStore,s=e.useRef,o=e.useEffect,l=e.useMemo,c=e.useDebugValue;return D0.useSyncExternalStoreWithSelector=function(f,h,p,g,y){var b=s(null);if(b.current===null){var S={hasValue:!1,value:null};b.current=S}else S=b.current;b=l(function(){function C(_){if(!T){if(T=!0,k=_,_=g(_),y!==void 0&&S.hasValue){var R=S.value;if(y(R,_))return A=R}return A=_}if(R=A,r(k,_))return R;var O=g(_);return y!==void 0&&y(R,O)?(k=_,R):(k=_,A=O)}var T=!1,k,A,M=p===void 0?null:p;return[function(){return C(h())},M===null?void 0:function(){return C(M())}]},[h,p,g,y]);var x=i(f,b[0],b[1]);return o(function(){S.hasValue=!0,S.value=x},[x]),c(x),x},D0}var cR;function EQ(){return cR||(cR=1,R0.exports=SQ()),R0.exports}var cz=EQ();const CQ=Yc(cz);var kQ=(...e)=>t=>{e.forEach(n=>{typeof n=="function"?n(t):n&&(n.current=t)})},TQ=({contentComponent:e})=>{const t=sB.useSyncExternalStore(e.subscribe,e.getSnapshot,e.getServerSnapshot);return w.jsx(w.Fragment,{children:Object.values(t)})};function AQ(){const e=new Set;let t={};return{subscribe(n){return e.add(n),()=>{e.delete(n)}},getSnapshot(){return t},getServerSnapshot(){return t},setRenderer(n,r){t={...t,[n]:r4.createPortal(r.reactElement,r.element,n)},e.forEach(i=>i())},removeRenderer(n){const r={...t};delete r[n],t=r,e.forEach(i=>i())}}}var MQ=class extends Pe.Component{constructor(e){var t;super(e),this.editorContentRef=Pe.createRef(),this.initialized=!1,this.state={hasContentComponentInitialized:!!((t=e.editor)!=null&&t.contentComponent)}}componentDidMount(){this.init()}componentDidUpdate(){this.init()}init(){const e=this.props.editor;if(e&&!e.isDestroyed&&e.options.element){if(e.contentComponent)return;const t=this.editorContentRef.current;t.append(e.view.dom),e.setOptions({element:t}),e.contentComponent=AQ(),this.state.hasContentComponentInitialized||(this.unsubscribeToContentComponent=e.contentComponent.subscribe(()=>{this.setState(n=>n.hasContentComponentInitialized?n:{hasContentComponentInitialized:!0}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent()})),e.createNodeViews(),this.initialized=!0}}componentWillUnmount(){var e;const t=this.props.editor;if(t){this.initialized=!1,t.isDestroyed||t.view.setProps({nodeViews:{}}),this.unsubscribeToContentComponent&&this.unsubscribeToContentComponent(),t.contentComponent=null;try{if(!((e=t.view.dom)!=null&&e.firstChild))return;const n=document.createElement("div");n.append(t.view.dom),t.setOptions({element:n})}catch{}}}render(){const{editor:e,innerRef:t,...n}=this.props;return w.jsxs(w.Fragment,{children:[w.jsx("div",{ref:kQ(t,this.editorContentRef),...n}),e?.contentComponent&&w.jsx(TQ,{contentComponent:e.contentComponent})]})}},NQ=P.forwardRef((e,t)=>{const n=Pe.useMemo(()=>Math.floor(Math.random()*4294967295).toString(),[e.editor]);return Pe.createElement(MQ,{key:n,innerRef:t,...e})}),fR=Pe.memo(NQ),_Q=typeof window<"u"?P.useLayoutEffect:P.useEffect,RQ=class{constructor(e){this.transactionNumber=0,this.lastTransactionNumber=0,this.subscribers=new Set,this.editor=e,this.lastSnapshot={editor:e,transactionNumber:0},this.getSnapshot=this.getSnapshot.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.watch=this.watch.bind(this),this.subscribe=this.subscribe.bind(this)}getSnapshot(){return this.transactionNumber===this.lastTransactionNumber?this.lastSnapshot:(this.lastTransactionNumber=this.transactionNumber,this.lastSnapshot={editor:this.editor,transactionNumber:this.transactionNumber},this.lastSnapshot)}getServerSnapshot(){return{editor:null,transactionNumber:0}}subscribe(e){return this.subscribers.add(e),()=>{this.subscribers.delete(e)}}watch(e){if(this.editor=e,this.editor){const t=()=>{this.transactionNumber+=1,this.subscribers.forEach(r=>r())},n=this.editor;return n.on("transaction",t),()=>{n.off("transaction",t)}}}};function DQ(e){var t;const[n]=P.useState(()=>new RQ(e.editor)),r=cz.useSyncExternalStoreWithSelector(n.subscribe,n.getSnapshot,n.getServerSnapshot,e.selector,(t=e.equalityFn)!=null?t:wQ);return _Q(()=>n.watch(e.editor),[e.editor,n]),P.useDebugValue(r),r}var OQ=!1,lE=typeof window>"u",jQ=lE||!!(typeof window<"u"&&window.next),LQ=class fz{constructor(t){this.editor=null,this.subscriptions=new Set,this.isComponentMounted=!1,this.previousDeps=null,this.instanceId="",this.options=t,this.subscriptions=new Set,this.setEditor(this.getInitialEditor()),this.scheduleDestroy(),this.getEditor=this.getEditor.bind(this),this.getServerSnapshot=this.getServerSnapshot.bind(this),this.subscribe=this.subscribe.bind(this),this.refreshEditorInstance=this.refreshEditorInstance.bind(this),this.scheduleDestroy=this.scheduleDestroy.bind(this),this.onRender=this.onRender.bind(this),this.createEditor=this.createEditor.bind(this)}setEditor(t){this.editor=t,this.instanceId=Math.random().toString(36).slice(2,9),this.subscriptions.forEach(n=>n())}getInitialEditor(){return this.options.current.immediatelyRender===void 0?lE||jQ?null:this.createEditor():(this.options.current.immediatelyRender,this.options.current.immediatelyRender?this.createEditor():null)}createEditor(){const t={...this.options.current,onBeforeCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onBeforeCreate)==null?void 0:s.call(i,...r)},onBlur:(...r)=>{var i,s;return(s=(i=this.options.current).onBlur)==null?void 0:s.call(i,...r)},onCreate:(...r)=>{var i,s;return(s=(i=this.options.current).onCreate)==null?void 0:s.call(i,...r)},onDestroy:(...r)=>{var i,s;return(s=(i=this.options.current).onDestroy)==null?void 0:s.call(i,...r)},onFocus:(...r)=>{var i,s;return(s=(i=this.options.current).onFocus)==null?void 0:s.call(i,...r)},onSelectionUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onSelectionUpdate)==null?void 0:s.call(i,...r)},onTransaction:(...r)=>{var i,s;return(s=(i=this.options.current).onTransaction)==null?void 0:s.call(i,...r)},onUpdate:(...r)=>{var i,s;return(s=(i=this.options.current).onUpdate)==null?void 0:s.call(i,...r)},onContentError:(...r)=>{var i,s;return(s=(i=this.options.current).onContentError)==null?void 0:s.call(i,...r)},onDrop:(...r)=>{var i,s;return(s=(i=this.options.current).onDrop)==null?void 0:s.call(i,...r)},onPaste:(...r)=>{var i,s;return(s=(i=this.options.current).onPaste)==null?void 0:s.call(i,...r)},onDelete:(...r)=>{var i,s;return(s=(i=this.options.current).onDelete)==null?void 0:s.call(i,...r)}};return new mQ(t)}getEditor(){return this.editor}getServerSnapshot(){return null}subscribe(t){return this.subscriptions.add(t),()=>{this.subscriptions.delete(t)}}static compareOptions(t,n){return Object.keys(t).every(r=>["onCreate","onBeforeCreate","onDestroy","onUpdate","onTransaction","onFocus","onBlur","onSelectionUpdate","onContentError","onDrop","onPaste"].includes(r)?!0:r==="extensions"&&t.extensions&&n.extensions?t.extensions.length!==n.extensions.length?!1:t.extensions.every((i,s)=>{var o;return i===((o=n.extensions)==null?void 0:o[s])}):t[r]===n[r])}onRender(t){return()=>(this.isComponentMounted=!0,clearTimeout(this.scheduledDestructionTimeout),this.editor&&!this.editor.isDestroyed&&t.length===0?fz.compareOptions(this.options.current,this.editor.options)||this.editor.setOptions({...this.options.current,editable:this.editor.isEditable}):this.refreshEditorInstance(t),()=>{this.isComponentMounted=!1,this.scheduleDestroy()})}refreshEditorInstance(t){if(this.editor&&!this.editor.isDestroyed){if(this.previousDeps===null){this.previousDeps=t;return}if(this.previousDeps.length===t.length&&this.previousDeps.every((r,i)=>r===t[i]))return}this.editor&&!this.editor.isDestroyed&&this.editor.destroy(),this.setEditor(this.createEditor()),this.previousDeps=t}scheduleDestroy(){const t=this.instanceId,n=this.editor;this.scheduledDestructionTimeout=setTimeout(()=>{if(this.isComponentMounted&&this.instanceId===t){n&&n.setOptions(this.options.current);return}n&&!n.isDestroyed&&(n.destroy(),this.instanceId===t&&this.setEditor(null))},1)}};function PQ(e={},t=[]){const n=P.useRef(e);n.current=e;const[r]=P.useState(()=>new LQ(n)),i=sB.useSyncExternalStore(r.subscribe,r.getEditor,r.getServerSnapshot);return P.useDebugValue(i),P.useEffect(r.onRender(t)),DQ({editor:i,selector:({transactionNumber:s})=>e.shouldRerenderOnTransaction===!1||e.shouldRerenderOnTransaction===void 0?null:e.immediatelyRender&&s===0?0:s+1}),i}var BQ=P.createContext({editor:null});BQ.Consumer;var IQ=P.createContext({onDragStart:()=>{},nodeViewContentChildren:void 0,nodeViewContentRef:()=>{}}),zQ=()=>P.useContext(IQ);Pe.forwardRef((e,t)=>{const{onDragStart:n}=zQ(),r=e.as||"div";return w.jsx(r,{...e,ref:t,"data-node-view-wrapper":"",onDragStart:n,style:{whiteSpace:"normal",...e.style}})});Pe.createContext({markViewContentRef:()=>{}});var qh=(e,t)=>{if(e==="slot")return 0;if(e instanceof Function)return e(t);const{children:n,...r}=t??{};if(e==="svg")throw new Error("SVG elements are not supported in the JSX syntax, use the array syntax instead");return[e,r,n]},qQ=/^\s*>\s$/,VQ=ir.create({name:"blockquote",addOptions(){return{HTMLAttributes:{}}},content:"block+",group:"block",defining:!0,parseHTML(){return[{tag:"blockquote"}]},renderHTML({HTMLAttributes:e}){return qh("blockquote",{...Ht(this.options.HTMLAttributes,e),children:qh("slot",{})})},addCommands(){return{setBlockquote:()=>({commands:e})=>e.wrapIn(this.name),toggleBlockquote:()=>({commands:e})=>e.toggleWrap(this.name),unsetBlockquote:()=>({commands:e})=>e.lift(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-b":()=>this.editor.commands.toggleBlockquote()}},addInputRules(){return[xl({find:qQ,type:this.type})]}}),HQ=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))$/,FQ=/(?:^|\s)(\*\*(?!\s+\*\*)((?:[^*]+))\*\*(?!\s+\*\*))/g,UQ=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))$/,$Q=/(?:^|\s)(__(?!\s+__)((?:[^_]+))__(?!\s+__))/g,GQ=ea.create({name:"bold",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"strong"},{tag:"b",getAttrs:e=>e.style.fontWeight!=="normal"&&null},{style:"font-weight=400",clearMark:e=>e.type.name===this.name},{style:"font-weight",getAttrs:e=>/^(bold(er)?|[5-9]\d{2,})$/.test(e)&&null}]},renderHTML({HTMLAttributes:e}){return qh("strong",{...Ht(this.options.HTMLAttributes,e),children:qh("slot",{})})},addCommands(){return{setBold:()=>({commands:e})=>e.setMark(this.name),toggleBold:()=>({commands:e})=>e.toggleMark(this.name),unsetBold:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-b":()=>this.editor.commands.toggleBold(),"Mod-B":()=>this.editor.commands.toggleBold()}},addInputRules(){return[bl({find:HQ,type:this.type}),bl({find:UQ,type:this.type})]},addPasteRules(){return[Uo({find:FQ,type:this.type}),Uo({find:$Q,type:this.type})]}}),KQ=/(^|[^`])`([^`]+)`(?!`)$/,YQ=/(^|[^`])`([^`]+)`(?!`)/g,WQ=ea.create({name:"code",addOptions(){return{HTMLAttributes:{}}},excludes:"_",code:!0,exitable:!0,parseHTML(){return[{tag:"code"}]},renderHTML({HTMLAttributes:e}){return["code",Ht(this.options.HTMLAttributes,e),0]},addCommands(){return{setCode:()=>({commands:e})=>e.setMark(this.name),toggleCode:()=>({commands:e})=>e.toggleMark(this.name),unsetCode:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-e":()=>this.editor.commands.toggleCode()}},addInputRules(){return[bl({find:KQ,type:this.type})]},addPasteRules(){return[Uo({find:YQ,type:this.type})]}}),XQ=/^```([a-z]+)?[\s\n]$/,ZQ=/^~~~([a-z]+)?[\s\n]$/,QQ=ir.create({name:"codeBlock",addOptions(){return{languageClassPrefix:"language-",exitOnTripleEnter:!0,exitOnArrowDown:!0,defaultLanguage:null,enableTabIndentation:!1,tabSize:4,HTMLAttributes:{}}},content:"text*",marks:"",group:"block",code:!0,defining:!0,addAttributes(){return{language:{default:this.options.defaultLanguage,parseHTML:e=>{var t;const{languageClassPrefix:n}=this.options,s=[...((t=e.firstElementChild)==null?void 0:t.classList)||[]].filter(o=>o.startsWith(n)).map(o=>o.replace(n,""))[0];return s||null},rendered:!1}}},parseHTML(){return[{tag:"pre",preserveWhitespace:"full"}]},renderHTML({node:e,HTMLAttributes:t}){return["pre",Ht(this.options.HTMLAttributes,t),["code",{class:e.attrs.language?this.options.languageClassPrefix+e.attrs.language:null},0]]},addCommands(){return{setCodeBlock:e=>({commands:t})=>t.setNode(this.name,e),toggleCodeBlock:e=>({commands:t})=>t.toggleNode(this.name,"paragraph",e)}},addKeyboardShortcuts(){return{"Mod-Alt-c":()=>this.editor.commands.toggleCodeBlock(),Backspace:()=>{const{empty:e,$anchor:t}=this.editor.state.selection,n=t.pos===1;return!e||t.parent.type.name!==this.name?!1:n||!t.parent.textContent.length?this.editor.commands.clearNodes():!1},Tab:({editor:e})=>{if(!this.options.enableTabIndentation)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:i}=n;if(r.parent.type!==this.type)return!1;const s=" ".repeat(this.options.tabSize);return i?e.commands.insertContent(s):e.commands.command(({tr:o})=>{const{from:l,to:c}=n,p=t.doc.textBetween(l,c,`
`,`
`).split(`
`).map(g=>s+g).join(`
`);return o.replaceWith(l,c,t.schema.text(p)),!0})},"Shift-Tab":({editor:e})=>{if(!this.options.enableTabIndentation)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:i}=n;return r.parent.type!==this.type?!1:i?e.commands.command(({tr:s})=>{var o;const{pos:l}=r,c=r.start(),f=r.end(),p=t.doc.textBetween(c,f,`
`,`
`).split(`
`);let g=0,y=0;const b=l-c;for(let A=0;A<p.length;A+=1){if(y+p[A].length>=b){g=A;break}y+=p[A].length+1}const x=((o=p[g].match(/^ */))==null?void 0:o[0])||"",C=Math.min(x.length,this.options.tabSize);if(C===0)return!0;let T=c;for(let A=0;A<g;A+=1)T+=p[A].length+1;return s.delete(T,T+C),l-T<=C&&s.setSelection(qe.create(s.doc,T)),!0}):e.commands.command(({tr:s})=>{const{from:o,to:l}=n,h=t.doc.textBetween(o,l,`
`,`
`).split(`
`).map(p=>{var g;const y=((g=p.match(/^ */))==null?void 0:g[0])||"",b=Math.min(y.length,this.options.tabSize);return p.slice(b)}).join(`
`);return s.replaceWith(o,l,t.schema.text(h)),!0})},Enter:({editor:e})=>{if(!this.options.exitOnTripleEnter)return!1;const{state:t}=e,{selection:n}=t,{$from:r,empty:i}=n;if(!i||r.parent.type!==this.type)return!1;const s=r.parentOffset===r.parent.nodeSize-2,o=r.parent.textContent.endsWith(`

`);return!s||!o?!1:e.chain().command(({tr:l})=>(l.delete(r.pos-2,r.pos),!0)).exitCode().run()},ArrowDown:({editor:e})=>{if(!this.options.exitOnArrowDown)return!1;const{state:t}=e,{selection:n,doc:r}=t,{$from:i,empty:s}=n;if(!s||i.parent.type!==this.type||!(i.parentOffset===i.parent.nodeSize-2))return!1;const l=i.after();return l===void 0?!1:r.nodeAt(l)?e.commands.command(({tr:f})=>(f.setSelection(Ue.near(r.resolve(l))),!0)):e.commands.exitCode()}}},addInputRules(){return[aE({find:XQ,type:this.type,getAttributes:e=>({language:e[1]})}),aE({find:ZQ,type:this.type,getAttributes:e=>({language:e[1]})})]},addProseMirrorPlugins(){return[new Rt({key:new nn("codeBlockVSCodeHandler"),props:{handlePaste:(e,t)=>{if(!t.clipboardData||this.editor.isActive(this.type.name))return!1;const n=t.clipboardData.getData("text/plain"),r=t.clipboardData.getData("vscode-editor-data"),i=r?JSON.parse(r):void 0,s=i?.mode;if(!n||!s)return!1;const{tr:o,schema:l}=e.state,c=l.text(n.replace(/\r\n?/g,`
`));return o.replaceSelectionWith(this.type.create({language:s},c)),o.selection.$from.parent.type!==this.type&&o.setSelection(qe.near(o.doc.resolve(Math.max(0,o.selection.from-2)))),o.setMeta("paste",!0),e.dispatch(o),!0}}})]}}),JQ=ir.create({name:"doc",topNode:!0,content:"block+"}),eJ=ir.create({name:"hardBreak",addOptions(){return{keepMarks:!0,HTMLAttributes:{}}},inline:!0,group:"inline",selectable:!1,linebreakReplacement:!0,parseHTML(){return[{tag:"br"}]},renderHTML({HTMLAttributes:e}){return["br",Ht(this.options.HTMLAttributes,e)]},renderText(){return`
`},addCommands(){return{setHardBreak:()=>({commands:e,chain:t,state:n,editor:r})=>e.first([()=>e.exitCode(),()=>e.command(()=>{const{selection:i,storedMarks:s}=n;if(i.$from.parent.type.spec.isolating)return!1;const{keepMarks:o}=this.options,{splittableMarks:l}=r.extensionManager,c=s||i.$to.parentOffset&&i.$from.marks();return t().insertContent({type:this.name}).command(({tr:f,dispatch:h})=>{if(h&&c&&o){const p=c.filter(g=>l.includes(g.type.name));f.ensureMarks(p)}return!0}).run()})])}},addKeyboardShortcuts(){return{"Mod-Enter":()=>this.editor.commands.setHardBreak(),"Shift-Enter":()=>this.editor.commands.setHardBreak()}}}),dz=ir.create({name:"heading",addOptions(){return{levels:[1,2,3,4,5,6],HTMLAttributes:{}}},content:"inline*",group:"block",defining:!0,addAttributes(){return{level:{default:1,rendered:!1}}},parseHTML(){return this.options.levels.map(e=>({tag:`h${e}`,attrs:{level:e}}))},renderHTML({node:e,HTMLAttributes:t}){return[`h${this.options.levels.includes(e.attrs.level)?e.attrs.level:this.options.levels[0]}`,Ht(this.options.HTMLAttributes,t),0]},addCommands(){return{setHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.setNode(this.name,e):!1,toggleHeading:e=>({commands:t})=>this.options.levels.includes(e.level)?t.toggleNode(this.name,"paragraph",e):!1}},addKeyboardShortcuts(){return this.options.levels.reduce((e,t)=>({...e,[`Mod-Alt-${t}`]:()=>this.editor.commands.toggleHeading({level:t})}),{})},addInputRules(){return this.options.levels.map(e=>aE({find:new RegExp(`^(#{${Math.min(...this.options.levels)},${e}})\\s$`),type:this.type,getAttributes:{level:e}}))}}),tJ=dz,nJ=ir.create({name:"horizontalRule",addOptions(){return{HTMLAttributes:{}}},group:"block",parseHTML(){return[{tag:"hr"}]},renderHTML({HTMLAttributes:e}){return["hr",Ht(this.options.HTMLAttributes,e)]},addCommands(){return{setHorizontalRule:()=>({chain:e,state:t})=>{if(!yQ(t,t.schema.nodes[this.name]))return!1;const{selection:n}=t,{$to:r}=n,i=e();return $I(n)?i.insertContentAt(r.pos,{type:this.name}):i.insertContent({type:this.name}),i.command(({tr:s,dispatch:o})=>{var l;if(o){const{$to:c}=s.selection,f=c.end();if(c.nodeAfter)c.nodeAfter.isTextblock?s.setSelection(qe.create(s.doc,c.pos+1)):c.nodeAfter.isBlock?s.setSelection(Re.create(s.doc,c.pos)):s.setSelection(qe.create(s.doc,c.pos));else{const h=(l=c.parent.type.contentMatch.defaultType)==null?void 0:l.create();h&&(s.insert(f,h),s.setSelection(qe.create(s.doc,f+1)))}s.scrollIntoView()}return!0}).run()}}},addInputRules(){return[gQ({find:/^(?:---|—-|___\s|\*\*\*\s)$/,type:this.type})]}}),rJ=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))$/,iJ=/(?:^|\s)(\*(?!\s+\*)((?:[^*]+))\*(?!\s+\*))/g,sJ=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))$/,oJ=/(?:^|\s)(_(?!\s+_)((?:[^_]+))_(?!\s+_))/g,aJ=ea.create({name:"italic",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"em"},{tag:"i",getAttrs:e=>e.style.fontStyle!=="normal"&&null},{style:"font-style=normal",clearMark:e=>e.type.name===this.name},{style:"font-style=italic"}]},renderHTML({HTMLAttributes:e}){return["em",Ht(this.options.HTMLAttributes,e),0]},addCommands(){return{setItalic:()=>({commands:e})=>e.setMark(this.name),toggleItalic:()=>({commands:e})=>e.toggleMark(this.name),unsetItalic:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-i":()=>this.editor.commands.toggleItalic(),"Mod-I":()=>this.editor.commands.toggleItalic()}},addInputRules(){return[bl({find:rJ,type:this.type}),bl({find:sJ,type:this.type})]},addPasteRules(){return[Uo({find:iJ,type:this.type}),Uo({find:oJ,type:this.type})]}});const lJ="aaa1rp3bb0ott3vie4c1le2ogado5udhabi7c0ademy5centure6ountant0s9o1tor4d0s1ult4e0g1ro2tna4f0l1rica5g0akhan5ency5i0g1rbus3force5tel5kdn3l0ibaba4pay4lfinanz6state5y2sace3tom5m0azon4ericanexpress7family11x2fam3ica3sterdam8nalytics7droid5quan4z2o0l2partments8p0le4q0uarelle8r0ab1mco4chi3my2pa2t0e3s0da2ia2sociates9t0hleta5torney7u0ction5di0ble3o3spost5thor3o0s4w0s2x0a2z0ure5ba0by2idu3namex4d1k2r0celona5laycard4s5efoot5gains6seball5ketball8uhaus5yern5b0c1t1va3cg1n2d1e0ats2uty4er2rlin4st0buy5t2f1g1h0arti5i0ble3d1ke2ng0o3o1z2j1lack0friday9ockbuster8g1omberg7ue3m0s1w2n0pparibas9o0ats3ehringer8fa2m1nd2o0k0ing5sch2tik2on4t1utique6x2r0adesco6idgestone9oadway5ker3ther5ussels7s1t1uild0ers6siness6y1zz3v1w1y1z0h3ca0b1fe2l0l1vinklein9m0era3p2non3petown5ital0one8r0avan4ds2e0er0s4s2sa1e1h1ino4t0ering5holic7ba1n1re3c1d1enter4o1rn3f0a1d2g1h0anel2nel4rity4se2t2eap3intai5ristmas6ome4urch5i0priani6rcle4sco3tadel4i0c2y3k1l0aims4eaning6ick2nic1que6othing5ud3ub0med6m1n1o0ach3des3ffee4llege4ogne5m0mbank4unity6pany2re3uter5sec4ndos3struction8ulting7tact3ractors9oking4l1p2rsica5untry4pon0s4rses6pa2r0edit0card4union9icket5own3s1uise0s6u0isinella9v1w1x1y0mru3ou3z2dad1nce3ta1e1ing3sun4y2clk3ds2e0al0er2s3gree4livery5l1oitte5ta3mocrat6ntal2ist5si0gn4v2hl2iamonds6et2gital5rect0ory7scount3ver5h2y2j1k1m1np2o0cs1tor4g1mains5t1wnload7rive4tv2ubai3nlop4pont4rban5vag2r2z2earth3t2c0o2deka3u0cation8e1g1mail3erck5nergy4gineer0ing9terprises10pson4quipment8r0icsson6ni3s0q1tate5t1u0rovision8s2vents5xchange6pert3osed4ress5traspace10fage2il1rwinds6th3mily4n0s2rm0ers5shion4t3edex3edback6rrari3ero6i0delity5o2lm2nal1nce1ial7re0stone6mdale6sh0ing5t0ness6j1k1lickr3ghts4r2orist4wers5y2m1o0o0d1tball6rd1ex2sale4um3undation8x2r0ee1senius7l1ogans4ntier7tr2ujitsu5n0d2rniture7tbol5yi3ga0l0lery3o1up4me0s3p1rden4y2b0iz3d0n2e0a1nt0ing5orge5f1g0ee3h1i0ft0s3ves2ing5l0ass3e1obal2o4m0ail3bh2o1x2n1odaddy5ld0point6f2o0dyear5g0le4p1t1v2p1q1r0ainger5phics5tis4een3ipe3ocery4up4s1t1u0cci3ge2ide2tars5ru3w1y2hair2mburg5ngout5us3bo2dfc0bank7ealth0care8lp1sinki6re1mes5iphop4samitsu7tachi5v2k0t2m1n1ockey4ldings5iday5medepot5goods5s0ense7nda3rse3spital5t0ing5t0els3mail5use3w2r1sbc3t1u0ghes5yatt3undai7ibm2cbc2e1u2d1e0ee3fm2kano4l1m0amat4db2mo0bilien9n0c1dustries8finiti5o2g1k1stitute6urance4e4t0ernational10uit4vestments10o1piranga7q1r0ish4s0maili5t0anbul7t0au2v3jaguar4va3cb2e0ep2tzt3welry6io2ll2m0p2nj2o0bs1urg4t1y2p0morgan6rs3uegos4niper7kaufen5ddi3e0rryhotels6properties14fh2g1h1i0a1ds2m1ndle4tchen5wi3m1n1oeln3matsu5sher5p0mg2n2r0d1ed3uokgroup8w1y0oto4z2la0caixa5mborghini8er3nd0rover6xess5salle5t0ino3robe5w0yer5b1c1ds2ease3clerc5frak4gal2o2xus4gbt3i0dl2fe0insurance9style7ghting6ke2lly3mited4o2ncoln4k2ve1ing5k1lc1p2oan0s3cker3us3l1ndon4tte1o3ve3pl0financial11r1s1t0d0a3u0ndbeck6xe1ury5v1y2ma0drid4if1son4keup4n0agement7go3p1rket0ing3s4riott5shalls7ttel5ba2c0kinsey7d1e0d0ia3et2lbourne7me1orial6n0u2rckmsd7g1h1iami3crosoft7l1ni1t2t0subishi9k1l0b1s2m0a2n1o0bi0le4da2e1i1m1nash3ey2ster5rmon3tgage6scow4to0rcycles9v0ie4p1q1r1s0d2t0n1r2u0seum3ic4v1w1x1y1z2na0b1goya4me2vy3ba2c1e0c1t0bank4flix4work5ustar5w0s2xt0direct7us4f0l2g0o2hk2i0co2ke1on3nja3ssan1y5l1o0kia3rton4w0ruz3tv4p1r0a1w2tt2u1yc2z2obi1server7ffice5kinawa6layan0group9lo3m0ega4ne1g1l0ine5oo2pen3racle3nge4g0anic5igins6saka4tsuka4t2vh3pa0ge2nasonic7ris2s1tners4s1y3y2ccw3e0t2f0izer5g1h0armacy6d1ilips5one2to0graphy6s4ysio5ics1tet2ures6d1n0g1k2oneer5zza4k1l0ace2y0station9umbing5s3m1n0c2ohl2ker3litie5rn2st3r0axi3ess3ime3o0d0uctions8f1gressive8mo2perties3y5tection8u0dential9s1t1ub2w0c2y2qa1pon3uebec3st5racing4dio4e0ad1lestate6tor2y4cipes5d0stone5umbrella9hab3ise0n3t2liance6n0t0als5pair3ort3ublican8st0aurant8view0s5xroth6ich0ardli6oh3l1o1p2o0cks3deo3gers4om3s0vp3u0gby3hr2n2w0e2yukyu6sa0arland6fe0ty4kura4le1on3msclub4ung5ndvik0coromant12ofi4p1rl2s1ve2xo3b0i1s2c0b1haeffler7midt4olarships8ol3ule3warz5ience5ot3d1e0arch3t2cure1ity6ek2lect4ner3rvices6ven3w1x0y3fr2g1h0angrila6rp3ell3ia1ksha5oes2p0ping5uji3w3i0lk2na1gles5te3j1k0i0n2y0pe4l0ing4m0art3ile4n0cf3o0ccer3ial4ftbank4ware6hu2lar2utions7ng1y2y2pa0ce3ort2t3r0l2s1t0ada2ples4r1tebank4farm7c0group6ockholm6rage3e3ream4udio2y3yle4u0cks3pplies3y2ort5rf1gery5zuki5v1watch4iss4x1y0dney4stems6z2tab1ipei4lk2obao4rget4tamotors6r2too4x0i3c0i2d0k2eam2ch0nology8l1masek5nnis4va3f1g1h0d1eater2re6iaa2ckets5enda4ps2res2ol4j0maxx4x2k0maxx5l1m0all4n1o0day3kyo3ols3p1ray3shiba5tal3urs3wn2yota3s3r0ade1ing4ining5vel0ers0insurance16ust3v2t1ube2i1nes3shu4v0s2w1z2ua1bank3s2g1k1nicom3versity8o2ol2ps2s1y1z2va0cations7na1guard7c1e0gas3ntures6risign5mögensberater2ung14sicherung10t2g1i0ajes4deo3g1king4llas4n1p1rgin4sa1ion4va1o3laanderen9n1odka3lvo3te1ing3o2yage5u2wales2mart4ter4ng0gou5tch0es6eather0channel12bcam3er2site5d0ding5ibo2r3f1hoswho6ien2ki2lliamhill9n0dows4e1ners6me2olterskluwer11odside6rk0s2ld3w2s1tc1f3xbox3erox4ihuan4n2xx2yz3yachts4hoo3maxun5ndex5e1odobashi7ga2kohama6u0tube6t1un3za0ppos4ra3ero3ip2m1one3uerich6w2",uJ="ελ1υ2бг1ел3дети4ею2католик6ом3мкд2он1сква6онлайн5рг3рус2ф2сайт3рб3укр3қаз3հայ3ישראל5קום3ابوظبي5رامكو5لاردن4بحرين5جزائر5سعودية6عليان5مغرب5مارات5یران5بارت2زار4يتك3ھارت5تونس4سودان3رية5شبكة4عراق2ب2مان4فلسطين6قطر3كاثوليك6وم3مصر2ليسيا5وريتانيا7قع4همراه5پاکستان7ڀارت4कॉम3नेट3भारत0म्3ोत5संगठन5বাংলা5ভারত2ৰত4ਭਾਰਤ4ભારત4ଭାରତ4இந்தியா6லங்கை6சிங்கப்பூர்11భారత్5ಭಾರತ4ഭാരതം5ලංකා4คอม3ไทย3ລາວ3გე2みんな3アマゾン4クラウド4グーグル4コム2ストア3セール3ファッション6ポイント4世界2中信1国1國1文网3亚马逊3企业2佛山2信息2健康2八卦2公司1益2台湾1灣2商城1店1标2嘉里0大酒店5在线2大拿2天主教3娱乐2家電2广东2微博2慈善2我爱你3手机2招聘2政务1府2新加坡2闻2时尚2書籍2机构2淡马锡3游戏2澳門2点看2移动2组织机构4网址1店1站1络2联通2谷歌2购物2通販2集团2電訊盈科4飞利浦3食品2餐厅2香格里拉3港2닷넷1컴2삼성2한국2",uE="numeric",cE="ascii",fE="alpha",cc="asciinumeric",Wu="alphanumeric",dE="domain",hz="emoji",cJ="scheme",fJ="slashscheme",O0="whitespace";function dJ(e,t){return e in t||(t[e]=[]),t[e]}function Mo(e,t,n){t[uE]&&(t[cc]=!0,t[Wu]=!0),t[cE]&&(t[cc]=!0,t[fE]=!0),t[cc]&&(t[Wu]=!0),t[fE]&&(t[Wu]=!0),t[Wu]&&(t[dE]=!0),t[hz]&&(t[dE]=!0);for(const r in t){const i=dJ(r,n);i.indexOf(e)<0&&i.push(e)}}function hJ(e,t){const n={};for(const r in t)t[r].indexOf(e)>=0&&(n[r]=!0);return n}function Bn(e=null){this.j={},this.jr=[],this.jd=null,this.t=e}Bn.groups={};Bn.prototype={accepts(){return!!this.t},go(e){const t=this,n=t.j[e];if(n)return n;for(let r=0;r<t.jr.length;r++){const i=t.jr[r][0],s=t.jr[r][1];if(s&&i.test(e))return s}return t.jd},has(e,t=!1){return t?e in this.j:!!this.go(e)},ta(e,t,n,r){for(let i=0;i<e.length;i++)this.tt(e[i],t,n,r)},tr(e,t,n,r){r=r||Bn.groups;let i;return t&&t.j?i=t:(i=new Bn(t),n&&r&&Mo(t,n,r)),this.jr.push([e,i]),i},ts(e,t,n,r){let i=this;const s=e.length;if(!s)return i;for(let o=0;o<s-1;o++)i=i.tt(e[o]);return i.tt(e[s-1],t,n,r)},tt(e,t,n,r){r=r||Bn.groups;const i=this;if(t&&t.j)return i.j[e]=t,t;const s=t;let o,l=i.go(e);if(l?(o=new Bn,Object.assign(o.j,l.j),o.jr.push.apply(o.jr,l.jr),o.jd=l.jd,o.t=l.t):o=new Bn,s){if(r)if(o.t&&typeof o.t=="string"){const c=Object.assign(hJ(o.t,r),n);Mo(s,c,r)}else n&&Mo(s,n,r);o.t=s}return i.j[e]=o,o}};const $e=(e,t,n,r,i)=>e.ta(t,n,r,i),Mt=(e,t,n,r,i)=>e.tr(t,n,r,i),dR=(e,t,n,r,i)=>e.ts(t,n,r,i),me=(e,t,n,r,i)=>e.tt(t,n,r,i),Di="WORD",hE="UWORD",pz="ASCIINUMERICAL",mz="ALPHANUMERICAL",Lc="LOCALHOST",pE="TLD",mE="UTLD",ch="SCHEME",Ja="SLASH_SCHEME",FC="NUM",gE="WS",UC="NL",fc="OPENBRACE",dc="CLOSEBRACE",Vh="OPENBRACKET",Hh="CLOSEBRACKET",Fh="OPENPAREN",Uh="CLOSEPAREN",$h="OPENANGLEBRACKET",Gh="CLOSEANGLEBRACKET",Kh="FULLWIDTHLEFTPAREN",Yh="FULLWIDTHRIGHTPAREN",Wh="LEFTCORNERBRACKET",Xh="RIGHTCORNERBRACKET",Zh="LEFTWHITECORNERBRACKET",Qh="RIGHTWHITECORNERBRACKET",Jh="FULLWIDTHLESSTHAN",ep="FULLWIDTHGREATERTHAN",tp="AMPERSAND",np="APOSTROPHE",rp="ASTERISK",ks="AT",ip="BACKSLASH",sp="BACKTICK",op="CARET",Ms="COLON",$C="COMMA",ap="DOLLAR",Yr="DOT",lp="EQUALS",GC="EXCLAMATION",yr="HYPHEN",hc="PERCENT",up="PIPE",cp="PLUS",fp="POUND",pc="QUERY",KC="QUOTE",gz="FULLWIDTHMIDDLEDOT",YC="SEMI",Wr="SLASH",mc="TILDE",dp="UNDERSCORE",yz="EMOJI",hp="SYM";var vz=Object.freeze({__proto__:null,ALPHANUMERICAL:mz,AMPERSAND:tp,APOSTROPHE:np,ASCIINUMERICAL:pz,ASTERISK:rp,AT:ks,BACKSLASH:ip,BACKTICK:sp,CARET:op,CLOSEANGLEBRACKET:Gh,CLOSEBRACE:dc,CLOSEBRACKET:Hh,CLOSEPAREN:Uh,COLON:Ms,COMMA:$C,DOLLAR:ap,DOT:Yr,EMOJI:yz,EQUALS:lp,EXCLAMATION:GC,FULLWIDTHGREATERTHAN:ep,FULLWIDTHLEFTPAREN:Kh,FULLWIDTHLESSTHAN:Jh,FULLWIDTHMIDDLEDOT:gz,FULLWIDTHRIGHTPAREN:Yh,HYPHEN:yr,LEFTCORNERBRACKET:Wh,LEFTWHITECORNERBRACKET:Zh,LOCALHOST:Lc,NL:UC,NUM:FC,OPENANGLEBRACKET:$h,OPENBRACE:fc,OPENBRACKET:Vh,OPENPAREN:Fh,PERCENT:hc,PIPE:up,PLUS:cp,POUND:fp,QUERY:pc,QUOTE:KC,RIGHTCORNERBRACKET:Xh,RIGHTWHITECORNERBRACKET:Qh,SCHEME:ch,SEMI:YC,SLASH:Wr,SLASH_SCHEME:Ja,SYM:hp,TILDE:mc,TLD:pE,UNDERSCORE:dp,UTLD:mE,UWORD:hE,WORD:Di,WS:gE});const Ni=/[a-z]/,Vu=new RegExp("\\p{L}","u"),j0=new RegExp("\\p{Emoji}","u"),_i=/\d/,L0=/\s/,hR="\r",P0=`
`,pJ="️",mJ="‍",B0="￼";let Fd=null,Ud=null;function gJ(e=[]){const t={};Bn.groups=t;const n=new Bn;Fd==null&&(Fd=pR(lJ)),Ud==null&&(Ud=pR(uJ)),me(n,"'",np),me(n,"{",fc),me(n,"}",dc),me(n,"[",Vh),me(n,"]",Hh),me(n,"(",Fh),me(n,")",Uh),me(n,"<",$h),me(n,">",Gh),me(n,"（",Kh),me(n,"）",Yh),me(n,"「",Wh),me(n,"」",Xh),me(n,"『",Zh),me(n,"』",Qh),me(n,"＜",Jh),me(n,"＞",ep),me(n,"&",tp),me(n,"*",rp),me(n,"@",ks),me(n,"`",sp),me(n,"^",op),me(n,":",Ms),me(n,",",$C),me(n,"$",ap),me(n,".",Yr),me(n,"=",lp),me(n,"!",GC),me(n,"-",yr),me(n,"%",hc),me(n,"|",up),me(n,"+",cp),me(n,"#",fp),me(n,"?",pc),me(n,'"',KC),me(n,"/",Wr),me(n,";",YC),me(n,"~",mc),me(n,"_",dp),me(n,"\\",ip),me(n,"・",gz);const r=Mt(n,_i,FC,{[uE]:!0});Mt(r,_i,r);const i=Mt(r,Ni,pz,{[cc]:!0}),s=Mt(r,Vu,mz,{[Wu]:!0}),o=Mt(n,Ni,Di,{[cE]:!0});Mt(o,_i,i),Mt(o,Ni,o),Mt(i,_i,i),Mt(i,Ni,i);const l=Mt(n,Vu,hE,{[fE]:!0});Mt(l,Ni),Mt(l,_i,s),Mt(l,Vu,l),Mt(s,_i,s),Mt(s,Ni),Mt(s,Vu,s);const c=me(n,P0,UC,{[O0]:!0}),f=me(n,hR,gE,{[O0]:!0}),h=Mt(n,L0,gE,{[O0]:!0});me(n,B0,h),me(f,P0,c),me(f,B0,h),Mt(f,L0,h),me(h,hR),me(h,P0),Mt(h,L0,h),me(h,B0,h);const p=Mt(n,j0,yz,{[hz]:!0});me(p,"#"),Mt(p,j0,p),me(p,pJ,p);const g=me(p,mJ);me(g,"#"),Mt(g,j0,p);const y=[[Ni,o],[_i,i]],b=[[Ni,null],[Vu,l],[_i,s]];for(let S=0;S<Fd.length;S++)bs(n,Fd[S],pE,Di,y);for(let S=0;S<Ud.length;S++)bs(n,Ud[S],mE,hE,b);Mo(pE,{tld:!0,ascii:!0},t),Mo(mE,{utld:!0,alpha:!0},t),bs(n,"file",ch,Di,y),bs(n,"mailto",ch,Di,y),bs(n,"http",Ja,Di,y),bs(n,"https",Ja,Di,y),bs(n,"ftp",Ja,Di,y),bs(n,"ftps",Ja,Di,y),Mo(ch,{scheme:!0,ascii:!0},t),Mo(Ja,{slashscheme:!0,ascii:!0},t),e=e.sort((S,x)=>S[0]>x[0]?1:-1);for(let S=0;S<e.length;S++){const x=e[S][0],T=e[S][1]?{[cJ]:!0}:{[fJ]:!0};x.indexOf("-")>=0?T[dE]=!0:Ni.test(x)?_i.test(x)?T[cc]=!0:T[cE]=!0:T[uE]=!0,dR(n,x,x,T)}return dR(n,"localhost",Lc,{ascii:!0}),n.jd=new Bn(hp),{start:n,tokens:Object.assign({groups:t},vz)}}function bz(e,t){const n=yJ(t.replace(/[A-Z]/g,l=>l.toLowerCase())),r=n.length,i=[];let s=0,o=0;for(;o<r;){let l=e,c=null,f=0,h=null,p=-1,g=-1;for(;o<r&&(c=l.go(n[o]));)l=c,l.accepts()?(p=0,g=0,h=l):p>=0&&(p+=n[o].length,g++),f+=n[o].length,s+=n[o].length,o++;s-=p,o-=g,f-=p,i.push({t:h.t,v:t.slice(s-f,s),s:s-f,e:s})}return i}function yJ(e){const t=[],n=e.length;let r=0;for(;r<n;){let i=e.charCodeAt(r),s,o=i<55296||i>56319||r+1===n||(s=e.charCodeAt(r+1))<56320||s>57343?e[r]:e.slice(r,r+2);t.push(o),r+=o.length}return t}function bs(e,t,n,r,i){let s;const o=t.length;for(let l=0;l<o-1;l++){const c=t[l];e.j[c]?s=e.j[c]:(s=new Bn(r),s.jr=i.slice(),e.j[c]=s),e=s}return s=new Bn(n),s.jr=i.slice(),e.j[t[o-1]]=s,s}function pR(e){const t=[],n=[];let r=0,i="0123456789";for(;r<e.length;){let s=0;for(;i.indexOf(e[r+s])>=0;)s++;if(s>0){t.push(n.join(""));for(let o=parseInt(e.substring(r,r+s),10);o>0;o--)n.pop();r+=s}else n.push(e[r]),r++}return t}const Pc={defaultProtocol:"http",events:null,format:mR,formatHref:mR,nl2br:!1,tagName:"a",target:null,rel:null,validate:!0,truncate:1/0,className:null,attributes:null,ignoreTags:[],render:null};function WC(e,t=null){let n=Object.assign({},Pc);e&&(n=Object.assign(n,e instanceof WC?e.o:e));const r=n.ignoreTags,i=[];for(let s=0;s<r.length;s++)i.push(r[s].toUpperCase());this.o=n,t&&(this.defaultRender=t),this.ignoreTags=i}WC.prototype={o:Pc,ignoreTags:[],defaultRender(e){return e},check(e){return this.get("validate",e.toString(),e)},get(e,t,n){const r=t!=null;let i=this.o[e];return i&&(typeof i=="object"?(i=n.t in i?i[n.t]:Pc[e],typeof i=="function"&&r&&(i=i(t,n))):typeof i=="function"&&r&&(i=i(t,n.t,n)),i)},getObj(e,t,n){let r=this.o[e];return typeof r=="function"&&t!=null&&(r=r(t,n.t,n)),r},render(e){const t=e.render(this);return(this.get("render",null,e)||this.defaultRender)(t,e.t,e)}};function mR(e){return e}function xz(e,t){this.t="token",this.v=e,this.tk=t}xz.prototype={isLink:!1,toString(){return this.v},toHref(e){return this.toString()},toFormattedString(e){const t=this.toString(),n=e.get("truncate",t,this),r=e.get("format",t,this);return n&&r.length>n?r.substring(0,n)+"…":r},toFormattedHref(e){return e.get("formatHref",this.toHref(e.get("defaultProtocol")),this)},startIndex(){return this.tk[0].s},endIndex(){return this.tk[this.tk.length-1].e},toObject(e=Pc.defaultProtocol){return{type:this.t,value:this.toString(),isLink:this.isLink,href:this.toHref(e),start:this.startIndex(),end:this.endIndex()}},toFormattedObject(e){return{type:this.t,value:this.toFormattedString(e),isLink:this.isLink,href:this.toFormattedHref(e),start:this.startIndex(),end:this.endIndex()}},validate(e){return e.get("validate",this.toString(),this)},render(e){const t=this,n=this.toHref(e.get("defaultProtocol")),r=e.get("formatHref",n,this),i=e.get("tagName",n,t),s=this.toFormattedString(e),o={},l=e.get("className",n,t),c=e.get("target",n,t),f=e.get("rel",n,t),h=e.getObj("attributes",n,t),p=e.getObj("events",n,t);return o.href=r,l&&(o.class=l),c&&(o.target=c),f&&(o.rel=f),h&&Object.assign(o,h),{tagName:i,attributes:o,content:s,eventListeners:p}}};function em(e,t){class n extends xz{constructor(i,s){super(i,s),this.t=e}}for(const r in t)n.prototype[r]=t[r];return n.t=e,n}const gR=em("email",{isLink:!0,toHref(){return"mailto:"+this.toString()}}),yR=em("text"),vJ=em("nl"),$d=em("url",{isLink:!0,toHref(e=Pc.defaultProtocol){return this.hasProtocol()?this.v:`${e}://${this.v}`},hasProtocol(){const e=this.tk;return e.length>=2&&e[0].t!==Lc&&e[1].t===Ms}}),mr=e=>new Bn(e);function bJ({groups:e}){const t=e.domain.concat([tp,rp,ks,ip,sp,op,ap,lp,yr,FC,hc,up,cp,fp,Wr,hp,mc,dp]),n=[np,Ms,$C,Yr,GC,hc,pc,KC,YC,$h,Gh,fc,dc,Hh,Vh,Fh,Uh,Kh,Yh,Wh,Xh,Zh,Qh,Jh,ep],r=[tp,np,rp,ip,sp,op,ap,lp,yr,fc,dc,hc,up,cp,fp,pc,Wr,hp,mc,dp],i=mr(),s=me(i,mc);$e(s,r,s),$e(s,e.domain,s);const o=mr(),l=mr(),c=mr();$e(i,e.domain,o),$e(i,e.scheme,l),$e(i,e.slashscheme,c),$e(o,r,s),$e(o,e.domain,o);const f=me(o,ks);me(s,ks,f),me(l,ks,f),me(c,ks,f);const h=me(s,Yr);$e(h,r,s),$e(h,e.domain,s);const p=mr();$e(f,e.domain,p),$e(p,e.domain,p);const g=me(p,Yr);$e(g,e.domain,p);const y=mr(gR);$e(g,e.tld,y),$e(g,e.utld,y),me(f,Lc,y);const b=me(p,yr);me(b,yr,b),$e(b,e.domain,p),$e(y,e.domain,p),me(y,Yr,g),me(y,yr,b);const S=me(y,Ms);$e(S,e.numeric,gR);const x=me(o,yr),C=me(o,Yr);me(x,yr,x),$e(x,e.domain,o),$e(C,r,s),$e(C,e.domain,o);const T=mr($d);$e(C,e.tld,T),$e(C,e.utld,T),$e(T,e.domain,o),$e(T,r,s),me(T,Yr,C),me(T,yr,x),me(T,ks,f);const k=me(T,Ms),A=mr($d);$e(k,e.numeric,A);const M=mr($d),_=mr();$e(M,t,M),$e(M,n,_),$e(_,t,M),$e(_,n,_),me(T,Wr,M),me(A,Wr,M);const R=me(l,Ms),O=me(c,Ms),I=me(O,Wr),$=me(I,Wr);$e(l,e.domain,o),me(l,Yr,C),me(l,yr,x),$e(c,e.domain,o),me(c,Yr,C),me(c,yr,x),$e(R,e.domain,M),me(R,Wr,M),me(R,pc,M),$e($,e.domain,M),$e($,t,M),me($,Wr,M);const q=[[fc,dc],[Vh,Hh],[Fh,Uh],[$h,Gh],[Kh,Yh],[Wh,Xh],[Zh,Qh],[Jh,ep]];for(let U=0;U<q.length;U++){const[X,B]=q[U],F=me(M,X);me(_,X,F),me(F,B,M);const j=mr($d);$e(F,t,j);const z=mr();$e(F,n),$e(j,t,j),$e(j,n,z),$e(z,t,j),$e(z,n,z),me(j,B,M),me(z,B,M)}return me(i,Lc,T),me(i,UC,vJ),{start:i,tokens:vz}}function xJ(e,t,n){let r=n.length,i=0,s=[],o=[];for(;i<r;){let l=e,c=null,f=null,h=0,p=null,g=-1;for(;i<r&&!(c=l.go(n[i].t));)o.push(n[i++]);for(;i<r&&(f=c||l.go(n[i].t));)c=null,l=f,l.accepts()?(g=0,p=l):g>=0&&g++,i++,h++;if(g<0)i-=h,i<r&&(o.push(n[i]),i++);else{o.length>0&&(s.push(I0(yR,t,o)),o=[]),i-=g,h-=g;const y=p.t,b=n.slice(i-h,i);s.push(I0(y,t,b))}}return o.length>0&&s.push(I0(yR,t,o)),s}function I0(e,t,n){const r=n[0].s,i=n[n.length-1].e,s=t.slice(r,i);return new e(s,n)}const wJ=typeof console<"u"&&console&&console.warn||(()=>{}),SJ="until manual call of linkify.init(). Register all schemes and plugins before invoking linkify the first time.",pt={scanner:null,parser:null,tokenQueue:[],pluginQueue:[],customSchemes:[],initialized:!1};function EJ(){return Bn.groups={},pt.scanner=null,pt.parser=null,pt.tokenQueue=[],pt.pluginQueue=[],pt.customSchemes=[],pt.initialized=!1,pt}function vR(e,t=!1){if(pt.initialized&&wJ(`linkifyjs: already initialized - will not register custom scheme "${e}" ${SJ}`),!/^[0-9a-z]+(-[0-9a-z]+)*$/.test(e))throw new Error(`linkifyjs: incorrect scheme format.
1. Must only contain digits, lowercase ASCII letters or "-"
2. Cannot start or end with "-"
3. "-" cannot repeat`);pt.customSchemes.push([e,t])}function CJ(){pt.scanner=gJ(pt.customSchemes);for(let e=0;e<pt.tokenQueue.length;e++)pt.tokenQueue[e][1]({scanner:pt.scanner});pt.parser=bJ(pt.scanner.tokens);for(let e=0;e<pt.pluginQueue.length;e++)pt.pluginQueue[e][1]({scanner:pt.scanner,parser:pt.parser});return pt.initialized=!0,pt}function XC(e){return pt.initialized||CJ(),xJ(pt.parser.start,e,bz(pt.scanner.start,e))}XC.scan=bz;function wz(e,t=null,n=null){if(t&&typeof t=="object"){if(n)throw Error(`linkifyjs: Invalid link type ${t}; must be a string`);n=t,t=null}const r=new WC(n),i=XC(e),s=[];for(let o=0;o<i.length;o++){const l=i[o];l.isLink&&(!t||l.t===t)&&r.check(l)&&s.push(l.toFormattedObject(r))}return s}var ZC="[\0-   ᠎ -\u2029 　]",kJ=new RegExp(ZC),TJ=new RegExp(`${ZC}$`),AJ=new RegExp(ZC,"g");function MJ(e){return e.length===1?e[0].isLink:e.length===3&&e[1].isLink?["()","[]"].includes(e[0].value+e[2].value):!1}function NJ(e){return new Rt({key:new nn("autolink"),appendTransaction:(t,n,r)=>{const i=t.some(f=>f.docChanged)&&!n.doc.eq(r.doc),s=t.some(f=>f.getMeta("preventAutolink"));if(!i||s)return;const{tr:o}=r,l=jI(n.doc,[...t]);if(FI(l).forEach(({newRange:f})=>{const h=DX(r.doc,f,y=>y.isTextblock);let p,g;if(h.length>1)p=h[0],g=r.doc.textBetween(p.pos,p.pos+p.node.nodeSize,void 0," ");else if(h.length){const y=r.doc.textBetween(f.from,f.to," "," ");if(!TJ.test(y))return;p=h[0],g=r.doc.textBetween(p.pos,f.to,void 0," ")}if(p&&g){const y=g.split(kJ).filter(Boolean);if(y.length<=0)return!1;const b=y[y.length-1],S=p.pos+g.lastIndexOf(b);if(!b)return!1;const x=XC(b).map(C=>C.toObject(e.defaultProtocol));if(!MJ(x))return!1;x.filter(C=>C.isLink).map(C=>({...C,from:S+C.start+1,to:S+C.end+1})).filter(C=>r.schema.marks.code?!r.doc.rangeHasMark(C.from,C.to,r.schema.marks.code):!0).filter(C=>e.validate(C.value)).filter(C=>e.shouldAutoLink(C.value)).forEach(C=>{qC(C.from,C.to,r.doc).some(T=>T.mark.type===e.type)||o.addMark(C.from,C.to,e.type.create({href:C.href}))})}}),!!o.steps.length)return o}})}function _J(e){return new Rt({key:new nn("handleClickLink"),props:{handleClick:(t,n,r)=>{var i,s;if(r.button!==0||!t.editable)return!1;let o=null;if(r.target instanceof HTMLAnchorElement)o=r.target;else{let h=r.target;const p=[];for(;h.nodeName!=="DIV";)p.push(h),h=h.parentNode;o=p.find(g=>g.nodeName==="A")}if(!o)return!1;const l=HI(t.state,e.type.name),c=(i=o?.href)!=null?i:l.href,f=(s=o?.target)!=null?s:l.target;return e.enableClickSelection&&e.editor.commands.extendMarkRange(e.type.name),o&&c?(window.open(c,f),!0):!1}}})}function RJ(e){return new Rt({key:new nn("handlePasteLink"),props:{handlePaste:(t,n,r)=>{const{state:i}=t,{selection:s}=i,{empty:o}=s;if(o)return!1;let l="";r.content.forEach(f=>{l+=f.textContent});const c=wz(l,{defaultProtocol:e.defaultProtocol}).find(f=>f.isLink&&f.value===l);return!l||!c?!1:e.editor.commands.setMark(e.type,{href:c.href})}}})}function vo(e,t){const n=["http","https","ftp","ftps","mailto","tel","callto","sms","cid","xmpp"];return t&&t.forEach(r=>{const i=typeof r=="string"?r:r.scheme;i&&n.push(i)}),!e||e.replace(AJ,"").match(new RegExp(`^(?:(?:${n.join("|")}):|[^a-z]|[a-z0-9+.-]+(?:[^a-z+.-:]|$))`,"i"))}var Sz=ea.create({name:"link",priority:1e3,keepOnSplit:!1,exitable:!0,onCreate(){this.options.validate&&!this.options.shouldAutoLink&&(this.options.shouldAutoLink=this.options.validate,console.warn("The `validate` option is deprecated. Rename to the `shouldAutoLink` option instead.")),this.options.protocols.forEach(e=>{if(typeof e=="string"){vR(e);return}vR(e.scheme,e.optionalSlashes)})},onDestroy(){EJ()},inclusive(){return this.options.autolink},addOptions(){return{openOnClick:!0,enableClickSelection:!1,linkOnPaste:!0,autolink:!0,protocols:[],defaultProtocol:"http",HTMLAttributes:{target:"_blank",rel:"noopener noreferrer nofollow",class:null},isAllowedUri:(e,t)=>!!vo(e,t.protocols),validate:e=>!!e,shouldAutoLink:e=>!!e}},addAttributes(){return{href:{default:null,parseHTML(e){return e.getAttribute("href")}},target:{default:this.options.HTMLAttributes.target},rel:{default:this.options.HTMLAttributes.rel},class:{default:this.options.HTMLAttributes.class}}},parseHTML(){return[{tag:"a[href]",getAttrs:e=>{const t=e.getAttribute("href");return!t||!this.options.isAllowedUri(t,{defaultValidate:n=>!!vo(n,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:null}}]},renderHTML({HTMLAttributes:e}){return this.options.isAllowedUri(e.href,{defaultValidate:t=>!!vo(t,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?["a",Ht(this.options.HTMLAttributes,e),0]:["a",Ht(this.options.HTMLAttributes,{...e,href:""}),0]},addCommands(){return{setLink:e=>({chain:t})=>{const{href:n}=e;return this.options.isAllowedUri(n,{defaultValidate:r=>!!vo(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?t().setMark(this.name,e).setMeta("preventAutolink",!0).run():!1},toggleLink:e=>({chain:t})=>{const{href:n}=e||{};return n&&!this.options.isAllowedUri(n,{defaultValidate:r=>!!vo(r,this.options.protocols),protocols:this.options.protocols,defaultProtocol:this.options.defaultProtocol})?!1:t().toggleMark(this.name,e,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()},unsetLink:()=>({chain:e})=>e().unsetMark(this.name,{extendEmptyMarkRange:!0}).setMeta("preventAutolink",!0).run()}},addPasteRules(){return[Uo({find:e=>{const t=[];if(e){const{protocols:n,defaultProtocol:r}=this.options,i=wz(e).filter(s=>s.isLink&&this.options.isAllowedUri(s.value,{defaultValidate:o=>!!vo(o,n),protocols:n,defaultProtocol:r}));i.length&&i.forEach(s=>t.push({text:s.value,data:{href:s.href},index:s.start}))}return t},type:this.type,getAttributes:e=>{var t;return{href:(t=e.data)==null?void 0:t.href}}})]},addProseMirrorPlugins(){const e=[],{protocols:t,defaultProtocol:n}=this.options;return this.options.autolink&&e.push(NJ({type:this.type,defaultProtocol:this.options.defaultProtocol,validate:r=>this.options.isAllowedUri(r,{defaultValidate:i=>!!vo(i,t),protocols:t,defaultProtocol:n}),shouldAutoLink:this.options.shouldAutoLink})),this.options.openOnClick===!0&&e.push(_J({type:this.type,editor:this.editor,enableClickSelection:this.options.enableClickSelection})),this.options.linkOnPaste&&e.push(RJ({editor:this.editor,defaultProtocol:this.options.defaultProtocol,type:this.type})),e}}),DJ=Sz,OJ=Object.defineProperty,jJ=(e,t)=>{for(var n in t)OJ(e,n,{get:t[n],enumerable:!0})},LJ="listItem",bR="textStyle",xR=/^\s*([-+*])\s$/,QC=ir.create({name:"bulletList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:"ul"}]},renderHTML({HTMLAttributes:e}){return["ul",Ht(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleBulletList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(LJ,this.editor.getAttributes(bR)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-8":()=>this.editor.commands.toggleBulletList()}},addInputRules(){let e=xl({find:xR,type:this.type});return(this.options.keepMarks||this.options.keepAttributes)&&(e=xl({find:xR,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:()=>this.editor.getAttributes(bR),editor:this.editor})),[e]}}),JC=ir.create({name:"listItem",addOptions(){return{HTMLAttributes:{},bulletListTypeName:"bulletList",orderedListTypeName:"orderedList"}},content:"paragraph block*",defining:!0,parseHTML(){return[{tag:"li"}]},renderHTML({HTMLAttributes:e}){return["li",Ht(this.options.HTMLAttributes,e),0]},addKeyboardShortcuts(){return{Enter:()=>this.editor.commands.splitListItem(this.name),Tab:()=>this.editor.commands.sinkListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)}}}),PJ={};jJ(PJ,{findListItemPos:()=>rf,getNextListDepth:()=>ek,handleBackspace:()=>yE,handleDelete:()=>vE,hasListBefore:()=>Ez,hasListItemAfter:()=>BJ,hasListItemBefore:()=>Cz,listItemHasSubList:()=>kz,nextListIsDeeper:()=>Tz,nextListIsHigher:()=>Az});var rf=(e,t)=>{const{$from:n}=t.selection,r=Ft(e,t.schema);let i=null,s=n.depth,o=n.pos,l=null;for(;s>0&&l===null;)i=n.node(s),i.type===r?l=s:(s-=1,o-=1);return l===null?null:{$pos:t.doc.resolve(o),depth:l}},ek=(e,t)=>{const n=rf(e,t);if(!n)return!1;const[,r]=HX(t,e,n.$pos.pos+4);return r},Ez=(e,t,n)=>{const{$anchor:r}=e.selection,i=Math.max(0,r.pos-2),s=e.doc.resolve(i).node();return!(!s||!n.includes(s.type.name))},Cz=(e,t)=>{var n;const{$anchor:r}=t.selection,i=t.doc.resolve(r.pos-2);return!(i.index()===0||((n=i.nodeBefore)==null?void 0:n.type.name)!==e)},kz=(e,t,n)=>{if(!n)return!1;const r=Ft(e,t.schema);let i=!1;return n.descendants(s=>{s.type===r&&(i=!0)}),i},yE=(e,t,n)=>{if(e.commands.undoInputRule())return!0;if(e.state.selection.from!==e.state.selection.to)return!1;if(!Us(e.state,t)&&Ez(e.state,t,n)){const{$anchor:l}=e.state.selection,c=e.state.doc.resolve(l.before()-1),f=[];c.node().descendants((g,y)=>{g.type.name===t&&f.push({node:g,pos:y})});const h=f.at(-1);if(!h)return!1;const p=e.state.doc.resolve(c.start()+h.pos+1);return e.chain().cut({from:l.start()-1,to:l.end()+1},p.end()).joinForward().run()}if(!Us(e.state,t)||!GX(e.state))return!1;const r=rf(t,e.state);if(!r)return!1;const s=e.state.doc.resolve(r.$pos.pos-2).node(r.depth),o=kz(t,e.state,s);return Cz(t,e.state)&&!o?e.commands.joinItemBackward():e.chain().liftListItem(t).run()},Tz=(e,t)=>{const n=ek(e,t),r=rf(e,t);return!r||!n?!1:n>r.depth},Az=(e,t)=>{const n=ek(e,t),r=rf(e,t);return!r||!n?!1:n<r.depth},vE=(e,t)=>{if(!Us(e.state,t)||!$X(e.state,t))return!1;const{selection:n}=e.state,{$from:r,$to:i}=n;return!n.empty&&r.sameParent(i)?!1:Tz(t,e.state)?e.chain().focus(e.state.selection.from+4).lift(t).joinBackward().run():Az(t,e.state)?e.chain().joinForward().joinBackward().run():e.commands.joinItemForward()},BJ=(e,t)=>{var n;const{$anchor:r}=t.selection,i=t.doc.resolve(r.pos-r.parentOffset-2);return!(i.index()===i.parent.childCount-1||((n=i.nodeAfter)==null?void 0:n.type.name)!==e)},Mz=Lt.create({name:"listKeymap",addOptions(){return{listTypes:[{itemName:"listItem",wrapperNames:["bulletList","orderedList"]},{itemName:"taskItem",wrapperNames:["taskList"]}]}},addKeyboardShortcuts(){return{Delete:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&vE(e,n)&&(t=!0)}),t},"Mod-Delete":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n})=>{e.state.schema.nodes[n]!==void 0&&vE(e,n)&&(t=!0)}),t},Backspace:({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{e.state.schema.nodes[n]!==void 0&&yE(e,n,r)&&(t=!0)}),t},"Mod-Backspace":({editor:e})=>{let t=!1;return this.options.listTypes.forEach(({itemName:n,wrapperNames:r})=>{e.state.schema.nodes[n]!==void 0&&yE(e,n,r)&&(t=!0)}),t}}}}),IJ="listItem",wR="textStyle",SR=/^(\d+)\.\s$/,tk=ir.create({name:"orderedList",addOptions(){return{itemTypeName:"listItem",HTMLAttributes:{},keepMarks:!1,keepAttributes:!1}},group:"block list",content(){return`${this.options.itemTypeName}+`},addAttributes(){return{start:{default:1,parseHTML:e=>e.hasAttribute("start")?parseInt(e.getAttribute("start")||"",10):1},type:{default:null,parseHTML:e=>e.getAttribute("type")}}},parseHTML(){return[{tag:"ol"}]},renderHTML({HTMLAttributes:e}){const{start:t,...n}=e;return t===1?["ol",Ht(this.options.HTMLAttributes,n),0]:["ol",Ht(this.options.HTMLAttributes,e),0]},addCommands(){return{toggleOrderedList:()=>({commands:e,chain:t})=>this.options.keepAttributes?t().toggleList(this.name,this.options.itemTypeName,this.options.keepMarks).updateAttributes(IJ,this.editor.getAttributes(wR)).run():e.toggleList(this.name,this.options.itemTypeName,this.options.keepMarks)}},addKeyboardShortcuts(){return{"Mod-Shift-7":()=>this.editor.commands.toggleOrderedList()}},addInputRules(){let e=xl({find:SR,type:this.type,getAttributes:t=>({start:+t[1]}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1]});return(this.options.keepMarks||this.options.keepAttributes)&&(e=xl({find:SR,type:this.type,keepMarks:this.options.keepMarks,keepAttributes:this.options.keepAttributes,getAttributes:t=>({start:+t[1],...this.editor.getAttributes(wR)}),joinPredicate:(t,n)=>n.childCount+n.attrs.start===+t[1],editor:this.editor})),[e]}}),zJ=/^\s*(\[([( |x])?\])\s$/,qJ=ir.create({name:"taskItem",addOptions(){return{nested:!1,HTMLAttributes:{},taskListTypeName:"taskList",a11y:void 0}},content(){return this.options.nested?"paragraph block*":"paragraph+"},defining:!0,addAttributes(){return{checked:{default:!1,keepOnSplit:!1,parseHTML:e=>{const t=e.getAttribute("data-checked");return t===""||t==="true"},renderHTML:e=>({"data-checked":e.checked})}}},parseHTML(){return[{tag:`li[data-type="${this.name}"]`,priority:51}]},renderHTML({node:e,HTMLAttributes:t}){return["li",Ht(this.options.HTMLAttributes,t,{"data-type":this.name}),["label",["input",{type:"checkbox",checked:e.attrs.checked?"checked":null}],["span"]],["div",0]]},addKeyboardShortcuts(){const e={Enter:()=>this.editor.commands.splitListItem(this.name),"Shift-Tab":()=>this.editor.commands.liftListItem(this.name)};return this.options.nested?{...e,Tab:()=>this.editor.commands.sinkListItem(this.name)}:e},addNodeView(){return({node:e,HTMLAttributes:t,getPos:n,editor:r})=>{const i=document.createElement("li"),s=document.createElement("label"),o=document.createElement("span"),l=document.createElement("input"),c=document.createElement("div"),f=h=>{var p,g;l.ariaLabel=((g=(p=this.options.a11y)==null?void 0:p.checkboxLabel)==null?void 0:g.call(p,h,l.checked))||`Task item checkbox for ${h.textContent||"empty task item"}`};return f(e),s.contentEditable="false",l.type="checkbox",l.addEventListener("mousedown",h=>h.preventDefault()),l.addEventListener("change",h=>{if(!r.isEditable&&!this.options.onReadOnlyChecked){l.checked=!l.checked;return}const{checked:p}=h.target;r.isEditable&&typeof n=="function"&&r.chain().focus(void 0,{scrollIntoView:!1}).command(({tr:g})=>{const y=n();if(typeof y!="number")return!1;const b=g.doc.nodeAt(y);return g.setNodeMarkup(y,void 0,{...b?.attrs,checked:p}),!0}).run(),!r.isEditable&&this.options.onReadOnlyChecked&&(this.options.onReadOnlyChecked(e,p)||(l.checked=!l.checked))}),Object.entries(this.options.HTMLAttributes).forEach(([h,p])=>{i.setAttribute(h,p)}),i.dataset.checked=e.attrs.checked,l.checked=e.attrs.checked,s.append(l,o),i.append(s,c),Object.entries(t).forEach(([h,p])=>{i.setAttribute(h,p)}),{dom:i,contentDOM:c,update:h=>h.type!==this.type?!1:(i.dataset.checked=h.attrs.checked,l.checked=h.attrs.checked,f(h),!0)}}},addInputRules(){return[xl({find:zJ,type:this.type,getAttributes:e=>({checked:e[e.length-1]==="x"})})]}}),VJ=ir.create({name:"taskList",addOptions(){return{itemTypeName:"taskItem",HTMLAttributes:{}}},group:"block list",content(){return`${this.options.itemTypeName}+`},parseHTML(){return[{tag:`ul[data-type="${this.name}"]`,priority:51}]},renderHTML({HTMLAttributes:e}){return["ul",Ht(this.options.HTMLAttributes,e,{"data-type":this.name}),0]},addCommands(){return{toggleTaskList:()=>({commands:e})=>e.toggleList(this.name,this.options.itemTypeName)}},addKeyboardShortcuts(){return{"Mod-Shift-9":()=>this.editor.commands.toggleTaskList()}}});Lt.create({name:"listKit",addExtensions(){const e=[];return this.options.bulletList!==!1&&e.push(QC.configure(this.options.bulletList)),this.options.listItem!==!1&&e.push(JC.configure(this.options.listItem)),this.options.listKeymap!==!1&&e.push(Mz.configure(this.options.listKeymap)),this.options.orderedList!==!1&&e.push(tk.configure(this.options.orderedList)),this.options.taskItem!==!1&&e.push(qJ.configure(this.options.taskItem)),this.options.taskList!==!1&&e.push(VJ.configure(this.options.taskList)),e}});var HJ=ir.create({name:"paragraph",priority:1e3,addOptions(){return{HTMLAttributes:{}}},group:"block",content:"inline*",parseHTML(){return[{tag:"p"}]},renderHTML({HTMLAttributes:e}){return["p",Ht(this.options.HTMLAttributes,e),0]},addCommands(){return{setParagraph:()=>({commands:e})=>e.setNode(this.name)}},addKeyboardShortcuts(){return{"Mod-Alt-0":()=>this.editor.commands.setParagraph()}}}),FJ=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))$/,UJ=/(?:^|\s)(~~(?!\s+~~)((?:[^~]+))~~(?!\s+~~))/g,$J=ea.create({name:"strike",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"s"},{tag:"del"},{tag:"strike"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("line-through")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["s",Ht(this.options.HTMLAttributes,e),0]},addCommands(){return{setStrike:()=>({commands:e})=>e.setMark(this.name),toggleStrike:()=>({commands:e})=>e.toggleMark(this.name),unsetStrike:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-Shift-s":()=>this.editor.commands.toggleStrike()}},addInputRules(){return[bl({find:FJ,type:this.type})]},addPasteRules(){return[Uo({find:UJ,type:this.type})]}}),GJ=ir.create({name:"text",group:"inline"}),Nz=ea.create({name:"underline",addOptions(){return{HTMLAttributes:{}}},parseHTML(){return[{tag:"u"},{style:"text-decoration",consuming:!1,getAttrs:e=>e.includes("underline")?{}:!1}]},renderHTML({HTMLAttributes:e}){return["u",Ht(this.options.HTMLAttributes,e),0]},addCommands(){return{setUnderline:()=>({commands:e})=>e.setMark(this.name),toggleUnderline:()=>({commands:e})=>e.toggleMark(this.name),unsetUnderline:()=>({commands:e})=>e.unsetMark(this.name)}},addKeyboardShortcuts(){return{"Mod-u":()=>this.editor.commands.toggleUnderline(),"Mod-U":()=>this.editor.commands.toggleUnderline()}}}),KJ=Nz;function YJ(e={}){return new Rt({view(t){return new WJ(t,e)}})}class WJ{constructor(t,n){var r;this.editorView=t,this.cursorPos=null,this.element=null,this.timeout=-1,this.width=(r=n.width)!==null&&r!==void 0?r:1,this.color=n.color===!1?void 0:n.color||"black",this.class=n.class,this.handlers=["dragover","dragend","drop","dragleave"].map(i=>{let s=o=>{this[i](o)};return t.dom.addEventListener(i,s),{name:i,handler:s}})}destroy(){this.handlers.forEach(({name:t,handler:n})=>this.editorView.dom.removeEventListener(t,n))}update(t,n){this.cursorPos!=null&&n.doc!=t.state.doc&&(this.cursorPos>t.state.doc.content.size?this.setCursor(null):this.updateOverlay())}setCursor(t){t!=this.cursorPos&&(this.cursorPos=t,t==null?(this.element.parentNode.removeChild(this.element),this.element=null):this.updateOverlay())}updateOverlay(){let t=this.editorView.state.doc.resolve(this.cursorPos),n=!t.parent.inlineContent,r,i=this.editorView.dom,s=i.getBoundingClientRect(),o=s.width/i.offsetWidth,l=s.height/i.offsetHeight;if(n){let p=t.nodeBefore,g=t.nodeAfter;if(p||g){let y=this.editorView.nodeDOM(this.cursorPos-(p?p.nodeSize:0));if(y){let b=y.getBoundingClientRect(),S=p?b.bottom:b.top;p&&g&&(S=(S+this.editorView.nodeDOM(this.cursorPos).getBoundingClientRect().top)/2);let x=this.width/2*l;r={left:b.left,right:b.right,top:S-x,bottom:S+x}}}}if(!r){let p=this.editorView.coordsAtPos(this.cursorPos),g=this.width/2*o;r={left:p.left-g,right:p.left+g,top:p.top,bottom:p.bottom}}let c=this.editorView.dom.offsetParent;this.element||(this.element=c.appendChild(document.createElement("div")),this.class&&(this.element.className=this.class),this.element.style.cssText="position: absolute; z-index: 50; pointer-events: none;",this.color&&(this.element.style.backgroundColor=this.color)),this.element.classList.toggle("prosemirror-dropcursor-block",n),this.element.classList.toggle("prosemirror-dropcursor-inline",!n);let f,h;if(!c||c==document.body&&getComputedStyle(c).position=="static")f=-pageXOffset,h=-pageYOffset;else{let p=c.getBoundingClientRect(),g=p.width/c.offsetWidth,y=p.height/c.offsetHeight;f=p.left-c.scrollLeft*g,h=p.top-c.scrollTop*y}this.element.style.left=(r.left-f)/o+"px",this.element.style.top=(r.top-h)/l+"px",this.element.style.width=(r.right-r.left)/o+"px",this.element.style.height=(r.bottom-r.top)/l+"px"}scheduleRemoval(t){clearTimeout(this.timeout),this.timeout=setTimeout(()=>this.setCursor(null),t)}dragover(t){if(!this.editorView.editable)return;let n=this.editorView.posAtCoords({left:t.clientX,top:t.clientY}),r=n&&n.inside>=0&&this.editorView.state.doc.nodeAt(n.inside),i=r&&r.type.spec.disableDropCursor,s=typeof i=="function"?i(this.editorView,n,t):i;if(n&&!s){let o=n.pos;if(this.editorView.dragging&&this.editorView.dragging.slice){let l=DB(this.editorView.state.doc,o,this.editorView.dragging.slice);l!=null&&(o=l)}this.setCursor(o),this.scheduleRemoval(5e3)}}dragend(){this.scheduleRemoval(20)}drop(){this.scheduleRemoval(20)}dragleave(t){this.editorView.dom.contains(t.relatedTarget)||this.setCursor(null)}}class _t extends Ue{constructor(t){super(t,t)}map(t,n){let r=t.resolve(n.map(this.head));return _t.valid(r)?new _t(r):Ue.near(r)}content(){return ve.empty}eq(t){return t instanceof _t&&t.head==this.head}toJSON(){return{type:"gapcursor",pos:this.head}}static fromJSON(t,n){if(typeof n.pos!="number")throw new RangeError("Invalid input for GapCursor.fromJSON");return new _t(t.resolve(n.pos))}getBookmark(){return new nk(this.anchor)}static valid(t){let n=t.parent;if(n.isTextblock||!XJ(t)||!ZJ(t))return!1;let r=n.type.spec.allowGapCursor;if(r!=null)return r;let i=n.contentMatchAt(t.index()).defaultType;return i&&i.isTextblock}static findGapCursorFrom(t,n,r=!1){e:for(;;){if(!r&&_t.valid(t))return t;let i=t.pos,s=null;for(let o=t.depth;;o--){let l=t.node(o);if(n>0?t.indexAfter(o)<l.childCount:t.index(o)>0){s=l.child(n>0?t.indexAfter(o):t.index(o)-1);break}else if(o==0)return null;i+=n;let c=t.doc.resolve(i);if(_t.valid(c))return c}for(;;){let o=n>0?s.firstChild:s.lastChild;if(!o){if(s.isAtom&&!s.isText&&!Re.isSelectable(s)){t=t.doc.resolve(i+s.nodeSize*n),r=!1;continue e}break}s=o,i+=n;let l=t.doc.resolve(i);if(_t.valid(l))return l}return null}}}_t.prototype.visible=!1;_t.findFrom=_t.findGapCursorFrom;Ue.jsonID("gapcursor",_t);class nk{constructor(t){this.pos=t}map(t){return new nk(t.map(this.pos))}resolve(t){let n=t.resolve(this.pos);return _t.valid(n)?new _t(n):Ue.near(n)}}function XJ(e){for(let t=e.depth;t>=0;t--){let n=e.index(t),r=e.node(t);if(n==0){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n-1);;i=i.lastChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function ZJ(e){for(let t=e.depth;t>=0;t--){let n=e.indexAfter(t),r=e.node(t);if(n==r.childCount){if(r.type.spec.isolating)return!0;continue}for(let i=r.child(n);;i=i.firstChild){if(i.childCount==0&&!i.inlineContent||i.isAtom||i.type.spec.isolating)return!0;if(i.inlineContent)return!1}}return!0}function QJ(){return new Rt({props:{decorations:nee,createSelectionBetween(e,t,n){return t.pos==n.pos&&_t.valid(n)?new _t(n):null},handleClick:eee,handleKeyDown:JJ,handleDOMEvents:{beforeinput:tee}}})}const JJ=xI({ArrowLeft:Gd("horiz",-1),ArrowRight:Gd("horiz",1),ArrowUp:Gd("vert",-1),ArrowDown:Gd("vert",1)});function Gd(e,t){const n=e=="vert"?t>0?"down":"up":t>0?"right":"left";return function(r,i,s){let o=r.selection,l=t>0?o.$to:o.$from,c=o.empty;if(o instanceof qe){if(!s.endOfTextblock(n)||l.depth==0)return!1;c=!1,l=r.doc.resolve(t>0?l.after():l.before())}let f=_t.findGapCursorFrom(l,t,c);return f?(i&&i(r.tr.setSelection(new _t(f))),!0):!1}}function eee(e,t,n){if(!e||!e.editable)return!1;let r=e.state.doc.resolve(t);if(!_t.valid(r))return!1;let i=e.posAtCoords({left:n.clientX,top:n.clientY});return i&&i.inside>-1&&Re.isSelectable(e.state.doc.nodeAt(i.inside))?!1:(e.dispatch(e.state.tr.setSelection(new _t(r))),!0)}function tee(e,t){if(t.inputType!="insertCompositionText"||!(e.state.selection instanceof _t))return!1;let{$from:n}=e.state.selection,r=n.parent.contentMatchAt(n.index()).findWrapping(e.state.schema.nodes.text);if(!r)return!1;let i=pe.empty;for(let o=r.length-1;o>=0;o--)i=pe.from(r[o].createAndFill(null,i));let s=e.state.tr.replace(n.pos,n.pos,new ve(i,0,0));return s.setSelection(qe.near(s.doc.resolve(n.pos+1))),e.dispatch(s),!1}function nee(e){if(!(e.selection instanceof _t))return null;let t=document.createElement("div");return t.className="ProseMirror-gapcursor",Et.create(e.doc,[Tn.widget(e.selection.head,t,{key:"gapcursor"})])}var pp=200,tn=function(){};tn.prototype.append=function(t){return t.length?(t=tn.from(t),!this.length&&t||t.length<pp&&this.leafAppend(t)||this.length<pp&&t.leafPrepend(this)||this.appendInner(t)):this};tn.prototype.prepend=function(t){return t.length?tn.from(t).append(this):this};tn.prototype.appendInner=function(t){return new ree(this,t)};tn.prototype.slice=function(t,n){return t===void 0&&(t=0),n===void 0&&(n=this.length),t>=n?tn.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,n))};tn.prototype.get=function(t){if(!(t<0||t>=this.length))return this.getInner(t)};tn.prototype.forEach=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length),n<=r?this.forEachInner(t,n,r,0):this.forEachInvertedInner(t,n,r,0)};tn.prototype.map=function(t,n,r){n===void 0&&(n=0),r===void 0&&(r=this.length);var i=[];return this.forEach(function(s,o){return i.push(t(s,o))},n,r),i};tn.from=function(t){return t instanceof tn?t:t&&t.length?new _z(t):tn.empty};var _z=(function(e){function t(r){e.call(this),this.values=r}e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t;var n={length:{configurable:!0},depth:{configurable:!0}};return t.prototype.flatten=function(){return this.values},t.prototype.sliceInner=function(i,s){return i==0&&s==this.length?this:new t(this.values.slice(i,s))},t.prototype.getInner=function(i){return this.values[i]},t.prototype.forEachInner=function(i,s,o,l){for(var c=s;c<o;c++)if(i(this.values[c],l+c)===!1)return!1},t.prototype.forEachInvertedInner=function(i,s,o,l){for(var c=s-1;c>=o;c--)if(i(this.values[c],l+c)===!1)return!1},t.prototype.leafAppend=function(i){if(this.length+i.length<=pp)return new t(this.values.concat(i.flatten()))},t.prototype.leafPrepend=function(i){if(this.length+i.length<=pp)return new t(i.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(t.prototype,n),t})(tn);tn.empty=new _z([]);var ree=(function(e){function t(n,r){e.call(this),this.left=n,this.right=r,this.length=n.length+r.length,this.depth=Math.max(n.depth,r.depth)+1}return e&&(t.__proto__=e),t.prototype=Object.create(e&&e.prototype),t.prototype.constructor=t,t.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},t.prototype.getInner=function(r){return r<this.left.length?this.left.get(r):this.right.get(r-this.left.length)},t.prototype.forEachInner=function(r,i,s,o){var l=this.left.length;if(i<l&&this.left.forEachInner(r,i,Math.min(s,l),o)===!1||s>l&&this.right.forEachInner(r,Math.max(i-l,0),Math.min(this.length,s)-l,o+l)===!1)return!1},t.prototype.forEachInvertedInner=function(r,i,s,o){var l=this.left.length;if(i>l&&this.right.forEachInvertedInner(r,i-l,Math.max(s,l)-l,o+l)===!1||s<l&&this.left.forEachInvertedInner(r,Math.min(i,l),s,o)===!1)return!1},t.prototype.sliceInner=function(r,i){if(r==0&&i==this.length)return this;var s=this.left.length;return i<=s?this.left.slice(r,i):r>=s?this.right.slice(r-s,i-s):this.left.slice(r,s).append(this.right.slice(0,i-s))},t.prototype.leafAppend=function(r){var i=this.right.leafAppend(r);if(i)return new t(this.left,i)},t.prototype.leafPrepend=function(r){var i=this.left.leafPrepend(r);if(i)return new t(i,this.right)},t.prototype.appendInner=function(r){return this.left.depth>=Math.max(this.right.depth,r.depth)+1?new t(this.left,new t(this.right,r)):new t(this,r)},t})(tn);const iee=500;class jr{constructor(t,n){this.items=t,this.eventCount=n}popEvent(t,n){if(this.eventCount==0)return null;let r=this.items.length;for(;;r--)if(this.items.get(r-1).selection){--r;break}let i,s;n&&(i=this.remapping(r,this.items.length),s=i.maps.length);let o=t.tr,l,c,f=[],h=[];return this.items.forEach((p,g)=>{if(!p.step){i||(i=this.remapping(r,g+1),s=i.maps.length),s--,h.push(p);return}if(i){h.push(new Xr(p.map));let y=p.step.map(i.slice(s)),b;y&&o.maybeStep(y).doc&&(b=o.mapping.maps[o.mapping.maps.length-1],f.push(new Xr(b,void 0,void 0,f.length+h.length))),s--,b&&i.appendMap(b,s)}else o.maybeStep(p.step);if(p.selection)return l=i?p.selection.map(i.slice(s)):p.selection,c=new jr(this.items.slice(0,r).append(h.reverse().concat(f)),this.eventCount-1),!1},this.items.length,0),{remaining:c,transform:o,selection:l}}addTransform(t,n,r,i){let s=[],o=this.eventCount,l=this.items,c=!i&&l.length?l.get(l.length-1):null;for(let h=0;h<t.steps.length;h++){let p=t.steps[h].invert(t.docs[h]),g=new Xr(t.mapping.maps[h],p,n),y;(y=c&&c.merge(g))&&(g=y,h?s.pop():l=l.slice(0,l.length-1)),s.push(g),n&&(o++,n=void 0),i||(c=g)}let f=o-r.depth;return f>oee&&(l=see(l,f),o-=f),new jr(l.append(s),o)}remapping(t,n){let r=new Mc;return this.items.forEach((i,s)=>{let o=i.mirrorOffset!=null&&s-i.mirrorOffset>=t?r.maps.length-i.mirrorOffset:void 0;r.appendMap(i.map,o)},t,n),r}addMaps(t){return this.eventCount==0?this:new jr(this.items.append(t.map(n=>new Xr(n))),this.eventCount)}rebased(t,n){if(!this.eventCount)return this;let r=[],i=Math.max(0,this.items.length-n),s=t.mapping,o=t.steps.length,l=this.eventCount;this.items.forEach(g=>{g.selection&&l--},i);let c=n;this.items.forEach(g=>{let y=s.getMirror(--c);if(y==null)return;o=Math.min(o,y);let b=s.maps[y];if(g.step){let S=t.steps[y].invert(t.docs[y]),x=g.selection&&g.selection.map(s.slice(c+1,y));x&&l++,r.push(new Xr(b,S,x))}else r.push(new Xr(b))},i);let f=[];for(let g=n;g<o;g++)f.push(new Xr(s.maps[g]));let h=this.items.slice(0,i).append(f).append(r),p=new jr(h,l);return p.emptyItemCount()>iee&&(p=p.compress(this.items.length-r.length)),p}emptyItemCount(){let t=0;return this.items.forEach(n=>{n.step||t++}),t}compress(t=this.items.length){let n=this.remapping(0,t),r=n.maps.length,i=[],s=0;return this.items.forEach((o,l)=>{if(l>=t)i.push(o),o.selection&&s++;else if(o.step){let c=o.step.map(n.slice(r)),f=c&&c.getMap();if(r--,f&&n.appendMap(f,r),c){let h=o.selection&&o.selection.map(n.slice(r));h&&s++;let p=new Xr(f.invert(),c,h),g,y=i.length-1;(g=i.length&&i[y].merge(p))?i[y]=g:i.push(p)}}else o.map&&r--},this.items.length,0),new jr(tn.from(i.reverse()),s)}}jr.empty=new jr(tn.empty,0);function see(e,t){let n;return e.forEach((r,i)=>{if(r.selection&&t--==0)return n=i,!1}),e.slice(n)}class Xr{constructor(t,n,r,i){this.map=t,this.step=n,this.selection=r,this.mirrorOffset=i}merge(t){if(this.step&&t.step&&!t.selection){let n=t.step.merge(this.step);if(n)return new Xr(n.getMap().invert(),n,this.selection)}}}class Ts{constructor(t,n,r,i,s){this.done=t,this.undone=n,this.prevRanges=r,this.prevTime=i,this.prevComposition=s}}const oee=20;function aee(e,t,n,r){let i=n.getMeta(Bo),s;if(i)return i.historyState;n.getMeta(cee)&&(e=new Ts(e.done,e.undone,null,0,-1));let o=n.getMeta("appendedTransaction");if(n.steps.length==0)return e;if(o&&o.getMeta(Bo))return o.getMeta(Bo).redo?new Ts(e.done.addTransform(n,void 0,r,fh(t)),e.undone,ER(n.mapping.maps),e.prevTime,e.prevComposition):new Ts(e.done,e.undone.addTransform(n,void 0,r,fh(t)),null,e.prevTime,e.prevComposition);if(n.getMeta("addToHistory")!==!1&&!(o&&o.getMeta("addToHistory")===!1)){let l=n.getMeta("composition"),c=e.prevTime==0||!o&&e.prevComposition!=l&&(e.prevTime<(n.time||0)-r.newGroupDelay||!lee(n,e.prevRanges)),f=o?z0(e.prevRanges,n.mapping):ER(n.mapping.maps);return new Ts(e.done.addTransform(n,c?t.selection.getBookmark():void 0,r,fh(t)),jr.empty,f,n.time,l??e.prevComposition)}else return(s=n.getMeta("rebased"))?new Ts(e.done.rebased(n,s),e.undone.rebased(n,s),z0(e.prevRanges,n.mapping),e.prevTime,e.prevComposition):new Ts(e.done.addMaps(n.mapping.maps),e.undone.addMaps(n.mapping.maps),z0(e.prevRanges,n.mapping),e.prevTime,e.prevComposition)}function lee(e,t){if(!t)return!1;if(!e.docChanged)return!0;let n=!1;return e.mapping.maps[0].forEach((r,i)=>{for(let s=0;s<t.length;s+=2)r<=t[s+1]&&i>=t[s]&&(n=!0)}),n}function ER(e){let t=[];for(let n=e.length-1;n>=0&&t.length==0;n--)e[n].forEach((r,i,s,o)=>t.push(s,o));return t}function z0(e,t){if(!e)return null;let n=[];for(let r=0;r<e.length;r+=2){let i=t.map(e[r],1),s=t.map(e[r+1],-1);i<=s&&n.push(i,s)}return n}function uee(e,t,n){let r=fh(t),i=Bo.get(t).spec.config,s=(n?e.undone:e.done).popEvent(t,r);if(!s)return null;let o=s.selection.resolve(s.transform.doc),l=(n?e.done:e.undone).addTransform(s.transform,t.selection.getBookmark(),i,r),c=new Ts(n?l:s.remaining,n?s.remaining:l,null,0,-1);return s.transform.setSelection(o).setMeta(Bo,{redo:n,historyState:c})}let q0=!1,CR=null;function fh(e){let t=e.plugins;if(CR!=t){q0=!1,CR=t;for(let n=0;n<t.length;n++)if(t[n].spec.historyPreserveItems){q0=!0;break}}return q0}const Bo=new nn("history"),cee=new nn("closeHistory");function fee(e={}){return e={depth:e.depth||100,newGroupDelay:e.newGroupDelay||500},new Rt({key:Bo,state:{init(){return new Ts(jr.empty,jr.empty,null,0,-1)},apply(t,n,r){return aee(n,r,t,e)}},config:e,props:{handleDOMEvents:{beforeinput(t,n){let r=n.inputType,i=r=="historyUndo"?Dz:r=="historyRedo"?Oz:null;return i?(n.preventDefault(),i(t.state,t.dispatch)):!1}}}})}function Rz(e,t){return(n,r)=>{let i=Bo.getState(n);if(!i||(e?i.undone:i.done).eventCount==0)return!1;if(r){let s=uee(i,n,e);s&&r(t?s.scrollIntoView():s)}return!0}}const Dz=Rz(!1,!0),Oz=Rz(!0,!0);Lt.create({name:"characterCount",addOptions(){return{limit:null,mode:"textSize",textCounter:e=>e.length,wordCounter:e=>e.split(" ").filter(t=>t!=="").length}},addStorage(){return{characters:()=>0,words:()=>0}},onBeforeCreate(){this.storage.characters=e=>{const t=e?.node||this.editor.state.doc;if((e?.mode||this.options.mode)==="textSize"){const r=t.textBetween(0,t.content.size,void 0," ");return this.options.textCounter(r)}return t.nodeSize},this.storage.words=e=>{const t=e?.node||this.editor.state.doc,n=t.textBetween(0,t.content.size," "," ");return this.options.wordCounter(n)}},addProseMirrorPlugins(){let e=!1;return[new Rt({key:new nn("characterCount"),appendTransaction:(t,n,r)=>{if(e)return;const i=this.options.limit;if(i==null||i===0){e=!0;return}const s=this.storage.characters({node:r.doc});if(s>i){const o=s-i,l=0,c=o;console.warn(`[CharacterCount] Initial content exceeded limit of ${i} characters. Content was automatically trimmed.`);const f=r.tr.deleteRange(l,c);return e=!0,f}e=!0},filterTransaction:(t,n)=>{const r=this.options.limit;if(!t.docChanged||r===0||r===null||r===void 0)return!0;const i=this.storage.characters({node:n.doc}),s=this.storage.characters({node:t.doc});if(s<=r||i>r&&s>r&&s<=i)return!0;if(i>r&&s>r&&s>i||!t.getMeta("paste"))return!1;const l=t.selection.$head.pos,c=s-r,f=l-c,h=l;return t.deleteRange(f,h),!(this.storage.characters({node:t.doc})>r)}})]}});var dee=Lt.create({name:"dropCursor",addOptions(){return{color:"currentColor",width:1,class:void 0}},addProseMirrorPlugins(){return[YJ(this.options)]}});Lt.create({name:"focus",addOptions(){return{className:"has-focus",mode:"all"}},addProseMirrorPlugins(){return[new Rt({key:new nn("focus"),props:{decorations:({doc:e,selection:t})=>{const{isEditable:n,isFocused:r}=this.editor,{anchor:i}=t,s=[];if(!n||!r)return Et.create(e,[]);let o=0;this.options.mode==="deepest"&&e.descendants((c,f)=>{if(c.isText)return;if(!(i>=f&&i<=f+c.nodeSize-1))return!1;o+=1});let l=0;return e.descendants((c,f)=>{if(c.isText||!(i>=f&&i<=f+c.nodeSize-1))return!1;if(l+=1,this.options.mode==="deepest"&&o-l>0||this.options.mode==="shallowest"&&l>1)return this.options.mode==="deepest";s.push(Tn.node(f,f+c.nodeSize,{class:this.options.className}))}),Et.create(e,s)}}})]}});var hee=Lt.create({name:"gapCursor",addProseMirrorPlugins(){return[QJ()]},extendNodeSchema(e){var t;const n={name:e.name,options:e.options,storage:e.storage};return{allowGapCursor:(t=it(_e(e,"allowGapCursor",n)))!=null?t:null}}}),pee=Lt.create({name:"placeholder",addOptions(){return{emptyEditorClass:"is-editor-empty",emptyNodeClass:"is-empty",placeholder:"Write something …",showOnlyWhenEditable:!0,showOnlyCurrent:!0,includeChildren:!1}},addProseMirrorPlugins(){return[new Rt({key:new nn("placeholder"),props:{decorations:({doc:e,selection:t})=>{const n=this.editor.isEditable||!this.options.showOnlyWhenEditable,{anchor:r}=t,i=[];if(!n)return null;const s=this.editor.isEmpty;return e.descendants((o,l)=>{const c=r>=l&&r<=l+o.nodeSize,f=!o.isLeaf&&Zp(o);if((c||!this.options.showOnlyCurrent)&&f){const h=[this.options.emptyNodeClass];s&&h.push(this.options.emptyEditorClass);const p=Tn.node(l,l+o.nodeSize,{class:h.join(" "),"data-placeholder":typeof this.options.placeholder=="function"?this.options.placeholder({editor:this.editor,node:o,pos:l,hasAnchor:c}):this.options.placeholder});i.push(p)}return this.options.includeChildren}),Et.create(e,i)}}})]}});Lt.create({name:"selection",addOptions(){return{className:"selection"}},addProseMirrorPlugins(){const{editor:e,options:t}=this;return[new Rt({key:new nn("selection"),props:{decorations(n){return n.selection.empty||e.isFocused||!e.isEditable||$I(n.selection)||e.view.dragging?null:Et.create(n.doc,[Tn.inline(n.selection.from,n.selection.to,{class:t.className})])}}})]}});function kR({types:e,node:t}){return t&&Array.isArray(e)&&e.includes(t.type)||t?.type===e}var mee=Lt.create({name:"trailingNode",addOptions(){return{node:"paragraph",notAfter:[]}},addProseMirrorPlugins(){const e=new nn(this.name),t=Object.entries(this.editor.schema.nodes).map(([,n])=>n).filter(n=>(this.options.notAfter||[]).concat(this.options.node).includes(n.name));return[new Rt({key:e,appendTransaction:(n,r,i)=>{const{doc:s,tr:o,schema:l}=i,c=e.getState(i),f=s.content.size,h=l.nodes[this.options.node];if(c)return o.insert(f,h.create())},state:{init:(n,r)=>{const i=r.tr.doc.lastChild;return!kR({node:i,types:t})},apply:(n,r)=>{if(!n.docChanged)return r;const i=n.doc.lastChild;return!kR({node:i,types:t})}}})]}}),gee=Lt.create({name:"undoRedo",addOptions(){return{depth:100,newGroupDelay:500}},addCommands(){return{undo:()=>({state:e,dispatch:t})=>Dz(e,t),redo:()=>({state:e,dispatch:t})=>Oz(e,t)}},addProseMirrorPlugins(){return[fee(this.options)]},addKeyboardShortcuts(){return{"Mod-z":()=>this.editor.commands.undo(),"Shift-Mod-z":()=>this.editor.commands.redo(),"Mod-y":()=>this.editor.commands.redo(),"Mod-я":()=>this.editor.commands.undo(),"Shift-Mod-я":()=>this.editor.commands.redo()}}}),yee=Lt.create({name:"starterKit",addExtensions(){var e,t,n,r;const i=[];return this.options.bold!==!1&&i.push(GQ.configure(this.options.bold)),this.options.blockquote!==!1&&i.push(VQ.configure(this.options.blockquote)),this.options.bulletList!==!1&&i.push(QC.configure(this.options.bulletList)),this.options.code!==!1&&i.push(WQ.configure(this.options.code)),this.options.codeBlock!==!1&&i.push(QQ.configure(this.options.codeBlock)),this.options.document!==!1&&i.push(JQ.configure(this.options.document)),this.options.dropcursor!==!1&&i.push(dee.configure(this.options.dropcursor)),this.options.gapcursor!==!1&&i.push(hee.configure(this.options.gapcursor)),this.options.hardBreak!==!1&&i.push(eJ.configure(this.options.hardBreak)),this.options.heading!==!1&&i.push(dz.configure(this.options.heading)),this.options.undoRedo!==!1&&i.push(gee.configure(this.options.undoRedo)),this.options.horizontalRule!==!1&&i.push(nJ.configure(this.options.horizontalRule)),this.options.italic!==!1&&i.push(aJ.configure(this.options.italic)),this.options.listItem!==!1&&i.push(JC.configure(this.options.listItem)),this.options.listKeymap!==!1&&i.push(Mz.configure((e=this.options)==null?void 0:e.listKeymap)),this.options.link!==!1&&i.push(Sz.configure((t=this.options)==null?void 0:t.link)),this.options.orderedList!==!1&&i.push(tk.configure(this.options.orderedList)),this.options.paragraph!==!1&&i.push(HJ.configure(this.options.paragraph)),this.options.strike!==!1&&i.push($J.configure(this.options.strike)),this.options.text!==!1&&i.push(GJ.configure(this.options.text)),this.options.underline!==!1&&i.push(Nz.configure((n=this.options)==null?void 0:n.underline)),this.options.trailingNode!==!1&&i.push(mee.configure((r=this.options)==null?void 0:r.trailingNode)),i}}),vee=yee,bee=Lt.create({name:"textAlign",addOptions(){return{types:[],alignments:["left","center","right","justify"],defaultAlignment:null}},addGlobalAttributes(){return[{types:this.options.types,attributes:{textAlign:{default:this.options.defaultAlignment,parseHTML:e=>{const t=e.style.textAlign;return this.options.alignments.includes(t)?t:this.options.defaultAlignment},renderHTML:e=>e.textAlign?{style:`text-align: ${e.textAlign}`}:{}}}}]},addCommands(){return{setTextAlign:e=>({commands:t})=>this.options.alignments.includes(e)?this.options.types.map(n=>t.updateAttributes(n,{textAlign:e})).every(n=>n):!1,unsetTextAlign:()=>({commands:e})=>this.options.types.map(t=>e.resetAttributes(t,"textAlign")).every(t=>t),toggleTextAlign:e=>({editor:t,commands:n})=>this.options.alignments.includes(e)?t.isActive({textAlign:e})?n.unsetTextAlign():n.setTextAlign(e):!1}},addKeyboardShortcuts(){return{"Mod-Shift-l":()=>this.editor.commands.setTextAlign("left"),"Mod-Shift-e":()=>this.editor.commands.setTextAlign("center"),"Mod-Shift-r":()=>this.editor.commands.setTextAlign("right"),"Mod-Shift-j":()=>this.editor.commands.setTextAlign("justify")}}}),xee=bee,wee=pee,See=QC,Eee=tk,Cee=JC;const tm=({label:e,id:t,children:n,focused:r,containerClassName:i})=>{const s=`${t}-label`;return w.jsxs(Cn.div,{initial:{opacity:0,y:-4,scale:.98},animate:{opacity:1,y:0,scale:1},transition:{type:"spring",stiffness:260,damping:24},className:`flex flex-col gap-1 ${i||""}`,children:[e&&w.jsx(Cn.label,{id:s,htmlFor:t,className:"text-xs text-muted",animate:{color:r?"var(--brand)":"var(--muted)"},transition:{duration:.25},children:e}),n]})},nm=()=>{const[e,t]=Pe.useState(!1);return{focused:e,onFocus:()=>t(!0),onBlur:()=>t(!1)}};function kee(e){return mt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M9.4 16.6 4.8 12l4.6-4.6L8 6l-6 6 6 6 1.4-1.4zm5.2 0 4.6-4.6-4.6-4.6L16 6l6 6-6 6-1.4-1.4z"},child:[]}]})(e)}function rk(e){return mt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 19c0 1.1.9 2 2 2h8c1.1 0 2-.9 2-2V7H6v12zM19 4h-3.5l-1-1h-5l-1 1H5v2h14V4z"},child:[]}]})(e)}function jz(e){return mt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M19.14 12.94c.04-.3.06-.61.06-.94 0-.32-.02-.64-.07-.94l2.03-1.58a.49.49 0 0 0 .12-.61l-1.92-3.32a.488.488 0 0 0-.59-.22l-2.39.96c-.5-.38-1.03-.7-1.62-.94l-.36-2.54a.484.484 0 0 0-.48-.41h-3.84c-.24 0-.43.17-.47.41l-.36 2.54c-.59.24-1.13.57-1.62.94l-2.39-.96c-.22-.08-.47 0-.59.22L2.74 8.87c-.12.21-.08.47.12.61l2.03 1.58c-.05.3-.09.63-.09.94s.02.64.07.94l-2.03 1.58a.49.49 0 0 0-.12.61l1.92 3.32c.12.22.37.29.59.22l2.39-.96c.5.38 1.03.7 1.62.94l.36 2.54c.05.24.24.41.48.41h3.84c.24 0 .44-.17.47-.41l.36-2.54c.59-.24 1.13-.56 1.62-.94l2.39.96c.22.08.47 0 .59-.22l1.92-3.32c.12-.22.07-.47-.12-.61l-2.01-1.58zM12 15.6c-1.98 0-3.6-1.62-3.6-3.6s1.62-3.6 3.6-3.6 3.6 1.62 3.6 3.6-1.62 3.6-3.6 3.6z"},child:[]}]})(e)}function Tee(e){return mt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M19 13h-6v6h-2v-6H5v-2h6V5h2v6h6v2z"},child:[]}]})(e)}function Aee(e){return mt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M18 2H9c-1.1 0-2 .9-2 2v12c0 1.1.9 2 2 2h9c1.1 0 2-.9 2-2V4c0-1.1-.9-2-2-2zm0 14H9V4h9v12zM3 15v-2h2v2H3zm0-5.5h2v2H3v-2zM10 20h2v2h-2v-2zm-7-1.5v-2h2v2H3zM5 22c-1.1 0-2-.9-2-2h2v2zm3.5 0h-2v-2h2v2zm5 0v-2h2c0 1.1-.9 2-2 2zM5 6v2H3c0-1.1.9-2 2-2z"},child:[]}]})(e)}function Mee(e){return mt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 15v2h10v-2H7zm-4 6h18v-2H3v2zm0-8h18v-2H3v2zm4-6v2h10V7H7zM3 3v2h18V3H3z"},child:[]}]})(e)}function Nee(e){return mt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15 15H3v2h12v-2zm0-8H3v2h12V7zM3 13h18v-2H3v2zm0 8h18v-2H3v2zM3 3v2h18V3H3z"},child:[]}]})(e)}function _ee(e){return mt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M3 21h18v-2H3v2zm6-4h12v-2H9v2zm-6-4h18v-2H3v2zm6-4h12V7H9v2zM3 3v2h18V3H3z"},child:[]}]})(e)}function Ree(e){return mt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M15.6 10.79c.97-.67 1.65-1.77 1.65-2.79 0-2.26-1.75-4-4-4H7v14h7.04c2.09 0 3.71-1.7 3.71-3.79 0-1.52-.86-2.82-2.15-3.42zM10 6.5h3c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5h-3v-3zm3.5 9H10v-3h3.5c.83 0 1.5.67 1.5 1.5s-.67 1.5-1.5 1.5z"},child:[]}]})(e)}function Dee(e){return mt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M10 4v3h2.21l-3.42 8H6v3h8v-3h-2.21l3.42-8H18V4z"},child:[]}]})(e)}function Oee(e){return mt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0V0z"},child:[]},{tag:"path",attr:{d:"M4 10.5c-.83 0-1.5.67-1.5 1.5s.67 1.5 1.5 1.5 1.5-.67 1.5-1.5-.67-1.5-1.5-1.5zm0-6c-.83 0-1.5.67-1.5 1.5S3.17 7.5 4 7.5 5.5 6.83 5.5 6 4.83 4.5 4 4.5zm0 12c-.83 0-1.5.68-1.5 1.5s.68 1.5 1.5 1.5 1.5-.68 1.5-1.5-.67-1.5-1.5-1.5zM7 19h14v-2H7v2zm0-6h14v-2H7v2zm0-8v2h14V5H7z"},child:[]}]})(e)}function jee(e){return mt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M2 17h2v.5H3v1h1v.5H2v1h3v-4H2v1zm1-9h1V4H2v1h1v3zm-1 3h1.8L2 13.1v.9h3v-1H3.2L5 10.9V10H2v1zm5-6v2h14V5H7zm0 14h14v-2H7v2zm0-6h14v-2H7v2z"},child:[]}]})(e)}function Lee(e){return mt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M6 17h3l2-4V7H5v6h3zm8 0h3l2-4V7h-6v6h3z"},child:[]}]})(e)}function Pee(e){return mt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M12 17c3.31 0 6-2.69 6-6V3h-2.5v8c0 1.93-1.57 3.5-3.5 3.5S8.5 12.93 8.5 11V3H6v8c0 3.31 2.69 6 6 6zm-7 2v2h14v-2H5z"},child:[]}]})(e)}function Bee(e){return mt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"m12 8-6 6 1.41 1.41L12 10.83l4.59 4.58L18 14z"},child:[]}]})(e)}function Iee(e){return mt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M16.59 8.59 12 13.17 7.41 8.59 6 10l6 6 6-6z"},child:[]}]})(e)}function zee(e){return mt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M5 16h3v3h2v-5H5v2zm3-8H5v2h5V5H8v3zm6 11h2v-3h3v-2h-5v5zm2-11V5h-2v5h5V8h-3z"},child:[]}]})(e)}function qee(e){return mt({attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{fill:"none",d:"M0 0h24v24H0z"},child:[]},{tag:"path",attr:{d:"M7 14H5v5h5v-2H7v-3zm-2-4h2V7h3V5H5v5zm12 7h-3v2h5v-5h-2v3zM14 5v2h3v3h2V5h-5z"},child:[]}]})(e)}const $a=({onClick:e,disabled:t,active:n,title:r,children:i})=>w.jsx("button",{onClick:e,disabled:t,title:r,className:`px-2 py-1 rounded transition-colors ${n?"bg-[var(--brand)] text-white":"hover:bg-[var(--bg-hover)] text-theme"} ${t?"opacity-50 cursor-not-allowed":""}`,children:i}),TR=({editor:e,disabled:t})=>{let n="0";return e.isActive("heading",{level:1})?n="1":e.isActive("heading",{level:2})?n="2":e.isActive("heading",{level:3})&&(n="3"),w.jsxs("select",{title:"Heading level",value:n,onChange:r=>{const i=parseInt(r.target.value,10);i===0?e.chain().focus().setParagraph().run():e.chain().focus().toggleHeading({level:i}).run()},className:"rounded border px-1 py-0.5 bg-[var(--surface)] text-theme",disabled:t,children:[w.jsx("option",{value:"0",children:"P"}),w.jsx("option",{value:"1",children:"H1"}),w.jsx("option",{value:"2",children:"H2"}),w.jsx("option",{value:"3",children:"H3"})]})},mp=({id:e,label:t,value:n,onChange:r,placeholder:i="Start typing…",disabled:s=!1,className:o="",containerClassName:l})=>{const[,c]=P.useState(0),[f,h]=P.useState(!1),{focused:p,onFocus:g,onBlur:y}=nm(),b=()=>c(Date.now()),S=()=>{h(!f)},x=PQ({extensions:[vee.configure({bulletList:!1,orderedList:!1,listItem:!1}),See.configure({HTMLAttributes:{class:"bullet-list"}}),Eee.configure({HTMLAttributes:{class:"ordered-list"}}),Cee.configure({HTMLAttributes:{class:"list-item"}}),KJ,DJ.configure({openOnClick:!1}),xee.configure({types:["heading","paragraph"]}),tJ.configure({levels:[1,2,3]}),wee.configure({placeholder:i})],content:n,editable:!s,onUpdate:({editor:A})=>{r(A.getHTML())},onFocus:g,onBlur:y,onSelectionUpdate:()=>{b()},onTransaction:()=>{b()}});if(P.useEffect(()=>{x&&(n!==x.getHTML()&&x.commands.setContent(n,{emitUpdate:!1}),x.setEditable(!s))},[n,s,x]),P.useEffect(()=>{const A=M=>{M.key==="Escape"&&f&&h(!1)};return f?(document.addEventListener("keydown",A),document.body.style.overflow="hidden"):document.body.style.overflow="",()=>{document.removeEventListener("keydown",A),document.body.style.overflow=""}},[f]),!x)return null;const C=[{key:"bold",title:"Bold",onClick:()=>x.chain().focus().toggleBold().run(),active:x.isActive("bold"),node:w.jsx(Ree,{size:16})},{key:"italic",title:"Italic",onClick:()=>x.chain().focus().toggleItalic().run(),active:x.isActive("italic"),node:w.jsx(Dee,{size:16})},{key:"underline",title:"Underline",onClick:()=>x.chain().focus().toggleUnderline().run(),active:x.isActive("underline"),node:w.jsx(Pee,{size:16})},{key:"strike",title:"Strikethrough",onClick:()=>x.chain().focus().toggleStrike().run(),active:x.isActive("strike"),node:w.jsx(w.Fragment,{children:"S"})},{key:"bulletList",title:"Bullet List",onClick:()=>x.chain().focus().toggleBulletList().run(),active:x.isActive("bulletList"),node:w.jsx(Oee,{size:16})},{key:"orderedList",title:"Numbered List",onClick:()=>x.chain().focus().toggleOrderedList().run(),active:x.isActive("orderedList"),node:w.jsx(jee,{size:16})},{key:"blockquote",title:"Quote",onClick:()=>x.chain().focus().toggleBlockquote().run(),active:x.isActive("blockquote"),node:w.jsx(Lee,{size:16})},{key:"codeBlock",title:"Code Block",onClick:()=>x.chain().focus().toggleCodeBlock().run(),active:x.isActive("codeBlock"),node:w.jsx(kee,{size:16})}],T=[{key:"align-left",title:"Align Left",onClick:()=>x.chain().focus().setTextAlign("left").run(),active:x.isActive({textAlign:"left"}),node:w.jsx(Nee,{size:16})},{key:"align-center",title:"Align Center",onClick:()=>x.chain().focus().setTextAlign("center").run(),active:x.isActive({textAlign:"center"}),node:w.jsx(Mee,{size:16})},{key:"align-right",title:"Align Right",onClick:()=>x.chain().focus().setTextAlign("right").run(),active:x.isActive({textAlign:"right"}),node:w.jsx(_ee,{size:16})}],k=[{key:"fullscreen",title:f?"Exit Fullscreen":"Enter Fullscreen",onClick:S,active:f,node:f?w.jsx(zee,{size:16}):w.jsx(qee,{size:16})}];return w.jsx("div",{className:f?"fixed inset-0 z-50 bg-[var(--bg)] flex flex-col":"",children:f?w.jsxs(Cn.div,{className:"h-full flex flex-col rounded-lg border border-[var(--border)] bg-[var(--surface)] text-theme m-4",animate:{boxShadow:p?"0 0 0 2px var(--brand)":"0 0 0 1px var(--border)"},transition:{type:"spring",stiffness:300,damping:30},children:[w.jsxs("div",{className:"flex flex-wrap items-center gap-1 border-b border-[var(--border)] p-2 text-sm shrink-0",children:[w.jsx("div",{className:"flex items-center gap-2 mr-4",children:t&&w.jsx("span",{className:"font-medium text-theme",children:t})}),w.jsx(TR,{editor:x,disabled:s}),C.map(A=>w.jsx($a,{onClick:A.onClick,disabled:s,active:A.active,title:A.title,children:A.node},A.key)),T.map(A=>w.jsx($a,{onClick:A.onClick,disabled:s,active:A.active,title:A.title,children:A.node},A.key)),w.jsx("div",{className:"w-px h-6 bg-[var(--border)] mx-1"}),k.map(A=>w.jsx($a,{onClick:A.onClick,disabled:s,active:A.active,title:A.title,children:A.node},A.key))]}),w.jsx("div",{className:"flex-1 overflow-hidden",children:w.jsx("div",{className:"h-full overflow-y-auto p-4",children:w.jsx("div",{className:"prose prose-invert max-w-none min-h-full",children:w.jsx(fR,{editor:x,className:"focus:outline-none h-full"})})})})]}):w.jsx(tm,{id:e,label:t,focused:p,containerClassName:l,children:w.jsxs(Cn.div,{className:`rounded-lg border border-[var(--border)] bg-[var(--surface)] text-theme ${o} ${s?"opacity-60 cursor-not-allowed":""}`,animate:{boxShadow:p?"0 0 0 2px var(--brand)":"0 0 0 1px var(--border)"},transition:{type:"spring",stiffness:300,damping:30},children:[w.jsxs("div",{className:"flex flex-wrap items-center gap-1 border-b border-[var(--border)] p-1 text-sm",children:[w.jsx(TR,{editor:x,disabled:s}),C.map(A=>w.jsx($a,{onClick:A.onClick,disabled:s,active:A.active,title:A.title,children:A.node},A.key)),T.map(A=>w.jsx($a,{onClick:A.onClick,disabled:s,active:A.active,title:A.title,children:A.node},A.key)),w.jsx("div",{className:"w-px h-6 bg-[var(--border)] mx-1"}),k.map(A=>w.jsx($a,{onClick:A.onClick,disabled:s,active:A.active,title:A.title,children:A.node},A.key))]}),w.jsx("div",{className:"p-3 min-h-[8rem] prose prose-invert max-w-none",children:w.jsx(fR,{editor:x,className:"focus:outline-none"})})]})})})},Vee=()=>{Tl();const e=Op(),[t,n]=P.useState(!1),r=P.useRef(0),i=()=>(r.current+=1,`item-${Date.now()}-${r.current}`),[s,o]=P.useState({title:"",description:"",difficulty:"Medium",category:"Web Application",estimatedTime:"30 minutes",requirements:[{id:i(),value:""}],constraints:[{id:i(),value:""}],hints:[{id:i(),value:""}],tags:[{id:i(),value:""}]}),l=(g,y)=>{o(b=>({...b,[g]:y}))},c=(g,y,b)=>{const S=s[g].map(x=>x.id===y?{...x,value:b}:x);o(x=>({...x,[g]:S}))},f=g=>{o(y=>({...y,[g]:[...y[g],{id:i(),value:""}]}))},h=(g,y)=>{const b=s[g].filter(S=>S.id!==y);o(S=>({...S,[g]:b.length>0?b:[{id:i(),value:""}]}))},p=()=>{n(!0);const g={id:`custom-${Date.now()}`,title:s.title,description:s.description,difficulty:s.difficulty,category:s.category,estimated_time:s.estimatedTime,requirements:s.requirements.map(y=>y.value).filter(y=>y.trim()!==""),constraints:s.constraints.map(y=>y.value).filter(y=>y.trim()!==""),hints:s.hints.map(y=>y.value).filter(y=>y.trim()!==""),tags:s.tags.map(y=>y.value).filter(y=>y.trim()!=="")};localStorage.setItem(`custom-problem-${g.id}`,JSON.stringify(g)),setTimeout(()=>{e(`/playground/${g.id}`)},300)};return w.jsxs(w.Fragment,{children:[w.jsx(Lp,{title:"Create Custom System Design Problem | Diagrammatic",description:"Create and share custom system design problems with your students or team. Define requirements, constraints, and evaluation criteria for personalized learning experiences.",keywords:"create system design problem, custom architecture challenge, teaching system design, system design assignment creator",url:"https://satya00089.github.io/diagrammatic/#/create-problem"}),w.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-[var(--surface)] via-[var(--bg)] to-[var(--surface)] text-theme relative grid-pattern-overlay",children:[w.jsx("header",{className:"fixed top-0 left-0 right-0 z-50 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] transition-all duration-300 shadow-lg",children:w.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:w.jsxs("div",{className:"flex items-center justify-between h-16",children:[w.jsxs("button",{type:"button",onClick:()=>e("/"),className:"flex items-center space-x-3 group cursor-pointer",children:[w.jsx("img",{src:"./logo.png",alt:"Logo",className:"h-10 transition-transform group-hover:scale-110 duration-300"}),w.jsx("span",{className:"text-xl font-bold text-white",children:"Diagrammatic"})]}),w.jsx("div",{className:"flex items-center gap-4",children:w.jsx(jp,{})})]})})}),w.jsx("div",{className:"pt-16 relative z-10",children:w.jsxs("div",{className:"max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[w.jsxs("div",{className:"text-center mb-12",children:[w.jsx("div",{className:"inline-block mb-4",children:w.jsx("span",{className:"px-4 py-2 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] text-white text-sm font-semibold rounded-full shadow-lg",children:"✨ Custom Problem Creator"})}),w.jsx("h1",{className:"text-4xl md:text-5xl font-bold mb-4",children:"Create Custom Problem"}),w.jsx("p",{className:"text-muted text-lg max-w-2xl mx-auto",children:"Define your own system design challenge and start solving"})]}),w.jsx("div",{className:"elevated-card-bg backdrop-blur-md rounded-3xl shadow-2xl p-8 md:p-12",children:w.jsxs("div",{className:"space-y-8",children:[w.jsxs("div",{children:[w.jsxs("label",{htmlFor:"title",className:"text-sm font-bold text-theme mb-3 flex items-center gap-2",children:[w.jsx("span",{className:"text-xl",children:"📝"})," Problem Title *"]}),w.jsx("input",{id:"title",type:"text",value:s.title,onChange:g=>l("title",g.target.value),placeholder:"e.g., Design a URL Shortener",className:"w-full px-5 py-4 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme text-lg transition-all duration-300 hover:border-[var(--brand)]/30"})]}),w.jsx("div",{children:w.jsx(mp,{id:"description",label:"📄 Description *",value:s.description,onChange:g=>l("description",g),placeholder:"Describe the problem in detail..."})}),w.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[w.jsxs("div",{children:[w.jsxs("label",{htmlFor:"difficulty",className:"text-sm font-bold text-theme mb-3 flex items-center gap-2",children:[w.jsx("span",{className:"text-xl",children:"📊"})," Difficulty"]}),w.jsxs("select",{id:"difficulty",value:s.difficulty,onChange:g=>l("difficulty",g.target.value),className:"w-full px-5 py-4 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme cursor-pointer transition-all duration-300 hover:border-[var(--brand)]/30",children:[w.jsx("option",{value:"Easy",children:"Easy"}),w.jsx("option",{value:"Medium",children:"Medium"}),w.jsx("option",{value:"Hard",children:"Hard"})]})]}),w.jsxs("div",{children:[w.jsxs("label",{htmlFor:"category",className:"text-sm font-bold text-theme mb-3 flex items-center gap-2",children:[w.jsx("span",{className:"text-xl",children:"🏷️"})," Category"]}),w.jsx("input",{id:"category",type:"text",value:s.category,onChange:g=>l("category",g.target.value),placeholder:"e.g., Web Application",className:"w-full px-5 py-4 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"})]}),w.jsxs("div",{children:[w.jsxs("label",{htmlFor:"estimatedTime",className:"text-sm font-bold text-theme mb-3 flex items-center gap-2",children:[w.jsx("span",{className:"text-xl",children:"⏱️"})," Estimated Time"]}),w.jsx("input",{id:"estimatedTime",type:"text",value:s.estimatedTime,onChange:g=>l("estimatedTime",g.target.value),placeholder:"e.g., 30 minutes",className:"w-full px-5 py-4 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"})]})]}),w.jsxs("div",{className:"rounded-2xl bg-[var(--surface)]/50",children:[w.jsxs("div",{className:"flex items-center justify-between mb-4",children:[w.jsxs("div",{className:"text-sm font-bold text-theme flex items-center gap-2",children:[w.jsx("span",{className:"text-xl",children:"✅"})," Requirements"]}),w.jsx("button",{type:"button",onClick:()=>f("requirements"),className:"px-4 py-2 text-sm text-white bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-lg hover:shadow-lg transition-all duration-300 cursor-pointer font-semibold",children:"+ Add"})]}),s.requirements.map((g,y)=>w.jsx("div",{className:"mb-4",children:w.jsxs("div",{className:"flex gap-3 items-start",children:[w.jsx("div",{className:"flex-1",children:w.jsx(mp,{id:`requirement-${g.id}`,label:`Requirement ${y+1}`,value:g.value,onChange:b=>c("requirements",g.id,b),placeholder:"Enter a requirement (supports rich text formatting)"})}),s.requirements.length>1&&w.jsx("button",{type:"button",onClick:()=>h("requirements",g.id),className:"px-4 py-3 text-red-500 hover:bg-red-500/10 rounded-xl transition-colors cursor-pointer font-bold text-lg mt-8",children:"✕"})]})},g.id))]}),w.jsxs("div",{className:"rounded-2xl bg-[var(--surface)]/50",children:[w.jsxs("div",{className:"flex items-center justify-between mb-4",children:[w.jsxs("div",{className:"text-sm font-bold text-theme flex items-center gap-2",children:[w.jsx("span",{className:"text-xl",children:"⚠️"})," Constraints"]}),w.jsx("button",{type:"button",onClick:()=>f("constraints"),className:"px-4 py-2 text-sm text-white bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-lg hover:shadow-lg transition-all duration-300 cursor-pointer font-semibold",children:"+ Add"})]}),s.constraints.map(g=>w.jsxs("div",{className:"flex gap-3 mb-3",children:[w.jsx("input",{type:"text",value:g.value,onChange:y=>c("constraints",g.id,y.target.value),placeholder:"Enter a constraint",className:"flex-1 px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300"}),s.constraints.length>1&&w.jsx("button",{type:"button",onClick:()=>h("constraints",g.id),className:"px-4 py-3 text-red-500 hover:bg-red-500/10 rounded-xl transition-colors cursor-pointer font-bold text-lg",children:"✕"})]},g.id))]}),w.jsxs("div",{className:"rounded-2xl bg-[var(--surface)]/50",children:[w.jsxs("div",{className:"flex items-center justify-between mb-4",children:[w.jsxs("div",{className:"text-sm font-bold text-theme flex items-center gap-2",children:[w.jsx("span",{className:"text-xl",children:"💡"})," Hints (Optional)"]}),w.jsx("button",{type:"button",onClick:()=>f("hints"),className:"px-4 py-2 text-sm text-white bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-lg hover:shadow-lg transition-all duration-300 cursor-pointer font-semibold",children:"+ Add"})]}),s.hints.map(g=>w.jsxs("div",{className:"flex gap-3 mb-3",children:[w.jsx("input",{type:"text",value:g.value,onChange:y=>c("hints",g.id,y.target.value),placeholder:"Enter a helpful hint",className:"flex-1 px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300"}),s.hints.length>1&&w.jsx("button",{type:"button",onClick:()=>h("hints",g.id),className:"px-4 py-3 text-red-500 hover:bg-red-500/10 rounded-xl transition-colors cursor-pointer font-bold text-lg",children:"✕"})]},g.id))]}),w.jsxs("div",{className:"rounded-2xl bg-[var(--surface)]/50",children:[w.jsx("div",{className:"flex items-center justify-between mb-4",children:w.jsxs("div",{className:"text-sm font-bold text-theme flex items-center gap-2",children:[w.jsx("span",{className:"text-xl",children:"🏷️"})," Tags"]})}),s.tags.some(g=>g.value.trim())&&w.jsx("div",{className:"flex flex-wrap gap-2 mb-4",children:s.tags.filter(g=>g.value.trim()).map(g=>w.jsxs("div",{className:"inline-flex items-center gap-2 px-4 py-2 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] text-white rounded-full text-sm font-semibold shadow-md hover:shadow-lg transition-all duration-300 group",children:[w.jsx("span",{children:g.value}),w.jsx("button",{type:"button",onClick:()=>h("tags",g.id),className:"hover:bg-white/20 rounded-full p-1 transition-colors","aria-label":"Remove tag",children:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-4 w-4",viewBox:"0 0 20 20",fill:"currentColor",children:w.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]},g.id))}),w.jsxs("div",{className:"flex gap-3",children:[w.jsx("input",{type:"text",value:s.tags.at(-1)?.value||"",onChange:g=>c("tags",s.tags.at(-1)?.id||"",g.target.value),onKeyDown:g=>{g.key==="Enter"&&g.currentTarget.value.trim()&&(g.preventDefault(),f("tags"))},placeholder:"Type a tag and press Enter (e.g., caching, scalability)",className:"flex-1 px-4 py-3 border-2 border-[var(--theme)]/10 rounded-xl focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:border-transparent bg-[var(--bg)] text-theme transition-all duration-300 hover:border-[var(--brand)]/30"}),w.jsx("button",{type:"button",onClick:()=>{s.tags.at(-1)?.value.trim()&&f("tags")},className:"px-6 py-3 text-white bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] rounded-xl hover:shadow-lg transition-all duration-300 cursor-pointer font-semibold",children:"Add"})]})]}),w.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 pt-8 border-t-2 border-[var(--theme)]/10",children:[w.jsx("button",{type:"button",onClick:p,disabled:!s.title||!s.description||t,className:"flex-1 px-8 py-4 bg-gradient-to-r from-[var(--brand)] to-[var(--accent)] text-white font-bold rounded-xl hover:shadow-2xl disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-300 cursor-pointer flex items-center justify-center gap-3 text-lg hover:scale-105",children:t?w.jsxs(w.Fragment,{children:[w.jsx("span",{className:"inline-block w-5 h-5 border-3 border-white border-t-transparent rounded-full animate-spin"})," ","Creating..."]}):w.jsx(w.Fragment,{children:"🚀 Create & Start Designing"})}),w.jsx("button",{type:"button",onClick:()=>e("/"),disabled:t,className:"px-8 py-4 elevated-card-bg border-2 border-[var(--theme)]/10 text-theme font-bold rounded-xl hover:border-[var(--brand)]/30 transition-all duration-300 cursor-pointer disabled:opacity-50 disabled:cursor-not-allowed hover:scale-105",children:"Cancel"})]})]})})]})})]})]})},Lz=({id:e,checked:t,onChange:n,label:r,disabled:i=!1,className:s=""})=>w.jsxs("label",{htmlFor:e,className:`inline-flex items-center gap-2 text-sm cursor-pointer select-none ${i?"opacity-60 cursor-not-allowed":""} ${s}`,children:[w.jsxs("span",{className:"relative inline-flex items-center justify-center",children:[w.jsx("input",{id:e,type:"checkbox",checked:t,disabled:i,onChange:o=>n(o.target.checked),className:"peer w-4 h-4 cursor-pointer appearance-none rounded border border-theme bg-[var(--surface)] focus:outline-none focus:ring-2 focus:ring-[var(--brand)] focus:ring-offset-1 transition-colors disabled:cursor-not-allowed"}),w.jsx(G9,{children:t&&w.jsx(Cn.span,{initial:{scale:0,opacity:0,rotate:-45},animate:{scale:1,opacity:1,rotate:0},exit:{scale:.4,opacity:0,rotate:45},transition:{type:"spring",stiffness:400,damping:30},className:"pointer-events-none absolute w-3 h-3 flex items-center justify-center text-[10px] font-semibold text-white bg-[var(--brand)] rounded-sm shadow-sm",children:"✓"},"check")})]}),r&&w.jsx("span",{className:"text-sm text-theme",children:r})]}),Pz=({id:e,label:t,value:n,onChange:r,min:i,max:s,step:o,disabled:l,className:c="",containerClassName:f})=>{const{focused:h,onFocus:p,onBlur:g}=nm();return w.jsx(tm,{id:e,label:t,focused:h,containerClassName:f,children:w.jsx(Cn.input,{id:e,type:"number",value:n??"",onChange:y=>r(Number(y.target.value)),onFocus:p,onBlur:g,disabled:l,min:i,max:s,step:o,className:`w-full border p-1 px-2 rounded bg-[var(--surface)] text-theme outline-none ${l?"opacity-60 cursor-not-allowed":""} ${c}`,animate:{boxShadow:h?"0 0 0 2px var(--brand)":"0 0 0 1px var(--border)"},transition:{type:"spring",stiffness:300,damping:30}})})},dh=({id:e,label:t,value:n,onChange:r,placeholder:i,disabled:s,className:o="",containerClassName:l})=>{const{focused:c,onFocus:f,onBlur:h}=nm();return w.jsx(tm,{id:e,label:t,focused:c,containerClassName:l,children:w.jsx(Cn.input,{id:e,type:"text",value:n,placeholder:i,onChange:p=>r(p.target.value),onFocus:f,onBlur:h,disabled:s,className:`w-full border p-1 px-2 rounded bg-[var(--surface)] text-theme outline-none ${s?"opacity-60 cursor-not-allowed":""} ${o}`,animate:{boxShadow:c?"0 0 0 2px var(--brand)":"0 0 0 1px var(--border)"},transition:{type:"spring",stiffness:300,damping:30}})})},Bz=({id:e,label:t,value:n,onChange:r,options:i,disabled:s,className:o="",containerClassName:l})=>{const{focused:c,onFocus:f,onBlur:h}=nm(),p=`${e}-label`;return w.jsxs(tm,{id:e,label:t,focused:c,containerClassName:l,children:[!t&&w.jsx("label",{id:p,htmlFor:e,className:"sr-only",children:e}),w.jsx(Cn.div,{initial:{opacity:0,y:-4,scale:.98},animate:{opacity:1,y:0,scale:1},transition:{type:"spring",stiffness:260,damping:24},className:"w-full",children:w.jsx("select",{id:e,value:n??"",onChange:g=>r(g.target.value),onFocus:f,onBlur:h,disabled:s,"aria-labelledby":t?p:void 0,"aria-label":t||e,title:t||e,className:`w-full border p-1 px-2 rounded bg-[var(--surface)] text-theme outline-none ${s?"opacity-60 cursor-not-allowed":""} ${o}`,children:i.map(g=>w.jsx("option",{value:g,children:g},g))})})]})};function Hee(e,t=50){const[n,r]=P.useState({past:[],present:e,future:[]}),i=P.useRef(!1),s=P.useCallback(f=>{r(h=>{const p=typeof f=="function"?f(h.present):f;if(i.current)return i.current=!1,{...h,present:p};if(JSON.stringify(p)===JSON.stringify(h.present))return h;const g=[...h.past,h.present];return g.length>t&&g.shift(),{past:g,present:p,future:[]}})},[t]),o=P.useCallback(()=>{r(f=>{if(f.past.length===0)return f;const h=f.past[f.past.length-1],p=f.past.slice(0,-1);return i.current=!0,{past:p,present:h,future:[f.present,...f.future]}})},[]),l=P.useCallback(()=>{r(f=>{if(f.future.length===0)return f;const h=f.future[0],p=f.future.slice(1);return i.current=!0,{past:[...f.past,f.present],present:h,future:p}})},[]),c=P.useCallback(()=>{r({past:[],present:n.present,future:[]})},[n.present]);return{state:n.present,setState:s,undo:o,redo:l,canUndo:n.past.length>0,canRedo:n.future.length>0,clearHistory:c}}function Ut(e){if(typeof e=="string"||typeof e=="number")return""+e;let t="";if(Array.isArray(e))for(let n=0,r;n<e.length;n++)(r=Ut(e[n]))!==""&&(t+=(t&&" ")+r);else for(let n in e)e[n]&&(t+=(t&&" ")+n);return t}var Fee={value:()=>{}};function rm(){for(var e=0,t=arguments.length,n={},r;e<t;++e){if(!(r=arguments[e]+"")||r in n||/[\s.]/.test(r))throw new Error("illegal type: "+r);n[r]=[]}return new hh(n)}function hh(e){this._=e}function Uee(e,t){return e.trim().split(/^|\s+/).map(function(n){var r="",i=n.indexOf(".");if(i>=0&&(r=n.slice(i+1),n=n.slice(0,i)),n&&!t.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:r}})}hh.prototype=rm.prototype={constructor:hh,on:function(e,t){var n=this._,r=Uee(e+"",n),i,s=-1,o=r.length;if(arguments.length<2){for(;++s<o;)if((i=(e=r[s]).type)&&(i=$ee(n[i],e.name)))return i;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(i=(e=r[s]).type)n[i]=AR(n[i],e.name,t);else if(t==null)for(i in n)n[i]=AR(n[i],e.name,null);return this},copy:function(){var e={},t=this._;for(var n in t)e[n]=t[n].slice();return new hh(e)},call:function(e,t){if((i=arguments.length-2)>0)for(var n=new Array(i),r=0,i,s;r<i;++r)n[r]=arguments[r+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],r=0,i=s.length;r<i;++r)s[r].value.apply(t,n)},apply:function(e,t,n){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var r=this._[e],i=0,s=r.length;i<s;++i)r[i].value.apply(t,n)}};function $ee(e,t){for(var n=0,r=e.length,i;n<r;++n)if((i=e[n]).name===t)return i.value}function AR(e,t,n){for(var r=0,i=e.length;r<i;++r)if(e[r].name===t){e[r]=Fee,e=e.slice(0,r).concat(e.slice(r+1));break}return n!=null&&e.push({name:t,value:n}),e}var bE="http://www.w3.org/1999/xhtml";const MR={svg:"http://www.w3.org/2000/svg",xhtml:bE,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function im(e){var t=e+="",n=t.indexOf(":");return n>=0&&(t=e.slice(0,n))!=="xmlns"&&(e=e.slice(n+1)),MR.hasOwnProperty(t)?{space:MR[t],local:e}:e}function Gee(e){return function(){var t=this.ownerDocument,n=this.namespaceURI;return n===bE&&t.documentElement.namespaceURI===bE?t.createElement(e):t.createElementNS(n,e)}}function Kee(e){return function(){return this.ownerDocument.createElementNS(e.space,e.local)}}function Iz(e){var t=im(e);return(t.local?Kee:Gee)(t)}function Yee(){}function ik(e){return e==null?Yee:function(){return this.querySelector(e)}}function Wee(e){typeof e!="function"&&(e=ik(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,l=r[i]=new Array(o),c,f,h=0;h<o;++h)(c=s[h])&&(f=e.call(c,c.__data__,h,s))&&("__data__"in c&&(f.__data__=c.__data__),l[h]=f);return new rr(r,this._parents)}function Xee(e){return e==null?[]:Array.isArray(e)?e:Array.from(e)}function Zee(){return[]}function zz(e){return e==null?Zee:function(){return this.querySelectorAll(e)}}function Qee(e){return function(){return Xee(e.apply(this,arguments))}}function Jee(e){typeof e=="function"?e=Qee(e):e=zz(e);for(var t=this._groups,n=t.length,r=[],i=[],s=0;s<n;++s)for(var o=t[s],l=o.length,c,f=0;f<l;++f)(c=o[f])&&(r.push(e.call(c,c.__data__,f,o)),i.push(c));return new rr(r,i)}function qz(e){return function(){return this.matches(e)}}function Vz(e){return function(t){return t.matches(e)}}var ete=Array.prototype.find;function tte(e){return function(){return ete.call(this.children,e)}}function nte(){return this.firstElementChild}function rte(e){return this.select(e==null?nte:tte(typeof e=="function"?e:Vz(e)))}var ite=Array.prototype.filter;function ste(){return Array.from(this.children)}function ote(e){return function(){return ite.call(this.children,e)}}function ate(e){return this.selectAll(e==null?ste:ote(typeof e=="function"?e:Vz(e)))}function lte(e){typeof e!="function"&&(e=qz(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,l=r[i]=[],c,f=0;f<o;++f)(c=s[f])&&e.call(c,c.__data__,f,s)&&l.push(c);return new rr(r,this._parents)}function Hz(e){return new Array(e.length)}function ute(){return new rr(this._enter||this._groups.map(Hz),this._parents)}function gp(e,t){this.ownerDocument=e.ownerDocument,this.namespaceURI=e.namespaceURI,this._next=null,this._parent=e,this.__data__=t}gp.prototype={constructor:gp,appendChild:function(e){return this._parent.insertBefore(e,this._next)},insertBefore:function(e,t){return this._parent.insertBefore(e,t)},querySelector:function(e){return this._parent.querySelector(e)},querySelectorAll:function(e){return this._parent.querySelectorAll(e)}};function cte(e){return function(){return e}}function fte(e,t,n,r,i,s){for(var o=0,l,c=t.length,f=s.length;o<f;++o)(l=t[o])?(l.__data__=s[o],r[o]=l):n[o]=new gp(e,s[o]);for(;o<c;++o)(l=t[o])&&(i[o]=l)}function dte(e,t,n,r,i,s,o){var l,c,f=new Map,h=t.length,p=s.length,g=new Array(h),y;for(l=0;l<h;++l)(c=t[l])&&(g[l]=y=o.call(c,c.__data__,l,t)+"",f.has(y)?i[l]=c:f.set(y,c));for(l=0;l<p;++l)y=o.call(e,s[l],l,s)+"",(c=f.get(y))?(r[l]=c,c.__data__=s[l],f.delete(y)):n[l]=new gp(e,s[l]);for(l=0;l<h;++l)(c=t[l])&&f.get(g[l])===c&&(i[l]=c)}function hte(e){return e.__data__}function pte(e,t){if(!arguments.length)return Array.from(this,hte);var n=t?dte:fte,r=this._parents,i=this._groups;typeof e!="function"&&(e=cte(e));for(var s=i.length,o=new Array(s),l=new Array(s),c=new Array(s),f=0;f<s;++f){var h=r[f],p=i[f],g=p.length,y=mte(e.call(h,h&&h.__data__,f,r)),b=y.length,S=l[f]=new Array(b),x=o[f]=new Array(b),C=c[f]=new Array(g);n(h,p,S,x,C,y,t);for(var T=0,k=0,A,M;T<b;++T)if(A=S[T]){for(T>=k&&(k=T+1);!(M=x[k])&&++k<b;);A._next=M||null}}return o=new rr(o,r),o._enter=l,o._exit=c,o}function mte(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function gte(){return new rr(this._exit||this._groups.map(Hz),this._parents)}function yte(e,t,n){var r=this.enter(),i=this,s=this.exit();return typeof e=="function"?(r=e(r),r&&(r=r.selection())):r=r.append(e+""),t!=null&&(i=t(i),i&&(i=i.selection())),n==null?s.remove():n(s),r&&i?r.merge(i).order():i}function vte(e){for(var t=e.selection?e.selection():e,n=this._groups,r=t._groups,i=n.length,s=r.length,o=Math.min(i,s),l=new Array(i),c=0;c<o;++c)for(var f=n[c],h=r[c],p=f.length,g=l[c]=new Array(p),y,b=0;b<p;++b)(y=f[b]||h[b])&&(g[b]=y);for(;c<i;++c)l[c]=n[c];return new rr(l,this._parents)}function bte(){for(var e=this._groups,t=-1,n=e.length;++t<n;)for(var r=e[t],i=r.length-1,s=r[i],o;--i>=0;)(o=r[i])&&(s&&o.compareDocumentPosition(s)^4&&s.parentNode.insertBefore(o,s),s=o);return this}function xte(e){e||(e=wte);function t(p,g){return p&&g?e(p.__data__,g.__data__):!p-!g}for(var n=this._groups,r=n.length,i=new Array(r),s=0;s<r;++s){for(var o=n[s],l=o.length,c=i[s]=new Array(l),f,h=0;h<l;++h)(f=o[h])&&(c[h]=f);c.sort(t)}return new rr(i,this._parents).order()}function wte(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function Ste(){var e=arguments[0];return arguments[0]=this,e.apply(null,arguments),this}function Ete(){return Array.from(this)}function Cte(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length;i<s;++i){var o=r[i];if(o)return o}return null}function kte(){let e=0;for(const t of this)++e;return e}function Tte(){return!this.node()}function Ate(e){for(var t=this._groups,n=0,r=t.length;n<r;++n)for(var i=t[n],s=0,o=i.length,l;s<o;++s)(l=i[s])&&e.call(l,l.__data__,s,i);return this}function Mte(e){return function(){this.removeAttribute(e)}}function Nte(e){return function(){this.removeAttributeNS(e.space,e.local)}}function _te(e,t){return function(){this.setAttribute(e,t)}}function Rte(e,t){return function(){this.setAttributeNS(e.space,e.local,t)}}function Dte(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttribute(e):this.setAttribute(e,n)}}function Ote(e,t){return function(){var n=t.apply(this,arguments);n==null?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}}function jte(e,t){var n=im(e);if(arguments.length<2){var r=this.node();return n.local?r.getAttributeNS(n.space,n.local):r.getAttribute(n)}return this.each((t==null?n.local?Nte:Mte:typeof t=="function"?n.local?Ote:Dte:n.local?Rte:_te)(n,t))}function Fz(e){return e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView}function Lte(e){return function(){this.style.removeProperty(e)}}function Pte(e,t,n){return function(){this.style.setProperty(e,t,n)}}function Bte(e,t,n){return function(){var r=t.apply(this,arguments);r==null?this.style.removeProperty(e):this.style.setProperty(e,r,n)}}function Ite(e,t,n){return arguments.length>1?this.each((t==null?Lte:typeof t=="function"?Bte:Pte)(e,t,n??"")):wl(this.node(),e)}function wl(e,t){return e.style.getPropertyValue(t)||Fz(e).getComputedStyle(e,null).getPropertyValue(t)}function zte(e){return function(){delete this[e]}}function qte(e,t){return function(){this[e]=t}}function Vte(e,t){return function(){var n=t.apply(this,arguments);n==null?delete this[e]:this[e]=n}}function Hte(e,t){return arguments.length>1?this.each((t==null?zte:typeof t=="function"?Vte:qte)(e,t)):this.node()[e]}function Uz(e){return e.trim().split(/^|\s+/)}function sk(e){return e.classList||new $z(e)}function $z(e){this._node=e,this._names=Uz(e.getAttribute("class")||"")}$z.prototype={add:function(e){var t=this._names.indexOf(e);t<0&&(this._names.push(e),this._node.setAttribute("class",this._names.join(" ")))},remove:function(e){var t=this._names.indexOf(e);t>=0&&(this._names.splice(t,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(e){return this._names.indexOf(e)>=0}};function Gz(e,t){for(var n=sk(e),r=-1,i=t.length;++r<i;)n.add(t[r])}function Kz(e,t){for(var n=sk(e),r=-1,i=t.length;++r<i;)n.remove(t[r])}function Fte(e){return function(){Gz(this,e)}}function Ute(e){return function(){Kz(this,e)}}function $te(e,t){return function(){(t.apply(this,arguments)?Gz:Kz)(this,e)}}function Gte(e,t){var n=Uz(e+"");if(arguments.length<2){for(var r=sk(this.node()),i=-1,s=n.length;++i<s;)if(!r.contains(n[i]))return!1;return!0}return this.each((typeof t=="function"?$te:t?Fte:Ute)(n,t))}function Kte(){this.textContent=""}function Yte(e){return function(){this.textContent=e}}function Wte(e){return function(){var t=e.apply(this,arguments);this.textContent=t??""}}function Xte(e){return arguments.length?this.each(e==null?Kte:(typeof e=="function"?Wte:Yte)(e)):this.node().textContent}function Zte(){this.innerHTML=""}function Qte(e){return function(){this.innerHTML=e}}function Jte(e){return function(){var t=e.apply(this,arguments);this.innerHTML=t??""}}function ene(e){return arguments.length?this.each(e==null?Zte:(typeof e=="function"?Jte:Qte)(e)):this.node().innerHTML}function tne(){this.nextSibling&&this.parentNode.appendChild(this)}function nne(){return this.each(tne)}function rne(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function ine(){return this.each(rne)}function sne(e){var t=typeof e=="function"?e:Iz(e);return this.select(function(){return this.appendChild(t.apply(this,arguments))})}function one(){return null}function ane(e,t){var n=typeof e=="function"?e:Iz(e),r=t==null?one:typeof t=="function"?t:ik(t);return this.select(function(){return this.insertBefore(n.apply(this,arguments),r.apply(this,arguments)||null)})}function lne(){var e=this.parentNode;e&&e.removeChild(this)}function une(){return this.each(lne)}function cne(){var e=this.cloneNode(!1),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function fne(){var e=this.cloneNode(!0),t=this.parentNode;return t?t.insertBefore(e,this.nextSibling):e}function dne(e){return this.select(e?fne:cne)}function hne(e){return arguments.length?this.property("__data__",e):this.node().__data__}function pne(e){return function(t){e.call(this,t,this.__data__)}}function mne(e){return e.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");return r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),{type:t,name:n}})}function gne(e){return function(){var t=this.__on;if(t){for(var n=0,r=-1,i=t.length,s;n<i;++n)s=t[n],(!e.type||s.type===e.type)&&s.name===e.name?this.removeEventListener(s.type,s.listener,s.options):t[++r]=s;++r?t.length=r:delete this.__on}}}function yne(e,t,n){return function(){var r=this.__on,i,s=pne(t);if(r){for(var o=0,l=r.length;o<l;++o)if((i=r[o]).type===e.type&&i.name===e.name){this.removeEventListener(i.type,i.listener,i.options),this.addEventListener(i.type,i.listener=s,i.options=n),i.value=t;return}}this.addEventListener(e.type,s,n),i={type:e.type,name:e.name,value:t,listener:s,options:n},r?r.push(i):this.__on=[i]}}function vne(e,t,n){var r=mne(e+""),i,s=r.length,o;if(arguments.length<2){var l=this.node().__on;if(l){for(var c=0,f=l.length,h;c<f;++c)for(i=0,h=l[c];i<s;++i)if((o=r[i]).type===h.type&&o.name===h.name)return h.value}return}for(l=t?yne:gne,i=0;i<s;++i)this.each(l(r[i],t,n));return this}function Yz(e,t,n){var r=Fz(e),i=r.CustomEvent;typeof i=="function"?i=new i(t,n):(i=r.document.createEvent("Event"),n?(i.initEvent(t,n.bubbles,n.cancelable),i.detail=n.detail):i.initEvent(t,!1,!1)),e.dispatchEvent(i)}function bne(e,t){return function(){return Yz(this,e,t)}}function xne(e,t){return function(){return Yz(this,e,t.apply(this,arguments))}}function wne(e,t){return this.each((typeof t=="function"?xne:bne)(e,t))}function*Sne(){for(var e=this._groups,t=0,n=e.length;t<n;++t)for(var r=e[t],i=0,s=r.length,o;i<s;++i)(o=r[i])&&(yield o)}var Wz=[null];function rr(e,t){this._groups=e,this._parents=t}function sf(){return new rr([[document.documentElement]],Wz)}function Ene(){return this}rr.prototype=sf.prototype={constructor:rr,select:Wee,selectAll:Jee,selectChild:rte,selectChildren:ate,filter:lte,data:pte,enter:ute,exit:gte,join:yte,merge:vte,selection:Ene,order:bte,sort:xte,call:Ste,nodes:Ete,node:Cte,size:kte,empty:Tte,each:Ate,attr:jte,style:Ite,property:Hte,classed:Gte,text:Xte,html:ene,raise:nne,lower:ine,append:sne,insert:ane,remove:une,clone:dne,datum:hne,on:vne,dispatch:wne,[Symbol.iterator]:Sne};function tr(e){return typeof e=="string"?new rr([[document.querySelector(e)]],[document.documentElement]):new rr([[e]],Wz)}function Cne(e){let t;for(;t=e.sourceEvent;)e=t;return e}function Or(e,t){if(e=Cne(e),t===void 0&&(t=e.currentTarget),t){var n=t.ownerSVGElement||t;if(n.createSVGPoint){var r=n.createSVGPoint();return r.x=e.clientX,r.y=e.clientY,r=r.matrixTransform(t.getScreenCTM().inverse()),[r.x,r.y]}if(t.getBoundingClientRect){var i=t.getBoundingClientRect();return[e.clientX-i.left-t.clientLeft,e.clientY-i.top-t.clientTop]}}return[e.pageX,e.pageY]}const kne={passive:!1},Bc={capture:!0,passive:!1};function V0(e){e.stopImmediatePropagation()}function fl(e){e.preventDefault(),e.stopImmediatePropagation()}function Xz(e){var t=e.document.documentElement,n=tr(e).on("dragstart.drag",fl,Bc);"onselectstart"in t?n.on("selectstart.drag",fl,Bc):(t.__noselect=t.style.MozUserSelect,t.style.MozUserSelect="none")}function Zz(e,t){var n=e.document.documentElement,r=tr(e).on("dragstart.drag",null);t&&(r.on("click.drag",fl,Bc),setTimeout(function(){r.on("click.drag",null)},0)),"onselectstart"in n?r.on("selectstart.drag",null):(n.style.MozUserSelect=n.__noselect,delete n.__noselect)}const Kd=e=>()=>e;function xE(e,{sourceEvent:t,subject:n,target:r,identifier:i,active:s,x:o,y:l,dx:c,dy:f,dispatch:h}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},subject:{value:n,enumerable:!0,configurable:!0},target:{value:r,enumerable:!0,configurable:!0},identifier:{value:i,enumerable:!0,configurable:!0},active:{value:s,enumerable:!0,configurable:!0},x:{value:o,enumerable:!0,configurable:!0},y:{value:l,enumerable:!0,configurable:!0},dx:{value:c,enumerable:!0,configurable:!0},dy:{value:f,enumerable:!0,configurable:!0},_:{value:h}})}xE.prototype.on=function(){var e=this._.on.apply(this._,arguments);return e===this._?this:e};function Tne(e){return!e.ctrlKey&&!e.button}function Ane(){return this.parentNode}function Mne(e,t){return t??{x:e.x,y:e.y}}function Nne(){return navigator.maxTouchPoints||"ontouchstart"in this}function Qz(){var e=Tne,t=Ane,n=Mne,r=Nne,i={},s=rm("start","drag","end"),o=0,l,c,f,h,p=0;function g(A){A.on("mousedown.drag",y).filter(r).on("touchstart.drag",x).on("touchmove.drag",C,kne).on("touchend.drag touchcancel.drag",T).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function y(A,M){if(!(h||!e.call(this,A,M))){var _=k(this,t.call(this,A,M),A,M,"mouse");_&&(tr(A.view).on("mousemove.drag",b,Bc).on("mouseup.drag",S,Bc),Xz(A.view),V0(A),f=!1,l=A.clientX,c=A.clientY,_("start",A))}}function b(A){if(fl(A),!f){var M=A.clientX-l,_=A.clientY-c;f=M*M+_*_>p}i.mouse("drag",A)}function S(A){tr(A.view).on("mousemove.drag mouseup.drag",null),Zz(A.view,f),fl(A),i.mouse("end",A)}function x(A,M){if(e.call(this,A,M)){var _=A.changedTouches,R=t.call(this,A,M),O=_.length,I,$;for(I=0;I<O;++I)($=k(this,R,A,M,_[I].identifier,_[I]))&&(V0(A),$("start",A,_[I]))}}function C(A){var M=A.changedTouches,_=M.length,R,O;for(R=0;R<_;++R)(O=i[M[R].identifier])&&(fl(A),O("drag",A,M[R]))}function T(A){var M=A.changedTouches,_=M.length,R,O;for(h&&clearTimeout(h),h=setTimeout(function(){h=null},500),R=0;R<_;++R)(O=i[M[R].identifier])&&(V0(A),O("end",A,M[R]))}function k(A,M,_,R,O,I){var $=s.copy(),q=Or(I||_,M),U,X,B;if((B=n.call(A,new xE("beforestart",{sourceEvent:_,target:g,identifier:O,active:o,x:q[0],y:q[1],dx:0,dy:0,dispatch:$}),R))!=null)return U=B.x-q[0]||0,X=B.y-q[1]||0,function F(j,z,W){var J=q,L;switch(j){case"start":i[O]=F,L=o++;break;case"end":delete i[O],--o;case"drag":q=Or(W||z,M),L=o;break}$.call(j,A,new xE(j,{sourceEvent:z,subject:B,target:g,identifier:O,active:L,x:q[0]+U,y:q[1]+X,dx:q[0]-J[0],dy:q[1]-J[1],dispatch:$}),R)}}return g.filter=function(A){return arguments.length?(e=typeof A=="function"?A:Kd(!!A),g):e},g.container=function(A){return arguments.length?(t=typeof A=="function"?A:Kd(A),g):t},g.subject=function(A){return arguments.length?(n=typeof A=="function"?A:Kd(A),g):n},g.touchable=function(A){return arguments.length?(r=typeof A=="function"?A:Kd(!!A),g):r},g.on=function(){var A=s.on.apply(s,arguments);return A===s?g:A},g.clickDistance=function(A){return arguments.length?(p=(A=+A)*A,g):Math.sqrt(p)},g}function ok(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function Jz(e,t){var n=Object.create(e.prototype);for(var r in t)n[r]=t[r];return n}function of(){}var Ic=.7,yp=1/Ic,dl="\\s*([+-]?\\d+)\\s*",zc="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",ni="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",_ne=/^#([0-9a-f]{3,8})$/,Rne=new RegExp(`^rgb\\(${dl},${dl},${dl}\\)$`),Dne=new RegExp(`^rgb\\(${ni},${ni},${ni}\\)$`),One=new RegExp(`^rgba\\(${dl},${dl},${dl},${zc}\\)$`),jne=new RegExp(`^rgba\\(${ni},${ni},${ni},${zc}\\)$`),Lne=new RegExp(`^hsl\\(${zc},${ni},${ni}\\)$`),Pne=new RegExp(`^hsla\\(${zc},${ni},${ni},${zc}\\)$`),NR={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};ok(of,$o,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:_R,formatHex:_R,formatHex8:Bne,formatHsl:Ine,formatRgb:RR,toString:RR});function _R(){return this.rgb().formatHex()}function Bne(){return this.rgb().formatHex8()}function Ine(){return e6(this).formatHsl()}function RR(){return this.rgb().formatRgb()}function $o(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=_ne.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?DR(t):n===3?new zn(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?Yd(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?Yd(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=Rne.exec(e))?new zn(t[1],t[2],t[3],1):(t=Dne.exec(e))?new zn(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=One.exec(e))?Yd(t[1],t[2],t[3],t[4]):(t=jne.exec(e))?Yd(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=Lne.exec(e))?LR(t[1],t[2]/100,t[3]/100,1):(t=Pne.exec(e))?LR(t[1],t[2]/100,t[3]/100,t[4]):NR.hasOwnProperty(e)?DR(NR[e]):e==="transparent"?new zn(NaN,NaN,NaN,0):null}function DR(e){return new zn(e>>16&255,e>>8&255,e&255,1)}function Yd(e,t,n,r){return r<=0&&(e=t=n=NaN),new zn(e,t,n,r)}function zne(e){return e instanceof of||(e=$o(e)),e?(e=e.rgb(),new zn(e.r,e.g,e.b,e.opacity)):new zn}function wE(e,t,n,r){return arguments.length===1?zne(e):new zn(e,t,n,r??1)}function zn(e,t,n,r){this.r=+e,this.g=+t,this.b=+n,this.opacity=+r}ok(zn,wE,Jz(of,{brighter(e){return e=e==null?yp:Math.pow(yp,e),new zn(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ic:Math.pow(Ic,e),new zn(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new zn(Io(this.r),Io(this.g),Io(this.b),vp(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:OR,formatHex:OR,formatHex8:qne,formatRgb:jR,toString:jR}));function OR(){return`#${No(this.r)}${No(this.g)}${No(this.b)}`}function qne(){return`#${No(this.r)}${No(this.g)}${No(this.b)}${No((isNaN(this.opacity)?1:this.opacity)*255)}`}function jR(){const e=vp(this.opacity);return`${e===1?"rgb(":"rgba("}${Io(this.r)}, ${Io(this.g)}, ${Io(this.b)}${e===1?")":`, ${e})`}`}function vp(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function Io(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function No(e){return e=Io(e),(e<16?"0":"")+e.toString(16)}function LR(e,t,n,r){return r<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Lr(e,t,n,r)}function e6(e){if(e instanceof Lr)return new Lr(e.h,e.s,e.l,e.opacity);if(e instanceof of||(e=$o(e)),!e)return new Lr;if(e instanceof Lr)return e;e=e.rgb();var t=e.r/255,n=e.g/255,r=e.b/255,i=Math.min(t,n,r),s=Math.max(t,n,r),o=NaN,l=s-i,c=(s+i)/2;return l?(t===s?o=(n-r)/l+(n<r)*6:n===s?o=(r-t)/l+2:o=(t-n)/l+4,l/=c<.5?s+i:2-s-i,o*=60):l=c>0&&c<1?0:o,new Lr(o,l,c,e.opacity)}function Vne(e,t,n,r){return arguments.length===1?e6(e):new Lr(e,t,n,r??1)}function Lr(e,t,n,r){this.h=+e,this.s=+t,this.l=+n,this.opacity=+r}ok(Lr,Vne,Jz(of,{brighter(e){return e=e==null?yp:Math.pow(yp,e),new Lr(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ic:Math.pow(Ic,e),new Lr(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*t,i=2*n-r;return new zn(H0(e>=240?e-240:e+120,i,r),H0(e,i,r),H0(e<120?e+240:e-120,i,r),this.opacity)},clamp(){return new Lr(PR(this.h),Wd(this.s),Wd(this.l),vp(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=vp(this.opacity);return`${e===1?"hsl(":"hsla("}${PR(this.h)}, ${Wd(this.s)*100}%, ${Wd(this.l)*100}%${e===1?")":`, ${e})`}`}}));function PR(e){return e=(e||0)%360,e<0?e+360:e}function Wd(e){return Math.max(0,Math.min(1,e||0))}function H0(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const ak=e=>()=>e;function Hne(e,t){return function(n){return e+n*t}}function Fne(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(r){return Math.pow(e+r*t,n)}}function Une(e){return(e=+e)==1?t6:function(t,n){return n-t?Fne(t,n,e):ak(isNaN(t)?n:t)}}function t6(e,t){var n=t-e;return n?Hne(e,n):ak(isNaN(e)?t:e)}const bp=(function e(t){var n=Une(t);function r(i,s){var o=n((i=wE(i)).r,(s=wE(s)).r),l=n(i.g,s.g),c=n(i.b,s.b),f=t6(i.opacity,s.opacity);return function(h){return i.r=o(h),i.g=l(h),i.b=c(h),i.opacity=f(h),i+""}}return r.gamma=e,r})(1);function $ne(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,r=t.slice(),i;return function(s){for(i=0;i<n;++i)r[i]=e[i]*(1-s)+t[i]*s;return r}}function Gne(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function Kne(e,t){var n=t?t.length:0,r=e?Math.min(n,e.length):0,i=new Array(r),s=new Array(n),o;for(o=0;o<r;++o)i[o]=gc(e[o],t[o]);for(;o<n;++o)s[o]=t[o];return function(l){for(o=0;o<r;++o)s[o]=i[o](l);return s}}function Yne(e,t){var n=new Date;return e=+e,t=+t,function(r){return n.setTime(e*(1-r)+t*r),n}}function Zr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function Wne(e,t){var n={},r={},i;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(i in t)i in e?n[i]=gc(e[i],t[i]):r[i]=t[i];return function(s){for(i in n)r[i]=n[i](s);return r}}var SE=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,F0=new RegExp(SE.source,"g");function Xne(e){return function(){return e}}function Zne(e){return function(t){return e(t)+""}}function n6(e,t){var n=SE.lastIndex=F0.lastIndex=0,r,i,s,o=-1,l=[],c=[];for(e=e+"",t=t+"";(r=SE.exec(e))&&(i=F0.exec(t));)(s=i.index)>n&&(s=t.slice(n,s),l[o]?l[o]+=s:l[++o]=s),(r=r[0])===(i=i[0])?l[o]?l[o]+=i:l[++o]=i:(l[++o]=null,c.push({i:o,x:Zr(r,i)})),n=F0.lastIndex;return n<t.length&&(s=t.slice(n),l[o]?l[o]+=s:l[++o]=s),l.length<2?c[0]?Zne(c[0].x):Xne(t):(t=c.length,function(f){for(var h=0,p;h<t;++h)l[(p=c[h]).i]=p.x(f);return l.join("")})}function gc(e,t){var n=typeof t,r;return t==null||n==="boolean"?ak(t):(n==="number"?Zr:n==="string"?(r=$o(t))?(t=r,bp):n6:t instanceof $o?bp:t instanceof Date?Yne:Gne(t)?$ne:Array.isArray(t)?Kne:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?Wne:Zr)(e,t)}var BR=180/Math.PI,EE={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function r6(e,t,n,r,i,s){var o,l,c;return(o=Math.sqrt(e*e+t*t))&&(e/=o,t/=o),(c=e*n+t*r)&&(n-=e*c,r-=t*c),(l=Math.sqrt(n*n+r*r))&&(n/=l,r/=l,c/=l),e*r<t*n&&(e=-e,t=-t,c=-c,o=-o),{translateX:i,translateY:s,rotate:Math.atan2(t,e)*BR,skewX:Math.atan(c)*BR,scaleX:o,scaleY:l}}var Xd;function Qne(e){const t=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(e+"");return t.isIdentity?EE:r6(t.a,t.b,t.c,t.d,t.e,t.f)}function Jne(e){return e==null||(Xd||(Xd=document.createElementNS("http://www.w3.org/2000/svg","g")),Xd.setAttribute("transform",e),!(e=Xd.transform.baseVal.consolidate()))?EE:(e=e.matrix,r6(e.a,e.b,e.c,e.d,e.e,e.f))}function i6(e,t,n,r){function i(f){return f.length?f.pop()+" ":""}function s(f,h,p,g,y,b){if(f!==p||h!==g){var S=y.push("translate(",null,t,null,n);b.push({i:S-4,x:Zr(f,p)},{i:S-2,x:Zr(h,g)})}else(p||g)&&y.push("translate("+p+t+g+n)}function o(f,h,p,g){f!==h?(f-h>180?h+=360:h-f>180&&(f+=360),g.push({i:p.push(i(p)+"rotate(",null,r)-2,x:Zr(f,h)})):h&&p.push(i(p)+"rotate("+h+r)}function l(f,h,p,g){f!==h?g.push({i:p.push(i(p)+"skewX(",null,r)-2,x:Zr(f,h)}):h&&p.push(i(p)+"skewX("+h+r)}function c(f,h,p,g,y,b){if(f!==p||h!==g){var S=y.push(i(y)+"scale(",null,",",null,")");b.push({i:S-4,x:Zr(f,p)},{i:S-2,x:Zr(h,g)})}else(p!==1||g!==1)&&y.push(i(y)+"scale("+p+","+g+")")}return function(f,h){var p=[],g=[];return f=e(f),h=e(h),s(f.translateX,f.translateY,h.translateX,h.translateY,p,g),o(f.rotate,h.rotate,p,g),l(f.skewX,h.skewX,p,g),c(f.scaleX,f.scaleY,h.scaleX,h.scaleY,p,g),f=h=null,function(y){for(var b=-1,S=g.length,x;++b<S;)p[(x=g[b]).i]=x.x(y);return p.join("")}}}var ere=i6(Qne,"px, ","px)","deg)"),tre=i6(Jne,", ",")",")"),nre=1e-12;function IR(e){return((e=Math.exp(e))+1/e)/2}function rre(e){return((e=Math.exp(e))-1/e)/2}function ire(e){return((e=Math.exp(2*e))-1)/(e+1)}const ph=(function e(t,n,r){function i(s,o){var l=s[0],c=s[1],f=s[2],h=o[0],p=o[1],g=o[2],y=h-l,b=p-c,S=y*y+b*b,x,C;if(S<nre)C=Math.log(g/f)/t,x=function(R){return[l+R*y,c+R*b,f*Math.exp(t*R*C)]};else{var T=Math.sqrt(S),k=(g*g-f*f+r*S)/(2*f*n*T),A=(g*g-f*f-r*S)/(2*g*n*T),M=Math.log(Math.sqrt(k*k+1)-k),_=Math.log(Math.sqrt(A*A+1)-A);C=(_-M)/t,x=function(R){var O=R*C,I=IR(M),$=f/(n*T)*(I*ire(t*O+M)-rre(M));return[l+$*y,c+$*b,f*I/IR(t*O+M)]}}return x.duration=C*1e3*t/Math.SQRT2,x}return i.rho=function(s){var o=Math.max(.001,+s),l=o*o,c=l*l;return e(o,l,c)},i})(Math.SQRT2,2,4);var Sl=0,Xu=0,Hu=0,s6=1e3,xp,Zu,wp=0,Go=0,sm=0,qc=typeof performance=="object"&&performance.now?performance:Date,o6=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function lk(){return Go||(o6(sre),Go=qc.now()+sm)}function sre(){Go=0}function Sp(){this._call=this._time=this._next=null}Sp.prototype=a6.prototype={constructor:Sp,restart:function(e,t,n){if(typeof e!="function")throw new TypeError("callback is not a function");n=(n==null?lk():+n)+(t==null?0:+t),!this._next&&Zu!==this&&(Zu?Zu._next=this:xp=this,Zu=this),this._call=e,this._time=n,CE()},stop:function(){this._call&&(this._call=null,this._time=1/0,CE())}};function a6(e,t,n){var r=new Sp;return r.restart(e,t,n),r}function ore(){lk(),++Sl;for(var e=xp,t;e;)(t=Go-e._time)>=0&&e._call.call(void 0,t),e=e._next;--Sl}function zR(){Go=(wp=qc.now())+sm,Sl=Xu=0;try{ore()}finally{Sl=0,lre(),Go=0}}function are(){var e=qc.now(),t=e-wp;t>s6&&(sm-=t,wp=e)}function lre(){for(var e,t=xp,n,r=1/0;t;)t._call?(r>t._time&&(r=t._time),e=t,t=t._next):(n=t._next,t._next=null,t=e?e._next=n:xp=n);Zu=e,CE(r)}function CE(e){if(!Sl){Xu&&(Xu=clearTimeout(Xu));var t=e-Go;t>24?(e<1/0&&(Xu=setTimeout(zR,e-qc.now()-sm)),Hu&&(Hu=clearInterval(Hu))):(Hu||(wp=qc.now(),Hu=setInterval(are,s6)),Sl=1,o6(zR))}}function qR(e,t,n){var r=new Sp;return t=t==null?0:+t,r.restart(i=>{r.stop(),e(i+t)},t,n),r}var ure=rm("start","end","cancel","interrupt"),cre=[],l6=0,VR=1,kE=2,mh=3,HR=4,TE=5,gh=6;function om(e,t,n,r,i,s){var o=e.__transition;if(!o)e.__transition={};else if(n in o)return;fre(e,n,{name:t,index:r,group:i,on:ure,tween:cre,time:s.time,delay:s.delay,duration:s.duration,ease:s.ease,timer:null,state:l6})}function uk(e,t){var n=zr(e,t);if(n.state>l6)throw new Error("too late; already scheduled");return n}function oi(e,t){var n=zr(e,t);if(n.state>mh)throw new Error("too late; already running");return n}function zr(e,t){var n=e.__transition;if(!n||!(n=n[t]))throw new Error("transition not found");return n}function fre(e,t,n){var r=e.__transition,i;r[t]=n,n.timer=a6(s,0,n.time);function s(f){n.state=VR,n.timer.restart(o,n.delay,n.time),n.delay<=f&&o(f-n.delay)}function o(f){var h,p,g,y;if(n.state!==VR)return c();for(h in r)if(y=r[h],y.name===n.name){if(y.state===mh)return qR(o);y.state===HR?(y.state=gh,y.timer.stop(),y.on.call("interrupt",e,e.__data__,y.index,y.group),delete r[h]):+h<t&&(y.state=gh,y.timer.stop(),y.on.call("cancel",e,e.__data__,y.index,y.group),delete r[h])}if(qR(function(){n.state===mh&&(n.state=HR,n.timer.restart(l,n.delay,n.time),l(f))}),n.state=kE,n.on.call("start",e,e.__data__,n.index,n.group),n.state===kE){for(n.state=mh,i=new Array(g=n.tween.length),h=0,p=-1;h<g;++h)(y=n.tween[h].value.call(e,e.__data__,n.index,n.group))&&(i[++p]=y);i.length=p+1}}function l(f){for(var h=f<n.duration?n.ease.call(null,f/n.duration):(n.timer.restart(c),n.state=TE,1),p=-1,g=i.length;++p<g;)i[p].call(e,h);n.state===TE&&(n.on.call("end",e,e.__data__,n.index,n.group),c())}function c(){n.state=gh,n.timer.stop(),delete r[t];for(var f in r)return;delete e.__transition}}function yh(e,t){var n=e.__transition,r,i,s=!0,o;if(n){t=t==null?null:t+"";for(o in n){if((r=n[o]).name!==t){s=!1;continue}i=r.state>kE&&r.state<TE,r.state=gh,r.timer.stop(),r.on.call(i?"interrupt":"cancel",e,e.__data__,r.index,r.group),delete n[o]}s&&delete e.__transition}}function dre(e){return this.each(function(){yh(this,e)})}function hre(e,t){var n,r;return function(){var i=oi(this,e),s=i.tween;if(s!==n){r=n=s;for(var o=0,l=r.length;o<l;++o)if(r[o].name===t){r=r.slice(),r.splice(o,1);break}}i.tween=r}}function pre(e,t,n){var r,i;if(typeof n!="function")throw new Error;return function(){var s=oi(this,e),o=s.tween;if(o!==r){i=(r=o).slice();for(var l={name:t,value:n},c=0,f=i.length;c<f;++c)if(i[c].name===t){i[c]=l;break}c===f&&i.push(l)}s.tween=i}}function mre(e,t){var n=this._id;if(e+="",arguments.length<2){for(var r=zr(this.node(),n).tween,i=0,s=r.length,o;i<s;++i)if((o=r[i]).name===e)return o.value;return null}return this.each((t==null?hre:pre)(n,e,t))}function ck(e,t,n){var r=e._id;return e.each(function(){var i=oi(this,r);(i.value||(i.value={}))[t]=n.apply(this,arguments)}),function(i){return zr(i,r).value[t]}}function u6(e,t){var n;return(typeof t=="number"?Zr:t instanceof $o?bp:(n=$o(t))?(t=n,bp):n6)(e,t)}function gre(e){return function(){this.removeAttribute(e)}}function yre(e){return function(){this.removeAttributeNS(e.space,e.local)}}function vre(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttribute(e);return o===i?null:o===r?s:s=t(r=o,n)}}function bre(e,t,n){var r,i=n+"",s;return function(){var o=this.getAttributeNS(e.space,e.local);return o===i?null:o===r?s:s=t(r=o,n)}}function xre(e,t,n){var r,i,s;return function(){var o,l=n(this),c;return l==null?void this.removeAttribute(e):(o=this.getAttribute(e),c=l+"",o===c?null:o===r&&c===i?s:(i=c,s=t(r=o,l)))}}function wre(e,t,n){var r,i,s;return function(){var o,l=n(this),c;return l==null?void this.removeAttributeNS(e.space,e.local):(o=this.getAttributeNS(e.space,e.local),c=l+"",o===c?null:o===r&&c===i?s:(i=c,s=t(r=o,l)))}}function Sre(e,t){var n=im(e),r=n==="transform"?tre:u6;return this.attrTween(e,typeof t=="function"?(n.local?wre:xre)(n,r,ck(this,"attr."+e,t)):t==null?(n.local?yre:gre)(n):(n.local?bre:vre)(n,r,t))}function Ere(e,t){return function(n){this.setAttribute(e,t.call(this,n))}}function Cre(e,t){return function(n){this.setAttributeNS(e.space,e.local,t.call(this,n))}}function kre(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Cre(e,s)),n}return i._value=t,i}function Tre(e,t){var n,r;function i(){var s=t.apply(this,arguments);return s!==r&&(n=(r=s)&&Ere(e,s)),n}return i._value=t,i}function Are(e,t){var n="attr."+e;if(arguments.length<2)return(n=this.tween(n))&&n._value;if(t==null)return this.tween(n,null);if(typeof t!="function")throw new Error;var r=im(e);return this.tween(n,(r.local?kre:Tre)(r,t))}function Mre(e,t){return function(){uk(this,e).delay=+t.apply(this,arguments)}}function Nre(e,t){return t=+t,function(){uk(this,e).delay=t}}function _re(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Mre:Nre)(t,e)):zr(this.node(),t).delay}function Rre(e,t){return function(){oi(this,e).duration=+t.apply(this,arguments)}}function Dre(e,t){return t=+t,function(){oi(this,e).duration=t}}function Ore(e){var t=this._id;return arguments.length?this.each((typeof e=="function"?Rre:Dre)(t,e)):zr(this.node(),t).duration}function jre(e,t){if(typeof t!="function")throw new Error;return function(){oi(this,e).ease=t}}function Lre(e){var t=this._id;return arguments.length?this.each(jre(t,e)):zr(this.node(),t).ease}function Pre(e,t){return function(){var n=t.apply(this,arguments);if(typeof n!="function")throw new Error;oi(this,e).ease=n}}function Bre(e){if(typeof e!="function")throw new Error;return this.each(Pre(this._id,e))}function Ire(e){typeof e!="function"&&(e=qz(e));for(var t=this._groups,n=t.length,r=new Array(n),i=0;i<n;++i)for(var s=t[i],o=s.length,l=r[i]=[],c,f=0;f<o;++f)(c=s[f])&&e.call(c,c.__data__,f,s)&&l.push(c);return new Vi(r,this._parents,this._name,this._id)}function zre(e){if(e._id!==this._id)throw new Error;for(var t=this._groups,n=e._groups,r=t.length,i=n.length,s=Math.min(r,i),o=new Array(r),l=0;l<s;++l)for(var c=t[l],f=n[l],h=c.length,p=o[l]=new Array(h),g,y=0;y<h;++y)(g=c[y]||f[y])&&(p[y]=g);for(;l<r;++l)o[l]=t[l];return new Vi(o,this._parents,this._name,this._id)}function qre(e){return(e+"").trim().split(/^|\s+/).every(function(t){var n=t.indexOf(".");return n>=0&&(t=t.slice(0,n)),!t||t==="start"})}function Vre(e,t,n){var r,i,s=qre(t)?uk:oi;return function(){var o=s(this,e),l=o.on;l!==r&&(i=(r=l).copy()).on(t,n),o.on=i}}function Hre(e,t){var n=this._id;return arguments.length<2?zr(this.node(),n).on.on(e):this.each(Vre(n,e,t))}function Fre(e){return function(){var t=this.parentNode;for(var n in this.__transition)if(+n!==e)return;t&&t.removeChild(this)}}function Ure(){return this.on("end.remove",Fre(this._id))}function $re(e){var t=this._name,n=this._id;typeof e!="function"&&(e=ik(e));for(var r=this._groups,i=r.length,s=new Array(i),o=0;o<i;++o)for(var l=r[o],c=l.length,f=s[o]=new Array(c),h,p,g=0;g<c;++g)(h=l[g])&&(p=e.call(h,h.__data__,g,l))&&("__data__"in h&&(p.__data__=h.__data__),f[g]=p,om(f[g],t,n,g,f,zr(h,n)));return new Vi(s,this._parents,t,n)}function Gre(e){var t=this._name,n=this._id;typeof e!="function"&&(e=zz(e));for(var r=this._groups,i=r.length,s=[],o=[],l=0;l<i;++l)for(var c=r[l],f=c.length,h,p=0;p<f;++p)if(h=c[p]){for(var g=e.call(h,h.__data__,p,c),y,b=zr(h,n),S=0,x=g.length;S<x;++S)(y=g[S])&&om(y,t,n,S,g,b);s.push(g),o.push(h)}return new Vi(s,o,t,n)}var Kre=sf.prototype.constructor;function Yre(){return new Kre(this._groups,this._parents)}function Wre(e,t){var n,r,i;return function(){var s=wl(this,e),o=(this.style.removeProperty(e),wl(this,e));return s===o?null:s===n&&o===r?i:i=t(n=s,r=o)}}function c6(e){return function(){this.style.removeProperty(e)}}function Xre(e,t,n){var r,i=n+"",s;return function(){var o=wl(this,e);return o===i?null:o===r?s:s=t(r=o,n)}}function Zre(e,t,n){var r,i,s;return function(){var o=wl(this,e),l=n(this),c=l+"";return l==null&&(c=l=(this.style.removeProperty(e),wl(this,e))),o===c?null:o===r&&c===i?s:(i=c,s=t(r=o,l))}}function Qre(e,t){var n,r,i,s="style."+t,o="end."+s,l;return function(){var c=oi(this,e),f=c.on,h=c.value[s]==null?l||(l=c6(t)):void 0;(f!==n||i!==h)&&(r=(n=f).copy()).on(o,i=h),c.on=r}}function Jre(e,t,n){var r=(e+="")=="transform"?ere:u6;return t==null?this.styleTween(e,Wre(e,r)).on("end.style."+e,c6(e)):typeof t=="function"?this.styleTween(e,Zre(e,r,ck(this,"style."+e,t))).each(Qre(this._id,e)):this.styleTween(e,Xre(e,r,t),n).on("end.style."+e,null)}function eie(e,t,n){return function(r){this.style.setProperty(e,t.call(this,r),n)}}function tie(e,t,n){var r,i;function s(){var o=t.apply(this,arguments);return o!==i&&(r=(i=o)&&eie(e,o,n)),r}return s._value=t,s}function nie(e,t,n){var r="style."+(e+="");if(arguments.length<2)return(r=this.tween(r))&&r._value;if(t==null)return this.tween(r,null);if(typeof t!="function")throw new Error;return this.tween(r,tie(e,t,n??""))}function rie(e){return function(){this.textContent=e}}function iie(e){return function(){var t=e(this);this.textContent=t??""}}function sie(e){return this.tween("text",typeof e=="function"?iie(ck(this,"text",e)):rie(e==null?"":e+""))}function oie(e){return function(t){this.textContent=e.call(this,t)}}function aie(e){var t,n;function r(){var i=e.apply(this,arguments);return i!==n&&(t=(n=i)&&oie(i)),t}return r._value=e,r}function lie(e){var t="text";if(arguments.length<1)return(t=this.tween(t))&&t._value;if(e==null)return this.tween(t,null);if(typeof e!="function")throw new Error;return this.tween(t,aie(e))}function uie(){for(var e=this._name,t=this._id,n=f6(),r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],l=o.length,c,f=0;f<l;++f)if(c=o[f]){var h=zr(c,t);om(c,e,n,f,o,{time:h.time+h.delay+h.duration,delay:0,duration:h.duration,ease:h.ease})}return new Vi(r,this._parents,e,n)}function cie(){var e,t,n=this,r=n._id,i=n.size();return new Promise(function(s,o){var l={value:o},c={value:function(){--i===0&&s()}};n.each(function(){var f=oi(this,r),h=f.on;h!==e&&(t=(e=h).copy(),t._.cancel.push(l),t._.interrupt.push(l),t._.end.push(c)),f.on=t}),i===0&&s()})}var fie=0;function Vi(e,t,n,r){this._groups=e,this._parents=t,this._name=n,this._id=r}function f6(){return++fie}var Ri=sf.prototype;Vi.prototype={constructor:Vi,select:$re,selectAll:Gre,selectChild:Ri.selectChild,selectChildren:Ri.selectChildren,filter:Ire,merge:zre,selection:Yre,transition:uie,call:Ri.call,nodes:Ri.nodes,node:Ri.node,size:Ri.size,empty:Ri.empty,each:Ri.each,on:Hre,attr:Sre,attrTween:Are,style:Jre,styleTween:nie,text:sie,textTween:lie,remove:Ure,tween:mre,delay:_re,duration:Ore,ease:Lre,easeVarying:Bre,end:cie,[Symbol.iterator]:Ri[Symbol.iterator]};function die(e){return((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2}var hie={time:null,delay:0,duration:250,ease:die};function pie(e,t){for(var n;!(n=e.__transition)||!(n=n[t]);)if(!(e=e.parentNode))throw new Error(`transition ${t} not found`);return n}function mie(e){var t,n;e instanceof Vi?(t=e._id,e=e._name):(t=f6(),(n=hie).time=lk(),e=e==null?null:e+"");for(var r=this._groups,i=r.length,s=0;s<i;++s)for(var o=r[s],l=o.length,c,f=0;f<l;++f)(c=o[f])&&om(c,e,t,f,o,n||pie(c,t));return new Vi(r,this._parents,e,t)}sf.prototype.interrupt=dre;sf.prototype.transition=mie;const Zd=e=>()=>e;function gie(e,{sourceEvent:t,target:n,transform:r,dispatch:i}){Object.defineProperties(this,{type:{value:e,enumerable:!0,configurable:!0},sourceEvent:{value:t,enumerable:!0,configurable:!0},target:{value:n,enumerable:!0,configurable:!0},transform:{value:r,enumerable:!0,configurable:!0},_:{value:i}})}function Li(e,t,n){this.k=e,this.x=t,this.y=n}Li.prototype={constructor:Li,scale:function(e){return e===1?this:new Li(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new Li(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var am=new Li(1,0,0);d6.prototype=Li.prototype;function d6(e){for(;!e.__zoom;)if(!(e=e.parentNode))return am;return e.__zoom}function U0(e){e.stopImmediatePropagation()}function Fu(e){e.preventDefault(),e.stopImmediatePropagation()}function yie(e){return(!e.ctrlKey||e.type==="wheel")&&!e.button}function vie(){var e=this;return e instanceof SVGElement?(e=e.ownerSVGElement||e,e.hasAttribute("viewBox")?(e=e.viewBox.baseVal,[[e.x,e.y],[e.x+e.width,e.y+e.height]]):[[0,0],[e.width.baseVal.value,e.height.baseVal.value]]):[[0,0],[e.clientWidth,e.clientHeight]]}function FR(){return this.__zoom||am}function bie(e){return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*(e.ctrlKey?10:1)}function xie(){return navigator.maxTouchPoints||"ontouchstart"in this}function wie(e,t,n){var r=e.invertX(t[0][0])-n[0][0],i=e.invertX(t[1][0])-n[1][0],s=e.invertY(t[0][1])-n[0][1],o=e.invertY(t[1][1])-n[1][1];return e.translate(i>r?(r+i)/2:Math.min(0,r)||Math.max(0,i),o>s?(s+o)/2:Math.min(0,s)||Math.max(0,o))}function h6(){var e=yie,t=vie,n=wie,r=bie,i=xie,s=[0,1/0],o=[[-1/0,-1/0],[1/0,1/0]],l=250,c=ph,f=rm("start","zoom","end"),h,p,g,y=500,b=150,S=0,x=10;function C(B){B.property("__zoom",FR).on("wheel.zoom",O,{passive:!1}).on("mousedown.zoom",I).on("dblclick.zoom",$).filter(i).on("touchstart.zoom",q).on("touchmove.zoom",U).on("touchend.zoom touchcancel.zoom",X).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}C.transform=function(B,F,j,z){var W=B.selection?B.selection():B;W.property("__zoom",FR),B!==W?M(B,F,j,z):W.interrupt().each(function(){_(this,arguments).event(z).start().zoom(null,typeof F=="function"?F.apply(this,arguments):F).end()})},C.scaleBy=function(B,F,j,z){C.scaleTo(B,function(){var W=this.__zoom.k,J=typeof F=="function"?F.apply(this,arguments):F;return W*J},j,z)},C.scaleTo=function(B,F,j,z){C.transform(B,function(){var W=t.apply(this,arguments),J=this.__zoom,L=j==null?A(W):typeof j=="function"?j.apply(this,arguments):j,K=J.invert(L),re=typeof F=="function"?F.apply(this,arguments):F;return n(k(T(J,re),L,K),W,o)},j,z)},C.translateBy=function(B,F,j,z){C.transform(B,function(){return n(this.__zoom.translate(typeof F=="function"?F.apply(this,arguments):F,typeof j=="function"?j.apply(this,arguments):j),t.apply(this,arguments),o)},null,z)},C.translateTo=function(B,F,j,z,W){C.transform(B,function(){var J=t.apply(this,arguments),L=this.__zoom,K=z==null?A(J):typeof z=="function"?z.apply(this,arguments):z;return n(am.translate(K[0],K[1]).scale(L.k).translate(typeof F=="function"?-F.apply(this,arguments):-F,typeof j=="function"?-j.apply(this,arguments):-j),J,o)},z,W)};function T(B,F){return F=Math.max(s[0],Math.min(s[1],F)),F===B.k?B:new Li(F,B.x,B.y)}function k(B,F,j){var z=F[0]-j[0]*B.k,W=F[1]-j[1]*B.k;return z===B.x&&W===B.y?B:new Li(B.k,z,W)}function A(B){return[(+B[0][0]+ +B[1][0])/2,(+B[0][1]+ +B[1][1])/2]}function M(B,F,j,z){B.on("start.zoom",function(){_(this,arguments).event(z).start()}).on("interrupt.zoom end.zoom",function(){_(this,arguments).event(z).end()}).tween("zoom",function(){var W=this,J=arguments,L=_(W,J).event(z),K=t.apply(W,J),re=j==null?A(K):typeof j=="function"?j.apply(W,J):j,le=Math.max(K[1][0]-K[0][0],K[1][1]-K[0][1]),V=W.__zoom,G=typeof F=="function"?F.apply(W,J):F,Q=c(V.invert(re).concat(le/V.k),G.invert(re).concat(le/G.k));return function(ae){if(ae===1)ae=G;else{var se=Q(ae),ge=le/se[2];ae=new Li(ge,re[0]-se[0]*ge,re[1]-se[1]*ge)}L.zoom(null,ae)}})}function _(B,F,j){return!j&&B.__zooming||new R(B,F)}function R(B,F){this.that=B,this.args=F,this.active=0,this.sourceEvent=null,this.extent=t.apply(B,F),this.taps=0}R.prototype={event:function(B){return B&&(this.sourceEvent=B),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(B,F){return this.mouse&&B!=="mouse"&&(this.mouse[1]=F.invert(this.mouse[0])),this.touch0&&B!=="touch"&&(this.touch0[1]=F.invert(this.touch0[0])),this.touch1&&B!=="touch"&&(this.touch1[1]=F.invert(this.touch1[0])),this.that.__zoom=F,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(B){var F=tr(this.that).datum();f.call(B,this.that,new gie(B,{sourceEvent:this.sourceEvent,target:C,transform:this.that.__zoom,dispatch:f}),F)}};function O(B,...F){if(!e.apply(this,arguments))return;var j=_(this,F).event(B),z=this.__zoom,W=Math.max(s[0],Math.min(s[1],z.k*Math.pow(2,r.apply(this,arguments)))),J=Or(B);if(j.wheel)(j.mouse[0][0]!==J[0]||j.mouse[0][1]!==J[1])&&(j.mouse[1]=z.invert(j.mouse[0]=J)),clearTimeout(j.wheel);else{if(z.k===W)return;j.mouse=[J,z.invert(J)],yh(this),j.start()}Fu(B),j.wheel=setTimeout(L,b),j.zoom("mouse",n(k(T(z,W),j.mouse[0],j.mouse[1]),j.extent,o));function L(){j.wheel=null,j.end()}}function I(B,...F){if(g||!e.apply(this,arguments))return;var j=B.currentTarget,z=_(this,F,!0).event(B),W=tr(B.view).on("mousemove.zoom",re,!0).on("mouseup.zoom",le,!0),J=Or(B,j),L=B.clientX,K=B.clientY;Xz(B.view),U0(B),z.mouse=[J,this.__zoom.invert(J)],yh(this),z.start();function re(V){if(Fu(V),!z.moved){var G=V.clientX-L,Q=V.clientY-K;z.moved=G*G+Q*Q>S}z.event(V).zoom("mouse",n(k(z.that.__zoom,z.mouse[0]=Or(V,j),z.mouse[1]),z.extent,o))}function le(V){W.on("mousemove.zoom mouseup.zoom",null),Zz(V.view,z.moved),Fu(V),z.event(V).end()}}function $(B,...F){if(e.apply(this,arguments)){var j=this.__zoom,z=Or(B.changedTouches?B.changedTouches[0]:B,this),W=j.invert(z),J=j.k*(B.shiftKey?.5:2),L=n(k(T(j,J),z,W),t.apply(this,F),o);Fu(B),l>0?tr(this).transition().duration(l).call(M,L,z,B):tr(this).call(C.transform,L,z,B)}}function q(B,...F){if(e.apply(this,arguments)){var j=B.touches,z=j.length,W=_(this,F,B.changedTouches.length===z).event(B),J,L,K,re;for(U0(B),L=0;L<z;++L)K=j[L],re=Or(K,this),re=[re,this.__zoom.invert(re),K.identifier],W.touch0?!W.touch1&&W.touch0[2]!==re[2]&&(W.touch1=re,W.taps=0):(W.touch0=re,J=!0,W.taps=1+!!h);h&&(h=clearTimeout(h)),J&&(W.taps<2&&(p=re[0],h=setTimeout(function(){h=null},y)),yh(this),W.start())}}function U(B,...F){if(this.__zooming){var j=_(this,F).event(B),z=B.changedTouches,W=z.length,J,L,K,re;for(Fu(B),J=0;J<W;++J)L=z[J],K=Or(L,this),j.touch0&&j.touch0[2]===L.identifier?j.touch0[0]=K:j.touch1&&j.touch1[2]===L.identifier&&(j.touch1[0]=K);if(L=j.that.__zoom,j.touch1){var le=j.touch0[0],V=j.touch0[1],G=j.touch1[0],Q=j.touch1[1],ae=(ae=G[0]-le[0])*ae+(ae=G[1]-le[1])*ae,se=(se=Q[0]-V[0])*se+(se=Q[1]-V[1])*se;L=T(L,Math.sqrt(ae/se)),K=[(le[0]+G[0])/2,(le[1]+G[1])/2],re=[(V[0]+Q[0])/2,(V[1]+Q[1])/2]}else if(j.touch0)K=j.touch0[0],re=j.touch0[1];else return;j.zoom("touch",n(k(L,K,re),j.extent,o))}}function X(B,...F){if(this.__zooming){var j=_(this,F).event(B),z=B.changedTouches,W=z.length,J,L;for(U0(B),g&&clearTimeout(g),g=setTimeout(function(){g=null},y),J=0;J<W;++J)L=z[J],j.touch0&&j.touch0[2]===L.identifier?delete j.touch0:j.touch1&&j.touch1[2]===L.identifier&&delete j.touch1;if(j.touch1&&!j.touch0&&(j.touch0=j.touch1,delete j.touch1),j.touch0)j.touch0[1]=this.__zoom.invert(j.touch0[0]);else if(j.end(),j.taps===2&&(L=Or(L,this),Math.hypot(p[0]-L[0],p[1]-L[1])<x)){var K=tr(this).on("dblclick.zoom");K&&K.apply(this,arguments)}}}return C.wheelDelta=function(B){return arguments.length?(r=typeof B=="function"?B:Zd(+B),C):r},C.filter=function(B){return arguments.length?(e=typeof B=="function"?B:Zd(!!B),C):e},C.touchable=function(B){return arguments.length?(i=typeof B=="function"?B:Zd(!!B),C):i},C.extent=function(B){return arguments.length?(t=typeof B=="function"?B:Zd([[+B[0][0],+B[0][1]],[+B[1][0],+B[1][1]]]),C):t},C.scaleExtent=function(B){return arguments.length?(s[0]=+B[0],s[1]=+B[1],C):[s[0],s[1]]},C.translateExtent=function(B){return arguments.length?(o[0][0]=+B[0][0],o[1][0]=+B[1][0],o[0][1]=+B[0][1],o[1][1]=+B[1][1],C):[[o[0][0],o[0][1]],[o[1][0],o[1][1]]]},C.constrain=function(B){return arguments.length?(n=B,C):n},C.duration=function(B){return arguments.length?(l=+B,C):l},C.interpolate=function(B){return arguments.length?(c=B,C):c},C.on=function(){var B=f.on.apply(f,arguments);return B===f?C:B},C.clickDistance=function(B){return arguments.length?(S=(B=+B)*B,C):Math.sqrt(S)},C.tapDistance=function(B){return arguments.length?(x=+B,C):x},C}const si={error001:()=>"[React Flow]: Seems like you have not used zustand provider as an ancestor. Help: https://reactflow.dev/error#001",error002:()=>"It looks like you've created a new nodeTypes or edgeTypes object. If this wasn't on purpose please define the nodeTypes/edgeTypes outside of the component or memoize them.",error003:e=>`Node type "${e}" not found. Using fallback type "default".`,error004:()=>"The React Flow parent container needs a width and a height to render the graph.",error005:()=>"Only child nodes can use a parent extent.",error006:()=>"Can't create edge. An edge needs a source and a target.",error007:e=>`The old edge with id=${e} does not exist.`,error009:e=>`Marker type "${e}" doesn't exist.`,error008:(e,{id:t,sourceHandle:n,targetHandle:r})=>`Couldn't create edge for ${e} handle id: "${e==="source"?n:r}", edge id: ${t}.`,error010:()=>"Handle: No node id found. Make sure to only use a Handle inside a custom Node.",error011:e=>`Edge type "${e}" not found. Using fallback type "default".`,error012:e=>`Node with id "${e}" does not exist, it may have been removed. This can happen when a node is deleted before the "onNodeClick" handler is called.`,error013:(e="react")=>`It seems that you haven't loaded the styles. Please import '@xyflow/${e}/dist/style.css' or base.css to make sure everything is working properly.`,error014:()=>"useNodeConnections: No node ID found. Call useNodeConnections inside a custom Node or provide a node ID.",error015:()=>"It seems that you are trying to drag a node that is not initialized. Please use onNodesChange as explained in the docs."},Vc=[[Number.NEGATIVE_INFINITY,Number.NEGATIVE_INFINITY],[Number.POSITIVE_INFINITY,Number.POSITIVE_INFINITY]],p6=["Enter"," ","Escape"],m6={"node.a11yDescription.default":"Press enter or space to select a node. Press delete to remove it and escape to cancel.","node.a11yDescription.keyboardDisabled":"Press enter or space to select a node. You can then use the arrow keys to move the node around. Press delete to remove it and escape to cancel.","node.a11yDescription.ariaLiveMessage":({direction:e,x:t,y:n})=>`Moved selected node ${e}. New position, x: ${t}, y: ${n}`,"edge.a11yDescription.default":"Press enter or space to select an edge. You can then press delete to remove it or escape to cancel.","controls.ariaLabel":"Control Panel","controls.zoomIn.ariaLabel":"Zoom In","controls.zoomOut.ariaLabel":"Zoom Out","controls.fitView.ariaLabel":"Fit View","controls.interactive.ariaLabel":"Toggle Interactivity","minimap.ariaLabel":"Mini Map","handle.ariaLabel":"Handle"};var Ko;(function(e){e.Strict="strict",e.Loose="loose"})(Ko||(Ko={}));var zo;(function(e){e.Free="free",e.Vertical="vertical",e.Horizontal="horizontal"})(zo||(zo={}));var Hc;(function(e){e.Partial="partial",e.Full="full"})(Hc||(Hc={}));const g6={inProgress:!1,isValid:null,from:null,fromHandle:null,fromPosition:null,fromNode:null,to:null,toHandle:null,toPosition:null,toNode:null};var Ns;(function(e){e.Bezier="default",e.Straight="straight",e.Step="step",e.SmoothStep="smoothstep",e.SimpleBezier="simplebezier"})(Ns||(Ns={}));var Ep;(function(e){e.Arrow="arrow",e.ArrowClosed="arrowclosed"})(Ep||(Ep={}));var Ae;(function(e){e.Left="left",e.Top="top",e.Right="right",e.Bottom="bottom"})(Ae||(Ae={}));const UR={[Ae.Left]:Ae.Right,[Ae.Right]:Ae.Left,[Ae.Top]:Ae.Bottom,[Ae.Bottom]:Ae.Top};function y6(e){return e===null?null:e?"valid":"invalid"}const v6=e=>"id"in e&&"source"in e&&"target"in e,Sie=e=>"id"in e&&"position"in e&&!("source"in e)&&!("target"in e),fk=e=>"id"in e&&"internals"in e&&!("source"in e)&&!("target"in e),af=(e,t=[0,0])=>{const{width:n,height:r}=Fi(e),i=e.origin??t,s=n*i[0],o=r*i[1];return{x:e.position.x-s,y:e.position.y-o}},b6=(e,t={nodeOrigin:[0,0]})=>{if(e.length===0)return{x:0,y:0,width:0,height:0};const n=e.reduce((r,i)=>{const s=typeof i=="string";let o=!t.nodeLookup&&!s?i:void 0;t.nodeLookup&&(o=s?t.nodeLookup.get(i):fk(i)?i:t.nodeLookup.get(i.id));const l=o?Cp(o,t.nodeOrigin):{x:0,y:0,x2:0,y2:0};return lm(r,l)},{x:1/0,y:1/0,x2:-1/0,y2:-1/0});return um(n)},lf=(e,t={})=>{if(e.size===0)return{x:0,y:0,width:0,height:0};let n={x:1/0,y:1/0,x2:-1/0,y2:-1/0};return e.forEach(r=>{if(t.filter===void 0||t.filter(r)){const i=Cp(r);n=lm(n,i)}}),um(n)},dk=(e,t,[n,r,i]=[0,0,1],s=!1,o=!1)=>{const l={...cf(t,[n,r,i]),width:t.width/i,height:t.height/i},c=[];for(const f of e.values()){const{measured:h,selectable:p=!0,hidden:g=!1}=f;if(o&&!p||g)continue;const y=h.width??f.width??f.initialWidth??null,b=h.height??f.height??f.initialHeight??null,S=Fc(l,Cl(f)),x=(y??0)*(b??0),C=s&&S>0;(!f.internals.handleBounds||C||S>=x||f.dragging)&&c.push(f)}return c},Eie=(e,t)=>{const n=new Set;return e.forEach(r=>{n.add(r.id)}),t.filter(r=>n.has(r.source)||n.has(r.target))};function Cie(e,t){const n=new Map,r=t?.nodes?new Set(t.nodes.map(i=>i.id)):null;return e.forEach(i=>{i.measured.width&&i.measured.height&&(t?.includeHiddenNodes||!i.hidden)&&(!r||r.has(i.id))&&n.set(i.id,i)}),n}async function kie({nodes:e,width:t,height:n,panZoom:r,minZoom:i,maxZoom:s},o){if(e.size===0)return Promise.resolve(!0);const l=Cie(e,o),c=lf(l),f=cm(c,t,n,o?.minZoom??i,o?.maxZoom??s,o?.padding??.1);return await r.setViewport(f,{duration:o?.duration,ease:o?.ease,interpolate:o?.interpolate}),Promise.resolve(!0)}function x6({nodeId:e,nextPosition:t,nodeLookup:n,nodeOrigin:r=[0,0],nodeExtent:i,onError:s}){const o=n.get(e),l=o.parentId?n.get(o.parentId):void 0,{x:c,y:f}=l?l.internals.positionAbsolute:{x:0,y:0},h=o.origin??r;let p=o.extent||i;if(o.extent==="parent"&&!o.expandParent)if(!l)s?.("005",si.error005());else{const y=l.measured.width,b=l.measured.height;y&&b&&(p=[[c,f],[c+y,f+b]])}else l&&kl(o.extent)&&(p=[[o.extent[0][0]+c,o.extent[0][1]+f],[o.extent[1][0]+c,o.extent[1][1]+f]]);const g=kl(p)?Yo(t,p,o.measured):t;return(o.measured.width===void 0||o.measured.height===void 0)&&s?.("015",si.error015()),{position:{x:g.x-c+(o.measured.width??0)*h[0],y:g.y-f+(o.measured.height??0)*h[1]},positionAbsolute:g}}async function Tie({nodesToRemove:e=[],edgesToRemove:t=[],nodes:n,edges:r,onBeforeDelete:i}){const s=new Set(e.map(g=>g.id)),o=[];for(const g of n){if(g.deletable===!1)continue;const y=s.has(g.id),b=!y&&g.parentId&&o.find(S=>S.id===g.parentId);(y||b)&&o.push(g)}const l=new Set(t.map(g=>g.id)),c=r.filter(g=>g.deletable!==!1),h=Eie(o,c);for(const g of c)l.has(g.id)&&!h.find(b=>b.id===g.id)&&h.push(g);if(!i)return{edges:h,nodes:o};const p=await i({nodes:o,edges:h});return typeof p=="boolean"?p?{edges:h,nodes:o}:{edges:[],nodes:[]}:p}const El=(e,t=0,n=1)=>Math.min(Math.max(e,t),n),Yo=(e={x:0,y:0},t,n)=>({x:El(e.x,t[0][0],t[1][0]-(n?.width??0)),y:El(e.y,t[0][1],t[1][1]-(n?.height??0))});function w6(e,t,n){const{width:r,height:i}=Fi(n),{x:s,y:o}=n.internals.positionAbsolute;return Yo(e,[[s,o],[s+r,o+i]],t)}const $R=(e,t,n)=>e<t?El(Math.abs(e-t),1,t)/t:e>n?-El(Math.abs(e-n),1,t)/t:0,S6=(e,t,n=15,r=40)=>{const i=$R(e.x,r,t.width-r)*n,s=$R(e.y,r,t.height-r)*n;return[i,s]},lm=(e,t)=>({x:Math.min(e.x,t.x),y:Math.min(e.y,t.y),x2:Math.max(e.x2,t.x2),y2:Math.max(e.y2,t.y2)}),AE=({x:e,y:t,width:n,height:r})=>({x:e,y:t,x2:e+n,y2:t+r}),um=({x:e,y:t,x2:n,y2:r})=>({x:e,y:t,width:n-e,height:r-t}),Cl=(e,t=[0,0])=>{const{x:n,y:r}=fk(e)?e.internals.positionAbsolute:af(e,t);return{x:n,y:r,width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}},Cp=(e,t=[0,0])=>{const{x:n,y:r}=fk(e)?e.internals.positionAbsolute:af(e,t);return{x:n,y:r,x2:n+(e.measured?.width??e.width??e.initialWidth??0),y2:r+(e.measured?.height??e.height??e.initialHeight??0)}},E6=(e,t)=>um(lm(AE(e),AE(t))),Fc=(e,t)=>{const n=Math.max(0,Math.min(e.x+e.width,t.x+t.width)-Math.max(e.x,t.x)),r=Math.max(0,Math.min(e.y+e.height,t.y+t.height)-Math.max(e.y,t.y));return Math.ceil(n*r)},GR=e=>Br(e.width)&&Br(e.height)&&Br(e.x)&&Br(e.y),Br=e=>!isNaN(e)&&isFinite(e),Aie=(e,t)=>{},uf=(e,t=[1,1])=>({x:t[0]*Math.round(e.x/t[0]),y:t[1]*Math.round(e.y/t[1])}),cf=({x:e,y:t},[n,r,i],s=!1,o=[1,1])=>{const l={x:(e-n)/i,y:(t-r)/i};return s?uf(l,o):l},kp=({x:e,y:t},[n,r,i])=>({x:e*i+n,y:t*i+r});function Ga(e,t){if(typeof e=="number")return Math.floor((t-t/(1+e))*.5);if(typeof e=="string"&&e.endsWith("px")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(n)}if(typeof e=="string"&&e.endsWith("%")){const n=parseFloat(e);if(!Number.isNaN(n))return Math.floor(t*n*.01)}return console.error(`[React Flow] The padding value "${e}" is invalid. Please provide a number or a string with a valid unit (px or %).`),0}function Mie(e,t,n){if(typeof e=="string"||typeof e=="number"){const r=Ga(e,n),i=Ga(e,t);return{top:r,right:i,bottom:r,left:i,x:i*2,y:r*2}}if(typeof e=="object"){const r=Ga(e.top??e.y??0,n),i=Ga(e.bottom??e.y??0,n),s=Ga(e.left??e.x??0,t),o=Ga(e.right??e.x??0,t);return{top:r,right:o,bottom:i,left:s,x:s+o,y:r+i}}return{top:0,right:0,bottom:0,left:0,x:0,y:0}}function Nie(e,t,n,r,i,s){const{x:o,y:l}=kp(e,[t,n,r]),{x:c,y:f}=kp({x:e.x+e.width,y:e.y+e.height},[t,n,r]),h=i-c,p=s-f;return{left:Math.floor(o),top:Math.floor(l),right:Math.floor(h),bottom:Math.floor(p)}}const cm=(e,t,n,r,i,s)=>{const o=Mie(s,t,n),l=(t-o.x)/e.width,c=(n-o.y)/e.height,f=Math.min(l,c),h=El(f,r,i),p=e.x+e.width/2,g=e.y+e.height/2,y=t/2-p*h,b=n/2-g*h,S=Nie(e,y,b,h,t,n),x={left:Math.min(S.left-o.left,0),top:Math.min(S.top-o.top,0),right:Math.min(S.right-o.right,0),bottom:Math.min(S.bottom-o.bottom,0)};return{x:y-x.left+x.right,y:b-x.top+x.bottom,zoom:h}},Uc=()=>typeof navigator<"u"&&navigator?.userAgent?.indexOf("Mac")>=0;function kl(e){return e!=null&&e!=="parent"}function Fi(e){return{width:e.measured?.width??e.width??e.initialWidth??0,height:e.measured?.height??e.height??e.initialHeight??0}}function C6(e){return(e.measured?.width??e.width??e.initialWidth)!==void 0&&(e.measured?.height??e.height??e.initialHeight)!==void 0}function k6(e,t={width:0,height:0},n,r,i){const s={...e},o=r.get(n);if(o){const l=o.origin||i;s.x+=o.internals.positionAbsolute.x-(t.width??0)*l[0],s.y+=o.internals.positionAbsolute.y-(t.height??0)*l[1]}return s}function KR(e,t){if(e.size!==t.size)return!1;for(const n of e)if(!t.has(n))return!1;return!0}function _ie(){let e,t;return{promise:new Promise((r,i)=>{e=r,t=i}),resolve:e,reject:t}}function Rie(e){return{...m6,...e||{}}}function yc(e,{snapGrid:t=[0,0],snapToGrid:n=!1,transform:r,containerBounds:i}){const{x:s,y:o}=Jr(e),l=cf({x:s-(i?.left??0),y:o-(i?.top??0)},r),{x:c,y:f}=n?uf(l,t):l;return{xSnapped:c,ySnapped:f,...l}}const hk=e=>({width:e.offsetWidth,height:e.offsetHeight}),T6=e=>e?.getRootNode?.()||window?.document,Die=["INPUT","SELECT","TEXTAREA"];function A6(e){const t=e.composedPath?.()?.[0]||e.target;return t?.nodeType!==1?!1:Die.includes(t.nodeName)||t.hasAttribute("contenteditable")||!!t.closest(".nokey")}const M6=e=>"clientX"in e,Jr=(e,t)=>{const n=M6(e),r=n?e.clientX:e.touches?.[0].clientX,i=n?e.clientY:e.touches?.[0].clientY;return{x:r-(t?.left??0),y:i-(t?.top??0)}},YR=(e,t,n,r,i)=>{const s=t.querySelectorAll(`.${e}`);return!s||!s.length?null:Array.from(s).map(o=>{const l=o.getBoundingClientRect();return{id:o.getAttribute("data-handleid"),type:e,nodeId:i,position:o.getAttribute("data-handlepos"),x:(l.left-n.left)/r,y:(l.top-n.top)/r,...hk(o)}})};function N6({sourceX:e,sourceY:t,targetX:n,targetY:r,sourceControlX:i,sourceControlY:s,targetControlX:o,targetControlY:l}){const c=e*.125+i*.375+o*.375+n*.125,f=t*.125+s*.375+l*.375+r*.125,h=Math.abs(c-e),p=Math.abs(f-t);return[c,f,h,p]}function Qd(e,t){return e>=0?.5*e:t*25*Math.sqrt(-e)}function WR({pos:e,x1:t,y1:n,x2:r,y2:i,c:s}){switch(e){case Ae.Left:return[t-Qd(t-r,s),n];case Ae.Right:return[t+Qd(r-t,s),n];case Ae.Top:return[t,n-Qd(n-i,s)];case Ae.Bottom:return[t,n+Qd(i-n,s)]}}function pk({sourceX:e,sourceY:t,sourcePosition:n=Ae.Bottom,targetX:r,targetY:i,targetPosition:s=Ae.Top,curvature:o=.25}){const[l,c]=WR({pos:n,x1:e,y1:t,x2:r,y2:i,c:o}),[f,h]=WR({pos:s,x1:r,y1:i,x2:e,y2:t,c:o}),[p,g,y,b]=N6({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:l,sourceControlY:c,targetControlX:f,targetControlY:h});return[`M${e},${t} C${l},${c} ${f},${h} ${r},${i}`,p,g,y,b]}function mk({sourceX:e,sourceY:t,targetX:n,targetY:r}){const i=Math.abs(n-e)/2,s=n<e?n+i:n-i,o=Math.abs(r-t)/2,l=r<t?r+o:r-o;return[s,l,i,o]}function Oie({sourceNode:e,targetNode:t,selected:n=!1,zIndex:r,elevateOnSelect:i=!1}){if(r!==void 0)return r;const s=i&&n?1e3:0,o=Math.max(e.parentId?e.internals.z:0,t.parentId?t.internals.z:0);return s+o}function jie({sourceNode:e,targetNode:t,width:n,height:r,transform:i}){const s=lm(Cp(e),Cp(t));s.x===s.x2&&(s.x2+=1),s.y===s.y2&&(s.y2+=1);const o={x:-i[0]/i[2],y:-i[1]/i[2],width:n/i[2],height:r/i[2]};return Fc(o,um(s))>0}const Lie=({source:e,sourceHandle:t,target:n,targetHandle:r})=>`xy-edge__${e}${t||""}-${n}${r||""}`,Pie=(e,t)=>t.some(n=>n.source===e.source&&n.target===e.target&&(n.sourceHandle===e.sourceHandle||!n.sourceHandle&&!e.sourceHandle)&&(n.targetHandle===e.targetHandle||!n.targetHandle&&!e.targetHandle)),_6=(e,t)=>{if(!e.source||!e.target)return t;let n;return v6(e)?n={...e}:n={...e,id:Lie(e)},Pie(n,t)?t:(n.sourceHandle===null&&delete n.sourceHandle,n.targetHandle===null&&delete n.targetHandle,t.concat(n))};function R6({sourceX:e,sourceY:t,targetX:n,targetY:r}){const[i,s,o,l]=mk({sourceX:e,sourceY:t,targetX:n,targetY:r});return[`M ${e},${t}L ${n},${r}`,i,s,o,l]}const XR={[Ae.Left]:{x:-1,y:0},[Ae.Right]:{x:1,y:0},[Ae.Top]:{x:0,y:-1},[Ae.Bottom]:{x:0,y:1}},Bie=({source:e,sourcePosition:t=Ae.Bottom,target:n})=>t===Ae.Left||t===Ae.Right?e.x<n.x?{x:1,y:0}:{x:-1,y:0}:e.y<n.y?{x:0,y:1}:{x:0,y:-1},ZR=(e,t)=>Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2));function Iie({source:e,sourcePosition:t=Ae.Bottom,target:n,targetPosition:r=Ae.Top,center:i,offset:s,stepPosition:o}){const l=XR[t],c=XR[r],f={x:e.x+l.x*s,y:e.y+l.y*s},h={x:n.x+c.x*s,y:n.y+c.y*s},p=Bie({source:f,sourcePosition:t,target:h}),g=p.x!==0?"x":"y",y=p[g];let b=[],S,x;const C={x:0,y:0},T={x:0,y:0},[,,k,A]=mk({sourceX:e.x,sourceY:e.y,targetX:n.x,targetY:n.y});if(l[g]*c[g]===-1){g==="x"?(S=i.x??f.x+(h.x-f.x)*o,x=i.y??(f.y+h.y)/2):(S=i.x??(f.x+h.x)/2,x=i.y??f.y+(h.y-f.y)*o);const _=[{x:S,y:f.y},{x:S,y:h.y}],R=[{x:f.x,y:x},{x:h.x,y:x}];l[g]===y?b=g==="x"?_:R:b=g==="x"?R:_}else{const _=[{x:f.x,y:h.y}],R=[{x:h.x,y:f.y}];if(g==="x"?b=l.x===y?R:_:b=l.y===y?_:R,t===r){const U=Math.abs(e[g]-n[g]);if(U<=s){const X=Math.min(s-1,s-U);l[g]===y?C[g]=(f[g]>e[g]?-1:1)*X:T[g]=(h[g]>n[g]?-1:1)*X}}if(t!==r){const U=g==="x"?"y":"x",X=l[g]===c[U],B=f[U]>h[U],F=f[U]<h[U];(l[g]===1&&(!X&&B||X&&F)||l[g]!==1&&(!X&&F||X&&B))&&(b=g==="x"?_:R)}const O={x:f.x+C.x,y:f.y+C.y},I={x:h.x+T.x,y:h.y+T.y},$=Math.max(Math.abs(O.x-b[0].x),Math.abs(I.x-b[0].x)),q=Math.max(Math.abs(O.y-b[0].y),Math.abs(I.y-b[0].y));$>=q?(S=(O.x+I.x)/2,x=b[0].y):(S=b[0].x,x=(O.y+I.y)/2)}return[[e,{x:f.x+C.x,y:f.y+C.y},...b,{x:h.x+T.x,y:h.y+T.y},n],S,x,k,A]}function zie(e,t,n,r){const i=Math.min(ZR(e,t)/2,ZR(t,n)/2,r),{x:s,y:o}=t;if(e.x===s&&s===n.x||e.y===o&&o===n.y)return`L${s} ${o}`;if(e.y===o){const f=e.x<n.x?-1:1,h=e.y<n.y?1:-1;return`L ${s+i*f},${o}Q ${s},${o} ${s},${o+i*h}`}const l=e.x<n.x?1:-1,c=e.y<n.y?-1:1;return`L ${s},${o+i*c}Q ${s},${o} ${s+i*l},${o}`}function ME({sourceX:e,sourceY:t,sourcePosition:n=Ae.Bottom,targetX:r,targetY:i,targetPosition:s=Ae.Top,borderRadius:o=5,centerX:l,centerY:c,offset:f=20,stepPosition:h=.5}){const[p,g,y,b,S]=Iie({source:{x:e,y:t},sourcePosition:n,target:{x:r,y:i},targetPosition:s,center:{x:l,y:c},offset:f,stepPosition:h});return[p.reduce((C,T,k)=>{let A="";return k>0&&k<p.length-1?A=zie(p[k-1],T,p[k+1],o):A=`${k===0?"M":"L"}${T.x} ${T.y}`,C+=A,C},""),g,y,b,S]}function QR(e){return e&&!!(e.internals.handleBounds||e.handles?.length)&&!!(e.measured.width||e.width||e.initialWidth)}function qie(e){const{sourceNode:t,targetNode:n}=e;if(!QR(t)||!QR(n))return null;const r=t.internals.handleBounds||JR(t.handles),i=n.internals.handleBounds||JR(n.handles),s=eD(r?.source??[],e.sourceHandle),o=eD(e.connectionMode===Ko.Strict?i?.target??[]:(i?.target??[]).concat(i?.source??[]),e.targetHandle);if(!s||!o)return e.onError?.("008",si.error008(s?"target":"source",{id:e.id,sourceHandle:e.sourceHandle,targetHandle:e.targetHandle})),null;const l=s?.position||Ae.Bottom,c=o?.position||Ae.Top,f=$c(t,s,l),h=$c(n,o,c);return{sourceX:f.x,sourceY:f.y,targetX:h.x,targetY:h.y,sourcePosition:l,targetPosition:c}}function JR(e){if(!e)return null;const t=[],n=[];for(const r of e)r.width=r.width??1,r.height=r.height??1,r.type==="source"?t.push(r):r.type==="target"&&n.push(r);return{source:t,target:n}}function $c(e,t,n=Ae.Left,r=!1){const i=(t?.x??0)+e.internals.positionAbsolute.x,s=(t?.y??0)+e.internals.positionAbsolute.y,{width:o,height:l}=t??Fi(e);if(r)return{x:i+o/2,y:s+l/2};switch(t?.position??n){case Ae.Top:return{x:i+o/2,y:s};case Ae.Right:return{x:i+o,y:s+l/2};case Ae.Bottom:return{x:i+o/2,y:s+l};case Ae.Left:return{x:i,y:s+l/2}}}function eD(e,t){return e&&(t?e.find(n=>n.id===t):e[0])||null}function NE(e,t){return e?typeof e=="string"?e:`${t?`${t}__`:""}${Object.keys(e).sort().map(r=>`${r}=${e[r]}`).join("&")}`:""}function Vie(e,{id:t,defaultColor:n,defaultMarkerStart:r,defaultMarkerEnd:i}){const s=new Set;return e.reduce((o,l)=>([l.markerStart||r,l.markerEnd||i].forEach(c=>{if(c&&typeof c=="object"){const f=NE(c,t);s.has(f)||(o.push({id:f,color:c.color||n,...c}),s.add(f))}}),o),[]).sort((o,l)=>o.id.localeCompare(l.id))}const gk={nodeOrigin:[0,0],nodeExtent:Vc,elevateNodesOnSelect:!0,defaults:{}},Hie={...gk,checkEquality:!0};function yk(e,t){const n={...e};for(const r in t)t[r]!==void 0&&(n[r]=t[r]);return n}function Fie(e,t,n){const r=yk(gk,n);for(const i of e.values())if(i.parentId)vk(i,e,t,r);else{const s=af(i,r.nodeOrigin),o=kl(i.extent)?i.extent:r.nodeExtent,l=Yo(s,o,Fi(i));i.internals.positionAbsolute=l}}function _E(e,t,n,r){const i=yk(Hie,r);let s=e.length>0;const o=new Map(t),l=i?.elevateNodesOnSelect?1e3:0;t.clear(),n.clear();for(const c of e){let f=o.get(c.id);if(i.checkEquality&&c===f?.internals.userNode)t.set(c.id,f);else{const h=af(c,i.nodeOrigin),p=kl(c.extent)?c.extent:i.nodeExtent,g=Yo(h,p,Fi(c));f={...i.defaults,...c,measured:{width:c.measured?.width,height:c.measured?.height},internals:{positionAbsolute:g,handleBounds:c.measured?f?.internals.handleBounds:void 0,z:D6(c,l),userNode:c}},t.set(c.id,f)}(f.measured===void 0||f.measured.width===void 0||f.measured.height===void 0)&&!f.hidden&&(s=!1),c.parentId&&vk(f,t,n,r)}return s}function Uie(e,t){if(!e.parentId)return;const n=t.get(e.parentId);n?n.set(e.id,e):t.set(e.parentId,new Map([[e.id,e]]))}function vk(e,t,n,r){const{elevateNodesOnSelect:i,nodeOrigin:s,nodeExtent:o}=yk(gk,r),l=e.parentId,c=t.get(l);if(!c){console.warn(`Parent node ${l} not found. Please make sure that parent nodes are in front of their child nodes in the nodes array.`);return}Uie(e,n);const f=i?1e3:0,{x:h,y:p,z:g}=$ie(e,c,s,o,f),{positionAbsolute:y}=e.internals,b=h!==y.x||p!==y.y;(b||g!==e.internals.z)&&t.set(e.id,{...e,internals:{...e.internals,positionAbsolute:b?{x:h,y:p}:y,z:g}})}function D6(e,t){return(Br(e.zIndex)?e.zIndex:0)+(e.selected?t:0)}function $ie(e,t,n,r,i){const{x:s,y:o}=t.internals.positionAbsolute,l=Fi(e),c=af(e,n),f=kl(e.extent)?Yo(c,e.extent,l):c;let h=Yo({x:s+f.x,y:o+f.y},r,l);e.extent==="parent"&&(h=w6(h,l,t));const p=D6(e,i),g=t.internals.z??0;return{x:h.x,y:h.y,z:g>=p?g+1:p}}function bk(e,t,n,r=[0,0]){const i=[],s=new Map;for(const o of e){const l=t.get(o.parentId);if(!l)continue;const c=s.get(o.parentId)?.expandedRect??Cl(l),f=E6(c,o.rect);s.set(o.parentId,{expandedRect:f,parent:l})}return s.size>0&&s.forEach(({expandedRect:o,parent:l},c)=>{const f=l.internals.positionAbsolute,h=Fi(l),p=l.origin??r,g=o.x<f.x?Math.round(Math.abs(f.x-o.x)):0,y=o.y<f.y?Math.round(Math.abs(f.y-o.y)):0,b=Math.max(h.width,Math.round(o.width)),S=Math.max(h.height,Math.round(o.height)),x=(b-h.width)*p[0],C=(S-h.height)*p[1];(g>0||y>0||x||C)&&(i.push({id:c,type:"position",position:{x:l.position.x-g+x,y:l.position.y-y+C}}),n.get(c)?.forEach(T=>{e.some(k=>k.id===T.id)||i.push({id:T.id,type:"position",position:{x:T.position.x+g,y:T.position.y+y}})})),(h.width<o.width||h.height<o.height||g||y)&&i.push({id:c,type:"dimensions",setAttributes:!0,dimensions:{width:b+(g?p[0]*g-x:0),height:S+(y?p[1]*y-C:0)}})}),i}function Gie(e,t,n,r,i,s){const o=r?.querySelector(".xyflow__viewport");let l=!1;if(!o)return{changes:[],updatedInternals:l};const c=[],f=window.getComputedStyle(o),{m22:h}=new window.DOMMatrixReadOnly(f.transform),p=[];for(const g of e.values()){const y=t.get(g.id);if(!y)continue;if(y.hidden){t.set(y.id,{...y,internals:{...y.internals,handleBounds:void 0}}),l=!0;continue}const b=hk(g.nodeElement),S=y.measured.width!==b.width||y.measured.height!==b.height;if(!!(b.width&&b.height&&(S||!y.internals.handleBounds||g.force))){const C=g.nodeElement.getBoundingClientRect(),T=kl(y.extent)?y.extent:s;let{positionAbsolute:k}=y.internals;y.parentId&&y.extent==="parent"?k=w6(k,b,t.get(y.parentId)):T&&(k=Yo(k,T,b));const A={...y,measured:b,internals:{...y.internals,positionAbsolute:k,handleBounds:{source:YR("source",g.nodeElement,C,h,y.id),target:YR("target",g.nodeElement,C,h,y.id)}}};t.set(y.id,A),y.parentId&&vk(A,t,n,{nodeOrigin:i}),l=!0,S&&(c.push({id:y.id,type:"dimensions",dimensions:b}),y.expandParent&&y.parentId&&p.push({id:y.id,parentId:y.parentId,rect:Cl(A,i)}))}}if(p.length>0){const g=bk(p,t,n,i);c.push(...g)}return{changes:c,updatedInternals:l}}async function Kie({delta:e,panZoom:t,transform:n,translateExtent:r,width:i,height:s}){if(!t||!e.x&&!e.y)return Promise.resolve(!1);const o=await t.setViewportConstrained({x:n[0]+e.x,y:n[1]+e.y,zoom:n[2]},[[0,0],[i,s]],r),l=!!o&&(o.x!==n[0]||o.y!==n[1]||o.k!==n[2]);return Promise.resolve(l)}function tD(e,t,n,r,i,s){let o=i;const l=r.get(o)||new Map;r.set(o,l.set(n,t)),o=`${i}-${e}`;const c=r.get(o)||new Map;if(r.set(o,c.set(n,t)),s){o=`${i}-${e}-${s}`;const f=r.get(o)||new Map;r.set(o,f.set(n,t))}}function O6(e,t,n){e.clear(),t.clear();for(const r of n){const{source:i,target:s,sourceHandle:o=null,targetHandle:l=null}=r,c={edgeId:r.id,source:i,target:s,sourceHandle:o,targetHandle:l},f=`${i}-${o}--${s}-${l}`,h=`${s}-${l}--${i}-${o}`;tD("source",c,h,e,i,o),tD("target",c,f,e,s,l),t.set(r.id,r)}}function j6(e,t){if(!e.parentId)return!1;const n=t.get(e.parentId);return n?n.selected?!0:j6(n,t):!1}function nD(e,t,n){let r=e;do{if(r?.matches?.(t))return!0;if(r===n)return!1;r=r?.parentElement}while(r);return!1}function Yie(e,t,n,r){const i=new Map;for(const[s,o]of e)if((o.selected||o.id===r)&&(!o.parentId||!j6(o,e))&&(o.draggable||t&&typeof o.draggable>"u")){const l=e.get(s);l&&i.set(s,{id:s,position:l.position||{x:0,y:0},distance:{x:n.x-l.internals.positionAbsolute.x,y:n.y-l.internals.positionAbsolute.y},extent:l.extent,parentId:l.parentId,origin:l.origin,expandParent:l.expandParent,internals:{positionAbsolute:l.internals.positionAbsolute||{x:0,y:0}},measured:{width:l.measured.width??0,height:l.measured.height??0}})}return i}function $0({nodeId:e,dragItems:t,nodeLookup:n,dragging:r=!0}){const i=[];for(const[o,l]of t){const c=n.get(o)?.internals.userNode;c&&i.push({...c,position:l.position,dragging:r})}if(!e)return[i[0],i];const s=n.get(e)?.internals.userNode;return[s?{...s,position:t.get(e)?.position||s.position,dragging:r}:i[0],i]}function Wie({dragItems:e,snapGrid:t,x:n,y:r}){const i=e.values().next().value;if(!i)return null;const s={x:n-i.distance.x,y:r-i.distance.y},o=uf(s,t);return{x:o.x-s.x,y:o.y-s.y}}function Xie({onNodeMouseDown:e,getStoreItems:t,onDragStart:n,onDrag:r,onDragStop:i}){let s={x:null,y:null},o=0,l=new Map,c=!1,f={x:0,y:0},h=null,p=!1,g=null,y=!1,b=!1,S=null;function x({noDragClassName:T,handleSelector:k,domNode:A,isSelectable:M,nodeId:_,nodeClickDistance:R=0}){g=tr(A);function O({x:U,y:X}){const{nodeLookup:B,nodeExtent:F,snapGrid:j,snapToGrid:z,nodeOrigin:W,onNodeDrag:J,onSelectionDrag:L,onError:K,updateNodePositions:re}=t();s={x:U,y:X};let le=!1;const V=l.size>1,G=V&&F?AE(lf(l)):null,Q=V&&z?Wie({dragItems:l,snapGrid:j,x:U,y:X}):null;for(const[ae,se]of l){if(!B.has(ae))continue;let ge={x:U-se.distance.x,y:X-se.distance.y};z&&(ge=Q?{x:Math.round(ge.x+Q.x),y:Math.round(ge.y+Q.y)}:uf(ge,j));let Ce=null;if(V&&F&&!se.extent&&G){const{positionAbsolute:Te}=se.internals,be=Te.x-G.x+F[0][0],we=Te.x+se.measured.width-G.x2+F[1][0],tt=Te.y-G.y+F[0][1],Me=Te.y+se.measured.height-G.y2+F[1][1];Ce=[[be,tt],[we,Me]]}const{position:De,positionAbsolute:ke}=x6({nodeId:ae,nextPosition:ge,nodeLookup:B,nodeExtent:Ce||F,nodeOrigin:W,onError:K});le=le||se.position.x!==De.x||se.position.y!==De.y,se.position=De,se.internals.positionAbsolute=ke}if(b=b||le,!!le&&(re(l,!0),S&&(r||J||!_&&L))){const[ae,se]=$0({nodeId:_,dragItems:l,nodeLookup:B});r?.(S,l,ae,se),J?.(S,ae,se),_||L?.(S,se)}}async function I(){if(!h)return;const{transform:U,panBy:X,autoPanSpeed:B,autoPanOnNodeDrag:F}=t();if(!F){c=!1,cancelAnimationFrame(o);return}const[j,z]=S6(f,h,B);(j!==0||z!==0)&&(s.x=(s.x??0)-j/U[2],s.y=(s.y??0)-z/U[2],await X({x:j,y:z})&&O(s)),o=requestAnimationFrame(I)}function $(U){const{nodeLookup:X,multiSelectionActive:B,nodesDraggable:F,transform:j,snapGrid:z,snapToGrid:W,selectNodesOnDrag:J,onNodeDragStart:L,onSelectionDragStart:K,unselectNodesAndEdges:re}=t();p=!0,(!J||!M)&&!B&&_&&(X.get(_)?.selected||re()),M&&J&&_&&e?.(_);const le=yc(U.sourceEvent,{transform:j,snapGrid:z,snapToGrid:W,containerBounds:h});if(s=le,l=Yie(X,F,le,_),l.size>0&&(n||L||!_&&K)){const[V,G]=$0({nodeId:_,dragItems:l,nodeLookup:X});n?.(U.sourceEvent,l,V,G),L?.(U.sourceEvent,V,G),_||K?.(U.sourceEvent,G)}}const q=Qz().clickDistance(R).on("start",U=>{const{domNode:X,nodeDragThreshold:B,transform:F,snapGrid:j,snapToGrid:z}=t();h=X?.getBoundingClientRect()||null,y=!1,b=!1,S=U.sourceEvent,B===0&&$(U),s=yc(U.sourceEvent,{transform:F,snapGrid:j,snapToGrid:z,containerBounds:h}),f=Jr(U.sourceEvent,h)}).on("drag",U=>{const{autoPanOnNodeDrag:X,transform:B,snapGrid:F,snapToGrid:j,nodeDragThreshold:z,nodeLookup:W}=t(),J=yc(U.sourceEvent,{transform:B,snapGrid:F,snapToGrid:j,containerBounds:h});if(S=U.sourceEvent,(U.sourceEvent.type==="touchmove"&&U.sourceEvent.touches.length>1||_&&!W.has(_))&&(y=!0),!y){if(!c&&X&&p&&(c=!0,I()),!p){const L=J.xSnapped-(s.x??0),K=J.ySnapped-(s.y??0);Math.sqrt(L*L+K*K)>z&&$(U)}(s.x!==J.xSnapped||s.y!==J.ySnapped)&&l&&p&&(f=Jr(U.sourceEvent,h),O(J))}}).on("end",U=>{if(!(!p||y)&&(c=!1,p=!1,cancelAnimationFrame(o),l.size>0)){const{nodeLookup:X,updateNodePositions:B,onNodeDragStop:F,onSelectionDragStop:j}=t();if(b&&(B(l,!1),b=!1),i||F||!_&&j){const[z,W]=$0({nodeId:_,dragItems:l,nodeLookup:X,dragging:!1});i?.(U.sourceEvent,l,z,W),F?.(U.sourceEvent,z,W),_||j?.(U.sourceEvent,W)}}}).filter(U=>{const X=U.target;return!U.button&&(!T||!nD(X,`.${T}`,A))&&(!k||nD(X,k,A))});g.call(q)}function C(){g?.on(".drag",null)}return{update:x,destroy:C}}function Zie(e,t,n){const r=[],i={x:e.x-n,y:e.y-n,width:n*2,height:n*2};for(const s of t.values())Fc(i,Cl(s))>0&&r.push(s);return r}const Qie=250;function Jie(e,t,n,r){let i=[],s=1/0;const o=Zie(e,n,t+Qie);for(const l of o){const c=[...l.internals.handleBounds?.source??[],...l.internals.handleBounds?.target??[]];for(const f of c){if(r.nodeId===f.nodeId&&r.type===f.type&&r.id===f.id)continue;const{x:h,y:p}=$c(l,f,f.position,!0),g=Math.sqrt(Math.pow(h-e.x,2)+Math.pow(p-e.y,2));g>t||(g<s?(i=[{...f,x:h,y:p}],s=g):g===s&&i.push({...f,x:h,y:p}))}}if(!i.length)return null;if(i.length>1){const l=r.type==="source"?"target":"source";return i.find(c=>c.type===l)??i[0]}return i[0]}function L6(e,t,n,r,i,s=!1){const o=r.get(e);if(!o)return null;const l=i==="strict"?o.internals.handleBounds?.[t]:[...o.internals.handleBounds?.source??[],...o.internals.handleBounds?.target??[]],c=(n?l?.find(f=>f.id===n):l?.[0])??null;return c&&s?{...c,...$c(o,c,c.position,!0)}:c}function P6(e,t){return e||(t?.classList.contains("target")?"target":t?.classList.contains("source")?"source":null)}function ese(e,t){let n=null;return t?n=!0:e&&!t&&(n=!1),n}const B6=()=>!0;function tse(e,{connectionMode:t,connectionRadius:n,handleId:r,nodeId:i,edgeUpdaterType:s,isTarget:o,domNode:l,nodeLookup:c,lib:f,autoPanOnConnect:h,flowId:p,panBy:g,cancelConnection:y,onConnectStart:b,onConnect:S,onConnectEnd:x,isValidConnection:C=B6,onReconnectEnd:T,updateConnection:k,getTransform:A,getFromHandle:M,autoPanSpeed:_,dragThreshold:R=1,handleDomNode:O}){const I=T6(e.target);let $=0,q;const{x:U,y:X}=Jr(e),B=P6(s,O),F=l?.getBoundingClientRect();let j=!1;if(!F||!B)return;const z=L6(i,B,r,c,t);if(!z)return;let W=Jr(e,F),J=!1,L=null,K=!1,re=null;function le(){if(!h||!F)return;const[De,ke]=S6(W,F,_);g({x:De,y:ke}),$=requestAnimationFrame(le)}const V={...z,nodeId:i,type:B,position:z.position},G=c.get(i);let ae={inProgress:!0,isValid:null,from:$c(G,V,Ae.Left,!0),fromHandle:V,fromPosition:V.position,fromNode:G,to:W,toHandle:null,toPosition:UR[V.position],toNode:null};function se(){j=!0,k(ae),b?.(e,{nodeId:i,handleId:r,handleType:B})}R===0&&se();function ge(De){if(!j){const{x:we,y:tt}=Jr(De),Me=we-U,rn=tt-X;if(!(Me*Me+rn*rn>R*R))return;se()}if(!M()||!V){Ce(De);return}const ke=A();W=Jr(De,F),q=Jie(cf(W,ke,!1,[1,1]),n,c,V),J||(le(),J=!0);const Te=I6(De,{handle:q,connectionMode:t,fromNodeId:i,fromHandleId:r,fromType:o?"target":"source",isValidConnection:C,doc:I,lib:f,flowId:p,nodeLookup:c});re=Te.handleDomNode,L=Te.connection,K=ese(!!q,Te.isValid);const be={...ae,isValid:K,to:Te.toHandle&&K?kp({x:Te.toHandle.x,y:Te.toHandle.y},ke):W,toHandle:Te.toHandle,toPosition:K&&Te.toHandle?Te.toHandle.position:UR[V.position],toNode:Te.toHandle?c.get(Te.toHandle.nodeId):null};K&&q&&ae.toHandle&&be.toHandle&&ae.toHandle.type===be.toHandle.type&&ae.toHandle.nodeId===be.toHandle.nodeId&&ae.toHandle.id===be.toHandle.id&&ae.to.x===be.to.x&&ae.to.y===be.to.y||(k(be),ae=be)}function Ce(De){if(j){(q||re)&&L&&K&&S?.(L);const{inProgress:ke,...Te}=ae,be={...Te,toPosition:ae.toHandle?ae.toPosition:null};x?.(De,be),s&&T?.(De,be)}y(),cancelAnimationFrame($),J=!1,K=!1,L=null,re=null,I.removeEventListener("mousemove",ge),I.removeEventListener("mouseup",Ce),I.removeEventListener("touchmove",ge),I.removeEventListener("touchend",Ce)}I.addEventListener("mousemove",ge),I.addEventListener("mouseup",Ce),I.addEventListener("touchmove",ge),I.addEventListener("touchend",Ce)}function I6(e,{handle:t,connectionMode:n,fromNodeId:r,fromHandleId:i,fromType:s,doc:o,lib:l,flowId:c,isValidConnection:f=B6,nodeLookup:h}){const p=s==="target",g=t?o.querySelector(`.${l}-flow__handle[data-id="${c}-${t?.nodeId}-${t?.id}-${t?.type}"]`):null,{x:y,y:b}=Jr(e),S=o.elementFromPoint(y,b),x=S?.classList.contains(`${l}-flow__handle`)?S:g,C={handleDomNode:x,isValid:!1,connection:null,toHandle:null};if(x){const T=P6(void 0,x),k=x.getAttribute("data-nodeid"),A=x.getAttribute("data-handleid"),M=x.classList.contains("connectable"),_=x.classList.contains("connectableend");if(!k||!T)return C;const R={source:p?k:r,sourceHandle:p?A:i,target:p?r:k,targetHandle:p?i:A};C.connection=R;const I=M&&_&&(n===Ko.Strict?p&&T==="source"||!p&&T==="target":k!==r||A!==i);C.isValid=I&&f(R),C.toHandle=L6(k,T,A,h,n,!0)}return C}const RE={onPointerDown:tse,isValid:I6};function nse({domNode:e,panZoom:t,getTransform:n,getViewScale:r}){const i=tr(e);function s({translateExtent:l,width:c,height:f,zoomStep:h=1,pannable:p=!0,zoomable:g=!0,inversePan:y=!1}){const b=k=>{if(k.sourceEvent.type!=="wheel"||!t)return;const A=n(),M=k.sourceEvent.ctrlKey&&Uc()?10:1,_=-k.sourceEvent.deltaY*(k.sourceEvent.deltaMode===1?.05:k.sourceEvent.deltaMode?1:.002)*h,R=A[2]*Math.pow(2,_*M);t.scaleTo(R)};let S=[0,0];const x=k=>{(k.sourceEvent.type==="mousedown"||k.sourceEvent.type==="touchstart")&&(S=[k.sourceEvent.clientX??k.sourceEvent.touches[0].clientX,k.sourceEvent.clientY??k.sourceEvent.touches[0].clientY])},C=k=>{const A=n();if(k.sourceEvent.type!=="mousemove"&&k.sourceEvent.type!=="touchmove"||!t)return;const M=[k.sourceEvent.clientX??k.sourceEvent.touches[0].clientX,k.sourceEvent.clientY??k.sourceEvent.touches[0].clientY],_=[M[0]-S[0],M[1]-S[1]];S=M;const R=r()*Math.max(A[2],Math.log(A[2]))*(y?-1:1),O={x:A[0]-_[0]*R,y:A[1]-_[1]*R},I=[[0,0],[c,f]];t.setViewportConstrained({x:O.x,y:O.y,zoom:A[2]},I,l)},T=h6().on("start",x).on("zoom",p?C:null).on("zoom.wheel",g?b:null);i.call(T,{})}function o(){i.on("zoom",null)}return{update:s,destroy:o,pointer:Or}}const rse=(e,t)=>e.x!==t.x||e.y!==t.y||e.zoom!==t.k,fm=e=>({x:e.x,y:e.y,zoom:e.k}),G0=({x:e,y:t,zoom:n})=>am.translate(e,t).scale(n),ol=(e,t)=>e.target.closest(`.${t}`),z6=(e,t)=>t===2&&Array.isArray(e)&&e.includes(2),ise=e=>((e*=2)<=1?e*e*e:(e-=2)*e*e+2)/2,K0=(e,t=0,n=ise,r=()=>{})=>{const i=typeof t=="number"&&t>0;return i||r(),i?e.transition().duration(t).ease(n).on("end",r):e},q6=e=>{const t=e.ctrlKey&&Uc()?10:1;return-e.deltaY*(e.deltaMode===1?.05:e.deltaMode?1:.002)*t};function sse({zoomPanValues:e,noWheelClassName:t,d3Selection:n,d3Zoom:r,panOnScrollMode:i,panOnScrollSpeed:s,zoomOnPinch:o,onPanZoomStart:l,onPanZoom:c,onPanZoomEnd:f}){return h=>{if(ol(h,t))return!1;h.preventDefault(),h.stopImmediatePropagation();const p=n.property("__zoom").k||1;if(h.ctrlKey&&o){const x=Or(h),C=q6(h),T=p*Math.pow(2,C);r.scaleTo(n,T,x,h);return}const g=h.deltaMode===1?20:1;let y=i===zo.Vertical?0:h.deltaX*g,b=i===zo.Horizontal?0:h.deltaY*g;!Uc()&&h.shiftKey&&i!==zo.Vertical&&(y=h.deltaY*g,b=0),r.translateBy(n,-(y/p)*s,-(b/p)*s,{internal:!0});const S=fm(n.property("__zoom"));clearTimeout(e.panScrollTimeout),e.isPanScrolling||(e.isPanScrolling=!0,l?.(h,S)),e.isPanScrolling&&(c?.(h,S),e.panScrollTimeout=setTimeout(()=>{f?.(h,S),e.isPanScrolling=!1},150))}}function ose({noWheelClassName:e,preventScrolling:t,d3ZoomHandler:n}){return function(r,i){const s=r.type==="wheel",o=!t&&s&&!r.ctrlKey,l=ol(r,e);if(r.ctrlKey&&s&&l&&r.preventDefault(),o||l)return null;r.preventDefault(),n.call(this,r,i)}}function ase({zoomPanValues:e,onDraggingChange:t,onPanZoomStart:n}){return r=>{if(r.sourceEvent?.internal)return;const i=fm(r.transform);e.mouseButton=r.sourceEvent?.button||0,e.isZoomingOrPanning=!0,e.prevViewport=i,r.sourceEvent?.type==="mousedown"&&t(!0),n&&n?.(r.sourceEvent,i)}}function lse({zoomPanValues:e,panOnDrag:t,onPaneContextMenu:n,onTransformChange:r,onPanZoom:i}){return s=>{e.usedRightMouseButton=!!(n&&z6(t,e.mouseButton??0)),s.sourceEvent?.sync||r([s.transform.x,s.transform.y,s.transform.k]),i&&!s.sourceEvent?.internal&&i?.(s.sourceEvent,fm(s.transform))}}function use({zoomPanValues:e,panOnDrag:t,panOnScroll:n,onDraggingChange:r,onPanZoomEnd:i,onPaneContextMenu:s}){return o=>{if(!o.sourceEvent?.internal&&(e.isZoomingOrPanning=!1,s&&z6(t,e.mouseButton??0)&&!e.usedRightMouseButton&&o.sourceEvent&&s(o.sourceEvent),e.usedRightMouseButton=!1,r(!1),i&&rse(e.prevViewport,o.transform))){const l=fm(o.transform);e.prevViewport=l,clearTimeout(e.timerId),e.timerId=setTimeout(()=>{i?.(o.sourceEvent,l)},n?150:0)}}}function cse({zoomActivationKeyPressed:e,zoomOnScroll:t,zoomOnPinch:n,panOnDrag:r,panOnScroll:i,zoomOnDoubleClick:s,userSelectionActive:o,noWheelClassName:l,noPanClassName:c,lib:f}){return h=>{const p=e||t,g=n&&h.ctrlKey;if(h.button===1&&h.type==="mousedown"&&(ol(h,`${f}-flow__node`)||ol(h,`${f}-flow__edge`)))return!0;if(!r&&!p&&!i&&!s&&!n||o||ol(h,l)&&h.type==="wheel"||ol(h,c)&&(h.type!=="wheel"||i&&h.type==="wheel"&&!e)||!n&&h.ctrlKey&&h.type==="wheel")return!1;if(!n&&h.type==="touchstart"&&h.touches?.length>1)return h.preventDefault(),!1;if(!p&&!i&&!g&&h.type==="wheel"||!r&&(h.type==="mousedown"||h.type==="touchstart")||Array.isArray(r)&&!r.includes(h.button)&&h.type==="mousedown")return!1;const y=Array.isArray(r)&&r.includes(h.button)||!h.button||h.button<=1;return(!h.ctrlKey||h.type==="wheel")&&y}}function fse({domNode:e,minZoom:t,maxZoom:n,paneClickDistance:r,translateExtent:i,viewport:s,onPanZoom:o,onPanZoomStart:l,onPanZoomEnd:c,onDraggingChange:f}){const h={isZoomingOrPanning:!1,usedRightMouseButton:!1,prevViewport:{x:0,y:0,zoom:0},mouseButton:0,timerId:void 0,panScrollTimeout:void 0,isPanScrolling:!1},p=e.getBoundingClientRect(),g=h6().clickDistance(!Br(r)||r<0?0:r).scaleExtent([t,n]).translateExtent(i),y=tr(e).call(g);k({x:s.x,y:s.y,zoom:El(s.zoom,t,n)},[[0,0],[p.width,p.height]],i);const b=y.on("wheel.zoom"),S=y.on("dblclick.zoom");g.wheelDelta(q6);function x(U,X){return y?new Promise(B=>{g?.interpolate(X?.interpolate==="linear"?gc:ph).transform(K0(y,X?.duration,X?.ease,()=>B(!0)),U)}):Promise.resolve(!1)}function C({noWheelClassName:U,noPanClassName:X,onPaneContextMenu:B,userSelectionActive:F,panOnScroll:j,panOnDrag:z,panOnScrollMode:W,panOnScrollSpeed:J,preventScrolling:L,zoomOnPinch:K,zoomOnScroll:re,zoomOnDoubleClick:le,zoomActivationKeyPressed:V,lib:G,onTransformChange:Q}){F&&!h.isZoomingOrPanning&&T();const se=j&&!V&&!F?sse({zoomPanValues:h,noWheelClassName:U,d3Selection:y,d3Zoom:g,panOnScrollMode:W,panOnScrollSpeed:J,zoomOnPinch:K,onPanZoomStart:l,onPanZoom:o,onPanZoomEnd:c}):ose({noWheelClassName:U,preventScrolling:L,d3ZoomHandler:b});if(y.on("wheel.zoom",se,{passive:!1}),!F){const Ce=ase({zoomPanValues:h,onDraggingChange:f,onPanZoomStart:l});g.on("start",Ce);const De=lse({zoomPanValues:h,panOnDrag:z,onPaneContextMenu:!!B,onPanZoom:o,onTransformChange:Q});g.on("zoom",De);const ke=use({zoomPanValues:h,panOnDrag:z,panOnScroll:j,onPaneContextMenu:B,onPanZoomEnd:c,onDraggingChange:f});g.on("end",ke)}const ge=cse({zoomActivationKeyPressed:V,panOnDrag:z,zoomOnScroll:re,panOnScroll:j,zoomOnDoubleClick:le,zoomOnPinch:K,userSelectionActive:F,noPanClassName:X,noWheelClassName:U,lib:G});g.filter(ge),le?y.on("dblclick.zoom",S):y.on("dblclick.zoom",null)}function T(){g.on("zoom",null)}async function k(U,X,B){const F=G0(U),j=g?.constrain()(F,X,B);return j&&await x(j),new Promise(z=>z(j))}async function A(U,X){const B=G0(U);return await x(B,X),new Promise(F=>F(B))}function M(U){if(y){const X=G0(U),B=y.property("__zoom");(B.k!==U.zoom||B.x!==U.x||B.y!==U.y)&&g?.transform(y,X,null,{sync:!0})}}function _(){const U=y?d6(y.node()):{x:0,y:0,k:1};return{x:U.x,y:U.y,zoom:U.k}}function R(U,X){return y?new Promise(B=>{g?.interpolate(X?.interpolate==="linear"?gc:ph).scaleTo(K0(y,X?.duration,X?.ease,()=>B(!0)),U)}):Promise.resolve(!1)}function O(U,X){return y?new Promise(B=>{g?.interpolate(X?.interpolate==="linear"?gc:ph).scaleBy(K0(y,X?.duration,X?.ease,()=>B(!0)),U)}):Promise.resolve(!1)}function I(U){g?.scaleExtent(U)}function $(U){g?.translateExtent(U)}function q(U){const X=!Br(U)||U<0?0:U;g?.clickDistance(X)}return{update:C,destroy:T,setViewport:A,setViewportConstrained:k,getViewport:_,scaleTo:R,scaleBy:O,setScaleExtent:I,setTranslateExtent:$,syncViewport:M,setClickDistance:q}}var Wo;(function(e){e.Line="line",e.Handle="handle"})(Wo||(Wo={}));const dse=["top-left","top-right","bottom-left","bottom-right"],hse=["top","right","bottom","left"];function pse({width:e,prevWidth:t,height:n,prevHeight:r,affectsX:i,affectsY:s}){const o=e-t,l=n-r,c=[o>0?1:o<0?-1:0,l>0?1:l<0?-1:0];return o&&i&&(c[0]=c[0]*-1),l&&s&&(c[1]=c[1]*-1),c}function mse(e){const t=e.includes("right")||e.includes("left"),n=e.includes("bottom")||e.includes("top"),r=e.includes("left"),i=e.includes("top");return{isHorizontal:t,isVertical:n,affectsX:r,affectsY:i}}function xs(e,t){return Math.max(0,t-e)}function ws(e,t){return Math.max(0,e-t)}function Jd(e,t,n){return Math.max(0,t-e,e-n)}function rD(e,t){return e?!t:t}function gse(e,t,n,r,i,s,o,l){let{affectsX:c,affectsY:f}=t;const{isHorizontal:h,isVertical:p}=t,g=h&&p,{xSnapped:y,ySnapped:b}=n,{minWidth:S,maxWidth:x,minHeight:C,maxHeight:T}=r,{x:k,y:A,width:M,height:_,aspectRatio:R}=e;let O=Math.floor(h?y-e.pointerX:0),I=Math.floor(p?b-e.pointerY:0);const $=M+(c?-O:O),q=_+(f?-I:I),U=-s[0]*M,X=-s[1]*_;let B=Jd($,S,x),F=Jd(q,C,T);if(o){let W=0,J=0;c&&O<0?W=xs(k+O+U,o[0][0]):!c&&O>0&&(W=ws(k+$+U,o[1][0])),f&&I<0?J=xs(A+I+X,o[0][1]):!f&&I>0&&(J=ws(A+q+X,o[1][1])),B=Math.max(B,W),F=Math.max(F,J)}if(l){let W=0,J=0;c&&O>0?W=ws(k+O,l[0][0]):!c&&O<0&&(W=xs(k+$,l[1][0])),f&&I>0?J=ws(A+I,l[0][1]):!f&&I<0&&(J=xs(A+q,l[1][1])),B=Math.max(B,W),F=Math.max(F,J)}if(i){if(h){const W=Jd($/R,C,T)*R;if(B=Math.max(B,W),o){let J=0;!c&&!f||c&&!f&&g?J=ws(A+X+$/R,o[1][1])*R:J=xs(A+X+(c?O:-O)/R,o[0][1])*R,B=Math.max(B,J)}if(l){let J=0;!c&&!f||c&&!f&&g?J=xs(A+$/R,l[1][1])*R:J=ws(A+(c?O:-O)/R,l[0][1])*R,B=Math.max(B,J)}}if(p){const W=Jd(q*R,S,x)/R;if(F=Math.max(F,W),o){let J=0;!c&&!f||f&&!c&&g?J=ws(k+q*R+U,o[1][0])/R:J=xs(k+(f?I:-I)*R+U,o[0][0])/R,F=Math.max(F,J)}if(l){let J=0;!c&&!f||f&&!c&&g?J=xs(k+q*R,l[1][0])/R:J=ws(k+(f?I:-I)*R,l[0][0])/R,F=Math.max(F,J)}}}I=I+(I<0?F:-F),O=O+(O<0?B:-B),i&&(g?$>q*R?I=(rD(c,f)?-O:O)/R:O=(rD(c,f)?-I:I)*R:h?(I=O/R,f=c):(O=I*R,c=f));const j=c?k+O:k,z=f?A+I:A;return{width:M+(c?-O:O),height:_+(f?-I:I),x:s[0]*O*(c?-1:1)+j,y:s[1]*I*(f?-1:1)+z}}const V6={width:0,height:0,x:0,y:0},yse={...V6,pointerX:0,pointerY:0,aspectRatio:1};function vse(e){return[[0,0],[e.measured.width,e.measured.height]]}function bse(e,t,n){const r=t.position.x+e.position.x,i=t.position.y+e.position.y,s=e.measured.width??0,o=e.measured.height??0,l=n[0]*s,c=n[1]*o;return[[r-l,i-c],[r+s-l,i+o-c]]}function xse({domNode:e,nodeId:t,getStoreItems:n,onChange:r,onEnd:i}){const s=tr(e);function o({controlPosition:c,boundaries:f,keepAspectRatio:h,resizeDirection:p,onResizeStart:g,onResize:y,onResizeEnd:b,shouldResize:S}){let x={...V6},C={...yse};const T=mse(c);let k,A=null,M=[],_,R,O;const I=Qz().on("start",$=>{const{nodeLookup:q,transform:U,snapGrid:X,snapToGrid:B,nodeOrigin:F,paneDomNode:j}=n();if(k=q.get(t),!k)return;A=j?.getBoundingClientRect()??null;const{xSnapped:z,ySnapped:W}=yc($.sourceEvent,{transform:U,snapGrid:X,snapToGrid:B,containerBounds:A});x={width:k.measured.width??0,height:k.measured.height??0,x:k.position.x??0,y:k.position.y??0},C={...x,pointerX:z,pointerY:W,aspectRatio:x.width/x.height},_=void 0,k.parentId&&(k.extent==="parent"||k.expandParent)&&(_=q.get(k.parentId),R=_&&k.extent==="parent"?vse(_):void 0),M=[],O=void 0;for(const[J,L]of q)if(L.parentId===t&&(M.push({id:J,position:{...L.position},extent:L.extent}),L.extent==="parent"||L.expandParent)){const K=bse(L,k,L.origin??F);O?O=[[Math.min(K[0][0],O[0][0]),Math.min(K[0][1],O[0][1])],[Math.max(K[1][0],O[1][0]),Math.max(K[1][1],O[1][1])]]:O=K}g?.($,{...x})}).on("drag",$=>{const{transform:q,snapGrid:U,snapToGrid:X,nodeOrigin:B}=n(),F=yc($.sourceEvent,{transform:q,snapGrid:U,snapToGrid:X,containerBounds:A}),j=[];if(!k)return;const{x:z,y:W,width:J,height:L}=x,K={},re=k.origin??B,{width:le,height:V,x:G,y:Q}=gse(C,T,F,f,h,re,R,O),ae=le!==J,se=V!==L,ge=G!==z&&ae,Ce=Q!==W&&se;if(!ge&&!Ce&&!ae&&!se)return;if((ge||Ce||re[0]===1||re[1]===1)&&(K.x=ge?G:x.x,K.y=Ce?Q:x.y,x.x=K.x,x.y=K.y,M.length>0)){const be=G-z,we=Q-W;for(const tt of M)tt.position={x:tt.position.x-be+re[0]*(le-J),y:tt.position.y-we+re[1]*(V-L)},j.push(tt)}if((ae||se)&&(K.width=ae&&(!p||p==="horizontal")?le:x.width,K.height=se&&(!p||p==="vertical")?V:x.height,x.width=K.width,x.height=K.height),_&&k.expandParent){const be=re[0]*(K.width??0);K.x&&K.x<be&&(x.x=be,C.x=C.x-(K.x-be));const we=re[1]*(K.height??0);K.y&&K.y<we&&(x.y=we,C.y=C.y-(K.y-we))}const De=pse({width:x.width,prevWidth:J,height:x.height,prevHeight:L,affectsX:T.affectsX,affectsY:T.affectsY}),ke={...x,direction:De};S?.($,ke)!==!1&&(y?.($,ke),r(K,j))}).on("end",$=>{b?.($,{...x}),i?.({...x})});s.call(I)}function l(){s.on(".drag",null)}return{update:o,destroy:l}}const wse={},iD=e=>{let t;const n=new Set,r=(h,p)=>{const g=typeof h=="function"?h(t):h;if(!Object.is(g,t)){const y=t;t=p??(typeof g!="object"||g===null)?g:Object.assign({},t,g),n.forEach(b=>b(t,y))}},i=()=>t,c={setState:r,getState:i,getInitialState:()=>f,subscribe:h=>(n.add(h),()=>n.delete(h)),destroy:()=>{(wse?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},f=t=e(r,i,c);return c},Sse=e=>e?iD(e):iD,{useDebugValue:Ese}=Pe,{useSyncExternalStoreWithSelector:Cse}=CQ,kse=e=>e;function H6(e,t=kse,n){const r=Cse(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return Ese(r),r}const sD=(e,t)=>{const n=Sse(e),r=(i,s=t)=>H6(n,i,s);return Object.assign(r,n),r},Tse=(e,t)=>e?sD(e,t):sD;function kt(e,t){if(Object.is(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;for(const[r,i]of e)if(!Object.is(i,t.get(r)))return!1;return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;for(const r of e)if(!t.has(r))return!1;return!0}const n=Object.keys(e);if(n.length!==Object.keys(t).length)return!1;for(const r of n)if(!Object.prototype.hasOwnProperty.call(t,r)||!Object.is(e[r],t[r]))return!1;return!0}const dm=P.createContext(null),Ase=dm.Provider,F6=si.error001();function Xe(e,t){const n=P.useContext(dm);if(n===null)throw new Error(F6);return H6(n,e,t)}function bt(){const e=P.useContext(dm);if(e===null)throw new Error(F6);return P.useMemo(()=>({getState:e.getState,setState:e.setState,subscribe:e.subscribe}),[e])}const oD={display:"none"},Mse={position:"absolute",width:1,height:1,margin:-1,border:0,padding:0,overflow:"hidden",clip:"rect(0px, 0px, 0px, 0px)",clipPath:"inset(100%)"},U6="react-flow__node-desc",$6="react-flow__edge-desc",Nse="react-flow__aria-live",_se=e=>e.ariaLiveMessage,Rse=e=>e.ariaLabelConfig;function Dse({rfId:e}){const t=Xe(_se);return w.jsx("div",{id:`${Nse}-${e}`,"aria-live":"assertive","aria-atomic":"true",style:Mse,children:t})}function Ose({rfId:e,disableKeyboardA11y:t}){const n=Xe(Rse);return w.jsxs(w.Fragment,{children:[w.jsx("div",{id:`${U6}-${e}`,style:oD,children:t?n["node.a11yDescription.default"]:n["node.a11yDescription.keyboardDisabled"]}),w.jsx("div",{id:`${$6}-${e}`,style:oD,children:n["edge.a11yDescription.default"]}),!t&&w.jsx(Dse,{rfId:e})]})}const hm=P.forwardRef(({position:e="top-left",children:t,className:n,style:r,...i},s)=>{const o=`${e}`.split("-");return w.jsx("div",{className:Ut(["react-flow__panel",n,...o]),style:r,ref:s,...i,children:t})});hm.displayName="Panel";function jse({proOptions:e,position:t="bottom-right"}){return e?.hideAttribution?null:w.jsx(hm,{position:t,className:"react-flow__attribution","data-message":"Please only hide this attribution when you are subscribed to React Flow Pro: https://pro.reactflow.dev",children:w.jsx("a",{href:"https://reactflow.dev",target:"_blank",rel:"noopener noreferrer","aria-label":"React Flow attribution",children:"React Flow"})})}const Lse=e=>{const t=[],n=[];for(const[,r]of e.nodeLookup)r.selected&&t.push(r.internals.userNode);for(const[,r]of e.edgeLookup)r.selected&&n.push(r);return{selectedNodes:t,selectedEdges:n}},eh=e=>e.id;function Pse(e,t){return kt(e.selectedNodes.map(eh),t.selectedNodes.map(eh))&&kt(e.selectedEdges.map(eh),t.selectedEdges.map(eh))}function Bse({onSelectionChange:e}){const t=bt(),{selectedNodes:n,selectedEdges:r}=Xe(Lse,Pse);return P.useEffect(()=>{const i={nodes:n,edges:r};e?.(i),t.getState().onSelectionChangeHandlers.forEach(s=>s(i))},[n,r,e]),null}const Ise=e=>!!e.onSelectionChangeHandlers;function zse({onSelectionChange:e}){const t=Xe(Ise);return e||t?w.jsx(Bse,{onSelectionChange:e}):null}const G6=[0,0],qse={x:0,y:0,zoom:1},Vse=["nodes","edges","defaultNodes","defaultEdges","onConnect","onConnectStart","onConnectEnd","onClickConnectStart","onClickConnectEnd","nodesDraggable","autoPanOnNodeFocus","nodesConnectable","nodesFocusable","edgesFocusable","edgesReconnectable","elevateNodesOnSelect","elevateEdgesOnSelect","minZoom","maxZoom","nodeExtent","onNodesChange","onEdgesChange","elementsSelectable","connectionMode","snapGrid","snapToGrid","translateExtent","connectOnClick","defaultEdgeOptions","fitView","fitViewOptions","onNodesDelete","onEdgesDelete","onDelete","onNodeDrag","onNodeDragStart","onNodeDragStop","onSelectionDrag","onSelectionDragStart","onSelectionDragStop","onMoveStart","onMove","onMoveEnd","noPanClassName","nodeOrigin","autoPanOnConnect","autoPanOnNodeDrag","onError","connectionRadius","isValidConnection","selectNodesOnDrag","nodeDragThreshold","connectionDragThreshold","onBeforeDelete","debug","autoPanSpeed","paneClickDistance","ariaLabelConfig"],aD=[...Vse,"rfId"],Hse=e=>({setNodes:e.setNodes,setEdges:e.setEdges,setMinZoom:e.setMinZoom,setMaxZoom:e.setMaxZoom,setTranslateExtent:e.setTranslateExtent,setNodeExtent:e.setNodeExtent,reset:e.reset,setDefaultNodesAndEdges:e.setDefaultNodesAndEdges,setPaneClickDistance:e.setPaneClickDistance}),lD={translateExtent:Vc,nodeOrigin:G6,minZoom:.5,maxZoom:2,elementsSelectable:!0,noPanClassName:"nopan",rfId:"1",paneClickDistance:0};function Fse(e){const{setNodes:t,setEdges:n,setMinZoom:r,setMaxZoom:i,setTranslateExtent:s,setNodeExtent:o,reset:l,setDefaultNodesAndEdges:c,setPaneClickDistance:f}=Xe(Hse,kt),h=bt();P.useEffect(()=>(c(e.defaultNodes,e.defaultEdges),()=>{p.current=lD,l()}),[]);const p=P.useRef(lD);return P.useEffect(()=>{for(const g of aD){const y=e[g],b=p.current[g];y!==b&&(typeof e[g]>"u"||(g==="nodes"?t(y):g==="edges"?n(y):g==="minZoom"?r(y):g==="maxZoom"?i(y):g==="translateExtent"?s(y):g==="nodeExtent"?o(y):g==="paneClickDistance"?f(y):g==="ariaLabelConfig"?h.setState({ariaLabelConfig:Rie(y)}):g==="fitView"?h.setState({fitViewQueued:y}):g==="fitViewOptions"?h.setState({fitViewOptions:y}):h.setState({[g]:y})))}p.current=e},aD.map(g=>e[g])),null}function uD(){return typeof window>"u"||!window.matchMedia?null:window.matchMedia("(prefers-color-scheme: dark)")}function Use(e){const[t,n]=P.useState(e==="system"?null:e);return P.useEffect(()=>{if(e!=="system"){n(e);return}const r=uD(),i=()=>n(r?.matches?"dark":"light");return i(),r?.addEventListener("change",i),()=>{r?.removeEventListener("change",i)}},[e]),t!==null?t:uD()?.matches?"dark":"light"}const cD=typeof document<"u"?document:null;function Gc(e=null,t={target:cD,actInsideInputWithModifier:!0}){const[n,r]=P.useState(!1),i=P.useRef(!1),s=P.useRef(new Set([])),[o,l]=P.useMemo(()=>{if(e!==null){const f=(Array.isArray(e)?e:[e]).filter(p=>typeof p=="string").map(p=>p.replace("+",`
`).replace(`

`,`
+`).split(`
`)),h=f.reduce((p,g)=>p.concat(...g),[]);return[f,h]}return[[],[]]},[e]);return P.useEffect(()=>{const c=t?.target??cD,f=t?.actInsideInputWithModifier??!0;if(e!==null){const h=y=>{if(i.current=y.ctrlKey||y.metaKey||y.shiftKey||y.altKey,(!i.current||i.current&&!f)&&A6(y))return!1;const S=dD(y.code,l);if(s.current.add(y[S]),fD(o,s.current,!1)){const x=y.composedPath?.()?.[0]||y.target,C=x?.nodeName==="BUTTON"||x?.nodeName==="A";t.preventDefault!==!1&&(i.current||!C)&&y.preventDefault(),r(!0)}},p=y=>{const b=dD(y.code,l);fD(o,s.current,!0)?(r(!1),s.current.clear()):s.current.delete(y[b]),y.key==="Meta"&&s.current.clear(),i.current=!1},g=()=>{s.current.clear(),r(!1)};return c?.addEventListener("keydown",h),c?.addEventListener("keyup",p),window.addEventListener("blur",g),window.addEventListener("contextmenu",g),()=>{c?.removeEventListener("keydown",h),c?.removeEventListener("keyup",p),window.removeEventListener("blur",g),window.removeEventListener("contextmenu",g)}}},[e,r]),n}function fD(e,t,n){return e.filter(r=>n||r.length===t.size).some(r=>r.every(i=>t.has(i)))}function dD(e,t){return t.includes(e)?"code":"key"}const $se=()=>{const e=bt();return P.useMemo(()=>({zoomIn:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomOut:t=>{const{panZoom:n}=e.getState();return n?n.scaleBy(1/1.2,{duration:t?.duration}):Promise.resolve(!1)},zoomTo:(t,n)=>{const{panZoom:r}=e.getState();return r?r.scaleTo(t,{duration:n?.duration}):Promise.resolve(!1)},getZoom:()=>e.getState().transform[2],setViewport:async(t,n)=>{const{transform:[r,i,s],panZoom:o}=e.getState();return o?(await o.setViewport({x:t.x??r,y:t.y??i,zoom:t.zoom??s},n),Promise.resolve(!0)):Promise.resolve(!1)},getViewport:()=>{const[t,n,r]=e.getState().transform;return{x:t,y:n,zoom:r}},setCenter:async(t,n,r)=>e.getState().setCenter(t,n,r),fitBounds:async(t,n)=>{const{width:r,height:i,minZoom:s,maxZoom:o,panZoom:l}=e.getState(),c=cm(t,r,i,s,o,n?.padding??.1);return l?(await l.setViewport(c,{duration:n?.duration,ease:n?.ease,interpolate:n?.interpolate}),Promise.resolve(!0)):Promise.resolve(!1)},screenToFlowPosition:(t,n={})=>{const{transform:r,snapGrid:i,snapToGrid:s,domNode:o}=e.getState();if(!o)return t;const{x:l,y:c}=o.getBoundingClientRect(),f={x:t.x-l,y:t.y-c},h=n.snapGrid??i,p=n.snapToGrid??s;return cf(f,r,p,h)},flowToScreenPosition:t=>{const{transform:n,domNode:r}=e.getState();if(!r)return t;const{x:i,y:s}=r.getBoundingClientRect(),o=kp(t,n);return{x:o.x+i,y:o.y+s}}}),[])};function K6(e,t){const n=[],r=new Map,i=[];for(const s of e)if(s.type==="add"){i.push(s);continue}else if(s.type==="remove"||s.type==="replace")r.set(s.id,[s]);else{const o=r.get(s.id);o?o.push(s):r.set(s.id,[s])}for(const s of t){const o=r.get(s.id);if(!o){n.push(s);continue}if(o[0].type==="remove")continue;if(o[0].type==="replace"){n.push({...o[0].item});continue}const l={...s};for(const c of o)Gse(c,l);n.push(l)}return i.length&&i.forEach(s=>{s.index!==void 0?n.splice(s.index,0,{...s.item}):n.push({...s.item})}),n}function Gse(e,t){switch(e.type){case"select":{t.selected=e.selected;break}case"position":{typeof e.position<"u"&&(t.position=e.position),typeof e.dragging<"u"&&(t.dragging=e.dragging);break}case"dimensions":{typeof e.dimensions<"u"&&(t.measured??={},t.measured.width=e.dimensions.width,t.measured.height=e.dimensions.height,e.setAttributes&&((e.setAttributes===!0||e.setAttributes==="width")&&(t.width=e.dimensions.width),(e.setAttributes===!0||e.setAttributes==="height")&&(t.height=e.dimensions.height))),typeof e.resizing=="boolean"&&(t.resizing=e.resizing);break}}}function Y6(e,t){return K6(e,t)}function W6(e,t){return K6(e,t)}function xo(e,t){return{id:e,type:"select",selected:t}}function al(e,t=new Set,n=!1){const r=[];for(const[i,s]of e){const o=t.has(i);!(s.selected===void 0&&!o)&&s.selected!==o&&(n&&(s.selected=o),r.push(xo(s.id,o)))}return r}function hD({items:e=[],lookup:t}){const n=[],r=new Map(e.map(i=>[i.id,i]));for(const[i,s]of e.entries()){const o=t.get(s.id),l=o?.internals?.userNode??o;l!==void 0&&l!==s&&n.push({id:s.id,item:s,type:"replace"}),l===void 0&&n.push({item:s,type:"add",index:i})}for(const[i]of t)r.get(i)===void 0&&n.push({id:i,type:"remove"});return n}function pD(e){return{id:e.id,type:"remove"}}const mD=e=>Sie(e),Kse=e=>v6(e);function X6(e){return P.forwardRef(e)}const Yse=typeof window<"u"?P.useLayoutEffect:P.useEffect;function gD(e){const[t,n]=P.useState(BigInt(0)),[r]=P.useState(()=>Wse(()=>n(i=>i+BigInt(1))));return Yse(()=>{const i=r.get();i.length&&(e(i),r.reset())},[t]),r}function Wse(e){let t=[];return{get:()=>t,reset:()=>{t=[]},push:n=>{t.push(n),e()}}}const Z6=P.createContext(null);function Xse({children:e}){const t=bt(),n=P.useCallback(l=>{const{nodes:c=[],setNodes:f,hasDefaultNodes:h,onNodesChange:p,nodeLookup:g,fitViewQueued:y}=t.getState();let b=c;for(const x of l)b=typeof x=="function"?x(b):x;const S=hD({items:b,lookup:g});h&&f(b),S.length>0?p?.(S):y&&window.requestAnimationFrame(()=>{const{fitViewQueued:x,nodes:C,setNodes:T}=t.getState();x&&T(C)})},[]),r=gD(n),i=P.useCallback(l=>{const{edges:c=[],setEdges:f,hasDefaultEdges:h,onEdgesChange:p,edgeLookup:g}=t.getState();let y=c;for(const b of l)y=typeof b=="function"?b(y):b;h?f(y):p&&p(hD({items:y,lookup:g}))},[]),s=gD(i),o=P.useMemo(()=>({nodeQueue:r,edgeQueue:s}),[]);return w.jsx(Z6.Provider,{value:o,children:e})}function Zse(){const e=P.useContext(Z6);if(!e)throw new Error("useBatchContext must be used within a BatchProvider");return e}const Qse=e=>!!e.panZoom;function Kc(){const e=$se(),t=bt(),n=Zse(),r=Xe(Qse),i=P.useMemo(()=>{const s=p=>t.getState().nodeLookup.get(p),o=p=>{n.nodeQueue.push(p)},l=p=>{n.edgeQueue.push(p)},c=p=>{const{nodeLookup:g,nodeOrigin:y}=t.getState(),b=mD(p)?p:g.get(p.id),S=b.parentId?k6(b.position,b.measured,b.parentId,g,y):b.position,x={...b,position:S,width:b.measured?.width??b.width,height:b.measured?.height??b.height};return Cl(x)},f=(p,g,y={replace:!1})=>{o(b=>b.map(S=>{if(S.id===p){const x=typeof g=="function"?g(S):g;return y.replace&&mD(x)?x:{...S,...x}}return S}))},h=(p,g,y={replace:!1})=>{l(b=>b.map(S=>{if(S.id===p){const x=typeof g=="function"?g(S):g;return y.replace&&Kse(x)?x:{...S,...x}}return S}))};return{getNodes:()=>t.getState().nodes.map(p=>({...p})),getNode:p=>s(p)?.internals.userNode,getInternalNode:s,getEdges:()=>{const{edges:p=[]}=t.getState();return p.map(g=>({...g}))},getEdge:p=>t.getState().edgeLookup.get(p),setNodes:o,setEdges:l,addNodes:p=>{const g=Array.isArray(p)?p:[p];n.nodeQueue.push(y=>[...y,...g])},addEdges:p=>{const g=Array.isArray(p)?p:[p];n.edgeQueue.push(y=>[...y,...g])},toObject:()=>{const{nodes:p=[],edges:g=[],transform:y}=t.getState(),[b,S,x]=y;return{nodes:p.map(C=>({...C})),edges:g.map(C=>({...C})),viewport:{x:b,y:S,zoom:x}}},deleteElements:async({nodes:p=[],edges:g=[]})=>{const{nodes:y,edges:b,onNodesDelete:S,onEdgesDelete:x,triggerNodeChanges:C,triggerEdgeChanges:T,onDelete:k,onBeforeDelete:A}=t.getState(),{nodes:M,edges:_}=await Tie({nodesToRemove:p,edgesToRemove:g,nodes:y,edges:b,onBeforeDelete:A}),R=_.length>0,O=M.length>0;if(R){const I=_.map(pD);x?.(_),T(I)}if(O){const I=M.map(pD);S?.(M),C(I)}return(O||R)&&k?.({nodes:M,edges:_}),{deletedNodes:M,deletedEdges:_}},getIntersectingNodes:(p,g=!0,y)=>{const b=GR(p),S=b?p:c(p),x=y!==void 0;return S?(y||t.getState().nodes).filter(C=>{const T=t.getState().nodeLookup.get(C.id);if(T&&!b&&(C.id===p.id||!T.internals.positionAbsolute))return!1;const k=Cl(x?C:T),A=Fc(k,S);return g&&A>0||A>=k.width*k.height||A>=S.width*S.height}):[]},isNodeIntersecting:(p,g,y=!0)=>{const S=GR(p)?p:c(p);if(!S)return!1;const x=Fc(S,g);return y&&x>0||x>=S.width*S.height},updateNode:f,updateNodeData:(p,g,y={replace:!1})=>{f(p,b=>{const S=typeof g=="function"?g(b):g;return y.replace?{...b,data:S}:{...b,data:{...b.data,...S}}},y)},updateEdge:h,updateEdgeData:(p,g,y={replace:!1})=>{h(p,b=>{const S=typeof g=="function"?g(b):g;return y.replace?{...b,data:S}:{...b,data:{...b.data,...S}}},y)},getNodesBounds:p=>{const{nodeLookup:g,nodeOrigin:y}=t.getState();return b6(p,{nodeLookup:g,nodeOrigin:y})},getHandleConnections:({type:p,id:g,nodeId:y})=>Array.from(t.getState().connectionLookup.get(`${y}-${p}${g?`-${g}`:""}`)?.values()??[]),getNodeConnections:({type:p,handleId:g,nodeId:y})=>Array.from(t.getState().connectionLookup.get(`${y}${p?g?`-${p}-${g}`:`-${p}`:""}`)?.values()??[]),fitView:async p=>{const g=t.getState().fitViewResolver??_ie();return t.setState({fitViewQueued:!0,fitViewOptions:p,fitViewResolver:g}),n.nodeQueue.push(y=>[...y]),g.promise}}},[]);return P.useMemo(()=>({...i,...e,viewportInitialized:r}),[r])}const yD=e=>e.selected,Jse=typeof window<"u"?window:void 0;function eoe({deleteKeyCode:e,multiSelectionKeyCode:t}){const n=bt(),{deleteElements:r}=Kc(),i=Gc(e,{actInsideInputWithModifier:!1}),s=Gc(t,{target:Jse});P.useEffect(()=>{if(i){const{edges:o,nodes:l}=n.getState();r({nodes:l.filter(yD),edges:o.filter(yD)}),n.setState({nodesSelectionActive:!1})}},[i]),P.useEffect(()=>{n.setState({multiSelectionActive:s})},[s])}function toe(e){const t=bt();P.useEffect(()=>{const n=()=>{if(!e.current)return!1;const r=hk(e.current);(r.height===0||r.width===0)&&t.getState().onError?.("004",si.error004()),t.setState({width:r.width||500,height:r.height||500})};if(e.current){n(),window.addEventListener("resize",n);const r=new ResizeObserver(()=>n());return r.observe(e.current),()=>{window.removeEventListener("resize",n),r&&e.current&&r.unobserve(e.current)}}},[])}const pm={position:"absolute",width:"100%",height:"100%",top:0,left:0},noe=e=>({userSelectionActive:e.userSelectionActive,lib:e.lib});function roe({onPaneContextMenu:e,zoomOnScroll:t=!0,zoomOnPinch:n=!0,panOnScroll:r=!1,panOnScrollSpeed:i=.5,panOnScrollMode:s=zo.Free,zoomOnDoubleClick:o=!0,panOnDrag:l=!0,defaultViewport:c,translateExtent:f,minZoom:h,maxZoom:p,zoomActivationKeyCode:g,preventScrolling:y=!0,children:b,noWheelClassName:S,noPanClassName:x,onViewportChange:C,isControlledViewport:T,paneClickDistance:k}){const A=bt(),M=P.useRef(null),{userSelectionActive:_,lib:R}=Xe(noe,kt),O=Gc(g),I=P.useRef();toe(M);const $=P.useCallback(q=>{C?.({x:q[0],y:q[1],zoom:q[2]}),T||A.setState({transform:q})},[C,T]);return P.useEffect(()=>{if(M.current){I.current=fse({domNode:M.current,minZoom:h,maxZoom:p,translateExtent:f,viewport:c,paneClickDistance:k,onDraggingChange:B=>A.setState({paneDragging:B}),onPanZoomStart:(B,F)=>{const{onViewportChangeStart:j,onMoveStart:z}=A.getState();z?.(B,F),j?.(F)},onPanZoom:(B,F)=>{const{onViewportChange:j,onMove:z}=A.getState();z?.(B,F),j?.(F)},onPanZoomEnd:(B,F)=>{const{onViewportChangeEnd:j,onMoveEnd:z}=A.getState();z?.(B,F),j?.(F)}});const{x:q,y:U,zoom:X}=I.current.getViewport();return A.setState({panZoom:I.current,transform:[q,U,X],domNode:M.current.closest(".react-flow")}),()=>{I.current?.destroy()}}},[]),P.useEffect(()=>{I.current?.update({onPaneContextMenu:e,zoomOnScroll:t,zoomOnPinch:n,panOnScroll:r,panOnScrollSpeed:i,panOnScrollMode:s,zoomOnDoubleClick:o,panOnDrag:l,zoomActivationKeyPressed:O,preventScrolling:y,noPanClassName:x,userSelectionActive:_,noWheelClassName:S,lib:R,onTransformChange:$})},[e,t,n,r,i,s,o,l,O,y,x,_,S,R,$]),w.jsx("div",{className:"react-flow__renderer",ref:M,style:pm,children:b})}const ioe=e=>({userSelectionActive:e.userSelectionActive,userSelectionRect:e.userSelectionRect});function soe(){const{userSelectionActive:e,userSelectionRect:t}=Xe(ioe,kt);return e&&t?w.jsx("div",{className:"react-flow__selection react-flow__container",style:{width:t.width,height:t.height,transform:`translate(${t.x}px, ${t.y}px)`}}):null}const Y0=(e,t)=>n=>{n.target===t.current&&e?.(n)},ooe=e=>({userSelectionActive:e.userSelectionActive,elementsSelectable:e.elementsSelectable,connectionInProgress:e.connection.inProgress,dragging:e.paneDragging});function aoe({isSelecting:e,selectionKeyPressed:t,selectionMode:n=Hc.Full,panOnDrag:r,selectionOnDrag:i,onSelectionStart:s,onSelectionEnd:o,onPaneClick:l,onPaneContextMenu:c,onPaneScroll:f,onPaneMouseEnter:h,onPaneMouseMove:p,onPaneMouseLeave:g,children:y}){const b=bt(),{userSelectionActive:S,elementsSelectable:x,dragging:C,connectionInProgress:T}=Xe(ooe,kt),k=x&&(e||S),A=P.useRef(null),M=P.useRef(),_=P.useRef(new Set),R=P.useRef(new Set),O=P.useRef(!1),I=P.useRef(!1),$=z=>{if(O.current||T){O.current=!1;return}l?.(z),b.getState().resetSelectedElements(),b.setState({nodesSelectionActive:!1})},q=z=>{if(Array.isArray(r)&&r?.includes(2)){z.preventDefault();return}c?.(z)},U=f?z=>f(z):void 0,X=z=>{const{resetSelectedElements:W,domNode:J}=b.getState();if(M.current=J?.getBoundingClientRect(),!x||!e||z.button!==0||z.target!==A.current||!M.current)return;z.target?.setPointerCapture?.(z.pointerId),I.current=!0,O.current=!1;const{x:L,y:K}=Jr(z.nativeEvent,M.current);W(),b.setState({userSelectionRect:{width:0,height:0,startX:L,startY:K,x:L,y:K}}),s?.(z)},B=z=>{const{userSelectionRect:W,transform:J,nodeLookup:L,edgeLookup:K,connectionLookup:re,triggerNodeChanges:le,triggerEdgeChanges:V,defaultEdgeOptions:G}=b.getState();if(!M.current||!W)return;O.current=!0;const{x:Q,y:ae}=Jr(z.nativeEvent,M.current),{startX:se,startY:ge}=W,Ce={startX:se,startY:ge,x:Q<se?Q:se,y:ae<ge?ae:ge,width:Math.abs(Q-se),height:Math.abs(ae-ge)},De=_.current,ke=R.current;_.current=new Set(dk(L,Ce,J,n===Hc.Partial,!0).map(be=>be.id)),R.current=new Set;const Te=G?.selectable??!0;for(const be of _.current){const we=re.get(be);if(we)for(const{edgeId:tt}of we.values()){const Me=K.get(tt);Me&&(Me.selectable??Te)&&R.current.add(tt)}}if(!KR(De,_.current)){const be=al(L,_.current,!0);le(be)}if(!KR(ke,R.current)){const be=al(K,R.current);V(be)}b.setState({userSelectionRect:Ce,userSelectionActive:!0,nodesSelectionActive:!1})},F=z=>{if(z.button!==0||!I.current)return;z.target?.releasePointerCapture?.(z.pointerId);const{userSelectionRect:W}=b.getState();!S&&W&&z.target===A.current&&$?.(z),b.setState({userSelectionActive:!1,userSelectionRect:null,nodesSelectionActive:_.current.size>0}),o?.(z),(t||i)&&(O.current=!1),I.current=!1},j=r===!0||Array.isArray(r)&&r.includes(0);return w.jsxs("div",{className:Ut(["react-flow__pane",{draggable:j,dragging:C,selection:e}]),onClick:k?void 0:Y0($,A),onContextMenu:Y0(q,A),onWheel:Y0(U,A),onPointerEnter:k?void 0:h,onPointerDown:k?X:p,onPointerMove:k?B:p,onPointerUp:k?F:void 0,onPointerLeave:g,ref:A,style:pm,children:[y,w.jsx(soe,{})]})}function DE({id:e,store:t,unselect:n=!1,nodeRef:r}){const{addSelectedNodes:i,unselectNodesAndEdges:s,multiSelectionActive:o,nodeLookup:l,onError:c}=t.getState(),f=l.get(e);if(!f){c?.("012",si.error012(e));return}t.setState({nodesSelectionActive:!1}),f.selected?(n||f.selected&&o)&&(s({nodes:[f],edges:[]}),requestAnimationFrame(()=>r?.current?.blur())):i([e])}function Q6({nodeRef:e,disabled:t=!1,noDragClassName:n,handleSelector:r,nodeId:i,isSelectable:s,nodeClickDistance:o}){const l=bt(),[c,f]=P.useState(!1),h=P.useRef();return P.useEffect(()=>{h.current=Xie({getStoreItems:()=>l.getState(),onNodeMouseDown:p=>{DE({id:p,store:l,nodeRef:e})},onDragStart:()=>{f(!0)},onDragStop:()=>{f(!1)}})},[]),P.useEffect(()=>{if(t)h.current?.destroy();else if(e.current)return h.current?.update({noDragClassName:n,handleSelector:r,domNode:e.current,isSelectable:s,nodeId:i,nodeClickDistance:o}),()=>{h.current?.destroy()}},[n,r,t,s,e,i]),c}const loe=e=>t=>t.selected&&(t.draggable||e&&typeof t.draggable>"u");function J6(){const e=bt();return P.useCallback(n=>{const{nodeExtent:r,snapToGrid:i,snapGrid:s,nodesDraggable:o,onError:l,updateNodePositions:c,nodeLookup:f,nodeOrigin:h}=e.getState(),p=new Map,g=loe(o),y=i?s[0]:5,b=i?s[1]:5,S=n.direction.x*y*n.factor,x=n.direction.y*b*n.factor;for(const[,C]of f){if(!g(C))continue;let T={x:C.internals.positionAbsolute.x+S,y:C.internals.positionAbsolute.y+x};i&&(T=uf(T,s));const{position:k,positionAbsolute:A}=x6({nodeId:C.id,nextPosition:T,nodeLookup:f,nodeExtent:r,nodeOrigin:h,onError:l});C.position=k,C.internals.positionAbsolute=A,p.set(C.id,C)}c(p)},[])}const xk=P.createContext(null),uoe=xk.Provider;xk.Consumer;const eq=()=>P.useContext(xk),coe=e=>({connectOnClick:e.connectOnClick,noPanClassName:e.noPanClassName,rfId:e.rfId}),foe=(e,t,n)=>r=>{const{connectionClickStartHandle:i,connectionMode:s,connection:o}=r,{fromHandle:l,toHandle:c,isValid:f}=o,h=c?.nodeId===e&&c?.id===t&&c?.type===n;return{connectingFrom:l?.nodeId===e&&l?.id===t&&l?.type===n,connectingTo:h,clickConnecting:i?.nodeId===e&&i?.id===t&&i?.type===n,isPossibleEndHandle:s===Ko.Strict?l?.type!==n:e!==l?.nodeId||t!==l?.id,connectionInProcess:!!l,clickConnectionInProcess:!!i,valid:h&&f}};function doe({type:e="source",position:t=Ae.Top,isValidConnection:n,isConnectable:r=!0,isConnectableStart:i=!0,isConnectableEnd:s=!0,id:o,onConnect:l,children:c,className:f,onMouseDown:h,onTouchStart:p,...g},y){const b=o||null,S=e==="target",x=bt(),C=eq(),{connectOnClick:T,noPanClassName:k,rfId:A}=Xe(coe,kt),{connectingFrom:M,connectingTo:_,clickConnecting:R,isPossibleEndHandle:O,connectionInProcess:I,clickConnectionInProcess:$,valid:q}=Xe(foe(C,b,e),kt);C||x.getState().onError?.("010",si.error010());const U=F=>{const{defaultEdgeOptions:j,onConnect:z,hasDefaultEdges:W}=x.getState(),J={...j,...F};if(W){const{edges:L,setEdges:K}=x.getState();K(_6(J,L))}z?.(J),l?.(J)},X=F=>{if(!C)return;const j=M6(F.nativeEvent);if(i&&(j&&F.button===0||!j)){const z=x.getState();RE.onPointerDown(F.nativeEvent,{handleDomNode:F.currentTarget,autoPanOnConnect:z.autoPanOnConnect,connectionMode:z.connectionMode,connectionRadius:z.connectionRadius,domNode:z.domNode,nodeLookup:z.nodeLookup,lib:z.lib,isTarget:S,handleId:b,nodeId:C,flowId:z.rfId,panBy:z.panBy,cancelConnection:z.cancelConnection,onConnectStart:z.onConnectStart,onConnectEnd:z.onConnectEnd,updateConnection:z.updateConnection,onConnect:U,isValidConnection:n||z.isValidConnection,getTransform:()=>x.getState().transform,getFromHandle:()=>x.getState().connection.fromHandle,autoPanSpeed:z.autoPanSpeed,dragThreshold:z.connectionDragThreshold})}j?h?.(F):p?.(F)},B=F=>{const{onClickConnectStart:j,onClickConnectEnd:z,connectionClickStartHandle:W,connectionMode:J,isValidConnection:L,lib:K,rfId:re,nodeLookup:le,connection:V}=x.getState();if(!C||!W&&!i)return;if(!W){j?.(F.nativeEvent,{nodeId:C,handleId:b,handleType:e}),x.setState({connectionClickStartHandle:{nodeId:C,type:e,id:b}});return}const G=T6(F.target),Q=n||L,{connection:ae,isValid:se}=RE.isValid(F.nativeEvent,{handle:{nodeId:C,id:b,type:e},connectionMode:J,fromNodeId:W.nodeId,fromHandleId:W.id||null,fromType:W.type,isValidConnection:Q,flowId:re,doc:G,lib:K,nodeLookup:le});se&&ae&&U(ae);const ge=structuredClone(V);delete ge.inProgress,ge.toPosition=ge.toHandle?ge.toHandle.position:null,z?.(F,ge),x.setState({connectionClickStartHandle:null})};return w.jsx("div",{"data-handleid":b,"data-nodeid":C,"data-handlepos":t,"data-id":`${A}-${C}-${b}-${e}`,className:Ut(["react-flow__handle",`react-flow__handle-${t}`,"nodrag",k,f,{source:!S,target:S,connectable:r,connectablestart:i,connectableend:s,clickconnecting:R,connectingfrom:M,connectingto:_,valid:q,connectionindicator:r&&(!I||O)&&(I||$?s:i)}]),onMouseDown:X,onTouchStart:X,onClick:T?B:void 0,ref:y,...g,children:c})}const wr=P.memo(X6(doe));function hoe({data:e,isConnectable:t,sourcePosition:n=Ae.Bottom}){return w.jsxs(w.Fragment,{children:[e?.label,w.jsx(wr,{type:"source",position:n,isConnectable:t})]})}function poe({data:e,isConnectable:t,targetPosition:n=Ae.Top,sourcePosition:r=Ae.Bottom}){return w.jsxs(w.Fragment,{children:[w.jsx(wr,{type:"target",position:n,isConnectable:t}),e?.label,w.jsx(wr,{type:"source",position:r,isConnectable:t})]})}function moe(){return null}function goe({data:e,isConnectable:t,targetPosition:n=Ae.Top}){return w.jsxs(w.Fragment,{children:[w.jsx(wr,{type:"target",position:n,isConnectable:t}),e?.label]})}const Tp={ArrowUp:{x:0,y:-1},ArrowDown:{x:0,y:1},ArrowLeft:{x:-1,y:0},ArrowRight:{x:1,y:0}},vD={input:hoe,default:poe,output:goe,group:moe};function yoe(e){return e.internals.handleBounds===void 0?{width:e.width??e.initialWidth??e.style?.width,height:e.height??e.initialHeight??e.style?.height}:{width:e.width??e.style?.width,height:e.height??e.style?.height}}const voe=e=>{const{width:t,height:n,x:r,y:i}=lf(e.nodeLookup,{filter:s=>!!s.selected});return{width:Br(t)?t:null,height:Br(n)?n:null,userSelectionActive:e.userSelectionActive,transformString:`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]}) translate(${r}px,${i}px)`}};function boe({onSelectionContextMenu:e,noPanClassName:t,disableKeyboardA11y:n}){const r=bt(),{width:i,height:s,transformString:o,userSelectionActive:l}=Xe(voe,kt),c=J6(),f=P.useRef(null);if(P.useEffect(()=>{n||f.current?.focus({preventScroll:!0})},[n]),Q6({nodeRef:f}),l||!i||!s)return null;const h=e?g=>{const y=r.getState().nodes.filter(b=>b.selected);e(g,y)}:void 0,p=g=>{Object.prototype.hasOwnProperty.call(Tp,g.key)&&(g.preventDefault(),c({direction:Tp[g.key],factor:g.shiftKey?4:1}))};return w.jsx("div",{className:Ut(["react-flow__nodesselection","react-flow__container",t]),style:{transform:o},children:w.jsx("div",{ref:f,className:"react-flow__nodesselection-rect",onContextMenu:h,tabIndex:n?void 0:-1,onKeyDown:n?void 0:p,style:{width:i,height:s}})})}const bD=typeof window<"u"?window:void 0,xoe=e=>({nodesSelectionActive:e.nodesSelectionActive,userSelectionActive:e.userSelectionActive});function tq({children:e,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,paneClickDistance:l,deleteKeyCode:c,selectionKeyCode:f,selectionOnDrag:h,selectionMode:p,onSelectionStart:g,onSelectionEnd:y,multiSelectionKeyCode:b,panActivationKeyCode:S,zoomActivationKeyCode:x,elementsSelectable:C,zoomOnScroll:T,zoomOnPinch:k,panOnScroll:A,panOnScrollSpeed:M,panOnScrollMode:_,zoomOnDoubleClick:R,panOnDrag:O,defaultViewport:I,translateExtent:$,minZoom:q,maxZoom:U,preventScrolling:X,onSelectionContextMenu:B,noWheelClassName:F,noPanClassName:j,disableKeyboardA11y:z,onViewportChange:W,isControlledViewport:J}){const{nodesSelectionActive:L,userSelectionActive:K}=Xe(xoe),re=Gc(f,{target:bD}),le=Gc(S,{target:bD}),V=le||O,G=le||A,Q=h&&V!==!0,ae=re||K||Q;return eoe({deleteKeyCode:c,multiSelectionKeyCode:b}),w.jsx(roe,{onPaneContextMenu:s,elementsSelectable:C,zoomOnScroll:T,zoomOnPinch:k,panOnScroll:G,panOnScrollSpeed:M,panOnScrollMode:_,zoomOnDoubleClick:R,panOnDrag:!re&&V,defaultViewport:I,translateExtent:$,minZoom:q,maxZoom:U,zoomActivationKeyCode:x,preventScrolling:X,noWheelClassName:F,noPanClassName:j,onViewportChange:W,isControlledViewport:J,paneClickDistance:l,children:w.jsxs(aoe,{onSelectionStart:g,onSelectionEnd:y,onPaneClick:t,onPaneMouseEnter:n,onPaneMouseMove:r,onPaneMouseLeave:i,onPaneContextMenu:s,onPaneScroll:o,panOnDrag:V,isSelecting:!!ae,selectionMode:p,selectionKeyPressed:re,selectionOnDrag:Q,children:[e,L&&w.jsx(boe,{onSelectionContextMenu:B,noPanClassName:j,disableKeyboardA11y:z})]})})}tq.displayName="FlowRenderer";const woe=P.memo(tq),Soe=e=>t=>e?dk(t.nodeLookup,{x:0,y:0,width:t.width,height:t.height},t.transform,!0).map(n=>n.id):Array.from(t.nodeLookup.keys());function Eoe(e){return Xe(P.useCallback(Soe(e),[e]),kt)}const Coe=e=>e.updateNodeInternals;function koe(){const e=Xe(Coe),[t]=P.useState(()=>typeof ResizeObserver>"u"?null:new ResizeObserver(n=>{const r=new Map;n.forEach(i=>{const s=i.target.getAttribute("data-id");r.set(s,{id:s,nodeElement:i.target,force:!0})}),e(r)}));return P.useEffect(()=>()=>{t?.disconnect()},[t]),t}function Toe({node:e,nodeType:t,hasDimensions:n,resizeObserver:r}){const i=bt(),s=P.useRef(null),o=P.useRef(null),l=P.useRef(e.sourcePosition),c=P.useRef(e.targetPosition),f=P.useRef(t),h=n&&!!e.internals.handleBounds;return P.useEffect(()=>{s.current&&!e.hidden&&(!h||o.current!==s.current)&&(o.current&&r?.unobserve(o.current),r?.observe(s.current),o.current=s.current)},[h,e.hidden]),P.useEffect(()=>()=>{o.current&&(r?.unobserve(o.current),o.current=null)},[]),P.useEffect(()=>{if(s.current){const p=f.current!==t,g=l.current!==e.sourcePosition,y=c.current!==e.targetPosition;(p||g||y)&&(f.current=t,l.current=e.sourcePosition,c.current=e.targetPosition,i.getState().updateNodeInternals(new Map([[e.id,{id:e.id,nodeElement:s.current,force:!0}]])))}},[e.id,t,e.sourcePosition,e.targetPosition]),s}function Aoe({id:e,onClick:t,onMouseEnter:n,onMouseMove:r,onMouseLeave:i,onContextMenu:s,onDoubleClick:o,nodesDraggable:l,elementsSelectable:c,nodesConnectable:f,nodesFocusable:h,resizeObserver:p,noDragClassName:g,noPanClassName:y,disableKeyboardA11y:b,rfId:S,nodeTypes:x,nodeClickDistance:C,onError:T}){const{node:k,internals:A,isParent:M}=Xe(se=>{const ge=se.nodeLookup.get(e),Ce=se.parentLookup.has(e);return{node:ge,internals:ge.internals,isParent:Ce}},kt);let _=k.type||"default",R=x?.[_]||vD[_];R===void 0&&(T?.("003",si.error003(_)),_="default",R=x?.default||vD.default);const O=!!(k.draggable||l&&typeof k.draggable>"u"),I=!!(k.selectable||c&&typeof k.selectable>"u"),$=!!(k.connectable||f&&typeof k.connectable>"u"),q=!!(k.focusable||h&&typeof k.focusable>"u"),U=bt(),X=C6(k),B=Toe({node:k,nodeType:_,hasDimensions:X,resizeObserver:p}),F=Q6({nodeRef:B,disabled:k.hidden||!O,noDragClassName:g,handleSelector:k.dragHandle,nodeId:e,isSelectable:I,nodeClickDistance:C}),j=J6();if(k.hidden)return null;const z=Fi(k),W=yoe(k),J=I||O||t||n||r||i,L=n?se=>n(se,{...A.userNode}):void 0,K=r?se=>r(se,{...A.userNode}):void 0,re=i?se=>i(se,{...A.userNode}):void 0,le=s?se=>s(se,{...A.userNode}):void 0,V=o?se=>o(se,{...A.userNode}):void 0,G=se=>{const{selectNodesOnDrag:ge,nodeDragThreshold:Ce}=U.getState();I&&(!ge||!O||Ce>0)&&DE({id:e,store:U,nodeRef:B}),t&&t(se,{...A.userNode})},Q=se=>{if(!(A6(se.nativeEvent)||b)){if(p6.includes(se.key)&&I){const ge=se.key==="Escape";DE({id:e,store:U,unselect:ge,nodeRef:B})}else if(O&&k.selected&&Object.prototype.hasOwnProperty.call(Tp,se.key)){se.preventDefault();const{ariaLabelConfig:ge}=U.getState();U.setState({ariaLiveMessage:ge["node.a11yDescription.ariaLiveMessage"]({direction:se.key.replace("Arrow","").toLowerCase(),x:~~A.positionAbsolute.x,y:~~A.positionAbsolute.y})}),j({direction:Tp[se.key],factor:se.shiftKey?4:1})}}},ae=()=>{if(b||!B.current?.matches(":focus-visible"))return;const{transform:se,width:ge,height:Ce,autoPanOnNodeFocus:De,setCenter:ke}=U.getState();if(!De)return;dk(new Map([[e,k]]),{x:0,y:0,width:ge,height:Ce},se,!0).length>0||ke(k.position.x+z.width/2,k.position.y+z.height/2,{zoom:se[2]})};return w.jsx("div",{className:Ut(["react-flow__node",`react-flow__node-${_}`,{[y]:O},k.className,{selected:k.selected,selectable:I,parent:M,draggable:O,dragging:F}]),ref:B,style:{zIndex:A.z,transform:`translate(${A.positionAbsolute.x}px,${A.positionAbsolute.y}px)`,pointerEvents:J?"all":"none",visibility:X?"visible":"hidden",...k.style,...W},"data-id":e,"data-testid":`rf__node-${e}`,onMouseEnter:L,onMouseMove:K,onMouseLeave:re,onContextMenu:le,onClick:G,onDoubleClick:V,onKeyDown:q?Q:void 0,tabIndex:q?0:void 0,onFocus:q?ae:void 0,role:k.ariaRole??(q?"group":void 0),"aria-roledescription":"node","aria-describedby":b?void 0:`${U6}-${S}`,"aria-label":k.ariaLabel,...k.domAttributes,children:w.jsx(uoe,{value:e,children:w.jsx(R,{id:e,data:k.data,type:_,positionAbsoluteX:A.positionAbsolute.x,positionAbsoluteY:A.positionAbsolute.y,selected:k.selected??!1,selectable:I,draggable:O,deletable:k.deletable??!0,isConnectable:$,sourcePosition:k.sourcePosition,targetPosition:k.targetPosition,dragging:F,dragHandle:k.dragHandle,zIndex:A.z,parentId:k.parentId,...z})})})}const Moe=e=>({nodesDraggable:e.nodesDraggable,nodesConnectable:e.nodesConnectable,nodesFocusable:e.nodesFocusable,elementsSelectable:e.elementsSelectable,onError:e.onError});function nq(e){const{nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,onError:s}=Xe(Moe,kt),o=Eoe(e.onlyRenderVisibleElements),l=koe();return w.jsx("div",{className:"react-flow__nodes",style:pm,children:o.map(c=>w.jsx(Aoe,{id:c,nodeTypes:e.nodeTypes,nodeExtent:e.nodeExtent,onClick:e.onNodeClick,onMouseEnter:e.onNodeMouseEnter,onMouseMove:e.onNodeMouseMove,onMouseLeave:e.onNodeMouseLeave,onContextMenu:e.onNodeContextMenu,onDoubleClick:e.onNodeDoubleClick,noDragClassName:e.noDragClassName,noPanClassName:e.noPanClassName,rfId:e.rfId,disableKeyboardA11y:e.disableKeyboardA11y,resizeObserver:l,nodesDraggable:t,nodesConnectable:n,nodesFocusable:r,elementsSelectable:i,nodeClickDistance:e.nodeClickDistance,onError:s},c))})}nq.displayName="NodeRenderer";const Noe=P.memo(nq);function _oe(e){return Xe(P.useCallback(n=>{if(!e)return n.edges.map(i=>i.id);const r=[];if(n.width&&n.height)for(const i of n.edges){const s=n.nodeLookup.get(i.source),o=n.nodeLookup.get(i.target);s&&o&&jie({sourceNode:s,targetNode:o,width:n.width,height:n.height,transform:n.transform})&&r.push(i.id)}return r},[e]),kt)}const Roe=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e}};return w.jsx("polyline",{className:"arrow",style:n,strokeLinecap:"round",fill:"none",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4"})},Doe=({color:e="none",strokeWidth:t=1})=>{const n={strokeWidth:t,...e&&{stroke:e,fill:e}};return w.jsx("polyline",{className:"arrowclosed",style:n,strokeLinecap:"round",strokeLinejoin:"round",points:"-5,-4 0,0 -5,4 -5,-4"})},xD={[Ep.Arrow]:Roe,[Ep.ArrowClosed]:Doe};function Ooe(e){const t=bt();return P.useMemo(()=>Object.prototype.hasOwnProperty.call(xD,e)?xD[e]:(t.getState().onError?.("009",si.error009(e)),null),[e])}const joe=({id:e,type:t,color:n,width:r=12.5,height:i=12.5,markerUnits:s="strokeWidth",strokeWidth:o,orient:l="auto-start-reverse"})=>{const c=Ooe(t);return c?w.jsx("marker",{className:"react-flow__arrowhead",id:e,markerWidth:`${r}`,markerHeight:`${i}`,viewBox:"-10 -10 20 20",markerUnits:s,orient:l,refX:"0",refY:"0",children:w.jsx(c,{color:n,strokeWidth:o})}):null},rq=({defaultColor:e,rfId:t})=>{const n=Xe(s=>s.edges),r=Xe(s=>s.defaultEdgeOptions),i=P.useMemo(()=>Vie(n,{id:t,defaultColor:e,defaultMarkerStart:r?.markerStart,defaultMarkerEnd:r?.markerEnd}),[n,r,t,e]);return i.length?w.jsx("svg",{className:"react-flow__marker","aria-hidden":"true",children:w.jsx("defs",{children:i.map(s=>w.jsx(joe,{id:s.id,type:s.type,color:s.color,width:s.width,height:s.height,markerUnits:s.markerUnits,strokeWidth:s.strokeWidth,orient:s.orient},s.id))})}):null};rq.displayName="MarkerDefinitions";var Loe=P.memo(rq);function iq({x:e,y:t,label:n,labelStyle:r,labelShowBg:i=!0,labelBgStyle:s,labelBgPadding:o=[2,4],labelBgBorderRadius:l=2,children:c,className:f,...h}){const[p,g]=P.useState({x:1,y:0,width:0,height:0}),y=Ut(["react-flow__edge-textwrapper",f]),b=P.useRef(null);return P.useEffect(()=>{if(b.current){const S=b.current.getBBox();g({x:S.x,y:S.y,width:S.width,height:S.height})}},[n]),n?w.jsxs("g",{transform:`translate(${e-p.width/2} ${t-p.height/2})`,className:y,visibility:p.width?"visible":"hidden",...h,children:[i&&w.jsx("rect",{width:p.width+2*o[0],x:-o[0],y:-o[1],height:p.height+2*o[1],className:"react-flow__edge-textbg",style:s,rx:l,ry:l}),w.jsx("text",{className:"react-flow__edge-text",y:p.height/2,dy:"0.3em",ref:b,style:r,children:n}),c]}):null}iq.displayName="EdgeText";const Poe=P.memo(iq);function mm({path:e,labelX:t,labelY:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:c,interactionWidth:f=20,...h}){return w.jsxs(w.Fragment,{children:[w.jsx("path",{...h,d:e,fill:"none",className:Ut(["react-flow__edge-path",h.className])}),f?w.jsx("path",{d:e,fill:"none",strokeOpacity:0,strokeWidth:f,className:"react-flow__edge-interaction"}):null,r&&Br(t)&&Br(n)?w.jsx(Poe,{x:t,y:n,label:r,labelStyle:i,labelShowBg:s,labelBgStyle:o,labelBgPadding:l,labelBgBorderRadius:c}):null]})}function wD({pos:e,x1:t,y1:n,x2:r,y2:i}){return e===Ae.Left||e===Ae.Right?[.5*(t+r),n]:[t,.5*(n+i)]}function sq({sourceX:e,sourceY:t,sourcePosition:n=Ae.Bottom,targetX:r,targetY:i,targetPosition:s=Ae.Top}){const[o,l]=wD({pos:n,x1:e,y1:t,x2:r,y2:i}),[c,f]=wD({pos:s,x1:r,y1:i,x2:e,y2:t}),[h,p,g,y]=N6({sourceX:e,sourceY:t,targetX:r,targetY:i,sourceControlX:o,sourceControlY:l,targetControlX:c,targetControlY:f});return[`M${e},${t} C${o},${l} ${c},${f} ${r},${i}`,h,p,g,y]}function oq(e){return P.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o,targetPosition:l,label:c,labelStyle:f,labelShowBg:h,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:y,style:b,markerEnd:S,markerStart:x,interactionWidth:C})=>{const[T,k,A]=sq({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:l}),M=e.isInternal?void 0:t;return w.jsx(mm,{id:M,path:T,labelX:k,labelY:A,label:c,labelStyle:f,labelShowBg:h,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:y,style:b,markerEnd:S,markerStart:x,interactionWidth:C})})}const Boe=oq({isInternal:!1}),aq=oq({isInternal:!0});Boe.displayName="SimpleBezierEdge";aq.displayName="SimpleBezierEdgeInternal";function lq(e){return P.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:g,sourcePosition:y=Ae.Bottom,targetPosition:b=Ae.Top,markerEnd:S,markerStart:x,pathOptions:C,interactionWidth:T})=>{const[k,A,M]=ME({sourceX:n,sourceY:r,sourcePosition:y,targetX:i,targetY:s,targetPosition:b,borderRadius:C?.borderRadius,offset:C?.offset,stepPosition:C?.stepPosition}),_=e.isInternal?void 0:t;return w.jsx(mm,{id:_,path:k,labelX:A,labelY:M,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:g,markerEnd:S,markerStart:x,interactionWidth:T})})}const uq=lq({isInternal:!1}),cq=lq({isInternal:!0});uq.displayName="SmoothStepEdge";cq.displayName="SmoothStepEdgeInternal";function fq(e){return P.memo(({id:t,...n})=>{const r=e.isInternal?void 0:t;return w.jsx(uq,{...n,id:r,pathOptions:P.useMemo(()=>({borderRadius:0,offset:n.pathOptions?.offset}),[n.pathOptions?.offset])})})}const Ioe=fq({isInternal:!1}),dq=fq({isInternal:!0});Ioe.displayName="StepEdge";dq.displayName="StepEdgeInternal";function hq(e){return P.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:g,markerEnd:y,markerStart:b,interactionWidth:S})=>{const[x,C,T]=R6({sourceX:n,sourceY:r,targetX:i,targetY:s}),k=e.isInternal?void 0:t;return w.jsx(mm,{id:k,path:x,labelX:C,labelY:T,label:o,labelStyle:l,labelShowBg:c,labelBgStyle:f,labelBgPadding:h,labelBgBorderRadius:p,style:g,markerEnd:y,markerStart:b,interactionWidth:S})})}const zoe=hq({isInternal:!1}),pq=hq({isInternal:!0});zoe.displayName="StraightEdge";pq.displayName="StraightEdgeInternal";function mq(e){return P.memo(({id:t,sourceX:n,sourceY:r,targetX:i,targetY:s,sourcePosition:o=Ae.Bottom,targetPosition:l=Ae.Top,label:c,labelStyle:f,labelShowBg:h,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:y,style:b,markerEnd:S,markerStart:x,pathOptions:C,interactionWidth:T})=>{const[k,A,M]=pk({sourceX:n,sourceY:r,sourcePosition:o,targetX:i,targetY:s,targetPosition:l,curvature:C?.curvature}),_=e.isInternal?void 0:t;return w.jsx(mm,{id:_,path:k,labelX:A,labelY:M,label:c,labelStyle:f,labelShowBg:h,labelBgStyle:p,labelBgPadding:g,labelBgBorderRadius:y,style:b,markerEnd:S,markerStart:x,interactionWidth:T})})}const qoe=mq({isInternal:!1}),gq=mq({isInternal:!0});qoe.displayName="BezierEdge";gq.displayName="BezierEdgeInternal";const SD={default:gq,straight:pq,step:dq,smoothstep:cq,simplebezier:aq},ED={sourceX:null,sourceY:null,targetX:null,targetY:null,sourcePosition:null,targetPosition:null},Voe=(e,t,n)=>n===Ae.Left?e-t:n===Ae.Right?e+t:e,Hoe=(e,t,n)=>n===Ae.Top?e-t:n===Ae.Bottom?e+t:e,CD="react-flow__edgeupdater";function kD({position:e,centerX:t,centerY:n,radius:r=10,onMouseDown:i,onMouseEnter:s,onMouseOut:o,type:l}){return w.jsx("circle",{onMouseDown:i,onMouseEnter:s,onMouseOut:o,className:Ut([CD,`${CD}-${l}`]),cx:Voe(t,r,e),cy:Hoe(n,r,e),r,stroke:"transparent",fill:"transparent"})}function Foe({isReconnectable:e,reconnectRadius:t,edge:n,sourceX:r,sourceY:i,targetX:s,targetY:o,sourcePosition:l,targetPosition:c,onReconnect:f,onReconnectStart:h,onReconnectEnd:p,setReconnecting:g,setUpdateHover:y}){const b=bt(),S=(A,M)=>{if(A.button!==0)return;const{autoPanOnConnect:_,domNode:R,isValidConnection:O,connectionMode:I,connectionRadius:$,lib:q,onConnectStart:U,onConnectEnd:X,cancelConnection:B,nodeLookup:F,rfId:j,panBy:z,updateConnection:W}=b.getState(),J=M.type==="target",L=(le,V)=>{g(!1),p?.(le,n,M.type,V)},K=le=>f?.(n,le),re=(le,V)=>{g(!0),h?.(A,n,M.type),U?.(le,V)};RE.onPointerDown(A.nativeEvent,{autoPanOnConnect:_,connectionMode:I,connectionRadius:$,domNode:R,handleId:M.id,nodeId:M.nodeId,nodeLookup:F,isTarget:J,edgeUpdaterType:M.type,lib:q,flowId:j,cancelConnection:B,panBy:z,isValidConnection:O,onConnect:K,onConnectStart:re,onConnectEnd:X,onReconnectEnd:L,updateConnection:W,getTransform:()=>b.getState().transform,getFromHandle:()=>b.getState().connection.fromHandle,dragThreshold:b.getState().connectionDragThreshold,handleDomNode:A.currentTarget})},x=A=>S(A,{nodeId:n.target,id:n.targetHandle??null,type:"target"}),C=A=>S(A,{nodeId:n.source,id:n.sourceHandle??null,type:"source"}),T=()=>y(!0),k=()=>y(!1);return w.jsxs(w.Fragment,{children:[(e===!0||e==="source")&&w.jsx(kD,{position:l,centerX:r,centerY:i,radius:t,onMouseDown:x,onMouseEnter:T,onMouseOut:k,type:"source"}),(e===!0||e==="target")&&w.jsx(kD,{position:c,centerX:s,centerY:o,radius:t,onMouseDown:C,onMouseEnter:T,onMouseOut:k,type:"target"})]})}function Uoe({id:e,edgesFocusable:t,edgesReconnectable:n,elementsSelectable:r,onClick:i,onDoubleClick:s,onContextMenu:o,onMouseEnter:l,onMouseMove:c,onMouseLeave:f,reconnectRadius:h,onReconnect:p,onReconnectStart:g,onReconnectEnd:y,rfId:b,edgeTypes:S,noPanClassName:x,onError:C,disableKeyboardA11y:T}){let k=Xe(ke=>ke.edgeLookup.get(e));const A=Xe(ke=>ke.defaultEdgeOptions);k=A?{...A,...k}:k;let M=k.type||"default",_=S?.[M]||SD[M];_===void 0&&(C?.("011",si.error011(M)),M="default",_=S?.default||SD.default);const R=!!(k.focusable||t&&typeof k.focusable>"u"),O=typeof p<"u"&&(k.reconnectable||n&&typeof k.reconnectable>"u"),I=!!(k.selectable||r&&typeof k.selectable>"u"),$=P.useRef(null),[q,U]=P.useState(!1),[X,B]=P.useState(!1),F=bt(),{zIndex:j,sourceX:z,sourceY:W,targetX:J,targetY:L,sourcePosition:K,targetPosition:re}=Xe(P.useCallback(ke=>{const Te=ke.nodeLookup.get(k.source),be=ke.nodeLookup.get(k.target);if(!Te||!be)return{zIndex:k.zIndex,...ED};const we=qie({id:e,sourceNode:Te,targetNode:be,sourceHandle:k.sourceHandle||null,targetHandle:k.targetHandle||null,connectionMode:ke.connectionMode,onError:C});return{zIndex:Oie({selected:k.selected,zIndex:k.zIndex,sourceNode:Te,targetNode:be,elevateOnSelect:ke.elevateEdgesOnSelect}),...we||ED}},[k.source,k.target,k.sourceHandle,k.targetHandle,k.selected,k.zIndex]),kt),le=P.useMemo(()=>k.markerStart?`url('#${NE(k.markerStart,b)}')`:void 0,[k.markerStart,b]),V=P.useMemo(()=>k.markerEnd?`url('#${NE(k.markerEnd,b)}')`:void 0,[k.markerEnd,b]);if(k.hidden||z===null||W===null||J===null||L===null)return null;const G=ke=>{const{addSelectedEdges:Te,unselectNodesAndEdges:be,multiSelectionActive:we}=F.getState();I&&(F.setState({nodesSelectionActive:!1}),k.selected&&we?(be({nodes:[],edges:[k]}),$.current?.blur()):Te([e])),i&&i(ke,k)},Q=s?ke=>{s(ke,{...k})}:void 0,ae=o?ke=>{o(ke,{...k})}:void 0,se=l?ke=>{l(ke,{...k})}:void 0,ge=c?ke=>{c(ke,{...k})}:void 0,Ce=f?ke=>{f(ke,{...k})}:void 0,De=ke=>{if(!T&&p6.includes(ke.key)&&I){const{unselectNodesAndEdges:Te,addSelectedEdges:be}=F.getState();ke.key==="Escape"?($.current?.blur(),Te({edges:[k]})):be([e])}};return w.jsx("svg",{style:{zIndex:j},children:w.jsxs("g",{className:Ut(["react-flow__edge",`react-flow__edge-${M}`,k.className,x,{selected:k.selected,animated:k.animated,inactive:!I&&!i,updating:q,selectable:I}]),onClick:G,onDoubleClick:Q,onContextMenu:ae,onMouseEnter:se,onMouseMove:ge,onMouseLeave:Ce,onKeyDown:R?De:void 0,tabIndex:R?0:void 0,role:k.ariaRole??(R?"group":"img"),"aria-roledescription":"edge","data-id":e,"data-testid":`rf__edge-${e}`,"aria-label":k.ariaLabel===null?void 0:k.ariaLabel||`Edge from ${k.source} to ${k.target}`,"aria-describedby":R?`${$6}-${b}`:void 0,ref:$,...k.domAttributes,children:[!X&&w.jsx(_,{id:e,source:k.source,target:k.target,type:k.type,selected:k.selected,animated:k.animated,selectable:I,deletable:k.deletable??!0,label:k.label,labelStyle:k.labelStyle,labelShowBg:k.labelShowBg,labelBgStyle:k.labelBgStyle,labelBgPadding:k.labelBgPadding,labelBgBorderRadius:k.labelBgBorderRadius,sourceX:z,sourceY:W,targetX:J,targetY:L,sourcePosition:K,targetPosition:re,data:k.data,style:k.style,sourceHandleId:k.sourceHandle,targetHandleId:k.targetHandle,markerStart:le,markerEnd:V,pathOptions:"pathOptions"in k?k.pathOptions:void 0,interactionWidth:k.interactionWidth}),O&&w.jsx(Foe,{edge:k,isReconnectable:O,reconnectRadius:h,onReconnect:p,onReconnectStart:g,onReconnectEnd:y,sourceX:z,sourceY:W,targetX:J,targetY:L,sourcePosition:K,targetPosition:re,setUpdateHover:U,setReconnecting:B})]})})}const $oe=e=>({edgesFocusable:e.edgesFocusable,edgesReconnectable:e.edgesReconnectable,elementsSelectable:e.elementsSelectable,connectionMode:e.connectionMode,onError:e.onError});function yq({defaultMarkerColor:e,onlyRenderVisibleElements:t,rfId:n,edgeTypes:r,noPanClassName:i,onReconnect:s,onEdgeContextMenu:o,onEdgeMouseEnter:l,onEdgeMouseMove:c,onEdgeMouseLeave:f,onEdgeClick:h,reconnectRadius:p,onEdgeDoubleClick:g,onReconnectStart:y,onReconnectEnd:b,disableKeyboardA11y:S}){const{edgesFocusable:x,edgesReconnectable:C,elementsSelectable:T,onError:k}=Xe($oe,kt),A=_oe(t);return w.jsxs("div",{className:"react-flow__edges",children:[w.jsx(Loe,{defaultColor:e,rfId:n}),A.map(M=>w.jsx(Uoe,{id:M,edgesFocusable:x,edgesReconnectable:C,elementsSelectable:T,noPanClassName:i,onReconnect:s,onContextMenu:o,onMouseEnter:l,onMouseMove:c,onMouseLeave:f,onClick:h,reconnectRadius:p,onDoubleClick:g,onReconnectStart:y,onReconnectEnd:b,rfId:n,onError:k,edgeTypes:r,disableKeyboardA11y:S},M))]})}yq.displayName="EdgeRenderer";const Goe=P.memo(yq),Koe=e=>`translate(${e.transform[0]}px,${e.transform[1]}px) scale(${e.transform[2]})`;function Yoe({children:e}){const t=Xe(Koe);return w.jsx("div",{className:"react-flow__viewport xyflow__viewport react-flow__container",style:{transform:t},children:e})}function Woe(e){const t=Kc(),n=P.useRef(!1);P.useEffect(()=>{!n.current&&t.viewportInitialized&&e&&(setTimeout(()=>e(t),1),n.current=!0)},[e,t.viewportInitialized])}const Xoe=e=>e.panZoom?.syncViewport;function Zoe(e){const t=Xe(Xoe),n=bt();return P.useEffect(()=>{e&&(t?.(e),n.setState({transform:[e.x,e.y,e.zoom]}))},[e,t]),null}function Qoe(e){return e.connection.inProgress?{...e.connection,to:cf(e.connection.to,e.transform)}:{...e.connection}}function Joe(e){return Qoe}function eae(e){const t=Joe();return Xe(t,kt)}const tae=e=>({nodesConnectable:e.nodesConnectable,isValid:e.connection.isValid,inProgress:e.connection.inProgress,width:e.width,height:e.height});function nae({containerStyle:e,style:t,type:n,component:r}){const{nodesConnectable:i,width:s,height:o,isValid:l,inProgress:c}=Xe(tae,kt);return!(s&&i&&c)?null:w.jsx("svg",{style:e,width:s,height:o,className:"react-flow__connectionline react-flow__container",children:w.jsx("g",{className:Ut(["react-flow__connection",y6(l)]),children:w.jsx(vq,{style:t,type:n,CustomComponent:r,isValid:l})})})}const vq=({style:e,type:t=Ns.Bezier,CustomComponent:n,isValid:r})=>{const{inProgress:i,from:s,fromNode:o,fromHandle:l,fromPosition:c,to:f,toNode:h,toHandle:p,toPosition:g}=eae();if(!i)return;if(n)return w.jsx(n,{connectionLineType:t,connectionLineStyle:e,fromNode:o,fromHandle:l,fromX:s.x,fromY:s.y,toX:f.x,toY:f.y,fromPosition:c,toPosition:g,connectionStatus:y6(r),toNode:h,toHandle:p});let y="";const b={sourceX:s.x,sourceY:s.y,sourcePosition:c,targetX:f.x,targetY:f.y,targetPosition:g};switch(t){case Ns.Bezier:[y]=pk(b);break;case Ns.SimpleBezier:[y]=sq(b);break;case Ns.Step:[y]=ME({...b,borderRadius:0});break;case Ns.SmoothStep:[y]=ME(b);break;default:[y]=R6(b)}return w.jsx("path",{d:y,fill:"none",className:"react-flow__connection-path",style:e})};vq.displayName="ConnectionLine";const rae={};function TD(e=rae){P.useRef(e),bt(),P.useEffect(()=>{},[e])}function iae(){bt(),P.useRef(!1),P.useEffect(()=>{},[])}function bq({nodeTypes:e,edgeTypes:t,onInit:n,onNodeClick:r,onEdgeClick:i,onNodeDoubleClick:s,onEdgeDoubleClick:o,onNodeMouseEnter:l,onNodeMouseMove:c,onNodeMouseLeave:f,onNodeContextMenu:h,onSelectionContextMenu:p,onSelectionStart:g,onSelectionEnd:y,connectionLineType:b,connectionLineStyle:S,connectionLineComponent:x,connectionLineContainerStyle:C,selectionKeyCode:T,selectionOnDrag:k,selectionMode:A,multiSelectionKeyCode:M,panActivationKeyCode:_,zoomActivationKeyCode:R,deleteKeyCode:O,onlyRenderVisibleElements:I,elementsSelectable:$,defaultViewport:q,translateExtent:U,minZoom:X,maxZoom:B,preventScrolling:F,defaultMarkerColor:j,zoomOnScroll:z,zoomOnPinch:W,panOnScroll:J,panOnScrollSpeed:L,panOnScrollMode:K,zoomOnDoubleClick:re,panOnDrag:le,onPaneClick:V,onPaneMouseEnter:G,onPaneMouseMove:Q,onPaneMouseLeave:ae,onPaneScroll:se,onPaneContextMenu:ge,paneClickDistance:Ce,nodeClickDistance:De,onEdgeContextMenu:ke,onEdgeMouseEnter:Te,onEdgeMouseMove:be,onEdgeMouseLeave:we,reconnectRadius:tt,onReconnect:Me,onReconnectStart:rn,onReconnectEnd:sn,noDragClassName:_n,noWheelClassName:pn,noPanClassName:Wt,disableKeyboardA11y:ft,nodeExtent:sr,rfId:Fn,viewport:mn,onViewportChange:gt}){return TD(e),TD(t),iae(),Woe(n),Zoe(mn),w.jsx(woe,{onPaneClick:V,onPaneMouseEnter:G,onPaneMouseMove:Q,onPaneMouseLeave:ae,onPaneContextMenu:ge,onPaneScroll:se,paneClickDistance:Ce,deleteKeyCode:O,selectionKeyCode:T,selectionOnDrag:k,selectionMode:A,onSelectionStart:g,onSelectionEnd:y,multiSelectionKeyCode:M,panActivationKeyCode:_,zoomActivationKeyCode:R,elementsSelectable:$,zoomOnScroll:z,zoomOnPinch:W,zoomOnDoubleClick:re,panOnScroll:J,panOnScrollSpeed:L,panOnScrollMode:K,panOnDrag:le,defaultViewport:q,translateExtent:U,minZoom:X,maxZoom:B,onSelectionContextMenu:p,preventScrolling:F,noDragClassName:_n,noWheelClassName:pn,noPanClassName:Wt,disableKeyboardA11y:ft,onViewportChange:gt,isControlledViewport:!!mn,children:w.jsxs(Yoe,{children:[w.jsx(Goe,{edgeTypes:t,onEdgeClick:i,onEdgeDoubleClick:o,onReconnect:Me,onReconnectStart:rn,onReconnectEnd:sn,onlyRenderVisibleElements:I,onEdgeContextMenu:ke,onEdgeMouseEnter:Te,onEdgeMouseMove:be,onEdgeMouseLeave:we,reconnectRadius:tt,defaultMarkerColor:j,noPanClassName:Wt,disableKeyboardA11y:ft,rfId:Fn}),w.jsx(nae,{style:S,type:b,component:x,containerStyle:C}),w.jsx("div",{className:"react-flow__edgelabel-renderer"}),w.jsx(Noe,{nodeTypes:e,onNodeClick:r,onNodeDoubleClick:s,onNodeMouseEnter:l,onNodeMouseMove:c,onNodeMouseLeave:f,onNodeContextMenu:h,nodeClickDistance:De,onlyRenderVisibleElements:I,noPanClassName:Wt,noDragClassName:_n,disableKeyboardA11y:ft,nodeExtent:sr,rfId:Fn}),w.jsx("div",{className:"react-flow__viewport-portal"})]})})}bq.displayName="GraphView";const sae=P.memo(bq),AD=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,fitViewOptions:l,minZoom:c=.5,maxZoom:f=2,nodeOrigin:h,nodeExtent:p}={})=>{const g=new Map,y=new Map,b=new Map,S=new Map,x=r??t??[],C=n??e??[],T=h??[0,0],k=p??Vc;O6(b,S,x);const A=_E(C,g,y,{nodeOrigin:T,nodeExtent:k,elevateNodesOnSelect:!1});let M=[0,0,1];if(o&&i&&s){const _=lf(g,{filter:$=>!!(($.width||$.initialWidth)&&($.height||$.initialHeight))}),{x:R,y:O,zoom:I}=cm(_,i,s,c,f,l?.padding??.1);M=[R,O,I]}return{rfId:"1",width:0,height:0,transform:M,nodes:C,nodesInitialized:A,nodeLookup:g,parentLookup:y,edges:x,edgeLookup:S,connectionLookup:b,onNodesChange:null,onEdgesChange:null,hasDefaultNodes:n!==void 0,hasDefaultEdges:r!==void 0,panZoom:null,minZoom:c,maxZoom:f,translateExtent:Vc,nodeExtent:k,nodesSelectionActive:!1,userSelectionActive:!1,userSelectionRect:null,connectionMode:Ko.Strict,domNode:null,paneDragging:!1,noPanClassName:"nopan",nodeOrigin:T,nodeDragThreshold:1,connectionDragThreshold:1,snapGrid:[15,15],snapToGrid:!1,nodesDraggable:!0,nodesConnectable:!0,nodesFocusable:!0,edgesFocusable:!0,edgesReconnectable:!0,elementsSelectable:!0,elevateNodesOnSelect:!0,elevateEdgesOnSelect:!1,selectNodesOnDrag:!0,multiSelectionActive:!1,fitViewQueued:o??!1,fitViewOptions:l,fitViewResolver:null,connection:{...g6},connectionClickStartHandle:null,connectOnClick:!0,ariaLiveMessage:"",autoPanOnConnect:!0,autoPanOnNodeDrag:!0,autoPanOnNodeFocus:!0,autoPanSpeed:15,connectionRadius:20,onError:Aie,isValidConnection:void 0,onSelectionChangeHandlers:[],lib:"react",debug:!1,ariaLabelConfig:m6}},oae=({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:o,fitViewOptions:l,minZoom:c,maxZoom:f,nodeOrigin:h,nodeExtent:p})=>Tse((g,y)=>{async function b(){const{nodeLookup:S,panZoom:x,fitViewOptions:C,fitViewResolver:T,width:k,height:A,minZoom:M,maxZoom:_}=y();x&&(await kie({nodes:S,width:k,height:A,panZoom:x,minZoom:M,maxZoom:_},C),T?.resolve(!0),g({fitViewResolver:null}))}return{...AD({nodes:e,edges:t,width:i,height:s,fitView:o,fitViewOptions:l,minZoom:c,maxZoom:f,nodeOrigin:h,nodeExtent:p,defaultNodes:n,defaultEdges:r}),setNodes:S=>{const{nodeLookup:x,parentLookup:C,nodeOrigin:T,elevateNodesOnSelect:k,fitViewQueued:A}=y(),M=_E(S,x,C,{nodeOrigin:T,nodeExtent:p,elevateNodesOnSelect:k,checkEquality:!0});A&&M?(b(),g({nodes:S,nodesInitialized:M,fitViewQueued:!1,fitViewOptions:void 0})):g({nodes:S,nodesInitialized:M})},setEdges:S=>{const{connectionLookup:x,edgeLookup:C}=y();O6(x,C,S),g({edges:S})},setDefaultNodesAndEdges:(S,x)=>{if(S){const{setNodes:C}=y();C(S),g({hasDefaultNodes:!0})}if(x){const{setEdges:C}=y();C(x),g({hasDefaultEdges:!0})}},updateNodeInternals:S=>{const{triggerNodeChanges:x,nodeLookup:C,parentLookup:T,domNode:k,nodeOrigin:A,nodeExtent:M,debug:_,fitViewQueued:R}=y(),{changes:O,updatedInternals:I}=Gie(S,C,T,k,A,M);I&&(Fie(C,T,{nodeOrigin:A,nodeExtent:M}),R?(b(),g({fitViewQueued:!1,fitViewOptions:void 0})):g({}),O?.length>0&&(_&&console.log("React Flow: trigger node changes",O),x?.(O)))},updateNodePositions:(S,x=!1)=>{const C=[],T=[],{nodeLookup:k,triggerNodeChanges:A}=y();for(const[M,_]of S){const R=k.get(M),O=!!(R?.expandParent&&R?.parentId&&_?.position),I={id:M,type:"position",position:O?{x:Math.max(0,_.position.x),y:Math.max(0,_.position.y)}:_.position,dragging:x};O&&R.parentId&&C.push({id:M,parentId:R.parentId,rect:{..._.internals.positionAbsolute,width:_.measured.width??0,height:_.measured.height??0}}),T.push(I)}if(C.length>0){const{parentLookup:M,nodeOrigin:_}=y(),R=bk(C,k,M,_);T.push(...R)}A(T)},triggerNodeChanges:S=>{const{onNodesChange:x,setNodes:C,nodes:T,hasDefaultNodes:k,debug:A}=y();if(S?.length){if(k){const M=Y6(S,T);C(M)}A&&console.log("React Flow: trigger node changes",S),x?.(S)}},triggerEdgeChanges:S=>{const{onEdgesChange:x,setEdges:C,edges:T,hasDefaultEdges:k,debug:A}=y();if(S?.length){if(k){const M=W6(S,T);C(M)}A&&console.log("React Flow: trigger edge changes",S),x?.(S)}},addSelectedNodes:S=>{const{multiSelectionActive:x,edgeLookup:C,nodeLookup:T,triggerNodeChanges:k,triggerEdgeChanges:A}=y();if(x){const M=S.map(_=>xo(_,!0));k(M);return}k(al(T,new Set([...S]),!0)),A(al(C))},addSelectedEdges:S=>{const{multiSelectionActive:x,edgeLookup:C,nodeLookup:T,triggerNodeChanges:k,triggerEdgeChanges:A}=y();if(x){const M=S.map(_=>xo(_,!0));A(M);return}A(al(C,new Set([...S]))),k(al(T,new Set,!0))},unselectNodesAndEdges:({nodes:S,edges:x}={})=>{const{edges:C,nodes:T,nodeLookup:k,triggerNodeChanges:A,triggerEdgeChanges:M}=y(),_=S||T,R=x||C,O=_.map($=>{const q=k.get($.id);return q&&(q.selected=!1),xo($.id,!1)}),I=R.map($=>xo($.id,!1));A(O),M(I)},setMinZoom:S=>{const{panZoom:x,maxZoom:C}=y();x?.setScaleExtent([S,C]),g({minZoom:S})},setMaxZoom:S=>{const{panZoom:x,minZoom:C}=y();x?.setScaleExtent([C,S]),g({maxZoom:S})},setTranslateExtent:S=>{y().panZoom?.setTranslateExtent(S),g({translateExtent:S})},setPaneClickDistance:S=>{y().panZoom?.setClickDistance(S)},resetSelectedElements:()=>{const{edges:S,nodes:x,triggerNodeChanges:C,triggerEdgeChanges:T,elementsSelectable:k}=y();if(!k)return;const A=x.reduce((_,R)=>R.selected?[..._,xo(R.id,!1)]:_,[]),M=S.reduce((_,R)=>R.selected?[..._,xo(R.id,!1)]:_,[]);C(A),T(M)},setNodeExtent:S=>{const{nodes:x,nodeLookup:C,parentLookup:T,nodeOrigin:k,elevateNodesOnSelect:A,nodeExtent:M}=y();S[0][0]===M[0][0]&&S[0][1]===M[0][1]&&S[1][0]===M[1][0]&&S[1][1]===M[1][1]||(_E(x,C,T,{nodeOrigin:k,nodeExtent:S,elevateNodesOnSelect:A,checkEquality:!1}),g({nodeExtent:S}))},panBy:S=>{const{transform:x,width:C,height:T,panZoom:k,translateExtent:A}=y();return Kie({delta:S,panZoom:k,transform:x,translateExtent:A,width:C,height:T})},setCenter:async(S,x,C)=>{const{width:T,height:k,maxZoom:A,panZoom:M}=y();if(!M)return Promise.resolve(!1);const _=typeof C?.zoom<"u"?C.zoom:A;return await M.setViewport({x:T/2-S*_,y:k/2-x*_,zoom:_},{duration:C?.duration,ease:C?.ease,interpolate:C?.interpolate}),Promise.resolve(!0)},cancelConnection:()=>{g({connection:{...g6}})},updateConnection:S=>{g({connection:S})},reset:()=>g({...AD()})}},Object.is);function xq({initialNodes:e,initialEdges:t,defaultNodes:n,defaultEdges:r,initialWidth:i,initialHeight:s,initialMinZoom:o,initialMaxZoom:l,initialFitViewOptions:c,fitView:f,nodeOrigin:h,nodeExtent:p,children:g}){const[y]=P.useState(()=>oae({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,width:i,height:s,fitView:f,minZoom:o,maxZoom:l,fitViewOptions:c,nodeOrigin:h,nodeExtent:p}));return w.jsx(Ase,{value:y,children:w.jsx(Xse,{children:g})})}function aae({children:e,nodes:t,edges:n,defaultNodes:r,defaultEdges:i,width:s,height:o,fitView:l,fitViewOptions:c,minZoom:f,maxZoom:h,nodeOrigin:p,nodeExtent:g}){return P.useContext(dm)?w.jsx(w.Fragment,{children:e}):w.jsx(xq,{initialNodes:t,initialEdges:n,defaultNodes:r,defaultEdges:i,initialWidth:s,initialHeight:o,fitView:l,initialFitViewOptions:c,initialMinZoom:f,initialMaxZoom:h,nodeOrigin:p,nodeExtent:g,children:e})}const lae={width:"100%",height:"100%",overflow:"hidden",position:"relative",zIndex:0};function uae({nodes:e,edges:t,defaultNodes:n,defaultEdges:r,className:i,nodeTypes:s,edgeTypes:o,onNodeClick:l,onEdgeClick:c,onInit:f,onMove:h,onMoveStart:p,onMoveEnd:g,onConnect:y,onConnectStart:b,onConnectEnd:S,onClickConnectStart:x,onClickConnectEnd:C,onNodeMouseEnter:T,onNodeMouseMove:k,onNodeMouseLeave:A,onNodeContextMenu:M,onNodeDoubleClick:_,onNodeDragStart:R,onNodeDrag:O,onNodeDragStop:I,onNodesDelete:$,onEdgesDelete:q,onDelete:U,onSelectionChange:X,onSelectionDragStart:B,onSelectionDrag:F,onSelectionDragStop:j,onSelectionContextMenu:z,onSelectionStart:W,onSelectionEnd:J,onBeforeDelete:L,connectionMode:K,connectionLineType:re=Ns.Bezier,connectionLineStyle:le,connectionLineComponent:V,connectionLineContainerStyle:G,deleteKeyCode:Q="Backspace",selectionKeyCode:ae="Shift",selectionOnDrag:se=!1,selectionMode:ge=Hc.Full,panActivationKeyCode:Ce="Space",multiSelectionKeyCode:De=Uc()?"Meta":"Control",zoomActivationKeyCode:ke=Uc()?"Meta":"Control",snapToGrid:Te,snapGrid:be,onlyRenderVisibleElements:we=!1,selectNodesOnDrag:tt,nodesDraggable:Me,autoPanOnNodeFocus:rn,nodesConnectable:sn,nodesFocusable:_n,nodeOrigin:pn=G6,edgesFocusable:Wt,edgesReconnectable:ft,elementsSelectable:sr=!0,defaultViewport:Fn=qse,minZoom:mn=.5,maxZoom:gt=2,translateExtent:Pt=Vc,preventScrolling:wt=!0,nodeExtent:or,defaultMarkerColor:Xs="#b1b1b7",zoomOnScroll:Gi=!0,zoomOnPinch:on=!0,panOnScroll:gn=!1,panOnScrollSpeed:Ar=.5,panOnScrollMode:Vr=zo.Free,zoomOnDoubleClick:Hr=!0,panOnDrag:Pl=!0,onPaneClick:sa,onPaneMouseEnter:oa,onPaneMouseMove:Zs,onPaneMouseLeave:li,onPaneScroll:ue,onPaneContextMenu:oe,paneClickDistance:he=0,nodeClickDistance:xe=0,children:ye,onReconnect:Se,onReconnectStart:je,onReconnectEnd:He,onEdgeContextMenu:Ze,onEdgeDoubleClick:ht,onEdgeMouseEnter:Ve,onEdgeMouseMove:st,onEdgeMouseLeave:Bl,reconnectRadius:jm=10,onNodesChange:gf,onEdgesChange:Qs,noDragClassName:Il="nodrag",noWheelClassName:Ki="nowheel",noPanClassName:ui="nopan",fitView:Yi,fitViewOptions:ci,connectOnClick:Bt,attributionPosition:yf,proOptions:vf,defaultEdgeOptions:fi,elevateNodesOnSelect:Wi,elevateEdgesOnSelect:Lm,disableKeyboardA11y:zl=!1,autoPanOnConnect:bf,autoPanOnNodeDrag:Pm,autoPanSpeed:aa,connectionRadius:la,isValidConnection:Mr,onError:ql,style:xf,id:di,nodeDragThreshold:Vl,connectionDragThreshold:Hl,viewport:Bm,onViewportChange:wf,width:Rn,height:Sf,colorMode:Im="light",debug:ua,onScroll:Fl,ariaLabelConfig:ca,...zm},Dn){const Js=di||"1",Ef=Use(Im),Ul=P.useCallback(hi=>{hi.currentTarget.scrollTo({top:0,left:0,behavior:"instant"}),Fl?.(hi)},[Fl]);return w.jsx("div",{"data-testid":"rf__wrapper",...zm,onScroll:Ul,style:{...xf,...lae},ref:Dn,className:Ut(["react-flow",i,Ef]),id:di,role:"application",children:w.jsxs(aae,{nodes:e,edges:t,width:Rn,height:Sf,fitView:Yi,fitViewOptions:ci,minZoom:mn,maxZoom:gt,nodeOrigin:pn,nodeExtent:or,children:[w.jsx(sae,{onInit:f,onNodeClick:l,onEdgeClick:c,onNodeMouseEnter:T,onNodeMouseMove:k,onNodeMouseLeave:A,onNodeContextMenu:M,onNodeDoubleClick:_,nodeTypes:s,edgeTypes:o,connectionLineType:re,connectionLineStyle:le,connectionLineComponent:V,connectionLineContainerStyle:G,selectionKeyCode:ae,selectionOnDrag:se,selectionMode:ge,deleteKeyCode:Q,multiSelectionKeyCode:De,panActivationKeyCode:Ce,zoomActivationKeyCode:ke,onlyRenderVisibleElements:we,defaultViewport:Fn,translateExtent:Pt,minZoom:mn,maxZoom:gt,preventScrolling:wt,zoomOnScroll:Gi,zoomOnPinch:on,zoomOnDoubleClick:Hr,panOnScroll:gn,panOnScrollSpeed:Ar,panOnScrollMode:Vr,panOnDrag:Pl,onPaneClick:sa,onPaneMouseEnter:oa,onPaneMouseMove:Zs,onPaneMouseLeave:li,onPaneScroll:ue,onPaneContextMenu:oe,paneClickDistance:he,nodeClickDistance:xe,onSelectionContextMenu:z,onSelectionStart:W,onSelectionEnd:J,onReconnect:Se,onReconnectStart:je,onReconnectEnd:He,onEdgeContextMenu:Ze,onEdgeDoubleClick:ht,onEdgeMouseEnter:Ve,onEdgeMouseMove:st,onEdgeMouseLeave:Bl,reconnectRadius:jm,defaultMarkerColor:Xs,noDragClassName:Il,noWheelClassName:Ki,noPanClassName:ui,rfId:Js,disableKeyboardA11y:zl,nodeExtent:or,viewport:Bm,onViewportChange:wf}),w.jsx(Fse,{nodes:e,edges:t,defaultNodes:n,defaultEdges:r,onConnect:y,onConnectStart:b,onConnectEnd:S,onClickConnectStart:x,onClickConnectEnd:C,nodesDraggable:Me,autoPanOnNodeFocus:rn,nodesConnectable:sn,nodesFocusable:_n,edgesFocusable:Wt,edgesReconnectable:ft,elementsSelectable:sr,elevateNodesOnSelect:Wi,elevateEdgesOnSelect:Lm,minZoom:mn,maxZoom:gt,nodeExtent:or,onNodesChange:gf,onEdgesChange:Qs,snapToGrid:Te,snapGrid:be,connectionMode:K,translateExtent:Pt,connectOnClick:Bt,defaultEdgeOptions:fi,fitView:Yi,fitViewOptions:ci,onNodesDelete:$,onEdgesDelete:q,onDelete:U,onNodeDragStart:R,onNodeDrag:O,onNodeDragStop:I,onSelectionDrag:F,onSelectionDragStart:B,onSelectionDragStop:j,onMove:h,onMoveStart:p,onMoveEnd:g,noPanClassName:ui,nodeOrigin:pn,rfId:Js,autoPanOnConnect:bf,autoPanOnNodeDrag:Pm,autoPanSpeed:aa,onError:ql,connectionRadius:la,isValidConnection:Mr,selectNodesOnDrag:tt,nodeDragThreshold:Vl,connectionDragThreshold:Hl,onBeforeDelete:L,paneClickDistance:he,debug:ua,ariaLabelConfig:ca}),w.jsx(zse,{onSelectionChange:X}),ye,w.jsx(jse,{proOptions:vf,position:yf}),w.jsx(Ose,{rfId:Js,disableKeyboardA11y:zl})]})})}var cae=X6(uae);function fae(e){const[t,n]=P.useState(e),r=P.useCallback(i=>n(s=>Y6(i,s)),[]);return[t,n,r]}function dae(e){const[t,n]=P.useState(e),r=P.useCallback(i=>n(s=>W6(i,s)),[]);return[t,n,r]}function hae({dimensions:e,lineWidth:t,variant:n,className:r}){return w.jsx("path",{strokeWidth:t,d:`M${e[0]/2} 0 V${e[1]} M0 ${e[1]/2} H${e[0]}`,className:Ut(["react-flow__background-pattern",n,r])})}function pae({radius:e,className:t}){return w.jsx("circle",{cx:e,cy:e,r:e,className:Ut(["react-flow__background-pattern","dots",t])})}var zs;(function(e){e.Lines="lines",e.Dots="dots",e.Cross="cross"})(zs||(zs={}));const mae={[zs.Dots]:1,[zs.Lines]:1,[zs.Cross]:6},gae=e=>({transform:e.transform,patternId:`pattern-${e.rfId}`});function wq({id:e,variant:t=zs.Dots,gap:n=20,size:r,lineWidth:i=1,offset:s=0,color:o,bgColor:l,style:c,className:f,patternClassName:h}){const p=P.useRef(null),{transform:g,patternId:y}=Xe(gae,kt),b=r||mae[t],S=t===zs.Dots,x=t===zs.Cross,C=Array.isArray(n)?n:[n,n],T=[C[0]*g[2]||1,C[1]*g[2]||1],k=b*g[2],A=Array.isArray(s)?s:[s,s],M=x?[k,k]:T,_=[A[0]*g[2]||1+M[0]/2,A[1]*g[2]||1+M[1]/2],R=`${y}${e||""}`;return w.jsxs("svg",{className:Ut(["react-flow__background",f]),style:{...c,...pm,"--xy-background-color-props":l,"--xy-background-pattern-color-props":o},ref:p,"data-testid":"rf__background",children:[w.jsx("pattern",{id:R,x:g[0]%T[0],y:g[1]%T[1],width:T[0],height:T[1],patternUnits:"userSpaceOnUse",patternTransform:`translate(-${_[0]},-${_[1]})`,children:S?w.jsx(pae,{radius:k/2,className:h}):w.jsx(hae,{dimensions:M,lineWidth:i,variant:t,className:h})}),w.jsx("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:`url(#${R})`})]})}wq.displayName="Background";const yae=P.memo(wq);function vae(){return w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32",children:w.jsx("path",{d:"M32 18.133H18.133V32h-4.266V18.133H0v-4.266h13.867V0h4.266v13.867H32z"})})}function bae(){return w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 5",children:w.jsx("path",{d:"M0 0h32v4.2H0z"})})}function xae(){return w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 30",children:w.jsx("path",{d:"M3.692 4.63c0-.53.4-.938.939-.938h5.215V0H4.708C2.13 0 0 2.054 0 4.63v5.216h3.692V4.631zM27.354 0h-5.2v3.692h5.17c.53 0 .984.4.984.939v5.215H32V4.631A4.624 4.624 0 0027.354 0zm.954 24.83c0 .532-.4.94-.939.94h-5.215v3.768h5.215c2.577 0 4.631-2.13 4.631-4.707v-5.139h-3.692v5.139zm-23.677.94c-.531 0-.939-.4-.939-.94v-5.138H0v5.139c0 2.577 2.13 4.707 4.708 4.707h5.138V25.77H4.631z"})})}function wae(){return w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:w.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0 8 0 4.571 3.429 4.571 7.619v3.048H3.048A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047zm4.724-13.866H7.467V7.619c0-2.59 2.133-4.724 4.723-4.724 2.591 0 4.724 2.133 4.724 4.724v3.048z"})})}function Sae(){return w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 25 32",children:w.jsx("path",{d:"M21.333 10.667H19.81V7.619C19.81 3.429 16.38 0 12.19 0c-4.114 1.828-1.37 2.133.305 2.438 1.676.305 4.42 2.59 4.42 5.181v3.048H3.047A3.056 3.056 0 000 13.714v15.238A3.056 3.056 0 003.048 32h18.285a3.056 3.056 0 003.048-3.048V13.714a3.056 3.056 0 00-3.048-3.047zM12.19 24.533a3.056 3.056 0 01-3.047-3.047 3.056 3.056 0 013.047-3.048 3.056 3.056 0 013.048 3.048 3.056 3.056 0 01-3.048 3.047z"})})}function th({children:e,className:t,...n}){return w.jsx("button",{type:"button",className:Ut(["react-flow__controls-button",t]),...n,children:e})}const Eae=e=>({isInteractive:e.nodesDraggable||e.nodesConnectable||e.elementsSelectable,minZoomReached:e.transform[2]<=e.minZoom,maxZoomReached:e.transform[2]>=e.maxZoom,ariaLabelConfig:e.ariaLabelConfig});function Sq({style:e,showZoom:t=!0,showFitView:n=!0,showInteractive:r=!0,fitViewOptions:i,onZoomIn:s,onZoomOut:o,onFitView:l,onInteractiveChange:c,className:f,children:h,position:p="bottom-left",orientation:g="vertical","aria-label":y}){const b=bt(),{isInteractive:S,minZoomReached:x,maxZoomReached:C,ariaLabelConfig:T}=Xe(Eae,kt),{zoomIn:k,zoomOut:A,fitView:M}=Kc(),_=()=>{k(),s?.()},R=()=>{A(),o?.()},O=()=>{M(i),l?.()},I=()=>{b.setState({nodesDraggable:!S,nodesConnectable:!S,elementsSelectable:!S}),c?.(!S)},$=g==="horizontal"?"horizontal":"vertical";return w.jsxs(hm,{className:Ut(["react-flow__controls",$,f]),position:p,style:e,"data-testid":"rf__controls","aria-label":y??T["controls.ariaLabel"],children:[t&&w.jsxs(w.Fragment,{children:[w.jsx(th,{onClick:_,className:"react-flow__controls-zoomin",title:T["controls.zoomIn.ariaLabel"],"aria-label":T["controls.zoomIn.ariaLabel"],disabled:C,children:w.jsx(vae,{})}),w.jsx(th,{onClick:R,className:"react-flow__controls-zoomout",title:T["controls.zoomOut.ariaLabel"],"aria-label":T["controls.zoomOut.ariaLabel"],disabled:x,children:w.jsx(bae,{})})]}),n&&w.jsx(th,{className:"react-flow__controls-fitview",onClick:O,title:T["controls.fitView.ariaLabel"],"aria-label":T["controls.fitView.ariaLabel"],children:w.jsx(xae,{})}),r&&w.jsx(th,{className:"react-flow__controls-interactive",onClick:I,title:T["controls.interactive.ariaLabel"],"aria-label":T["controls.interactive.ariaLabel"],children:S?w.jsx(Sae,{}):w.jsx(wae,{})}),h]})}Sq.displayName="Controls";const Cae=P.memo(Sq);function kae({id:e,x:t,y:n,width:r,height:i,style:s,color:o,strokeColor:l,strokeWidth:c,className:f,borderRadius:h,shapeRendering:p,selected:g,onClick:y}){const{background:b,backgroundColor:S}=s||{},x=o||b||S;return w.jsx("rect",{className:Ut(["react-flow__minimap-node",{selected:g},f]),x:t,y:n,rx:h,ry:h,width:r,height:i,style:{fill:x,stroke:l,strokeWidth:c},shapeRendering:p,onClick:y?C=>y(C,e):void 0})}const Tae=P.memo(kae),Aae=e=>e.nodes.map(t=>t.id),W0=e=>e instanceof Function?e:()=>e;function Mae({nodeStrokeColor:e,nodeColor:t,nodeClassName:n="",nodeBorderRadius:r=5,nodeStrokeWidth:i,nodeComponent:s=Tae,onClick:o}){const l=Xe(Aae,kt),c=W0(t),f=W0(e),h=W0(n),p=typeof window>"u"||window.chrome?"crispEdges":"geometricPrecision";return w.jsx(w.Fragment,{children:l.map(g=>w.jsx(_ae,{id:g,nodeColorFunc:c,nodeStrokeColorFunc:f,nodeClassNameFunc:h,nodeBorderRadius:r,nodeStrokeWidth:i,NodeComponent:s,onClick:o,shapeRendering:p},g))})}function Nae({id:e,nodeColorFunc:t,nodeStrokeColorFunc:n,nodeClassNameFunc:r,nodeBorderRadius:i,nodeStrokeWidth:s,shapeRendering:o,NodeComponent:l,onClick:c}){const{node:f,x:h,y:p,width:g,height:y}=Xe(b=>{const{internals:S}=b.nodeLookup.get(e),x=S.userNode,{x:C,y:T}=S.positionAbsolute,{width:k,height:A}=Fi(x);return{node:x,x:C,y:T,width:k,height:A}},kt);return!f||f.hidden||!C6(f)?null:w.jsx(l,{x:h,y:p,width:g,height:y,style:f.style,selected:!!f.selected,className:r(f),color:t(f),borderRadius:i,strokeColor:n(f),strokeWidth:s,shapeRendering:o,onClick:c,id:f.id})}const _ae=P.memo(Nae);var Rae=P.memo(Mae);const Dae=200,Oae=150,jae=e=>!e.hidden,Lae=e=>{const t={x:-e.transform[0]/e.transform[2],y:-e.transform[1]/e.transform[2],width:e.width/e.transform[2],height:e.height/e.transform[2]};return{viewBB:t,boundingRect:e.nodeLookup.size>0?E6(lf(e.nodeLookup,{filter:jae}),t):t,rfId:e.rfId,panZoom:e.panZoom,translateExtent:e.translateExtent,flowWidth:e.width,flowHeight:e.height,ariaLabelConfig:e.ariaLabelConfig}},Pae="react-flow__minimap-desc";function Eq({style:e,className:t,nodeStrokeColor:n,nodeColor:r,nodeClassName:i="",nodeBorderRadius:s=5,nodeStrokeWidth:o,nodeComponent:l,bgColor:c,maskColor:f,maskStrokeColor:h,maskStrokeWidth:p,position:g="bottom-right",onClick:y,onNodeClick:b,pannable:S=!1,zoomable:x=!1,ariaLabel:C,inversePan:T,zoomStep:k=1,offsetScale:A=5}){const M=bt(),_=P.useRef(null),{boundingRect:R,viewBB:O,rfId:I,panZoom:$,translateExtent:q,flowWidth:U,flowHeight:X,ariaLabelConfig:B}=Xe(Lae,kt),F=e?.width??Dae,j=e?.height??Oae,z=R.width/F,W=R.height/j,J=Math.max(z,W),L=J*F,K=J*j,re=A*J,le=R.x-(L-R.width)/2-re,V=R.y-(K-R.height)/2-re,G=L+re*2,Q=K+re*2,ae=`${Pae}-${I}`,se=P.useRef(0),ge=P.useRef();se.current=J,P.useEffect(()=>{if(_.current&&$)return ge.current=nse({domNode:_.current,panZoom:$,getTransform:()=>M.getState().transform,getViewScale:()=>se.current}),()=>{ge.current?.destroy()}},[$]),P.useEffect(()=>{ge.current?.update({translateExtent:q,width:U,height:X,inversePan:T,pannable:S,zoomStep:k,zoomable:x})},[S,x,T,k,q,U,X]);const Ce=y?Te=>{const[be,we]=ge.current?.pointer(Te)||[0,0];y(Te,{x:be,y:we})}:void 0,De=b?P.useCallback((Te,be)=>{const we=M.getState().nodeLookup.get(be).internals.userNode;b(Te,we)},[]):void 0,ke=C??B["minimap.ariaLabel"];return w.jsx(hm,{position:g,style:{...e,"--xy-minimap-background-color-props":typeof c=="string"?c:void 0,"--xy-minimap-mask-background-color-props":typeof f=="string"?f:void 0,"--xy-minimap-mask-stroke-color-props":typeof h=="string"?h:void 0,"--xy-minimap-mask-stroke-width-props":typeof p=="number"?p*J:void 0,"--xy-minimap-node-background-color-props":typeof r=="string"?r:void 0,"--xy-minimap-node-stroke-color-props":typeof n=="string"?n:void 0,"--xy-minimap-node-stroke-width-props":typeof o=="number"?o:void 0},className:Ut(["react-flow__minimap",t]),"data-testid":"rf__minimap",children:w.jsxs("svg",{width:F,height:j,viewBox:`${le} ${V} ${G} ${Q}`,className:"react-flow__minimap-svg",role:"img","aria-labelledby":ae,ref:_,onClick:Ce,children:[ke&&w.jsx("title",{id:ae,children:ke}),w.jsx(Rae,{onClick:De,nodeColor:r,nodeStrokeColor:n,nodeBorderRadius:s,nodeClassName:i,nodeStrokeWidth:o,nodeComponent:l}),w.jsx("path",{className:"react-flow__minimap-mask",d:`M${le-re},${V-re}h${G+re*2}v${Q+re*2}h${-G-re*2}z
        M${O.x},${O.y}h${O.width}v${O.height}h${-O.width}z`,fillRule:"evenodd",pointerEvents:"none"})]})})}Eq.displayName="MiniMap";const Bae=P.memo(Eq),Iae=e=>t=>e?`${Math.max(1/t.transform[2],1)}`:void 0,zae={[Wo.Line]:"right",[Wo.Handle]:"bottom-right"};function qae({nodeId:e,position:t,variant:n=Wo.Handle,className:r,style:i=void 0,children:s,color:o,minWidth:l=10,minHeight:c=10,maxWidth:f=Number.MAX_VALUE,maxHeight:h=Number.MAX_VALUE,keepAspectRatio:p=!1,resizeDirection:g,autoScale:y=!0,shouldResize:b,onResizeStart:S,onResize:x,onResizeEnd:C}){const T=eq(),k=typeof e=="string"?e:T,A=bt(),M=P.useRef(null),_=n===Wo.Handle,R=Xe(P.useCallback(Iae(_&&y),[_,y]),kt),O=P.useRef(null),I=t??zae[n];P.useEffect(()=>{if(!(!M.current||!k))return O.current||(O.current=xse({domNode:M.current,nodeId:k,getStoreItems:()=>{const{nodeLookup:q,transform:U,snapGrid:X,snapToGrid:B,nodeOrigin:F,domNode:j}=A.getState();return{nodeLookup:q,transform:U,snapGrid:X,snapToGrid:B,nodeOrigin:F,paneDomNode:j}},onChange:(q,U)=>{const{triggerNodeChanges:X,nodeLookup:B,parentLookup:F,nodeOrigin:j}=A.getState(),z=[],W={x:q.x,y:q.y},J=B.get(k);if(J&&J.expandParent&&J.parentId){const L=J.origin??j,K=q.width??J.measured.width??0,re=q.height??J.measured.height??0,le={id:J.id,parentId:J.parentId,rect:{width:K,height:re,...k6({x:q.x??J.position.x,y:q.y??J.position.y},{width:K,height:re},J.parentId,B,L)}},V=bk([le],B,F,j);z.push(...V),W.x=q.x?Math.max(L[0]*K,q.x):void 0,W.y=q.y?Math.max(L[1]*re,q.y):void 0}if(W.x!==void 0&&W.y!==void 0){const L={id:k,type:"position",position:{...W}};z.push(L)}if(q.width!==void 0&&q.height!==void 0){const K={id:k,type:"dimensions",resizing:!0,setAttributes:g?g==="horizontal"?"width":"height":!0,dimensions:{width:q.width,height:q.height}};z.push(K)}for(const L of U){const K={...L,type:"position"};z.push(K)}X(z)},onEnd:({width:q,height:U})=>{const X={id:k,type:"dimensions",resizing:!1,dimensions:{width:q,height:U}};A.getState().triggerNodeChanges([X])}})),O.current.update({controlPosition:I,boundaries:{minWidth:l,minHeight:c,maxWidth:f,maxHeight:h},keepAspectRatio:p,resizeDirection:g,onResizeStart:S,onResize:x,onResizeEnd:C,shouldResize:b}),()=>{O.current?.destroy()}},[I,l,c,f,h,p,S,x,C,b]);const $=I.split("-");return w.jsx("div",{className:Ut(["react-flow__resize-control","nodrag",...$,n,r]),ref:M,style:{...i,scale:R,...o&&{[_?"backgroundColor":"borderColor"]:o}},children:s})}const MD=P.memo(qae);function Vae({nodeId:e,isVisible:t=!0,handleClassName:n,handleStyle:r,lineClassName:i,lineStyle:s,color:o,minWidth:l=10,minHeight:c=10,maxWidth:f=Number.MAX_VALUE,maxHeight:h=Number.MAX_VALUE,keepAspectRatio:p=!1,autoScale:g=!0,shouldResize:y,onResizeStart:b,onResize:S,onResizeEnd:x}){return t?w.jsxs(w.Fragment,{children:[hse.map(C=>w.jsx(MD,{className:i,style:s,nodeId:e,position:C,variant:Wo.Line,color:o,minWidth:l,minHeight:c,maxWidth:f,maxHeight:h,onResizeStart:b,keepAspectRatio:p,autoScale:g,shouldResize:y,onResize:S,onResizeEnd:x},C)),dse.map(C=>w.jsx(MD,{className:n,style:r,nodeId:e,position:C,color:o,minWidth:l,minHeight:c,maxWidth:f,maxHeight:h,onResizeStart:b,keepAspectRatio:p,autoScale:g,shouldResize:y,onResize:S,onResizeEnd:x},C))]}):null}function Hae(e,t){if(e.match(/^[a-z]+:\/\//i))return e;if(e.match(/^\/\//))return window.location.protocol+e;if(e.match(/^[a-z]+:/i))return e;const n=document.implementation.createHTMLDocument(),r=n.createElement("base"),i=n.createElement("a");return n.head.appendChild(r),n.body.appendChild(i),t&&(r.href=t),i.href=e,i.href}const Fae=(()=>{let e=0;const t=()=>`0000${(Math.random()*36**4<<0).toString(36)}`.slice(-4);return()=>(e+=1,`u${t()}${e}`)})();function qs(e){const t=[];for(let n=0,r=e.length;n<r;n++)t.push(e[n]);return t}let Ka=null;function Cq(e={}){return Ka||(e.includeStyleProperties?(Ka=e.includeStyleProperties,Ka):(Ka=qs(window.getComputedStyle(document.documentElement)),Ka))}function Ap(e,t){const r=(e.ownerDocument.defaultView||window).getComputedStyle(e).getPropertyValue(t);return r?parseFloat(r.replace("px","")):0}function Uae(e){const t=Ap(e,"border-left-width"),n=Ap(e,"border-right-width");return e.clientWidth+t+n}function $ae(e){const t=Ap(e,"border-top-width"),n=Ap(e,"border-bottom-width");return e.clientHeight+t+n}function kq(e,t={}){const n=t.width||Uae(e),r=t.height||$ae(e);return{width:n,height:r}}function Gae(){let e,t;try{t=process}catch{}const n=t&&t.env?t.env.devicePixelRatio:null;return n&&(e=parseInt(n,10),Number.isNaN(e)&&(e=1)),e||window.devicePixelRatio||1}const Qn=16384;function Kae(e){(e.width>Qn||e.height>Qn)&&(e.width>Qn&&e.height>Qn?e.width>e.height?(e.height*=Qn/e.width,e.width=Qn):(e.width*=Qn/e.height,e.height=Qn):e.width>Qn?(e.height*=Qn/e.width,e.width=Qn):(e.width*=Qn/e.height,e.height=Qn))}function Mp(e){return new Promise((t,n)=>{const r=new Image;r.onload=()=>{r.decode().then(()=>{requestAnimationFrame(()=>t(r))})},r.onerror=n,r.crossOrigin="anonymous",r.decoding="async",r.src=e})}async function Yae(e){return Promise.resolve().then(()=>new XMLSerializer().serializeToString(e)).then(encodeURIComponent).then(t=>`data:image/svg+xml;charset=utf-8,${t}`)}async function Wae(e,t,n){const r="http://www.w3.org/2000/svg",i=document.createElementNS(r,"svg"),s=document.createElementNS(r,"foreignObject");return i.setAttribute("width",`${t}`),i.setAttribute("height",`${n}`),i.setAttribute("viewBox",`0 0 ${t} ${n}`),s.setAttribute("width","100%"),s.setAttribute("height","100%"),s.setAttribute("x","0"),s.setAttribute("y","0"),s.setAttribute("externalResourcesRequired","true"),i.appendChild(s),s.appendChild(e),Yae(i)}const Vn=(e,t)=>{if(e instanceof t)return!0;const n=Object.getPrototypeOf(e);return n===null?!1:n.constructor.name===t.name||Vn(n,t)};function Xae(e){const t=e.getPropertyValue("content");return`${e.cssText} content: '${t.replace(/'|"/g,"")}';`}function Zae(e,t){return Cq(t).map(n=>{const r=e.getPropertyValue(n),i=e.getPropertyPriority(n);return`${n}: ${r}${i?" !important":""};`}).join(" ")}function Qae(e,t,n,r){const i=`.${e}:${t}`,s=n.cssText?Xae(n):Zae(n,r);return document.createTextNode(`${i}{${s}}`)}function ND(e,t,n,r){const i=window.getComputedStyle(e,n),s=i.getPropertyValue("content");if(s===""||s==="none")return;const o=Fae();try{t.className=`${t.className} ${o}`}catch{return}const l=document.createElement("style");l.appendChild(Qae(o,n,i,r)),t.appendChild(l)}function Jae(e,t,n){ND(e,t,":before",n),ND(e,t,":after",n)}const _D="application/font-woff",RD="image/jpeg",ele={woff:_D,woff2:_D,ttf:"application/font-truetype",eot:"application/vnd.ms-fontobject",png:"image/png",jpg:RD,jpeg:RD,gif:"image/gif",tiff:"image/tiff",svg:"image/svg+xml",webp:"image/webp"};function tle(e){const t=/\.([^./]*?)$/g.exec(e);return t?t[1]:""}function wk(e){const t=tle(e).toLowerCase();return ele[t]||""}function nle(e){return e.split(/,/)[1]}function OE(e){return e.search(/^(data:)/)!==-1}function rle(e,t){return`data:${t};base64,${e}`}async function Tq(e,t,n){const r=await fetch(e,t);if(r.status===404)throw new Error(`Resource "${r.url}" not found`);const i=await r.blob();return new Promise((s,o)=>{const l=new FileReader;l.onerror=o,l.onloadend=()=>{try{s(n({res:r,result:l.result}))}catch(c){o(c)}},l.readAsDataURL(i)})}const X0={};function ile(e,t,n){let r=e.replace(/\?.*/,"");return n&&(r=e),/ttf|otf|eot|woff2?/i.test(r)&&(r=r.replace(/.*\//,"")),t?`[${t}]${r}`:r}async function Sk(e,t,n){const r=ile(e,t,n.includeQueryParams);if(X0[r]!=null)return X0[r];n.cacheBust&&(e+=(/\?/.test(e)?"&":"?")+new Date().getTime());let i;try{const s=await Tq(e,n.fetchRequestInit,({res:o,result:l})=>(t||(t=o.headers.get("Content-Type")||""),nle(l)));i=rle(s,t)}catch(s){i=n.imagePlaceholder||"";let o=`Failed to fetch resource: ${e}`;s&&(o=typeof s=="string"?s:s.message),o&&console.warn(o)}return X0[r]=i,i}async function sle(e){const t=e.toDataURL();return t==="data:,"?e.cloneNode(!1):Mp(t)}async function ole(e,t){if(e.currentSrc){const s=document.createElement("canvas"),o=s.getContext("2d");s.width=e.clientWidth,s.height=e.clientHeight,o?.drawImage(e,0,0,s.width,s.height);const l=s.toDataURL();return Mp(l)}const n=e.poster,r=wk(n),i=await Sk(n,r,t);return Mp(i)}async function ale(e,t){var n;try{if(!((n=e?.contentDocument)===null||n===void 0)&&n.body)return await gm(e.contentDocument.body,t,!0)}catch{}return e.cloneNode(!1)}async function lle(e,t){return Vn(e,HTMLCanvasElement)?sle(e):Vn(e,HTMLVideoElement)?ole(e,t):Vn(e,HTMLIFrameElement)?ale(e,t):e.cloneNode(Aq(e))}const ule=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SLOT",Aq=e=>e.tagName!=null&&e.tagName.toUpperCase()==="SVG";async function cle(e,t,n){var r,i;if(Aq(t))return t;let s=[];return ule(e)&&e.assignedNodes?s=qs(e.assignedNodes()):Vn(e,HTMLIFrameElement)&&(!((r=e.contentDocument)===null||r===void 0)&&r.body)?s=qs(e.contentDocument.body.childNodes):s=qs(((i=e.shadowRoot)!==null&&i!==void 0?i:e).childNodes),s.length===0||Vn(e,HTMLVideoElement)||await s.reduce((o,l)=>o.then(()=>gm(l,n)).then(c=>{c&&t.appendChild(c)}),Promise.resolve()),t}function fle(e,t,n){const r=t.style;if(!r)return;const i=window.getComputedStyle(e);i.cssText?(r.cssText=i.cssText,r.transformOrigin=i.transformOrigin):Cq(n).forEach(s=>{let o=i.getPropertyValue(s);s==="font-size"&&o.endsWith("px")&&(o=`${Math.floor(parseFloat(o.substring(0,o.length-2)))-.1}px`),Vn(e,HTMLIFrameElement)&&s==="display"&&o==="inline"&&(o="block"),s==="d"&&t.getAttribute("d")&&(o=`path(${t.getAttribute("d")})`),r.setProperty(s,o,i.getPropertyPriority(s))})}function dle(e,t){Vn(e,HTMLTextAreaElement)&&(t.innerHTML=e.value),Vn(e,HTMLInputElement)&&t.setAttribute("value",e.value)}function hle(e,t){if(Vn(e,HTMLSelectElement)){const n=t,r=Array.from(n.children).find(i=>e.value===i.getAttribute("value"));r&&r.setAttribute("selected","")}}function ple(e,t,n){return Vn(t,Element)&&(fle(e,t,n),Jae(e,t,n),dle(e,t),hle(e,t)),t}async function mle(e,t){const n=e.querySelectorAll?e.querySelectorAll("use"):[];if(n.length===0)return e;const r={};for(let s=0;s<n.length;s++){const l=n[s].getAttribute("xlink:href");if(l){const c=e.querySelector(l),f=document.querySelector(l);!c&&f&&!r[l]&&(r[l]=await gm(f,t,!0))}}const i=Object.values(r);if(i.length){const s="http://www.w3.org/1999/xhtml",o=document.createElementNS(s,"svg");o.setAttribute("xmlns",s),o.style.position="absolute",o.style.width="0",o.style.height="0",o.style.overflow="hidden",o.style.display="none";const l=document.createElementNS(s,"defs");o.appendChild(l);for(let c=0;c<i.length;c++)l.appendChild(i[c]);e.appendChild(o)}return e}async function gm(e,t,n){return!n&&t.filter&&!t.filter(e)?null:Promise.resolve(e).then(r=>lle(r,t)).then(r=>cle(e,r,t)).then(r=>ple(e,r,t)).then(r=>mle(r,t))}const Mq=/url\((['"]?)([^'"]+?)\1\)/g,gle=/url\([^)]+\)\s*format\((["']?)([^"']+)\1\)/g,yle=/src:\s*(?:url\([^)]+\)\s*format\([^)]+\)[,;]\s*)+/g;function vle(e){const t=e.replace(/([.*+?^${}()|\[\]\/\\])/g,"\\$1");return new RegExp(`(url\\(['"]?)(${t})(['"]?\\))`,"g")}function ble(e){const t=[];return e.replace(Mq,(n,r,i)=>(t.push(i),n)),t.filter(n=>!OE(n))}async function xle(e,t,n,r,i){try{const s=n?Hae(t,n):t,o=wk(t);let l;return i||(l=await Sk(s,o,r)),e.replace(vle(t),`$1${l}$3`)}catch{}return e}function wle(e,{preferredFontFormat:t}){return t?e.replace(yle,n=>{for(;;){const[r,,i]=gle.exec(n)||[];if(!i)return"";if(i===t)return`src: ${r};`}}):e}function Nq(e){return e.search(Mq)!==-1}async function _q(e,t,n){if(!Nq(e))return e;const r=wle(e,n);return ble(r).reduce((s,o)=>s.then(l=>xle(l,o,t,n)),Promise.resolve(r))}async function Ya(e,t,n){var r;const i=(r=t.style)===null||r===void 0?void 0:r.getPropertyValue(e);if(i){const s=await _q(i,null,n);return t.style.setProperty(e,s,t.style.getPropertyPriority(e)),!0}return!1}async function Sle(e,t){await Ya("background",e,t)||await Ya("background-image",e,t),await Ya("mask",e,t)||await Ya("-webkit-mask",e,t)||await Ya("mask-image",e,t)||await Ya("-webkit-mask-image",e,t)}async function Ele(e,t){const n=Vn(e,HTMLImageElement);if(!(n&&!OE(e.src))&&!(Vn(e,SVGImageElement)&&!OE(e.href.baseVal)))return;const r=n?e.src:e.href.baseVal,i=await Sk(r,wk(r),t);await new Promise((s,o)=>{e.onload=s,e.onerror=t.onImageErrorHandler?(...c)=>{try{s(t.onImageErrorHandler(...c))}catch(f){o(f)}}:o;const l=e;l.decode&&(l.decode=s),l.loading==="lazy"&&(l.loading="eager"),n?(e.srcset="",e.src=i):e.href.baseVal=i})}async function Cle(e,t){const r=qs(e.childNodes).map(i=>Rq(i,t));await Promise.all(r).then(()=>e)}async function Rq(e,t){Vn(e,Element)&&(await Sle(e,t),await Ele(e,t),await Cle(e,t))}function kle(e,t){const{style:n}=e;t.backgroundColor&&(n.backgroundColor=t.backgroundColor),t.width&&(n.width=`${t.width}px`),t.height&&(n.height=`${t.height}px`);const r=t.style;return r!=null&&Object.keys(r).forEach(i=>{n[i]=r[i]}),e}const DD={};async function OD(e){let t=DD[e];if(t!=null)return t;const r=await(await fetch(e)).text();return t={url:e,cssText:r},DD[e]=t,t}async function jD(e,t){let n=e.cssText;const r=/url\(["']?([^"')]+)["']?\)/g,s=(n.match(/url\([^)]+\)/g)||[]).map(async o=>{let l=o.replace(r,"$1");return l.startsWith("https://")||(l=new URL(l,e.url).href),Tq(l,t.fetchRequestInit,({result:c})=>(n=n.replace(o,`url(${c})`),[o,c]))});return Promise.all(s).then(()=>n)}function LD(e){if(e==null)return[];const t=[],n=/(\/\*[\s\S]*?\*\/)/gi;let r=e.replace(n,"");const i=new RegExp("((@.*?keyframes [\\s\\S]*?){([\\s\\S]*?}\\s*?)})","gi");for(;;){const c=i.exec(r);if(c===null)break;t.push(c[0])}r=r.replace(i,"");const s=/@import[\s\S]*?url\([^)]*\)[\s\S]*?;/gi,o="((\\s*?(?:\\/\\*[\\s\\S]*?\\*\\/)?\\s*?@media[\\s\\S]*?){([\\s\\S]*?)}\\s*?})|(([\\s\\S]*?){([\\s\\S]*?)})",l=new RegExp(o,"gi");for(;;){let c=s.exec(r);if(c===null){if(c=l.exec(r),c===null)break;s.lastIndex=l.lastIndex}else l.lastIndex=s.lastIndex;t.push(c[0])}return t}async function Tle(e,t){const n=[],r=[];return e.forEach(i=>{if("cssRules"in i)try{qs(i.cssRules||[]).forEach((s,o)=>{if(s.type===CSSRule.IMPORT_RULE){let l=o+1;const c=s.href,f=OD(c).then(h=>jD(h,t)).then(h=>LD(h).forEach(p=>{try{i.insertRule(p,p.startsWith("@import")?l+=1:i.cssRules.length)}catch(g){console.error("Error inserting rule from remote css",{rule:p,error:g})}})).catch(h=>{console.error("Error loading remote css",h.toString())});r.push(f)}})}catch(s){const o=e.find(l=>l.href==null)||document.styleSheets[0];i.href!=null&&r.push(OD(i.href).then(l=>jD(l,t)).then(l=>LD(l).forEach(c=>{o.insertRule(c,o.cssRules.length)})).catch(l=>{console.error("Error loading remote stylesheet",l)})),console.error("Error inlining remote css file",s)}}),Promise.all(r).then(()=>(e.forEach(i=>{if("cssRules"in i)try{qs(i.cssRules||[]).forEach(s=>{n.push(s)})}catch(s){console.error(`Error while reading CSS rules from ${i.href}`,s)}}),n))}function Ale(e){return e.filter(t=>t.type===CSSRule.FONT_FACE_RULE).filter(t=>Nq(t.style.getPropertyValue("src")))}async function Mle(e,t){if(e.ownerDocument==null)throw new Error("Provided element is not within a Document");const n=qs(e.ownerDocument.styleSheets),r=await Tle(n,t);return Ale(r)}function Dq(e){return e.trim().replace(/["']/g,"")}function Nle(e){const t=new Set;function n(r){(r.style.fontFamily||getComputedStyle(r).fontFamily).split(",").forEach(s=>{t.add(Dq(s))}),Array.from(r.children).forEach(s=>{s instanceof HTMLElement&&n(s)})}return n(e),t}async function _le(e,t){const n=await Mle(e,t),r=Nle(e);return(await Promise.all(n.filter(s=>r.has(Dq(s.style.fontFamily))).map(s=>{const o=s.parentStyleSheet?s.parentStyleSheet.href:null;return _q(s.cssText,o,t)}))).join(`
`)}async function Rle(e,t){const n=t.fontEmbedCSS!=null?t.fontEmbedCSS:t.skipFonts?null:await _le(e,t);if(n){const r=document.createElement("style"),i=document.createTextNode(n);r.appendChild(i),e.firstChild?e.insertBefore(r,e.firstChild):e.appendChild(r)}}async function Oq(e,t={}){const{width:n,height:r}=kq(e,t),i=await gm(e,t,!0);return await Rle(i,t),await Rq(i,t),kle(i,t),await Wae(i,n,r)}async function jq(e,t={}){const{width:n,height:r}=kq(e,t),i=await Oq(e,t),s=await Mp(i),o=document.createElement("canvas"),l=o.getContext("2d"),c=t.pixelRatio||Gae(),f=t.canvasWidth||n,h=t.canvasHeight||r;return o.width=f*c,o.height=h*c,t.skipAutoScale||Kae(o),o.style.width=`${f}`,o.style.height=`${h}`,t.backgroundColor&&(l.fillStyle=t.backgroundColor,l.fillRect(0,0,o.width,o.height)),l.drawImage(s,0,0,o.width,o.height),o}async function Dle(e,t={}){return(await jq(e,t)).toDataURL()}async function Ole(e,t={}){return(await jq(e,t)).toDataURL("image/jpeg",t.quality||1)}function Ek(e){throw new Error('Could not dynamically require "'+e+'". Please configure the dynamicRequireTargets or/and ignoreDynamicRequires option of @rollup/plugin-commonjs appropriately for this require call to work.')}var Z0,PD;function jle(){if(PD)return Z0;PD=1;function e(){this.__data__=[],this.size=0}return Z0=e,Z0}var Q0,BD;function Rl(){if(BD)return Q0;BD=1;function e(t,n){return t===n||t!==t&&n!==n}return Q0=e,Q0}var J0,ID;function ym(){if(ID)return J0;ID=1;var e=Rl();function t(n,r){for(var i=n.length;i--;)if(e(n[i][0],r))return i;return-1}return J0=t,J0}var ev,zD;function Lle(){if(zD)return ev;zD=1;var e=ym(),t=Array.prototype,n=t.splice;function r(i){var s=this.__data__,o=e(s,i);if(o<0)return!1;var l=s.length-1;return o==l?s.pop():n.call(s,o,1),--this.size,!0}return ev=r,ev}var tv,qD;function Ple(){if(qD)return tv;qD=1;var e=ym();function t(n){var r=this.__data__,i=e(r,n);return i<0?void 0:r[i][1]}return tv=t,tv}var nv,VD;function Ble(){if(VD)return nv;VD=1;var e=ym();function t(n){return e(this.__data__,n)>-1}return nv=t,nv}var rv,HD;function Ile(){if(HD)return rv;HD=1;var e=ym();function t(n,r){var i=this.__data__,s=e(i,n);return s<0?(++this.size,i.push([n,r])):i[s][1]=r,this}return rv=t,rv}var iv,FD;function vm(){if(FD)return iv;FD=1;var e=jle(),t=Lle(),n=Ple(),r=Ble(),i=Ile();function s(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var f=o[l];this.set(f[0],f[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,iv=s,iv}var sv,UD;function zle(){if(UD)return sv;UD=1;var e=vm();function t(){this.__data__=new e,this.size=0}return sv=t,sv}var ov,$D;function qle(){if($D)return ov;$D=1;function e(t){var n=this.__data__,r=n.delete(t);return this.size=n.size,r}return ov=e,ov}var av,GD;function Vle(){if(GD)return av;GD=1;function e(t){return this.__data__.get(t)}return av=e,av}var lv,KD;function Hle(){if(KD)return lv;KD=1;function e(t){return this.__data__.has(t)}return lv=e,lv}var uv,YD;function Lq(){if(YD)return uv;YD=1;var e=typeof _d=="object"&&_d&&_d.Object===Object&&_d;return uv=e,uv}var cv,WD;function qr(){if(WD)return cv;WD=1;var e=Lq(),t=typeof self=="object"&&self&&self.Object===Object&&self,n=e||t||Function("return this")();return cv=n,cv}var fv,XD;function Dl(){if(XD)return fv;XD=1;var e=qr(),t=e.Symbol;return fv=t,fv}var dv,ZD;function Fle(){if(ZD)return dv;ZD=1;var e=Dl(),t=Object.prototype,n=t.hasOwnProperty,r=t.toString,i=e?e.toStringTag:void 0;function s(o){var l=n.call(o,i),c=o[i];try{o[i]=void 0;var f=!0}catch{}var h=r.call(o);return f&&(l?o[i]=c:delete o[i]),h}return dv=s,dv}var hv,QD;function Ule(){if(QD)return hv;QD=1;var e=Object.prototype,t=e.toString;function n(r){return t.call(r)}return hv=n,hv}var pv,JD;function ta(){if(JD)return pv;JD=1;var e=Dl(),t=Fle(),n=Ule(),r="[object Null]",i="[object Undefined]",s=e?e.toStringTag:void 0;function o(l){return l==null?l===void 0?i:r:s&&s in Object(l)?t(l):n(l)}return pv=o,pv}var mv,eO;function kr(){if(eO)return mv;eO=1;function e(t){var n=typeof t;return t!=null&&(n=="object"||n=="function")}return mv=e,mv}var gv,tO;function ff(){if(tO)return gv;tO=1;var e=ta(),t=kr(),n="[object AsyncFunction]",r="[object Function]",i="[object GeneratorFunction]",s="[object Proxy]";function o(l){if(!t(l))return!1;var c=e(l);return c==r||c==i||c==n||c==s}return gv=o,gv}var yv,nO;function $le(){if(nO)return yv;nO=1;var e=qr(),t=e["__core-js_shared__"];return yv=t,yv}var vv,rO;function Gle(){if(rO)return vv;rO=1;var e=$le(),t=(function(){var r=/[^.]+$/.exec(e&&e.keys&&e.keys.IE_PROTO||"");return r?"Symbol(src)_1."+r:""})();function n(r){return!!t&&t in r}return vv=n,vv}var bv,iO;function Pq(){if(iO)return bv;iO=1;var e=Function.prototype,t=e.toString;function n(r){if(r!=null){try{return t.call(r)}catch{}try{return r+""}catch{}}return""}return bv=n,bv}var xv,sO;function Kle(){if(sO)return xv;sO=1;var e=ff(),t=Gle(),n=kr(),r=Pq(),i=/[\\^$.*+?()[\]{}|]/g,s=/^\[object .+?Constructor\]$/,o=Function.prototype,l=Object.prototype,c=o.toString,f=l.hasOwnProperty,h=RegExp("^"+c.call(f).replace(i,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(g){if(!n(g)||t(g))return!1;var y=e(g)?h:s;return y.test(r(g))}return xv=p,xv}var wv,oO;function Yle(){if(oO)return wv;oO=1;function e(t,n){return t?.[n]}return wv=e,wv}var Sv,aO;function na(){if(aO)return Sv;aO=1;var e=Kle(),t=Yle();function n(r,i){var s=t(r,i);return e(s)?s:void 0}return Sv=n,Sv}var Ev,lO;function Ck(){if(lO)return Ev;lO=1;var e=na(),t=qr(),n=e(t,"Map");return Ev=n,Ev}var Cv,uO;function bm(){if(uO)return Cv;uO=1;var e=na(),t=e(Object,"create");return Cv=t,Cv}var kv,cO;function Wle(){if(cO)return kv;cO=1;var e=bm();function t(){this.__data__=e?e(null):{},this.size=0}return kv=t,kv}var Tv,fO;function Xle(){if(fO)return Tv;fO=1;function e(t){var n=this.has(t)&&delete this.__data__[t];return this.size-=n?1:0,n}return Tv=e,Tv}var Av,dO;function Zle(){if(dO)return Av;dO=1;var e=bm(),t="__lodash_hash_undefined__",n=Object.prototype,r=n.hasOwnProperty;function i(s){var o=this.__data__;if(e){var l=o[s];return l===t?void 0:l}return r.call(o,s)?o[s]:void 0}return Av=i,Av}var Mv,hO;function Qle(){if(hO)return Mv;hO=1;var e=bm(),t=Object.prototype,n=t.hasOwnProperty;function r(i){var s=this.__data__;return e?s[i]!==void 0:n.call(s,i)}return Mv=r,Mv}var Nv,pO;function Jle(){if(pO)return Nv;pO=1;var e=bm(),t="__lodash_hash_undefined__";function n(r,i){var s=this.__data__;return this.size+=this.has(r)?0:1,s[r]=e&&i===void 0?t:i,this}return Nv=n,Nv}var _v,mO;function eue(){if(mO)return _v;mO=1;var e=Wle(),t=Xle(),n=Zle(),r=Qle(),i=Jle();function s(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var f=o[l];this.set(f[0],f[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,_v=s,_v}var Rv,gO;function tue(){if(gO)return Rv;gO=1;var e=eue(),t=vm(),n=Ck();function r(){this.size=0,this.__data__={hash:new e,map:new(n||t),string:new e}}return Rv=r,Rv}var Dv,yO;function nue(){if(yO)return Dv;yO=1;function e(t){var n=typeof t;return n=="string"||n=="number"||n=="symbol"||n=="boolean"?t!=="__proto__":t===null}return Dv=e,Dv}var Ov,vO;function xm(){if(vO)return Ov;vO=1;var e=nue();function t(n,r){var i=n.__data__;return e(r)?i[typeof r=="string"?"string":"hash"]:i.map}return Ov=t,Ov}var jv,bO;function rue(){if(bO)return jv;bO=1;var e=xm();function t(n){var r=e(this,n).delete(n);return this.size-=r?1:0,r}return jv=t,jv}var Lv,xO;function iue(){if(xO)return Lv;xO=1;var e=xm();function t(n){return e(this,n).get(n)}return Lv=t,Lv}var Pv,wO;function sue(){if(wO)return Pv;wO=1;var e=xm();function t(n){return e(this,n).has(n)}return Pv=t,Pv}var Bv,SO;function oue(){if(SO)return Bv;SO=1;var e=xm();function t(n,r){var i=e(this,n),s=i.size;return i.set(n,r),this.size+=i.size==s?0:1,this}return Bv=t,Bv}var Iv,EO;function kk(){if(EO)return Iv;EO=1;var e=tue(),t=rue(),n=iue(),r=sue(),i=oue();function s(o){var l=-1,c=o==null?0:o.length;for(this.clear();++l<c;){var f=o[l];this.set(f[0],f[1])}}return s.prototype.clear=e,s.prototype.delete=t,s.prototype.get=n,s.prototype.has=r,s.prototype.set=i,Iv=s,Iv}var zv,CO;function aue(){if(CO)return zv;CO=1;var e=vm(),t=Ck(),n=kk(),r=200;function i(s,o){var l=this.__data__;if(l instanceof e){var c=l.__data__;if(!t||c.length<r-1)return c.push([s,o]),this.size=++l.size,this;l=this.__data__=new n(c)}return l.set(s,o),this.size=l.size,this}return zv=i,zv}var qv,kO;function wm(){if(kO)return qv;kO=1;var e=vm(),t=zle(),n=qle(),r=Vle(),i=Hle(),s=aue();function o(l){var c=this.__data__=new e(l);this.size=c.size}return o.prototype.clear=t,o.prototype.delete=n,o.prototype.get=r,o.prototype.has=i,o.prototype.set=s,qv=o,qv}var Vv,TO;function Tk(){if(TO)return Vv;TO=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i&&n(t[r],r,t)!==!1;);return t}return Vv=e,Vv}var Hv,AO;function Bq(){if(AO)return Hv;AO=1;var e=na(),t=(function(){try{var n=e(Object,"defineProperty");return n({},"",{}),n}catch{}})();return Hv=t,Hv}var Fv,MO;function Sm(){if(MO)return Fv;MO=1;var e=Bq();function t(n,r,i){r=="__proto__"&&e?e(n,r,{configurable:!0,enumerable:!0,value:i,writable:!0}):n[r]=i}return Fv=t,Fv}var Uv,NO;function Em(){if(NO)return Uv;NO=1;var e=Sm(),t=Rl(),n=Object.prototype,r=n.hasOwnProperty;function i(s,o,l){var c=s[o];(!(r.call(s,o)&&t(c,l))||l===void 0&&!(o in s))&&e(s,o,l)}return Uv=i,Uv}var $v,_O;function df(){if(_O)return $v;_O=1;var e=Em(),t=Sm();function n(r,i,s,o){var l=!s;s||(s={});for(var c=-1,f=i.length;++c<f;){var h=i[c],p=o?o(s[h],r[h],h,s,r):void 0;p===void 0&&(p=r[h]),l?t(s,h,p):e(s,h,p)}return s}return $v=n,$v}var Gv,RO;function lue(){if(RO)return Gv;RO=1;function e(t,n){for(var r=-1,i=Array(t);++r<t;)i[r]=n(r);return i}return Gv=e,Gv}var Kv,DO;function ai(){if(DO)return Kv;DO=1;function e(t){return t!=null&&typeof t=="object"}return Kv=e,Kv}var Yv,OO;function uue(){if(OO)return Yv;OO=1;var e=ta(),t=ai(),n="[object Arguments]";function r(i){return t(i)&&e(i)==n}return Yv=r,Yv}var Wv,jO;function hf(){if(jO)return Wv;jO=1;var e=uue(),t=ai(),n=Object.prototype,r=n.hasOwnProperty,i=n.propertyIsEnumerable,s=e((function(){return arguments})())?e:function(o){return t(o)&&r.call(o,"callee")&&!i.call(o,"callee")};return Wv=s,Wv}var Xv,LO;function $t(){if(LO)return Xv;LO=1;var e=Array.isArray;return Xv=e,Xv}var Qu={exports:{}},Zv,PO;function cue(){if(PO)return Zv;PO=1;function e(){return!1}return Zv=e,Zv}Qu.exports;var BO;function Ol(){return BO||(BO=1,(function(e,t){var n=qr(),r=cue(),i=t&&!t.nodeType&&t,s=i&&!0&&e&&!e.nodeType&&e,o=s&&s.exports===i,l=o?n.Buffer:void 0,c=l?l.isBuffer:void 0,f=c||r;e.exports=f})(Qu,Qu.exports)),Qu.exports}var Qv,IO;function Cm(){if(IO)return Qv;IO=1;var e=9007199254740991,t=/^(?:0|[1-9]\d*)$/;function n(r,i){var s=typeof r;return i=i??e,!!i&&(s=="number"||s!="symbol"&&t.test(r))&&r>-1&&r%1==0&&r<i}return Qv=n,Qv}var Jv,zO;function Ak(){if(zO)return Jv;zO=1;var e=9007199254740991;function t(n){return typeof n=="number"&&n>-1&&n%1==0&&n<=e}return Jv=t,Jv}var eb,qO;function fue(){if(qO)return eb;qO=1;var e=ta(),t=Ak(),n=ai(),r="[object Arguments]",i="[object Array]",s="[object Boolean]",o="[object Date]",l="[object Error]",c="[object Function]",f="[object Map]",h="[object Number]",p="[object Object]",g="[object RegExp]",y="[object Set]",b="[object String]",S="[object WeakMap]",x="[object ArrayBuffer]",C="[object DataView]",T="[object Float32Array]",k="[object Float64Array]",A="[object Int8Array]",M="[object Int16Array]",_="[object Int32Array]",R="[object Uint8Array]",O="[object Uint8ClampedArray]",I="[object Uint16Array]",$="[object Uint32Array]",q={};q[T]=q[k]=q[A]=q[M]=q[_]=q[R]=q[O]=q[I]=q[$]=!0,q[r]=q[i]=q[x]=q[s]=q[C]=q[o]=q[l]=q[c]=q[f]=q[h]=q[p]=q[g]=q[y]=q[b]=q[S]=!1;function U(X){return n(X)&&t(X.length)&&!!q[e(X)]}return eb=U,eb}var tb,VO;function km(){if(VO)return tb;VO=1;function e(t){return function(n){return t(n)}}return tb=e,tb}var Ju={exports:{}};Ju.exports;var HO;function Mk(){return HO||(HO=1,(function(e,t){var n=Lq(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===r,o=s&&n.process,l=(function(){try{var c=i&&i.require&&i.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}})();e.exports=l})(Ju,Ju.exports)),Ju.exports}var nb,FO;function pf(){if(FO)return nb;FO=1;var e=fue(),t=km(),n=Mk(),r=n&&n.isTypedArray,i=r?t(r):e;return nb=i,nb}var rb,UO;function Iq(){if(UO)return rb;UO=1;var e=lue(),t=hf(),n=$t(),r=Ol(),i=Cm(),s=pf(),o=Object.prototype,l=o.hasOwnProperty;function c(f,h){var p=n(f),g=!p&&t(f),y=!p&&!g&&r(f),b=!p&&!g&&!y&&s(f),S=p||g||y||b,x=S?e(f.length,String):[],C=x.length;for(var T in f)(h||l.call(f,T))&&!(S&&(T=="length"||y&&(T=="offset"||T=="parent")||b&&(T=="buffer"||T=="byteLength"||T=="byteOffset")||i(T,C)))&&x.push(T);return x}return rb=c,rb}var ib,$O;function Tm(){if($O)return ib;$O=1;var e=Object.prototype;function t(n){var r=n&&n.constructor,i=typeof r=="function"&&r.prototype||e;return n===i}return ib=t,ib}var sb,GO;function zq(){if(GO)return sb;GO=1;function e(t,n){return function(r){return t(n(r))}}return sb=e,sb}var ob,KO;function due(){if(KO)return ob;KO=1;var e=zq(),t=e(Object.keys,Object);return ob=t,ob}var ab,YO;function Nk(){if(YO)return ab;YO=1;var e=Tm(),t=due(),n=Object.prototype,r=n.hasOwnProperty;function i(s){if(!e(s))return t(s);var o=[];for(var l in Object(s))r.call(s,l)&&l!="constructor"&&o.push(l);return o}return ab=i,ab}var lb,WO;function Ui(){if(WO)return lb;WO=1;var e=ff(),t=Ak();function n(r){return r!=null&&t(r.length)&&!e(r)}return lb=n,lb}var ub,XO;function Ws(){if(XO)return ub;XO=1;var e=Iq(),t=Nk(),n=Ui();function r(i){return n(i)?e(i):t(i)}return ub=r,ub}var cb,ZO;function hue(){if(ZO)return cb;ZO=1;var e=df(),t=Ws();function n(r,i){return r&&e(i,t(i),r)}return cb=n,cb}var fb,QO;function pue(){if(QO)return fb;QO=1;function e(t){var n=[];if(t!=null)for(var r in Object(t))n.push(r);return n}return fb=e,fb}var db,JO;function mue(){if(JO)return db;JO=1;var e=kr(),t=Tm(),n=pue(),r=Object.prototype,i=r.hasOwnProperty;function s(o){if(!e(o))return n(o);var l=t(o),c=[];for(var f in o)f=="constructor"&&(l||!i.call(o,f))||c.push(f);return c}return db=s,db}var hb,e3;function ra(){if(e3)return hb;e3=1;var e=Iq(),t=mue(),n=Ui();function r(i){return n(i)?e(i,!0):t(i)}return hb=r,hb}var pb,t3;function gue(){if(t3)return pb;t3=1;var e=df(),t=ra();function n(r,i){return r&&e(i,t(i),r)}return pb=n,pb}var ec={exports:{}};ec.exports;var n3;function qq(){return n3||(n3=1,(function(e,t){var n=qr(),r=t&&!t.nodeType&&t,i=r&&!0&&e&&!e.nodeType&&e,s=i&&i.exports===r,o=s?n.Buffer:void 0,l=o?o.allocUnsafe:void 0;function c(f,h){if(h)return f.slice();var p=f.length,g=l?l(p):new f.constructor(p);return f.copy(g),g}e.exports=c})(ec,ec.exports)),ec.exports}var mb,r3;function Vq(){if(r3)return mb;r3=1;function e(t,n){var r=-1,i=t.length;for(n||(n=Array(i));++r<i;)n[r]=t[r];return n}return mb=e,mb}var gb,i3;function Hq(){if(i3)return gb;i3=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,s=0,o=[];++r<i;){var l=t[r];n(l,r,t)&&(o[s++]=l)}return o}return gb=e,gb}var yb,s3;function Fq(){if(s3)return yb;s3=1;function e(){return[]}return yb=e,yb}var vb,o3;function _k(){if(o3)return vb;o3=1;var e=Hq(),t=Fq(),n=Object.prototype,r=n.propertyIsEnumerable,i=Object.getOwnPropertySymbols,s=i?function(o){return o==null?[]:(o=Object(o),e(i(o),function(l){return r.call(o,l)}))}:t;return vb=s,vb}var bb,a3;function yue(){if(a3)return bb;a3=1;var e=df(),t=_k();function n(r,i){return e(r,t(r),i)}return bb=n,bb}var xb,l3;function Rk(){if(l3)return xb;l3=1;function e(t,n){for(var r=-1,i=n.length,s=t.length;++r<i;)t[s+r]=n[r];return t}return xb=e,xb}var wb,u3;function Am(){if(u3)return wb;u3=1;var e=zq(),t=e(Object.getPrototypeOf,Object);return wb=t,wb}var Sb,c3;function Uq(){if(c3)return Sb;c3=1;var e=Rk(),t=Am(),n=_k(),r=Fq(),i=Object.getOwnPropertySymbols,s=i?function(o){for(var l=[];o;)e(l,n(o)),o=t(o);return l}:r;return Sb=s,Sb}var Eb,f3;function vue(){if(f3)return Eb;f3=1;var e=df(),t=Uq();function n(r,i){return e(r,t(r),i)}return Eb=n,Eb}var Cb,d3;function $q(){if(d3)return Cb;d3=1;var e=Rk(),t=$t();function n(r,i,s){var o=i(r);return t(r)?o:e(o,s(r))}return Cb=n,Cb}var kb,h3;function Gq(){if(h3)return kb;h3=1;var e=$q(),t=_k(),n=Ws();function r(i){return e(i,n,t)}return kb=r,kb}var Tb,p3;function bue(){if(p3)return Tb;p3=1;var e=$q(),t=Uq(),n=ra();function r(i){return e(i,n,t)}return Tb=r,Tb}var Ab,m3;function xue(){if(m3)return Ab;m3=1;var e=na(),t=qr(),n=e(t,"DataView");return Ab=n,Ab}var Mb,g3;function wue(){if(g3)return Mb;g3=1;var e=na(),t=qr(),n=e(t,"Promise");return Mb=n,Mb}var Nb,y3;function Kq(){if(y3)return Nb;y3=1;var e=na(),t=qr(),n=e(t,"Set");return Nb=n,Nb}var _b,v3;function Sue(){if(v3)return _b;v3=1;var e=na(),t=qr(),n=e(t,"WeakMap");return _b=n,_b}var Rb,b3;function jl(){if(b3)return Rb;b3=1;var e=xue(),t=Ck(),n=wue(),r=Kq(),i=Sue(),s=ta(),o=Pq(),l="[object Map]",c="[object Object]",f="[object Promise]",h="[object Set]",p="[object WeakMap]",g="[object DataView]",y=o(e),b=o(t),S=o(n),x=o(r),C=o(i),T=s;return(e&&T(new e(new ArrayBuffer(1)))!=g||t&&T(new t)!=l||n&&T(n.resolve())!=f||r&&T(new r)!=h||i&&T(new i)!=p)&&(T=function(k){var A=s(k),M=A==c?k.constructor:void 0,_=M?o(M):"";if(_)switch(_){case y:return g;case b:return l;case S:return f;case x:return h;case C:return p}return A}),Rb=T,Rb}var Db,x3;function Eue(){if(x3)return Db;x3=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r){var i=r.length,s=new r.constructor(i);return i&&typeof r[0]=="string"&&t.call(r,"index")&&(s.index=r.index,s.input=r.input),s}return Db=n,Db}var Ob,w3;function Yq(){if(w3)return Ob;w3=1;var e=qr(),t=e.Uint8Array;return Ob=t,Ob}var jb,S3;function Dk(){if(S3)return jb;S3=1;var e=Yq();function t(n){var r=new n.constructor(n.byteLength);return new e(r).set(new e(n)),r}return jb=t,jb}var Lb,E3;function Cue(){if(E3)return Lb;E3=1;var e=Dk();function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.byteLength)}return Lb=t,Lb}var Pb,C3;function kue(){if(C3)return Pb;C3=1;var e=/\w*$/;function t(n){var r=new n.constructor(n.source,e.exec(n));return r.lastIndex=n.lastIndex,r}return Pb=t,Pb}var Bb,k3;function Tue(){if(k3)return Bb;k3=1;var e=Dl(),t=e?e.prototype:void 0,n=t?t.valueOf:void 0;function r(i){return n?Object(n.call(i)):{}}return Bb=r,Bb}var Ib,T3;function Wq(){if(T3)return Ib;T3=1;var e=Dk();function t(n,r){var i=r?e(n.buffer):n.buffer;return new n.constructor(i,n.byteOffset,n.length)}return Ib=t,Ib}var zb,A3;function Aue(){if(A3)return zb;A3=1;var e=Dk(),t=Cue(),n=kue(),r=Tue(),i=Wq(),s="[object Boolean]",o="[object Date]",l="[object Map]",c="[object Number]",f="[object RegExp]",h="[object Set]",p="[object String]",g="[object Symbol]",y="[object ArrayBuffer]",b="[object DataView]",S="[object Float32Array]",x="[object Float64Array]",C="[object Int8Array]",T="[object Int16Array]",k="[object Int32Array]",A="[object Uint8Array]",M="[object Uint8ClampedArray]",_="[object Uint16Array]",R="[object Uint32Array]";function O(I,$,q){var U=I.constructor;switch($){case y:return e(I);case s:case o:return new U(+I);case b:return t(I,q);case S:case x:case C:case T:case k:case A:case M:case _:case R:return i(I,q);case l:return new U;case c:case p:return new U(I);case f:return n(I);case h:return new U;case g:return r(I)}}return zb=O,zb}var qb,M3;function Xq(){if(M3)return qb;M3=1;var e=kr(),t=Object.create,n=(function(){function r(){}return function(i){if(!e(i))return{};if(t)return t(i);r.prototype=i;var s=new r;return r.prototype=void 0,s}})();return qb=n,qb}var Vb,N3;function Zq(){if(N3)return Vb;N3=1;var e=Xq(),t=Am(),n=Tm();function r(i){return typeof i.constructor=="function"&&!n(i)?e(t(i)):{}}return Vb=r,Vb}var Hb,_3;function Mue(){if(_3)return Hb;_3=1;var e=jl(),t=ai(),n="[object Map]";function r(i){return t(i)&&e(i)==n}return Hb=r,Hb}var Fb,R3;function Nue(){if(R3)return Fb;R3=1;var e=Mue(),t=km(),n=Mk(),r=n&&n.isMap,i=r?t(r):e;return Fb=i,Fb}var Ub,D3;function _ue(){if(D3)return Ub;D3=1;var e=jl(),t=ai(),n="[object Set]";function r(i){return t(i)&&e(i)==n}return Ub=r,Ub}var $b,O3;function Rue(){if(O3)return $b;O3=1;var e=_ue(),t=km(),n=Mk(),r=n&&n.isSet,i=r?t(r):e;return $b=i,$b}var Gb,j3;function Qq(){if(j3)return Gb;j3=1;var e=wm(),t=Tk(),n=Em(),r=hue(),i=gue(),s=qq(),o=Vq(),l=yue(),c=vue(),f=Gq(),h=bue(),p=jl(),g=Eue(),y=Aue(),b=Zq(),S=$t(),x=Ol(),C=Nue(),T=kr(),k=Rue(),A=Ws(),M=ra(),_=1,R=2,O=4,I="[object Arguments]",$="[object Array]",q="[object Boolean]",U="[object Date]",X="[object Error]",B="[object Function]",F="[object GeneratorFunction]",j="[object Map]",z="[object Number]",W="[object Object]",J="[object RegExp]",L="[object Set]",K="[object String]",re="[object Symbol]",le="[object WeakMap]",V="[object ArrayBuffer]",G="[object DataView]",Q="[object Float32Array]",ae="[object Float64Array]",se="[object Int8Array]",ge="[object Int16Array]",Ce="[object Int32Array]",De="[object Uint8Array]",ke="[object Uint8ClampedArray]",Te="[object Uint16Array]",be="[object Uint32Array]",we={};we[I]=we[$]=we[V]=we[G]=we[q]=we[U]=we[Q]=we[ae]=we[se]=we[ge]=we[Ce]=we[j]=we[z]=we[W]=we[J]=we[L]=we[K]=we[re]=we[De]=we[ke]=we[Te]=we[be]=!0,we[X]=we[B]=we[le]=!1;function tt(Me,rn,sn,_n,pn,Wt){var ft,sr=rn&_,Fn=rn&R,mn=rn&O;if(sn&&(ft=pn?sn(Me,_n,pn,Wt):sn(Me)),ft!==void 0)return ft;if(!T(Me))return Me;var gt=S(Me);if(gt){if(ft=g(Me),!sr)return o(Me,ft)}else{var Pt=p(Me),wt=Pt==B||Pt==F;if(x(Me))return s(Me,sr);if(Pt==W||Pt==I||wt&&!pn){if(ft=Fn||wt?{}:b(Me),!sr)return Fn?c(Me,i(ft,Me)):l(Me,r(ft,Me))}else{if(!we[Pt])return pn?Me:{};ft=y(Me,Pt,sr)}}Wt||(Wt=new e);var or=Wt.get(Me);if(or)return or;Wt.set(Me,ft),k(Me)?Me.forEach(function(on){ft.add(tt(on,rn,sn,on,Me,Wt))}):C(Me)&&Me.forEach(function(on,gn){ft.set(gn,tt(on,rn,sn,gn,Me,Wt))});var Xs=mn?Fn?h:f:Fn?M:A,Gi=gt?void 0:Xs(Me);return t(Gi||Me,function(on,gn){Gi&&(gn=on,on=Me[gn]),n(ft,gn,tt(on,rn,sn,gn,Me,Wt))}),ft}return Gb=tt,Gb}var Kb,L3;function Due(){if(L3)return Kb;L3=1;var e=Qq(),t=4;function n(r){return e(r,t)}return Kb=n,Kb}var Yb,P3;function Ok(){if(P3)return Yb;P3=1;function e(t){return function(){return t}}return Yb=e,Yb}var Wb,B3;function Oue(){if(B3)return Wb;B3=1;function e(t){return function(n,r,i){for(var s=-1,o=Object(n),l=i(n),c=l.length;c--;){var f=l[t?c:++s];if(r(o[f],f,o)===!1)break}return n}}return Wb=e,Wb}var Xb,I3;function jk(){if(I3)return Xb;I3=1;var e=Oue(),t=e();return Xb=t,Xb}var Zb,z3;function Lk(){if(z3)return Zb;z3=1;var e=jk(),t=Ws();function n(r,i){return r&&e(r,i,t)}return Zb=n,Zb}var Qb,q3;function jue(){if(q3)return Qb;q3=1;var e=Ui();function t(n,r){return function(i,s){if(i==null)return i;if(!e(i))return n(i,s);for(var o=i.length,l=r?o:-1,c=Object(i);(r?l--:++l<o)&&s(c[l],l,c)!==!1;);return i}}return Qb=t,Qb}var Jb,V3;function Mm(){if(V3)return Jb;V3=1;var e=Lk(),t=jue(),n=t(e);return Jb=n,Jb}var ex,H3;function ia(){if(H3)return ex;H3=1;function e(t){return t}return ex=e,ex}var tx,F3;function Jq(){if(F3)return tx;F3=1;var e=ia();function t(n){return typeof n=="function"?n:e}return tx=t,tx}var nx,U3;function eV(){if(U3)return nx;U3=1;var e=Tk(),t=Mm(),n=Jq(),r=$t();function i(s,o){var l=r(s)?e:t;return l(s,n(o))}return nx=i,nx}var rx,$3;function tV(){return $3||($3=1,rx=eV()),rx}var ix,G3;function Lue(){if(G3)return ix;G3=1;var e=Mm();function t(n,r){var i=[];return e(n,function(s,o,l){r(s,o,l)&&i.push(s)}),i}return ix=t,ix}var sx,K3;function Pue(){if(K3)return sx;K3=1;var e="__lodash_hash_undefined__";function t(n){return this.__data__.set(n,e),this}return sx=t,sx}var ox,Y3;function Bue(){if(Y3)return ox;Y3=1;function e(t){return this.__data__.has(t)}return ox=e,ox}var ax,W3;function nV(){if(W3)return ax;W3=1;var e=kk(),t=Pue(),n=Bue();function r(i){var s=-1,o=i==null?0:i.length;for(this.__data__=new e;++s<o;)this.add(i[s])}return r.prototype.add=r.prototype.push=t,r.prototype.has=n,ax=r,ax}var lx,X3;function Iue(){if(X3)return lx;X3=1;function e(t,n){for(var r=-1,i=t==null?0:t.length;++r<i;)if(n(t[r],r,t))return!0;return!1}return lx=e,lx}var ux,Z3;function rV(){if(Z3)return ux;Z3=1;function e(t,n){return t.has(n)}return ux=e,ux}var cx,Q3;function iV(){if(Q3)return cx;Q3=1;var e=nV(),t=Iue(),n=rV(),r=1,i=2;function s(o,l,c,f,h,p){var g=c&r,y=o.length,b=l.length;if(y!=b&&!(g&&b>y))return!1;var S=p.get(o),x=p.get(l);if(S&&x)return S==l&&x==o;var C=-1,T=!0,k=c&i?new e:void 0;for(p.set(o,l),p.set(l,o);++C<y;){var A=o[C],M=l[C];if(f)var _=g?f(M,A,C,l,o,p):f(A,M,C,o,l,p);if(_!==void 0){if(_)continue;T=!1;break}if(k){if(!t(l,function(R,O){if(!n(k,O)&&(A===R||h(A,R,c,f,p)))return k.push(O)})){T=!1;break}}else if(!(A===M||h(A,M,c,f,p))){T=!1;break}}return p.delete(o),p.delete(l),T}return cx=s,cx}var fx,J3;function zue(){if(J3)return fx;J3=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i,s){r[++n]=[s,i]}),r}return fx=e,fx}var dx,ej;function Pk(){if(ej)return dx;ej=1;function e(t){var n=-1,r=Array(t.size);return t.forEach(function(i){r[++n]=i}),r}return dx=e,dx}var hx,tj;function que(){if(tj)return hx;tj=1;var e=Dl(),t=Yq(),n=Rl(),r=iV(),i=zue(),s=Pk(),o=1,l=2,c="[object Boolean]",f="[object Date]",h="[object Error]",p="[object Map]",g="[object Number]",y="[object RegExp]",b="[object Set]",S="[object String]",x="[object Symbol]",C="[object ArrayBuffer]",T="[object DataView]",k=e?e.prototype:void 0,A=k?k.valueOf:void 0;function M(_,R,O,I,$,q,U){switch(O){case T:if(_.byteLength!=R.byteLength||_.byteOffset!=R.byteOffset)return!1;_=_.buffer,R=R.buffer;case C:return!(_.byteLength!=R.byteLength||!q(new t(_),new t(R)));case c:case f:case g:return n(+_,+R);case h:return _.name==R.name&&_.message==R.message;case y:case S:return _==R+"";case p:var X=i;case b:var B=I&o;if(X||(X=s),_.size!=R.size&&!B)return!1;var F=U.get(_);if(F)return F==R;I|=l,U.set(_,R);var j=r(X(_),X(R),I,$,q,U);return U.delete(_),j;case x:if(A)return A.call(_)==A.call(R)}return!1}return hx=M,hx}var px,nj;function Vue(){if(nj)return px;nj=1;var e=Gq(),t=1,n=Object.prototype,r=n.hasOwnProperty;function i(s,o,l,c,f,h){var p=l&t,g=e(s),y=g.length,b=e(o),S=b.length;if(y!=S&&!p)return!1;for(var x=y;x--;){var C=g[x];if(!(p?C in o:r.call(o,C)))return!1}var T=h.get(s),k=h.get(o);if(T&&k)return T==o&&k==s;var A=!0;h.set(s,o),h.set(o,s);for(var M=p;++x<y;){C=g[x];var _=s[C],R=o[C];if(c)var O=p?c(R,_,C,o,s,h):c(_,R,C,s,o,h);if(!(O===void 0?_===R||f(_,R,l,c,h):O)){A=!1;break}M||(M=C=="constructor")}if(A&&!M){var I=s.constructor,$=o.constructor;I!=$&&"constructor"in s&&"constructor"in o&&!(typeof I=="function"&&I instanceof I&&typeof $=="function"&&$ instanceof $)&&(A=!1)}return h.delete(s),h.delete(o),A}return px=i,px}var mx,rj;function Hue(){if(rj)return mx;rj=1;var e=wm(),t=iV(),n=que(),r=Vue(),i=jl(),s=$t(),o=Ol(),l=pf(),c=1,f="[object Arguments]",h="[object Array]",p="[object Object]",g=Object.prototype,y=g.hasOwnProperty;function b(S,x,C,T,k,A){var M=s(S),_=s(x),R=M?h:i(S),O=_?h:i(x);R=R==f?p:R,O=O==f?p:O;var I=R==p,$=O==p,q=R==O;if(q&&o(S)){if(!o(x))return!1;M=!0,I=!1}if(q&&!I)return A||(A=new e),M||l(S)?t(S,x,C,T,k,A):n(S,x,R,C,T,k,A);if(!(C&c)){var U=I&&y.call(S,"__wrapped__"),X=$&&y.call(x,"__wrapped__");if(U||X){var B=U?S.value():S,F=X?x.value():x;return A||(A=new e),k(B,F,C,T,A)}}return q?(A||(A=new e),r(S,x,C,T,k,A)):!1}return mx=b,mx}var gx,ij;function sV(){if(ij)return gx;ij=1;var e=Hue(),t=ai();function n(r,i,s,o,l){return r===i?!0:r==null||i==null||!t(r)&&!t(i)?r!==r&&i!==i:e(r,i,s,o,n,l)}return gx=n,gx}var yx,sj;function Fue(){if(sj)return yx;sj=1;var e=wm(),t=sV(),n=1,r=2;function i(s,o,l,c){var f=l.length,h=f,p=!c;if(s==null)return!h;for(s=Object(s);f--;){var g=l[f];if(p&&g[2]?g[1]!==s[g[0]]:!(g[0]in s))return!1}for(;++f<h;){g=l[f];var y=g[0],b=s[y],S=g[1];if(p&&g[2]){if(b===void 0&&!(y in s))return!1}else{var x=new e;if(c)var C=c(b,S,y,s,o,x);if(!(C===void 0?t(S,b,n|r,c,x):C))return!1}}return!0}return yx=i,yx}var vx,oj;function oV(){if(oj)return vx;oj=1;var e=kr();function t(n){return n===n&&!e(n)}return vx=t,vx}var bx,aj;function Uue(){if(aj)return bx;aj=1;var e=oV(),t=Ws();function n(r){for(var i=t(r),s=i.length;s--;){var o=i[s],l=r[o];i[s]=[o,l,e(l)]}return i}return bx=n,bx}var xx,lj;function aV(){if(lj)return xx;lj=1;function e(t,n){return function(r){return r==null?!1:r[t]===n&&(n!==void 0||t in Object(r))}}return xx=e,xx}var wx,uj;function $ue(){if(uj)return wx;uj=1;var e=Fue(),t=Uue(),n=aV();function r(i){var s=t(i);return s.length==1&&s[0][2]?n(s[0][0],s[0][1]):function(o){return o===i||e(o,i,s)}}return wx=r,wx}var Sx,cj;function Ll(){if(cj)return Sx;cj=1;var e=ta(),t=ai(),n="[object Symbol]";function r(i){return typeof i=="symbol"||t(i)&&e(i)==n}return Sx=r,Sx}var Ex,fj;function Bk(){if(fj)return Ex;fj=1;var e=$t(),t=Ll(),n=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,r=/^\w*$/;function i(s,o){if(e(s))return!1;var l=typeof s;return l=="number"||l=="symbol"||l=="boolean"||s==null||t(s)?!0:r.test(s)||!n.test(s)||o!=null&&s in Object(o)}return Ex=i,Ex}var Cx,dj;function Gue(){if(dj)return Cx;dj=1;var e=kk(),t="Expected a function";function n(r,i){if(typeof r!="function"||i!=null&&typeof i!="function")throw new TypeError(t);var s=function(){var o=arguments,l=i?i.apply(this,o):o[0],c=s.cache;if(c.has(l))return c.get(l);var f=r.apply(this,o);return s.cache=c.set(l,f)||c,f};return s.cache=new(n.Cache||e),s}return n.Cache=e,Cx=n,Cx}var kx,hj;function Kue(){if(hj)return kx;hj=1;var e=Gue(),t=500;function n(r){var i=e(r,function(o){return s.size===t&&s.clear(),o}),s=i.cache;return i}return kx=n,kx}var Tx,pj;function Yue(){if(pj)return Tx;pj=1;var e=Kue(),t=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,n=/\\(\\)?/g,r=e(function(i){var s=[];return i.charCodeAt(0)===46&&s.push(""),i.replace(t,function(o,l,c,f){s.push(c?f.replace(n,"$1"):l||o)}),s});return Tx=r,Tx}var Ax,mj;function Nm(){if(mj)return Ax;mj=1;function e(t,n){for(var r=-1,i=t==null?0:t.length,s=Array(i);++r<i;)s[r]=n(t[r],r,t);return s}return Ax=e,Ax}var Mx,gj;function Wue(){if(gj)return Mx;gj=1;var e=Dl(),t=Nm(),n=$t(),r=Ll(),i=e?e.prototype:void 0,s=i?i.toString:void 0;function o(l){if(typeof l=="string")return l;if(n(l))return t(l,o)+"";if(r(l))return s?s.call(l):"";var c=l+"";return c=="0"&&1/l==-1/0?"-0":c}return Mx=o,Mx}var Nx,yj;function lV(){if(yj)return Nx;yj=1;var e=Wue();function t(n){return n==null?"":e(n)}return Nx=t,Nx}var _x,vj;function _m(){if(vj)return _x;vj=1;var e=$t(),t=Bk(),n=Yue(),r=lV();function i(s,o){return e(s)?s:t(s,o)?[s]:n(r(s))}return _x=i,_x}var Rx,bj;function mf(){if(bj)return Rx;bj=1;var e=Ll();function t(n){if(typeof n=="string"||e(n))return n;var r=n+"";return r=="0"&&1/n==-1/0?"-0":r}return Rx=t,Rx}var Dx,xj;function Rm(){if(xj)return Dx;xj=1;var e=_m(),t=mf();function n(r,i){i=e(i,r);for(var s=0,o=i.length;r!=null&&s<o;)r=r[t(i[s++])];return s&&s==o?r:void 0}return Dx=n,Dx}var Ox,wj;function Xue(){if(wj)return Ox;wj=1;var e=Rm();function t(n,r,i){var s=n==null?void 0:e(n,r);return s===void 0?i:s}return Ox=t,Ox}var jx,Sj;function Zue(){if(Sj)return jx;Sj=1;function e(t,n){return t!=null&&n in Object(t)}return jx=e,jx}var Lx,Ej;function uV(){if(Ej)return Lx;Ej=1;var e=_m(),t=hf(),n=$t(),r=Cm(),i=Ak(),s=mf();function o(l,c,f){c=e(c,l);for(var h=-1,p=c.length,g=!1;++h<p;){var y=s(c[h]);if(!(g=l!=null&&f(l,y)))break;l=l[y]}return g||++h!=p?g:(p=l==null?0:l.length,!!p&&i(p)&&r(y,p)&&(n(l)||t(l)))}return Lx=o,Lx}var Px,Cj;function cV(){if(Cj)return Px;Cj=1;var e=Zue(),t=uV();function n(r,i){return r!=null&&t(r,i,e)}return Px=n,Px}var Bx,kj;function Que(){if(kj)return Bx;kj=1;var e=sV(),t=Xue(),n=cV(),r=Bk(),i=oV(),s=aV(),o=mf(),l=1,c=2;function f(h,p){return r(h)&&i(p)?s(o(h),p):function(g){var y=t(g,h);return y===void 0&&y===p?n(g,h):e(p,y,l|c)}}return Bx=f,Bx}var Ix,Tj;function fV(){if(Tj)return Ix;Tj=1;function e(t){return function(n){return n?.[t]}}return Ix=e,Ix}var zx,Aj;function Jue(){if(Aj)return zx;Aj=1;var e=Rm();function t(n){return function(r){return e(r,n)}}return zx=t,zx}var qx,Mj;function ece(){if(Mj)return qx;Mj=1;var e=fV(),t=Jue(),n=Bk(),r=mf();function i(s){return n(s)?e(r(s)):t(s)}return qx=i,qx}var Vx,Nj;function $i(){if(Nj)return Vx;Nj=1;var e=$ue(),t=Que(),n=ia(),r=$t(),i=ece();function s(o){return typeof o=="function"?o:o==null?n:typeof o=="object"?r(o)?t(o[0],o[1]):e(o):i(o)}return Vx=s,Vx}var Hx,_j;function dV(){if(_j)return Hx;_j=1;var e=Hq(),t=Lue(),n=$i(),r=$t();function i(s,o){var l=r(s)?e:t;return l(s,n(o,3))}return Hx=i,Hx}var Fx,Rj;function tce(){if(Rj)return Fx;Rj=1;var e=Object.prototype,t=e.hasOwnProperty;function n(r,i){return r!=null&&t.call(r,i)}return Fx=n,Fx}var Ux,Dj;function hV(){if(Dj)return Ux;Dj=1;var e=tce(),t=uV();function n(r,i){return r!=null&&t(r,i,e)}return Ux=n,Ux}var $x,Oj;function nce(){if(Oj)return $x;Oj=1;var e=Nk(),t=jl(),n=hf(),r=$t(),i=Ui(),s=Ol(),o=Tm(),l=pf(),c="[object Map]",f="[object Set]",h=Object.prototype,p=h.hasOwnProperty;function g(y){if(y==null)return!0;if(i(y)&&(r(y)||typeof y=="string"||typeof y.splice=="function"||s(y)||l(y)||n(y)))return!y.length;var b=t(y);if(b==c||b==f)return!y.size;if(o(y))return!e(y).length;for(var S in y)if(p.call(y,S))return!1;return!0}return $x=g,$x}var Gx,jj;function pV(){if(jj)return Gx;jj=1;function e(t){return t===void 0}return Gx=e,Gx}var Kx,Lj;function mV(){if(Lj)return Kx;Lj=1;var e=Mm(),t=Ui();function n(r,i){var s=-1,o=t(r)?Array(r.length):[];return e(r,function(l,c,f){o[++s]=i(l,c,f)}),o}return Kx=n,Kx}var Yx,Pj;function gV(){if(Pj)return Yx;Pj=1;var e=Nm(),t=$i(),n=mV(),r=$t();function i(s,o){var l=r(s)?e:n;return l(s,t(o,3))}return Yx=i,Yx}var Wx,Bj;function rce(){if(Bj)return Wx;Bj=1;function e(t,n,r,i){var s=-1,o=t==null?0:t.length;for(i&&o&&(r=t[++s]);++s<o;)r=n(r,t[s],s,t);return r}return Wx=e,Wx}var Xx,Ij;function ice(){if(Ij)return Xx;Ij=1;function e(t,n,r,i,s){return s(t,function(o,l,c){r=i?(i=!1,o):n(r,o,l,c)}),r}return Xx=e,Xx}var Zx,zj;function yV(){if(zj)return Zx;zj=1;var e=rce(),t=Mm(),n=$i(),r=ice(),i=$t();function s(o,l,c){var f=i(o)?e:r,h=arguments.length<3;return f(o,n(l,4),c,h,t)}return Zx=s,Zx}var Qx,qj;function sce(){if(qj)return Qx;qj=1;var e=ta(),t=$t(),n=ai(),r="[object String]";function i(s){return typeof s=="string"||!t(s)&&n(s)&&e(s)==r}return Qx=i,Qx}var Jx,Vj;function oce(){if(Vj)return Jx;Vj=1;var e=fV(),t=e("length");return Jx=t,Jx}var e1,Hj;function ace(){if(Hj)return e1;Hj=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,s="\\ufe0e\\ufe0f",o="\\u200d",l=RegExp("["+o+e+i+s+"]");function c(f){return l.test(f)}return e1=c,e1}var t1,Fj;function lce(){if(Fj)return t1;Fj=1;var e="\\ud800-\\udfff",t="\\u0300-\\u036f",n="\\ufe20-\\ufe2f",r="\\u20d0-\\u20ff",i=t+n+r,s="\\ufe0e\\ufe0f",o="["+e+"]",l="["+i+"]",c="\\ud83c[\\udffb-\\udfff]",f="(?:"+l+"|"+c+")",h="[^"+e+"]",p="(?:\\ud83c[\\udde6-\\uddff]){2}",g="[\\ud800-\\udbff][\\udc00-\\udfff]",y="\\u200d",b=f+"?",S="["+s+"]?",x="(?:"+y+"(?:"+[h,p,g].join("|")+")"+S+b+")*",C=S+b+x,T="(?:"+[h+l+"?",l,p,g,o].join("|")+")",k=RegExp(c+"(?="+c+")|"+T+C,"g");function A(M){for(var _=k.lastIndex=0;k.test(M);)++_;return _}return t1=A,t1}var n1,Uj;function uce(){if(Uj)return n1;Uj=1;var e=oce(),t=ace(),n=lce();function r(i){return t(i)?n(i):e(i)}return n1=r,n1}var r1,$j;function cce(){if($j)return r1;$j=1;var e=Nk(),t=jl(),n=Ui(),r=sce(),i=uce(),s="[object Map]",o="[object Set]";function l(c){if(c==null)return 0;if(n(c))return r(c)?i(c):c.length;var f=t(c);return f==s||f==o?c.size:e(c).length}return r1=l,r1}var i1,Gj;function fce(){if(Gj)return i1;Gj=1;var e=Tk(),t=Xq(),n=Lk(),r=$i(),i=Am(),s=$t(),o=Ol(),l=ff(),c=kr(),f=pf();function h(p,g,y){var b=s(p),S=b||o(p)||f(p);if(g=r(g,4),y==null){var x=p&&p.constructor;S?y=b?new x:[]:c(p)?y=l(x)?t(i(p)):{}:y={}}return(S?e:n)(p,function(C,T,k){return g(y,C,T,k)}),y}return i1=h,i1}var s1,Kj;function dce(){if(Kj)return s1;Kj=1;var e=Dl(),t=hf(),n=$t(),r=e?e.isConcatSpreadable:void 0;function i(s){return n(s)||t(s)||!!(r&&s&&s[r])}return s1=i,s1}var o1,Yj;function Ik(){if(Yj)return o1;Yj=1;var e=Rk(),t=dce();function n(r,i,s,o,l){var c=-1,f=r.length;for(s||(s=t),l||(l=[]);++c<f;){var h=r[c];i>0&&s(h)?i>1?n(h,i-1,s,o,l):e(l,h):o||(l[l.length]=h)}return l}return o1=n,o1}var a1,Wj;function hce(){if(Wj)return a1;Wj=1;function e(t,n,r){switch(r.length){case 0:return t.call(n);case 1:return t.call(n,r[0]);case 2:return t.call(n,r[0],r[1]);case 3:return t.call(n,r[0],r[1],r[2])}return t.apply(n,r)}return a1=e,a1}var l1,Xj;function vV(){if(Xj)return l1;Xj=1;var e=hce(),t=Math.max;function n(r,i,s){return i=t(i===void 0?r.length-1:i,0),function(){for(var o=arguments,l=-1,c=t(o.length-i,0),f=Array(c);++l<c;)f[l]=o[i+l];l=-1;for(var h=Array(i+1);++l<i;)h[l]=o[l];return h[i]=s(f),e(r,this,h)}}return l1=n,l1}var u1,Zj;function pce(){if(Zj)return u1;Zj=1;var e=Ok(),t=Bq(),n=ia(),r=t?function(i,s){return t(i,"toString",{configurable:!0,enumerable:!1,value:e(s),writable:!0})}:n;return u1=r,u1}var c1,Qj;function mce(){if(Qj)return c1;Qj=1;var e=800,t=16,n=Date.now;function r(i){var s=0,o=0;return function(){var l=n(),c=t-(l-o);if(o=l,c>0){if(++s>=e)return arguments[0]}else s=0;return i.apply(void 0,arguments)}}return c1=r,c1}var f1,Jj;function bV(){if(Jj)return f1;Jj=1;var e=pce(),t=mce(),n=t(e);return f1=n,f1}var d1,eL;function Dm(){if(eL)return d1;eL=1;var e=ia(),t=vV(),n=bV();function r(i,s){return n(t(i,s,e),i+"")}return d1=r,d1}var h1,tL;function xV(){if(tL)return h1;tL=1;function e(t,n,r,i){for(var s=t.length,o=r+(i?1:-1);i?o--:++o<s;)if(n(t[o],o,t))return o;return-1}return h1=e,h1}var p1,nL;function gce(){if(nL)return p1;nL=1;function e(t){return t!==t}return p1=e,p1}var m1,rL;function yce(){if(rL)return m1;rL=1;function e(t,n,r){for(var i=r-1,s=t.length;++i<s;)if(t[i]===n)return i;return-1}return m1=e,m1}var g1,iL;function vce(){if(iL)return g1;iL=1;var e=xV(),t=gce(),n=yce();function r(i,s,o){return s===s?n(i,s,o):e(i,t,o)}return g1=r,g1}var y1,sL;function bce(){if(sL)return y1;sL=1;var e=vce();function t(n,r){var i=n==null?0:n.length;return!!i&&e(n,r,0)>-1}return y1=t,y1}var v1,oL;function xce(){if(oL)return v1;oL=1;function e(t,n,r){for(var i=-1,s=t==null?0:t.length;++i<s;)if(r(n,t[i]))return!0;return!1}return v1=e,v1}var b1,aL;function wce(){if(aL)return b1;aL=1;function e(){}return b1=e,b1}var x1,lL;function Sce(){if(lL)return x1;lL=1;var e=Kq(),t=wce(),n=Pk(),r=1/0,i=e&&1/n(new e([,-0]))[1]==r?function(s){return new e(s)}:t;return x1=i,x1}var w1,uL;function Ece(){if(uL)return w1;uL=1;var e=nV(),t=bce(),n=xce(),r=rV(),i=Sce(),s=Pk(),o=200;function l(c,f,h){var p=-1,g=t,y=c.length,b=!0,S=[],x=S;if(h)b=!1,g=n;else if(y>=o){var C=f?null:i(c);if(C)return s(C);b=!1,g=r,x=new e}else x=f?[]:S;e:for(;++p<y;){var T=c[p],k=f?f(T):T;if(T=h||T!==0?T:0,b&&k===k){for(var A=x.length;A--;)if(x[A]===k)continue e;f&&x.push(k),S.push(T)}else g(x,k,h)||(x!==S&&x.push(k),S.push(T))}return S}return w1=l,w1}var S1,cL;function wV(){if(cL)return S1;cL=1;var e=Ui(),t=ai();function n(r){return t(r)&&e(r)}return S1=n,S1}var E1,fL;function Cce(){if(fL)return E1;fL=1;var e=Ik(),t=Dm(),n=Ece(),r=wV(),i=t(function(s){return n(e(s,1,r,!0))});return E1=i,E1}var C1,dL;function kce(){if(dL)return C1;dL=1;var e=Nm();function t(n,r){return e(r,function(i){return n[i]})}return C1=t,C1}var k1,hL;function SV(){if(hL)return k1;hL=1;var e=kce(),t=Ws();function n(r){return r==null?[]:e(r,t(r))}return k1=n,k1}var T1,pL;function Tr(){if(pL)return T1;pL=1;var e;if(typeof Ek=="function")try{e={clone:Due(),constant:Ok(),each:tV(),filter:dV(),has:hV(),isArray:$t(),isEmpty:nce(),isFunction:ff(),isUndefined:pV(),keys:Ws(),map:gV(),reduce:yV(),size:cce(),transform:fce(),union:Cce(),values:SV()}}catch{}return e||(e=window._),T1=e,T1}var A1,mL;function zk(){if(mL)return A1;mL=1;var e=Tr();A1=i;var t="\0",n="\0",r="";function i(h){this._isDirected=e.has(h,"directed")?h.directed:!0,this._isMultigraph=e.has(h,"multigraph")?h.multigraph:!1,this._isCompound=e.has(h,"compound")?h.compound:!1,this._label=void 0,this._defaultNodeLabelFn=e.constant(void 0),this._defaultEdgeLabelFn=e.constant(void 0),this._nodes={},this._isCompound&&(this._parent={},this._children={},this._children[n]={}),this._in={},this._preds={},this._out={},this._sucs={},this._edgeObjs={},this._edgeLabels={}}i.prototype._nodeCount=0,i.prototype._edgeCount=0,i.prototype.isDirected=function(){return this._isDirected},i.prototype.isMultigraph=function(){return this._isMultigraph},i.prototype.isCompound=function(){return this._isCompound},i.prototype.setGraph=function(h){return this._label=h,this},i.prototype.graph=function(){return this._label},i.prototype.setDefaultNodeLabel=function(h){return e.isFunction(h)||(h=e.constant(h)),this._defaultNodeLabelFn=h,this},i.prototype.nodeCount=function(){return this._nodeCount},i.prototype.nodes=function(){return e.keys(this._nodes)},i.prototype.sources=function(){var h=this;return e.filter(this.nodes(),function(p){return e.isEmpty(h._in[p])})},i.prototype.sinks=function(){var h=this;return e.filter(this.nodes(),function(p){return e.isEmpty(h._out[p])})},i.prototype.setNodes=function(h,p){var g=arguments,y=this;return e.each(h,function(b){g.length>1?y.setNode(b,p):y.setNode(b)}),this},i.prototype.setNode=function(h,p){return e.has(this._nodes,h)?(arguments.length>1&&(this._nodes[h]=p),this):(this._nodes[h]=arguments.length>1?p:this._defaultNodeLabelFn(h),this._isCompound&&(this._parent[h]=n,this._children[h]={},this._children[n][h]=!0),this._in[h]={},this._preds[h]={},this._out[h]={},this._sucs[h]={},++this._nodeCount,this)},i.prototype.node=function(h){return this._nodes[h]},i.prototype.hasNode=function(h){return e.has(this._nodes,h)},i.prototype.removeNode=function(h){var p=this;if(e.has(this._nodes,h)){var g=function(y){p.removeEdge(p._edgeObjs[y])};delete this._nodes[h],this._isCompound&&(this._removeFromParentsChildList(h),delete this._parent[h],e.each(this.children(h),function(y){p.setParent(y)}),delete this._children[h]),e.each(e.keys(this._in[h]),g),delete this._in[h],delete this._preds[h],e.each(e.keys(this._out[h]),g),delete this._out[h],delete this._sucs[h],--this._nodeCount}return this},i.prototype.setParent=function(h,p){if(!this._isCompound)throw new Error("Cannot set parent in a non-compound graph");if(e.isUndefined(p))p=n;else{p+="";for(var g=p;!e.isUndefined(g);g=this.parent(g))if(g===h)throw new Error("Setting "+p+" as parent of "+h+" would create a cycle");this.setNode(p)}return this.setNode(h),this._removeFromParentsChildList(h),this._parent[h]=p,this._children[p][h]=!0,this},i.prototype._removeFromParentsChildList=function(h){delete this._children[this._parent[h]][h]},i.prototype.parent=function(h){if(this._isCompound){var p=this._parent[h];if(p!==n)return p}},i.prototype.children=function(h){if(e.isUndefined(h)&&(h=n),this._isCompound){var p=this._children[h];if(p)return e.keys(p)}else{if(h===n)return this.nodes();if(this.hasNode(h))return[]}},i.prototype.predecessors=function(h){var p=this._preds[h];if(p)return e.keys(p)},i.prototype.successors=function(h){var p=this._sucs[h];if(p)return e.keys(p)},i.prototype.neighbors=function(h){var p=this.predecessors(h);if(p)return e.union(p,this.successors(h))},i.prototype.isLeaf=function(h){var p;return this.isDirected()?p=this.successors(h):p=this.neighbors(h),p.length===0},i.prototype.filterNodes=function(h){var p=new this.constructor({directed:this._isDirected,multigraph:this._isMultigraph,compound:this._isCompound});p.setGraph(this.graph());var g=this;e.each(this._nodes,function(S,x){h(x)&&p.setNode(x,S)}),e.each(this._edgeObjs,function(S){p.hasNode(S.v)&&p.hasNode(S.w)&&p.setEdge(S,g.edge(S))});var y={};function b(S){var x=g.parent(S);return x===void 0||p.hasNode(x)?(y[S]=x,x):x in y?y[x]:b(x)}return this._isCompound&&e.each(p.nodes(),function(S){p.setParent(S,b(S))}),p},i.prototype.setDefaultEdgeLabel=function(h){return e.isFunction(h)||(h=e.constant(h)),this._defaultEdgeLabelFn=h,this},i.prototype.edgeCount=function(){return this._edgeCount},i.prototype.edges=function(){return e.values(this._edgeObjs)},i.prototype.setPath=function(h,p){var g=this,y=arguments;return e.reduce(h,function(b,S){return y.length>1?g.setEdge(b,S,p):g.setEdge(b,S),S}),this},i.prototype.setEdge=function(){var h,p,g,y,b=!1,S=arguments[0];typeof S=="object"&&S!==null&&"v"in S?(h=S.v,p=S.w,g=S.name,arguments.length===2&&(y=arguments[1],b=!0)):(h=S,p=arguments[1],g=arguments[3],arguments.length>2&&(y=arguments[2],b=!0)),h=""+h,p=""+p,e.isUndefined(g)||(g=""+g);var x=l(this._isDirected,h,p,g);if(e.has(this._edgeLabels,x))return b&&(this._edgeLabels[x]=y),this;if(!e.isUndefined(g)&&!this._isMultigraph)throw new Error("Cannot set a named edge when isMultigraph = false");this.setNode(h),this.setNode(p),this._edgeLabels[x]=b?y:this._defaultEdgeLabelFn(h,p,g);var C=c(this._isDirected,h,p,g);return h=C.v,p=C.w,Object.freeze(C),this._edgeObjs[x]=C,s(this._preds[p],h),s(this._sucs[h],p),this._in[p][x]=C,this._out[h][x]=C,this._edgeCount++,this},i.prototype.edge=function(h,p,g){var y=arguments.length===1?f(this._isDirected,arguments[0]):l(this._isDirected,h,p,g);return this._edgeLabels[y]},i.prototype.hasEdge=function(h,p,g){var y=arguments.length===1?f(this._isDirected,arguments[0]):l(this._isDirected,h,p,g);return e.has(this._edgeLabels,y)},i.prototype.removeEdge=function(h,p,g){var y=arguments.length===1?f(this._isDirected,arguments[0]):l(this._isDirected,h,p,g),b=this._edgeObjs[y];return b&&(h=b.v,p=b.w,delete this._edgeLabels[y],delete this._edgeObjs[y],o(this._preds[p],h),o(this._sucs[h],p),delete this._in[p][y],delete this._out[h][y],this._edgeCount--),this},i.prototype.inEdges=function(h,p){var g=this._in[h];if(g){var y=e.values(g);return p?e.filter(y,function(b){return b.v===p}):y}},i.prototype.outEdges=function(h,p){var g=this._out[h];if(g){var y=e.values(g);return p?e.filter(y,function(b){return b.w===p}):y}},i.prototype.nodeEdges=function(h,p){var g=this.inEdges(h,p);if(g)return g.concat(this.outEdges(h,p))};function s(h,p){h[p]?h[p]++:h[p]=1}function o(h,p){--h[p]||delete h[p]}function l(h,p,g,y){var b=""+p,S=""+g;if(!h&&b>S){var x=b;b=S,S=x}return b+r+S+r+(e.isUndefined(y)?t:y)}function c(h,p,g,y){var b=""+p,S=""+g;if(!h&&b>S){var x=b;b=S,S=x}var C={v:b,w:S};return y&&(C.name=y),C}function f(h,p){return l(h,p.v,p.w,p.name)}return A1}var M1,gL;function Tce(){return gL||(gL=1,M1="2.1.8"),M1}var N1,yL;function Ace(){return yL||(yL=1,N1={Graph:zk(),version:Tce()}),N1}var _1,vL;function Mce(){if(vL)return _1;vL=1;var e=Tr(),t=zk();_1={write:n,read:s};function n(o){var l={options:{directed:o.isDirected(),multigraph:o.isMultigraph(),compound:o.isCompound()},nodes:r(o),edges:i(o)};return e.isUndefined(o.graph())||(l.value=e.clone(o.graph())),l}function r(o){return e.map(o.nodes(),function(l){var c=o.node(l),f=o.parent(l),h={v:l};return e.isUndefined(c)||(h.value=c),e.isUndefined(f)||(h.parent=f),h})}function i(o){return e.map(o.edges(),function(l){var c=o.edge(l),f={v:l.v,w:l.w};return e.isUndefined(l.name)||(f.name=l.name),e.isUndefined(c)||(f.value=c),f})}function s(o){var l=new t(o.options).setGraph(o.value);return e.each(o.nodes,function(c){l.setNode(c.v,c.value),c.parent&&l.setParent(c.v,c.parent)}),e.each(o.edges,function(c){l.setEdge({v:c.v,w:c.w,name:c.name},c.value)}),l}return _1}var R1,bL;function Nce(){if(bL)return R1;bL=1;var e=Tr();R1=t;function t(n){var r={},i=[],s;function o(l){e.has(r,l)||(r[l]=!0,s.push(l),e.each(n.successors(l),o),e.each(n.predecessors(l),o))}return e.each(n.nodes(),function(l){s=[],o(l),s.length&&i.push(s)}),i}return R1}var D1,xL;function EV(){if(xL)return D1;xL=1;var e=Tr();D1=t;function t(){this._arr=[],this._keyIndices={}}return t.prototype.size=function(){return this._arr.length},t.prototype.keys=function(){return this._arr.map(function(n){return n.key})},t.prototype.has=function(n){return e.has(this._keyIndices,n)},t.prototype.priority=function(n){var r=this._keyIndices[n];if(r!==void 0)return this._arr[r].priority},t.prototype.min=function(){if(this.size()===0)throw new Error("Queue underflow");return this._arr[0].key},t.prototype.add=function(n,r){var i=this._keyIndices;if(n=String(n),!e.has(i,n)){var s=this._arr,o=s.length;return i[n]=o,s.push({key:n,priority:r}),this._decrease(o),!0}return!1},t.prototype.removeMin=function(){this._swap(0,this._arr.length-1);var n=this._arr.pop();return delete this._keyIndices[n.key],this._heapify(0),n.key},t.prototype.decrease=function(n,r){var i=this._keyIndices[n];if(r>this._arr[i].priority)throw new Error("New priority is greater than current priority. Key: "+n+" Old: "+this._arr[i].priority+" New: "+r);this._arr[i].priority=r,this._decrease(i)},t.prototype._heapify=function(n){var r=this._arr,i=2*n,s=i+1,o=n;i<r.length&&(o=r[i].priority<r[o].priority?i:o,s<r.length&&(o=r[s].priority<r[o].priority?s:o),o!==n&&(this._swap(n,o),this._heapify(o)))},t.prototype._decrease=function(n){for(var r=this._arr,i=r[n].priority,s;n!==0&&(s=n>>1,!(r[s].priority<i));)this._swap(n,s),n=s},t.prototype._swap=function(n,r){var i=this._arr,s=this._keyIndices,o=i[n],l=i[r];i[n]=l,i[r]=o,s[l.key]=n,s[o.key]=r},D1}var O1,wL;function CV(){if(wL)return O1;wL=1;var e=Tr(),t=EV();O1=r;var n=e.constant(1);function r(s,o,l,c){return i(s,String(o),l||n,c||function(f){return s.outEdges(f)})}function i(s,o,l,c){var f={},h=new t,p,g,y=function(b){var S=b.v!==p?b.v:b.w,x=f[S],C=l(b),T=g.distance+C;if(C<0)throw new Error("dijkstra does not allow negative edge weights. Bad edge: "+b+" Weight: "+C);T<x.distance&&(x.distance=T,x.predecessor=p,h.decrease(S,T))};for(s.nodes().forEach(function(b){var S=b===o?0:Number.POSITIVE_INFINITY;f[b]={distance:S},h.add(b,S)});h.size()>0&&(p=h.removeMin(),g=f[p],g.distance!==Number.POSITIVE_INFINITY);)c(p).forEach(y);return f}return O1}var j1,SL;function _ce(){if(SL)return j1;SL=1;var e=CV(),t=Tr();j1=n;function n(r,i,s){return t.transform(r.nodes(),function(o,l){o[l]=e(r,l,i,s)},{})}return j1}var L1,EL;function kV(){if(EL)return L1;EL=1;var e=Tr();L1=t;function t(n){var r=0,i=[],s={},o=[];function l(c){var f=s[c]={onStack:!0,lowlink:r,index:r++};if(i.push(c),n.successors(c).forEach(function(g){e.has(s,g)?s[g].onStack&&(f.lowlink=Math.min(f.lowlink,s[g].index)):(l(g),f.lowlink=Math.min(f.lowlink,s[g].lowlink))}),f.lowlink===f.index){var h=[],p;do p=i.pop(),s[p].onStack=!1,h.push(p);while(c!==p);o.push(h)}}return n.nodes().forEach(function(c){e.has(s,c)||l(c)}),o}return L1}var P1,CL;function Rce(){if(CL)return P1;CL=1;var e=Tr(),t=kV();P1=n;function n(r){return e.filter(t(r),function(i){return i.length>1||i.length===1&&r.hasEdge(i[0],i[0])})}return P1}var B1,kL;function Dce(){if(kL)return B1;kL=1;var e=Tr();B1=n;var t=e.constant(1);function n(i,s,o){return r(i,s||t,o||function(l){return i.outEdges(l)})}function r(i,s,o){var l={},c=i.nodes();return c.forEach(function(f){l[f]={},l[f][f]={distance:0},c.forEach(function(h){f!==h&&(l[f][h]={distance:Number.POSITIVE_INFINITY})}),o(f).forEach(function(h){var p=h.v===f?h.w:h.v,g=s(h);l[f][p]={distance:g,predecessor:f}})}),c.forEach(function(f){var h=l[f];c.forEach(function(p){var g=l[p];c.forEach(function(y){var b=g[f],S=h[y],x=g[y],C=b.distance+S.distance;C<x.distance&&(x.distance=C,x.predecessor=S.predecessor)})})}),l}return B1}var I1,TL;function TV(){if(TL)return I1;TL=1;var e=Tr();I1=t,t.CycleException=n;function t(r){var i={},s={},o=[];function l(c){if(e.has(s,c))throw new n;e.has(i,c)||(s[c]=!0,i[c]=!0,e.each(r.predecessors(c),l),delete s[c],o.push(c))}if(e.each(r.sinks(),l),e.size(i)!==r.nodeCount())throw new n;return o}function n(){}return n.prototype=new Error,I1}var z1,AL;function Oce(){if(AL)return z1;AL=1;var e=TV();z1=t;function t(n){try{e(n)}catch(r){if(r instanceof e.CycleException)return!1;throw r}return!0}return z1}var q1,ML;function AV(){if(ML)return q1;ML=1;var e=Tr();q1=t;function t(r,i,s){e.isArray(i)||(i=[i]);var o=(r.isDirected()?r.successors:r.neighbors).bind(r),l=[],c={};return e.each(i,function(f){if(!r.hasNode(f))throw new Error("Graph does not have node: "+f);n(r,f,s==="post",c,o,l)}),l}function n(r,i,s,o,l,c){e.has(o,i)||(o[i]=!0,s||c.push(i),e.each(l(i),function(f){n(r,f,s,o,l,c)}),s&&c.push(i))}return q1}var V1,NL;function jce(){if(NL)return V1;NL=1;var e=AV();V1=t;function t(n,r){return e(n,r,"post")}return V1}var H1,_L;function Lce(){if(_L)return H1;_L=1;var e=AV();H1=t;function t(n,r){return e(n,r,"pre")}return H1}var F1,RL;function Pce(){if(RL)return F1;RL=1;var e=Tr(),t=zk(),n=EV();F1=r;function r(i,s){var o=new t,l={},c=new n,f;function h(g){var y=g.v===f?g.w:g.v,b=c.priority(y);if(b!==void 0){var S=s(g);S<b&&(l[y]=f,c.decrease(y,S))}}if(i.nodeCount()===0)return o;e.each(i.nodes(),function(g){c.add(g,Number.POSITIVE_INFINITY),o.setNode(g)}),c.decrease(i.nodes()[0],0);for(var p=!1;c.size()>0;){if(f=c.removeMin(),e.has(l,f))o.setEdge(f,l[f]);else{if(p)throw new Error("Input graph is not connected: "+i);p=!0}i.nodeEdges(f).forEach(h)}return o}return F1}var U1,DL;function Bce(){return DL||(DL=1,U1={components:Nce(),dijkstra:CV(),dijkstraAll:_ce(),findCycles:Rce(),floydWarshall:Dce(),isAcyclic:Oce(),postorder:jce(),preorder:Lce(),prim:Pce(),tarjan:kV(),topsort:TV()}),U1}var $1,OL;function Ice(){if(OL)return $1;OL=1;var e=Ace();return $1={Graph:e.Graph,json:Mce(),alg:Bce(),version:e.version},$1}var G1,jL;function Ir(){if(jL)return G1;jL=1;var e;if(typeof Ek=="function")try{e=Ice()}catch{}return e||(e=window.graphlib),G1=e,G1}var K1,LL;function zce(){if(LL)return K1;LL=1;var e=Qq(),t=1,n=4;function r(i){return e(i,t|n)}return K1=r,K1}var Y1,PL;function Om(){if(PL)return Y1;PL=1;var e=Rl(),t=Ui(),n=Cm(),r=kr();function i(s,o,l){if(!r(l))return!1;var c=typeof o;return(c=="number"?t(l)&&n(o,l.length):c=="string"&&o in l)?e(l[o],s):!1}return Y1=i,Y1}var W1,BL;function qce(){if(BL)return W1;BL=1;var e=Dm(),t=Rl(),n=Om(),r=ra(),i=Object.prototype,s=i.hasOwnProperty,o=e(function(l,c){l=Object(l);var f=-1,h=c.length,p=h>2?c[2]:void 0;for(p&&n(c[0],c[1],p)&&(h=1);++f<h;)for(var g=c[f],y=r(g),b=-1,S=y.length;++b<S;){var x=y[b],C=l[x];(C===void 0||t(C,i[x])&&!s.call(l,x))&&(l[x]=g[x])}return l});return W1=o,W1}var X1,IL;function Vce(){if(IL)return X1;IL=1;var e=$i(),t=Ui(),n=Ws();function r(i){return function(s,o,l){var c=Object(s);if(!t(s)){var f=e(o,3);s=n(s),o=function(p){return f(c[p],p,c)}}var h=i(s,o,l);return h>-1?c[f?s[h]:h]:void 0}}return X1=r,X1}var Z1,zL;function Hce(){if(zL)return Z1;zL=1;var e=/\s/;function t(n){for(var r=n.length;r--&&e.test(n.charAt(r)););return r}return Z1=t,Z1}var Q1,qL;function Fce(){if(qL)return Q1;qL=1;var e=Hce(),t=/^\s+/;function n(r){return r&&r.slice(0,e(r)+1).replace(t,"")}return Q1=n,Q1}var J1,VL;function Uce(){if(VL)return J1;VL=1;var e=Fce(),t=kr(),n=Ll(),r=NaN,i=/^[-+]0x[0-9a-f]+$/i,s=/^0b[01]+$/i,o=/^0o[0-7]+$/i,l=parseInt;function c(f){if(typeof f=="number")return f;if(n(f))return r;if(t(f)){var h=typeof f.valueOf=="function"?f.valueOf():f;f=t(h)?h+"":h}if(typeof f!="string")return f===0?f:+f;f=e(f);var p=s.test(f);return p||o.test(f)?l(f.slice(2),p?2:8):i.test(f)?r:+f}return J1=c,J1}var ew,HL;function MV(){if(HL)return ew;HL=1;var e=Uce(),t=1/0,n=17976931348623157e292;function r(i){if(!i)return i===0?i:0;if(i=e(i),i===t||i===-t){var s=i<0?-1:1;return s*n}return i===i?i:0}return ew=r,ew}var tw,FL;function $ce(){if(FL)return tw;FL=1;var e=MV();function t(n){var r=e(n),i=r%1;return r===r?i?r-i:r:0}return tw=t,tw}var nw,UL;function Gce(){if(UL)return nw;UL=1;var e=xV(),t=$i(),n=$ce(),r=Math.max;function i(s,o,l){var c=s==null?0:s.length;if(!c)return-1;var f=l==null?0:n(l);return f<0&&(f=r(c+f,0)),e(s,t(o,3),f)}return nw=i,nw}var rw,$L;function Kce(){if($L)return rw;$L=1;var e=Vce(),t=Gce(),n=e(t);return rw=n,rw}var iw,GL;function NV(){if(GL)return iw;GL=1;var e=Ik();function t(n){var r=n==null?0:n.length;return r?e(n,1):[]}return iw=t,iw}var sw,KL;function Yce(){if(KL)return sw;KL=1;var e=jk(),t=Jq(),n=ra();function r(i,s){return i==null?i:e(i,t(s),n)}return sw=r,sw}var ow,YL;function Wce(){if(YL)return ow;YL=1;function e(t){var n=t==null?0:t.length;return n?t[n-1]:void 0}return ow=e,ow}var aw,WL;function Xce(){if(WL)return aw;WL=1;var e=Sm(),t=Lk(),n=$i();function r(i,s){var o={};return s=n(s,3),t(i,function(l,c,f){e(o,c,s(l,c,f))}),o}return aw=r,aw}var lw,XL;function qk(){if(XL)return lw;XL=1;var e=Ll();function t(n,r,i){for(var s=-1,o=n.length;++s<o;){var l=n[s],c=r(l);if(c!=null&&(f===void 0?c===c&&!e(c):i(c,f)))var f=c,h=l}return h}return lw=t,lw}var uw,ZL;function Zce(){if(ZL)return uw;ZL=1;function e(t,n){return t>n}return uw=e,uw}var cw,QL;function Qce(){if(QL)return cw;QL=1;var e=qk(),t=Zce(),n=ia();function r(i){return i&&i.length?e(i,n,t):void 0}return cw=r,cw}var fw,JL;function _V(){if(JL)return fw;JL=1;var e=Sm(),t=Rl();function n(r,i,s){(s!==void 0&&!t(r[i],s)||s===void 0&&!(i in r))&&e(r,i,s)}return fw=n,fw}var dw,eP;function Jce(){if(eP)return dw;eP=1;var e=ta(),t=Am(),n=ai(),r="[object Object]",i=Function.prototype,s=Object.prototype,o=i.toString,l=s.hasOwnProperty,c=o.call(Object);function f(h){if(!n(h)||e(h)!=r)return!1;var p=t(h);if(p===null)return!0;var g=l.call(p,"constructor")&&p.constructor;return typeof g=="function"&&g instanceof g&&o.call(g)==c}return dw=f,dw}var hw,tP;function RV(){if(tP)return hw;tP=1;function e(t,n){if(!(n==="constructor"&&typeof t[n]=="function")&&n!="__proto__")return t[n]}return hw=e,hw}var pw,nP;function efe(){if(nP)return pw;nP=1;var e=df(),t=ra();function n(r){return e(r,t(r))}return pw=n,pw}var mw,rP;function tfe(){if(rP)return mw;rP=1;var e=_V(),t=qq(),n=Wq(),r=Vq(),i=Zq(),s=hf(),o=$t(),l=wV(),c=Ol(),f=ff(),h=kr(),p=Jce(),g=pf(),y=RV(),b=efe();function S(x,C,T,k,A,M,_){var R=y(x,T),O=y(C,T),I=_.get(O);if(I){e(x,T,I);return}var $=M?M(R,O,T+"",x,C,_):void 0,q=$===void 0;if(q){var U=o(O),X=!U&&c(O),B=!U&&!X&&g(O);$=O,U||X||B?o(R)?$=R:l(R)?$=r(R):X?(q=!1,$=t(O,!0)):B?(q=!1,$=n(O,!0)):$=[]:p(O)||s(O)?($=R,s(R)?$=b(R):(!h(R)||f(R))&&($=i(O))):q=!1}q&&(_.set(O,$),A($,O,k,M,_),_.delete(O)),e(x,T,$)}return mw=S,mw}var gw,iP;function nfe(){if(iP)return gw;iP=1;var e=wm(),t=_V(),n=jk(),r=tfe(),i=kr(),s=ra(),o=RV();function l(c,f,h,p,g){c!==f&&n(f,function(y,b){if(g||(g=new e),i(y))r(c,f,b,h,l,p,g);else{var S=p?p(o(c,b),y,b+"",c,f,g):void 0;S===void 0&&(S=y),t(c,b,S)}},s)}return gw=l,gw}var yw,sP;function rfe(){if(sP)return yw;sP=1;var e=Dm(),t=Om();function n(r){return e(function(i,s){var o=-1,l=s.length,c=l>1?s[l-1]:void 0,f=l>2?s[2]:void 0;for(c=r.length>3&&typeof c=="function"?(l--,c):void 0,f&&t(s[0],s[1],f)&&(c=l<3?void 0:c,l=1),i=Object(i);++o<l;){var h=s[o];h&&r(i,h,o,c)}return i})}return yw=n,yw}var vw,oP;function ife(){if(oP)return vw;oP=1;var e=nfe(),t=rfe(),n=t(function(r,i,s){e(r,i,s)});return vw=n,vw}var bw,aP;function DV(){if(aP)return bw;aP=1;function e(t,n){return t<n}return bw=e,bw}var xw,lP;function sfe(){if(lP)return xw;lP=1;var e=qk(),t=DV(),n=ia();function r(i){return i&&i.length?e(i,n,t):void 0}return xw=r,xw}var ww,uP;function ofe(){if(uP)return ww;uP=1;var e=qk(),t=$i(),n=DV();function r(i,s){return i&&i.length?e(i,t(s,2),n):void 0}return ww=r,ww}var Sw,cP;function afe(){if(cP)return Sw;cP=1;var e=qr(),t=function(){return e.Date.now()};return Sw=t,Sw}var Ew,fP;function lfe(){if(fP)return Ew;fP=1;var e=Em(),t=_m(),n=Cm(),r=kr(),i=mf();function s(o,l,c,f){if(!r(o))return o;l=t(l,o);for(var h=-1,p=l.length,g=p-1,y=o;y!=null&&++h<p;){var b=i(l[h]),S=c;if(b==="__proto__"||b==="constructor"||b==="prototype")return o;if(h!=g){var x=y[b];S=f?f(x,b,y):void 0,S===void 0&&(S=r(x)?x:n(l[h+1])?[]:{})}e(y,b,S),y=y[b]}return o}return Ew=s,Ew}var Cw,dP;function ufe(){if(dP)return Cw;dP=1;var e=Rm(),t=lfe(),n=_m();function r(i,s,o){for(var l=-1,c=s.length,f={};++l<c;){var h=s[l],p=e(i,h);o(p,h)&&t(f,n(h,i),p)}return f}return Cw=r,Cw}var kw,hP;function cfe(){if(hP)return kw;hP=1;var e=ufe(),t=cV();function n(r,i){return e(r,i,function(s,o){return t(r,o)})}return kw=n,kw}var Tw,pP;function ffe(){if(pP)return Tw;pP=1;var e=NV(),t=vV(),n=bV();function r(i){return n(t(i,void 0,e),i+"")}return Tw=r,Tw}var Aw,mP;function dfe(){if(mP)return Aw;mP=1;var e=cfe(),t=ffe(),n=t(function(r,i){return r==null?{}:e(r,i)});return Aw=n,Aw}var Mw,gP;function hfe(){if(gP)return Mw;gP=1;var e=Math.ceil,t=Math.max;function n(r,i,s,o){for(var l=-1,c=t(e((i-r)/(s||1)),0),f=Array(c);c--;)f[o?c:++l]=r,r+=s;return f}return Mw=n,Mw}var Nw,yP;function pfe(){if(yP)return Nw;yP=1;var e=hfe(),t=Om(),n=MV();function r(i){return function(s,o,l){return l&&typeof l!="number"&&t(s,o,l)&&(o=l=void 0),s=n(s),o===void 0?(o=s,s=0):o=n(o),l=l===void 0?s<o?1:-1:n(l),e(s,o,l,i)}}return Nw=r,Nw}var _w,vP;function mfe(){if(vP)return _w;vP=1;var e=pfe(),t=e();return _w=t,_w}var Rw,bP;function gfe(){if(bP)return Rw;bP=1;function e(t,n){var r=t.length;for(t.sort(n);r--;)t[r]=t[r].value;return t}return Rw=e,Rw}var Dw,xP;function yfe(){if(xP)return Dw;xP=1;var e=Ll();function t(n,r){if(n!==r){var i=n!==void 0,s=n===null,o=n===n,l=e(n),c=r!==void 0,f=r===null,h=r===r,p=e(r);if(!f&&!p&&!l&&n>r||l&&c&&h&&!f&&!p||s&&c&&h||!i&&h||!o)return 1;if(!s&&!l&&!p&&n<r||p&&i&&o&&!s&&!l||f&&i&&o||!c&&o||!h)return-1}return 0}return Dw=t,Dw}var Ow,wP;function vfe(){if(wP)return Ow;wP=1;var e=yfe();function t(n,r,i){for(var s=-1,o=n.criteria,l=r.criteria,c=o.length,f=i.length;++s<c;){var h=e(o[s],l[s]);if(h){if(s>=f)return h;var p=i[s];return h*(p=="desc"?-1:1)}}return n.index-r.index}return Ow=t,Ow}var jw,SP;function bfe(){if(SP)return jw;SP=1;var e=Nm(),t=Rm(),n=$i(),r=mV(),i=gfe(),s=km(),o=vfe(),l=ia(),c=$t();function f(h,p,g){p.length?p=e(p,function(S){return c(S)?function(x){return t(x,S.length===1?S[0]:S)}:S}):p=[l];var y=-1;p=e(p,s(n));var b=r(h,function(S,x,C){var T=e(p,function(k){return k(S)});return{criteria:T,index:++y,value:S}});return i(b,function(S,x){return o(S,x,g)})}return jw=f,jw}var Lw,EP;function xfe(){if(EP)return Lw;EP=1;var e=Ik(),t=bfe(),n=Dm(),r=Om(),i=n(function(s,o){if(s==null)return[];var l=o.length;return l>1&&r(s,o[0],o[1])?o=[]:l>2&&r(o[0],o[1],o[2])&&(o=[o[0]]),t(s,e(o,1),[])});return Lw=i,Lw}var Pw,CP;function wfe(){if(CP)return Pw;CP=1;var e=lV(),t=0;function n(r){var i=++t;return e(r)+i}return Pw=n,Pw}var Bw,kP;function Sfe(){if(kP)return Bw;kP=1;function e(t,n,r){for(var i=-1,s=t.length,o=n.length,l={};++i<s;){var c=i<o?n[i]:void 0;r(l,t[i],c)}return l}return Bw=e,Bw}var Iw,TP;function Efe(){if(TP)return Iw;TP=1;var e=Em(),t=Sfe();function n(r,i){return t(r||[],i||[],e)}return Iw=n,Iw}var zw,AP;function xt(){if(AP)return zw;AP=1;var e;if(typeof Ek=="function")try{e={cloneDeep:zce(),constant:Ok(),defaults:qce(),each:tV(),filter:dV(),find:Kce(),flatten:NV(),forEach:eV(),forIn:Yce(),has:hV(),isUndefined:pV(),last:Wce(),map:gV(),mapValues:Xce(),max:Qce(),merge:ife(),min:sfe(),minBy:ofe(),now:afe(),pick:dfe(),range:mfe(),reduce:yV(),sortBy:xfe(),uniqueId:wfe(),values:SV(),zipObject:Efe()}}catch{}return e||(e=window._),zw=e,zw}var qw,MP;function Cfe(){if(MP)return qw;MP=1,qw=e;function e(){var r={};r._next=r._prev=r,this._sentinel=r}e.prototype.dequeue=function(){var r=this._sentinel,i=r._prev;if(i!==r)return t(i),i},e.prototype.enqueue=function(r){var i=this._sentinel;r._prev&&r._next&&t(r),r._next=i._next,i._next._prev=r,i._next=r,r._prev=i},e.prototype.toString=function(){for(var r=[],i=this._sentinel,s=i._prev;s!==i;)r.push(JSON.stringify(s,n)),s=s._prev;return"["+r.join(", ")+"]"};function t(r){r._prev._next=r._next,r._next._prev=r._prev,delete r._next,delete r._prev}function n(r,i){if(r!=="_next"&&r!=="_prev")return i}return qw}var Vw,NP;function kfe(){if(NP)return Vw;NP=1;var e=xt(),t=Ir().Graph,n=Cfe();Vw=i;var r=e.constant(1);function i(f,h){if(f.nodeCount()<=1)return[];var p=l(f,h||r),g=s(p.graph,p.buckets,p.zeroIdx);return e.flatten(e.map(g,function(y){return f.outEdges(y.v,y.w)}),!0)}function s(f,h,p){for(var g=[],y=h[h.length-1],b=h[0],S;f.nodeCount();){for(;S=b.dequeue();)o(f,h,p,S);for(;S=y.dequeue();)o(f,h,p,S);if(f.nodeCount()){for(var x=h.length-2;x>0;--x)if(S=h[x].dequeue(),S){g=g.concat(o(f,h,p,S,!0));break}}}return g}function o(f,h,p,g,y){var b=y?[]:void 0;return e.forEach(f.inEdges(g.v),function(S){var x=f.edge(S),C=f.node(S.v);y&&b.push({v:S.v,w:S.w}),C.out-=x,c(h,p,C)}),e.forEach(f.outEdges(g.v),function(S){var x=f.edge(S),C=S.w,T=f.node(C);T.in-=x,c(h,p,T)}),f.removeNode(g.v),b}function l(f,h){var p=new t,g=0,y=0;e.forEach(f.nodes(),function(x){p.setNode(x,{v:x,in:0,out:0})}),e.forEach(f.edges(),function(x){var C=p.edge(x.v,x.w)||0,T=h(x),k=C+T;p.setEdge(x.v,x.w,k),y=Math.max(y,p.node(x.v).out+=T),g=Math.max(g,p.node(x.w).in+=T)});var b=e.range(y+g+3).map(function(){return new n}),S=g+1;return e.forEach(p.nodes(),function(x){c(b,S,p.node(x))}),{graph:p,buckets:b,zeroIdx:S}}function c(f,h,p){p.out?p.in?f[p.out-p.in+h].enqueue(p):f[f.length-1].enqueue(p):f[0].enqueue(p)}return Vw}var Hw,_P;function Tfe(){if(_P)return Hw;_P=1;var e=xt(),t=kfe();Hw={run:n,undo:i};function n(s){var o=s.graph().acyclicer==="greedy"?t(s,l(s)):r(s);e.forEach(o,function(c){var f=s.edge(c);s.removeEdge(c),f.forwardName=c.name,f.reversed=!0,s.setEdge(c.w,c.v,f,e.uniqueId("rev"))});function l(c){return function(f){return c.edge(f).weight}}}function r(s){var o=[],l={},c={};function f(h){e.has(c,h)||(c[h]=!0,l[h]=!0,e.forEach(s.outEdges(h),function(p){e.has(l,p.w)?o.push(p):f(p.w)}),delete l[h])}return e.forEach(s.nodes(),f),o}function i(s){e.forEach(s.edges(),function(o){var l=s.edge(o);if(l.reversed){s.removeEdge(o);var c=l.forwardName;delete l.reversed,delete l.forwardName,s.setEdge(o.w,o.v,l,c)}})}return Hw}var Fw,RP;function Hn(){if(RP)return Fw;RP=1;var e=xt(),t=Ir().Graph;Fw={addDummyNode:n,simplify:r,asNonCompoundGraph:i,successorWeights:s,predecessorWeights:o,intersectRect:l,buildLayerMatrix:c,normalizeRanks:f,removeEmptyRanks:h,addBorderNode:p,maxRank:g,partition:y,time:b,notime:S};function n(x,C,T,k){var A;do A=e.uniqueId(k);while(x.hasNode(A));return T.dummy=C,x.setNode(A,T),A}function r(x){var C=new t().setGraph(x.graph());return e.forEach(x.nodes(),function(T){C.setNode(T,x.node(T))}),e.forEach(x.edges(),function(T){var k=C.edge(T.v,T.w)||{weight:0,minlen:1},A=x.edge(T);C.setEdge(T.v,T.w,{weight:k.weight+A.weight,minlen:Math.max(k.minlen,A.minlen)})}),C}function i(x){var C=new t({multigraph:x.isMultigraph()}).setGraph(x.graph());return e.forEach(x.nodes(),function(T){x.children(T).length||C.setNode(T,x.node(T))}),e.forEach(x.edges(),function(T){C.setEdge(T,x.edge(T))}),C}function s(x){var C=e.map(x.nodes(),function(T){var k={};return e.forEach(x.outEdges(T),function(A){k[A.w]=(k[A.w]||0)+x.edge(A).weight}),k});return e.zipObject(x.nodes(),C)}function o(x){var C=e.map(x.nodes(),function(T){var k={};return e.forEach(x.inEdges(T),function(A){k[A.v]=(k[A.v]||0)+x.edge(A).weight}),k});return e.zipObject(x.nodes(),C)}function l(x,C){var T=x.x,k=x.y,A=C.x-T,M=C.y-k,_=x.width/2,R=x.height/2;if(!A&&!M)throw new Error("Not possible to find intersection inside of the rectangle");var O,I;return Math.abs(M)*_>Math.abs(A)*R?(M<0&&(R=-R),O=R*A/M,I=R):(A<0&&(_=-_),O=_,I=_*M/A),{x:T+O,y:k+I}}function c(x){var C=e.map(e.range(g(x)+1),function(){return[]});return e.forEach(x.nodes(),function(T){var k=x.node(T),A=k.rank;e.isUndefined(A)||(C[A][k.order]=T)}),C}function f(x){var C=e.min(e.map(x.nodes(),function(T){return x.node(T).rank}));e.forEach(x.nodes(),function(T){var k=x.node(T);e.has(k,"rank")&&(k.rank-=C)})}function h(x){var C=e.min(e.map(x.nodes(),function(M){return x.node(M).rank})),T=[];e.forEach(x.nodes(),function(M){var _=x.node(M).rank-C;T[_]||(T[_]=[]),T[_].push(M)});var k=0,A=x.graph().nodeRankFactor;e.forEach(T,function(M,_){e.isUndefined(M)&&_%A!==0?--k:k&&e.forEach(M,function(R){x.node(R).rank+=k})})}function p(x,C,T,k){var A={width:0,height:0};return arguments.length>=4&&(A.rank=T,A.order=k),n(x,"border",A,C)}function g(x){return e.max(e.map(x.nodes(),function(C){var T=x.node(C).rank;if(!e.isUndefined(T))return T}))}function y(x,C){var T={lhs:[],rhs:[]};return e.forEach(x,function(k){C(k)?T.lhs.push(k):T.rhs.push(k)}),T}function b(x,C){var T=e.now();try{return C()}finally{console.log(x+" time: "+(e.now()-T)+"ms")}}function S(x,C){return C()}return Fw}var Uw,DP;function Afe(){if(DP)return Uw;DP=1;var e=xt(),t=Hn();Uw={run:n,undo:i};function n(s){s.graph().dummyChains=[],e.forEach(s.edges(),function(o){r(s,o)})}function r(s,o){var l=o.v,c=s.node(l).rank,f=o.w,h=s.node(f).rank,p=o.name,g=s.edge(o),y=g.labelRank;if(h!==c+1){s.removeEdge(o);var b,S,x;for(x=0,++c;c<h;++x,++c)g.points=[],S={width:0,height:0,edgeLabel:g,edgeObj:o,rank:c},b=t.addDummyNode(s,"edge",S,"_d"),c===y&&(S.width=g.width,S.height=g.height,S.dummy="edge-label",S.labelpos=g.labelpos),s.setEdge(l,b,{weight:g.weight},p),x===0&&s.graph().dummyChains.push(b),l=b;s.setEdge(l,f,{weight:g.weight},p)}}function i(s){e.forEach(s.graph().dummyChains,function(o){var l=s.node(o),c=l.edgeLabel,f;for(s.setEdge(l.edgeObj,c);l.dummy;)f=s.successors(o)[0],s.removeNode(o),c.points.push({x:l.x,y:l.y}),l.dummy==="edge-label"&&(c.x=l.x,c.y=l.y,c.width=l.width,c.height=l.height),o=f,l=s.node(o)})}return Uw}var $w,OP;function Np(){if(OP)return $w;OP=1;var e=xt();$w={longestPath:t,slack:n};function t(r){var i={};function s(o){var l=r.node(o);if(e.has(i,o))return l.rank;i[o]=!0;var c=e.min(e.map(r.outEdges(o),function(f){return s(f.w)-r.edge(f).minlen}));return(c===Number.POSITIVE_INFINITY||c===void 0||c===null)&&(c=0),l.rank=c}e.forEach(r.sources(),s)}function n(r,i){return r.node(i.w).rank-r.node(i.v).rank-r.edge(i).minlen}return $w}var Gw,jP;function OV(){if(jP)return Gw;jP=1;var e=xt(),t=Ir().Graph,n=Np().slack;Gw=r;function r(l){var c=new t({directed:!1}),f=l.nodes()[0],h=l.nodeCount();c.setNode(f,{});for(var p,g;i(c,l)<h;)p=s(c,l),g=c.hasNode(p.v)?n(l,p):-n(l,p),o(c,l,g);return c}function i(l,c){function f(h){e.forEach(c.nodeEdges(h),function(p){var g=p.v,y=h===g?p.w:g;!l.hasNode(y)&&!n(c,p)&&(l.setNode(y,{}),l.setEdge(h,y,{}),f(y))})}return e.forEach(l.nodes(),f),l.nodeCount()}function s(l,c){return e.minBy(c.edges(),function(f){if(l.hasNode(f.v)!==l.hasNode(f.w))return n(c,f)})}function o(l,c,f){e.forEach(l.nodes(),function(h){c.node(h).rank+=f})}return Gw}var Kw,LP;function Mfe(){if(LP)return Kw;LP=1;var e=xt(),t=OV(),n=Np().slack,r=Np().longestPath,i=Ir().alg.preorder,s=Ir().alg.postorder,o=Hn().simplify;Kw=l,l.initLowLimValues=p,l.initCutValues=c,l.calcCutValue=h,l.leaveEdge=y,l.enterEdge=b,l.exchangeEdges=S;function l(k){k=o(k),r(k);var A=t(k);p(A),c(A,k);for(var M,_;M=y(A);)_=b(A,k,M),S(A,k,M,_)}function c(k,A){var M=s(k,k.nodes());M=M.slice(0,M.length-1),e.forEach(M,function(_){f(k,A,_)})}function f(k,A,M){var _=k.node(M),R=_.parent;k.edge(M,R).cutvalue=h(k,A,M)}function h(k,A,M){var _=k.node(M),R=_.parent,O=!0,I=A.edge(M,R),$=0;return I||(O=!1,I=A.edge(R,M)),$=I.weight,e.forEach(A.nodeEdges(M),function(q){var U=q.v===M,X=U?q.w:q.v;if(X!==R){var B=U===O,F=A.edge(q).weight;if($+=B?F:-F,C(k,M,X)){var j=k.edge(M,X).cutvalue;$+=B?-j:j}}}),$}function p(k,A){arguments.length<2&&(A=k.nodes()[0]),g(k,{},1,A)}function g(k,A,M,_,R){var O=M,I=k.node(_);return A[_]=!0,e.forEach(k.neighbors(_),function($){e.has(A,$)||(M=g(k,A,M,$,_))}),I.low=O,I.lim=M++,R?I.parent=R:delete I.parent,M}function y(k){return e.find(k.edges(),function(A){return k.edge(A).cutvalue<0})}function b(k,A,M){var _=M.v,R=M.w;A.hasEdge(_,R)||(_=M.w,R=M.v);var O=k.node(_),I=k.node(R),$=O,q=!1;O.lim>I.lim&&($=I,q=!0);var U=e.filter(A.edges(),function(X){return q===T(k,k.node(X.v),$)&&q!==T(k,k.node(X.w),$)});return e.minBy(U,function(X){return n(A,X)})}function S(k,A,M,_){var R=M.v,O=M.w;k.removeEdge(R,O),k.setEdge(_.v,_.w,{}),p(k),c(k,A),x(k,A)}function x(k,A){var M=e.find(k.nodes(),function(R){return!A.node(R).parent}),_=i(k,M);_=_.slice(1),e.forEach(_,function(R){var O=k.node(R).parent,I=A.edge(R,O),$=!1;I||(I=A.edge(O,R),$=!0),A.node(R).rank=A.node(O).rank+($?I.minlen:-I.minlen)})}function C(k,A,M){return k.hasEdge(A,M)}function T(k,A,M){return M.low<=A.lim&&A.lim<=M.lim}return Kw}var Yw,PP;function Nfe(){if(PP)return Yw;PP=1;var e=Np(),t=e.longestPath,n=OV(),r=Mfe();Yw=i;function i(c){switch(c.graph().ranker){case"network-simplex":l(c);break;case"tight-tree":o(c);break;case"longest-path":s(c);break;default:l(c)}}var s=t;function o(c){t(c),n(c)}function l(c){r(c)}return Yw}var Ww,BP;function _fe(){if(BP)return Ww;BP=1;var e=xt();Ww=t;function t(i){var s=r(i);e.forEach(i.graph().dummyChains,function(o){for(var l=i.node(o),c=l.edgeObj,f=n(i,s,c.v,c.w),h=f.path,p=f.lca,g=0,y=h[g],b=!0;o!==c.w;){if(l=i.node(o),b){for(;(y=h[g])!==p&&i.node(y).maxRank<l.rank;)g++;y===p&&(b=!1)}if(!b){for(;g<h.length-1&&i.node(y=h[g+1]).minRank<=l.rank;)g++;y=h[g]}i.setParent(o,y),o=i.successors(o)[0]}})}function n(i,s,o,l){var c=[],f=[],h=Math.min(s[o].low,s[l].low),p=Math.max(s[o].lim,s[l].lim),g,y;g=o;do g=i.parent(g),c.push(g);while(g&&(s[g].low>h||p>s[g].lim));for(y=g,g=l;(g=i.parent(g))!==y;)f.push(g);return{path:c.concat(f.reverse()),lca:y}}function r(i){var s={},o=0;function l(c){var f=o;e.forEach(i.children(c),l),s[c]={low:f,lim:o++}}return e.forEach(i.children(),l),s}return Ww}var Xw,IP;function Rfe(){if(IP)return Xw;IP=1;var e=xt(),t=Hn();Xw={run:n,cleanup:o};function n(l){var c=t.addDummyNode(l,"root",{},"_root"),f=i(l),h=e.max(e.values(f))-1,p=2*h+1;l.graph().nestingRoot=c,e.forEach(l.edges(),function(y){l.edge(y).minlen*=p});var g=s(l)+1;e.forEach(l.children(),function(y){r(l,c,p,g,h,f,y)}),l.graph().nodeRankFactor=p}function r(l,c,f,h,p,g,y){var b=l.children(y);if(!b.length){y!==c&&l.setEdge(c,y,{weight:0,minlen:f});return}var S=t.addBorderNode(l,"_bt"),x=t.addBorderNode(l,"_bb"),C=l.node(y);l.setParent(S,y),C.borderTop=S,l.setParent(x,y),C.borderBottom=x,e.forEach(b,function(T){r(l,c,f,h,p,g,T);var k=l.node(T),A=k.borderTop?k.borderTop:T,M=k.borderBottom?k.borderBottom:T,_=k.borderTop?h:2*h,R=A!==M?1:p-g[y]+1;l.setEdge(S,A,{weight:_,minlen:R,nestingEdge:!0}),l.setEdge(M,x,{weight:_,minlen:R,nestingEdge:!0})}),l.parent(y)||l.setEdge(c,S,{weight:0,minlen:p+g[y]})}function i(l){var c={};function f(h,p){var g=l.children(h);g&&g.length&&e.forEach(g,function(y){f(y,p+1)}),c[h]=p}return e.forEach(l.children(),function(h){f(h,1)}),c}function s(l){return e.reduce(l.edges(),function(c,f){return c+l.edge(f).weight},0)}function o(l){var c=l.graph();l.removeNode(c.nestingRoot),delete c.nestingRoot,e.forEach(l.edges(),function(f){var h=l.edge(f);h.nestingEdge&&l.removeEdge(f)})}return Xw}var Zw,zP;function Dfe(){if(zP)return Zw;zP=1;var e=xt(),t=Hn();Zw=n;function n(i){function s(o){var l=i.children(o),c=i.node(o);if(l.length&&e.forEach(l,s),e.has(c,"minRank")){c.borderLeft=[],c.borderRight=[];for(var f=c.minRank,h=c.maxRank+1;f<h;++f)r(i,"borderLeft","_bl",o,c,f),r(i,"borderRight","_br",o,c,f)}}e.forEach(i.children(),s)}function r(i,s,o,l,c,f){var h={width:0,height:0,rank:f,borderType:s},p=c[s][f-1],g=t.addDummyNode(i,"border",h,o);c[s][f]=g,i.setParent(g,l),p&&i.setEdge(p,g,{weight:1})}return Zw}var Qw,qP;function Ofe(){if(qP)return Qw;qP=1;var e=xt();Qw={adjust:t,undo:n};function t(f){var h=f.graph().rankdir.toLowerCase();(h==="lr"||h==="rl")&&r(f)}function n(f){var h=f.graph().rankdir.toLowerCase();(h==="bt"||h==="rl")&&s(f),(h==="lr"||h==="rl")&&(l(f),r(f))}function r(f){e.forEach(f.nodes(),function(h){i(f.node(h))}),e.forEach(f.edges(),function(h){i(f.edge(h))})}function i(f){var h=f.width;f.width=f.height,f.height=h}function s(f){e.forEach(f.nodes(),function(h){o(f.node(h))}),e.forEach(f.edges(),function(h){var p=f.edge(h);e.forEach(p.points,o),e.has(p,"y")&&o(p)})}function o(f){f.y=-f.y}function l(f){e.forEach(f.nodes(),function(h){c(f.node(h))}),e.forEach(f.edges(),function(h){var p=f.edge(h);e.forEach(p.points,c),e.has(p,"x")&&c(p)})}function c(f){var h=f.x;f.x=f.y,f.y=h}return Qw}var Jw,VP;function jfe(){if(VP)return Jw;VP=1;var e=xt();Jw=t;function t(n){var r={},i=e.filter(n.nodes(),function(f){return!n.children(f).length}),s=e.max(e.map(i,function(f){return n.node(f).rank})),o=e.map(e.range(s+1),function(){return[]});function l(f){if(!e.has(r,f)){r[f]=!0;var h=n.node(f);o[h.rank].push(f),e.forEach(n.successors(f),l)}}var c=e.sortBy(i,function(f){return n.node(f).rank});return e.forEach(c,l),o}return Jw}var eS,HP;function Lfe(){if(HP)return eS;HP=1;var e=xt();eS=t;function t(r,i){for(var s=0,o=1;o<i.length;++o)s+=n(r,i[o-1],i[o]);return s}function n(r,i,s){for(var o=e.zipObject(s,e.map(s,function(g,y){return y})),l=e.flatten(e.map(i,function(g){return e.sortBy(e.map(r.outEdges(g),function(y){return{pos:o[y.w],weight:r.edge(y).weight}}),"pos")}),!0),c=1;c<s.length;)c<<=1;var f=2*c-1;c-=1;var h=e.map(new Array(f),function(){return 0}),p=0;return e.forEach(l.forEach(function(g){var y=g.pos+c;h[y]+=g.weight;for(var b=0;y>0;)y%2&&(b+=h[y+1]),y=y-1>>1,h[y]+=g.weight;p+=g.weight*b})),p}return eS}var tS,FP;function Pfe(){if(FP)return tS;FP=1;var e=xt();tS=t;function t(n,r){return e.map(r,function(i){var s=n.inEdges(i);if(s.length){var o=e.reduce(s,function(l,c){var f=n.edge(c),h=n.node(c.v);return{sum:l.sum+f.weight*h.order,weight:l.weight+f.weight}},{sum:0,weight:0});return{v:i,barycenter:o.sum/o.weight,weight:o.weight}}else return{v:i}})}return tS}var nS,UP;function Bfe(){if(UP)return nS;UP=1;var e=xt();nS=t;function t(i,s){var o={};e.forEach(i,function(c,f){var h=o[c.v]={indegree:0,in:[],out:[],vs:[c.v],i:f};e.isUndefined(c.barycenter)||(h.barycenter=c.barycenter,h.weight=c.weight)}),e.forEach(s.edges(),function(c){var f=o[c.v],h=o[c.w];!e.isUndefined(f)&&!e.isUndefined(h)&&(h.indegree++,f.out.push(o[c.w]))});var l=e.filter(o,function(c){return!c.indegree});return n(l)}function n(i){var s=[];function o(f){return function(h){h.merged||(e.isUndefined(h.barycenter)||e.isUndefined(f.barycenter)||h.barycenter>=f.barycenter)&&r(f,h)}}function l(f){return function(h){h.in.push(f),--h.indegree===0&&i.push(h)}}for(;i.length;){var c=i.pop();s.push(c),e.forEach(c.in.reverse(),o(c)),e.forEach(c.out,l(c))}return e.map(e.filter(s,function(f){return!f.merged}),function(f){return e.pick(f,["vs","i","barycenter","weight"])})}function r(i,s){var o=0,l=0;i.weight&&(o+=i.barycenter*i.weight,l+=i.weight),s.weight&&(o+=s.barycenter*s.weight,l+=s.weight),i.vs=s.vs.concat(i.vs),i.barycenter=o/l,i.weight=l,i.i=Math.min(s.i,i.i),s.merged=!0}return nS}var rS,$P;function Ife(){if($P)return rS;$P=1;var e=xt(),t=Hn();rS=n;function n(s,o){var l=t.partition(s,function(S){return e.has(S,"barycenter")}),c=l.lhs,f=e.sortBy(l.rhs,function(S){return-S.i}),h=[],p=0,g=0,y=0;c.sort(i(!!o)),y=r(h,f,y),e.forEach(c,function(S){y+=S.vs.length,h.push(S.vs),p+=S.barycenter*S.weight,g+=S.weight,y=r(h,f,y)});var b={vs:e.flatten(h,!0)};return g&&(b.barycenter=p/g,b.weight=g),b}function r(s,o,l){for(var c;o.length&&(c=e.last(o)).i<=l;)o.pop(),s.push(c.vs),l++;return l}function i(s){return function(o,l){return o.barycenter<l.barycenter?-1:o.barycenter>l.barycenter?1:s?l.i-o.i:o.i-l.i}}return rS}var iS,GP;function zfe(){if(GP)return iS;GP=1;var e=xt(),t=Pfe(),n=Bfe(),r=Ife();iS=i;function i(l,c,f,h){var p=l.children(c),g=l.node(c),y=g?g.borderLeft:void 0,b=g?g.borderRight:void 0,S={};y&&(p=e.filter(p,function(M){return M!==y&&M!==b}));var x=t(l,p);e.forEach(x,function(M){if(l.children(M.v).length){var _=i(l,M.v,f,h);S[M.v]=_,e.has(_,"barycenter")&&o(M,_)}});var C=n(x,f);s(C,S);var T=r(C,h);if(y&&(T.vs=e.flatten([y,T.vs,b],!0),l.predecessors(y).length)){var k=l.node(l.predecessors(y)[0]),A=l.node(l.predecessors(b)[0]);e.has(T,"barycenter")||(T.barycenter=0,T.weight=0),T.barycenter=(T.barycenter*T.weight+k.order+A.order)/(T.weight+2),T.weight+=2}return T}function s(l,c){e.forEach(l,function(f){f.vs=e.flatten(f.vs.map(function(h){return c[h]?c[h].vs:h}),!0)})}function o(l,c){e.isUndefined(l.barycenter)?(l.barycenter=c.barycenter,l.weight=c.weight):(l.barycenter=(l.barycenter*l.weight+c.barycenter*c.weight)/(l.weight+c.weight),l.weight+=c.weight)}return iS}var sS,KP;function qfe(){if(KP)return sS;KP=1;var e=xt(),t=Ir().Graph;sS=n;function n(i,s,o){var l=r(i),c=new t({compound:!0}).setGraph({root:l}).setDefaultNodeLabel(function(f){return i.node(f)});return e.forEach(i.nodes(),function(f){var h=i.node(f),p=i.parent(f);(h.rank===s||h.minRank<=s&&s<=h.maxRank)&&(c.setNode(f),c.setParent(f,p||l),e.forEach(i[o](f),function(g){var y=g.v===f?g.w:g.v,b=c.edge(y,f),S=e.isUndefined(b)?0:b.weight;c.setEdge(y,f,{weight:i.edge(g).weight+S})}),e.has(h,"minRank")&&c.setNode(f,{borderLeft:h.borderLeft[s],borderRight:h.borderRight[s]}))}),c}function r(i){for(var s;i.hasNode(s=e.uniqueId("_root")););return s}return sS}var oS,YP;function Vfe(){if(YP)return oS;YP=1;var e=xt();oS=t;function t(n,r,i){var s={},o;e.forEach(i,function(l){for(var c=n.parent(l),f,h;c;){if(f=n.parent(c),f?(h=s[f],s[f]=c):(h=o,o=c),h&&h!==c){r.setEdge(h,c);return}c=f}})}return oS}var aS,WP;function Hfe(){if(WP)return aS;WP=1;var e=xt(),t=jfe(),n=Lfe(),r=zfe(),i=qfe(),s=Vfe(),o=Ir().Graph,l=Hn();aS=c;function c(g){var y=l.maxRank(g),b=f(g,e.range(1,y+1),"inEdges"),S=f(g,e.range(y-1,-1,-1),"outEdges"),x=t(g);p(g,x);for(var C=Number.POSITIVE_INFINITY,T,k=0,A=0;A<4;++k,++A){h(k%2?b:S,k%4>=2),x=l.buildLayerMatrix(g);var M=n(g,x);M<C&&(A=0,T=e.cloneDeep(x),C=M)}p(g,T)}function f(g,y,b){return e.map(y,function(S){return i(g,S,b)})}function h(g,y){var b=new o;e.forEach(g,function(S){var x=S.graph().root,C=r(S,x,b,y);e.forEach(C.vs,function(T,k){S.node(T).order=k}),s(S,b,C.vs)})}function p(g,y){e.forEach(y,function(b){e.forEach(b,function(S,x){g.node(S).order=x})})}return aS}var lS,XP;function Ffe(){if(XP)return lS;XP=1;var e=xt(),t=Ir().Graph,n=Hn();lS={positionX:b,findType1Conflicts:r,findType2Conflicts:i,addConflict:o,hasConflict:l,verticalAlignment:c,horizontalCompaction:f,alignCoordinates:g,findSmallestWidthAlignment:p,balance:y};function r(C,T){var k={};function A(M,_){var R=0,O=0,I=M.length,$=e.last(_);return e.forEach(_,function(q,U){var X=s(C,q),B=X?C.node(X).order:I;(X||q===$)&&(e.forEach(_.slice(O,U+1),function(F){e.forEach(C.predecessors(F),function(j){var z=C.node(j),W=z.order;(W<R||B<W)&&!(z.dummy&&C.node(F).dummy)&&o(k,j,F)})}),O=U+1,R=B)}),_}return e.reduce(T,A),k}function i(C,T){var k={};function A(_,R,O,I,$){var q;e.forEach(e.range(R,O),function(U){q=_[U],C.node(q).dummy&&e.forEach(C.predecessors(q),function(X){var B=C.node(X);B.dummy&&(B.order<I||B.order>$)&&o(k,X,q)})})}function M(_,R){var O=-1,I,$=0;return e.forEach(R,function(q,U){if(C.node(q).dummy==="border"){var X=C.predecessors(q);X.length&&(I=C.node(X[0]).order,A(R,$,U,O,I),$=U,O=I)}A(R,$,R.length,I,_.length)}),R}return e.reduce(T,M),k}function s(C,T){if(C.node(T).dummy)return e.find(C.predecessors(T),function(k){return C.node(k).dummy})}function o(C,T,k){if(T>k){var A=T;T=k,k=A}var M=C[T];M||(C[T]=M={}),M[k]=!0}function l(C,T,k){if(T>k){var A=T;T=k,k=A}return e.has(C[T],k)}function c(C,T,k,A){var M={},_={},R={};return e.forEach(T,function(O){e.forEach(O,function(I,$){M[I]=I,_[I]=I,R[I]=$})}),e.forEach(T,function(O){var I=-1;e.forEach(O,function($){var q=A($);if(q.length){q=e.sortBy(q,function(j){return R[j]});for(var U=(q.length-1)/2,X=Math.floor(U),B=Math.ceil(U);X<=B;++X){var F=q[X];_[$]===$&&I<R[F]&&!l(k,$,F)&&(_[F]=$,_[$]=M[$]=M[F],I=R[F])}}})}),{root:M,align:_}}function f(C,T,k,A,M){var _={},R=h(C,T,k,M),O=M?"borderLeft":"borderRight";function I(U,X){for(var B=R.nodes(),F=B.pop(),j={};F;)j[F]?U(F):(j[F]=!0,B.push(F),B=B.concat(X(F))),F=B.pop()}function $(U){_[U]=R.inEdges(U).reduce(function(X,B){return Math.max(X,_[B.v]+R.edge(B))},0)}function q(U){var X=R.outEdges(U).reduce(function(F,j){return Math.min(F,_[j.w]-R.edge(j))},Number.POSITIVE_INFINITY),B=C.node(U);X!==Number.POSITIVE_INFINITY&&B.borderType!==O&&(_[U]=Math.max(_[U],X))}return I($,R.predecessors.bind(R)),I(q,R.successors.bind(R)),e.forEach(A,function(U){_[U]=_[k[U]]}),_}function h(C,T,k,A){var M=new t,_=C.graph(),R=S(_.nodesep,_.edgesep,A);return e.forEach(T,function(O){var I;e.forEach(O,function($){var q=k[$];if(M.setNode(q),I){var U=k[I],X=M.edge(U,q);M.setEdge(U,q,Math.max(R(C,$,I),X||0))}I=$})}),M}function p(C,T){return e.minBy(e.values(T),function(k){var A=Number.NEGATIVE_INFINITY,M=Number.POSITIVE_INFINITY;return e.forIn(k,function(_,R){var O=x(C,R)/2;A=Math.max(_+O,A),M=Math.min(_-O,M)}),A-M})}function g(C,T){var k=e.values(T),A=e.min(k),M=e.max(k);e.forEach(["u","d"],function(_){e.forEach(["l","r"],function(R){var O=_+R,I=C[O],$;if(I!==T){var q=e.values(I);$=R==="l"?A-e.min(q):M-e.max(q),$&&(C[O]=e.mapValues(I,function(U){return U+$}))}})})}function y(C,T){return e.mapValues(C.ul,function(k,A){if(T)return C[T.toLowerCase()][A];var M=e.sortBy(e.map(C,A));return(M[1]+M[2])/2})}function b(C){var T=n.buildLayerMatrix(C),k=e.merge(r(C,T),i(C,T)),A={},M;e.forEach(["u","d"],function(R){M=R==="u"?T:e.values(T).reverse(),e.forEach(["l","r"],function(O){O==="r"&&(M=e.map(M,function(U){return e.values(U).reverse()}));var I=(R==="u"?C.predecessors:C.successors).bind(C),$=c(C,M,k,I),q=f(C,M,$.root,$.align,O==="r");O==="r"&&(q=e.mapValues(q,function(U){return-U})),A[R+O]=q})});var _=p(C,A);return g(A,_),y(A,C.graph().align)}function S(C,T,k){return function(A,M,_){var R=A.node(M),O=A.node(_),I=0,$;if(I+=R.width/2,e.has(R,"labelpos"))switch(R.labelpos.toLowerCase()){case"l":$=-R.width/2;break;case"r":$=R.width/2;break}if($&&(I+=k?$:-$),$=0,I+=(R.dummy?T:C)/2,I+=(O.dummy?T:C)/2,I+=O.width/2,e.has(O,"labelpos"))switch(O.labelpos.toLowerCase()){case"l":$=O.width/2;break;case"r":$=-O.width/2;break}return $&&(I+=k?$:-$),$=0,I}}function x(C,T){return C.node(T).width}return lS}var uS,ZP;function Ufe(){if(ZP)return uS;ZP=1;var e=xt(),t=Hn(),n=Ffe().positionX;uS=r;function r(s){s=t.asNonCompoundGraph(s),i(s),e.forEach(n(s),function(o,l){s.node(l).x=o})}function i(s){var o=t.buildLayerMatrix(s),l=s.graph().ranksep,c=0;e.forEach(o,function(f){var h=e.max(e.map(f,function(p){return s.node(p).height}));e.forEach(f,function(p){s.node(p).y=c+h/2}),c+=h+l})}return uS}var cS,QP;function $fe(){if(QP)return cS;QP=1;var e=xt(),t=Tfe(),n=Afe(),r=Nfe(),i=Hn().normalizeRanks,s=_fe(),o=Hn().removeEmptyRanks,l=Rfe(),c=Dfe(),f=Ofe(),h=Hfe(),p=Ufe(),g=Hn(),y=Ir().Graph;cS=b;function b(V,G){var Q=G&&G.debugTiming?g.time:g.notime;Q("layout",function(){var ae=Q("  buildLayoutGraph",function(){return I(V)});Q("  runLayout",function(){S(ae,Q)}),Q("  updateInputGraph",function(){x(V,ae)})})}function S(V,G){G("    makeSpaceForEdgeLabels",function(){$(V)}),G("    removeSelfEdges",function(){J(V)}),G("    acyclic",function(){t.run(V)}),G("    nestingGraph.run",function(){l.run(V)}),G("    rank",function(){r(g.asNonCompoundGraph(V))}),G("    injectEdgeLabelProxies",function(){q(V)}),G("    removeEmptyRanks",function(){o(V)}),G("    nestingGraph.cleanup",function(){l.cleanup(V)}),G("    normalizeRanks",function(){i(V)}),G("    assignRankMinMax",function(){U(V)}),G("    removeEdgeLabelProxies",function(){X(V)}),G("    normalize.run",function(){n.run(V)}),G("    parentDummyChains",function(){s(V)}),G("    addBorderSegments",function(){c(V)}),G("    order",function(){h(V)}),G("    insertSelfEdges",function(){L(V)}),G("    adjustCoordinateSystem",function(){f.adjust(V)}),G("    position",function(){p(V)}),G("    positionSelfEdges",function(){K(V)}),G("    removeBorderNodes",function(){W(V)}),G("    normalize.undo",function(){n.undo(V)}),G("    fixupEdgeLabelCoords",function(){j(V)}),G("    undoCoordinateSystem",function(){f.undo(V)}),G("    translateGraph",function(){B(V)}),G("    assignNodeIntersects",function(){F(V)}),G("    reversePoints",function(){z(V)}),G("    acyclic.undo",function(){t.undo(V)})}function x(V,G){e.forEach(V.nodes(),function(Q){var ae=V.node(Q),se=G.node(Q);ae&&(ae.x=se.x,ae.y=se.y,G.children(Q).length&&(ae.width=se.width,ae.height=se.height))}),e.forEach(V.edges(),function(Q){var ae=V.edge(Q),se=G.edge(Q);ae.points=se.points,e.has(se,"x")&&(ae.x=se.x,ae.y=se.y)}),V.graph().width=G.graph().width,V.graph().height=G.graph().height}var C=["nodesep","edgesep","ranksep","marginx","marginy"],T={ranksep:50,edgesep:20,nodesep:50,rankdir:"tb"},k=["acyclicer","ranker","rankdir","align"],A=["width","height"],M={width:0,height:0},_=["minlen","weight","width","height","labeloffset"],R={minlen:1,weight:1,width:0,height:0,labeloffset:10,labelpos:"r"},O=["labelpos"];function I(V){var G=new y({multigraph:!0,compound:!0}),Q=le(V.graph());return G.setGraph(e.merge({},T,re(Q,C),e.pick(Q,k))),e.forEach(V.nodes(),function(ae){var se=le(V.node(ae));G.setNode(ae,e.defaults(re(se,A),M)),G.setParent(ae,V.parent(ae))}),e.forEach(V.edges(),function(ae){var se=le(V.edge(ae));G.setEdge(ae,e.merge({},R,re(se,_),e.pick(se,O)))}),G}function $(V){var G=V.graph();G.ranksep/=2,e.forEach(V.edges(),function(Q){var ae=V.edge(Q);ae.minlen*=2,ae.labelpos.toLowerCase()!=="c"&&(G.rankdir==="TB"||G.rankdir==="BT"?ae.width+=ae.labeloffset:ae.height+=ae.labeloffset)})}function q(V){e.forEach(V.edges(),function(G){var Q=V.edge(G);if(Q.width&&Q.height){var ae=V.node(G.v),se=V.node(G.w),ge={rank:(se.rank-ae.rank)/2+ae.rank,e:G};g.addDummyNode(V,"edge-proxy",ge,"_ep")}})}function U(V){var G=0;e.forEach(V.nodes(),function(Q){var ae=V.node(Q);ae.borderTop&&(ae.minRank=V.node(ae.borderTop).rank,ae.maxRank=V.node(ae.borderBottom).rank,G=e.max(G,ae.maxRank))}),V.graph().maxRank=G}function X(V){e.forEach(V.nodes(),function(G){var Q=V.node(G);Q.dummy==="edge-proxy"&&(V.edge(Q.e).labelRank=Q.rank,V.removeNode(G))})}function B(V){var G=Number.POSITIVE_INFINITY,Q=0,ae=Number.POSITIVE_INFINITY,se=0,ge=V.graph(),Ce=ge.marginx||0,De=ge.marginy||0;function ke(Te){var be=Te.x,we=Te.y,tt=Te.width,Me=Te.height;G=Math.min(G,be-tt/2),Q=Math.max(Q,be+tt/2),ae=Math.min(ae,we-Me/2),se=Math.max(se,we+Me/2)}e.forEach(V.nodes(),function(Te){ke(V.node(Te))}),e.forEach(V.edges(),function(Te){var be=V.edge(Te);e.has(be,"x")&&ke(be)}),G-=Ce,ae-=De,e.forEach(V.nodes(),function(Te){var be=V.node(Te);be.x-=G,be.y-=ae}),e.forEach(V.edges(),function(Te){var be=V.edge(Te);e.forEach(be.points,function(we){we.x-=G,we.y-=ae}),e.has(be,"x")&&(be.x-=G),e.has(be,"y")&&(be.y-=ae)}),ge.width=Q-G+Ce,ge.height=se-ae+De}function F(V){e.forEach(V.edges(),function(G){var Q=V.edge(G),ae=V.node(G.v),se=V.node(G.w),ge,Ce;Q.points?(ge=Q.points[0],Ce=Q.points[Q.points.length-1]):(Q.points=[],ge=se,Ce=ae),Q.points.unshift(g.intersectRect(ae,ge)),Q.points.push(g.intersectRect(se,Ce))})}function j(V){e.forEach(V.edges(),function(G){var Q=V.edge(G);if(e.has(Q,"x"))switch((Q.labelpos==="l"||Q.labelpos==="r")&&(Q.width-=Q.labeloffset),Q.labelpos){case"l":Q.x-=Q.width/2+Q.labeloffset;break;case"r":Q.x+=Q.width/2+Q.labeloffset;break}})}function z(V){e.forEach(V.edges(),function(G){var Q=V.edge(G);Q.reversed&&Q.points.reverse()})}function W(V){e.forEach(V.nodes(),function(G){if(V.children(G).length){var Q=V.node(G),ae=V.node(Q.borderTop),se=V.node(Q.borderBottom),ge=V.node(e.last(Q.borderLeft)),Ce=V.node(e.last(Q.borderRight));Q.width=Math.abs(Ce.x-ge.x),Q.height=Math.abs(se.y-ae.y),Q.x=ge.x+Q.width/2,Q.y=ae.y+Q.height/2}}),e.forEach(V.nodes(),function(G){V.node(G).dummy==="border"&&V.removeNode(G)})}function J(V){e.forEach(V.edges(),function(G){if(G.v===G.w){var Q=V.node(G.v);Q.selfEdges||(Q.selfEdges=[]),Q.selfEdges.push({e:G,label:V.edge(G)}),V.removeEdge(G)}})}function L(V){var G=g.buildLayerMatrix(V);e.forEach(G,function(Q){var ae=0;e.forEach(Q,function(se,ge){var Ce=V.node(se);Ce.order=ge+ae,e.forEach(Ce.selfEdges,function(De){g.addDummyNode(V,"selfedge",{width:De.label.width,height:De.label.height,rank:Ce.rank,order:ge+ ++ae,e:De.e,label:De.label},"_se")}),delete Ce.selfEdges})})}function K(V){e.forEach(V.nodes(),function(G){var Q=V.node(G);if(Q.dummy==="selfedge"){var ae=V.node(Q.e.v),se=ae.x+ae.width/2,ge=ae.y,Ce=Q.x-se,De=ae.height/2;V.setEdge(Q.e,Q.label),V.removeNode(G),Q.label.points=[{x:se+2*Ce/3,y:ge-De},{x:se+5*Ce/6,y:ge-De},{x:se+Ce,y:ge},{x:se+5*Ce/6,y:ge+De},{x:se+2*Ce/3,y:ge+De}],Q.label.x=Q.x,Q.label.y=Q.y}})}function re(V,G){return e.mapValues(e.pick(V,G),Number)}function le(V){var G={};return e.forEach(V,function(Q,ae){G[ae.toLowerCase()]=Q}),G}return cS}var fS,JP;function Gfe(){if(JP)return fS;JP=1;var e=xt(),t=Hn(),n=Ir().Graph;fS={debugOrdering:r};function r(i){var s=t.buildLayerMatrix(i),o=new n({compound:!0,multigraph:!0}).setGraph({});return e.forEach(i.nodes(),function(l){o.setNode(l,{label:l}),o.setParent(l,"layer"+i.node(l).rank)}),e.forEach(i.edges(),function(l){o.setEdge(l.v,l.w,{},l.name)}),e.forEach(s,function(l,c){var f="layer"+c;o.setNode(f,{rank:"same"}),e.reduce(l,function(h,p){return o.setEdge(h,p,{style:"invis"}),p})}),o}return fS}var dS,e4;function Kfe(){return e4||(e4=1,dS="0.8.5"),dS}var hS,t4;function Yfe(){return t4||(t4=1,hS={graphlib:Ir(),layout:$fe(),debug:Gfe(),util:{time:Hn().time,notime:Hn().notime},version:Kfe()}),hS}var Wfe=Yfe();const nh=Yc(Wfe),Uu=[{id:"web-app",group:"Frontend",icon:"💻",label:"Web App",description:"Browser-based client",tags:["browser","client","frontend","spa","pwa","web application"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Web App",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"framework",label:"Framework",type:"select",default:"React",options:["React","Vue","Angular","Svelte"]},{key:"instances",label:"Instances",type:"number",default:3},{key:"cdn",label:"CDN Enabled",type:"boolean",default:!0},{key:"ssl",label:"SSL Enabled",type:"boolean",default:!0},{key:"staticAssets",label:"Static Assets (GB)",type:"number",default:50},{key:"logic",label:"Component Logic (Pseudo Code)",type:"textarea",placeholder:"submit -> validate -> call API -> show response",default:""}]},{id:"mobile-app",group:"Frontend",icon:"📱",label:"Mobile App",description:"iOS/Android client",tags:["ios","android","mobile","app","native","react native","flutter"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Mobile App",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",default:"",placeholder:"A brief description"},{key:"stack",label:"Tech Stack",type:"select",default:"React Native",options:["React Native","Flutter","Swift/Kotlin"]},{key:"pushNotifications",label:"Push Notifications",type:"boolean",default:!0},{key:"offlineSupport",label:"Offline Support",type:"boolean",default:!0},{key:"sessions",label:"Active Sessions (k)",type:"number",default:10}]},{id:"desktop-app",group:"Frontend",icon:"🖥️",label:"Desktop App",description:"Native / Electron client",tags:["desktop","electron","tauri","native","windows","mac","linux"],properties:[{key:"componentName",label:"Component Name",type:"text",default:"Desktop App",placeholder:"Enter component name"},{key:"description",label:"Description",type:"textarea",default:"",placeholder:"A brief description"},{key:"runtime",label:"Runtime",type:"select",default:"Electron",options:["Electron","Tauri","Native"]},{key:"autoUpdate",label:"Auto Update",type:"boolean",default:!0},{key:"bundledSizeMB",label:"Bundle Size (MB)",type:"number",default:120}]},{id:"database",group:"Data Layer",icon:"🗄️",label:"Database",description:"Relational/NoSQL data storage",tags:["db","rdbms","nosql","sql","postgres","mysql","mongodb","data","storage","persistence"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Database"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"type",label:"Database Type",type:"select",default:"RDBMS",options:["RDBMS","NoSQL","NewSQL","Time-Series","Graph"]},{key:"engine",label:"Engine",type:"select",default:"postgresql",options:["postgresql","mysql","mongodb","cassandra","dynamodb","cockroachdb"]},{key:"workload",label:"Workload Type",type:"select",default:"OLTP",options:["OLTP","OLAP","Hybrid"]},{key:"storageGB",label:"Storage (GB)",type:"number",default:100},{key:"sharding",label:"Sharding Strategy",type:"select",default:"None",options:["None","Hash-based","Range-based","Geographic"]},{key:"shards",label:"Number of Shards",type:"number",default:1},{key:"replication",label:"Replication Factor",type:"number",default:3},{key:"replicationMode",label:"Replication Mode",type:"select",default:"Async",options:["Sync","Async","Semi-Sync"]},{key:"multiAZ",label:"Multi-AZ",type:"boolean",default:!0},{key:"crossRegion",label:"Cross-Region Replication",type:"boolean",default:!1},{key:"backups",label:"Automatic Backups",type:"boolean",default:!0},{key:"pitr",label:"Point-in-Time Recovery",type:"boolean",default:!0},{key:"encryption",label:"Encryption at Rest",type:"boolean",default:!0},{key:"connectionPooling",label:"Connection Pooling",type:"boolean",default:!0},{key:"queryCache",label:"Query Cache Enabled",type:"boolean",default:!0},{key:"wal",label:"Write-Ahead Logging",type:"boolean",default:!0},{key:"rbac",label:"RBAC Enabled",type:"boolean",default:!0},{key:"auditLog",label:"Audit Trail",type:"boolean",default:!0}]},{id:"loadbalancer",group:"Networking",icon:"⚖️",label:"Load Balancer",description:"Traffic distribution & high availability",tags:["lb","alb","nlb","elb","traffic","distribution","nginx","haproxy","layer 4","layer 7"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Load Balancer"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"type",label:"Type",type:"select",default:"Layer 7 (Application)",options:["Layer 4 (Network)","Layer 7 (Application)","Global"]},{key:"algorithm",label:"Algorithm",type:"select",default:"round-robin",options:["round-robin","least-connections","ip-hash","weighted-round-robin","least-response-time"]},{key:"sslTermination",label:"SSL/TLS Termination",type:"boolean",default:!0},{key:"stickiness",label:"Session Stickiness",type:"boolean",default:!1},{key:"healthCheck",label:"Health Check",type:"boolean",default:!0},{key:"healthCheckInterval",label:"Health Check Interval (s)",type:"number",default:30},{key:"multiAZ",label:"Multi-AZ",type:"boolean",default:!0},{key:"accessLogs",label:"Access Logs",type:"boolean",default:!0},{key:"connectionDraining",label:"Connection Draining",type:"boolean",default:!0},{key:"ddosProtection",label:"DDoS Protection",type:"boolean",default:!0},{key:"waf",label:"WAF Enabled",type:"boolean",default:!1}]},{id:"cache",group:"Data Layer",icon:"⚡",label:"Cache",description:"In-memory fast data access",tags:["redis","memcached","in-memory","caching","performance","speed"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Cache"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"engine",label:"Engine",type:"select",default:"redis",options:["redis","memcached","hazelcast","aerospike"]},{key:"cacheStrategy",label:"Cache Strategy",type:"select",default:"write-through",options:["write-through","write-around","write-back","cache-aside"]},{key:"ttl",label:"TTL (seconds)",type:"number",default:3600},{key:"inMemory",label:"In Memory",type:"boolean",default:!0},{key:"eviction",label:"Eviction Policy",type:"select",default:"lru",options:["lru","lfu","fifo","mru","random","ttl-based","volatile-lru"]},{key:"replication",label:"Replication",type:"boolean",default:!0},{key:"clusterMode",label:"Cluster Mode",type:"boolean",default:!1},{key:"persistence",label:"Persistence (AOF/RDB)",type:"boolean",default:!1},{key:"encryption",label:"Encryption in Transit",type:"boolean",default:!0},{key:"maxMemoryGB",label:"Max Memory (GB)",type:"number",default:16}]},{id:"webserver",group:"Compute",icon:"🌐",label:"Web Server",description:"HTTP requests",tags:["http","server","nginx","apache","web","requests"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Web Server"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"instances",label:"Instances",type:"number",default:2},{key:"autoscale",label:"Autoscale",type:"boolean",default:!0},{key:"instanceType",label:"Instance Type",type:"select",default:"t3.medium",options:["t3.small","t3.medium","t3.large"]},{key:"gzip",label:"Gzip",type:"boolean",default:!0},{key:"connectionTimeout",label:"Connection Timeout (s)",type:"number",default:30}]},{id:"message-broker",group:"Messaging",icon:"📨",label:"Message Broker",description:"Pub/Sub message broker",tags:["kafka","rabbitmq","pubsub","messaging","broker","queue","mq"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Message Broker"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"partitions",label:"Partitions",type:"number",default:6},{key:"replication",label:"Replication Factor",type:"number",default:3},{key:"durable",label:"Durable (persist messages)",type:"boolean",default:!0},{key:"retention",label:"Retention (hours)",type:"number",default:168}]},{id:"auth-service",group:"Services",icon:"🔐",label:"Auth Service",description:"Authentication & session management",tags:["authentication","authorization","auth","oauth","jwt","sso","login","security"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Auth Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"oauth",label:"OAuth Enabled",type:"boolean",default:!0},{key:"sessions",label:"Session Store",type:"select",default:"redis",options:["redis","database","none"]},{key:"tokenTTL",label:"Token TTL (minutes)",type:"number",default:60},{key:"mfa",label:"MFA Required",type:"boolean",default:!1}]},{id:"cdn",group:"Delivery",icon:"🚀",label:"CDN",description:"Content delivery network",tags:["content delivery","cloudflare","akamai","fastly","edge","caching","cdn"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"CDN"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"Cloudflare",options:["Cloudflare","Akamai","Fastly","AWS CloudFront"]},{key:"ttl",label:"Edge TTL (seconds)",type:"number",default:3600},{key:"cacheInvalidation",label:"Cache Invalidation (manual)",type:"boolean",default:!0}]},{id:"search",group:"Services",icon:"🔎",label:"Search",description:"Search engine & indexing",tags:["elasticsearch","opensearch","search engine","indexing","full-text","lucene"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Search"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"engine",label:"Engine",type:"select",default:"elasticsearch",options:["elasticsearch","opensearch","meilisearch"]},{key:"replicas",label:"Replicas",type:"number",default:2},{key:"indexing",label:"Real-time indexing",type:"boolean",default:!0},{key:"shards",label:"Shards",type:"number",default:5}]},{id:"queue",group:"Messaging",icon:"📮",label:"Queue",description:"Task queue",tags:["task queue","job queue","sqs","celery","worker queue","async"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Queue"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"visibilityTimeout",label:"Visibility Timeout (seconds)",type:"number",default:30},{key:"maxRetries",label:"Max Retries",type:"number",default:5},{key:"durable",label:"Durable (persist tasks)",type:"boolean",default:!0},{key:"backoff",label:"Backoff Strategy",type:"select",default:"exponential",options:["fixed","linear","exponential"]}]},{id:"analytics",group:"Data Layer",icon:"📊",label:"Analytics",description:"Event analytics pipeline",tags:["data analytics","metrics","events","tracking","bi","business intelligence"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Analytics"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"retentionDays",label:"Retention (days)",type:"number",default:90},{key:"samplingRate",label:"Sampling Rate (%)",type:"number",default:100},{key:"realTime",label:"Real-time processing",type:"boolean",default:!0},{key:"storage",label:"Storage",type:"select",default:"s3",options:["s3","gcs","azure_blob"]}]},{id:"root-nameserver",group:"DNS & Network",icon:"🌍",label:"Root Nameserver",description:"Top-level DNS resolver",tags:["dns","nameserver","root","resolver","domain"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Root Nameserver"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"ttl",label:"TTL (seconds)",type:"number",default:172800},{key:"dnssec",label:"DNSSEC Enabled",type:"boolean",default:!0}]},{id:"tld-nameserver",group:"DNS & Network",icon:"🔗",label:"TLD Nameserver",description:"Top-level domain nameserver",tags:["dns","tld","top-level domain","nameserver",".com",".org"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"TLD Nameserver"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"tld",label:"TLD",type:"select",default:".com",options:[".com",".org",".net",".io",".dev"]},{key:"ttl",label:"TTL (seconds)",type:"number",default:86400}]},{id:"authoritative-nameserver",group:"DNS & Network",icon:"📡",label:"Authoritative Nameserver",description:"Domain-specific DNS server",tags:["dns","authoritative","nameserver","domain","records"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Authoritative Nameserver"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"records",label:"DNS Records",type:"number",default:100},{key:"ttl",label:"TTL (seconds)",type:"number",default:3600},{key:"anycast",label:"Anycast Enabled",type:"boolean",default:!0}]},{id:"isp",group:"DNS & Network",icon:"🌐",label:"ISP",description:"Internet Service Provider",tags:["internet","isp","network","provider","connectivity"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"ISP"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"dnsCache",label:"DNS Cache Enabled",type:"boolean",default:!0},{key:"bandwidth",label:"Bandwidth (Gbps)",type:"number",default:10}]},{id:"api-gateway",group:"Networking",icon:"🚪",label:"API Gateway",description:"Central API entry point",tags:["api","gateway","rest","graphql","entry point","routing","kong","apigee"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"API Gateway"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"inputValidation",label:"Input Validation",type:"boolean",default:!0},{key:"authentication",label:"Authentication",type:"select",default:"OAuth 2.0",options:["OAuth 2.0","JWT","API Key","Basic Auth"]},{key:"rateLimiting",label:"Rate Limiting",type:"boolean",default:!0},{key:"requestsPerSecond",label:"Max Requests/Second",type:"number",default:1e3},{key:"tlsTermination",label:"TLS Termination",type:"boolean",default:!0},{key:"deduplication",label:"Request Deduplication",type:"boolean",default:!0},{key:"throttling",label:"Throttling Enabled",type:"boolean",default:!0}]},{id:"message-dispatcher",group:"Messaging",icon:"📤",label:"Message Dispatcher",description:"Message routing & distribution",tags:["message","dispatcher","routing","distribution","pub/sub"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Message Dispatcher"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"topics",label:"Topics",type:"number",default:10},{key:"loadBalancing",label:"Load Balancing",type:"select",default:"round-robin",options:["round-robin","least-load","hash-based"]},{key:"partitioning",label:"Partitioning Enabled",type:"boolean",default:!0}]},{id:"id-generator",group:"Services",icon:"🔢",label:"ID Generator",description:"Distributed unique ID generation",tags:["id","uuid","snowflake","ulid","unique","generator","distributed"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"ID Generator"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"algorithm",label:"Algorithm",type:"select",default:"Snowflake",options:["Snowflake","UUID","ULID","Auto-Increment"]},{key:"shardId",label:"Shard ID",type:"number",default:1},{key:"distributed",label:"Distributed",type:"boolean",default:!0}]},{id:"distributed-lock",group:"Services",icon:"🔒",label:"Distributed Lock",description:"Resource locking & coordination",tags:["lock","distributed","coordination","mutex","redis","etcd","zookeeper"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Distributed Lock"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"backend",label:"Backend",type:"select",default:"Redis",options:["Redis","Etcd","Zookeeper","Chubby"]},{key:"ttl",label:"Lock TTL (seconds)",type:"number",default:30},{key:"fairness",label:"Fair Locking",type:"boolean",default:!0}]},{id:"cold-storage",group:"Data Layer",icon:"❄️",label:"Cold Storage",description:"Archive & backup storage",tags:["archive","backup","glacier","cold storage","long-term","s3 glacier"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Cold Storage"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"AWS Glacier",options:["AWS Glacier","Azure Archive","GCP Coldline"]},{key:"retentionDays",label:"Retention (days)",type:"number",default:2555},{key:"encryption",label:"Encryption at Rest",type:"boolean",default:!0}]},{id:"object-storage",group:"Data Layer",icon:"🗃️",label:"Object Storage",description:"S3-compatible object store",tags:["s3","blob","object storage","aws s3","azure blob","gcs","minio"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Object Storage"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"S3",options:["S3","Azure Blob","GCS","MinIO"]},{key:"versioning",label:"Versioning",type:"boolean",default:!0},{key:"checksumValidation",label:"Checksum Validation",type:"boolean",default:!0},{key:"storageGB",label:"Storage (GB)",type:"number",default:1e3}]},{id:"processing-worker",group:"Compute",icon:"⚙️",label:"Processing Worker",description:"Background job processor",tags:["worker","background job","async","task processor","celery","sidekiq"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Processing Worker"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"tasks",label:"Task Types",type:"select",default:"Media Encoding",options:["Media Encoding","Thumbnail Generation","Data Processing","ML Inference"]},{key:"concurrency",label:"Concurrent Jobs",type:"number",default:10},{key:"autoscale",label:"Auto-scale",type:"boolean",default:!0}]},{id:"notification-service",group:"Services",icon:"🔔",label:"Notification Service",description:"Push notifications & alerts",tags:["notification","push","email","sms","alerts","fcm","apns"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Notification Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"channels",label:"Channels",type:"select",default:"Push + Email",options:["Push","Email","SMS","Push + Email","All"]},{key:"fanout",label:"Fan-out Support",type:"boolean",default:!0},{key:"batching",label:"Batch Notifications",type:"boolean",default:!0}]},{id:"recommendation-service",group:"Services",icon:"🎯",label:"Recommendation",description:"ML-based recommendations",tags:["recommendation","ml","machine learning","collaborative filtering","personalization"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Recommendation"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"algorithm",label:"Algorithm",type:"select",default:"Collaborative Filtering",options:["Collaborative Filtering","Content-based","Hybrid"]},{key:"realTime",label:"Real-time",type:"boolean",default:!0},{key:"cacheResults",label:"Cache Results",type:"boolean",default:!0}]},{id:"payment-service",group:"Services",icon:"💳",label:"Payment Service",description:"Payment processing & gateway",tags:["payment","stripe","paypal","transaction","billing","checkout","pci"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Payment Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"gateway",label:"Gateway",type:"select",default:"Stripe",options:["Stripe","PayPal","Braintree","Square"]},{key:"pciDss",label:"PCI DSS Compliant",type:"boolean",default:!0},{key:"tokenization",label:"Card Tokenization",type:"boolean",default:!0},{key:"retry",label:"Auto-retry Failed",type:"boolean",default:!0}]},{id:"log-processing",group:"Services",icon:"📝",label:"Log Processing",description:"Log aggregation & analysis",tags:["logging","logs","elk","splunk","aggregation","analysis","kibana"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Log Processing"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"pipeline",label:"Pipeline",type:"select",default:"ELK Stack",options:["ELK Stack","Splunk","Datadog","CloudWatch"]},{key:"retentionDays",label:"Retention (days)",type:"number",default:30},{key:"indexing",label:"Real-time Indexing",type:"boolean",default:!0}]},{id:"pubsub",group:"Messaging",icon:"📡",label:"Pub/Sub",description:"Publish-subscribe messaging",tags:["pubsub","publish","subscribe","messaging","event","google pubsub","sns"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Pub/Sub"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"topics",label:"Topics",type:"number",default:20},{key:"fanout",label:"Fan-out Support",type:"boolean",default:!0},{key:"ordering",label:"Message Ordering",type:"boolean",default:!1},{key:"durable",label:"Durable Messages",type:"boolean",default:!0}]},{id:"frontend-server",group:"Compute",icon:"🖥️",label:"Frontend Server",description:"Client-facing server",tags:["frontend","server","websocket","connection","client-facing"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Frontend Server"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"inMemoryConnections",label:"In-Memory Connections",type:"boolean",default:!0},{key:"activeConnections",label:"Active Connections",type:"number",default:1e4},{key:"websockets",label:"WebSocket Support",type:"boolean",default:!0},{key:"instances",label:"Instances",type:"number",default:3}]},{id:"backend-server",group:"Compute",icon:"⚡",label:"Backend Server",description:"Application logic & microservices",tags:["backend","server","microservices","api","business logic","application"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Backend Server"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"architecture",label:"Architecture",type:"select",default:"Microservices",options:["Monolith","Microservices","Serverless"]},{key:"instances",label:"Instances",type:"number",default:5},{key:"caching",label:"Caching Enabled",type:"boolean",default:!0},{key:"retry",label:"Retry Logic",type:"boolean",default:!0},{key:"bulkOps",label:"Bulk Operations",type:"boolean",default:!0}]},{id:"edge-server",group:"Delivery",icon:"🌍",label:"Edge Server",description:"Edge computing & caching",tags:["edge","edge computing","edge network","cdn","streaming"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Edge Server"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"scope",label:"Scope",type:"select",default:"Regional",options:["Global","Regional","Local"]},{key:"streaming",label:"Streaming Support",type:"boolean",default:!0},{key:"abr",label:"ABR (Adaptive Bitrate)",type:"boolean",default:!0},{key:"staticCache",label:"Static Cache",type:"boolean",default:!0}]},{id:"service-mesh",group:"Networking",icon:"🕸️",label:"Service Mesh",description:"Microservices communication layer",tags:["service mesh","istio","linkerd","consul","mtls","traffic management"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Service Mesh"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"Istio",options:["Istio","Linkerd","Consul","AWS App Mesh"]},{key:"mtls",label:"Mutual TLS",type:"boolean",default:!0},{key:"tracing",label:"Distributed Tracing",type:"boolean",default:!0},{key:"circuitBreaker",label:"Circuit Breaker",type:"boolean",default:!0},{key:"retryPolicy",label:"Retry Policy",type:"boolean",default:!0},{key:"trafficSplitting",label:"Traffic Splitting",type:"boolean",default:!0}]},{id:"container-orchestrator",group:"Compute",icon:"🐳",label:"Container Orchestrator",description:"Container management & orchestration",tags:["kubernetes","k8s","docker","container","orchestration","ecs","pods"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"K8s Cluster"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"platform",label:"Platform",type:"select",default:"Kubernetes",options:["Kubernetes","ECS","Docker Swarm","Nomad"]},{key:"nodes",label:"Worker Nodes",type:"number",default:3},{key:"autoscaling",label:"Auto-scaling (HPA)",type:"boolean",default:!0},{key:"ingress",label:"Ingress Controller",type:"boolean",default:!0},{key:"monitoring",label:"Monitoring (Prometheus)",type:"boolean",default:!0}]},{id:"serverless-function",group:"Compute",icon:"λ",label:"Serverless Function",description:"Event-driven compute",tags:["lambda","serverless","function app","cloud function","faas","azure functions","event-driven"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Lambda Function"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"runtime",label:"Runtime",type:"select",default:"Node.js",options:["Node.js","Python","Java","Go",".NET","Ruby"]},{key:"memoryMB",label:"Memory (MB)",type:"number",default:512},{key:"timeout",label:"Timeout (seconds)",type:"number",default:30},{key:"concurrency",label:"Concurrent Executions",type:"number",default:100},{key:"coldStart",label:"Cold Start Optimization",type:"boolean",default:!0}]},{id:"reverse-proxy",group:"Networking",icon:"🔀",label:"Reverse Proxy",description:"Request routing & caching",tags:["reverse proxy","nginx","haproxy","envoy","traefik","proxy"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Reverse Proxy"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"server",label:"Server",type:"select",default:"Nginx",options:["Nginx","HAProxy","Envoy","Traefik"]},{key:"caching",label:"Response Caching",type:"boolean",default:!0},{key:"compression",label:"Compression (gzip/brotli)",type:"boolean",default:!0},{key:"ssl",label:"SSL/TLS",type:"boolean",default:!0},{key:"rateLimiting",label:"Rate Limiting",type:"boolean",default:!0}]},{id:"stream-processor",group:"Data Layer",icon:"🌊",label:"Stream Processor",description:"Real-time data processing",tags:["stream","kafka streams","flink","spark streaming","kinesis","real-time"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Stream Processor"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"engine",label:"Engine",type:"select",default:"Kafka Streams",options:["Kafka Streams","Apache Flink","Spark Streaming","AWS Kinesis"]},{key:"throughput",label:"Throughput (events/sec)",type:"number",default:1e4},{key:"windowing",label:"Windowing Support",type:"boolean",default:!0},{key:"stateful",label:"Stateful Processing",type:"boolean",default:!0}]},{id:"data-warehouse",group:"Data Layer",icon:"🏭",label:"Data Warehouse",description:"OLAP & analytics storage",tags:["data warehouse","snowflake","redshift","bigquery","olap","analytics"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Data Warehouse"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"platform",label:"Platform",type:"select",default:"Snowflake",options:["Snowflake","Redshift","BigQuery","Synapse"]},{key:"storageTB",label:"Storage (TB)",type:"number",default:10},{key:"compression",label:"Column Compression",type:"boolean",default:!0},{key:"partitioning",label:"Data Partitioning",type:"boolean",default:!0}]},{id:"monitoring",group:"Observability",icon:"📈",label:"Monitoring",description:"Metrics & alerting",tags:["monitoring","prometheus","grafana","datadog","metrics","alerts","observability"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Monitoring"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"stack",label:"Stack",type:"select",default:"Prometheus + Grafana",options:["Prometheus + Grafana","Datadog","New Relic","CloudWatch"]},{key:"metrics",label:"Metrics Collection",type:"boolean",default:!0},{key:"alerts",label:"Alerting",type:"boolean",default:!0},{key:"retention",label:"Retention (days)",type:"number",default:30}]},{id:"tracing",group:"Observability",icon:"🔍",label:"Distributed Tracing",description:"Request flow tracking",tags:["tracing","jaeger","zipkin","distributed tracing","apm","x-ray"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Tracing"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"platform",label:"Platform",type:"select",default:"Jaeger",options:["Jaeger","Zipkin","AWS X-Ray","Datadog APM"]},{key:"sampling",label:"Sampling Rate (%)",type:"number",default:10},{key:"retention",label:"Retention (days)",type:"number",default:7}]},{id:"rate-limiter",group:"Services",icon:"🚦",label:"Rate Limiter",description:"Request throttling service",tags:["rate limit","throttling","rate limiter","token bucket","quota"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Rate Limiter"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"algorithm",label:"Algorithm",type:"select",default:"Token Bucket",options:["Token Bucket","Leaky Bucket","Fixed Window","Sliding Window"]},{key:"requestsPerMinute",label:"Requests/Minute",type:"number",default:1e3},{key:"distributed",label:"Distributed",type:"boolean",default:!0},{key:"backend",label:"Backend",type:"select",default:"Redis",options:["Redis","In-Memory","Database"]}]},{id:"circuit-breaker",group:"Services",icon:"⚡",label:"Circuit Breaker",description:"Fault tolerance & resilience",tags:["circuit breaker","fault tolerance","resilience","hystrix","fallback"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Circuit Breaker"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"failureThreshold",label:"Failure Threshold (%)",type:"number",default:50},{key:"timeout",label:"Timeout (ms)",type:"number",default:5e3},{key:"fallback",label:"Fallback Strategy",type:"boolean",default:!0}]},{id:"file-storage",group:"Data Layer",icon:"📂",label:"File Storage",description:"Shared file system",tags:["file storage","nfs","efs","shared storage","file system"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"File Storage"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"type",label:"Type",type:"select",default:"NFS",options:["NFS","EFS","Azure Files","GCP Filestore"]},{key:"storageTB",label:"Storage (TB)",type:"number",default:1},{key:"throughput",label:"Throughput (MB/s)",type:"number",default:100}]},{id:"vpn-gateway",group:"Networking",icon:"🔐",label:"VPN Gateway",description:"Secure network connection",tags:["vpn","gateway","ipsec","openvpn","wireguard","secure connection"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"VPN Gateway"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"protocol",label:"Protocol",type:"select",default:"IPSec",options:["IPSec","OpenVPN","WireGuard"]},{key:"encryption",label:"Encryption",type:"select",default:"AES-256",options:["AES-128","AES-256","ChaCha20"]},{key:"tunnels",label:"Active Tunnels",type:"number",default:2}]},{id:"firewall",group:"Security",icon:"🛡️",label:"Firewall",description:"Network security & filtering",tags:["firewall","waf","security","ips","network firewall","filtering"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Firewall"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"type",label:"Type",type:"select",default:"WAF",options:["Network Firewall","WAF","Next-Gen Firewall"]},{key:"rules",label:"Active Rules",type:"number",default:50},{key:"ips",label:"IPS Enabled",type:"boolean",default:!0},{key:"logging",label:"Traffic Logging",type:"boolean",default:!0}]},{id:"secrets-manager",group:"Security",icon:"🔑",label:"Secrets Manager",description:"Credentials & secrets storage",tags:["secrets","vault","credentials","key management","hashicorp vault","secrets manager"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Secrets Manager"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"HashiCorp Vault",options:["HashiCorp Vault","AWS Secrets Manager","Azure Key Vault"]},{key:"rotation",label:"Auto Rotation",type:"boolean",default:!0},{key:"encryption",label:"Encryption at Rest",type:"boolean",default:!0},{key:"audit",label:"Audit Logging",type:"boolean",default:!0}]},{id:"email-service",group:"Services",icon:"📧",label:"Email Service",description:"Transactional email delivery",tags:["email","sendgrid","ses","mailgun","smtp","transactional email"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Email Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"SendGrid",options:["SendGrid","AWS SES","Mailgun","Postmark"]},{key:"templates",label:"Template Support",type:"boolean",default:!0},{key:"tracking",label:"Open/Click Tracking",type:"boolean",default:!0},{key:"bounceHandling",label:"Bounce Handling",type:"boolean",default:!0}]},{id:"sms-service",group:"Services",icon:"💬",label:"SMS Service",description:"SMS notifications & OTP",tags:["sms","twilio","sns","text message","otp","vonage"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"SMS Service"},{key:"description",label:"Description",type:"textarea",placeholder:"A brief description of the component",default:""},{key:"provider",label:"Provider",type:"select",default:"Twilio",options:["Twilio","AWS SNS","Vonage","MessageBird"]},{key:"otp",label:"OTP Support",type:"boolean",default:!0},{key:"deliveryReports",label:"Delivery Reports",type:"boolean",default:!0}]},{id:"custom-component",group:"Custom",icon:"📦",label:"Custom Component",description:"Create your own custom component",tags:["custom","generic","user-defined","flexible","other"],properties:[{key:"componentName",label:"Component Name",type:"text",placeholder:"Enter component name",default:"Custom Component"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe what this component does",default:""},{key:"componentType",label:"Component Type",type:"text",placeholder:"e.g., Service, Database, Cache, etc.",default:""},{key:"technology",label:"Technology/Tool",type:"text",placeholder:"e.g., Redis, Kafka, Custom API, etc.",default:""},{key:"purpose",label:"Purpose",type:"textarea",placeholder:"What problem does this solve?",default:""},{key:"notes",label:"Additional Notes",type:"textarea",placeholder:"Any additional details or configuration",default:""}]},{id:"group-cluster",group:"Grouping",icon:"📦",label:"Cluster/Group",description:"Container for grouping multiple components",tags:["group","cluster","container","zone","boundary","region"],properties:[{key:"componentName",label:"Group Name",type:"text",placeholder:"e.g., Backend Cluster, Database Zone",default:"Cluster"},{key:"description",label:"Description",type:"textarea",placeholder:"Purpose of this cluster/group",default:""},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"e.g., rgba(100, 100, 255, 0.05)",default:"rgba(100, 100, 255, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"e.g., rgba(100, 100, 255, 0.3)",default:"rgba(100, 100, 255, 0.3)"}]},{id:"availability-zone",group:"Grouping",icon:"🌐",label:"Availability Zone",description:"Isolated location within a region",tags:["az","availability zone","fault isolation","zone","region"],properties:[{key:"componentName",label:"Zone Name",type:"text",placeholder:"e.g., us-east-1a, AZ-1",default:"Availability Zone"},{key:"description",label:"Description",type:"textarea",placeholder:"Zone details",default:""},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"Zone background color",default:"rgba(34, 139, 34, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"Zone border color",default:"rgba(34, 139, 34, 0.3)"}]},{id:"vpc-network",group:"Grouping",icon:"🔒",label:"VPC/Network",description:"Virtual private cloud boundary",tags:["vpc","network","subnet","private","isolated"],properties:[{key:"componentName",label:"VPC Name",type:"text",placeholder:"e.g., Production VPC",default:"VPC"},{key:"description",label:"Description",type:"textarea",placeholder:"Network details",default:""},{key:"cidr",label:"CIDR Block",type:"text",placeholder:"e.g., 10.0.0.0/16",default:"10.0.0.0/16"},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"VPC background color",default:"rgba(128, 0, 128, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"VPC border color",default:"rgba(128, 0, 128, 0.3)"}]},{id:"microservice-group",group:"Grouping",icon:"🎯",label:"Microservice Group",description:"Related microservices cluster",tags:["microservices","service group","domain","bounded context"],properties:[{key:"componentName",label:"Service Group",type:"text",placeholder:"e.g., User Services, Payment Domain",default:"Service Group"},{key:"description",label:"Description",type:"textarea",placeholder:"Service group purpose",default:""},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"Group background color",default:"rgba(255, 165, 0, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"Group border color",default:"rgba(255, 165, 0, 0.3)"}]},{id:"security-boundary",group:"Grouping",icon:"🛡️",label:"Security Boundary",description:"Security zone/perimeter",tags:["security","dmz","firewall","boundary","zone"],properties:[{key:"componentName",label:"Security Zone",type:"text",placeholder:"e.g., DMZ, Internal, Restricted",default:"Security Boundary"},{key:"description",label:"Description",type:"textarea",placeholder:"Security zone details",default:""},{key:"level",label:"Security Level",type:"select",default:"Internal",options:["Public","DMZ","Internal","Restricted"]},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"Zone background color",default:"rgba(255, 0, 0, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"Zone border color",default:"rgba(255, 0, 0, 0.3)"}]},{id:"custom-group",group:"Grouping",icon:"📦",label:"Custom Group",description:"Create your own custom group/container",tags:["custom","group","container","user-defined","flexible","boundary"],properties:[{key:"componentName",label:"Group Name",type:"text",placeholder:"Enter custom group name",default:"Custom Group"},{key:"description",label:"Description",type:"textarea",placeholder:"Describe the purpose of this group",default:""},{key:"groupType",label:"Group Type",type:"text",placeholder:"e.g., Region, Data Center, Team, etc.",default:""},{key:"icon",label:"Icon",type:"text",placeholder:"e.g., 🎨, 🏢, 🌍, etc.",default:"📦"},{key:"backgroundColor",label:"Background Color",type:"text",placeholder:"e.g., rgba(100, 100, 255, 0.05)",default:"rgba(100, 100, 255, 0.05)"},{key:"borderColor",label:"Border Color",type:"text",placeholder:"e.g., rgba(100, 100, 255, 0.3)",default:"rgba(100, 100, 255, 0.3)"},{key:"subtitle",label:"Subtitle",type:"text",placeholder:"Optional subtitle text",default:""},{key:"notes",label:"Additional Notes",type:"textarea",placeholder:"Any additional details",default:""}]}];function jV(e){return mt({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M216.49,104.49l-80,80a12,12,0,0,1-17,0l-80-80a12,12,0,0,1,17-17L128,159l71.51-71.52a12,12,0,0,1,17,17Z"},child:[]}]})(e)}function Xfe(e){return mt({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M168.49,199.51a12,12,0,0,1-17,17l-80-80a12,12,0,0,1,0-17l80-80a12,12,0,0,1,17,17L97,128Z"},child:[]}]})(e)}function Zfe(e){return mt({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M184.49,136.49l-80,80a12,12,0,0,1-17-17L159,128,87.51,56.49a12,12,0,1,1,17-17l80,80A12,12,0,0,1,184.49,136.49Z"},child:[]}]})(e)}function Qfe(e){return mt({attr:{viewBox:"0 0 256 256",fill:"currentColor"},child:[{tag:"path",attr:{d:"M108,60A16,16,0,1,1,92,44,16,16,0,0,1,108,60Zm56,16a16,16,0,1,0-16-16A16,16,0,0,0,164,76ZM92,112a16,16,0,1,0,16,16A16,16,0,0,0,92,112Zm72,0a16,16,0,1,0,16,16A16,16,0,0,0,164,112ZM92,180a16,16,0,1,0,16,16A16,16,0,0,0,92,180Zm72,0a16,16,0,1,0,16,16A16,16,0,0,0,164,180Z"},child:[]}]})(e)}function Jfe({components:e,onAdd:t}){const[n,r]=Pe.useState(!0),[i,s]=Pe.useState(new Set),[o,l]=Pe.useState(null),[c,f]=Pe.useState(""),h=Pe.useMemo(()=>new Qo(Array.from(e),{keys:[{name:"label",weight:.4},{name:"tags",weight:.25},{name:"description",weight:.2},{name:"group",weight:.15}],threshold:.3,includeScore:!0}),[e]),p=Pe.useMemo(()=>{const b=c.trim();if(!b)return Array.from(e);const x=h.search(b).map(k=>k.item),C=e.find(k=>k.id==="custom-component"),T=x.some(k=>k.id==="custom-component");return C&&!T&&x.push(C),x},[e,h,c]),g=Pe.useMemo(()=>{const b=new Map;for(const S of p){const x=S.group??"Other";b.has(x)||b.set(x,[]),b.get(x).push(S)}return Array.from(b.entries()).sort((S,x)=>S[0].localeCompare(x[0]))},[p]);Pe.useEffect(()=>{g.length>0&&i.size===0&&s(new Set(g.map(([b])=>b)))},[g,i.size]);const y=b=>{s(S=>{const x=new Set(S);return x.has(b)?x.delete(b):x.add(b),x})};return w.jsxs("div",{className:"relative z-40",children:[w.jsx("button",{type:"button",onClick:()=>r(b=>!b),"aria-label":n?"Collapse component palette":"Expand component palette","aria-controls":"component-palette-panel",className:"absolute top-5 -right-3 h-6 w-6 flex items-center justify-center rounded-full border border-theme bg-surface text-theme shadow cursor-pointer hover:bg-[var(--bg-hover)] transition-colors z-50",children:n?w.jsx(Xfe,{size:16}):w.jsx(Zfe,{size:16})}),w.jsx("div",{className:`relative shrink-0 group h-full flex flex-col bg-surface border-r border-theme overflow-y-auto overflow-x-hidden component-palette transition-[width] duration-300 ease-in-out z-40 ${n?"w-56 p-3 pr-0":"w-6 p-1"}`,"aria-label":"Component palette",id:"component-palette-panel",children:n?w.jsxs(w.Fragment,{children:[w.jsx("h3",{className:"text-lg font-semibold text-theme mb-3",children:"Components"}),w.jsx("div",{className:"mr-3 mb-3",children:w.jsx("input",{type:"text",placeholder:"Search components...",value:c,onChange:b=>f(b.target.value),className:"w-full px-3 py-1.5 text-sm border border-theme rounded bg-[var(--bg)] text-theme placeholder:text-muted focus:outline-none focus:ring-1 focus:ring-[var(--brand)]"})}),w.jsxs("div",{className:"space-y-1 flex-1 overflow-y-auto",children:[g.length===0?w.jsx("div",{className:"text-center py-8 text-muted text-sm",children:"No components found"}):g.map(([b,S])=>{const x=i.has(b);return w.jsxs("div",{children:[w.jsxs("button",{type:"button",onClick:()=>y(b),className:"w-full flex items-center justify-between px-2 py-1.5 text-left hover:bg-[var(--bg-hover)] rounded transition-colors","aria-expanded":x,"aria-controls":`group-${b}`,children:[w.jsx("span",{className:"text-xs font-medium uppercase tracking-wide text-muted",children:b}),w.jsx(jV,{size:12,className:`text-muted transition-transform duration-150 ${x?"rotate-0":"-rotate-90"}`})]}),x&&w.jsx("div",{id:`group-${b}`,className:"mt-1 mb-3 px-1",children:w.jsx("div",{className:"grid grid-cols-2 gap-1.5",children:S.map(C=>w.jsxs("button",{type:"button",draggable:!0,"aria-label":`Add ${C.label} to canvas`,onMouseEnter:T=>{const k=T.currentTarget.getBoundingClientRect();l({label:C.label,description:C.description||"",rect:k})},onMouseLeave:()=>l(null),onDragStart:T=>{l(null),T.dataTransfer?.setData("application/reactflow",JSON.stringify({type:C.id})),T.dataTransfer?.setData("text/plain",C.id),T.dataTransfer&&(T.dataTransfer.effectAllowed="move")},onKeyDown:T=>{(T.key==="Enter"||T.key===" ")&&(T.preventDefault(),t(C.id))},className:"text-left p-2 border border-theme rounded-md cursor-grab select-none hover:border-[var(--brand)] hover:bg-[var(--bg-hover)] transition-all group/item",children:[w.jsx("div",{className:"text-center mb-1",children:w.jsx("span",{className:"text-2xl",children:C.icon})}),w.jsx("div",{className:"text-xs font-medium text-theme text-center group-hover/item:text-[var(--brand)] transition-colors line-clamp-1",children:C.label})]},C.id))})})]},b)}),w.jsxs("div",{className:"mt-4 px-2 py-2.5 rounded text-xs bg-[var(--bg-hover)]",children:[w.jsx("div",{className:"font-medium mb-1 text-theme",children:"💡 Tip"}),w.jsx("div",{className:"text-muted",children:"Drag a component to the canvas to start designing"})]})]})]}):w.jsx("div",{className:"flex-1 flex items-center justify-center h-full",children:w.jsx("span",{className:"sr-only",children:"Component palette collapsed"})})}),o&&r4.createPortal(w.jsxs("div",{className:"fixed px-3 py-2 bg-[var(--bg)] border border-theme rounded shadow-lg text-xs z-[9999] min-w-max max-w-xs pointer-events-none -translate-y-1/2",style:{left:`${o.rect.right+8}px`,top:`${o.rect.top+o.rect.height/2}px`},children:[w.jsx("div",{className:"font-semibold text-theme mb-0.5",children:o.label}),w.jsx("div",{className:"text-muted",children:o.description}),w.jsx("div",{className:"absolute right-full top-1/2 -translate-y-1/2 -mr-1 border-4 border-transparent border-r-[var(--bg)]"})]}),document.body)]})}const ede=({reactFlowWrapperRef:e,nodes:t,edges:n,nodeTypes:r,edgeTypes:i,onNodesChange:s,onEdgesChange:o,onConnect:l,onDragOver:c,onDrop:f,onNodeDragStop:h})=>w.jsx("div",{className:"flex-1 relative bg-theme min-h-0",children:w.jsx("section",{className:"w-full h-full",ref:e,onDragOver:c,onDrop:f,"aria-label":"Diagram canvas drop area",children:w.jsxs(cae,{className:"w-full h-full",nodes:t,edges:n,nodeTypes:r,edgeTypes:i,onNodesChange:s,onEdgesChange:o,onConnect:l,onNodeDragStop:h,connectionMode:Ko.Loose,fitView:!0,proOptions:{hideAttribution:!0},children:[w.jsx(Bae,{nodeStrokeWidth:3}),w.jsx(Cae,{}),w.jsx(yae,{gap:16})]})})}),tde=({problem:e,activeTab:t,setActiveTab:n,inspectedNodeId:r,setInspectedNodeId:i,propertyElements:s,customPropertyElements:o,onAddCustomProperty:l,handleSave:c,assessmentResult:f,onDetachFromGroup:h,isNodeInGroup:p})=>{const[g,y]=Pe.useState(320),b=260,S=640,x=Pe.useRef(!1),C=Pe.useRef(null),[T,k]=Pe.useState(!1),A=Pe.useCallback(q=>{if(!x.current)return;const U=Math.min(Math.max(window.innerWidth-q.clientX,b),S);y(U)},[]),M=Pe.useCallback(()=>{x.current=!1,document.body.style.userSelect=""},[]),_=q=>{q.preventDefault(),x.current=!0,document.body.style.userSelect="none"};Pe.useEffect(()=>(globalThis.addEventListener("mousemove",A),globalThis.addEventListener("mouseup",M),()=>{globalThis.removeEventListener("mousemove",A),globalThis.removeEventListener("mouseup",M)}),[A,M]),Pe.useEffect(()=>{C.current&&(C.current.style.width=g+"px")},[g]);const R=e?.id==="free",O=R&&!r;if(Pe.useEffect(()=>{R&&r&&t==="details"&&n("inspector")},[R,r,t,n]),!e||O)return null;const I=async()=>{if(f)try{await navigator.clipboard.writeText(JSON.stringify(f,null,2))}catch{const q=document.createElement("textarea");q.value=JSON.stringify(f,null,2),document.body.appendChild(q),q.select(),document.execCommand("copy"),q.remove()}},$=()=>{if(!f)return;const q=new Blob([JSON.stringify(f,null,2)],{type:"application/json"}),U=URL.createObjectURL(q),X=document.createElement("a");X.href=U,X.download=`assessment-${Date.now()}.json`,document.body.appendChild(X),X.click(),X.remove(),URL.revokeObjectURL(U)};return w.jsxs("aside",{ref:C,className:"bg-surface border-l border-theme p-4 flex flex-col h-full relative inspector-resizable","data-width":g,children:[w.jsxs("button",{type:"button",onMouseDown:_,"aria-label":"Resize inspector panel",className:"absolute left-0 top-0 h-full w-2 -ml-1 cursor-col-resize flex items-center justify-center group",children:[w.jsx("span",{className:"w-px h-full bg-transparent group-hover:bg-[var(--brand)]/40 transition-colors"}),w.jsx(Qfe,{"aria-hidden":!0,className:"absolute py-1 rounded-md bg-[var(--surface)] border border-theme text-[var(--muted)] opacity-90 group-hover:bg-[var(--brand)] group-hover:text-white shadow-sm pointer-events-none transition-colors",size:24})]}),w.jsxs("div",{className:"flex items-center justify-start gap-2",role:"tablist","aria-label":"Sidebar tabs",children:[!R&&w.jsxs("button",{type:"button",role:"tab",className:`flex items-center gap-2 px-3 py-2 rounded-t-md border-b-2 transition-colors ${t==="details"?"border-[var(--brand)] bg-[var(--brand)]/5 text-[var(--brand)]":"border-transparent text-theme hover:bg-[var(--bg-hover)]"}`,onClick:()=>n("details"),children:[w.jsx("span",{className:"text-sm",children:"📄"}),w.jsx("span",{className:"text-sm font-medium",children:"Details"})]}),w.jsxs("button",{type:"button",role:"tab",className:`flex items-center gap-2 px-3 py-2 rounded-t-md border-b-2 transition-colors ${t==="inspector"?"border-[var(--brand)] bg-[var(--brand)]/5 text-[var(--brand)]":"border-transparent text-theme hover:bg-[var(--bg-hover)]"}`,onClick:()=>n("inspector"),children:[w.jsx("span",{className:"text-sm",children:"⚙️"}),w.jsx("span",{className:"text-sm font-medium",children:"Properties"})]})]}),w.jsx("div",{className:"w-full h-px bg-[var(--muted)]/20 mb-4","aria-hidden":"true"}),w.jsxs("div",{className:"overflow-y-auto component-palette flex-1",children:[t==="details"&&w.jsxs("div",{children:[f&&w.jsxs("div",{className:"mb-4 p-2 border rounded bg-[var(--surface)]",children:[w.jsxs("div",{className:"flex items-center justify-between mb-2",children:[w.jsx("div",{className:"text-sm font-medium text-theme",children:"Assessment"}),w.jsxs("div",{className:"text-sm font-semibold text-theme",children:[f.score,"%"]})]}),w.jsx("div",{className:"text-xs text-muted mb-2",children:f.isValid?"Pass":"Needs work"}),w.jsx("div",{className:"space-y-1 text-xs",children:f.feedback.slice(0,3).map(q=>w.jsx("div",{className:"text-sm text-theme",children:q.message},`${q.category}-${q.type}`))}),w.jsxs("div",{className:"mt-3 flex gap-2",children:[w.jsx("button",{type:"button",onClick:I,className:"px-2 py-1 bg-theme border border-theme rounded text-sm hover:bg-[var(--bg-hover)]",children:"Copy JSON"}),w.jsx("button",{type:"button",onClick:$,className:"px-2 py-1 bg-theme border border-theme rounded text-sm hover:bg-[var(--bg-hover)]",children:"Download JSON"})]}),w.jsxs("div",{className:"mt-3 text-xs",children:[w.jsx("div",{className:"font-medium text-sm mb-1",children:"What went right"}),f.architectureStrengths.length>0?w.jsx("ul",{className:"list-disc list-inside text-xs mb-2",children:f.architectureStrengths.map(q=>w.jsx("li",{children:q},`strength-${q}`))}):w.jsx("div",{className:"text-xs text-muted mb-2",children:"No notable strengths detected."}),w.jsx("div",{className:"font-medium text-sm mb-1",children:"What to improve"}),f.improvements.length>0?w.jsx("ul",{className:"list-disc list-inside text-xs mb-2",children:f.improvements.map(q=>w.jsx("li",{children:q},`imp-${q}`))}):w.jsx("div",{className:"text-xs text-muted mb-2",children:"No specific improvements suggested."}),w.jsx("div",{className:"font-medium text-sm mb-1",children:"Feedback"}),w.jsx("div",{className:"space-y-1",children:f.feedback.map(q=>w.jsxs("div",{className:"text-xs",children:[w.jsx("div",{className:"font-medium",children:q.category.toUpperCase()}),w.jsx("div",{className:"text-muted",children:q.message})]},`${q.category}-${q.type}`))})]})]}),w.jsx("h3",{className:"text-lg font-semibold text-theme mb-3",children:e.title}),w.jsx("p",{className:"text-muted text-sm leading-relaxed mb-4",children:e.description}),w.jsxs("div",{className:"mb-4",children:[w.jsx("h4",{className:"text-sm font-semibold text-theme mb-2",children:"Requirements"}),w.jsx("ul",{className:"space-y-1",children:e.requirements.map(q=>w.jsxs("li",{className:"flex items-start space-x-2",children:[w.jsx("span",{className:"text-green-500 mt-0.5 text-xs",children:"✓"}),w.jsx("span",{className:"text-xs text-muted",children:q})]},q))})]}),w.jsxs("div",{className:"mb-4",children:[w.jsx("h4",{className:"text-sm font-semibold text-theme mb-2",children:"Constraints"}),w.jsx("ul",{className:"space-y-1",children:e.constraints.map(q=>w.jsxs("li",{className:"flex items-start space-x-2",children:[w.jsx("span",{className:"text-yellow-500 mt-0.5 text-xs",children:"⚠"}),w.jsx("span",{className:"text-xs text-muted",children:q})]},q))})]}),w.jsxs("div",{className:"mb-4",children:[w.jsxs("button",{type:"button",onClick:()=>k(!T),className:"w-full flex items-center justify-between mb-2 cursor-pointer hover:bg-[var(--bg-hover)] p-2 rounded-md transition-colors","aria-controls":"hints-content",children:[w.jsx("h4",{className:"text-sm font-semibold text-theme",children:"💡 Hints"}),w.jsx(jV,{size:14,className:`text-muted transition-transform duration-150 ${T?"rotate-0":"-rotate-90"}`})]}),T&&w.jsx("div",{id:"hints-content",className:"space-y-2",children:e.hints.map(q=>w.jsx("div",{className:"bg-yellow-50 dark:bg-yellow-900 border-l-4 border-yellow-400 dark:border-yellow-600 p-2 rounded-r-lg",children:w.jsx("div",{className:"text-xs text-white",children:q})},q))})]}),w.jsxs("div",{children:[w.jsx("h4",{className:"text-sm font-semibold text-theme mb-2",children:"Tags"}),w.jsx("div",{className:"flex flex-wrap gap-1",children:e.tags.map(q=>w.jsx("span",{className:"px-2 py-1 bg-blue-100 dark:bg-blue-800 text-blue-800 dark:text-blue-200 text-xs rounded-md",children:q},q))})]})]}),t==="inspector"&&w.jsxs("div",{children:[w.jsx("h3",{className:"text-lg font-semibold text-theme mb-3",children:"Component Properties"}),!r&&w.jsx("div",{className:"text-sm text-muted",children:"Select a node settings (⚙️) to view properties."}),r&&w.jsxs("div",{children:[w.jsxs("div",{className:"text-sm text-theme mb-3",children:["Node: ",r]}),s&&w.jsxs("div",{className:"mb-6",children:[w.jsx("div",{className:"text-xs font-semibold text-muted uppercase tracking-wide mb-2",children:"Standard Properties"}),w.jsx("div",{className:"space-y-2",children:s})]}),w.jsxs("div",{className:"mb-4",children:[w.jsxs("div",{className:"flex items-center justify-between mb-2",children:[w.jsx("div",{className:"text-xs font-semibold text-muted uppercase tracking-wide",children:"Custom Properties"}),w.jsxs("button",{type:"button",onClick:l,className:"flex items-center gap-1 px-2 py-1 text-xs font-medium text-[var(--brand)] hover:bg-[var(--brand)]/10 rounded-md transition-colors border border-[var(--brand)]/30 hover:border-[var(--brand)] cursor-pointer",title:"Add custom property",children:[w.jsx(Tee,{size:14}),w.jsx("span",{children:"Add"})]})]}),w.jsx("div",{className:"space-y-2",children:o})]}),w.jsxs("div",{className:"mt-6 flex flex-col gap-2 pt-4 border-t border-theme",children:[p&&h&&w.jsxs("button",{type:"button",className:"w-full px-3 py-2 bg-orange-500 text-white rounded-md hover:bg-orange-600 transition-colors font-medium text-sm cursor-pointer flex items-center justify-center gap-2",onClick:h,title:"Remove this node from its parent group",children:[w.jsx("span",{children:"🔓"}),w.jsx("span",{children:"Detach from Group"})]}),w.jsxs("div",{className:"flex space-x-2",children:[w.jsx("button",{type:"button",className:"flex-1 px-3 py-2 bg-[var(--brand)] text-white rounded-md hover:bg-[var(--brand)]/90 transition-colors font-medium text-sm cursor-pointer",onClick:c,children:"Save Changes"}),w.jsx("button",{type:"button",className:"px-3 py-2 bg-theme border border-theme rounded-md hover:bg-[var(--bg-hover)] transition-colors text-sm cursor-pointer",onClick:()=>{i(null),n("details")},children:"Close"})]})]})]})]})]})]})};async function nde(e,t){if(!e)return{isValid:!1,score:0,feedback:[{type:"error",message:"No solution provided.",category:"maintainability"}],suggestions:["Please add components to your design for assessment."],missingComponents:[],architectureStrengths:[],improvements:[]};const n="https://diagrammatic-api.vercel.app";try{const r={components:e.components.map(o=>({id:o.id||`comp-${Date.now()}`,type:o.type,label:o.label,properties:o.properties||{},position:o.position})),connections:e.connections?.map(o=>({id:o.id||`conn-${Date.now()}`,source:o.source,target:o.target,label:o.label,type:o.type}))||[],explanation:e.explanation,keyPoints:e.keyPoints,problem:t?{title:t.title,description:t.description,requirements:Array.isArray(t.requirements)?t.requirements.join(`.
`):t.requirements,constraints:Array.isArray(t.constraints)?t.constraints.join(`.
`):t.constraints,difficulty:t.difficulty,category:t.category,estimatedTime:t.estimated_time}:null};console.log("Calling assessment API:",`${n}/api/v1/assess`),console.log("Request payload:",r);const i=await fetch(`${n}/api/v1/assess`,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify(r)});if(!i.ok){const o=await i.text();throw new Error(`Assessment API failed: ${i.status} ${i.statusText} - ${o}`)}const s=await i.json();return console.log("Assessment API response:",s),rde(s)}catch(r){return console.error("AI Assessment failed:",r),{isValid:!1,score:0,feedback:[{type:"error",message:`Assessment service unavailable: ${r instanceof Error?r.message:"Unknown error"}`,category:"maintainability"}],suggestions:["Please ensure the assessment service is running and try again."],missingComponents:[],architectureStrengths:[],improvements:[]}}}function rde(e){const t=e,n=(t.feedback||[]).map(r=>({type:r.type,message:r.message,category:r.category}));return{isValid:t.is_valid||!1,score:t.overall_score||0,feedback:n,suggestions:t.suggestions||[],missingComponents:t.missing_components||[],architectureStrengths:t.strengths||[],improvements:t.improvements||[]}}const LV=Pe.memo(({id:e,data:t,onCopy:n,isInGroup:r})=>{const i=t.componentName||t.label,s=Pe.useCallback(f=>{f.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-delete",{detail:{id:e}}))},[e]),o=Pe.useCallback(f=>{f.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-toggle",{detail:{id:e}}))},[e]),l=Pe.useCallback(f=>{f.stopPropagation(),n?.(e,t)},[e,t,n]),c=Pe.useCallback(f=>{f.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-detach",{detail:{id:e}}))},[e]);return w.jsxs(Cn.fieldset,{initial:{y:0,opacity:1},whileHover:{y:-1,boxShadow:"0 12px 30px rgba(0,0,0,0.12)"},whileTap:{scale:.985},transition:{type:"spring",stiffness:320,damping:28},className:"min-w-[140px] w-full max-w-xs bg-surface border border-theme rounded-lg text-theme text-sm shadow-sm cursor-grab relative",children:[w.jsx("legend",{className:"sr-only",children:i}),w.jsxs("div",{className:"absolute -top-5 right-1 flex items-center z-10 bg-[var(--surface)]/80 border border-theme rounded-full shadow-sm",children:[w.jsx(Cn.button,{type:"button","aria-label":"Settings",onClick:o,className:"p-1 rounded-full hover:bg-[var(--bg-hover)] transition-colors flex items-center justify-center",title:"Settings",whileHover:{scale:1.1,y:-1,rotate:90},whileTap:{scale:.95},transition:{type:"spring",stiffness:400,damping:25},children:w.jsx(jz,{className:"w-2 h-2"})}),r&&w.jsx(Cn.button,{type:"button","aria-label":"Detach from Group",onClick:c,className:"p-1 text-orange-500 rounded-full hover:bg-[var(--bg-hover)] transition-colors flex items-center justify-center",title:"Detach from Group",whileHover:{scale:1.1,y:-1},whileTap:{scale:.95},transition:{type:"spring",stiffness:400,damping:25},children:w.jsx(nU,{className:"w-2 h-2"})}),w.jsx(Cn.button,{type:"button","aria-label":"Copy Node",onClick:l,className:"p-1 rounded-full hover:bg-[var(--bg-hover)] transition-colors flex items-center justify-center",title:"Copy Node",whileHover:{scale:1.1,y:-1},whileTap:{scale:.95},transition:{type:"spring",stiffness:400,damping:25},children:w.jsx(Aee,{className:"w-2 h-2"})}),w.jsx(Cn.button,{type:"button","aria-label":"Delete",onClick:s,className:"p-1 text-red-600 rounded-full hover:bg-[var(--bg-hover)] transition-colors flex items-center justify-center",title:"Delete",whileHover:{scale:1.15,y:-2,rotate:5},whileTap:{scale:.9},transition:{type:"spring",stiffness:400,damping:25},children:w.jsx(rk,{className:"w-2 h-2"})})]}),w.jsx(wr,{id:"top",type:"source",position:Ae.Top,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),w.jsx(wr,{id:"right",type:"source",position:Ae.Right,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),w.jsx(wr,{id:"bottom",type:"source",position:Ae.Bottom,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),w.jsx(wr,{id:"left",type:"source",position:Ae.Left,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),w.jsxs("div",{className:"flex flex-col items-center justify-center gap-2 min-w-0 w-full py-2",children:[w.jsx("div",{className:"flex-shrink-0 w-12 h-12 rounded-full bg-[var(--bg-hover)] flex items-center justify-center text-xl",children:t.icon??"●"}),w.jsxs("div",{className:"min-w-0 w-full text-center",children:[w.jsx("div",{className:"truncate font-medium text-sm",children:i}),t.subtitle&&w.jsx("div",{className:"text-xs text-muted truncate",children:t.subtitle})]})]})]})});LV.displayName="Node";const ide=({sourceX:e,sourceY:t,targetX:n,targetY:r},i)=>{const s=(e+n)/2,o=(t+r)/2;return`M ${e} ${t} Q ${s} ${o+i} ${n} ${r}`},sde=(e,t)=>{const{sourceX:n,sourceY:r,targetX:i,targetY:s}=e;if(t){const f=n<i?25:-25,h=ide({sourceX:n,sourceY:r,targetX:i,targetY:s},f),p=(n+i)/2,g=(r+s)/2,y=p,b=g+f/2;return{edgePath:h,centerX:y,centerY:b}}const[o]=pk(e),[l,c]=mk({sourceX:n,sourceY:r,targetX:i,targetY:s});return{edgePath:o,centerX:l,centerY:c}},ode=e=>{const{id:t,source:n,target:r,sourceX:i,sourceY:s,targetX:o,targetY:l,sourcePosition:c,targetPosition:f,data:h,selected:p,markerEnd:g}=e,[y,b]=P.useState(!1),[S,x]=P.useState(h?.label??""),[C,T]=P.useState(h?.hasLabel??!1),k=P.useRef(null),A=Xe(X=>{const B=X.edges.some(F=>F.id!==t&&F.source===r&&F.target===n);return B&&console.log(`Bi-directional edge detected: ${t} (${n} -> ${r})`),B}),M={sourceX:i,sourceY:s,sourcePosition:c,targetX:o,targetY:l,targetPosition:f},{edgePath:_,centerX:R,centerY:O}=sde(M,A),I=X=>{X.stopPropagation(),b(!0),setTimeout(()=>k.current?.focus(),0)},$=X=>{X.stopPropagation(),T(!0),b(!0),setTimeout(()=>k.current?.focus(),0)},q=X=>{X.stopPropagation(),T(!1),x(""),window.dispatchEvent(new CustomEvent("diagram:edge-label-change",{detail:{id:t,label:"",hasLabel:!1}}))},U=()=>{b(!1),window.dispatchEvent(new CustomEvent("diagram:edge-label-change",{detail:{id:t,label:S,hasLabel:C||S.trim().length>0}}))};return w.jsxs("g",{className:"react-flow__edge",children:[w.jsx("defs",{children:w.jsx("marker",{id:`arrow-${t}`,viewBox:"0 0 10 10",refX:"8",refY:"5",markerWidth:"6",markerHeight:"6",orient:"auto",children:w.jsx("path",{d:"M 0 0 L 10 5 L 0 10 z",fill:"var(--brand)"})})}),w.jsx("path",{id:t,d:_,fill:"none",stroke:p?"var(--brand)":"var(--muted)",strokeWidth:p?3:2,markerEnd:g||`url(#arrow-${t})`,className:"transition-colors"}),w.jsx("foreignObject",{x:R-75,y:O-12,width:150,height:24,className:"overflow-visible",children:w.jsx("div",{className:"flex items-center justify-center w-full h-full pointer-events-auto",children:C?w.jsx("div",{className:"flex items-center gap-1",children:y?w.jsx("input",{ref:k,value:S,onChange:X=>x(X.target.value),onBlur:U,onKeyDown:X=>{X.key==="Enter"&&U(),X.key==="Escape"&&(b(!1),x(h?.label??""))},className:"text-xs border rounded px-2 py-1 bg-[var(--surface)] text-theme w-24 text-center focus:outline-none focus:ring-1 focus:ring-[var(--brand)]",placeholder:"Label..."}):w.jsxs(w.Fragment,{children:[w.jsx("button",{onDoubleClick:I,className:`text-xs px-2 py-1 rounded cursor-text bg-[var(--surface)] text-theme border text-center min-w-[60px] hover:bg-[var(--bg-hover)] ${p?"ring-1 ring-[var(--brand)]":"border-theme"}`,title:"Double-click to edit",type:"button",children:S||"Label"}),p&&w.jsx("button",{onClick:q,className:"text-xs px-1 py-1 rounded bg-red-100 text-red-700 hover:bg-red-200 dark:bg-red-900 dark:text-red-200",title:"Remove label",children:"✕"})]})}):p&&w.jsx("button",{onClick:$,className:"text-xs px-2 py-1 rounded bg-[var(--surface)] border border-dashed border-[var(--brand)] text-[var(--brand)] hover:bg-[var(--bg-hover)]",title:"Add label",children:"+ Label"})})})]})},ade=({id:e,data:t})=>{const n=t.backgroundColor||"rgba(100, 100, 255, 0.05)",r=t.borderColor||"rgba(100, 100, 255, 0.3)",i=Pe.useCallback(o=>{o.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-delete",{detail:{id:e}}))},[e]),s=Pe.useCallback(o=>{o.stopPropagation(),globalThis.dispatchEvent(new CustomEvent("diagram:node-toggle",{detail:{id:e}}))},[e]);return w.jsxs("div",{className:"group-node",style:{padding:"20px",borderRadius:"12px",border:`2px dashed ${r}`,backgroundColor:n,minWidth:"300px",minHeight:"200px",height:"100%",position:"relative"},children:[w.jsx(Vae,{minWidth:300,minHeight:200,isVisible:!0,lineStyle:{borderColor:r,borderWidth:2,borderStyle:"dashed"},handleStyle:{width:8,height:8,borderRadius:"2px",backgroundColor:"var(--surface)",border:`2px solid ${r}`,boxShadow:"0 2px 4px rgba(0,0,0,0.1)"}}),w.jsxs("div",{className:"absolute -top-3 right-2 flex items-center z-10 bg-[var(--surface)]/90 border border-theme rounded-full shadow-sm",children:[w.jsx(Cn.button,{type:"button","aria-label":"Settings",onClick:s,className:"p-1 rounded-full hover:bg-[var(--bg-hover)] transition-colors flex items-center justify-center",title:"Group Settings",whileHover:{scale:1.1,y:-1,rotate:90},whileTap:{scale:.95},transition:{type:"spring",stiffness:400,damping:25},children:w.jsx(jz,{className:"w-3 h-3"})}),w.jsx(Cn.button,{type:"button","aria-label":"Delete Group",onClick:i,className:"p-1 text-red-600 rounded-full hover:bg-[var(--bg-hover)] transition-colors flex items-center justify-center",title:"Delete Group",whileHover:{scale:1.15,y:-2,rotate:5},whileTap:{scale:.9},transition:{type:"spring",stiffness:400,damping:25},children:w.jsx(rk,{className:"w-3 h-3"})})]}),w.jsxs("div",{className:"group-header",style:{position:"absolute",top:"-12px",left:"10px",padding:"4px 12px",borderRadius:"6px",backgroundColor:"var(--surface)",border:`1px solid ${r}`,display:"flex",alignItems:"center",gap:"6px",fontSize:"14px",fontWeight:"600",color:"var(--theme)",boxShadow:"0 2px 4px rgba(0,0,0,0.1)"},children:[t.icon&&w.jsx("span",{children:t.icon}),w.jsx("span",{children:t.label})]}),t.subtitle&&w.jsx("div",{style:{marginTop:"8px",fontSize:"12px",color:"var(--muted)",fontStyle:"italic"},children:t.subtitle}),w.jsx(wr,{id:"top",type:"source",position:Ae.Top,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),w.jsx(wr,{id:"right",type:"source",position:Ae.Right,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),w.jsx(wr,{id:"bottom",type:"source",position:Ae.Bottom,isConnectable:!0,style:{width:"100%",height:"8px",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}}),w.jsx(wr,{id:"left",type:"source",position:Ae.Left,isConnectable:!0,style:{width:"8px",height:"100%",background:"transparent",border:"none",opacity:0,cursor:"crosshair"}})]})},lde=({property:e,onUpdate:t,onDelete:n,isNew:r=!1})=>{const[i,s]=P.useState(r),o=f=>{t(e.id,{value:f})},l=(f,h)=>{t(e.id,{[f]:h})},c=[{value:"text",label:"Text"},{value:"textarea",label:"Text Area"},{value:"number",label:"Number"},{value:"boolean",label:"Checkbox"}];return w.jsxs("div",{className:"border border-theme rounded-lg overflow-hidden bg-[var(--bg-hover)]/30",children:[w.jsxs("div",{className:"flex items-center justify-between p-2 bg-[var(--bg-hover)]/50",children:[w.jsxs("button",{type:"button",onClick:()=>s(!i),className:"flex items-center gap-2 flex-1 text-left hover:text-[var(--brand)] transition-colors",children:[i?w.jsx(Bee,{size:18}):w.jsx(Iee,{size:18}),w.jsx("span",{className:"text-sm font-medium text-theme truncate",children:e.label||"Unnamed Property"})]}),w.jsx("button",{type:"button",onClick:()=>n(e.id),className:"p-1 hover:bg-red-500/10 hover:text-red-500 rounded transition-colors",title:"Delete custom property",children:w.jsx(rk,{size:16})})]}),i&&w.jsxs("div",{className:"p-3 space-y-3 border-t border-theme",children:[w.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[w.jsx(dh,{id:`${e.id}-key`,label:"Key",value:e.key,onChange:f=>l("key",f),placeholder:"e.g., customField"}),w.jsx(dh,{id:`${e.id}-label`,label:"Label",value:e.label,onChange:f=>l("label",f),placeholder:"e.g., Custom Field"})]}),w.jsx(Bz,{id:`${e.id}-type`,label:"Type",value:e.type,options:c.map(f=>f.value),onChange:f=>{l("type",f),f==="boolean"?l("value",!1):f==="number"?l("value",0):l("value","")}}),w.jsxs("div",{className:"border-t border-theme pt-3",children:[w.jsx("div",{className:"text-xs font-semibold text-muted uppercase tracking-wide mb-2",children:"Current Value"}),e.type==="text"&&w.jsx(dh,{id:`${e.id}-value`,label:"",value:String(e.value),onChange:o,placeholder:"Enter value"}),e.type==="textarea"&&w.jsx(mp,{id:`${e.id}-value`,label:"",value:String(e.value),onChange:o,placeholder:"Enter value"}),e.type==="number"&&w.jsx(Pz,{id:`${e.id}-value`,label:"",value:Number(e.value)||0,onChange:f=>o(f)}),e.type==="boolean"&&w.jsx("div",{className:"pt-1",children:w.jsx(Lz,{id:`${e.id}-value`,checked:!!e.value,onChange:o,label:"Enabled"})})]})]})]})},ude=Pe.memo(e=>{const t=e.data;return w.jsx(LV,{id:e.id,data:t,onCopy:e.onCopy,isInGroup:e.isInGroup})}),cde=(e,t)=>n=>{const r=t.find(i=>i.id===n.id)?.parentId!==void 0;return w.jsx(ude,{...n,onCopy:e,isInGroup:r})},fde=()=>{Tl();const e=Op(),n=AF()?.id,{screenToFlowPosition:r}=Kc(),[i,s]=P.useState(null),[o,l]=P.useState(!0),[c,f]=P.useState(null);P.useEffect(()=>{if(!n){l(!1),f("No problem ID provided");return}if(n==="free"){s({id:"free",title:"Free Design Canvas",description:"Create your own system design from scratch",difficulty:"Medium",category:"Custom",estimated_time:"Unlimited",requirements:[],constraints:[],hints:[],tags:["custom","free-design"]}),l(!1);return}if(n.startsWith("custom-")){const oe=localStorage.getItem(`custom-problem-${n}`);if(oe){s(JSON.parse(oe)),l(!1);return}}(async()=>{try{l(!0),f(null);const he=await fetch(`https://diagrammatic-api.vercel.app/api/v1/problem/${n}`);if(!he.ok)throw new Error(`Failed to fetch problem: ${he.status} ${he.statusText}`);const xe=await he.json();s(xe)}catch(oe){f(oe instanceof Error?oe.message:"An error occurred while fetching the problem"),console.error("Error fetching problem:",oe)}finally{l(!1)}})()},[n]);const h=()=>e("/"),p=(()=>{if(!i)return"";const ue=i.difficulty;return ue==="Easy"?"bg-green-100 text-green-800 dark:bg-green-900 dark:text-green-200":ue==="Medium"?"bg-yellow-100 text-yellow-800 dark:bg-yellow-900 dark:text-yellow-200":"bg-red-100 text-red-800 dark:bg-red-900 dark:text-red-200"})(),{state:g,setState:y,undo:b,redo:S,canUndo:x,canRedo:C}=Hee({nodes:[],edges:[]}),[T,k,A]=fae(g.nodes),[M,_,R]=dae(g.edges),{getNodes:O,fitView:I}=Kc(),[$,q]=P.useState(!1),[U,X]=P.useState(!1);P.useEffect(()=>{const ue=setTimeout(()=>{y({nodes:T,edges:M})},300);return()=>clearTimeout(ue)},[T,M,y]),P.useEffect(()=>{k(g.nodes),_(g.edges)},[g,k,_]),P.useEffect(()=>{const ue=oe=>{(oe.ctrlKey||oe.metaKey)&&oe.key==="z"&&!oe.shiftKey&&(oe.preventDefault(),b()),((oe.ctrlKey||oe.metaKey)&&oe.shiftKey&&oe.key==="z"||oe.ctrlKey&&oe.key==="y")&&(oe.preventDefault(),S())};return globalThis.addEventListener("keydown",ue),()=>globalThis.removeEventListener("keydown",ue)},[b,S]),P.useEffect(()=>{const ue=oe=>{$&&(oe.target.closest(".relative")||q(!1))};if($)return document.addEventListener("click",ue),()=>document.removeEventListener("click",ue)},[$]),P.useEffect(()=>{const ue=oe=>{U&&(oe.target.closest(".relative")||X(!1))};if(U)return document.addEventListener("click",ue),()=>document.removeEventListener("click",ue)},[U]);const B=ue=>{const oe={...ue,type:"customEdge",data:{label:"",hasLabel:!1}};_(he=>_6(oe,he))},[F,j]=Pe.useState(null),[z,W]=P.useState(!1),J=async()=>{if(z)return;W(!0),j(null);const ue={components:T.map(oe=>{const he=oe.data??{},xe=he.type;let ye;typeof xe=="string"?ye=xe:typeof oe.type=="string"?ye=oe.type:ye="microservice";const Se=he.label,je=typeof Se=="string"?Se:String(oe.id),He=he&&typeof he=="object"?{...he}:{},{label:Ze,icon:ht,subtitle:Ve,...st}=He;return{id:oe.id,type:ye,label:je,position:{x:oe.position?.x??0,y:oe.position?.y??0},properties:{...st,nodeData:{label:je,icon:he.icon,subtitle:he.subtitle}}}}),connections:M.map(oe=>{const he=oe.data??{},xe=he.type,ye=typeof xe=="string"?xe:"api-call",Se=he.label,je=typeof Se=="string"?Se:void 0;return{id:oe.id??`${oe.source}-${oe.target}`,source:oe.source,target:oe.target,type:ye,label:je,properties:he}}),explanation:"",keyPoints:[]};try{console.log("Running AI assessment with solution:",ue);const oe=await nde(ue,i);j(oe),ke("details")}catch(oe){console.error("Assessment failed:",oe),j({isValid:!1,score:0,feedback:[{type:"error",message:"Assessment failed. Please check your connection and try again.",category:"maintainability"}],suggestions:[],missingComponents:[],architectureStrengths:[],improvements:[]})}finally{W(!1)}},L=P.useRef(null),K=ue=>{ue.preventDefault(),ue.dataTransfer&&(ue.dataTransfer.dropEffect="move")},re=ue=>{ue.preventDefault();const oe=ue.dataTransfer?.getData("application/reactflow")||ue.dataTransfer?.getData("text/plain");let he=oe;try{oe&&(he=JSON.parse(oe).type||oe)}catch{}const xe=r({x:ue.clientX,y:ue.clientY}),ye=`${he}-${Date.now()}`,Se=Uu.find(Ze=>Ze.id===he),je=Se?.group==="Grouping",He={id:ye,position:xe,type:je?"group":"custom",style:je?{width:400,height:300,zIndex:-1}:void 0,data:{label:Se?.label??he,componentId:Se?.id,icon:Se?.icon,subtitle:Se?.description,backgroundColor:je?"rgba(100, 100, 255, 0.05)":void 0,borderColor:je?"rgba(100, 100, 255, 0.3)":void 0}};k(Ze=>[...Ze,He])},le=(ue,oe)=>{if(oe.parentId)return;const he=T.filter(ye=>ye.type==="group");let xe;for(const ye of he){if(ye.id===oe.id)continue;const Se=ye.position.x,je=ye.position.y,He=ye.style?.width||400,Ze=ye.style?.height||300,ht=oe.position.x,Ve=oe.position.y,st=10;if(ht>Se+st&&ht<Se+He-st&&Ve>je+st&&Ve<je+Ze-st){xe=ye.id;break}}xe&&k(ye=>ye.map(Se=>{if(Se.id===oe.id){const je=ye.find(Ze=>Ze.id===xe),He=je?{x:oe.position.x-je.position.x,y:oe.position.y-je.position.y}:oe.position;return{...Se,position:He,parentId:xe,extent:"parent"}}return Se}))},V=P.useCallback(()=>{const ue=we.current;ue&&k(oe=>oe.map(he=>{if(he.id===ue&&he.parentId){const xe=oe.find(je=>je.id===he.parentId);let ye=he.position.x,Se=he.position.y;return xe&&(ye+=xe.position.x,Se+=xe.position.y),{...he,position:{x:ye,y:Se},parentId:void 0,extent:void 0}}return he}))},[k]),[G,Q]=P.useState(null),[ae,se]=P.useState({}),[ge,Ce]=P.useState({}),[De,ke]=P.useState("details"),[Te,be]=P.useState(!1),we=P.useRef(null);Pe.useEffect(()=>{we.current=G},[G]);const tt=P.useRef(void 0);tt.current=ue=>{const he=ue.detail.id;k(xe=>xe.filter(ye=>ye.id!==he)),we.current===he&&(Q(null),ke("details"))};const Me=P.useRef(void 0);Me.current=ue=>{const he=ue.detail.id;Q(xe=>{const ye=xe===he?null:he;return ke(ye?"inspector":"details"),ye})};function rn(ue,oe,he,xe){return ue.map(ye=>ye.id===oe?{...ye,data:{...ye.data,label:he,hasLabel:xe},label:he}:ye)}const sn=Pe.useRef(void 0);sn.current=ue=>{const oe=ue,{id:he,label:xe,hasLabel:ye}=oe.detail;_(Se=>rn(Se,he,xe,ye))},Pe.useEffect(()=>{const ue=oe=>sn.current?.(oe);return globalThis.addEventListener("diagram:edge-label-change",ue),()=>globalThis.removeEventListener("diagram:edge-label-change",ue)},[]),Pe.useEffect(()=>{const ue=xe=>tt.current?.(xe),oe=xe=>Me.current?.(xe),he=xe=>{const ye=xe;k(Se=>Se.map(je=>{if(je.id===ye.detail.id&&je.parentId){const He=Se.find(Ve=>Ve.id===je.parentId);let Ze=je.position.x,ht=je.position.y;return He&&(Ze+=He.position.x,ht+=He.position.y),{...je,position:{x:Ze,y:ht},parentId:void 0,extent:void 0}}return je}))};return globalThis.addEventListener("diagram:node-delete",ue),globalThis.addEventListener("diagram:node-toggle",oe),globalThis.addEventListener("diagram:node-detach",he),()=>{globalThis.removeEventListener("diagram:node-delete",ue),globalThis.removeEventListener("diagram:node-toggle",oe),globalThis.removeEventListener("diagram:node-detach",he)}},[]),Pe.useEffect(()=>{if(!G)return;const ue=T.find(oe=>oe.id===G);se(ue?.data??{})},[G,T]);const _n=(ue,oe)=>{se(he=>({...he,[ue]:oe})),G&&k(he=>he.map(xe=>xe.id===G?{...xe,data:{...xe.data,[ue]:oe}}:xe))},pn=(ue,oe)=>_n(ue,oe),Wt=(ue,oe)=>_n(ue,oe),ft=(ue,oe)=>_n(ue,oe),sr=(ue,oe)=>_n(ue,oe),Fn=()=>{if(!G)return;const ue={id:`custom-${Date.now()}-${Math.random().toString(36).substring(2,11)}`,key:`customProperty${(ge[G]?.length||0)+1}`,label:`Custom Property ${(ge[G]?.length||0)+1}`,type:"text",value:""};Ce(oe=>{const he={...oe,[G]:[...oe[G]||[],ue]};return k(xe=>xe.map(ye=>ye.id===G?{...ye,data:{...ye.data,_customProperties:he[G]}}:ye)),he})},mn=(ue,oe)=>{G&&Ce(he=>{const ye=(he[G]||[]).map(Se=>Se.id===ue?{...Se,...oe}:Se);return k(Se=>Se.map(je=>je.id===G?{...je,data:{...je.data,_customProperties:ye}}:je)),{...he,[G]:ye}})},gt=ue=>{G&&Ce(oe=>{const xe=(oe[G]||[]).filter(ye=>ye.id!==ue);return k(ye=>ye.map(Se=>Se.id===G?{...Se,data:{...Se.data,_customProperties:xe}}:Se)),{...oe,[G]:xe}})};Pe.useEffect(()=>{if(!G)return;const ue=T.find(oe=>oe.id===G);ue?.data?._customProperties&&Ce(oe=>({...oe,[G]:ue.data._customProperties}))},[G,T]);const Pt=ue=>{const oe=`${G}-${ue.key}`,he=ae[ue.key];let xe;typeof he=="number"?xe=he:typeof ue.default=="number"?xe=ue.default:xe=void 0;let ye;typeof he=="string"?ye=he:ue.default===null||ue.default===void 0?ye="":ye=String(ue.default);let Se;typeof he=="string"?Se=he:ue.default===null||ue.default===void 0?Se=void 0:Se=String(ue.default);const je=!!he;return w.jsxs("div",{className:"flex flex-col px-1",children:[ue.type==="boolean"&&w.jsx(Lz,{id:oe,checked:je,onChange:He=>pn(ue.key,He),label:ue.label}),ue.type==="number"&&w.jsx(Pz,{id:oe,label:ue.label,value:xe,onChange:He=>Wt(ue.key,He)}),ue.type==="text"&&w.jsx(dh,{id:oe,label:ue.label,value:ye,placeholder:ue.placeholder,onChange:He=>ft(ue.key,He)}),ue.type==="textarea"&&w.jsx(mp,{id:oe,label:ue.label,value:ye,placeholder:ue.placeholder,onChange:He=>ft(ue.key,He)}),ue.type==="select"&&w.jsx(Bz,{id:oe,label:ue.label,value:Se,options:ue.options||[],onChange:He=>sr(ue.key,He)})]},ue.key)};let wt=null;if(G){const ue=T.find(oe=>oe.id===G);if(ue){const oe=ue.data.componentId?Uu.find(he=>he.id===ue.data.componentId):Uu.find(he=>he.label===ue.data.label);oe?.properties?wt=oe.properties.map(he=>Pt(he)):wt=w.jsx("div",{className:"text-sm text-muted",children:"No properties defined"})}else wt=w.jsx("div",{className:"text-sm text-muted",children:"Node not found"})}let or=null;if(G){const ue=ge[G]||[];ue.length>0?or=ue.map(oe=>w.jsx(lde,{property:oe,onUpdate:mn,onDelete:gt},oe.id)):or=w.jsx("div",{className:"text-xs text-muted text-center py-3",children:"No custom properties added yet"})}if(o)return w.jsx("div",{className:"min-h-screen bg-theme flex items-center justify-center",children:w.jsxs("div",{className:"text-center",children:[w.jsx("h2",{className:"text-2xl font-bold text-theme mb-4",children:"Loading problem..."}),w.jsx("div",{className:"text-muted",children:"Please wait while we fetch the problem details"})]})});if(c)return w.jsx("div",{className:"min-h-screen bg-theme flex items-center justify-center",children:w.jsxs("div",{className:"text-center",children:[w.jsx("h2",{className:"text-2xl font-bold text-theme mb-4",children:"Error Loading Problem"}),w.jsx("div",{className:"text-muted mb-4",children:c}),w.jsxs("div",{className:"flex gap-3 justify-center",children:[w.jsx("button",{onClick:h,className:"px-4 py-2 bg-accent text-white rounded-md hover:brightness-90",children:"Back to Dashboard"}),w.jsx("button",{onClick:()=>globalThis.location.reload(),className:"px-4 py-2 bg-surface border border-theme text-theme rounded-md hover:bg-[var(--bg-hover)]",children:"Retry"})]})]})});if(!i)return w.jsx("div",{className:"min-h-screen bg-theme flex items-center justify-center",children:w.jsxs("div",{className:"text-center",children:[w.jsx("h2",{className:"text-2xl font-bold text-theme mb-4",children:"Problem not found"}),w.jsx("div",{className:"text-muted mb-4",children:"The requested problem could not be found."}),w.jsx("button",{onClick:h,className:"px-4 py-2 bg-accent text-white rounded-md hover:brightness-90",children:"Back to Dashboard"})]})});function Xs(ue){const oe=Uu.find(He=>He.id===ue),he=L.current?.getBoundingClientRect();if(!he)return;const xe=r({x:he.left+he.width/2,y:he.top+he.height/2}),ye=`${ue}-${Date.now()}`,Se=oe?.group==="Grouping",je={id:ye,position:xe,type:Se?"group":"custom",style:Se?{width:400,height:300,zIndex:-1}:void 0,data:{label:oe?.label??ue,componentId:oe?.id,icon:oe?.icon,subtitle:oe?.description,backgroundColor:Se?"rgba(100, 100, 255, 0.05)":void 0,borderColor:Se?"rgba(100, 100, 255, 0.3)":void 0}};k(He=>[...He,je])}const Gi=(ue,oe)=>{const he=T.find(Se=>Se.id===ue);if(!he)return;const xe=`${ue}-copy-${Date.now()}`,ye={...he,id:xe,position:{x:he.position.x+200,y:he.position.y+100},data:{...oe},selected:!1};k(Se=>[...Se,ye])},on=()=>{T.length===0&&M.length===0||be(!0)},gn=()=>{k([]),_([]),Q(null),j(null),be(!1)},Ar=()=>{be(!1)},Vr=(ue="png")=>{const oe=b6(O()),he=cm(oe,1024,768,.5,2,.2),xe=document.querySelector(".react-flow__viewport");if(!xe){console.error("Viewport element not found");return}let ye,Se;ue==="svg"?(ye=Oq,Se="svg"):ue==="jpeg"?(ye=Ole,Se="jpg"):(ye=Dle,Se="png"),ye(xe,{backgroundColor:ue==="png"?"transparent":"#ffffff",width:1024,height:768,style:{width:"1024px",height:"768px",transform:`translate(${he.x}px, ${he.y}px) scale(${he.zoom})`}}).then(je=>{const He=document.createElement("a");He.setAttribute("download",`system-design-${Date.now()}.${Se}`),He.setAttribute("href",je),He.click()}).catch(je=>{console.error("Error generating image:",je)})},Hr=(ue="TB")=>{const oe=T.filter(Ve=>Ve.type==="group"),he=T.filter(Ve=>Ve.type!=="group"&&!Ve.parentId),xe=new nh.graphlib.Graph;xe.setDefaultEdgeLabel(()=>({})),xe.setGraph({rankdir:ue,nodesep:150,ranksep:200,marginx:50,marginy:50});const ye=350,Se=250;oe.forEach(Ve=>{xe.setNode(Ve.id,{width:ye,height:Se})}),M.filter(Ve=>oe.some(st=>st.id===Ve.source)&&oe.some(st=>st.id===Ve.target)).forEach(Ve=>{xe.setEdge(Ve.source,Ve.target)}),oe.length>0&&nh.layout(xe);const je=new nh.graphlib.Graph;je.setDefaultEdgeLabel(()=>({})),je.setGraph({rankdir:ue,nodesep:80,ranksep:100});const He=200,Ze=80;he.forEach(Ve=>{je.setNode(Ve.id,{width:He,height:Ze})}),M.filter(Ve=>he.some(st=>st.id===Ve.source)&&he.some(st=>st.id===Ve.target)).forEach(Ve=>{je.setEdge(Ve.source,Ve.target)}),he.length>0&&nh.layout(je);const ht=T.map(Ve=>{if(Ve.type==="group"){const st=xe.node(Ve.id);if(st)return{...Ve,position:{x:st.x-ye/2,y:st.y-Se/2}}}else{if(Ve.parentId)return Ve;{const st=je.node(Ve.id);if(st){const Bl=oe.length>0?ye+100:0;return{...Ve,position:{x:st.x-He/2+Bl,y:st.y-Ze/2}}}}}return Ve});k(ht),globalThis.requestAnimationFrame(()=>{I({padding:.2,duration:400})})},Pl={custom:cde(Gi,T),group:ade},sa={customEdge:ode},oa=()=>{if(k(ue=>ue.map(oe=>oe.id===G?{...oe,data:{...oe.data,...ae}}:oe)),G){const ue=T.find(oe=>oe.id===G);console.log("Node properties saved:",{id:G,data:ue?.data,nodeProps:ae})}},Zs=n==="free"?"Free Design Canvas | Diagrammatic":`${i?.title||"System Design Challenge"} | Diagrammatic`,li=n==="free"?"Create system architecture diagrams from scratch with our free interactive canvas. Design, prototype, and visualize your ideas with 45+ components.":`Solve the ${i?.title||"system design"} challenge. ${i?.description?.substring(0,150)||"Practice system design skills"}...`;return w.jsxs(w.Fragment,{children:[w.jsx(Lp,{title:Zs,description:li,keywords:`system design playground, ${i?.title||"free canvas"}, architecture diagram tool, ${i?.category||"design tool"}`,url:`https://satya00089.github.io/diagrammatic/#/playground/${n||"free"}`}),w.jsxs("div",{className:"h-screen flex flex-col bg-theme",children:[w.jsx("div",{className:"bg-surface shadow-sm border-b border-theme px-4 py-1",children:w.jsxs("div",{className:"flex items-center justify-between",children:[w.jsxs("div",{className:"flex items-center space-x-4",children:[w.jsx("button",{onClick:h,className:"px-3 py-2 text-muted hover:text-theme hover:bg-[var(--bg-hover)] rounded-md transition-colors cursor-pointer",children:"← Back to Dashboard"}),w.jsxs("div",{className:"flex items-center space-x-3",children:[w.jsx("h1",{className:"text-lg font-semibold text-theme",children:i.title}),w.jsx("span",{className:`px-2 py-1 rounded text-xs ${p}`,children:i.difficulty}),w.jsx("span",{className:"text-sm text-muted",children:i.estimated_time}),w.jsx("span",{className:"text-sm text-muted",children:"•"}),w.jsx("span",{className:"text-sm text-muted",children:i.category})]})]}),w.jsxs("div",{className:"flex items-center space-x-2",children:[w.jsxs("div",{className:"flex items-center border-r border-theme/10 pr-2 mr-2",children:[w.jsx("button",{type:"button",onClick:b,disabled:!x,className:"p-2 text-muted hover:text-theme hover:bg-[var(--bg-hover)] rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer",title:"Undo (Ctrl+Z)",children:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})})}),w.jsx("button",{type:"button",onClick:S,disabled:!C,className:"p-2 text-muted hover:text-theme hover:bg-[var(--bg-hover)] rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer",title:"Redo (Ctrl+Y or Ctrl+Shift+Z)",children:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 10h-10a8 8 0 00-8 8v2M21 10l-6 6m6-6l-6-6"})})})]}),w.jsx("button",{type:"button",onClick:on,disabled:T.length===0&&M.length===0,className:"p-2 text-muted hover:text-red-600 hover:bg-red-50 dark:hover:bg-red-900/20 rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer border-r border-theme/10 pr-2 mr-2",title:"Clear Canvas",children:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})})}),w.jsxs("div",{className:"relative border-r border-theme/10 pr-2 mr-2",children:[w.jsx("button",{type:"button",onClick:()=>q(!$),disabled:T.length===0,className:"p-2 text-muted hover:text-theme hover:bg-[var(--bg-hover)] rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer",title:"Download as Image",children:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"})})}),$&&w.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-surface shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[120px]",children:[w.jsx("button",{type:"button",onClick:()=>{Vr("png"),q(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"PNG"}),w.jsx("button",{type:"button",onClick:()=>{Vr("jpeg"),q(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"JPEG"}),w.jsx("button",{type:"button",onClick:()=>{Vr("svg"),q(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"SVG"})]})]}),w.jsxs("div",{className:"relative border-r border-theme/10 pr-2 mr-2",children:[w.jsx("button",{type:"button",onClick:()=>X(!U),disabled:T.length===0,className:"p-2 text-muted hover:text-theme hover:bg-[var(--bg-hover)] rounded-md transition-colors disabled:opacity-30 disabled:cursor-not-allowed cursor-pointer",title:"Auto Layout",children:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",strokeWidth:2,children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4 5a1 1 0 011-1h4a1 1 0 011 1v7a1 1 0 01-1 1H5a1 1 0 01-1-1V5zM14 5a1 1 0 011-1h4a1 1 0 011 1v7a1 1 0 01-1 1h-4a1 1 0 01-1-1V5zM4 16a1 1 0 011-1h4a1 1 0 011 1v3a1 1 0 01-1 1H5a1 1 0 01-1-1v-3zM14 16a1 1 0 011-1h4a1 1 0 011 1v3a1 1 0 01-1 1h-4a1 1 0 01-1-1v-3z"})})}),U&&w.jsxs("div",{className:"absolute top-full right-0 mt-1 bg-surface shadow-lg rounded-lg border border-theme/10 py-1 z-50 min-w-[160px]",children:[w.jsx("button",{type:"button",onClick:()=>{Hr("TB"),X(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"Vertical Layout"}),w.jsx("button",{type:"button",onClick:()=>{Hr("LR"),X(!1)},className:"w-full px-4 py-2 text-left text-sm text-theme hover:bg-[var(--bg-hover)] transition-colors cursor-pointer",children:"Horizontal Layout"})]})]}),w.jsx(jp,{}),i?.id!=="free"&&w.jsx("button",{type:"button",onClick:J,disabled:z,className:"px-6 py-1 bg-[var(--brand)] text-white font-bold rounded-md hover:brightness-95 disabled:opacity-50 disabled:cursor-not-allowed cursor-pointer",title:"Run assessment on current design",children:z?"Assessing...":"Run Assessment"})]})]})}),w.jsxs("div",{className:"flex-1 flex min-h-0",children:[w.jsx(Jfe,{components:Uu,onAdd:Xs}),w.jsx(ede,{reactFlowWrapperRef:L,nodes:T,edges:M,nodeTypes:Pl,edgeTypes:sa,onNodesChange:A,onEdgesChange:R,onConnect:B,onDragOver:K,onDrop:re,onNodeDragStop:le}),w.jsx(tde,{problem:i,activeTab:De,setActiveTab:ke,inspectedNodeId:G,setInspectedNodeId:Q,propertyElements:wt,customPropertyElements:or,onAddCustomProperty:Fn,handleSave:oa,assessmentResult:F,onDetachFromGroup:V,isNodeInGroup:G?T.find(ue=>ue.id===G)?.parentId!==void 0:!1})]}),Te&&w.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50",children:w.jsxs("div",{className:"bg-surface rounded-2xl shadow-2xl p-6 max-w-md w-full mx-4 border border-theme/10",children:[w.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[w.jsx("div",{className:"w-12 h-12 rounded-full bg-red-100 dark:bg-red-900/20 flex items-center justify-center",children:w.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",className:"h-6 w-6 text-red-600 dark:text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:w.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),w.jsxs("div",{children:[w.jsx("h3",{className:"text-lg font-bold text-theme",children:"Clear Canvas?"}),w.jsx("p",{className:"text-sm text-muted",children:"This action cannot be undone"})]})]}),w.jsx("p",{className:"text-muted mb-6",children:"Are you sure you want to clear all components and connections from the canvas? You will lose all your current work."}),w.jsxs("div",{className:"flex space-x-3",children:[w.jsx("button",{type:"button",onClick:Ar,className:"flex-1 px-4 py-2 bg-theme/5 hover:bg-theme/10 text-theme font-medium rounded-lg transition-colors cursor-pointer",children:"Cancel"}),w.jsx("button",{type:"button",onClick:gn,className:"flex-1 px-4 py-2 bg-red-600 hover:bg-red-700 text-white font-bold rounded-lg transition-colors cursor-pointer",children:"Clear All"})]})]})})]})]})},dde=()=>w.jsx(xq,{children:w.jsx(fde,{})}),hde=()=>(Tl(),w.jsx(GF,{future:{v7_startTransition:!0,v7_relativeSplatPath:!0},children:w.jsxs(FF,{children:[w.jsx(Wa,{path:"/",element:w.jsx(LM,{})}),w.jsx(Wa,{path:"/problems",element:w.jsx(FU,{})}),w.jsx(Wa,{path:"/create-problem",element:w.jsx(Vee,{})}),w.jsx(Wa,{path:"/playground/:id",element:w.jsx(dde,{})}),w.jsx(Wa,{path:"*",element:w.jsx(LM,{})})]})}));W8.createRoot(document.getElementById("root")).render(w.jsx(P.StrictMode,{children:w.jsx(hde,{})}));
